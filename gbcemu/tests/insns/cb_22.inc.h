    TEST(gbcemu, opcode_cb_22) {
        GBCEmu gbc{"", nullptr};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 22 0000
        gbc.setState(0x1a2d, 0x879b, 0x1da0, 0x813, 0x7807, 0xcd95, 0x1, 0x1);
        gbc.writeMem(0x1a2d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x879b, gbc.sp());
        EXPECT(0x1a2f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0001
        gbc.setState(0xbe5d, 0x9eff, 0xaa50, 0x8270, 0xd96f, 0xd7f5, 0x1, 0x0);
        gbc.writeMem(0xbe5d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x9eff, gbc.sp());
        EXPECT(0xbe5f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe5d));
        EXPECT(0x22, gbc.readMem(0xbe5e));
        // CB 22 0002
        gbc.setState(0x61d7, 0xc38, 0xe00, 0x2a53, 0xee55, 0xcbe6, 0x0, 0x1);
        gbc.writeMem(0x61d7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xc38, gbc.sp());
        EXPECT(0x61d9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0003
        gbc.setState(0xbb72, 0xca3e, 0xcb00, 0xaac0, 0xa111, 0xc31b, 0x0, 0x0);
        gbc.writeMem(0xbb72, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xca3e, gbc.sp());
        EXPECT(0xbb74, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb72));
        EXPECT(0x22, gbc.readMem(0xbb73));
        // CB 22 0004
        gbc.setState(0xdea9, 0xf880, 0x3a00, 0x78c, 0xd609, 0x6f2d, 0x0, 0x0);
        gbc.writeMem(0xdea9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xf880, gbc.sp());
        EXPECT(0xdeab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdea9));
        EXPECT(0x22, gbc.readMem(0xdeaa));
        // CB 22 0005
        gbc.setState(0x8d52, 0x6ea3, 0xf210, 0x356a, 0x3b96, 0xa712, 0x0, 0x1);
        gbc.writeMem(0x8d52, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x6ea3, gbc.sp());
        EXPECT(0x8d54, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d52));
        EXPECT(0x22, gbc.readMem(0x8d53));
        // CB 22 0006
        gbc.setState(0x7e84, 0x78ed, 0x3cc0, 0x78b7, 0x1e83, 0x355a, 0x1, 0x1);
        gbc.writeMem(0x7e84, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x78ed, gbc.sp());
        EXPECT(0x7e86, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0007
        gbc.setState(0xa4e4, 0x5ee1, 0x5d70, 0xa68e, 0x8780, 0x6a9c, 0x0, 0x0);
        gbc.writeMem(0xa4e4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x5ee1, gbc.sp());
        EXPECT(0xa4e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa4e4));
        EXPECT(0x22, gbc.readMem(0xa4e5));
        // CB 22 0008
        gbc.setState(0x8895, 0x973, 0x8d80, 0xfbfc, 0xc28d, 0xe482, 0x1, 0x1);
        gbc.writeMem(0x8895, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x973, gbc.sp());
        EXPECT(0x8897, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8895));
        EXPECT(0x22, gbc.readMem(0x8896));
        // CB 22 0009
        gbc.setState(0x22ce, 0x94a0, 0x9dd0, 0x9fed, 0x78f3, 0x673c, 0x1, 0x1);
        gbc.writeMem(0x22ce, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x94a0, gbc.sp());
        EXPECT(0x22d0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 000A
        gbc.setState(0x4197, 0x6662, 0x7650, 0x2710, 0xccf3, 0xb326, 0x0, 0x0);
        gbc.writeMem(0x4197, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x6662, gbc.sp());
        EXPECT(0x4199, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 000B
        gbc.setState(0x1b61, 0x6545, 0x32e0, 0x6a63, 0xee09, 0xe7bf, 0x0, 0x0);
        gbc.writeMem(0x1b61, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x6545, gbc.sp());
        EXPECT(0x1b63, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 000C
        gbc.setState(0x68bb, 0x18f4, 0x27a0, 0x995d, 0x3e2d, 0xc2e4, 0x0, 0x1);
        gbc.writeMem(0x68bb, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x18f4, gbc.sp());
        EXPECT(0x68bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 000E
        gbc.setState(0x300a, 0x431, 0x5dd0, 0xd8b3, 0x7f9b, 0xbdb3, 0x1, 0x0);
        gbc.writeMem(0x300a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x431, gbc.sp());
        EXPECT(0x300c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 000F
        gbc.setState(0xa823, 0x3ea0, 0xe170, 0xba66, 0x7b35, 0x7a55, 0x0, 0x0);
        gbc.writeMem(0xa823, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x3ea0, gbc.sp());
        EXPECT(0xa825, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa823));
        EXPECT(0x22, gbc.readMem(0xa824));
        // CB 22 0010
        gbc.setState(0xcd24, 0x684a, 0x8e90, 0x5ca7, 0x7296, 0x6fc, 0x1, 0x1);
        gbc.writeMem(0xcd24, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x684a, gbc.sp());
        EXPECT(0xcd26, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd24));
        EXPECT(0x22, gbc.readMem(0xcd25));
        // CB 22 0011
        gbc.setState(0xcaaa, 0xe331, 0xb940, 0x82a5, 0x3979, 0x86b7, 0x1, 0x0);
        gbc.writeMem(0xcaaa, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xe331, gbc.sp());
        EXPECT(0xcaac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcaaa));
        EXPECT(0x22, gbc.readMem(0xcaab));
        // CB 22 0012
        gbc.setState(0xffb, 0x92, 0xa3f0, 0x8580, 0x85c9, 0xdcf6, 0x0, 0x1);
        gbc.writeMem(0xffb, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x92, gbc.sp());
        EXPECT(0xffd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0013
        gbc.setState(0x60ea, 0x5790, 0xda30, 0x8e10, 0x1002, 0xf11d, 0x1, 0x1);
        gbc.writeMem(0x60ea, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x5790, gbc.sp());
        EXPECT(0x60ec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0014
        gbc.setState(0x1d82, 0x5773, 0xb5b0, 0xb808, 0x5190, 0x5de, 0x1, 0x1);
        gbc.writeMem(0x1d82, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x5773, gbc.sp());
        EXPECT(0x1d84, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0015
        gbc.setState(0x642, 0x2ad0, 0xe720, 0xfeac, 0x7dfb, 0xb557, 0x1, 0x1);
        gbc.writeMem(0x642, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x2ad0, gbc.sp());
        EXPECT(0x644, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0016
        gbc.setState(0x2ba6, 0x372a, 0x3e60, 0xb5d9, 0xffb8, 0x965e, 0x0, 0x1);
        gbc.writeMem(0x2ba6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x372a, gbc.sp());
        EXPECT(0x2ba8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0017
        gbc.setState(0x8884, 0xec37, 0xf050, 0x95dd, 0xba6a, 0xa0bc, 0x1, 0x1);
        gbc.writeMem(0x8884, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0xec37, gbc.sp());
        EXPECT(0x8886, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8884));
        EXPECT(0x22, gbc.readMem(0x8885));
        // CB 22 0019
        gbc.setState(0xc22e, 0x9aac, 0x4040, 0x929, 0x6424, 0xdca8, 0x1, 0x0);
        gbc.writeMem(0xc22e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x9aac, gbc.sp());
        EXPECT(0xc230, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc22e));
        EXPECT(0x22, gbc.readMem(0xc22f));
        // CB 22 001A
        gbc.setState(0x9840, 0x1174, 0x73c0, 0xcc42, 0x48b1, 0x3b87, 0x1, 0x0);
        gbc.writeMem(0x9840, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x1174, gbc.sp());
        EXPECT(0x9842, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9840));
        EXPECT(0x22, gbc.readMem(0x9841));
        // CB 22 001B
        gbc.setState(0xaef6, 0x9196, 0x7fe0, 0xdfe6, 0xe03b, 0xcc65, 0x0, 0x0);
        gbc.writeMem(0xaef6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x9196, gbc.sp());
        EXPECT(0xaef8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaef6));
        EXPECT(0x22, gbc.readMem(0xaef7));
        // CB 22 001C
        gbc.setState(0x49a0, 0x4e3f, 0xf60, 0xfa9c, 0xc952, 0x5f51, 0x0, 0x0);
        gbc.writeMem(0x49a0, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x4e3f, gbc.sp());
        EXPECT(0x49a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 001D
        gbc.setState(0x914e, 0x7ce4, 0xc340, 0x5879, 0x9663, 0x2865, 0x1, 0x1);
        gbc.writeMem(0x914e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x7ce4, gbc.sp());
        EXPECT(0x9150, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x914e));
        EXPECT(0x22, gbc.readMem(0x914f));
        // CB 22 001E
        gbc.setState(0xe3bd, 0xbc01, 0x31d0, 0xceb3, 0x9a7e, 0x4e4d, 0x1, 0x0);
        gbc.writeMem(0xe3bd, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xbc01, gbc.sp());
        EXPECT(0xe3bf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe3bd));
        EXPECT(0x22, gbc.readMem(0xe3be));
        // CB 22 001F
        gbc.setState(0x72f6, 0x13ce, 0xf6b0, 0x3620, 0xeed5, 0x254a, 0x0, 0x1);
        gbc.writeMem(0x72f6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x13ce, gbc.sp());
        EXPECT(0x72f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0020
        gbc.setState(0x3802, 0xa2ad, 0x56e0, 0x77e7, 0x71c0, 0x88d8, 0x0, 0x1);
        gbc.writeMem(0x3802, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xa2ad, gbc.sp());
        EXPECT(0x3804, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0021
        gbc.setState(0xeaf0, 0xb736, 0x1ef0, 0x754b, 0xaefb, 0x2104, 0x1, 0x1);
        gbc.writeMem(0xeaf0, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xb736, gbc.sp());
        EXPECT(0xeaf2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeaf0));
        EXPECT(0x22, gbc.readMem(0xeaf1));
        // CB 22 0022
        gbc.setState(0xe607, 0x5ce6, 0x9330, 0x2b56, 0xc83f, 0xc727, 0x0, 0x0);
        gbc.writeMem(0xe607, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x5ce6, gbc.sp());
        EXPECT(0xe609, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe607));
        EXPECT(0x22, gbc.readMem(0xe608));
        // CB 22 0023
        gbc.setState(0xaa2c, 0x1694, 0x9150, 0x29db, 0xd2f8, 0x1443, 0x0, 0x0);
        gbc.writeMem(0xaa2c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x1694, gbc.sp());
        EXPECT(0xaa2e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa2c));
        EXPECT(0x22, gbc.readMem(0xaa2d));
        // CB 22 0024
        gbc.setState(0xceae, 0x76c9, 0x6c50, 0x646f, 0x1cec, 0x582c, 0x1, 0x1);
        gbc.writeMem(0xceae, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x76c9, gbc.sp());
        EXPECT(0xceb0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xceae));
        EXPECT(0x22, gbc.readMem(0xceaf));
        // CB 22 0025
        gbc.setState(0xec9c, 0x6919, 0xdc30, 0x86f4, 0x28ca, 0x6b78, 0x1, 0x0);
        gbc.writeMem(0xec9c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x6919, gbc.sp());
        EXPECT(0xec9e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec9c));
        EXPECT(0x22, gbc.readMem(0xec9d));
        // CB 22 0026
        gbc.setState(0x6432, 0x1d20, 0xaa90, 0x1ff3, 0xeee8, 0xc87f, 0x1, 0x0);
        gbc.writeMem(0x6432, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x1d20, gbc.sp());
        EXPECT(0x6434, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0027
        gbc.setState(0x6a6a, 0xaba0, 0xb500, 0x409c, 0xa7da, 0x8c4e, 0x1, 0x0);
        gbc.writeMem(0x6a6a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xaba0, gbc.sp());
        EXPECT(0x6a6c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0028
        gbc.setState(0x205e, 0x74e, 0x6ee0, 0xb4b2, 0xa45f, 0xc25d, 0x1, 0x1);
        gbc.writeMem(0x205e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x74e, gbc.sp());
        EXPECT(0x2060, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0029
        gbc.setState(0x2b41, 0xf826, 0x7470, 0xe76e, 0x3e3d, 0x906a, 0x1, 0x0);
        gbc.writeMem(0x2b41, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xf826, gbc.sp());
        EXPECT(0x2b43, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 002A
        gbc.setState(0x87c2, 0xd1be, 0x53e0, 0xaec5, 0xdd78, 0x6eae, 0x0, 0x0);
        gbc.writeMem(0x87c2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xd1be, gbc.sp());
        EXPECT(0x87c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x87c2));
        EXPECT(0x22, gbc.readMem(0x87c3));
        // CB 22 002B
        gbc.setState(0x4b4e, 0xb25f, 0x3ab0, 0x57fd, 0xf064, 0xcadc, 0x0, 0x1);
        gbc.writeMem(0x4b4e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xb25f, gbc.sp());
        EXPECT(0x4b50, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 002C
        gbc.setState(0xb312, 0x7df, 0x34c0, 0x9f76, 0x94c0, 0x2b89, 0x0, 0x1);
        gbc.writeMem(0xb312, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x7df, gbc.sp());
        EXPECT(0xb314, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb312));
        EXPECT(0x22, gbc.readMem(0xb313));
        // CB 22 002D
        gbc.setState(0x2cbe, 0x676f, 0xa0b0, 0x55e, 0xa82e, 0xaf5a, 0x0, 0x1);
        gbc.writeMem(0x2cbe, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x676f, gbc.sp());
        EXPECT(0x2cc0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 002E
        gbc.setState(0xa8d3, 0xe070, 0x1070, 0xcdec, 0xe107, 0xb36e, 0x0, 0x0);
        gbc.writeMem(0xa8d3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xe070, gbc.sp());
        EXPECT(0xa8d5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa8d3));
        EXPECT(0x22, gbc.readMem(0xa8d4));
        // CB 22 0030
        gbc.setState(0x958d, 0x90a0, 0xed50, 0xde9f, 0xab10, 0x7cd4, 0x1, 0x0);
        gbc.writeMem(0x958d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x90a0, gbc.sp());
        EXPECT(0x958f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x958d));
        EXPECT(0x22, gbc.readMem(0x958e));
        // CB 22 0031
        gbc.setState(0xab43, 0xfd48, 0x6110, 0xa382, 0xd8c8, 0xed20, 0x0, 0x0);
        gbc.writeMem(0xab43, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0xfd48, gbc.sp());
        EXPECT(0xab45, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab43));
        EXPECT(0x22, gbc.readMem(0xab44));
        // CB 22 0032
        gbc.setState(0xbac1, 0xe6ff, 0x15d0, 0x2a83, 0x10a3, 0xf97d, 0x0, 0x0);
        gbc.writeMem(0xbac1, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xe6ff, gbc.sp());
        EXPECT(0xbac3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbac1));
        EXPECT(0x22, gbc.readMem(0xbac2));
        // CB 22 0033
        gbc.setState(0x71f8, 0xb4c0, 0x5120, 0xa8a5, 0xc688, 0xccc0, 0x1, 0x1);
        gbc.writeMem(0x71f8, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xb4c0, gbc.sp());
        EXPECT(0x71fa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0034
        gbc.setState(0xb10b, 0x71a2, 0xbbd0, 0x4be0, 0xbfed, 0x2c0c, 0x0, 0x1);
        gbc.writeMem(0xb10b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x71a2, gbc.sp());
        EXPECT(0xb10d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb10b));
        EXPECT(0x22, gbc.readMem(0xb10c));
        // CB 22 0035
        gbc.setState(0x17bc, 0xdce0, 0x6600, 0xaa79, 0xada9, 0x7b6e, 0x1, 0x0);
        gbc.writeMem(0x17bc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xdce0, gbc.sp());
        EXPECT(0x17be, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0036
        gbc.setState(0x684e, 0xcc63, 0xb920, 0xf3e7, 0xcd8c, 0x7d16, 0x0, 0x0);
        gbc.writeMem(0x684e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0xcc63, gbc.sp());
        EXPECT(0x6850, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0037
        gbc.setState(0xe466, 0x4387, 0x4b00, 0x3bb3, 0xdda3, 0x7a6c, 0x0, 0x0);
        gbc.writeMem(0xe466, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x4387, gbc.sp());
        EXPECT(0xe468, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe466));
        EXPECT(0x22, gbc.readMem(0xe467));
        // CB 22 0038
        gbc.setState(0x8d42, 0x3dad, 0xb470, 0x68d9, 0xb56a, 0xb669, 0x1, 0x1);
        gbc.writeMem(0x8d42, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x3dad, gbc.sp());
        EXPECT(0x8d44, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d42));
        EXPECT(0x22, gbc.readMem(0x8d43));
        // CB 22 0039
        gbc.setState(0x4c94, 0xaa67, 0x3aa0, 0xfcf9, 0xed4d, 0x7252, 0x0, 0x1);
        gbc.writeMem(0x4c94, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xaa67, gbc.sp());
        EXPECT(0x4c96, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 003A
        gbc.setState(0x9dee, 0x9772, 0xad80, 0xafca, 0xa44a, 0xdcbb, 0x1, 0x1);
        gbc.writeMem(0x9dee, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x9772, gbc.sp());
        EXPECT(0x9df0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9dee));
        EXPECT(0x22, gbc.readMem(0x9def));
        // CB 22 003B
        gbc.setState(0x802, 0xe5bb, 0xa7d0, 0x903b, 0x5b54, 0xa27d, 0x0, 0x1);
        gbc.writeMem(0x802, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xe5bb, gbc.sp());
        EXPECT(0x804, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 003C
        gbc.setState(0xb754, 0x4cf2, 0x7910, 0x37d3, 0x86cf, 0x7964, 0x0, 0x1);
        gbc.writeMem(0xb754, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0x4cf2, gbc.sp());
        EXPECT(0xb756, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb754));
        EXPECT(0x22, gbc.readMem(0xb755));
        // CB 22 003D
        gbc.setState(0xc41a, 0x7200, 0xf250, 0xaa94, 0xb1ee, 0x7762, 0x0, 0x1);
        gbc.writeMem(0xc41a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x7200, gbc.sp());
        EXPECT(0xc41c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc41a));
        EXPECT(0x22, gbc.readMem(0xc41b));
        // CB 22 003E
        gbc.setState(0xb9d4, 0xbc9b, 0x8c60, 0x6b42, 0xdc2a, 0x3d39, 0x0, 0x1);
        gbc.writeMem(0xb9d4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xbc9b, gbc.sp());
        EXPECT(0xb9d6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb9d4));
        EXPECT(0x22, gbc.readMem(0xb9d5));
        // CB 22 003F
        gbc.setState(0x868e, 0x4b3e, 0x8650, 0x6537, 0x8384, 0xcd1e, 0x0, 0x1);
        gbc.writeMem(0x868e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x4b3e, gbc.sp());
        EXPECT(0x8690, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x868e));
        EXPECT(0x22, gbc.readMem(0x868f));
        // CB 22 0040
        gbc.setState(0xdffe, 0x6432, 0x8530, 0xe9b2, 0xa64b, 0xd96d, 0x1, 0x1);
        gbc.writeMem(0xdffe, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x6432, gbc.sp());
        EXPECT(0xe000, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdffe));
        EXPECT(0x22, gbc.readMem(0xdfff));
        // CB 22 0041
        gbc.setState(0xc8f5, 0x6b37, 0x6500, 0xb444, 0x2463, 0x5483, 0x1, 0x0);
        gbc.writeMem(0xc8f5, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x6b37, gbc.sp());
        EXPECT(0xc8f7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8f5));
        EXPECT(0x22, gbc.readMem(0xc8f6));
        // CB 22 0042
        gbc.setState(0x8c28, 0xf115, 0xde20, 0x7cd0, 0x16bb, 0x4179, 0x0, 0x1);
        gbc.writeMem(0x8c28, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0xf115, gbc.sp());
        EXPECT(0x8c2a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c28));
        EXPECT(0x22, gbc.readMem(0x8c29));
        // CB 22 0043
        gbc.setState(0xc647, 0x6243, 0x3640, 0x2793, 0xe3d0, 0x7098, 0x0, 0x0);
        gbc.writeMem(0xc647, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x6243, gbc.sp());
        EXPECT(0xc649, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc647));
        EXPECT(0x22, gbc.readMem(0xc648));
        // CB 22 0044
        gbc.setState(0x746d, 0x996, 0x1f00, 0x86e8, 0xbec3, 0x7129, 0x1, 0x1);
        gbc.writeMem(0x746d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x996, gbc.sp());
        EXPECT(0x746f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0045
        gbc.setState(0x749d, 0x4bc2, 0xe160, 0x323, 0x7bae, 0xa834, 0x1, 0x1);
        gbc.writeMem(0x749d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x4bc2, gbc.sp());
        EXPECT(0x749f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0046
        gbc.setState(0x19ac, 0x3c63, 0xd000, 0x6659, 0xd399, 0xd3e6, 0x0, 0x1);
        gbc.writeMem(0x19ac, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x3c63, gbc.sp());
        EXPECT(0x19ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0048
        gbc.setState(0x91cc, 0x7e3b, 0xa4e0, 0x4930, 0xf48, 0x6ca0, 0x0, 0x1);
        gbc.writeMem(0x91cc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x7e3b, gbc.sp());
        EXPECT(0x91ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x91cc));
        EXPECT(0x22, gbc.readMem(0x91cd));
        // CB 22 0049
        gbc.setState(0x3292, 0xcf6f, 0xbe60, 0x5c96, 0x85d7, 0x8532, 0x1, 0x1);
        gbc.writeMem(0x3292, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0xcf6f, gbc.sp());
        EXPECT(0x3294, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 004A
        gbc.setState(0x1b59, 0x4e6d, 0x1a50, 0xa64c, 0xe68a, 0x69d5, 0x1, 0x1);
        gbc.writeMem(0x1b59, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x4e6d, gbc.sp());
        EXPECT(0x1b5b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 004B
        gbc.setState(0xb2f7, 0xfacd, 0xc740, 0x4e21, 0xfe16, 0x37b2, 0x1, 0x0);
        gbc.writeMem(0xb2f7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xfacd, gbc.sp());
        EXPECT(0xb2f9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb2f7));
        EXPECT(0x22, gbc.readMem(0xb2f8));
        // CB 22 004C
        gbc.setState(0x46b2, 0xa5dd, 0x9460, 0x9f48, 0xf91c, 0x66bd, 0x0, 0x0);
        gbc.writeMem(0x46b2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xa5dd, gbc.sp());
        EXPECT(0x46b4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 004D
        gbc.setState(0x9cc9, 0x1daf, 0xbc80, 0x4b6b, 0x6a2, 0x6086, 0x0, 0x1);
        gbc.writeMem(0x9cc9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x1daf, gbc.sp());
        EXPECT(0x9ccb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9cc9));
        EXPECT(0x22, gbc.readMem(0x9cca));
        // CB 22 004E
        gbc.setState(0x8c19, 0xa921, 0xa450, 0x1548, 0xfc0a, 0x7a9e, 0x0, 0x0);
        gbc.writeMem(0x8c19, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xa921, gbc.sp());
        EXPECT(0x8c1b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c19));
        EXPECT(0x22, gbc.readMem(0x8c1a));
        // CB 22 004F
        gbc.setState(0xdf71, 0x4bea, 0xe8a0, 0x487c, 0xa467, 0x71e8, 0x1, 0x1);
        gbc.writeMem(0xdf71, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x4bea, gbc.sp());
        EXPECT(0xdf73, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf71));
        EXPECT(0x22, gbc.readMem(0xdf72));
        // CB 22 0050
        gbc.setState(0xc384, 0xf5b9, 0x4e70, 0xdefe, 0x4ba, 0x2c8e, 0x0, 0x1);
        gbc.writeMem(0xc384, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xf5b9, gbc.sp());
        EXPECT(0xc386, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc384));
        EXPECT(0x22, gbc.readMem(0xc385));
        // CB 22 0051
        gbc.setState(0xa4eb, 0x7c3d, 0x2fd0, 0x626e, 0x280f, 0x72f, 0x0, 0x0);
        gbc.writeMem(0xa4eb, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x7c3d, gbc.sp());
        EXPECT(0xa4ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa4eb));
        EXPECT(0x22, gbc.readMem(0xa4ec));
        // CB 22 0052
        gbc.setState(0x4569, 0xaab3, 0x4b00, 0xad8f, 0x416f, 0x5f87, 0x1, 0x1);
        gbc.writeMem(0x4569, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xaab3, gbc.sp());
        EXPECT(0x456b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0053
        gbc.setState(0xc4c, 0x867d, 0x2940, 0x8d51, 0x5fe0, 0x6f3, 0x0, 0x1);
        gbc.writeMem(0xc4c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x867d, gbc.sp());
        EXPECT(0xc4e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0054
        gbc.setState(0x4dc4, 0xfa76, 0x32f0, 0xbd70, 0x8185, 0xabff, 0x0, 0x1);
        gbc.writeMem(0x4dc4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0xfa76, gbc.sp());
        EXPECT(0x4dc6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0056
        gbc.setState(0x34aa, 0x82de, 0x7890, 0x8591, 0x1678, 0x9c53, 0x1, 0x0);
        gbc.writeMem(0x34aa, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x82de, gbc.sp());
        EXPECT(0x34ac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0057
        gbc.setState(0xc664, 0x69f4, 0xff0, 0xebf6, 0xf6bd, 0x363e, 0x0, 0x1);
        gbc.writeMem(0xc664, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x69f4, gbc.sp());
        EXPECT(0xc666, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc664));
        EXPECT(0x22, gbc.readMem(0xc665));
        // CB 22 0058
        gbc.setState(0xcdf9, 0x52a, 0xead0, 0x2255, 0x43f8, 0x1eea, 0x1, 0x0);
        gbc.writeMem(0xcdf9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x52a, gbc.sp());
        EXPECT(0xcdfb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcdf9));
        EXPECT(0x22, gbc.readMem(0xcdfa));
        // CB 22 0059
        gbc.setState(0xc65e, 0x2f7b, 0xf710, 0x71f7, 0xa56e, 0x7aab, 0x0, 0x0);
        gbc.writeMem(0xc65e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x2f7b, gbc.sp());
        EXPECT(0xc660, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc65e));
        EXPECT(0x22, gbc.readMem(0xc65f));
        // CB 22 005A
        gbc.setState(0x7fed, 0xbeb8, 0xdc20, 0xba5e, 0x8f0a, 0x7721, 0x1, 0x0);
        gbc.writeMem(0x7fed, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xbeb8, gbc.sp());
        EXPECT(0x7fef, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 005B
        gbc.setState(0x2240, 0xc9c2, 0x8c30, 0xaa30, 0x425a, 0xe710, 0x0, 0x1);
        gbc.writeMem(0x2240, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xc9c2, gbc.sp());
        EXPECT(0x2242, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 005C
        gbc.setState(0x9563, 0x1126, 0x92a0, 0x5b0f, 0x95cf, 0xbe8c, 0x0, 0x1);
        gbc.writeMem(0x9563, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x1126, gbc.sp());
        EXPECT(0x9565, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9563));
        EXPECT(0x22, gbc.readMem(0x9564));
        // CB 22 005D
        gbc.setState(0xdf3d, 0x56a, 0xd320, 0xe4fd, 0x82ff, 0x7d2, 0x1, 0x1);
        gbc.writeMem(0xdf3d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x56a, gbc.sp());
        EXPECT(0xdf3f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf3d));
        EXPECT(0x22, gbc.readMem(0xdf3e));
        // CB 22 005E
        gbc.setState(0x9f4a, 0x70b2, 0x4cc0, 0x2f5b, 0x506e, 0xb42f, 0x1, 0x1);
        gbc.writeMem(0x9f4a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x70b2, gbc.sp());
        EXPECT(0x9f4c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f4a));
        EXPECT(0x22, gbc.readMem(0x9f4b));
        // CB 22 0060
        gbc.setState(0x16c1, 0xbbc1, 0x8260, 0x999d, 0xe00e, 0xbe2f, 0x0, 0x0);
        gbc.writeMem(0x16c1, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xbbc1, gbc.sp());
        EXPECT(0x16c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0061
        gbc.setState(0x6cdc, 0x885a, 0x8240, 0x88be, 0xc961, 0x6045, 0x1, 0x0);
        gbc.writeMem(0x6cdc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x885a, gbc.sp());
        EXPECT(0x6cde, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0062
        gbc.setState(0x7362, 0xa85c, 0xb570, 0xff82, 0xc458, 0xb63f, 0x0, 0x1);
        gbc.writeMem(0x7362, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xa85c, gbc.sp());
        EXPECT(0x7364, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0063
        gbc.setState(0x43d2, 0x2960, 0x3360, 0xcf8c, 0x789e, 0x8268, 0x0, 0x1);
        gbc.writeMem(0x43d2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x2960, gbc.sp());
        EXPECT(0x43d4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0064
        gbc.setState(0xbd49, 0x65ca, 0xb640, 0x9695, 0x5a6b, 0x8e1d, 0x1, 0x1);
        gbc.writeMem(0xbd49, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x65ca, gbc.sp());
        EXPECT(0xbd4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd49));
        EXPECT(0x22, gbc.readMem(0xbd4a));
        // CB 22 0065
        gbc.setState(0xd597, 0x8761, 0xda50, 0xdc81, 0xfe19, 0x9273, 0x1, 0x1);
        gbc.writeMem(0xd597, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x8761, gbc.sp());
        EXPECT(0xd599, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd597));
        EXPECT(0x22, gbc.readMem(0xd598));
        // CB 22 0066
        gbc.setState(0xdd37, 0x8891, 0x1900, 0xe7a1, 0xb0c8, 0xca71, 0x1, 0x0);
        gbc.writeMem(0xdd37, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x8891, gbc.sp());
        EXPECT(0xdd39, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd37));
        EXPECT(0x22, gbc.readMem(0xdd38));
        // CB 22 0067
        gbc.setState(0xdd8, 0x21e6, 0x3dd0, 0x1d8d, 0x2d3d, 0x452f, 0x0, 0x1);
        gbc.writeMem(0xdd8, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x21e6, gbc.sp());
        EXPECT(0xdda, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0068
        gbc.setState(0x70cc, 0x7c68, 0xf1a0, 0xeef2, 0xde9c, 0x3a4a, 0x0, 0x0);
        gbc.writeMem(0x70cc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x7c68, gbc.sp());
        EXPECT(0x70ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0069
        gbc.setState(0xd936, 0x974d, 0x55d0, 0x16ef, 0xd6ba, 0x377a, 0x1, 0x1);
        gbc.writeMem(0xd936, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x974d, gbc.sp());
        EXPECT(0xd938, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd936));
        EXPECT(0x22, gbc.readMem(0xd937));
        // CB 22 006A
        gbc.setState(0xb54e, 0x572a, 0x11f0, 0xa22, 0xa7cb, 0x3f6c, 0x0, 0x0);
        gbc.writeMem(0xb54e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x572a, gbc.sp());
        EXPECT(0xb550, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb54e));
        EXPECT(0x22, gbc.readMem(0xb54f));
        // CB 22 006B
        gbc.setState(0x942e, 0xef85, 0xe980, 0xdae4, 0xb45b, 0xae7d, 0x1, 0x0);
        gbc.writeMem(0x942e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xef85, gbc.sp());
        EXPECT(0x9430, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x942e));
        EXPECT(0x22, gbc.readMem(0x942f));
        // CB 22 006C
        gbc.setState(0xcf74, 0x675e, 0x5200, 0xf912, 0x5465, 0x2cef, 0x0, 0x0);
        gbc.writeMem(0xcf74, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x675e, gbc.sp());
        EXPECT(0xcf76, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf74));
        EXPECT(0x22, gbc.readMem(0xcf75));
        // CB 22 006D
        gbc.setState(0x680f, 0xfffd, 0x8f30, 0xf463, 0x31b3, 0x7698, 0x1, 0x0);
        gbc.writeMem(0x680f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xfffd, gbc.sp());
        EXPECT(0x6811, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 006E
        gbc.setState(0x7e32, 0xd7cd, 0x6480, 0x1961, 0x2005, 0x4178, 0x1, 0x0);
        gbc.writeMem(0x7e32, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0xd7cd, gbc.sp());
        EXPECT(0x7e34, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 006F
        gbc.setState(0x1790, 0x16f1, 0xaab0, 0x2fd4, 0x1754, 0x752f, 0x0, 0x1);
        gbc.writeMem(0x1790, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x16f1, gbc.sp());
        EXPECT(0x1792, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0070
        gbc.setState(0x4f3, 0xffb8, 0x37a0, 0xbbb5, 0x9a77, 0x3e3f, 0x0, 0x0);
        gbc.writeMem(0x4f3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xffb8, gbc.sp());
        EXPECT(0x4f5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0071
        gbc.setState(0x46dc, 0x1e56, 0xc9b0, 0x5940, 0x9e6d, 0x147c, 0x1, 0x0);
        gbc.writeMem(0x46dc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x1e56, gbc.sp());
        EXPECT(0x46de, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0072
        gbc.setState(0x79eb, 0x85fa, 0x8c80, 0x820, 0x527, 0x2e54, 0x1, 0x1);
        gbc.writeMem(0x79eb, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x85fa, gbc.sp());
        EXPECT(0x79ed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0073
        gbc.setState(0xd5a9, 0x10bf, 0xfcb0, 0xa7c0, 0x66a9, 0x2a95, 0x0, 0x0);
        gbc.writeMem(0xd5a9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x10bf, gbc.sp());
        EXPECT(0xd5ab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd5a9));
        EXPECT(0x22, gbc.readMem(0xd5aa));
        // CB 22 0074
        gbc.setState(0xb829, 0x8ee3, 0x63d0, 0x689f, 0xdaa5, 0x6b40, 0x0, 0x1);
        gbc.writeMem(0xb829, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x8ee3, gbc.sp());
        EXPECT(0xb82b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb829));
        EXPECT(0x22, gbc.readMem(0xb82a));
        // CB 22 0075
        gbc.setState(0x9bfe, 0xaca, 0x6b10, 0x8ee0, 0x7cd, 0xe38b, 0x0, 0x0);
        gbc.writeMem(0x9bfe, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xaca, gbc.sp());
        EXPECT(0x9c00, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9bfe));
        EXPECT(0x22, gbc.readMem(0x9bff));
        // CB 22 0076
        gbc.setState(0x8f48, 0x187b, 0xce70, 0xdf5c, 0x23fe, 0x5ddd, 0x0, 0x1);
        gbc.writeMem(0x8f48, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x187b, gbc.sp());
        EXPECT(0x8f4a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f48));
        EXPECT(0x22, gbc.readMem(0x8f49));
        // CB 22 0077
        gbc.setState(0x8880, 0xcd3f, 0x2bc0, 0xab75, 0xe579, 0x8763, 0x1, 0x1);
        gbc.writeMem(0x8880, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xcd3f, gbc.sp());
        EXPECT(0x8882, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8880));
        EXPECT(0x22, gbc.readMem(0x8881));
        // CB 22 0078
        gbc.setState(0xccb3, 0x25f7, 0xee90, 0x23c2, 0x6d03, 0x67a4, 0x1, 0x1);
        gbc.writeMem(0xccb3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x25f7, gbc.sp());
        EXPECT(0xccb5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xccb3));
        EXPECT(0x22, gbc.readMem(0xccb4));
        // CB 22 0079
        gbc.setState(0xec5e, 0x20c8, 0xeb90, 0x1046, 0xf814, 0x45a1, 0x0, 0x0);
        gbc.writeMem(0xec5e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x20c8, gbc.sp());
        EXPECT(0xec60, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec5e));
        EXPECT(0x22, gbc.readMem(0xec5f));
        // CB 22 007A
        gbc.setState(0x7806, 0x45a5, 0xe5f0, 0xa545, 0x6303, 0x4b81, 0x0, 0x0);
        gbc.writeMem(0x7806, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x45a5, gbc.sp());
        EXPECT(0x7808, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 007B
        gbc.setState(0x1aeb, 0xc135, 0xed30, 0xbbcb, 0x2c91, 0x918b, 0x0, 0x1);
        gbc.writeMem(0x1aeb, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xc135, gbc.sp());
        EXPECT(0x1aed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 007C
        gbc.setState(0x5d2, 0x5770, 0x9100, 0x7912, 0xf68c, 0xbd1c, 0x1, 0x1);
        gbc.writeMem(0x5d2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x5770, gbc.sp());
        EXPECT(0x5d4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 007D
        gbc.setState(0x3a2e, 0x8ecd, 0x8010, 0xdf2b, 0x14e2, 0x55e2, 0x0, 0x1);
        gbc.writeMem(0x3a2e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x8ecd, gbc.sp());
        EXPECT(0x3a30, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 007E
        gbc.setState(0x232a, 0x1673, 0x9710, 0x93e4, 0xfea0, 0x5eaf, 0x1, 0x0);
        gbc.writeMem(0x232a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x1673, gbc.sp());
        EXPECT(0x232c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 007F
        gbc.setState(0xe550, 0xefac, 0xb4c0, 0x8f7b, 0x660c, 0x8ca, 0x0, 0x0);
        gbc.writeMem(0xe550, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0xefac, gbc.sp());
        EXPECT(0xe552, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe550));
        EXPECT(0x22, gbc.readMem(0xe551));
        // CB 22 0080
        gbc.setState(0x1f01, 0xc2b6, 0xac20, 0xc3d, 0xccf7, 0xad8d, 0x0, 0x1);
        gbc.writeMem(0x1f01, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xc2b6, gbc.sp());
        EXPECT(0x1f03, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0081
        gbc.setState(0x2de, 0xd83d, 0xdc10, 0xdc7f, 0xccc, 0xe5ef, 0x0, 0x0);
        gbc.writeMem(0x2de, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xd83d, gbc.sp());
        EXPECT(0x2e0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0083
        gbc.setState(0x178f, 0x801e, 0x790, 0xd377, 0x587c, 0x30c7, 0x0, 0x1);
        gbc.writeMem(0x178f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x801e, gbc.sp());
        EXPECT(0x1791, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0084
        gbc.setState(0x3af9, 0x80a, 0x9aa0, 0xb618, 0xbb12, 0xb8ac, 0x0, 0x0);
        gbc.writeMem(0x3af9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x80a, gbc.sp());
        EXPECT(0x3afb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0085
        gbc.setState(0xb79b, 0xce6c, 0x4990, 0xb3b0, 0x43d5, 0x8c89, 0x1, 0x0);
        gbc.writeMem(0xb79b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xce6c, gbc.sp());
        EXPECT(0xb79d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb79b));
        EXPECT(0x22, gbc.readMem(0xb79c));
        // CB 22 0086
        gbc.setState(0x5850, 0x2789, 0x1950, 0x18f6, 0x5554, 0xb747, 0x0, 0x0);
        gbc.writeMem(0x5850, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x2789, gbc.sp());
        EXPECT(0x5852, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0087
        gbc.setState(0x605a, 0x5516, 0x3ba0, 0xf499, 0xefb2, 0x6fb0, 0x1, 0x1);
        gbc.writeMem(0x605a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x5516, gbc.sp());
        EXPECT(0x605c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0088
        gbc.setState(0x7d7d, 0x12e6, 0x9c50, 0x18f2, 0x5efd, 0x93e1, 0x0, 0x1);
        gbc.writeMem(0x7d7d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x12e6, gbc.sp());
        EXPECT(0x7d7f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0089
        gbc.setState(0x21db, 0xf7e6, 0x860, 0xb785, 0xde3c, 0x1195, 0x1, 0x1);
        gbc.writeMem(0x21db, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xf7e6, gbc.sp());
        EXPECT(0x21dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 008A
        gbc.setState(0x9715, 0xd8b9, 0x69b0, 0x46c4, 0x8147, 0xe771, 0x1, 0x1);
        gbc.writeMem(0x9715, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xd8b9, gbc.sp());
        EXPECT(0x9717, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9715));
        EXPECT(0x22, gbc.readMem(0x9716));
        // CB 22 008B
        gbc.setState(0x6725, 0x97c4, 0x7120, 0x84da, 0x5a4c, 0x54df, 0x1, 0x0);
        gbc.writeMem(0x6725, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x97c4, gbc.sp());
        EXPECT(0x6727, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 008C
        gbc.setState(0x7862, 0x31f8, 0xb490, 0x3b36, 0xaae1, 0x297a, 0x0, 0x0);
        gbc.writeMem(0x7862, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x31f8, gbc.sp());
        EXPECT(0x7864, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 008D
        gbc.setState(0xe219, 0xf306, 0x610, 0xbef2, 0x4283, 0xfcc5, 0x0, 0x0);
        gbc.writeMem(0xe219, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xf306, gbc.sp());
        EXPECT(0xe21b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe219));
        EXPECT(0x22, gbc.readMem(0xe21a));
        // CB 22 008E
        gbc.setState(0xca68, 0x9bb6, 0xe9b0, 0x90de, 0xe1ea, 0xe428, 0x0, 0x1);
        gbc.writeMem(0xca68, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x9bb6, gbc.sp());
        EXPECT(0xca6a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xca68));
        EXPECT(0x22, gbc.readMem(0xca69));
        // CB 22 008F
        gbc.setState(0xd89a, 0x8d13, 0xe340, 0x89bd, 0x3116, 0x15ab, 0x0, 0x1);
        gbc.writeMem(0xd89a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x8d13, gbc.sp());
        EXPECT(0xd89c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd89a));
        EXPECT(0x22, gbc.readMem(0xd89b));
        // CB 22 0090
        gbc.setState(0x693d, 0x46bc, 0x6140, 0x7f06, 0x267b, 0x1880, 0x1, 0x1);
        gbc.writeMem(0x693d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x46bc, gbc.sp());
        EXPECT(0x693f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0091
        gbc.setState(0x3cf6, 0xdb3a, 0x8b0, 0xfd55, 0x3822, 0xcd8, 0x1, 0x0);
        gbc.writeMem(0x3cf6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xdb3a, gbc.sp());
        EXPECT(0x3cf8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0092
        gbc.setState(0x9a2a, 0x92d7, 0x49c0, 0xfad0, 0x1d6d, 0xc8fc, 0x1, 0x0);
        gbc.writeMem(0x9a2a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x92d7, gbc.sp());
        EXPECT(0x9a2c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a2a));
        EXPECT(0x22, gbc.readMem(0x9a2b));
        // CB 22 0094
        gbc.setState(0x6d29, 0x6183, 0x9560, 0x5c57, 0xe61a, 0x61af, 0x1, 0x1);
        gbc.writeMem(0x6d29, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x6183, gbc.sp());
        EXPECT(0x6d2b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0095
        gbc.setState(0xa6d0, 0x1d34, 0x270, 0x8055, 0xe3, 0x303c, 0x0, 0x1);
        gbc.writeMem(0xa6d0, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x1d34, gbc.sp());
        EXPECT(0xa6d2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6d0));
        EXPECT(0x22, gbc.readMem(0xa6d1));
        // CB 22 0096
        gbc.setState(0x684d, 0xd33d, 0x4d40, 0x5fbd, 0x1a7c, 0xeaf3, 0x1, 0x0);
        gbc.writeMem(0x684d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xd33d, gbc.sp());
        EXPECT(0x684f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0097
        gbc.setState(0x2901, 0x28b9, 0x1460, 0x93a2, 0x1fd9, 0xac87, 0x0, 0x0);
        gbc.writeMem(0x2901, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x28b9, gbc.sp());
        EXPECT(0x2903, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0098
        gbc.setState(0xd77f, 0xd67a, 0x15e0, 0xbd73, 0x2fc1, 0xa204, 0x0, 0x0);
        gbc.writeMem(0xd77f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xd67a, gbc.sp());
        EXPECT(0xd781, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd77f));
        EXPECT(0x22, gbc.readMem(0xd780));
        // CB 22 0099
        gbc.setState(0xdc60, 0x2f8d, 0xd240, 0x855e, 0xd3a8, 0x9f72, 0x1, 0x1);
        gbc.writeMem(0xdc60, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x2f8d, gbc.sp());
        EXPECT(0xdc62, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc60));
        EXPECT(0x22, gbc.readMem(0xdc61));
        // CB 22 009A
        gbc.setState(0xb780, 0xd88a, 0x72e0, 0xa3f6, 0x267a, 0x651a, 0x0, 0x0);
        gbc.writeMem(0xb780, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xd88a, gbc.sp());
        EXPECT(0xb782, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb780));
        EXPECT(0x22, gbc.readMem(0xb781));
        // CB 22 009B
        gbc.setState(0xa8c5, 0x2e74, 0xbd80, 0xb34f, 0x396b, 0xab55, 0x1, 0x0);
        gbc.writeMem(0xa8c5, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x2e74, gbc.sp());
        EXPECT(0xa8c7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa8c5));
        EXPECT(0x22, gbc.readMem(0xa8c6));
        // CB 22 009C
        gbc.setState(0x4934, 0x9b11, 0xd30, 0x8448, 0x5e74, 0xc3b1, 0x1, 0x0);
        gbc.writeMem(0x4934, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x9b11, gbc.sp());
        EXPECT(0x4936, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 009D
        gbc.setState(0xc633, 0x6b4a, 0xfba0, 0xfe6d, 0xf356, 0xd7d6, 0x0, 0x0);
        gbc.writeMem(0xc633, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x6b4a, gbc.sp());
        EXPECT(0xc635, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc633));
        EXPECT(0x22, gbc.readMem(0xc634));
        // CB 22 009E
        gbc.setState(0x5d41, 0xc44b, 0xfb40, 0x9847, 0x8678, 0xaa59, 0x1, 0x1);
        gbc.writeMem(0x5d41, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xc44b, gbc.sp());
        EXPECT(0x5d43, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 009F
        gbc.setState(0xd65c, 0x8198, 0x1e10, 0x245a, 0x6566, 0x4f43, 0x0, 0x0);
        gbc.writeMem(0xd65c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x8198, gbc.sp());
        EXPECT(0xd65e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd65c));
        EXPECT(0x22, gbc.readMem(0xd65d));
        // CB 22 00A0
        gbc.setState(0xcd0c, 0x6c8e, 0x1d40, 0xb94, 0xf47f, 0xb5d0, 0x1, 0x0);
        gbc.writeMem(0xcd0c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x6c8e, gbc.sp());
        EXPECT(0xcd0e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd0c));
        EXPECT(0x22, gbc.readMem(0xcd0d));
        // CB 22 00A1
        gbc.setState(0x1d2a, 0xafbe, 0x1a20, 0xe251, 0x572f, 0x429d, 0x0, 0x1);
        gbc.writeMem(0x1d2a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xafbe, gbc.sp());
        EXPECT(0x1d2c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 00A2
        gbc.setState(0xe673, 0xcd01, 0x34a0, 0x949f, 0x3233, 0x938b, 0x1, 0x0);
        gbc.writeMem(0xe673, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xcd01, gbc.sp());
        EXPECT(0xe675, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe673));
        EXPECT(0x22, gbc.readMem(0xe674));
        // CB 22 00A3
        gbc.setState(0xbb64, 0x87cf, 0xd760, 0x57a0, 0xaa82, 0x4af, 0x0, 0x0);
        gbc.writeMem(0xbb64, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x87cf, gbc.sp());
        EXPECT(0xbb66, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb64));
        EXPECT(0x22, gbc.readMem(0xbb65));
        // CB 22 00A4
        gbc.setState(0xb474, 0x31d2, 0xe100, 0xd214, 0xcf68, 0xb241, 0x0, 0x0);
        gbc.writeMem(0xb474, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x31d2, gbc.sp());
        EXPECT(0xb476, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb474));
        EXPECT(0x22, gbc.readMem(0xb475));
        // CB 22 00A5
        gbc.setState(0x3a27, 0x5159, 0x5f20, 0x6b3a, 0xd787, 0xe522, 0x0, 0x1);
        gbc.writeMem(0x3a27, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x5159, gbc.sp());
        EXPECT(0x3a29, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00A6
        gbc.setState(0xb825, 0x2767, 0xf4d0, 0x95a4, 0x8592, 0x13fe, 0x0, 0x0);
        gbc.writeMem(0xb825, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x2767, gbc.sp());
        EXPECT(0xb827, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb825));
        EXPECT(0x22, gbc.readMem(0xb826));
        // CB 22 00A7
        gbc.setState(0xb461, 0x6f6e, 0xa490, 0xafef, 0xd823, 0x7d16, 0x0, 0x1);
        gbc.writeMem(0xb461, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x6f6e, gbc.sp());
        EXPECT(0xb463, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb461));
        EXPECT(0x22, gbc.readMem(0xb462));
        // CB 22 00A8
        gbc.setState(0xdccd, 0xe827, 0x26f0, 0x2235, 0x6c08, 0x34e, 0x1, 0x1);
        gbc.writeMem(0xdccd, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xe827, gbc.sp());
        EXPECT(0xdccf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdccd));
        EXPECT(0x22, gbc.readMem(0xdcce));
        // CB 22 00A9
        gbc.setState(0xea8a, 0xfcb6, 0x5cd0, 0x51aa, 0x3974, 0x445, 0x0, 0x1);
        gbc.writeMem(0xea8a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xfcb6, gbc.sp());
        EXPECT(0xea8c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xea8a));
        EXPECT(0x22, gbc.readMem(0xea8b));
        // CB 22 00AA
        gbc.setState(0xc1a4, 0xd85b, 0xf8b0, 0x3540, 0xb7f1, 0x573, 0x1, 0x1);
        gbc.writeMem(0xc1a4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0xd85b, gbc.sp());
        EXPECT(0xc1a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc1a4));
        EXPECT(0x22, gbc.readMem(0xc1a5));
        // CB 22 00AB
        gbc.setState(0x77ae, 0x79a0, 0x3e30, 0xe733, 0x3fa4, 0x7eb, 0x0, 0x0);
        gbc.writeMem(0x77ae, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x79a0, gbc.sp());
        EXPECT(0x77b0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 00AC
        gbc.setState(0xe6c8, 0xc065, 0xf560, 0xdc71, 0xf3ff, 0x9327, 0x0, 0x0);
        gbc.writeMem(0xe6c8, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xc065, gbc.sp());
        EXPECT(0xe6ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe6c8));
        EXPECT(0x22, gbc.readMem(0xe6c9));
        // CB 22 00AD
        gbc.setState(0xad9a, 0xa057, 0x70, 0xdd9e, 0xbd9b, 0x24d1, 0x1, 0x1);
        gbc.writeMem(0xad9a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xa057, gbc.sp());
        EXPECT(0xad9c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad9a));
        EXPECT(0x22, gbc.readMem(0xad9b));
        // CB 22 00AE
        gbc.setState(0xacea, 0xa8ac, 0x9bd0, 0xce2e, 0x862e, 0xc303, 0x1, 0x1);
        gbc.writeMem(0xacea, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xa8ac, gbc.sp());
        EXPECT(0xacec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xacea));
        EXPECT(0x22, gbc.readMem(0xaceb));
        // CB 22 00AF
        gbc.setState(0x4593, 0xd24a, 0x8880, 0x738c, 0xddd, 0xf8e8, 0x0, 0x0);
        gbc.writeMem(0x4593, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xd24a, gbc.sp());
        EXPECT(0x4595, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 00B0
        gbc.setState(0x9c95, 0x3f06, 0x94f0, 0xa2c, 0x309, 0x157c, 0x1, 0x0);
        gbc.writeMem(0x9c95, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x3f06, gbc.sp());
        EXPECT(0x9c97, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c95));
        EXPECT(0x22, gbc.readMem(0x9c96));
        // CB 22 00B1
        gbc.setState(0x8ea2, 0x5080, 0xe820, 0x75b8, 0x546b, 0x3659, 0x1, 0x0);
        gbc.writeMem(0x8ea2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x5080, gbc.sp());
        EXPECT(0x8ea4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ea2));
        EXPECT(0x22, gbc.readMem(0x8ea3));
        // CB 22 00B2
        gbc.setState(0x6fff, 0x84cd, 0x25e0, 0xca, 0x95d1, 0x2cfb, 0x1, 0x1);
        gbc.writeMem(0x6fff, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x84cd, gbc.sp());
        EXPECT(0x7001, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00B3
        gbc.setState(0xa2cd, 0xdbe8, 0xf240, 0x37ff, 0x5e3a, 0x8ede, 0x1, 0x0);
        gbc.writeMem(0xa2cd, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xdbe8, gbc.sp());
        EXPECT(0xa2cf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa2cd));
        EXPECT(0x22, gbc.readMem(0xa2ce));
        // CB 22 00B4
        gbc.setState(0x359b, 0xd5d2, 0x540, 0x95c, 0xc262, 0xcbaa, 0x0, 0x0);
        gbc.writeMem(0x359b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xd5d2, gbc.sp());
        EXPECT(0x359d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00B5
        gbc.setState(0xd7b7, 0xd97f, 0x6e30, 0x80a7, 0x676f, 0x8042, 0x0, 0x1);
        gbc.writeMem(0xd7b7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xd97f, gbc.sp());
        EXPECT(0xd7b9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd7b7));
        EXPECT(0x22, gbc.readMem(0xd7b8));
        // CB 22 00B6
        gbc.setState(0xe923, 0x31e5, 0xbb00, 0x885a, 0x866e, 0x1fc1, 0x0, 0x1);
        gbc.writeMem(0xe923, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x31e5, gbc.sp());
        EXPECT(0xe925, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe923));
        EXPECT(0x22, gbc.readMem(0xe924));
        // CB 22 00B7
        gbc.setState(0x5333, 0x282e, 0xb5c0, 0x491c, 0xbb7f, 0x1121, 0x1, 0x1);
        gbc.writeMem(0x5333, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x282e, gbc.sp());
        EXPECT(0x5335, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00B8
        gbc.setState(0xb876, 0x4f00, 0x9ce0, 0x80cb, 0x30cc, 0xa76e, 0x1, 0x0);
        gbc.writeMem(0xb876, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x4f00, gbc.sp());
        EXPECT(0xb878, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb876));
        EXPECT(0x22, gbc.readMem(0xb877));
        // CB 22 00B9
        gbc.setState(0x8686, 0x39ad, 0xf3c0, 0xc8f9, 0x4c82, 0x40cb, 0x1, 0x0);
        gbc.writeMem(0x8686, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x39ad, gbc.sp());
        EXPECT(0x8688, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8686));
        EXPECT(0x22, gbc.readMem(0x8687));
        // CB 22 00BA
        gbc.setState(0xb692, 0xc107, 0xe600, 0x22c4, 0x4816, 0x4ef, 0x1, 0x0);
        gbc.writeMem(0xb692, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xc107, gbc.sp());
        EXPECT(0xb694, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb692));
        EXPECT(0x22, gbc.readMem(0xb693));
        // CB 22 00BB
        gbc.setState(0xcdb7, 0x99d5, 0x190, 0x587b, 0xb523, 0xbb83, 0x1, 0x1);
        gbc.writeMem(0xcdb7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x99d5, gbc.sp());
        EXPECT(0xcdb9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcdb7));
        EXPECT(0x22, gbc.readMem(0xcdb8));
        // CB 22 00BC
        gbc.setState(0xd5cc, 0x74db, 0x31f0, 0x7483, 0x28fb, 0xfaf1, 0x1, 0x0);
        gbc.writeMem(0xd5cc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x74db, gbc.sp());
        EXPECT(0xd5ce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd5cc));
        EXPECT(0x22, gbc.readMem(0xd5cd));
        // CB 22 00BD
        gbc.setState(0xb300, 0xa866, 0x27d0, 0xb759, 0xe680, 0xe141, 0x0, 0x0);
        gbc.writeMem(0xb300, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0xa866, gbc.sp());
        EXPECT(0xb302, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb300));
        EXPECT(0x22, gbc.readMem(0xb301));
        // CB 22 00BF
        gbc.setState(0x2f5e, 0x1e4a, 0x2800, 0x6429, 0x2fd3, 0x984, 0x0, 0x0);
        gbc.writeMem(0x2f5e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x1e4a, gbc.sp());
        EXPECT(0x2f60, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 00C0
        gbc.setState(0x4e5d, 0x8b34, 0xade0, 0x631a, 0x80dd, 0x17f2, 0x0, 0x1);
        gbc.writeMem(0x4e5d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x8b34, gbc.sp());
        EXPECT(0x4e5f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00C1
        gbc.setState(0xa0c2, 0xc300, 0x4520, 0xe580, 0xd331, 0xe2e5, 0x0, 0x0);
        gbc.writeMem(0xa0c2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0xc300, gbc.sp());
        EXPECT(0xa0c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa0c2));
        EXPECT(0x22, gbc.readMem(0xa0c3));
        // CB 22 00C2
        gbc.setState(0x146, 0xcd, 0x18a0, 0xac6, 0x6389, 0x119b, 0x1, 0x1);
        gbc.writeMem(0x146, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xcd, gbc.sp());
        EXPECT(0x148, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 00C3
        gbc.setState(0x66e0, 0x23a6, 0x8dc0, 0x75c1, 0x56be, 0xa174, 0x1, 0x1);
        gbc.writeMem(0x66e0, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x23a6, gbc.sp());
        EXPECT(0x66e2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 00C4
        gbc.setState(0x803b, 0xaa02, 0x5650, 0x8388, 0x4c78, 0x2ceb, 0x1, 0x0);
        gbc.writeMem(0x803b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xaa02, gbc.sp());
        EXPECT(0x803d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x803b));
        EXPECT(0x22, gbc.readMem(0x803c));
        // CB 22 00C5
        gbc.setState(0xaa5d, 0x8579, 0x3a60, 0x8de2, 0xd7a6, 0x3f12, 0x0, 0x0);
        gbc.writeMem(0xaa5d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x8579, gbc.sp());
        EXPECT(0xaa5f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa5d));
        EXPECT(0x22, gbc.readMem(0xaa5e));
        // CB 22 00C6
        gbc.setState(0x5976, 0xc585, 0x4bd0, 0x1d20, 0xcf81, 0xab0b, 0x1, 0x0);
        gbc.writeMem(0x5976, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xc585, gbc.sp());
        EXPECT(0x5978, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00C7
        gbc.setState(0x9e9a, 0x2d2c, 0x5040, 0x7e, 0x5b9c, 0x18dd, 0x0, 0x0);
        gbc.writeMem(0x9e9a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x2d2c, gbc.sp());
        EXPECT(0x9e9c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e9a));
        EXPECT(0x22, gbc.readMem(0x9e9b));
        // CB 22 00C8
        gbc.setState(0x196f, 0x8f5d, 0x9700, 0xed7a, 0x27f1, 0xc8b3, 0x0, 0x0);
        gbc.writeMem(0x196f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x8f5d, gbc.sp());
        EXPECT(0x1971, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 00C9
        gbc.setState(0x2a43, 0xaf1f, 0x6200, 0xdf36, 0xd1b9, 0x4ae2, 0x0, 0x0);
        gbc.writeMem(0x2a43, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xaf1f, gbc.sp());
        EXPECT(0x2a45, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00CA
        gbc.setState(0x96ac, 0x6b8f, 0xf00, 0x5b2d, 0xcce1, 0xf82a, 0x1, 0x0);
        gbc.writeMem(0x96ac, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x6b8f, gbc.sp());
        EXPECT(0x96ae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96ac));
        EXPECT(0x22, gbc.readMem(0x96ad));
        // CB 22 00CB
        gbc.setState(0x6b77, 0xae90, 0xd7d0, 0x8169, 0xf6c8, 0x6230, 0x1, 0x1);
        gbc.writeMem(0x6b77, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0xae90, gbc.sp());
        EXPECT(0x6b79, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00CC
        gbc.setState(0x503e, 0xdf27, 0x1e80, 0x152d, 0x9865, 0x43ce, 0x0, 0x0);
        gbc.writeMem(0x503e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xdf27, gbc.sp());
        EXPECT(0x5040, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00CD
        gbc.setState(0xcd42, 0x46ce, 0xd020, 0x870d, 0xe04f, 0x2f67, 0x1, 0x0);
        gbc.writeMem(0xcd42, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x46ce, gbc.sp());
        EXPECT(0xcd44, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd42));
        EXPECT(0x22, gbc.readMem(0xcd43));
        // CB 22 00CE
        gbc.setState(0x21dd, 0x96ac, 0x4c50, 0x4636, 0x9f34, 0x3498, 0x1, 0x0);
        gbc.writeMem(0x21dd, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x96ac, gbc.sp());
        EXPECT(0x21df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00CF
        gbc.setState(0x4c67, 0xe8a0, 0x1a50, 0x3596, 0x77ea, 0x3e1, 0x1, 0x1);
        gbc.writeMem(0x4c67, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xe8a0, gbc.sp());
        EXPECT(0x4c69, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 00D0
        gbc.setState(0xbf5e, 0x23c4, 0xad0, 0xd7cf, 0xb079, 0xbb53, 0x1, 0x0);
        gbc.writeMem(0xbf5e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x23c4, gbc.sp());
        EXPECT(0xbf60, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf5e));
        EXPECT(0x22, gbc.readMem(0xbf5f));
        // CB 22 00D1
        gbc.setState(0x7d84, 0xeadb, 0x6af0, 0xd4da, 0xd429, 0xf8c4, 0x1, 0x0);
        gbc.writeMem(0x7d84, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xeadb, gbc.sp());
        EXPECT(0x7d86, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00D2
        gbc.setState(0x3b4e, 0x8f6b, 0x8f90, 0x99f5, 0x9c4b, 0x652c, 0x1, 0x1);
        gbc.writeMem(0x3b4e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x8f6b, gbc.sp());
        EXPECT(0x3b50, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00D3
        gbc.setState(0x9b59, 0x6c21, 0xb340, 0xf990, 0xa9a2, 0x2ffe, 0x1, 0x1);
        gbc.writeMem(0x9b59, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x6c21, gbc.sp());
        EXPECT(0x9b5b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b59));
        EXPECT(0x22, gbc.readMem(0x9b5a));
        // CB 22 00D4
        gbc.setState(0x457d, 0xdff8, 0x2a20, 0xf53c, 0xb66a, 0x3854, 0x1, 0x0);
        gbc.writeMem(0x457d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xdff8, gbc.sp());
        EXPECT(0x457f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00D5
        gbc.setState(0x5716, 0x95bc, 0xc730, 0xa9d3, 0x505e, 0x15f1, 0x0, 0x0);
        gbc.writeMem(0x5716, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x95bc, gbc.sp());
        EXPECT(0x5718, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 00D6
        gbc.setState(0x391e, 0x9b0b, 0x6d30, 0xd598, 0xdc84, 0x7c07, 0x0, 0x0);
        gbc.writeMem(0x391e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x9b0b, gbc.sp());
        EXPECT(0x3920, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00D7
        gbc.setState(0xa3e2, 0xfec5, 0x4ad0, 0xe1e5, 0x9b65, 0x6368, 0x0, 0x0);
        gbc.writeMem(0xa3e2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0xfec5, gbc.sp());
        EXPECT(0xa3e4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa3e2));
        EXPECT(0x22, gbc.readMem(0xa3e3));
        // CB 22 00D8
        gbc.setState(0x49d, 0x910a, 0x4f10, 0x10e3, 0xc03e, 0x675b, 0x1, 0x1);
        gbc.writeMem(0x49d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x910a, gbc.sp());
        EXPECT(0x49f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00DB
        gbc.setState(0x3467, 0x4e5c, 0xf0e0, 0x64a8, 0xd2e8, 0xfb2b, 0x0, 0x0);
        gbc.writeMem(0x3467, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x4e5c, gbc.sp());
        EXPECT(0x3469, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00DD
        gbc.setState(0x9b9f, 0x9c0a, 0xf410, 0xbe16, 0x436d, 0xcc72, 0x0, 0x1);
        gbc.writeMem(0x9b9f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x9c0a, gbc.sp());
        EXPECT(0x9ba1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b9f));
        EXPECT(0x22, gbc.readMem(0x9ba0));
        // CB 22 00DE
        gbc.setState(0x2152, 0x36c1, 0x28a0, 0x31fc, 0xf4ab, 0xc7ee, 0x1, 0x0);
        gbc.writeMem(0x2152, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x36c1, gbc.sp());
        EXPECT(0x2154, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00DF
        gbc.setState(0x6c73, 0x5c2, 0xc140, 0x6322, 0x1b, 0xee3e, 0x1, 0x0);
        gbc.writeMem(0x6c73, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x5c2, gbc.sp());
        EXPECT(0x6c75, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 00E0
        gbc.setState(0xa651, 0xb59e, 0xc2a0, 0xb91e, 0x8a75, 0x7513, 0x0, 0x1);
        gbc.writeMem(0xa651, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0xb59e, gbc.sp());
        EXPECT(0xa653, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa651));
        EXPECT(0x22, gbc.readMem(0xa652));
        // CB 22 00E1
        gbc.setState(0x29c6, 0xda00, 0xc2e0, 0xa719, 0xc3bf, 0xa07a, 0x1, 0x0);
        gbc.writeMem(0x29c6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0xda00, gbc.sp());
        EXPECT(0x29c8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00E2
        gbc.setState(0x6495, 0xe672, 0x7830, 0x8783, 0xe02e, 0x67a4, 0x1, 0x1);
        gbc.writeMem(0x6495, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xe672, gbc.sp());
        EXPECT(0x6497, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00E3
        gbc.setState(0xc6e7, 0xd624, 0x1980, 0x1cf9, 0x78a0, 0xc9a4, 0x0, 0x0);
        gbc.writeMem(0xc6e7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xd624, gbc.sp());
        EXPECT(0xc6e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc6e7));
        EXPECT(0x22, gbc.readMem(0xc6e8));
        // CB 22 00E4
        gbc.setState(0xb2df, 0x689, 0x8980, 0x3b59, 0x5222, 0x5aca, 0x1, 0x1);
        gbc.writeMem(0xb2df, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x689, gbc.sp());
        EXPECT(0xb2e1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb2df));
        EXPECT(0x22, gbc.readMem(0xb2e0));
        // CB 22 00E5
        gbc.setState(0xbc81, 0x3668, 0x45d0, 0xd82, 0x4562, 0x2763, 0x0, 0x1);
        gbc.writeMem(0xbc81, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x3668, gbc.sp());
        EXPECT(0xbc83, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc81));
        EXPECT(0x22, gbc.readMem(0xbc82));
        // CB 22 00E6
        gbc.setState(0x9182, 0x9752, 0xa7a0, 0xdbbd, 0x6fa5, 0x84c8, 0x1, 0x1);
        gbc.writeMem(0x9182, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x9752, gbc.sp());
        EXPECT(0x9184, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9182));
        EXPECT(0x22, gbc.readMem(0x9183));
        // CB 22 00E7
        gbc.setState(0x3d1e, 0xc720, 0x1aa0, 0x65cc, 0xa029, 0x18dd, 0x1, 0x0);
        gbc.writeMem(0x3d1e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xc720, gbc.sp());
        EXPECT(0x3d20, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00E8
        gbc.setState(0x22e4, 0x50ab, 0x8530, 0x1f95, 0x4ad1, 0x45d1, 0x0, 0x0);
        gbc.writeMem(0x22e4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x50ab, gbc.sp());
        EXPECT(0x22e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 00E9
        gbc.setState(0xb265, 0x4326, 0x6f90, 0x7d5c, 0xb8ab, 0x1bf4, 0x1, 0x1);
        gbc.writeMem(0xb265, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x4326, gbc.sp());
        EXPECT(0xb267, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb265));
        EXPECT(0x22, gbc.readMem(0xb266));
        // CB 22 00EA
        gbc.setState(0x100b, 0xeb92, 0xd5f0, 0x1ef1, 0x521a, 0xe743, 0x1, 0x0);
        gbc.writeMem(0x100b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xeb92, gbc.sp());
        EXPECT(0x100d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 00EB
        gbc.setState(0x2729, 0xb4af, 0xf8c0, 0xe9e6, 0x4cff, 0xbbec, 0x0, 0x0);
        gbc.writeMem(0x2729, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xb4af, gbc.sp());
        EXPECT(0x272b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 00ED
        gbc.setState(0x9cbe, 0x2bf5, 0x2b60, 0xd2e4, 0x9fb3, 0xa232, 0x0, 0x0);
        gbc.writeMem(0x9cbe, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x2bf5, gbc.sp());
        EXPECT(0x9cc0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9cbe));
        EXPECT(0x22, gbc.readMem(0x9cbf));
        // CB 22 00EE
        gbc.setState(0x9439, 0x82df, 0x5dd0, 0x4253, 0x388, 0x44b9, 0x1, 0x1);
        gbc.writeMem(0x9439, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x82df, gbc.sp());
        EXPECT(0x943b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9439));
        EXPECT(0x22, gbc.readMem(0x943a));
        // CB 22 00EF
        gbc.setState(0x3f6c, 0x4ed8, 0xd910, 0xe87f, 0x2378, 0x79d7, 0x0, 0x1);
        gbc.writeMem(0x3f6c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x4ed8, gbc.sp());
        EXPECT(0x3f6e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 00F1
        gbc.setState(0x73f8, 0xc6d6, 0x9030, 0x1973, 0x8583, 0xdbff, 0x0, 0x1);
        gbc.writeMem(0x73f8, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0xc6d6, gbc.sp());
        EXPECT(0x73fa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00F2
        gbc.setState(0xaf84, 0x8414, 0xb790, 0xc80e, 0x3a9d, 0x79d7, 0x0, 0x1);
        gbc.writeMem(0xaf84, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x8414, gbc.sp());
        EXPECT(0xaf86, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaf84));
        EXPECT(0x22, gbc.readMem(0xaf85));
        // CB 22 00F3
        gbc.setState(0xeaf, 0x5da8, 0x42a0, 0xed52, 0xee6f, 0xaf7, 0x1, 0x1);
        gbc.writeMem(0xeaf, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x5da8, gbc.sp());
        EXPECT(0xeb1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00F4
        gbc.setState(0x532a, 0xa0ef, 0x60b0, 0xb62d, 0x24fb, 0x53f, 0x0, 0x1);
        gbc.writeMem(0x532a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xa0ef, gbc.sp());
        EXPECT(0x532c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 00F5
        gbc.setState(0x688d, 0xbabe, 0x3d30, 0xc38d, 0x3de6, 0x5019, 0x0, 0x1);
        gbc.writeMem(0x688d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xbabe, gbc.sp());
        EXPECT(0x688f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 00F6
        gbc.setState(0x14de, 0x216c, 0x9060, 0xcdb3, 0x5908, 0x8bd5, 0x0, 0x1);
        gbc.writeMem(0x14de, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x216c, gbc.sp());
        EXPECT(0x14e0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 00F7
        gbc.setState(0xb0cd, 0x1a04, 0x9520, 0xe427, 0x5001, 0x6b0, 0x1, 0x1);
        gbc.writeMem(0xb0cd, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x1a04, gbc.sp());
        EXPECT(0xb0cf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0cd));
        EXPECT(0x22, gbc.readMem(0xb0ce));
        // CB 22 00F8
        gbc.setState(0x2fd0, 0xfeed, 0x9100, 0xe74b, 0x2c41, 0xa938, 0x1, 0x0);
        gbc.writeMem(0x2fd0, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xfeed, gbc.sp());
        EXPECT(0x2fd2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 00F9
        gbc.setState(0x7ad6, 0x92fb, 0x9a80, 0xf29e, 0x196d, 0x6f70, 0x0, 0x0);
        gbc.writeMem(0x7ad6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x92fb, gbc.sp());
        EXPECT(0x7ad8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 00FA
        gbc.setState(0x1eca, 0x1e62, 0xd180, 0x82a0, 0xb902, 0xa7fc, 0x0, 0x0);
        gbc.writeMem(0x1eca, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x1e62, gbc.sp());
        EXPECT(0x1ecc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00FB
        gbc.setState(0xef1, 0x7f2d, 0xbc90, 0x622c, 0xba7a, 0x3202, 0x0, 0x0);
        gbc.writeMem(0xef1, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x7f2d, gbc.sp());
        EXPECT(0xef3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 00FC
        gbc.setState(0xc68, 0x3b16, 0x7480, 0xa7fb, 0x7188, 0x3a6b, 0x1, 0x1);
        gbc.writeMem(0xc68, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x3b16, gbc.sp());
        EXPECT(0xc6a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 00FE
        gbc.setState(0xc454, 0xdf8f, 0xaf60, 0xa7d3, 0xfdab, 0xecfe, 0x0, 0x0);
        gbc.writeMem(0xc454, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xdf8f, gbc.sp());
        EXPECT(0xc456, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc454));
        EXPECT(0x22, gbc.readMem(0xc455));
        // CB 22 00FF
        gbc.setState(0xcd5b, 0xc453, 0xa30, 0xd480, 0x45f7, 0x2569, 0x0, 0x1);
        gbc.writeMem(0xcd5b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xc453, gbc.sp());
        EXPECT(0xcd5d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd5b));
        EXPECT(0x22, gbc.readMem(0xcd5c));
        // CB 22 0100
        gbc.setState(0x5006, 0xa920, 0x62a0, 0xe51d, 0xcae7, 0x8cef, 0x1, 0x1);
        gbc.writeMem(0x5006, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xa920, gbc.sp());
        EXPECT(0x5008, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0102
        gbc.setState(0x6da, 0xb0c3, 0x1cb0, 0x3a54, 0x6d34, 0xb744, 0x1, 0x1);
        gbc.writeMem(0x6da, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xb0c3, gbc.sp());
        EXPECT(0x6dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0103
        gbc.setState(0x4e97, 0xdf40, 0x3ef0, 0xe695, 0x90e5, 0x2d85, 0x0, 0x0);
        gbc.writeMem(0x4e97, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xdf40, gbc.sp());
        EXPECT(0x4e99, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0104
        gbc.setState(0x4178, 0x616d, 0x66b0, 0x157e, 0x5470, 0xf604, 0x0, 0x0);
        gbc.writeMem(0x4178, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x616d, gbc.sp());
        EXPECT(0x417a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0105
        gbc.setState(0x7700, 0xe631, 0x50b0, 0x8dc1, 0xc53e, 0x21bf, 0x0, 0x0);
        gbc.writeMem(0x7700, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xe631, gbc.sp());
        EXPECT(0x7702, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0108
        gbc.setState(0x26e1, 0x6273, 0xa8a0, 0x7b66, 0xbfbf, 0x339f, 0x1, 0x1);
        gbc.writeMem(0x26e1, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x6273, gbc.sp());
        EXPECT(0x26e3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0109
        gbc.setState(0xa7bf, 0x54c3, 0x7030, 0xcff1, 0xd1c7, 0xebe1, 0x0, 0x1);
        gbc.writeMem(0xa7bf, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x54c3, gbc.sp());
        EXPECT(0xa7c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa7bf));
        EXPECT(0x22, gbc.readMem(0xa7c0));
        // CB 22 010A
        gbc.setState(0x1e99, 0xe07f, 0x7230, 0x11bd, 0x55c4, 0xe8ae, 0x0, 0x0);
        gbc.writeMem(0x1e99, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xe07f, gbc.sp());
        EXPECT(0x1e9b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 010B
        gbc.setState(0xae4e, 0xcfdb, 0x3410, 0x5cdb, 0xe4dd, 0x369f, 0x1, 0x0);
        gbc.writeMem(0xae4e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xcfdb, gbc.sp());
        EXPECT(0xae50, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae4e));
        EXPECT(0x22, gbc.readMem(0xae4f));
        // CB 22 010C
        gbc.setState(0xd418, 0x873, 0x8f50, 0xad6, 0x9f28, 0x84c5, 0x0, 0x0);
        gbc.writeMem(0xd418, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x873, gbc.sp());
        EXPECT(0xd41a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd418));
        EXPECT(0x22, gbc.readMem(0xd419));
        // CB 22 010D
        gbc.setState(0xd982, 0x1eb2, 0xee40, 0xeca, 0x49d8, 0xc16c, 0x1, 0x1);
        gbc.writeMem(0xd982, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x1eb2, gbc.sp());
        EXPECT(0xd984, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd982));
        EXPECT(0x22, gbc.readMem(0xd983));
        // CB 22 010E
        gbc.setState(0x86cc, 0x2031, 0x6db0, 0x70a7, 0x648b, 0xbad2, 0x0, 0x1);
        gbc.writeMem(0x86cc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x2031, gbc.sp());
        EXPECT(0x86ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x86cc));
        EXPECT(0x22, gbc.readMem(0x86cd));
        // CB 22 010F
        gbc.setState(0xc51e, 0x1307, 0x97d0, 0x58d7, 0x32e4, 0x7e87, 0x1, 0x0);
        gbc.writeMem(0xc51e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x1307, gbc.sp());
        EXPECT(0xc520, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc51e));
        EXPECT(0x22, gbc.readMem(0xc51f));
        // CB 22 0110
        gbc.setState(0xe312, 0x2f94, 0x1de0, 0x9d9c, 0xb02a, 0xa42c, 0x0, 0x1);
        gbc.writeMem(0xe312, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x2f94, gbc.sp());
        EXPECT(0xe314, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe312));
        EXPECT(0x22, gbc.readMem(0xe313));
        // CB 22 0111
        gbc.setState(0xe195, 0x2b5b, 0x77e0, 0x739e, 0x25f9, 0xceb7, 0x0, 0x1);
        gbc.writeMem(0xe195, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x2b5b, gbc.sp());
        EXPECT(0xe197, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe195));
        EXPECT(0x22, gbc.readMem(0xe196));
        // CB 22 0112
        gbc.setState(0xe425, 0xbf60, 0x3480, 0x4a7, 0x26c1, 0x336e, 0x0, 0x0);
        gbc.writeMem(0xe425, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xbf60, gbc.sp());
        EXPECT(0xe427, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe425));
        EXPECT(0x22, gbc.readMem(0xe426));
        // CB 22 0113
        gbc.setState(0x582b, 0x9a3f, 0xbb50, 0x5e50, 0xfe88, 0x3ed7, 0x0, 0x1);
        gbc.writeMem(0x582b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x9a3f, gbc.sp());
        EXPECT(0x582d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0114
        gbc.setState(0x8ee0, 0xcb13, 0xb470, 0x414c, 0x6a82, 0x57f8, 0x1, 0x0);
        gbc.writeMem(0x8ee0, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xcb13, gbc.sp());
        EXPECT(0x8ee2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ee0));
        EXPECT(0x22, gbc.readMem(0x8ee1));
        // CB 22 0115
        gbc.setState(0xaa7d, 0xf538, 0x9000, 0x105a, 0x4bc6, 0xd734, 0x0, 0x0);
        gbc.writeMem(0xaa7d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0xf538, gbc.sp());
        EXPECT(0xaa7f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa7d));
        EXPECT(0x22, gbc.readMem(0xaa7e));
        // CB 22 0116
        gbc.setState(0x2c21, 0x9fb7, 0x8600, 0x9fe, 0xa18f, 0x93d8, 0x1, 0x1);
        gbc.writeMem(0x2c21, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x9fb7, gbc.sp());
        EXPECT(0x2c23, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0117
        gbc.setState(0xa4da, 0x4cb0, 0x4790, 0x61e2, 0x5724, 0x7d79, 0x0, 0x1);
        gbc.writeMem(0xa4da, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x4cb0, gbc.sp());
        EXPECT(0xa4dc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa4da));
        EXPECT(0x22, gbc.readMem(0xa4db));
        // CB 22 0118
        gbc.setState(0x6e15, 0x675f, 0x52f0, 0x6453, 0xb7ae, 0xd16b, 0x1, 0x0);
        gbc.writeMem(0x6e15, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x675f, gbc.sp());
        EXPECT(0x6e17, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0119
        gbc.setState(0xd6c7, 0x3423, 0x2c20, 0x6f47, 0x42dc, 0x9c00, 0x0, 0x1);
        gbc.writeMem(0xd6c7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x3423, gbc.sp());
        EXPECT(0xd6c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6c7));
        EXPECT(0x22, gbc.readMem(0xd6c8));
        // CB 22 011A
        gbc.setState(0xdd2a, 0xecb5, 0xd120, 0x7ffc, 0x225b, 0x4b30, 0x1, 0x1);
        gbc.writeMem(0xdd2a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0xecb5, gbc.sp());
        EXPECT(0xdd2c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd2a));
        EXPECT(0x22, gbc.readMem(0xdd2b));
        // CB 22 011B
        gbc.setState(0x1e19, 0x6bc7, 0x31b0, 0x7d8b, 0x77a7, 0xcd1f, 0x1, 0x1);
        gbc.writeMem(0x1e19, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x6bc7, gbc.sp());
        EXPECT(0x1e1b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 011C
        gbc.setState(0xa8e1, 0xcad5, 0xfe00, 0xad91, 0xffea, 0x85aa, 0x0, 0x0);
        gbc.writeMem(0xa8e1, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xcad5, gbc.sp());
        EXPECT(0xa8e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa8e1));
        EXPECT(0x22, gbc.readMem(0xa8e2));
        // CB 22 011D
        gbc.setState(0x3d7, 0x4612, 0x3b10, 0x19c5, 0xd3a9, 0x5cae, 0x1, 0x1);
        gbc.writeMem(0x3d7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x4612, gbc.sp());
        EXPECT(0x3d9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 011E
        gbc.setState(0xcacd, 0xf7f0, 0x5a20, 0xab44, 0xf89, 0x47e3, 0x0, 0x1);
        gbc.writeMem(0xcacd, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xf7f0, gbc.sp());
        EXPECT(0xcacf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcacd));
        EXPECT(0x22, gbc.readMem(0xcace));
        // CB 22 011F
        gbc.setState(0xecac, 0x7a3, 0x3790, 0x8091, 0xf411, 0x5caf, 0x1, 0x0);
        gbc.writeMem(0xecac, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x7a3, gbc.sp());
        EXPECT(0xecae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xecac));
        EXPECT(0x22, gbc.readMem(0xecad));
        // CB 22 0120
        gbc.setState(0x286d, 0x7633, 0x5b40, 0x7f67, 0xae7, 0x7122, 0x1, 0x0);
        gbc.writeMem(0x286d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x7633, gbc.sp());
        EXPECT(0x286f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0121
        gbc.setState(0x302a, 0x889e, 0x2fe0, 0x721e, 0xc390, 0x36c, 0x1, 0x1);
        gbc.writeMem(0x302a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x889e, gbc.sp());
        EXPECT(0x302c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0122
        gbc.setState(0x425a, 0xd6a5, 0x5600, 0x1087, 0x37d6, 0x9bf6, 0x0, 0x1);
        gbc.writeMem(0x425a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xd6a5, gbc.sp());
        EXPECT(0x425c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0123
        gbc.setState(0x2651, 0xd5df, 0x8280, 0xbbb, 0x6f91, 0x1257, 0x0, 0x0);
        gbc.writeMem(0x2651, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xd5df, gbc.sp());
        EXPECT(0x2653, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0124
        gbc.setState(0x57f5, 0x3a8, 0x7e70, 0x6c4b, 0x65ce, 0x3b69, 0x0, 0x1);
        gbc.writeMem(0x57f5, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x3a8, gbc.sp());
        EXPECT(0x57f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0125
        gbc.setState(0xab50, 0x6c4, 0x63c0, 0x54ac, 0x5d09, 0x467b, 0x0, 0x0);
        gbc.writeMem(0xab50, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x6c4, gbc.sp());
        EXPECT(0xab52, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab50));
        EXPECT(0x22, gbc.readMem(0xab51));
        // CB 22 0126
        gbc.setState(0xa496, 0x57e4, 0xaab0, 0x5026, 0xd28c, 0x151, 0x0, 0x1);
        gbc.writeMem(0xa496, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x57e4, gbc.sp());
        EXPECT(0xa498, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa496));
        EXPECT(0x22, gbc.readMem(0xa497));
        // CB 22 0127
        gbc.setState(0x12b9, 0xe99e, 0x7180, 0x46d5, 0x5ba8, 0xeb2f, 0x0, 0x0);
        gbc.writeMem(0x12b9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xe99e, gbc.sp());
        EXPECT(0x12bb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0128
        gbc.setState(0xb99e, 0x3f10, 0xd640, 0xd8ed, 0x4ae8, 0x8a51, 0x0, 0x1);
        gbc.writeMem(0xb99e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x3f10, gbc.sp());
        EXPECT(0xb9a0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb99e));
        EXPECT(0x22, gbc.readMem(0xb99f));
        // CB 22 0129
        gbc.setState(0x879f, 0x6e83, 0xcf0, 0x4525, 0x8e55, 0x222, 0x1, 0x1);
        gbc.writeMem(0x879f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x6e83, gbc.sp());
        EXPECT(0x87a1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x879f));
        EXPECT(0x22, gbc.readMem(0x87a0));
        // CB 22 012A
        gbc.setState(0x956c, 0x68be, 0x6af0, 0x7d84, 0xe3b3, 0x10f, 0x1, 0x1);
        gbc.writeMem(0x956c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x68be, gbc.sp());
        EXPECT(0x956e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x956c));
        EXPECT(0x22, gbc.readMem(0x956d));
        // CB 22 012B
        gbc.setState(0x4867, 0xf777, 0x3920, 0xae82, 0x33fb, 0x5a5, 0x0, 0x1);
        gbc.writeMem(0x4867, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xf777, gbc.sp());
        EXPECT(0x4869, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 012C
        gbc.setState(0xc671, 0xa195, 0x73c0, 0x8edd, 0xc5c8, 0xdc77, 0x0, 0x1);
        gbc.writeMem(0xc671, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xa195, gbc.sp());
        EXPECT(0xc673, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc671));
        EXPECT(0x22, gbc.readMem(0xc672));
        // CB 22 012D
        gbc.setState(0x70bc, 0xf426, 0xc0a0, 0x7862, 0xd71d, 0x37e0, 0x0, 0x0);
        gbc.writeMem(0x70bc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xf426, gbc.sp());
        EXPECT(0x70be, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 012E
        gbc.setState(0x5757, 0xabd5, 0x1af0, 0xc86d, 0x7bc8, 0x6c36, 0x0, 0x1);
        gbc.writeMem(0x5757, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xabd5, gbc.sp());
        EXPECT(0x5759, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 012F
        gbc.setState(0xa7bd, 0x995f, 0xb400, 0xca6d, 0xd76b, 0xa43a, 0x0, 0x0);
        gbc.writeMem(0xa7bd, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x995f, gbc.sp());
        EXPECT(0xa7bf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa7bd));
        EXPECT(0x22, gbc.readMem(0xa7be));
        // CB 22 0130
        gbc.setState(0xac5e, 0x47ca, 0xe480, 0xfea9, 0x5aa0, 0xca97, 0x1, 0x0);
        gbc.writeMem(0xac5e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x47ca, gbc.sp());
        EXPECT(0xac60, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac5e));
        EXPECT(0x22, gbc.readMem(0xac5f));
        // CB 22 0131
        gbc.setState(0xdcd4, 0xa60a, 0x9bd0, 0x6c66, 0x3ffa, 0x32e9, 0x1, 0x1);
        gbc.writeMem(0xdcd4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xa60a, gbc.sp());
        EXPECT(0xdcd6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdcd4));
        EXPECT(0x22, gbc.readMem(0xdcd5));
        // CB 22 0132
        gbc.setState(0x7e9, 0x561f, 0x280, 0x4aec, 0xbbf3, 0x6b54, 0x0, 0x1);
        gbc.writeMem(0x7e9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x561f, gbc.sp());
        EXPECT(0x7eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0133
        gbc.setState(0x7fdb, 0x99a7, 0xf40, 0x5f76, 0xa52c, 0xe10c, 0x0, 0x0);
        gbc.writeMem(0x7fdb, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x99a7, gbc.sp());
        EXPECT(0x7fdd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0134
        gbc.setState(0xb4b9, 0x4bf6, 0x3180, 0xcae0, 0x4569, 0x6f61, 0x0, 0x0);
        gbc.writeMem(0xb4b9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x4bf6, gbc.sp());
        EXPECT(0xb4bb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb4b9));
        EXPECT(0x22, gbc.readMem(0xb4ba));
        // CB 22 0135
        gbc.setState(0x2456, 0x595, 0x6fe0, 0xc9d2, 0x8223, 0x8f1d, 0x1, 0x1);
        gbc.writeMem(0x2456, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x595, gbc.sp());
        EXPECT(0x2458, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0137
        gbc.setState(0x7e0f, 0x98b1, 0x4ab0, 0xb2eb, 0x8d7b, 0xa0ff, 0x1, 0x1);
        gbc.writeMem(0x7e0f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x98b1, gbc.sp());
        EXPECT(0x7e11, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0139
        gbc.setState(0x13ca, 0x1cde, 0xfba0, 0x9366, 0xb2f0, 0x350d, 0x1, 0x0);
        gbc.writeMem(0x13ca, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x1cde, gbc.sp());
        EXPECT(0x13cc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 013A
        gbc.setState(0x3523, 0x54cd, 0x5030, 0x9b38, 0x8827, 0x7efa, 0x1, 0x0);
        gbc.writeMem(0x3523, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x54cd, gbc.sp());
        EXPECT(0x3525, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 013B
        gbc.setState(0x7f9c, 0xe03a, 0xe590, 0xcd6f, 0x4b26, 0x9723, 0x0, 0x0);
        gbc.writeMem(0x7f9c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xe03a, gbc.sp());
        EXPECT(0x7f9e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 013C
        gbc.setState(0x49d7, 0xc501, 0x3d50, 0x22d9, 0x5cd9, 0x8b4e, 0x1, 0x1);
        gbc.writeMem(0x49d7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xc501, gbc.sp());
        EXPECT(0x49d9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 013D
        gbc.setState(0xe50b, 0x8cbc, 0xa7f0, 0x4281, 0x1583, 0x5686, 0x1, 0x0);
        gbc.writeMem(0xe50b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x8cbc, gbc.sp());
        EXPECT(0xe50d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe50b));
        EXPECT(0x22, gbc.readMem(0xe50c));
        // CB 22 013E
        gbc.setState(0x94c0, 0xee0a, 0x2f60, 0x5df, 0xc04f, 0xff01, 0x0, 0x0);
        gbc.writeMem(0x94c0, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xee0a, gbc.sp());
        EXPECT(0x94c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x94c0));
        EXPECT(0x22, gbc.readMem(0x94c1));
        // CB 22 013F
        gbc.setState(0x16b6, 0xd8bb, 0x9a00, 0x7868, 0xf896, 0xea1d, 0x1, 0x0);
        gbc.writeMem(0x16b6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xd8bb, gbc.sp());
        EXPECT(0x16b8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0140
        gbc.setState(0xb78a, 0xc3e5, 0x3de0, 0xb85, 0x17c1, 0x6252, 0x1, 0x1);
        gbc.writeMem(0xb78a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xc3e5, gbc.sp());
        EXPECT(0xb78c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb78a));
        EXPECT(0x22, gbc.readMem(0xb78b));
        // CB 22 0141
        gbc.setState(0x4762, 0x7e4e, 0x7240, 0x665d, 0x9d52, 0xb9ed, 0x1, 0x1);
        gbc.writeMem(0x4762, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x7e4e, gbc.sp());
        EXPECT(0x4764, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0142
        gbc.setState(0xc202, 0xa213, 0x5060, 0x4da4, 0x209f, 0xf887, 0x0, 0x1);
        gbc.writeMem(0xc202, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xa213, gbc.sp());
        EXPECT(0xc204, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc202));
        EXPECT(0x22, gbc.readMem(0xc203));
        // CB 22 0143
        gbc.setState(0x8619, 0x493f, 0x2b0, 0x2401, 0xc547, 0xb5d1, 0x0, 0x0);
        gbc.writeMem(0x8619, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x493f, gbc.sp());
        EXPECT(0x861b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8619));
        EXPECT(0x22, gbc.readMem(0x861a));
        // CB 22 0144
        gbc.setState(0x8a5e, 0xf5df, 0x30b0, 0xf871, 0xc089, 0x54cb, 0x0, 0x1);
        gbc.writeMem(0x8a5e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xf5df, gbc.sp());
        EXPECT(0x8a60, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a5e));
        EXPECT(0x22, gbc.readMem(0x8a5f));
        // CB 22 0145
        gbc.setState(0xe53d, 0xcfb3, 0x3440, 0x6ddb, 0x37d7, 0x4013, 0x0, 0x0);
        gbc.writeMem(0xe53d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0xcfb3, gbc.sp());
        EXPECT(0xe53f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe53d));
        EXPECT(0x22, gbc.readMem(0xe53e));
        // CB 22 0146
        gbc.setState(0x933c, 0x3da5, 0xf30, 0x3d05, 0x28f4, 0x1137, 0x1, 0x0);
        gbc.writeMem(0x933c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x3da5, gbc.sp());
        EXPECT(0x933e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x933c));
        EXPECT(0x22, gbc.readMem(0x933d));
        // CB 22 0147
        gbc.setState(0x9d18, 0xf8e4, 0x41d0, 0xb99b, 0x6564, 0xec52, 0x1, 0x0);
        gbc.writeMem(0x9d18, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xf8e4, gbc.sp());
        EXPECT(0x9d1a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d18));
        EXPECT(0x22, gbc.readMem(0x9d19));
        // CB 22 0148
        gbc.setState(0xb6c4, 0x33d9, 0x9a70, 0x96eb, 0x5d4f, 0xaaa5, 0x1, 0x0);
        gbc.writeMem(0xb6c4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x33d9, gbc.sp());
        EXPECT(0xb6c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb6c4));
        EXPECT(0x22, gbc.readMem(0xb6c5));
        // CB 22 0149
        gbc.setState(0x29e9, 0x2b1, 0x5990, 0x46d, 0xa71c, 0x990, 0x0, 0x0);
        gbc.writeMem(0x29e9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x2b1, gbc.sp());
        EXPECT(0x29eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 014A
        gbc.setState(0x2ef0, 0x4d30, 0x7d50, 0xf987, 0x93ba, 0x90a7, 0x1, 0x0);
        gbc.writeMem(0x2ef0, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x4d30, gbc.sp());
        EXPECT(0x2ef2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 014B
        gbc.setState(0x7dbd, 0x9abd, 0x3140, 0x5d33, 0x5368, 0xc612, 0x1, 0x0);
        gbc.writeMem(0x7dbd, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x9abd, gbc.sp());
        EXPECT(0x7dbf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 014C
        gbc.setState(0x890, 0x292c, 0x9a30, 0x3dc5, 0x66b4, 0x6a57, 0x1, 0x1);
        gbc.writeMem(0x890, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x292c, gbc.sp());
        EXPECT(0x892, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 014D
        gbc.setState(0x9e95, 0xe14b, 0x47f0, 0x81c8, 0x6f8f, 0xde6c, 0x0, 0x0);
        gbc.writeMem(0x9e95, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xe14b, gbc.sp());
        EXPECT(0x9e97, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e95));
        EXPECT(0x22, gbc.readMem(0x9e96));
        // CB 22 014F
        gbc.setState(0x30f4, 0x1956, 0xf60, 0xa1c0, 0xbe5e, 0x2aa8, 0x1, 0x0);
        gbc.writeMem(0x30f4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x1956, gbc.sp());
        EXPECT(0x30f6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0150
        gbc.setState(0x6065, 0x6bb2, 0xde20, 0x4cee, 0x33b0, 0xcda4, 0x0, 0x0);
        gbc.writeMem(0x6065, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x6bb2, gbc.sp());
        EXPECT(0x6067, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0151
        gbc.setState(0x2a9, 0xf76a, 0x8d00, 0x4e60, 0xf642, 0x2d07, 0x0, 0x0);
        gbc.writeMem(0x2a9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xf76a, gbc.sp());
        EXPECT(0x2ab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0152
        gbc.setState(0x58d4, 0x619e, 0xe6c0, 0x110a, 0xfb0b, 0x727e, 0x1, 0x0);
        gbc.writeMem(0x58d4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x619e, gbc.sp());
        EXPECT(0x58d6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0153
        gbc.setState(0x14c8, 0xa544, 0x4b90, 0x7a, 0x5340, 0x1029, 0x0, 0x1);
        gbc.writeMem(0x14c8, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0xa544, gbc.sp());
        EXPECT(0x14ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0154
        gbc.setState(0xc169, 0xdd52, 0x60d0, 0xbeca, 0xd440, 0xf352, 0x0, 0x1);
        gbc.writeMem(0xc169, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xdd52, gbc.sp());
        EXPECT(0xc16b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc169));
        EXPECT(0x22, gbc.readMem(0xc16a));
        // CB 22 0155
        gbc.setState(0x6847, 0x3599, 0xee0, 0xb5e6, 0x6b33, 0xa2d9, 0x1, 0x1);
        gbc.writeMem(0x6847, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x3599, gbc.sp());
        EXPECT(0x6849, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0156
        gbc.setState(0x5631, 0xf9fc, 0xa330, 0xdfe2, 0x6120, 0x85b, 0x0, 0x1);
        gbc.writeMem(0x5631, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0xf9fc, gbc.sp());
        EXPECT(0x5633, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0157
        gbc.setState(0x3593, 0x45e7, 0x7010, 0xa5bb, 0xb0d4, 0x16a9, 0x0, 0x0);
        gbc.writeMem(0x3593, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x45e7, gbc.sp());
        EXPECT(0x3595, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0158
        gbc.setState(0xdb6e, 0x31b9, 0x230, 0xefd5, 0xe5c7, 0xf1de, 0x1, 0x1);
        gbc.writeMem(0xdb6e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x31b9, gbc.sp());
        EXPECT(0xdb70, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb6e));
        EXPECT(0x22, gbc.readMem(0xdb6f));
        // CB 22 0159
        gbc.setState(0x750, 0xd24e, 0x2bc0, 0x9625, 0xb18f, 0xb2d4, 0x1, 0x0);
        gbc.writeMem(0x750, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0xd24e, gbc.sp());
        EXPECT(0x752, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 015A
        gbc.setState(0x7cb1, 0xe846, 0x4800, 0x718d, 0xf396, 0x806b, 0x0, 0x0);
        gbc.writeMem(0x7cb1, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xe846, gbc.sp());
        EXPECT(0x7cb3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 015B
        gbc.setState(0x9c25, 0x509a, 0x3740, 0xd048, 0x3205, 0xce8f, 0x0, 0x1);
        gbc.writeMem(0x9c25, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x509a, gbc.sp());
        EXPECT(0x9c27, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c25));
        EXPECT(0x22, gbc.readMem(0x9c26));
        // CB 22 015C
        gbc.setState(0x6923, 0xc695, 0xc4f0, 0xa8f3, 0xc46, 0x41fa, 0x1, 0x0);
        gbc.writeMem(0x6923, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xc695, gbc.sp());
        EXPECT(0x6925, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 015E
        gbc.setState(0xeea3, 0xca56, 0xc9f0, 0x5dfc, 0xe34d, 0x826b, 0x0, 0x0);
        gbc.writeMem(0xeea3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xca56, gbc.sp());
        EXPECT(0xeea5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeea3));
        EXPECT(0x22, gbc.readMem(0xeea4));
        // CB 22 015F
        gbc.setState(0x92ab, 0xa3ec, 0xf510, 0xcd50, 0x6424, 0xa8de, 0x0, 0x1);
        gbc.writeMem(0x92ab, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xa3ec, gbc.sp());
        EXPECT(0x92ad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x92ab));
        EXPECT(0x22, gbc.readMem(0x92ac));
        // CB 22 0160
        gbc.setState(0xd774, 0xc0fc, 0x6930, 0xd33c, 0xa3b7, 0x47b8, 0x0, 0x0);
        gbc.writeMem(0xd774, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xc0fc, gbc.sp());
        EXPECT(0xd776, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd774));
        EXPECT(0x22, gbc.readMem(0xd775));
        // CB 22 0161
        gbc.setState(0x3477, 0xad97, 0x6510, 0x65d2, 0xbede, 0x7123, 0x1, 0x0);
        gbc.writeMem(0x3477, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xad97, gbc.sp());
        EXPECT(0x3479, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0162
        gbc.setState(0x88c6, 0x2f50, 0x3bb0, 0xa7b4, 0x7ace, 0xe31f, 0x1, 0x0);
        gbc.writeMem(0x88c6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x2f50, gbc.sp());
        EXPECT(0x88c8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x88c6));
        EXPECT(0x22, gbc.readMem(0x88c7));
        // CB 22 0163
        gbc.setState(0xb0b4, 0x669a, 0xcf70, 0xb90, 0x5aab, 0x24f4, 0x1, 0x0);
        gbc.writeMem(0xb0b4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x669a, gbc.sp());
        EXPECT(0xb0b6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0b4));
        EXPECT(0x22, gbc.readMem(0xb0b5));
        // CB 22 0164
        gbc.setState(0xd043, 0x143b, 0xe090, 0x2772, 0x6350, 0x2d31, 0x0, 0x0);
        gbc.writeMem(0xd043, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x143b, gbc.sp());
        EXPECT(0xd045, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd043));
        EXPECT(0x22, gbc.readMem(0xd044));
        // CB 22 0165
        gbc.setState(0x1dd1, 0x61f1, 0x84e0, 0x8156, 0xb21b, 0x164b, 0x1, 0x0);
        gbc.writeMem(0x1dd1, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x61f1, gbc.sp());
        EXPECT(0x1dd3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0166
        gbc.setState(0x5fb0, 0xbfa5, 0x95e0, 0x10c8, 0xe8be, 0x8f98, 0x0, 0x1);
        gbc.writeMem(0x5fb0, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xbfa5, gbc.sp());
        EXPECT(0x5fb2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0167
        gbc.setState(0x1c1c, 0xfe66, 0x2a60, 0xf19e, 0x76b0, 0xdb15, 0x0, 0x0);
        gbc.writeMem(0x1c1c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xfe66, gbc.sp());
        EXPECT(0x1c1e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0168
        gbc.setState(0xb3b8, 0xf09d, 0xf170, 0xa33d, 0x4874, 0x57b3, 0x1, 0x0);
        gbc.writeMem(0xb3b8, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xf09d, gbc.sp());
        EXPECT(0xb3ba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3b8));
        EXPECT(0x22, gbc.readMem(0xb3b9));
        // CB 22 0169
        gbc.setState(0x1b3a, 0xc477, 0x2d50, 0x9175, 0xb519, 0x4f85, 0x1, 0x0);
        gbc.writeMem(0x1b3a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xc477, gbc.sp());
        EXPECT(0x1b3c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 016A
        gbc.setState(0x917d, 0x30fa, 0xd6b0, 0x9427, 0x257f, 0x96e2, 0x0, 0x0);
        gbc.writeMem(0x917d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x30fa, gbc.sp());
        EXPECT(0x917f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x917d));
        EXPECT(0x22, gbc.readMem(0x917e));
        // CB 22 016B
        gbc.setState(0x7e47, 0x93c0, 0xe2d0, 0x5d49, 0x9221, 0xd90a, 0x0, 0x0);
        gbc.writeMem(0x7e47, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x93c0, gbc.sp());
        EXPECT(0x7e49, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 016D
        gbc.setState(0xd6f9, 0x5b75, 0xd530, 0x4826, 0xba2f, 0xefd, 0x0, 0x1);
        gbc.writeMem(0xd6f9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x5b75, gbc.sp());
        EXPECT(0xd6fb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6f9));
        EXPECT(0x22, gbc.readMem(0xd6fa));
        // CB 22 016E
        gbc.setState(0xe612, 0xc87c, 0x9350, 0x43d6, 0x7781, 0x150d, 0x1, 0x0);
        gbc.writeMem(0xe612, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0xc87c, gbc.sp());
        EXPECT(0xe614, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe612));
        EXPECT(0x22, gbc.readMem(0xe613));
        // CB 22 016F
        gbc.setState(0xd8b8, 0x17ce, 0x2620, 0xb8f3, 0x43a7, 0xec65, 0x1, 0x1);
        gbc.writeMem(0xd8b8, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x17ce, gbc.sp());
        EXPECT(0xd8ba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd8b8));
        EXPECT(0x22, gbc.readMem(0xd8b9));
        // CB 22 0170
        gbc.setState(0x20c3, 0x6b90, 0x2410, 0xc680, 0xc7df, 0xb83e, 0x0, 0x0);
        gbc.writeMem(0x20c3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x6b90, gbc.sp());
        EXPECT(0x20c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0171
        gbc.setState(0x9099, 0x1fc6, 0x4130, 0x134, 0x1897, 0xcf70, 0x0, 0x0);
        gbc.writeMem(0x9099, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x1fc6, gbc.sp());
        EXPECT(0x909b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9099));
        EXPECT(0x22, gbc.readMem(0x909a));
        // CB 22 0172
        gbc.setState(0x2596, 0x454d, 0x4330, 0xb1d4, 0xe03d, 0xbadf, 0x0, 0x0);
        gbc.writeMem(0x2596, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x454d, gbc.sp());
        EXPECT(0x2598, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0173
        gbc.setState(0x20fe, 0x7469, 0xfbc0, 0x46e5, 0x56be, 0xae94, 0x1, 0x0);
        gbc.writeMem(0x20fe, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x7469, gbc.sp());
        EXPECT(0x2100, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0174
        gbc.setState(0x3e0c, 0x2335, 0x4150, 0x30a8, 0xd0ec, 0x8521, 0x1, 0x0);
        gbc.writeMem(0x3e0c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x2335, gbc.sp());
        EXPECT(0x3e0e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0175
        gbc.setState(0xe1ce, 0x5840, 0xc3e0, 0xe627, 0x616d, 0xa612, 0x1, 0x0);
        gbc.writeMem(0xe1ce, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x5840, gbc.sp());
        EXPECT(0xe1d0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe1ce));
        EXPECT(0x22, gbc.readMem(0xe1cf));
        // CB 22 0176
        gbc.setState(0x76d, 0x6da7, 0x3ec0, 0xc2de, 0x687d, 0xd4bb, 0x0, 0x0);
        gbc.writeMem(0x76d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x6da7, gbc.sp());
        EXPECT(0x76f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0177
        gbc.setState(0xb007, 0xce23, 0xbdc0, 0x8a0, 0x4227, 0xea92, 0x0, 0x1);
        gbc.writeMem(0xb007, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xce23, gbc.sp());
        EXPECT(0xb009, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb007));
        EXPECT(0x22, gbc.readMem(0xb008));
        // CB 22 0178
        gbc.setState(0xab38, 0x587f, 0xeba0, 0xcdad, 0xc1aa, 0xe45f, 0x0, 0x0);
        gbc.writeMem(0xab38, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x587f, gbc.sp());
        EXPECT(0xab3a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab38));
        EXPECT(0x22, gbc.readMem(0xab39));
        // CB 22 0179
        gbc.setState(0xc8e5, 0x6f6a, 0x8c80, 0x4bd1, 0x9128, 0xae06, 0x1, 0x1);
        gbc.writeMem(0xc8e5, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x6f6a, gbc.sp());
        EXPECT(0xc8e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8e5));
        EXPECT(0x22, gbc.readMem(0xc8e6));
        // CB 22 017B
        gbc.setState(0xcf67, 0x3d15, 0x8fc0, 0x3e3c, 0xbfc, 0xe269, 0x0, 0x1);
        gbc.writeMem(0xcf67, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x3d15, gbc.sp());
        EXPECT(0xcf69, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf67));
        EXPECT(0x22, gbc.readMem(0xcf68));
        // CB 22 017C
        gbc.setState(0x11d2, 0xa0fd, 0x8650, 0x1c3f, 0xf723, 0xcb64, 0x0, 0x1);
        gbc.writeMem(0x11d2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xa0fd, gbc.sp());
        EXPECT(0x11d4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 017D
        gbc.setState(0xb89f, 0x5ff0, 0x2610, 0x73d6, 0x6a05, 0x4c98, 0x0, 0x1);
        gbc.writeMem(0xb89f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x5ff0, gbc.sp());
        EXPECT(0xb8a1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb89f));
        EXPECT(0x22, gbc.readMem(0xb8a0));
        // CB 22 017E
        gbc.setState(0x518a, 0xd59b, 0x9eb0, 0x1c54, 0xa15d, 0xdf18, 0x0, 0x1);
        gbc.writeMem(0x518a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xd59b, gbc.sp());
        EXPECT(0x518c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 017F
        gbc.setState(0xec73, 0xf264, 0xabe0, 0xe020, 0x42c3, 0xf910, 0x0, 0x1);
        gbc.writeMem(0xec73, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xf264, gbc.sp());
        EXPECT(0xec75, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec73));
        EXPECT(0x22, gbc.readMem(0xec74));
        // CB 22 0180
        gbc.setState(0xc356, 0x7f34, 0xf060, 0x7502, 0x9294, 0xace6, 0x0, 0x0);
        gbc.writeMem(0xc356, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x7f34, gbc.sp());
        EXPECT(0xc358, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc356));
        EXPECT(0x22, gbc.readMem(0xc357));
        // CB 22 0181
        gbc.setState(0xb4e4, 0xeb9c, 0xf370, 0x8dbe, 0x1631, 0x8a32, 0x0, 0x1);
        gbc.writeMem(0xb4e4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0xeb9c, gbc.sp());
        EXPECT(0xb4e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb4e4));
        EXPECT(0x22, gbc.readMem(0xb4e5));
        // CB 22 0182
        gbc.setState(0x6e91, 0x784b, 0x8bf0, 0x40ad, 0x13a0, 0xcda1, 0x1, 0x1);
        gbc.writeMem(0x6e91, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x784b, gbc.sp());
        EXPECT(0x6e93, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0183
        gbc.setState(0x2df0, 0xfcf, 0x6be0, 0xa56a, 0xca81, 0x1ccd, 0x0, 0x0);
        gbc.writeMem(0x2df0, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0xfcf, gbc.sp());
        EXPECT(0x2df2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0184
        gbc.setState(0xcc4e, 0x6d26, 0x340, 0xcb2b, 0x6229, 0x51d3, 0x1, 0x1);
        gbc.writeMem(0xcc4e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x6d26, gbc.sp());
        EXPECT(0xcc50, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc4e));
        EXPECT(0x22, gbc.readMem(0xcc4f));
        // CB 22 0185
        gbc.setState(0x5e7c, 0xc0c6, 0x3840, 0x804, 0x27f4, 0x4268, 0x0, 0x0);
        gbc.writeMem(0x5e7c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0xc0c6, gbc.sp());
        EXPECT(0x5e7e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0186
        gbc.setState(0xb59, 0xe29e, 0x2280, 0xfa95, 0x2d71, 0xed0a, 0x1, 0x0);
        gbc.writeMem(0xb59, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xe29e, gbc.sp());
        EXPECT(0xb5b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0187
        gbc.setState(0x5cc9, 0x1943, 0xbbd0, 0xbe3f, 0x2887, 0x8dc9, 0x1, 0x1);
        gbc.writeMem(0x5cc9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x1943, gbc.sp());
        EXPECT(0x5ccb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0188
        gbc.setState(0x7ede, 0x2d50, 0x170, 0xe5a6, 0x16f2, 0x7cb9, 0x0, 0x1);
        gbc.writeMem(0x7ede, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x2d50, gbc.sp());
        EXPECT(0x7ee0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0189
        gbc.setState(0xe1d7, 0x8314, 0x5ab0, 0xe587, 0xde43, 0x678e, 0x1, 0x1);
        gbc.writeMem(0xe1d7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x8314, gbc.sp());
        EXPECT(0xe1d9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe1d7));
        EXPECT(0x22, gbc.readMem(0xe1d8));
        // CB 22 018A
        gbc.setState(0x7264, 0x2fac, 0x1800, 0xea9a, 0xaebd, 0xc99a, 0x1, 0x0);
        gbc.writeMem(0x7264, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x2fac, gbc.sp());
        EXPECT(0x7266, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 018B
        gbc.setState(0x8283, 0x4cda, 0x9c60, 0x1a39, 0x2037, 0xb07b, 0x0, 0x0);
        gbc.writeMem(0x8283, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x4cda, gbc.sp());
        EXPECT(0x8285, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8283));
        EXPECT(0x22, gbc.readMem(0x8284));
        // CB 22 018C
        gbc.setState(0xbd2d, 0x598f, 0x6860, 0x9dd, 0xd8d5, 0x1633, 0x1, 0x0);
        gbc.writeMem(0xbd2d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x598f, gbc.sp());
        EXPECT(0xbd2f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd2d));
        EXPECT(0x22, gbc.readMem(0xbd2e));
        // CB 22 018D
        gbc.setState(0x40e7, 0xa65a, 0x720, 0xb6fc, 0xc6b3, 0x8d6c, 0x1, 0x1);
        gbc.writeMem(0x40e7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xa65a, gbc.sp());
        EXPECT(0x40e9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0190
        gbc.setState(0x4a27, 0x3ae0, 0xca10, 0xdc24, 0xe71e, 0x1b12, 0x0, 0x1);
        gbc.writeMem(0x4a27, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x3ae0, gbc.sp());
        EXPECT(0x4a29, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0191
        gbc.setState(0x719f, 0xd0a2, 0xdcf0, 0x88e3, 0x7e78, 0x56d8, 0x0, 0x1);
        gbc.writeMem(0x719f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xd0a2, gbc.sp());
        EXPECT(0x71a1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0192
        gbc.setState(0x45eb, 0xfd35, 0x4d0, 0xf55f, 0xb39b, 0xbd97, 0x0, 0x1);
        gbc.writeMem(0x45eb, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xfd35, gbc.sp());
        EXPECT(0x45ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0193
        gbc.setState(0x69ef, 0x1b99, 0x2180, 0x17d1, 0x95ca, 0xbf68, 0x1, 0x1);
        gbc.writeMem(0x69ef, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x1b99, gbc.sp());
        EXPECT(0x69f1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0194
        gbc.setState(0x93f2, 0xfec, 0x5670, 0x84cb, 0xc0b7, 0x8956, 0x1, 0x0);
        gbc.writeMem(0x93f2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xfec, gbc.sp());
        EXPECT(0x93f4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x93f2));
        EXPECT(0x22, gbc.readMem(0x93f3));
        // CB 22 0195
        gbc.setState(0xa9f9, 0xe9b3, 0xba80, 0x47db, 0x2b58, 0x6b6d, 0x0, 0x0);
        gbc.writeMem(0xa9f9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xe9b3, gbc.sp());
        EXPECT(0xa9fb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa9f9));
        EXPECT(0x22, gbc.readMem(0xa9fa));
        // CB 22 0196
        gbc.setState(0x5964, 0x7065, 0x2810, 0x350, 0x618d, 0xab46, 0x1, 0x0);
        gbc.writeMem(0x5964, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x7065, gbc.sp());
        EXPECT(0x5966, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0197
        gbc.setState(0xde07, 0x7a97, 0xc080, 0xb7fc, 0x5900, 0xdaa1, 0x0, 0x0);
        gbc.writeMem(0xde07, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x7a97, gbc.sp());
        EXPECT(0xde09, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde07));
        EXPECT(0x22, gbc.readMem(0xde08));
        // CB 22 0198
        gbc.setState(0x12f9, 0xf6c1, 0x6570, 0x83f4, 0x6a56, 0xa14a, 0x0, 0x0);
        gbc.writeMem(0x12f9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xf6c1, gbc.sp());
        EXPECT(0x12fb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0199
        gbc.setState(0xa08a, 0x279c, 0xcb0, 0xbfe4, 0x6c77, 0xa111, 0x1, 0x1);
        gbc.writeMem(0xa08a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x279c, gbc.sp());
        EXPECT(0xa08c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa08a));
        EXPECT(0x22, gbc.readMem(0xa08b));
        // CB 22 019A
        gbc.setState(0x9e67, 0x3dac, 0x5940, 0x8401, 0xed4, 0x15ee, 0x0, 0x1);
        gbc.writeMem(0x9e67, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x3dac, gbc.sp());
        EXPECT(0x9e69, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e67));
        EXPECT(0x22, gbc.readMem(0x9e68));
        // CB 22 019B
        gbc.setState(0x5fb4, 0x9c9c, 0xc690, 0xc1e3, 0x13f7, 0xf449, 0x0, 0x0);
        gbc.writeMem(0x5fb4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x9c9c, gbc.sp());
        EXPECT(0x5fb6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 019C
        gbc.setState(0x573d, 0x2f45, 0x9cc0, 0x7616, 0xa9f6, 0xf9d6, 0x0, 0x1);
        gbc.writeMem(0x573d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x2f45, gbc.sp());
        EXPECT(0x573f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 019D
        gbc.setState(0x7f42, 0x107c, 0xa980, 0x10ac, 0xab8a, 0x2875, 0x0, 0x1);
        gbc.writeMem(0x7f42, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x107c, gbc.sp());
        EXPECT(0x7f44, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 019E
        gbc.setState(0x5b98, 0xfe26, 0xf2f0, 0xad66, 0x4fb1, 0x93e9, 0x0, 0x1);
        gbc.writeMem(0x5b98, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xfe26, gbc.sp());
        EXPECT(0x5b9a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 019F
        gbc.setState(0x780e, 0xdf09, 0x5080, 0x3803, 0xdb9f, 0x7172, 0x1, 0x0);
        gbc.writeMem(0x780e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xdf09, gbc.sp());
        EXPECT(0x7810, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01A0
        gbc.setState(0x3df7, 0xa25c, 0xf5e0, 0x431b, 0xed0c, 0xb9cc, 0x0, 0x0);
        gbc.writeMem(0x3df7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xa25c, gbc.sp());
        EXPECT(0x3df9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01A1
        gbc.setState(0x3dea, 0x8c5d, 0x37f0, 0xb0f7, 0x1c58, 0xe674, 0x0, 0x0);
        gbc.writeMem(0x3dea, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x8c5d, gbc.sp());
        EXPECT(0x3dec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01A2
        gbc.setState(0xceb5, 0xd699, 0xf040, 0x251c, 0xc826, 0x50, 0x0, 0x0);
        gbc.writeMem(0xceb5, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xd699, gbc.sp());
        EXPECT(0xceb7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xceb5));
        EXPECT(0x22, gbc.readMem(0xceb6));
        // CB 22 01A3
        gbc.setState(0xac53, 0x9f67, 0x5b00, 0x6470, 0x6919, 0xd429, 0x0, 0x0);
        gbc.writeMem(0xac53, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x9f67, gbc.sp());
        EXPECT(0xac55, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac53));
        EXPECT(0x22, gbc.readMem(0xac54));
        // CB 22 01A4
        gbc.setState(0xc54a, 0x84d7, 0xbc30, 0x58d6, 0x47bc, 0xf43a, 0x0, 0x1);
        gbc.writeMem(0xc54a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x84d7, gbc.sp());
        EXPECT(0xc54c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc54a));
        EXPECT(0x22, gbc.readMem(0xc54b));
        // CB 22 01A5
        gbc.setState(0xb686, 0x4183, 0x8a90, 0x5062, 0x62ca, 0x1d80, 0x1, 0x1);
        gbc.writeMem(0xb686, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x4183, gbc.sp());
        EXPECT(0xb688, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb686));
        EXPECT(0x22, gbc.readMem(0xb687));
        // CB 22 01A6
        gbc.setState(0xe8f4, 0x4603, 0x68b0, 0x67d4, 0x6175, 0xc774, 0x0, 0x1);
        gbc.writeMem(0xe8f4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x4603, gbc.sp());
        EXPECT(0xe8f6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe8f4));
        EXPECT(0x22, gbc.readMem(0xe8f5));
        // CB 22 01A8
        gbc.setState(0x2fc5, 0xf69a, 0xb010, 0xa8f5, 0x51cd, 0x7f60, 0x0, 0x1);
        gbc.writeMem(0x2fc5, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0xf69a, gbc.sp());
        EXPECT(0x2fc7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01A9
        gbc.setState(0x449b, 0x50ad, 0xdad0, 0x1566, 0xc5f0, 0x7946, 0x1, 0x1);
        gbc.writeMem(0x449b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x50ad, gbc.sp());
        EXPECT(0x449d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01AA
        gbc.setState(0xcae5, 0x4fd7, 0x6b90, 0x2dc5, 0xafbc, 0xae65, 0x1, 0x1);
        gbc.writeMem(0xcae5, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x4fd7, gbc.sp());
        EXPECT(0xcae7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcae5));
        EXPECT(0x22, gbc.readMem(0xcae6));
        // CB 22 01AB
        gbc.setState(0x183, 0x5d56, 0x3d70, 0x8f76, 0xbec6, 0x995d, 0x1, 0x1);
        gbc.writeMem(0x183, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x5d56, gbc.sp());
        EXPECT(0x185, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01AC
        gbc.setState(0xc4cf, 0xf33a, 0xe7c0, 0xbc85, 0xa0ad, 0x8fb0, 0x1, 0x0);
        gbc.writeMem(0xc4cf, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xf33a, gbc.sp());
        EXPECT(0xc4d1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc4cf));
        EXPECT(0x22, gbc.readMem(0xc4d0));
        // CB 22 01AD
        gbc.setState(0xbdf9, 0xae53, 0x2f50, 0xb60a, 0xa76d, 0x97db, 0x0, 0x1);
        gbc.writeMem(0xbdf9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xae53, gbc.sp());
        EXPECT(0xbdfb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbdf9));
        EXPECT(0x22, gbc.readMem(0xbdfa));
        // CB 22 01AE
        gbc.setState(0x519d, 0xd800, 0xbcd0, 0x8e0a, 0x2135, 0xb5a, 0x0, 0x0);
        gbc.writeMem(0x519d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0xd800, gbc.sp());
        EXPECT(0x519f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01AF
        gbc.setState(0xd49a, 0xa91f, 0xe3c0, 0x413a, 0xbce2, 0x6126, 0x1, 0x0);
        gbc.writeMem(0xd49a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xa91f, gbc.sp());
        EXPECT(0xd49c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd49a));
        EXPECT(0x22, gbc.readMem(0xd49b));
        // CB 22 01B0
        gbc.setState(0x20d, 0x59a8, 0x3f60, 0xcd3d, 0xa7cb, 0xdf0f, 0x1, 0x1);
        gbc.writeMem(0x20d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x59a8, gbc.sp());
        EXPECT(0x20f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01B1
        gbc.setState(0x2022, 0x85fa, 0x6840, 0xfc53, 0x114, 0x21f9, 0x1, 0x1);
        gbc.writeMem(0x2022, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x85fa, gbc.sp());
        EXPECT(0x2024, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01B2
        gbc.setState(0x8f9e, 0x4112, 0x12e0, 0x37ea, 0x7c35, 0xdbf8, 0x1, 0x0);
        gbc.writeMem(0x8f9e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x4112, gbc.sp());
        EXPECT(0x8fa0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f9e));
        EXPECT(0x22, gbc.readMem(0x8f9f));
        // CB 22 01B4
        gbc.setState(0x4831, 0x6a08, 0xb300, 0xd664, 0xd034, 0x802b, 0x1, 0x0);
        gbc.writeMem(0x4831, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x6a08, gbc.sp());
        EXPECT(0x4833, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01B5
        gbc.setState(0x9758, 0x7eab, 0x3620, 0xf088, 0xd5c7, 0x3415, 0x1, 0x0);
        gbc.writeMem(0x9758, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x7eab, gbc.sp());
        EXPECT(0x975a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9758));
        EXPECT(0x22, gbc.readMem(0x9759));
        // CB 22 01B6
        gbc.setState(0xe4e3, 0xe8b2, 0x7900, 0x2667, 0xe0, 0xaa58, 0x1, 0x1);
        gbc.writeMem(0xe4e3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0xe8b2, gbc.sp());
        EXPECT(0xe4e5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe4e3));
        EXPECT(0x22, gbc.readMem(0xe4e4));
        // CB 22 01B7
        gbc.setState(0x6da, 0x16d7, 0x9f50, 0xf0d7, 0x3a0e, 0xda31, 0x1, 0x1);
        gbc.writeMem(0x6da, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x16d7, gbc.sp());
        EXPECT(0x6dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01B8
        gbc.setState(0x4b4f, 0x1a64, 0xc1f0, 0xde0d, 0x3711, 0xdd8f, 0x1, 0x0);
        gbc.writeMem(0x4b4f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x1a64, gbc.sp());
        EXPECT(0x4b51, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01B9
        gbc.setState(0xe412, 0x6335, 0xe1d0, 0x5149, 0xc6d6, 0xe5b4, 0x0, 0x1);
        gbc.writeMem(0xe412, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x6335, gbc.sp());
        EXPECT(0xe414, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe412));
        EXPECT(0x22, gbc.readMem(0xe413));
        // CB 22 01BA
        gbc.setState(0xbaa0, 0xac6e, 0xea40, 0x8d21, 0xa12d, 0xc587, 0x0, 0x1);
        gbc.writeMem(0xbaa0, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xac6e, gbc.sp());
        EXPECT(0xbaa2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbaa0));
        EXPECT(0x22, gbc.readMem(0xbaa1));
        // CB 22 01BB
        gbc.setState(0x447a, 0x2eac, 0x46b0, 0xbf30, 0x14a, 0x51b0, 0x0, 0x0);
        gbc.writeMem(0x447a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x2eac, gbc.sp());
        EXPECT(0x447c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01BC
        gbc.setState(0x6618, 0x566f, 0x8ea0, 0x84e7, 0x899, 0x461e, 0x1, 0x0);
        gbc.writeMem(0x6618, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x566f, gbc.sp());
        EXPECT(0x661a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01BD
        gbc.setState(0xac55, 0x3f90, 0xe9b0, 0xfc17, 0xf141, 0x6323, 0x0, 0x0);
        gbc.writeMem(0xac55, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x3f90, gbc.sp());
        EXPECT(0xac57, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac55));
        EXPECT(0x22, gbc.readMem(0xac56));
        // CB 22 01BE
        gbc.setState(0x9a46, 0xf05b, 0xed00, 0xb7f9, 0xde12, 0xde8d, 0x0, 0x0);
        gbc.writeMem(0x9a46, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xf05b, gbc.sp());
        EXPECT(0x9a48, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a46));
        EXPECT(0x22, gbc.readMem(0x9a47));
        // CB 22 01BF
        gbc.setState(0x358c, 0xce8e, 0xb3f0, 0x7488, 0x87d1, 0xa987, 0x0, 0x1);
        gbc.writeMem(0x358c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xce8e, gbc.sp());
        EXPECT(0x358e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01C0
        gbc.setState(0x4f94, 0xaa3b, 0x14d0, 0x59b5, 0x786, 0x162f, 0x1, 0x0);
        gbc.writeMem(0x4f94, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xaa3b, gbc.sp());
        EXPECT(0x4f96, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01C1
        gbc.setState(0xbfdb, 0x8906, 0x9360, 0xb61, 0x20b7, 0xdd7a, 0x0, 0x0);
        gbc.writeMem(0xbfdb, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x8906, gbc.sp());
        EXPECT(0xbfdd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbfdb));
        EXPECT(0x22, gbc.readMem(0xbfdc));
        // CB 22 01C2
        gbc.setState(0xe37a, 0x9eb, 0x9fc0, 0x18e2, 0xdee9, 0x7e3, 0x1, 0x1);
        gbc.writeMem(0xe37a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x9eb, gbc.sp());
        EXPECT(0xe37c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe37a));
        EXPECT(0x22, gbc.readMem(0xe37b));
        // CB 22 01C3
        gbc.setState(0xed6f, 0x9068, 0xcb50, 0x5c7f, 0x6afe, 0x297c, 0x1, 0x0);
        gbc.writeMem(0xed6f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x9068, gbc.sp());
        EXPECT(0xed71, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed6f));
        EXPECT(0x22, gbc.readMem(0xed70));
        // CB 22 01C4
        gbc.setState(0xea5, 0xf341, 0x8980, 0x3adb, 0xa2bf, 0xe8e4, 0x0, 0x0);
        gbc.writeMem(0xea5, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xf341, gbc.sp());
        EXPECT(0xea7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01C5
        gbc.setState(0x4769, 0xfe2d, 0x3fb0, 0xf5ae, 0x74b1, 0x6d46, 0x0, 0x1);
        gbc.writeMem(0x4769, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xfe2d, gbc.sp());
        EXPECT(0x476b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01C6
        gbc.setState(0xdf0b, 0x710f, 0x4d50, 0x9c5e, 0x2e25, 0xda7a, 0x0, 0x0);
        gbc.writeMem(0xdf0b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x710f, gbc.sp());
        EXPECT(0xdf0d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf0b));
        EXPECT(0x22, gbc.readMem(0xdf0c));
        // CB 22 01C7
        gbc.setState(0xc713, 0x2a85, 0x7d80, 0x53cd, 0x74c9, 0xf0e6, 0x1, 0x0);
        gbc.writeMem(0xc713, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x2a85, gbc.sp());
        EXPECT(0xc715, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc713));
        EXPECT(0x22, gbc.readMem(0xc714));
        // CB 22 01C8
        gbc.setState(0x498c, 0xdf58, 0x8a60, 0x86d4, 0x6c0, 0x131f, 0x1, 0x0);
        gbc.writeMem(0x498c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0xdf58, gbc.sp());
        EXPECT(0x498e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01C9
        gbc.setState(0x14b7, 0x111c, 0x59d0, 0xe63b, 0x4155, 0xf777, 0x0, 0x1);
        gbc.writeMem(0x14b7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x111c, gbc.sp());
        EXPECT(0x14b9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01CA
        gbc.setState(0xccbd, 0x3862, 0x7e10, 0x6a5e, 0x31e, 0x6bac, 0x0, 0x0);
        gbc.writeMem(0xccbd, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x3862, gbc.sp());
        EXPECT(0xccbf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xccbd));
        EXPECT(0x22, gbc.readMem(0xccbe));
        // CB 22 01CB
        gbc.setState(0x5448, 0x2cff, 0xc640, 0x9f46, 0x71, 0x875d, 0x0, 0x1);
        gbc.writeMem(0x5448, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x2cff, gbc.sp());
        EXPECT(0x544a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01CC
        gbc.setState(0x766, 0xd032, 0xcd80, 0xbf84, 0x3d97, 0x9c4a, 0x0, 0x1);
        gbc.writeMem(0x766, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xd032, gbc.sp());
        EXPECT(0x768, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01CD
        gbc.setState(0x6ab, 0x85aa, 0xc740, 0xdbf9, 0xbcbd, 0x81b8, 0x1, 0x1);
        gbc.writeMem(0x6ab, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x85aa, gbc.sp());
        EXPECT(0x6ad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01CE
        gbc.setState(0x3c82, 0x3b6, 0x5150, 0xb3f9, 0xc241, 0x749c, 0x1, 0x1);
        gbc.writeMem(0x3c82, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x3b6, gbc.sp());
        EXPECT(0x3c84, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01CF
        gbc.setState(0x527, 0x9a1d, 0x4ca0, 0xdc46, 0x16b1, 0x51cd, 0x1, 0x0);
        gbc.writeMem(0x527, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x9a1d, gbc.sp());
        EXPECT(0x529, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01D1
        gbc.setState(0xc0ef, 0x238c, 0x66c0, 0xe97b, 0xdfaf, 0x7fcf, 0x1, 0x1);
        gbc.writeMem(0xc0ef, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x238c, gbc.sp());
        EXPECT(0xc0f1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc0ef));
        EXPECT(0x22, gbc.readMem(0xc0f0));
        // CB 22 01D2
        gbc.setState(0xc769, 0x5e68, 0x2e30, 0x6be1, 0x9e58, 0xb219, 0x1, 0x1);
        gbc.writeMem(0xc769, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x5e68, gbc.sp());
        EXPECT(0xc76b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc769));
        EXPECT(0x22, gbc.readMem(0xc76a));
        // CB 22 01D3
        gbc.setState(0x9393, 0xdc50, 0xfb10, 0x8677, 0x3475, 0x1cbe, 0x1, 0x0);
        gbc.writeMem(0x9393, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xdc50, gbc.sp());
        EXPECT(0x9395, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9393));
        EXPECT(0x22, gbc.readMem(0x9394));
        // CB 22 01D4
        gbc.setState(0x403e, 0x2688, 0xc4b0, 0x5419, 0xdc40, 0x749b, 0x1, 0x1);
        gbc.writeMem(0x403e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x2688, gbc.sp());
        EXPECT(0x4040, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01D5
        gbc.setState(0x68c6, 0x8216, 0x4510, 0xb4c6, 0xed7e, 0x4f79, 0x0, 0x1);
        gbc.writeMem(0x68c6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x8216, gbc.sp());
        EXPECT(0x68c8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01D6
        gbc.setState(0xc097, 0x844e, 0x1bf0, 0xa5e8, 0xde3f, 0x1de5, 0x1, 0x1);
        gbc.writeMem(0xc097, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x844e, gbc.sp());
        EXPECT(0xc099, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc097));
        EXPECT(0x22, gbc.readMem(0xc098));
        // CB 22 01D7
        gbc.setState(0x2c4, 0xa2fe, 0x7dc0, 0x1972, 0xf541, 0x8f94, 0x1, 0x0);
        gbc.writeMem(0x2c4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xa2fe, gbc.sp());
        EXPECT(0x2c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01D8
        gbc.setState(0x809d, 0x64fb, 0x2be0, 0x9902, 0x24bd, 0x9b94, 0x0, 0x1);
        gbc.writeMem(0x809d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x64fb, gbc.sp());
        EXPECT(0x809f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x809d));
        EXPECT(0x22, gbc.readMem(0x809e));
        // CB 22 01D9
        gbc.setState(0xa723, 0x88a7, 0x9d30, 0x311a, 0x2d3b, 0x6086, 0x0, 0x0);
        gbc.writeMem(0xa723, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x88a7, gbc.sp());
        EXPECT(0xa725, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa723));
        EXPECT(0x22, gbc.readMem(0xa724));
        // CB 22 01DA
        gbc.setState(0x8fb2, 0xb216, 0xec50, 0xc3d1, 0x548b, 0x47fc, 0x1, 0x0);
        gbc.writeMem(0x8fb2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xb216, gbc.sp());
        EXPECT(0x8fb4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8fb2));
        EXPECT(0x22, gbc.readMem(0x8fb3));
        // CB 22 01DB
        gbc.setState(0x4e99, 0x736f, 0x8b10, 0x88f2, 0x12a0, 0x6df7, 0x1, 0x0);
        gbc.writeMem(0x4e99, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x736f, gbc.sp());
        EXPECT(0x4e9b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01DC
        gbc.setState(0xb0c3, 0xc60f, 0x9fc0, 0xf3eb, 0xf410, 0xfe46, 0x0, 0x1);
        gbc.writeMem(0xb0c3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xc60f, gbc.sp());
        EXPECT(0xb0c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0c3));
        EXPECT(0x22, gbc.readMem(0xb0c4));
        // CB 22 01DD
        gbc.setState(0x2127, 0x9790, 0xbec0, 0x681c, 0x2483, 0xea1, 0x1, 0x0);
        gbc.writeMem(0x2127, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x9790, gbc.sp());
        EXPECT(0x2129, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01DE
        gbc.setState(0x942e, 0x906f, 0x9800, 0xdaf6, 0x5d39, 0x7278, 0x1, 0x0);
        gbc.writeMem(0x942e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x906f, gbc.sp());
        EXPECT(0x9430, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x942e));
        EXPECT(0x22, gbc.readMem(0x942f));
        // CB 22 01DF
        gbc.setState(0xcb6d, 0xa25, 0x9c70, 0x934d, 0xd23b, 0xadc1, 0x1, 0x0);
        gbc.writeMem(0xcb6d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xa25, gbc.sp());
        EXPECT(0xcb6f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb6d));
        EXPECT(0x22, gbc.readMem(0xcb6e));
        // CB 22 01E1
        gbc.setState(0x38c7, 0x8a82, 0xe9a0, 0x33dc, 0xf99a, 0xfc8d, 0x1, 0x1);
        gbc.writeMem(0x38c7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x8a82, gbc.sp());
        EXPECT(0x38c9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01E2
        gbc.setState(0x3c93, 0x8677, 0x26c0, 0xcafb, 0xc791, 0xe286, 0x0, 0x0);
        gbc.writeMem(0x3c93, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x8677, gbc.sp());
        EXPECT(0x3c95, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01E3
        gbc.setState(0xc77c, 0x1f15, 0xeaf0, 0x4ebb, 0x7676, 0x6567, 0x0, 0x0);
        gbc.writeMem(0xc77c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x1f15, gbc.sp());
        EXPECT(0xc77e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc77c));
        EXPECT(0x22, gbc.readMem(0xc77d));
        // CB 22 01E5
        gbc.setState(0x1bbc, 0xbee0, 0x3c80, 0x5de2, 0x3a6c, 0x4455, 0x0, 0x0);
        gbc.writeMem(0x1bbc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0xbee0, gbc.sp());
        EXPECT(0x1bbe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01E6
        gbc.setState(0x20f6, 0xa190, 0x3810, 0x4dbd, 0xda55, 0xf1ce, 0x1, 0x1);
        gbc.writeMem(0x20f6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xa190, gbc.sp());
        EXPECT(0x20f8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01E7
        gbc.setState(0x83cc, 0x50d4, 0x4c10, 0x9d2c, 0xa0b6, 0x101d, 0x1, 0x0);
        gbc.writeMem(0x83cc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x50d4, gbc.sp());
        EXPECT(0x83ce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x83cc));
        EXPECT(0x22, gbc.readMem(0x83cd));
        // CB 22 01E8
        gbc.setState(0x6090, 0xd46d, 0x2930, 0xea3c, 0xba31, 0xddab, 0x0, 0x1);
        gbc.writeMem(0x6090, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xd46d, gbc.sp());
        EXPECT(0x6092, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01E9
        gbc.setState(0x7fd, 0x2202, 0x2610, 0x4adf, 0x8e99, 0x1e3b, 0x1, 0x1);
        gbc.writeMem(0x7fd, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x2202, gbc.sp());
        EXPECT(0x7ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01EB
        gbc.setState(0xced7, 0xf8ce, 0x5c70, 0x6609, 0xe6fd, 0x559, 0x0, 0x1);
        gbc.writeMem(0xced7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xf8ce, gbc.sp());
        EXPECT(0xced9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xced7));
        EXPECT(0x22, gbc.readMem(0xced8));
        // CB 22 01EC
        gbc.setState(0xc2bf, 0x44aa, 0x8010, 0xeea8, 0x2d48, 0x9d69, 0x1, 0x0);
        gbc.writeMem(0xc2bf, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x44aa, gbc.sp());
        EXPECT(0xc2c1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc2bf));
        EXPECT(0x22, gbc.readMem(0xc2c0));
        // CB 22 01ED
        gbc.setState(0x855, 0x3723, 0x1e10, 0xdf60, 0x18cc, 0x43cc, 0x0, 0x0);
        gbc.writeMem(0x855, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x3723, gbc.sp());
        EXPECT(0x857, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01EE
        gbc.setState(0x8495, 0x367a, 0x88b0, 0x347b, 0xc2af, 0x87e9, 0x1, 0x1);
        gbc.writeMem(0x8495, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x367a, gbc.sp());
        EXPECT(0x8497, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8495));
        EXPECT(0x22, gbc.readMem(0x8496));
        // CB 22 01EF
        gbc.setState(0x9645, 0xe50e, 0x3140, 0xeaa1, 0x2b95, 0xd73c, 0x1, 0x0);
        gbc.writeMem(0x9645, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xe50e, gbc.sp());
        EXPECT(0x9647, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9645));
        EXPECT(0x22, gbc.readMem(0x9646));
        // CB 22 01F0
        gbc.setState(0x52b8, 0x9d24, 0xf5b0, 0x8fe, 0x9564, 0xe542, 0x1, 0x1);
        gbc.writeMem(0x52b8, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x9d24, gbc.sp());
        EXPECT(0x52ba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01F1
        gbc.setState(0x505, 0x317e, 0xd660, 0x68e0, 0x9412, 0x9041, 0x0, 0x0);
        gbc.writeMem(0x505, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x317e, gbc.sp());
        EXPECT(0x507, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01F2
        gbc.setState(0x1f9f, 0xbe71, 0xe5e0, 0xbb6a, 0x71a2, 0xaa2c, 0x1, 0x1);
        gbc.writeMem(0x1f9f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xbe71, gbc.sp());
        EXPECT(0x1fa1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01F3
        gbc.setState(0x8dcd, 0x9dee, 0x52e0, 0xe9c, 0x790d, 0x3db7, 0x1, 0x0);
        gbc.writeMem(0x8dcd, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x9dee, gbc.sp());
        EXPECT(0x8dcf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8dcd));
        EXPECT(0x22, gbc.readMem(0x8dce));
        // CB 22 01F4
        gbc.setState(0x9c33, 0x7150, 0x2560, 0xd2cd, 0x3e71, 0x6268, 0x0, 0x0);
        gbc.writeMem(0x9c33, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x7150, gbc.sp());
        EXPECT(0x9c35, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c33));
        EXPECT(0x22, gbc.readMem(0x9c34));
        // CB 22 01F5
        gbc.setState(0x7985, 0x7185, 0x75c0, 0xb89, 0xe610, 0x8d5b, 0x1, 0x1);
        gbc.writeMem(0x7985, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x7185, gbc.sp());
        EXPECT(0x7987, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01F6
        gbc.setState(0x1c1e, 0x4e8f, 0x5e90, 0x5b2a, 0x5e10, 0xe49d, 0x0, 0x1);
        gbc.writeMem(0x1c1e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x4e8f, gbc.sp());
        EXPECT(0x1c20, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01F8
        gbc.setState(0xce2c, 0xc87f, 0x6480, 0xeaf8, 0x6c9, 0xa3cd, 0x1, 0x1);
        gbc.writeMem(0xce2c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0xc87f, gbc.sp());
        EXPECT(0xce2e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce2c));
        EXPECT(0x22, gbc.readMem(0xce2d));
        // CB 22 01F9
        gbc.setState(0x51c6, 0x1e2d, 0xff0, 0x8b7b, 0xd9b9, 0x782e, 0x1, 0x0);
        gbc.writeMem(0x51c6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x1e2d, gbc.sp());
        EXPECT(0x51c8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01FA
        gbc.setState(0x3f39, 0x63b1, 0xf590, 0x6e2f, 0x913d, 0x2f18, 0x1, 0x1);
        gbc.writeMem(0x3f39, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x63b1, gbc.sp());
        EXPECT(0x3f3b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01FB
        gbc.setState(0x31da, 0x796e, 0xb670, 0xab71, 0x8cbc, 0xd0df, 0x1, 0x1);
        gbc.writeMem(0x31da, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x796e, gbc.sp());
        EXPECT(0x31dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 01FC
        gbc.setState(0x27b5, 0x8b82, 0x33c0, 0xc0c9, 0x67f7, 0xb9e6, 0x0, 0x1);
        gbc.writeMem(0x27b5, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x8b82, gbc.sp());
        EXPECT(0x27b7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01FD
        gbc.setState(0x1f13, 0xc139, 0x71a0, 0x16a6, 0x7bc4, 0x1964, 0x1, 0x1);
        gbc.writeMem(0x1f13, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xc139, gbc.sp());
        EXPECT(0x1f15, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 01FE
        gbc.setState(0xcffc, 0x4854, 0x8d60, 0xa190, 0x1bef, 0x9a31, 0x1, 0x1);
        gbc.writeMem(0xcffc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x4854, gbc.sp());
        EXPECT(0xcffe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcffc));
        EXPECT(0x22, gbc.readMem(0xcffd));
        // CB 22 01FF
        gbc.setState(0x14b7, 0xba1d, 0xced0, 0x79ef, 0x69bf, 0xeb1f, 0x1, 0x0);
        gbc.writeMem(0x14b7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0xba1d, gbc.sp());
        EXPECT(0x14b9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0200
        gbc.setState(0xbee3, 0x5362, 0x110, 0x7a73, 0x5ad9, 0x4179, 0x0, 0x0);
        gbc.writeMem(0xbee3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x5362, gbc.sp());
        EXPECT(0xbee5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbee3));
        EXPECT(0x22, gbc.readMem(0xbee4));
        // CB 22 0201
        gbc.setState(0xe3b9, 0xfbf7, 0x71c0, 0xc556, 0x6efd, 0xc2d7, 0x0, 0x1);
        gbc.writeMem(0xe3b9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xfbf7, gbc.sp());
        EXPECT(0xe3bb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe3b9));
        EXPECT(0x22, gbc.readMem(0xe3ba));
        // CB 22 0202
        gbc.setState(0xe4a, 0xfc28, 0x8230, 0x5b3f, 0x3c3c, 0x744, 0x0, 0x0);
        gbc.writeMem(0xe4a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xfc28, gbc.sp());
        EXPECT(0xe4c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0203
        gbc.setState(0xce29, 0xcdb0, 0x95a0, 0x8ee0, 0x24f8, 0xc116, 0x0, 0x1);
        gbc.writeMem(0xce29, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0xcdb0, gbc.sp());
        EXPECT(0xce2b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce29));
        EXPECT(0x22, gbc.readMem(0xce2a));
        // CB 22 0204
        gbc.setState(0xdd0b, 0xc176, 0xad10, 0x1e2d, 0xe7b5, 0x76ce, 0x1, 0x0);
        gbc.writeMem(0xdd0b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xc176, gbc.sp());
        EXPECT(0xdd0d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd0b));
        EXPECT(0x22, gbc.readMem(0xdd0c));
        // CB 22 0205
        gbc.setState(0xebc1, 0x109f, 0xdd50, 0xaf49, 0x84bd, 0xc176, 0x0, 0x1);
        gbc.writeMem(0xebc1, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x109f, gbc.sp());
        EXPECT(0xebc3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xebc1));
        EXPECT(0x22, gbc.readMem(0xebc2));
        // CB 22 0206
        gbc.setState(0xa2d, 0x29c6, 0x5e90, 0x37e7, 0x5c40, 0x4ac4, 0x0, 0x0);
        gbc.writeMem(0xa2d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x29c6, gbc.sp());
        EXPECT(0xa2f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0209
        gbc.setState(0x849d, 0x257c, 0x29a0, 0xc5ee, 0x2cf4, 0xd5ca, 0x0, 0x1);
        gbc.writeMem(0x849d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x257c, gbc.sp());
        EXPECT(0x849f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x849d));
        EXPECT(0x22, gbc.readMem(0x849e));
        // CB 22 020B
        gbc.setState(0xd154, 0x6cf6, 0x6700, 0x3d1b, 0xc73a, 0x7122, 0x0, 0x0);
        gbc.writeMem(0xd154, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x6cf6, gbc.sp());
        EXPECT(0xd156, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd154));
        EXPECT(0x22, gbc.readMem(0xd155));
        // CB 22 020C
        gbc.setState(0x44a4, 0x9b4d, 0x2810, 0xd60a, 0x7a3a, 0x4438, 0x0, 0x1);
        gbc.writeMem(0x44a4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x9b4d, gbc.sp());
        EXPECT(0x44a6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 020D
        gbc.setState(0xd07c, 0xea6d, 0x3f40, 0xeba7, 0x2aad, 0xa789, 0x1, 0x0);
        gbc.writeMem(0xd07c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xea6d, gbc.sp());
        EXPECT(0xd07e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd07c));
        EXPECT(0x22, gbc.readMem(0xd07d));
        // CB 22 020E
        gbc.setState(0x762b, 0x2af2, 0xd290, 0x218, 0xeb6f, 0x7fd4, 0x0, 0x0);
        gbc.writeMem(0x762b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x2af2, gbc.sp());
        EXPECT(0x762d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 020F
        gbc.setState(0xab70, 0x9bd, 0x2560, 0xa289, 0x1fa8, 0xec48, 0x1, 0x0);
        gbc.writeMem(0xab70, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x9bd, gbc.sp());
        EXPECT(0xab72, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab70));
        EXPECT(0x22, gbc.readMem(0xab71));
        // CB 22 0210
        gbc.setState(0x2501, 0xc8fa, 0xc5e0, 0xa3d4, 0x4afc, 0xbb11, 0x1, 0x1);
        gbc.writeMem(0x2501, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0xc8fa, gbc.sp());
        EXPECT(0x2503, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0211
        gbc.setState(0x1cad, 0x23bf, 0xab20, 0xb1ef, 0x33ef, 0x272e, 0x0, 0x0);
        gbc.writeMem(0x1cad, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x23bf, gbc.sp());
        EXPECT(0x1caf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0212
        gbc.setState(0xc93c, 0x378d, 0xcd80, 0x17bf, 0xf4cb, 0x1245, 0x1, 0x1);
        gbc.writeMem(0xc93c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x378d, gbc.sp());
        EXPECT(0xc93e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc93c));
        EXPECT(0x22, gbc.readMem(0xc93d));
        // CB 22 0213
        gbc.setState(0xc9ef, 0x4530, 0x8cb0, 0x7da2, 0x2eb4, 0xf916, 0x0, 0x1);
        gbc.writeMem(0xc9ef, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x4530, gbc.sp());
        EXPECT(0xc9f1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9ef));
        EXPECT(0x22, gbc.readMem(0xc9f0));
        // CB 22 0214
        gbc.setState(0x9d9e, 0xf211, 0xa5c0, 0x994b, 0xc6bd, 0x68a9, 0x0, 0x1);
        gbc.writeMem(0x9d9e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xf211, gbc.sp());
        EXPECT(0x9da0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d9e));
        EXPECT(0x22, gbc.readMem(0x9d9f));
        // CB 22 0215
        gbc.setState(0xedab, 0x41a6, 0x4ac0, 0x834d, 0xb0fa, 0x767b, 0x1, 0x0);
        gbc.writeMem(0xedab, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x41a6, gbc.sp());
        EXPECT(0xedad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xedab));
        EXPECT(0x22, gbc.readMem(0xedac));
        // CB 22 0216
        gbc.setState(0x2972, 0x520a, 0xad50, 0x2721, 0x1fd0, 0x45c1, 0x0, 0x1);
        gbc.writeMem(0x2972, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x520a, gbc.sp());
        EXPECT(0x2974, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0217
        gbc.setState(0x4b6e, 0x98a0, 0xca20, 0x8c7, 0xe3d9, 0xe000, 0x1, 0x1);
        gbc.writeMem(0x4b6e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x98a0, gbc.sp());
        EXPECT(0x4b70, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0218
        gbc.setState(0x8682, 0x23c0, 0x40a0, 0x36b, 0x1308, 0x4bc5, 0x1, 0x1);
        gbc.writeMem(0x8682, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x23c0, gbc.sp());
        EXPECT(0x8684, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8682));
        EXPECT(0x22, gbc.readMem(0x8683));
        // CB 22 0219
        gbc.setState(0xbcaa, 0xab69, 0x2bc0, 0x59f9, 0xbc13, 0x6aa4, 0x1, 0x1);
        gbc.writeMem(0xbcaa, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xab69, gbc.sp());
        EXPECT(0xbcac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbcaa));
        EXPECT(0x22, gbc.readMem(0xbcab));
        // CB 22 021A
        gbc.setState(0x4bcb, 0xbf40, 0x6ac0, 0x76cb, 0xe076, 0x5fe8, 0x1, 0x0);
        gbc.writeMem(0x4bcb, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xbf40, gbc.sp());
        EXPECT(0x4bcd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 021B
        gbc.setState(0x7c12, 0x4fa, 0xbd0, 0xa987, 0x9986, 0x9e2f, 0x1, 0x1);
        gbc.writeMem(0x7c12, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x4fa, gbc.sp());
        EXPECT(0x7c14, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 021C
        gbc.setState(0xe3c, 0x8085, 0x4610, 0x63b7, 0x64e1, 0x789b, 0x1, 0x0);
        gbc.writeMem(0xe3c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x8085, gbc.sp());
        EXPECT(0xe3e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 021D
        gbc.setState(0x4d56, 0x8791, 0x1430, 0x6abd, 0xa675, 0xb76, 0x0, 0x0);
        gbc.writeMem(0x4d56, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x8791, gbc.sp());
        EXPECT(0x4d58, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 021E
        gbc.setState(0x43f3, 0xbff1, 0xfe50, 0x573b, 0xca75, 0xe3b4, 0x0, 0x0);
        gbc.writeMem(0x43f3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xbff1, gbc.sp());
        EXPECT(0x43f5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 021F
        gbc.setState(0xd9c8, 0x86a0, 0xacb0, 0xfc34, 0x1163, 0x4c99, 0x1, 0x0);
        gbc.writeMem(0xd9c8, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x86a0, gbc.sp());
        EXPECT(0xd9ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd9c8));
        EXPECT(0x22, gbc.readMem(0xd9c9));
        // CB 22 0220
        gbc.setState(0xc674, 0xd467, 0xdb0, 0x44d, 0x664c, 0x4b61, 0x0, 0x0);
        gbc.writeMem(0xc674, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xd467, gbc.sp());
        EXPECT(0xc676, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc674));
        EXPECT(0x22, gbc.readMem(0xc675));
        // CB 22 0221
        gbc.setState(0xacd5, 0x3567, 0x2620, 0xdd8d, 0xfa48, 0xf74a, 0x1, 0x0);
        gbc.writeMem(0xacd5, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x3567, gbc.sp());
        EXPECT(0xacd7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xacd5));
        EXPECT(0x22, gbc.readMem(0xacd6));
        // CB 22 0222
        gbc.setState(0xbfc3, 0x43a3, 0x9720, 0xe4ad, 0x7048, 0x899c, 0x0, 0x0);
        gbc.writeMem(0xbfc3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x43a3, gbc.sp());
        EXPECT(0xbfc5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbfc3));
        EXPECT(0x22, gbc.readMem(0xbfc4));
        // CB 22 0223
        gbc.setState(0x5af5, 0xc6d8, 0xa880, 0xf655, 0xec4a, 0xf6d7, 0x0, 0x0);
        gbc.writeMem(0x5af5, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xc6d8, gbc.sp());
        EXPECT(0x5af7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0224
        gbc.setState(0xe966, 0xa625, 0xca30, 0x8b8e, 0x5c12, 0x876e, 0x1, 0x1);
        gbc.writeMem(0xe966, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xa625, gbc.sp());
        EXPECT(0xe968, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe966));
        EXPECT(0x22, gbc.readMem(0xe967));
        // CB 22 0225
        gbc.setState(0xa854, 0x3fda, 0x24e0, 0x882f, 0xe82b, 0x5c4c, 0x0, 0x0);
        gbc.writeMem(0xa854, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x3fda, gbc.sp());
        EXPECT(0xa856, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa854));
        EXPECT(0x22, gbc.readMem(0xa855));
        // CB 22 0226
        gbc.setState(0x910a, 0xc58, 0x7d70, 0x4a84, 0xa55c, 0xe8a5, 0x0, 0x0);
        gbc.writeMem(0x910a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xc58, gbc.sp());
        EXPECT(0x910c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x910a));
        EXPECT(0x22, gbc.readMem(0x910b));
        // CB 22 0227
        gbc.setState(0xc984, 0xf47e, 0xefa0, 0x4dd4, 0xf561, 0x4a80, 0x0, 0x1);
        gbc.writeMem(0xc984, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0xf47e, gbc.sp());
        EXPECT(0xc986, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc984));
        EXPECT(0x22, gbc.readMem(0xc985));
        // CB 22 0228
        gbc.setState(0xa2c7, 0x8098, 0xef20, 0xf791, 0x8d41, 0xeb96, 0x1, 0x1);
        gbc.writeMem(0xa2c7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x8098, gbc.sp());
        EXPECT(0xa2c9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa2c7));
        EXPECT(0x22, gbc.readMem(0xa2c8));
        // CB 22 0229
        gbc.setState(0x25bd, 0x1910, 0xe2c0, 0x903c, 0xeefb, 0xd532, 0x0, 0x1);
        gbc.writeMem(0x25bd, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x1910, gbc.sp());
        EXPECT(0x25bf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 022A
        gbc.setState(0xbbe0, 0xd4f5, 0xd10, 0x35eb, 0x8432, 0x5d0b, 0x0, 0x0);
        gbc.writeMem(0xbbe0, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xd4f5, gbc.sp());
        EXPECT(0xbbe2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbbe0));
        EXPECT(0x22, gbc.readMem(0xbbe1));
        // CB 22 022B
        gbc.setState(0x2914, 0x4199, 0x8140, 0xfd98, 0xee7, 0x991c, 0x1, 0x0);
        gbc.writeMem(0x2914, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x4199, gbc.sp());
        EXPECT(0x2916, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 022C
        gbc.setState(0x48b1, 0x13ed, 0x5570, 0xa740, 0xee75, 0xb9f2, 0x1, 0x1);
        gbc.writeMem(0x48b1, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x13ed, gbc.sp());
        EXPECT(0x48b3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 022D
        gbc.setState(0xe55e, 0x3e3a, 0x3fb0, 0xb249, 0x6661, 0x25f8, 0x1, 0x1);
        gbc.writeMem(0xe55e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x3e3a, gbc.sp());
        EXPECT(0xe560, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe55e));
        EXPECT(0x22, gbc.readMem(0xe55f));
        // CB 22 022E
        gbc.setState(0x28b3, 0x2d85, 0xf6b0, 0x14fc, 0x33a8, 0x5656, 0x1, 0x1);
        gbc.writeMem(0x28b3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x2d85, gbc.sp());
        EXPECT(0x28b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 022F
        gbc.setState(0x8b08, 0x2f04, 0x36d0, 0xeff3, 0x82b8, 0x1dff, 0x1, 0x0);
        gbc.writeMem(0x8b08, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x2f04, gbc.sp());
        EXPECT(0x8b0a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b08));
        EXPECT(0x22, gbc.readMem(0x8b09));
        // CB 22 0230
        gbc.setState(0x58df, 0xebfa, 0xa480, 0x87df, 0x7a43, 0xf7a2, 0x0, 0x0);
        gbc.writeMem(0x58df, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xebfa, gbc.sp());
        EXPECT(0x58e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0231
        gbc.setState(0xa801, 0xcd4c, 0x63e0, 0x41e1, 0x631b, 0x89dc, 0x1, 0x1);
        gbc.writeMem(0xa801, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xcd4c, gbc.sp());
        EXPECT(0xa803, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa801));
        EXPECT(0x22, gbc.readMem(0xa802));
        // CB 22 0232
        gbc.setState(0x80fc, 0x34, 0xdec0, 0xbe4e, 0x1f6d, 0x5908, 0x0, 0x0);
        gbc.writeMem(0x80fc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x34, gbc.sp());
        EXPECT(0x80fe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80fc));
        EXPECT(0x22, gbc.readMem(0x80fd));
        // CB 22 0233
        gbc.setState(0x4062, 0x4bbd, 0x4860, 0x18a0, 0xdd58, 0x12c1, 0x1, 0x1);
        gbc.writeMem(0x4062, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x4bbd, gbc.sp());
        EXPECT(0x4064, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0234
        gbc.setState(0x864c, 0x7261, 0xd400, 0xcdfb, 0x60ea, 0xc203, 0x0, 0x1);
        gbc.writeMem(0x864c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x7261, gbc.sp());
        EXPECT(0x864e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x864c));
        EXPECT(0x22, gbc.readMem(0x864d));
        // CB 22 0235
        gbc.setState(0x56f, 0x8fa9, 0xbbb0, 0xb901, 0x751, 0xb629, 0x0, 0x0);
        gbc.writeMem(0x56f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x8fa9, gbc.sp());
        EXPECT(0x571, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0236
        gbc.setState(0xd19c, 0x32e2, 0x3610, 0xa8bc, 0xef27, 0x46d5, 0x1, 0x1);
        gbc.writeMem(0xd19c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x32e2, gbc.sp());
        EXPECT(0xd19e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd19c));
        EXPECT(0x22, gbc.readMem(0xd19d));
        // CB 22 0237
        gbc.setState(0xa4a2, 0x821, 0x1fd0, 0x74f5, 0xdb36, 0xc4c8, 0x1, 0x1);
        gbc.writeMem(0xa4a2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x821, gbc.sp());
        EXPECT(0xa4a4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa4a2));
        EXPECT(0x22, gbc.readMem(0xa4a3));
        // CB 22 0238
        gbc.setState(0xb771, 0x6313, 0xf390, 0x1530, 0x5083, 0x5b7b, 0x1, 0x1);
        gbc.writeMem(0xb771, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x6313, gbc.sp());
        EXPECT(0xb773, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb771));
        EXPECT(0x22, gbc.readMem(0xb772));
        // CB 22 0239
        gbc.setState(0x22dd, 0x2236, 0x1000, 0x998f, 0xac45, 0x7cbf, 0x1, 0x0);
        gbc.writeMem(0x22dd, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x2236, gbc.sp());
        EXPECT(0x22df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 023A
        gbc.setState(0x4ad0, 0xc20c, 0xbe90, 0x1468, 0x835f, 0xe5f0, 0x1, 0x0);
        gbc.writeMem(0x4ad0, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xc20c, gbc.sp());
        EXPECT(0x4ad2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 023B
        gbc.setState(0xa242, 0x6080, 0x12c0, 0x2938, 0x9220, 0x94bf, 0x0, 0x1);
        gbc.writeMem(0xa242, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x6080, gbc.sp());
        EXPECT(0xa244, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa242));
        EXPECT(0x22, gbc.readMem(0xa243));
        // CB 22 023C
        gbc.setState(0x70ef, 0x1d9a, 0x5a0, 0x505b, 0xba4, 0xfe02, 0x0, 0x0);
        gbc.writeMem(0x70ef, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x1d9a, gbc.sp());
        EXPECT(0x70f1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 023D
        gbc.setState(0xe91c, 0x4276, 0xb080, 0x9957, 0xdf6c, 0x5ce6, 0x1, 0x0);
        gbc.writeMem(0xe91c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x4276, gbc.sp());
        EXPECT(0xe91e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe91c));
        EXPECT(0x22, gbc.readMem(0xe91d));
        // CB 22 023E
        gbc.setState(0x132f, 0x6fb1, 0x7ed0, 0xf4f8, 0xc3eb, 0xc25b, 0x0, 0x1);
        gbc.writeMem(0x132f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x6fb1, gbc.sp());
        EXPECT(0x1331, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 023F
        gbc.setState(0x649b, 0xa4b9, 0x5360, 0xc970, 0xa71a, 0x3784, 0x1, 0x1);
        gbc.writeMem(0x649b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xa4b9, gbc.sp());
        EXPECT(0x649d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0240
        gbc.setState(0xea34, 0xf8ec, 0x1f60, 0x83c7, 0xf0e2, 0xce03, 0x1, 0x0);
        gbc.writeMem(0xea34, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xf8ec, gbc.sp());
        EXPECT(0xea36, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xea34));
        EXPECT(0x22, gbc.readMem(0xea35));
        // CB 22 0241
        gbc.setState(0x383c, 0x38d4, 0xa60, 0xfb7a, 0x6fd8, 0x6123, 0x1, 0x1);
        gbc.writeMem(0x383c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x38d4, gbc.sp());
        EXPECT(0x383e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0243
        gbc.setState(0xb171, 0xcd2e, 0xdd90, 0x5c75, 0xa862, 0xd5b8, 0x0, 0x1);
        gbc.writeMem(0xb171, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xcd2e, gbc.sp());
        EXPECT(0xb173, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb171));
        EXPECT(0x22, gbc.readMem(0xb172));
        // CB 22 0244
        gbc.setState(0x69f1, 0x9fe0, 0x4800, 0x36e5, 0x4a29, 0x2cd0, 0x1, 0x0);
        gbc.writeMem(0x69f1, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x9fe0, gbc.sp());
        EXPECT(0x69f3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0245
        gbc.setState(0x6e73, 0xf633, 0x3d60, 0xcba2, 0xc667, 0xfea0, 0x0, 0x1);
        gbc.writeMem(0x6e73, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xf633, gbc.sp());
        EXPECT(0x6e75, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0246
        gbc.setState(0x2367, 0x609a, 0xe170, 0xcdb8, 0x7736, 0xc2f2, 0x0, 0x0);
        gbc.writeMem(0x2367, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x609a, gbc.sp());
        EXPECT(0x2369, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0247
        gbc.setState(0x60b1, 0x9d32, 0x92b0, 0x8e0d, 0xa5a1, 0x195e, 0x0, 0x0);
        gbc.writeMem(0x60b1, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x9d32, gbc.sp());
        EXPECT(0x60b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0248
        gbc.setState(0xfc5, 0x4f09, 0x25a0, 0x7fd8, 0xbb6e, 0x83c, 0x1, 0x1);
        gbc.writeMem(0xfc5, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x4f09, gbc.sp());
        EXPECT(0xfc7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0249
        gbc.setState(0xa721, 0x5d79, 0x5480, 0x13, 0x8e3, 0x87a4, 0x0, 0x1);
        gbc.writeMem(0xa721, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x5d79, gbc.sp());
        EXPECT(0xa723, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa721));
        EXPECT(0x22, gbc.readMem(0xa722));
        // CB 22 024A
        gbc.setState(0x8eca, 0x845a, 0x6ef0, 0x721e, 0x21a0, 0xca2, 0x1, 0x0);
        gbc.writeMem(0x8eca, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x845a, gbc.sp());
        EXPECT(0x8ecc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8eca));
        EXPECT(0x22, gbc.readMem(0x8ecb));
        // CB 22 024B
        gbc.setState(0x77df, 0x1a75, 0x4790, 0xa3cf, 0x49fd, 0xcea5, 0x0, 0x0);
        gbc.writeMem(0x77df, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x1a75, gbc.sp());
        EXPECT(0x77e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 024C
        gbc.setState(0x55a0, 0x2bec, 0xcb0, 0x8f17, 0x2f2, 0x1063, 0x0, 0x1);
        gbc.writeMem(0x55a0, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x2bec, gbc.sp());
        EXPECT(0x55a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 024D
        gbc.setState(0x58a, 0x181b, 0x31f0, 0x6021, 0x9da, 0x8d0a, 0x1, 0x0);
        gbc.writeMem(0x58a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x181b, gbc.sp());
        EXPECT(0x58c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 024E
        gbc.setState(0x914c, 0x3a9e, 0x4b10, 0x1aaa, 0xac1, 0x2fd0, 0x0, 0x1);
        gbc.writeMem(0x914c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x3a9e, gbc.sp());
        EXPECT(0x914e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x914c));
        EXPECT(0x22, gbc.readMem(0x914d));
        // CB 22 024F
        gbc.setState(0xc27d, 0xa0f8, 0x4cb0, 0x40e3, 0xca5b, 0x5f79, 0x0, 0x1);
        gbc.writeMem(0xc27d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0xa0f8, gbc.sp());
        EXPECT(0xc27f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc27d));
        EXPECT(0x22, gbc.readMem(0xc27e));
        // CB 22 0250
        gbc.setState(0x1a7e, 0xa016, 0xca80, 0xcd53, 0xad4, 0xc37b, 0x1, 0x1);
        gbc.writeMem(0x1a7e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xa016, gbc.sp());
        EXPECT(0x1a80, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0251
        gbc.setState(0x7baf, 0xa3dd, 0xa090, 0x7561, 0x749e, 0xdb3a, 0x1, 0x0);
        gbc.writeMem(0x7baf, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xa3dd, gbc.sp());
        EXPECT(0x7bb1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0252
        gbc.setState(0xc9c7, 0xdafe, 0xc200, 0xcc64, 0x9a7c, 0x893d, 0x1, 0x1);
        gbc.writeMem(0xc9c7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xdafe, gbc.sp());
        EXPECT(0xc9c9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9c7));
        EXPECT(0x22, gbc.readMem(0xc9c8));
        // CB 22 0253
        gbc.setState(0x2539, 0x38db, 0xd70, 0x741c, 0xa35f, 0x4706, 0x1, 0x0);
        gbc.writeMem(0x2539, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x38db, gbc.sp());
        EXPECT(0x253b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0254
        gbc.setState(0x7e60, 0x1af6, 0x7f0, 0x8665, 0xb12, 0x8e4e, 0x1, 0x1);
        gbc.writeMem(0x7e60, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x1af6, gbc.sp());
        EXPECT(0x7e62, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0255
        gbc.setState(0x1faa, 0x85e9, 0x9e70, 0xe090, 0x803f, 0xc99b, 0x1, 0x0);
        gbc.writeMem(0x1faa, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x85e9, gbc.sp());
        EXPECT(0x1fac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0256
        gbc.setState(0x90b0, 0x558, 0x27b0, 0xae67, 0x9871, 0x286f, 0x1, 0x0);
        gbc.writeMem(0x90b0, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x558, gbc.sp());
        EXPECT(0x90b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x90b0));
        EXPECT(0x22, gbc.readMem(0x90b1));
        // CB 22 0257
        gbc.setState(0x7cc4, 0xd565, 0xdd00, 0xe067, 0xa496, 0x7234, 0x1, 0x0);
        gbc.writeMem(0x7cc4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0xd565, gbc.sp());
        EXPECT(0x7cc6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0258
        gbc.setState(0x36f9, 0xeabe, 0x90c0, 0x3e68, 0x92a5, 0x144b, 0x0, 0x0);
        gbc.writeMem(0x36f9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xeabe, gbc.sp());
        EXPECT(0x36fb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0259
        gbc.setState(0x3ed, 0x7906, 0x2d70, 0x23b2, 0x54e0, 0x26e, 0x1, 0x0);
        gbc.writeMem(0x3ed, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x7906, gbc.sp());
        EXPECT(0x3ef, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 025A
        gbc.setState(0x1e74, 0x3142, 0x36b0, 0x302, 0xb50, 0x1748, 0x0, 0x1);
        gbc.writeMem(0x1e74, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x3142, gbc.sp());
        EXPECT(0x1e76, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 025B
        gbc.setState(0x4a1c, 0x598, 0xec0, 0xc72e, 0xb923, 0x79a1, 0x1, 0x1);
        gbc.writeMem(0x4a1c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x598, gbc.sp());
        EXPECT(0x4a1e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 025C
        gbc.setState(0x1f82, 0x63b1, 0x6320, 0x2b42, 0x2d8b, 0x133e, 0x1, 0x0);
        gbc.writeMem(0x1f82, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x63b1, gbc.sp());
        EXPECT(0x1f84, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 025D
        gbc.setState(0x8ff9, 0xeb04, 0x610, 0x24db, 0xab6a, 0xfab6, 0x0, 0x1);
        gbc.writeMem(0x8ff9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xeb04, gbc.sp());
        EXPECT(0x8ffb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ff9));
        EXPECT(0x22, gbc.readMem(0x8ffa));
        // CB 22 025E
        gbc.setState(0xa1e2, 0xab86, 0xe190, 0xb87, 0xf52c, 0x2f50, 0x0, 0x0);
        gbc.writeMem(0xa1e2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xab86, gbc.sp());
        EXPECT(0xa1e4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa1e2));
        EXPECT(0x22, gbc.readMem(0xa1e3));
        // CB 22 025F
        gbc.setState(0x84a1, 0x1cf, 0xe9f0, 0x7a60, 0xc023, 0xd884, 0x1, 0x1);
        gbc.writeMem(0x84a1, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x1cf, gbc.sp());
        EXPECT(0x84a3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84a1));
        EXPECT(0x22, gbc.readMem(0x84a2));
        // CB 22 0260
        gbc.setState(0x2158, 0x4994, 0x83f0, 0x2a16, 0xea11, 0x1934, 0x0, 0x0);
        gbc.writeMem(0x2158, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x4994, gbc.sp());
        EXPECT(0x215a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0261
        gbc.setState(0x96b4, 0x6e, 0xc7d0, 0x4c2f, 0x5a2a, 0xa94a, 0x1, 0x0);
        gbc.writeMem(0x96b4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x6e, gbc.sp());
        EXPECT(0x96b6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96b4));
        EXPECT(0x22, gbc.readMem(0x96b5));
        // CB 22 0262
        gbc.setState(0x5413, 0x3b07, 0xd990, 0x6298, 0xd2b2, 0x14b0, 0x1, 0x1);
        gbc.writeMem(0x5413, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x3b07, gbc.sp());
        EXPECT(0x5415, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0264
        gbc.setState(0x3480, 0x8736, 0xf960, 0x5c4f, 0x1f32, 0x84f8, 0x0, 0x0);
        gbc.writeMem(0x3480, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x8736, gbc.sp());
        EXPECT(0x3482, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0265
        gbc.setState(0x8406, 0x5dbd, 0xb110, 0xcb20, 0x4525, 0x785, 0x0, 0x1);
        gbc.writeMem(0x8406, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x5dbd, gbc.sp());
        EXPECT(0x8408, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8406));
        EXPECT(0x22, gbc.readMem(0x8407));
        // CB 22 0266
        gbc.setState(0x2b4e, 0xbb56, 0xfc00, 0xc54, 0x94b7, 0x8e03, 0x1, 0x1);
        gbc.writeMem(0x2b4e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xbb56, gbc.sp());
        EXPECT(0x2b50, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0267
        gbc.setState(0xc9a, 0x170b, 0x1f70, 0xaf0, 0xdd4e, 0x7325, 0x1, 0x1);
        gbc.writeMem(0xc9a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x170b, gbc.sp());
        EXPECT(0xc9c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0268
        gbc.setState(0xc76d, 0xdfb5, 0x67b0, 0x501e, 0x9f0, 0xe92f, 0x1, 0x1);
        gbc.writeMem(0xc76d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xdfb5, gbc.sp());
        EXPECT(0xc76f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc76d));
        EXPECT(0x22, gbc.readMem(0xc76e));
        // CB 22 0269
        gbc.setState(0xd5be, 0x32f4, 0xafa0, 0x54ce, 0x4b3b, 0xeef2, 0x1, 0x1);
        gbc.writeMem(0xd5be, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x32f4, gbc.sp());
        EXPECT(0xd5c0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd5be));
        EXPECT(0x22, gbc.readMem(0xd5bf));
        // CB 22 026A
        gbc.setState(0x179d, 0x26bc, 0x7420, 0xa39d, 0xde77, 0x15bd, 0x0, 0x1);
        gbc.writeMem(0x179d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x26bc, gbc.sp());
        EXPECT(0x179f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 026B
        gbc.setState(0xc004, 0x8fd9, 0x6c90, 0xa6b5, 0x4926, 0x1650, 0x0, 0x0);
        gbc.writeMem(0xc004, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x8fd9, gbc.sp());
        EXPECT(0xc006, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc004));
        EXPECT(0x22, gbc.readMem(0xc005));
        // CB 22 026C
        gbc.setState(0xd84a, 0x672d, 0x6730, 0xfc56, 0x30e3, 0xf8d7, 0x0, 0x1);
        gbc.writeMem(0xd84a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x672d, gbc.sp());
        EXPECT(0xd84c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd84a));
        EXPECT(0x22, gbc.readMem(0xd84b));
        // CB 22 026D
        gbc.setState(0x249b, 0x80e7, 0xaa0, 0x1838, 0xa6ff, 0x126d, 0x1, 0x0);
        gbc.writeMem(0x249b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x80e7, gbc.sp());
        EXPECT(0x249d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 026E
        gbc.setState(0xe362, 0x8af8, 0xe310, 0x9c99, 0x78a9, 0x5331, 0x1, 0x0);
        gbc.writeMem(0xe362, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x8af8, gbc.sp());
        EXPECT(0xe364, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe362));
        EXPECT(0x22, gbc.readMem(0xe363));
        // CB 22 026F
        gbc.setState(0xc059, 0xce90, 0xe5c0, 0x57a6, 0x6904, 0x22a, 0x0, 0x1);
        gbc.writeMem(0xc059, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0xce90, gbc.sp());
        EXPECT(0xc05b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc059));
        EXPECT(0x22, gbc.readMem(0xc05a));
        // CB 22 0270
        gbc.setState(0x5532, 0x9ed4, 0x4f30, 0x3040, 0x21be, 0xaed2, 0x1, 0x0);
        gbc.writeMem(0x5532, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x9ed4, gbc.sp());
        EXPECT(0x5534, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0271
        gbc.setState(0x3791, 0x609b, 0xd880, 0x58b3, 0x9da7, 0xd2f9, 0x1, 0x1);
        gbc.writeMem(0x3791, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x609b, gbc.sp());
        EXPECT(0x3793, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0272
        gbc.setState(0xc8ee, 0xe026, 0xbcc0, 0xa0d3, 0xec72, 0x9ea5, 0x1, 0x0);
        gbc.writeMem(0xc8ee, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xe026, gbc.sp());
        EXPECT(0xc8f0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8ee));
        EXPECT(0x22, gbc.readMem(0xc8ef));
        // CB 22 0273
        gbc.setState(0xe897, 0x25cb, 0xa370, 0x5f44, 0x9cf1, 0x606d, 0x1, 0x1);
        gbc.writeMem(0xe897, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x25cb, gbc.sp());
        EXPECT(0xe899, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe897));
        EXPECT(0x22, gbc.readMem(0xe898));
        // CB 22 0274
        gbc.setState(0x5e5a, 0x61a, 0x3860, 0x972f, 0xae5d, 0xb902, 0x1, 0x1);
        gbc.writeMem(0x5e5a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x61a, gbc.sp());
        EXPECT(0x5e5c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0275
        gbc.setState(0xac69, 0x1755, 0x9d0, 0x5320, 0x1d71, 0x453f, 0x0, 0x1);
        gbc.writeMem(0xac69, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x1755, gbc.sp());
        EXPECT(0xac6b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac69));
        EXPECT(0x22, gbc.readMem(0xac6a));
        // CB 22 0277
        gbc.setState(0x409, 0x7eb8, 0xd980, 0x7d67, 0x4d15, 0x3040, 0x1, 0x0);
        gbc.writeMem(0x409, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x7eb8, gbc.sp());
        EXPECT(0x40b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0278
        gbc.setState(0xc32e, 0x727a, 0x2e40, 0x2706, 0x87a0, 0x4707, 0x1, 0x1);
        gbc.writeMem(0xc32e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x727a, gbc.sp());
        EXPECT(0xc330, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc32e));
        EXPECT(0x22, gbc.readMem(0xc32f));
        // CB 22 0279
        gbc.setState(0xb435, 0x70db, 0xfa40, 0xb7cb, 0x8cfc, 0xdc8e, 0x0, 0x1);
        gbc.writeMem(0xb435, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x70db, gbc.sp());
        EXPECT(0xb437, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb435));
        EXPECT(0x22, gbc.readMem(0xb436));
        // CB 22 027A
        gbc.setState(0xd522, 0xf411, 0x5a90, 0x5cdf, 0xaf58, 0x5974, 0x1, 0x1);
        gbc.writeMem(0xd522, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xf411, gbc.sp());
        EXPECT(0xd524, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd522));
        EXPECT(0x22, gbc.readMem(0xd523));
        // CB 22 027B
        gbc.setState(0x37cc, 0xbaf9, 0x1710, 0x2248, 0x8b7, 0x9499, 0x1, 0x0);
        gbc.writeMem(0x37cc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xbaf9, gbc.sp());
        EXPECT(0x37ce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 027C
        gbc.setState(0x32ea, 0x575b, 0x340, 0xe112, 0xa77a, 0x43b9, 0x1, 0x0);
        gbc.writeMem(0x32ea, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x575b, gbc.sp());
        EXPECT(0x32ec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 027E
        gbc.setState(0xd0c4, 0x62ab, 0x38f0, 0xced, 0x839e, 0x5ba8, 0x1, 0x1);
        gbc.writeMem(0xd0c4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x62ab, gbc.sp());
        EXPECT(0xd0c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd0c4));
        EXPECT(0x22, gbc.readMem(0xd0c5));
        // CB 22 027F
        gbc.setState(0x2bd7, 0x1b0b, 0xcbf0, 0xa534, 0xcb7, 0x27cf, 0x1, 0x1);
        gbc.writeMem(0x2bd7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x1b0b, gbc.sp());
        EXPECT(0x2bd9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0280
        gbc.setState(0x98c, 0xb9, 0x43d0, 0x9c9d, 0x4d67, 0x92b, 0x1, 0x1);
        gbc.writeMem(0x98c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xb9, gbc.sp());
        EXPECT(0x98e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0281
        gbc.setState(0x729e, 0x60ee, 0x6f00, 0x9025, 0x7595, 0xe988, 0x0, 0x1);
        gbc.writeMem(0x729e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x60ee, gbc.sp());
        EXPECT(0x72a0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0282
        gbc.setState(0x610d, 0xa1d8, 0xe5a0, 0xf0d6, 0x19e4, 0xc710, 0x0, 0x0);
        gbc.writeMem(0x610d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xa1d8, gbc.sp());
        EXPECT(0x610f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0283
        gbc.setState(0x1727, 0x6b7, 0x1b40, 0x5409, 0xc2ef, 0xdc2c, 0x1, 0x0);
        gbc.writeMem(0x1727, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x6b7, gbc.sp());
        EXPECT(0x1729, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0284
        gbc.setState(0x2732, 0x8b02, 0xde70, 0x6915, 0x6766, 0xe5b7, 0x0, 0x0);
        gbc.writeMem(0x2732, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x8b02, gbc.sp());
        EXPECT(0x2734, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0285
        gbc.setState(0x166e, 0xaba7, 0xb520, 0x634a, 0x97b6, 0xc46b, 0x0, 0x1);
        gbc.writeMem(0x166e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xaba7, gbc.sp());
        EXPECT(0x1670, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0286
        gbc.setState(0x16d, 0x17b8, 0x7860, 0x7d86, 0x1e83, 0x3a5d, 0x1, 0x0);
        gbc.writeMem(0x16d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x17b8, gbc.sp());
        EXPECT(0x16f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0287
        gbc.setState(0x92aa, 0x455c, 0xbcf0, 0x5b6e, 0x83eb, 0x62d0, 0x0, 0x0);
        gbc.writeMem(0x92aa, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x455c, gbc.sp());
        EXPECT(0x92ac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x92aa));
        EXPECT(0x22, gbc.readMem(0x92ab));
        // CB 22 0288
        gbc.setState(0x80b8, 0x9a5e, 0x1080, 0xd853, 0x2abe, 0xd2d4, 0x0, 0x1);
        gbc.writeMem(0x80b8, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x9a5e, gbc.sp());
        EXPECT(0x80ba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80b8));
        EXPECT(0x22, gbc.readMem(0x80b9));
        // CB 22 0289
        gbc.setState(0xeb48, 0x721f, 0x9b50, 0xb5e6, 0x5038, 0xe103, 0x1, 0x0);
        gbc.writeMem(0xeb48, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x721f, gbc.sp());
        EXPECT(0xeb4a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb48));
        EXPECT(0x22, gbc.readMem(0xeb49));
        // CB 22 028B
        gbc.setState(0xf19, 0xd247, 0xfd80, 0xb516, 0x63b7, 0x9d55, 0x0, 0x0);
        gbc.writeMem(0xf19, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0xd247, gbc.sp());
        EXPECT(0xf1b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 028C
        gbc.setState(0x2cfc, 0x9c2, 0x6790, 0x6d73, 0x82a8, 0x2670, 0x0, 0x0);
        gbc.writeMem(0x2cfc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x9c2, gbc.sp());
        EXPECT(0x2cfe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 028D
        gbc.setState(0xc93f, 0xdc33, 0xa440, 0x7535, 0xf5d, 0xe0e, 0x0, 0x0);
        gbc.writeMem(0xc93f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0xdc33, gbc.sp());
        EXPECT(0xc941, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc93f));
        EXPECT(0x22, gbc.readMem(0xc940));
        // CB 22 028E
        gbc.setState(0x7606, 0xe0a6, 0xf110, 0x440d, 0x7385, 0x991d, 0x1, 0x1);
        gbc.writeMem(0x7606, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xe0a6, gbc.sp());
        EXPECT(0x7608, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 028F
        gbc.setState(0x4d99, 0x3b80, 0xecf0, 0x552a, 0x699e, 0x1099, 0x0, 0x0);
        gbc.writeMem(0x4d99, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x3b80, gbc.sp());
        EXPECT(0x4d9b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0290
        gbc.setState(0xa7c2, 0x2368, 0xaa70, 0x8b47, 0xdade, 0x7a2c, 0x0, 0x1);
        gbc.writeMem(0xa7c2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x2368, gbc.sp());
        EXPECT(0xa7c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa7c2));
        EXPECT(0x22, gbc.readMem(0xa7c3));
        // CB 22 0291
        gbc.setState(0x29f0, 0x76ef, 0xda00, 0x463c, 0x17b0, 0x1e82, 0x0, 0x0);
        gbc.writeMem(0x29f0, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x76ef, gbc.sp());
        EXPECT(0x29f2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0292
        gbc.setState(0xa6e5, 0xde5b, 0x41d0, 0xa3b7, 0x52e, 0x79cb, 0x0, 0x0);
        gbc.writeMem(0xa6e5, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xde5b, gbc.sp());
        EXPECT(0xa6e7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6e5));
        EXPECT(0x22, gbc.readMem(0xa6e6));
        // CB 22 0293
        gbc.setState(0x3e70, 0x4679, 0xeb10, 0x688c, 0xe3b9, 0xc6fc, 0x1, 0x1);
        gbc.writeMem(0x3e70, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x4679, gbc.sp());
        EXPECT(0x3e72, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0294
        gbc.setState(0x47d1, 0xe43a, 0x7090, 0xed05, 0xd23e, 0xf324, 0x0, 0x1);
        gbc.writeMem(0x47d1, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0xe43a, gbc.sp());
        EXPECT(0x47d3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0295
        gbc.setState(0xfc6, 0xa714, 0xfe10, 0x605c, 0x1db4, 0x77a4, 0x0, 0x0);
        gbc.writeMem(0xfc6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xa714, gbc.sp());
        EXPECT(0xfc8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0296
        gbc.setState(0xd040, 0x9436, 0x6640, 0x2cd2, 0xbb60, 0x1305, 0x1, 0x0);
        gbc.writeMem(0xd040, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x9436, gbc.sp());
        EXPECT(0xd042, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd040));
        EXPECT(0x22, gbc.readMem(0xd041));
        // CB 22 0297
        gbc.setState(0x3883, 0xfca1, 0x38e0, 0x6347, 0x38a9, 0x2af5, 0x0, 0x1);
        gbc.writeMem(0x3883, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xfca1, gbc.sp());
        EXPECT(0x3885, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0298
        gbc.setState(0x1c4a, 0x7ce7, 0xaa20, 0xdf4c, 0xe41, 0xc83e, 0x0, 0x0);
        gbc.writeMem(0x1c4a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x7ce7, gbc.sp());
        EXPECT(0x1c4c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0299
        gbc.setState(0x542a, 0x9e2f, 0xce00, 0x66fe, 0x4f63, 0xe255, 0x0, 0x1);
        gbc.writeMem(0x542a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x9e2f, gbc.sp());
        EXPECT(0x542c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 029A
        gbc.setState(0x695d, 0x7cc3, 0x7d30, 0xe09d, 0x611e, 0x6457, 0x1, 0x1);
        gbc.writeMem(0x695d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x7cc3, gbc.sp());
        EXPECT(0x695f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 029B
        gbc.setState(0x8e76, 0x1fea, 0xc380, 0x962e, 0x3b40, 0x62a5, 0x0, 0x0);
        gbc.writeMem(0x8e76, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x1fea, gbc.sp());
        EXPECT(0x8e78, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e76));
        EXPECT(0x22, gbc.readMem(0x8e77));
        // CB 22 029C
        gbc.setState(0x478a, 0x6946, 0xa1e0, 0xfb59, 0x2076, 0x18b7, 0x0, 0x0);
        gbc.writeMem(0x478a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x6946, gbc.sp());
        EXPECT(0x478c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 029D
        gbc.setState(0xaff7, 0x2fab, 0x9a50, 0xbc99, 0xbb0, 0x72c5, 0x1, 0x0);
        gbc.writeMem(0xaff7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x2fab, gbc.sp());
        EXPECT(0xaff9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaff7));
        EXPECT(0x22, gbc.readMem(0xaff8));
        // CB 22 029E
        gbc.setState(0x9ea2, 0xff51, 0x30c0, 0xabf, 0x2376, 0x14a1, 0x0, 0x0);
        gbc.writeMem(0x9ea2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xff51, gbc.sp());
        EXPECT(0x9ea4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ea2));
        EXPECT(0x22, gbc.readMem(0x9ea3));
        // CB 22 029F
        gbc.setState(0xbfd3, 0xed72, 0xdec0, 0xbc02, 0x6c87, 0x5549, 0x0, 0x0);
        gbc.writeMem(0xbfd3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xed72, gbc.sp());
        EXPECT(0xbfd5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbfd3));
        EXPECT(0x22, gbc.readMem(0xbfd4));
        // CB 22 02A0
        gbc.setState(0xeb90, 0x667c, 0xf090, 0x738c, 0x519f, 0xdcbc, 0x0, 0x1);
        gbc.writeMem(0xeb90, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x667c, gbc.sp());
        EXPECT(0xeb92, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb90));
        EXPECT(0x22, gbc.readMem(0xeb91));
        // CB 22 02A1
        gbc.setState(0x15d3, 0x8bc7, 0x2c30, 0xfe60, 0xfe98, 0xbd15, 0x0, 0x1);
        gbc.writeMem(0x15d3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x8bc7, gbc.sp());
        EXPECT(0x15d5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02A2
        gbc.setState(0x7a4e, 0x6d1, 0xe770, 0x6363, 0x1549, 0x3d96, 0x1, 0x1);
        gbc.writeMem(0x7a4e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x6d1, gbc.sp());
        EXPECT(0x7a50, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02A3
        gbc.setState(0x5e2a, 0xeac2, 0xbd20, 0x98fd, 0xbcdc, 0x4f1b, 0x1, 0x1);
        gbc.writeMem(0x5e2a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xeac2, gbc.sp());
        EXPECT(0x5e2c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02A4
        gbc.setState(0xd719, 0xb0d, 0x8330, 0x606d, 0x9e73, 0x5e37, 0x1, 0x0);
        gbc.writeMem(0xd719, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0xb0d, gbc.sp());
        EXPECT(0xd71b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd719));
        EXPECT(0x22, gbc.readMem(0xd71a));
        // CB 22 02A5
        gbc.setState(0x1a52, 0x8834, 0x86d0, 0x70f4, 0x9d93, 0xaa9a, 0x0, 0x0);
        gbc.writeMem(0x1a52, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x8834, gbc.sp());
        EXPECT(0x1a54, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02A6
        gbc.setState(0x76f6, 0x27e, 0x1000, 0xee21, 0x488d, 0xcead, 0x1, 0x1);
        gbc.writeMem(0x76f6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x27e, gbc.sp());
        EXPECT(0x76f8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02A7
        gbc.setState(0xbde2, 0xbddf, 0xc570, 0xca50, 0x27d3, 0xee78, 0x1, 0x1);
        gbc.writeMem(0xbde2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0xbddf, gbc.sp());
        EXPECT(0xbde4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbde2));
        EXPECT(0x22, gbc.readMem(0xbde3));
        // CB 22 02A8
        gbc.setState(0x4a70, 0xb8e1, 0x4b60, 0x4355, 0x2f77, 0x4c62, 0x0, 0x1);
        gbc.writeMem(0x4a70, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xb8e1, gbc.sp());
        EXPECT(0x4a72, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02A9
        gbc.setState(0x88a5, 0x3361, 0x9510, 0x7de5, 0xa928, 0x80f9, 0x1, 0x0);
        gbc.writeMem(0x88a5, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x3361, gbc.sp());
        EXPECT(0x88a7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x88a5));
        EXPECT(0x22, gbc.readMem(0x88a6));
        // CB 22 02AA
        gbc.setState(0x8061, 0x4252, 0xb5b0, 0x82d2, 0xfeeb, 0x450f, 0x1, 0x0);
        gbc.writeMem(0x8061, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x4252, gbc.sp());
        EXPECT(0x8063, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8061));
        EXPECT(0x22, gbc.readMem(0x8062));
        // CB 22 02AC
        gbc.setState(0x1e40, 0x7444, 0x6530, 0x894, 0xc000, 0x8dda, 0x0, 0x1);
        gbc.writeMem(0x1e40, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x7444, gbc.sp());
        EXPECT(0x1e42, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02AD
        gbc.setState(0x3637, 0x8dbd, 0xf020, 0x6ab5, 0xdde7, 0x3aed, 0x0, 0x0);
        gbc.writeMem(0x3637, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x8dbd, gbc.sp());
        EXPECT(0x3639, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02AE
        gbc.setState(0x83f8, 0x8e01, 0xfb00, 0x2101, 0x97ee, 0xb53f, 0x1, 0x0);
        gbc.writeMem(0x83f8, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x8e01, gbc.sp());
        EXPECT(0x83fa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x83f8));
        EXPECT(0x22, gbc.readMem(0x83f9));
        // CB 22 02AF
        gbc.setState(0xb46f, 0x5301, 0x9a50, 0xd13e, 0x8581, 0x5fd4, 0x1, 0x0);
        gbc.writeMem(0xb46f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x5301, gbc.sp());
        EXPECT(0xb471, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb46f));
        EXPECT(0x22, gbc.readMem(0xb470));
        // CB 22 02B0
        gbc.setState(0xe652, 0xefaf, 0xf9e0, 0xf1b8, 0xa482, 0x35f8, 0x0, 0x0);
        gbc.writeMem(0xe652, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xefaf, gbc.sp());
        EXPECT(0xe654, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe652));
        EXPECT(0x22, gbc.readMem(0xe653));
        // CB 22 02B1
        gbc.setState(0x65e0, 0xf7fe, 0xb1f0, 0x4b75, 0xa73c, 0xe9c8, 0x0, 0x0);
        gbc.writeMem(0x65e0, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0xf7fe, gbc.sp());
        EXPECT(0x65e2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02B2
        gbc.setState(0x85d, 0xf407, 0xf0a0, 0xc775, 0x2fd2, 0x78d, 0x0, 0x0);
        gbc.writeMem(0x85d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xf407, gbc.sp());
        EXPECT(0x85f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02B3
        gbc.setState(0xd4d7, 0x52bd, 0x1b60, 0x3009, 0x8982, 0xcc7, 0x0, 0x1);
        gbc.writeMem(0xd4d7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x52bd, gbc.sp());
        EXPECT(0xd4d9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd4d7));
        EXPECT(0x22, gbc.readMem(0xd4d8));
        // CB 22 02B4
        gbc.setState(0x57a, 0xbf41, 0xe680, 0x388b, 0xbc68, 0x7bbe, 0x1, 0x1);
        gbc.writeMem(0x57a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xbf41, gbc.sp());
        EXPECT(0x57c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02B5
        gbc.setState(0x5acf, 0xda33, 0x3540, 0xd650, 0xc939, 0xba4a, 0x0, 0x1);
        gbc.writeMem(0x5acf, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xda33, gbc.sp());
        EXPECT(0x5ad1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02B6
        gbc.setState(0xead, 0x357b, 0x98d0, 0x97f1, 0xf6bd, 0xe073, 0x1, 0x1);
        gbc.writeMem(0xead, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x357b, gbc.sp());
        EXPECT(0xeaf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02B8
        gbc.setState(0xded3, 0xac70, 0x35a0, 0x275e, 0x5532, 0xae75, 0x1, 0x1);
        gbc.writeMem(0xded3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xac70, gbc.sp());
        EXPECT(0xded5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xded3));
        EXPECT(0x22, gbc.readMem(0xded4));
        // CB 22 02B9
        gbc.setState(0x38b9, 0xec42, 0x9d90, 0x785f, 0xc7e9, 0x617b, 0x0, 0x0);
        gbc.writeMem(0x38b9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xec42, gbc.sp());
        EXPECT(0x38bb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02BA
        gbc.setState(0x4618, 0xd04a, 0xa920, 0xfe31, 0xb6e3, 0x7e8d, 0x0, 0x1);
        gbc.writeMem(0x4618, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xd04a, gbc.sp());
        EXPECT(0x461a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02BB
        gbc.setState(0xa555, 0xe93, 0xc230, 0xcb96, 0xc27f, 0xadc0, 0x0, 0x0);
        gbc.writeMem(0xa555, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xe93, gbc.sp());
        EXPECT(0xa557, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa555));
        EXPECT(0x22, gbc.readMem(0xa556));
        // CB 22 02BC
        gbc.setState(0x3491, 0x4670, 0x5de0, 0x31c8, 0x7884, 0x1a43, 0x1, 0x0);
        gbc.writeMem(0x3491, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x4670, gbc.sp());
        EXPECT(0x3493, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02BD
        gbc.setState(0xd7d5, 0x1367, 0x4730, 0xdf86, 0xe0c2, 0x2114, 0x1, 0x0);
        gbc.writeMem(0xd7d5, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x1367, gbc.sp());
        EXPECT(0xd7d7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd7d5));
        EXPECT(0x22, gbc.readMem(0xd7d6));
        // CB 22 02BE
        gbc.setState(0x1ad, 0x5440, 0xb300, 0xcb63, 0xf4c9, 0x1248, 0x1, 0x1);
        gbc.writeMem(0x1ad, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x5440, gbc.sp());
        EXPECT(0x1af, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02C0
        gbc.setState(0xc69e, 0x990c, 0xc3c0, 0x1c2d, 0x944c, 0xfa73, 0x0, 0x0);
        gbc.writeMem(0xc69e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x990c, gbc.sp());
        EXPECT(0xc6a0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc69e));
        EXPECT(0x22, gbc.readMem(0xc69f));
        // CB 22 02C1
        gbc.setState(0xbc3f, 0xa911, 0x1ac0, 0x8056, 0x8bfc, 0x8cdd, 0x0, 0x0);
        gbc.writeMem(0xbc3f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xa911, gbc.sp());
        EXPECT(0xbc41, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc3f));
        EXPECT(0x22, gbc.readMem(0xbc40));
        // CB 22 02C2
        gbc.setState(0x64f4, 0x100c, 0x6b20, 0x38b, 0x9e5f, 0x872e, 0x0, 0x0);
        gbc.writeMem(0x64f4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x100c, gbc.sp());
        EXPECT(0x64f6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02C3
        gbc.setState(0xbac, 0xd3d, 0xd480, 0xb047, 0xb13b, 0xb5a9, 0x1, 0x0);
        gbc.writeMem(0xbac, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xd3d, gbc.sp());
        EXPECT(0xbae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02C4
        gbc.setState(0x8bb9, 0x8038, 0x1f10, 0x130e, 0xc11e, 0xaa26, 0x1, 0x0);
        gbc.writeMem(0x8bb9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x8038, gbc.sp());
        EXPECT(0x8bbb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8bb9));
        EXPECT(0x22, gbc.readMem(0x8bba));
        // CB 22 02C5
        gbc.setState(0x8dc3, 0x1829, 0x56c0, 0x22cc, 0x9283, 0xac5c, 0x0, 0x1);
        gbc.writeMem(0x8dc3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x1829, gbc.sp());
        EXPECT(0x8dc5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8dc3));
        EXPECT(0x22, gbc.readMem(0x8dc4));
        // CB 22 02C6
        gbc.setState(0x1459, 0x82fe, 0x3390, 0x1a1a, 0x30b3, 0x6a72, 0x0, 0x1);
        gbc.writeMem(0x1459, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x82fe, gbc.sp());
        EXPECT(0x145b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02C7
        gbc.setState(0x1ec9, 0xb49b, 0xd4a0, 0x6413, 0x7fdd, 0xfae6, 0x0, 0x0);
        gbc.writeMem(0x1ec9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xb49b, gbc.sp());
        EXPECT(0x1ecb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02C8
        gbc.setState(0x8f52, 0x6220, 0xf7d0, 0xd96c, 0xd891, 0x528c, 0x0, 0x1);
        gbc.writeMem(0x8f52, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x6220, gbc.sp());
        EXPECT(0x8f54, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f52));
        EXPECT(0x22, gbc.readMem(0x8f53));
        // CB 22 02C9
        gbc.setState(0xeb14, 0xb84a, 0xb2e0, 0xbd9f, 0x9127, 0xd3d7, 0x1, 0x1);
        gbc.writeMem(0xeb14, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xb84a, gbc.sp());
        EXPECT(0xeb16, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb14));
        EXPECT(0x22, gbc.readMem(0xeb15));
        // CB 22 02CA
        gbc.setState(0x210d, 0x3620, 0x2650, 0x80f3, 0xdf53, 0xcd30, 0x1, 0x0);
        gbc.writeMem(0x210d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x3620, gbc.sp());
        EXPECT(0x210f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02CB
        gbc.setState(0x658f, 0xa6a4, 0xbb20, 0x2bb2, 0xcad9, 0xf0fc, 0x0, 0x1);
        gbc.writeMem(0x658f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xa6a4, gbc.sp());
        EXPECT(0x6591, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02CC
        gbc.setState(0x4383, 0xa8dd, 0xe160, 0xf9e0, 0xee2a, 0x69a4, 0x1, 0x1);
        gbc.writeMem(0x4383, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xa8dd, gbc.sp());
        EXPECT(0x4385, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02CD
        gbc.setState(0x3bb5, 0x44c8, 0x99c0, 0x9fc3, 0x9f5b, 0xed9, 0x1, 0x1);
        gbc.writeMem(0x3bb5, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x44c8, gbc.sp());
        EXPECT(0x3bb7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02CE
        gbc.setState(0xa922, 0xfc62, 0xafb0, 0xeed2, 0x3f6e, 0x1a45, 0x1, 0x1);
        gbc.writeMem(0xa922, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xfc62, gbc.sp());
        EXPECT(0xa924, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa922));
        EXPECT(0x22, gbc.readMem(0xa923));
        // CB 22 02CF
        gbc.setState(0x3608, 0x4973, 0xd380, 0xafd5, 0x4394, 0xab3f, 0x1, 0x1);
        gbc.writeMem(0x3608, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x4973, gbc.sp());
        EXPECT(0x360a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02D0
        gbc.setState(0xbe23, 0x7d12, 0x2320, 0x4ba6, 0xbdde, 0x266c, 0x0, 0x1);
        gbc.writeMem(0xbe23, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x7d12, gbc.sp());
        EXPECT(0xbe25, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe23));
        EXPECT(0x22, gbc.readMem(0xbe24));
        // CB 22 02D1
        gbc.setState(0xc95c, 0xc397, 0xba20, 0xd3ca, 0xa86d, 0x75e3, 0x0, 0x0);
        gbc.writeMem(0xc95c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xc397, gbc.sp());
        EXPECT(0xc95e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc95c));
        EXPECT(0x22, gbc.readMem(0xc95d));
        // CB 22 02D2
        gbc.setState(0x929, 0xc149, 0x3550, 0xb33e, 0xe0e, 0x63c6, 0x0, 0x0);
        gbc.writeMem(0x929, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xc149, gbc.sp());
        EXPECT(0x92b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02D4
        gbc.setState(0xa7b1, 0xc9f0, 0xcd40, 0xe33a, 0xe3aa, 0xb1e7, 0x1, 0x0);
        gbc.writeMem(0xa7b1, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xc9f0, gbc.sp());
        EXPECT(0xa7b3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa7b1));
        EXPECT(0x22, gbc.readMem(0xa7b2));
        // CB 22 02D5
        gbc.setState(0xe8de, 0x3f09, 0xa1e0, 0x5fc3, 0xde72, 0x5bb1, 0x0, 0x1);
        gbc.writeMem(0xe8de, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x3f09, gbc.sp());
        EXPECT(0xe8e0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe8de));
        EXPECT(0x22, gbc.readMem(0xe8df));
        // CB 22 02D6
        gbc.setState(0xde1e, 0x938a, 0xf700, 0x82dc, 0x13c5, 0xe2ce, 0x0, 0x1);
        gbc.writeMem(0xde1e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x938a, gbc.sp());
        EXPECT(0xde20, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde1e));
        EXPECT(0x22, gbc.readMem(0xde1f));
        // CB 22 02D7
        gbc.setState(0xc4dd, 0x9237, 0xace0, 0x5dc5, 0x5b11, 0x257d, 0x0, 0x1);
        gbc.writeMem(0xc4dd, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x9237, gbc.sp());
        EXPECT(0xc4df, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc4dd));
        EXPECT(0x22, gbc.readMem(0xc4de));
        // CB 22 02D8
        gbc.setState(0x173c, 0xce59, 0x190, 0xeb5b, 0x704a, 0x8ff4, 0x1, 0x1);
        gbc.writeMem(0x173c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xce59, gbc.sp());
        EXPECT(0x173e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02D9
        gbc.setState(0x4e3b, 0xec02, 0x3160, 0x1026, 0x3be7, 0x5cdf, 0x0, 0x0);
        gbc.writeMem(0x4e3b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xec02, gbc.sp());
        EXPECT(0x4e3d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02DA
        gbc.setState(0xdfdc, 0xf781, 0xc600, 0x9d5c, 0x85a, 0x9694, 0x0, 0x1);
        gbc.writeMem(0xdfdc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xf781, gbc.sp());
        EXPECT(0xdfde, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdfdc));
        EXPECT(0x22, gbc.readMem(0xdfdd));
        // CB 22 02DB
        gbc.setState(0xb266, 0xbe8, 0x24a0, 0x7ec5, 0xfe53, 0x8b44, 0x1, 0x0);
        gbc.writeMem(0xb266, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xbe8, gbc.sp());
        EXPECT(0xb268, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb266));
        EXPECT(0x22, gbc.readMem(0xb267));
        // CB 22 02DC
        gbc.setState(0xab23, 0xd15f, 0x6920, 0xf385, 0x2e98, 0x1882, 0x0, 0x1);
        gbc.writeMem(0xab23, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xd15f, gbc.sp());
        EXPECT(0xab25, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab23));
        EXPECT(0x22, gbc.readMem(0xab24));
        // CB 22 02DD
        gbc.setState(0xa7ff, 0x6e6c, 0x4670, 0x93d7, 0xbf53, 0x45c, 0x1, 0x0);
        gbc.writeMem(0xa7ff, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x6e6c, gbc.sp());
        EXPECT(0xa801, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa7ff));
        EXPECT(0x22, gbc.readMem(0xa800));
        // CB 22 02DE
        gbc.setState(0x671b, 0x98c8, 0xd200, 0xb0ec, 0x1f02, 0x6ca6, 0x0, 0x0);
        gbc.writeMem(0x671b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x98c8, gbc.sp());
        EXPECT(0x671d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02DF
        gbc.setState(0xc8c2, 0xb7ce, 0xeb10, 0x32ad, 0xfde4, 0xd4a4, 0x0, 0x1);
        gbc.writeMem(0xc8c2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xb7ce, gbc.sp());
        EXPECT(0xc8c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8c2));
        EXPECT(0x22, gbc.readMem(0xc8c3));
        // CB 22 02E0
        gbc.setState(0x3dc3, 0x9b73, 0xc0c0, 0xf09f, 0x3ef2, 0xea3b, 0x1, 0x0);
        gbc.writeMem(0x3dc3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x9b73, gbc.sp());
        EXPECT(0x3dc5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02E1
        gbc.setState(0x2424, 0xe645, 0x2590, 0xb0bb, 0x58c8, 0x7344, 0x0, 0x1);
        gbc.writeMem(0x2424, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xe645, gbc.sp());
        EXPECT(0x2426, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02E2
        gbc.setState(0xa81e, 0xac91, 0x1c80, 0x50f2, 0x3370, 0x6a5c, 0x1, 0x1);
        gbc.writeMem(0xa81e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0xac91, gbc.sp());
        EXPECT(0xa820, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa81e));
        EXPECT(0x22, gbc.readMem(0xa81f));
        // CB 22 02E3
        gbc.setState(0xd744, 0x2f48, 0xe340, 0xc584, 0xe73b, 0x4d90, 0x0, 0x0);
        gbc.writeMem(0xd744, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x2f48, gbc.sp());
        EXPECT(0xd746, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd744));
        EXPECT(0x22, gbc.readMem(0xd745));
        // CB 22 02E4
        gbc.setState(0x126e, 0x7cd0, 0x92f0, 0x9575, 0x9e72, 0xb5b5, 0x1, 0x0);
        gbc.writeMem(0x126e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x7cd0, gbc.sp());
        EXPECT(0x1270, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02E5
        gbc.setState(0x9743, 0x97dd, 0x9b60, 0xa4dc, 0xeaff, 0x8f0f, 0x0, 0x0);
        gbc.writeMem(0x9743, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x97dd, gbc.sp());
        EXPECT(0x9745, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9743));
        EXPECT(0x22, gbc.readMem(0x9744));
        // CB 22 02E6
        gbc.setState(0x1dfc, 0xee9c, 0x9db0, 0x1d8e, 0xca52, 0xccc9, 0x0, 0x1);
        gbc.writeMem(0x1dfc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xee9c, gbc.sp());
        EXPECT(0x1dfe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02E7
        gbc.setState(0x7e2c, 0xb360, 0x23c0, 0x382, 0xb3d, 0xebd, 0x0, 0x1);
        gbc.writeMem(0x7e2c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xb360, gbc.sp());
        EXPECT(0x7e2e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02E8
        gbc.setState(0xec4e, 0x2d97, 0x6560, 0x53ab, 0xb741, 0x6ea4, 0x1, 0x1);
        gbc.writeMem(0xec4e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x2d97, gbc.sp());
        EXPECT(0xec50, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec4e));
        EXPECT(0x22, gbc.readMem(0xec4f));
        // CB 22 02E9
        gbc.setState(0xddbe, 0xa3b4, 0x87c0, 0x5daa, 0x4fe1, 0xe5df, 0x0, 0x0);
        gbc.writeMem(0xddbe, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xa3b4, gbc.sp());
        EXPECT(0xddc0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xddbe));
        EXPECT(0x22, gbc.readMem(0xddbf));
        // CB 22 02EA
        gbc.setState(0x6e5f, 0x2a08, 0x99b0, 0x5777, 0x6c0b, 0x4572, 0x1, 0x1);
        gbc.writeMem(0x6e5f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x2a08, gbc.sp());
        EXPECT(0x6e61, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02EB
        gbc.setState(0x973e, 0xdb56, 0xcba0, 0x2563, 0x18d6, 0x4ea1, 0x0, 0x1);
        gbc.writeMem(0x973e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xdb56, gbc.sp());
        EXPECT(0x9740, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x973e));
        EXPECT(0x22, gbc.readMem(0x973f));
        // CB 22 02EC
        gbc.setState(0x5db5, 0xae6, 0x1290, 0xd0cf, 0x7c70, 0x8a7f, 0x1, 0x0);
        gbc.writeMem(0x5db5, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xae6, gbc.sp());
        EXPECT(0x5db7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02ED
        gbc.setState(0x88d0, 0x6e25, 0x5600, 0x1515, 0x88c3, 0xe40, 0x1, 0x1);
        gbc.writeMem(0x88d0, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x6e25, gbc.sp());
        EXPECT(0x88d2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x88d0));
        EXPECT(0x22, gbc.readMem(0x88d1));
        // CB 22 02EE
        gbc.setState(0x4536, 0x1238, 0x2f20, 0xd7d8, 0x711d, 0xfa93, 0x1, 0x1);
        gbc.writeMem(0x4536, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x1238, gbc.sp());
        EXPECT(0x4538, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02EF
        gbc.setState(0x4f10, 0x3204, 0x3b10, 0x9e4e, 0xb628, 0xa49b, 0x1, 0x0);
        gbc.writeMem(0x4f10, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x3204, gbc.sp());
        EXPECT(0x4f12, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02F0
        gbc.setState(0xacc, 0xf725, 0xe80, 0x6a89, 0x1e2c, 0x66d6, 0x1, 0x1);
        gbc.writeMem(0xacc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xf725, gbc.sp());
        EXPECT(0xace, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02F1
        gbc.setState(0xdc8f, 0xcccd, 0x1920, 0x3eef, 0x2834, 0x7daf, 0x1, 0x0);
        gbc.writeMem(0xdc8f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xcccd, gbc.sp());
        EXPECT(0xdc91, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc8f));
        EXPECT(0x22, gbc.readMem(0xdc90));
        // CB 22 02F2
        gbc.setState(0x812c, 0x72b1, 0x9000, 0x7989, 0xb8ca, 0xb89f, 0x1, 0x1);
        gbc.writeMem(0x812c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x72b1, gbc.sp());
        EXPECT(0x812e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x812c));
        EXPECT(0x22, gbc.readMem(0x812d));
        // CB 22 02F4
        gbc.setState(0x9930, 0x8b41, 0xbd80, 0xb3a7, 0x9103, 0xc623, 0x1, 0x0);
        gbc.writeMem(0x9930, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x8b41, gbc.sp());
        EXPECT(0x9932, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9930));
        EXPECT(0x22, gbc.readMem(0x9931));
        // CB 22 02F5
        gbc.setState(0xc0e2, 0x3c9c, 0xd6a0, 0x291b, 0xad7d, 0xbc51, 0x0, 0x0);
        gbc.writeMem(0xc0e2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x3c9c, gbc.sp());
        EXPECT(0xc0e4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc0e2));
        EXPECT(0x22, gbc.readMem(0xc0e3));
        // CB 22 02F6
        gbc.setState(0x31dd, 0x8329, 0xead0, 0x9023, 0x258d, 0xb1b1, 0x1, 0x0);
        gbc.writeMem(0x31dd, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x8329, gbc.sp());
        EXPECT(0x31df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02F7
        gbc.setState(0x2e3f, 0x1fcf, 0x70d0, 0x994d, 0x4803, 0x8f92, 0x0, 0x1);
        gbc.writeMem(0x2e3f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x1fcf, gbc.sp());
        EXPECT(0x2e41, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02F8
        gbc.setState(0xad5d, 0x1110, 0xa770, 0x5ea0, 0x8f73, 0xa0ab, 0x0, 0x1);
        gbc.writeMem(0xad5d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x1110, gbc.sp());
        EXPECT(0xad5f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad5d));
        EXPECT(0x22, gbc.readMem(0xad5e));
        // CB 22 02F9
        gbc.setState(0xc21, 0x29b8, 0xf4d0, 0x58fb, 0xbd9e, 0xfb11, 0x1, 0x1);
        gbc.writeMem(0xc21, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x29b8, gbc.sp());
        EXPECT(0xc23, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02FA
        gbc.setState(0x918d, 0x2bf6, 0xa840, 0xe06, 0x13d9, 0x324b, 0x1, 0x1);
        gbc.writeMem(0x918d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x2bf6, gbc.sp());
        EXPECT(0x918f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x918d));
        EXPECT(0x22, gbc.readMem(0x918e));
        // CB 22 02FB
        gbc.setState(0xd9e3, 0x12f9, 0x7f70, 0x727d, 0xb0b9, 0x2454, 0x0, 0x0);
        gbc.writeMem(0xd9e3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x12f9, gbc.sp());
        EXPECT(0xd9e5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd9e3));
        EXPECT(0x22, gbc.readMem(0xd9e4));
        // CB 22 02FC
        gbc.setState(0x1cc4, 0xa517, 0xcfb0, 0x6c39, 0x8508, 0x61ba, 0x0, 0x1);
        gbc.writeMem(0x1cc4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0xa517, gbc.sp());
        EXPECT(0x1cc6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 02FD
        gbc.setState(0x6b4c, 0xd50c, 0x1a20, 0xd87, 0x1735, 0x9ad1, 0x0, 0x1);
        gbc.writeMem(0x6b4c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xd50c, gbc.sp());
        EXPECT(0x6b4e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 02FE
        gbc.setState(0xd3b4, 0xa255, 0x3540, 0x8a50, 0x33d8, 0x523b, 0x1, 0x0);
        gbc.writeMem(0xd3b4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0xa255, gbc.sp());
        EXPECT(0xd3b6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3b4));
        EXPECT(0x22, gbc.readMem(0xd3b5));
        // CB 22 02FF
        gbc.setState(0x3404, 0xaf26, 0x6220, 0x93ff, 0x6f65, 0x39f1, 0x0, 0x1);
        gbc.writeMem(0x3404, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0xaf26, gbc.sp());
        EXPECT(0x3406, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0300
        gbc.setState(0x2f48, 0x6ae7, 0x6540, 0x7ff3, 0x1e44, 0xbb49, 0x1, 0x0);
        gbc.writeMem(0x2f48, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x6ae7, gbc.sp());
        EXPECT(0x2f4a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0301
        gbc.setState(0xb947, 0xa4b9, 0x64f0, 0xb8a, 0xabf0, 0xff36, 0x0, 0x1);
        gbc.writeMem(0xb947, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xa4b9, gbc.sp());
        EXPECT(0xb949, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb947));
        EXPECT(0x22, gbc.readMem(0xb948));
        // CB 22 0302
        gbc.setState(0x20c8, 0xca36, 0x6be0, 0x2c67, 0xb065, 0xc7dd, 0x1, 0x1);
        gbc.writeMem(0x20c8, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xca36, gbc.sp());
        EXPECT(0x20ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0303
        gbc.setState(0x8f54, 0x5e68, 0x2560, 0xfc51, 0xe472, 0xa48f, 0x1, 0x0);
        gbc.writeMem(0x8f54, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x5e68, gbc.sp());
        EXPECT(0x8f56, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f54));
        EXPECT(0x22, gbc.readMem(0x8f55));
        // CB 22 0304
        gbc.setState(0xb7a6, 0xad68, 0x220, 0x8a4b, 0x56f3, 0xab3e, 0x0, 0x0);
        gbc.writeMem(0xb7a6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0xad68, gbc.sp());
        EXPECT(0xb7a8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb7a6));
        EXPECT(0x22, gbc.readMem(0xb7a7));
        // CB 22 0305
        gbc.setState(0x6a26, 0x9353, 0xa6e0, 0x6019, 0x3eb6, 0xf3db, 0x1, 0x1);
        gbc.writeMem(0x6a26, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x9353, gbc.sp());
        EXPECT(0x6a28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0306
        gbc.setState(0xab9, 0xa322, 0xfae0, 0xd7b7, 0x27a6, 0xdace, 0x1, 0x0);
        gbc.writeMem(0xab9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xa322, gbc.sp());
        EXPECT(0xabb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0307
        gbc.setState(0x33d4, 0x7b5c, 0xaa60, 0xa6bd, 0xfb5d, 0x21b4, 0x1, 0x0);
        gbc.writeMem(0x33d4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x7b5c, gbc.sp());
        EXPECT(0x33d6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0308
        gbc.setState(0x8062, 0x77ef, 0x4ae0, 0x378b, 0x2fd7, 0x9c27, 0x0, 0x0);
        gbc.writeMem(0x8062, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x77ef, gbc.sp());
        EXPECT(0x8064, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8062));
        EXPECT(0x22, gbc.readMem(0x8063));
        // CB 22 0309
        gbc.setState(0x8f45, 0xf7, 0x34b0, 0x578c, 0x76b8, 0xeb0c, 0x0, 0x1);
        gbc.writeMem(0x8f45, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xf7, gbc.sp());
        EXPECT(0x8f47, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f45));
        EXPECT(0x22, gbc.readMem(0x8f46));
        // CB 22 030A
        gbc.setState(0x11ae, 0x386b, 0xdea0, 0xed22, 0x3d43, 0x1913, 0x0, 0x0);
        gbc.writeMem(0x11ae, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x386b, gbc.sp());
        EXPECT(0x11b0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 030B
        gbc.setState(0x34b3, 0x2bd7, 0xbf20, 0x3a57, 0xedb6, 0x14c4, 0x0, 0x0);
        gbc.writeMem(0x34b3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x2bd7, gbc.sp());
        EXPECT(0x34b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 030C
        gbc.setState(0x51f8, 0xa539, 0x7590, 0xbcff, 0xd1b5, 0x6ae9, 0x1, 0x1);
        gbc.writeMem(0x51f8, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xa539, gbc.sp());
        EXPECT(0x51fa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 030D
        gbc.setState(0x818e, 0x24fc, 0xf3b0, 0xda47, 0xb25d, 0x3272, 0x1, 0x1);
        gbc.writeMem(0x818e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x24fc, gbc.sp());
        EXPECT(0x8190, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x818e));
        EXPECT(0x22, gbc.readMem(0x818f));
        // CB 22 030E
        gbc.setState(0xcf94, 0x8772, 0x7040, 0xf184, 0xde69, 0x77d5, 0x1, 0x1);
        gbc.writeMem(0xcf94, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x8772, gbc.sp());
        EXPECT(0xcf96, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf94));
        EXPECT(0x22, gbc.readMem(0xcf95));
        // CB 22 030F
        gbc.setState(0x3fd3, 0xede1, 0xf2b0, 0x5c28, 0xd8e0, 0x3dd9, 0x1, 0x0);
        gbc.writeMem(0x3fd3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xede1, gbc.sp());
        EXPECT(0x3fd5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0310
        gbc.setState(0x214a, 0x6ce3, 0x9c10, 0xb694, 0x33ff, 0xe779, 0x0, 0x1);
        gbc.writeMem(0x214a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x6ce3, gbc.sp());
        EXPECT(0x214c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0311
        gbc.setState(0x9774, 0x7c68, 0xde00, 0xf8e4, 0x1737, 0xe5e5, 0x1, 0x1);
        gbc.writeMem(0x9774, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x7c68, gbc.sp());
        EXPECT(0x9776, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9774));
        EXPECT(0x22, gbc.readMem(0x9775));
        // CB 22 0312
        gbc.setState(0x108d, 0xd1ed, 0xbca0, 0x2b76, 0x38f8, 0xb0cd, 0x0, 0x0);
        gbc.writeMem(0x108d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0xd1ed, gbc.sp());
        EXPECT(0x108f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0313
        gbc.setState(0x5d06, 0x8b5, 0xe1f0, 0x19eb, 0xa3b, 0x1a41, 0x1, 0x1);
        gbc.writeMem(0x5d06, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x8b5, gbc.sp());
        EXPECT(0x5d08, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0314
        gbc.setState(0x87a7, 0x857c, 0x8b80, 0x5af6, 0x58d8, 0x3db2, 0x1, 0x0);
        gbc.writeMem(0x87a7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x857c, gbc.sp());
        EXPECT(0x87a9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x87a7));
        EXPECT(0x22, gbc.readMem(0x87a8));
        // CB 22 0315
        gbc.setState(0x3056, 0x695, 0x6830, 0x9a12, 0xf804, 0xdd9e, 0x1, 0x0);
        gbc.writeMem(0x3056, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x695, gbc.sp());
        EXPECT(0x3058, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0316
        gbc.setState(0x3f18, 0xfcb8, 0x38a0, 0xb583, 0xf65d, 0x9053, 0x1, 0x0);
        gbc.writeMem(0x3f18, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xfcb8, gbc.sp());
        EXPECT(0x3f1a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0317
        gbc.setState(0x4ff2, 0xada1, 0xf920, 0xeda3, 0x91b5, 0x9e1d, 0x1, 0x1);
        gbc.writeMem(0x4ff2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xada1, gbc.sp());
        EXPECT(0x4ff4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0318
        gbc.setState(0xb443, 0xa8a6, 0xacd0, 0x6954, 0xdb80, 0xa15a, 0x0, 0x1);
        gbc.writeMem(0xb443, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0xa8a6, gbc.sp());
        EXPECT(0xb445, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb443));
        EXPECT(0x22, gbc.readMem(0xb444));
        // CB 22 0319
        gbc.setState(0x3f0f, 0xbbd2, 0xf620, 0x57ad, 0x1697, 0x75f6, 0x0, 0x1);
        gbc.writeMem(0x3f0f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xbbd2, gbc.sp());
        EXPECT(0x3f11, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 031A
        gbc.setState(0xbf19, 0x9f39, 0xed40, 0x7614, 0x90b5, 0x722e, 0x1, 0x1);
        gbc.writeMem(0xbf19, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x9f39, gbc.sp());
        EXPECT(0xbf1b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf19));
        EXPECT(0x22, gbc.readMem(0xbf1a));
        // CB 22 031B
        gbc.setState(0xb6bd, 0x92c4, 0xcf00, 0x232c, 0x257e, 0x6e39, 0x1, 0x1);
        gbc.writeMem(0xb6bd, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x92c4, gbc.sp());
        EXPECT(0xb6bf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb6bd));
        EXPECT(0x22, gbc.readMem(0xb6be));
        // CB 22 031C
        gbc.setState(0x6dc8, 0xed89, 0xd5d0, 0xf082, 0x436, 0x2535, 0x1, 0x1);
        gbc.writeMem(0x6dc8, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xed89, gbc.sp());
        EXPECT(0x6dca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 031D
        gbc.setState(0x22b7, 0x9c30, 0x3b0, 0x47fb, 0x3703, 0xee81, 0x0, 0x0);
        gbc.writeMem(0x22b7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x9c30, gbc.sp());
        EXPECT(0x22b9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 031E
        gbc.setState(0xd1c6, 0x4a95, 0x8140, 0x4201, 0x81f1, 0xd2da, 0x1, 0x0);
        gbc.writeMem(0xd1c6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x4a95, gbc.sp());
        EXPECT(0xd1c8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd1c6));
        EXPECT(0x22, gbc.readMem(0xd1c7));
        // CB 22 031F
        gbc.setState(0x41ee, 0x1a23, 0xa350, 0xb878, 0xd82, 0x9685, 0x1, 0x1);
        gbc.writeMem(0x41ee, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x1a23, gbc.sp());
        EXPECT(0x41f0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0320
        gbc.setState(0xc856, 0x1cff, 0x8800, 0x415c, 0x49d8, 0x928f, 0x0, 0x1);
        gbc.writeMem(0xc856, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x1cff, gbc.sp());
        EXPECT(0xc858, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc856));
        EXPECT(0x22, gbc.readMem(0xc857));
        // CB 22 0321
        gbc.setState(0xc477, 0x8c9f, 0xba80, 0x239d, 0x17f7, 0xc54f, 0x1, 0x1);
        gbc.writeMem(0xc477, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x8c9f, gbc.sp());
        EXPECT(0xc479, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc477));
        EXPECT(0x22, gbc.readMem(0xc478));
        // CB 22 0322
        gbc.setState(0x7b7f, 0xfed1, 0x4690, 0x6444, 0x308f, 0x97d7, 0x0, 0x0);
        gbc.writeMem(0x7b7f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xfed1, gbc.sp());
        EXPECT(0x7b81, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0323
        gbc.setState(0xc467, 0x12fe, 0xe660, 0xaa66, 0x5f9e, 0x2515, 0x1, 0x0);
        gbc.writeMem(0xc467, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x12fe, gbc.sp());
        EXPECT(0xc469, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc467));
        EXPECT(0x22, gbc.readMem(0xc468));
        // CB 22 0324
        gbc.setState(0x6df4, 0x185c, 0xe990, 0x132d, 0xad7, 0x9e62, 0x1, 0x1);
        gbc.writeMem(0x6df4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x185c, gbc.sp());
        EXPECT(0x6df6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0325
        gbc.setState(0xd980, 0x3dae, 0xab70, 0x4202, 0xf18e, 0x923d, 0x0, 0x0);
        gbc.writeMem(0xd980, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x3dae, gbc.sp());
        EXPECT(0xd982, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd980));
        EXPECT(0x22, gbc.readMem(0xd981));
        // CB 22 0326
        gbc.setState(0xacc5, 0x893b, 0x760, 0x402b, 0x50cc, 0x3c03, 0x0, 0x0);
        gbc.writeMem(0xacc5, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x893b, gbc.sp());
        EXPECT(0xacc7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xacc5));
        EXPECT(0x22, gbc.readMem(0xacc6));
        // CB 22 0327
        gbc.setState(0x499a, 0x6716, 0x2a60, 0xa61f, 0xc30e, 0xd7b5, 0x0, 0x1);
        gbc.writeMem(0x499a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x6716, gbc.sp());
        EXPECT(0x499c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0329
        gbc.setState(0x5199, 0x5059, 0xa2d0, 0xeeed, 0x2e1, 0xc118, 0x1, 0x1);
        gbc.writeMem(0x5199, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x5059, gbc.sp());
        EXPECT(0x519b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 032A
        gbc.setState(0x5bf, 0x22fb, 0x180, 0x90e4, 0xaf4b, 0xda15, 0x1, 0x0);
        gbc.writeMem(0x5bf, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x22fb, gbc.sp());
        EXPECT(0x5c1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 032B
        gbc.setState(0x6819, 0x1a2e, 0x6e00, 0x5c9e, 0x606f, 0xb78e, 0x1, 0x1);
        gbc.writeMem(0x6819, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x1a2e, gbc.sp());
        EXPECT(0x681b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 032C
        gbc.setState(0xbc25, 0x2584, 0xf380, 0xac9, 0x4a56, 0xee6c, 0x0, 0x1);
        gbc.writeMem(0xbc25, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x2584, gbc.sp());
        EXPECT(0xbc27, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc25));
        EXPECT(0x22, gbc.readMem(0xbc26));
        // CB 22 032D
        gbc.setState(0x9ce9, 0xa4c3, 0xdb70, 0xe3f6, 0xabb5, 0x21b5, 0x0, 0x1);
        gbc.writeMem(0x9ce9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xa4c3, gbc.sp());
        EXPECT(0x9ceb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ce9));
        EXPECT(0x22, gbc.readMem(0x9cea));
        // CB 22 032E
        gbc.setState(0x2efc, 0x554, 0x8450, 0xc54b, 0xdb3, 0x75a6, 0x0, 0x1);
        gbc.writeMem(0x2efc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x554, gbc.sp());
        EXPECT(0x2efe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 032F
        gbc.setState(0xb384, 0xeabb, 0xa170, 0x928, 0xd9d0, 0x7f02, 0x0, 0x1);
        gbc.writeMem(0xb384, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0xeabb, gbc.sp());
        EXPECT(0xb386, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb384));
        EXPECT(0x22, gbc.readMem(0xb385));
        // CB 22 0331
        gbc.setState(0x30bf, 0xbb3a, 0x4a50, 0x3cea, 0xf52e, 0xe903, 0x0, 0x1);
        gbc.writeMem(0x30bf, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xbb3a, gbc.sp());
        EXPECT(0x30c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0332
        gbc.setState(0x4b17, 0x1828, 0xe940, 0x5c81, 0x5fb4, 0x50a8, 0x1, 0x1);
        gbc.writeMem(0x4b17, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x1828, gbc.sp());
        EXPECT(0x4b19, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0333
        gbc.setState(0xe1f1, 0xe9a5, 0xae10, 0xeb81, 0x3d1d, 0x9d44, 0x1, 0x1);
        gbc.writeMem(0xe1f1, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xe9a5, gbc.sp());
        EXPECT(0xe1f3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe1f1));
        EXPECT(0x22, gbc.readMem(0xe1f2));
        // CB 22 0334
        gbc.setState(0x3521, 0xa6bb, 0x4f60, 0x70e7, 0xe600, 0xdb71, 0x0, 0x0);
        gbc.writeMem(0x3521, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xa6bb, gbc.sp());
        EXPECT(0x3523, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0336
        gbc.setState(0x2685, 0x22e2, 0x4e0, 0x5138, 0x2afa, 0x7d27, 0x1, 0x0);
        gbc.writeMem(0x2685, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x22e2, gbc.sp());
        EXPECT(0x2687, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0337
        gbc.setState(0x80f, 0x4a79, 0x3010, 0xa421, 0xeb6a, 0xa5ae, 0x1, 0x1);
        gbc.writeMem(0x80f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x4a79, gbc.sp());
        EXPECT(0x811, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0338
        gbc.setState(0xe593, 0x4825, 0xd410, 0x7e44, 0x845, 0x5ac2, 0x1, 0x1);
        gbc.writeMem(0xe593, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x4825, gbc.sp());
        EXPECT(0xe595, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe593));
        EXPECT(0x22, gbc.readMem(0xe594));
        // CB 22 0339
        gbc.setState(0x7046, 0x138d, 0x6bd0, 0xd6ea, 0xa0a1, 0x8d23, 0x0, 0x1);
        gbc.writeMem(0x7046, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x138d, gbc.sp());
        EXPECT(0x7048, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 033A
        gbc.setState(0xa492, 0x35b2, 0x3770, 0x256f, 0xb3be, 0x2c39, 0x0, 0x0);
        gbc.writeMem(0xa492, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x35b2, gbc.sp());
        EXPECT(0xa494, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa492));
        EXPECT(0x22, gbc.readMem(0xa493));
        // CB 22 033B
        gbc.setState(0xce06, 0xd829, 0x6f20, 0xd9, 0xb12a, 0xb04, 0x1, 0x1);
        gbc.writeMem(0xce06, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xd829, gbc.sp());
        EXPECT(0xce08, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce06));
        EXPECT(0x22, gbc.readMem(0xce07));
        // CB 22 033C
        gbc.setState(0x516b, 0xeff9, 0xecf0, 0x1601, 0x939f, 0xae71, 0x0, 0x0);
        gbc.writeMem(0x516b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xeff9, gbc.sp());
        EXPECT(0x516d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 033D
        gbc.setState(0xa42e, 0xf178, 0x9540, 0x6f30, 0xbdc2, 0xc1f0, 0x0, 0x0);
        gbc.writeMem(0xa42e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xf178, gbc.sp());
        EXPECT(0xa430, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa42e));
        EXPECT(0x22, gbc.readMem(0xa42f));
        // CB 22 033E
        gbc.setState(0x1a3a, 0x8441, 0x9460, 0x2734, 0x7762, 0x9a8, 0x0, 0x0);
        gbc.writeMem(0x1a3a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x8441, gbc.sp());
        EXPECT(0x1a3c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 033F
        gbc.setState(0x27c2, 0x5138, 0x24b0, 0x256b, 0x22ad, 0x945b, 0x0, 0x1);
        gbc.writeMem(0x27c2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x5138, gbc.sp());
        EXPECT(0x27c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0340
        gbc.setState(0xbc54, 0xe1ec, 0x3460, 0xc80b, 0x7ea4, 0x19eb, 0x1, 0x0);
        gbc.writeMem(0xbc54, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xe1ec, gbc.sp());
        EXPECT(0xbc56, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc54));
        EXPECT(0x22, gbc.readMem(0xbc55));
        // CB 22 0341
        gbc.setState(0x58c1, 0x8050, 0x3e50, 0x8c79, 0xde12, 0x67e8, 0x0, 0x0);
        gbc.writeMem(0x58c1, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x8050, gbc.sp());
        EXPECT(0x58c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0342
        gbc.setState(0x76f7, 0x2d3d, 0xf8c0, 0xcc45, 0x8201, 0xa141, 0x1, 0x1);
        gbc.writeMem(0x76f7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x2d3d, gbc.sp());
        EXPECT(0x76f9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0343
        gbc.setState(0x7f7a, 0xde7f, 0xd9e0, 0xa3cc, 0x99d5, 0x6f58, 0x0, 0x1);
        gbc.writeMem(0x7f7a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0xde7f, gbc.sp());
        EXPECT(0x7f7c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0344
        gbc.setState(0xfdb, 0x9ae2, 0x2f80, 0xf2e4, 0xb0af, 0xcab5, 0x0, 0x1);
        gbc.writeMem(0xfdb, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x9ae2, gbc.sp());
        EXPECT(0xfdd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0345
        gbc.setState(0xae6, 0x5e34, 0xba10, 0x595a, 0xaec2, 0x1496, 0x1, 0x1);
        gbc.writeMem(0xae6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x5e34, gbc.sp());
        EXPECT(0xae8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0346
        gbc.setState(0xa84, 0x8f6, 0x7270, 0xc878, 0x8a78, 0x68e3, 0x1, 0x1);
        gbc.writeMem(0xa84, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x8f6, gbc.sp());
        EXPECT(0xa86, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0347
        gbc.setState(0x4e25, 0x35a, 0x8940, 0x1002, 0xf287, 0xcc11, 0x0, 0x0);
        gbc.writeMem(0x4e25, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x35a, gbc.sp());
        EXPECT(0x4e27, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0348
        gbc.setState(0x2131, 0x5a76, 0x2360, 0x7233, 0x4fd5, 0x9198, 0x1, 0x0);
        gbc.writeMem(0x2131, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x5a76, gbc.sp());
        EXPECT(0x2133, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0349
        gbc.setState(0x570e, 0xf848, 0x8590, 0xad5e, 0x7971, 0xf76a, 0x1, 0x0);
        gbc.writeMem(0x570e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xf848, gbc.sp());
        EXPECT(0x5710, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 034A
        gbc.setState(0xb422, 0x4781, 0xd5d0, 0xe88b, 0xc6cb, 0xd780, 0x0, 0x1);
        gbc.writeMem(0xb422, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x4781, gbc.sp());
        EXPECT(0xb424, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb422));
        EXPECT(0x22, gbc.readMem(0xb423));
        // CB 22 034B
        gbc.setState(0x48c, 0x7df8, 0x83b0, 0xb0d8, 0x8de7, 0x888d, 0x0, 0x1);
        gbc.writeMem(0x48c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x7df8, gbc.sp());
        EXPECT(0x48e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 034C
        gbc.setState(0xe721, 0x944e, 0x6640, 0x80ae, 0x20ca, 0x8bd5, 0x0, 0x1);
        gbc.writeMem(0xe721, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x944e, gbc.sp());
        EXPECT(0xe723, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe721));
        EXPECT(0x22, gbc.readMem(0xe722));
        // CB 22 034D
        gbc.setState(0x6f0a, 0x99ac, 0x1180, 0xd44b, 0xb862, 0xd0c5, 0x1, 0x1);
        gbc.writeMem(0x6f0a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x99ac, gbc.sp());
        EXPECT(0x6f0c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 034E
        gbc.setState(0x43c8, 0x1ff2, 0x9340, 0x2812, 0xca9f, 0x7405, 0x0, 0x1);
        gbc.writeMem(0x43c8, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x1ff2, gbc.sp());
        EXPECT(0x43ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 034F
        gbc.setState(0x3a45, 0x424d, 0x9040, 0x3c77, 0x981, 0xa98e, 0x1, 0x1);
        gbc.writeMem(0x3a45, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x424d, gbc.sp());
        EXPECT(0x3a47, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0350
        gbc.setState(0x3b10, 0x7580, 0xb2c0, 0x151c, 0x512b, 0x8331, 0x0, 0x0);
        gbc.writeMem(0x3b10, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x7580, gbc.sp());
        EXPECT(0x3b12, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0351
        gbc.setState(0x6371, 0x6dba, 0xa400, 0x8128, 0x142e, 0x96d7, 0x1, 0x0);
        gbc.writeMem(0x6371, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x6dba, gbc.sp());
        EXPECT(0x6373, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0352
        gbc.setState(0xadaf, 0xe306, 0x9960, 0x2d4b, 0xbcc2, 0xf0dc, 0x1, 0x0);
        gbc.writeMem(0xadaf, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xe306, gbc.sp());
        EXPECT(0xadb1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xadaf));
        EXPECT(0x22, gbc.readMem(0xadb0));
        // CB 22 0353
        gbc.setState(0x5bea, 0x88d7, 0x29e0, 0x35aa, 0xad32, 0x62b0, 0x1, 0x0);
        gbc.writeMem(0x5bea, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x88d7, gbc.sp());
        EXPECT(0x5bec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0354
        gbc.setState(0x4ec3, 0x77c4, 0x5df0, 0xda73, 0xa99b, 0x23bd, 0x1, 0x0);
        gbc.writeMem(0x4ec3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x77c4, gbc.sp());
        EXPECT(0x4ec5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0355
        gbc.setState(0x7e69, 0x8962, 0x9360, 0xb4b, 0xe10a, 0xfcfc, 0x0, 0x1);
        gbc.writeMem(0x7e69, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x8962, gbc.sp());
        EXPECT(0x7e6b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0356
        gbc.setState(0x6344, 0xeade, 0x6d00, 0xcf60, 0xce77, 0xb5cc, 0x0, 0x0);
        gbc.writeMem(0x6344, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xeade, gbc.sp());
        EXPECT(0x6346, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0358
        gbc.setState(0xd6de, 0xdda0, 0xf790, 0x65c4, 0x58d7, 0x6bfc, 0x1, 0x0);
        gbc.writeMem(0xd6de, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xdda0, gbc.sp());
        EXPECT(0xd6e0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6de));
        EXPECT(0x22, gbc.readMem(0xd6df));
        // CB 22 0359
        gbc.setState(0xb685, 0x9095, 0xfa80, 0x1254, 0x1602, 0x6519, 0x1, 0x1);
        gbc.writeMem(0xb685, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x9095, gbc.sp());
        EXPECT(0xb687, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb685));
        EXPECT(0x22, gbc.readMem(0xb686));
        // CB 22 035A
        gbc.setState(0x6f92, 0x2f51, 0xb9e0, 0xa66f, 0x51a6, 0x6396, 0x1, 0x1);
        gbc.writeMem(0x6f92, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x2f51, gbc.sp());
        EXPECT(0x6f94, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 035B
        gbc.setState(0xd9e1, 0x8f56, 0x4460, 0xd281, 0xf30c, 0x9d67, 0x0, 0x1);
        gbc.writeMem(0xd9e1, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x8f56, gbc.sp());
        EXPECT(0xd9e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd9e1));
        EXPECT(0x22, gbc.readMem(0xd9e2));
        // CB 22 035C
        gbc.setState(0xc497, 0xa6ca, 0xec20, 0x4f99, 0xa82b, 0x9fe4, 0x1, 0x0);
        gbc.writeMem(0xc497, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xa6ca, gbc.sp());
        EXPECT(0xc499, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc497));
        EXPECT(0x22, gbc.readMem(0xc498));
        // CB 22 035D
        gbc.setState(0x85aa, 0xef03, 0xcb20, 0x259a, 0x84a3, 0x7358, 0x0, 0x1);
        gbc.writeMem(0x85aa, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0xef03, gbc.sp());
        EXPECT(0x85ac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x85aa));
        EXPECT(0x22, gbc.readMem(0x85ab));
        // CB 22 035E
        gbc.setState(0x9c2c, 0xfc3a, 0x7650, 0xcb99, 0xb0b, 0x8803, 0x0, 0x0);
        gbc.writeMem(0x9c2c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xfc3a, gbc.sp());
        EXPECT(0x9c2e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c2c));
        EXPECT(0x22, gbc.readMem(0x9c2d));
        // CB 22 035F
        gbc.setState(0xe176, 0x3313, 0x7090, 0x1f, 0xb5bf, 0x3008, 0x0, 0x0);
        gbc.writeMem(0xe176, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x3313, gbc.sp());
        EXPECT(0xe178, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe176));
        EXPECT(0x22, gbc.readMem(0xe177));
        // CB 22 0360
        gbc.setState(0xa0a2, 0xf66c, 0xfb20, 0xd3d0, 0x9ee, 0x1b85, 0x0, 0x0);
        gbc.writeMem(0xa0a2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xf66c, gbc.sp());
        EXPECT(0xa0a4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa0a2));
        EXPECT(0x22, gbc.readMem(0xa0a3));
        // CB 22 0361
        gbc.setState(0x8152, 0xe666, 0xa890, 0x4a9f, 0xb099, 0xe567, 0x1, 0x1);
        gbc.writeMem(0x8152, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xe666, gbc.sp());
        EXPECT(0x8154, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8152));
        EXPECT(0x22, gbc.readMem(0x8153));
        // CB 22 0363
        gbc.setState(0x77e7, 0xba2, 0xea30, 0x7844, 0x7a95, 0xa33, 0x0, 0x1);
        gbc.writeMem(0x77e7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0xba2, gbc.sp());
        EXPECT(0x77e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0364
        gbc.setState(0x2cee, 0xef67, 0xbcb0, 0xdc68, 0x78ff, 0x58f6, 0x1, 0x0);
        gbc.writeMem(0x2cee, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xef67, gbc.sp());
        EXPECT(0x2cf0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0365
        gbc.setState(0x2e4d, 0xe6ce, 0xd960, 0x615d, 0x324, 0xa80a, 0x1, 0x1);
        gbc.writeMem(0x2e4d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xe6ce, gbc.sp());
        EXPECT(0x2e4f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0366
        gbc.setState(0x714d, 0x7815, 0xb470, 0x4956, 0x4c73, 0x5866, 0x1, 0x0);
        gbc.writeMem(0x714d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x7815, gbc.sp());
        EXPECT(0x714f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0367
        gbc.setState(0x6944, 0xfca4, 0xa510, 0x52f6, 0x7490, 0xf9d2, 0x0, 0x1);
        gbc.writeMem(0x6944, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xfca4, gbc.sp());
        EXPECT(0x6946, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0368
        gbc.setState(0x6ad, 0x8722, 0x6420, 0x3aa4, 0xf1f4, 0x4495, 0x0, 0x1);
        gbc.writeMem(0x6ad, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x8722, gbc.sp());
        EXPECT(0x6af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0369
        gbc.setState(0xcea5, 0xc41, 0xc150, 0xb64f, 0x6d3, 0xa111, 0x0, 0x1);
        gbc.writeMem(0xcea5, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0xc41, gbc.sp());
        EXPECT(0xcea7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcea5));
        EXPECT(0x22, gbc.readMem(0xcea6));
        // CB 22 036A
        gbc.setState(0x775f, 0x2725, 0x96f0, 0x84ab, 0x5af1, 0x1ed9, 0x1, 0x0);
        gbc.writeMem(0x775f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x2725, gbc.sp());
        EXPECT(0x7761, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 036B
        gbc.setState(0x6ffb, 0x3ebe, 0x2400, 0xd61b, 0x72c5, 0x47d1, 0x1, 0x0);
        gbc.writeMem(0x6ffb, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x3ebe, gbc.sp());
        EXPECT(0x6ffd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 036C
        gbc.setState(0xc3de, 0x8054, 0xca30, 0x946e, 0xb424, 0x6e84, 0x0, 0x0);
        gbc.writeMem(0xc3de, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x8054, gbc.sp());
        EXPECT(0xc3e0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc3de));
        EXPECT(0x22, gbc.readMem(0xc3df));
        // CB 22 036D
        gbc.setState(0x9fa3, 0xac49, 0xebd0, 0xdd2a, 0x260f, 0x901b, 0x0, 0x1);
        gbc.writeMem(0x9fa3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xac49, gbc.sp());
        EXPECT(0x9fa5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9fa3));
        EXPECT(0x22, gbc.readMem(0x9fa4));
        // CB 22 036E
        gbc.setState(0x824a, 0x185b, 0xb150, 0xbc08, 0xd998, 0x26e0, 0x0, 0x1);
        gbc.writeMem(0x824a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x185b, gbc.sp());
        EXPECT(0x824c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x824a));
        EXPECT(0x22, gbc.readMem(0x824b));
        // CB 22 036F
        gbc.setState(0x65f6, 0x7921, 0x1db0, 0xf31c, 0x2daf, 0x2690, 0x0, 0x1);
        gbc.writeMem(0x65f6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x7921, gbc.sp());
        EXPECT(0x65f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0370
        gbc.setState(0xbca4, 0xd794, 0xbf10, 0x8073, 0xbe0e, 0x3b29, 0x0, 0x0);
        gbc.writeMem(0xbca4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0xd794, gbc.sp());
        EXPECT(0xbca6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbca4));
        EXPECT(0x22, gbc.readMem(0xbca5));
        // CB 22 0371
        gbc.setState(0x2442, 0xb9ab, 0x14f0, 0xb9a7, 0xcaee, 0xfaa7, 0x0, 0x0);
        gbc.writeMem(0x2442, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xb9ab, gbc.sp());
        EXPECT(0x2444, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0372
        gbc.setState(0x2db9, 0x7ebe, 0xde60, 0x4380, 0xb483, 0x837d, 0x1, 0x1);
        gbc.writeMem(0x2db9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x7ebe, gbc.sp());
        EXPECT(0x2dbb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0373
        gbc.setState(0xd255, 0x2781, 0x94b0, 0xd6d0, 0x1c9f, 0xb71d, 0x0, 0x1);
        gbc.writeMem(0xd255, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x2781, gbc.sp());
        EXPECT(0xd257, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd255));
        EXPECT(0x22, gbc.readMem(0xd256));
        // CB 22 0374
        gbc.setState(0x9bc5, 0xd136, 0xeb00, 0x2e67, 0xe987, 0x649e, 0x1, 0x1);
        gbc.writeMem(0x9bc5, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xd136, gbc.sp());
        EXPECT(0x9bc7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9bc5));
        EXPECT(0x22, gbc.readMem(0x9bc6));
        // CB 22 0376
        gbc.setState(0x3abe, 0x4c5, 0xaf10, 0xd4f3, 0x55c7, 0xae3a, 0x1, 0x0);
        gbc.writeMem(0x3abe, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x4c5, gbc.sp());
        EXPECT(0x3ac0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0377
        gbc.setState(0x59b0, 0x2d51, 0x36e0, 0xdfb3, 0xe9da, 0xfe7c, 0x0, 0x0);
        gbc.writeMem(0x59b0, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x2d51, gbc.sp());
        EXPECT(0x59b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0378
        gbc.setState(0x12fc, 0x9ab2, 0xcdc0, 0xdb93, 0x1035, 0xdf23, 0x1, 0x0);
        gbc.writeMem(0x12fc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x9ab2, gbc.sp());
        EXPECT(0x12fe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0379
        gbc.setState(0x7f61, 0x9e49, 0x8020, 0xe831, 0xf72f, 0x8cf9, 0x1, 0x0);
        gbc.writeMem(0x7f61, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x9e49, gbc.sp());
        EXPECT(0x7f63, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 037A
        gbc.setState(0x5eb3, 0x9bff, 0x8ee0, 0xee63, 0x1083, 0x2d43, 0x1, 0x0);
        gbc.writeMem(0x5eb3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x9bff, gbc.sp());
        EXPECT(0x5eb5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 037B
        gbc.setState(0x2ae8, 0x7412, 0x57d0, 0xc70f, 0x32ee, 0xf561, 0x0, 0x0);
        gbc.writeMem(0x2ae8, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x7412, gbc.sp());
        EXPECT(0x2aea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 037C
        gbc.setState(0x57f9, 0x6239, 0xc110, 0xdcc6, 0x7911, 0x7571, 0x0, 0x1);
        gbc.writeMem(0x57f9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x6239, gbc.sp());
        EXPECT(0x57fb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 037D
        gbc.setState(0x52cc, 0xb97d, 0xec90, 0x30d0, 0x2142, 0x9215, 0x0, 0x1);
        gbc.writeMem(0x52cc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xb97d, gbc.sp());
        EXPECT(0x52ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 037E
        gbc.setState(0xbd9c, 0x9715, 0xc890, 0x5236, 0x9ef9, 0xad2b, 0x0, 0x1);
        gbc.writeMem(0xbd9c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x9715, gbc.sp());
        EXPECT(0xbd9e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd9c));
        EXPECT(0x22, gbc.readMem(0xbd9d));
        // CB 22 037F
        gbc.setState(0xcd7, 0xb716, 0x4470, 0x4b51, 0xb7ce, 0x28a4, 0x0, 0x1);
        gbc.writeMem(0xcd7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xb716, gbc.sp());
        EXPECT(0xcd9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0380
        gbc.setState(0x7bea, 0xd8f5, 0x1120, 0x5735, 0x76da, 0xc5d5, 0x1, 0x1);
        gbc.writeMem(0x7bea, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xd8f5, gbc.sp());
        EXPECT(0x7bec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0381
        gbc.setState(0xad4c, 0x2993, 0xabf0, 0xa92c, 0x5032, 0x851e, 0x1, 0x1);
        gbc.writeMem(0xad4c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x2993, gbc.sp());
        EXPECT(0xad4e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad4c));
        EXPECT(0x22, gbc.readMem(0xad4d));
        // CB 22 0382
        gbc.setState(0x740, 0x6fc4, 0xf400, 0x293e, 0x3c8a, 0xc41b, 0x1, 0x1);
        gbc.writeMem(0x740, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x6fc4, gbc.sp());
        EXPECT(0x742, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0383
        gbc.setState(0x1745, 0x9583, 0x8a10, 0x89e4, 0xd1e6, 0xf6cd, 0x0, 0x0);
        gbc.writeMem(0x1745, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x9583, gbc.sp());
        EXPECT(0x1747, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0384
        gbc.setState(0xbcd, 0x16aa, 0xc440, 0x2f9e, 0xee2c, 0x1b79, 0x1, 0x1);
        gbc.writeMem(0xbcd, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x16aa, gbc.sp());
        EXPECT(0xbcf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0385
        gbc.setState(0x9d39, 0x2fae, 0x2f70, 0x1f4f, 0xc641, 0xa88f, 0x1, 0x0);
        gbc.writeMem(0x9d39, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x2fae, gbc.sp());
        EXPECT(0x9d3b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d39));
        EXPECT(0x22, gbc.readMem(0x9d3a));
        // CB 22 0386
        gbc.setState(0x707e, 0xf00c, 0x98a0, 0x1c55, 0xed60, 0xc03a, 0x1, 0x1);
        gbc.writeMem(0x707e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xf00c, gbc.sp());
        EXPECT(0x7080, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0387
        gbc.setState(0xcae0, 0xf13b, 0x26d0, 0xfa23, 0x711d, 0xfb6, 0x0, 0x0);
        gbc.writeMem(0xcae0, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xf13b, gbc.sp());
        EXPECT(0xcae2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcae0));
        EXPECT(0x22, gbc.readMem(0xcae1));
        // CB 22 0388
        gbc.setState(0x60dc, 0x538, 0xfcb0, 0x958e, 0xdcfe, 0x3774, 0x0, 0x0);
        gbc.writeMem(0x60dc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x538, gbc.sp());
        EXPECT(0x60de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0389
        gbc.setState(0xc7fc, 0xd314, 0x4c10, 0x119f, 0x7f2a, 0x950a, 0x1, 0x0);
        gbc.writeMem(0xc7fc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xd314, gbc.sp());
        EXPECT(0xc7fe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc7fc));
        EXPECT(0x22, gbc.readMem(0xc7fd));
        // CB 22 038A
        gbc.setState(0xaddd, 0x9bec, 0x3aa0, 0xddfa, 0x437e, 0x428b, 0x1, 0x1);
        gbc.writeMem(0xaddd, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x9bec, gbc.sp());
        EXPECT(0xaddf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaddd));
        EXPECT(0x22, gbc.readMem(0xadde));
        // CB 22 038B
        gbc.setState(0x61df, 0x6af, 0x82f0, 0x6704, 0x7057, 0x4725, 0x1, 0x0);
        gbc.writeMem(0x61df, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x6af, gbc.sp());
        EXPECT(0x61e1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 038C
        gbc.setState(0x949a, 0x33d7, 0x6a10, 0x74, 0xb258, 0x181d, 0x0, 0x0);
        gbc.writeMem(0x949a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x33d7, gbc.sp());
        EXPECT(0x949c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x949a));
        EXPECT(0x22, gbc.readMem(0x949b));
        // CB 22 038D
        gbc.setState(0xa68c, 0x3c42, 0xa670, 0xdc41, 0xf86b, 0xb9b7, 0x1, 0x0);
        gbc.writeMem(0xa68c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x3c42, gbc.sp());
        EXPECT(0xa68e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa68c));
        EXPECT(0x22, gbc.readMem(0xa68d));
        // CB 22 038E
        gbc.setState(0xecf9, 0x6a2e, 0x6630, 0xf7c4, 0xc4cf, 0x17a5, 0x1, 0x0);
        gbc.writeMem(0xecf9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x6a2e, gbc.sp());
        EXPECT(0xecfb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xecf9));
        EXPECT(0x22, gbc.readMem(0xecfa));
        // CB 22 038F
        gbc.setState(0x2b1d, 0xf782, 0x2040, 0xc729, 0x4c04, 0xfb39, 0x1, 0x1);
        gbc.writeMem(0x2b1d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xf782, gbc.sp());
        EXPECT(0x2b1f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0390
        gbc.setState(0x6da9, 0xfa95, 0x6e80, 0xbb7, 0xdbd8, 0x9906, 0x0, 0x0);
        gbc.writeMem(0x6da9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0xfa95, gbc.sp());
        EXPECT(0x6dab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0391
        gbc.setState(0x738c, 0xb970, 0xa680, 0xb638, 0x5261, 0xdd87, 0x0, 0x0);
        gbc.writeMem(0x738c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xb970, gbc.sp());
        EXPECT(0x738e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0392
        gbc.setState(0xbf95, 0xd3ee, 0xe270, 0x3165, 0xc4df, 0x15ef, 0x1, 0x0);
        gbc.writeMem(0xbf95, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xd3ee, gbc.sp());
        EXPECT(0xbf97, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf95));
        EXPECT(0x22, gbc.readMem(0xbf96));
        // CB 22 0393
        gbc.setState(0xebd9, 0xd87c, 0xd2b0, 0xa3e2, 0xc221, 0x825d, 0x0, 0x0);
        gbc.writeMem(0xebd9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xd87c, gbc.sp());
        EXPECT(0xebdb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xebd9));
        EXPECT(0x22, gbc.readMem(0xebda));
        // CB 22 0394
        gbc.setState(0x7a9f, 0xa01e, 0xf1f0, 0x7e09, 0x6424, 0x672a, 0x0, 0x1);
        gbc.writeMem(0x7a9f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0xa01e, gbc.sp());
        EXPECT(0x7aa1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0395
        gbc.setState(0xae4d, 0xf7c3, 0x6410, 0x995, 0x24a4, 0x6f71, 0x1, 0x1);
        gbc.writeMem(0xae4d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xf7c3, gbc.sp());
        EXPECT(0xae4f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae4d));
        EXPECT(0x22, gbc.readMem(0xae4e));
        // CB 22 0396
        gbc.setState(0x7552, 0x1a97, 0xfaf0, 0xb4cb, 0xecd8, 0x3f44, 0x1, 0x0);
        gbc.writeMem(0x7552, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x1a97, gbc.sp());
        EXPECT(0x7554, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 0397
        gbc.setState(0x8167, 0xde9, 0x8860, 0x3834, 0x1523, 0x7ed3, 0x1, 0x0);
        gbc.writeMem(0x8167, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0xde9, gbc.sp());
        EXPECT(0x8169, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8167));
        EXPECT(0x22, gbc.readMem(0x8168));
        // CB 22 0398
        gbc.setState(0x3e9a, 0x51b3, 0x6a10, 0x2bc5, 0x31e9, 0x738d, 0x1, 0x1);
        gbc.writeMem(0x3e9a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x51b3, gbc.sp());
        EXPECT(0x3e9c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 0399
        gbc.setState(0x4267, 0x4864, 0xc590, 0x803d, 0x2b7, 0x7cb9, 0x0, 0x1);
        gbc.writeMem(0x4267, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x4864, gbc.sp());
        EXPECT(0x4269, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 039B
        gbc.setState(0xa24a, 0x5b1, 0x9270, 0xaeb4, 0xba4, 0x38bf, 0x1, 0x1);
        gbc.writeMem(0xa24a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x5b1, gbc.sp());
        EXPECT(0xa24c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa24a));
        EXPECT(0x22, gbc.readMem(0xa24b));
        // CB 22 039C
        gbc.setState(0x84c, 0xb830, 0x12a0, 0x66d5, 0xfcac, 0x2c97, 0x0, 0x0);
        gbc.writeMem(0x84c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xb830, gbc.sp());
        EXPECT(0x84e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 039D
        gbc.setState(0x6d27, 0x9691, 0xb350, 0x9c7a, 0x39f5, 0x6b35, 0x0, 0x1);
        gbc.writeMem(0x6d27, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x9691, gbc.sp());
        EXPECT(0x6d29, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 039E
        gbc.setState(0xdca6, 0x959e, 0xd8d0, 0xf35f, 0xec78, 0xb6c8, 0x1, 0x1);
        gbc.writeMem(0xdca6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x959e, gbc.sp());
        EXPECT(0xdca8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdca6));
        EXPECT(0x22, gbc.readMem(0xdca7));
        // CB 22 03A0
        gbc.setState(0x690b, 0x4174, 0xee80, 0xb54e, 0x7e4, 0x27ec, 0x0, 0x1);
        gbc.writeMem(0x690b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x4174, gbc.sp());
        EXPECT(0x690d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 03A1
        gbc.setState(0x185b, 0xc63, 0x9f10, 0x9d79, 0x3270, 0xb493, 0x1, 0x1);
        gbc.writeMem(0x185b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xc63, gbc.sp());
        EXPECT(0x185d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 03A2
        gbc.setState(0x75f3, 0xca10, 0xcfb0, 0xeda1, 0x1070, 0x26c1, 0x1, 0x0);
        gbc.writeMem(0x75f3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xca10, gbc.sp());
        EXPECT(0x75f5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 03A3
        gbc.setState(0x6236, 0x4990, 0xb2a0, 0x1ee2, 0xf1f5, 0xb25d, 0x0, 0x0);
        gbc.writeMem(0x6236, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x4990, gbc.sp());
        EXPECT(0x6238, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03A4
        gbc.setState(0xcd, 0xc437, 0x52c0, 0xbb27, 0xffb6, 0xc563, 0x1, 0x1);
        gbc.writeMem(0xcd, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xc437, gbc.sp());
        EXPECT(0xcf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03A5
        gbc.setState(0x3893, 0xe5ad, 0xd480, 0x866, 0xd102, 0x9304, 0x1, 0x0);
        gbc.writeMem(0x3893, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xe5ad, gbc.sp());
        EXPECT(0x3895, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03A6
        gbc.setState(0x71ec, 0xcaaa, 0x7a40, 0x2dbb, 0x6ef4, 0x98fc, 0x1, 0x0);
        gbc.writeMem(0x71ec, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xcaaa, gbc.sp());
        EXPECT(0x71ee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 03A8
        gbc.setState(0x7015, 0xb4c8, 0xa770, 0xf6d2, 0xcb52, 0x44d, 0x0, 0x0);
        gbc.writeMem(0x7015, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xb4c8, gbc.sp());
        EXPECT(0x7017, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03A9
        gbc.setState(0x2b91, 0xfa5, 0xe890, 0xedd8, 0x46f1, 0x710b, 0x1, 0x1);
        gbc.writeMem(0x2b91, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xfa5, gbc.sp());
        EXPECT(0x2b93, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 03AB
        gbc.setState(0xc07, 0xa712, 0x2db0, 0x71e9, 0xe655, 0x7e5a, 0x0, 0x0);
        gbc.writeMem(0xc07, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0xa712, gbc.sp());
        EXPECT(0xc09, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03AC
        gbc.setState(0x689d, 0x3fad, 0xcf40, 0x63d2, 0x3f6d, 0x3dac, 0x0, 0x1);
        gbc.writeMem(0x689d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x3fad, gbc.sp());
        EXPECT(0x689f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 03AD
        gbc.setState(0xabdc, 0x2983, 0xb9f0, 0x72d0, 0x4fb6, 0x210e, 0x1, 0x1);
        gbc.writeMem(0xabdc, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x2983, gbc.sp());
        EXPECT(0xabde, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xabdc));
        EXPECT(0x22, gbc.readMem(0xabdd));
        // CB 22 03AE
        gbc.setState(0x9b5f, 0x9ae9, 0x5e70, 0xd127, 0xb26e, 0xd23e, 0x1, 0x0);
        gbc.writeMem(0x9b5f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x9ae9, gbc.sp());
        EXPECT(0x9b61, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b5f));
        EXPECT(0x22, gbc.readMem(0x9b60));
        // CB 22 03AF
        gbc.setState(0xa85a, 0x3d19, 0x67f0, 0xe48a, 0xbc3f, 0x51b3, 0x0, 0x1);
        gbc.writeMem(0xa85a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x3d19, gbc.sp());
        EXPECT(0xa85c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa85a));
        EXPECT(0x22, gbc.readMem(0xa85b));
        // CB 22 03B0
        gbc.setState(0x402b, 0xfe44, 0xc9a0, 0x3694, 0x3910, 0xee50, 0x1, 0x1);
        gbc.writeMem(0x402b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xfe44, gbc.sp());
        EXPECT(0x402d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 03B1
        gbc.setState(0xeb1e, 0xd0e3, 0x6980, 0xa1d, 0x7a9b, 0x78c1, 0x0, 0x0);
        gbc.writeMem(0xeb1e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xd0e3, gbc.sp());
        EXPECT(0xeb20, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb1e));
        EXPECT(0x22, gbc.readMem(0xeb1f));
        // CB 22 03B2
        gbc.setState(0xeafd, 0xa027, 0x33b0, 0x9ee6, 0xcf54, 0xfda4, 0x0, 0x1);
        gbc.writeMem(0xeafd, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xa027, gbc.sp());
        EXPECT(0xeaff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeafd));
        EXPECT(0x22, gbc.readMem(0xeafe));
        // CB 22 03B3
        gbc.setState(0x6d5a, 0x1a48, 0xa7a0, 0x99f1, 0xb0a4, 0xc9bc, 0x0, 0x1);
        gbc.writeMem(0x6d5a, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x1a48, gbc.sp());
        EXPECT(0x6d5c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03B4
        gbc.setState(0x1cb9, 0x409c, 0x7b10, 0xb223, 0xd121, 0x2e8, 0x1, 0x0);
        gbc.writeMem(0x1cb9, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x409c, gbc.sp());
        EXPECT(0x1cbb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03B5
        gbc.setState(0xd2e0, 0xb9cc, 0x81e0, 0x64e0, 0xf2d3, 0x4d01, 0x1, 0x1);
        gbc.writeMem(0xd2e0, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xb9cc, gbc.sp());
        EXPECT(0xd2e2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd2e0));
        EXPECT(0x22, gbc.readMem(0xd2e1));
        // CB 22 03B6
        gbc.setState(0x718d, 0xf1de, 0x8b20, 0x177c, 0x9943, 0x8d0b, 0x1, 0x0);
        gbc.writeMem(0x718d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xf1de, gbc.sp());
        EXPECT(0x718f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03B7
        gbc.setState(0x1040, 0x7520, 0xae00, 0x5814, 0xa99c, 0xa671, 0x1, 0x0);
        gbc.writeMem(0x1040, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x7520, gbc.sp());
        EXPECT(0x1042, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03B8
        gbc.setState(0x29c3, 0x25aa, 0x5470, 0x4572, 0x8dc5, 0xb54c, 0x0, 0x1);
        gbc.writeMem(0x29c3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x25aa, gbc.sp());
        EXPECT(0x29c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03B9
        gbc.setState(0xca72, 0x933c, 0x540, 0xd0d4, 0xa03d, 0x6574, 0x0, 0x1);
        gbc.writeMem(0xca72, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x933c, gbc.sp());
        EXPECT(0xca74, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xca72));
        EXPECT(0x22, gbc.readMem(0xca73));
        // CB 22 03BA
        gbc.setState(0x613e, 0xf61c, 0x38b0, 0xe63b, 0xd42d, 0x2a6d, 0x1, 0x0);
        gbc.writeMem(0x613e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xf61c, gbc.sp());
        EXPECT(0x6140, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03BB
        gbc.setState(0x2fd7, 0x6de1, 0xb910, 0x2130, 0xedd8, 0xc541, 0x1, 0x0);
        gbc.writeMem(0x2fd7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x6de1, gbc.sp());
        EXPECT(0x2fd9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03BC
        gbc.setState(0xab6, 0x4b99, 0x3130, 0x2da4, 0xa7a9, 0x55e9, 0x0, 0x1);
        gbc.writeMem(0xab6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x4b99, gbc.sp());
        EXPECT(0xab8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03BD
        gbc.setState(0x8a7b, 0x6722, 0x4770, 0xa703, 0x5ea9, 0xc80f, 0x1, 0x1);
        gbc.writeMem(0x8a7b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x6722, gbc.sp());
        EXPECT(0x8a7d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a7b));
        EXPECT(0x22, gbc.readMem(0x8a7c));
        // CB 22 03BE
        gbc.setState(0x51f2, 0x10aa, 0x460, 0x8a42, 0x6993, 0x2e3c, 0x0, 0x0);
        gbc.writeMem(0x51f2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x10aa, gbc.sp());
        EXPECT(0x51f4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 03BF
        gbc.setState(0xc876, 0xa971, 0x9570, 0x8411, 0xfc69, 0x9188, 0x1, 0x0);
        gbc.writeMem(0xc876, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xa971, gbc.sp());
        EXPECT(0xc878, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc876));
        EXPECT(0x22, gbc.readMem(0xc877));
        // CB 22 03C0
        gbc.setState(0xe535, 0xdcb4, 0xf70, 0xf0f6, 0x55d6, 0x5184, 0x1, 0x1);
        gbc.writeMem(0xe535, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xdcb4, gbc.sp());
        EXPECT(0xe537, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe535));
        EXPECT(0x22, gbc.readMem(0xe536));
        // CB 22 03C1
        gbc.setState(0xbd7f, 0x6cdc, 0xaad0, 0xde68, 0x8c22, 0xb292, 0x1, 0x0);
        gbc.writeMem(0xbd7f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x6cdc, gbc.sp());
        EXPECT(0xbd81, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd7f));
        EXPECT(0x22, gbc.readMem(0xbd80));
        // CB 22 03C2
        gbc.setState(0xbb6c, 0xe17f, 0x8950, 0x9251, 0xdb9d, 0x81cd, 0x1, 0x1);
        gbc.writeMem(0xbb6c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0xe17f, gbc.sp());
        EXPECT(0xbb6e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb6c));
        EXPECT(0x22, gbc.readMem(0xbb6d));
        // CB 22 03C3
        gbc.setState(0x4bd2, 0xc067, 0xb20, 0x79c4, 0xbac2, 0x91ee, 0x1, 0x0);
        gbc.writeMem(0x4bd2, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xc067, gbc.sp());
        EXPECT(0x4bd4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03C4
        gbc.setState(0x5c07, 0x354d, 0x5150, 0x4680, 0x9255, 0xa780, 0x0, 0x0);
        gbc.writeMem(0x5c07, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x354d, gbc.sp());
        EXPECT(0x5c09, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03C5
        gbc.setState(0x8abe, 0xbfa2, 0x46a0, 0xc83e, 0x5d00, 0x109a, 0x0, 0x1);
        gbc.writeMem(0x8abe, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xbfa2, gbc.sp());
        EXPECT(0x8ac0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8abe));
        EXPECT(0x22, gbc.readMem(0x8abf));
        // CB 22 03C6
        gbc.setState(0x13e7, 0xa338, 0xd160, 0x9b6b, 0x2cc, 0x2092, 0x0, 0x0);
        gbc.writeMem(0x13e7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xa338, gbc.sp());
        EXPECT(0x13e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 03C7
        gbc.setState(0x1c6d, 0xebc0, 0x1a30, 0x814e, 0x2cf9, 0x616e, 0x0, 0x0);
        gbc.writeMem(0x1c6d, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xebc0, gbc.sp());
        EXPECT(0x1c6f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 03C8
        gbc.setState(0x971e, 0xc632, 0xfeb0, 0x78ba, 0x4c21, 0xaa5c, 0x1, 0x1);
        gbc.writeMem(0x971e, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0xc632, gbc.sp());
        EXPECT(0x9720, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x971e));
        EXPECT(0x22, gbc.readMem(0x971f));
        // CB 22 03C9
        gbc.setState(0x5aef, 0x19b7, 0xb730, 0xb727, 0x74d6, 0x1814, 0x1, 0x1);
        gbc.writeMem(0x5aef, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x19b7, gbc.sp());
        EXPECT(0x5af1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 03CA
        gbc.setState(0x78fd, 0x3cfd, 0xfa60, 0x252e, 0xdbe9, 0xb85f, 0x1, 0x0);
        gbc.writeMem(0x78fd, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x3cfd, gbc.sp());
        EXPECT(0x78ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03CB
        gbc.setState(0x89fa, 0xdbd1, 0x5b60, 0x4176, 0x77cd, 0x886d, 0x1, 0x0);
        gbc.writeMem(0x89fa, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xdbd1, gbc.sp());
        EXPECT(0x89fc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x89fa));
        EXPECT(0x22, gbc.readMem(0x89fb));
        // CB 22 03CD
        gbc.setState(0x42b4, 0xa143, 0xb2c0, 0x6a2e, 0x3a0, 0x46ea, 0x1, 0x0);
        gbc.writeMem(0x42b4, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xa143, gbc.sp());
        EXPECT(0x42b6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 03CE
        gbc.setState(0x248c, 0x2234, 0xc540, 0xf9b5, 0xe485, 0x14c3, 0x1, 0x0);
        gbc.writeMem(0x248c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x2234, gbc.sp());
        EXPECT(0x248e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03CF
        gbc.setState(0xa3b5, 0x8f08, 0x5ef0, 0x1d04, 0x4bdd, 0x4ae8, 0x1, 0x0);
        gbc.writeMem(0xa3b5, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x8f08, gbc.sp());
        EXPECT(0xa3b7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa3b5));
        EXPECT(0x22, gbc.readMem(0xa3b6));
        // CB 22 03D0
        gbc.setState(0xcee1, 0xc7f6, 0x2fc0, 0x38fb, 0x37fb, 0x723, 0x1, 0x1);
        gbc.writeMem(0xcee1, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xc7f6, gbc.sp());
        EXPECT(0xcee3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcee1));
        EXPECT(0x22, gbc.readMem(0xcee2));
        // CB 22 03D1
        gbc.setState(0xe1fb, 0x7af8, 0x3a50, 0xee57, 0x1742, 0x89ad, 0x1, 0x0);
        gbc.writeMem(0xe1fb, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x7af8, gbc.sp());
        EXPECT(0xe1fd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe1fb));
        EXPECT(0x22, gbc.readMem(0xe1fc));
        // CB 22 03D2
        gbc.setState(0x1e61, 0xa6f1, 0xec70, 0xed12, 0x3607, 0x7e86, 0x1, 0x1);
        gbc.writeMem(0x1e61, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xa6f1, gbc.sp());
        EXPECT(0x1e63, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 03D3
        gbc.setState(0x1059, 0xcee3, 0xc760, 0x863f, 0xdaa0, 0xb2f0, 0x0, 0x1);
        gbc.writeMem(0x1059, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xcee3, gbc.sp());
        EXPECT(0x105b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03D4
        gbc.setState(0x8f31, 0x7b3a, 0x5fe0, 0x1559, 0x8081, 0xba4c, 0x1, 0x1);
        gbc.writeMem(0x8f31, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x7b3a, gbc.sp());
        EXPECT(0x8f33, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f31));
        EXPECT(0x22, gbc.readMem(0x8f32));
        // CB 22 03D5
        gbc.setState(0xcb28, 0xda21, 0x9a90, 0xf3f9, 0x341f, 0x80fa, 0x0, 0x0);
        gbc.writeMem(0xcb28, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xda21, gbc.sp());
        EXPECT(0xcb2a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb28));
        EXPECT(0x22, gbc.readMem(0xcb29));
        // CB 22 03D6
        gbc.setState(0x1fef, 0x3798, 0xa9d0, 0x1d9c, 0x5f9a, 0x72f4, 0x0, 0x0);
        gbc.writeMem(0x1fef, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x3798, gbc.sp());
        EXPECT(0x1ff1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 03D7
        gbc.setState(0x4f13, 0x5aad, 0xfee0, 0x3fe5, 0xaba7, 0x282f, 0x1, 0x1);
        gbc.writeMem(0x4f13, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x5aad, gbc.sp());
        EXPECT(0x4f15, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03D8
        gbc.setState(0x9b4b, 0xcad5, 0xbc60, 0x7672, 0xe269, 0x7f02, 0x0, 0x1);
        gbc.writeMem(0x9b4b, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0xcad5, gbc.sp());
        EXPECT(0x9b4d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b4b));
        EXPECT(0x22, gbc.readMem(0x9b4c));
        // CB 22 03D9
        gbc.setState(0x4cee, 0x49d2, 0xd980, 0xe195, 0xa101, 0xd74d, 0x0, 0x1);
        gbc.writeMem(0x4cee, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x49d2, gbc.sp());
        EXPECT(0x4cf0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03DA
        gbc.setState(0xb7d3, 0xf81e, 0xb0d0, 0x74e, 0xa8c7, 0x43f4, 0x1, 0x1);
        gbc.writeMem(0xb7d3, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xf81e, gbc.sp());
        EXPECT(0xb7d5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb7d3));
        EXPECT(0x22, gbc.readMem(0xb7d4));
        // CB 22 03DB
        gbc.setState(0x77c7, 0x8276, 0x6280, 0x6f7a, 0xe0dd, 0x5374, 0x1, 0x1);
        gbc.writeMem(0x77c7, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x8276, gbc.sp());
        EXPECT(0x77c9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03DC
        gbc.setState(0xc954, 0xc2f4, 0x1c80, 0x9747, 0x5ddc, 0xeedf, 0x1, 0x0);
        gbc.writeMem(0xc954, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xc2f4, gbc.sp());
        EXPECT(0xc956, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc954));
        EXPECT(0x22, gbc.readMem(0xc955));
        // CB 22 03DE
        gbc.setState(0x81e6, 0x3f4a, 0x26e0, 0x2e93, 0x937c, 0x68f0, 0x1, 0x0);
        gbc.writeMem(0x81e6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x3f4a, gbc.sp());
        EXPECT(0x81e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x81e6));
        EXPECT(0x22, gbc.readMem(0x81e7));
        // CB 22 03DF
        gbc.setState(0x425f, 0xbec6, 0x3bc0, 0x400d, 0x30d2, 0x9981, 0x0, 0x1);
        gbc.writeMem(0x425f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xbec6, gbc.sp());
        EXPECT(0x4261, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 22 03E0
        gbc.setState(0xb73f, 0x1049, 0x9120, 0x30f, 0x9221, 0x7772, 0x0, 0x1);
        gbc.writeMem(0xb73f, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x1049, gbc.sp());
        EXPECT(0xb741, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb73f));
        EXPECT(0x22, gbc.readMem(0xb740));
        // CB 22 03E1
        gbc.setState(0x13c6, 0x8211, 0x1c0, 0xe73, 0xa3c6, 0x5158, 0x0, 0x1);
        gbc.writeMem(0x13c6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x8211, gbc.sp());
        EXPECT(0x13c8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03E2
        gbc.setState(0x19c6, 0xf547, 0x5490, 0xc0b9, 0xde73, 0x3f60, 0x1, 0x0);
        gbc.writeMem(0x19c6, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0xf547, gbc.sp());
        EXPECT(0x19c8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03E3
        gbc.setState(0x5d4c, 0xf3ef, 0xdb90, 0xcb0c, 0xb6da, 0x3d67, 0x0, 0x0);
        gbc.writeMem(0x5d4c, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xf3ef, gbc.sp());
        EXPECT(0x5d4e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03E4
        gbc.setState(0x94f1, 0x7654, 0x1800, 0xa644, 0x912e, 0x9966, 0x1, 0x1);
        gbc.writeMem(0x94f1, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x7654, gbc.sp());
        EXPECT(0x94f3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x94f1));
        EXPECT(0x22, gbc.readMem(0x94f2));
        // CB 22 03E5
        gbc.setState(0x18b8, 0x14fa, 0xb70, 0x17a, 0x9697, 0x13c, 0x1, 0x0);
        gbc.writeMem(0x18b8, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x14fa, gbc.sp());
        EXPECT(0x18ba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03E6
        gbc.setState(0x48ad, 0xdbc5, 0xd660, 0x230e, 0xcb3e, 0x8c3c, 0x0, 0x1);
        gbc.writeMem(0x48ad, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xdbc5, gbc.sp());
        EXPECT(0x48af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 22 03E7
        gbc.setState(0x7aaa, 0x8bc3, 0x760, 0x58f2, 0x3f1, 0x20db, 0x0, 0x0);
        gbc.writeMem(0x7aaa, { 0xcb, 0x22 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x8bc3, gbc.sp());
        EXPECT(0x7aac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
    }
