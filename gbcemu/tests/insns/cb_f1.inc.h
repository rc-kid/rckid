    TEST(gbcemu, opcode_cb_f1) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB F1 0000
        gbc.setState(0xe01e, 0x94c1, 0x8f70, 0xa85a, 0x2278, 0xe9fe, 0x1, 0x1);
        gbc.writeMem(0xe01e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x94c1);
        EXPECT(gbc.pc(), 0xe020);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe01e), 0xcb);
        EXPECT(gbc.readMem(0xe01f), 0xf1);
        // CB F1 0001
        gbc.setState(0xe3d7, 0xaa2e, 0x8a50, 0xb217, 0x2257, 0x99cb, 0x1, 0x1);
        gbc.writeMem(0xe3d7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xaa2e);
        EXPECT(gbc.pc(), 0xe3d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3d7), 0xcb);
        EXPECT(gbc.readMem(0xe3d8), 0xf1);
        // CB F1 0002
        gbc.setState(0x3898, 0xdb5e, 0x8280, 0x5cd2, 0x9d69, 0xc59, 0x0, 0x1);
        gbc.writeMem(0x3898, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xdb5e);
        EXPECT(gbc.pc(), 0x389a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0003
        gbc.setState(0x4e14, 0x4529, 0x24b0, 0x39f4, 0xe9ed, 0x7a8f, 0x1, 0x0);
        gbc.writeMem(0x4e14, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x4529);
        EXPECT(gbc.pc(), 0x4e16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0004
        gbc.setState(0x2ccc, 0x6b71, 0xc8e0, 0x4117, 0x19dd, 0x60d4, 0x1, 0x0);
        gbc.writeMem(0x2ccc, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x6b71);
        EXPECT(gbc.pc(), 0x2cce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0005
        gbc.setState(0xe1b, 0xb3b5, 0x8c50, 0xf86b, 0xc38c, 0x3799, 0x0, 0x1);
        gbc.writeMem(0xe1b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xb3b5);
        EXPECT(gbc.pc(), 0xe1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0006
        gbc.setState(0x8f6a, 0x827, 0x5df0, 0xe923, 0xb1e5, 0xef4f, 0x0, 0x1);
        gbc.writeMem(0x8f6a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x827);
        EXPECT(gbc.pc(), 0x8f6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f6a), 0xcb);
        EXPECT(gbc.readMem(0x8f6b), 0xf1);
        // CB F1 0008
        gbc.setState(0xcc81, 0xc00f, 0x3450, 0x6cf6, 0xb381, 0x6e7b, 0x0, 0x1);
        gbc.writeMem(0xcc81, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xc00f);
        EXPECT(gbc.pc(), 0xcc83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc81), 0xcb);
        EXPECT(gbc.readMem(0xcc82), 0xf1);
        // CB F1 0009
        gbc.setState(0x49fe, 0x9a97, 0xb2b0, 0xaec2, 0xf02b, 0xb799, 0x0, 0x1);
        gbc.writeMem(0x49fe, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x9a97);
        EXPECT(gbc.pc(), 0x4a00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 000A
        gbc.setState(0x6b1e, 0xc0b5, 0x4350, 0x8b27, 0xd64b, 0xbd89, 0x0, 0x1);
        gbc.writeMem(0x6b1e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc0b5);
        EXPECT(gbc.pc(), 0x6b20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 000B
        gbc.setState(0x402a, 0xfddb, 0x8470, 0x44d9, 0x9e13, 0xc281, 0x1, 0x0);
        gbc.writeMem(0x402a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xfddb);
        EXPECT(gbc.pc(), 0x402c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 000C
        gbc.setState(0x9c43, 0x3b14, 0xb850, 0xde42, 0xc31d, 0xd7c6, 0x0, 0x0);
        gbc.writeMem(0x9c43, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x3b14);
        EXPECT(gbc.pc(), 0x9c45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c43), 0xcb);
        EXPECT(gbc.readMem(0x9c44), 0xf1);
        // CB F1 000D
        gbc.setState(0xbd29, 0xc1a1, 0x7070, 0x9caa, 0x59a9, 0xac5f, 0x0, 0x0);
        gbc.writeMem(0xbd29, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xc1a1);
        EXPECT(gbc.pc(), 0xbd2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd29), 0xcb);
        EXPECT(gbc.readMem(0xbd2a), 0xf1);
        // CB F1 000E
        gbc.setState(0x55dd, 0xd4bb, 0xbf70, 0x6727, 0x7e90, 0x9471, 0x0, 0x1);
        gbc.writeMem(0x55dd, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xd4bb);
        EXPECT(gbc.pc(), 0x55df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 000F
        gbc.setState(0xce1e, 0xc1ca, 0x9400, 0x735d, 0x6158, 0xf17, 0x1, 0x1);
        gbc.writeMem(0xce1e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xc1ca);
        EXPECT(gbc.pc(), 0xce20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce1e), 0xcb);
        EXPECT(gbc.readMem(0xce1f), 0xf1);
        // CB F1 0010
        gbc.setState(0xe424, 0x8a14, 0x54b0, 0xa6b6, 0x20c8, 0xc864, 0x1, 0x1);
        gbc.writeMem(0xe424, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x8a14);
        EXPECT(gbc.pc(), 0xe426);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe424), 0xcb);
        EXPECT(gbc.readMem(0xe425), 0xf1);
        // CB F1 0011
        gbc.setState(0x682b, 0xf327, 0xe3b0, 0x6494, 0x87b4, 0xa500, 0x0, 0x1);
        gbc.writeMem(0x682b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf327);
        EXPECT(gbc.pc(), 0x682d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0012
        gbc.setState(0x652e, 0x8381, 0xffe0, 0xe01b, 0xc66a, 0xbd5b, 0x1, 0x0);
        gbc.writeMem(0x652e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x8381);
        EXPECT(gbc.pc(), 0x6530);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0013
        gbc.setState(0x5c97, 0x7213, 0xc4b0, 0x184b, 0xd41b, 0xe7b, 0x0, 0x1);
        gbc.writeMem(0x5c97, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x7213);
        EXPECT(gbc.pc(), 0x5c99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0014
        gbc.setState(0x2518, 0x767d, 0x8d00, 0x5918, 0x5733, 0x3399, 0x0, 0x1);
        gbc.writeMem(0x2518, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x767d);
        EXPECT(gbc.pc(), 0x251a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0015
        gbc.setState(0x5850, 0x84d1, 0xce60, 0xadcf, 0xed59, 0xbf21, 0x1, 0x0);
        gbc.writeMem(0x5850, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x84d1);
        EXPECT(gbc.pc(), 0x5852);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0016
        gbc.setState(0x1bc2, 0x4b65, 0xed90, 0x8760, 0xc232, 0x5f6a, 0x0, 0x0);
        gbc.writeMem(0x1bc2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x4b65);
        EXPECT(gbc.pc(), 0x1bc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0018
        gbc.setState(0x30ed, 0xd664, 0x8120, 0xdb9, 0x2534, 0xe68f, 0x1, 0x1);
        gbc.writeMem(0x30ed, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xd664);
        EXPECT(gbc.pc(), 0x30ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0019
        gbc.setState(0x3146, 0x2a59, 0xfb80, 0x1777, 0x969b, 0x2ee3, 0x1, 0x1);
        gbc.writeMem(0x3146, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x2a59);
        EXPECT(gbc.pc(), 0x3148);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 001A
        gbc.setState(0xcff2, 0x7bb0, 0xbe00, 0xd51f, 0xf07c, 0x6a26, 0x0, 0x1);
        gbc.writeMem(0xcff2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x7bb0);
        EXPECT(gbc.pc(), 0xcff4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcff2), 0xcb);
        EXPECT(gbc.readMem(0xcff3), 0xf1);
        // CB F1 001B
        gbc.setState(0x325a, 0xe7cd, 0x3760, 0x77b6, 0x97a9, 0x574e, 0x1, 0x1);
        gbc.writeMem(0x325a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xe7cd);
        EXPECT(gbc.pc(), 0x325c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 001C
        gbc.setState(0x4c4d, 0x1b42, 0xf5c0, 0x1a51, 0x9060, 0x6e26, 0x0, 0x1);
        gbc.writeMem(0x4c4d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x1b42);
        EXPECT(gbc.pc(), 0x4c4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 001D
        gbc.setState(0xb8e0, 0xfc26, 0x1330, 0x6a08, 0x46d7, 0x2ad1, 0x1, 0x1);
        gbc.writeMem(0xb8e0, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xfc26);
        EXPECT(gbc.pc(), 0xb8e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8e0), 0xcb);
        EXPECT(gbc.readMem(0xb8e1), 0xf1);
        // CB F1 001E
        gbc.setState(0xec08, 0x2f22, 0xa2b0, 0x4e4d, 0x2ef1, 0x4e05, 0x1, 0x1);
        gbc.writeMem(0xec08, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x2f22);
        EXPECT(gbc.pc(), 0xec0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec08), 0xcb);
        EXPECT(gbc.readMem(0xec09), 0xf1);
        // CB F1 001F
        gbc.setState(0xe59a, 0xed63, 0xebe0, 0x5c9d, 0xbc2c, 0x9d07, 0x1, 0x0);
        gbc.writeMem(0xe59a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xed63);
        EXPECT(gbc.pc(), 0xe59c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe59a), 0xcb);
        EXPECT(gbc.readMem(0xe59b), 0xf1);
        // CB F1 0020
        gbc.setState(0xeaa9, 0x64be, 0x94d0, 0x2a4, 0x48f9, 0x4b1a, 0x1, 0x1);
        gbc.writeMem(0xeaa9, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x64be);
        EXPECT(gbc.pc(), 0xeaab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeaa9), 0xcb);
        EXPECT(gbc.readMem(0xeaaa), 0xf1);
        // CB F1 0021
        gbc.setState(0x99c1, 0xb5a7, 0x9360, 0xaad5, 0x6d69, 0xcb0c, 0x1, 0x1);
        gbc.writeMem(0x99c1, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xb5a7);
        EXPECT(gbc.pc(), 0x99c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99c1), 0xcb);
        EXPECT(gbc.readMem(0x99c2), 0xf1);
        // CB F1 0022
        gbc.setState(0x86dd, 0x1bfe, 0x9f20, 0x7efa, 0xa30d, 0x4744, 0x0, 0x1);
        gbc.writeMem(0x86dd, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x1bfe);
        EXPECT(gbc.pc(), 0x86df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86dd), 0xcb);
        EXPECT(gbc.readMem(0x86de), 0xf1);
        // CB F1 0023
        gbc.setState(0x6b59, 0xc6a4, 0x5bf0, 0x481e, 0xd752, 0x585e, 0x0, 0x1);
        gbc.writeMem(0x6b59, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xc6a4);
        EXPECT(gbc.pc(), 0x6b5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0024
        gbc.setState(0x1def, 0x7d8e, 0xe6b0, 0xaf23, 0xd40d, 0xd924, 0x1, 0x0);
        gbc.writeMem(0x1def, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x7d8e);
        EXPECT(gbc.pc(), 0x1df1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0025
        gbc.setState(0x29f8, 0x587a, 0x1f70, 0xa59f, 0x29c7, 0x1ff6, 0x1, 0x0);
        gbc.writeMem(0x29f8, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x587a);
        EXPECT(gbc.pc(), 0x29fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0026
        gbc.setState(0xa9c2, 0x3a72, 0xed40, 0x9091, 0xb608, 0x3b95, 0x1, 0x0);
        gbc.writeMem(0xa9c2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x3a72);
        EXPECT(gbc.pc(), 0xa9c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9c2), 0xcb);
        EXPECT(gbc.readMem(0xa9c3), 0xf1);
        // CB F1 0027
        gbc.setState(0x6535, 0x344e, 0x45f0, 0x7d8f, 0x51cc, 0x6e7b, 0x0, 0x0);
        gbc.writeMem(0x6535, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x344e);
        EXPECT(gbc.pc(), 0x6537);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0028
        gbc.setState(0x57bf, 0x84f6, 0x4c50, 0xa8f2, 0xdbd8, 0xe1e0, 0x0, 0x0);
        gbc.writeMem(0x57bf, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x84f6);
        EXPECT(gbc.pc(), 0x57c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0029
        gbc.setState(0x7f33, 0xe213, 0x39e0, 0xbf9a, 0xd4eb, 0x5cb4, 0x1, 0x1);
        gbc.writeMem(0x7f33, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xe213);
        EXPECT(gbc.pc(), 0x7f35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 002A
        gbc.setState(0xa480, 0xc52a, 0x4540, 0xbc89, 0x6260, 0xa00a, 0x0, 0x0);
        gbc.writeMem(0xa480, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xc52a);
        EXPECT(gbc.pc(), 0xa482);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa480), 0xcb);
        EXPECT(gbc.readMem(0xa481), 0xf1);
        // CB F1 002B
        gbc.setState(0x5c1f, 0x32d4, 0xcc30, 0xa502, 0xcb97, 0xc798, 0x0, 0x0);
        gbc.writeMem(0x5c1f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x32d4);
        EXPECT(gbc.pc(), 0x5c21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 002C
        gbc.setState(0x1cd2, 0xb021, 0x5db0, 0xd06c, 0xbbcf, 0x3432, 0x1, 0x1);
        gbc.writeMem(0x1cd2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xb021);
        EXPECT(gbc.pc(), 0x1cd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 002D
        gbc.setState(0xbc90, 0xf724, 0x7a20, 0x395a, 0x90d8, 0x533f, 0x1, 0x0);
        gbc.writeMem(0xbc90, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xf724);
        EXPECT(gbc.pc(), 0xbc92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc90), 0xcb);
        EXPECT(gbc.readMem(0xbc91), 0xf1);
        // CB F1 002E
        gbc.setState(0xb3b, 0x84ff, 0x6ff0, 0x91ab, 0xbd28, 0x2619, 0x1, 0x0);
        gbc.writeMem(0xb3b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x84ff);
        EXPECT(gbc.pc(), 0xb3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 002F
        gbc.setState(0xe03d, 0xdb32, 0x2df0, 0xb2d4, 0x4ce9, 0xd6f9, 0x1, 0x0);
        gbc.writeMem(0xe03d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xdb32);
        EXPECT(gbc.pc(), 0xe03f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe03d), 0xcb);
        EXPECT(gbc.readMem(0xe03e), 0xf1);
        // CB F1 0030
        gbc.setState(0xdd83, 0x238c, 0x5cf0, 0xb467, 0x4f85, 0xa255, 0x0, 0x0);
        gbc.writeMem(0xdd83, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x238c);
        EXPECT(gbc.pc(), 0xdd85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd83), 0xcb);
        EXPECT(gbc.readMem(0xdd84), 0xf1);
        // CB F1 0031
        gbc.setState(0x639a, 0xd503, 0xfff0, 0x6410, 0x837d, 0xc17a, 0x0, 0x0);
        gbc.writeMem(0x639a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xd503);
        EXPECT(gbc.pc(), 0x639c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0032
        gbc.setState(0x2200, 0x556a, 0x8c80, 0x6eab, 0x812a, 0x1a06, 0x0, 0x1);
        gbc.writeMem(0x2200, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x556a);
        EXPECT(gbc.pc(), 0x2202);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0033
        gbc.setState(0x7126, 0x2cb3, 0x2210, 0x7953, 0x3c22, 0xf825, 0x1, 0x1);
        gbc.writeMem(0x7126, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x2cb3);
        EXPECT(gbc.pc(), 0x7128);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0034
        gbc.setState(0x8217, 0x3f17, 0x44d0, 0x6c7a, 0x1fff, 0x29bb, 0x0, 0x0);
        gbc.writeMem(0x8217, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x3f17);
        EXPECT(gbc.pc(), 0x8219);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8217), 0xcb);
        EXPECT(gbc.readMem(0x8218), 0xf1);
        // CB F1 0035
        gbc.setState(0x6ebd, 0xa00c, 0x2110, 0xf2da, 0x584a, 0x48b2, 0x1, 0x1);
        gbc.writeMem(0x6ebd, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xa00c);
        EXPECT(gbc.pc(), 0x6ebf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0036
        gbc.setState(0x3ad1, 0x8a75, 0x9010, 0x6f62, 0x65f1, 0x4887, 0x0, 0x0);
        gbc.writeMem(0x3ad1, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x8a75);
        EXPECT(gbc.pc(), 0x3ad3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0038
        gbc.setState(0xcc88, 0x3f15, 0x7250, 0x5623, 0x1650, 0x63d6, 0x1, 0x0);
        gbc.writeMem(0xcc88, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x3f15);
        EXPECT(gbc.pc(), 0xcc8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc88), 0xcb);
        EXPECT(gbc.readMem(0xcc89), 0xf1);
        // CB F1 003A
        gbc.setState(0xe465, 0xaf, 0xa730, 0xf873, 0x4996, 0x45d7, 0x1, 0x0);
        gbc.writeMem(0xe465, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xaf);
        EXPECT(gbc.pc(), 0xe467);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe465), 0xcb);
        EXPECT(gbc.readMem(0xe466), 0xf1);
        // CB F1 003B
        gbc.setState(0x3ea7, 0xc425, 0xf9f0, 0x3bc0, 0x292b, 0xc5c4, 0x0, 0x1);
        gbc.writeMem(0x3ea7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xc425);
        EXPECT(gbc.pc(), 0x3ea9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 003C
        gbc.setState(0x787b, 0xa5d2, 0x860, 0xeb7c, 0x9295, 0x8894, 0x0, 0x1);
        gbc.writeMem(0x787b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xa5d2);
        EXPECT(gbc.pc(), 0x787d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 003D
        gbc.setState(0x4b6b, 0xd685, 0x55c0, 0xeccc, 0xbed3, 0xaaea, 0x1, 0x1);
        gbc.writeMem(0x4b6b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd685);
        EXPECT(gbc.pc(), 0x4b6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 003E
        gbc.setState(0xeca1, 0x6480, 0xf680, 0x2f7c, 0x7f13, 0xe4a5, 0x1, 0x1);
        gbc.writeMem(0xeca1, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x6480);
        EXPECT(gbc.pc(), 0xeca3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeca1), 0xcb);
        EXPECT(gbc.readMem(0xeca2), 0xf1);
        // CB F1 003F
        gbc.setState(0xcac4, 0x2ed1, 0x67e0, 0x3951, 0x4796, 0x6631, 0x0, 0x0);
        gbc.writeMem(0xcac4, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x2ed1);
        EXPECT(gbc.pc(), 0xcac6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcac4), 0xcb);
        EXPECT(gbc.readMem(0xcac5), 0xf1);
        // CB F1 0040
        gbc.setState(0x4f6a, 0x11a0, 0x380, 0xd75, 0xf483, 0x615b, 0x0, 0x1);
        gbc.writeMem(0x4f6a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x11a0);
        EXPECT(gbc.pc(), 0x4f6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0041
        gbc.setState(0x7452, 0xaea1, 0x8d40, 0x5064, 0xbe0a, 0x62cd, 0x1, 0x1);
        gbc.writeMem(0x7452, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xaea1);
        EXPECT(gbc.pc(), 0x7454);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0042
        gbc.setState(0x10b7, 0x6290, 0xd480, 0x98c8, 0xb2d, 0x123a, 0x0, 0x1);
        gbc.writeMem(0x10b7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x6290);
        EXPECT(gbc.pc(), 0x10b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0043
        gbc.setState(0xe921, 0x34db, 0x44e0, 0x9091, 0x19ef, 0x5448, 0x0, 0x0);
        gbc.writeMem(0xe921, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x34db);
        EXPECT(gbc.pc(), 0xe923);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe921), 0xcb);
        EXPECT(gbc.readMem(0xe922), 0xf1);
        // CB F1 0044
        gbc.setState(0xd218, 0x2168, 0x15b0, 0x707f, 0xc6b0, 0xbc7a, 0x1, 0x1);
        gbc.writeMem(0xd218, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x2168);
        EXPECT(gbc.pc(), 0xd21a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd218), 0xcb);
        EXPECT(gbc.readMem(0xd219), 0xf1);
        // CB F1 0045
        gbc.setState(0xd276, 0x50b7, 0xe3f0, 0x3d0, 0x5bc3, 0xe874, 0x1, 0x1);
        gbc.writeMem(0xd276, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x50b7);
        EXPECT(gbc.pc(), 0xd278);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd276), 0xcb);
        EXPECT(gbc.readMem(0xd277), 0xf1);
        // CB F1 0046
        gbc.setState(0x43b4, 0xe7ca, 0xd860, 0xf22, 0x371, 0x2c34, 0x0, 0x0);
        gbc.writeMem(0x43b4, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xe7ca);
        EXPECT(gbc.pc(), 0x43b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0047
        gbc.setState(0xb38b, 0x90c3, 0xb830, 0xfce4, 0x1d23, 0xaaf4, 0x1, 0x0);
        gbc.writeMem(0xb38b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x90c3);
        EXPECT(gbc.pc(), 0xb38d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb38b), 0xcb);
        EXPECT(gbc.readMem(0xb38c), 0xf1);
        // CB F1 0048
        gbc.setState(0xc206, 0x3efb, 0x2850, 0xe3c6, 0x9eee, 0x251, 0x1, 0x0);
        gbc.writeMem(0xc206, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x3efb);
        EXPECT(gbc.pc(), 0xc208);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc206), 0xcb);
        EXPECT(gbc.readMem(0xc207), 0xf1);
        // CB F1 0049
        gbc.setState(0x4460, 0x7528, 0xfe50, 0xb9e7, 0x9e8f, 0xaa1b, 0x1, 0x1);
        gbc.writeMem(0x4460, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x7528);
        EXPECT(gbc.pc(), 0x4462);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 004A
        gbc.setState(0x421e, 0x2715, 0xd180, 0xfb99, 0x6200, 0x8f77, 0x1, 0x1);
        gbc.writeMem(0x421e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x2715);
        EXPECT(gbc.pc(), 0x4220);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 004B
        gbc.setState(0x4204, 0xc69f, 0x8740, 0x5134, 0x9ce6, 0x95a, 0x0, 0x1);
        gbc.writeMem(0x4204, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xc69f);
        EXPECT(gbc.pc(), 0x4206);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 004C
        gbc.setState(0x2a39, 0xd4fd, 0x74a0, 0x1e6f, 0xddf6, 0x16c8, 0x1, 0x0);
        gbc.writeMem(0x2a39, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xd4fd);
        EXPECT(gbc.pc(), 0x2a3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 004D
        gbc.setState(0xb97, 0xec33, 0x9f30, 0x96c, 0x3378, 0x7baa, 0x1, 0x1);
        gbc.writeMem(0xb97, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xec33);
        EXPECT(gbc.pc(), 0xb99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 004E
        gbc.setState(0xe055, 0x5b5d, 0x8cb0, 0x80c2, 0xd115, 0xe6b1, 0x0, 0x1);
        gbc.writeMem(0xe055, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x5b5d);
        EXPECT(gbc.pc(), 0xe057);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe055), 0xcb);
        EXPECT(gbc.readMem(0xe056), 0xf1);
        // CB F1 004F
        gbc.setState(0xc6a0, 0x3e96, 0x48a0, 0x22c2, 0x721d, 0xbfda, 0x1, 0x1);
        gbc.writeMem(0xc6a0, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x3e96);
        EXPECT(gbc.pc(), 0xc6a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6a0), 0xcb);
        EXPECT(gbc.readMem(0xc6a1), 0xf1);
        // CB F1 0050
        gbc.setState(0xd2af, 0x90b7, 0x7fb0, 0x34b6, 0xcd48, 0x8ed, 0x1, 0x0);
        gbc.writeMem(0xd2af, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x90b7);
        EXPECT(gbc.pc(), 0xd2b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2af), 0xcb);
        EXPECT(gbc.readMem(0xd2b0), 0xf1);
        // CB F1 0051
        gbc.setState(0x21c5, 0x206c, 0xbf40, 0x50d, 0x5de6, 0xcb70, 0x1, 0x1);
        gbc.writeMem(0x21c5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x206c);
        EXPECT(gbc.pc(), 0x21c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0052
        gbc.setState(0xae7c, 0x528f, 0xbb70, 0x2a2d, 0xa0c2, 0xfa9e, 0x1, 0x0);
        gbc.writeMem(0xae7c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x528f);
        EXPECT(gbc.pc(), 0xae7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae7c), 0xcb);
        EXPECT(gbc.readMem(0xae7d), 0xf1);
        // CB F1 0053
        gbc.setState(0x9985, 0x8ad7, 0x1130, 0xc13c, 0x691d, 0xe6ab, 0x0, 0x1);
        gbc.writeMem(0x9985, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x8ad7);
        EXPECT(gbc.pc(), 0x9987);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9985), 0xcb);
        EXPECT(gbc.readMem(0x9986), 0xf1);
        // CB F1 0054
        gbc.setState(0x8d55, 0xabed, 0x3bb0, 0xe9ad, 0x2c08, 0xa794, 0x0, 0x1);
        gbc.writeMem(0x8d55, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xabed);
        EXPECT(gbc.pc(), 0x8d57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d55), 0xcb);
        EXPECT(gbc.readMem(0x8d56), 0xf1);
        // CB F1 0055
        gbc.setState(0xa2b4, 0xc6f3, 0x7330, 0x2925, 0x676f, 0x144b, 0x0, 0x0);
        gbc.writeMem(0xa2b4, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xc6f3);
        EXPECT(gbc.pc(), 0xa2b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2b4), 0xcb);
        EXPECT(gbc.readMem(0xa2b5), 0xf1);
        // CB F1 0056
        gbc.setState(0x87e8, 0x5f67, 0xce00, 0xc259, 0xbfa3, 0x28cf, 0x1, 0x0);
        gbc.writeMem(0x87e8, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x5f67);
        EXPECT(gbc.pc(), 0x87ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87e8), 0xcb);
        EXPECT(gbc.readMem(0x87e9), 0xf1);
        // CB F1 0057
        gbc.setState(0x33a7, 0x6dd, 0xf7e0, 0xcfd4, 0x41c8, 0xe621, 0x1, 0x1);
        gbc.writeMem(0x33a7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x6dd);
        EXPECT(gbc.pc(), 0x33a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0058
        gbc.setState(0x4424, 0xca96, 0x4510, 0x3c54, 0x584, 0xd26f, 0x0, 0x0);
        gbc.writeMem(0x4424, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xca96);
        EXPECT(gbc.pc(), 0x4426);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0059
        gbc.setState(0x384c, 0xcfd5, 0x5b80, 0x268, 0xae65, 0xec90, 0x0, 0x0);
        gbc.writeMem(0x384c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xcfd5);
        EXPECT(gbc.pc(), 0x384e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 005A
        gbc.setState(0xa382, 0xefa6, 0x34d0, 0x7ee4, 0x4a84, 0xf13e, 0x0, 0x1);
        gbc.writeMem(0xa382, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xefa6);
        EXPECT(gbc.pc(), 0xa384);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa382), 0xcb);
        EXPECT(gbc.readMem(0xa383), 0xf1);
        // CB F1 005B
        gbc.setState(0x5e2e, 0x3e82, 0xe8f0, 0xa610, 0x30a3, 0x5b7d, 0x1, 0x1);
        gbc.writeMem(0x5e2e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x3e82);
        EXPECT(gbc.pc(), 0x5e30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 005C
        gbc.setState(0x7928, 0x10de, 0xbd30, 0x451, 0x8cb5, 0x613b, 0x0, 0x0);
        gbc.writeMem(0x7928, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x10de);
        EXPECT(gbc.pc(), 0x792a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 005D
        gbc.setState(0x6e0d, 0x5128, 0x3930, 0x2f84, 0x3a4f, 0xf51b, 0x0, 0x1);
        gbc.writeMem(0x6e0d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x5128);
        EXPECT(gbc.pc(), 0x6e0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 005E
        gbc.setState(0xdd8c, 0x2e10, 0x8020, 0xf6b7, 0x5853, 0x8476, 0x1, 0x0);
        gbc.writeMem(0xdd8c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x2e10);
        EXPECT(gbc.pc(), 0xdd8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd8c), 0xcb);
        EXPECT(gbc.readMem(0xdd8d), 0xf1);
        // CB F1 005F
        gbc.setState(0x2b0c, 0x85d3, 0xf620, 0x7f0e, 0xf8a8, 0xb637, 0x0, 0x1);
        gbc.writeMem(0x2b0c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x85d3);
        EXPECT(gbc.pc(), 0x2b0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0060
        gbc.setState(0x7eb7, 0x37b3, 0x4300, 0xc958, 0x87a3, 0x1722, 0x0, 0x1);
        gbc.writeMem(0x7eb7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x37b3);
        EXPECT(gbc.pc(), 0x7eb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0061
        gbc.setState(0x15fc, 0x6c01, 0x3c30, 0xfbf8, 0x95a4, 0x597f, 0x1, 0x1);
        gbc.writeMem(0x15fc, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x6c01);
        EXPECT(gbc.pc(), 0x15fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0062
        gbc.setState(0x290f, 0xbd97, 0xac40, 0x697a, 0x4009, 0x89bd, 0x0, 0x0);
        gbc.writeMem(0x290f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xbd97);
        EXPECT(gbc.pc(), 0x2911);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0063
        gbc.setState(0xba69, 0x271a, 0x4c10, 0x609b, 0xdb7c, 0x23ac, 0x0, 0x0);
        gbc.writeMem(0xba69, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x271a);
        EXPECT(gbc.pc(), 0xba6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba69), 0xcb);
        EXPECT(gbc.readMem(0xba6a), 0xf1);
        // CB F1 0064
        gbc.setState(0x3810, 0xa02d, 0xc3a0, 0x271a, 0xbcc7, 0x5169, 0x0, 0x1);
        gbc.writeMem(0x3810, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xa02d);
        EXPECT(gbc.pc(), 0x3812);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0065
        gbc.setState(0xd581, 0x78d2, 0x6910, 0xadbc, 0x4234, 0x154b, 0x1, 0x1);
        gbc.writeMem(0xd581, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x78d2);
        EXPECT(gbc.pc(), 0xd583);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd581), 0xcb);
        EXPECT(gbc.readMem(0xd582), 0xf1);
        // CB F1 0066
        gbc.setState(0x8bff, 0xdd2e, 0x3980, 0xbe03, 0x2d0e, 0xa48d, 0x0, 0x1);
        gbc.writeMem(0x8bff, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xdd2e);
        EXPECT(gbc.pc(), 0x8c01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bff), 0xcb);
        EXPECT(gbc.readMem(0x8c00), 0xf1);
        // CB F1 0067
        gbc.setState(0x8284, 0xde73, 0xa5c0, 0x7919, 0xf6c5, 0xaf4a, 0x0, 0x1);
        gbc.writeMem(0x8284, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xde73);
        EXPECT(gbc.pc(), 0x8286);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8284), 0xcb);
        EXPECT(gbc.readMem(0x8285), 0xf1);
        // CB F1 0068
        gbc.setState(0x67a, 0x49ff, 0x960, 0x1738, 0x89bf, 0xbf5, 0x1, 0x1);
        gbc.writeMem(0x67a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x49ff);
        EXPECT(gbc.pc(), 0x67c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0069
        gbc.setState(0x668d, 0xd62c, 0x1280, 0xde42, 0xfcb3, 0x1bcf, 0x1, 0x0);
        gbc.writeMem(0x668d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xd62c);
        EXPECT(gbc.pc(), 0x668f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 006A
        gbc.setState(0x455c, 0xc9a6, 0x9d80, 0xb514, 0xd523, 0x82d8, 0x0, 0x1);
        gbc.writeMem(0x455c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xc9a6);
        EXPECT(gbc.pc(), 0x455e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 006B
        gbc.setState(0x9085, 0x429f, 0xdd0, 0x683f, 0x40b0, 0x50cd, 0x1, 0x0);
        gbc.writeMem(0x9085, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x429f);
        EXPECT(gbc.pc(), 0x9087);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9085), 0xcb);
        EXPECT(gbc.readMem(0x9086), 0xf1);
        // CB F1 006C
        gbc.setState(0x116d, 0x82e4, 0xd2f0, 0x191d, 0x7f9f, 0x2c6c, 0x1, 0x1);
        gbc.writeMem(0x116d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x82e4);
        EXPECT(gbc.pc(), 0x116f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 006D
        gbc.setState(0x3f1e, 0xd417, 0x5940, 0x2b38, 0x50a3, 0x92ae, 0x1, 0x0);
        gbc.writeMem(0x3f1e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xd417);
        EXPECT(gbc.pc(), 0x3f20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 006E
        gbc.setState(0x6edd, 0x64cf, 0x5650, 0x6edc, 0x3cee, 0x5d5a, 0x0, 0x0);
        gbc.writeMem(0x6edd, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x64cf);
        EXPECT(gbc.pc(), 0x6edf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 006F
        gbc.setState(0xdb1f, 0xb8c, 0x10d0, 0xeebd, 0xff2b, 0x653d, 0x1, 0x0);
        gbc.writeMem(0xdb1f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xb8c);
        EXPECT(gbc.pc(), 0xdb21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb1f), 0xcb);
        EXPECT(gbc.readMem(0xdb20), 0xf1);
        // CB F1 0070
        gbc.setState(0x70de, 0x99f2, 0xfca0, 0x3089, 0x54cc, 0x77e0, 0x1, 0x0);
        gbc.writeMem(0x70de, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x99f2);
        EXPECT(gbc.pc(), 0x70e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0071
        gbc.setState(0x4d8e, 0xe6ae, 0xf8e0, 0xe06c, 0xd745, 0x2b36, 0x0, 0x0);
        gbc.writeMem(0x4d8e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xe6ae);
        EXPECT(gbc.pc(), 0x4d90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0072
        gbc.setState(0x1caa, 0x581, 0xcb20, 0xbc54, 0xb174, 0xdc3f, 0x1, 0x1);
        gbc.writeMem(0x1caa, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x581);
        EXPECT(gbc.pc(), 0x1cac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0074
        gbc.setState(0x9cf3, 0x82d0, 0xcc0, 0x818c, 0x940c, 0x58d2, 0x0, 0x1);
        gbc.writeMem(0x9cf3, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x82d0);
        EXPECT(gbc.pc(), 0x9cf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cf3), 0xcb);
        EXPECT(gbc.readMem(0x9cf4), 0xf1);
        // CB F1 0075
        gbc.setState(0xe289, 0x95e8, 0x7d00, 0xba26, 0x4358, 0xeb82, 0x1, 0x0);
        gbc.writeMem(0xe289, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x95e8);
        EXPECT(gbc.pc(), 0xe28b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe289), 0xcb);
        EXPECT(gbc.readMem(0xe28a), 0xf1);
        // CB F1 0076
        gbc.setState(0x1b41, 0xcc52, 0x6a40, 0x1335, 0xdb45, 0xf01b, 0x0, 0x0);
        gbc.writeMem(0x1b41, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xcc52);
        EXPECT(gbc.pc(), 0x1b43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0077
        gbc.setState(0x706f, 0x544b, 0xec00, 0xc773, 0x912d, 0x9585, 0x0, 0x0);
        gbc.writeMem(0x706f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x544b);
        EXPECT(gbc.pc(), 0x7071);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0078
        gbc.setState(0x3fda, 0x7fe9, 0x1380, 0x210f, 0x3307, 0xbfb2, 0x1, 0x0);
        gbc.writeMem(0x3fda, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x7fe9);
        EXPECT(gbc.pc(), 0x3fdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0079
        gbc.setState(0x89df, 0x55a7, 0x9320, 0x4d16, 0x1ca8, 0x947d, 0x1, 0x0);
        gbc.writeMem(0x89df, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x55a7);
        EXPECT(gbc.pc(), 0x89e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89df), 0xcb);
        EXPECT(gbc.readMem(0x89e0), 0xf1);
        // CB F1 007A
        gbc.setState(0x4e85, 0x7014, 0xba60, 0x15a3, 0x100c, 0x3067, 0x0, 0x1);
        gbc.writeMem(0x4e85, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x7014);
        EXPECT(gbc.pc(), 0x4e87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 007B
        gbc.setState(0xe3eb, 0x7c5b, 0x3760, 0x7a3d, 0x405, 0x6594, 0x1, 0x1);
        gbc.writeMem(0xe3eb, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x7c5b);
        EXPECT(gbc.pc(), 0xe3ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3eb), 0xcb);
        EXPECT(gbc.readMem(0xe3ec), 0xf1);
        // CB F1 007C
        gbc.setState(0xd684, 0xe892, 0xe6e0, 0x5a69, 0x2ac8, 0x8a17, 0x0, 0x0);
        gbc.writeMem(0xd684, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xe892);
        EXPECT(gbc.pc(), 0xd686);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd684), 0xcb);
        EXPECT(gbc.readMem(0xd685), 0xf1);
        // CB F1 007D
        gbc.setState(0x946b, 0x94fa, 0xaa00, 0xad39, 0xf571, 0x3fe1, 0x1, 0x0);
        gbc.writeMem(0x946b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x94fa);
        EXPECT(gbc.pc(), 0x946d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x946b), 0xcb);
        EXPECT(gbc.readMem(0x946c), 0xf1);
        // CB F1 007F
        gbc.setState(0x3eec, 0xb6bf, 0x9ce0, 0x1c53, 0xf1cc, 0x6406, 0x0, 0x0);
        gbc.writeMem(0x3eec, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xb6bf);
        EXPECT(gbc.pc(), 0x3eee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0080
        gbc.setState(0xa9a7, 0x490f, 0x1050, 0x32fc, 0x4347, 0x3e3e, 0x0, 0x1);
        gbc.writeMem(0xa9a7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x490f);
        EXPECT(gbc.pc(), 0xa9a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9a7), 0xcb);
        EXPECT(gbc.readMem(0xa9a8), 0xf1);
        // CB F1 0081
        gbc.setState(0x3f56, 0x9fe1, 0xe560, 0xe217, 0x8cca, 0x6629, 0x0, 0x0);
        gbc.writeMem(0x3f56, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x9fe1);
        EXPECT(gbc.pc(), 0x3f58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0082
        gbc.setState(0x355b, 0x1600, 0x6300, 0xf8bd, 0x888c, 0x5395, 0x0, 0x1);
        gbc.writeMem(0x355b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x1600);
        EXPECT(gbc.pc(), 0x355d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0083
        gbc.setState(0x97c7, 0xa8e2, 0xaeb0, 0x1289, 0x62b1, 0xa7a5, 0x1, 0x0);
        gbc.writeMem(0x97c7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xa8e2);
        EXPECT(gbc.pc(), 0x97c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97c7), 0xcb);
        EXPECT(gbc.readMem(0x97c8), 0xf1);
        // CB F1 0084
        gbc.setState(0x1ba0, 0xa916, 0x3280, 0xfecb, 0x2980, 0x5016, 0x0, 0x1);
        gbc.writeMem(0x1ba0, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xa916);
        EXPECT(gbc.pc(), 0x1ba2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0085
        gbc.setState(0xbfeb, 0x5382, 0x9610, 0x9e60, 0xc13, 0x964f, 0x1, 0x0);
        gbc.writeMem(0xbfeb, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x5382);
        EXPECT(gbc.pc(), 0xbfed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfeb), 0xcb);
        EXPECT(gbc.readMem(0xbfec), 0xf1);
        // CB F1 0086
        gbc.setState(0x206b, 0x276f, 0x12b0, 0x18f6, 0xc1d2, 0x4297, 0x1, 0x0);
        gbc.writeMem(0x206b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x276f);
        EXPECT(gbc.pc(), 0x206d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0087
        gbc.setState(0x70b7, 0x7cd0, 0xd920, 0xf5b6, 0x6e46, 0xf3c6, 0x0, 0x0);
        gbc.writeMem(0x70b7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x7cd0);
        EXPECT(gbc.pc(), 0x70b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0088
        gbc.setState(0xe2b4, 0x21c1, 0x2130, 0x50e4, 0x5865, 0x96a8, 0x1, 0x0);
        gbc.writeMem(0xe2b4, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x21c1);
        EXPECT(gbc.pc(), 0xe2b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2b4), 0xcb);
        EXPECT(gbc.readMem(0xe2b5), 0xf1);
        // CB F1 0089
        gbc.setState(0xae7b, 0xc460, 0x4b70, 0xd715, 0xb69, 0x2743, 0x0, 0x0);
        gbc.writeMem(0xae7b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xc460);
        EXPECT(gbc.pc(), 0xae7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae7b), 0xcb);
        EXPECT(gbc.readMem(0xae7c), 0xf1);
        // CB F1 008B
        gbc.setState(0xbed6, 0xbe40, 0xb3f0, 0xaa7e, 0xb861, 0x7e5c, 0x1, 0x1);
        gbc.writeMem(0xbed6, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xbe40);
        EXPECT(gbc.pc(), 0xbed8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbed6), 0xcb);
        EXPECT(gbc.readMem(0xbed7), 0xf1);
        // CB F1 008C
        gbc.setState(0xe9db, 0x5ce7, 0x6550, 0x2e2a, 0x5d42, 0xa800, 0x0, 0x0);
        gbc.writeMem(0xe9db, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x5ce7);
        EXPECT(gbc.pc(), 0xe9dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9db), 0xcb);
        EXPECT(gbc.readMem(0xe9dc), 0xf1);
        // CB F1 008D
        gbc.setState(0x59b, 0x6791, 0xb120, 0x50a6, 0x3e6c, 0xa3d8, 0x1, 0x1);
        gbc.writeMem(0x59b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x6791);
        EXPECT(gbc.pc(), 0x59d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 008E
        gbc.setState(0xe8b9, 0xf760, 0xf820, 0x1298, 0xe277, 0xf93d, 0x0, 0x0);
        gbc.writeMem(0xe8b9, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xf760);
        EXPECT(gbc.pc(), 0xe8bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8b9), 0xcb);
        EXPECT(gbc.readMem(0xe8ba), 0xf1);
        // CB F1 008F
        gbc.setState(0xd6b6, 0xa448, 0xa270, 0xdcb9, 0xb91e, 0x2743, 0x1, 0x1);
        gbc.writeMem(0xd6b6, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xa448);
        EXPECT(gbc.pc(), 0xd6b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6b6), 0xcb);
        EXPECT(gbc.readMem(0xd6b7), 0xf1);
        // CB F1 0090
        gbc.setState(0x5de7, 0xc177, 0x7160, 0xc8c2, 0x1fc, 0xd0b6, 0x1, 0x0);
        gbc.writeMem(0x5de7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xc177);
        EXPECT(gbc.pc(), 0x5de9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0091
        gbc.setState(0xdc11, 0x652c, 0xdbd0, 0xdede, 0xf39a, 0x677c, 0x0, 0x0);
        gbc.writeMem(0xdc11, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x652c);
        EXPECT(gbc.pc(), 0xdc13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc11), 0xcb);
        EXPECT(gbc.readMem(0xdc12), 0xf1);
        // CB F1 0093
        gbc.setState(0xafd8, 0x22, 0x4a50, 0xb68a, 0x88eb, 0xe931, 0x0, 0x0);
        gbc.writeMem(0xafd8, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x22);
        EXPECT(gbc.pc(), 0xafda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafd8), 0xcb);
        EXPECT(gbc.readMem(0xafd9), 0xf1);
        // CB F1 0094
        gbc.setState(0x7ebb, 0xa62e, 0xa3a0, 0x5e6e, 0x5cc, 0x52dc, 0x0, 0x0);
        gbc.writeMem(0x7ebb, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xa62e);
        EXPECT(gbc.pc(), 0x7ebd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0095
        gbc.setState(0xa94d, 0x40a, 0x2d50, 0x8770, 0x3c91, 0x5c55, 0x0, 0x1);
        gbc.writeMem(0xa94d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x40a);
        EXPECT(gbc.pc(), 0xa94f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa94d), 0xcb);
        EXPECT(gbc.readMem(0xa94e), 0xf1);
        // CB F1 0096
        gbc.setState(0xdc56, 0xb6c0, 0x6d00, 0xc14f, 0xf2d0, 0x10fc, 0x0, 0x0);
        gbc.writeMem(0xdc56, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xb6c0);
        EXPECT(gbc.pc(), 0xdc58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc56), 0xcb);
        EXPECT(gbc.readMem(0xdc57), 0xf1);
        // CB F1 0097
        gbc.setState(0x404f, 0x2582, 0x7250, 0xcd78, 0xfaaa, 0xb7c7, 0x1, 0x0);
        gbc.writeMem(0x404f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x2582);
        EXPECT(gbc.pc(), 0x4051);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0098
        gbc.setState(0xbafb, 0x16ed, 0xf440, 0xf002, 0xd67d, 0x11d3, 0x0, 0x1);
        gbc.writeMem(0xbafb, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x16ed);
        EXPECT(gbc.pc(), 0xbafd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbafb), 0xcb);
        EXPECT(gbc.readMem(0xbafc), 0xf1);
        // CB F1 0099
        gbc.setState(0xd01c, 0x9692, 0x7240, 0x7fcb, 0x730a, 0xad33, 0x1, 0x0);
        gbc.writeMem(0xd01c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x9692);
        EXPECT(gbc.pc(), 0xd01e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd01c), 0xcb);
        EXPECT(gbc.readMem(0xd01d), 0xf1);
        // CB F1 009A
        gbc.setState(0x4916, 0xe78b, 0x3610, 0xfdf8, 0x5d87, 0x6c93, 0x1, 0x0);
        gbc.writeMem(0x4916, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xe78b);
        EXPECT(gbc.pc(), 0x4918);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 009B
        gbc.setState(0x5137, 0xa7fd, 0x3840, 0xda4c, 0xe76f, 0x670, 0x0, 0x0);
        gbc.writeMem(0x5137, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xa7fd);
        EXPECT(gbc.pc(), 0x5139);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 009C
        gbc.setState(0xe6a3, 0x1e17, 0xe90, 0x7c57, 0x73f4, 0xec60, 0x1, 0x1);
        gbc.writeMem(0xe6a3, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x1e17);
        EXPECT(gbc.pc(), 0xe6a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6a3), 0xcb);
        EXPECT(gbc.readMem(0xe6a4), 0xf1);
        // CB F1 009D
        gbc.setState(0x1272, 0xa44, 0x2170, 0x29d2, 0x3edd, 0x2c39, 0x1, 0x0);
        gbc.writeMem(0x1272, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xa44);
        EXPECT(gbc.pc(), 0x1274);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 009E
        gbc.setState(0x27b2, 0x357, 0x72f0, 0xdf1e, 0x9271, 0xf446, 0x0, 0x0);
        gbc.writeMem(0x27b2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x357);
        EXPECT(gbc.pc(), 0x27b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00A0
        gbc.setState(0x3f21, 0xc720, 0x190, 0xd4be, 0x3549, 0xa75b, 0x0, 0x1);
        gbc.writeMem(0x3f21, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xc720);
        EXPECT(gbc.pc(), 0x3f23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00A1
        gbc.setState(0x26e5, 0x5dcc, 0xb7b0, 0x8666, 0x7f89, 0x318e, 0x1, 0x1);
        gbc.writeMem(0x26e5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x5dcc);
        EXPECT(gbc.pc(), 0x26e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00A2
        gbc.setState(0x9f7b, 0x17fe, 0xdec0, 0x4eeb, 0x1c5a, 0x6b28, 0x1, 0x1);
        gbc.writeMem(0x9f7b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x17fe);
        EXPECT(gbc.pc(), 0x9f7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f7b), 0xcb);
        EXPECT(gbc.readMem(0x9f7c), 0xf1);
        // CB F1 00A3
        gbc.setState(0xab9c, 0x6470, 0x5bf0, 0xe5e8, 0x69b1, 0xd867, 0x0, 0x1);
        gbc.writeMem(0xab9c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x6470);
        EXPECT(gbc.pc(), 0xab9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab9c), 0xcb);
        EXPECT(gbc.readMem(0xab9d), 0xf1);
        // CB F1 00A4
        gbc.setState(0x8426, 0xd442, 0x7870, 0x3fc3, 0x7a99, 0x5e8e, 0x1, 0x1);
        gbc.writeMem(0x8426, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xd442);
        EXPECT(gbc.pc(), 0x8428);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8426), 0xcb);
        EXPECT(gbc.readMem(0x8427), 0xf1);
        // CB F1 00A5
        gbc.setState(0x2163, 0x8e66, 0xd820, 0xbcae, 0x47d2, 0x1698, 0x1, 0x1);
        gbc.writeMem(0x2163, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x8e66);
        EXPECT(gbc.pc(), 0x2165);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 00A6
        gbc.setState(0x4f6e, 0xf44d, 0xd7f0, 0x65b9, 0x70d8, 0xbef5, 0x0, 0x1);
        gbc.writeMem(0x4f6e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xf44d);
        EXPECT(gbc.pc(), 0x4f70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00A7
        gbc.setState(0x344d, 0x39f1, 0xd570, 0x7307, 0xe961, 0x8c8e, 0x1, 0x1);
        gbc.writeMem(0x344d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x39f1);
        EXPECT(gbc.pc(), 0x344f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00A8
        gbc.setState(0x210f, 0xb752, 0x90c0, 0x5461, 0x8464, 0x269c, 0x0, 0x1);
        gbc.writeMem(0x210f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xb752);
        EXPECT(gbc.pc(), 0x2111);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 00A9
        gbc.setState(0xe9ad, 0x992b, 0x4c70, 0x66e3, 0xd4a8, 0x42a6, 0x0, 0x0);
        gbc.writeMem(0xe9ad, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x992b);
        EXPECT(gbc.pc(), 0xe9af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9ad), 0xcb);
        EXPECT(gbc.readMem(0xe9ae), 0xf1);
        // CB F1 00AA
        gbc.setState(0xaaaa, 0xcd55, 0x360, 0x8612, 0x76d5, 0xe110, 0x0, 0x0);
        gbc.writeMem(0xaaaa, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xcd55);
        EXPECT(gbc.pc(), 0xaaac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaaa), 0xcb);
        EXPECT(gbc.readMem(0xaaab), 0xf1);
        // CB F1 00AB
        gbc.setState(0x886f, 0x3dbf, 0xa4c0, 0x1e60, 0x7bc6, 0x5ca7, 0x0, 0x1);
        gbc.writeMem(0x886f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x3dbf);
        EXPECT(gbc.pc(), 0x8871);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x886f), 0xcb);
        EXPECT(gbc.readMem(0x8870), 0xf1);
        // CB F1 00AC
        gbc.setState(0x46d5, 0x2ac1, 0xac60, 0xede2, 0xee22, 0x787, 0x1, 0x0);
        gbc.writeMem(0x46d5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x2ac1);
        EXPECT(gbc.pc(), 0x46d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 00AD
        gbc.setState(0xab68, 0xa50f, 0xc4f0, 0x8e04, 0x5a19, 0x8800, 0x1, 0x1);
        gbc.writeMem(0xab68, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xa50f);
        EXPECT(gbc.pc(), 0xab6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab68), 0xcb);
        EXPECT(gbc.readMem(0xab69), 0xf1);
        // CB F1 00B0
        gbc.setState(0xd44a, 0xf42e, 0xda50, 0x8396, 0x8b, 0x7359, 0x1, 0x0);
        gbc.writeMem(0xd44a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xf42e);
        EXPECT(gbc.pc(), 0xd44c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd44a), 0xcb);
        EXPECT(gbc.readMem(0xd44b), 0xf1);
        // CB F1 00B1
        gbc.setState(0x9469, 0xcb08, 0xe1a0, 0xda77, 0x51dd, 0x8bf2, 0x0, 0x1);
        gbc.writeMem(0x9469, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xcb08);
        EXPECT(gbc.pc(), 0x946b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9469), 0xcb);
        EXPECT(gbc.readMem(0x946a), 0xf1);
        // CB F1 00B2
        gbc.setState(0xb5d5, 0x2edd, 0xf50, 0x33b4, 0xab35, 0xfd68, 0x1, 0x1);
        gbc.writeMem(0xb5d5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x2edd);
        EXPECT(gbc.pc(), 0xb5d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5d5), 0xcb);
        EXPECT(gbc.readMem(0xb5d6), 0xf1);
        // CB F1 00B3
        gbc.setState(0x80d1, 0x5efd, 0xce10, 0xf7a, 0x507f, 0x4e60, 0x0, 0x1);
        gbc.writeMem(0x80d1, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x5efd);
        EXPECT(gbc.pc(), 0x80d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80d1), 0xcb);
        EXPECT(gbc.readMem(0x80d2), 0xf1);
        // CB F1 00B4
        gbc.setState(0xc6e1, 0x326b, 0xe160, 0xf197, 0xe8ca, 0xad28, 0x1, 0x0);
        gbc.writeMem(0xc6e1, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x326b);
        EXPECT(gbc.pc(), 0xc6e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6e1), 0xcb);
        EXPECT(gbc.readMem(0xc6e2), 0xf1);
        // CB F1 00B5
        gbc.setState(0x99ec, 0x28dd, 0x5040, 0xdf7e, 0xee25, 0x4c8b, 0x1, 0x1);
        gbc.writeMem(0x99ec, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x28dd);
        EXPECT(gbc.pc(), 0x99ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99ec), 0xcb);
        EXPECT(gbc.readMem(0x99ed), 0xf1);
        // CB F1 00B6
        gbc.setState(0x2745, 0x89ca, 0x110, 0xec11, 0xdf1, 0xfd11, 0x0, 0x1);
        gbc.writeMem(0x2745, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x89ca);
        EXPECT(gbc.pc(), 0x2747);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00B7
        gbc.setState(0x4e2b, 0x8d19, 0xa9f0, 0xf2f1, 0xc566, 0x38ca, 0x0, 0x0);
        gbc.writeMem(0x4e2b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x8d19);
        EXPECT(gbc.pc(), 0x4e2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00B8
        gbc.setState(0x2cfe, 0x59a7, 0x6140, 0x90af, 0x6ee2, 0x673, 0x0, 0x1);
        gbc.writeMem(0x2cfe, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x59a7);
        EXPECT(gbc.pc(), 0x2d00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 00B9
        gbc.setState(0xc76, 0xa1b9, 0x88d0, 0x5162, 0xa64d, 0x5335, 0x1, 0x1);
        gbc.writeMem(0xc76, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xa1b9);
        EXPECT(gbc.pc(), 0xc78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00BA
        gbc.setState(0x6113, 0x55a5, 0x73c0, 0xb0c4, 0x9e5a, 0x8cfe, 0x0, 0x1);
        gbc.writeMem(0x6113, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x55a5);
        EXPECT(gbc.pc(), 0x6115);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 00BB
        gbc.setState(0xc803, 0x118a, 0x56a0, 0x1108, 0x7b43, 0x5ce0, 0x0, 0x1);
        gbc.writeMem(0xc803, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x118a);
        EXPECT(gbc.pc(), 0xc805);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc803), 0xcb);
        EXPECT(gbc.readMem(0xc804), 0xf1);
        // CB F1 00BC
        gbc.setState(0xc1b0, 0x8853, 0x14f0, 0x3449, 0xb2b2, 0xd1b6, 0x0, 0x1);
        gbc.writeMem(0xc1b0, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x8853);
        EXPECT(gbc.pc(), 0xc1b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1b0), 0xcb);
        EXPECT(gbc.readMem(0xc1b1), 0xf1);
        // CB F1 00BD
        gbc.setState(0xeb30, 0xf64d, 0xab90, 0xa994, 0xd680, 0x6c28, 0x1, 0x0);
        gbc.writeMem(0xeb30, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xf64d);
        EXPECT(gbc.pc(), 0xeb32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb30), 0xcb);
        EXPECT(gbc.readMem(0xeb31), 0xf1);
        // CB F1 00BE
        gbc.setState(0x8ccb, 0x4a1b, 0x5950, 0xae0c, 0x9e94, 0x3d5c, 0x1, 0x1);
        gbc.writeMem(0x8ccb, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x4a1b);
        EXPECT(gbc.pc(), 0x8ccd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ccb), 0xcb);
        EXPECT(gbc.readMem(0x8ccc), 0xf1);
        // CB F1 00BF
        gbc.setState(0x8fa6, 0x415a, 0x7df0, 0x63fb, 0x432e, 0x428d, 0x0, 0x1);
        gbc.writeMem(0x8fa6, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x415a);
        EXPECT(gbc.pc(), 0x8fa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fa6), 0xcb);
        EXPECT(gbc.readMem(0x8fa7), 0xf1);
        // CB F1 00C0
        gbc.setState(0x53e6, 0x379a, 0x30f0, 0xb927, 0x17cb, 0x692e, 0x0, 0x0);
        gbc.writeMem(0x53e6, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x379a);
        EXPECT(gbc.pc(), 0x53e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00C1
        gbc.setState(0x1bce, 0xcd37, 0x72f0, 0xb517, 0x32f2, 0xc6be, 0x1, 0x1);
        gbc.writeMem(0x1bce, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xcd37);
        EXPECT(gbc.pc(), 0x1bd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00C2
        gbc.setState(0x7a60, 0xedc7, 0xf660, 0xcd7b, 0x8570, 0x40e, 0x1, 0x1);
        gbc.writeMem(0x7a60, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xedc7);
        EXPECT(gbc.pc(), 0x7a62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 00C3
        gbc.setState(0x4029, 0x9e42, 0x4f50, 0xc9fb, 0xcfb5, 0xd992, 0x0, 0x1);
        gbc.writeMem(0x4029, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x9e42);
        EXPECT(gbc.pc(), 0x402b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00C4
        gbc.setState(0x46c5, 0x7a03, 0x26e0, 0xb91e, 0x4a7b, 0xc322, 0x1, 0x0);
        gbc.writeMem(0x46c5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x7a03);
        EXPECT(gbc.pc(), 0x46c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 00C5
        gbc.setState(0x31ef, 0xb33c, 0xa610, 0x795c, 0x2915, 0x8aa, 0x0, 0x0);
        gbc.writeMem(0x31ef, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xb33c);
        EXPECT(gbc.pc(), 0x31f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00C6
        gbc.setState(0xa24a, 0xf764, 0xcd10, 0x9290, 0x5a9f, 0x8a5e, 0x1, 0x1);
        gbc.writeMem(0xa24a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xf764);
        EXPECT(gbc.pc(), 0xa24c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa24a), 0xcb);
        EXPECT(gbc.readMem(0xa24b), 0xf1);
        // CB F1 00C7
        gbc.setState(0x2f49, 0x893c, 0xf90, 0x3f57, 0xf713, 0x7ef2, 0x0, 0x1);
        gbc.writeMem(0x2f49, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x893c);
        EXPECT(gbc.pc(), 0x2f4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00C8
        gbc.setState(0xc555, 0x5be8, 0x6360, 0x9bd6, 0xb95c, 0x1033, 0x1, 0x0);
        gbc.writeMem(0xc555, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x5be8);
        EXPECT(gbc.pc(), 0xc557);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc555), 0xcb);
        EXPECT(gbc.readMem(0xc556), 0xf1);
        // CB F1 00C9
        gbc.setState(0xbad1, 0x822a, 0xd5f0, 0x448d, 0xa8a3, 0xa647, 0x0, 0x1);
        gbc.writeMem(0xbad1, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x822a);
        EXPECT(gbc.pc(), 0xbad3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbad1), 0xcb);
        EXPECT(gbc.readMem(0xbad2), 0xf1);
        // CB F1 00CA
        gbc.setState(0x25ef, 0x8089, 0x2c30, 0xa296, 0x40ee, 0x1316, 0x1, 0x1);
        gbc.writeMem(0x25ef, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x8089);
        EXPECT(gbc.pc(), 0x25f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00CB
        gbc.setState(0x1168, 0x1468, 0x6fa0, 0xefb7, 0x7b30, 0x9e78, 0x0, 0x1);
        gbc.writeMem(0x1168, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x1468);
        EXPECT(gbc.pc(), 0x116a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 00CC
        gbc.setState(0xb3fe, 0x2d17, 0x5a10, 0x4494, 0x6c4d, 0xec09, 0x1, 0x0);
        gbc.writeMem(0xb3fe, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x2d17);
        EXPECT(gbc.pc(), 0xb400);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3fe), 0xcb);
        EXPECT(gbc.readMem(0xb3ff), 0xf1);
        // CB F1 00CD
        gbc.setState(0xa05a, 0xeabd, 0x9610, 0x6d1, 0x744f, 0xa488, 0x0, 0x1);
        gbc.writeMem(0xa05a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xeabd);
        EXPECT(gbc.pc(), 0xa05c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa05a), 0xcb);
        EXPECT(gbc.readMem(0xa05b), 0xf1);
        // CB F1 00CE
        gbc.setState(0x9e71, 0x462, 0xe130, 0x53c3, 0xe0a7, 0x2a57, 0x1, 0x0);
        gbc.writeMem(0x9e71, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x462);
        EXPECT(gbc.pc(), 0x9e73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e71), 0xcb);
        EXPECT(gbc.readMem(0x9e72), 0xf1);
        // CB F1 00CF
        gbc.setState(0x1b76, 0xf6d3, 0x95a0, 0x7da8, 0xa6b3, 0x32f5, 0x0, 0x0);
        gbc.writeMem(0x1b76, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xf6d3);
        EXPECT(gbc.pc(), 0x1b78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 00D0
        gbc.setState(0x2fd4, 0x92ea, 0xee80, 0xff96, 0x15b7, 0x2a2, 0x1, 0x1);
        gbc.writeMem(0x2fd4, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x92ea);
        EXPECT(gbc.pc(), 0x2fd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 00D1
        gbc.setState(0x9f3c, 0xf7c3, 0x7190, 0x9c37, 0x7380, 0xd898, 0x1, 0x1);
        gbc.writeMem(0x9f3c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xf7c3);
        EXPECT(gbc.pc(), 0x9f3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f3c), 0xcb);
        EXPECT(gbc.readMem(0x9f3d), 0xf1);
        // CB F1 00D2
        gbc.setState(0x3743, 0x315d, 0x2a10, 0xa97b, 0x82b1, 0x4df6, 0x1, 0x1);
        gbc.writeMem(0x3743, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x315d);
        EXPECT(gbc.pc(), 0x3745);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00D3
        gbc.setState(0xe433, 0x548c, 0xae70, 0x9303, 0xcc0a, 0xba3a, 0x1, 0x0);
        gbc.writeMem(0xe433, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x548c);
        EXPECT(gbc.pc(), 0xe435);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe433), 0xcb);
        EXPECT(gbc.readMem(0xe434), 0xf1);
        // CB F1 00D4
        gbc.setState(0xee44, 0x94e4, 0x5ec0, 0x6be2, 0xbcca, 0xb852, 0x0, 0x1);
        gbc.writeMem(0xee44, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x94e4);
        EXPECT(gbc.pc(), 0xee46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee44), 0xcb);
        EXPECT(gbc.readMem(0xee45), 0xf1);
        // CB F1 00D6
        gbc.setState(0x651e, 0x3c90, 0xe3a0, 0xe340, 0x6712, 0xc4c0, 0x0, 0x1);
        gbc.writeMem(0x651e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x3c90);
        EXPECT(gbc.pc(), 0x6520);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 00D7
        gbc.setState(0xa4f2, 0x6c02, 0x720, 0x70b2, 0x2f50, 0x5f36, 0x0, 0x1);
        gbc.writeMem(0xa4f2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x6c02);
        EXPECT(gbc.pc(), 0xa4f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4f2), 0xcb);
        EXPECT(gbc.readMem(0xa4f3), 0xf1);
        // CB F1 00D8
        gbc.setState(0xdc8f, 0x7d6c, 0xd480, 0x6a99, 0x918b, 0xdbcc, 0x0, 0x1);
        gbc.writeMem(0xdc8f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x7d6c);
        EXPECT(gbc.pc(), 0xdc91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc8f), 0xcb);
        EXPECT(gbc.readMem(0xdc90), 0xf1);
        // CB F1 00DA
        gbc.setState(0x4b31, 0x4020, 0x54f0, 0x88bf, 0x53e7, 0x98c9, 0x0, 0x0);
        gbc.writeMem(0x4b31, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x4020);
        EXPECT(gbc.pc(), 0x4b33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00DB
        gbc.setState(0xb697, 0x1e37, 0x9680, 0x10ee, 0xe0e6, 0xa1f1, 0x0, 0x1);
        gbc.writeMem(0xb697, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x1e37);
        EXPECT(gbc.pc(), 0xb699);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb697), 0xcb);
        EXPECT(gbc.readMem(0xb698), 0xf1);
        // CB F1 00DC
        gbc.setState(0x6f5f, 0x25b0, 0x3b40, 0xc3d0, 0x4d03, 0xb896, 0x0, 0x1);
        gbc.writeMem(0x6f5f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x25b0);
        EXPECT(gbc.pc(), 0x6f61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 00DD
        gbc.setState(0xbdea, 0xd82d, 0x1230, 0x2ba0, 0xdc4, 0x6017, 0x1, 0x0);
        gbc.writeMem(0xbdea, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xd82d);
        EXPECT(gbc.pc(), 0xbdec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdea), 0xcb);
        EXPECT(gbc.readMem(0xbdeb), 0xf1);
        // CB F1 00DE
        gbc.setState(0x9158, 0xf715, 0xb940, 0xe510, 0xef79, 0x6bba, 0x0, 0x0);
        gbc.writeMem(0x9158, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xf715);
        EXPECT(gbc.pc(), 0x915a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9158), 0xcb);
        EXPECT(gbc.readMem(0x9159), 0xf1);
        // CB F1 00DF
        gbc.setState(0xad19, 0xbc9b, 0xbf70, 0x8aa7, 0xc3ae, 0xe70a, 0x0, 0x1);
        gbc.writeMem(0xad19, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xbc9b);
        EXPECT(gbc.pc(), 0xad1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad19), 0xcb);
        EXPECT(gbc.readMem(0xad1a), 0xf1);
        // CB F1 00E0
        gbc.setState(0x18f9, 0xfa9f, 0x3510, 0xc572, 0xf37e, 0x5ec6, 0x0, 0x0);
        gbc.writeMem(0x18f9, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xfa9f);
        EXPECT(gbc.pc(), 0x18fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00E1
        gbc.setState(0xb3d7, 0x1c17, 0x75a0, 0x403f, 0xff41, 0xb142, 0x0, 0x0);
        gbc.writeMem(0xb3d7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x1c17);
        EXPECT(gbc.pc(), 0xb3d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3d7), 0xcb);
        EXPECT(gbc.readMem(0xb3d8), 0xf1);
        // CB F1 00E2
        gbc.setState(0x11b5, 0x1e14, 0xd270, 0x8df1, 0x26e0, 0x74ce, 0x0, 0x0);
        gbc.writeMem(0x11b5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x1e14);
        EXPECT(gbc.pc(), 0x11b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00E4
        gbc.setState(0xa763, 0x818f, 0xbfb0, 0xf379, 0x907d, 0x2fa4, 0x0, 0x1);
        gbc.writeMem(0xa763, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x818f);
        EXPECT(gbc.pc(), 0xa765);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa763), 0xcb);
        EXPECT(gbc.readMem(0xa764), 0xf1);
        // CB F1 00E5
        gbc.setState(0x945f, 0xd41a, 0x22a0, 0xe52c, 0x995e, 0x8001, 0x0, 0x1);
        gbc.writeMem(0x945f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xd41a);
        EXPECT(gbc.pc(), 0x9461);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x945f), 0xcb);
        EXPECT(gbc.readMem(0x9460), 0xf1);
        // CB F1 00E6
        gbc.setState(0xc140, 0x9c39, 0x340, 0xc1e4, 0x856b, 0xef31, 0x1, 0x0);
        gbc.writeMem(0xc140, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x9c39);
        EXPECT(gbc.pc(), 0xc142);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc140), 0xcb);
        EXPECT(gbc.readMem(0xc141), 0xf1);
        // CB F1 00E7
        gbc.setState(0x8d1c, 0x1065, 0x5900, 0x954, 0xaae2, 0x8eda, 0x1, 0x1);
        gbc.writeMem(0x8d1c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x1065);
        EXPECT(gbc.pc(), 0x8d1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d1c), 0xcb);
        EXPECT(gbc.readMem(0x8d1d), 0xf1);
        // CB F1 00E8
        gbc.setState(0x1c73, 0x6f, 0xcf20, 0x181a, 0x2bb3, 0xc3c4, 0x0, 0x1);
        gbc.writeMem(0x1c73, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x6f);
        EXPECT(gbc.pc(), 0x1c75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 00E9
        gbc.setState(0x69fe, 0x74b7, 0x1990, 0x6f1b, 0xc503, 0xd43e, 0x0, 0x0);
        gbc.writeMem(0x69fe, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x74b7);
        EXPECT(gbc.pc(), 0x6a00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00EA
        gbc.setState(0x9c47, 0xc025, 0xdf30, 0x276, 0xef03, 0x4afa, 0x0, 0x0);
        gbc.writeMem(0x9c47, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc025);
        EXPECT(gbc.pc(), 0x9c49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c47), 0xcb);
        EXPECT(gbc.readMem(0x9c48), 0xf1);
        // CB F1 00EB
        gbc.setState(0x6c9f, 0xf732, 0x97b0, 0x6b47, 0x1432, 0xa8a8, 0x0, 0x1);
        gbc.writeMem(0x6c9f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xf732);
        EXPECT(gbc.pc(), 0x6ca1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00EC
        gbc.setState(0x454a, 0xf860, 0x350, 0x92ff, 0x929b, 0xe061, 0x1, 0x1);
        gbc.writeMem(0x454a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xf860);
        EXPECT(gbc.pc(), 0x454c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00ED
        gbc.setState(0x1efc, 0x2188, 0xf530, 0xf88f, 0x6023, 0x57d8, 0x0, 0x0);
        gbc.writeMem(0x1efc, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x2188);
        EXPECT(gbc.pc(), 0x1efe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00EE
        gbc.setState(0x74aa, 0x3741, 0xcbb0, 0x7b2d, 0x1e52, 0xd88, 0x1, 0x1);
        gbc.writeMem(0x74aa, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x3741);
        EXPECT(gbc.pc(), 0x74ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00EF
        gbc.setState(0x3ddb, 0x4424, 0x5aa0, 0xd687, 0x34b4, 0x9259, 0x0, 0x0);
        gbc.writeMem(0x3ddb, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x4424);
        EXPECT(gbc.pc(), 0x3ddd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 00F0
        gbc.setState(0xa50f, 0x7f98, 0xebc0, 0x3092, 0x94ee, 0x83d6, 0x0, 0x0);
        gbc.writeMem(0xa50f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x7f98);
        EXPECT(gbc.pc(), 0xa511);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa50f), 0xcb);
        EXPECT(gbc.readMem(0xa510), 0xf1);
        // CB F1 00F2
        gbc.setState(0xa377, 0xfa60, 0x8140, 0x43a7, 0xe4c6, 0xc4d9, 0x0, 0x0);
        gbc.writeMem(0xa377, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xfa60);
        EXPECT(gbc.pc(), 0xa379);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa377), 0xcb);
        EXPECT(gbc.readMem(0xa378), 0xf1);
        // CB F1 00F3
        gbc.setState(0x7d6b, 0x44b3, 0xb730, 0x2d15, 0xfe9a, 0x7441, 0x1, 0x1);
        gbc.writeMem(0x7d6b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x44b3);
        EXPECT(gbc.pc(), 0x7d6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00F4
        gbc.setState(0x6341, 0x4614, 0xdd90, 0xf55d, 0xc397, 0x81e4, 0x1, 0x1);
        gbc.writeMem(0x6341, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x4614);
        EXPECT(gbc.pc(), 0x6343);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00F5
        gbc.setState(0x5c94, 0xc3f6, 0x930, 0x55fa, 0x2a34, 0xf1e6, 0x1, 0x1);
        gbc.writeMem(0x5c94, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xc3f6);
        EXPECT(gbc.pc(), 0x5c96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00F6
        gbc.setState(0xb617, 0x79d8, 0x4170, 0x9139, 0xf39e, 0x2a2a, 0x1, 0x1);
        gbc.writeMem(0xb617, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x79d8);
        EXPECT(gbc.pc(), 0xb619);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb617), 0xcb);
        EXPECT(gbc.readMem(0xb618), 0xf1);
        // CB F1 00F7
        gbc.setState(0xa128, 0x7c2f, 0xd390, 0x8dc6, 0x17ce, 0xb9c1, 0x1, 0x0);
        gbc.writeMem(0xa128, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x7c2f);
        EXPECT(gbc.pc(), 0xa12a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa128), 0xcb);
        EXPECT(gbc.readMem(0xa129), 0xf1);
        // CB F1 00F8
        gbc.setState(0x2e5e, 0xdc5f, 0xa780, 0xe3f5, 0x4ecf, 0x75fc, 0x1, 0x0);
        gbc.writeMem(0x2e5e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xdc5f);
        EXPECT(gbc.pc(), 0x2e60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 00F9
        gbc.setState(0xcb4c, 0xb3f3, 0xcd80, 0xfab7, 0xadd6, 0x5890, 0x1, 0x0);
        gbc.writeMem(0xcb4c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xb3f3);
        EXPECT(gbc.pc(), 0xcb4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb4c), 0xcb);
        EXPECT(gbc.readMem(0xcb4d), 0xf1);
        // CB F1 00FA
        gbc.setState(0x8a42, 0xe947, 0xed30, 0xc8c3, 0x1f91, 0x1089, 0x1, 0x0);
        gbc.writeMem(0x8a42, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xe947);
        EXPECT(gbc.pc(), 0x8a44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a42), 0xcb);
        EXPECT(gbc.readMem(0x8a43), 0xf1);
        // CB F1 00FB
        gbc.setState(0x584e, 0xbaf8, 0x7e40, 0x19dd, 0xd384, 0x88b7, 0x1, 0x0);
        gbc.writeMem(0x584e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xbaf8);
        EXPECT(gbc.pc(), 0x5850);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 00FC
        gbc.setState(0x3a08, 0x180, 0x5430, 0xadf4, 0xb2c8, 0x803d, 0x1, 0x1);
        gbc.writeMem(0x3a08, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x180);
        EXPECT(gbc.pc(), 0x3a0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00FD
        gbc.setState(0xb14, 0x4bd0, 0xaf30, 0xd2fb, 0xc683, 0xbb2d, 0x1, 0x1);
        gbc.writeMem(0xb14, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x4bd0);
        EXPECT(gbc.pc(), 0xb16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00FE
        gbc.setState(0x6f8e, 0x3c34, 0x8030, 0x351a, 0x4d6, 0xa9ae, 0x0, 0x1);
        gbc.writeMem(0x6f8e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x3c34);
        EXPECT(gbc.pc(), 0x6f90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 00FF
        gbc.setState(0x9fa1, 0x9b4d, 0xa060, 0xfc93, 0xbd7c, 0x8ee5, 0x1, 0x1);
        gbc.writeMem(0x9fa1, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x9b4d);
        EXPECT(gbc.pc(), 0x9fa3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fa1), 0xcb);
        EXPECT(gbc.readMem(0x9fa2), 0xf1);
        // CB F1 0100
        gbc.setState(0x18c3, 0x51b5, 0x1640, 0xc70, 0x473a, 0x321d, 0x1, 0x0);
        gbc.writeMem(0x18c3, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x51b5);
        EXPECT(gbc.pc(), 0x18c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0101
        gbc.setState(0x1d3f, 0xbb95, 0x1c30, 0x507, 0x7c01, 0x3647, 0x1, 0x0);
        gbc.writeMem(0x1d3f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xbb95);
        EXPECT(gbc.pc(), 0x1d41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0102
        gbc.setState(0x8b21, 0x5f9a, 0x5a90, 0xabde, 0x1880, 0x7e97, 0x1, 0x1);
        gbc.writeMem(0x8b21, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x5f9a);
        EXPECT(gbc.pc(), 0x8b23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b21), 0xcb);
        EXPECT(gbc.readMem(0x8b22), 0xf1);
        // CB F1 0103
        gbc.setState(0x6068, 0x3a06, 0x4e80, 0xe7f3, 0xbbf5, 0x129e, 0x1, 0x1);
        gbc.writeMem(0x6068, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x3a06);
        EXPECT(gbc.pc(), 0x606a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0104
        gbc.setState(0xea72, 0xcee2, 0xd350, 0x33f7, 0xd930, 0x29ce, 0x1, 0x0);
        gbc.writeMem(0xea72, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xcee2);
        EXPECT(gbc.pc(), 0xea74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea72), 0xcb);
        EXPECT(gbc.readMem(0xea73), 0xf1);
        // CB F1 0105
        gbc.setState(0xc50b, 0xeae, 0x53a0, 0x7c9c, 0x7831, 0x262d, 0x0, 0x0);
        gbc.writeMem(0xc50b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xeae);
        EXPECT(gbc.pc(), 0xc50d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc50b), 0xcb);
        EXPECT(gbc.readMem(0xc50c), 0xf1);
        // CB F1 0106
        gbc.setState(0xb20c, 0x89b2, 0xf020, 0xd56c, 0x4cbe, 0x32db, 0x0, 0x1);
        gbc.writeMem(0xb20c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x89b2);
        EXPECT(gbc.pc(), 0xb20e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb20c), 0xcb);
        EXPECT(gbc.readMem(0xb20d), 0xf1);
        // CB F1 0107
        gbc.setState(0x90e0, 0xf44, 0x8030, 0x7aa0, 0x7263, 0xff67, 0x1, 0x0);
        gbc.writeMem(0x90e0, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xf44);
        EXPECT(gbc.pc(), 0x90e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90e0), 0xcb);
        EXPECT(gbc.readMem(0x90e1), 0xf1);
        // CB F1 0108
        gbc.setState(0x9a72, 0xa74c, 0x5a00, 0x73d, 0x582d, 0xd977, 0x1, 0x0);
        gbc.writeMem(0x9a72, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xa74c);
        EXPECT(gbc.pc(), 0x9a74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a72), 0xcb);
        EXPECT(gbc.readMem(0x9a73), 0xf1);
        // CB F1 0109
        gbc.setState(0x6a8a, 0xf1cd, 0x81a0, 0x7bbc, 0x6a70, 0x5fc9, 0x1, 0x0);
        gbc.writeMem(0x6a8a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xf1cd);
        EXPECT(gbc.pc(), 0x6a8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 010A
        gbc.setState(0x9342, 0x4290, 0x50c0, 0xbcaa, 0xef9d, 0x764e, 0x0, 0x0);
        gbc.writeMem(0x9342, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x4290);
        EXPECT(gbc.pc(), 0x9344);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9342), 0xcb);
        EXPECT(gbc.readMem(0x9343), 0xf1);
        // CB F1 010B
        gbc.setState(0x6320, 0xd743, 0x2ba0, 0x871f, 0x7235, 0x655, 0x0, 0x0);
        gbc.writeMem(0x6320, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xd743);
        EXPECT(gbc.pc(), 0x6322);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 010C
        gbc.setState(0xc9c, 0x8279, 0x7b50, 0x320b, 0x8978, 0x4ce6, 0x1, 0x1);
        gbc.writeMem(0xc9c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x8279);
        EXPECT(gbc.pc(), 0xc9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 010D
        gbc.setState(0xbdf1, 0xf80a, 0xed30, 0x4db, 0x6c63, 0x9ce4, 0x0, 0x0);
        gbc.writeMem(0xbdf1, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xf80a);
        EXPECT(gbc.pc(), 0xbdf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdf1), 0xcb);
        EXPECT(gbc.readMem(0xbdf2), 0xf1);
        // CB F1 010E
        gbc.setState(0xc0cf, 0xada0, 0xb410, 0xa77c, 0x2b88, 0x472c, 0x1, 0x0);
        gbc.writeMem(0xc0cf, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xada0);
        EXPECT(gbc.pc(), 0xc0d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0cf), 0xcb);
        EXPECT(gbc.readMem(0xc0d0), 0xf1);
        // CB F1 010F
        gbc.setState(0x3673, 0xc08c, 0x2e90, 0x1fd1, 0x13d, 0xf452, 0x1, 0x1);
        gbc.writeMem(0x3673, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xc08c);
        EXPECT(gbc.pc(), 0x3675);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0111
        gbc.setState(0xbd4a, 0xb280, 0x2500, 0x7bff, 0x6487, 0xf9d4, 0x0, 0x0);
        gbc.writeMem(0xbd4a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xb280);
        EXPECT(gbc.pc(), 0xbd4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd4a), 0xcb);
        EXPECT(gbc.readMem(0xbd4b), 0xf1);
        // CB F1 0112
        gbc.setState(0x1262, 0xebd7, 0x5230, 0x9c47, 0x531, 0x8ce8, 0x0, 0x1);
        gbc.writeMem(0x1262, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xebd7);
        EXPECT(gbc.pc(), 0x1264);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0113
        gbc.setState(0xb5, 0x4da1, 0x6870, 0x8e85, 0x942, 0xb1f9, 0x1, 0x1);
        gbc.writeMem(0xb5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x4da1);
        EXPECT(gbc.pc(), 0xb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0115
        gbc.setState(0x2e60, 0x717c, 0x2000, 0xeba0, 0x3914, 0x2c97, 0x1, 0x1);
        gbc.writeMem(0x2e60, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x717c);
        EXPECT(gbc.pc(), 0x2e62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0116
        gbc.setState(0xa86, 0x98a1, 0xd940, 0x67ad, 0xe590, 0x6d40, 0x1, 0x1);
        gbc.writeMem(0xa86, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x98a1);
        EXPECT(gbc.pc(), 0xa88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0117
        gbc.setState(0x9f09, 0x679e, 0x8af0, 0x8916, 0xf54e, 0x59dc, 0x0, 0x1);
        gbc.writeMem(0x9f09, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x679e);
        EXPECT(gbc.pc(), 0x9f0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f09), 0xcb);
        EXPECT(gbc.readMem(0x9f0a), 0xf1);
        // CB F1 0118
        gbc.setState(0x2d10, 0xb85b, 0xbf50, 0xfa0b, 0x24cc, 0xe66, 0x0, 0x1);
        gbc.writeMem(0x2d10, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xb85b);
        EXPECT(gbc.pc(), 0x2d12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0119
        gbc.setState(0x57fd, 0x45c2, 0xdcf0, 0x9637, 0xcd86, 0x5a2, 0x1, 0x1);
        gbc.writeMem(0x57fd, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x45c2);
        EXPECT(gbc.pc(), 0x57ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 011A
        gbc.setState(0x766a, 0x2001, 0x36c0, 0xaa06, 0xd83e, 0x7624, 0x0, 0x0);
        gbc.writeMem(0x766a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x2001);
        EXPECT(gbc.pc(), 0x766c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 011B
        gbc.setState(0x6d84, 0x889d, 0xbb20, 0xbd41, 0xf148, 0x2b85, 0x0, 0x1);
        gbc.writeMem(0x6d84, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x889d);
        EXPECT(gbc.pc(), 0x6d86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 011C
        gbc.setState(0xc17, 0x7310, 0x1e10, 0x9209, 0x5a51, 0xe14e, 0x0, 0x1);
        gbc.writeMem(0xc17, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x7310);
        EXPECT(gbc.pc(), 0xc19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 011D
        gbc.setState(0x9f29, 0x52fa, 0xe2b0, 0x2e54, 0x8345, 0xa6e2, 0x1, 0x0);
        gbc.writeMem(0x9f29, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x52fa);
        EXPECT(gbc.pc(), 0x9f2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f29), 0xcb);
        EXPECT(gbc.readMem(0x9f2a), 0xf1);
        // CB F1 011E
        gbc.setState(0x5ad0, 0xedde, 0x490, 0x95b4, 0xdf6b, 0xd18, 0x0, 0x0);
        gbc.writeMem(0x5ad0, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xedde);
        EXPECT(gbc.pc(), 0x5ad2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 011F
        gbc.setState(0xa33c, 0xfaa6, 0xa290, 0x1894, 0xc7dc, 0x61e6, 0x1, 0x1);
        gbc.writeMem(0xa33c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xfaa6);
        EXPECT(gbc.pc(), 0xa33e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa33c), 0xcb);
        EXPECT(gbc.readMem(0xa33d), 0xf1);
        // CB F1 0120
        gbc.setState(0x4048, 0xdd7a, 0x83f0, 0x5c68, 0x1e04, 0x2507, 0x1, 0x1);
        gbc.writeMem(0x4048, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xdd7a);
        EXPECT(gbc.pc(), 0x404a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0121
        gbc.setState(0xeb1, 0xacea, 0x500, 0x7a3, 0xeed7, 0xb47a, 0x1, 0x0);
        gbc.writeMem(0xeb1, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xacea);
        EXPECT(gbc.pc(), 0xeb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0122
        gbc.setState(0xcacc, 0x7858, 0x69b0, 0x3c86, 0x23a6, 0x1f94, 0x1, 0x1);
        gbc.writeMem(0xcacc, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x7858);
        EXPECT(gbc.pc(), 0xcace);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcacc), 0xcb);
        EXPECT(gbc.readMem(0xcacd), 0xf1);
        // CB F1 0126
        gbc.setState(0x8ea5, 0x8929, 0xca0, 0x7b82, 0x70f7, 0x797f, 0x1, 0x0);
        gbc.writeMem(0x8ea5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x8929);
        EXPECT(gbc.pc(), 0x8ea7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ea5), 0xcb);
        EXPECT(gbc.readMem(0x8ea6), 0xf1);
        // CB F1 0127
        gbc.setState(0x3a5e, 0x3a23, 0xe720, 0x4703, 0xb37a, 0x47a8, 0x0, 0x0);
        gbc.writeMem(0x3a5e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x3a23);
        EXPECT(gbc.pc(), 0x3a60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0128
        gbc.setState(0xd1ff, 0xd64c, 0xf40, 0x49ee, 0x5d00, 0x3534, 0x0, 0x0);
        gbc.writeMem(0xd1ff, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xd64c);
        EXPECT(gbc.pc(), 0xd201);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1ff), 0xcb);
        EXPECT(gbc.readMem(0xd200), 0xf1);
        // CB F1 0129
        gbc.setState(0x675c, 0xa621, 0x8640, 0xacc8, 0xc84f, 0x999f, 0x1, 0x1);
        gbc.writeMem(0x675c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xa621);
        EXPECT(gbc.pc(), 0x675e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 012A
        gbc.setState(0xb2f2, 0x9362, 0xa320, 0x4c43, 0x42ca, 0xdaf4, 0x0, 0x0);
        gbc.writeMem(0xb2f2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x9362);
        EXPECT(gbc.pc(), 0xb2f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2f2), 0xcb);
        EXPECT(gbc.readMem(0xb2f3), 0xf1);
        // CB F1 012B
        gbc.setState(0x37c, 0x62d4, 0x470, 0x954b, 0x4fc8, 0xeadf, 0x0, 0x0);
        gbc.writeMem(0x37c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x62d4);
        EXPECT(gbc.pc(), 0x37e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 012C
        gbc.setState(0x4631, 0x1e7d, 0x9b50, 0x5f4e, 0x67a3, 0x9d1c, 0x0, 0x1);
        gbc.writeMem(0x4631, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x1e7d);
        EXPECT(gbc.pc(), 0x4633);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 012D
        gbc.setState(0x6de2, 0xec5b, 0x1d80, 0x6c1f, 0xa854, 0x9b90, 0x1, 0x0);
        gbc.writeMem(0x6de2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xec5b);
        EXPECT(gbc.pc(), 0x6de4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 012E
        gbc.setState(0x679, 0x6771, 0x6490, 0x424e, 0x18ba, 0xa7c8, 0x0, 0x0);
        gbc.writeMem(0x679, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x6771);
        EXPECT(gbc.pc(), 0x67b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 012F
        gbc.setState(0x1060, 0x1fff, 0x5440, 0xf705, 0xf23a, 0x52b4, 0x1, 0x1);
        gbc.writeMem(0x1060, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x1fff);
        EXPECT(gbc.pc(), 0x1062);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0130
        gbc.setState(0x686b, 0x758b, 0x1ea0, 0xf43a, 0x26d4, 0xaf31, 0x0, 0x1);
        gbc.writeMem(0x686b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x758b);
        EXPECT(gbc.pc(), 0x686d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0131
        gbc.setState(0x3f34, 0xd3a5, 0xd670, 0xc329, 0x9ae2, 0xfdb3, 0x0, 0x1);
        gbc.writeMem(0x3f34, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xd3a5);
        EXPECT(gbc.pc(), 0x3f36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0132
        gbc.setState(0x2d23, 0x6028, 0x10, 0xa143, 0x9b05, 0xded6, 0x1, 0x0);
        gbc.writeMem(0x2d23, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x6028);
        EXPECT(gbc.pc(), 0x2d25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0133
        gbc.setState(0x44f2, 0xd8a4, 0x3a30, 0x6f28, 0xed56, 0x4826, 0x1, 0x1);
        gbc.writeMem(0x44f2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xd8a4);
        EXPECT(gbc.pc(), 0x44f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0134
        gbc.setState(0xe302, 0x80de, 0xe540, 0x8040, 0xfefc, 0x75b6, 0x0, 0x0);
        gbc.writeMem(0xe302, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x80de);
        EXPECT(gbc.pc(), 0xe304);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe302), 0xcb);
        EXPECT(gbc.readMem(0xe303), 0xf1);
        // CB F1 0135
        gbc.setState(0x75ef, 0xe81b, 0x9500, 0xe657, 0xdd43, 0x46f3, 0x0, 0x1);
        gbc.writeMem(0x75ef, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe81b);
        EXPECT(gbc.pc(), 0x75f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0136
        gbc.setState(0x3df2, 0xade0, 0xe370, 0x35bf, 0xeb5f, 0x621b, 0x0, 0x0);
        gbc.writeMem(0x3df2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xade0);
        EXPECT(gbc.pc(), 0x3df4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0137
        gbc.setState(0x31f7, 0x3fb7, 0x29f0, 0x6429, 0x590c, 0x2b68, 0x1, 0x1);
        gbc.writeMem(0x31f7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x3fb7);
        EXPECT(gbc.pc(), 0x31f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0138
        gbc.setState(0xd017, 0x1b69, 0x6310, 0xee63, 0x7683, 0x93d7, 0x1, 0x0);
        gbc.writeMem(0xd017, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x1b69);
        EXPECT(gbc.pc(), 0xd019);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd017), 0xcb);
        EXPECT(gbc.readMem(0xd018), 0xf1);
        // CB F1 0139
        gbc.setState(0x368b, 0xa009, 0x5370, 0x1f81, 0xd94f, 0x901d, 0x0, 0x0);
        gbc.writeMem(0x368b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xa009);
        EXPECT(gbc.pc(), 0x368d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 013A
        gbc.setState(0xd78f, 0xdc0c, 0x6fc0, 0x2101, 0x56a7, 0xb086, 0x0, 0x0);
        gbc.writeMem(0xd78f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xdc0c);
        EXPECT(gbc.pc(), 0xd791);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd78f), 0xcb);
        EXPECT(gbc.readMem(0xd790), 0xf1);
        // CB F1 013C
        gbc.setState(0xc3e2, 0x65d, 0x2d10, 0x5bcd, 0x4e0, 0x6c2d, 0x1, 0x1);
        gbc.writeMem(0xc3e2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x65d);
        EXPECT(gbc.pc(), 0xc3e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3e2), 0xcb);
        EXPECT(gbc.readMem(0xc3e3), 0xf1);
        // CB F1 013D
        gbc.setState(0xdb66, 0x4dc9, 0x5790, 0x16eb, 0xdb5f, 0x3503, 0x0, 0x0);
        gbc.writeMem(0xdb66, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x4dc9);
        EXPECT(gbc.pc(), 0xdb68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb66), 0xcb);
        EXPECT(gbc.readMem(0xdb67), 0xf1);
        // CB F1 013E
        gbc.setState(0x1bc3, 0x5eaa, 0x4c30, 0x385f, 0x1dd0, 0x4f45, 0x1, 0x0);
        gbc.writeMem(0x1bc3, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x5eaa);
        EXPECT(gbc.pc(), 0x1bc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 013F
        gbc.setState(0x50ec, 0xf5ac, 0x77c0, 0x3cbb, 0xea33, 0xc403, 0x0, 0x1);
        gbc.writeMem(0x50ec, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xf5ac);
        EXPECT(gbc.pc(), 0x50ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0140
        gbc.setState(0x4c5d, 0xe840, 0x10f0, 0x40ac, 0x525f, 0x73af, 0x0, 0x0);
        gbc.writeMem(0x4c5d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xe840);
        EXPECT(gbc.pc(), 0x4c5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0141
        gbc.setState(0x6e24, 0xb9f3, 0x7bf0, 0xa807, 0xfcd5, 0xc555, 0x1, 0x0);
        gbc.writeMem(0x6e24, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xb9f3);
        EXPECT(gbc.pc(), 0x6e26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0142
        gbc.setState(0x19ff, 0xf275, 0x8740, 0x79bf, 0x29e, 0x6c9a, 0x0, 0x1);
        gbc.writeMem(0x19ff, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xf275);
        EXPECT(gbc.pc(), 0x1a01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0143
        gbc.setState(0x5660, 0x3129, 0x52c0, 0xa9b0, 0xa2d7, 0xa0, 0x0, 0x0);
        gbc.writeMem(0x5660, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x3129);
        EXPECT(gbc.pc(), 0x5662);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0144
        gbc.setState(0x42d2, 0xa09e, 0x4240, 0xbff6, 0xe1d5, 0xe6b, 0x0, 0x1);
        gbc.writeMem(0x42d2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xa09e);
        EXPECT(gbc.pc(), 0x42d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0145
        gbc.setState(0xcd7f, 0xf3f, 0x8860, 0x39f1, 0xd13d, 0x2a33, 0x0, 0x1);
        gbc.writeMem(0xcd7f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xf3f);
        EXPECT(gbc.pc(), 0xcd81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd7f), 0xcb);
        EXPECT(gbc.readMem(0xcd80), 0xf1);
        // CB F1 0146
        gbc.setState(0xc95d, 0x1c19, 0x28c0, 0x316b, 0x833a, 0x52c3, 0x0, 0x1);
        gbc.writeMem(0xc95d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x1c19);
        EXPECT(gbc.pc(), 0xc95f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc95d), 0xcb);
        EXPECT(gbc.readMem(0xc95e), 0xf1);
        // CB F1 0147
        gbc.setState(0x1109, 0x737a, 0xb9f0, 0x57ee, 0x3828, 0xc648, 0x0, 0x0);
        gbc.writeMem(0x1109, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x737a);
        EXPECT(gbc.pc(), 0x110b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0148
        gbc.setState(0x684f, 0x1a91, 0xb070, 0xab9, 0xaa0b, 0x8ce7, 0x1, 0x1);
        gbc.writeMem(0x684f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x1a91);
        EXPECT(gbc.pc(), 0x6851);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0149
        gbc.setState(0xa7e4, 0x4ecd, 0x8f40, 0xbba5, 0x403e, 0xc4e3, 0x1, 0x0);
        gbc.writeMem(0xa7e4, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x4ecd);
        EXPECT(gbc.pc(), 0xa7e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7e4), 0xcb);
        EXPECT(gbc.readMem(0xa7e5), 0xf1);
        // CB F1 014B
        gbc.setState(0x3198, 0xf0ae, 0xbcf0, 0xbe1f, 0x4561, 0x193c, 0x0, 0x0);
        gbc.writeMem(0x3198, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xf0ae);
        EXPECT(gbc.pc(), 0x319a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 014C
        gbc.setState(0xa9d6, 0xc918, 0x7c0, 0xdff1, 0x36dd, 0x16b4, 0x1, 0x0);
        gbc.writeMem(0xa9d6, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xc918);
        EXPECT(gbc.pc(), 0xa9d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9d6), 0xcb);
        EXPECT(gbc.readMem(0xa9d7), 0xf1);
        // CB F1 014D
        gbc.setState(0x15b5, 0xb8b2, 0x9570, 0xce22, 0x393c, 0xddfc, 0x0, 0x1);
        gbc.writeMem(0x15b5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xb8b2);
        EXPECT(gbc.pc(), 0x15b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 014E
        gbc.setState(0x1123, 0xe740, 0xeda0, 0x1ad, 0x95fc, 0xdd25, 0x1, 0x1);
        gbc.writeMem(0x1123, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xe740);
        EXPECT(gbc.pc(), 0x1125);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 014F
        gbc.setState(0x7129, 0x25a, 0x16d0, 0x5c06, 0xb2c1, 0x6a85, 0x0, 0x1);
        gbc.writeMem(0x7129, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x25a);
        EXPECT(gbc.pc(), 0x712b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0150
        gbc.setState(0x2c77, 0x66f8, 0x32a0, 0x7fec, 0x6f0e, 0x1a30, 0x1, 0x0);
        gbc.writeMem(0x2c77, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x66f8);
        EXPECT(gbc.pc(), 0x2c79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0151
        gbc.setState(0x923d, 0x1ca7, 0xb6e0, 0x8a42, 0x7964, 0xa320, 0x1, 0x0);
        gbc.writeMem(0x923d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x1ca7);
        EXPECT(gbc.pc(), 0x923f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x923d), 0xcb);
        EXPECT(gbc.readMem(0x923e), 0xf1);
        // CB F1 0152
        gbc.setState(0xa304, 0x80c9, 0xd910, 0x1bcc, 0xc67, 0x1bbe, 0x0, 0x1);
        gbc.writeMem(0xa304, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x80c9);
        EXPECT(gbc.pc(), 0xa306);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa304), 0xcb);
        EXPECT(gbc.readMem(0xa305), 0xf1);
        // CB F1 0153
        gbc.setState(0x4916, 0x8d23, 0xc5d0, 0xe352, 0x77ec, 0x75a1, 0x0, 0x0);
        gbc.writeMem(0x4916, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x8d23);
        EXPECT(gbc.pc(), 0x4918);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0154
        gbc.setState(0x791, 0x7f5a, 0xd110, 0x8d89, 0xa627, 0xd591, 0x0, 0x0);
        gbc.writeMem(0x791, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x7f5a);
        EXPECT(gbc.pc(), 0x793);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0155
        gbc.setState(0xc33c, 0xa355, 0x9f60, 0xa8c, 0xb973, 0x241, 0x1, 0x0);
        gbc.writeMem(0xc33c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xa355);
        EXPECT(gbc.pc(), 0xc33e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc33c), 0xcb);
        EXPECT(gbc.readMem(0xc33d), 0xf1);
        // CB F1 0156
        gbc.setState(0xd1a7, 0x9a14, 0x79b0, 0xbf61, 0xa151, 0x54a3, 0x1, 0x0);
        gbc.writeMem(0xd1a7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9a14);
        EXPECT(gbc.pc(), 0xd1a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1a7), 0xcb);
        EXPECT(gbc.readMem(0xd1a8), 0xf1);
        // CB F1 0157
        gbc.setState(0x3bb9, 0x8aa1, 0xabc0, 0xd690, 0x3e1c, 0x628e, 0x1, 0x1);
        gbc.writeMem(0x3bb9, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x8aa1);
        EXPECT(gbc.pc(), 0x3bbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0158
        gbc.setState(0x1d50, 0x25d4, 0x6980, 0x8fa4, 0x224d, 0xbffe, 0x0, 0x1);
        gbc.writeMem(0x1d50, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x25d4);
        EXPECT(gbc.pc(), 0x1d52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0159
        gbc.setState(0x9ce6, 0xb4c4, 0xa120, 0xd89, 0x23a7, 0xbbc8, 0x1, 0x1);
        gbc.writeMem(0x9ce6, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xb4c4);
        EXPECT(gbc.pc(), 0x9ce8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ce6), 0xcb);
        EXPECT(gbc.readMem(0x9ce7), 0xf1);
        // CB F1 015A
        gbc.setState(0x949f, 0x1f63, 0x5d30, 0x1f7d, 0x93c5, 0xc845, 0x1, 0x0);
        gbc.writeMem(0x949f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x1f63);
        EXPECT(gbc.pc(), 0x94a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x949f), 0xcb);
        EXPECT(gbc.readMem(0x94a0), 0xf1);
        // CB F1 015B
        gbc.setState(0xd591, 0xbf9e, 0x1190, 0x9d52, 0x312d, 0xa20e, 0x1, 0x1);
        gbc.writeMem(0xd591, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xbf9e);
        EXPECT(gbc.pc(), 0xd593);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd591), 0xcb);
        EXPECT(gbc.readMem(0xd592), 0xf1);
        // CB F1 015C
        gbc.setState(0x2dbb, 0x398d, 0xe180, 0x44fb, 0xc135, 0x2d5, 0x1, 0x0);
        gbc.writeMem(0x2dbb, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x398d);
        EXPECT(gbc.pc(), 0x2dbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 015E
        gbc.setState(0x2c0b, 0x5b9a, 0x8d0, 0x8077, 0x622e, 0x7da5, 0x0, 0x1);
        gbc.writeMem(0x2c0b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x5b9a);
        EXPECT(gbc.pc(), 0x2c0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0160
        gbc.setState(0x9d01, 0xee83, 0x5900, 0xb8a8, 0x9cec, 0x5f5, 0x0, 0x0);
        gbc.writeMem(0x9d01, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xee83);
        EXPECT(gbc.pc(), 0x9d03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d01), 0xcb);
        EXPECT(gbc.readMem(0x9d02), 0xf1);
        // CB F1 0161
        gbc.setState(0xe37e, 0xae80, 0xfc80, 0x55d5, 0xce29, 0xdb9, 0x0, 0x0);
        gbc.writeMem(0xe37e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xae80);
        EXPECT(gbc.pc(), 0xe380);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe37e), 0xcb);
        EXPECT(gbc.readMem(0xe37f), 0xf1);
        // CB F1 0162
        gbc.setState(0xc629, 0xd093, 0xc970, 0xb386, 0x54c4, 0xa4c8, 0x0, 0x1);
        gbc.writeMem(0xc629, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xd093);
        EXPECT(gbc.pc(), 0xc62b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc629), 0xcb);
        EXPECT(gbc.readMem(0xc62a), 0xf1);
        // CB F1 0164
        gbc.setState(0x5c6, 0xc935, 0x28d0, 0xb3cf, 0x2197, 0x11ae, 0x1, 0x0);
        gbc.writeMem(0x5c6, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xc935);
        EXPECT(gbc.pc(), 0x5c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0165
        gbc.setState(0x1637, 0x9206, 0x8710, 0xb6e7, 0x563b, 0x4d33, 0x0, 0x0);
        gbc.writeMem(0x1637, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x9206);
        EXPECT(gbc.pc(), 0x1639);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0167
        gbc.setState(0xbb97, 0x6a3b, 0x5a20, 0xfad1, 0xd5b9, 0xabd7, 0x0, 0x0);
        gbc.writeMem(0xbb97, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x6a3b);
        EXPECT(gbc.pc(), 0xbb99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb97), 0xcb);
        EXPECT(gbc.readMem(0xbb98), 0xf1);
        // CB F1 0168
        gbc.setState(0x44, 0xcd1e, 0x9bd0, 0xea73, 0xbaed, 0x6454, 0x0, 0x1);
        gbc.writeMem(0x44, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xcd1e);
        EXPECT(gbc.pc(), 0x46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0169
        gbc.setState(0x8c65, 0x5732, 0x9060, 0x388f, 0x2e22, 0xc2ec, 0x0, 0x0);
        gbc.writeMem(0x8c65, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x5732);
        EXPECT(gbc.pc(), 0x8c67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c65), 0xcb);
        EXPECT(gbc.readMem(0x8c66), 0xf1);
        // CB F1 016A
        gbc.setState(0xc1d, 0x541c, 0xb0b0, 0x1f5c, 0x7d19, 0x97d8, 0x1, 0x0);
        gbc.writeMem(0xc1d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x541c);
        EXPECT(gbc.pc(), 0xc1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 016C
        gbc.setState(0x7b02, 0x406c, 0xf490, 0xcf2a, 0xe86a, 0x7711, 0x1, 0x0);
        gbc.writeMem(0x7b02, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x406c);
        EXPECT(gbc.pc(), 0x7b04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 016D
        gbc.setState(0x8cf, 0x4efc, 0x3e70, 0x3243, 0xf600, 0xebcc, 0x1, 0x1);
        gbc.writeMem(0x8cf, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x4efc);
        EXPECT(gbc.pc(), 0x8d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 016E
        gbc.setState(0x38b8, 0x7e9d, 0x2770, 0xd903, 0xb571, 0x4de8, 0x1, 0x1);
        gbc.writeMem(0x38b8, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x7e9d);
        EXPECT(gbc.pc(), 0x38ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 016F
        gbc.setState(0x2e93, 0x58ef, 0x85c0, 0x85a5, 0x4d2b, 0x8c6, 0x1, 0x0);
        gbc.writeMem(0x2e93, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x58ef);
        EXPECT(gbc.pc(), 0x2e95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0170
        gbc.setState(0x73d4, 0x4e7c, 0x5f80, 0xc838, 0xc9d3, 0x34e6, 0x1, 0x0);
        gbc.writeMem(0x73d4, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x4e7c);
        EXPECT(gbc.pc(), 0x73d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0171
        gbc.setState(0x75c4, 0xa2c4, 0x2c0, 0x508c, 0x8fee, 0xf80e, 0x1, 0x1);
        gbc.writeMem(0x75c4, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xa2c4);
        EXPECT(gbc.pc(), 0x75c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0172
        gbc.setState(0x450, 0x1176, 0x4540, 0x911e, 0x56e6, 0x17f8, 0x1, 0x0);
        gbc.writeMem(0x450, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x1176);
        EXPECT(gbc.pc(), 0x452);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0173
        gbc.setState(0x8fcf, 0xb4e7, 0xbae0, 0xf6e0, 0x5ca9, 0x593d, 0x0, 0x0);
        gbc.writeMem(0x8fcf, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xb4e7);
        EXPECT(gbc.pc(), 0x8fd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fcf), 0xcb);
        EXPECT(gbc.readMem(0x8fd0), 0xf1);
        // CB F1 0174
        gbc.setState(0x618b, 0x2046, 0x5e80, 0x8f85, 0xf138, 0x7b89, 0x0, 0x0);
        gbc.writeMem(0x618b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x2046);
        EXPECT(gbc.pc(), 0x618d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0175
        gbc.setState(0x9f22, 0xa534, 0x6ad0, 0x640, 0x25e4, 0x2960, 0x0, 0x1);
        gbc.writeMem(0x9f22, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xa534);
        EXPECT(gbc.pc(), 0x9f24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f22), 0xcb);
        EXPECT(gbc.readMem(0x9f23), 0xf1);
        // CB F1 0176
        gbc.setState(0x12d7, 0xa872, 0x8d50, 0xb433, 0x7a26, 0x75fd, 0x0, 0x1);
        gbc.writeMem(0x12d7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xa872);
        EXPECT(gbc.pc(), 0x12d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0177
        gbc.setState(0x818e, 0x4cd2, 0x9120, 0x86b8, 0x70bc, 0x91ba, 0x0, 0x0);
        gbc.writeMem(0x818e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x4cd2);
        EXPECT(gbc.pc(), 0x8190);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x818e), 0xcb);
        EXPECT(gbc.readMem(0x818f), 0xf1);
        // CB F1 0178
        gbc.setState(0x66cb, 0x1dc0, 0xc070, 0x8d8d, 0xc777, 0x656e, 0x1, 0x1);
        gbc.writeMem(0x66cb, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x1dc0);
        EXPECT(gbc.pc(), 0x66cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0179
        gbc.setState(0xd577, 0xc8ac, 0x8160, 0x3dfe, 0xde8f, 0x4bd2, 0x0, 0x1);
        gbc.writeMem(0xd577, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xc8ac);
        EXPECT(gbc.pc(), 0xd579);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd577), 0xcb);
        EXPECT(gbc.readMem(0xd578), 0xf1);
        // CB F1 017A
        gbc.setState(0xd10, 0x748, 0x2ac0, 0x1360, 0xd72d, 0xb4a, 0x1, 0x1);
        gbc.writeMem(0xd10, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x748);
        EXPECT(gbc.pc(), 0xd12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 017B
        gbc.setState(0x4500, 0x6b03, 0x32b0, 0xc7a1, 0x7e6e, 0x3e9c, 0x0, 0x0);
        gbc.writeMem(0x4500, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x6b03);
        EXPECT(gbc.pc(), 0x4502);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 017C
        gbc.setState(0x2b33, 0xc1cc, 0xb60, 0x401a, 0x83dc, 0x97da, 0x1, 0x1);
        gbc.writeMem(0x2b33, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc1cc);
        EXPECT(gbc.pc(), 0x2b35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 017D
        gbc.setState(0x3694, 0xf9c5, 0x7e60, 0x49fd, 0x75f2, 0x7214, 0x1, 0x1);
        gbc.writeMem(0x3694, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xf9c5);
        EXPECT(gbc.pc(), 0x3696);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 017E
        gbc.setState(0x20e0, 0xbf8a, 0x3d20, 0xa565, 0x1a14, 0x2740, 0x1, 0x1);
        gbc.writeMem(0x20e0, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xbf8a);
        EXPECT(gbc.pc(), 0x20e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 017F
        gbc.setState(0x3d3e, 0xd1e5, 0xb810, 0xcd9c, 0xdb98, 0x9fd0, 0x0, 0x1);
        gbc.writeMem(0x3d3e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xd1e5);
        EXPECT(gbc.pc(), 0x3d40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0180
        gbc.setState(0xbd49, 0x29ea, 0xfa30, 0xee3a, 0xa712, 0xe9e8, 0x0, 0x1);
        gbc.writeMem(0xbd49, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x29ea);
        EXPECT(gbc.pc(), 0xbd4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd49), 0xcb);
        EXPECT(gbc.readMem(0xbd4a), 0xf1);
        // CB F1 0181
        gbc.setState(0x6289, 0x887d, 0xa0, 0xeff1, 0xbe4e, 0x1c4b, 0x0, 0x0);
        gbc.writeMem(0x6289, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x887d);
        EXPECT(gbc.pc(), 0x628b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0182
        gbc.setState(0x410a, 0xfce4, 0x3b0, 0xcc6f, 0xbcf5, 0xe5a8, 0x0, 0x0);
        gbc.writeMem(0x410a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xfce4);
        EXPECT(gbc.pc(), 0x410c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0183
        gbc.setState(0x1023, 0xc664, 0xf3a0, 0x98d5, 0x5932, 0x188e, 0x1, 0x0);
        gbc.writeMem(0x1023, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xc664);
        EXPECT(gbc.pc(), 0x1025);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0184
        gbc.setState(0xc41d, 0xdd09, 0x630, 0x7578, 0xeefb, 0x2448, 0x1, 0x1);
        gbc.writeMem(0xc41d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xdd09);
        EXPECT(gbc.pc(), 0xc41f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc41d), 0xcb);
        EXPECT(gbc.readMem(0xc41e), 0xf1);
        // CB F1 0186
        gbc.setState(0x6028, 0x7f58, 0x7630, 0xf1ea, 0x969d, 0xf00f, 0x0, 0x1);
        gbc.writeMem(0x6028, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x7f58);
        EXPECT(gbc.pc(), 0x602a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0187
        gbc.setState(0x4c6e, 0x70c1, 0x9e70, 0x9c10, 0x8ece, 0x700a, 0x1, 0x1);
        gbc.writeMem(0x4c6e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x70c1);
        EXPECT(gbc.pc(), 0x4c70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0188
        gbc.setState(0x8a1d, 0xf3b3, 0xa300, 0x6716, 0x4d49, 0xc8da, 0x1, 0x0);
        gbc.writeMem(0x8a1d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xf3b3);
        EXPECT(gbc.pc(), 0x8a1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a1d), 0xcb);
        EXPECT(gbc.readMem(0x8a1e), 0xf1);
        // CB F1 0189
        gbc.setState(0x9108, 0x4c25, 0xe760, 0x1233, 0x462c, 0x3cf0, 0x1, 0x0);
        gbc.writeMem(0x9108, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x4c25);
        EXPECT(gbc.pc(), 0x910a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9108), 0xcb);
        EXPECT(gbc.readMem(0x9109), 0xf1);
        // CB F1 018A
        gbc.setState(0x9f8c, 0x171c, 0xdd10, 0x588f, 0x8d24, 0x3679, 0x0, 0x0);
        gbc.writeMem(0x9f8c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x171c);
        EXPECT(gbc.pc(), 0x9f8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f8c), 0xcb);
        EXPECT(gbc.readMem(0x9f8d), 0xf1);
        // CB F1 018B
        gbc.setState(0xb57f, 0x5de7, 0xbb0, 0x116c, 0xdf4d, 0xf0dd, 0x0, 0x0);
        gbc.writeMem(0xb57f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x5de7);
        EXPECT(gbc.pc(), 0xb581);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb57f), 0xcb);
        EXPECT(gbc.readMem(0xb580), 0xf1);
        // CB F1 018C
        gbc.setState(0x4cf6, 0x6092, 0x4650, 0x7a74, 0xaa3b, 0x6a08, 0x1, 0x0);
        gbc.writeMem(0x4cf6, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6092);
        EXPECT(gbc.pc(), 0x4cf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 018E
        gbc.setState(0x7238, 0xb585, 0xf0b0, 0x6621, 0xbdb5, 0xd742, 0x1, 0x0);
        gbc.writeMem(0x7238, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xb585);
        EXPECT(gbc.pc(), 0x723a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 018F
        gbc.setState(0x4133, 0x7474, 0x7ff0, 0x7f8f, 0x30f4, 0xc718, 0x0, 0x0);
        gbc.writeMem(0x4133, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x7474);
        EXPECT(gbc.pc(), 0x4135);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0190
        gbc.setState(0xbb46, 0x615d, 0x1530, 0x61f3, 0x6068, 0x8107, 0x0, 0x1);
        gbc.writeMem(0xbb46, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x615d);
        EXPECT(gbc.pc(), 0xbb48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb46), 0xcb);
        EXPECT(gbc.readMem(0xbb47), 0xf1);
        // CB F1 0191
        gbc.setState(0x7aaf, 0x3ed, 0xc9a0, 0x5081, 0x9e04, 0xfd38, 0x1, 0x0);
        gbc.writeMem(0x7aaf, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x3ed);
        EXPECT(gbc.pc(), 0x7ab1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0192
        gbc.setState(0xa377, 0x2c7b, 0xf0d0, 0xc429, 0xa7f4, 0xc210, 0x1, 0x1);
        gbc.writeMem(0xa377, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x2c7b);
        EXPECT(gbc.pc(), 0xa379);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa377), 0xcb);
        EXPECT(gbc.readMem(0xa378), 0xf1);
        // CB F1 0194
        gbc.setState(0x252, 0xc5e3, 0xfbc0, 0xb962, 0xd3d8, 0x962e, 0x1, 0x0);
        gbc.writeMem(0x252, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xc5e3);
        EXPECT(gbc.pc(), 0x254);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0195
        gbc.setState(0x3978, 0x9b2c, 0xcb10, 0x2156, 0x6634, 0x3a8, 0x0, 0x0);
        gbc.writeMem(0x3978, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x9b2c);
        EXPECT(gbc.pc(), 0x397a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0196
        gbc.setState(0x69dd, 0x52b0, 0x4c20, 0x1988, 0xb58b, 0x31ab, 0x0, 0x0);
        gbc.writeMem(0x69dd, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x52b0);
        EXPECT(gbc.pc(), 0x69df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0197
        gbc.setState(0x5b82, 0xb6ef, 0xcff0, 0xcd24, 0x67ff, 0x32ce, 0x1, 0x0);
        gbc.writeMem(0x5b82, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xb6ef);
        EXPECT(gbc.pc(), 0x5b84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0198
        gbc.setState(0xa466, 0x6a9c, 0xfd0, 0xce9b, 0x69d3, 0x5a88, 0x0, 0x1);
        gbc.writeMem(0xa466, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x6a9c);
        EXPECT(gbc.pc(), 0xa468);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa466), 0xcb);
        EXPECT(gbc.readMem(0xa467), 0xf1);
        // CB F1 0199
        gbc.setState(0xc250, 0xe421, 0x6ba0, 0x70e0, 0x4f22, 0xb038, 0x0, 0x0);
        gbc.writeMem(0xc250, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xe421);
        EXPECT(gbc.pc(), 0xc252);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc250), 0xcb);
        EXPECT(gbc.readMem(0xc251), 0xf1);
        // CB F1 019A
        gbc.setState(0xbe96, 0x8556, 0x1350, 0x3f82, 0x702c, 0x1d3, 0x0, 0x1);
        gbc.writeMem(0xbe96, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x8556);
        EXPECT(gbc.pc(), 0xbe98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe96), 0xcb);
        EXPECT(gbc.readMem(0xbe97), 0xf1);
        // CB F1 019B
        gbc.setState(0x7a4, 0xf35a, 0x5d00, 0x23af, 0x5769, 0x630f, 0x1, 0x1);
        gbc.writeMem(0x7a4, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xf35a);
        EXPECT(gbc.pc(), 0x7a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 019C
        gbc.setState(0x204f, 0x7792, 0x3d60, 0xf1d1, 0xe1c6, 0x72ab, 0x1, 0x0);
        gbc.writeMem(0x204f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7792);
        EXPECT(gbc.pc(), 0x2051);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 019D
        gbc.setState(0x677, 0x83ff, 0xa7b0, 0x3e0e, 0xb2cb, 0x68c8, 0x0, 0x0);
        gbc.writeMem(0x677, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x83ff);
        EXPECT(gbc.pc(), 0x679);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 019E
        gbc.setState(0x5137, 0xac27, 0x68c0, 0xa8d9, 0x8034, 0xb039, 0x1, 0x1);
        gbc.writeMem(0x5137, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xac27);
        EXPECT(gbc.pc(), 0x5139);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 019F
        gbc.setState(0x51ed, 0x9bdf, 0xed40, 0x55a9, 0x484, 0x5802, 0x1, 0x0);
        gbc.writeMem(0x51ed, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x9bdf);
        EXPECT(gbc.pc(), 0x51ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01A0
        gbc.setState(0xc1bf, 0x42ac, 0xa450, 0xf3f6, 0x5817, 0xd9aa, 0x1, 0x1);
        gbc.writeMem(0xc1bf, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x42ac);
        EXPECT(gbc.pc(), 0xc1c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1bf), 0xcb);
        EXPECT(gbc.readMem(0xc1c0), 0xf1);
        // CB F1 01A2
        gbc.setState(0xede9, 0xb38b, 0x96b0, 0x4cf, 0x4bb5, 0xb33a, 0x0, 0x1);
        gbc.writeMem(0xede9, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xb38b);
        EXPECT(gbc.pc(), 0xedeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xede9), 0xcb);
        EXPECT(gbc.readMem(0xedea), 0xf1);
        // CB F1 01A3
        gbc.setState(0x7e0d, 0x28aa, 0xe440, 0x7cf2, 0xd4a5, 0x8410, 0x0, 0x1);
        gbc.writeMem(0x7e0d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x28aa);
        EXPECT(gbc.pc(), 0x7e0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01A4
        gbc.setState(0xc14c, 0xa044, 0x2c0, 0xd169, 0xa6c6, 0x80b1, 0x1, 0x0);
        gbc.writeMem(0xc14c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xa044);
        EXPECT(gbc.pc(), 0xc14e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc14c), 0xcb);
        EXPECT(gbc.readMem(0xc14d), 0xf1);
        // CB F1 01A5
        gbc.setState(0x43ef, 0x3081, 0xf780, 0x9abb, 0xad9e, 0xd473, 0x0, 0x1);
        gbc.writeMem(0x43ef, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x3081);
        EXPECT(gbc.pc(), 0x43f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01A6
        gbc.setState(0x3f0, 0x4a40, 0xa610, 0x5b95, 0xf917, 0x8845, 0x1, 0x0);
        gbc.writeMem(0x3f0, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x4a40);
        EXPECT(gbc.pc(), 0x3f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 01A7
        gbc.setState(0xba6, 0x4b94, 0x6080, 0x2acc, 0x1643, 0x4d15, 0x0, 0x1);
        gbc.writeMem(0xba6, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x4b94);
        EXPECT(gbc.pc(), 0xba8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01A8
        gbc.setState(0x63cd, 0x3203, 0x4240, 0xcadf, 0xe59e, 0xd3bc, 0x1, 0x1);
        gbc.writeMem(0x63cd, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x3203);
        EXPECT(gbc.pc(), 0x63cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01A9
        gbc.setState(0xa281, 0x10ab, 0x26e0, 0x56cf, 0x9bec, 0x1c81, 0x1, 0x1);
        gbc.writeMem(0xa281, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x10ab);
        EXPECT(gbc.pc(), 0xa283);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa281), 0xcb);
        EXPECT(gbc.readMem(0xa282), 0xf1);
        // CB F1 01AA
        gbc.setState(0xc656, 0x2c0f, 0x92f0, 0x1b38, 0x3c59, 0xa2a8, 0x1, 0x1);
        gbc.writeMem(0xc656, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x2c0f);
        EXPECT(gbc.pc(), 0xc658);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc656), 0xcb);
        EXPECT(gbc.readMem(0xc657), 0xf1);
        // CB F1 01AB
        gbc.setState(0x7d4d, 0x80e8, 0x2460, 0x479e, 0x28e1, 0xaf1, 0x0, 0x1);
        gbc.writeMem(0x7d4d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x80e8);
        EXPECT(gbc.pc(), 0x7d4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01AC
        gbc.setState(0xc387, 0x2d46, 0x5e00, 0x18ca, 0x9e1f, 0xd540, 0x0, 0x1);
        gbc.writeMem(0xc387, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x2d46);
        EXPECT(gbc.pc(), 0xc389);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc387), 0xcb);
        EXPECT(gbc.readMem(0xc388), 0xf1);
        // CB F1 01AD
        gbc.setState(0x67cb, 0x45f8, 0xe810, 0xa8c6, 0xec76, 0xc25c, 0x1, 0x1);
        gbc.writeMem(0x67cb, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x45f8);
        EXPECT(gbc.pc(), 0x67cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 01AF
        gbc.setState(0x59a9, 0x8228, 0x34f0, 0x8ae9, 0x69a2, 0xd280, 0x0, 0x1);
        gbc.writeMem(0x59a9, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x8228);
        EXPECT(gbc.pc(), 0x59ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 01B0
        gbc.setState(0x8397, 0x7e9f, 0xfe30, 0x4b43, 0x5b8e, 0x8b47, 0x1, 0x0);
        gbc.writeMem(0x8397, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x7e9f);
        EXPECT(gbc.pc(), 0x8399);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8397), 0xcb);
        EXPECT(gbc.readMem(0x8398), 0xf1);
        // CB F1 01B1
        gbc.setState(0xbd36, 0x1763, 0x4000, 0x138f, 0x5c6, 0xf885, 0x1, 0x0);
        gbc.writeMem(0xbd36, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x1763);
        EXPECT(gbc.pc(), 0xbd38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd36), 0xcb);
        EXPECT(gbc.readMem(0xbd37), 0xf1);
        // CB F1 01B2
        gbc.setState(0x378b, 0x5cbe, 0xde40, 0x4803, 0x4ebb, 0xe36, 0x1, 0x0);
        gbc.writeMem(0x378b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x5cbe);
        EXPECT(gbc.pc(), 0x378d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01B3
        gbc.setState(0xea4b, 0xf1b4, 0x4290, 0xf9de, 0xae19, 0x35a, 0x0, 0x1);
        gbc.writeMem(0xea4b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xf1b4);
        EXPECT(gbc.pc(), 0xea4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea4b), 0xcb);
        EXPECT(gbc.readMem(0xea4c), 0xf1);
        // CB F1 01B4
        gbc.setState(0x82fd, 0x7398, 0x8a90, 0x8288, 0xbcf3, 0xb5c3, 0x1, 0x0);
        gbc.writeMem(0x82fd, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x7398);
        EXPECT(gbc.pc(), 0x82ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82fd), 0xcb);
        EXPECT(gbc.readMem(0x82fe), 0xf1);
        // CB F1 01B5
        gbc.setState(0xdadb, 0xe5d0, 0xb310, 0xab4e, 0x212a, 0x2432, 0x0, 0x1);
        gbc.writeMem(0xdadb, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xe5d0);
        EXPECT(gbc.pc(), 0xdadd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdadb), 0xcb);
        EXPECT(gbc.readMem(0xdadc), 0xf1);
        // CB F1 01B6
        gbc.setState(0xb958, 0xc9a3, 0xb4e0, 0xfacd, 0xb62b, 0x3899, 0x0, 0x1);
        gbc.writeMem(0xb958, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xc9a3);
        EXPECT(gbc.pc(), 0xb95a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb958), 0xcb);
        EXPECT(gbc.readMem(0xb959), 0xf1);
        // CB F1 01B7
        gbc.setState(0x2482, 0xdf58, 0x8d50, 0x25a8, 0x476f, 0x1392, 0x0, 0x1);
        gbc.writeMem(0x2482, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xdf58);
        EXPECT(gbc.pc(), 0x2484);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 01B8
        gbc.setState(0x2f9f, 0xc15f, 0xc210, 0x3e97, 0xdc0c, 0x5528, 0x0, 0x0);
        gbc.writeMem(0x2f9f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xc15f);
        EXPECT(gbc.pc(), 0x2fa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 01B9
        gbc.setState(0x9f21, 0x508, 0x23b0, 0x222b, 0x77d6, 0x8bd5, 0x1, 0x1);
        gbc.writeMem(0x9f21, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x508);
        EXPECT(gbc.pc(), 0x9f23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f21), 0xcb);
        EXPECT(gbc.readMem(0x9f22), 0xf1);
        // CB F1 01BA
        gbc.setState(0xc61, 0xb93, 0xd160, 0x4070, 0x2b5d, 0xe19e, 0x1, 0x0);
        gbc.writeMem(0xc61, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xb93);
        EXPECT(gbc.pc(), 0xc63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01BB
        gbc.setState(0xa30e, 0xc68d, 0xe5f0, 0xf818, 0xebd9, 0xcce2, 0x0, 0x0);
        gbc.writeMem(0xa30e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xc68d);
        EXPECT(gbc.pc(), 0xa310);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa30e), 0xcb);
        EXPECT(gbc.readMem(0xa30f), 0xf1);
        // CB F1 01BC
        gbc.setState(0x61a5, 0x4852, 0xe320, 0x1b37, 0xa9be, 0x9950, 0x1, 0x1);
        gbc.writeMem(0x61a5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x4852);
        EXPECT(gbc.pc(), 0x61a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01BD
        gbc.setState(0x8c49, 0x52db, 0xdac0, 0x3bd6, 0x8e5d, 0xff39, 0x1, 0x0);
        gbc.writeMem(0x8c49, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x52db);
        EXPECT(gbc.pc(), 0x8c4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c49), 0xcb);
        EXPECT(gbc.readMem(0x8c4a), 0xf1);
        // CB F1 01BE
        gbc.setState(0xadb, 0x1429, 0x6160, 0xaf48, 0x7789, 0x3634, 0x0, 0x1);
        gbc.writeMem(0xadb, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x1429);
        EXPECT(gbc.pc(), 0xadd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01BF
        gbc.setState(0x6030, 0xbb58, 0xc5e0, 0xa4bd, 0xcbda, 0x1292, 0x1, 0x0);
        gbc.writeMem(0x6030, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xbb58);
        EXPECT(gbc.pc(), 0x6032);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01C0
        gbc.setState(0x6ada, 0xe157, 0x5b80, 0x8e97, 0x7f90, 0x1ea, 0x0, 0x0);
        gbc.writeMem(0x6ada, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xe157);
        EXPECT(gbc.pc(), 0x6adc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01C1
        gbc.setState(0x9223, 0xbfb0, 0x30, 0x656f, 0x8cbb, 0xddd1, 0x0, 0x1);
        gbc.writeMem(0x9223, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xbfb0);
        EXPECT(gbc.pc(), 0x9225);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9223), 0xcb);
        EXPECT(gbc.readMem(0x9224), 0xf1);
        // CB F1 01C2
        gbc.setState(0x7054, 0xddd3, 0x2f10, 0xe0a5, 0x94f1, 0xe912, 0x0, 0x0);
        gbc.writeMem(0x7054, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xddd3);
        EXPECT(gbc.pc(), 0x7056);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 01C3
        gbc.setState(0x7320, 0xb6ad, 0x6100, 0xafd0, 0x7b63, 0xdaa6, 0x1, 0x0);
        gbc.writeMem(0x7320, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xb6ad);
        EXPECT(gbc.pc(), 0x7322);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01C5
        gbc.setState(0x6afc, 0x24e5, 0x6cc0, 0x7d1f, 0x228c, 0x9faa, 0x0, 0x1);
        gbc.writeMem(0x6afc, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x24e5);
        EXPECT(gbc.pc(), 0x6afe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01C6
        gbc.setState(0xdab5, 0x470f, 0x700, 0x1b4d, 0x87b4, 0x2c4b, 0x1, 0x0);
        gbc.writeMem(0xdab5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x470f);
        EXPECT(gbc.pc(), 0xdab7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdab5), 0xcb);
        EXPECT(gbc.readMem(0xdab6), 0xf1);
        // CB F1 01C7
        gbc.setState(0x1d94, 0xe462, 0x390, 0xdc66, 0x2670, 0x76f2, 0x0, 0x0);
        gbc.writeMem(0x1d94, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe462);
        EXPECT(gbc.pc(), 0x1d96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 01C8
        gbc.setState(0x2caa, 0x12f5, 0x7560, 0xebd5, 0x2118, 0xc003, 0x0, 0x0);
        gbc.writeMem(0x2caa, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x12f5);
        EXPECT(gbc.pc(), 0x2cac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01CA
        gbc.setState(0xbf9, 0x4831, 0xde90, 0xb3c, 0xb65c, 0x2bb6, 0x1, 0x0);
        gbc.writeMem(0xbf9, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x4831);
        EXPECT(gbc.pc(), 0xbfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 01CB
        gbc.setState(0x5487, 0x3a48, 0x67c0, 0x270c, 0xe4c2, 0xd209, 0x0, 0x1);
        gbc.writeMem(0x5487, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x3a48);
        EXPECT(gbc.pc(), 0x5489);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01CC
        gbc.setState(0x1d5b, 0x89f7, 0x3890, 0x6b1d, 0x25d3, 0x9bf2, 0x1, 0x0);
        gbc.writeMem(0x1d5b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x89f7);
        EXPECT(gbc.pc(), 0x1d5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 01CD
        gbc.setState(0xeae1, 0xe931, 0x6c10, 0x6fc, 0xafc6, 0x36bc, 0x0, 0x0);
        gbc.writeMem(0xeae1, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xe931);
        EXPECT(gbc.pc(), 0xeae3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeae1), 0xcb);
        EXPECT(gbc.readMem(0xeae2), 0xf1);
        // CB F1 01CE
        gbc.setState(0xd691, 0x6b24, 0xd290, 0xc433, 0x45d5, 0xb59c, 0x0, 0x1);
        gbc.writeMem(0xd691, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x6b24);
        EXPECT(gbc.pc(), 0xd693);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd691), 0xcb);
        EXPECT(gbc.readMem(0xd692), 0xf1);
        // CB F1 01CF
        gbc.setState(0x72ba, 0xc34f, 0x9db0, 0xe313, 0x5186, 0xc471, 0x1, 0x0);
        gbc.writeMem(0x72ba, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xc34f);
        EXPECT(gbc.pc(), 0x72bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 01D0
        gbc.setState(0x6cb2, 0xa4f6, 0xca50, 0x525d, 0x178a, 0x3bd8, 0x0, 0x0);
        gbc.writeMem(0x6cb2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xa4f6);
        EXPECT(gbc.pc(), 0x6cb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 01D1
        gbc.setState(0x583f, 0x93dc, 0x2be0, 0x995d, 0xf9ee, 0xad64, 0x0, 0x0);
        gbc.writeMem(0x583f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x93dc);
        EXPECT(gbc.pc(), 0x5841);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01D2
        gbc.setState(0xa970, 0x436b, 0xc700, 0x37d3, 0x3602, 0x7af5, 0x0, 0x0);
        gbc.writeMem(0xa970, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x436b);
        EXPECT(gbc.pc(), 0xa972);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa970), 0xcb);
        EXPECT(gbc.readMem(0xa971), 0xf1);
        // CB F1 01D3
        gbc.setState(0xeb4e, 0x6b0f, 0x6660, 0x62f5, 0x23a3, 0xdfbe, 0x1, 0x1);
        gbc.writeMem(0xeb4e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x6b0f);
        EXPECT(gbc.pc(), 0xeb50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb4e), 0xcb);
        EXPECT(gbc.readMem(0xeb4f), 0xf1);
        // CB F1 01D4
        gbc.setState(0xe26e, 0xfb07, 0x4340, 0xba15, 0xf39f, 0x6cba, 0x0, 0x0);
        gbc.writeMem(0xe26e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xfb07);
        EXPECT(gbc.pc(), 0xe270);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe26e), 0xcb);
        EXPECT(gbc.readMem(0xe26f), 0xf1);
        // CB F1 01D5
        gbc.setState(0xcc00, 0xe256, 0xdcf0, 0x97f6, 0xca4e, 0x6b76, 0x0, 0x0);
        gbc.writeMem(0xcc00, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xe256);
        EXPECT(gbc.pc(), 0xcc02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc00), 0xcb);
        EXPECT(gbc.readMem(0xcc01), 0xf1);
        // CB F1 01D7
        gbc.setState(0x49d2, 0xffbd, 0x5570, 0x2b9f, 0x7325, 0xe758, 0x1, 0x0);
        gbc.writeMem(0x49d2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xffbd);
        EXPECT(gbc.pc(), 0x49d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 01D8
        gbc.setState(0x9b42, 0xa69a, 0xd50, 0x4ad9, 0xdd95, 0xd01, 0x0, 0x0);
        gbc.writeMem(0x9b42, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xa69a);
        EXPECT(gbc.pc(), 0x9b44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b42), 0xcb);
        EXPECT(gbc.readMem(0x9b43), 0xf1);
        // CB F1 01D9
        gbc.setState(0xb4f0, 0x783b, 0x8020, 0x8ada, 0xa409, 0x2e8d, 0x0, 0x1);
        gbc.writeMem(0xb4f0, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x783b);
        EXPECT(gbc.pc(), 0xb4f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4f0), 0xcb);
        EXPECT(gbc.readMem(0xb4f1), 0xf1);
        // CB F1 01DA
        gbc.setState(0xb408, 0xccbc, 0xc3c0, 0x1e7f, 0xb74a, 0xf0b7, 0x1, 0x1);
        gbc.writeMem(0xb408, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xccbc);
        EXPECT(gbc.pc(), 0xb40a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb408), 0xcb);
        EXPECT(gbc.readMem(0xb409), 0xf1);
        // CB F1 01DB
        gbc.setState(0x7b92, 0x9efe, 0xed00, 0xedd0, 0x1676, 0xb09, 0x0, 0x1);
        gbc.writeMem(0x7b92, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x9efe);
        EXPECT(gbc.pc(), 0x7b94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01DC
        gbc.setState(0x13c5, 0x911a, 0xbff0, 0x759b, 0xeff1, 0xcdb8, 0x0, 0x1);
        gbc.writeMem(0x13c5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x911a);
        EXPECT(gbc.pc(), 0x13c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 01DD
        gbc.setState(0x75d1, 0x9294, 0x6220, 0x7a06, 0x2313, 0x2833, 0x1, 0x1);
        gbc.writeMem(0x75d1, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x9294);
        EXPECT(gbc.pc(), 0x75d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01DE
        gbc.setState(0x513e, 0x5da, 0xec40, 0x4caa, 0x7a73, 0xacca, 0x0, 0x1);
        gbc.writeMem(0x513e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x5da);
        EXPECT(gbc.pc(), 0x5140);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01DF
        gbc.setState(0x856b, 0x2377, 0x7580, 0x5d3, 0x25f2, 0x6858, 0x1, 0x0);
        gbc.writeMem(0x856b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x2377);
        EXPECT(gbc.pc(), 0x856d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x856b), 0xcb);
        EXPECT(gbc.readMem(0x856c), 0xf1);
        // CB F1 01E1
        gbc.setState(0xbd0b, 0xb78, 0x86d0, 0x678f, 0x2fb9, 0x309d, 0x1, 0x0);
        gbc.writeMem(0xbd0b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xb78);
        EXPECT(gbc.pc(), 0xbd0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd0b), 0xcb);
        EXPECT(gbc.readMem(0xbd0c), 0xf1);
        // CB F1 01E2
        gbc.setState(0x3af, 0x98b2, 0x2400, 0xe709, 0xea31, 0xf0eb, 0x1, 0x1);
        gbc.writeMem(0x3af, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x98b2);
        EXPECT(gbc.pc(), 0x3b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01E3
        gbc.setState(0xa18c, 0xb175, 0x8040, 0x2f1b, 0x3eca, 0xba16, 0x0, 0x1);
        gbc.writeMem(0xa18c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xb175);
        EXPECT(gbc.pc(), 0xa18e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa18c), 0xcb);
        EXPECT(gbc.readMem(0xa18d), 0xf1);
        // CB F1 01E4
        gbc.setState(0x338b, 0x5361, 0x5d20, 0x501d, 0xee73, 0x3e37, 0x0, 0x1);
        gbc.writeMem(0x338b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x5361);
        EXPECT(gbc.pc(), 0x338d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01E5
        gbc.setState(0xb555, 0xe354, 0x2180, 0xe4dc, 0x8044, 0x5ac4, 0x1, 0x0);
        gbc.writeMem(0xb555, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xe354);
        EXPECT(gbc.pc(), 0xb557);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb555), 0xcb);
        EXPECT(gbc.readMem(0xb556), 0xf1);
        // CB F1 01E6
        gbc.setState(0x502d, 0xe8bf, 0x480, 0x98f, 0x8c6e, 0x8fa5, 0x0, 0x1);
        gbc.writeMem(0x502d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xe8bf);
        EXPECT(gbc.pc(), 0x502f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01E7
        gbc.setState(0x9e3b, 0x4d0b, 0xe140, 0xeedd, 0x2a86, 0x26e1, 0x0, 0x0);
        gbc.writeMem(0x9e3b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x4d0b);
        EXPECT(gbc.pc(), 0x9e3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e3b), 0xcb);
        EXPECT(gbc.readMem(0x9e3c), 0xf1);
        // CB F1 01E8
        gbc.setState(0xa760, 0xb121, 0x8640, 0x956a, 0x6551, 0xdbad, 0x0, 0x0);
        gbc.writeMem(0xa760, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xb121);
        EXPECT(gbc.pc(), 0xa762);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa760), 0xcb);
        EXPECT(gbc.readMem(0xa761), 0xf1);
        // CB F1 01E9
        gbc.setState(0x3569, 0xb81d, 0x7aa0, 0xdc8f, 0xe63a, 0xbc94, 0x1, 0x0);
        gbc.writeMem(0x3569, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xb81d);
        EXPECT(gbc.pc(), 0x356b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01EA
        gbc.setState(0x3d56, 0x933c, 0x6f30, 0xa016, 0x16e3, 0xca76, 0x0, 0x0);
        gbc.writeMem(0x3d56, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x933c);
        EXPECT(gbc.pc(), 0x3d58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 01EB
        gbc.setState(0xb3c2, 0xaaea, 0x3420, 0x2d2c, 0xb99c, 0x17bb, 0x0, 0x0);
        gbc.writeMem(0xb3c2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xaaea);
        EXPECT(gbc.pc(), 0xb3c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3c2), 0xcb);
        EXPECT(gbc.readMem(0xb3c3), 0xf1);
        // CB F1 01EC
        gbc.setState(0x5f47, 0x9bf4, 0xd10, 0x5f73, 0xf9bd, 0xa5da, 0x1, 0x0);
        gbc.writeMem(0x5f47, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x9bf4);
        EXPECT(gbc.pc(), 0x5f49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 01ED
        gbc.setState(0xaa8f, 0x4b04, 0xb8d0, 0xae77, 0xa050, 0x82c, 0x1, 0x0);
        gbc.writeMem(0xaa8f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x4b04);
        EXPECT(gbc.pc(), 0xaa91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa8f), 0xcb);
        EXPECT(gbc.readMem(0xaa90), 0xf1);
        // CB F1 01EE
        gbc.setState(0x2c26, 0x5119, 0x2000, 0xef6d, 0x3f7, 0xafc3, 0x0, 0x0);
        gbc.writeMem(0x2c26, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x5119);
        EXPECT(gbc.pc(), 0x2c28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01EF
        gbc.setState(0xa50a, 0x2f44, 0x80b0, 0xfd8, 0x8c69, 0x3af, 0x1, 0x1);
        gbc.writeMem(0xa50a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x2f44);
        EXPECT(gbc.pc(), 0xa50c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa50a), 0xcb);
        EXPECT(gbc.readMem(0xa50b), 0xf1);
        // CB F1 01F0
        gbc.setState(0xeee9, 0x208c, 0x2740, 0xd066, 0xacb2, 0x69b6, 0x0, 0x1);
        gbc.writeMem(0xeee9, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x208c);
        EXPECT(gbc.pc(), 0xeeeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeee9), 0xcb);
        EXPECT(gbc.readMem(0xeeea), 0xf1);
        // CB F1 01F1
        gbc.setState(0xae3a, 0xb415, 0xe4b0, 0xd224, 0xe33d, 0x2f6b, 0x1, 0x1);
        gbc.writeMem(0xae3a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xb415);
        EXPECT(gbc.pc(), 0xae3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae3a), 0xcb);
        EXPECT(gbc.readMem(0xae3b), 0xf1);
        // CB F1 01F2
        gbc.setState(0xaa28, 0x729a, 0x71a0, 0x46e6, 0xdab9, 0xd474, 0x0, 0x1);
        gbc.writeMem(0xaa28, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x729a);
        EXPECT(gbc.pc(), 0xaa2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa28), 0xcb);
        EXPECT(gbc.readMem(0xaa29), 0xf1);
        // CB F1 01F3
        gbc.setState(0x89be, 0x7506, 0x3f0, 0xfe3d, 0x3479, 0x7fe4, 0x0, 0x0);
        gbc.writeMem(0x89be, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x7506);
        EXPECT(gbc.pc(), 0x89c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89be), 0xcb);
        EXPECT(gbc.readMem(0x89bf), 0xf1);
        // CB F1 01F4
        gbc.setState(0x1629, 0x2b88, 0xbd50, 0x8e2d, 0xa86b, 0xfbd7, 0x0, 0x1);
        gbc.writeMem(0x1629, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x2b88);
        EXPECT(gbc.pc(), 0x162b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 01F5
        gbc.setState(0xeb63, 0xbb7f, 0x4e00, 0xc699, 0xbbc0, 0xca52, 0x0, 0x1);
        gbc.writeMem(0xeb63, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xbb7f);
        EXPECT(gbc.pc(), 0xeb65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb63), 0xcb);
        EXPECT(gbc.readMem(0xeb64), 0xf1);
        // CB F1 01F6
        gbc.setState(0x9330, 0xa9ac, 0xac30, 0xf2ca, 0xd0d, 0xbfdd, 0x0, 0x0);
        gbc.writeMem(0x9330, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xa9ac);
        EXPECT(gbc.pc(), 0x9332);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9330), 0xcb);
        EXPECT(gbc.readMem(0x9331), 0xf1);
        // CB F1 01F7
        gbc.setState(0xcacb, 0x4472, 0xc1c0, 0x77de, 0x28e4, 0x3960, 0x1, 0x1);
        gbc.writeMem(0xcacb, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x4472);
        EXPECT(gbc.pc(), 0xcacd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcacb), 0xcb);
        EXPECT(gbc.readMem(0xcacc), 0xf1);
        // CB F1 01F8
        gbc.setState(0x1f90, 0x5023, 0x2cb0, 0xaecd, 0xfa33, 0x4b61, 0x0, 0x0);
        gbc.writeMem(0x1f90, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x5023);
        EXPECT(gbc.pc(), 0x1f92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 01F9
        gbc.setState(0x7308, 0x52c4, 0x7eb0, 0x8d59, 0x35d6, 0xf53e, 0x1, 0x0);
        gbc.writeMem(0x7308, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x52c4);
        EXPECT(gbc.pc(), 0x730a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 01FA
        gbc.setState(0xa4dd, 0x6d0a, 0xaf50, 0x9893, 0x3115, 0x2197, 0x1, 0x1);
        gbc.writeMem(0xa4dd, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x6d0a);
        EXPECT(gbc.pc(), 0xa4df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4dd), 0xcb);
        EXPECT(gbc.readMem(0xa4de), 0xf1);
        // CB F1 01FB
        gbc.setState(0x32f3, 0xac2, 0x9150, 0x652f, 0x8d57, 0xe9eb, 0x1, 0x0);
        gbc.writeMem(0x32f3, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xac2);
        EXPECT(gbc.pc(), 0x32f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 01FC
        gbc.setState(0x836a, 0x14e0, 0xe7b0, 0x4db6, 0xdef6, 0x5d59, 0x0, 0x1);
        gbc.writeMem(0x836a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x14e0);
        EXPECT(gbc.pc(), 0x836c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x836a), 0xcb);
        EXPECT(gbc.readMem(0x836b), 0xf1);
        // CB F1 01FD
        gbc.setState(0xb042, 0xbcbd, 0x59f0, 0x6607, 0xcbe6, 0xe3c5, 0x1, 0x0);
        gbc.writeMem(0xb042, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xbcbd);
        EXPECT(gbc.pc(), 0xb044);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb042), 0xcb);
        EXPECT(gbc.readMem(0xb043), 0xf1);
        // CB F1 01FE
        gbc.setState(0x3f2d, 0x85e0, 0x6020, 0xfcf1, 0xe9ef, 0x7259, 0x0, 0x1);
        gbc.writeMem(0x3f2d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x85e0);
        EXPECT(gbc.pc(), 0x3f2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 01FF
        gbc.setState(0xa280, 0x6a6b, 0xa220, 0x8439, 0x2bcf, 0xd6bb, 0x1, 0x1);
        gbc.writeMem(0xa280, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x6a6b);
        EXPECT(gbc.pc(), 0xa282);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa280), 0xcb);
        EXPECT(gbc.readMem(0xa281), 0xf1);
        // CB F1 0200
        gbc.setState(0x56fe, 0x6bf5, 0xc020, 0xe8f3, 0x2594, 0xb51d, 0x1, 0x0);
        gbc.writeMem(0x56fe, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x6bf5);
        EXPECT(gbc.pc(), 0x5700);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0201
        gbc.setState(0x18de, 0x6fa2, 0x4db0, 0xaad6, 0xaf0b, 0x2793, 0x1, 0x1);
        gbc.writeMem(0x18de, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x6fa2);
        EXPECT(gbc.pc(), 0x18e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0202
        gbc.setState(0x640b, 0x273a, 0x6b20, 0x145b, 0x5c6d, 0x546e, 0x1, 0x0);
        gbc.writeMem(0x640b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x273a);
        EXPECT(gbc.pc(), 0x640d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0203
        gbc.setState(0xd424, 0x850, 0xf9a0, 0x5b14, 0xf6a5, 0x4daf, 0x1, 0x1);
        gbc.writeMem(0xd424, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x850);
        EXPECT(gbc.pc(), 0xd426);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd424), 0xcb);
        EXPECT(gbc.readMem(0xd425), 0xf1);
        // CB F1 0204
        gbc.setState(0xbb67, 0x14fc, 0x6f10, 0x1b79, 0x1e10, 0x94f0, 0x0, 0x1);
        gbc.writeMem(0xbb67, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x14fc);
        EXPECT(gbc.pc(), 0xbb69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb67), 0xcb);
        EXPECT(gbc.readMem(0xbb68), 0xf1);
        // CB F1 0205
        gbc.setState(0x7443, 0x6313, 0x7ad0, 0xcc7b, 0x7c7f, 0x98c1, 0x0, 0x1);
        gbc.writeMem(0x7443, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x6313);
        EXPECT(gbc.pc(), 0x7445);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0206
        gbc.setState(0xb2b1, 0xe1cb, 0x4b00, 0x930, 0xdd66, 0x3df4, 0x1, 0x1);
        gbc.writeMem(0xb2b1, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xe1cb);
        EXPECT(gbc.pc(), 0xb2b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2b1), 0xcb);
        EXPECT(gbc.readMem(0xb2b2), 0xf1);
        // CB F1 0207
        gbc.setState(0xaa2e, 0x4482, 0xf6f0, 0x9a26, 0xde55, 0xb583, 0x0, 0x1);
        gbc.writeMem(0xaa2e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x4482);
        EXPECT(gbc.pc(), 0xaa30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa2e), 0xcb);
        EXPECT(gbc.readMem(0xaa2f), 0xf1);
        // CB F1 0208
        gbc.setState(0xc7b7, 0x8aa5, 0xc140, 0xbc58, 0xa280, 0x187d, 0x0, 0x1);
        gbc.writeMem(0xc7b7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x8aa5);
        EXPECT(gbc.pc(), 0xc7b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7b7), 0xcb);
        EXPECT(gbc.readMem(0xc7b8), 0xf1);
        // CB F1 0209
        gbc.setState(0x452, 0x6f04, 0x3690, 0x53b4, 0xf838, 0xe869, 0x1, 0x1);
        gbc.writeMem(0x452, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x6f04);
        EXPECT(gbc.pc(), 0x454);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 020A
        gbc.setState(0x687a, 0xe67c, 0x6620, 0xf84a, 0x63d5, 0xae80, 0x1, 0x1);
        gbc.writeMem(0x687a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xe67c);
        EXPECT(gbc.pc(), 0x687c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 020B
        gbc.setState(0x9df5, 0x767b, 0x6800, 0x2b61, 0xf709, 0x480d, 0x0, 0x1);
        gbc.writeMem(0x9df5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x767b);
        EXPECT(gbc.pc(), 0x9df7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9df5), 0xcb);
        EXPECT(gbc.readMem(0x9df6), 0xf1);
        // CB F1 020C
        gbc.setState(0xe306, 0xd19d, 0x5320, 0xb333, 0x4c7f, 0x40a3, 0x0, 0x0);
        gbc.writeMem(0xe306, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xd19d);
        EXPECT(gbc.pc(), 0xe308);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe306), 0xcb);
        EXPECT(gbc.readMem(0xe307), 0xf1);
        // CB F1 020D
        gbc.setState(0xa41d, 0x2696, 0xe920, 0xa748, 0xa945, 0xaeb1, 0x1, 0x0);
        gbc.writeMem(0xa41d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x2696);
        EXPECT(gbc.pc(), 0xa41f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa41d), 0xcb);
        EXPECT(gbc.readMem(0xa41e), 0xf1);
        // CB F1 020E
        gbc.setState(0x4350, 0xe619, 0xfcd0, 0xf72, 0xc9af, 0xd188, 0x1, 0x0);
        gbc.writeMem(0x4350, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe619);
        EXPECT(gbc.pc(), 0x4352);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 020F
        gbc.setState(0x4cc5, 0x88d7, 0xdd50, 0x8af1, 0xe26a, 0xae68, 0x1, 0x0);
        gbc.writeMem(0x4cc5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x88d7);
        EXPECT(gbc.pc(), 0x4cc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0210
        gbc.setState(0x3874, 0x61e3, 0xc5e0, 0x2a1a, 0x3f8e, 0x29e, 0x1, 0x0);
        gbc.writeMem(0x3874, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x61e3);
        EXPECT(gbc.pc(), 0x3876);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0211
        gbc.setState(0x9ce3, 0xc245, 0x1240, 0x15e1, 0xfd6d, 0x6d2b, 0x0, 0x0);
        gbc.writeMem(0x9ce3, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xc245);
        EXPECT(gbc.pc(), 0x9ce5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ce3), 0xcb);
        EXPECT(gbc.readMem(0x9ce4), 0xf1);
        // CB F1 0212
        gbc.setState(0x17a8, 0x32af, 0xa730, 0xae32, 0x35cc, 0xc4b5, 0x1, 0x0);
        gbc.writeMem(0x17a8, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x32af);
        EXPECT(gbc.pc(), 0x17aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0213
        gbc.setState(0xb949, 0xf75c, 0xc100, 0x8646, 0x230d, 0xc917, 0x0, 0x0);
        gbc.writeMem(0xb949, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xf75c);
        EXPECT(gbc.pc(), 0xb94b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb949), 0xcb);
        EXPECT(gbc.readMem(0xb94a), 0xf1);
        // CB F1 0214
        gbc.setState(0x8d8, 0xc535, 0xe290, 0x701a, 0x69fa, 0xfdf3, 0x0, 0x0);
        gbc.writeMem(0x8d8, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xc535);
        EXPECT(gbc.pc(), 0x8da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0215
        gbc.setState(0x9a5, 0x608a, 0xa3c0, 0xb08f, 0x9c2b, 0xa323, 0x1, 0x1);
        gbc.writeMem(0x9a5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x608a);
        EXPECT(gbc.pc(), 0x9a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0217
        gbc.setState(0x9139, 0x837a, 0xc580, 0xd903, 0x785f, 0xd416, 0x0, 0x0);
        gbc.writeMem(0x9139, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x837a);
        EXPECT(gbc.pc(), 0x913b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9139), 0xcb);
        EXPECT(gbc.readMem(0x913a), 0xf1);
        // CB F1 0218
        gbc.setState(0xa97f, 0x6ca6, 0x4a00, 0x8945, 0x5173, 0xfafa, 0x0, 0x1);
        gbc.writeMem(0xa97f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x6ca6);
        EXPECT(gbc.pc(), 0xa981);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa97f), 0xcb);
        EXPECT(gbc.readMem(0xa980), 0xf1);
        // CB F1 0219
        gbc.setState(0xa29c, 0x83af, 0xbbf0, 0xc313, 0x9a4b, 0x8bca, 0x0, 0x0);
        gbc.writeMem(0xa29c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x83af);
        EXPECT(gbc.pc(), 0xa29e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa29c), 0xcb);
        EXPECT(gbc.readMem(0xa29d), 0xf1);
        // CB F1 021A
        gbc.setState(0x6ef7, 0xb36f, 0xb270, 0x5885, 0xac17, 0x1809, 0x1, 0x0);
        gbc.writeMem(0x6ef7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xb36f);
        EXPECT(gbc.pc(), 0x6ef9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 021B
        gbc.setState(0x85e3, 0x9984, 0x440, 0xe909, 0xcacc, 0xb583, 0x0, 0x1);
        gbc.writeMem(0x85e3, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x9984);
        EXPECT(gbc.pc(), 0x85e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85e3), 0xcb);
        EXPECT(gbc.readMem(0x85e4), 0xf1);
        // CB F1 021C
        gbc.setState(0x3a30, 0x8170, 0xe1c0, 0x51a8, 0x7e8b, 0x2535, 0x0, 0x1);
        gbc.writeMem(0x3a30, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x8170);
        EXPECT(gbc.pc(), 0x3a32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 021E
        gbc.setState(0xc5f7, 0xb084, 0x4970, 0x30e5, 0x2cf5, 0x5b0a, 0x0, 0x0);
        gbc.writeMem(0xc5f7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb084);
        EXPECT(gbc.pc(), 0xc5f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5f7), 0xcb);
        EXPECT(gbc.readMem(0xc5f8), 0xf1);
        // CB F1 021F
        gbc.setState(0x6469, 0x5433, 0xbc0, 0xdef, 0xac60, 0xd4a3, 0x1, 0x0);
        gbc.writeMem(0x6469, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x5433);
        EXPECT(gbc.pc(), 0x646b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0221
        gbc.setState(0xcaa7, 0x5521, 0x21e0, 0xa59e, 0xa66, 0x9263, 0x1, 0x1);
        gbc.writeMem(0xcaa7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x5521);
        EXPECT(gbc.pc(), 0xcaa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaa7), 0xcb);
        EXPECT(gbc.readMem(0xcaa8), 0xf1);
        // CB F1 0222
        gbc.setState(0xb362, 0xceee, 0xfa60, 0x846c, 0xace6, 0xa48c, 0x0, 0x1);
        gbc.writeMem(0xb362, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xceee);
        EXPECT(gbc.pc(), 0xb364);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb362), 0xcb);
        EXPECT(gbc.readMem(0xb363), 0xf1);
        // CB F1 0223
        gbc.setState(0x18b1, 0x38, 0x4b00, 0xdda, 0xa783, 0xd17b, 0x1, 0x0);
        gbc.writeMem(0x18b1, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x38);
        EXPECT(gbc.pc(), 0x18b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0224
        gbc.setState(0x3054, 0x52eb, 0x1ff0, 0xbd09, 0x4212, 0x7414, 0x0, 0x1);
        gbc.writeMem(0x3054, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x52eb);
        EXPECT(gbc.pc(), 0x3056);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0225
        gbc.setState(0xe817, 0x999c, 0x1fb0, 0xd0ee, 0xb4c1, 0xd150, 0x1, 0x1);
        gbc.writeMem(0xe817, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x999c);
        EXPECT(gbc.pc(), 0xe819);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe817), 0xcb);
        EXPECT(gbc.readMem(0xe818), 0xf1);
        // CB F1 0226
        gbc.setState(0x3d8c, 0xbdd0, 0x6480, 0xca57, 0xa3de, 0xb0ba, 0x0, 0x0);
        gbc.writeMem(0x3d8c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xbdd0);
        EXPECT(gbc.pc(), 0x3d8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0227
        gbc.setState(0xacd7, 0x62cc, 0xe2e0, 0xaf81, 0xef11, 0x88f1, 0x1, 0x0);
        gbc.writeMem(0xacd7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x62cc);
        EXPECT(gbc.pc(), 0xacd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacd7), 0xcb);
        EXPECT(gbc.readMem(0xacd8), 0xf1);
        // CB F1 0229
        gbc.setState(0x62db, 0xa2ab, 0xc530, 0xd526, 0x5daa, 0x9c08, 0x1, 0x1);
        gbc.writeMem(0x62db, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xa2ab);
        EXPECT(gbc.pc(), 0x62dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 022B
        gbc.setState(0xadf5, 0xd33a, 0x6950, 0x6687, 0xd3ba, 0xe6ab, 0x0, 0x0);
        gbc.writeMem(0xadf5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xd33a);
        EXPECT(gbc.pc(), 0xadf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadf5), 0xcb);
        EXPECT(gbc.readMem(0xadf6), 0xf1);
        // CB F1 022D
        gbc.setState(0x417c, 0xea96, 0x3b00, 0x2b25, 0x71a, 0xad7c, 0x0, 0x1);
        gbc.writeMem(0x417c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xea96);
        EXPECT(gbc.pc(), 0x417e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 022E
        gbc.setState(0xe731, 0xf9fe, 0x4610, 0x3a5f, 0x5861, 0x8bae, 0x1, 0x0);
        gbc.writeMem(0xe731, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xf9fe);
        EXPECT(gbc.pc(), 0xe733);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe731), 0xcb);
        EXPECT(gbc.readMem(0xe732), 0xf1);
        // CB F1 022F
        gbc.setState(0x4eb5, 0xfdb5, 0x4130, 0xcfe1, 0x62d8, 0x4776, 0x0, 0x0);
        gbc.writeMem(0x4eb5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xfdb5);
        EXPECT(gbc.pc(), 0x4eb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0231
        gbc.setState(0x5038, 0x7b58, 0x190, 0xebeb, 0xd2a3, 0xaa5d, 0x0, 0x1);
        gbc.writeMem(0x5038, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x7b58);
        EXPECT(gbc.pc(), 0x503a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0232
        gbc.setState(0xef33, 0xedcf, 0x9f60, 0x1e51, 0x19bd, 0x2b0, 0x1, 0x1);
        gbc.writeMem(0xef33, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xedcf);
        EXPECT(gbc.pc(), 0xef35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef33), 0xcb);
        EXPECT(gbc.readMem(0xef34), 0xf1);
        // CB F1 0233
        gbc.setState(0x8bbf, 0xeaf1, 0x5830, 0x9479, 0x6fbc, 0x3708, 0x1, 0x0);
        gbc.writeMem(0x8bbf, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xeaf1);
        EXPECT(gbc.pc(), 0x8bc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bbf), 0xcb);
        EXPECT(gbc.readMem(0x8bc0), 0xf1);
        // CB F1 0234
        gbc.setState(0x5d63, 0x111, 0xa9e0, 0x5260, 0x1384, 0x1b60, 0x0, 0x1);
        gbc.writeMem(0x5d63, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x111);
        EXPECT(gbc.pc(), 0x5d65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0235
        gbc.setState(0xc42, 0x2466, 0x3a10, 0xba2, 0x2e48, 0xc16, 0x0, 0x1);
        gbc.writeMem(0xc42, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x2466);
        EXPECT(gbc.pc(), 0xc44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0236
        gbc.setState(0x4982, 0x2716, 0x84c0, 0x9a7f, 0x4973, 0x3cbd, 0x1, 0x0);
        gbc.writeMem(0x4982, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x2716);
        EXPECT(gbc.pc(), 0x4984);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0238
        gbc.setState(0x97, 0xf058, 0x33b0, 0x156, 0xeeb, 0xae60, 0x0, 0x1);
        gbc.writeMem(0x97, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xf058);
        EXPECT(gbc.pc(), 0x99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0239
        gbc.setState(0xd2f3, 0xf9fa, 0xe3b0, 0xca98, 0x17ba, 0xb2c1, 0x0, 0x0);
        gbc.writeMem(0xd2f3, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xf9fa);
        EXPECT(gbc.pc(), 0xd2f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2f3), 0xcb);
        EXPECT(gbc.readMem(0xd2f4), 0xf1);
        // CB F1 023A
        gbc.setState(0xee36, 0x8902, 0xd570, 0xeded, 0x71a3, 0x38f1, 0x0, 0x0);
        gbc.writeMem(0xee36, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x8902);
        EXPECT(gbc.pc(), 0xee38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee36), 0xcb);
        EXPECT(gbc.readMem(0xee37), 0xf1);
        // CB F1 023B
        gbc.setState(0x3bea, 0xc766, 0xb00, 0x1d36, 0xe31d, 0xc3dc, 0x1, 0x0);
        gbc.writeMem(0x3bea, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xc766);
        EXPECT(gbc.pc(), 0x3bec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 023C
        gbc.setState(0x1d78, 0x71f5, 0xc960, 0xe1f, 0x3a78, 0x643c, 0x1, 0x0);
        gbc.writeMem(0x1d78, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x71f5);
        EXPECT(gbc.pc(), 0x1d7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 023D
        gbc.setState(0xea7d, 0x39d4, 0xe980, 0x3628, 0x596b, 0xda62, 0x1, 0x1);
        gbc.writeMem(0xea7d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x39d4);
        EXPECT(gbc.pc(), 0xea7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea7d), 0xcb);
        EXPECT(gbc.readMem(0xea7e), 0xf1);
        // CB F1 023E
        gbc.setState(0x6d76, 0x7156, 0x24f0, 0x995b, 0x63df, 0xb57c, 0x1, 0x0);
        gbc.writeMem(0x6d76, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x7156);
        EXPECT(gbc.pc(), 0x6d78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 023F
        gbc.setState(0xa917, 0xdbbb, 0xd140, 0xc2d, 0xf69d, 0xee3b, 0x1, 0x0);
        gbc.writeMem(0xa917, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xdbbb);
        EXPECT(gbc.pc(), 0xa919);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa917), 0xcb);
        EXPECT(gbc.readMem(0xa918), 0xf1);
        // CB F1 0240
        gbc.setState(0x1420, 0x1065, 0xad70, 0xca32, 0x1bc4, 0xd355, 0x0, 0x1);
        gbc.writeMem(0x1420, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x1065);
        EXPECT(gbc.pc(), 0x1422);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0241
        gbc.setState(0xb2b6, 0x32da, 0x4f70, 0x25b5, 0x737a, 0x3097, 0x1, 0x0);
        gbc.writeMem(0xb2b6, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x32da);
        EXPECT(gbc.pc(), 0xb2b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2b6), 0xcb);
        EXPECT(gbc.readMem(0xb2b7), 0xf1);
        // CB F1 0242
        gbc.setState(0x9347, 0xbeef, 0x1860, 0xcb84, 0xb227, 0xb689, 0x0, 0x0);
        gbc.writeMem(0x9347, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xbeef);
        EXPECT(gbc.pc(), 0x9349);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9347), 0xcb);
        EXPECT(gbc.readMem(0x9348), 0xf1);
        // CB F1 0243
        gbc.setState(0x4e35, 0x8eaf, 0x8320, 0x950, 0xe7ee, 0x833a, 0x1, 0x0);
        gbc.writeMem(0x4e35, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x8eaf);
        EXPECT(gbc.pc(), 0x4e37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0245
        gbc.setState(0x76f8, 0x9787, 0xc90, 0x5011, 0xc122, 0xa331, 0x0, 0x0);
        gbc.writeMem(0x76f8, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x9787);
        EXPECT(gbc.pc(), 0x76fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0246
        gbc.setState(0x8ee9, 0xc71a, 0x54b0, 0x9baf, 0xf0ef, 0x12db, 0x0, 0x0);
        gbc.writeMem(0x8ee9, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xc71a);
        EXPECT(gbc.pc(), 0x8eeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ee9), 0xcb);
        EXPECT(gbc.readMem(0x8eea), 0xf1);
        // CB F1 0247
        gbc.setState(0xf39, 0x5535, 0xd1e0, 0x637d, 0xf615, 0xa487, 0x1, 0x0);
        gbc.writeMem(0xf39, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x5535);
        EXPECT(gbc.pc(), 0xf3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0248
        gbc.setState(0xe83f, 0xf627, 0x88f0, 0x98ce, 0x847a, 0x784d, 0x0, 0x0);
        gbc.writeMem(0xe83f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xf627);
        EXPECT(gbc.pc(), 0xe841);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe83f), 0xcb);
        EXPECT(gbc.readMem(0xe840), 0xf1);
        // CB F1 0249
        gbc.setState(0x30b7, 0xf1f5, 0x65a0, 0x901a, 0x4fb8, 0x2f46, 0x1, 0x1);
        gbc.writeMem(0x30b7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xf1f5);
        EXPECT(gbc.pc(), 0x30b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 024A
        gbc.setState(0x4a41, 0x27fa, 0xecb0, 0x5444, 0x85b2, 0xfa42, 0x0, 0x1);
        gbc.writeMem(0x4a41, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x27fa);
        EXPECT(gbc.pc(), 0x4a43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 024B
        gbc.setState(0x9bfe, 0xf5f0, 0xc730, 0xdea9, 0x5ec9, 0x1ec6, 0x1, 0x0);
        gbc.writeMem(0x9bfe, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xf5f0);
        EXPECT(gbc.pc(), 0x9c00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bfe), 0xcb);
        EXPECT(gbc.readMem(0x9bff), 0xf1);
        // CB F1 024C
        gbc.setState(0x3507, 0x407e, 0xa9f0, 0xa9d4, 0x586c, 0x529e, 0x1, 0x0);
        gbc.writeMem(0x3507, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x407e);
        EXPECT(gbc.pc(), 0x3509);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 024D
        gbc.setState(0x2392, 0xca1b, 0x7000, 0x81a0, 0x301e, 0x65e6, 0x0, 0x0);
        gbc.writeMem(0x2392, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xca1b);
        EXPECT(gbc.pc(), 0x2394);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 024E
        gbc.setState(0x5cd9, 0x226a, 0x2160, 0x3d1e, 0x45c3, 0x2ad8, 0x0, 0x0);
        gbc.writeMem(0x5cd9, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x226a);
        EXPECT(gbc.pc(), 0x5cdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 024F
        gbc.setState(0x28ce, 0x25d6, 0xb000, 0x8f7f, 0x8421, 0xbdd3, 0x0, 0x0);
        gbc.writeMem(0x28ce, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x25d6);
        EXPECT(gbc.pc(), 0x28d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0250
        gbc.setState(0x5f5b, 0xa597, 0x9d10, 0x22e5, 0x46df, 0x8fa8, 0x1, 0x0);
        gbc.writeMem(0x5f5b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xa597);
        EXPECT(gbc.pc(), 0x5f5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0251
        gbc.setState(0x7a2, 0x1198, 0x5950, 0xd731, 0x38c2, 0x3415, 0x0, 0x1);
        gbc.writeMem(0x7a2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x1198);
        EXPECT(gbc.pc(), 0x7a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0252
        gbc.setState(0xbb1f, 0xaf88, 0x3480, 0xc788, 0x3dc9, 0xe411, 0x1, 0x0);
        gbc.writeMem(0xbb1f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xaf88);
        EXPECT(gbc.pc(), 0xbb21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb1f), 0xcb);
        EXPECT(gbc.readMem(0xbb20), 0xf1);
        // CB F1 0253
        gbc.setState(0x2bdb, 0xd35d, 0x2e40, 0x61e5, 0x7625, 0x39e, 0x0, 0x1);
        gbc.writeMem(0x2bdb, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xd35d);
        EXPECT(gbc.pc(), 0x2bdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0254
        gbc.setState(0xe8dd, 0x5535, 0x1890, 0xdeb7, 0xc319, 0x9699, 0x0, 0x0);
        gbc.writeMem(0xe8dd, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x5535);
        EXPECT(gbc.pc(), 0xe8df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8dd), 0xcb);
        EXPECT(gbc.readMem(0xe8de), 0xf1);
        // CB F1 0255
        gbc.setState(0xecd2, 0x92b0, 0xd210, 0x45b1, 0x5f2a, 0xa66f, 0x0, 0x0);
        gbc.writeMem(0xecd2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x92b0);
        EXPECT(gbc.pc(), 0xecd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecd2), 0xcb);
        EXPECT(gbc.readMem(0xecd3), 0xf1);
        // CB F1 0256
        gbc.setState(0xd1b0, 0x151b, 0x45c0, 0x6486, 0x9c9a, 0xed12, 0x1, 0x0);
        gbc.writeMem(0xd1b0, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x151b);
        EXPECT(gbc.pc(), 0xd1b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1b0), 0xcb);
        EXPECT(gbc.readMem(0xd1b1), 0xf1);
        // CB F1 0257
        gbc.setState(0x8c3a, 0xb64e, 0x27c0, 0xfb8b, 0x7e05, 0x1359, 0x1, 0x1);
        gbc.writeMem(0x8c3a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xb64e);
        EXPECT(gbc.pc(), 0x8c3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c3a), 0xcb);
        EXPECT(gbc.readMem(0x8c3b), 0xf1);
        // CB F1 0258
        gbc.setState(0x3842, 0x63c6, 0x62f0, 0x72ab, 0xc1d3, 0x66ad, 0x0, 0x0);
        gbc.writeMem(0x3842, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x63c6);
        EXPECT(gbc.pc(), 0x3844);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0259
        gbc.setState(0x8b8e, 0x973, 0x2f10, 0xcfc6, 0x4e52, 0xfd91, 0x1, 0x0);
        gbc.writeMem(0x8b8e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x973);
        EXPECT(gbc.pc(), 0x8b90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b8e), 0xcb);
        EXPECT(gbc.readMem(0x8b8f), 0xf1);
        // CB F1 025A
        gbc.setState(0xc401, 0x8337, 0x6580, 0x36, 0x3a5d, 0xf25b, 0x1, 0x1);
        gbc.writeMem(0xc401, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x8337);
        EXPECT(gbc.pc(), 0xc403);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc401), 0xcb);
        EXPECT(gbc.readMem(0xc402), 0xf1);
        // CB F1 025B
        gbc.setState(0x3f39, 0xd3b9, 0xdcb0, 0xc01e, 0x2c4f, 0xcd80, 0x1, 0x0);
        gbc.writeMem(0x3f39, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xd3b9);
        EXPECT(gbc.pc(), 0x3f3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 025C
        gbc.setState(0xec63, 0xd470, 0xe490, 0x9086, 0x59cb, 0xa2b2, 0x0, 0x0);
        gbc.writeMem(0xec63, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xd470);
        EXPECT(gbc.pc(), 0xec65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec63), 0xcb);
        EXPECT(gbc.readMem(0xec64), 0xf1);
        // CB F1 025D
        gbc.setState(0x4946, 0xe45f, 0x5fe0, 0xd295, 0x89ee, 0x99cb, 0x1, 0x0);
        gbc.writeMem(0x4946, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xe45f);
        EXPECT(gbc.pc(), 0x4948);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 025E
        gbc.setState(0x411f, 0x9768, 0xd8a0, 0x8be0, 0x39cd, 0x9730, 0x1, 0x1);
        gbc.writeMem(0x411f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x9768);
        EXPECT(gbc.pc(), 0x4121);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 025F
        gbc.setState(0x7c96, 0xc31a, 0x17e0, 0x2099, 0xfdb2, 0x973, 0x1, 0x0);
        gbc.writeMem(0x7c96, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xc31a);
        EXPECT(gbc.pc(), 0x7c98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0260
        gbc.setState(0xa2e4, 0xb5cb, 0x2620, 0x3857, 0x490e, 0x842e, 0x1, 0x1);
        gbc.writeMem(0xa2e4, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xb5cb);
        EXPECT(gbc.pc(), 0xa2e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2e4), 0xcb);
        EXPECT(gbc.readMem(0xa2e5), 0xf1);
        // CB F1 0261
        gbc.setState(0xef64, 0x8111, 0x4cb0, 0xd871, 0x2532, 0xa8f6, 0x0, 0x0);
        gbc.writeMem(0xef64, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x8111);
        EXPECT(gbc.pc(), 0xef66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef64), 0xcb);
        EXPECT(gbc.readMem(0xef65), 0xf1);
        // CB F1 0262
        gbc.setState(0xda30, 0x4b45, 0x8b40, 0x734a, 0x1ef0, 0x4cfb, 0x0, 0x1);
        gbc.writeMem(0xda30, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x4b45);
        EXPECT(gbc.pc(), 0xda32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda30), 0xcb);
        EXPECT(gbc.readMem(0xda31), 0xf1);
        // CB F1 0263
        gbc.setState(0x350d, 0xe8c2, 0x6d20, 0x2c5, 0x7da3, 0xe869, 0x1, 0x1);
        gbc.writeMem(0x350d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe8c2);
        EXPECT(gbc.pc(), 0x350f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0264
        gbc.setState(0xac37, 0xfae, 0x56a0, 0x555f, 0x9565, 0x33b3, 0x1, 0x0);
        gbc.writeMem(0xac37, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xfae);
        EXPECT(gbc.pc(), 0xac39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac37), 0xcb);
        EXPECT(gbc.readMem(0xac38), 0xf1);
        // CB F1 0265
        gbc.setState(0x77b0, 0x117, 0x400, 0x92aa, 0x463a, 0xfe6b, 0x1, 0x0);
        gbc.writeMem(0x77b0, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x117);
        EXPECT(gbc.pc(), 0x77b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0266
        gbc.setState(0xeb0d, 0xf4ff, 0x48f0, 0xcb0b, 0x771d, 0x51ce, 0x1, 0x0);
        gbc.writeMem(0xeb0d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xf4ff);
        EXPECT(gbc.pc(), 0xeb0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb0d), 0xcb);
        EXPECT(gbc.readMem(0xeb0e), 0xf1);
        // CB F1 0267
        gbc.setState(0x7840, 0x2226, 0xa700, 0xcf71, 0x7945, 0xbbcc, 0x1, 0x0);
        gbc.writeMem(0x7840, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x2226);
        EXPECT(gbc.pc(), 0x7842);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0268
        gbc.setState(0x73da, 0x13e4, 0x6cb0, 0x1b, 0xb1c9, 0x182c, 0x0, 0x0);
        gbc.writeMem(0x73da, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x13e4);
        EXPECT(gbc.pc(), 0x73dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0269
        gbc.setState(0x7502, 0x25a1, 0x64e0, 0x598f, 0x35f6, 0x70f5, 0x1, 0x1);
        gbc.writeMem(0x7502, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x25a1);
        EXPECT(gbc.pc(), 0x7504);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 026A
        gbc.setState(0x71c4, 0x3ed9, 0xdbf0, 0x5752, 0x369a, 0x460b, 0x1, 0x0);
        gbc.writeMem(0x71c4, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x3ed9);
        EXPECT(gbc.pc(), 0x71c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 026B
        gbc.setState(0x129, 0x803d, 0x4db0, 0x1477, 0xc934, 0xf4a6, 0x1, 0x1);
        gbc.writeMem(0x129, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x803d);
        EXPECT(gbc.pc(), 0x12b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 026C
        gbc.setState(0x1d60, 0xa180, 0xc3c0, 0x78c1, 0xe29e, 0x35e8, 0x1, 0x0);
        gbc.writeMem(0x1d60, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xa180);
        EXPECT(gbc.pc(), 0x1d62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 026D
        gbc.setState(0x7277, 0xf1a1, 0xee50, 0xe563, 0x1492, 0xd5db, 0x1, 0x1);
        gbc.writeMem(0x7277, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xf1a1);
        EXPECT(gbc.pc(), 0x7279);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 026E
        gbc.setState(0x2299, 0x5409, 0x2360, 0x3c03, 0xfbfd, 0x2903, 0x1, 0x0);
        gbc.writeMem(0x2299, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x5409);
        EXPECT(gbc.pc(), 0x229b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 026F
        gbc.setState(0xdbf8, 0x4b5c, 0xb0a0, 0x7304, 0x5c31, 0xafa6, 0x1, 0x0);
        gbc.writeMem(0xdbf8, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x4b5c);
        EXPECT(gbc.pc(), 0xdbfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbf8), 0xcb);
        EXPECT(gbc.readMem(0xdbf9), 0xf1);
        // CB F1 0271
        gbc.setState(0x9cb2, 0x3ef2, 0xffc0, 0x4a28, 0xda85, 0xdad0, 0x1, 0x0);
        gbc.writeMem(0x9cb2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x3ef2);
        EXPECT(gbc.pc(), 0x9cb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cb2), 0xcb);
        EXPECT(gbc.readMem(0x9cb3), 0xf1);
        // CB F1 0272
        gbc.setState(0x47fa, 0x99d3, 0xba20, 0xa5db, 0x5cf2, 0xcec7, 0x1, 0x1);
        gbc.writeMem(0x47fa, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x99d3);
        EXPECT(gbc.pc(), 0x47fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0273
        gbc.setState(0x4525, 0xf09a, 0xc080, 0x1d99, 0xa22a, 0x6f2c, 0x1, 0x1);
        gbc.writeMem(0x4525, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xf09a);
        EXPECT(gbc.pc(), 0x4527);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0274
        gbc.setState(0xdbde, 0x3b3e, 0x12c0, 0xf4fe, 0xea8c, 0xfcd9, 0x1, 0x0);
        gbc.writeMem(0xdbde, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x3b3e);
        EXPECT(gbc.pc(), 0xdbe0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbde), 0xcb);
        EXPECT(gbc.readMem(0xdbdf), 0xf1);
        // CB F1 0275
        gbc.setState(0xcd20, 0x88a6, 0x9440, 0x3831, 0xaf4d, 0xd0ed, 0x0, 0x0);
        gbc.writeMem(0xcd20, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x88a6);
        EXPECT(gbc.pc(), 0xcd22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd20), 0xcb);
        EXPECT(gbc.readMem(0xcd21), 0xf1);
        // CB F1 0276
        gbc.setState(0xc835, 0x430d, 0x22b0, 0x5a6a, 0x6231, 0x5713, 0x1, 0x0);
        gbc.writeMem(0xc835, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x430d);
        EXPECT(gbc.pc(), 0xc837);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc835), 0xcb);
        EXPECT(gbc.readMem(0xc836), 0xf1);
        // CB F1 0277
        gbc.setState(0x9d4f, 0x799e, 0xde60, 0x1a05, 0xb1c6, 0xcbb5, 0x0, 0x1);
        gbc.writeMem(0x9d4f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x799e);
        EXPECT(gbc.pc(), 0x9d51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d4f), 0xcb);
        EXPECT(gbc.readMem(0x9d50), 0xf1);
        // CB F1 0278
        gbc.setState(0x33ef, 0x8eaf, 0x2de0, 0xb82e, 0xc2c9, 0x618c, 0x1, 0x0);
        gbc.writeMem(0x33ef, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8eaf);
        EXPECT(gbc.pc(), 0x33f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0279
        gbc.setState(0xbc16, 0xc34d, 0xa130, 0x70fa, 0xb183, 0x52ca, 0x0, 0x0);
        gbc.writeMem(0xbc16, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xc34d);
        EXPECT(gbc.pc(), 0xbc18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc16), 0xcb);
        EXPECT(gbc.readMem(0xbc17), 0xf1);
        // CB F1 027A
        gbc.setState(0x7450, 0xf0df, 0x3fa0, 0xf1a3, 0x160a, 0x33ae, 0x1, 0x0);
        gbc.writeMem(0x7450, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xf0df);
        EXPECT(gbc.pc(), 0x7452);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 027B
        gbc.setState(0x68e, 0xc7cd, 0x5850, 0x8546, 0xb033, 0x18cf, 0x0, 0x1);
        gbc.writeMem(0x68e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xc7cd);
        EXPECT(gbc.pc(), 0x690);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 027C
        gbc.setState(0x209b, 0x37d, 0x40d0, 0xf31d, 0xb77, 0x47fa, 0x1, 0x0);
        gbc.writeMem(0x209b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x37d);
        EXPECT(gbc.pc(), 0x209d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 027D
        gbc.setState(0x7669, 0x6a24, 0x18b0, 0x23b4, 0xea09, 0xc8ec, 0x0, 0x1);
        gbc.writeMem(0x7669, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x6a24);
        EXPECT(gbc.pc(), 0x766b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 027E
        gbc.setState(0x54b0, 0xa12, 0xed40, 0x49f, 0xdd9f, 0x58b4, 0x0, 0x1);
        gbc.writeMem(0x54b0, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xa12);
        EXPECT(gbc.pc(), 0x54b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 027F
        gbc.setState(0x66ed, 0x72fd, 0x2d80, 0x9243, 0xace5, 0x4ac5, 0x0, 0x0);
        gbc.writeMem(0x66ed, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x72fd);
        EXPECT(gbc.pc(), 0x66ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0280
        gbc.setState(0xbcad, 0x8e75, 0x77a0, 0xf2e8, 0xa2ce, 0x584b, 0x0, 0x0);
        gbc.writeMem(0xbcad, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x8e75);
        EXPECT(gbc.pc(), 0xbcaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcad), 0xcb);
        EXPECT(gbc.readMem(0xbcae), 0xf1);
        // CB F1 0281
        gbc.setState(0x9aeb, 0xbcbc, 0x4d40, 0xd747, 0xc16e, 0x2533, 0x1, 0x0);
        gbc.writeMem(0x9aeb, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xbcbc);
        EXPECT(gbc.pc(), 0x9aed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aeb), 0xcb);
        EXPECT(gbc.readMem(0x9aec), 0xf1);
        // CB F1 0283
        gbc.setState(0x61c0, 0xa0a, 0x2430, 0xedb2, 0x903d, 0xc37c, 0x0, 0x0);
        gbc.writeMem(0x61c0, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xa0a);
        EXPECT(gbc.pc(), 0x61c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0284
        gbc.setState(0xeaa, 0xfc49, 0x5f30, 0x595b, 0xb183, 0x5f76, 0x0, 0x0);
        gbc.writeMem(0xeaa, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xfc49);
        EXPECT(gbc.pc(), 0xeac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0285
        gbc.setState(0xd38c, 0x938, 0x28a0, 0xd0b7, 0x2d15, 0xbb0b, 0x1, 0x0);
        gbc.writeMem(0xd38c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x938);
        EXPECT(gbc.pc(), 0xd38e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd38c), 0xcb);
        EXPECT(gbc.readMem(0xd38d), 0xf1);
        // CB F1 0286
        gbc.setState(0x1109, 0x9a36, 0xfb20, 0xf29a, 0x9fad, 0xe126, 0x0, 0x1);
        gbc.writeMem(0x1109, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x9a36);
        EXPECT(gbc.pc(), 0x110b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0287
        gbc.setState(0xa56e, 0xcc17, 0xfa30, 0x11e6, 0xb469, 0x6928, 0x1, 0x0);
        gbc.writeMem(0xa56e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xcc17);
        EXPECT(gbc.pc(), 0xa570);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa56e), 0xcb);
        EXPECT(gbc.readMem(0xa56f), 0xf1);
        // CB F1 0288
        gbc.setState(0x48d3, 0x663b, 0x5a90, 0x924c, 0x320d, 0x30b9, 0x0, 0x0);
        gbc.writeMem(0x48d3, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x663b);
        EXPECT(gbc.pc(), 0x48d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0289
        gbc.setState(0x6f82, 0xa19f, 0x3ee0, 0x2e78, 0x4bf, 0xdd2d, 0x0, 0x0);
        gbc.writeMem(0x6f82, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xa19f);
        EXPECT(gbc.pc(), 0x6f84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 028A
        gbc.setState(0x1376, 0xf4d3, 0xdca0, 0x3a80, 0x2af7, 0x16e3, 0x0, 0x1);
        gbc.writeMem(0x1376, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xf4d3);
        EXPECT(gbc.pc(), 0x1378);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 028B
        gbc.setState(0x8258, 0xfef3, 0xd680, 0x6a14, 0x8a7c, 0x4321, 0x1, 0x1);
        gbc.writeMem(0x8258, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xfef3);
        EXPECT(gbc.pc(), 0x825a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8258), 0xcb);
        EXPECT(gbc.readMem(0x8259), 0xf1);
        // CB F1 028C
        gbc.setState(0x668e, 0x953c, 0x5ab0, 0x4e0e, 0x64a0, 0x3ef, 0x0, 0x0);
        gbc.writeMem(0x668e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x953c);
        EXPECT(gbc.pc(), 0x6690);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 028D
        gbc.setState(0xba38, 0xf8a6, 0xd0c0, 0x7e1f, 0x69ca, 0x2ad3, 0x0, 0x1);
        gbc.writeMem(0xba38, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xf8a6);
        EXPECT(gbc.pc(), 0xba3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba38), 0xcb);
        EXPECT(gbc.readMem(0xba39), 0xf1);
        // CB F1 028E
        gbc.setState(0x706b, 0x1ac5, 0x5860, 0x203a, 0xd882, 0x21c4, 0x0, 0x0);
        gbc.writeMem(0x706b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x1ac5);
        EXPECT(gbc.pc(), 0x706d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0290
        gbc.setState(0x37b9, 0x56a9, 0x1160, 0x5969, 0xe84e, 0x19c2, 0x0, 0x1);
        gbc.writeMem(0x37b9, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x56a9);
        EXPECT(gbc.pc(), 0x37bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0291
        gbc.setState(0xa443, 0x1d8d, 0x5ac0, 0xb41e, 0x4a4, 0x68, 0x0, 0x0);
        gbc.writeMem(0xa443, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x1d8d);
        EXPECT(gbc.pc(), 0xa445);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa443), 0xcb);
        EXPECT(gbc.readMem(0xa444), 0xf1);
        // CB F1 0292
        gbc.setState(0x41db, 0x1e42, 0xcaf0, 0x5dd7, 0xbd4a, 0xf005, 0x0, 0x0);
        gbc.writeMem(0x41db, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x1e42);
        EXPECT(gbc.pc(), 0x41dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0293
        gbc.setState(0x63cc, 0x9242, 0x78e0, 0x1bdb, 0x931a, 0xe96, 0x1, 0x1);
        gbc.writeMem(0x63cc, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x9242);
        EXPECT(gbc.pc(), 0x63ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0295
        gbc.setState(0x2e2, 0xfefe, 0x6f50, 0x4536, 0xb1ea, 0x170b, 0x0, 0x0);
        gbc.writeMem(0x2e2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xfefe);
        EXPECT(gbc.pc(), 0x2e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0296
        gbc.setState(0x7ed7, 0xaef7, 0x5d10, 0x337b, 0xaf17, 0x79d2, 0x0, 0x1);
        gbc.writeMem(0x7ed7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xaef7);
        EXPECT(gbc.pc(), 0x7ed9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0297
        gbc.setState(0xab78, 0x6a9f, 0xe0d0, 0xdec4, 0xefed, 0xa0, 0x0, 0x1);
        gbc.writeMem(0xab78, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x6a9f);
        EXPECT(gbc.pc(), 0xab7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab78), 0xcb);
        EXPECT(gbc.readMem(0xab79), 0xf1);
        // CB F1 0298
        gbc.setState(0x5bf0, 0xf24b, 0x2570, 0xd5ab, 0x7de5, 0xad72, 0x0, 0x1);
        gbc.writeMem(0x5bf0, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xf24b);
        EXPECT(gbc.pc(), 0x5bf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0299
        gbc.setState(0x63f4, 0x6f11, 0x440, 0xde8c, 0xb823, 0xee77, 0x1, 0x0);
        gbc.writeMem(0x63f4, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x6f11);
        EXPECT(gbc.pc(), 0x63f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 029A
        gbc.setState(0x6c03, 0xeba2, 0xe670, 0xfd3d, 0x26d, 0x493f, 0x0, 0x1);
        gbc.writeMem(0x6c03, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xeba2);
        EXPECT(gbc.pc(), 0x6c05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 029B
        gbc.setState(0x4943, 0x6c02, 0x6ac0, 0xdcff, 0x2923, 0x5960, 0x0, 0x1);
        gbc.writeMem(0x4943, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6c02);
        EXPECT(gbc.pc(), 0x4945);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 029C
        gbc.setState(0xc427, 0xbd3f, 0x6ea0, 0x726c, 0xb276, 0x923f, 0x1, 0x0);
        gbc.writeMem(0xc427, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xbd3f);
        EXPECT(gbc.pc(), 0xc429);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc427), 0xcb);
        EXPECT(gbc.readMem(0xc428), 0xf1);
        // CB F1 029D
        gbc.setState(0x147a, 0x6df9, 0xac20, 0x78d0, 0x326d, 0x9890, 0x1, 0x0);
        gbc.writeMem(0x147a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x6df9);
        EXPECT(gbc.pc(), 0x147c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 029E
        gbc.setState(0x9b8b, 0xe9e7, 0xdec0, 0x3dc8, 0xde4d, 0x17ad, 0x0, 0x1);
        gbc.writeMem(0x9b8b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xe9e7);
        EXPECT(gbc.pc(), 0x9b8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b8b), 0xcb);
        EXPECT(gbc.readMem(0x9b8c), 0xf1);
        // CB F1 029F
        gbc.setState(0x27c6, 0x4f86, 0xf140, 0xfa51, 0x90ad, 0xb269, 0x0, 0x1);
        gbc.writeMem(0x27c6, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x4f86);
        EXPECT(gbc.pc(), 0x27c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02A0
        gbc.setState(0x595c, 0x1577, 0x1210, 0xd345, 0x934f, 0x76bb, 0x1, 0x0);
        gbc.writeMem(0x595c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x1577);
        EXPECT(gbc.pc(), 0x595e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02A1
        gbc.setState(0xde0e, 0x9b0d, 0x4630, 0x4b12, 0xa024, 0x5599, 0x0, 0x0);
        gbc.writeMem(0xde0e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x9b0d);
        EXPECT(gbc.pc(), 0xde10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde0e), 0xcb);
        EXPECT(gbc.readMem(0xde0f), 0xf1);
        // CB F1 02A2
        gbc.setState(0x71a5, 0xda89, 0xaf40, 0x562b, 0xce5b, 0xe18c, 0x0, 0x0);
        gbc.writeMem(0x71a5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xda89);
        EXPECT(gbc.pc(), 0x71a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02A3
        gbc.setState(0xa7cd, 0x622a, 0x1660, 0x4663, 0x8bf3, 0xff25, 0x1, 0x1);
        gbc.writeMem(0xa7cd, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x622a);
        EXPECT(gbc.pc(), 0xa7cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7cd), 0xcb);
        EXPECT(gbc.readMem(0xa7ce), 0xf1);
        // CB F1 02A4
        gbc.setState(0x43c2, 0x1c34, 0x54a0, 0x7d68, 0x660, 0xa9d3, 0x1, 0x1);
        gbc.writeMem(0x43c2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x1c34);
        EXPECT(gbc.pc(), 0x43c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02A5
        gbc.setState(0xe4c5, 0x3992, 0xf590, 0x65a, 0x4083, 0x419f, 0x1, 0x0);
        gbc.writeMem(0xe4c5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x3992);
        EXPECT(gbc.pc(), 0xe4c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4c5), 0xcb);
        EXPECT(gbc.readMem(0xe4c6), 0xf1);
        // CB F1 02A6
        gbc.setState(0x4435, 0x4b7, 0x3820, 0xaf20, 0xf54, 0x5913, 0x1, 0x0);
        gbc.writeMem(0x4435, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x4b7);
        EXPECT(gbc.pc(), 0x4437);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02A7
        gbc.setState(0x93cd, 0x5d36, 0xbd70, 0xf515, 0xe189, 0x4849, 0x0, 0x0);
        gbc.writeMem(0x93cd, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x5d36);
        EXPECT(gbc.pc(), 0x93cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93cd), 0xcb);
        EXPECT(gbc.readMem(0x93ce), 0xf1);
        // CB F1 02A8
        gbc.setState(0x3fc6, 0x48fc, 0x5c40, 0xcb1b, 0xb04f, 0x524c, 0x1, 0x0);
        gbc.writeMem(0x3fc6, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x48fc);
        EXPECT(gbc.pc(), 0x3fc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02A9
        gbc.setState(0x3071, 0xe40, 0x2010, 0x9c9, 0x6e5f, 0x82fd, 0x0, 0x1);
        gbc.writeMem(0x3071, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xe40);
        EXPECT(gbc.pc(), 0x3073);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02AA
        gbc.setState(0x3e0d, 0xfa23, 0xd10, 0xbf45, 0x19a3, 0xa0ac, 0x1, 0x0);
        gbc.writeMem(0x3e0d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xfa23);
        EXPECT(gbc.pc(), 0x3e0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02AB
        gbc.setState(0xb71, 0x789c, 0x1720, 0x369d, 0x842, 0xc549, 0x0, 0x0);
        gbc.writeMem(0xb71, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x789c);
        EXPECT(gbc.pc(), 0xb73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02AC
        gbc.setState(0x847c, 0x3ec1, 0x8720, 0x6cd2, 0xd2d1, 0xb6df, 0x0, 0x1);
        gbc.writeMem(0x847c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x3ec1);
        EXPECT(gbc.pc(), 0x847e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x847c), 0xcb);
        EXPECT(gbc.readMem(0x847d), 0xf1);
        // CB F1 02AD
        gbc.setState(0x2e52, 0x9e19, 0x99b0, 0xbf5d, 0xcf4a, 0xc0ac, 0x1, 0x0);
        gbc.writeMem(0x2e52, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x9e19);
        EXPECT(gbc.pc(), 0x2e54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02AE
        gbc.setState(0xd3a3, 0x9eb5, 0xb1c0, 0x8c7b, 0xe142, 0x1924, 0x1, 0x0);
        gbc.writeMem(0xd3a3, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x9eb5);
        EXPECT(gbc.pc(), 0xd3a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3a3), 0xcb);
        EXPECT(gbc.readMem(0xd3a4), 0xf1);
        // CB F1 02AF
        gbc.setState(0x1dcd, 0x818c, 0x2480, 0x1e40, 0x466b, 0x3774, 0x0, 0x0);
        gbc.writeMem(0x1dcd, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x818c);
        EXPECT(gbc.pc(), 0x1dcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02B0
        gbc.setState(0x7691, 0x15be, 0xf330, 0xe8ef, 0x5f39, 0x7310, 0x1, 0x1);
        gbc.writeMem(0x7691, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x15be);
        EXPECT(gbc.pc(), 0x7693);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02B1
        gbc.setState(0xd5b4, 0x421f, 0x5b90, 0xaf54, 0x142c, 0x1f2c, 0x1, 0x0);
        gbc.writeMem(0xd5b4, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x421f);
        EXPECT(gbc.pc(), 0xd5b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5b4), 0xcb);
        EXPECT(gbc.readMem(0xd5b5), 0xf1);
        // CB F1 02B2
        gbc.setState(0x126f, 0x913, 0xbd50, 0xfcd9, 0xd2d1, 0x3990, 0x0, 0x1);
        gbc.writeMem(0x126f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x913);
        EXPECT(gbc.pc(), 0x1271);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02B3
        gbc.setState(0x9a0c, 0x5e3d, 0xdcd0, 0x9d8c, 0x5830, 0x3104, 0x0, 0x0);
        gbc.writeMem(0x9a0c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x5e3d);
        EXPECT(gbc.pc(), 0x9a0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a0c), 0xcb);
        EXPECT(gbc.readMem(0x9a0d), 0xf1);
        // CB F1 02B4
        gbc.setState(0xd197, 0x744b, 0xa940, 0x6e77, 0x9ab7, 0xb28d, 0x0, 0x1);
        gbc.writeMem(0xd197, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x744b);
        EXPECT(gbc.pc(), 0xd199);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd197), 0xcb);
        EXPECT(gbc.readMem(0xd198), 0xf1);
        // CB F1 02B6
        gbc.setState(0x1e64, 0x5b06, 0x71e0, 0x720d, 0x8c6a, 0x7906, 0x0, 0x0);
        gbc.writeMem(0x1e64, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x5b06);
        EXPECT(gbc.pc(), 0x1e66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02B7
        gbc.setState(0x372c, 0x58a5, 0xb020, 0xdf5e, 0x44b7, 0x749b, 0x0, 0x1);
        gbc.writeMem(0x372c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x58a5);
        EXPECT(gbc.pc(), 0x372e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02B8
        gbc.setState(0x4459, 0xa21c, 0x3590, 0x2876, 0x495f, 0x2114, 0x0, 0x1);
        gbc.writeMem(0x4459, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xa21c);
        EXPECT(gbc.pc(), 0x445b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02B9
        gbc.setState(0x5fb4, 0x30b8, 0xcd80, 0x601e, 0xab7e, 0x5c0, 0x0, 0x1);
        gbc.writeMem(0x5fb4, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x30b8);
        EXPECT(gbc.pc(), 0x5fb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02BA
        gbc.setState(0xc9af, 0x5f40, 0xc6c0, 0xb5b7, 0x5616, 0x70d1, 0x1, 0x0);
        gbc.writeMem(0xc9af, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x5f40);
        EXPECT(gbc.pc(), 0xc9b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9af), 0xcb);
        EXPECT(gbc.readMem(0xc9b0), 0xf1);
        // CB F1 02BB
        gbc.setState(0x330, 0x6992, 0x3b90, 0xb18d, 0xb95e, 0xc6ca, 0x1, 0x1);
        gbc.writeMem(0x330, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x6992);
        EXPECT(gbc.pc(), 0x332);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02BC
        gbc.setState(0x7689, 0x4d3a, 0xcb60, 0x854d, 0xe3a, 0xe9cc, 0x1, 0x1);
        gbc.writeMem(0x7689, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x4d3a);
        EXPECT(gbc.pc(), 0x768b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02BD
        gbc.setState(0xd123, 0x62, 0x3e30, 0xb8ec, 0xf139, 0x19f1, 0x0, 0x1);
        gbc.writeMem(0xd123, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x62);
        EXPECT(gbc.pc(), 0xd125);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd123), 0xcb);
        EXPECT(gbc.readMem(0xd124), 0xf1);
        // CB F1 02BE
        gbc.setState(0xe38b, 0xf3da, 0x35e0, 0x6cd4, 0xb548, 0x9bd5, 0x0, 0x1);
        gbc.writeMem(0xe38b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xf3da);
        EXPECT(gbc.pc(), 0xe38d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe38b), 0xcb);
        EXPECT(gbc.readMem(0xe38c), 0xf1);
        // CB F1 02BF
        gbc.setState(0x66d5, 0xd085, 0x62a0, 0x699a, 0x816d, 0xf128, 0x0, 0x0);
        gbc.writeMem(0x66d5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xd085);
        EXPECT(gbc.pc(), 0x66d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02C0
        gbc.setState(0x46dd, 0x420f, 0x4eb0, 0x601c, 0xc67, 0x8e23, 0x0, 0x0);
        gbc.writeMem(0x46dd, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x420f);
        EXPECT(gbc.pc(), 0x46df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02C1
        gbc.setState(0xd82b, 0xf2a5, 0x9560, 0x714e, 0xe6bf, 0x3023, 0x1, 0x1);
        gbc.writeMem(0xd82b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xf2a5);
        EXPECT(gbc.pc(), 0xd82d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd82b), 0xcb);
        EXPECT(gbc.readMem(0xd82c), 0xf1);
        // CB F1 02C2
        gbc.setState(0x1cbc, 0xb1f5, 0x1cc0, 0xcf66, 0x8a44, 0x598b, 0x1, 0x0);
        gbc.writeMem(0x1cbc, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xb1f5);
        EXPECT(gbc.pc(), 0x1cbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02C3
        gbc.setState(0x4fa4, 0xbc88, 0x95e0, 0x978e, 0xe7d3, 0xfebd, 0x0, 0x0);
        gbc.writeMem(0x4fa4, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xbc88);
        EXPECT(gbc.pc(), 0x4fa6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02C4
        gbc.setState(0x4f76, 0x62ad, 0xd3f0, 0xb113, 0x59cf, 0xdddc, 0x0, 0x0);
        gbc.writeMem(0x4f76, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x62ad);
        EXPECT(gbc.pc(), 0x4f78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02C5
        gbc.setState(0x5124, 0xaab6, 0xd6f0, 0x2bf2, 0x5f0, 0x23f2, 0x1, 0x0);
        gbc.writeMem(0x5124, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xaab6);
        EXPECT(gbc.pc(), 0x5126);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02C6
        gbc.setState(0xce62, 0x7669, 0x1340, 0xf2c6, 0x301e, 0x4b78, 0x0, 0x1);
        gbc.writeMem(0xce62, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x7669);
        EXPECT(gbc.pc(), 0xce64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce62), 0xcb);
        EXPECT(gbc.readMem(0xce63), 0xf1);
        // CB F1 02C7
        gbc.setState(0x7048, 0x8a98, 0xfe0, 0x53c0, 0xd982, 0xccde, 0x1, 0x1);
        gbc.writeMem(0x7048, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x8a98);
        EXPECT(gbc.pc(), 0x704a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02C9
        gbc.setState(0x2145, 0x7882, 0x8700, 0xc347, 0x8c5e, 0x20c3, 0x1, 0x1);
        gbc.writeMem(0x2145, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x7882);
        EXPECT(gbc.pc(), 0x2147);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02CA
        gbc.setState(0xc405, 0x557d, 0x7a30, 0x82fc, 0xc8ec, 0xd3b3, 0x0, 0x1);
        gbc.writeMem(0xc405, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x557d);
        EXPECT(gbc.pc(), 0xc407);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc405), 0xcb);
        EXPECT(gbc.readMem(0xc406), 0xf1);
        // CB F1 02CC
        gbc.setState(0x2436, 0xacee, 0xe310, 0xe528, 0xde6, 0x760f, 0x1, 0x0);
        gbc.writeMem(0x2436, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xacee);
        EXPECT(gbc.pc(), 0x2438);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02CD
        gbc.setState(0x3651, 0x2f61, 0x70d0, 0xa9a1, 0x280e, 0xd4f8, 0x1, 0x1);
        gbc.writeMem(0x3651, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x2f61);
        EXPECT(gbc.pc(), 0x3653);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02CE
        gbc.setState(0x23b, 0xd7df, 0x29f0, 0x1907, 0xa175, 0x5fe, 0x1, 0x1);
        gbc.writeMem(0x23b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xd7df);
        EXPECT(gbc.pc(), 0x23d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02CF
        gbc.setState(0x12e0, 0x8816, 0x11c0, 0x436b, 0x441e, 0xc104, 0x1, 0x1);
        gbc.writeMem(0x12e0, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x8816);
        EXPECT(gbc.pc(), 0x12e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02D0
        gbc.setState(0x453a, 0x6362, 0x4f80, 0xe3bc, 0xb93, 0xeb13, 0x1, 0x0);
        gbc.writeMem(0x453a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x6362);
        EXPECT(gbc.pc(), 0x453c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02D2
        gbc.setState(0x2f81, 0xed10, 0x86f0, 0x7f3e, 0x14ff, 0xbf4f, 0x1, 0x0);
        gbc.writeMem(0x2f81, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xed10);
        EXPECT(gbc.pc(), 0x2f83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02D3
        gbc.setState(0x4ddb, 0xfaf3, 0x6a0, 0x579, 0x14d3, 0xf4f7, 0x1, 0x1);
        gbc.writeMem(0x4ddb, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xfaf3);
        EXPECT(gbc.pc(), 0x4ddd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02D4
        gbc.setState(0xeb7b, 0xae99, 0x5a60, 0x4852, 0x4a9d, 0xdc2d, 0x1, 0x1);
        gbc.writeMem(0xeb7b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xae99);
        EXPECT(gbc.pc(), 0xeb7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb7b), 0xcb);
        EXPECT(gbc.readMem(0xeb7c), 0xf1);
        // CB F1 02D5
        gbc.setState(0x5f6, 0xf796, 0x9470, 0x4dab, 0x95fe, 0xf4f, 0x1, 0x0);
        gbc.writeMem(0x5f6, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xf796);
        EXPECT(gbc.pc(), 0x5f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02D6
        gbc.setState(0x3b0c, 0x103f, 0xd510, 0x52b6, 0x8605, 0xb70f, 0x1, 0x0);
        gbc.writeMem(0x3b0c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x103f);
        EXPECT(gbc.pc(), 0x3b0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02D7
        gbc.setState(0xa008, 0xd42f, 0xc770, 0x89c, 0x9e, 0x5120, 0x1, 0x0);
        gbc.writeMem(0xa008, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xd42f);
        EXPECT(gbc.pc(), 0xa00a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa008), 0xcb);
        EXPECT(gbc.readMem(0xa009), 0xf1);
        // CB F1 02D8
        gbc.setState(0xb665, 0xedfc, 0xba20, 0xd496, 0x6b4c, 0xb31b, 0x0, 0x1);
        gbc.writeMem(0xb665, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xedfc);
        EXPECT(gbc.pc(), 0xb667);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb665), 0xcb);
        EXPECT(gbc.readMem(0xb666), 0xf1);
        // CB F1 02D9
        gbc.setState(0x7292, 0x99b8, 0x90f0, 0x8adc, 0xcab8, 0x4dcd, 0x1, 0x1);
        gbc.writeMem(0x7292, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x99b8);
        EXPECT(gbc.pc(), 0x7294);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02DA
        gbc.setState(0xb81f, 0xb1a7, 0xf0, 0xa15c, 0xb1a4, 0x7e68, 0x1, 0x0);
        gbc.writeMem(0xb81f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xb1a7);
        EXPECT(gbc.pc(), 0xb821);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb81f), 0xcb);
        EXPECT(gbc.readMem(0xb820), 0xf1);
        // CB F1 02DB
        gbc.setState(0x1d6d, 0x4e6a, 0x9610, 0x5643, 0x7c2f, 0xdafc, 0x1, 0x0);
        gbc.writeMem(0x1d6d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x4e6a);
        EXPECT(gbc.pc(), 0x1d6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02DC
        gbc.setState(0xb248, 0xc972, 0x9b30, 0xd3e8, 0x8d81, 0x650a, 0x1, 0x1);
        gbc.writeMem(0xb248, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xc972);
        EXPECT(gbc.pc(), 0xb24a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb248), 0xcb);
        EXPECT(gbc.readMem(0xb249), 0xf1);
        // CB F1 02DD
        gbc.setState(0x31b4, 0xc677, 0xcee0, 0x1481, 0xa250, 0x1dfd, 0x0, 0x1);
        gbc.writeMem(0x31b4, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xc677);
        EXPECT(gbc.pc(), 0x31b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02DE
        gbc.setState(0xbf96, 0xf590, 0x97e0, 0xedd7, 0x5606, 0x5b28, 0x0, 0x1);
        gbc.writeMem(0xbf96, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xf590);
        EXPECT(gbc.pc(), 0xbf98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf96), 0xcb);
        EXPECT(gbc.readMem(0xbf97), 0xf1);
        // CB F1 02DF
        gbc.setState(0x444c, 0xdfe2, 0x4710, 0x909b, 0x10ee, 0xbaa4, 0x1, 0x1);
        gbc.writeMem(0x444c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xdfe2);
        EXPECT(gbc.pc(), 0x444e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02E0
        gbc.setState(0xc960, 0xeaaf, 0x3230, 0x5f81, 0x66e1, 0x936c, 0x1, 0x0);
        gbc.writeMem(0xc960, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xeaaf);
        EXPECT(gbc.pc(), 0xc962);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc960), 0xcb);
        EXPECT(gbc.readMem(0xc961), 0xf1);
        // CB F1 02E1
        gbc.setState(0x8ed7, 0x194b, 0xff00, 0xdad2, 0x4c21, 0x4a66, 0x1, 0x0);
        gbc.writeMem(0x8ed7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x194b);
        EXPECT(gbc.pc(), 0x8ed9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ed7), 0xcb);
        EXPECT(gbc.readMem(0x8ed8), 0xf1);
        // CB F1 02E2
        gbc.setState(0xdb5d, 0x4a12, 0x57b0, 0xf0a1, 0xdb29, 0x1fd, 0x0, 0x0);
        gbc.writeMem(0xdb5d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x4a12);
        EXPECT(gbc.pc(), 0xdb5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb5d), 0xcb);
        EXPECT(gbc.readMem(0xdb5e), 0xf1);
        // CB F1 02E3
        gbc.setState(0x222c, 0x17de, 0xf030, 0x4d3f, 0x8d4b, 0x403a, 0x0, 0x1);
        gbc.writeMem(0x222c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x17de);
        EXPECT(gbc.pc(), 0x222e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02E4
        gbc.setState(0x15e0, 0x1bef, 0xd590, 0x6e2d, 0xdf53, 0x777f, 0x0, 0x1);
        gbc.writeMem(0x15e0, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x1bef);
        EXPECT(gbc.pc(), 0x15e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02E5
        gbc.setState(0x25dd, 0xe13a, 0xd160, 0xe2a4, 0x3db, 0x8bd8, 0x1, 0x1);
        gbc.writeMem(0x25dd, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xe13a);
        EXPECT(gbc.pc(), 0x25df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02E6
        gbc.setState(0x181, 0xd814, 0xeb00, 0x4ab0, 0xcc0f, 0xb09b, 0x1, 0x0);
        gbc.writeMem(0x181, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xd814);
        EXPECT(gbc.pc(), 0x183);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02E7
        gbc.setState(0x12fc, 0x73d1, 0xc000, 0xab42, 0xe631, 0xdef7, 0x0, 0x1);
        gbc.writeMem(0x12fc, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x73d1);
        EXPECT(gbc.pc(), 0x12fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02E8
        gbc.setState(0x159d, 0x3e1e, 0x6110, 0x979a, 0x5069, 0x8c05, 0x1, 0x0);
        gbc.writeMem(0x159d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x3e1e);
        EXPECT(gbc.pc(), 0x159f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02E9
        gbc.setState(0xe7d9, 0xa43a, 0x4fd0, 0xf195, 0x8c1a, 0x4d2b, 0x1, 0x0);
        gbc.writeMem(0xe7d9, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xa43a);
        EXPECT(gbc.pc(), 0xe7db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7d9), 0xcb);
        EXPECT(gbc.readMem(0xe7da), 0xf1);
        // CB F1 02EA
        gbc.setState(0x5390, 0x14cd, 0x40f0, 0xf660, 0xaa41, 0x3d77, 0x1, 0x1);
        gbc.writeMem(0x5390, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x14cd);
        EXPECT(gbc.pc(), 0x5392);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02EB
        gbc.setState(0x5c41, 0x7f97, 0xf890, 0xf6dd, 0xcccc, 0x2f0b, 0x0, 0x1);
        gbc.writeMem(0x5c41, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x7f97);
        EXPECT(gbc.pc(), 0x5c43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02EC
        gbc.setState(0x21ae, 0xf180, 0x8950, 0xee3a, 0xf88e, 0xc913, 0x1, 0x1);
        gbc.writeMem(0x21ae, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xf180);
        EXPECT(gbc.pc(), 0x21b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02ED
        gbc.setState(0x2a4c, 0x4f73, 0xdca0, 0x1cff, 0xb855, 0x742e, 0x1, 0x1);
        gbc.writeMem(0x2a4c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x4f73);
        EXPECT(gbc.pc(), 0x2a4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02EE
        gbc.setState(0xc24b, 0x37e8, 0x42e0, 0xd6ff, 0x560f, 0xf5b, 0x1, 0x1);
        gbc.writeMem(0xc24b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x37e8);
        EXPECT(gbc.pc(), 0xc24d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc24b), 0xcb);
        EXPECT(gbc.readMem(0xc24c), 0xf1);
        // CB F1 02EF
        gbc.setState(0x87aa, 0x1269, 0xb4d0, 0x4421, 0xe422, 0x2d6f, 0x0, 0x0);
        gbc.writeMem(0x87aa, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x1269);
        EXPECT(gbc.pc(), 0x87ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87aa), 0xcb);
        EXPECT(gbc.readMem(0x87ab), 0xf1);
        // CB F1 02F0
        gbc.setState(0x6f0b, 0xeaf3, 0x33c0, 0x999c, 0xa252, 0xee0e, 0x0, 0x1);
        gbc.writeMem(0x6f0b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xeaf3);
        EXPECT(gbc.pc(), 0x6f0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02F1
        gbc.setState(0x2f1c, 0xaa1d, 0xd7f0, 0x3d0b, 0xbe28, 0x5644, 0x0, 0x0);
        gbc.writeMem(0x2f1c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xaa1d);
        EXPECT(gbc.pc(), 0x2f1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02F2
        gbc.setState(0x9e1a, 0x5534, 0x4750, 0xfaa3, 0xe091, 0xe097, 0x0, 0x1);
        gbc.writeMem(0x9e1a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x5534);
        EXPECT(gbc.pc(), 0x9e1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e1a), 0xcb);
        EXPECT(gbc.readMem(0x9e1b), 0xf1);
        // CB F1 02F3
        gbc.setState(0x7649, 0x15b7, 0xb110, 0x5246, 0x6162, 0x8c04, 0x0, 0x0);
        gbc.writeMem(0x7649, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x15b7);
        EXPECT(gbc.pc(), 0x764b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02F4
        gbc.setState(0x48f2, 0x8fd1, 0x8a30, 0xa7b3, 0x84b5, 0xaa3d, 0x0, 0x0);
        gbc.writeMem(0x48f2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x8fd1);
        EXPECT(gbc.pc(), 0x48f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02F5
        gbc.setState(0x9ca6, 0x733e, 0x6380, 0x93db, 0x32db, 0x6526, 0x1, 0x1);
        gbc.writeMem(0x9ca6, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x733e);
        EXPECT(gbc.pc(), 0x9ca8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ca6), 0xcb);
        EXPECT(gbc.readMem(0x9ca7), 0xf1);
        // CB F1 02F6
        gbc.setState(0x4efb, 0xfc51, 0xc580, 0x18cb, 0x3382, 0x98a0, 0x1, 0x1);
        gbc.writeMem(0x4efb, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xfc51);
        EXPECT(gbc.pc(), 0x4efd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02F7
        gbc.setState(0xcfb3, 0x6a9a, 0x9b90, 0x697c, 0x5ce3, 0xed39, 0x1, 0x0);
        gbc.writeMem(0xcfb3, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x6a9a);
        EXPECT(gbc.pc(), 0xcfb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfb3), 0xcb);
        EXPECT(gbc.readMem(0xcfb4), 0xf1);
        // CB F1 02F8
        gbc.setState(0x21e2, 0xd1cb, 0xb370, 0xbf5f, 0xf768, 0x400f, 0x1, 0x0);
        gbc.writeMem(0x21e2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xd1cb);
        EXPECT(gbc.pc(), 0x21e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02F9
        gbc.setState(0xbbdf, 0x672b, 0xe050, 0xe5ca, 0x666c, 0x9e19, 0x1, 0x0);
        gbc.writeMem(0xbbdf, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x672b);
        EXPECT(gbc.pc(), 0xbbe1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbdf), 0xcb);
        EXPECT(gbc.readMem(0xbbe0), 0xf1);
        // CB F1 02FA
        gbc.setState(0x6ae3, 0xfddc, 0xa460, 0x333, 0xf183, 0xea7d, 0x0, 0x1);
        gbc.writeMem(0x6ae3, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xfddc);
        EXPECT(gbc.pc(), 0x6ae5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02FB
        gbc.setState(0x859e, 0xb504, 0x8b20, 0xa31e, 0xc9a3, 0xe137, 0x1, 0x1);
        gbc.writeMem(0x859e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xb504);
        EXPECT(gbc.pc(), 0x85a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x859e), 0xcb);
        EXPECT(gbc.readMem(0x859f), 0xf1);
        // CB F1 02FC
        gbc.setState(0x7cad, 0x6f58, 0x7150, 0x239b, 0xfa08, 0xaa4, 0x0, 0x0);
        gbc.writeMem(0x7cad, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x6f58);
        EXPECT(gbc.pc(), 0x7caf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 02FD
        gbc.setState(0x21f1, 0xb2ea, 0xed00, 0x4c35, 0x9ca1, 0xa001, 0x1, 0x0);
        gbc.writeMem(0x21f1, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xb2ea);
        EXPECT(gbc.pc(), 0x21f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 02FE
        gbc.setState(0x8011, 0xfef1, 0xc240, 0x2a10, 0x1e27, 0x311, 0x1, 0x1);
        gbc.writeMem(0x8011, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xfef1);
        EXPECT(gbc.pc(), 0x8013);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8011), 0xcb);
        EXPECT(gbc.readMem(0x8012), 0xf1);
        // CB F1 02FF
        gbc.setState(0x905c, 0xd99c, 0x1fb0, 0x48fb, 0x2d54, 0x696d, 0x0, 0x1);
        gbc.writeMem(0x905c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xd99c);
        EXPECT(gbc.pc(), 0x905e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x905c), 0xcb);
        EXPECT(gbc.readMem(0x905d), 0xf1);
        // CB F1 0300
        gbc.setState(0x8449, 0xc3e4, 0x3240, 0xe2f7, 0x36bc, 0xfdac, 0x0, 0x0);
        gbc.writeMem(0x8449, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xc3e4);
        EXPECT(gbc.pc(), 0x844b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8449), 0xcb);
        EXPECT(gbc.readMem(0x844a), 0xf1);
        // CB F1 0302
        gbc.setState(0x7163, 0xdf2, 0x3430, 0xe9bc, 0xe093, 0xc8e2, 0x0, 0x0);
        gbc.writeMem(0x7163, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xdf2);
        EXPECT(gbc.pc(), 0x7165);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0303
        gbc.setState(0xc160, 0xb7fd, 0xfb60, 0x3d4e, 0x601e, 0x7bd7, 0x0, 0x0);
        gbc.writeMem(0xc160, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xb7fd);
        EXPECT(gbc.pc(), 0xc162);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc160), 0xcb);
        EXPECT(gbc.readMem(0xc161), 0xf1);
        // CB F1 0304
        gbc.setState(0x73de, 0x2a72, 0x6de0, 0xaf75, 0xfff3, 0x7ba, 0x0, 0x0);
        gbc.writeMem(0x73de, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x2a72);
        EXPECT(gbc.pc(), 0x73e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0305
        gbc.setState(0x627c, 0xbef3, 0x41b0, 0xa6de, 0x6aa1, 0x8c92, 0x0, 0x1);
        gbc.writeMem(0x627c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xbef3);
        EXPECT(gbc.pc(), 0x627e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0306
        gbc.setState(0x2bc7, 0x26fd, 0x4510, 0x88f9, 0xb5ce, 0xfe1b, 0x1, 0x0);
        gbc.writeMem(0x2bc7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x26fd);
        EXPECT(gbc.pc(), 0x2bc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0307
        gbc.setState(0x7dd7, 0xea29, 0xf00, 0x43f5, 0x3e71, 0x7817, 0x0, 0x0);
        gbc.writeMem(0x7dd7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xea29);
        EXPECT(gbc.pc(), 0x7dd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0308
        gbc.setState(0x42c9, 0xd62, 0x7fd0, 0xc118, 0xab73, 0xdcf2, 0x0, 0x0);
        gbc.writeMem(0x42c9, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xd62);
        EXPECT(gbc.pc(), 0x42cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0309
        gbc.setState(0xa792, 0x66dd, 0x32a0, 0x625e, 0xb4ec, 0x25b0, 0x0, 0x1);
        gbc.writeMem(0xa792, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x66dd);
        EXPECT(gbc.pc(), 0xa794);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa792), 0xcb);
        EXPECT(gbc.readMem(0xa793), 0xf1);
        // CB F1 030A
        gbc.setState(0x318b, 0x9864, 0xa390, 0xeded, 0xd173, 0x773, 0x1, 0x0);
        gbc.writeMem(0x318b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x9864);
        EXPECT(gbc.pc(), 0x318d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 030B
        gbc.setState(0x2bd6, 0x5d8c, 0x4600, 0x3f4d, 0xde43, 0x28d6, 0x1, 0x0);
        gbc.writeMem(0x2bd6, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x5d8c);
        EXPECT(gbc.pc(), 0x2bd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 030C
        gbc.setState(0x7373, 0xfa9d, 0xc930, 0xb872, 0xd4e6, 0x62fd, 0x0, 0x1);
        gbc.writeMem(0x7373, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xfa9d);
        EXPECT(gbc.pc(), 0x7375);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 030D
        gbc.setState(0x2b65, 0x257, 0x590, 0x1eeb, 0x9e3e, 0xdd79, 0x0, 0x0);
        gbc.writeMem(0x2b65, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x257);
        EXPECT(gbc.pc(), 0x2b67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 030E
        gbc.setState(0x3340, 0x5b3a, 0x8ea0, 0x8ae6, 0xde9b, 0xcd7f, 0x0, 0x0);
        gbc.writeMem(0x3340, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x5b3a);
        EXPECT(gbc.pc(), 0x3342);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 030F
        gbc.setState(0xd618, 0xe576, 0x38c0, 0x1cc6, 0x887e, 0x7fc6, 0x0, 0x0);
        gbc.writeMem(0xd618, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xe576);
        EXPECT(gbc.pc(), 0xd61a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd618), 0xcb);
        EXPECT(gbc.readMem(0xd619), 0xf1);
        // CB F1 0310
        gbc.setState(0x3a6a, 0xf998, 0x58f0, 0x66f9, 0xfd8b, 0xe012, 0x0, 0x0);
        gbc.writeMem(0x3a6a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xf998);
        EXPECT(gbc.pc(), 0x3a6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0311
        gbc.setState(0x19bd, 0x1abe, 0x39c0, 0x9fe9, 0xdd2d, 0x9677, 0x0, 0x1);
        gbc.writeMem(0x19bd, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x1abe);
        EXPECT(gbc.pc(), 0x19bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0312
        gbc.setState(0xc262, 0xea83, 0x8a60, 0xac3, 0x17e3, 0x20c, 0x0, 0x1);
        gbc.writeMem(0xc262, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xea83);
        EXPECT(gbc.pc(), 0xc264);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc262), 0xcb);
        EXPECT(gbc.readMem(0xc263), 0xf1);
        // CB F1 0313
        gbc.setState(0x7c0d, 0x5033, 0xdd00, 0x61b2, 0x7c27, 0x9718, 0x0, 0x0);
        gbc.writeMem(0x7c0d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x5033);
        EXPECT(gbc.pc(), 0x7c0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0314
        gbc.setState(0xdb88, 0xbf7b, 0xa760, 0x6752, 0xa8d6, 0xf26b, 0x0, 0x0);
        gbc.writeMem(0xdb88, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xbf7b);
        EXPECT(gbc.pc(), 0xdb8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb88), 0xcb);
        EXPECT(gbc.readMem(0xdb89), 0xf1);
        // CB F1 0315
        gbc.setState(0xc471, 0x9d2f, 0x7f60, 0x5ae4, 0xd63a, 0x3c96, 0x1, 0x1);
        gbc.writeMem(0xc471, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x9d2f);
        EXPECT(gbc.pc(), 0xc473);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc471), 0xcb);
        EXPECT(gbc.readMem(0xc472), 0xf1);
        // CB F1 0317
        gbc.setState(0x88ca, 0x6956, 0xb180, 0x16fd, 0xaaf3, 0xdeb3, 0x1, 0x0);
        gbc.writeMem(0x88ca, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x6956);
        EXPECT(gbc.pc(), 0x88cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ca), 0xcb);
        EXPECT(gbc.readMem(0x88cb), 0xf1);
        // CB F1 0318
        gbc.setState(0xefce, 0xab45, 0x170, 0x6336, 0x711c, 0x51a7, 0x0, 0x1);
        gbc.writeMem(0xefce, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xab45);
        EXPECT(gbc.pc(), 0xefd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefce), 0xcb);
        EXPECT(gbc.readMem(0xefcf), 0xf1);
        // CB F1 0319
        gbc.setState(0x6d40, 0xd824, 0xfd0, 0x694, 0x2ffa, 0x3746, 0x1, 0x0);
        gbc.writeMem(0x6d40, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xd824);
        EXPECT(gbc.pc(), 0x6d42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 031A
        gbc.setState(0x6ce6, 0x4bb, 0xa2d0, 0xb8e6, 0xdf0, 0xcc85, 0x0, 0x0);
        gbc.writeMem(0x6ce6, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x4bb);
        EXPECT(gbc.pc(), 0x6ce8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 031B
        gbc.setState(0x30ab, 0x8b60, 0x4090, 0x3c0c, 0xfbbb, 0xa2c8, 0x0, 0x1);
        gbc.writeMem(0x30ab, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x8b60);
        EXPECT(gbc.pc(), 0x30ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 031C
        gbc.setState(0x1b25, 0x7f67, 0xe2d0, 0x2bcc, 0x683, 0x5578, 0x0, 0x0);
        gbc.writeMem(0x1b25, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x7f67);
        EXPECT(gbc.pc(), 0x1b27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 031D
        gbc.setState(0x9580, 0xf774, 0x1d30, 0xb0a9, 0xad09, 0x4b4a, 0x1, 0x0);
        gbc.writeMem(0x9580, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xf774);
        EXPECT(gbc.pc(), 0x9582);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9580), 0xcb);
        EXPECT(gbc.readMem(0x9581), 0xf1);
        // CB F1 031E
        gbc.setState(0xb490, 0x5488, 0x35c0, 0x615c, 0xb6cd, 0xe0a3, 0x0, 0x1);
        gbc.writeMem(0xb490, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x5488);
        EXPECT(gbc.pc(), 0xb492);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb490), 0xcb);
        EXPECT(gbc.readMem(0xb491), 0xf1);
        // CB F1 031F
        gbc.setState(0x95d1, 0xc1ef, 0xf0, 0x9255, 0x8708, 0xa3d9, 0x1, 0x1);
        gbc.writeMem(0x95d1, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xc1ef);
        EXPECT(gbc.pc(), 0x95d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95d1), 0xcb);
        EXPECT(gbc.readMem(0x95d2), 0xf1);
        // CB F1 0320
        gbc.setState(0x5d0, 0xd502, 0x9660, 0x18ed, 0xdae6, 0x753, 0x0, 0x0);
        gbc.writeMem(0x5d0, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xd502);
        EXPECT(gbc.pc(), 0x5d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0321
        gbc.setState(0xd36b, 0xea2d, 0xb730, 0x42ea, 0xd50d, 0x9be6, 0x1, 0x1);
        gbc.writeMem(0xd36b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xea2d);
        EXPECT(gbc.pc(), 0xd36d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd36b), 0xcb);
        EXPECT(gbc.readMem(0xd36c), 0xf1);
        // CB F1 0322
        gbc.setState(0x8a58, 0xbd4, 0x6510, 0x93ce, 0x18d7, 0xcb6c, 0x0, 0x1);
        gbc.writeMem(0x8a58, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xbd4);
        EXPECT(gbc.pc(), 0x8a5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a58), 0xcb);
        EXPECT(gbc.readMem(0x8a59), 0xf1);
        // CB F1 0323
        gbc.setState(0x6f0d, 0xc174, 0x2630, 0xf134, 0x6794, 0xc35d, 0x0, 0x1);
        gbc.writeMem(0x6f0d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xc174);
        EXPECT(gbc.pc(), 0x6f0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0324
        gbc.setState(0x6cc7, 0x8533, 0x47d0, 0x4889, 0x5205, 0x939b, 0x0, 0x1);
        gbc.writeMem(0x6cc7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x8533);
        EXPECT(gbc.pc(), 0x6cc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0325
        gbc.setState(0xcf7c, 0x3dd4, 0x74b0, 0xb194, 0x3242, 0x5b89, 0x0, 0x1);
        gbc.writeMem(0xcf7c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x3dd4);
        EXPECT(gbc.pc(), 0xcf7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf7c), 0xcb);
        EXPECT(gbc.readMem(0xcf7d), 0xf1);
        // CB F1 0326
        gbc.setState(0x9d9d, 0x9839, 0xf2c0, 0x2328, 0x1edc, 0x8999, 0x1, 0x0);
        gbc.writeMem(0x9d9d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x9839);
        EXPECT(gbc.pc(), 0x9d9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d9d), 0xcb);
        EXPECT(gbc.readMem(0x9d9e), 0xf1);
        // CB F1 0327
        gbc.setState(0x32ca, 0xfb6, 0xbf10, 0x16bb, 0x9582, 0x73a6, 0x0, 0x0);
        gbc.writeMem(0x32ca, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xfb6);
        EXPECT(gbc.pc(), 0x32cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0328
        gbc.setState(0x9d52, 0xca21, 0x6d80, 0x71c7, 0xb0eb, 0x6292, 0x0, 0x0);
        gbc.writeMem(0x9d52, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xca21);
        EXPECT(gbc.pc(), 0x9d54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d52), 0xcb);
        EXPECT(gbc.readMem(0x9d53), 0xf1);
        // CB F1 0329
        gbc.setState(0xcd0e, 0x9ff3, 0x5c80, 0x69b4, 0x8b33, 0xbff6, 0x1, 0x1);
        gbc.writeMem(0xcd0e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x9ff3);
        EXPECT(gbc.pc(), 0xcd10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd0e), 0xcb);
        EXPECT(gbc.readMem(0xcd0f), 0xf1);
        // CB F1 032A
        gbc.setState(0xf7e, 0xbf36, 0x4b80, 0x294a, 0x18cc, 0x2cf3, 0x0, 0x0);
        gbc.writeMem(0xf7e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xbf36);
        EXPECT(gbc.pc(), 0xf80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 032B
        gbc.setState(0xc2a1, 0x6a5e, 0xf370, 0x7ca8, 0x768b, 0x5374, 0x1, 0x1);
        gbc.writeMem(0xc2a1, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x6a5e);
        EXPECT(gbc.pc(), 0xc2a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2a1), 0xcb);
        EXPECT(gbc.readMem(0xc2a2), 0xf1);
        // CB F1 032C
        gbc.setState(0x98f5, 0xb8b1, 0xe4a0, 0x434b, 0xf220, 0x7ed7, 0x1, 0x1);
        gbc.writeMem(0x98f5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xb8b1);
        EXPECT(gbc.pc(), 0x98f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98f5), 0xcb);
        EXPECT(gbc.readMem(0x98f6), 0xf1);
        // CB F1 032D
        gbc.setState(0x1931, 0x5c0e, 0x9810, 0xa9db, 0x216b, 0xc201, 0x1, 0x0);
        gbc.writeMem(0x1931, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x5c0e);
        EXPECT(gbc.pc(), 0x1933);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 032E
        gbc.setState(0x84b7, 0x6193, 0x32e0, 0x787d, 0x6d7f, 0x272c, 0x1, 0x0);
        gbc.writeMem(0x84b7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x6193);
        EXPECT(gbc.pc(), 0x84b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84b7), 0xcb);
        EXPECT(gbc.readMem(0x84b8), 0xf1);
        // CB F1 032F
        gbc.setState(0x79ff, 0x56f0, 0xa3b0, 0x8b25, 0x55e3, 0xa369, 0x1, 0x1);
        gbc.writeMem(0x79ff, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x56f0);
        EXPECT(gbc.pc(), 0x7a01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0330
        gbc.setState(0x1231, 0x7260, 0x1d30, 0x2556, 0x55e2, 0x30cc, 0x0, 0x1);
        gbc.writeMem(0x1231, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x7260);
        EXPECT(gbc.pc(), 0x1233);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0331
        gbc.setState(0xb802, 0x2ba2, 0x47e0, 0x9931, 0xfeb0, 0x92e4, 0x1, 0x1);
        gbc.writeMem(0xb802, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x2ba2);
        EXPECT(gbc.pc(), 0xb804);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb802), 0xcb);
        EXPECT(gbc.readMem(0xb803), 0xf1);
        // CB F1 0332
        gbc.setState(0xd4c4, 0x49e, 0x9390, 0x9cf4, 0xfd69, 0x5d69, 0x0, 0x0);
        gbc.writeMem(0xd4c4, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x49e);
        EXPECT(gbc.pc(), 0xd4c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4c4), 0xcb);
        EXPECT(gbc.readMem(0xd4c5), 0xf1);
        // CB F1 0333
        gbc.setState(0x5f5a, 0xcef2, 0xf8c0, 0x2b93, 0x68d6, 0xcb2e, 0x1, 0x1);
        gbc.writeMem(0x5f5a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xcef2);
        EXPECT(gbc.pc(), 0x5f5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0334
        gbc.setState(0x3c40, 0xf90d, 0x4d70, 0x48fa, 0xd9d7, 0xa158, 0x0, 0x0);
        gbc.writeMem(0x3c40, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xf90d);
        EXPECT(gbc.pc(), 0x3c42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0335
        gbc.setState(0x5797, 0x4b56, 0xc730, 0x2da1, 0xd8ff, 0x986c, 0x0, 0x1);
        gbc.writeMem(0x5797, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x4b56);
        EXPECT(gbc.pc(), 0x5799);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0337
        gbc.setState(0xd673, 0x8228, 0x4210, 0xeb48, 0x49e6, 0x4024, 0x0, 0x0);
        gbc.writeMem(0xd673, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8228);
        EXPECT(gbc.pc(), 0xd675);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd673), 0xcb);
        EXPECT(gbc.readMem(0xd674), 0xf1);
        // CB F1 0338
        gbc.setState(0xb2cc, 0x137f, 0xbc60, 0x61d4, 0x47cc, 0x86da, 0x1, 0x1);
        gbc.writeMem(0xb2cc, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x137f);
        EXPECT(gbc.pc(), 0xb2ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2cc), 0xcb);
        EXPECT(gbc.readMem(0xb2cd), 0xf1);
        // CB F1 0339
        gbc.setState(0x6370, 0xd328, 0x7bb0, 0x93fa, 0x2316, 0xfb8d, 0x1, 0x0);
        gbc.writeMem(0x6370, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xd328);
        EXPECT(gbc.pc(), 0x6372);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 033A
        gbc.setState(0x7ab9, 0x34d4, 0x43f0, 0x9dd, 0x132a, 0xad89, 0x1, 0x1);
        gbc.writeMem(0x7ab9, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x34d4);
        EXPECT(gbc.pc(), 0x7abb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 033B
        gbc.setState(0xd863, 0xb6c0, 0xe00, 0xd4ea, 0x10a9, 0xc031, 0x0, 0x1);
        gbc.writeMem(0xd863, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb6c0);
        EXPECT(gbc.pc(), 0xd865);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd863), 0xcb);
        EXPECT(gbc.readMem(0xd864), 0xf1);
        // CB F1 033C
        gbc.setState(0x5e1a, 0x20e, 0xbd70, 0xdee6, 0x899f, 0x42, 0x0, 0x0);
        gbc.writeMem(0x5e1a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x20e);
        EXPECT(gbc.pc(), 0x5e1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 033D
        gbc.setState(0x9b2c, 0xb83b, 0x6450, 0x5229, 0xfd1d, 0x6a30, 0x0, 0x1);
        gbc.writeMem(0x9b2c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xb83b);
        EXPECT(gbc.pc(), 0x9b2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b2c), 0xcb);
        EXPECT(gbc.readMem(0x9b2d), 0xf1);
        // CB F1 033E
        gbc.setState(0x7db9, 0x56c, 0x9a60, 0x3637, 0x4d5, 0x12d7, 0x1, 0x0);
        gbc.writeMem(0x7db9, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x56c);
        EXPECT(gbc.pc(), 0x7dbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 033F
        gbc.setState(0xbb45, 0xd168, 0x3d20, 0x20f7, 0x9a0b, 0x16a6, 0x1, 0x0);
        gbc.writeMem(0xbb45, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd168);
        EXPECT(gbc.pc(), 0xbb47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb45), 0xcb);
        EXPECT(gbc.readMem(0xbb46), 0xf1);
        // CB F1 0340
        gbc.setState(0x6366, 0xc142, 0x1720, 0xbbe9, 0x9348, 0x69cc, 0x1, 0x1);
        gbc.writeMem(0x6366, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xc142);
        EXPECT(gbc.pc(), 0x6368);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0341
        gbc.setState(0xcd21, 0x9b80, 0xb460, 0x5a1e, 0x607f, 0xccda, 0x1, 0x0);
        gbc.writeMem(0xcd21, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x9b80);
        EXPECT(gbc.pc(), 0xcd23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd21), 0xcb);
        EXPECT(gbc.readMem(0xcd22), 0xf1);
        // CB F1 0342
        gbc.setState(0x18f9, 0x4dee, 0x3230, 0x72b3, 0x8d24, 0x6c98, 0x0, 0x0);
        gbc.writeMem(0x18f9, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x4dee);
        EXPECT(gbc.pc(), 0x18fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0343
        gbc.setState(0x9090, 0xb1e9, 0x77a0, 0x4792, 0x1a3b, 0xfdc, 0x0, 0x1);
        gbc.writeMem(0x9090, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xb1e9);
        EXPECT(gbc.pc(), 0x9092);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9090), 0xcb);
        EXPECT(gbc.readMem(0x9091), 0xf1);
        // CB F1 0344
        gbc.setState(0x39c8, 0x451, 0xc990, 0x3141, 0x847a, 0xd4f0, 0x1, 0x0);
        gbc.writeMem(0x39c8, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x451);
        EXPECT(gbc.pc(), 0x39ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0345
        gbc.setState(0xed2f, 0x4c24, 0x1eb0, 0xbdc9, 0xd1e5, 0xb516, 0x0, 0x0);
        gbc.writeMem(0xed2f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x4c24);
        EXPECT(gbc.pc(), 0xed31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed2f), 0xcb);
        EXPECT(gbc.readMem(0xed30), 0xf1);
        // CB F1 0346
        gbc.setState(0x3a8a, 0x1203, 0x6d80, 0xcc55, 0x22ac, 0x1eeb, 0x0, 0x1);
        gbc.writeMem(0x3a8a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x1203);
        EXPECT(gbc.pc(), 0x3a8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0348
        gbc.setState(0xd8c1, 0xb925, 0xc400, 0x31e1, 0xd786, 0xc74b, 0x1, 0x1);
        gbc.writeMem(0xd8c1, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xb925);
        EXPECT(gbc.pc(), 0xd8c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8c1), 0xcb);
        EXPECT(gbc.readMem(0xd8c2), 0xf1);
        // CB F1 0349
        gbc.setState(0x51f8, 0x620f, 0x8870, 0x38df, 0x2e1c, 0xcbd, 0x0, 0x1);
        gbc.writeMem(0x51f8, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x620f);
        EXPECT(gbc.pc(), 0x51fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 034A
        gbc.setState(0x7163, 0x5c4d, 0x88e0, 0xa9bb, 0xf8d5, 0xe47e, 0x0, 0x0);
        gbc.writeMem(0x7163, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x5c4d);
        EXPECT(gbc.pc(), 0x7165);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 034B
        gbc.setState(0xbaec, 0x1541, 0xc970, 0xae6a, 0x3181, 0x4cb6, 0x0, 0x1);
        gbc.writeMem(0xbaec, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x1541);
        EXPECT(gbc.pc(), 0xbaee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaec), 0xcb);
        EXPECT(gbc.readMem(0xbaed), 0xf1);
        // CB F1 034C
        gbc.setState(0xa599, 0x172a, 0x2e90, 0x1ef3, 0x3e76, 0xf3c, 0x0, 0x1);
        gbc.writeMem(0xa599, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x172a);
        EXPECT(gbc.pc(), 0xa59b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa599), 0xcb);
        EXPECT(gbc.readMem(0xa59a), 0xf1);
        // CB F1 034E
        gbc.setState(0x9caa, 0xa83e, 0x4de0, 0xca89, 0xba8e, 0xd99b, 0x0, 0x0);
        gbc.writeMem(0x9caa, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xa83e);
        EXPECT(gbc.pc(), 0x9cac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9caa), 0xcb);
        EXPECT(gbc.readMem(0x9cab), 0xf1);
        // CB F1 0350
        gbc.setState(0xfca, 0xb7ea, 0x3a10, 0xdcee, 0x41b6, 0xd47, 0x0, 0x0);
        gbc.writeMem(0xfca, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xb7ea);
        EXPECT(gbc.pc(), 0xfcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0351
        gbc.setState(0x5cc5, 0xa2ef, 0xd30, 0x2082, 0xc0c3, 0x7619, 0x1, 0x0);
        gbc.writeMem(0x5cc5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xa2ef);
        EXPECT(gbc.pc(), 0x5cc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0352
        gbc.setState(0xaf78, 0x7f5b, 0xeb0, 0xa497, 0x7ad5, 0x41c9, 0x0, 0x0);
        gbc.writeMem(0xaf78, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x7f5b);
        EXPECT(gbc.pc(), 0xaf7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf78), 0xcb);
        EXPECT(gbc.readMem(0xaf79), 0xf1);
        // CB F1 0353
        gbc.setState(0x8b79, 0xeea6, 0x70, 0xe283, 0x11c5, 0x3144, 0x0, 0x1);
        gbc.writeMem(0x8b79, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xeea6);
        EXPECT(gbc.pc(), 0x8b7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b79), 0xcb);
        EXPECT(gbc.readMem(0x8b7a), 0xf1);
        // CB F1 0355
        gbc.setState(0x4727, 0xf749, 0x2770, 0xef59, 0xff13, 0x8f3a, 0x0, 0x1);
        gbc.writeMem(0x4727, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xf749);
        EXPECT(gbc.pc(), 0x4729);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0356
        gbc.setState(0xaa8e, 0x369b, 0xba40, 0xae91, 0xfc53, 0xb151, 0x1, 0x0);
        gbc.writeMem(0xaa8e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x369b);
        EXPECT(gbc.pc(), 0xaa90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa8e), 0xcb);
        EXPECT(gbc.readMem(0xaa8f), 0xf1);
        // CB F1 0357
        gbc.setState(0xb0ff, 0xb207, 0x52e0, 0x72e6, 0x5026, 0x5e1a, 0x0, 0x1);
        gbc.writeMem(0xb0ff, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xb207);
        EXPECT(gbc.pc(), 0xb101);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0ff), 0xcb);
        EXPECT(gbc.readMem(0xb100), 0xf1);
        // CB F1 0358
        gbc.setState(0xdc8b, 0xb182, 0xbe00, 0x485e, 0x337, 0x19da, 0x1, 0x0);
        gbc.writeMem(0xdc8b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xb182);
        EXPECT(gbc.pc(), 0xdc8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc8b), 0xcb);
        EXPECT(gbc.readMem(0xdc8c), 0xf1);
        // CB F1 0359
        gbc.setState(0x5640, 0x1423, 0x6810, 0xbf7, 0x710c, 0x297, 0x1, 0x1);
        gbc.writeMem(0x5640, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x1423);
        EXPECT(gbc.pc(), 0x5642);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 035B
        gbc.setState(0xaee9, 0x653, 0xc9d0, 0xf68d, 0xad75, 0xade0, 0x0, 0x0);
        gbc.writeMem(0xaee9, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x653);
        EXPECT(gbc.pc(), 0xaeeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaee9), 0xcb);
        EXPECT(gbc.readMem(0xaeea), 0xf1);
        // CB F1 035C
        gbc.setState(0xe42a, 0x2408, 0x8fc0, 0x82a5, 0xa2ae, 0xc0e5, 0x0, 0x0);
        gbc.writeMem(0xe42a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x2408);
        EXPECT(gbc.pc(), 0xe42c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe42a), 0xcb);
        EXPECT(gbc.readMem(0xe42b), 0xf1);
        // CB F1 035D
        gbc.setState(0x1bca, 0x33f8, 0xcf80, 0x8233, 0xb71b, 0x9a67, 0x0, 0x0);
        gbc.writeMem(0x1bca, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x33f8);
        EXPECT(gbc.pc(), 0x1bcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 035E
        gbc.setState(0x94a, 0x7b96, 0xf660, 0x6afa, 0xd62d, 0x99cf, 0x1, 0x1);
        gbc.writeMem(0x94a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x7b96);
        EXPECT(gbc.pc(), 0x94c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 035F
        gbc.setState(0x9f5b, 0xc95a, 0xa3b0, 0x1bc1, 0x6cb2, 0x8d68, 0x0, 0x1);
        gbc.writeMem(0x9f5b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xc95a);
        EXPECT(gbc.pc(), 0x9f5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f5b), 0xcb);
        EXPECT(gbc.readMem(0x9f5c), 0xf1);
        // CB F1 0360
        gbc.setState(0xd140, 0x9e5a, 0x7100, 0x5580, 0x45ea, 0x9891, 0x1, 0x0);
        gbc.writeMem(0xd140, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x9e5a);
        EXPECT(gbc.pc(), 0xd142);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd140), 0xcb);
        EXPECT(gbc.readMem(0xd141), 0xf1);
        // CB F1 0361
        gbc.setState(0x2e4b, 0x7ae0, 0x5d0, 0xfb2c, 0x72dd, 0xee80, 0x1, 0x1);
        gbc.writeMem(0x2e4b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x7ae0);
        EXPECT(gbc.pc(), 0x2e4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0362
        gbc.setState(0xbb38, 0x4f8a, 0xb510, 0x8740, 0x9d2, 0xf85b, 0x0, 0x1);
        gbc.writeMem(0xbb38, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x4f8a);
        EXPECT(gbc.pc(), 0xbb3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb38), 0xcb);
        EXPECT(gbc.readMem(0xbb39), 0xf1);
        // CB F1 0363
        gbc.setState(0x9c43, 0xcdc0, 0x8050, 0x4797, 0x4f3, 0x27d5, 0x0, 0x1);
        gbc.writeMem(0x9c43, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xcdc0);
        EXPECT(gbc.pc(), 0x9c45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c43), 0xcb);
        EXPECT(gbc.readMem(0x9c44), 0xf1);
        // CB F1 0364
        gbc.setState(0x47f, 0xed17, 0x26f0, 0x8679, 0x20dc, 0x20d1, 0x0, 0x0);
        gbc.writeMem(0x47f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xed17);
        EXPECT(gbc.pc(), 0x481);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0365
        gbc.setState(0x238b, 0xc9fd, 0x6a60, 0x8951, 0xcc1c, 0xfc6f, 0x1, 0x1);
        gbc.writeMem(0x238b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xc9fd);
        EXPECT(gbc.pc(), 0x238d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0366
        gbc.setState(0x207f, 0xcb9c, 0x6280, 0x7538, 0x617c, 0x9b6f, 0x1, 0x1);
        gbc.writeMem(0x207f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xcb9c);
        EXPECT(gbc.pc(), 0x2081);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0367
        gbc.setState(0xbf31, 0x83b2, 0x7390, 0x9f22, 0x9b06, 0x75f3, 0x1, 0x0);
        gbc.writeMem(0xbf31, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x83b2);
        EXPECT(gbc.pc(), 0xbf33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf31), 0xcb);
        EXPECT(gbc.readMem(0xbf32), 0xf1);
        // CB F1 0368
        gbc.setState(0x884b, 0x2bc2, 0xba0, 0xc35e, 0xb899, 0x799b, 0x0, 0x0);
        gbc.writeMem(0x884b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x2bc2);
        EXPECT(gbc.pc(), 0x884d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x884b), 0xcb);
        EXPECT(gbc.readMem(0x884c), 0xf1);
        // CB F1 0369
        gbc.setState(0x4eba, 0x589, 0xe5c0, 0x177c, 0x167b, 0xd2a2, 0x1, 0x1);
        gbc.writeMem(0x4eba, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x589);
        EXPECT(gbc.pc(), 0x4ebc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 036A
        gbc.setState(0x3818, 0x9150, 0xdaf0, 0x7029, 0x4021, 0xb5ef, 0x0, 0x1);
        gbc.writeMem(0x3818, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x9150);
        EXPECT(gbc.pc(), 0x381a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 036B
        gbc.setState(0xf8c, 0x2859, 0xedb0, 0xa0a, 0x61c0, 0xf53c, 0x1, 0x1);
        gbc.writeMem(0xf8c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x2859);
        EXPECT(gbc.pc(), 0xf8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 036C
        gbc.setState(0x1ea6, 0xf2f9, 0x55a0, 0xd6c2, 0xef00, 0x1e1a, 0x1, 0x1);
        gbc.writeMem(0x1ea6, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xf2f9);
        EXPECT(gbc.pc(), 0x1ea8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 036D
        gbc.setState(0x2371, 0xece4, 0xf400, 0x48f0, 0x67e4, 0xbb62, 0x0, 0x1);
        gbc.writeMem(0x2371, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xece4);
        EXPECT(gbc.pc(), 0x2373);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 036E
        gbc.setState(0xabfb, 0xf39, 0x6d80, 0xa5e6, 0x6ab6, 0x9dbe, 0x1, 0x1);
        gbc.writeMem(0xabfb, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xf39);
        EXPECT(gbc.pc(), 0xabfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabfb), 0xcb);
        EXPECT(gbc.readMem(0xabfc), 0xf1);
        // CB F1 036F
        gbc.setState(0xe938, 0xf42f, 0xe6c0, 0xaad8, 0x91de, 0xe1ed, 0x1, 0x1);
        gbc.writeMem(0xe938, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xf42f);
        EXPECT(gbc.pc(), 0xe93a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe938), 0xcb);
        EXPECT(gbc.readMem(0xe939), 0xf1);
        // CB F1 0370
        gbc.setState(0xa81b, 0xdf15, 0x7b40, 0x70b5, 0x2ac7, 0x6af1, 0x0, 0x0);
        gbc.writeMem(0xa81b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xdf15);
        EXPECT(gbc.pc(), 0xa81d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa81b), 0xcb);
        EXPECT(gbc.readMem(0xa81c), 0xf1);
        // CB F1 0371
        gbc.setState(0xca3e, 0x714b, 0xc6c0, 0x2c4f, 0x297b, 0x8270, 0x0, 0x1);
        gbc.writeMem(0xca3e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x714b);
        EXPECT(gbc.pc(), 0xca40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca3e), 0xcb);
        EXPECT(gbc.readMem(0xca3f), 0xf1);
        // CB F1 0372
        gbc.setState(0xbfae, 0x5a8d, 0xe290, 0xbc7c, 0x6924, 0xe9e3, 0x1, 0x0);
        gbc.writeMem(0xbfae, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x5a8d);
        EXPECT(gbc.pc(), 0xbfb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfae), 0xcb);
        EXPECT(gbc.readMem(0xbfaf), 0xf1);
        // CB F1 0373
        gbc.setState(0xa68f, 0x4d04, 0x4aa0, 0x59d0, 0x9cc9, 0x719a, 0x1, 0x1);
        gbc.writeMem(0xa68f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x4d04);
        EXPECT(gbc.pc(), 0xa691);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa68f), 0xcb);
        EXPECT(gbc.readMem(0xa690), 0xf1);
        // CB F1 0374
        gbc.setState(0x86a3, 0xb97d, 0x8cf0, 0x2d5a, 0x23e4, 0x59ca, 0x0, 0x1);
        gbc.writeMem(0x86a3, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xb97d);
        EXPECT(gbc.pc(), 0x86a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86a3), 0xcb);
        EXPECT(gbc.readMem(0x86a4), 0xf1);
        // CB F1 0375
        gbc.setState(0x5d3b, 0x4eba, 0x2c90, 0x5392, 0x4f12, 0xb205, 0x0, 0x0);
        gbc.writeMem(0x5d3b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x4eba);
        EXPECT(gbc.pc(), 0x5d3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0376
        gbc.setState(0x785b, 0xef73, 0xb660, 0xbe07, 0x1a69, 0x6a62, 0x0, 0x0);
        gbc.writeMem(0x785b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xef73);
        EXPECT(gbc.pc(), 0x785d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0377
        gbc.setState(0x8ddf, 0x9ad9, 0xeb90, 0x6db8, 0x9fae, 0x3a5b, 0x0, 0x1);
        gbc.writeMem(0x8ddf, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9ad9);
        EXPECT(gbc.pc(), 0x8de1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ddf), 0xcb);
        EXPECT(gbc.readMem(0x8de0), 0xf1);
        // CB F1 0379
        gbc.setState(0x5818, 0x22fa, 0xfd60, 0x8996, 0xca34, 0x8a04, 0x1, 0x1);
        gbc.writeMem(0x5818, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x22fa);
        EXPECT(gbc.pc(), 0x581a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 037A
        gbc.setState(0x6879, 0xa02c, 0xd380, 0x7eab, 0x2548, 0x77af, 0x1, 0x1);
        gbc.writeMem(0x6879, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xa02c);
        EXPECT(gbc.pc(), 0x687b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 037B
        gbc.setState(0x60bc, 0x3236, 0x4050, 0x6765, 0x2550, 0x62a1, 0x0, 0x1);
        gbc.writeMem(0x60bc, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x3236);
        EXPECT(gbc.pc(), 0x60be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 037C
        gbc.setState(0x1aa3, 0xa10a, 0x2a20, 0x29da, 0xe17e, 0x1b52, 0x0, 0x0);
        gbc.writeMem(0x1aa3, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xa10a);
        EXPECT(gbc.pc(), 0x1aa5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 037D
        gbc.setState(0x5fc8, 0x1c5d, 0xe300, 0xd750, 0x4021, 0x666e, 0x1, 0x0);
        gbc.writeMem(0x5fc8, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x1c5d);
        EXPECT(gbc.pc(), 0x5fca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 037E
        gbc.setState(0xa512, 0x696, 0x14a0, 0xa95d, 0x306c, 0xbb47, 0x0, 0x1);
        gbc.writeMem(0xa512, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x696);
        EXPECT(gbc.pc(), 0xa514);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa512), 0xcb);
        EXPECT(gbc.readMem(0xa513), 0xf1);
        // CB F1 037F
        gbc.setState(0x807e, 0x7a73, 0xab50, 0xc472, 0x8f42, 0x72d1, 0x1, 0x0);
        gbc.writeMem(0x807e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x7a73);
        EXPECT(gbc.pc(), 0x8080);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x807e), 0xcb);
        EXPECT(gbc.readMem(0x807f), 0xf1);
        // CB F1 0380
        gbc.setState(0x5ea7, 0x885a, 0x8bb0, 0x41e0, 0x2623, 0x1206, 0x1, 0x1);
        gbc.writeMem(0x5ea7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x885a);
        EXPECT(gbc.pc(), 0x5ea9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0381
        gbc.setState(0xb3c, 0x80c9, 0xa780, 0x81ef, 0x246d, 0xe320, 0x1, 0x1);
        gbc.writeMem(0xb3c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x80c9);
        EXPECT(gbc.pc(), 0xb3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0382
        gbc.setState(0xedbf, 0x93de, 0x7000, 0x2e0c, 0x9dcd, 0x727e, 0x0, 0x0);
        gbc.writeMem(0xedbf, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x93de);
        EXPECT(gbc.pc(), 0xedc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedbf), 0xcb);
        EXPECT(gbc.readMem(0xedc0), 0xf1);
        // CB F1 0383
        gbc.setState(0x3c6, 0xa669, 0xdf30, 0x9d16, 0x54d5, 0x7c21, 0x0, 0x0);
        gbc.writeMem(0x3c6, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xa669);
        EXPECT(gbc.pc(), 0x3c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0384
        gbc.setState(0x7140, 0x48e8, 0xcf80, 0x9216, 0x567e, 0x3fff, 0x1, 0x0);
        gbc.writeMem(0x7140, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x48e8);
        EXPECT(gbc.pc(), 0x7142);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0385
        gbc.setState(0x166b, 0xec02, 0xb320, 0xd949, 0x9107, 0x877a, 0x1, 0x1);
        gbc.writeMem(0x166b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xec02);
        EXPECT(gbc.pc(), 0x166d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0386
        gbc.setState(0x597a, 0xf28, 0x3250, 0xa3ac, 0xf226, 0xe6c0, 0x0, 0x0);
        gbc.writeMem(0x597a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xf28);
        EXPECT(gbc.pc(), 0x597c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0387
        gbc.setState(0xd9e0, 0x95b2, 0x1f40, 0x3c84, 0xf2d4, 0xa6a7, 0x1, 0x1);
        gbc.writeMem(0xd9e0, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x95b2);
        EXPECT(gbc.pc(), 0xd9e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9e0), 0xcb);
        EXPECT(gbc.readMem(0xd9e1), 0xf1);
        // CB F1 0388
        gbc.setState(0xa53c, 0x4b18, 0x9dd0, 0xe681, 0x1401, 0x6acc, 0x0, 0x1);
        gbc.writeMem(0xa53c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x4b18);
        EXPECT(gbc.pc(), 0xa53e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa53c), 0xcb);
        EXPECT(gbc.readMem(0xa53d), 0xf1);
        // CB F1 0389
        gbc.setState(0xb8f7, 0x676c, 0x2010, 0x1277, 0x53d, 0xb998, 0x1, 0x1);
        gbc.writeMem(0xb8f7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x676c);
        EXPECT(gbc.pc(), 0xb8f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8f7), 0xcb);
        EXPECT(gbc.readMem(0xb8f8), 0xf1);
        // CB F1 038B
        gbc.setState(0x3396, 0xac64, 0x3100, 0xb14d, 0x13e1, 0xa04b, 0x0, 0x1);
        gbc.writeMem(0x3396, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xac64);
        EXPECT(gbc.pc(), 0x3398);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 038C
        gbc.setState(0x5a72, 0x6147, 0x7b70, 0xce5f, 0xa9d6, 0x3201, 0x0, 0x0);
        gbc.writeMem(0x5a72, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x6147);
        EXPECT(gbc.pc(), 0x5a74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 038D
        gbc.setState(0xf0, 0xd237, 0xfc30, 0xbf51, 0xc6cc, 0x3f1a, 0x1, 0x0);
        gbc.writeMem(0xf0, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xd237);
        EXPECT(gbc.pc(), 0xf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 038E
        gbc.setState(0xb02c, 0xd0a, 0x68c0, 0x5812, 0x44c7, 0xf5f7, 0x1, 0x1);
        gbc.writeMem(0xb02c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xd0a);
        EXPECT(gbc.pc(), 0xb02e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb02c), 0xcb);
        EXPECT(gbc.readMem(0xb02d), 0xf1);
        // CB F1 038F
        gbc.setState(0x9e6d, 0xfb6c, 0xf530, 0x84c, 0xbaa2, 0x3f9, 0x1, 0x1);
        gbc.writeMem(0x9e6d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xfb6c);
        EXPECT(gbc.pc(), 0x9e6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e6d), 0xcb);
        EXPECT(gbc.readMem(0x9e6e), 0xf1);
        // CB F1 0390
        gbc.setState(0x26d4, 0xfe9, 0x5e0, 0xe49d, 0xfaca, 0x216d, 0x0, 0x1);
        gbc.writeMem(0x26d4, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xfe9);
        EXPECT(gbc.pc(), 0x26d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0391
        gbc.setState(0x9655, 0x52c6, 0x9de0, 0x8f21, 0xee5, 0x16e9, 0x1, 0x0);
        gbc.writeMem(0x9655, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x52c6);
        EXPECT(gbc.pc(), 0x9657);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9655), 0xcb);
        EXPECT(gbc.readMem(0x9656), 0xf1);
        // CB F1 0392
        gbc.setState(0xddb5, 0x254a, 0x36f0, 0x638a, 0xdc4d, 0x9ea8, 0x0, 0x1);
        gbc.writeMem(0xddb5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x254a);
        EXPECT(gbc.pc(), 0xddb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddb5), 0xcb);
        EXPECT(gbc.readMem(0xddb6), 0xf1);
        // CB F1 0393
        gbc.setState(0x1ac, 0xc30e, 0xb500, 0x3344, 0x8690, 0xd89, 0x0, 0x1);
        gbc.writeMem(0x1ac, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc30e);
        EXPECT(gbc.pc(), 0x1ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0394
        gbc.setState(0x624a, 0x16c2, 0x5810, 0x6839, 0xebe1, 0x3b9a, 0x1, 0x1);
        gbc.writeMem(0x624a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x16c2);
        EXPECT(gbc.pc(), 0x624c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 0395
        gbc.setState(0x2e92, 0x645, 0xaf60, 0x107a, 0x1e32, 0xc32e, 0x0, 0x1);
        gbc.writeMem(0x2e92, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x645);
        EXPECT(gbc.pc(), 0x2e94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0396
        gbc.setState(0x757e, 0x4ad6, 0x7420, 0xee51, 0x57a, 0xec0c, 0x0, 0x1);
        gbc.writeMem(0x757e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x4ad6);
        EXPECT(gbc.pc(), 0x7580);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 0397
        gbc.setState(0xc6ca, 0x4a6a, 0x4ec0, 0x5d29, 0xc7b2, 0x8ab8, 0x1, 0x1);
        gbc.writeMem(0xc6ca, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x4a6a);
        EXPECT(gbc.pc(), 0xc6cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6ca), 0xcb);
        EXPECT(gbc.readMem(0xc6cb), 0xf1);
        // CB F1 0398
        gbc.setState(0xefd5, 0xca06, 0x3450, 0xc55c, 0xd7ff, 0x3391, 0x1, 0x0);
        gbc.writeMem(0xefd5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xca06);
        EXPECT(gbc.pc(), 0xefd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefd5), 0xcb);
        EXPECT(gbc.readMem(0xefd6), 0xf1);
        // CB F1 0399
        gbc.setState(0x33f3, 0xefa7, 0xd870, 0x7a62, 0x80ad, 0xce48, 0x0, 0x0);
        gbc.writeMem(0x33f3, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xefa7);
        EXPECT(gbc.pc(), 0x33f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 039A
        gbc.setState(0xe7f6, 0x6b99, 0x58e0, 0x18d9, 0x2c26, 0xebab, 0x0, 0x1);
        gbc.writeMem(0xe7f6, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x6b99);
        EXPECT(gbc.pc(), 0xe7f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7f6), 0xcb);
        EXPECT(gbc.readMem(0xe7f7), 0xf1);
        // CB F1 039B
        gbc.setState(0x6d59, 0xf982, 0x7ea0, 0xa4ae, 0x4b05, 0xdec1, 0x1, 0x0);
        gbc.writeMem(0x6d59, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xf982);
        EXPECT(gbc.pc(), 0x6d5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 039C
        gbc.setState(0xbf23, 0x9134, 0xc840, 0xbdc9, 0xa888, 0x90b9, 0x0, 0x0);
        gbc.writeMem(0xbf23, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x9134);
        EXPECT(gbc.pc(), 0xbf25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf23), 0xcb);
        EXPECT(gbc.readMem(0xbf24), 0xf1);
        // CB F1 039D
        gbc.setState(0x4ff1, 0x112, 0xb9d0, 0x9d6d, 0x1ca4, 0xe847, 0x0, 0x1);
        gbc.writeMem(0x4ff1, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x112);
        EXPECT(gbc.pc(), 0x4ff3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 039F
        gbc.setState(0x60ed, 0x394f, 0x4c00, 0x79a6, 0x4969, 0x6c8d, 0x1, 0x0);
        gbc.writeMem(0x60ed, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x394f);
        EXPECT(gbc.pc(), 0x60ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 03A0
        gbc.setState(0xfea, 0x9135, 0x3b80, 0x46d6, 0xc6c7, 0x84f5, 0x0, 0x1);
        gbc.writeMem(0xfea, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x9135);
        EXPECT(gbc.pc(), 0xfec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 03A1
        gbc.setState(0x64ba, 0xf871, 0xd40, 0x7a53, 0xd21, 0xfca2, 0x1, 0x0);
        gbc.writeMem(0x64ba, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xf871);
        EXPECT(gbc.pc(), 0x64bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 03A2
        gbc.setState(0xebb2, 0xa7c5, 0x6580, 0x7e57, 0xb79e, 0x3755, 0x0, 0x0);
        gbc.writeMem(0xebb2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xa7c5);
        EXPECT(gbc.pc(), 0xebb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebb2), 0xcb);
        EXPECT(gbc.readMem(0xebb3), 0xf1);
        // CB F1 03A4
        gbc.setState(0xaf40, 0x2df1, 0xf70, 0x6168, 0xb16a, 0xd2ae, 0x0, 0x0);
        gbc.writeMem(0xaf40, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x2df1);
        EXPECT(gbc.pc(), 0xaf42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf40), 0xcb);
        EXPECT(gbc.readMem(0xaf41), 0xf1);
        // CB F1 03A5
        gbc.setState(0x3348, 0x49e6, 0x8ab0, 0x2e11, 0x8243, 0x69ec, 0x1, 0x0);
        gbc.writeMem(0x3348, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x49e6);
        EXPECT(gbc.pc(), 0x334a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 03A6
        gbc.setState(0x6911, 0x2fbe, 0xc670, 0xd6b9, 0xc4b5, 0x435d, 0x0, 0x0);
        gbc.writeMem(0x6911, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x2fbe);
        EXPECT(gbc.pc(), 0x6913);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 03A8
        gbc.setState(0x218e, 0xa344, 0x9030, 0xe4ad, 0x9a6b, 0xa449, 0x1, 0x1);
        gbc.writeMem(0x218e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xa344);
        EXPECT(gbc.pc(), 0x2190);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 03A9
        gbc.setState(0xeb62, 0xe945, 0x5920, 0x9338, 0x4dac, 0xec48, 0x1, 0x0);
        gbc.writeMem(0xeb62, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xe945);
        EXPECT(gbc.pc(), 0xeb64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb62), 0xcb);
        EXPECT(gbc.readMem(0xeb63), 0xf1);
        // CB F1 03AA
        gbc.setState(0x6db9, 0xb722, 0xd0, 0x71af, 0x9b48, 0xcc5e, 0x1, 0x1);
        gbc.writeMem(0x6db9, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xb722);
        EXPECT(gbc.pc(), 0x6dbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 03AB
        gbc.setState(0xb42a, 0x3810, 0x1800, 0x312c, 0x3577, 0xf3f9, 0x0, 0x0);
        gbc.writeMem(0xb42a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x3810);
        EXPECT(gbc.pc(), 0xb42c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb42a), 0xcb);
        EXPECT(gbc.readMem(0xb42b), 0xf1);
        // CB F1 03AC
        gbc.setState(0xbd75, 0xe67d, 0xa330, 0x969f, 0x4c20, 0x8d5b, 0x0, 0x1);
        gbc.writeMem(0xbd75, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xe67d);
        EXPECT(gbc.pc(), 0xbd77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd75), 0xcb);
        EXPECT(gbc.readMem(0xbd76), 0xf1);
        // CB F1 03AD
        gbc.setState(0xee7, 0x5e9c, 0x4060, 0x6f95, 0x717c, 0xa741, 0x0, 0x0);
        gbc.writeMem(0xee7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x5e9c);
        EXPECT(gbc.pc(), 0xee9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 03AE
        gbc.setState(0x2945, 0xc399, 0x2ce0, 0x6699, 0x31ee, 0xa926, 0x0, 0x0);
        gbc.writeMem(0x2945, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xc399);
        EXPECT(gbc.pc(), 0x2947);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 03AF
        gbc.setState(0x84e, 0x263c, 0x6560, 0x305e, 0xaef3, 0xd454, 0x1, 0x0);
        gbc.writeMem(0x84e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x263c);
        EXPECT(gbc.pc(), 0x850);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 03B0
        gbc.setState(0x477c, 0xfe36, 0x5570, 0xccff, 0xff04, 0xffeb, 0x0, 0x1);
        gbc.writeMem(0x477c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xfe36);
        EXPECT(gbc.pc(), 0x477e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 03B1
        gbc.setState(0xbbcd, 0x49ef, 0x4a80, 0xb53d, 0x7871, 0x58e0, 0x1, 0x1);
        gbc.writeMem(0xbbcd, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x49ef);
        EXPECT(gbc.pc(), 0xbbcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbcd), 0xcb);
        EXPECT(gbc.readMem(0xbbce), 0xf1);
        // CB F1 03B2
        gbc.setState(0x4f67, 0xcaae, 0xba90, 0x2b13, 0xb47e, 0x2e7d, 0x0, 0x0);
        gbc.writeMem(0x4f67, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xcaae);
        EXPECT(gbc.pc(), 0x4f69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 03B3
        gbc.setState(0x50ce, 0xe4f, 0x97f0, 0x4d87, 0xe535, 0xd10, 0x0, 0x1);
        gbc.writeMem(0x50ce, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xe4f);
        EXPECT(gbc.pc(), 0x50d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 03B5
        gbc.setState(0xe3eb, 0x9a5f, 0xdff0, 0x6630, 0x7d9, 0x8671, 0x0, 0x0);
        gbc.writeMem(0xe3eb, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x9a5f);
        EXPECT(gbc.pc(), 0xe3ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3eb), 0xcb);
        EXPECT(gbc.readMem(0xe3ec), 0xf1);
        // CB F1 03B6
        gbc.setState(0xe4ab, 0xc701, 0xda50, 0x9543, 0x20af, 0xc522, 0x0, 0x0);
        gbc.writeMem(0xe4ab, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xc701);
        EXPECT(gbc.pc(), 0xe4ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4ab), 0xcb);
        EXPECT(gbc.readMem(0xe4ac), 0xf1);
        // CB F1 03B7
        gbc.setState(0x40e5, 0x2464, 0xbaf0, 0xf597, 0x3d30, 0x3484, 0x1, 0x0);
        gbc.writeMem(0x40e5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x2464);
        EXPECT(gbc.pc(), 0x40e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 03B8
        gbc.setState(0x7808, 0xa44c, 0xa2f0, 0x942b, 0x7332, 0x1eb9, 0x0, 0x0);
        gbc.writeMem(0x7808, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xa44c);
        EXPECT(gbc.pc(), 0x780a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 03B9
        gbc.setState(0x1758, 0x1ac7, 0x6070, 0x733d, 0x17c6, 0xde01, 0x1, 0x0);
        gbc.writeMem(0x1758, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x1ac7);
        EXPECT(gbc.pc(), 0x175a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 03BA
        gbc.setState(0x50b5, 0x18f0, 0x4700, 0x950c, 0x503d, 0x21d9, 0x1, 0x0);
        gbc.writeMem(0x50b5, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x18f0);
        EXPECT(gbc.pc(), 0x50b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 03BC
        gbc.setState(0x8734, 0xfb06, 0xde60, 0x7a46, 0x61ef, 0x1708, 0x1, 0x0);
        gbc.writeMem(0x8734, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xfb06);
        EXPECT(gbc.pc(), 0x8736);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8734), 0xcb);
        EXPECT(gbc.readMem(0x8735), 0xf1);
        // CB F1 03BD
        gbc.setState(0x80c6, 0x8ab5, 0xced0, 0xce32, 0xf76e, 0x5b0e, 0x1, 0x0);
        gbc.writeMem(0x80c6, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x8ab5);
        EXPECT(gbc.pc(), 0x80c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80c6), 0xcb);
        EXPECT(gbc.readMem(0x80c7), 0xf1);
        // CB F1 03BE
        gbc.setState(0xa549, 0x60f, 0x5560, 0xd1ad, 0x4d1e, 0xa0cd, 0x1, 0x1);
        gbc.writeMem(0xa549, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x60f);
        EXPECT(gbc.pc(), 0xa54b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa549), 0xcb);
        EXPECT(gbc.readMem(0xa54a), 0xf1);
        // CB F1 03BF
        gbc.setState(0x4378, 0x11c, 0x87b0, 0x48d0, 0xbb58, 0x35f0, 0x0, 0x0);
        gbc.writeMem(0x4378, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x11c);
        EXPECT(gbc.pc(), 0x437a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 03C0
        gbc.setState(0x91f2, 0x6167, 0x31e0, 0xa6f7, 0x3080, 0x3d64, 0x0, 0x1);
        gbc.writeMem(0x91f2, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x6167);
        EXPECT(gbc.pc(), 0x91f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91f2), 0xcb);
        EXPECT(gbc.readMem(0x91f3), 0xf1);
        // CB F1 03C1
        gbc.setState(0xe95b, 0xc995, 0x3190, 0x3ba0, 0xbb30, 0x3803, 0x0, 0x0);
        gbc.writeMem(0xe95b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xc995);
        EXPECT(gbc.pc(), 0xe95d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe95b), 0xcb);
        EXPECT(gbc.readMem(0xe95c), 0xf1);
        // CB F1 03C2
        gbc.setState(0x9407, 0xf410, 0xe6b0, 0x272d, 0xf0e1, 0x91d4, 0x0, 0x0);
        gbc.writeMem(0x9407, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf410);
        EXPECT(gbc.pc(), 0x9409);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9407), 0xcb);
        EXPECT(gbc.readMem(0x9408), 0xf1);
        // CB F1 03C3
        gbc.setState(0x310b, 0xae5d, 0x3af0, 0xea88, 0x45d8, 0xd82d, 0x0, 0x0);
        gbc.writeMem(0x310b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xae5d);
        EXPECT(gbc.pc(), 0x310d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 03C4
        gbc.setState(0x8b0d, 0xf7c, 0xcc0, 0x3f78, 0x1905, 0xd57b, 0x0, 0x0);
        gbc.writeMem(0x8b0d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xf7c);
        EXPECT(gbc.pc(), 0x8b0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b0d), 0xcb);
        EXPECT(gbc.readMem(0x8b0e), 0xf1);
        // CB F1 03C5
        gbc.setState(0x7c6f, 0x3374, 0x250, 0xe58d, 0x87e1, 0x168, 0x1, 0x0);
        gbc.writeMem(0x7c6f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x3374);
        EXPECT(gbc.pc(), 0x7c71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 03C6
        gbc.setState(0x89b3, 0xc2fb, 0x7130, 0xf28, 0x5182, 0xb81b, 0x1, 0x0);
        gbc.writeMem(0x89b3, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xc2fb);
        EXPECT(gbc.pc(), 0x89b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89b3), 0xcb);
        EXPECT(gbc.readMem(0x89b4), 0xf1);
        // CB F1 03C7
        gbc.setState(0x951a, 0x5b57, 0xe3e0, 0xd029, 0xface, 0x3de4, 0x0, 0x1);
        gbc.writeMem(0x951a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x5b57);
        EXPECT(gbc.pc(), 0x951c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x951a), 0xcb);
        EXPECT(gbc.readMem(0x951b), 0xf1);
        // CB F1 03C8
        gbc.setState(0xceca, 0x5470, 0x57e0, 0x8b97, 0x9064, 0x15c2, 0x0, 0x0);
        gbc.writeMem(0xceca, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x5470);
        EXPECT(gbc.pc(), 0xcecc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xceca), 0xcb);
        EXPECT(gbc.readMem(0xcecb), 0xf1);
        // CB F1 03C9
        gbc.setState(0xe834, 0x6190, 0x2e80, 0x8714, 0x3f77, 0xa13e, 0x1, 0x1);
        gbc.writeMem(0xe834, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x6190);
        EXPECT(gbc.pc(), 0xe836);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe834), 0xcb);
        EXPECT(gbc.readMem(0xe835), 0xf1);
        // CB F1 03CB
        gbc.setState(0x74fe, 0x3118, 0x2ba0, 0x5ef3, 0x8f76, 0x69a4, 0x1, 0x1);
        gbc.writeMem(0x74fe, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x3118);
        EXPECT(gbc.pc(), 0x7500);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 03CC
        gbc.setState(0x379d, 0x751b, 0xb7a0, 0x3dac, 0xf147, 0x1c76, 0x1, 0x0);
        gbc.writeMem(0x379d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x751b);
        EXPECT(gbc.pc(), 0x379f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 03CD
        gbc.setState(0x6c59, 0x3dd6, 0xcd40, 0x1627, 0x778f, 0xe4d8, 0x0, 0x0);
        gbc.writeMem(0x6c59, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x3dd6);
        EXPECT(gbc.pc(), 0x6c5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 03CE
        gbc.setState(0x8320, 0x757a, 0x6db0, 0xc0c1, 0x55ff, 0x423e, 0x1, 0x0);
        gbc.writeMem(0x8320, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x757a);
        EXPECT(gbc.pc(), 0x8322);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8320), 0xcb);
        EXPECT(gbc.readMem(0x8321), 0xf1);
        // CB F1 03CF
        gbc.setState(0x22d4, 0xb896, 0x4670, 0x8467, 0x70dd, 0x6a8a, 0x1, 0x1);
        gbc.writeMem(0x22d4, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xb896);
        EXPECT(gbc.pc(), 0x22d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 03D0
        gbc.setState(0x4395, 0xfae9, 0x1760, 0x3ecd, 0x81c7, 0xe70d, 0x1, 0x1);
        gbc.writeMem(0x4395, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xfae9);
        EXPECT(gbc.pc(), 0x4397);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 03D1
        gbc.setState(0xd257, 0xc68d, 0xf3a0, 0xa888, 0x7cb5, 0x70de, 0x1, 0x0);
        gbc.writeMem(0xd257, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xc68d);
        EXPECT(gbc.pc(), 0xd259);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd257), 0xcb);
        EXPECT(gbc.readMem(0xd258), 0xf1);
        // CB F1 03D2
        gbc.setState(0x5e92, 0x24a6, 0x69e0, 0x451f, 0xaad3, 0xa2f0, 0x1, 0x0);
        gbc.writeMem(0x5e92, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x24a6);
        EXPECT(gbc.pc(), 0x5e94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 03D3
        gbc.setState(0x201, 0x9186, 0xe5e0, 0x2b40, 0x557e, 0xecb3, 0x1, 0x0);
        gbc.writeMem(0x201, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x9186);
        EXPECT(gbc.pc(), 0x203);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 03D4
        gbc.setState(0x2d78, 0xcfd6, 0xf2d0, 0x4a9f, 0x56d8, 0xd7d0, 0x0, 0x0);
        gbc.writeMem(0x2d78, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xcfd6);
        EXPECT(gbc.pc(), 0x2d7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F1 03D5
        gbc.setState(0xef7d, 0x38c0, 0x4960, 0xc67a, 0x355b, 0xc65e, 0x0, 0x0);
        gbc.writeMem(0xef7d, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x38c0);
        EXPECT(gbc.pc(), 0xef7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef7d), 0xcb);
        EXPECT(gbc.readMem(0xef7e), 0xf1);
        // CB F1 03D6
        gbc.setState(0xe984, 0x505b, 0x8a50, 0x678b, 0x1524, 0x639b, 0x0, 0x1);
        gbc.writeMem(0xe984, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x505b);
        EXPECT(gbc.pc(), 0xe986);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe984), 0xcb);
        EXPECT(gbc.readMem(0xe985), 0xf1);
        // CB F1 03D7
        gbc.setState(0x6f1b, 0xa980, 0x8800, 0x3c37, 0x622e, 0xdce, 0x1, 0x1);
        gbc.writeMem(0x6f1b, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xa980);
        EXPECT(gbc.pc(), 0x6f1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 03D8
        gbc.setState(0xe747, 0x2d1d, 0xb970, 0x485c, 0xdbb2, 0x5780, 0x0, 0x0);
        gbc.writeMem(0xe747, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x2d1d);
        EXPECT(gbc.pc(), 0xe749);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe747), 0xcb);
        EXPECT(gbc.readMem(0xe748), 0xf1);
        // CB F1 03D9
        gbc.setState(0x8035, 0x5f07, 0x2c20, 0xb679, 0x9efb, 0x8e40, 0x0, 0x1);
        gbc.writeMem(0x8035, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x5f07);
        EXPECT(gbc.pc(), 0x8037);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8035), 0xcb);
        EXPECT(gbc.readMem(0x8036), 0xf1);
        // CB F1 03DA
        gbc.setState(0x916a, 0x5ea6, 0x91f0, 0xa477, 0xd046, 0xbf9a, 0x0, 0x0);
        gbc.writeMem(0x916a, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x5ea6);
        EXPECT(gbc.pc(), 0x916c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x916a), 0xcb);
        EXPECT(gbc.readMem(0x916b), 0xf1);
        // CB F1 03DB
        gbc.setState(0x9b77, 0x3a6, 0x70b0, 0xd6a6, 0xf041, 0x2098, 0x0, 0x1);
        gbc.writeMem(0x9b77, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x3a6);
        EXPECT(gbc.pc(), 0x9b79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b77), 0xcb);
        EXPECT(gbc.readMem(0x9b78), 0xf1);
        // CB F1 03DC
        gbc.setState(0x85b8, 0xd796, 0x4890, 0xcec3, 0x139, 0x11f3, 0x1, 0x0);
        gbc.writeMem(0x85b8, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xd796);
        EXPECT(gbc.pc(), 0x85ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85b8), 0xcb);
        EXPECT(gbc.readMem(0x85b9), 0xf1);
        // CB F1 03DD
        gbc.setState(0x9cca, 0x5600, 0xf910, 0xf92a, 0x6bac, 0xb4e8, 0x0, 0x1);
        gbc.writeMem(0x9cca, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x5600);
        EXPECT(gbc.pc(), 0x9ccc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cca), 0xcb);
        EXPECT(gbc.readMem(0x9ccb), 0xf1);
        // CB F1 03DE
        gbc.setState(0xb5e7, 0x8de3, 0x90e0, 0x5cab, 0x496e, 0xefb5, 0x0, 0x0);
        gbc.writeMem(0xb5e7, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x8de3);
        EXPECT(gbc.pc(), 0xb5e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5e7), 0xcb);
        EXPECT(gbc.readMem(0xb5e8), 0xf1);
        // CB F1 03DF
        gbc.setState(0x7eed, 0xcedf, 0x6ca0, 0x39dd, 0x7259, 0x287e, 0x0, 0x1);
        gbc.writeMem(0x7eed, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xcedf);
        EXPECT(gbc.pc(), 0x7eef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 03E0
        gbc.setState(0x2126, 0x96c4, 0x38e0, 0xa506, 0x28a1, 0x3496, 0x0, 0x1);
        gbc.writeMem(0x2126, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x96c4);
        EXPECT(gbc.pc(), 0x2128);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F1 03E1
        gbc.setState(0x6e2e, 0x4303, 0x8c0, 0x2449, 0x418f, 0xeaf4, 0x0, 0x0);
        gbc.writeMem(0x6e2e, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x4303);
        EXPECT(gbc.pc(), 0x6e30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 03E2
        gbc.setState(0x705f, 0x36cf, 0x840, 0xe14e, 0x6179, 0xc0d6, 0x1, 0x0);
        gbc.writeMem(0x705f, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x36cf);
        EXPECT(gbc.pc(), 0x7061);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F1 03E3
        gbc.setState(0xd94, 0xf329, 0x9770, 0xb89e, 0x48, 0xfefd, 0x1, 0x0);
        gbc.writeMem(0xd94, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xf329);
        EXPECT(gbc.pc(), 0xd96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F1 03E4
        gbc.setState(0xbdf6, 0xf977, 0x4260, 0x846c, 0x591e, 0xb4db, 0x0, 0x1);
        gbc.writeMem(0xbdf6, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xf977);
        EXPECT(gbc.pc(), 0xbdf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdf6), 0xcb);
        EXPECT(gbc.readMem(0xbdf7), 0xf1);
        // CB F1 03E5
        gbc.setState(0x84b9, 0x1cfa, 0xed00, 0xca23, 0x6ced, 0x394f, 0x0, 0x0);
        gbc.writeMem(0x84b9, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x1cfa);
        EXPECT(gbc.pc(), 0x84bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84b9), 0xcb);
        EXPECT(gbc.readMem(0x84ba), 0xf1);
        // CB F1 03E7
        gbc.setState(0x847c, 0xccca, 0xc4d0, 0x6a90, 0x17eb, 0xf646, 0x0, 0x0);
        gbc.writeMem(0x847c, { 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xccca);
        EXPECT(gbc.pc(), 0x847e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x847c), 0xcb);
        EXPECT(gbc.readMem(0x847d), 0xf1);
    }
