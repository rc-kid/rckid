#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_f3)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_f3) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // F3 0000
        gbc.setState(0x83df, 0x4e88, 0xddf0, 0x4f82, 0xaf0, 0x308d, 0x0, 0x1);
        gbc.writeMem(0x83df, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x4e88);
        EXPECT(gbc.pc(), 0x83e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83df), 0xf3);
        // F3 0001
        gbc.setState(0x411f, 0xf553, 0xa740, 0x5995, 0x1664, 0xdb39, 0x0, 0x1);
        gbc.writeMem(0x411f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xf553);
        EXPECT(gbc.pc(), 0x4120);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0002
        gbc.setState(0x8a78, 0xa61f, 0x3bf0, 0xc736, 0xbb54, 0x2d48, 0x0, 0x1);
        gbc.writeMem(0x8a78, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xa61f);
        EXPECT(gbc.pc(), 0x8a79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a78), 0xf3);
        // F3 0003
        gbc.setState(0x8bac, 0x83fa, 0x5780, 0xb269, 0x59c9, 0x1504, 0x0, 0x0);
        gbc.writeMem(0x8bac, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x83fa);
        EXPECT(gbc.pc(), 0x8bad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bac), 0xf3);
        // F3 0005
        gbc.setState(0x1775, 0x90eb, 0x70b0, 0xcf38, 0xe352, 0x69ed, 0x1, 0x1);
        gbc.writeMem(0x1775, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x90eb);
        EXPECT(gbc.pc(), 0x1776);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0006
        gbc.setState(0x76c, 0xbf5b, 0xd010, 0x5335, 0x3b68, 0x2c49, 0x1, 0x0);
        gbc.writeMem(0x76c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xbf5b);
        EXPECT(gbc.pc(), 0x76d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0007
        gbc.setState(0xb280, 0x6f75, 0x1170, 0xdfd8, 0xb20d, 0x1e0a, 0x1, 0x0);
        gbc.writeMem(0xb280, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x6f75);
        EXPECT(gbc.pc(), 0xb281);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb280), 0xf3);
        // F3 0008
        gbc.setState(0x69c7, 0x3bab, 0x4870, 0xca1f, 0xdf6f, 0xf4af, 0x0, 0x1);
        gbc.writeMem(0x69c7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x3bab);
        EXPECT(gbc.pc(), 0x69c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0009
        gbc.setState(0x6613, 0x90b6, 0x5570, 0x823, 0x2438, 0x8130, 0x0, 0x1);
        gbc.writeMem(0x6613, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x90b6);
        EXPECT(gbc.pc(), 0x6614);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 000A
        gbc.setState(0x790, 0x2b2e, 0x1240, 0x9bc2, 0x897, 0xae44, 0x0, 0x0);
        gbc.writeMem(0x790, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x2b2e);
        EXPECT(gbc.pc(), 0x791);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 000B
        gbc.setState(0x7c7c, 0xfad0, 0x76c0, 0xbd2, 0xbc7d, 0xb6e1, 0x1, 0x1);
        gbc.writeMem(0x7c7c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xfad0);
        EXPECT(gbc.pc(), 0x7c7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 000C
        gbc.setState(0xd19f, 0x53f3, 0xb530, 0x4b3f, 0x5a8a, 0x7b46, 0x0, 0x0);
        gbc.writeMem(0xd19f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x53f3);
        EXPECT(gbc.pc(), 0xd1a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd19f), 0xf3);
        // F3 000D
        gbc.setState(0x124b, 0xb5e7, 0xe8b0, 0x2ae, 0xdf0e, 0x4005, 0x0, 0x0);
        gbc.writeMem(0x124b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xb5e7);
        EXPECT(gbc.pc(), 0x124c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 000F
        gbc.setState(0x5657, 0x943f, 0xcd40, 0x24c7, 0xc60e, 0x7f61, 0x0, 0x0);
        gbc.writeMem(0x5657, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x943f);
        EXPECT(gbc.pc(), 0x5658);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0010
        gbc.setState(0xa481, 0xcd42, 0x3090, 0x78e6, 0xc0be, 0x7352, 0x1, 0x0);
        gbc.writeMem(0xa481, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xcd42);
        EXPECT(gbc.pc(), 0xa482);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa481), 0xf3);
        // F3 0011
        gbc.setState(0x490a, 0xdd5d, 0xf560, 0x8492, 0x2f8, 0x4cfd, 0x1, 0x0);
        gbc.writeMem(0x490a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xdd5d);
        EXPECT(gbc.pc(), 0x490b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0012
        gbc.setState(0x3c43, 0x9127, 0xbea0, 0xb555, 0x85b1, 0x902a, 0x1, 0x1);
        gbc.writeMem(0x3c43, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x9127);
        EXPECT(gbc.pc(), 0x3c44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0013
        gbc.setState(0x4651, 0xa66a, 0xde40, 0x15a5, 0xe4d4, 0x10b1, 0x1, 0x1);
        gbc.writeMem(0x4651, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xa66a);
        EXPECT(gbc.pc(), 0x4652);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0014
        gbc.setState(0x7bce, 0x37c, 0x3020, 0x3689, 0x7724, 0x95de, 0x0, 0x0);
        gbc.writeMem(0x7bce, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x37c);
        EXPECT(gbc.pc(), 0x7bcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0016
        gbc.setState(0x8887, 0x4dfb, 0x9250, 0x82a1, 0xa7b7, 0xb46a, 0x1, 0x0);
        gbc.writeMem(0x8887, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x4dfb);
        EXPECT(gbc.pc(), 0x8888);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8887), 0xf3);
        // F3 0017
        gbc.setState(0x1e3b, 0xb742, 0xd4b0, 0x1c, 0x39f9, 0xe371, 0x1, 0x1);
        gbc.writeMem(0x1e3b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xb742);
        EXPECT(gbc.pc(), 0x1e3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0018
        gbc.setState(0x62f0, 0x366c, 0xe670, 0xd7ad, 0x5dc6, 0xd18c, 0x1, 0x0);
        gbc.writeMem(0x62f0, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x366c);
        EXPECT(gbc.pc(), 0x62f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0019
        gbc.setState(0x18e5, 0xa2d5, 0x1c40, 0xeaf2, 0xf7a8, 0xb8e9, 0x0, 0x1);
        gbc.writeMem(0x18e5, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa2d5);
        EXPECT(gbc.pc(), 0x18e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 001A
        gbc.setState(0xcf3, 0x31ca, 0xaf0, 0xebd5, 0x5648, 0x5cd5, 0x0, 0x1);
        gbc.writeMem(0xcf3, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x31ca);
        EXPECT(gbc.pc(), 0xcf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 001B
        gbc.setState(0x5491, 0x994, 0xa820, 0x2b03, 0x7010, 0xaedd, 0x0, 0x1);
        gbc.writeMem(0x5491, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x994);
        EXPECT(gbc.pc(), 0x5492);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 001C
        gbc.setState(0x779a, 0x422a, 0xa4a0, 0xa899, 0xd8da, 0x9b39, 0x1, 0x1);
        gbc.writeMem(0x779a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x422a);
        EXPECT(gbc.pc(), 0x779b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 001D
        gbc.setState(0x65c, 0xc21d, 0x9e00, 0x3d80, 0xf344, 0xb07f, 0x1, 0x0);
        gbc.writeMem(0x65c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xc21d);
        EXPECT(gbc.pc(), 0x65d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 001E
        gbc.setState(0x5a9d, 0x1ffa, 0x8570, 0x2934, 0x146b, 0xdbd6, 0x0, 0x1);
        gbc.writeMem(0x5a9d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x1ffa);
        EXPECT(gbc.pc(), 0x5a9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 001F
        gbc.setState(0x12c6, 0xe08a, 0x93d0, 0x3f39, 0x8652, 0xd2fe, 0x1, 0x0);
        gbc.writeMem(0x12c6, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xe08a);
        EXPECT(gbc.pc(), 0x12c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0020
        gbc.setState(0xa04b, 0x2033, 0x87a0, 0x60ed, 0x7f44, 0xb718, 0x1, 0x1);
        gbc.writeMem(0xa04b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x2033);
        EXPECT(gbc.pc(), 0xa04c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa04b), 0xf3);
        // F3 0021
        gbc.setState(0xb415, 0xfad4, 0x54f0, 0x4c47, 0x6e31, 0x538f, 0x1, 0x0);
        gbc.writeMem(0xb415, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xfad4);
        EXPECT(gbc.pc(), 0xb416);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb415), 0xf3);
        // F3 0022
        gbc.setState(0x35aa, 0x3ae7, 0x7270, 0xce85, 0x253, 0x828, 0x1, 0x0);
        gbc.writeMem(0x35aa, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3ae7);
        EXPECT(gbc.pc(), 0x35ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0023
        gbc.setState(0x6b66, 0x1e99, 0xcde0, 0x9ef3, 0xca8, 0x31b9, 0x1, 0x1);
        gbc.writeMem(0x6b66, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x1e99);
        EXPECT(gbc.pc(), 0x6b67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0024
        gbc.setState(0xe280, 0x4d7b, 0x24d0, 0xda54, 0x25cb, 0x76c9, 0x1, 0x1);
        gbc.writeMem(0xe280, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x4d7b);
        EXPECT(gbc.pc(), 0xe281);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe280), 0xf3);
        // F3 0025
        gbc.setState(0x18bc, 0x8fd6, 0x7290, 0xf1d9, 0x6fde, 0x5a5, 0x1, 0x0);
        gbc.writeMem(0x18bc, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x8fd6);
        EXPECT(gbc.pc(), 0x18bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0026
        gbc.setState(0x465a, 0x357d, 0xa980, 0xed2d, 0xc75d, 0xba1d, 0x0, 0x0);
        gbc.writeMem(0x465a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x357d);
        EXPECT(gbc.pc(), 0x465b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0027
        gbc.setState(0x756d, 0xf497, 0xb700, 0xd1ce, 0x97b4, 0x1c8e, 0x0, 0x1);
        gbc.writeMem(0x756d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xf497);
        EXPECT(gbc.pc(), 0x756e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0028
        gbc.setState(0x989a, 0x34b7, 0x9270, 0x5745, 0x9b7e, 0x151, 0x1, 0x0);
        gbc.writeMem(0x989a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x34b7);
        EXPECT(gbc.pc(), 0x989b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x989a), 0xf3);
        // F3 0029
        gbc.setState(0x9d5c, 0xc66d, 0xf980, 0x3534, 0x7723, 0x934f, 0x1, 0x0);
        gbc.writeMem(0x9d5c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xc66d);
        EXPECT(gbc.pc(), 0x9d5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d5c), 0xf3);
        // F3 002A
        gbc.setState(0x11ab, 0xb87a, 0x7540, 0xbe8f, 0x9999, 0xaadb, 0x0, 0x1);
        gbc.writeMem(0x11ab, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xb87a);
        EXPECT(gbc.pc(), 0x11ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 002B
        gbc.setState(0xb0bd, 0x51dc, 0x42d0, 0xee27, 0xfad9, 0x7375, 0x1, 0x1);
        gbc.writeMem(0xb0bd, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x51dc);
        EXPECT(gbc.pc(), 0xb0be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0bd), 0xf3);
        // F3 002D
        gbc.setState(0x45c, 0x632e, 0x6260, 0x4242, 0x9d4b, 0x4338, 0x0, 0x0);
        gbc.writeMem(0x45c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x632e);
        EXPECT(gbc.pc(), 0x45d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 002E
        gbc.setState(0x4e9d, 0x3ca1, 0x670, 0x568d, 0xd8f7, 0xb255, 0x0, 0x0);
        gbc.writeMem(0x4e9d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x3ca1);
        EXPECT(gbc.pc(), 0x4e9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 002F
        gbc.setState(0x610d, 0xbd3b, 0x46b0, 0xd694, 0x1506, 0x833, 0x1, 0x0);
        gbc.writeMem(0x610d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xbd3b);
        EXPECT(gbc.pc(), 0x610e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0030
        gbc.setState(0x2e9e, 0xdb5d, 0xe570, 0x78e, 0x6a21, 0x2083, 0x0, 0x1);
        gbc.writeMem(0x2e9e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xdb5d);
        EXPECT(gbc.pc(), 0x2e9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0031
        gbc.setState(0x7258, 0x6721, 0xfb50, 0xf534, 0x87ec, 0x8ff5, 0x1, 0x1);
        gbc.writeMem(0x7258, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x6721);
        EXPECT(gbc.pc(), 0x7259);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0032
        gbc.setState(0x6f4c, 0x4abf, 0xf220, 0x5dc1, 0xf08f, 0x2c80, 0x0, 0x0);
        gbc.writeMem(0x6f4c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x4abf);
        EXPECT(gbc.pc(), 0x6f4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0033
        gbc.setState(0x135d, 0x1d93, 0x6550, 0x4baf, 0xbbd2, 0x39b5, 0x1, 0x1);
        gbc.writeMem(0x135d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x1d93);
        EXPECT(gbc.pc(), 0x135e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0034
        gbc.setState(0x3565, 0x70df, 0xe540, 0x5f6f, 0x1a14, 0x36c6, 0x1, 0x1);
        gbc.writeMem(0x3565, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x70df);
        EXPECT(gbc.pc(), 0x3566);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0035
        gbc.setState(0xd3d0, 0x9745, 0x17f0, 0xd2a0, 0xe08f, 0x4aa4, 0x1, 0x0);
        gbc.writeMem(0xd3d0, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x9745);
        EXPECT(gbc.pc(), 0xd3d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3d0), 0xf3);
        // F3 0036
        gbc.setState(0x5f83, 0x7d4e, 0x57b0, 0xde83, 0x2dcc, 0xe85a, 0x0, 0x0);
        gbc.writeMem(0x5f83, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7d4e);
        EXPECT(gbc.pc(), 0x5f84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0037
        gbc.setState(0x44ca, 0xc532, 0xfef0, 0xc210, 0x42d5, 0x6f53, 0x0, 0x1);
        gbc.writeMem(0x44ca, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xc532);
        EXPECT(gbc.pc(), 0x44cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0038
        gbc.setState(0x3546, 0xb043, 0x1cf0, 0x7d5b, 0x9e1f, 0x505d, 0x1, 0x0);
        gbc.writeMem(0x3546, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xb043);
        EXPECT(gbc.pc(), 0x3547);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0039
        gbc.setState(0xbabd, 0x6114, 0x5530, 0x3024, 0x671, 0x64c4, 0x0, 0x1);
        gbc.writeMem(0xbabd, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x6114);
        EXPECT(gbc.pc(), 0xbabe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbabd), 0xf3);
        // F3 003A
        gbc.setState(0x7042, 0x9707, 0xff70, 0xeb6a, 0x4bb2, 0x45c6, 0x0, 0x1);
        gbc.writeMem(0x7042, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x9707);
        EXPECT(gbc.pc(), 0x7043);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 003C
        gbc.setState(0x8b44, 0x443e, 0x79d0, 0xfb9f, 0x238c, 0x6ec, 0x0, 0x0);
        gbc.writeMem(0x8b44, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x443e);
        EXPECT(gbc.pc(), 0x8b45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b44), 0xf3);
        // F3 003D
        gbc.setState(0x4110, 0xf954, 0x1260, 0x5b77, 0x7925, 0xa474, 0x1, 0x0);
        gbc.writeMem(0x4110, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xf954);
        EXPECT(gbc.pc(), 0x4111);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 003E
        gbc.setState(0x3ee, 0x92b7, 0x7750, 0xead, 0x4d2, 0x989e, 0x1, 0x0);
        gbc.writeMem(0x3ee, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x92b7);
        EXPECT(gbc.pc(), 0x3ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 003F
        gbc.setState(0x28ae, 0x9608, 0x5790, 0x9f5b, 0x3cb2, 0x86e2, 0x0, 0x0);
        gbc.writeMem(0x28ae, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x9608);
        EXPECT(gbc.pc(), 0x28af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0040
        gbc.setState(0x6fa2, 0x1543, 0x4a00, 0x6856, 0x24f8, 0x710c, 0x1, 0x1);
        gbc.writeMem(0x6fa2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x1543);
        EXPECT(gbc.pc(), 0x6fa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0041
        gbc.setState(0xbcef, 0x36a3, 0xe6f0, 0xac06, 0x53a4, 0x4f70, 0x0, 0x1);
        gbc.writeMem(0xbcef, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x36a3);
        EXPECT(gbc.pc(), 0xbcf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcef), 0xf3);
        // F3 0042
        gbc.setState(0xe6bc, 0x78b3, 0x8ae0, 0x8df8, 0x9703, 0xc28b, 0x0, 0x1);
        gbc.writeMem(0xe6bc, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x78b3);
        EXPECT(gbc.pc(), 0xe6bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6bc), 0xf3);
        // F3 0043
        gbc.setState(0xb41a, 0xde9f, 0xb7a0, 0x232, 0x8de5, 0x68ed, 0x0, 0x0);
        gbc.writeMem(0xb41a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xde9f);
        EXPECT(gbc.pc(), 0xb41b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb41a), 0xf3);
        // F3 0044
        gbc.setState(0xa867, 0xf853, 0x58c0, 0x556e, 0x747c, 0x510, 0x0, 0x1);
        gbc.writeMem(0xa867, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xf853);
        EXPECT(gbc.pc(), 0xa868);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa867), 0xf3);
        // F3 0045
        gbc.setState(0x8678, 0x2e93, 0x6cf0, 0xe394, 0x71e1, 0x6d2b, 0x0, 0x0);
        gbc.writeMem(0x8678, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x2e93);
        EXPECT(gbc.pc(), 0x8679);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8678), 0xf3);
        // F3 0046
        gbc.setState(0x5618, 0x5b30, 0x74a0, 0xf58f, 0xaf55, 0x7258, 0x1, 0x0);
        gbc.writeMem(0x5618, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x5b30);
        EXPECT(gbc.pc(), 0x5619);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0047
        gbc.setState(0x18b6, 0x7394, 0xab90, 0x2054, 0x651c, 0xd6ae, 0x0, 0x1);
        gbc.writeMem(0x18b6, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x7394);
        EXPECT(gbc.pc(), 0x18b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0048
        gbc.setState(0xd15b, 0xd4a9, 0xb840, 0x5bf2, 0xa0cb, 0xafc7, 0x0, 0x1);
        gbc.writeMem(0xd15b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xd4a9);
        EXPECT(gbc.pc(), 0xd15c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd15b), 0xf3);
        // F3 0049
        gbc.setState(0x8a9b, 0x3e42, 0x79e0, 0x83e9, 0xf8db, 0xe9c2, 0x0, 0x0);
        gbc.writeMem(0x8a9b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x3e42);
        EXPECT(gbc.pc(), 0x8a9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a9b), 0xf3);
        // F3 004B
        gbc.setState(0x2586, 0x3c44, 0x7880, 0x32d8, 0x49f4, 0xba80, 0x0, 0x1);
        gbc.writeMem(0x2586, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x3c44);
        EXPECT(gbc.pc(), 0x2587);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 004C
        gbc.setState(0xc396, 0x82c8, 0xb330, 0x9535, 0x7b98, 0x3114, 0x1, 0x0);
        gbc.writeMem(0xc396, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x82c8);
        EXPECT(gbc.pc(), 0xc397);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc396), 0xf3);
        // F3 004D
        gbc.setState(0x139a, 0x9f0e, 0x2280, 0x97b6, 0x8c99, 0xf62, 0x0, 0x0);
        gbc.writeMem(0x139a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x9f0e);
        EXPECT(gbc.pc(), 0x139b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 004E
        gbc.setState(0xb8ab, 0xeda6, 0xb6b0, 0x1b85, 0x89b5, 0x8116, 0x1, 0x1);
        gbc.writeMem(0xb8ab, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xeda6);
        EXPECT(gbc.pc(), 0xb8ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8ab), 0xf3);
        // F3 004F
        gbc.setState(0x7bd0, 0xd5f7, 0xcb00, 0x89ef, 0x7f13, 0x4abd, 0x1, 0x0);
        gbc.writeMem(0x7bd0, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd5f7);
        EXPECT(gbc.pc(), 0x7bd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0050
        gbc.setState(0xbb10, 0x1108, 0x8250, 0xab1a, 0x7cfe, 0x4997, 0x0, 0x1);
        gbc.writeMem(0xbb10, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x1108);
        EXPECT(gbc.pc(), 0xbb11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb10), 0xf3);
        // F3 0051
        gbc.setState(0x28a8, 0x68c6, 0xd00, 0xb62e, 0x4321, 0x52e3, 0x1, 0x1);
        gbc.writeMem(0x28a8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x68c6);
        EXPECT(gbc.pc(), 0x28a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0052
        gbc.setState(0xc740, 0x66da, 0x8e00, 0x4e6a, 0xef44, 0x2bee, 0x0, 0x1);
        gbc.writeMem(0xc740, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x66da);
        EXPECT(gbc.pc(), 0xc741);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc740), 0xf3);
        // F3 0053
        gbc.setState(0x8ec5, 0xa48d, 0x9340, 0xe623, 0xbb89, 0x64b1, 0x1, 0x1);
        gbc.writeMem(0x8ec5, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xa48d);
        EXPECT(gbc.pc(), 0x8ec6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ec5), 0xf3);
        // F3 0054
        gbc.setState(0xab1e, 0x14ad, 0x9a20, 0x1192, 0x777b, 0x9e3b, 0x1, 0x0);
        gbc.writeMem(0xab1e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x14ad);
        EXPECT(gbc.pc(), 0xab1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab1e), 0xf3);
        // F3 0055
        gbc.setState(0x5d60, 0x878b, 0x1070, 0xa8b5, 0xbc2b, 0x959, 0x1, 0x0);
        gbc.writeMem(0x5d60, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x878b);
        EXPECT(gbc.pc(), 0x5d61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0056
        gbc.setState(0x7bda, 0xbb3e, 0xace0, 0xba55, 0x8e44, 0x5086, 0x0, 0x1);
        gbc.writeMem(0x7bda, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xbb3e);
        EXPECT(gbc.pc(), 0x7bdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0057
        gbc.setState(0x3362, 0x3717, 0x2e10, 0x535c, 0xdfed, 0xb877, 0x1, 0x0);
        gbc.writeMem(0x3362, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x3717);
        EXPECT(gbc.pc(), 0x3363);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0058
        gbc.setState(0x8cdb, 0x9d08, 0x9990, 0xa5ed, 0x3c0f, 0x9d57, 0x1, 0x0);
        gbc.writeMem(0x8cdb, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x9d08);
        EXPECT(gbc.pc(), 0x8cdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cdb), 0xf3);
        // F3 0059
        gbc.setState(0x45fc, 0x1c78, 0x7b40, 0x37, 0x5b55, 0xb3a2, 0x1, 0x1);
        gbc.writeMem(0x45fc, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x1c78);
        EXPECT(gbc.pc(), 0x45fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 005A
        gbc.setState(0x2da3, 0x8bea, 0xc540, 0x269b, 0xaf2d, 0x9250, 0x1, 0x0);
        gbc.writeMem(0x2da3, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x8bea);
        EXPECT(gbc.pc(), 0x2da4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 005B
        gbc.setState(0xa0b, 0x1a4f, 0x1440, 0x9014, 0xb71, 0xb856, 0x0, 0x0);
        gbc.writeMem(0xa0b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x1a4f);
        EXPECT(gbc.pc(), 0xa0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 005C
        gbc.setState(0x2e08, 0x476e, 0x8610, 0xb200, 0x1fbc, 0x1eb7, 0x0, 0x1);
        gbc.writeMem(0x2e08, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x476e);
        EXPECT(gbc.pc(), 0x2e09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 005D
        gbc.setState(0x6a12, 0x2075, 0x2400, 0x23ca, 0x86e8, 0xf567, 0x1, 0x1);
        gbc.writeMem(0x6a12, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x2075);
        EXPECT(gbc.pc(), 0x6a13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 005E
        gbc.setState(0x40d, 0xbf53, 0x1ed0, 0x3dd8, 0x2ac4, 0x3aaa, 0x0, 0x0);
        gbc.writeMem(0x40d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xbf53);
        EXPECT(gbc.pc(), 0x40e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 005F
        gbc.setState(0xb6ec, 0xd3ef, 0x1380, 0x860a, 0xfd4e, 0xf87b, 0x1, 0x1);
        gbc.writeMem(0xb6ec, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xd3ef);
        EXPECT(gbc.pc(), 0xb6ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6ec), 0xf3);
        // F3 0060
        gbc.setState(0x9596, 0xb6f1, 0x3d80, 0xdf6, 0x91a4, 0x98f9, 0x0, 0x0);
        gbc.writeMem(0x9596, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xb6f1);
        EXPECT(gbc.pc(), 0x9597);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9596), 0xf3);
        // F3 0061
        gbc.setState(0xbe51, 0x2592, 0xf6a0, 0x8ee2, 0xf48f, 0x880c, 0x1, 0x1);
        gbc.writeMem(0xbe51, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x2592);
        EXPECT(gbc.pc(), 0xbe52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe51), 0xf3);
        // F3 0062
        gbc.setState(0x5a9d, 0xae42, 0x2d70, 0x2cff, 0x16b2, 0x281f, 0x0, 0x1);
        gbc.writeMem(0x5a9d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xae42);
        EXPECT(gbc.pc(), 0x5a9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0063
        gbc.setState(0x2572, 0x973, 0x91b0, 0x659, 0x8051, 0xeca6, 0x0, 0x0);
        gbc.writeMem(0x2572, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x973);
        EXPECT(gbc.pc(), 0x2573);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0064
        gbc.setState(0xaa72, 0x7ad3, 0xab30, 0x22, 0x1885, 0xb1f4, 0x0, 0x1);
        gbc.writeMem(0xaa72, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x7ad3);
        EXPECT(gbc.pc(), 0xaa73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa72), 0xf3);
        // F3 0065
        gbc.setState(0x5673, 0x36dd, 0xde0, 0xe80d, 0x3715, 0xab32, 0x0, 0x1);
        gbc.writeMem(0x5673, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x36dd);
        EXPECT(gbc.pc(), 0x5674);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0066
        gbc.setState(0x7791, 0x5317, 0xf0, 0x7b48, 0x3857, 0x8238, 0x1, 0x0);
        gbc.writeMem(0x7791, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x5317);
        EXPECT(gbc.pc(), 0x7792);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0067
        gbc.setState(0xcf32, 0xf515, 0xda80, 0x35e4, 0xbd19, 0xf539, 0x1, 0x0);
        gbc.writeMem(0xcf32, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xf515);
        EXPECT(gbc.pc(), 0xcf33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf32), 0xf3);
        // F3 0068
        gbc.setState(0xe36d, 0x416e, 0xc300, 0xb8bf, 0x86ab, 0x6673, 0x1, 0x1);
        gbc.writeMem(0xe36d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x416e);
        EXPECT(gbc.pc(), 0xe36e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe36d), 0xf3);
        // F3 0069
        gbc.setState(0xdb39, 0x9b0, 0x9010, 0xe47, 0x2ee4, 0xdf23, 0x1, 0x0);
        gbc.writeMem(0xdb39, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x9b0);
        EXPECT(gbc.pc(), 0xdb3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb39), 0xf3);
        // F3 006A
        gbc.setState(0x64e3, 0xda, 0x6660, 0x4d37, 0x5b20, 0xd66b, 0x0, 0x1);
        gbc.writeMem(0x64e3, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xda);
        EXPECT(gbc.pc(), 0x64e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 006B
        gbc.setState(0x7a91, 0x7594, 0x7ed0, 0x33e5, 0x9ecc, 0xedb7, 0x0, 0x1);
        gbc.writeMem(0x7a91, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x7594);
        EXPECT(gbc.pc(), 0x7a92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 006C
        gbc.setState(0x21ea, 0xfb65, 0x4180, 0xea57, 0x1f0b, 0xfc3b, 0x0, 0x1);
        gbc.writeMem(0x21ea, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xfb65);
        EXPECT(gbc.pc(), 0x21eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 006D
        gbc.setState(0x65de, 0x5a04, 0x89f0, 0xa3cd, 0x8fcd, 0xfbc8, 0x1, 0x1);
        gbc.writeMem(0x65de, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x5a04);
        EXPECT(gbc.pc(), 0x65df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 006E
        gbc.setState(0xd48b, 0x650b, 0xc500, 0x8ae5, 0xebb1, 0xd5e4, 0x0, 0x0);
        gbc.writeMem(0xd48b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x650b);
        EXPECT(gbc.pc(), 0xd48c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd48b), 0xf3);
        // F3 006F
        gbc.setState(0x419, 0x782, 0xf850, 0x7419, 0xedf5, 0xdae0, 0x0, 0x1);
        gbc.writeMem(0x419, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x782);
        EXPECT(gbc.pc(), 0x41a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0070
        gbc.setState(0xd2b2, 0x8e48, 0x7460, 0xd2f1, 0x3192, 0x820a, 0x0, 0x0);
        gbc.writeMem(0xd2b2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8e48);
        EXPECT(gbc.pc(), 0xd2b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2b2), 0xf3);
        // F3 0071
        gbc.setState(0x71ae, 0x8e23, 0xaf60, 0x80f9, 0x412b, 0xd6f4, 0x0, 0x1);
        gbc.writeMem(0x71ae, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x8e23);
        EXPECT(gbc.pc(), 0x71af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0072
        gbc.setState(0x2386, 0x2f86, 0x65e0, 0x1703, 0x718e, 0x803d, 0x0, 0x1);
        gbc.writeMem(0x2386, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x2f86);
        EXPECT(gbc.pc(), 0x2387);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0073
        gbc.setState(0xc35e, 0x2ca8, 0x7db0, 0x5400, 0xadf1, 0x71f0, 0x1, 0x0);
        gbc.writeMem(0xc35e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x2ca8);
        EXPECT(gbc.pc(), 0xc35f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc35e), 0xf3);
        // F3 0074
        gbc.setState(0x43e9, 0x994e, 0x5600, 0x765, 0xacd1, 0x61d6, 0x1, 0x1);
        gbc.writeMem(0x43e9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x994e);
        EXPECT(gbc.pc(), 0x43ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0075
        gbc.setState(0x882f, 0x3981, 0xffc0, 0x1a3c, 0x4678, 0x1b31, 0x1, 0x1);
        gbc.writeMem(0x882f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x3981);
        EXPECT(gbc.pc(), 0x8830);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x882f), 0xf3);
        // F3 0076
        gbc.setState(0x210d, 0xa5, 0x3870, 0x3d06, 0x2d97, 0xa8d5, 0x1, 0x0);
        gbc.writeMem(0x210d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xa5);
        EXPECT(gbc.pc(), 0x210e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0077
        gbc.setState(0x13e9, 0x60eb, 0x4670, 0x6f56, 0x2c9, 0x446, 0x1, 0x1);
        gbc.writeMem(0x13e9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x60eb);
        EXPECT(gbc.pc(), 0x13ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0078
        gbc.setState(0x1d4b, 0x7aaa, 0xe820, 0x14cc, 0x28db, 0xfc1b, 0x1, 0x0);
        gbc.writeMem(0x1d4b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x7aaa);
        EXPECT(gbc.pc(), 0x1d4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0079
        gbc.setState(0x85fa, 0x3603, 0x6410, 0xeb7d, 0xd925, 0xbcd6, 0x1, 0x0);
        gbc.writeMem(0x85fa, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x3603);
        EXPECT(gbc.pc(), 0x85fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85fa), 0xf3);
        // F3 007A
        gbc.setState(0x62c7, 0xef94, 0x8290, 0x6963, 0xe97a, 0x9b0e, 0x1, 0x0);
        gbc.writeMem(0x62c7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xef94);
        EXPECT(gbc.pc(), 0x62c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 007B
        gbc.setState(0x4bb, 0x3057, 0x3ae0, 0x1f69, 0xad62, 0x4520, 0x1, 0x1);
        gbc.writeMem(0x4bb, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x3057);
        EXPECT(gbc.pc(), 0x4bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 007C
        gbc.setState(0xb1b6, 0xe29a, 0xc5e0, 0x2428, 0xfb59, 0xc22b, 0x1, 0x1);
        gbc.writeMem(0xb1b6, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xe29a);
        EXPECT(gbc.pc(), 0xb1b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1b6), 0xf3);
        // F3 007D
        gbc.setState(0x7efe, 0x5083, 0xba30, 0xc749, 0xf302, 0x15ea, 0x1, 0x0);
        gbc.writeMem(0x7efe, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x5083);
        EXPECT(gbc.pc(), 0x7eff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 007E
        gbc.setState(0x43ba, 0x628a, 0x7810, 0x84a3, 0x93f, 0xc61d, 0x1, 0x0);
        gbc.writeMem(0x43ba, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x628a);
        EXPECT(gbc.pc(), 0x43bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 007F
        gbc.setState(0x6950, 0x8ba7, 0xa310, 0xc6da, 0x142e, 0x1ea5, 0x0, 0x0);
        gbc.writeMem(0x6950, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x8ba7);
        EXPECT(gbc.pc(), 0x6951);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0081
        gbc.setState(0x9e49, 0xd353, 0xee60, 0xe7a5, 0x70b1, 0x5f9d, 0x1, 0x1);
        gbc.writeMem(0x9e49, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xd353);
        EXPECT(gbc.pc(), 0x9e4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e49), 0xf3);
        // F3 0083
        gbc.setState(0xb1e5, 0x1db4, 0x3290, 0x4bec, 0xa32f, 0x802a, 0x1, 0x0);
        gbc.writeMem(0xb1e5, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x1db4);
        EXPECT(gbc.pc(), 0xb1e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1e5), 0xf3);
        // F3 0084
        gbc.setState(0x878a, 0x10ac, 0x5310, 0xbbcd, 0x74ee, 0xcc46, 0x1, 0x1);
        gbc.writeMem(0x878a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x10ac);
        EXPECT(gbc.pc(), 0x878b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x878a), 0xf3);
        // F3 0085
        gbc.setState(0x9d3e, 0xead8, 0x7990, 0xfa7d, 0x35b1, 0xeb3a, 0x1, 0x1);
        gbc.writeMem(0x9d3e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xead8);
        EXPECT(gbc.pc(), 0x9d3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d3e), 0xf3);
        // F3 0086
        gbc.setState(0x341a, 0xb1f1, 0xb220, 0x1d2e, 0xa998, 0xdb4e, 0x1, 0x0);
        gbc.writeMem(0x341a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xb1f1);
        EXPECT(gbc.pc(), 0x341b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0087
        gbc.setState(0x650b, 0x11ac, 0x6830, 0x33a5, 0xe3dc, 0xfa7e, 0x1, 0x1);
        gbc.writeMem(0x650b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x11ac);
        EXPECT(gbc.pc(), 0x650c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0088
        gbc.setState(0xb27c, 0xaa3f, 0x3e70, 0x2eca, 0xc0ab, 0x2d3e, 0x1, 0x1);
        gbc.writeMem(0xb27c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xaa3f);
        EXPECT(gbc.pc(), 0xb27d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb27c), 0xf3);
        // F3 0089
        gbc.setState(0xcce6, 0x3ffa, 0xae50, 0xa0a4, 0xe200, 0xa24d, 0x0, 0x1);
        gbc.writeMem(0xcce6, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x3ffa);
        EXPECT(gbc.pc(), 0xcce7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcce6), 0xf3);
        // F3 008A
        gbc.setState(0x618, 0x9911, 0x6290, 0xcaef, 0x78e4, 0xfc8a, 0x1, 0x0);
        gbc.writeMem(0x618, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x9911);
        EXPECT(gbc.pc(), 0x619);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 008B
        gbc.setState(0x7a1c, 0x9b3d, 0x3b60, 0x105e, 0xac2, 0x2dd8, 0x0, 0x0);
        gbc.writeMem(0x7a1c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x9b3d);
        EXPECT(gbc.pc(), 0x7a1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 008C
        gbc.setState(0x497d, 0x6157, 0xe280, 0xe967, 0x6084, 0xb441, 0x1, 0x1);
        gbc.writeMem(0x497d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x6157);
        EXPECT(gbc.pc(), 0x497e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 008D
        gbc.setState(0x167e, 0x4f49, 0x1dc0, 0x1593, 0x6638, 0xb69f, 0x0, 0x0);
        gbc.writeMem(0x167e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x4f49);
        EXPECT(gbc.pc(), 0x167f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 008E
        gbc.setState(0xd0ec, 0xa964, 0xcc20, 0xf764, 0xe369, 0x14fd, 0x0, 0x1);
        gbc.writeMem(0xd0ec, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xa964);
        EXPECT(gbc.pc(), 0xd0ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0ec), 0xf3);
        // F3 008F
        gbc.setState(0x9c48, 0x171c, 0x75b0, 0x17f3, 0x1c1d, 0x70a9, 0x1, 0x1);
        gbc.writeMem(0x9c48, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x171c);
        EXPECT(gbc.pc(), 0x9c49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c48), 0xf3);
        // F3 0090
        gbc.setState(0x6cc2, 0x953b, 0x5130, 0x2332, 0x6b48, 0x7777, 0x1, 0x1);
        gbc.writeMem(0x6cc2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x953b);
        EXPECT(gbc.pc(), 0x6cc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0091
        gbc.setState(0x8a12, 0x1fd, 0xa050, 0x7b7b, 0x339f, 0x1174, 0x0, 0x1);
        gbc.writeMem(0x8a12, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x1fd);
        EXPECT(gbc.pc(), 0x8a13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a12), 0xf3);
        // F3 0092
        gbc.setState(0x24ee, 0x1b90, 0x3a90, 0x1441, 0xc7e, 0x9d5e, 0x0, 0x0);
        gbc.writeMem(0x24ee, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x1b90);
        EXPECT(gbc.pc(), 0x24ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0093
        gbc.setState(0xede7, 0x9916, 0x2b0, 0x9af1, 0x722c, 0x9c3c, 0x0, 0x0);
        gbc.writeMem(0xede7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x9916);
        EXPECT(gbc.pc(), 0xede8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xede7), 0xf3);
        // F3 0094
        gbc.setState(0xecd3, 0x4f3c, 0x7f80, 0xce34, 0xe507, 0x3441, 0x1, 0x1);
        gbc.writeMem(0xecd3, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x4f3c);
        EXPECT(gbc.pc(), 0xecd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecd3), 0xf3);
        // F3 0096
        gbc.setState(0xbaeb, 0x9712, 0x150, 0x228, 0xd425, 0xc648, 0x0, 0x0);
        gbc.writeMem(0xbaeb, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x9712);
        EXPECT(gbc.pc(), 0xbaec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaeb), 0xf3);
        // F3 0097
        gbc.setState(0x841a, 0xa951, 0x3e20, 0xd401, 0x3b06, 0x19f7, 0x1, 0x1);
        gbc.writeMem(0x841a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xa951);
        EXPECT(gbc.pc(), 0x841b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x841a), 0xf3);
        // F3 0098
        gbc.setState(0x9c39, 0x8c00, 0x4e10, 0xdf37, 0x6b17, 0xc728, 0x1, 0x1);
        gbc.writeMem(0x9c39, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x8c00);
        EXPECT(gbc.pc(), 0x9c3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c39), 0xf3);
        // F3 0099
        gbc.setState(0xcbe8, 0xe0cd, 0x9610, 0x9474, 0x452c, 0xe5bc, 0x1, 0x1);
        gbc.writeMem(0xcbe8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xe0cd);
        EXPECT(gbc.pc(), 0xcbe9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbe8), 0xf3);
        // F3 009A
        gbc.setState(0x86c8, 0x8378, 0x5bd0, 0xaa6e, 0x9714, 0xe536, 0x1, 0x0);
        gbc.writeMem(0x86c8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x8378);
        EXPECT(gbc.pc(), 0x86c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86c8), 0xf3);
        // F3 009B
        gbc.setState(0xecc8, 0x74e1, 0x9c10, 0x3dd2, 0x17, 0x9c47, 0x1, 0x1);
        gbc.writeMem(0xecc8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x74e1);
        EXPECT(gbc.pc(), 0xecc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecc8), 0xf3);
        // F3 009C
        gbc.setState(0xb415, 0x9610, 0x3c0, 0xe89a, 0xe1ad, 0xec6, 0x0, 0x0);
        gbc.writeMem(0xb415, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x9610);
        EXPECT(gbc.pc(), 0xb416);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb415), 0xf3);
        // F3 009D
        gbc.setState(0xe9c3, 0xe073, 0xce20, 0xf781, 0x2ccc, 0xfd88, 0x1, 0x1);
        gbc.writeMem(0xe9c3, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe073);
        EXPECT(gbc.pc(), 0xe9c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9c3), 0xf3);
        // F3 009E
        gbc.setState(0x4581, 0x6bfe, 0xd940, 0x200a, 0xc6b4, 0xcdad, 0x0, 0x1);
        gbc.writeMem(0x4581, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x6bfe);
        EXPECT(gbc.pc(), 0x4582);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 009F
        gbc.setState(0xba95, 0x6b39, 0x80a0, 0xc3fc, 0x6524, 0x501a, 0x0, 0x1);
        gbc.writeMem(0xba95, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x6b39);
        EXPECT(gbc.pc(), 0xba96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba95), 0xf3);
        // F3 00A0
        gbc.setState(0xc24a, 0xd985, 0x73b0, 0xdc81, 0xe29f, 0xac3, 0x1, 0x0);
        gbc.writeMem(0xc24a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xd985);
        EXPECT(gbc.pc(), 0xc24b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc24a), 0xf3);
        // F3 00A1
        gbc.setState(0xc166, 0x1947, 0xdb30, 0x5146, 0x1d91, 0x3860, 0x1, 0x1);
        gbc.writeMem(0xc166, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x1947);
        EXPECT(gbc.pc(), 0xc167);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc166), 0xf3);
        // F3 00A2
        gbc.setState(0xb6fd, 0xbd41, 0x5ba0, 0x3ef6, 0xd5e6, 0x16f4, 0x1, 0x0);
        gbc.writeMem(0xb6fd, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xbd41);
        EXPECT(gbc.pc(), 0xb6fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6fd), 0xf3);
        // F3 00A3
        gbc.setState(0xc279, 0x375e, 0x8350, 0x5587, 0x2203, 0x7f0f, 0x0, 0x0);
        gbc.writeMem(0xc279, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x375e);
        EXPECT(gbc.pc(), 0xc27a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc279), 0xf3);
        // F3 00A4
        gbc.setState(0xa1da, 0x5e24, 0xa020, 0xf187, 0xd1e9, 0xf9d7, 0x0, 0x1);
        gbc.writeMem(0xa1da, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x5e24);
        EXPECT(gbc.pc(), 0xa1db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1da), 0xf3);
        // F3 00A5
        gbc.setState(0xa967, 0xb2ca, 0x9d40, 0x32fd, 0x3286, 0x6041, 0x0, 0x1);
        gbc.writeMem(0xa967, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xb2ca);
        EXPECT(gbc.pc(), 0xa968);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa967), 0xf3);
        // F3 00A7
        gbc.setState(0x95cc, 0xa792, 0x4230, 0x305, 0x42f0, 0xeb3f, 0x1, 0x1);
        gbc.writeMem(0x95cc, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa792);
        EXPECT(gbc.pc(), 0x95cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95cc), 0xf3);
        // F3 00A8
        gbc.setState(0xb51b, 0xc3d4, 0xd120, 0xa0b2, 0x496c, 0xde48, 0x0, 0x1);
        gbc.writeMem(0xb51b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xc3d4);
        EXPECT(gbc.pc(), 0xb51c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb51b), 0xf3);
        // F3 00A9
        gbc.setState(0x7e24, 0xb818, 0x3e70, 0xd683, 0x40b1, 0xb1ef, 0x0, 0x1);
        gbc.writeMem(0x7e24, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xb818);
        EXPECT(gbc.pc(), 0x7e25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 00AA
        gbc.setState(0xeaa8, 0xb9c9, 0xe240, 0x2c50, 0x8e9b, 0x8e1b, 0x0, 0x1);
        gbc.writeMem(0xeaa8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xb9c9);
        EXPECT(gbc.pc(), 0xeaa9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaa8), 0xf3);
        // F3 00AB
        gbc.setState(0x976b, 0x50c5, 0xd20, 0xe379, 0xf0a3, 0xc663, 0x1, 0x0);
        gbc.writeMem(0x976b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x50c5);
        EXPECT(gbc.pc(), 0x976c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x976b), 0xf3);
        // F3 00AC
        gbc.setState(0x33b8, 0x9070, 0xbfa0, 0xb70a, 0x8a4a, 0x5275, 0x1, 0x0);
        gbc.writeMem(0x33b8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x9070);
        EXPECT(gbc.pc(), 0x33b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 00AD
        gbc.setState(0x4990, 0x7f87, 0xbc90, 0x1ab9, 0x4bd0, 0xf85e, 0x1, 0x0);
        gbc.writeMem(0x4990, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x7f87);
        EXPECT(gbc.pc(), 0x4991);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 00AE
        gbc.setState(0x71fb, 0xb64a, 0x9840, 0x954e, 0x6fb4, 0x277d, 0x0, 0x0);
        gbc.writeMem(0x71fb, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xb64a);
        EXPECT(gbc.pc(), 0x71fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 00AF
        gbc.setState(0x4ac, 0x7682, 0xb850, 0xb377, 0xb617, 0x6405, 0x0, 0x0);
        gbc.writeMem(0x4ac, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x7682);
        EXPECT(gbc.pc(), 0x4ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 00B0
        gbc.setState(0x1886, 0x5c32, 0x1950, 0x6842, 0xd7fd, 0xb8b7, 0x1, 0x1);
        gbc.writeMem(0x1886, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x5c32);
        EXPECT(gbc.pc(), 0x1887);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 00B1
        gbc.setState(0x3847, 0xd1e1, 0xe500, 0x2359, 0x7b84, 0x2e90, 0x1, 0x1);
        gbc.writeMem(0x3847, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xd1e1);
        EXPECT(gbc.pc(), 0x3848);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 00B2
        gbc.setState(0x96fe, 0xc5f9, 0xdf60, 0xe8d1, 0x3c02, 0xf03c, 0x1, 0x0);
        gbc.writeMem(0x96fe, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xc5f9);
        EXPECT(gbc.pc(), 0x96ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96fe), 0xf3);
        // F3 00B3
        gbc.setState(0x638a, 0xcdfc, 0xe6d0, 0xcb0f, 0xa13c, 0x8f86, 0x0, 0x1);
        gbc.writeMem(0x638a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xcdfc);
        EXPECT(gbc.pc(), 0x638b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 00B4
        gbc.setState(0x8164, 0xfaf, 0x25a0, 0xba2b, 0xf00c, 0xe04, 0x1, 0x0);
        gbc.writeMem(0x8164, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xfaf);
        EXPECT(gbc.pc(), 0x8165);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8164), 0xf3);
        // F3 00B5
        gbc.setState(0x7d3b, 0xa085, 0x2040, 0xb977, 0xcdc8, 0x2dec, 0x1, 0x0);
        gbc.writeMem(0x7d3b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xa085);
        EXPECT(gbc.pc(), 0x7d3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 00B6
        gbc.setState(0xcb15, 0x34c5, 0x53c0, 0x14c, 0xa918, 0x3ff9, 0x1, 0x0);
        gbc.writeMem(0xcb15, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x34c5);
        EXPECT(gbc.pc(), 0xcb16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb15), 0xf3);
        // F3 00B7
        gbc.setState(0xf7, 0x5a24, 0x38c0, 0x44db, 0x887c, 0x1fbb, 0x0, 0x0);
        gbc.writeMem(0xf7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x5a24);
        EXPECT(gbc.pc(), 0xf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 00B9
        gbc.setState(0xca1f, 0xdc69, 0xbe0, 0xe861, 0x2713, 0x6911, 0x1, 0x1);
        gbc.writeMem(0xca1f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xdc69);
        EXPECT(gbc.pc(), 0xca20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca1f), 0xf3);
        // F3 00BA
        gbc.setState(0x5c09, 0x34f9, 0x55b0, 0xb4c6, 0xb7fa, 0xc3c4, 0x1, 0x0);
        gbc.writeMem(0x5c09, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x34f9);
        EXPECT(gbc.pc(), 0x5c0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 00BB
        gbc.setState(0xb8f4, 0x3b07, 0x32e0, 0x919c, 0xca13, 0xeeb7, 0x1, 0x0);
        gbc.writeMem(0xb8f4, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x3b07);
        EXPECT(gbc.pc(), 0xb8f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8f4), 0xf3);
        // F3 00BC
        gbc.setState(0xadfa, 0xee1e, 0x1cc0, 0x179c, 0x1cfd, 0x62aa, 0x1, 0x0);
        gbc.writeMem(0xadfa, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xee1e);
        EXPECT(gbc.pc(), 0xadfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadfa), 0xf3);
        // F3 00BD
        gbc.setState(0x5ebc, 0xa13a, 0xce30, 0xd57c, 0xacd8, 0xb5b8, 0x1, 0x0);
        gbc.writeMem(0x5ebc, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xa13a);
        EXPECT(gbc.pc(), 0x5ebd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 00BE
        gbc.setState(0xcaa1, 0xb4c2, 0x44c0, 0xd0ea, 0x43be, 0x60ca, 0x1, 0x1);
        gbc.writeMem(0xcaa1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xb4c2);
        EXPECT(gbc.pc(), 0xcaa2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaa1), 0xf3);
        // F3 00BF
        gbc.setState(0x49f4, 0xa0, 0x1020, 0x16b1, 0xda15, 0x27f3, 0x1, 0x1);
        gbc.writeMem(0x49f4, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa0);
        EXPECT(gbc.pc(), 0x49f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 00C0
        gbc.setState(0x8c3f, 0x42ec, 0xe8a0, 0x2ca, 0x2f14, 0x661a, 0x1, 0x1);
        gbc.writeMem(0x8c3f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x42ec);
        EXPECT(gbc.pc(), 0x8c40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c3f), 0xf3);
        // F3 00C1
        gbc.setState(0x9534, 0x8e69, 0x2560, 0xb88e, 0x902, 0xa703, 0x1, 0x0);
        gbc.writeMem(0x9534, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x8e69);
        EXPECT(gbc.pc(), 0x9535);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9534), 0xf3);
        // F3 00C2
        gbc.setState(0x8230, 0x5a66, 0xc3e0, 0xa7d5, 0x14c6, 0x710d, 0x1, 0x0);
        gbc.writeMem(0x8230, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x5a66);
        EXPECT(gbc.pc(), 0x8231);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8230), 0xf3);
        // F3 00C3
        gbc.setState(0x34bb, 0xdd38, 0x4130, 0xb4a7, 0xb0f4, 0x4158, 0x0, 0x0);
        gbc.writeMem(0x34bb, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xdd38);
        EXPECT(gbc.pc(), 0x34bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 00C4
        gbc.setState(0x3b8b, 0x4a60, 0x7270, 0xed24, 0xf26c, 0x21f4, 0x0, 0x0);
        gbc.writeMem(0x3b8b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x4a60);
        EXPECT(gbc.pc(), 0x3b8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 00C5
        gbc.setState(0xd339, 0xe9d3, 0x5750, 0xdbed, 0x5451, 0x177a, 0x0, 0x1);
        gbc.writeMem(0xd339, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe9d3);
        EXPECT(gbc.pc(), 0xd33a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd339), 0xf3);
        // F3 00C6
        gbc.setState(0x2888, 0xce5, 0xf900, 0x13e5, 0xf8d9, 0x4f2e, 0x0, 0x1);
        gbc.writeMem(0x2888, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xce5);
        EXPECT(gbc.pc(), 0x2889);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 00C7
        gbc.setState(0xd915, 0x2b1a, 0x630, 0x6a7a, 0xf06a, 0x7254, 0x1, 0x0);
        gbc.writeMem(0xd915, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x2b1a);
        EXPECT(gbc.pc(), 0xd916);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd915), 0xf3);
        // F3 00C8
        gbc.setState(0x3495, 0x2afb, 0x15c0, 0xe5f8, 0x54db, 0x9e86, 0x0, 0x1);
        gbc.writeMem(0x3495, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x2afb);
        EXPECT(gbc.pc(), 0x3496);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 00C9
        gbc.setState(0x7e7c, 0x9ccf, 0xeb0, 0x312a, 0xbcc6, 0x9b6f, 0x0, 0x0);
        gbc.writeMem(0x7e7c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x9ccf);
        EXPECT(gbc.pc(), 0x7e7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 00CA
        gbc.setState(0x8217, 0x26aa, 0xbab0, 0xe1f, 0x438e, 0x2cd0, 0x1, 0x1);
        gbc.writeMem(0x8217, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x26aa);
        EXPECT(gbc.pc(), 0x8218);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8217), 0xf3);
        // F3 00CB
        gbc.setState(0xfcd, 0xcb08, 0xa320, 0x20ea, 0x3a2, 0x9b1f, 0x1, 0x1);
        gbc.writeMem(0xfcd, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xcb08);
        EXPECT(gbc.pc(), 0xfce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 00CC
        gbc.setState(0xc836, 0x3489, 0x520, 0x6dc3, 0xb126, 0xbbd, 0x1, 0x0);
        gbc.writeMem(0xc836, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x3489);
        EXPECT(gbc.pc(), 0xc837);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc836), 0xf3);
        // F3 00CD
        gbc.setState(0xabb2, 0xf3f1, 0x550, 0x9f2a, 0x6f34, 0x3b70, 0x0, 0x1);
        gbc.writeMem(0xabb2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xf3f1);
        EXPECT(gbc.pc(), 0xabb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabb2), 0xf3);
        // F3 00CE
        gbc.setState(0x1c64, 0x1a79, 0x91d0, 0x496d, 0x4f8c, 0xe83d, 0x0, 0x1);
        gbc.writeMem(0x1c64, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x1a79);
        EXPECT(gbc.pc(), 0x1c65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 00CF
        gbc.setState(0x3577, 0xf61, 0x92f0, 0x7bff, 0xac11, 0x72aa, 0x1, 0x1);
        gbc.writeMem(0x3577, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xf61);
        EXPECT(gbc.pc(), 0x3578);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 00D0
        gbc.setState(0x15a4, 0xe38, 0x5e60, 0x1977, 0xb845, 0x8607, 0x1, 0x1);
        gbc.writeMem(0x15a4, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xe38);
        EXPECT(gbc.pc(), 0x15a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 00D1
        gbc.setState(0x55c4, 0x8da, 0x5390, 0x1970, 0xf5fd, 0x29bd, 0x0, 0x0);
        gbc.writeMem(0x55c4, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x8da);
        EXPECT(gbc.pc(), 0x55c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 00D2
        gbc.setState(0x30c8, 0x5457, 0x3660, 0x589b, 0xf544, 0x5e41, 0x0, 0x0);
        gbc.writeMem(0x30c8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x5457);
        EXPECT(gbc.pc(), 0x30c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 00D3
        gbc.setState(0x2ac0, 0xa000, 0xc210, 0xa7ca, 0x424b, 0x964e, 0x0, 0x0);
        gbc.writeMem(0x2ac0, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xa000);
        EXPECT(gbc.pc(), 0x2ac1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 00D4
        gbc.setState(0x5289, 0xa54c, 0x8db0, 0xa693, 0xbe85, 0x11d, 0x1, 0x1);
        gbc.writeMem(0x5289, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xa54c);
        EXPECT(gbc.pc(), 0x528a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 00D5
        gbc.setState(0x4b92, 0x92f8, 0x1870, 0x747e, 0x678e, 0x5ee3, 0x0, 0x1);
        gbc.writeMem(0x4b92, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x92f8);
        EXPECT(gbc.pc(), 0x4b93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 00D6
        gbc.setState(0x10db, 0x78a4, 0xb0c0, 0x5197, 0x52d9, 0x9c30, 0x0, 0x1);
        gbc.writeMem(0x10db, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x78a4);
        EXPECT(gbc.pc(), 0x10dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 00D7
        gbc.setState(0x3270, 0x6bcc, 0x5a50, 0x5724, 0xe1d2, 0xcb9d, 0x0, 0x1);
        gbc.writeMem(0x3270, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x6bcc);
        EXPECT(gbc.pc(), 0x3271);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 00D8
        gbc.setState(0x5d9, 0xa6c1, 0x4cd0, 0x55f9, 0x1695, 0xd950, 0x1, 0x1);
        gbc.writeMem(0x5d9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xa6c1);
        EXPECT(gbc.pc(), 0x5da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 00D9
        gbc.setState(0x3780, 0x30b, 0x8910, 0x2eb0, 0x7065, 0xf853, 0x0, 0x0);
        gbc.writeMem(0x3780, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x30b);
        EXPECT(gbc.pc(), 0x3781);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 00DA
        gbc.setState(0x26be, 0x4bf1, 0x9fe0, 0x8e84, 0xc503, 0x1684, 0x0, 0x1);
        gbc.writeMem(0x26be, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x4bf1);
        EXPECT(gbc.pc(), 0x26bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 00DB
        gbc.setState(0x8557, 0x4114, 0xd30, 0x2fb5, 0x72b2, 0x9605, 0x0, 0x0);
        gbc.writeMem(0x8557, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x4114);
        EXPECT(gbc.pc(), 0x8558);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8557), 0xf3);
        // F3 00DC
        gbc.setState(0x7690, 0xad3e, 0xe090, 0x2d2d, 0x7510, 0x4d37, 0x0, 0x0);
        gbc.writeMem(0x7690, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xad3e);
        EXPECT(gbc.pc(), 0x7691);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 00DD
        gbc.setState(0x3ad6, 0xc2bb, 0x4a0, 0xb28b, 0xffca, 0x511d, 0x0, 0x1);
        gbc.writeMem(0x3ad6, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xc2bb);
        EXPECT(gbc.pc(), 0x3ad7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 00DE
        gbc.setState(0xd4bc, 0x81c9, 0x3f10, 0x35e9, 0x87ca, 0x1e28, 0x1, 0x1);
        gbc.writeMem(0xd4bc, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x81c9);
        EXPECT(gbc.pc(), 0xd4bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4bc), 0xf3);
        // F3 00DF
        gbc.setState(0x8d68, 0x1854, 0x6ec0, 0xa2ac, 0x4da8, 0xbb24, 0x0, 0x0);
        gbc.writeMem(0x8d68, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x1854);
        EXPECT(gbc.pc(), 0x8d69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d68), 0xf3);
        // F3 00E0
        gbc.setState(0xb8fd, 0xc715, 0x30c0, 0xdbf6, 0x3902, 0x73bd, 0x1, 0x1);
        gbc.writeMem(0xb8fd, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xc715);
        EXPECT(gbc.pc(), 0xb8fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8fd), 0xf3);
        // F3 00E1
        gbc.setState(0x309a, 0x5136, 0x6fb0, 0x7dd8, 0x3479, 0xd7e6, 0x0, 0x0);
        gbc.writeMem(0x309a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x5136);
        EXPECT(gbc.pc(), 0x309b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 00E2
        gbc.setState(0x30ec, 0xef22, 0xf190, 0xa548, 0x31cc, 0x996f, 0x1, 0x1);
        gbc.writeMem(0x30ec, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xef22);
        EXPECT(gbc.pc(), 0x30ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 00E3
        gbc.setState(0xe7de, 0xd8fb, 0x5840, 0xc907, 0xb67e, 0xc7c6, 0x0, 0x1);
        gbc.writeMem(0xe7de, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xd8fb);
        EXPECT(gbc.pc(), 0xe7df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7de), 0xf3);
        // F3 00E4
        gbc.setState(0x55a4, 0x4fe6, 0x4790, 0x50d5, 0x3cc4, 0xb6dc, 0x1, 0x1);
        gbc.writeMem(0x55a4, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x4fe6);
        EXPECT(gbc.pc(), 0x55a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 00E5
        gbc.setState(0x5fa9, 0xc4c2, 0x65c0, 0x39fa, 0x1687, 0x88c3, 0x1, 0x0);
        gbc.writeMem(0x5fa9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xc4c2);
        EXPECT(gbc.pc(), 0x5faa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 00E6
        gbc.setState(0xb8a6, 0x4484, 0xacb0, 0x530e, 0x4433, 0xe6f3, 0x0, 0x0);
        gbc.writeMem(0xb8a6, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x4484);
        EXPECT(gbc.pc(), 0xb8a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8a6), 0xf3);
        // F3 00E8
        gbc.setState(0x1b78, 0x1df7, 0xc3b0, 0x6d7e, 0xcb18, 0xd8d0, 0x1, 0x0);
        gbc.writeMem(0x1b78, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x1df7);
        EXPECT(gbc.pc(), 0x1b79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 00E9
        gbc.setState(0x6297, 0x4038, 0x2f60, 0xb8c8, 0x99ed, 0xe95f, 0x0, 0x0);
        gbc.writeMem(0x6297, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x4038);
        EXPECT(gbc.pc(), 0x6298);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 00EA
        gbc.setState(0x58c1, 0xbba1, 0x7590, 0x8150, 0x63fa, 0xc129, 0x1, 0x1);
        gbc.writeMem(0x58c1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xbba1);
        EXPECT(gbc.pc(), 0x58c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 00EB
        gbc.setState(0xa6cb, 0x794a, 0x8d60, 0x63f8, 0x7530, 0x7a43, 0x0, 0x0);
        gbc.writeMem(0xa6cb, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x794a);
        EXPECT(gbc.pc(), 0xa6cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6cb), 0xf3);
        // F3 00EC
        gbc.setState(0x6a2e, 0xe85d, 0x2520, 0x4553, 0x5543, 0x545d, 0x0, 0x0);
        gbc.writeMem(0x6a2e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xe85d);
        EXPECT(gbc.pc(), 0x6a2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 00ED
        gbc.setState(0xed1f, 0x8a9f, 0x2dc0, 0x4518, 0x256d, 0x52a4, 0x1, 0x1);
        gbc.writeMem(0xed1f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x8a9f);
        EXPECT(gbc.pc(), 0xed20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed1f), 0xf3);
        // F3 00EE
        gbc.setState(0xe39f, 0x2d65, 0xff70, 0xb370, 0xae4f, 0xe3ca, 0x0, 0x1);
        gbc.writeMem(0xe39f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x2d65);
        EXPECT(gbc.pc(), 0xe3a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe39f), 0xf3);
        // F3 00EF
        gbc.setState(0x9cc9, 0xc4fa, 0x17d0, 0x8ca0, 0xfdf8, 0xed45, 0x1, 0x1);
        gbc.writeMem(0x9cc9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xc4fa);
        EXPECT(gbc.pc(), 0x9cca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cc9), 0xf3);
        // F3 00F0
        gbc.setState(0x25aa, 0xbd75, 0x6510, 0xee08, 0x393e, 0x935f, 0x1, 0x1);
        gbc.writeMem(0x25aa, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xbd75);
        EXPECT(gbc.pc(), 0x25ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 00F1
        gbc.setState(0x523f, 0x1aa1, 0x96c0, 0xbff3, 0xa74e, 0x4a8b, 0x0, 0x1);
        gbc.writeMem(0x523f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x1aa1);
        EXPECT(gbc.pc(), 0x5240);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 00F2
        gbc.setState(0x30d8, 0x159e, 0x6d40, 0x711c, 0x9d63, 0x56d3, 0x1, 0x0);
        gbc.writeMem(0x30d8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x159e);
        EXPECT(gbc.pc(), 0x30d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 00F3
        gbc.setState(0xb2ba, 0x5209, 0xa490, 0x3aae, 0x173c, 0x5a8e, 0x0, 0x1);
        gbc.writeMem(0xb2ba, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x5209);
        EXPECT(gbc.pc(), 0xb2bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2ba), 0xf3);
        // F3 00F4
        gbc.setState(0x7792, 0x9db9, 0x8630, 0xb28b, 0xd13d, 0xd3dd, 0x1, 0x1);
        gbc.writeMem(0x7792, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x9db9);
        EXPECT(gbc.pc(), 0x7793);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 00F5
        gbc.setState(0xe5ba, 0x488b, 0x23b0, 0xc18c, 0x920, 0x4b2a, 0x0, 0x1);
        gbc.writeMem(0xe5ba, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x488b);
        EXPECT(gbc.pc(), 0xe5bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5ba), 0xf3);
        // F3 00F6
        gbc.setState(0x3937, 0xadac, 0x5100, 0x1eae, 0x6b20, 0xda2a, 0x0, 0x0);
        gbc.writeMem(0x3937, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xadac);
        EXPECT(gbc.pc(), 0x3938);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 00F7
        gbc.setState(0xce7c, 0x1f2b, 0x2c80, 0x784d, 0xd70e, 0xc082, 0x1, 0x0);
        gbc.writeMem(0xce7c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x1f2b);
        EXPECT(gbc.pc(), 0xce7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce7c), 0xf3);
        // F3 00F8
        gbc.setState(0xe466, 0x1d0b, 0xf6a0, 0x229f, 0xa9da, 0xb33, 0x0, 0x1);
        gbc.writeMem(0xe466, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x1d0b);
        EXPECT(gbc.pc(), 0xe467);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe466), 0xf3);
        // F3 00F9
        gbc.setState(0xb4e2, 0xb0aa, 0xe7a0, 0x8852, 0x743a, 0xceab, 0x1, 0x0);
        gbc.writeMem(0xb4e2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xb0aa);
        EXPECT(gbc.pc(), 0xb4e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4e2), 0xf3);
        // F3 00FA
        gbc.setState(0x86f, 0x2ae9, 0x2b30, 0x6bee, 0x3020, 0xf739, 0x1, 0x1);
        gbc.writeMem(0x86f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x2ae9);
        EXPECT(gbc.pc(), 0x870);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 00FB
        gbc.setState(0x813c, 0x479f, 0x2ca0, 0x4a7e, 0x4d54, 0x29f8, 0x0, 0x1);
        gbc.writeMem(0x813c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x479f);
        EXPECT(gbc.pc(), 0x813d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x813c), 0xf3);
        // F3 00FC
        gbc.setState(0x8a8, 0xfc24, 0xdc90, 0xe3d7, 0x1f30, 0x74da, 0x1, 0x1);
        gbc.writeMem(0x8a8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xfc24);
        EXPECT(gbc.pc(), 0x8a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 00FD
        gbc.setState(0xe728, 0xeb90, 0x3190, 0xada5, 0x97ec, 0x16d6, 0x0, 0x1);
        gbc.writeMem(0xe728, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xeb90);
        EXPECT(gbc.pc(), 0xe729);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe728), 0xf3);
        // F3 00FF
        gbc.setState(0x2ee1, 0x4b3d, 0xb080, 0xe566, 0x3910, 0x26b7, 0x0, 0x0);
        gbc.writeMem(0x2ee1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x4b3d);
        EXPECT(gbc.pc(), 0x2ee2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0100
        gbc.setState(0x206d, 0xdaaa, 0xf2c0, 0x9c8f, 0xf46f, 0xcb91, 0x0, 0x0);
        gbc.writeMem(0x206d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xdaaa);
        EXPECT(gbc.pc(), 0x206e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0102
        gbc.setState(0xa095, 0x660b, 0xf6c0, 0x228a, 0x7f8a, 0x14c8, 0x0, 0x0);
        gbc.writeMem(0xa095, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x660b);
        EXPECT(gbc.pc(), 0xa096);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa095), 0xf3);
        // F3 0104
        gbc.setState(0xdd5a, 0xf1, 0x6ce0, 0x13d3, 0x9d2, 0xfe62, 0x0, 0x1);
        gbc.writeMem(0xdd5a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xf1);
        EXPECT(gbc.pc(), 0xdd5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd5a), 0xf3);
        // F3 0105
        gbc.setState(0x7644, 0x2158, 0x4cf0, 0xf124, 0xee8, 0x3c35, 0x0, 0x0);
        gbc.writeMem(0x7644, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x2158);
        EXPECT(gbc.pc(), 0x7645);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0106
        gbc.setState(0x6bce, 0xb00e, 0x94a0, 0xc5b2, 0xa3ee, 0x210b, 0x0, 0x0);
        gbc.writeMem(0x6bce, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xb00e);
        EXPECT(gbc.pc(), 0x6bcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0107
        gbc.setState(0xab66, 0x57c4, 0x81e0, 0xfccc, 0x107f, 0xa5c1, 0x0, 0x1);
        gbc.writeMem(0xab66, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x57c4);
        EXPECT(gbc.pc(), 0xab67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab66), 0xf3);
        // F3 0108
        gbc.setState(0x2690, 0x4e8d, 0x7800, 0xa78f, 0x68a6, 0xf413, 0x1, 0x1);
        gbc.writeMem(0x2690, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x4e8d);
        EXPECT(gbc.pc(), 0x2691);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0109
        gbc.setState(0x7505, 0x1d78, 0x8240, 0x59e0, 0x11e7, 0x1c07, 0x0, 0x0);
        gbc.writeMem(0x7505, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x1d78);
        EXPECT(gbc.pc(), 0x7506);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 010A
        gbc.setState(0xd475, 0x15ca, 0x5740, 0xdd97, 0x74f3, 0xb7ff, 0x1, 0x1);
        gbc.writeMem(0xd475, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x15ca);
        EXPECT(gbc.pc(), 0xd476);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd475), 0xf3);
        // F3 010B
        gbc.setState(0x2417, 0xc1f2, 0x1670, 0x6c0, 0x15a0, 0xbfcc, 0x0, 0x0);
        gbc.writeMem(0x2417, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xc1f2);
        EXPECT(gbc.pc(), 0x2418);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 010C
        gbc.setState(0x431f, 0x7878, 0x3b0, 0xa253, 0xd658, 0x9a86, 0x1, 0x1);
        gbc.writeMem(0x431f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x7878);
        EXPECT(gbc.pc(), 0x4320);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 010D
        gbc.setState(0x9e7f, 0xe525, 0x8920, 0xc1d7, 0xd6ca, 0x1140, 0x1, 0x1);
        gbc.writeMem(0x9e7f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xe525);
        EXPECT(gbc.pc(), 0x9e80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e7f), 0xf3);
        // F3 010E
        gbc.setState(0xc6cc, 0xda5d, 0xc9b0, 0x51c3, 0x9ff5, 0xbe17, 0x0, 0x1);
        gbc.writeMem(0xc6cc, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xda5d);
        EXPECT(gbc.pc(), 0xc6cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6cc), 0xf3);
        // F3 010F
        gbc.setState(0x35b2, 0xb5ef, 0xdff0, 0x7a2b, 0x2b11, 0x462c, 0x1, 0x1);
        gbc.writeMem(0x35b2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xb5ef);
        EXPECT(gbc.pc(), 0x35b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0110
        gbc.setState(0x120, 0xba4e, 0xf330, 0x247a, 0xf11b, 0x583, 0x1, 0x0);
        gbc.writeMem(0x120, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xba4e);
        EXPECT(gbc.pc(), 0x121);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0111
        gbc.setState(0x4855, 0xdeec, 0x1770, 0xe634, 0x289f, 0x143, 0x1, 0x0);
        gbc.writeMem(0x4855, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xdeec);
        EXPECT(gbc.pc(), 0x4856);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0112
        gbc.setState(0x5d12, 0xc364, 0x5d30, 0x1a36, 0x7e9c, 0x34f6, 0x0, 0x1);
        gbc.writeMem(0x5d12, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xc364);
        EXPECT(gbc.pc(), 0x5d13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0113
        gbc.setState(0x9ca6, 0xd73a, 0xc130, 0x6bb, 0x975c, 0x141d, 0x1, 0x0);
        gbc.writeMem(0x9ca6, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xd73a);
        EXPECT(gbc.pc(), 0x9ca7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ca6), 0xf3);
        // F3 0114
        gbc.setState(0xa55b, 0x2393, 0x9f20, 0x8785, 0xadf1, 0xa653, 0x1, 0x0);
        gbc.writeMem(0xa55b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x2393);
        EXPECT(gbc.pc(), 0xa55c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa55b), 0xf3);
        // F3 0115
        gbc.setState(0x8646, 0x39bf, 0xe920, 0x1c6c, 0x9f50, 0x6ed4, 0x1, 0x1);
        gbc.writeMem(0x8646, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x39bf);
        EXPECT(gbc.pc(), 0x8647);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8646), 0xf3);
        // F3 0116
        gbc.setState(0x79a0, 0xe138, 0xcc30, 0xb7e5, 0xf383, 0x9425, 0x1, 0x1);
        gbc.writeMem(0x79a0, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xe138);
        EXPECT(gbc.pc(), 0x79a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0117
        gbc.setState(0x8f8c, 0xfb0c, 0x45e0, 0x6dbc, 0xe940, 0xd0, 0x0, 0x0);
        gbc.writeMem(0x8f8c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xfb0c);
        EXPECT(gbc.pc(), 0x8f8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f8c), 0xf3);
        // F3 0118
        gbc.setState(0xaa71, 0x2370, 0x7f60, 0x52d4, 0x20a0, 0x3c39, 0x1, 0x1);
        gbc.writeMem(0xaa71, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x2370);
        EXPECT(gbc.pc(), 0xaa72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa71), 0xf3);
        // F3 0119
        gbc.setState(0x7863, 0x4539, 0x470, 0x9e8b, 0xe925, 0x8399, 0x0, 0x0);
        gbc.writeMem(0x7863, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x4539);
        EXPECT(gbc.pc(), 0x7864);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 011A
        gbc.setState(0x757c, 0x92a5, 0xafc0, 0x419f, 0x8a44, 0xa7e5, 0x0, 0x1);
        gbc.writeMem(0x757c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x92a5);
        EXPECT(gbc.pc(), 0x757d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 011C
        gbc.setState(0xe567, 0xeb89, 0x7290, 0xb466, 0x4f7, 0x29b7, 0x1, 0x1);
        gbc.writeMem(0xe567, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xeb89);
        EXPECT(gbc.pc(), 0xe568);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe567), 0xf3);
        // F3 011E
        gbc.setState(0x5e17, 0x5d12, 0xfc40, 0xeeb8, 0x3f56, 0x6e6b, 0x0, 0x0);
        gbc.writeMem(0x5e17, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x5d12);
        EXPECT(gbc.pc(), 0x5e18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 011F
        gbc.setState(0xc333, 0xdd02, 0xbdd0, 0xcabc, 0x4097, 0x88b7, 0x0, 0x1);
        gbc.writeMem(0xc333, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xdd02);
        EXPECT(gbc.pc(), 0xc334);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc333), 0xf3);
        // F3 0120
        gbc.setState(0x390, 0x959b, 0xdc80, 0x2682, 0x99, 0x9af8, 0x0, 0x1);
        gbc.writeMem(0x390, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x959b);
        EXPECT(gbc.pc(), 0x391);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0121
        gbc.setState(0x49f, 0x404f, 0xf440, 0x4f70, 0xcb51, 0x624f, 0x0, 0x1);
        gbc.writeMem(0x49f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x404f);
        EXPECT(gbc.pc(), 0x4a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0122
        gbc.setState(0xb38c, 0x10d0, 0x10a0, 0xacaa, 0xf6b0, 0x8b88, 0x0, 0x0);
        gbc.writeMem(0xb38c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x10d0);
        EXPECT(gbc.pc(), 0xb38d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb38c), 0xf3);
        // F3 0123
        gbc.setState(0xd76e, 0x80e6, 0xd600, 0xaf0f, 0xee53, 0x39de, 0x0, 0x0);
        gbc.writeMem(0xd76e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x80e6);
        EXPECT(gbc.pc(), 0xd76f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd76e), 0xf3);
        // F3 0124
        gbc.setState(0x8efb, 0xf06c, 0x8140, 0x7172, 0x2e4a, 0x79de, 0x0, 0x0);
        gbc.writeMem(0x8efb, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xf06c);
        EXPECT(gbc.pc(), 0x8efc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8efb), 0xf3);
        // F3 0125
        gbc.setState(0x91ed, 0x5377, 0x570, 0xff21, 0x50aa, 0x6f5e, 0x0, 0x0);
        gbc.writeMem(0x91ed, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x5377);
        EXPECT(gbc.pc(), 0x91ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91ed), 0xf3);
        // F3 0126
        gbc.setState(0x9769, 0xc66, 0xc810, 0xb8a3, 0xaccb, 0x99c0, 0x0, 0x0);
        gbc.writeMem(0x9769, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xc66);
        EXPECT(gbc.pc(), 0x976a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9769), 0xf3);
        // F3 0127
        gbc.setState(0xd9d1, 0x8842, 0x8e10, 0xafe2, 0x8212, 0x39d1, 0x1, 0x1);
        gbc.writeMem(0xd9d1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x8842);
        EXPECT(gbc.pc(), 0xd9d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9d1), 0xf3);
        // F3 0128
        gbc.setState(0xba46, 0xb381, 0x18b0, 0x6796, 0xc66a, 0x8a26, 0x0, 0x1);
        gbc.writeMem(0xba46, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xb381);
        EXPECT(gbc.pc(), 0xba47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba46), 0xf3);
        // F3 0129
        gbc.setState(0x410f, 0x1bec, 0xdb80, 0x4b08, 0x27f9, 0x2900, 0x1, 0x1);
        gbc.writeMem(0x410f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x1bec);
        EXPECT(gbc.pc(), 0x4110);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 012A
        gbc.setState(0x9315, 0x72db, 0x59a0, 0x6c65, 0xcd87, 0xd97c, 0x1, 0x0);
        gbc.writeMem(0x9315, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x72db);
        EXPECT(gbc.pc(), 0x9316);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9315), 0xf3);
        // F3 012B
        gbc.setState(0x180d, 0x38ef, 0x4f30, 0x74d1, 0x3cf7, 0xa03f, 0x1, 0x1);
        gbc.writeMem(0x180d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x38ef);
        EXPECT(gbc.pc(), 0x180e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 012C
        gbc.setState(0x4e79, 0xc6b3, 0xefe0, 0xc7b, 0x2afc, 0x30ae, 0x0, 0x1);
        gbc.writeMem(0x4e79, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xc6b3);
        EXPECT(gbc.pc(), 0x4e7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 012D
        gbc.setState(0xe3e6, 0x8f5a, 0x9b10, 0xbb7d, 0xccbd, 0xe136, 0x1, 0x0);
        gbc.writeMem(0xe3e6, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x8f5a);
        EXPECT(gbc.pc(), 0xe3e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3e6), 0xf3);
        // F3 012E
        gbc.setState(0x31e, 0x6bd8, 0xdf00, 0xf2d3, 0xce78, 0xbee7, 0x0, 0x0);
        gbc.writeMem(0x31e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x6bd8);
        EXPECT(gbc.pc(), 0x31f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 012F
        gbc.setState(0x6309, 0x4f5d, 0xc10, 0xe83d, 0xe233, 0x86a4, 0x0, 0x1);
        gbc.writeMem(0x6309, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x4f5d);
        EXPECT(gbc.pc(), 0x630a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0130
        gbc.setState(0x4118, 0xf9cd, 0x82c0, 0x69e1, 0x3fb4, 0xfe89, 0x0, 0x0);
        gbc.writeMem(0x4118, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xf9cd);
        EXPECT(gbc.pc(), 0x4119);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0131
        gbc.setState(0xbd22, 0xb6b1, 0xb3c0, 0x88b5, 0xaf1c, 0x59f2, 0x0, 0x0);
        gbc.writeMem(0xbd22, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xb6b1);
        EXPECT(gbc.pc(), 0xbd23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd22), 0xf3);
        // F3 0132
        gbc.setState(0x4d06, 0x57c4, 0x3b90, 0xa44b, 0x196, 0x6970, 0x0, 0x0);
        gbc.writeMem(0x4d06, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x57c4);
        EXPECT(gbc.pc(), 0x4d07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0133
        gbc.setState(0x556e, 0xa327, 0xb9b0, 0x8d74, 0x9e89, 0xee86, 0x1, 0x1);
        gbc.writeMem(0x556e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xa327);
        EXPECT(gbc.pc(), 0x556f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0134
        gbc.setState(0x9520, 0xd4fb, 0x23f0, 0x1f78, 0x5c34, 0xda2e, 0x1, 0x1);
        gbc.writeMem(0x9520, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xd4fb);
        EXPECT(gbc.pc(), 0x9521);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9520), 0xf3);
        // F3 0135
        gbc.setState(0xe565, 0x46fa, 0xfd60, 0x3da5, 0xcea9, 0x27e2, 0x1, 0x0);
        gbc.writeMem(0xe565, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x46fa);
        EXPECT(gbc.pc(), 0xe566);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe565), 0xf3);
        // F3 0136
        gbc.setState(0x3898, 0x21ca, 0x5f10, 0x718e, 0x63ee, 0x4a5a, 0x1, 0x1);
        gbc.writeMem(0x3898, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x21ca);
        EXPECT(gbc.pc(), 0x3899);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0137
        gbc.setState(0x9049, 0xf0, 0xeb70, 0xd187, 0x35da, 0xa3b3, 0x0, 0x1);
        gbc.writeMem(0x9049, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xf0);
        EXPECT(gbc.pc(), 0x904a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9049), 0xf3);
        // F3 0138
        gbc.setState(0xc562, 0x6938, 0x3c10, 0xe5eb, 0xb56d, 0x806d, 0x0, 0x1);
        gbc.writeMem(0xc562, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x6938);
        EXPECT(gbc.pc(), 0xc563);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc562), 0xf3);
        // F3 0139
        gbc.setState(0xb701, 0x372f, 0xede0, 0x9c83, 0xaff1, 0xdec7, 0x0, 0x0);
        gbc.writeMem(0xb701, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x372f);
        EXPECT(gbc.pc(), 0xb702);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb701), 0xf3);
        // F3 013A
        gbc.setState(0x8fea, 0x3ab5, 0xa9b0, 0x4763, 0x251f, 0x3ce3, 0x1, 0x0);
        gbc.writeMem(0x8fea, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x3ab5);
        EXPECT(gbc.pc(), 0x8feb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fea), 0xf3);
        // F3 013B
        gbc.setState(0x4dd5, 0xfbea, 0xf850, 0x3572, 0xc681, 0x704e, 0x0, 0x1);
        gbc.writeMem(0x4dd5, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xfbea);
        EXPECT(gbc.pc(), 0x4dd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 013C
        gbc.setState(0x6e7b, 0x7b92, 0x1e50, 0x29a1, 0x105c, 0x8e72, 0x0, 0x0);
        gbc.writeMem(0x6e7b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x7b92);
        EXPECT(gbc.pc(), 0x6e7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 013D
        gbc.setState(0x9eda, 0xe759, 0xb50, 0xeae0, 0x261d, 0x18d1, 0x0, 0x0);
        gbc.writeMem(0x9eda, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe759);
        EXPECT(gbc.pc(), 0x9edb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9eda), 0xf3);
        // F3 013E
        gbc.setState(0xfaa, 0xadcd, 0xf330, 0x2119, 0xe7a3, 0x566d, 0x0, 0x1);
        gbc.writeMem(0xfaa, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xadcd);
        EXPECT(gbc.pc(), 0xfab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 013F
        gbc.setState(0xba2d, 0xb8d9, 0x9fd0, 0x6962, 0x8f89, 0xd43e, 0x0, 0x0);
        gbc.writeMem(0xba2d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xb8d9);
        EXPECT(gbc.pc(), 0xba2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba2d), 0xf3);
        // F3 0140
        gbc.setState(0x365e, 0xf1fa, 0xf20, 0x604d, 0xb06d, 0x3263, 0x0, 0x0);
        gbc.writeMem(0x365e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xf1fa);
        EXPECT(gbc.pc(), 0x365f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0141
        gbc.setState(0xcfad, 0xcd0b, 0xfa10, 0x1b46, 0x2f63, 0xa036, 0x1, 0x0);
        gbc.writeMem(0xcfad, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xcd0b);
        EXPECT(gbc.pc(), 0xcfae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfad), 0xf3);
        // F3 0142
        gbc.setState(0xac3d, 0x34f6, 0x1150, 0xab54, 0x9f2, 0x1a59, 0x0, 0x1);
        gbc.writeMem(0xac3d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x34f6);
        EXPECT(gbc.pc(), 0xac3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac3d), 0xf3);
        // F3 0143
        gbc.setState(0x191e, 0x2720, 0x1d70, 0x9b93, 0x672a, 0x1ad5, 0x0, 0x1);
        gbc.writeMem(0x191e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x2720);
        EXPECT(gbc.pc(), 0x191f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0144
        gbc.setState(0x6b69, 0x68ed, 0xc940, 0xddda, 0x3bd0, 0x5208, 0x0, 0x1);
        gbc.writeMem(0x6b69, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x68ed);
        EXPECT(gbc.pc(), 0x6b6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0145
        gbc.setState(0x9084, 0xa62d, 0xc040, 0x1be4, 0xfc60, 0xef9e, 0x1, 0x0);
        gbc.writeMem(0x9084, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xa62d);
        EXPECT(gbc.pc(), 0x9085);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9084), 0xf3);
        // F3 0146
        gbc.setState(0x18f6, 0x1ff1, 0x8f20, 0xd263, 0xa630, 0x698, 0x1, 0x0);
        gbc.writeMem(0x18f6, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x1ff1);
        EXPECT(gbc.pc(), 0x18f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0147
        gbc.setState(0x6fa6, 0xaa6a, 0x44e0, 0x2d63, 0x7f3f, 0x1487, 0x1, 0x1);
        gbc.writeMem(0x6fa6, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xaa6a);
        EXPECT(gbc.pc(), 0x6fa7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0148
        gbc.setState(0xe2ad, 0x6b85, 0x5030, 0xefd7, 0x63e2, 0x1694, 0x1, 0x1);
        gbc.writeMem(0xe2ad, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x6b85);
        EXPECT(gbc.pc(), 0xe2ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2ad), 0xf3);
        // F3 0149
        gbc.setState(0x3720, 0xabc1, 0xf910, 0x7832, 0x4530, 0x7531, 0x0, 0x0);
        gbc.writeMem(0x3720, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xabc1);
        EXPECT(gbc.pc(), 0x3721);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 014A
        gbc.setState(0xd25c, 0x5823, 0x4620, 0x5b3b, 0xe480, 0xf30c, 0x1, 0x1);
        gbc.writeMem(0xd25c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x5823);
        EXPECT(gbc.pc(), 0xd25d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd25c), 0xf3);
        // F3 014C
        gbc.setState(0x9575, 0x76e9, 0x9ee0, 0x635c, 0x7f5f, 0x6164, 0x1, 0x0);
        gbc.writeMem(0x9575, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x76e9);
        EXPECT(gbc.pc(), 0x9576);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9575), 0xf3);
        // F3 014D
        gbc.setState(0x7c36, 0x5a83, 0xd0, 0x661d, 0x6cf5, 0x16e3, 0x1, 0x0);
        gbc.writeMem(0x7c36, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x5a83);
        EXPECT(gbc.pc(), 0x7c37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 014E
        gbc.setState(0x73ae, 0x5b9b, 0x30d0, 0xbb3d, 0x755d, 0xf565, 0x0, 0x1);
        gbc.writeMem(0x73ae, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x5b9b);
        EXPECT(gbc.pc(), 0x73af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 014F
        gbc.setState(0x5a11, 0xecf4, 0x7c70, 0x65fd, 0x6f31, 0xd944, 0x0, 0x0);
        gbc.writeMem(0x5a11, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xecf4);
        EXPECT(gbc.pc(), 0x5a12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0150
        gbc.setState(0x2f2a, 0x8a1e, 0x45c0, 0x5b18, 0xd390, 0xf37, 0x0, 0x0);
        gbc.writeMem(0x2f2a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x8a1e);
        EXPECT(gbc.pc(), 0x2f2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0151
        gbc.setState(0x5321, 0x53a9, 0x5e40, 0x883e, 0xd6f0, 0xa243, 0x1, 0x1);
        gbc.writeMem(0x5321, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x53a9);
        EXPECT(gbc.pc(), 0x5322);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0152
        gbc.setState(0x2708, 0x3312, 0x5780, 0xb834, 0xd5e5, 0x9207, 0x0, 0x1);
        gbc.writeMem(0x2708, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x3312);
        EXPECT(gbc.pc(), 0x2709);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0153
        gbc.setState(0x6942, 0xc2b2, 0x88c0, 0x3a15, 0xf230, 0x4352, 0x0, 0x0);
        gbc.writeMem(0x6942, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xc2b2);
        EXPECT(gbc.pc(), 0x6943);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0154
        gbc.setState(0xbd74, 0x8b79, 0x40c0, 0xc95e, 0x67a, 0x3fcc, 0x0, 0x0);
        gbc.writeMem(0xbd74, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x8b79);
        EXPECT(gbc.pc(), 0xbd75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd74), 0xf3);
        // F3 0155
        gbc.setState(0xbd96, 0x964e, 0xd760, 0x9f67, 0x511, 0xf77b, 0x1, 0x0);
        gbc.writeMem(0xbd96, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x964e);
        EXPECT(gbc.pc(), 0xbd97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd96), 0xf3);
        // F3 0156
        gbc.setState(0x72df, 0xdca6, 0x2e0, 0x1491, 0xba17, 0xaeef, 0x1, 0x0);
        gbc.writeMem(0x72df, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xdca6);
        EXPECT(gbc.pc(), 0x72e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0157
        gbc.setState(0x5d8a, 0xaa33, 0x9cc0, 0x4d89, 0x18d8, 0xa974, 0x0, 0x0);
        gbc.writeMem(0x5d8a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xaa33);
        EXPECT(gbc.pc(), 0x5d8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0158
        gbc.setState(0x6d, 0x1360, 0x9230, 0xb54a, 0x1331, 0x2cfc, 0x1, 0x0);
        gbc.writeMem(0x6d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x1360);
        EXPECT(gbc.pc(), 0x6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0159
        gbc.setState(0xcffd, 0x5b87, 0x5af0, 0x5912, 0x80a5, 0xbb30, 0x0, 0x0);
        gbc.writeMem(0xcffd, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x5b87);
        EXPECT(gbc.pc(), 0xcffe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcffd), 0xf3);
        // F3 015A
        gbc.setState(0xcca5, 0x26ab, 0xd4d0, 0x24d3, 0xada3, 0x8b48, 0x0, 0x0);
        gbc.writeMem(0xcca5, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x26ab);
        EXPECT(gbc.pc(), 0xcca6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcca5), 0xf3);
        // F3 015B
        gbc.setState(0x278, 0xf5a0, 0x9310, 0x6eb, 0x3d3, 0xc6a, 0x0, 0x1);
        gbc.writeMem(0x278, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xf5a0);
        EXPECT(gbc.pc(), 0x279);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 015C
        gbc.setState(0x8647, 0x556b, 0xabc0, 0x4fb1, 0x8fca, 0x6d88, 0x0, 0x1);
        gbc.writeMem(0x8647, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x556b);
        EXPECT(gbc.pc(), 0x8648);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8647), 0xf3);
        // F3 015D
        gbc.setState(0x9665, 0x28ab, 0xc2d0, 0x176d, 0x1ce2, 0x63af, 0x0, 0x0);
        gbc.writeMem(0x9665, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x28ab);
        EXPECT(gbc.pc(), 0x9666);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9665), 0xf3);
        // F3 015E
        gbc.setState(0xde88, 0xe15f, 0xa550, 0x2fc3, 0x1dbd, 0x4439, 0x0, 0x0);
        gbc.writeMem(0xde88, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xe15f);
        EXPECT(gbc.pc(), 0xde89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde88), 0xf3);
        // F3 015F
        gbc.setState(0x6b6a, 0xefe2, 0x8140, 0x4513, 0x26ae, 0x76a1, 0x1, 0x0);
        gbc.writeMem(0x6b6a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xefe2);
        EXPECT(gbc.pc(), 0x6b6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0160
        gbc.setState(0xb94e, 0xdc4e, 0x1710, 0xe74a, 0xfc4a, 0x6eef, 0x0, 0x0);
        gbc.writeMem(0xb94e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xdc4e);
        EXPECT(gbc.pc(), 0xb94f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb94e), 0xf3);
        // F3 0161
        gbc.setState(0xb116, 0x24f6, 0x4720, 0x2b97, 0x96c3, 0xb36f, 0x1, 0x1);
        gbc.writeMem(0xb116, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x24f6);
        EXPECT(gbc.pc(), 0xb117);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb116), 0xf3);
        // F3 0162
        gbc.setState(0xd6b4, 0x80e0, 0x3ef0, 0x27bd, 0xe3bd, 0x94c8, 0x1, 0x1);
        gbc.writeMem(0xd6b4, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x80e0);
        EXPECT(gbc.pc(), 0xd6b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6b4), 0xf3);
        // F3 0163
        gbc.setState(0xd11e, 0x52b2, 0x7d20, 0xa85a, 0x9dad, 0xb234, 0x0, 0x1);
        gbc.writeMem(0xd11e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x52b2);
        EXPECT(gbc.pc(), 0xd11f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd11e), 0xf3);
        // F3 0164
        gbc.setState(0x2e0, 0xdde2, 0x60, 0x7c4, 0x7301, 0x7d4e, 0x1, 0x0);
        gbc.writeMem(0x2e0, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xdde2);
        EXPECT(gbc.pc(), 0x2e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0165
        gbc.setState(0x8777, 0x12b8, 0x2930, 0xc392, 0xa942, 0xd4d9, 0x0, 0x1);
        gbc.writeMem(0x8777, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x12b8);
        EXPECT(gbc.pc(), 0x8778);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8777), 0xf3);
        // F3 0166
        gbc.setState(0x45ee, 0x3cc4, 0xe3b0, 0x9a8d, 0xfdcf, 0x688, 0x0, 0x0);
        gbc.writeMem(0x45ee, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x3cc4);
        EXPECT(gbc.pc(), 0x45ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0167
        gbc.setState(0xb8, 0xc695, 0xa90, 0xcde2, 0xe57a, 0x8394, 0x0, 0x0);
        gbc.writeMem(0xb8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xc695);
        EXPECT(gbc.pc(), 0xb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0168
        gbc.setState(0xed9e, 0xa519, 0xae80, 0xdf10, 0xf71f, 0xb06, 0x1, 0x1);
        gbc.writeMem(0xed9e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xa519);
        EXPECT(gbc.pc(), 0xed9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed9e), 0xf3);
        // F3 0169
        gbc.setState(0x343a, 0x6157, 0xb580, 0xb350, 0x3f92, 0x5913, 0x0, 0x0);
        gbc.writeMem(0x343a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x6157);
        EXPECT(gbc.pc(), 0x343b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 016B
        gbc.setState(0x4839, 0xa4bf, 0x1600, 0x7ae5, 0x238d, 0x9bf3, 0x1, 0x1);
        gbc.writeMem(0x4839, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa4bf);
        EXPECT(gbc.pc(), 0x483a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 016C
        gbc.setState(0xc6dc, 0x3305, 0x3280, 0xb519, 0x5319, 0x55ef, 0x1, 0x0);
        gbc.writeMem(0xc6dc, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x3305);
        EXPECT(gbc.pc(), 0xc6dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6dc), 0xf3);
        // F3 016D
        gbc.setState(0x2f2, 0x4972, 0xfda0, 0xe187, 0xac8d, 0xaddf, 0x1, 0x0);
        gbc.writeMem(0x2f2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x4972);
        EXPECT(gbc.pc(), 0x2f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 016E
        gbc.setState(0x4ba2, 0x2b7a, 0x5c50, 0xc988, 0x8e2a, 0xaad6, 0x1, 0x1);
        gbc.writeMem(0x4ba2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x2b7a);
        EXPECT(gbc.pc(), 0x4ba3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0170
        gbc.setState(0x3a6c, 0x3f6a, 0xbd00, 0xc73e, 0x4791, 0x6fdc, 0x1, 0x0);
        gbc.writeMem(0x3a6c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x3f6a);
        EXPECT(gbc.pc(), 0x3a6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0171
        gbc.setState(0xbe55, 0xeae8, 0x7460, 0x754a, 0xcd3c, 0x6334, 0x0, 0x0);
        gbc.writeMem(0xbe55, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xeae8);
        EXPECT(gbc.pc(), 0xbe56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe55), 0xf3);
        // F3 0172
        gbc.setState(0xa239, 0x2852, 0x8630, 0xdd15, 0x9530, 0x8a26, 0x0, 0x1);
        gbc.writeMem(0xa239, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x2852);
        EXPECT(gbc.pc(), 0xa23a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa239), 0xf3);
        // F3 0173
        gbc.setState(0x465f, 0xd69f, 0x5dd0, 0x2bfa, 0xba60, 0xa521, 0x0, 0x0);
        gbc.writeMem(0x465f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xd69f);
        EXPECT(gbc.pc(), 0x4660);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0174
        gbc.setState(0x9618, 0x5787, 0x4fd0, 0x55a6, 0xff3c, 0xf42c, 0x0, 0x1);
        gbc.writeMem(0x9618, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x5787);
        EXPECT(gbc.pc(), 0x9619);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9618), 0xf3);
        // F3 0175
        gbc.setState(0x81ae, 0xfffa, 0x1d90, 0x4ce6, 0x11fc, 0x7142, 0x1, 0x1);
        gbc.writeMem(0x81ae, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xfffa);
        EXPECT(gbc.pc(), 0x81af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81ae), 0xf3);
        // F3 0176
        gbc.setState(0x9260, 0x8d8c, 0x53a0, 0x395a, 0x773, 0x15d4, 0x0, 0x1);
        gbc.writeMem(0x9260, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x8d8c);
        EXPECT(gbc.pc(), 0x9261);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9260), 0xf3);
        // F3 0177
        gbc.setState(0xcf52, 0x85a1, 0x770, 0xb0e4, 0x53ba, 0x9b3a, 0x1, 0x0);
        gbc.writeMem(0xcf52, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x85a1);
        EXPECT(gbc.pc(), 0xcf53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf52), 0xf3);
        // F3 0178
        gbc.setState(0xb434, 0x90a7, 0x8b40, 0x99b9, 0x5c12, 0x9f54, 0x1, 0x0);
        gbc.writeMem(0xb434, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x90a7);
        EXPECT(gbc.pc(), 0xb435);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb434), 0xf3);
        // F3 017A
        gbc.setState(0xaffa, 0x9746, 0x3760, 0xad66, 0x886b, 0x418, 0x1, 0x0);
        gbc.writeMem(0xaffa, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x9746);
        EXPECT(gbc.pc(), 0xaffb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaffa), 0xf3);
        // F3 017B
        gbc.setState(0x778, 0xdc55, 0x4970, 0x15d1, 0x64d3, 0xdc3c, 0x0, 0x1);
        gbc.writeMem(0x778, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xdc55);
        EXPECT(gbc.pc(), 0x779);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 017D
        gbc.setState(0x45a3, 0x58b0, 0x4af0, 0xe5d4, 0xfacb, 0x726f, 0x0, 0x0);
        gbc.writeMem(0x45a3, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x58b0);
        EXPECT(gbc.pc(), 0x45a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 017E
        gbc.setState(0xcd2b, 0x7aab, 0xa410, 0x70bf, 0xe1ce, 0x27db, 0x0, 0x1);
        gbc.writeMem(0xcd2b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x7aab);
        EXPECT(gbc.pc(), 0xcd2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd2b), 0xf3);
        // F3 017F
        gbc.setState(0x6ca4, 0x9110, 0x23f0, 0x7a1, 0xf729, 0x9c2f, 0x1, 0x0);
        gbc.writeMem(0x6ca4, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x9110);
        EXPECT(gbc.pc(), 0x6ca5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0180
        gbc.setState(0x3f2a, 0xe528, 0x5890, 0x19f1, 0x8476, 0x9608, 0x1, 0x0);
        gbc.writeMem(0x3f2a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xe528);
        EXPECT(gbc.pc(), 0x3f2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0181
        gbc.setState(0xd9e7, 0x63c0, 0xff90, 0xf9d3, 0x8ced, 0xb8f7, 0x1, 0x1);
        gbc.writeMem(0xd9e7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x63c0);
        EXPECT(gbc.pc(), 0xd9e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9e7), 0xf3);
        // F3 0182
        gbc.setState(0x71d4, 0x1c64, 0x5620, 0x15ca, 0xdb5c, 0x3217, 0x0, 0x1);
        gbc.writeMem(0x71d4, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x1c64);
        EXPECT(gbc.pc(), 0x71d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0183
        gbc.setState(0x5334, 0x9fc5, 0xb5f0, 0x2884, 0x9488, 0x5b36, 0x0, 0x1);
        gbc.writeMem(0x5334, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x9fc5);
        EXPECT(gbc.pc(), 0x5335);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0184
        gbc.setState(0xb370, 0x6cfe, 0x2b80, 0xe511, 0xfab4, 0x400d, 0x1, 0x0);
        gbc.writeMem(0xb370, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x6cfe);
        EXPECT(gbc.pc(), 0xb371);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb370), 0xf3);
        // F3 0185
        gbc.setState(0xdf95, 0xabe3, 0x4ab0, 0x76e3, 0xc76e, 0x42b0, 0x1, 0x0);
        gbc.writeMem(0xdf95, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xabe3);
        EXPECT(gbc.pc(), 0xdf96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf95), 0xf3);
        // F3 0186
        gbc.setState(0xb832, 0x94a5, 0xb160, 0xaba5, 0x94cc, 0xa503, 0x1, 0x1);
        gbc.writeMem(0xb832, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x94a5);
        EXPECT(gbc.pc(), 0xb833);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb832), 0xf3);
        // F3 0187
        gbc.setState(0x2efb, 0xc1d7, 0x970, 0xe10f, 0x1e94, 0x28b3, 0x0, 0x1);
        gbc.writeMem(0x2efb, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc1d7);
        EXPECT(gbc.pc(), 0x2efc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0188
        gbc.setState(0x5e72, 0x26bc, 0x7e10, 0x5e7f, 0x5c84, 0xfbb0, 0x0, 0x1);
        gbc.writeMem(0x5e72, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x26bc);
        EXPECT(gbc.pc(), 0x5e73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0189
        gbc.setState(0xa242, 0x2d41, 0xefa0, 0xd574, 0x1452, 0xb46c, 0x1, 0x1);
        gbc.writeMem(0xa242, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x2d41);
        EXPECT(gbc.pc(), 0xa243);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa242), 0xf3);
        // F3 018A
        gbc.setState(0xb63b, 0x98b4, 0x4d30, 0x6c09, 0x13e3, 0x60f8, 0x0, 0x1);
        gbc.writeMem(0xb63b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x98b4);
        EXPECT(gbc.pc(), 0xb63c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb63b), 0xf3);
        // F3 018B
        gbc.setState(0x58a3, 0x3fcf, 0xb1a0, 0x16af, 0x69c7, 0xb322, 0x1, 0x1);
        gbc.writeMem(0x58a3, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x3fcf);
        EXPECT(gbc.pc(), 0x58a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 018C
        gbc.setState(0x5dd1, 0x60f7, 0xddd0, 0x25fd, 0xf974, 0x7696, 0x1, 0x1);
        gbc.writeMem(0x5dd1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x60f7);
        EXPECT(gbc.pc(), 0x5dd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 018D
        gbc.setState(0x144f, 0x3d6b, 0x6560, 0xc062, 0x2a3a, 0xd2e9, 0x0, 0x1);
        gbc.writeMem(0x144f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x3d6b);
        EXPECT(gbc.pc(), 0x1450);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 018E
        gbc.setState(0xe970, 0x8ac, 0xc760, 0xec5, 0xc265, 0xd150, 0x1, 0x0);
        gbc.writeMem(0xe970, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x8ac);
        EXPECT(gbc.pc(), 0xe971);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe970), 0xf3);
        // F3 018F
        gbc.setState(0xb000, 0xc663, 0x900, 0xda72, 0x1e8, 0x71eb, 0x1, 0x0);
        gbc.writeMem(0xb000, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xc663);
        EXPECT(gbc.pc(), 0xb001);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb000), 0xf3);
        // F3 0190
        gbc.setState(0x6ab9, 0x668f, 0xf400, 0x6827, 0x2dab, 0x52ef, 0x1, 0x0);
        gbc.writeMem(0x6ab9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x668f);
        EXPECT(gbc.pc(), 0x6aba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0191
        gbc.setState(0x60b7, 0x6aa, 0xe60, 0x726d, 0xe87f, 0xcd12, 0x0, 0x1);
        gbc.writeMem(0x60b7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x6aa);
        EXPECT(gbc.pc(), 0x60b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0192
        gbc.setState(0x9db0, 0x5659, 0x62f0, 0xd6d5, 0x22bf, 0x33bc, 0x1, 0x1);
        gbc.writeMem(0x9db0, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x5659);
        EXPECT(gbc.pc(), 0x9db1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9db0), 0xf3);
        // F3 0193
        gbc.setState(0x5ad6, 0x9328, 0xd260, 0xc4a, 0xff85, 0x141e, 0x0, 0x0);
        gbc.writeMem(0x5ad6, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x9328);
        EXPECT(gbc.pc(), 0x5ad7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0194
        gbc.setState(0xc7b4, 0xdc7a, 0xd060, 0x3deb, 0x556b, 0x97f2, 0x1, 0x0);
        gbc.writeMem(0xc7b4, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xdc7a);
        EXPECT(gbc.pc(), 0xc7b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7b4), 0xf3);
        // F3 0195
        gbc.setState(0xa4ab, 0xfd7e, 0x71b0, 0x3755, 0x4b9c, 0x2e75, 0x0, 0x0);
        gbc.writeMem(0xa4ab, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xfd7e);
        EXPECT(gbc.pc(), 0xa4ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4ab), 0xf3);
        // F3 0196
        gbc.setState(0x7487, 0x84f4, 0x5720, 0x666d, 0x19d4, 0x8153, 0x1, 0x0);
        gbc.writeMem(0x7487, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x84f4);
        EXPECT(gbc.pc(), 0x7488);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0197
        gbc.setState(0xe41a, 0xa633, 0x3420, 0xeb89, 0x9ec0, 0x2e5f, 0x0, 0x1);
        gbc.writeMem(0xe41a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xa633);
        EXPECT(gbc.pc(), 0xe41b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe41a), 0xf3);
        // F3 0198
        gbc.setState(0x9479, 0xbc83, 0x4d20, 0xb0b7, 0x6a1f, 0xf1fd, 0x1, 0x1);
        gbc.writeMem(0x9479, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xbc83);
        EXPECT(gbc.pc(), 0x947a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9479), 0xf3);
        // F3 0199
        gbc.setState(0xa4ea, 0x9ff7, 0x63b0, 0xc09e, 0x46fc, 0xc692, 0x1, 0x0);
        gbc.writeMem(0xa4ea, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x9ff7);
        EXPECT(gbc.pc(), 0xa4eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4ea), 0xf3);
        // F3 019B
        gbc.setState(0x40eb, 0x4ce7, 0x8f40, 0xc2aa, 0xfc6e, 0xc7b9, 0x1, 0x0);
        gbc.writeMem(0x40eb, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x4ce7);
        EXPECT(gbc.pc(), 0x40ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 019C
        gbc.setState(0xd774, 0x1c79, 0xaf30, 0xcc5, 0xb7f9, 0x6400, 0x1, 0x1);
        gbc.writeMem(0xd774, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x1c79);
        EXPECT(gbc.pc(), 0xd775);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd774), 0xf3);
        // F3 019D
        gbc.setState(0xb57f, 0x727c, 0xfc70, 0x6f53, 0x7519, 0xfafb, 0x0, 0x1);
        gbc.writeMem(0xb57f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x727c);
        EXPECT(gbc.pc(), 0xb580);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb57f), 0xf3);
        // F3 019E
        gbc.setState(0xbc5c, 0xae61, 0xfbf0, 0x4d46, 0x3625, 0x7e1d, 0x0, 0x1);
        gbc.writeMem(0xbc5c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xae61);
        EXPECT(gbc.pc(), 0xbc5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc5c), 0xf3);
        // F3 019F
        gbc.setState(0xb1ad, 0xfca4, 0x4030, 0x4b3f, 0xed68, 0xb197, 0x0, 0x0);
        gbc.writeMem(0xb1ad, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xfca4);
        EXPECT(gbc.pc(), 0xb1ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1ad), 0xf3);
        // F3 01A0
        gbc.setState(0x9930, 0xc35e, 0x3f40, 0xc5f9, 0x8e11, 0x6b10, 0x0, 0x1);
        gbc.writeMem(0x9930, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xc35e);
        EXPECT(gbc.pc(), 0x9931);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9930), 0xf3);
        // F3 01A1
        gbc.setState(0x220f, 0x22c9, 0xa2d0, 0x38e2, 0x87b4, 0x92a0, 0x0, 0x1);
        gbc.writeMem(0x220f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x22c9);
        EXPECT(gbc.pc(), 0x2210);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 01A2
        gbc.setState(0x756b, 0x5c4c, 0xc0b0, 0x58c7, 0xa154, 0x4422, 0x1, 0x0);
        gbc.writeMem(0x756b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x5c4c);
        EXPECT(gbc.pc(), 0x756c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 01A3
        gbc.setState(0x98f5, 0x6b54, 0xd810, 0x2997, 0x90fa, 0xe4a7, 0x1, 0x0);
        gbc.writeMem(0x98f5, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x6b54);
        EXPECT(gbc.pc(), 0x98f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98f5), 0xf3);
        // F3 01A4
        gbc.setState(0xe0bb, 0x2328, 0xcfb0, 0x998f, 0xd4a2, 0xfc45, 0x0, 0x1);
        gbc.writeMem(0xe0bb, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x2328);
        EXPECT(gbc.pc(), 0xe0bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0bb), 0xf3);
        // F3 01A5
        gbc.setState(0x8d90, 0xdd38, 0x1770, 0x69d8, 0x7d6c, 0x554e, 0x1, 0x1);
        gbc.writeMem(0x8d90, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xdd38);
        EXPECT(gbc.pc(), 0x8d91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d90), 0xf3);
        // F3 01A7
        gbc.setState(0x2df7, 0xd31a, 0x6370, 0xc88e, 0xa1d, 0x4e4e, 0x1, 0x1);
        gbc.writeMem(0x2df7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xd31a);
        EXPECT(gbc.pc(), 0x2df8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 01A8
        gbc.setState(0xa428, 0x6e3b, 0x3e60, 0xf038, 0xb24, 0x169c, 0x0, 0x1);
        gbc.writeMem(0xa428, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x6e3b);
        EXPECT(gbc.pc(), 0xa429);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa428), 0xf3);
        // F3 01A9
        gbc.setState(0x93ac, 0xee5f, 0x1830, 0x80c0, 0xf2b5, 0xfed0, 0x1, 0x1);
        gbc.writeMem(0x93ac, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xee5f);
        EXPECT(gbc.pc(), 0x93ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93ac), 0xf3);
        // F3 01AA
        gbc.setState(0xeff0, 0x7ebe, 0x66d0, 0x9ea7, 0xb7b8, 0x6101, 0x1, 0x1);
        gbc.writeMem(0xeff0, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x7ebe);
        EXPECT(gbc.pc(), 0xeff1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeff0), 0xf3);
        // F3 01AB
        gbc.setState(0x2d72, 0x9540, 0xb9b0, 0xdbbb, 0x99d4, 0xc4cc, 0x0, 0x0);
        gbc.writeMem(0x2d72, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x9540);
        EXPECT(gbc.pc(), 0x2d73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 01AC
        gbc.setState(0x1ee1, 0x2c2d, 0x0, 0x9a01, 0xd430, 0x7c7c, 0x1, 0x1);
        gbc.writeMem(0x1ee1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x2c2d);
        EXPECT(gbc.pc(), 0x1ee2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 01AD
        gbc.setState(0xabb1, 0x3c6d, 0xbea0, 0x747, 0x6b9a, 0x502c, 0x1, 0x0);
        gbc.writeMem(0xabb1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x3c6d);
        EXPECT(gbc.pc(), 0xabb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabb1), 0xf3);
        // F3 01AE
        gbc.setState(0x9eaf, 0xaf44, 0xe640, 0xfb68, 0xf9bf, 0x4ab8, 0x0, 0x1);
        gbc.writeMem(0x9eaf, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xaf44);
        EXPECT(gbc.pc(), 0x9eb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9eaf), 0xf3);
        // F3 01AF
        gbc.setState(0x301, 0x6a50, 0x50a0, 0x7123, 0xd96a, 0xce61, 0x0, 0x0);
        gbc.writeMem(0x301, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x6a50);
        EXPECT(gbc.pc(), 0x302);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 01B0
        gbc.setState(0x1faf, 0x9b5b, 0x3d70, 0xce40, 0x39f2, 0xee7c, 0x0, 0x0);
        gbc.writeMem(0x1faf, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x9b5b);
        EXPECT(gbc.pc(), 0x1fb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 01B1
        gbc.setState(0xdd7b, 0x1363, 0xb2f0, 0x3e25, 0x52d1, 0xf7d1, 0x0, 0x0);
        gbc.writeMem(0xdd7b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x1363);
        EXPECT(gbc.pc(), 0xdd7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd7b), 0xf3);
        // F3 01B2
        gbc.setState(0x2372, 0x3b3c, 0xe450, 0xf40d, 0x8381, 0xb781, 0x0, 0x0);
        gbc.writeMem(0x2372, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x3b3c);
        EXPECT(gbc.pc(), 0x2373);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 01B3
        gbc.setState(0xead, 0x7423, 0x3190, 0x540c, 0x2660, 0xe8d3, 0x0, 0x1);
        gbc.writeMem(0xead, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x7423);
        EXPECT(gbc.pc(), 0xeae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 01B4
        gbc.setState(0xc947, 0x161, 0xf4d0, 0x4e4f, 0x399, 0x2edf, 0x0, 0x1);
        gbc.writeMem(0xc947, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x161);
        EXPECT(gbc.pc(), 0xc948);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc947), 0xf3);
        // F3 01B5
        gbc.setState(0x7407, 0x1365, 0xca40, 0x768a, 0xec56, 0xdced, 0x0, 0x1);
        gbc.writeMem(0x7407, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x1365);
        EXPECT(gbc.pc(), 0x7408);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 01B6
        gbc.setState(0x1918, 0x9dce, 0xd9e0, 0x750a, 0x8969, 0x9851, 0x1, 0x1);
        gbc.writeMem(0x1918, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x9dce);
        EXPECT(gbc.pc(), 0x1919);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 01B7
        gbc.setState(0x5b54, 0x82d6, 0xc670, 0x6718, 0x9066, 0xca9, 0x1, 0x0);
        gbc.writeMem(0x5b54, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x82d6);
        EXPECT(gbc.pc(), 0x5b55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 01B8
        gbc.setState(0x5ebf, 0x7e57, 0x7e60, 0xd586, 0x2f68, 0xd520, 0x1, 0x1);
        gbc.writeMem(0x5ebf, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x7e57);
        EXPECT(gbc.pc(), 0x5ec0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 01B9
        gbc.setState(0x1b35, 0x4b51, 0xcf40, 0xadf5, 0xa7f8, 0x7023, 0x0, 0x0);
        gbc.writeMem(0x1b35, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x4b51);
        EXPECT(gbc.pc(), 0x1b36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 01BA
        gbc.setState(0xa6b8, 0xc7ed, 0xcfd0, 0x8577, 0xe971, 0x13b5, 0x1, 0x0);
        gbc.writeMem(0xa6b8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xc7ed);
        EXPECT(gbc.pc(), 0xa6b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6b8), 0xf3);
        // F3 01BB
        gbc.setState(0xd036, 0x1655, 0x17e0, 0x6b3a, 0xa2dd, 0xa14a, 0x0, 0x0);
        gbc.writeMem(0xd036, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x1655);
        EXPECT(gbc.pc(), 0xd037);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd036), 0xf3);
        // F3 01BC
        gbc.setState(0x1d66, 0x1c00, 0xa6c0, 0xa371, 0x424d, 0xf54c, 0x1, 0x0);
        gbc.writeMem(0x1d66, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x1c00);
        EXPECT(gbc.pc(), 0x1d67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 01BD
        gbc.setState(0x9a2e, 0x72c0, 0x2830, 0x37f8, 0x2682, 0x4781, 0x1, 0x0);
        gbc.writeMem(0x9a2e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x72c0);
        EXPECT(gbc.pc(), 0x9a2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a2e), 0xf3);
        // F3 01BE
        gbc.setState(0xd184, 0x4de8, 0x6ee0, 0xf0ce, 0x5413, 0xdc89, 0x1, 0x1);
        gbc.writeMem(0xd184, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x4de8);
        EXPECT(gbc.pc(), 0xd185);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd184), 0xf3);
        // F3 01BF
        gbc.setState(0xe1b9, 0xb8ab, 0xe4a0, 0xc770, 0x8d1b, 0x1735, 0x1, 0x1);
        gbc.writeMem(0xe1b9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xb8ab);
        EXPECT(gbc.pc(), 0xe1ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1b9), 0xf3);
        // F3 01C0
        gbc.setState(0x6dea, 0xaccf, 0x2d50, 0x5c76, 0x95c3, 0xe039, 0x0, 0x0);
        gbc.writeMem(0x6dea, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xaccf);
        EXPECT(gbc.pc(), 0x6deb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 01C1
        gbc.setState(0xb4d3, 0x7d78, 0xaa60, 0xa584, 0xd010, 0x1597, 0x1, 0x0);
        gbc.writeMem(0xb4d3, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x7d78);
        EXPECT(gbc.pc(), 0xb4d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4d3), 0xf3);
        // F3 01C2
        gbc.setState(0xe0ae, 0x4422, 0x1220, 0xb1fa, 0x4ce7, 0x7623, 0x1, 0x0);
        gbc.writeMem(0xe0ae, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x4422);
        EXPECT(gbc.pc(), 0xe0af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0ae), 0xf3);
        // F3 01C3
        gbc.setState(0x2f38, 0x5814, 0x19c0, 0x8b29, 0x35e0, 0xbaa3, 0x0, 0x0);
        gbc.writeMem(0x2f38, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x5814);
        EXPECT(gbc.pc(), 0x2f39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 01C4
        gbc.setState(0x566c, 0xe896, 0x1770, 0x490a, 0x4d9f, 0x2971, 0x1, 0x0);
        gbc.writeMem(0x566c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xe896);
        EXPECT(gbc.pc(), 0x566d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 01C5
        gbc.setState(0x9ad, 0x8996, 0x24d0, 0xe117, 0x5c3b, 0x8f88, 0x0, 0x0);
        gbc.writeMem(0x9ad, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x8996);
        EXPECT(gbc.pc(), 0x9ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 01C6
        gbc.setState(0x97fb, 0x8727, 0xb040, 0x45e7, 0x454c, 0x2657, 0x1, 0x0);
        gbc.writeMem(0x97fb, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8727);
        EXPECT(gbc.pc(), 0x97fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97fb), 0xf3);
        // F3 01C7
        gbc.setState(0x6d46, 0x78d9, 0x1470, 0x3b63, 0x99df, 0xac4b, 0x0, 0x0);
        gbc.writeMem(0x6d46, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x78d9);
        EXPECT(gbc.pc(), 0x6d47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 01C8
        gbc.setState(0xabbd, 0x8ee3, 0x2310, 0xa403, 0xecbb, 0xaea4, 0x1, 0x0);
        gbc.writeMem(0xabbd, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x8ee3);
        EXPECT(gbc.pc(), 0xabbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabbd), 0xf3);
        // F3 01C9
        gbc.setState(0xb364, 0x8b0c, 0x5770, 0x80cd, 0xf55b, 0xe347, 0x1, 0x0);
        gbc.writeMem(0xb364, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x8b0c);
        EXPECT(gbc.pc(), 0xb365);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb364), 0xf3);
        // F3 01CA
        gbc.setState(0x1fb7, 0xb75, 0x42d0, 0x2ff6, 0x5408, 0x6596, 0x0, 0x1);
        gbc.writeMem(0x1fb7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xb75);
        EXPECT(gbc.pc(), 0x1fb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 01CB
        gbc.setState(0xdd2b, 0xd23d, 0xe270, 0x7782, 0x936f, 0x3b72, 0x0, 0x1);
        gbc.writeMem(0xdd2b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xd23d);
        EXPECT(gbc.pc(), 0xdd2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd2b), 0xf3);
        // F3 01CC
        gbc.setState(0x317f, 0x2955, 0x21d0, 0x77f7, 0x1c10, 0xeb04, 0x1, 0x0);
        gbc.writeMem(0x317f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x2955);
        EXPECT(gbc.pc(), 0x3180);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 01CD
        gbc.setState(0x7cc3, 0xcc04, 0x73d0, 0xe87b, 0xcd3d, 0x48a5, 0x1, 0x1);
        gbc.writeMem(0x7cc3, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xcc04);
        EXPECT(gbc.pc(), 0x7cc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 01CE
        gbc.setState(0x7b96, 0x83a7, 0xc300, 0x1aa2, 0x584e, 0xb92, 0x0, 0x1);
        gbc.writeMem(0x7b96, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x83a7);
        EXPECT(gbc.pc(), 0x7b97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 01CF
        gbc.setState(0x2d8a, 0x3885, 0x2040, 0x1053, 0x42f9, 0xdb0b, 0x0, 0x0);
        gbc.writeMem(0x2d8a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x3885);
        EXPECT(gbc.pc(), 0x2d8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 01D0
        gbc.setState(0x222, 0xbcd1, 0x3fa0, 0xd33a, 0x34f2, 0x9530, 0x1, 0x1);
        gbc.writeMem(0x222, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xbcd1);
        EXPECT(gbc.pc(), 0x223);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 01D1
        gbc.setState(0xe5ae, 0xe507, 0xf850, 0xcdca, 0x1677, 0x38a, 0x0, 0x0);
        gbc.writeMem(0xe5ae, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xe507);
        EXPECT(gbc.pc(), 0xe5af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5ae), 0xf3);
        // F3 01D2
        gbc.setState(0x8133, 0x10d5, 0xb900, 0xe344, 0x98a3, 0x706, 0x1, 0x1);
        gbc.writeMem(0x8133, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x10d5);
        EXPECT(gbc.pc(), 0x8134);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8133), 0xf3);
        // F3 01D3
        gbc.setState(0x9ac3, 0xa16, 0xee20, 0xfeb4, 0x946a, 0xc08c, 0x0, 0x0);
        gbc.writeMem(0x9ac3, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xa16);
        EXPECT(gbc.pc(), 0x9ac4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ac3), 0xf3);
        // F3 01D4
        gbc.setState(0xa319, 0xcb80, 0x7550, 0x6e0a, 0xa67, 0xa915, 0x1, 0x1);
        gbc.writeMem(0xa319, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xcb80);
        EXPECT(gbc.pc(), 0xa31a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa319), 0xf3);
        // F3 01D5
        gbc.setState(0xb6b2, 0xaea1, 0xacb0, 0xbdc4, 0x6348, 0x59c4, 0x0, 0x1);
        gbc.writeMem(0xb6b2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xaea1);
        EXPECT(gbc.pc(), 0xb6b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6b2), 0xf3);
        // F3 01D6
        gbc.setState(0x3cd7, 0xd1dd, 0x150, 0xb0e3, 0xf775, 0x3c98, 0x1, 0x1);
        gbc.writeMem(0x3cd7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xd1dd);
        EXPECT(gbc.pc(), 0x3cd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 01D7
        gbc.setState(0x75c5, 0x5f92, 0xb0b0, 0xe62d, 0x541f, 0x13c, 0x1, 0x1);
        gbc.writeMem(0x75c5, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x5f92);
        EXPECT(gbc.pc(), 0x75c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 01D8
        gbc.setState(0x6ada, 0x930b, 0xf8b0, 0x981b, 0xfa4e, 0x4e14, 0x1, 0x0);
        gbc.writeMem(0x6ada, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x930b);
        EXPECT(gbc.pc(), 0x6adb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 01D9
        gbc.setState(0xcb50, 0xbf6a, 0x920, 0xae13, 0x1e3b, 0x8ca5, 0x1, 0x1);
        gbc.writeMem(0xcb50, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xbf6a);
        EXPECT(gbc.pc(), 0xcb51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb50), 0xf3);
        // F3 01DA
        gbc.setState(0x6dd1, 0x1837, 0x5740, 0xa967, 0x870b, 0xa1cb, 0x1, 0x1);
        gbc.writeMem(0x6dd1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1837);
        EXPECT(gbc.pc(), 0x6dd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 01DB
        gbc.setState(0x5c21, 0xcee4, 0xc2b0, 0xc237, 0x8dfe, 0xeb15, 0x1, 0x1);
        gbc.writeMem(0x5c21, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xcee4);
        EXPECT(gbc.pc(), 0x5c22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 01DC
        gbc.setState(0x1983, 0x23bf, 0xdb90, 0x6e10, 0x7587, 0xf477, 0x1, 0x0);
        gbc.writeMem(0x1983, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x23bf);
        EXPECT(gbc.pc(), 0x1984);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 01DD
        gbc.setState(0xc73d, 0x56cc, 0x9990, 0xe048, 0xcd5d, 0xbc0, 0x1, 0x1);
        gbc.writeMem(0xc73d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x56cc);
        EXPECT(gbc.pc(), 0xc73e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc73d), 0xf3);
        // F3 01DF
        gbc.setState(0x3fcb, 0x3400, 0xbf00, 0xb6f0, 0x9833, 0xd971, 0x1, 0x1);
        gbc.writeMem(0x3fcb, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x3400);
        EXPECT(gbc.pc(), 0x3fcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 01E1
        gbc.setState(0x5893, 0xbd6c, 0xd5d0, 0xe33f, 0x73a0, 0x43b0, 0x1, 0x1);
        gbc.writeMem(0x5893, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xbd6c);
        EXPECT(gbc.pc(), 0x5894);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 01E2
        gbc.setState(0x1ec7, 0x2a04, 0xba30, 0x28b1, 0xa3b1, 0x7c89, 0x1, 0x1);
        gbc.writeMem(0x1ec7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x2a04);
        EXPECT(gbc.pc(), 0x1ec8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 01E3
        gbc.setState(0x84fa, 0x7689, 0x7490, 0xb877, 0xa598, 0x1073, 0x0, 0x1);
        gbc.writeMem(0x84fa, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x7689);
        EXPECT(gbc.pc(), 0x84fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84fa), 0xf3);
        // F3 01E4
        gbc.setState(0x693b, 0x6d68, 0x37d0, 0x1ae5, 0x72b5, 0xe5b8, 0x1, 0x0);
        gbc.writeMem(0x693b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x6d68);
        EXPECT(gbc.pc(), 0x693c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 01E5
        gbc.setState(0x5792, 0xfa93, 0xc1d0, 0xb24f, 0xdff7, 0xdb1, 0x0, 0x0);
        gbc.writeMem(0x5792, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xfa93);
        EXPECT(gbc.pc(), 0x5793);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 01E6
        gbc.setState(0xceaa, 0xad69, 0x83b0, 0x2db8, 0xa124, 0x24c, 0x1, 0x1);
        gbc.writeMem(0xceaa, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xad69);
        EXPECT(gbc.pc(), 0xceab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xceaa), 0xf3);
        // F3 01E7
        gbc.setState(0xd00a, 0xfd5e, 0x50, 0x26bf, 0x2d0, 0x9ad3, 0x1, 0x0);
        gbc.writeMem(0xd00a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xfd5e);
        EXPECT(gbc.pc(), 0xd00b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd00a), 0xf3);
        // F3 01E8
        gbc.setState(0xdbf9, 0x24a1, 0x23e0, 0x1174, 0x166, 0x6726, 0x0, 0x1);
        gbc.writeMem(0xdbf9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x24a1);
        EXPECT(gbc.pc(), 0xdbfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbf9), 0xf3);
        // F3 01EA
        gbc.setState(0xe262, 0xa5b6, 0xf320, 0xf22f, 0xd88a, 0x7265, 0x1, 0x0);
        gbc.writeMem(0xe262, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xa5b6);
        EXPECT(gbc.pc(), 0xe263);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe262), 0xf3);
        // F3 01EB
        gbc.setState(0x2ff, 0x2576, 0x5460, 0x2f75, 0xa122, 0xcec8, 0x1, 0x1);
        gbc.writeMem(0x2ff, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x2576);
        EXPECT(gbc.pc(), 0x300);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 01EC
        gbc.setState(0xc47b, 0xaed6, 0x80c0, 0x6efc, 0x27e8, 0x2a04, 0x1, 0x0);
        gbc.writeMem(0xc47b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xaed6);
        EXPECT(gbc.pc(), 0xc47c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc47b), 0xf3);
        // F3 01ED
        gbc.setState(0x7606, 0x1d18, 0xeb80, 0xe4c3, 0xa146, 0x209e, 0x0, 0x0);
        gbc.writeMem(0x7606, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x1d18);
        EXPECT(gbc.pc(), 0x7607);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 01EE
        gbc.setState(0x116e, 0xde52, 0xb580, 0x73c7, 0x3c3f, 0xb76, 0x0, 0x1);
        gbc.writeMem(0x116e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xde52);
        EXPECT(gbc.pc(), 0x116f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 01EF
        gbc.setState(0xed96, 0x1080, 0xbdf0, 0xfb2c, 0x5d11, 0x23ba, 0x1, 0x1);
        gbc.writeMem(0xed96, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x1080);
        EXPECT(gbc.pc(), 0xed97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed96), 0xf3);
        // F3 01F0
        gbc.setState(0xd3b2, 0x15d2, 0xd7e0, 0x45a2, 0xd59d, 0xe559, 0x0, 0x0);
        gbc.writeMem(0xd3b2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x15d2);
        EXPECT(gbc.pc(), 0xd3b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3b2), 0xf3);
        // F3 01F1
        gbc.setState(0xea81, 0x24f6, 0x8120, 0xc959, 0x4f16, 0xaff9, 0x1, 0x1);
        gbc.writeMem(0xea81, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x24f6);
        EXPECT(gbc.pc(), 0xea82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea81), 0xf3);
        // F3 01F2
        gbc.setState(0xbb96, 0x6144, 0xa230, 0xe7c5, 0x41c1, 0x9bd7, 0x0, 0x0);
        gbc.writeMem(0xbb96, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x6144);
        EXPECT(gbc.pc(), 0xbb97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb96), 0xf3);
        // F3 01F3
        gbc.setState(0xbdf5, 0xf552, 0x49f0, 0x48f7, 0x6908, 0xcf62, 0x0, 0x1);
        gbc.writeMem(0xbdf5, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xf552);
        EXPECT(gbc.pc(), 0xbdf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdf5), 0xf3);
        // F3 01F4
        gbc.setState(0x93c, 0x652d, 0x38f0, 0xcc0c, 0x903, 0xdf04, 0x0, 0x0);
        gbc.writeMem(0x93c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x652d);
        EXPECT(gbc.pc(), 0x93d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 01F5
        gbc.setState(0xe1e9, 0x5516, 0x49c0, 0x635c, 0xfea0, 0x48a7, 0x1, 0x1);
        gbc.writeMem(0xe1e9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x5516);
        EXPECT(gbc.pc(), 0xe1ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1e9), 0xf3);
        // F3 01F6
        gbc.setState(0x196c, 0x3733, 0xef90, 0x700e, 0x3af5, 0xa222, 0x1, 0x0);
        gbc.writeMem(0x196c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x3733);
        EXPECT(gbc.pc(), 0x196d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 01F7
        gbc.setState(0x650b, 0xe713, 0xe530, 0xa133, 0x754, 0x6a3d, 0x0, 0x1);
        gbc.writeMem(0x650b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xe713);
        EXPECT(gbc.pc(), 0x650c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 01F8
        gbc.setState(0x2458, 0x4cf4, 0x76e0, 0x6ffd, 0x7df3, 0xc7b4, 0x0, 0x1);
        gbc.writeMem(0x2458, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x4cf4);
        EXPECT(gbc.pc(), 0x2459);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 01F9
        gbc.setState(0x8001, 0xf4ef, 0x84d0, 0x1275, 0x56e3, 0xc875, 0x0, 0x1);
        gbc.writeMem(0x8001, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xf4ef);
        EXPECT(gbc.pc(), 0x8002);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8001), 0xf3);
        // F3 01FA
        gbc.setState(0x41e5, 0x9830, 0xb200, 0x1830, 0xb80e, 0xffdb, 0x1, 0x0);
        gbc.writeMem(0x41e5, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x9830);
        EXPECT(gbc.pc(), 0x41e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 01FB
        gbc.setState(0x5193, 0x395, 0xfdd0, 0x807f, 0xc2f0, 0xe85c, 0x1, 0x1);
        gbc.writeMem(0x5193, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x395);
        EXPECT(gbc.pc(), 0x5194);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 01FC
        gbc.setState(0xb433, 0xf7d3, 0x3020, 0xeba5, 0xebe9, 0x8825, 0x0, 0x0);
        gbc.writeMem(0xb433, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xf7d3);
        EXPECT(gbc.pc(), 0xb434);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb433), 0xf3);
        // F3 01FD
        gbc.setState(0xbb0f, 0xde56, 0x96b0, 0x84f2, 0xac83, 0x57df, 0x1, 0x1);
        gbc.writeMem(0xbb0f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xde56);
        EXPECT(gbc.pc(), 0xbb10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb0f), 0xf3);
        // F3 01FE
        gbc.setState(0x9912, 0x244, 0xa8f0, 0x51f6, 0x7c70, 0xad9a, 0x1, 0x1);
        gbc.writeMem(0x9912, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x244);
        EXPECT(gbc.pc(), 0x9913);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9912), 0xf3);
        // F3 01FF
        gbc.setState(0xeeae, 0x2fe3, 0xc830, 0xaab7, 0xed39, 0xd7eb, 0x0, 0x0);
        gbc.writeMem(0xeeae, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2fe3);
        EXPECT(gbc.pc(), 0xeeaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeeae), 0xf3);
        // F3 0200
        gbc.setState(0xd23a, 0x4e49, 0x9ba0, 0xa3ce, 0xa709, 0xe5c0, 0x1, 0x0);
        gbc.writeMem(0xd23a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x4e49);
        EXPECT(gbc.pc(), 0xd23b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd23a), 0xf3);
        // F3 0201
        gbc.setState(0x5ada, 0x4da9, 0x7160, 0x15f, 0x2947, 0x4e43, 0x0, 0x0);
        gbc.writeMem(0x5ada, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x4da9);
        EXPECT(gbc.pc(), 0x5adb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0202
        gbc.setState(0xbf3a, 0xeebd, 0xa090, 0x48e0, 0xbfa9, 0xdec, 0x1, 0x1);
        gbc.writeMem(0xbf3a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xeebd);
        EXPECT(gbc.pc(), 0xbf3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf3a), 0xf3);
        // F3 0203
        gbc.setState(0x8e34, 0x3046, 0xe850, 0x5476, 0xff0e, 0xdc47, 0x1, 0x0);
        gbc.writeMem(0x8e34, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x3046);
        EXPECT(gbc.pc(), 0x8e35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e34), 0xf3);
        // F3 0204
        gbc.setState(0x978d, 0xc5b3, 0x4120, 0x27a8, 0xbdea, 0x14b9, 0x1, 0x0);
        gbc.writeMem(0x978d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xc5b3);
        EXPECT(gbc.pc(), 0x978e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x978d), 0xf3);
        // F3 0205
        gbc.setState(0x8f3b, 0xfd3d, 0x670, 0x22db, 0x1252, 0x3055, 0x0, 0x0);
        gbc.writeMem(0x8f3b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xfd3d);
        EXPECT(gbc.pc(), 0x8f3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f3b), 0xf3);
        // F3 0206
        gbc.setState(0x9105, 0x7433, 0xca50, 0xe6be, 0x605a, 0x23d3, 0x1, 0x1);
        gbc.writeMem(0x9105, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x7433);
        EXPECT(gbc.pc(), 0x9106);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9105), 0xf3);
        // F3 0207
        gbc.setState(0xed70, 0xbf91, 0x3670, 0x905d, 0x9ef8, 0xed2d, 0x1, 0x1);
        gbc.writeMem(0xed70, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xbf91);
        EXPECT(gbc.pc(), 0xed71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed70), 0xf3);
        // F3 0208
        gbc.setState(0xbe7, 0x4774, 0x9a50, 0x4916, 0x8472, 0xf350, 0x1, 0x0);
        gbc.writeMem(0xbe7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x4774);
        EXPECT(gbc.pc(), 0xbe8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0209
        gbc.setState(0xc290, 0x8071, 0x9c20, 0x52ab, 0x82ae, 0x7473, 0x1, 0x1);
        gbc.writeMem(0xc290, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x8071);
        EXPECT(gbc.pc(), 0xc291);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc290), 0xf3);
        // F3 020A
        gbc.setState(0x400d, 0xef4a, 0xde0, 0xc637, 0x977d, 0x872f, 0x0, 0x1);
        gbc.writeMem(0x400d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xef4a);
        EXPECT(gbc.pc(), 0x400e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 020B
        gbc.setState(0x18c1, 0x4341, 0x8500, 0xef5d, 0xe2f4, 0xbc04, 0x0, 0x0);
        gbc.writeMem(0x18c1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x4341);
        EXPECT(gbc.pc(), 0x18c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 020C
        gbc.setState(0x284d, 0xeafd, 0x72f0, 0x3253, 0xa5cf, 0x1c96, 0x0, 0x0);
        gbc.writeMem(0x284d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xeafd);
        EXPECT(gbc.pc(), 0x284e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 020D
        gbc.setState(0x32ea, 0x161e, 0x7830, 0x5ce3, 0x40f2, 0x864c, 0x0, 0x1);
        gbc.writeMem(0x32ea, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x161e);
        EXPECT(gbc.pc(), 0x32eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 020E
        gbc.setState(0xdfca, 0xf971, 0xdab0, 0x4826, 0xb920, 0x5443, 0x0, 0x1);
        gbc.writeMem(0xdfca, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xf971);
        EXPECT(gbc.pc(), 0xdfcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfca), 0xf3);
        // F3 020F
        gbc.setState(0x844b, 0x9fa8, 0xe50, 0xe3be, 0xfd48, 0xef25, 0x0, 0x1);
        gbc.writeMem(0x844b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x9fa8);
        EXPECT(gbc.pc(), 0x844c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x844b), 0xf3);
        // F3 0210
        gbc.setState(0x2302, 0x2f05, 0xf0a0, 0xfb6, 0x98ed, 0x5196, 0x0, 0x1);
        gbc.writeMem(0x2302, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2f05);
        EXPECT(gbc.pc(), 0x2303);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0211
        gbc.setState(0x4216, 0xd0d4, 0x4320, 0xaca8, 0x71a2, 0x7676, 0x1, 0x1);
        gbc.writeMem(0x4216, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xd0d4);
        EXPECT(gbc.pc(), 0x4217);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0212
        gbc.setState(0x997b, 0xca5f, 0x6b90, 0x7eb7, 0x3bb4, 0x6f72, 0x0, 0x0);
        gbc.writeMem(0x997b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xca5f);
        EXPECT(gbc.pc(), 0x997c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x997b), 0xf3);
        // F3 0213
        gbc.setState(0x5dfa, 0x5ae6, 0x6330, 0x2f58, 0xb65e, 0x4272, 0x1, 0x1);
        gbc.writeMem(0x5dfa, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x5ae6);
        EXPECT(gbc.pc(), 0x5dfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0214
        gbc.setState(0xe3f, 0xea18, 0x5ca0, 0x1a0a, 0x7402, 0x8038, 0x1, 0x0);
        gbc.writeMem(0xe3f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xea18);
        EXPECT(gbc.pc(), 0xe40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0215
        gbc.setState(0x74, 0xf443, 0xd720, 0xe46c, 0x4bc5, 0xca46, 0x1, 0x0);
        gbc.writeMem(0x74, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xf443);
        EXPECT(gbc.pc(), 0x75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0216
        gbc.setState(0xcb2, 0xf50c, 0xc400, 0xb902, 0x5c40, 0xcd36, 0x0, 0x0);
        gbc.writeMem(0xcb2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xf50c);
        EXPECT(gbc.pc(), 0xcb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0217
        gbc.setState(0x84be, 0xdc5b, 0x21e0, 0xfd3e, 0xe754, 0xf29d, 0x1, 0x0);
        gbc.writeMem(0x84be, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xdc5b);
        EXPECT(gbc.pc(), 0x84bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84be), 0xf3);
        // F3 0218
        gbc.setState(0x2132, 0x8293, 0x5cb0, 0x259b, 0xd768, 0x9862, 0x1, 0x0);
        gbc.writeMem(0x2132, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x8293);
        EXPECT(gbc.pc(), 0x2133);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0219
        gbc.setState(0x404, 0x9886, 0x85d0, 0x6ad3, 0x6e0f, 0x32d0, 0x0, 0x1);
        gbc.writeMem(0x404, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x9886);
        EXPECT(gbc.pc(), 0x405);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 021A
        gbc.setState(0xefd0, 0xb65c, 0xad00, 0x36f, 0xe8e0, 0x6c8d, 0x0, 0x0);
        gbc.writeMem(0xefd0, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xb65c);
        EXPECT(gbc.pc(), 0xefd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefd0), 0xf3);
        // F3 021B
        gbc.setState(0x4d4b, 0x49f5, 0xdc10, 0x351f, 0x65b5, 0x28d1, 0x0, 0x1);
        gbc.writeMem(0x4d4b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x49f5);
        EXPECT(gbc.pc(), 0x4d4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 021C
        gbc.setState(0x7227, 0x46b3, 0xdf20, 0xd6f5, 0x9523, 0xe427, 0x1, 0x1);
        gbc.writeMem(0x7227, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x46b3);
        EXPECT(gbc.pc(), 0x7228);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 021D
        gbc.setState(0xd20, 0x18d6, 0xeda0, 0x6f7f, 0xf6dc, 0x4c17, 0x0, 0x1);
        gbc.writeMem(0xd20, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x18d6);
        EXPECT(gbc.pc(), 0xd21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 021E
        gbc.setState(0x3648, 0x89e8, 0xc980, 0x132, 0x79a9, 0x86cf, 0x1, 0x1);
        gbc.writeMem(0x3648, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x89e8);
        EXPECT(gbc.pc(), 0x3649);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 021F
        gbc.setState(0x493f, 0xf48f, 0x5880, 0x7cd5, 0x7e40, 0xddd8, 0x1, 0x0);
        gbc.writeMem(0x493f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xf48f);
        EXPECT(gbc.pc(), 0x4940);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0220
        gbc.setState(0x55e9, 0xcd28, 0xa860, 0xaeb2, 0x9284, 0x5d6, 0x0, 0x1);
        gbc.writeMem(0x55e9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xcd28);
        EXPECT(gbc.pc(), 0x55ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0221
        gbc.setState(0x10a6, 0xfb4e, 0xb1a0, 0x4092, 0x7af, 0xaaaa, 0x1, 0x1);
        gbc.writeMem(0x10a6, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xfb4e);
        EXPECT(gbc.pc(), 0x10a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0222
        gbc.setState(0xbe95, 0x796f, 0x7520, 0x80c4, 0x650a, 0x9d1c, 0x1, 0x0);
        gbc.writeMem(0xbe95, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x796f);
        EXPECT(gbc.pc(), 0xbe96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe95), 0xf3);
        // F3 0223
        gbc.setState(0x540d, 0xd9b6, 0x2b20, 0x79f6, 0xaaf9, 0x7cd7, 0x0, 0x0);
        gbc.writeMem(0x540d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xd9b6);
        EXPECT(gbc.pc(), 0x540e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0225
        gbc.setState(0x43ea, 0x7af1, 0xd110, 0x8189, 0x9b0b, 0xc269, 0x0, 0x0);
        gbc.writeMem(0x43ea, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x7af1);
        EXPECT(gbc.pc(), 0x43eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0226
        gbc.setState(0x1f6c, 0x2b2e, 0x3e10, 0x615a, 0x87fc, 0xd38b, 0x1, 0x1);
        gbc.writeMem(0x1f6c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x2b2e);
        EXPECT(gbc.pc(), 0x1f6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0227
        gbc.setState(0x5e9, 0x1d28, 0xa2b0, 0x6d79, 0xa9dd, 0x17fe, 0x1, 0x0);
        gbc.writeMem(0x5e9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x1d28);
        EXPECT(gbc.pc(), 0x5ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0228
        gbc.setState(0xcf4f, 0x32f2, 0x1b70, 0xa4b4, 0xecb9, 0xfb0b, 0x1, 0x1);
        gbc.writeMem(0xcf4f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x32f2);
        EXPECT(gbc.pc(), 0xcf50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf4f), 0xf3);
        // F3 0229
        gbc.setState(0x3637, 0x8b5f, 0xe2e0, 0x8dd5, 0xcabc, 0x2867, 0x1, 0x1);
        gbc.writeMem(0x3637, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x8b5f);
        EXPECT(gbc.pc(), 0x3638);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 022A
        gbc.setState(0xc81b, 0x2e3e, 0xad20, 0xf0f, 0xda9, 0x842c, 0x1, 0x0);
        gbc.writeMem(0xc81b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x2e3e);
        EXPECT(gbc.pc(), 0xc81c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc81b), 0xf3);
        // F3 022B
        gbc.setState(0x660c, 0xd3e5, 0x8090, 0xa50d, 0x3750, 0x95b8, 0x0, 0x1);
        gbc.writeMem(0x660c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xd3e5);
        EXPECT(gbc.pc(), 0x660d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 022C
        gbc.setState(0x1c37, 0xc051, 0xe630, 0xe362, 0x4590, 0xdada, 0x1, 0x1);
        gbc.writeMem(0x1c37, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc051);
        EXPECT(gbc.pc(), 0x1c38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 022D
        gbc.setState(0x30de, 0x4f84, 0x2170, 0xfb33, 0x41d9, 0xab76, 0x0, 0x1);
        gbc.writeMem(0x30de, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x4f84);
        EXPECT(gbc.pc(), 0x30df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 022E
        gbc.setState(0x3810, 0xa9ba, 0xdee0, 0xfa9e, 0x8e98, 0xdc54, 0x1, 0x1);
        gbc.writeMem(0x3810, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xa9ba);
        EXPECT(gbc.pc(), 0x3811);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 022F
        gbc.setState(0x6aae, 0xc80f, 0x5e40, 0x8361, 0xe2fd, 0x3cb5, 0x1, 0x1);
        gbc.writeMem(0x6aae, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xc80f);
        EXPECT(gbc.pc(), 0x6aaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0230
        gbc.setState(0xeccf, 0xd22e, 0x3ec0, 0x99b0, 0x1dde, 0xb276, 0x0, 0x0);
        gbc.writeMem(0xeccf, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xd22e);
        EXPECT(gbc.pc(), 0xecd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeccf), 0xf3);
        // F3 0231
        gbc.setState(0xe315, 0xbb93, 0xcd30, 0xff18, 0x495, 0xa64d, 0x0, 0x0);
        gbc.writeMem(0xe315, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xbb93);
        EXPECT(gbc.pc(), 0xe316);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe315), 0xf3);
        // F3 0233
        gbc.setState(0xc080, 0xc27b, 0xbdf0, 0x5815, 0x435, 0x1948, 0x1, 0x1);
        gbc.writeMem(0xc080, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xc27b);
        EXPECT(gbc.pc(), 0xc081);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc080), 0xf3);
        // F3 0234
        gbc.setState(0xc725, 0xcc19, 0xb580, 0x9d8b, 0x11f, 0xc679, 0x0, 0x1);
        gbc.writeMem(0xc725, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xcc19);
        EXPECT(gbc.pc(), 0xc726);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc725), 0xf3);
        // F3 0235
        gbc.setState(0x9941, 0xf3af, 0xc770, 0x5f2, 0xd4b1, 0xf5e5, 0x0, 0x0);
        gbc.writeMem(0x9941, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xf3af);
        EXPECT(gbc.pc(), 0x9942);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9941), 0xf3);
        // F3 0236
        gbc.setState(0x62bf, 0x68ea, 0x5770, 0x8b82, 0x9016, 0xf739, 0x0, 0x0);
        gbc.writeMem(0x62bf, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x68ea);
        EXPECT(gbc.pc(), 0x62c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0237
        gbc.setState(0xc290, 0x10a2, 0x7be0, 0xd834, 0xe692, 0x96b5, 0x1, 0x1);
        gbc.writeMem(0xc290, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x10a2);
        EXPECT(gbc.pc(), 0xc291);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc290), 0xf3);
        // F3 0238
        gbc.setState(0xe67f, 0x6f26, 0xfbf0, 0xbde5, 0xf993, 0x3fc9, 0x0, 0x1);
        gbc.writeMem(0xe67f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x6f26);
        EXPECT(gbc.pc(), 0xe680);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe67f), 0xf3);
        // F3 0239
        gbc.setState(0x18d8, 0x5209, 0xb3e0, 0xeab2, 0xda35, 0x5b2e, 0x0, 0x1);
        gbc.writeMem(0x18d8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x5209);
        EXPECT(gbc.pc(), 0x18d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 023A
        gbc.setState(0x685a, 0x6a2c, 0x700, 0x68d4, 0xaf6d, 0x294f, 0x1, 0x1);
        gbc.writeMem(0x685a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x6a2c);
        EXPECT(gbc.pc(), 0x685b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 023B
        gbc.setState(0x4f7d, 0xde89, 0xc4b0, 0xe61a, 0x7e77, 0x44b8, 0x1, 0x0);
        gbc.writeMem(0x4f7d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xde89);
        EXPECT(gbc.pc(), 0x4f7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 023C
        gbc.setState(0x5450, 0x169f, 0xd5f0, 0x48cf, 0xb53, 0xeedd, 0x1, 0x1);
        gbc.writeMem(0x5450, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x169f);
        EXPECT(gbc.pc(), 0x5451);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 023D
        gbc.setState(0x5153, 0x69a8, 0x4d80, 0x341c, 0xff92, 0xfd25, 0x1, 0x0);
        gbc.writeMem(0x5153, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x69a8);
        EXPECT(gbc.pc(), 0x5154);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 023F
        gbc.setState(0xa2de, 0x136d, 0x9400, 0xdfe8, 0x17ce, 0x71a9, 0x0, 0x0);
        gbc.writeMem(0xa2de, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x136d);
        EXPECT(gbc.pc(), 0xa2df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2de), 0xf3);
        // F3 0240
        gbc.setState(0xe41a, 0x7c38, 0x1520, 0x2ec1, 0xd0c8, 0x1855, 0x1, 0x1);
        gbc.writeMem(0xe41a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x7c38);
        EXPECT(gbc.pc(), 0xe41b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe41a), 0xf3);
        // F3 0242
        gbc.setState(0x99a8, 0x6436, 0xc110, 0x702, 0x35cc, 0xf9c1, 0x0, 0x0);
        gbc.writeMem(0x99a8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x6436);
        EXPECT(gbc.pc(), 0x99a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99a8), 0xf3);
        // F3 0243
        gbc.setState(0x1191, 0x3a44, 0x2610, 0xf1a8, 0x2932, 0xbe78, 0x1, 0x0);
        gbc.writeMem(0x1191, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x3a44);
        EXPECT(gbc.pc(), 0x1192);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0244
        gbc.setState(0x27eb, 0x90f6, 0x1d60, 0x8402, 0x9abb, 0x75f8, 0x1, 0x1);
        gbc.writeMem(0x27eb, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x90f6);
        EXPECT(gbc.pc(), 0x27ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0245
        gbc.setState(0x40db, 0x4264, 0x220, 0xb105, 0x91a8, 0x5f50, 0x0, 0x1);
        gbc.writeMem(0x40db, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x4264);
        EXPECT(gbc.pc(), 0x40dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0246
        gbc.setState(0x95fc, 0xa8cb, 0xe360, 0xb3d5, 0x9264, 0x6feb, 0x1, 0x0);
        gbc.writeMem(0x95fc, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xa8cb);
        EXPECT(gbc.pc(), 0x95fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95fc), 0xf3);
        // F3 0247
        gbc.setState(0xad60, 0xd973, 0xc9e0, 0x170, 0x18c6, 0xc115, 0x0, 0x0);
        gbc.writeMem(0xad60, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xd973);
        EXPECT(gbc.pc(), 0xad61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad60), 0xf3);
        // F3 0248
        gbc.setState(0xd50, 0x2884, 0x7250, 0xd46d, 0x2a5d, 0x8531, 0x1, 0x1);
        gbc.writeMem(0xd50, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x2884);
        EXPECT(gbc.pc(), 0xd51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0249
        gbc.setState(0x1f8d, 0x7a7, 0xecc0, 0x15cf, 0x23bd, 0x9179, 0x1, 0x1);
        gbc.writeMem(0x1f8d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x7a7);
        EXPECT(gbc.pc(), 0x1f8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 024A
        gbc.setState(0xb85f, 0x2f5e, 0xe3d0, 0x5014, 0x4a29, 0xafbf, 0x1, 0x1);
        gbc.writeMem(0xb85f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x2f5e);
        EXPECT(gbc.pc(), 0xb860);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb85f), 0xf3);
        // F3 024B
        gbc.setState(0xd6c4, 0x9e4e, 0x1dc0, 0x7680, 0xa0a7, 0x83dc, 0x1, 0x0);
        gbc.writeMem(0xd6c4, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x9e4e);
        EXPECT(gbc.pc(), 0xd6c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6c4), 0xf3);
        // F3 024C
        gbc.setState(0x39ee, 0x4b57, 0xa900, 0xe5d4, 0xd55c, 0x5ecf, 0x1, 0x1);
        gbc.writeMem(0x39ee, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x4b57);
        EXPECT(gbc.pc(), 0x39ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 024D
        gbc.setState(0xe60, 0xf6d7, 0xb100, 0x3cb, 0xa976, 0xcd94, 0x1, 0x1);
        gbc.writeMem(0xe60, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xf6d7);
        EXPECT(gbc.pc(), 0xe61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 024E
        gbc.setState(0x8197, 0x21f9, 0xa860, 0xbdde, 0x6209, 0xd9eb, 0x1, 0x1);
        gbc.writeMem(0x8197, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x21f9);
        EXPECT(gbc.pc(), 0x8198);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8197), 0xf3);
        // F3 024F
        gbc.setState(0x5f3b, 0x7a2b, 0xabd0, 0xadc7, 0x9cc1, 0x893f, 0x0, 0x0);
        gbc.writeMem(0x5f3b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x7a2b);
        EXPECT(gbc.pc(), 0x5f3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0250
        gbc.setState(0x1f70, 0x9101, 0xcce0, 0xc005, 0x1f08, 0x3c7f, 0x0, 0x1);
        gbc.writeMem(0x1f70, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x9101);
        EXPECT(gbc.pc(), 0x1f71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0251
        gbc.setState(0x747a, 0x7dda, 0xc260, 0x3c26, 0x3dbf, 0xf916, 0x0, 0x1);
        gbc.writeMem(0x747a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x7dda);
        EXPECT(gbc.pc(), 0x747b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0252
        gbc.setState(0x702, 0x1076, 0x57b0, 0xff19, 0x5f40, 0xccf8, 0x0, 0x0);
        gbc.writeMem(0x702, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x1076);
        EXPECT(gbc.pc(), 0x703);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0253
        gbc.setState(0xea3, 0x4ab6, 0x8330, 0xbcc8, 0x7796, 0x443e, 0x1, 0x1);
        gbc.writeMem(0xea3, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x4ab6);
        EXPECT(gbc.pc(), 0xea4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0254
        gbc.setState(0xbe85, 0x890d, 0xfff0, 0x922a, 0xeba2, 0xdf89, 0x1, 0x0);
        gbc.writeMem(0xbe85, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x890d);
        EXPECT(gbc.pc(), 0xbe86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe85), 0xf3);
        // F3 0255
        gbc.setState(0x8bff, 0x39af, 0x2c90, 0x7b7a, 0xb1b6, 0xd5a5, 0x0, 0x1);
        gbc.writeMem(0x8bff, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x39af);
        EXPECT(gbc.pc(), 0x8c00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bff), 0xf3);
        // F3 0256
        gbc.setState(0xe7f7, 0xdd13, 0xd7d0, 0x1cc1, 0x6849, 0xab0d, 0x0, 0x0);
        gbc.writeMem(0xe7f7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xdd13);
        EXPECT(gbc.pc(), 0xe7f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7f7), 0xf3);
        // F3 0257
        gbc.setState(0x975d, 0x3d89, 0x99e0, 0xf718, 0xa6e1, 0x2f81, 0x1, 0x1);
        gbc.writeMem(0x975d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x3d89);
        EXPECT(gbc.pc(), 0x975e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x975d), 0xf3);
        // F3 0258
        gbc.setState(0xee51, 0x56e9, 0x7890, 0x2dd6, 0x2bb4, 0xccda, 0x1, 0x0);
        gbc.writeMem(0xee51, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x56e9);
        EXPECT(gbc.pc(), 0xee52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee51), 0xf3);
        // F3 0259
        gbc.setState(0x787a, 0x7c67, 0x80c0, 0x936a, 0x6bbc, 0xd772, 0x0, 0x0);
        gbc.writeMem(0x787a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x7c67);
        EXPECT(gbc.pc(), 0x787b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 025A
        gbc.setState(0x721c, 0x8b2b, 0x2250, 0xfa55, 0x1ae, 0xcfbe, 0x1, 0x0);
        gbc.writeMem(0x721c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x8b2b);
        EXPECT(gbc.pc(), 0x721d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 025B
        gbc.setState(0x6839, 0x8f9d, 0x24f0, 0xb717, 0xa4ed, 0xc232, 0x1, 0x1);
        gbc.writeMem(0x6839, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x8f9d);
        EXPECT(gbc.pc(), 0x683a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 025C
        gbc.setState(0x77af, 0xefea, 0xe040, 0xba18, 0x241, 0x2822, 0x1, 0x1);
        gbc.writeMem(0x77af, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xefea);
        EXPECT(gbc.pc(), 0x77b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 025D
        gbc.setState(0xd660, 0xc7a0, 0x4c70, 0x3f6d, 0x72b0, 0x1fa8, 0x1, 0x0);
        gbc.writeMem(0xd660, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc7a0);
        EXPECT(gbc.pc(), 0xd661);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd660), 0xf3);
        // F3 025E
        gbc.setState(0x283e, 0xdbe3, 0xe10, 0xadf0, 0x8794, 0x2382, 0x1, 0x1);
        gbc.writeMem(0x283e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xdbe3);
        EXPECT(gbc.pc(), 0x283f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 025F
        gbc.setState(0x4973, 0x4ac7, 0xb760, 0xf4ce, 0xd150, 0x4905, 0x1, 0x1);
        gbc.writeMem(0x4973, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x4ac7);
        EXPECT(gbc.pc(), 0x4974);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0260
        gbc.setState(0x22ce, 0x157b, 0x1610, 0x83fd, 0x3080, 0x250a, 0x0, 0x1);
        gbc.writeMem(0x22ce, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x157b);
        EXPECT(gbc.pc(), 0x22cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0261
        gbc.setState(0x2a0d, 0xe41, 0x5a80, 0x54a6, 0x6fa7, 0x8225, 0x1, 0x0);
        gbc.writeMem(0x2a0d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xe41);
        EXPECT(gbc.pc(), 0x2a0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0262
        gbc.setState(0x5b50, 0xafa9, 0xa8e0, 0xbb29, 0x26fc, 0xa485, 0x1, 0x0);
        gbc.writeMem(0x5b50, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xafa9);
        EXPECT(gbc.pc(), 0x5b51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0263
        gbc.setState(0x7740, 0x45cf, 0x37a0, 0xca0d, 0x3e87, 0x7fb5, 0x0, 0x1);
        gbc.writeMem(0x7740, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x45cf);
        EXPECT(gbc.pc(), 0x7741);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0264
        gbc.setState(0xe86f, 0x234f, 0x7e20, 0x1793, 0xa7d8, 0xcc6b, 0x1, 0x1);
        gbc.writeMem(0xe86f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x234f);
        EXPECT(gbc.pc(), 0xe870);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe86f), 0xf3);
        // F3 0265
        gbc.setState(0xc191, 0xc8ad, 0xdb60, 0xfa3d, 0xc50, 0x63c5, 0x0, 0x0);
        gbc.writeMem(0xc191, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xc8ad);
        EXPECT(gbc.pc(), 0xc192);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc191), 0xf3);
        // F3 0266
        gbc.setState(0xb21d, 0x5b96, 0xad60, 0x1572, 0xb21b, 0x7f74, 0x0, 0x0);
        gbc.writeMem(0xb21d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x5b96);
        EXPECT(gbc.pc(), 0xb21e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb21d), 0xf3);
        // F3 0267
        gbc.setState(0xbcb9, 0xfe46, 0x2010, 0x5aa2, 0x929d, 0xeef7, 0x1, 0x0);
        gbc.writeMem(0xbcb9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xfe46);
        EXPECT(gbc.pc(), 0xbcba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcb9), 0xf3);
        // F3 0268
        gbc.setState(0x87c8, 0x948e, 0x27f0, 0x3e94, 0x819e, 0xe5b6, 0x0, 0x1);
        gbc.writeMem(0x87c8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x948e);
        EXPECT(gbc.pc(), 0x87c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87c8), 0xf3);
        // F3 0269
        gbc.setState(0x7bad, 0x8a23, 0x2630, 0x3cfc, 0x8eae, 0x3757, 0x1, 0x1);
        gbc.writeMem(0x7bad, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8a23);
        EXPECT(gbc.pc(), 0x7bae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 026A
        gbc.setState(0x3e59, 0x7848, 0xcc80, 0xdb98, 0xd72b, 0xe75a, 0x0, 0x1);
        gbc.writeMem(0x3e59, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7848);
        EXPECT(gbc.pc(), 0x3e5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 026B
        gbc.setState(0x22d5, 0xb61, 0x2760, 0x71ec, 0x4b8d, 0x69c1, 0x0, 0x1);
        gbc.writeMem(0x22d5, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xb61);
        EXPECT(gbc.pc(), 0x22d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 026C
        gbc.setState(0x463a, 0x211f, 0x52a0, 0xc23d, 0xe450, 0x44e8, 0x1, 0x1);
        gbc.writeMem(0x463a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x211f);
        EXPECT(gbc.pc(), 0x463b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 026D
        gbc.setState(0x450a, 0xf713, 0x9c40, 0xee5c, 0xbdd, 0x4e23, 0x0, 0x0);
        gbc.writeMem(0x450a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xf713);
        EXPECT(gbc.pc(), 0x450b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 026E
        gbc.setState(0xccbe, 0xded3, 0x2ad0, 0x9ffb, 0xdae7, 0x726, 0x0, 0x1);
        gbc.writeMem(0xccbe, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xded3);
        EXPECT(gbc.pc(), 0xccbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccbe), 0xf3);
        // F3 026F
        gbc.setState(0xaef9, 0xd12b, 0x4b00, 0x1db7, 0xebaf, 0x1114, 0x0, 0x1);
        gbc.writeMem(0xaef9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd12b);
        EXPECT(gbc.pc(), 0xaefa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaef9), 0xf3);
        // F3 0270
        gbc.setState(0x974c, 0xb477, 0xe480, 0x5954, 0x9504, 0x44ad, 0x0, 0x0);
        gbc.writeMem(0x974c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xb477);
        EXPECT(gbc.pc(), 0x974d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x974c), 0xf3);
        // F3 0271
        gbc.setState(0xae2d, 0x2be0, 0xd090, 0xf8c0, 0xaf6b, 0xf1d8, 0x1, 0x1);
        gbc.writeMem(0xae2d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x2be0);
        EXPECT(gbc.pc(), 0xae2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae2d), 0xf3);
        // F3 0273
        gbc.setState(0x7409, 0xae5d, 0x9240, 0xdf7, 0xaab9, 0x42f7, 0x0, 0x1);
        gbc.writeMem(0x7409, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xae5d);
        EXPECT(gbc.pc(), 0x740a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0274
        gbc.setState(0x17ea, 0x7050, 0xce60, 0x5095, 0x7e5c, 0x8260, 0x0, 0x0);
        gbc.writeMem(0x17ea, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x7050);
        EXPECT(gbc.pc(), 0x17eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0275
        gbc.setState(0x59a4, 0x660a, 0xba0, 0x8757, 0x4d78, 0x1fd2, 0x0, 0x0);
        gbc.writeMem(0x59a4, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x660a);
        EXPECT(gbc.pc(), 0x59a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0276
        gbc.setState(0x76db, 0xa915, 0x7e30, 0x25de, 0xdacf, 0xa9c5, 0x0, 0x0);
        gbc.writeMem(0x76db, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xa915);
        EXPECT(gbc.pc(), 0x76dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0277
        gbc.setState(0x3416, 0x5e5d, 0x7e70, 0x96aa, 0xa9d9, 0xd350, 0x0, 0x1);
        gbc.writeMem(0x3416, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x5e5d);
        EXPECT(gbc.pc(), 0x3417);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0278
        gbc.setState(0xd6eb, 0x989, 0xa2e0, 0x2395, 0x2182, 0x23d5, 0x0, 0x1);
        gbc.writeMem(0xd6eb, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x989);
        EXPECT(gbc.pc(), 0xd6ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6eb), 0xf3);
        // F3 027A
        gbc.setState(0xab8b, 0x4476, 0xef20, 0xffa0, 0x627a, 0x912b, 0x0, 0x1);
        gbc.writeMem(0xab8b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x4476);
        EXPECT(gbc.pc(), 0xab8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab8b), 0xf3);
        // F3 027D
        gbc.setState(0xac3b, 0xa695, 0xf130, 0xdf47, 0xb2d8, 0x30ce, 0x0, 0x0);
        gbc.writeMem(0xac3b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xa695);
        EXPECT(gbc.pc(), 0xac3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac3b), 0xf3);
        // F3 027E
        gbc.setState(0xd11e, 0x3cf6, 0x3bb0, 0xe610, 0xad8, 0xd468, 0x1, 0x0);
        gbc.writeMem(0xd11e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x3cf6);
        EXPECT(gbc.pc(), 0xd11f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd11e), 0xf3);
        // F3 027F
        gbc.setState(0xb915, 0x29cc, 0x5970, 0x284c, 0x1e4d, 0x8b33, 0x1, 0x0);
        gbc.writeMem(0xb915, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x29cc);
        EXPECT(gbc.pc(), 0xb916);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb915), 0xf3);
        // F3 0280
        gbc.setState(0x5114, 0xddd7, 0x8c40, 0x4783, 0xc1a1, 0x5a10, 0x0, 0x1);
        gbc.writeMem(0x5114, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xddd7);
        EXPECT(gbc.pc(), 0x5115);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0281
        gbc.setState(0x6723, 0xde79, 0xdcf0, 0xedb1, 0xd6b0, 0x38f5, 0x0, 0x0);
        gbc.writeMem(0x6723, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xde79);
        EXPECT(gbc.pc(), 0x6724);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0282
        gbc.setState(0x58d, 0x4382, 0xee90, 0xfeba, 0x884d, 0x1312, 0x0, 0x1);
        gbc.writeMem(0x58d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x4382);
        EXPECT(gbc.pc(), 0x58e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0283
        gbc.setState(0xd558, 0xf6f7, 0x7e10, 0x9931, 0x549e, 0x93b1, 0x1, 0x1);
        gbc.writeMem(0xd558, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xf6f7);
        EXPECT(gbc.pc(), 0xd559);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd558), 0xf3);
        // F3 0284
        gbc.setState(0x446c, 0x9d9b, 0x9a70, 0xca3c, 0xc61c, 0xba1f, 0x0, 0x1);
        gbc.writeMem(0x446c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x9d9b);
        EXPECT(gbc.pc(), 0x446d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0285
        gbc.setState(0xa05c, 0x67ee, 0xed40, 0xa108, 0xe729, 0x380d, 0x1, 0x0);
        gbc.writeMem(0xa05c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x67ee);
        EXPECT(gbc.pc(), 0xa05d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa05c), 0xf3);
        // F3 0286
        gbc.setState(0x3ebc, 0x17f8, 0x8c40, 0xacf2, 0xa0f0, 0x5eeb, 0x0, 0x1);
        gbc.writeMem(0x3ebc, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x17f8);
        EXPECT(gbc.pc(), 0x3ebd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0287
        gbc.setState(0xd466, 0x1faf, 0xe1d0, 0x9471, 0xc59e, 0x22e7, 0x1, 0x0);
        gbc.writeMem(0xd466, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x1faf);
        EXPECT(gbc.pc(), 0xd467);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd466), 0xf3);
        // F3 0288
        gbc.setState(0xa432, 0xfee6, 0xb0e0, 0xc643, 0x4e7b, 0x5ca7, 0x1, 0x1);
        gbc.writeMem(0xa432, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xfee6);
        EXPECT(gbc.pc(), 0xa433);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa432), 0xf3);
        // F3 0289
        gbc.setState(0xae8c, 0x5c6a, 0x1600, 0x6db9, 0x6129, 0x2694, 0x1, 0x0);
        gbc.writeMem(0xae8c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x5c6a);
        EXPECT(gbc.pc(), 0xae8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae8c), 0xf3);
        // F3 028A
        gbc.setState(0xa9e9, 0x42e8, 0x560, 0x94df, 0xf14b, 0xa451, 0x0, 0x0);
        gbc.writeMem(0xa9e9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x42e8);
        EXPECT(gbc.pc(), 0xa9ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9e9), 0xf3);
        // F3 028B
        gbc.setState(0x6484, 0xa561, 0xf500, 0x65e6, 0x5d74, 0x16d0, 0x0, 0x0);
        gbc.writeMem(0x6484, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xa561);
        EXPECT(gbc.pc(), 0x6485);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 028C
        gbc.setState(0x76aa, 0xb586, 0x8b40, 0x7ce7, 0x85ab, 0x55a6, 0x1, 0x0);
        gbc.writeMem(0x76aa, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xb586);
        EXPECT(gbc.pc(), 0x76ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 028D
        gbc.setState(0x71b1, 0x3a8a, 0xf130, 0x3625, 0x7a05, 0x7210, 0x1, 0x0);
        gbc.writeMem(0x71b1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x3a8a);
        EXPECT(gbc.pc(), 0x71b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 028E
        gbc.setState(0x826b, 0x9b37, 0xcc10, 0x30e4, 0x615f, 0x5dc8, 0x0, 0x1);
        gbc.writeMem(0x826b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x9b37);
        EXPECT(gbc.pc(), 0x826c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x826b), 0xf3);
        // F3 028F
        gbc.setState(0x53ba, 0xb990, 0x34d0, 0xf00a, 0xe6be, 0xad17, 0x1, 0x1);
        gbc.writeMem(0x53ba, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xb990);
        EXPECT(gbc.pc(), 0x53bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0290
        gbc.setState(0x1d8f, 0xf0ef, 0x50e0, 0xecc5, 0xa03c, 0x78ae, 0x1, 0x0);
        gbc.writeMem(0x1d8f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xf0ef);
        EXPECT(gbc.pc(), 0x1d90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0291
        gbc.setState(0x684e, 0x299a, 0x4210, 0xe7f5, 0x7781, 0x9930, 0x0, 0x0);
        gbc.writeMem(0x684e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x299a);
        EXPECT(gbc.pc(), 0x684f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0292
        gbc.setState(0x14da, 0x252a, 0x7030, 0x1a5e, 0x4a18, 0x511c, 0x0, 0x1);
        gbc.writeMem(0x14da, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x252a);
        EXPECT(gbc.pc(), 0x14db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0293
        gbc.setState(0x11fe, 0x4664, 0x38c0, 0x2861, 0x9524, 0x9736, 0x0, 0x1);
        gbc.writeMem(0x11fe, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x4664);
        EXPECT(gbc.pc(), 0x11ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0294
        gbc.setState(0xe2c1, 0xb8ad, 0x4c50, 0x49c8, 0x50d9, 0xc78a, 0x1, 0x1);
        gbc.writeMem(0xe2c1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xb8ad);
        EXPECT(gbc.pc(), 0xe2c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2c1), 0xf3);
        // F3 0295
        gbc.setState(0xe485, 0xd2cd, 0x2930, 0xc0b1, 0xbcc5, 0x5d9b, 0x1, 0x1);
        gbc.writeMem(0xe485, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xd2cd);
        EXPECT(gbc.pc(), 0xe486);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe485), 0xf3);
        // F3 0296
        gbc.setState(0xa16c, 0xa6e1, 0x5a70, 0xbf72, 0x5b8f, 0x72d4, 0x0, 0x0);
        gbc.writeMem(0xa16c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xa6e1);
        EXPECT(gbc.pc(), 0xa16d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa16c), 0xf3);
        // F3 0297
        gbc.setState(0xb4d3, 0xb821, 0x3840, 0xa32a, 0x61fb, 0x9412, 0x1, 0x1);
        gbc.writeMem(0xb4d3, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xb821);
        EXPECT(gbc.pc(), 0xb4d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4d3), 0xf3);
        // F3 029A
        gbc.setState(0xc8a1, 0xfab7, 0x1420, 0xf7f0, 0x3a4e, 0xe3e4, 0x0, 0x0);
        gbc.writeMem(0xc8a1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xfab7);
        EXPECT(gbc.pc(), 0xc8a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8a1), 0xf3);
        // F3 029B
        gbc.setState(0xd580, 0x278c, 0x1130, 0xe7f, 0xb766, 0xb3fe, 0x1, 0x0);
        gbc.writeMem(0xd580, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x278c);
        EXPECT(gbc.pc(), 0xd581);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd580), 0xf3);
        // F3 029C
        gbc.setState(0x5b85, 0x2c4a, 0xdc90, 0x896b, 0x584e, 0x3c8c, 0x1, 0x0);
        gbc.writeMem(0x5b85, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x2c4a);
        EXPECT(gbc.pc(), 0x5b86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 029D
        gbc.setState(0x5a74, 0xa5f7, 0xb140, 0xa07c, 0xbf18, 0xa0bb, 0x0, 0x1);
        gbc.writeMem(0x5a74, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xa5f7);
        EXPECT(gbc.pc(), 0x5a75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 029F
        gbc.setState(0x8f26, 0x6195, 0x7160, 0xa857, 0x9855, 0x192f, 0x0, 0x1);
        gbc.writeMem(0x8f26, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x6195);
        EXPECT(gbc.pc(), 0x8f27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f26), 0xf3);
        // F3 02A0
        gbc.setState(0x2563, 0x64b2, 0x38f0, 0xd544, 0xa9c, 0xa843, 0x0, 0x1);
        gbc.writeMem(0x2563, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x64b2);
        EXPECT(gbc.pc(), 0x2564);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 02A1
        gbc.setState(0x188f, 0x7022, 0x5400, 0xdece, 0xbee, 0xcdd0, 0x0, 0x1);
        gbc.writeMem(0x188f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x7022);
        EXPECT(gbc.pc(), 0x1890);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 02A3
        gbc.setState(0x6072, 0xe535, 0xe470, 0x29a9, 0x6395, 0xb153, 0x0, 0x0);
        gbc.writeMem(0x6072, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xe535);
        EXPECT(gbc.pc(), 0x6073);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 02A4
        gbc.setState(0xa42a, 0x64fa, 0x1100, 0x2fb3, 0xc0e, 0x19d6, 0x0, 0x1);
        gbc.writeMem(0xa42a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x64fa);
        EXPECT(gbc.pc(), 0xa42b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa42a), 0xf3);
        // F3 02A5
        gbc.setState(0xc394, 0xdb64, 0x1810, 0x6d60, 0xba5b, 0x55ed, 0x1, 0x0);
        gbc.writeMem(0xc394, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xdb64);
        EXPECT(gbc.pc(), 0xc395);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc394), 0xf3);
        // F3 02A6
        gbc.setState(0xa84b, 0xafc5, 0x84a0, 0x8887, 0xbd86, 0xf44d, 0x1, 0x1);
        gbc.writeMem(0xa84b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xafc5);
        EXPECT(gbc.pc(), 0xa84c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa84b), 0xf3);
        // F3 02A7
        gbc.setState(0xb0a2, 0x9273, 0x76f0, 0xf79f, 0x1851, 0x6308, 0x1, 0x1);
        gbc.writeMem(0xb0a2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x9273);
        EXPECT(gbc.pc(), 0xb0a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0a2), 0xf3);
        // F3 02A8
        gbc.setState(0xc060, 0x94a8, 0x8a10, 0xfbcb, 0x622a, 0xd92c, 0x1, 0x0);
        gbc.writeMem(0xc060, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x94a8);
        EXPECT(gbc.pc(), 0xc061);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc060), 0xf3);
        // F3 02A9
        gbc.setState(0x10e, 0x57ab, 0x5220, 0x137e, 0x74af, 0x2ff2, 0x1, 0x0);
        gbc.writeMem(0x10e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x57ab);
        EXPECT(gbc.pc(), 0x10f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 02AA
        gbc.setState(0x1fd2, 0xbe0, 0x8dd0, 0x9adb, 0xc1a5, 0xa3bb, 0x1, 0x0);
        gbc.writeMem(0x1fd2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xbe0);
        EXPECT(gbc.pc(), 0x1fd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 02AB
        gbc.setState(0xd462, 0x5a4b, 0x8b90, 0xd5ce, 0xb098, 0xecdb, 0x0, 0x0);
        gbc.writeMem(0xd462, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x5a4b);
        EXPECT(gbc.pc(), 0xd463);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd462), 0xf3);
        // F3 02AC
        gbc.setState(0x2c9a, 0x6f3c, 0x350, 0x12ef, 0x2591, 0x76f3, 0x0, 0x1);
        gbc.writeMem(0x2c9a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x6f3c);
        EXPECT(gbc.pc(), 0x2c9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 02AD
        gbc.setState(0x4988, 0xb787, 0x2160, 0x5650, 0xe6b4, 0x4c3c, 0x0, 0x1);
        gbc.writeMem(0x4988, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xb787);
        EXPECT(gbc.pc(), 0x4989);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 02AE
        gbc.setState(0x9fcb, 0x782a, 0xf440, 0x81cb, 0xaec3, 0xcb55, 0x0, 0x0);
        gbc.writeMem(0x9fcb, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x782a);
        EXPECT(gbc.pc(), 0x9fcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fcb), 0xf3);
        // F3 02AF
        gbc.setState(0x5ebc, 0xe645, 0xfc00, 0x7b4e, 0xa8bd, 0xca9, 0x1, 0x1);
        gbc.writeMem(0x5ebc, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xe645);
        EXPECT(gbc.pc(), 0x5ebd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 02B0
        gbc.setState(0xbfd4, 0x1e7f, 0xc0d0, 0x2ea0, 0x4c95, 0x6b91, 0x1, 0x1);
        gbc.writeMem(0xbfd4, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x1e7f);
        EXPECT(gbc.pc(), 0xbfd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfd4), 0xf3);
        // F3 02B2
        gbc.setState(0xb61, 0x6238, 0x8440, 0x64d2, 0xd96e, 0xc5ba, 0x1, 0x1);
        gbc.writeMem(0xb61, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x6238);
        EXPECT(gbc.pc(), 0xb62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 02B3
        gbc.setState(0x7b65, 0xe4ec, 0xfab0, 0x1e3d, 0x1560, 0xcc9c, 0x1, 0x0);
        gbc.writeMem(0x7b65, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xe4ec);
        EXPECT(gbc.pc(), 0x7b66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 02B4
        gbc.setState(0xcd98, 0xa78e, 0x7720, 0xd3b4, 0xdfa3, 0xf085, 0x0, 0x0);
        gbc.writeMem(0xcd98, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xa78e);
        EXPECT(gbc.pc(), 0xcd99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd98), 0xf3);
        // F3 02B5
        gbc.setState(0xb9f7, 0xee94, 0xa480, 0xdd25, 0x7ffd, 0x69bd, 0x0, 0x1);
        gbc.writeMem(0xb9f7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xee94);
        EXPECT(gbc.pc(), 0xb9f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9f7), 0xf3);
        // F3 02B6
        gbc.setState(0x996b, 0xb221, 0x1d80, 0xd0f6, 0x2803, 0x5767, 0x0, 0x0);
        gbc.writeMem(0x996b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xb221);
        EXPECT(gbc.pc(), 0x996c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x996b), 0xf3);
        // F3 02B7
        gbc.setState(0x75f9, 0x7e68, 0x6250, 0x7ac6, 0xca88, 0x4728, 0x0, 0x1);
        gbc.writeMem(0x75f9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x7e68);
        EXPECT(gbc.pc(), 0x75fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 02B8
        gbc.setState(0x5d15, 0xd81d, 0x2ff0, 0x126e, 0x5856, 0x576a, 0x0, 0x0);
        gbc.writeMem(0x5d15, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xd81d);
        EXPECT(gbc.pc(), 0x5d16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 02B9
        gbc.setState(0xd7f5, 0x811a, 0x6950, 0xa8af, 0xbcb2, 0x62cf, 0x1, 0x1);
        gbc.writeMem(0xd7f5, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x811a);
        EXPECT(gbc.pc(), 0xd7f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7f5), 0xf3);
        // F3 02BA
        gbc.setState(0x91ee, 0x592c, 0x61c0, 0x1341, 0xcecb, 0x285a, 0x1, 0x0);
        gbc.writeMem(0x91ee, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x592c);
        EXPECT(gbc.pc(), 0x91ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91ee), 0xf3);
        // F3 02BB
        gbc.setState(0x37d2, 0xa01a, 0x2c20, 0x65f1, 0x509e, 0xc4a1, 0x1, 0x1);
        gbc.writeMem(0x37d2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xa01a);
        EXPECT(gbc.pc(), 0x37d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 02BC
        gbc.setState(0x8404, 0x1dd9, 0x57b0, 0x7cca, 0x1b6d, 0xa2fd, 0x0, 0x0);
        gbc.writeMem(0x8404, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x1dd9);
        EXPECT(gbc.pc(), 0x8405);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8404), 0xf3);
        // F3 02BD
        gbc.setState(0x8b60, 0x3875, 0x8310, 0xf3e9, 0x8d5e, 0x640, 0x1, 0x1);
        gbc.writeMem(0x8b60, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x3875);
        EXPECT(gbc.pc(), 0x8b61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b60), 0xf3);
        // F3 02BE
        gbc.setState(0xd19e, 0x5202, 0xec60, 0xed11, 0xd19a, 0x189c, 0x0, 0x1);
        gbc.writeMem(0xd19e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x5202);
        EXPECT(gbc.pc(), 0xd19f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd19e), 0xf3);
        // F3 02BF
        gbc.setState(0x12f9, 0x6c2, 0x6c70, 0x37f8, 0xe65c, 0x8c9b, 0x0, 0x1);
        gbc.writeMem(0x12f9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x6c2);
        EXPECT(gbc.pc(), 0x12fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 02C0
        gbc.setState(0xe99c, 0x98e4, 0xff30, 0x1472, 0x80c5, 0xbd53, 0x0, 0x0);
        gbc.writeMem(0xe99c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x98e4);
        EXPECT(gbc.pc(), 0xe99d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe99c), 0xf3);
        // F3 02C1
        gbc.setState(0xc087, 0x2be2, 0xa470, 0x74f5, 0xb9c9, 0x3646, 0x0, 0x1);
        gbc.writeMem(0xc087, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x2be2);
        EXPECT(gbc.pc(), 0xc088);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc087), 0xf3);
        // F3 02C2
        gbc.setState(0x5e6b, 0x50f0, 0x57c0, 0x2af7, 0x5138, 0x499, 0x1, 0x1);
        gbc.writeMem(0x5e6b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x50f0);
        EXPECT(gbc.pc(), 0x5e6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 02C3
        gbc.setState(0x6db, 0x7100, 0xb060, 0xb1e4, 0x46ae, 0x8519, 0x0, 0x0);
        gbc.writeMem(0x6db, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x7100);
        EXPECT(gbc.pc(), 0x6dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 02C4
        gbc.setState(0xe0bb, 0xa245, 0xde20, 0xfff9, 0x4d7e, 0x295, 0x1, 0x0);
        gbc.writeMem(0xe0bb, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa245);
        EXPECT(gbc.pc(), 0xe0bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0bb), 0xf3);
        // F3 02C5
        gbc.setState(0x7532, 0x3401, 0x67a0, 0xb6ce, 0x3174, 0x91dd, 0x1, 0x0);
        gbc.writeMem(0x7532, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x3401);
        EXPECT(gbc.pc(), 0x7533);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 02C6
        gbc.setState(0xb783, 0x69bf, 0x2f90, 0x2ed0, 0x3c33, 0x24a5, 0x1, 0x1);
        gbc.writeMem(0xb783, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x69bf);
        EXPECT(gbc.pc(), 0xb784);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb783), 0xf3);
        // F3 02C8
        gbc.setState(0xd203, 0x88dc, 0x96f0, 0xd46a, 0xddb4, 0x4ff7, 0x1, 0x0);
        gbc.writeMem(0xd203, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x88dc);
        EXPECT(gbc.pc(), 0xd204);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd203), 0xf3);
        // F3 02C9
        gbc.setState(0xbb81, 0xdc17, 0xa0f0, 0xc4cb, 0xd55b, 0x7052, 0x0, 0x0);
        gbc.writeMem(0xbb81, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xdc17);
        EXPECT(gbc.pc(), 0xbb82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb81), 0xf3);
        // F3 02CA
        gbc.setState(0x2ae2, 0x2a7e, 0xadc0, 0x4bb3, 0xedc3, 0xdc61, 0x0, 0x0);
        gbc.writeMem(0x2ae2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x2a7e);
        EXPECT(gbc.pc(), 0x2ae3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 02CB
        gbc.setState(0x21c2, 0xe0b, 0xae00, 0x3c79, 0xf31c, 0x8bad, 0x0, 0x0);
        gbc.writeMem(0x21c2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xe0b);
        EXPECT(gbc.pc(), 0x21c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 02CC
        gbc.setState(0x3f1b, 0x9f52, 0xfab0, 0xfeba, 0x786e, 0xce95, 0x1, 0x0);
        gbc.writeMem(0x3f1b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x9f52);
        EXPECT(gbc.pc(), 0x3f1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 02CD
        gbc.setState(0x12dd, 0xbed0, 0xe8e0, 0xa23c, 0xe448, 0x8a4a, 0x0, 0x1);
        gbc.writeMem(0x12dd, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xbed0);
        EXPECT(gbc.pc(), 0x12de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 02CE
        gbc.setState(0x2aa6, 0x507b, 0x2970, 0x64e7, 0xa348, 0x3a76, 0x0, 0x1);
        gbc.writeMem(0x2aa6, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x507b);
        EXPECT(gbc.pc(), 0x2aa7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 02CF
        gbc.setState(0xe02c, 0x6090, 0xec40, 0x6268, 0xf54a, 0x28a6, 0x1, 0x0);
        gbc.writeMem(0xe02c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x6090);
        EXPECT(gbc.pc(), 0xe02d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe02c), 0xf3);
        // F3 02D0
        gbc.setState(0xb62, 0xbee0, 0x4450, 0xc761, 0x41ca, 0xcb3, 0x1, 0x1);
        gbc.writeMem(0xb62, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xbee0);
        EXPECT(gbc.pc(), 0xb63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 02D1
        gbc.setState(0xb1a9, 0xd8d, 0xb190, 0xb3e1, 0x7732, 0x6438, 0x1, 0x0);
        gbc.writeMem(0xb1a9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xd8d);
        EXPECT(gbc.pc(), 0xb1aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1a9), 0xf3);
        // F3 02D2
        gbc.setState(0x5fb5, 0x411a, 0xcea0, 0xd655, 0x55b7, 0xec6d, 0x0, 0x1);
        gbc.writeMem(0x5fb5, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x411a);
        EXPECT(gbc.pc(), 0x5fb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 02D3
        gbc.setState(0x6abe, 0xe992, 0x86e0, 0x5ba8, 0x1166, 0xcb6f, 0x0, 0x1);
        gbc.writeMem(0x6abe, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xe992);
        EXPECT(gbc.pc(), 0x6abf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 02D4
        gbc.setState(0x9f21, 0x5443, 0x50f0, 0xa743, 0x34c5, 0x6e13, 0x0, 0x0);
        gbc.writeMem(0x9f21, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x5443);
        EXPECT(gbc.pc(), 0x9f22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f21), 0xf3);
        // F3 02D5
        gbc.setState(0xe37a, 0x6b72, 0x93b0, 0x1d69, 0x8af6, 0xf34b, 0x1, 0x1);
        gbc.writeMem(0xe37a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x6b72);
        EXPECT(gbc.pc(), 0xe37b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe37a), 0xf3);
        // F3 02D6
        gbc.setState(0x90fa, 0xeebb, 0x32e0, 0xe98a, 0xd141, 0x6902, 0x0, 0x0);
        gbc.writeMem(0x90fa, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xeebb);
        EXPECT(gbc.pc(), 0x90fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90fa), 0xf3);
        // F3 02D7
        gbc.setState(0xa83e, 0xf1f6, 0x5c10, 0xf47c, 0x99b4, 0x57b4, 0x1, 0x1);
        gbc.writeMem(0xa83e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xf1f6);
        EXPECT(gbc.pc(), 0xa83f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa83e), 0xf3);
        // F3 02D8
        gbc.setState(0x9692, 0x755b, 0x8a00, 0x430f, 0x55, 0x77c3, 0x0, 0x0);
        gbc.writeMem(0x9692, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x755b);
        EXPECT(gbc.pc(), 0x9693);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9692), 0xf3);
        // F3 02D9
        gbc.setState(0xd6b0, 0x491d, 0xeb50, 0x8088, 0xdb6b, 0x138c, 0x0, 0x1);
        gbc.writeMem(0xd6b0, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x491d);
        EXPECT(gbc.pc(), 0xd6b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6b0), 0xf3);
        // F3 02DA
        gbc.setState(0x1745, 0xb672, 0x65d0, 0x3b00, 0xcd90, 0xe7fb, 0x0, 0x0);
        gbc.writeMem(0x1745, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xb672);
        EXPECT(gbc.pc(), 0x1746);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 02DB
        gbc.setState(0xd5e2, 0x3987, 0x6c70, 0x4d2c, 0xfad4, 0x692, 0x1, 0x0);
        gbc.writeMem(0xd5e2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x3987);
        EXPECT(gbc.pc(), 0xd5e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5e2), 0xf3);
        // F3 02DC
        gbc.setState(0xbe95, 0x335c, 0xe840, 0x697, 0x26c1, 0x9998, 0x1, 0x0);
        gbc.writeMem(0xbe95, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x335c);
        EXPECT(gbc.pc(), 0xbe96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe95), 0xf3);
        // F3 02DD
        gbc.setState(0x780f, 0x9b0, 0x3800, 0x37c6, 0x8933, 0x1f43, 0x0, 0x0);
        gbc.writeMem(0x780f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9b0);
        EXPECT(gbc.pc(), 0x7810);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 02DE
        gbc.setState(0x2335, 0xe637, 0xd800, 0xc3db, 0xd6e6, 0x93cc, 0x1, 0x1);
        gbc.writeMem(0x2335, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xe637);
        EXPECT(gbc.pc(), 0x2336);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 02DF
        gbc.setState(0x3c7f, 0x7ff2, 0xea30, 0x69e1, 0x939c, 0x4e90, 0x1, 0x1);
        gbc.writeMem(0x3c7f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x7ff2);
        EXPECT(gbc.pc(), 0x3c80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 02E0
        gbc.setState(0x6b0f, 0x25dd, 0x6cf0, 0x3913, 0x73b5, 0x7a82, 0x1, 0x0);
        gbc.writeMem(0x6b0f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x25dd);
        EXPECT(gbc.pc(), 0x6b10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 02E1
        gbc.setState(0xb00b, 0xcc81, 0x7090, 0x96c8, 0x5514, 0x5f39, 0x0, 0x0);
        gbc.writeMem(0xb00b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xcc81);
        EXPECT(gbc.pc(), 0xb00c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb00b), 0xf3);
        // F3 02E2
        gbc.setState(0x1efc, 0xefbf, 0x98e0, 0xfcf1, 0xc736, 0x3277, 0x0, 0x1);
        gbc.writeMem(0x1efc, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xefbf);
        EXPECT(gbc.pc(), 0x1efd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 02E3
        gbc.setState(0x2f4, 0x2bbc, 0xd3c0, 0x7fb3, 0x3f22, 0x6910, 0x1, 0x0);
        gbc.writeMem(0x2f4, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x2bbc);
        EXPECT(gbc.pc(), 0x2f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 02E5
        gbc.setState(0x61fc, 0xdef9, 0x7f80, 0x539, 0x14c7, 0xa39b, 0x1, 0x1);
        gbc.writeMem(0x61fc, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xdef9);
        EXPECT(gbc.pc(), 0x61fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 02E6
        gbc.setState(0x3fb4, 0x5b77, 0xaa40, 0x8398, 0x438e, 0xe60c, 0x0, 0x0);
        gbc.writeMem(0x3fb4, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x5b77);
        EXPECT(gbc.pc(), 0x3fb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 02E7
        gbc.setState(0xec64, 0xbdc0, 0xebc0, 0x543d, 0x4d4e, 0xa904, 0x0, 0x0);
        gbc.writeMem(0xec64, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xbdc0);
        EXPECT(gbc.pc(), 0xec65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec64), 0xf3);
        // F3 02E8
        gbc.setState(0x79c7, 0x839c, 0xb1b0, 0x205e, 0x5d56, 0xbc07, 0x0, 0x0);
        gbc.writeMem(0x79c7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x839c);
        EXPECT(gbc.pc(), 0x79c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 02E9
        gbc.setState(0xcd33, 0xd92b, 0x47d0, 0x2f2d, 0xd76c, 0x75e7, 0x1, 0x1);
        gbc.writeMem(0xcd33, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xd92b);
        EXPECT(gbc.pc(), 0xcd34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd33), 0xf3);
        // F3 02EA
        gbc.setState(0xd62, 0x4cc0, 0x53c0, 0xa0e2, 0x3fe2, 0x6daa, 0x1, 0x0);
        gbc.writeMem(0xd62, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x4cc0);
        EXPECT(gbc.pc(), 0xd63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 02EB
        gbc.setState(0x3364, 0x1de, 0x4ac0, 0x808e, 0x767a, 0x10df, 0x0, 0x0);
        gbc.writeMem(0x3364, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x1de);
        EXPECT(gbc.pc(), 0x3365);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 02EC
        gbc.setState(0x8121, 0x626a, 0x6d70, 0xf691, 0xc369, 0x9b7d, 0x0, 0x0);
        gbc.writeMem(0x8121, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x626a);
        EXPECT(gbc.pc(), 0x8122);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8121), 0xf3);
        // F3 02ED
        gbc.setState(0xe1c2, 0xc245, 0x5220, 0x2197, 0xe575, 0xa28, 0x0, 0x1);
        gbc.writeMem(0xe1c2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xc245);
        EXPECT(gbc.pc(), 0xe1c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1c2), 0xf3);
        // F3 02EF
        gbc.setState(0x8362, 0xa46c, 0x8a30, 0xad9, 0x4144, 0xe361, 0x1, 0x1);
        gbc.writeMem(0x8362, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xa46c);
        EXPECT(gbc.pc(), 0x8363);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8362), 0xf3);
        // F3 02F0
        gbc.setState(0xa2a0, 0x3faa, 0xab80, 0x74d1, 0x3bdd, 0x6245, 0x0, 0x1);
        gbc.writeMem(0xa2a0, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x3faa);
        EXPECT(gbc.pc(), 0xa2a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2a0), 0xf3);
        // F3 02F1
        gbc.setState(0x83b8, 0x840c, 0x2390, 0xb6dd, 0x7da6, 0x1307, 0x0, 0x0);
        gbc.writeMem(0x83b8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x840c);
        EXPECT(gbc.pc(), 0x83b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83b8), 0xf3);
        // F3 02F2
        gbc.setState(0x1693, 0x8f4a, 0x49d0, 0x2f11, 0xb949, 0x850a, 0x1, 0x1);
        gbc.writeMem(0x1693, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8f4a);
        EXPECT(gbc.pc(), 0x1694);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 02F3
        gbc.setState(0x2f8, 0x6463, 0x97f0, 0x7ded, 0xffe8, 0xd04d, 0x1, 0x0);
        gbc.writeMem(0x2f8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x6463);
        EXPECT(gbc.pc(), 0x2f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 02F4
        gbc.setState(0x9c17, 0xc694, 0x9fe0, 0x4f80, 0xabfd, 0x5ea8, 0x1, 0x1);
        gbc.writeMem(0x9c17, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc694);
        EXPECT(gbc.pc(), 0x9c18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c17), 0xf3);
        // F3 02F5
        gbc.setState(0x73ef, 0xfc4f, 0x8810, 0xa786, 0x4b0e, 0xb748, 0x1, 0x0);
        gbc.writeMem(0x73ef, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xfc4f);
        EXPECT(gbc.pc(), 0x73f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 02F6
        gbc.setState(0x11f1, 0xe00b, 0xc160, 0x404b, 0x4973, 0x382f, 0x0, 0x1);
        gbc.writeMem(0x11f1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xe00b);
        EXPECT(gbc.pc(), 0x11f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 02F7
        gbc.setState(0xc8b6, 0x8ced, 0x9920, 0x859c, 0xfd91, 0xb131, 0x0, 0x1);
        gbc.writeMem(0xc8b6, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x8ced);
        EXPECT(gbc.pc(), 0xc8b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8b6), 0xf3);
        // F3 02F9
        gbc.setState(0x6424, 0xc02b, 0xbaf0, 0x956f, 0xa14a, 0xbb8f, 0x0, 0x1);
        gbc.writeMem(0x6424, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xc02b);
        EXPECT(gbc.pc(), 0x6425);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 02FA
        gbc.setState(0x99c6, 0xc8ac, 0xa6a0, 0x8eff, 0x7c70, 0x5496, 0x0, 0x0);
        gbc.writeMem(0x99c6, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xc8ac);
        EXPECT(gbc.pc(), 0x99c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99c6), 0xf3);
        // F3 02FC
        gbc.setState(0x7ddc, 0x38bc, 0x8890, 0x7652, 0x25cd, 0x495f, 0x0, 0x1);
        gbc.writeMem(0x7ddc, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x38bc);
        EXPECT(gbc.pc(), 0x7ddd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 02FD
        gbc.setState(0xa9d2, 0xb38a, 0x1920, 0x3aa3, 0x90ac, 0xdcf6, 0x1, 0x0);
        gbc.writeMem(0xa9d2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xb38a);
        EXPECT(gbc.pc(), 0xa9d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9d2), 0xf3);
        // F3 02FE
        gbc.setState(0xed2a, 0x4f72, 0x8cd0, 0x4a29, 0xc3cc, 0xa3ec, 0x0, 0x0);
        gbc.writeMem(0xed2a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x4f72);
        EXPECT(gbc.pc(), 0xed2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed2a), 0xf3);
        // F3 02FF
        gbc.setState(0xce39, 0x7e3f, 0x66e0, 0xf2ca, 0xe680, 0x5f30, 0x0, 0x1);
        gbc.writeMem(0xce39, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x7e3f);
        EXPECT(gbc.pc(), 0xce3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce39), 0xf3);
        // F3 0301
        gbc.setState(0xaa5b, 0x3a52, 0x8a80, 0xdf9e, 0x5a78, 0x6854, 0x0, 0x0);
        gbc.writeMem(0xaa5b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x3a52);
        EXPECT(gbc.pc(), 0xaa5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa5b), 0xf3);
        // F3 0302
        gbc.setState(0x2bf3, 0xe886, 0xc7a0, 0xa4b6, 0x481d, 0xf54, 0x1, 0x0);
        gbc.writeMem(0x2bf3, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xe886);
        EXPECT(gbc.pc(), 0x2bf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0304
        gbc.setState(0x1db5, 0x6364, 0x6f00, 0x968e, 0xc10, 0xfa3e, 0x0, 0x0);
        gbc.writeMem(0x1db5, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x6364);
        EXPECT(gbc.pc(), 0x1db6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0305
        gbc.setState(0x20c1, 0x1dbe, 0xa3d0, 0xb7e, 0xc4b8, 0xb7d8, 0x0, 0x1);
        gbc.writeMem(0x20c1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x1dbe);
        EXPECT(gbc.pc(), 0x20c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0306
        gbc.setState(0x4d15, 0x84d2, 0x9fd0, 0xc836, 0x94bf, 0xe7c7, 0x0, 0x0);
        gbc.writeMem(0x4d15, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x84d2);
        EXPECT(gbc.pc(), 0x4d16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0307
        gbc.setState(0xdc2f, 0x792d, 0xe090, 0x2da8, 0x23b8, 0xdb46, 0x0, 0x1);
        gbc.writeMem(0xdc2f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x792d);
        EXPECT(gbc.pc(), 0xdc30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc2f), 0xf3);
        // F3 0308
        gbc.setState(0x2dd, 0x5765, 0xac0, 0xe73c, 0x8cbc, 0x51e3, 0x0, 0x0);
        gbc.writeMem(0x2dd, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x5765);
        EXPECT(gbc.pc(), 0x2de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0309
        gbc.setState(0x6f1, 0xaeec, 0x1f0, 0x20d0, 0x792e, 0xbc50, 0x1, 0x0);
        gbc.writeMem(0x6f1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xaeec);
        EXPECT(gbc.pc(), 0x6f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 030A
        gbc.setState(0x1da6, 0xf370, 0x3d40, 0xc846, 0xd60b, 0xc009, 0x1, 0x1);
        gbc.writeMem(0x1da6, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xf370);
        EXPECT(gbc.pc(), 0x1da7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 030B
        gbc.setState(0x59b1, 0xb8b3, 0xf60, 0x41ea, 0x6126, 0xca82, 0x0, 0x1);
        gbc.writeMem(0x59b1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xb8b3);
        EXPECT(gbc.pc(), 0x59b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 030C
        gbc.setState(0xa36b, 0xf2c, 0x9fc0, 0x6873, 0x6174, 0x653b, 0x1, 0x0);
        gbc.writeMem(0xa36b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf2c);
        EXPECT(gbc.pc(), 0xa36c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa36b), 0xf3);
        // F3 030D
        gbc.setState(0xd2e8, 0xe873, 0x31a0, 0x9bd6, 0xb8bc, 0x2c24, 0x0, 0x1);
        gbc.writeMem(0xd2e8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xe873);
        EXPECT(gbc.pc(), 0xd2e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2e8), 0xf3);
        // F3 030E
        gbc.setState(0x22d3, 0xf172, 0xf9b0, 0xa937, 0x4aa1, 0xa1bd, 0x0, 0x0);
        gbc.writeMem(0x22d3, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xf172);
        EXPECT(gbc.pc(), 0x22d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 030F
        gbc.setState(0x70ab, 0xde04, 0x16e0, 0x9279, 0x2c13, 0xe1ea, 0x0, 0x0);
        gbc.writeMem(0x70ab, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xde04);
        EXPECT(gbc.pc(), 0x70ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0310
        gbc.setState(0x332f, 0xc37d, 0x4760, 0x3ef, 0x8dca, 0x139b, 0x0, 0x1);
        gbc.writeMem(0x332f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xc37d);
        EXPECT(gbc.pc(), 0x3330);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0311
        gbc.setState(0x69b8, 0x2ad3, 0x20, 0xb253, 0x5635, 0x35e8, 0x0, 0x0);
        gbc.writeMem(0x69b8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x2ad3);
        EXPECT(gbc.pc(), 0x69b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0312
        gbc.setState(0x1735, 0x6f97, 0x8db0, 0x5aeb, 0x2b90, 0x7e94, 0x1, 0x1);
        gbc.writeMem(0x1735, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x6f97);
        EXPECT(gbc.pc(), 0x1736);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0313
        gbc.setState(0x89cb, 0x9f7, 0x31a0, 0xee2b, 0x9da9, 0x8c1c, 0x0, 0x0);
        gbc.writeMem(0x89cb, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x9f7);
        EXPECT(gbc.pc(), 0x89cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89cb), 0xf3);
        // F3 0314
        gbc.setState(0xbe7d, 0x876c, 0xbbf0, 0xaae2, 0x3110, 0xb3b7, 0x1, 0x1);
        gbc.writeMem(0xbe7d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x876c);
        EXPECT(gbc.pc(), 0xbe7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe7d), 0xf3);
        // F3 0315
        gbc.setState(0xcdfa, 0x9bd8, 0xb4f0, 0xb85a, 0xf766, 0x449c, 0x0, 0x0);
        gbc.writeMem(0xcdfa, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x9bd8);
        EXPECT(gbc.pc(), 0xcdfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdfa), 0xf3);
        // F3 0316
        gbc.setState(0x607, 0x647e, 0x1880, 0x3915, 0x7211, 0xab4d, 0x1, 0x0);
        gbc.writeMem(0x607, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x647e);
        EXPECT(gbc.pc(), 0x608);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0317
        gbc.setState(0xb5d6, 0x7269, 0x8ae0, 0x44e4, 0xba6a, 0x2ce0, 0x0, 0x1);
        gbc.writeMem(0xb5d6, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x7269);
        EXPECT(gbc.pc(), 0xb5d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5d6), 0xf3);
        // F3 0319
        gbc.setState(0x43cb, 0x9837, 0x6670, 0xf41d, 0xa49f, 0xe6a, 0x0, 0x0);
        gbc.writeMem(0x43cb, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x9837);
        EXPECT(gbc.pc(), 0x43cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 031A
        gbc.setState(0x82bf, 0x332e, 0xdb20, 0xe5c9, 0x5e5b, 0x14e7, 0x0, 0x1);
        gbc.writeMem(0x82bf, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x332e);
        EXPECT(gbc.pc(), 0x82c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82bf), 0xf3);
        // F3 031B
        gbc.setState(0x930a, 0xa8e9, 0x87f0, 0x85d2, 0xa651, 0x8a94, 0x0, 0x1);
        gbc.writeMem(0x930a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xa8e9);
        EXPECT(gbc.pc(), 0x930b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x930a), 0xf3);
        // F3 031C
        gbc.setState(0x2d2a, 0xef44, 0xb7c0, 0xac0b, 0x91bf, 0xed7, 0x0, 0x0);
        gbc.writeMem(0x2d2a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xef44);
        EXPECT(gbc.pc(), 0x2d2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 031E
        gbc.setState(0x4cb9, 0x688c, 0xbf70, 0x782f, 0xc217, 0xf9f1, 0x0, 0x0);
        gbc.writeMem(0x4cb9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x688c);
        EXPECT(gbc.pc(), 0x4cba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 031F
        gbc.setState(0xc933, 0xefa6, 0xb00, 0x888b, 0x62c1, 0xfd39, 0x1, 0x1);
        gbc.writeMem(0xc933, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xefa6);
        EXPECT(gbc.pc(), 0xc934);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc933), 0xf3);
        // F3 0320
        gbc.setState(0xbed8, 0x266c, 0xf910, 0x836, 0x304e, 0xbfa5, 0x0, 0x1);
        gbc.writeMem(0xbed8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x266c);
        EXPECT(gbc.pc(), 0xbed9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbed8), 0xf3);
        // F3 0321
        gbc.setState(0x9c58, 0x12b3, 0x1390, 0xbebb, 0xf180, 0xfef2, 0x0, 0x1);
        gbc.writeMem(0x9c58, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x12b3);
        EXPECT(gbc.pc(), 0x9c59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c58), 0xf3);
        // F3 0322
        gbc.setState(0x2cdc, 0x8eb2, 0xb3a0, 0xc9e5, 0xe04a, 0xd7bc, 0x0, 0x0);
        gbc.writeMem(0x2cdc, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x8eb2);
        EXPECT(gbc.pc(), 0x2cdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0323
        gbc.setState(0xa4f0, 0x2722, 0x7e80, 0xa7ad, 0x810b, 0x3cf5, 0x1, 0x0);
        gbc.writeMem(0xa4f0, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x2722);
        EXPECT(gbc.pc(), 0xa4f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4f0), 0xf3);
        // F3 0324
        gbc.setState(0xb58a, 0x1396, 0xd070, 0x4677, 0x9639, 0xca91, 0x1, 0x1);
        gbc.writeMem(0xb58a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x1396);
        EXPECT(gbc.pc(), 0xb58b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb58a), 0xf3);
        // F3 0325
        gbc.setState(0x45b5, 0x26be, 0xd780, 0xa651, 0x3033, 0xa513, 0x1, 0x1);
        gbc.writeMem(0x45b5, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x26be);
        EXPECT(gbc.pc(), 0x45b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0326
        gbc.setState(0x491c, 0xd36d, 0x9ba0, 0x22d7, 0x9ea1, 0xd666, 0x1, 0x1);
        gbc.writeMem(0x491c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd36d);
        EXPECT(gbc.pc(), 0x491d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0327
        gbc.setState(0xdd16, 0xaef5, 0x9a60, 0x7cd0, 0xa514, 0x41ce, 0x1, 0x0);
        gbc.writeMem(0xdd16, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xaef5);
        EXPECT(gbc.pc(), 0xdd17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd16), 0xf3);
        // F3 0328
        gbc.setState(0x5873, 0xa569, 0xb590, 0x5eed, 0x5473, 0x918, 0x1, 0x0);
        gbc.writeMem(0x5873, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xa569);
        EXPECT(gbc.pc(), 0x5874);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0329
        gbc.setState(0xaf9d, 0x99f7, 0xa510, 0x55d2, 0x7b41, 0x5fda, 0x0, 0x1);
        gbc.writeMem(0xaf9d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x99f7);
        EXPECT(gbc.pc(), 0xaf9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf9d), 0xf3);
        // F3 032A
        gbc.setState(0x2478, 0xd349, 0x7d50, 0x1a5b, 0x5865, 0x644c, 0x0, 0x1);
        gbc.writeMem(0x2478, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd349);
        EXPECT(gbc.pc(), 0x2479);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 032B
        gbc.setState(0x2c05, 0x80f4, 0x11c0, 0x3940, 0x1aca, 0x4491, 0x0, 0x0);
        gbc.writeMem(0x2c05, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x80f4);
        EXPECT(gbc.pc(), 0x2c06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 032C
        gbc.setState(0xcf83, 0x55be, 0x3930, 0x2ec, 0xceac, 0x8781, 0x0, 0x1);
        gbc.writeMem(0xcf83, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x55be);
        EXPECT(gbc.pc(), 0xcf84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf83), 0xf3);
        // F3 032D
        gbc.setState(0xb988, 0xc575, 0xe450, 0xc88e, 0xdf2b, 0x6451, 0x0, 0x0);
        gbc.writeMem(0xb988, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xc575);
        EXPECT(gbc.pc(), 0xb989);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb988), 0xf3);
        // F3 032E
        gbc.setState(0x3b7d, 0xde09, 0xa420, 0xacea, 0xf6b7, 0xff12, 0x0, 0x0);
        gbc.writeMem(0x3b7d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xde09);
        EXPECT(gbc.pc(), 0x3b7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 032F
        gbc.setState(0x207d, 0xf3fb, 0x7b30, 0x431, 0x7a99, 0x28a7, 0x1, 0x1);
        gbc.writeMem(0x207d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xf3fb);
        EXPECT(gbc.pc(), 0x207e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0331
        gbc.setState(0x3d5e, 0xb1a5, 0xa890, 0x1222, 0x2945, 0x5326, 0x1, 0x1);
        gbc.writeMem(0x3d5e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xb1a5);
        EXPECT(gbc.pc(), 0x3d5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0332
        gbc.setState(0xed6b, 0xb737, 0x6700, 0x6441, 0xb25a, 0x26bc, 0x1, 0x0);
        gbc.writeMem(0xed6b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xb737);
        EXPECT(gbc.pc(), 0xed6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed6b), 0xf3);
        // F3 0333
        gbc.setState(0x4f52, 0x2aa9, 0x7540, 0x4f2b, 0x3ccb, 0x336, 0x1, 0x0);
        gbc.writeMem(0x4f52, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x2aa9);
        EXPECT(gbc.pc(), 0x4f53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0334
        gbc.setState(0x73e0, 0x3a12, 0x92c0, 0xd095, 0x6b62, 0xcf6e, 0x1, 0x1);
        gbc.writeMem(0x73e0, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x3a12);
        EXPECT(gbc.pc(), 0x73e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0335
        gbc.setState(0xd763, 0x3369, 0x4140, 0x6f98, 0xb1da, 0x5c2f, 0x0, 0x1);
        gbc.writeMem(0xd763, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x3369);
        EXPECT(gbc.pc(), 0xd764);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd763), 0xf3);
        // F3 0336
        gbc.setState(0xba6b, 0x528c, 0x95b0, 0x373c, 0xb0f3, 0xe701, 0x0, 0x0);
        gbc.writeMem(0xba6b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x528c);
        EXPECT(gbc.pc(), 0xba6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba6b), 0xf3);
        // F3 0337
        gbc.setState(0xb506, 0x2adc, 0xd300, 0x7eda, 0x6d2c, 0x6739, 0x1, 0x0);
        gbc.writeMem(0xb506, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x2adc);
        EXPECT(gbc.pc(), 0xb507);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb506), 0xf3);
        // F3 0338
        gbc.setState(0x4cdb, 0x6c9d, 0xbfc0, 0xdad2, 0xac39, 0x7a55, 0x0, 0x1);
        gbc.writeMem(0x4cdb, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x6c9d);
        EXPECT(gbc.pc(), 0x4cdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0339
        gbc.setState(0xa6bb, 0xa0cc, 0x45a0, 0x41fe, 0x19ff, 0x8e8c, 0x1, 0x0);
        gbc.writeMem(0xa6bb, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xa0cc);
        EXPECT(gbc.pc(), 0xa6bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6bb), 0xf3);
        // F3 033A
        gbc.setState(0x9dc9, 0x40d0, 0xd7b0, 0x533, 0xd826, 0x6868, 0x1, 0x0);
        gbc.writeMem(0x9dc9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x40d0);
        EXPECT(gbc.pc(), 0x9dca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dc9), 0xf3);
        // F3 033B
        gbc.setState(0x418c, 0xae4f, 0xefe0, 0x216f, 0xe5f0, 0x8206, 0x1, 0x0);
        gbc.writeMem(0x418c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xae4f);
        EXPECT(gbc.pc(), 0x418d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 033C
        gbc.setState(0x16a9, 0x8b8a, 0x7ab0, 0xc7ec, 0xfc7c, 0xde55, 0x1, 0x0);
        gbc.writeMem(0x16a9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x8b8a);
        EXPECT(gbc.pc(), 0x16aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 033D
        gbc.setState(0x73fe, 0xe8b7, 0x8dc0, 0xfb19, 0x9b3d, 0xd0a3, 0x0, 0x0);
        gbc.writeMem(0x73fe, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xe8b7);
        EXPECT(gbc.pc(), 0x73ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 033E
        gbc.setState(0x9150, 0x7071, 0xc3d0, 0x5ccd, 0x5bd3, 0x9bd3, 0x0, 0x1);
        gbc.writeMem(0x9150, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x7071);
        EXPECT(gbc.pc(), 0x9151);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9150), 0xf3);
        // F3 033F
        gbc.setState(0x1ed6, 0x2af2, 0xbd60, 0x61a, 0x649f, 0x1b23, 0x0, 0x1);
        gbc.writeMem(0x1ed6, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x2af2);
        EXPECT(gbc.pc(), 0x1ed7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0340
        gbc.setState(0x4d48, 0xa3b0, 0x1890, 0xb649, 0xa549, 0x94ca, 0x1, 0x0);
        gbc.writeMem(0x4d48, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xa3b0);
        EXPECT(gbc.pc(), 0x4d49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0341
        gbc.setState(0xda3, 0x64ea, 0xa6c0, 0x6796, 0x78d8, 0xc30d, 0x0, 0x0);
        gbc.writeMem(0xda3, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x64ea);
        EXPECT(gbc.pc(), 0xda4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0342
        gbc.setState(0x962, 0xd4aa, 0xa130, 0xb660, 0xce7b, 0xc1e0, 0x1, 0x0);
        gbc.writeMem(0x962, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xd4aa);
        EXPECT(gbc.pc(), 0x963);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0343
        gbc.setState(0x14a1, 0x228, 0xf870, 0xf646, 0xb426, 0xa201, 0x0, 0x0);
        gbc.writeMem(0x14a1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x228);
        EXPECT(gbc.pc(), 0x14a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0344
        gbc.setState(0x86b5, 0x4ec, 0x8df0, 0xc9e1, 0xb21f, 0x76aa, 0x1, 0x1);
        gbc.writeMem(0x86b5, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x4ec);
        EXPECT(gbc.pc(), 0x86b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86b5), 0xf3);
        // F3 0345
        gbc.setState(0xb320, 0x6f43, 0x7130, 0xe9fe, 0x9a69, 0x6ada, 0x0, 0x1);
        gbc.writeMem(0xb320, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x6f43);
        EXPECT(gbc.pc(), 0xb321);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb320), 0xf3);
        // F3 0346
        gbc.setState(0x64c, 0xb6b7, 0x49c0, 0x647c, 0xbeb7, 0xdc10, 0x1, 0x0);
        gbc.writeMem(0x64c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xb6b7);
        EXPECT(gbc.pc(), 0x64d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0347
        gbc.setState(0xe10d, 0xb77f, 0x9490, 0xf3a1, 0xe352, 0xc71, 0x1, 0x0);
        gbc.writeMem(0xe10d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xb77f);
        EXPECT(gbc.pc(), 0xe10e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe10d), 0xf3);
        // F3 0348
        gbc.setState(0x1a3b, 0x336d, 0xfc90, 0xafa4, 0xb68f, 0xb664, 0x0, 0x1);
        gbc.writeMem(0x1a3b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x336d);
        EXPECT(gbc.pc(), 0x1a3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0349
        gbc.setState(0x26c8, 0xc603, 0xb350, 0x3e14, 0xd1f0, 0xb10, 0x0, 0x1);
        gbc.writeMem(0x26c8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xc603);
        EXPECT(gbc.pc(), 0x26c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 034A
        gbc.setState(0xe87d, 0x6a4, 0xcbe0, 0x79cc, 0x2e6d, 0xb71a, 0x0, 0x1);
        gbc.writeMem(0xe87d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x6a4);
        EXPECT(gbc.pc(), 0xe87e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe87d), 0xf3);
        // F3 034B
        gbc.setState(0x6f91, 0x8816, 0xa2b0, 0x8b0b, 0xb561, 0x1a07, 0x1, 0x1);
        gbc.writeMem(0x6f91, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x8816);
        EXPECT(gbc.pc(), 0x6f92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 034C
        gbc.setState(0x81e8, 0xf6c6, 0x8090, 0x3c7e, 0xb0c, 0x92f6, 0x0, 0x0);
        gbc.writeMem(0x81e8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xf6c6);
        EXPECT(gbc.pc(), 0x81e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81e8), 0xf3);
        // F3 034D
        gbc.setState(0x824e, 0x1ce5, 0x6b0, 0xe43b, 0xf9c7, 0x5394, 0x1, 0x1);
        gbc.writeMem(0x824e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1ce5);
        EXPECT(gbc.pc(), 0x824f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x824e), 0xf3);
        // F3 034E
        gbc.setState(0x7de3, 0x535, 0x4990, 0x63f3, 0xb25d, 0x10b2, 0x1, 0x1);
        gbc.writeMem(0x7de3, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x535);
        EXPECT(gbc.pc(), 0x7de4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 034F
        gbc.setState(0x3f2f, 0x5b5c, 0x7510, 0xa7fb, 0xee7, 0xac3d, 0x1, 0x0);
        gbc.writeMem(0x3f2f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x5b5c);
        EXPECT(gbc.pc(), 0x3f30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0350
        gbc.setState(0x20e1, 0x89f9, 0x21e0, 0x19c, 0x7eb6, 0x3daa, 0x0, 0x0);
        gbc.writeMem(0x20e1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x89f9);
        EXPECT(gbc.pc(), 0x20e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0351
        gbc.setState(0x4665, 0x717c, 0x7480, 0x8f34, 0xf212, 0xbf6e, 0x0, 0x1);
        gbc.writeMem(0x4665, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x717c);
        EXPECT(gbc.pc(), 0x4666);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0352
        gbc.setState(0xa232, 0xb4ad, 0x6290, 0x24e1, 0xa88b, 0xecc9, 0x1, 0x1);
        gbc.writeMem(0xa232, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xb4ad);
        EXPECT(gbc.pc(), 0xa233);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa232), 0xf3);
        // F3 0353
        gbc.setState(0x1f47, 0x12c0, 0x150, 0xa2d5, 0x9179, 0xd216, 0x1, 0x1);
        gbc.writeMem(0x1f47, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x12c0);
        EXPECT(gbc.pc(), 0x1f48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0354
        gbc.setState(0x110e, 0x7095, 0x1c40, 0x2197, 0xa843, 0x4ecc, 0x0, 0x1);
        gbc.writeMem(0x110e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x7095);
        EXPECT(gbc.pc(), 0x110f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0355
        gbc.setState(0x48a6, 0xdb89, 0xba50, 0xf099, 0xac0a, 0xaf05, 0x0, 0x0);
        gbc.writeMem(0x48a6, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xdb89);
        EXPECT(gbc.pc(), 0x48a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0356
        gbc.setState(0xc177, 0xcc24, 0x2430, 0x8787, 0x8d85, 0x36a2, 0x1, 0x0);
        gbc.writeMem(0xc177, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xcc24);
        EXPECT(gbc.pc(), 0xc178);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc177), 0xf3);
        // F3 0357
        gbc.setState(0x137d, 0xdf7f, 0xd800, 0xb4a, 0x3659, 0x8256, 0x0, 0x0);
        gbc.writeMem(0x137d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xdf7f);
        EXPECT(gbc.pc(), 0x137e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0358
        gbc.setState(0x5abb, 0xad7d, 0x2ac0, 0xb82e, 0x460c, 0x1898, 0x0, 0x1);
        gbc.writeMem(0x5abb, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xad7d);
        EXPECT(gbc.pc(), 0x5abc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0359
        gbc.setState(0x8310, 0xa02, 0x3270, 0xf480, 0xd90e, 0x5c6a, 0x1, 0x0);
        gbc.writeMem(0x8310, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xa02);
        EXPECT(gbc.pc(), 0x8311);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8310), 0xf3);
        // F3 035A
        gbc.setState(0x6e7c, 0x1921, 0x3540, 0xf06, 0xc0cf, 0x8538, 0x1, 0x0);
        gbc.writeMem(0x6e7c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x1921);
        EXPECT(gbc.pc(), 0x6e7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 035B
        gbc.setState(0x1326, 0x91f0, 0xfd90, 0x330c, 0x1232, 0x29fc, 0x0, 0x1);
        gbc.writeMem(0x1326, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x91f0);
        EXPECT(gbc.pc(), 0x1327);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 035C
        gbc.setState(0x4c10, 0xa4bb, 0x33a0, 0x913e, 0x9877, 0x5b63, 0x0, 0x1);
        gbc.writeMem(0x4c10, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xa4bb);
        EXPECT(gbc.pc(), 0x4c11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 035D
        gbc.setState(0x1fb5, 0x4c21, 0xe340, 0xd282, 0x24a2, 0x9b6c, 0x1, 0x0);
        gbc.writeMem(0x1fb5, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x4c21);
        EXPECT(gbc.pc(), 0x1fb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 035E
        gbc.setState(0x3f05, 0x3b71, 0x7c0, 0x4a17, 0x94fd, 0xf449, 0x1, 0x0);
        gbc.writeMem(0x3f05, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x3b71);
        EXPECT(gbc.pc(), 0x3f06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 035F
        gbc.setState(0x9935, 0x99, 0x6a10, 0xeb4, 0x2eca, 0x638c, 0x1, 0x1);
        gbc.writeMem(0x9935, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x99);
        EXPECT(gbc.pc(), 0x9936);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9935), 0xf3);
        // F3 0360
        gbc.setState(0x43c9, 0x9d13, 0xa940, 0x6176, 0x80df, 0x5e61, 0x1, 0x1);
        gbc.writeMem(0x43c9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x9d13);
        EXPECT(gbc.pc(), 0x43ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0361
        gbc.setState(0x2146, 0x67f, 0x2c10, 0x59bc, 0xe8e6, 0xc725, 0x0, 0x1);
        gbc.writeMem(0x2146, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x67f);
        EXPECT(gbc.pc(), 0x2147);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0362
        gbc.setState(0x5ce2, 0xf043, 0x1cf0, 0xc565, 0xa9a7, 0x86b2, 0x1, 0x0);
        gbc.writeMem(0x5ce2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xf043);
        EXPECT(gbc.pc(), 0x5ce3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0363
        gbc.setState(0xdb6d, 0xc686, 0x54e0, 0xbc13, 0x9dd, 0xeee8, 0x1, 0x0);
        gbc.writeMem(0xdb6d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xc686);
        EXPECT(gbc.pc(), 0xdb6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb6d), 0xf3);
        // F3 0364
        gbc.setState(0xa329, 0x5f42, 0xc800, 0xf400, 0x5748, 0x8f7a, 0x1, 0x0);
        gbc.writeMem(0xa329, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x5f42);
        EXPECT(gbc.pc(), 0xa32a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa329), 0xf3);
        // F3 0365
        gbc.setState(0x3b69, 0xbc3c, 0x1120, 0x104e, 0x1c17, 0xfcab, 0x1, 0x1);
        gbc.writeMem(0x3b69, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xbc3c);
        EXPECT(gbc.pc(), 0x3b6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0366
        gbc.setState(0xc23b, 0x2520, 0x7b0, 0x9fff, 0x7d8e, 0x63c4, 0x1, 0x1);
        gbc.writeMem(0xc23b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x2520);
        EXPECT(gbc.pc(), 0xc23c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc23b), 0xf3);
        // F3 0367
        gbc.setState(0xb6f6, 0x82e0, 0x67b0, 0xee0, 0xe035, 0xa496, 0x1, 0x0);
        gbc.writeMem(0xb6f6, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x82e0);
        EXPECT(gbc.pc(), 0xb6f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6f6), 0xf3);
        // F3 0368
        gbc.setState(0xbc62, 0xdb8e, 0x4b60, 0xd368, 0x3a54, 0x9b33, 0x1, 0x0);
        gbc.writeMem(0xbc62, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xdb8e);
        EXPECT(gbc.pc(), 0xbc63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc62), 0xf3);
        // F3 0369
        gbc.setState(0x2ef8, 0xe835, 0xa000, 0xf0e, 0xeba1, 0x757d, 0x0, 0x1);
        gbc.writeMem(0x2ef8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xe835);
        EXPECT(gbc.pc(), 0x2ef9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 036A
        gbc.setState(0x6b1a, 0x940e, 0xd5d0, 0xaab, 0xf9a3, 0xc3b1, 0x0, 0x1);
        gbc.writeMem(0x6b1a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x940e);
        EXPECT(gbc.pc(), 0x6b1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 036B
        gbc.setState(0xeea1, 0x1064, 0xb9b0, 0x40c5, 0xcaa, 0x5347, 0x1, 0x1);
        gbc.writeMem(0xeea1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x1064);
        EXPECT(gbc.pc(), 0xeea2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeea1), 0xf3);
        // F3 036C
        gbc.setState(0x9711, 0x1264, 0xaeb0, 0x5339, 0xd89f, 0x4af, 0x0, 0x0);
        gbc.writeMem(0x9711, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x1264);
        EXPECT(gbc.pc(), 0x9712);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9711), 0xf3);
        // F3 036D
        gbc.setState(0x5220, 0xd, 0x5930, 0xe5f, 0x5909, 0xbc3d, 0x0, 0x1);
        gbc.writeMem(0x5220, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xd);
        EXPECT(gbc.pc(), 0x5221);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 036E
        gbc.setState(0x2452, 0xd992, 0xa300, 0x39d9, 0x1c65, 0x3f18, 0x1, 0x1);
        gbc.writeMem(0x2452, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd992);
        EXPECT(gbc.pc(), 0x2453);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 036F
        gbc.setState(0xdde, 0x579d, 0xfb70, 0xdab0, 0x5c66, 0xcfe6, 0x1, 0x1);
        gbc.writeMem(0xdde, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x579d);
        EXPECT(gbc.pc(), 0xddf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0370
        gbc.setState(0x54c7, 0x5e2, 0x9f30, 0xad21, 0x57d1, 0xc7a1, 0x0, 0x0);
        gbc.writeMem(0x54c7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x5e2);
        EXPECT(gbc.pc(), 0x54c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 0372
        gbc.setState(0xdb12, 0x3577, 0x5890, 0x8d02, 0xc3c6, 0x37af, 0x1, 0x0);
        gbc.writeMem(0xdb12, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x3577);
        EXPECT(gbc.pc(), 0xdb13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb12), 0xf3);
        // F3 0373
        gbc.setState(0x1a83, 0xfb9c, 0xea90, 0xe5fb, 0x75db, 0xf415, 0x0, 0x1);
        gbc.writeMem(0x1a83, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xfb9c);
        EXPECT(gbc.pc(), 0x1a84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0375
        gbc.setState(0xe03b, 0x5b44, 0xc0d0, 0x8f1e, 0x58e, 0xbab2, 0x0, 0x1);
        gbc.writeMem(0xe03b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x5b44);
        EXPECT(gbc.pc(), 0xe03c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe03b), 0xf3);
        // F3 0376
        gbc.setState(0x8864, 0xabd9, 0x6340, 0x2df2, 0x56b9, 0x9bb9, 0x1, 0x0);
        gbc.writeMem(0x8864, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xabd9);
        EXPECT(gbc.pc(), 0x8865);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8864), 0xf3);
        // F3 0377
        gbc.setState(0x7bd0, 0xfd3f, 0x7300, 0x39ef, 0x294f, 0x4c67, 0x0, 0x0);
        gbc.writeMem(0x7bd0, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xfd3f);
        EXPECT(gbc.pc(), 0x7bd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0378
        gbc.setState(0x1f80, 0x1c44, 0x3d0, 0x7cd1, 0xe903, 0x4fb, 0x0, 0x0);
        gbc.writeMem(0x1f80, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x1c44);
        EXPECT(gbc.pc(), 0x1f81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0379
        gbc.setState(0x7edc, 0x24cd, 0xb880, 0xe34a, 0x91fc, 0x82ad, 0x0, 0x1);
        gbc.writeMem(0x7edc, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x24cd);
        EXPECT(gbc.pc(), 0x7edd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 037A
        gbc.setState(0x5731, 0xbf35, 0x2fb0, 0x69ec, 0x1888, 0x33f, 0x0, 0x0);
        gbc.writeMem(0x5731, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xbf35);
        EXPECT(gbc.pc(), 0x5732);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 037B
        gbc.setState(0x88d7, 0xf5a8, 0x1620, 0xd1a2, 0xb2d2, 0xed49, 0x0, 0x1);
        gbc.writeMem(0x88d7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xf5a8);
        EXPECT(gbc.pc(), 0x88d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88d7), 0xf3);
        // F3 037C
        gbc.setState(0x7d86, 0x60c6, 0x3b60, 0x59a7, 0x5ddf, 0x21a1, 0x1, 0x0);
        gbc.writeMem(0x7d86, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x60c6);
        EXPECT(gbc.pc(), 0x7d87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 037D
        gbc.setState(0x1dca, 0x1c1f, 0x6f30, 0x88d2, 0x3241, 0x171e, 0x0, 0x1);
        gbc.writeMem(0x1dca, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x1c1f);
        EXPECT(gbc.pc(), 0x1dcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 037E
        gbc.setState(0xe3a3, 0xee77, 0x24c0, 0x3190, 0x7e2e, 0xa87a, 0x1, 0x0);
        gbc.writeMem(0xe3a3, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xee77);
        EXPECT(gbc.pc(), 0xe3a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3a3), 0xf3);
        // F3 037F
        gbc.setState(0x720, 0xf71f, 0xa160, 0xdbbc, 0xdeba, 0xf860, 0x1, 0x1);
        gbc.writeMem(0x720, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xf71f);
        EXPECT(gbc.pc(), 0x721);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0380
        gbc.setState(0x8349, 0x140a, 0x6370, 0x150d, 0x483f, 0xa04f, 0x1, 0x0);
        gbc.writeMem(0x8349, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x140a);
        EXPECT(gbc.pc(), 0x834a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8349), 0xf3);
        // F3 0381
        gbc.setState(0x5650, 0xea73, 0x4ca0, 0xfbe0, 0xc276, 0x15a5, 0x1, 0x0);
        gbc.writeMem(0x5650, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xea73);
        EXPECT(gbc.pc(), 0x5651);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0383
        gbc.setState(0xc5ff, 0x439b, 0xc470, 0x3f49, 0x70af, 0xe019, 0x0, 0x1);
        gbc.writeMem(0xc5ff, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x439b);
        EXPECT(gbc.pc(), 0xc600);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5ff), 0xf3);
        // F3 0384
        gbc.setState(0xe91b, 0x5ed9, 0x45c0, 0x1141, 0x7333, 0xbaf1, 0x0, 0x0);
        gbc.writeMem(0xe91b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x5ed9);
        EXPECT(gbc.pc(), 0xe91c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe91b), 0xf3);
        // F3 0385
        gbc.setState(0x54ae, 0xe6aa, 0x9210, 0xed06, 0x7c24, 0x2a87, 0x0, 0x1);
        gbc.writeMem(0x54ae, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xe6aa);
        EXPECT(gbc.pc(), 0x54af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0386
        gbc.setState(0x9d91, 0x10f5, 0x9cb0, 0x67f8, 0xcac4, 0x1378, 0x1, 0x0);
        gbc.writeMem(0x9d91, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x10f5);
        EXPECT(gbc.pc(), 0x9d92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d91), 0xf3);
        // F3 0387
        gbc.setState(0x90d5, 0xe539, 0xb9a0, 0x54f5, 0x7ff2, 0x57f4, 0x0, 0x0);
        gbc.writeMem(0x90d5, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xe539);
        EXPECT(gbc.pc(), 0x90d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90d5), 0xf3);
        // F3 0388
        gbc.setState(0x8b44, 0xd37b, 0xf800, 0xa77a, 0x2677, 0x47c3, 0x0, 0x1);
        gbc.writeMem(0x8b44, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xd37b);
        EXPECT(gbc.pc(), 0x8b45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b44), 0xf3);
        // F3 0389
        gbc.setState(0xe1e5, 0xf37f, 0x4170, 0x95f9, 0x6054, 0x3470, 0x1, 0x0);
        gbc.writeMem(0xe1e5, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xf37f);
        EXPECT(gbc.pc(), 0xe1e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1e5), 0xf3);
        // F3 038A
        gbc.setState(0x3b8a, 0x627c, 0xfe40, 0xde7a, 0xb0b1, 0x46ac, 0x0, 0x1);
        gbc.writeMem(0x3b8a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x627c);
        EXPECT(gbc.pc(), 0x3b8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 038B
        gbc.setState(0xa5f9, 0x2b6a, 0x9600, 0xf630, 0x6205, 0xe2de, 0x1, 0x0);
        gbc.writeMem(0xa5f9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x2b6a);
        EXPECT(gbc.pc(), 0xa5fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5f9), 0xf3);
        // F3 038C
        gbc.setState(0x9149, 0x8261, 0x10f0, 0x5208, 0xcf45, 0x3915, 0x1, 0x0);
        gbc.writeMem(0x9149, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8261);
        EXPECT(gbc.pc(), 0x914a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9149), 0xf3);
        // F3 038D
        gbc.setState(0x53b1, 0x6d1d, 0x1190, 0xfb0b, 0x7a08, 0xd884, 0x1, 0x1);
        gbc.writeMem(0x53b1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x6d1d);
        EXPECT(gbc.pc(), 0x53b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 038E
        gbc.setState(0x69ff, 0x2a2, 0xe6c0, 0x1adc, 0xcdef, 0x61f6, 0x1, 0x1);
        gbc.writeMem(0x69ff, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x2a2);
        EXPECT(gbc.pc(), 0x6a00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 038F
        gbc.setState(0x3926, 0x8cd9, 0x37c0, 0x3b75, 0xc93e, 0x830, 0x0, 0x0);
        gbc.writeMem(0x3926, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x8cd9);
        EXPECT(gbc.pc(), 0x3927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0390
        gbc.setState(0x3da7, 0x6c6a, 0xc390, 0xe88b, 0x5334, 0xcf5d, 0x0, 0x0);
        gbc.writeMem(0x3da7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x6c6a);
        EXPECT(gbc.pc(), 0x3da8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0391
        gbc.setState(0x4d0a, 0x38f2, 0x8450, 0xb02a, 0xe4a6, 0x4205, 0x1, 0x0);
        gbc.writeMem(0x4d0a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x38f2);
        EXPECT(gbc.pc(), 0x4d0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0393
        gbc.setState(0xd6bd, 0xb960, 0x56c0, 0xc86c, 0x4e68, 0x50a3, 0x0, 0x1);
        gbc.writeMem(0xd6bd, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xb960);
        EXPECT(gbc.pc(), 0xd6be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6bd), 0xf3);
        // F3 0394
        gbc.setState(0xd951, 0xc223, 0x9b80, 0x3c79, 0x206f, 0xeb38, 0x0, 0x1);
        gbc.writeMem(0xd951, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xc223);
        EXPECT(gbc.pc(), 0xd952);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd951), 0xf3);
        // F3 0395
        gbc.setState(0x5098, 0xcc49, 0xcc00, 0xc826, 0x7c87, 0x307b, 0x1, 0x0);
        gbc.writeMem(0x5098, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xcc49);
        EXPECT(gbc.pc(), 0x5099);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 0396
        gbc.setState(0x378f, 0xc238, 0x8ce0, 0xbe23, 0xb4ff, 0x3bc1, 0x1, 0x1);
        gbc.writeMem(0x378f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xc238);
        EXPECT(gbc.pc(), 0x3790);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 0397
        gbc.setState(0xbed0, 0xd4ba, 0x6210, 0xff44, 0x6ac0, 0xcca8, 0x1, 0x1);
        gbc.writeMem(0xbed0, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd4ba);
        EXPECT(gbc.pc(), 0xbed1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbed0), 0xf3);
        // F3 0398
        gbc.setState(0x53c2, 0xb340, 0x1e50, 0x5ba1, 0xaf8, 0x5444, 0x1, 0x1);
        gbc.writeMem(0x53c2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xb340);
        EXPECT(gbc.pc(), 0x53c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 0399
        gbc.setState(0x6718, 0x3837, 0xd190, 0x85f5, 0x5dde, 0xe58c, 0x0, 0x0);
        gbc.writeMem(0x6718, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x3837);
        EXPECT(gbc.pc(), 0x6719);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 039A
        gbc.setState(0x1c04, 0x5cf, 0x7d90, 0x6785, 0xeb1e, 0x25e1, 0x0, 0x0);
        gbc.writeMem(0x1c04, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5cf);
        EXPECT(gbc.pc(), 0x1c05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 039B
        gbc.setState(0xd960, 0x5aa6, 0x8320, 0x48fc, 0xc606, 0x76d7, 0x0, 0x1);
        gbc.writeMem(0xd960, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x5aa6);
        EXPECT(gbc.pc(), 0xd961);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd960), 0xf3);
        // F3 039D
        gbc.setState(0xabb3, 0x12b8, 0xc0f0, 0x3c8e, 0x3f25, 0x8a72, 0x0, 0x1);
        gbc.writeMem(0xabb3, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x12b8);
        EXPECT(gbc.pc(), 0xabb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabb3), 0xf3);
        // F3 039E
        gbc.setState(0xdadd, 0x77e9, 0x14c0, 0x783c, 0x34b1, 0x424d, 0x1, 0x1);
        gbc.writeMem(0xdadd, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x77e9);
        EXPECT(gbc.pc(), 0xdade);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdadd), 0xf3);
        // F3 039F
        gbc.setState(0xaa79, 0x7958, 0x5a20, 0x6949, 0xf059, 0x19fc, 0x1, 0x0);
        gbc.writeMem(0xaa79, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x7958);
        EXPECT(gbc.pc(), 0xaa7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa79), 0xf3);
        // F3 03A0
        gbc.setState(0x65b0, 0xcd01, 0x3e50, 0xf2db, 0x6d88, 0xd7, 0x0, 0x1);
        gbc.writeMem(0x65b0, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xcd01);
        EXPECT(gbc.pc(), 0x65b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 03A1
        gbc.setState(0x1aca, 0xd4b0, 0xe830, 0x5583, 0xc7a7, 0x5875, 0x1, 0x1);
        gbc.writeMem(0x1aca, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xd4b0);
        EXPECT(gbc.pc(), 0x1acb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 03A2
        gbc.setState(0x5874, 0x7888, 0xfcd0, 0xf6a, 0xcead, 0x3f61, 0x1, 0x0);
        gbc.writeMem(0x5874, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x7888);
        EXPECT(gbc.pc(), 0x5875);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 03A3
        gbc.setState(0xd498, 0x11b8, 0xaa90, 0xdacd, 0x3edc, 0x8d02, 0x1, 0x0);
        gbc.writeMem(0xd498, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x11b8);
        EXPECT(gbc.pc(), 0xd499);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd498), 0xf3);
        // F3 03A4
        gbc.setState(0xe2a2, 0xbc82, 0x8b60, 0x1479, 0xeb5e, 0x89ca, 0x1, 0x0);
        gbc.writeMem(0xe2a2, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xbc82);
        EXPECT(gbc.pc(), 0xe2a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2a2), 0xf3);
        // F3 03A5
        gbc.setState(0x6256, 0x393e, 0x900, 0x9ea1, 0x5af9, 0xd84d, 0x0, 0x0);
        gbc.writeMem(0x6256, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x393e);
        EXPECT(gbc.pc(), 0x6257);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 03A7
        gbc.setState(0xc74c, 0x8865, 0xa820, 0xf632, 0x1ced, 0xb87f, 0x1, 0x0);
        gbc.writeMem(0xc74c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x8865);
        EXPECT(gbc.pc(), 0xc74d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc74c), 0xf3);
        // F3 03A8
        gbc.setState(0x87b4, 0xab6b, 0x5680, 0xe51, 0xc6aa, 0xa74c, 0x1, 0x0);
        gbc.writeMem(0x87b4, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xab6b);
        EXPECT(gbc.pc(), 0x87b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87b4), 0xf3);
        // F3 03A9
        gbc.setState(0x7ed7, 0x63e4, 0x7c00, 0x200a, 0x63a1, 0xed8a, 0x0, 0x0);
        gbc.writeMem(0x7ed7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x63e4);
        EXPECT(gbc.pc(), 0x7ed8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 03AA
        gbc.setState(0xa9e9, 0xda72, 0x5f00, 0x1d02, 0x430d, 0x4c69, 0x0, 0x0);
        gbc.writeMem(0xa9e9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xda72);
        EXPECT(gbc.pc(), 0xa9ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9e9), 0xf3);
        // F3 03AB
        gbc.setState(0xa78b, 0xd426, 0x98d0, 0x5c49, 0xcac5, 0x637c, 0x0, 0x0);
        gbc.writeMem(0xa78b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xd426);
        EXPECT(gbc.pc(), 0xa78c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa78b), 0xf3);
        // F3 03AC
        gbc.setState(0x2094, 0x29f8, 0x63f0, 0x8493, 0xacaf, 0xc81b, 0x0, 0x0);
        gbc.writeMem(0x2094, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x29f8);
        EXPECT(gbc.pc(), 0x2095);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 03AD
        gbc.setState(0x9ed8, 0xa5c1, 0xbe30, 0x2e71, 0x7a78, 0xa329, 0x0, 0x0);
        gbc.writeMem(0x9ed8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xa5c1);
        EXPECT(gbc.pc(), 0x9ed9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ed8), 0xf3);
        // F3 03AE
        gbc.setState(0x30e5, 0x69df, 0x5900, 0x1c08, 0xe86d, 0xb87e, 0x0, 0x0);
        gbc.writeMem(0x30e5, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x69df);
        EXPECT(gbc.pc(), 0x30e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 03AF
        gbc.setState(0x975c, 0xde2a, 0x4ad0, 0xb71c, 0x2d3f, 0x4549, 0x0, 0x0);
        gbc.writeMem(0x975c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xde2a);
        EXPECT(gbc.pc(), 0x975d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x975c), 0xf3);
        // F3 03B0
        gbc.setState(0x46e5, 0x1f53, 0x82a0, 0x240e, 0xf571, 0x3c67, 0x0, 0x0);
        gbc.writeMem(0x46e5, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x1f53);
        EXPECT(gbc.pc(), 0x46e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 03B1
        gbc.setState(0x728b, 0x33a8, 0xeff0, 0xe34d, 0xe61a, 0x601e, 0x0, 0x1);
        gbc.writeMem(0x728b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x33a8);
        EXPECT(gbc.pc(), 0x728c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 03B3
        gbc.setState(0x90f6, 0xa7a9, 0x9a70, 0x5323, 0xe2c5, 0x36ac, 0x1, 0x0);
        gbc.writeMem(0x90f6, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xa7a9);
        EXPECT(gbc.pc(), 0x90f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90f6), 0xf3);
        // F3 03B4
        gbc.setState(0x267f, 0x114d, 0xb4c0, 0x190b, 0x75f7, 0x5739, 0x1, 0x0);
        gbc.writeMem(0x267f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x114d);
        EXPECT(gbc.pc(), 0x2680);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 03B5
        gbc.setState(0x55c0, 0x4fbb, 0x1d40, 0xb323, 0xeea6, 0xfbcc, 0x1, 0x0);
        gbc.writeMem(0x55c0, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x4fbb);
        EXPECT(gbc.pc(), 0x55c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 03B6
        gbc.setState(0x1e7f, 0x1921, 0xe90, 0x7eb9, 0xa744, 0xb6b1, 0x1, 0x0);
        gbc.writeMem(0x1e7f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x1921);
        EXPECT(gbc.pc(), 0x1e80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 03B7
        gbc.setState(0x76ec, 0x2b1a, 0xeaf0, 0x7050, 0x2e4, 0x9d60, 0x1, 0x0);
        gbc.writeMem(0x76ec, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x2b1a);
        EXPECT(gbc.pc(), 0x76ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 03B8
        gbc.setState(0x88e9, 0xd07e, 0xf9a0, 0xedf, 0xf3d2, 0xbcfa, 0x0, 0x0);
        gbc.writeMem(0x88e9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xd07e);
        EXPECT(gbc.pc(), 0x88ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88e9), 0xf3);
        // F3 03B9
        gbc.setState(0x59d1, 0x5843, 0x69a0, 0x5f0b, 0x1081, 0x2a21, 0x1, 0x1);
        gbc.writeMem(0x59d1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x5843);
        EXPECT(gbc.pc(), 0x59d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 03BA
        gbc.setState(0x9214, 0xfd4e, 0x9b00, 0x6999, 0x9401, 0xe9cc, 0x1, 0x1);
        gbc.writeMem(0x9214, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xfd4e);
        EXPECT(gbc.pc(), 0x9215);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9214), 0xf3);
        // F3 03BB
        gbc.setState(0x90fe, 0xc018, 0xcd20, 0x7d86, 0xcfa5, 0x6b08, 0x1, 0x1);
        gbc.writeMem(0x90fe, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xc018);
        EXPECT(gbc.pc(), 0x90ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90fe), 0xf3);
        // F3 03BC
        gbc.setState(0xaf0c, 0x43f6, 0x1000, 0x61b1, 0x72b7, 0x7b26, 0x0, 0x0);
        gbc.writeMem(0xaf0c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x43f6);
        EXPECT(gbc.pc(), 0xaf0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf0c), 0xf3);
        // F3 03BD
        gbc.setState(0x7db8, 0x2315, 0x8140, 0x19de, 0x277d, 0xab14, 0x0, 0x1);
        gbc.writeMem(0x7db8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x2315);
        EXPECT(gbc.pc(), 0x7db9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 03BE
        gbc.setState(0xcb6d, 0x23a1, 0x6140, 0x57bf, 0x3f83, 0x2f14, 0x1, 0x1);
        gbc.writeMem(0xcb6d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x23a1);
        EXPECT(gbc.pc(), 0xcb6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb6d), 0xf3);
        // F3 03BF
        gbc.setState(0xfff, 0x488, 0xa260, 0x607f, 0x880a, 0x4f24, 0x0, 0x1);
        gbc.writeMem(0xfff, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x488);
        EXPECT(gbc.pc(), 0x1000);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 03C0
        gbc.setState(0x852b, 0x25a1, 0x1550, 0x7814, 0x340a, 0xa454, 0x0, 0x1);
        gbc.writeMem(0x852b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x25a1);
        EXPECT(gbc.pc(), 0x852c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x852b), 0xf3);
        // F3 03C1
        gbc.setState(0x6b7b, 0x23fb, 0xffa0, 0x700, 0x7c53, 0xbf9f, 0x0, 0x0);
        gbc.writeMem(0x6b7b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x23fb);
        EXPECT(gbc.pc(), 0x6b7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 03C2
        gbc.setState(0xcd04, 0x423c, 0x9a60, 0x5fe0, 0x3e52, 0x16d2, 0x1, 0x0);
        gbc.writeMem(0xcd04, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x423c);
        EXPECT(gbc.pc(), 0xcd05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd04), 0xf3);
        // F3 03C4
        gbc.setState(0x5e3f, 0xd265, 0x9010, 0x3a18, 0xe4e2, 0xef68, 0x1, 0x0);
        gbc.writeMem(0x5e3f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xd265);
        EXPECT(gbc.pc(), 0x5e40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 03C5
        gbc.setState(0xd883, 0xafa4, 0x3020, 0x24d6, 0xf99, 0x9a7, 0x1, 0x0);
        gbc.writeMem(0xd883, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xafa4);
        EXPECT(gbc.pc(), 0xd884);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd883), 0xf3);
        // F3 03C6
        gbc.setState(0x9a4b, 0x6acc, 0xad60, 0x2eb3, 0xf04e, 0x60b, 0x1, 0x1);
        gbc.writeMem(0x9a4b, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x6acc);
        EXPECT(gbc.pc(), 0x9a4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a4b), 0xf3);
        // F3 03C7
        gbc.setState(0xbe07, 0x71b0, 0x3050, 0x6228, 0xc500, 0xcf0e, 0x0, 0x0);
        gbc.writeMem(0xbe07, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x71b0);
        EXPECT(gbc.pc(), 0xbe08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe07), 0xf3);
        // F3 03C8
        gbc.setState(0xd495, 0xf4e2, 0x4990, 0x37ac, 0x483, 0x3e21, 0x0, 0x0);
        gbc.writeMem(0xd495, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xf4e2);
        EXPECT(gbc.pc(), 0xd496);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd495), 0xf3);
        // F3 03C9
        gbc.setState(0x256d, 0x6013, 0xe370, 0xf05f, 0xca6a, 0xc474, 0x0, 0x1);
        gbc.writeMem(0x256d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x6013);
        EXPECT(gbc.pc(), 0x256e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 03CA
        gbc.setState(0xec9, 0x73b, 0x8460, 0xf692, 0x39f7, 0x76ae, 0x0, 0x0);
        gbc.writeMem(0xec9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x73b);
        EXPECT(gbc.pc(), 0xeca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 03CB
        gbc.setState(0x409a, 0x8ce, 0xfc00, 0x1901, 0x3e6d, 0x758e, 0x1, 0x0);
        gbc.writeMem(0x409a, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x8ce);
        EXPECT(gbc.pc(), 0x409b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 03CC
        gbc.setState(0x57ff, 0xe53b, 0x25d0, 0x71c9, 0xeaa1, 0xaca0, 0x0, 0x1);
        gbc.writeMem(0x57ff, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xe53b);
        EXPECT(gbc.pc(), 0x5800);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 03CD
        gbc.setState(0x2206, 0x7ab5, 0x2d90, 0x5158, 0xfdcd, 0x5780, 0x0, 0x0);
        gbc.writeMem(0x2206, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x7ab5);
        EXPECT(gbc.pc(), 0x2207);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 03CE
        gbc.setState(0x151c, 0xaf6d, 0xd010, 0xe1fc, 0x9b59, 0x13c3, 0x0, 0x0);
        gbc.writeMem(0x151c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xaf6d);
        EXPECT(gbc.pc(), 0x151d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 03CF
        gbc.setState(0x6816, 0xd13d, 0x2650, 0x29da, 0x2714, 0x12e3, 0x0, 0x1);
        gbc.writeMem(0x6816, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xd13d);
        EXPECT(gbc.pc(), 0x6817);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 03D0
        gbc.setState(0x8105, 0xaa8a, 0x2640, 0x1832, 0x8d3a, 0xce06, 0x1, 0x0);
        gbc.writeMem(0x8105, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xaa8a);
        EXPECT(gbc.pc(), 0x8106);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8105), 0xf3);
        // F3 03D1
        gbc.setState(0xab17, 0xee6f, 0x52f0, 0xe9e7, 0x1c8f, 0xb7fc, 0x0, 0x1);
        gbc.writeMem(0xab17, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xee6f);
        EXPECT(gbc.pc(), 0xab18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab17), 0xf3);
        // F3 03D2
        gbc.setState(0x5350, 0xa0e3, 0xae80, 0xf1f, 0x4c83, 0xa605, 0x0, 0x1);
        gbc.writeMem(0x5350, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xa0e3);
        EXPECT(gbc.pc(), 0x5351);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F3 03D3
        gbc.setState(0x882, 0x3c2e, 0x22d0, 0xb9d0, 0x43ca, 0x2cb1, 0x0, 0x0);
        gbc.writeMem(0x882, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x3c2e);
        EXPECT(gbc.pc(), 0x883);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 03D4
        gbc.setState(0x2918, 0x35e7, 0x9ce0, 0xca64, 0xca45, 0xcccb, 0x1, 0x1);
        gbc.writeMem(0x2918, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x35e7);
        EXPECT(gbc.pc(), 0x2919);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 03D5
        gbc.setState(0x25b1, 0xc491, 0xcad0, 0xbe02, 0xac3b, 0x6e89, 0x1, 0x1);
        gbc.writeMem(0x25b1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc491);
        EXPECT(gbc.pc(), 0x25b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 03D6
        gbc.setState(0x195f, 0xd334, 0x71f0, 0x211d, 0x76b6, 0x2f3a, 0x0, 0x0);
        gbc.writeMem(0x195f, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xd334);
        EXPECT(gbc.pc(), 0x1960);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 03D7
        gbc.setState(0xd82e, 0xe35a, 0xa250, 0x88d6, 0x262c, 0xb9fa, 0x1, 0x1);
        gbc.writeMem(0xd82e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xe35a);
        EXPECT(gbc.pc(), 0xd82f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd82e), 0xf3);
        // F3 03D8
        gbc.setState(0x65f8, 0x71c5, 0x12a0, 0xdc98, 0xdb86, 0x7d62, 0x0, 0x0);
        gbc.writeMem(0x65f8, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x71c5);
        EXPECT(gbc.pc(), 0x65f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 03D9
        gbc.setState(0xb272, 0x1341, 0xd5b0, 0x43db, 0xd7be, 0xe15f, 0x0, 0x1);
        gbc.writeMem(0xb272, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x1341);
        EXPECT(gbc.pc(), 0xb273);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb272), 0xf3);
        // F3 03DA
        gbc.setState(0xe1f4, 0x5c5f, 0xa60, 0x3fe2, 0xa8a7, 0x2dac, 0x1, 0x0);
        gbc.writeMem(0xe1f4, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x5c5f);
        EXPECT(gbc.pc(), 0xe1f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1f4), 0xf3);
        // F3 03DC
        gbc.setState(0xf23, 0xb7d1, 0x1690, 0x51e7, 0xb21d, 0x6dcc, 0x0, 0x1);
        gbc.writeMem(0xf23, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xb7d1);
        EXPECT(gbc.pc(), 0xf24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 03DD
        gbc.setState(0x5258, 0x5b62, 0xf190, 0xfd2, 0x9eb, 0xe869, 0x1, 0x0);
        gbc.writeMem(0x5258, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x5b62);
        EXPECT(gbc.pc(), 0x5259);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 03DE
        gbc.setState(0x5d3e, 0x5be4, 0xb1f0, 0x71fa, 0x848, 0xd807, 0x1, 0x0);
        gbc.writeMem(0x5d3e, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x5be4);
        EXPECT(gbc.pc(), 0x5d3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 03DF
        gbc.setState(0x60d7, 0xd19f, 0xb370, 0xbf6b, 0x2d6c, 0xf946, 0x0, 0x0);
        gbc.writeMem(0x60d7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xd19f);
        EXPECT(gbc.pc(), 0x60d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F3 03E0
        gbc.setState(0xec6c, 0x553f, 0xb850, 0x4b03, 0x3808, 0xdc7d, 0x0, 0x0);
        gbc.writeMem(0xec6c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x553f);
        EXPECT(gbc.pc(), 0xec6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec6c), 0xf3);
        // F3 03E1
        gbc.setState(0x28c7, 0x3e29, 0xea60, 0xfedc, 0xea13, 0x32fc, 0x0, 0x1);
        gbc.writeMem(0x28c7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x3e29);
        EXPECT(gbc.pc(), 0x28c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 03E2
        gbc.setState(0xde95, 0x5232, 0x7b50, 0xf8a5, 0x3dfe, 0xcd10, 0x1, 0x0);
        gbc.writeMem(0xde95, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x5232);
        EXPECT(gbc.pc(), 0xde96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde95), 0xf3);
        // F3 03E3
        gbc.setState(0xb6b7, 0xe29f, 0x1c80, 0x34c4, 0x290, 0xd870, 0x0, 0x1);
        gbc.writeMem(0xb6b7, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xe29f);
        EXPECT(gbc.pc(), 0xb6b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6b7), 0xf3);
        // F3 03E4
        gbc.setState(0xabe, 0x5609, 0xe820, 0x7d4c, 0xd412, 0x38a2, 0x0, 0x0);
        gbc.writeMem(0xabe, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x5609);
        EXPECT(gbc.pc(), 0xabf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 03E5
        gbc.setState(0x5609, 0xdfd6, 0xe690, 0x4ff2, 0x76bf, 0x7be0, 0x0, 0x0);
        gbc.writeMem(0x5609, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xdfd6);
        EXPECT(gbc.pc(), 0x560a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F3 03E6
        gbc.setState(0x34a1, 0xe586, 0x9ce0, 0x8421, 0xad41, 0x9ef0, 0x1, 0x0);
        gbc.writeMem(0x34a1, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xe586);
        EXPECT(gbc.pc(), 0x34a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F3 03E7
        gbc.setState(0x6dcd, 0x62e6, 0xa1e0, 0x615a, 0xf331, 0xe981, 0x1, 0x0);
        gbc.writeMem(0x6dcd, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x62e6);
        EXPECT(gbc.pc(), 0x6dce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
    }
}
#endif
