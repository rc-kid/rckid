#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_40)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_40) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 40 0000
        gbc.setState(0xa677, 0x2077, 0x4710, 0x6b28, 0x904e, 0xe809, 0x1, 0x0);
        gbc.writeMem(0xa677, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x2077);
        EXPECT(gbc.pc(), 0xa678);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa677), 0x40);
        // 40 0001
        gbc.setState(0xa1f7, 0xb7dc, 0xd4c0, 0xafd7, 0xf07, 0xc214, 0x0, 0x1);
        gbc.writeMem(0xa1f7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xb7dc);
        EXPECT(gbc.pc(), 0xa1f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1f7), 0x40);
        // 40 0002
        gbc.setState(0xd04, 0x1aa, 0x7340, 0xaa4e, 0x1cef, 0xf18a, 0x0, 0x1);
        gbc.writeMem(0xd04, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x1aa);
        EXPECT(gbc.pc(), 0xd05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0003
        gbc.setState(0x6e39, 0x4c9a, 0x9910, 0x2863, 0x287, 0xe6dc, 0x0, 0x0);
        gbc.writeMem(0x6e39, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x4c9a);
        EXPECT(gbc.pc(), 0x6e3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0004
        gbc.setState(0x88b5, 0xb451, 0x8a20, 0x8c7, 0x6aea, 0x6deb, 0x1, 0x0);
        gbc.writeMem(0x88b5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xb451);
        EXPECT(gbc.pc(), 0x88b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88b5), 0x40);
        // 40 0005
        gbc.setState(0x2b88, 0x438b, 0xa410, 0xe107, 0x64c8, 0x2677, 0x1, 0x1);
        gbc.writeMem(0x2b88, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x438b);
        EXPECT(gbc.pc(), 0x2b89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0006
        gbc.setState(0xed09, 0xe24f, 0xf7e0, 0xb6d4, 0xa5e, 0x5cbd, 0x0, 0x1);
        gbc.writeMem(0xed09, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xe24f);
        EXPECT(gbc.pc(), 0xed0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed09), 0x40);
        // 40 0007
        gbc.setState(0x53e7, 0x7bd6, 0xd3f0, 0xd618, 0x8fb7, 0xa36d, 0x1, 0x1);
        gbc.writeMem(0x53e7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x7bd6);
        EXPECT(gbc.pc(), 0x53e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0008
        gbc.setState(0xa9cf, 0xdc0c, 0x220, 0x696c, 0xa393, 0xe10, 0x0, 0x0);
        gbc.writeMem(0xa9cf, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xdc0c);
        EXPECT(gbc.pc(), 0xa9d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9cf), 0x40);
        // 40 0009
        gbc.setState(0x7661, 0xc3dd, 0x2710, 0xfdf, 0xabe4, 0xe3b4, 0x1, 0x1);
        gbc.writeMem(0x7661, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xc3dd);
        EXPECT(gbc.pc(), 0x7662);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 000A
        gbc.setState(0xdf01, 0x37a3, 0xf140, 0xd20d, 0x52d1, 0x4f2c, 0x0, 0x0);
        gbc.writeMem(0xdf01, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x37a3);
        EXPECT(gbc.pc(), 0xdf02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf01), 0x40);
        // 40 000B
        gbc.setState(0x9d38, 0x7aae, 0x8c70, 0xf2c, 0x9d49, 0x14fb, 0x1, 0x0);
        gbc.writeMem(0x9d38, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x7aae);
        EXPECT(gbc.pc(), 0x9d39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d38), 0x40);
        // 40 000C
        gbc.setState(0x95ed, 0x4adf, 0x9990, 0x3af0, 0x26ed, 0x411d, 0x1, 0x1);
        gbc.writeMem(0x95ed, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x4adf);
        EXPECT(gbc.pc(), 0x95ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95ed), 0x40);
        // 40 000D
        gbc.setState(0x3037, 0x7c85, 0x75c0, 0xe13a, 0xdaf2, 0xd187, 0x1, 0x1);
        gbc.writeMem(0x3037, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x7c85);
        EXPECT(gbc.pc(), 0x3038);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 000E
        gbc.setState(0xae39, 0x8866, 0xbe30, 0xa435, 0x9b9b, 0x3b51, 0x1, 0x0);
        gbc.writeMem(0xae39, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x8866);
        EXPECT(gbc.pc(), 0xae3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae39), 0x40);
        // 40 000F
        gbc.setState(0x3de4, 0x1a1, 0xde10, 0x3faf, 0xc1c5, 0x5cb7, 0x0, 0x0);
        gbc.writeMem(0x3de4, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x1a1);
        EXPECT(gbc.pc(), 0x3de5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0010
        gbc.setState(0x355d, 0x7396, 0xcce0, 0xd4bc, 0xa85f, 0x794f, 0x0, 0x1);
        gbc.writeMem(0x355d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x7396);
        EXPECT(gbc.pc(), 0x355e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0011
        gbc.setState(0xa502, 0xe80a, 0x6a00, 0xf585, 0xbae0, 0x7346, 0x1, 0x0);
        gbc.writeMem(0xa502, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xe80a);
        EXPECT(gbc.pc(), 0xa503);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa502), 0x40);
        // 40 0012
        gbc.setState(0xe76f, 0xb1f1, 0x3040, 0x8962, 0x2e51, 0x15, 0x0, 0x1);
        gbc.writeMem(0xe76f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xb1f1);
        EXPECT(gbc.pc(), 0xe770);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe76f), 0x40);
        // 40 0014
        gbc.setState(0xda5b, 0x5cb4, 0x5ee0, 0x54dc, 0x138f, 0x3b6d, 0x1, 0x1);
        gbc.writeMem(0xda5b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x5cb4);
        EXPECT(gbc.pc(), 0xda5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda5b), 0x40);
        // 40 0015
        gbc.setState(0x6d4c, 0x7d8e, 0xcce0, 0xeeb2, 0xc0b, 0xf2f3, 0x0, 0x1);
        gbc.writeMem(0x6d4c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x7d8e);
        EXPECT(gbc.pc(), 0x6d4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0016
        gbc.setState(0xe446, 0xb0e4, 0xa5a0, 0xfe6f, 0x35a3, 0x559c, 0x1, 0x1);
        gbc.writeMem(0xe446, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xb0e4);
        EXPECT(gbc.pc(), 0xe447);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe446), 0x40);
        // 40 0017
        gbc.setState(0x6e9c, 0xe07a, 0x1ab0, 0xff95, 0x7387, 0xa60f, 0x1, 0x1);
        gbc.writeMem(0x6e9c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xe07a);
        EXPECT(gbc.pc(), 0x6e9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0018
        gbc.setState(0xed05, 0xaf19, 0x68b0, 0xc5ee, 0xa23c, 0xf4b, 0x0, 0x0);
        gbc.writeMem(0xed05, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xaf19);
        EXPECT(gbc.pc(), 0xed06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed05), 0x40);
        // 40 001A
        gbc.setState(0x3ec3, 0x6216, 0x7820, 0x184a, 0x1be5, 0xc553, 0x1, 0x0);
        gbc.writeMem(0x3ec3, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x6216);
        EXPECT(gbc.pc(), 0x3ec4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 001B
        gbc.setState(0x86a5, 0x276f, 0x1260, 0xc46e, 0xfec4, 0xb02a, 0x1, 0x1);
        gbc.writeMem(0x86a5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x276f);
        EXPECT(gbc.pc(), 0x86a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86a5), 0x40);
        // 40 001C
        gbc.setState(0xaf6a, 0xe51a, 0xb190, 0x3a5a, 0xcbce, 0xefb, 0x0, 0x1);
        gbc.writeMem(0xaf6a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xe51a);
        EXPECT(gbc.pc(), 0xaf6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf6a), 0x40);
        // 40 001D
        gbc.setState(0x736e, 0xfd16, 0x3320, 0x65ef, 0xaa4b, 0x821d, 0x1, 0x1);
        gbc.writeMem(0x736e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xfd16);
        EXPECT(gbc.pc(), 0x736f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 001E
        gbc.setState(0x630, 0xbaa, 0x32f0, 0x54e0, 0x3e34, 0x2352, 0x0, 0x1);
        gbc.writeMem(0x630, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xbaa);
        EXPECT(gbc.pc(), 0x631);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 001F
        gbc.setState(0x7295, 0x37a, 0x4bb0, 0xa776, 0xabb1, 0x799f, 0x1, 0x0);
        gbc.writeMem(0x7295, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x37a);
        EXPECT(gbc.pc(), 0x7296);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0020
        gbc.setState(0x8096, 0x8373, 0xa910, 0x4bc2, 0x8fba, 0xd58b, 0x1, 0x1);
        gbc.writeMem(0x8096, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x8373);
        EXPECT(gbc.pc(), 0x8097);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8096), 0x40);
        // 40 0021
        gbc.setState(0xb047, 0x50c5, 0x7980, 0x6d05, 0x89e, 0xb16b, 0x0, 0x1);
        gbc.writeMem(0xb047, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x50c5);
        EXPECT(gbc.pc(), 0xb048);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb047), 0x40);
        // 40 0022
        gbc.setState(0x82c0, 0xff3d, 0x59f0, 0x3b6d, 0x69c7, 0x91f4, 0x1, 0x0);
        gbc.writeMem(0x82c0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xff3d);
        EXPECT(gbc.pc(), 0x82c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82c0), 0x40);
        // 40 0023
        gbc.setState(0x5778, 0x6d2a, 0x8be0, 0xd90e, 0xc49d, 0xa4d1, 0x1, 0x0);
        gbc.writeMem(0x5778, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x6d2a);
        EXPECT(gbc.pc(), 0x5779);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0024
        gbc.setState(0xc6e4, 0xa72e, 0xf920, 0xadf3, 0x7178, 0xd066, 0x1, 0x1);
        gbc.writeMem(0xc6e4, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xa72e);
        EXPECT(gbc.pc(), 0xc6e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6e4), 0x40);
        // 40 0025
        gbc.setState(0x10e2, 0xb9cc, 0x4240, 0x43e6, 0xdc15, 0x8d10, 0x0, 0x1);
        gbc.writeMem(0x10e2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xb9cc);
        EXPECT(gbc.pc(), 0x10e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0026
        gbc.setState(0x3a62, 0xd210, 0x9d80, 0xcc06, 0x5e5f, 0xd2f7, 0x0, 0x1);
        gbc.writeMem(0x3a62, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xd210);
        EXPECT(gbc.pc(), 0x3a63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0027
        gbc.setState(0xe686, 0x6d3d, 0x130, 0x6d3a, 0xf3b8, 0xf20c, 0x0, 0x1);
        gbc.writeMem(0xe686, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6d3d);
        EXPECT(gbc.pc(), 0xe687);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe686), 0x40);
        // 40 0028
        gbc.setState(0x8f33, 0x28ab, 0x51d0, 0x19aa, 0xa347, 0x791f, 0x1, 0x0);
        gbc.writeMem(0x8f33, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x28ab);
        EXPECT(gbc.pc(), 0x8f34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f33), 0x40);
        // 40 0029
        gbc.setState(0x80bb, 0x2ed8, 0xc3d0, 0xefdc, 0x717b, 0x41ab, 0x1, 0x0);
        gbc.writeMem(0x80bb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x2ed8);
        EXPECT(gbc.pc(), 0x80bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80bb), 0x40);
        // 40 002A
        gbc.setState(0xb27e, 0x11f1, 0x51d0, 0xad80, 0x6abd, 0x2559, 0x0, 0x1);
        gbc.writeMem(0xb27e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x11f1);
        EXPECT(gbc.pc(), 0xb27f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb27e), 0x40);
        // 40 002B
        gbc.setState(0x674c, 0xf323, 0x7d0, 0xd74e, 0xd550, 0x3dfe, 0x0, 0x1);
        gbc.writeMem(0x674c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xf323);
        EXPECT(gbc.pc(), 0x674d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 002E
        gbc.setState(0xeb6d, 0x25a8, 0xa6c0, 0xd518, 0x9a3b, 0x64d8, 0x0, 0x1);
        gbc.writeMem(0xeb6d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x25a8);
        EXPECT(gbc.pc(), 0xeb6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb6d), 0x40);
        // 40 002F
        gbc.setState(0x8e1b, 0xc041, 0xae10, 0x349a, 0xf583, 0x9185, 0x1, 0x1);
        gbc.writeMem(0x8e1b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc041);
        EXPECT(gbc.pc(), 0x8e1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e1b), 0x40);
        // 40 0030
        gbc.setState(0x2e75, 0x4d13, 0xc1a0, 0x973, 0x7951, 0xcb97, 0x1, 0x1);
        gbc.writeMem(0x2e75, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x4d13);
        EXPECT(gbc.pc(), 0x2e76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0031
        gbc.setState(0xa610, 0x1c62, 0x51e0, 0x12ae, 0x5425, 0x7104, 0x0, 0x0);
        gbc.writeMem(0xa610, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x1c62);
        EXPECT(gbc.pc(), 0xa611);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa610), 0x40);
        // 40 0032
        gbc.setState(0x3224, 0xe110, 0x9510, 0x2617, 0xd52d, 0xecf0, 0x1, 0x0);
        gbc.writeMem(0x3224, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xe110);
        EXPECT(gbc.pc(), 0x3225);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0033
        gbc.setState(0xc2bc, 0x2df6, 0x2e20, 0xda3, 0x7e33, 0xd6e7, 0x1, 0x1);
        gbc.writeMem(0xc2bc, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x2df6);
        EXPECT(gbc.pc(), 0xc2bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2bc), 0x40);
        // 40 0035
        gbc.setState(0x8027, 0xb67e, 0xa180, 0x45e4, 0xeaa2, 0x1f8b, 0x1, 0x0);
        gbc.writeMem(0x8027, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xb67e);
        EXPECT(gbc.pc(), 0x8028);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8027), 0x40);
        // 40 0036
        gbc.setState(0x1c02, 0xbd6a, 0x64f0, 0xc7c2, 0x1dca, 0x6dc1, 0x1, 0x0);
        gbc.writeMem(0x1c02, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xbd6a);
        EXPECT(gbc.pc(), 0x1c03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0037
        gbc.setState(0x7b15, 0xc48c, 0x4760, 0x22f3, 0x4bc7, 0x46f2, 0x0, 0x1);
        gbc.writeMem(0x7b15, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xc48c);
        EXPECT(gbc.pc(), 0x7b16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0038
        gbc.setState(0x32d3, 0x57ce, 0x46d0, 0xf83f, 0x67b1, 0xccb, 0x0, 0x0);
        gbc.writeMem(0x32d3, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x57ce);
        EXPECT(gbc.pc(), 0x32d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0039
        gbc.setState(0x3e05, 0x7988, 0x1c50, 0x5322, 0x5ed4, 0x4e47, 0x1, 0x1);
        gbc.writeMem(0x3e05, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x7988);
        EXPECT(gbc.pc(), 0x3e06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 003A
        gbc.setState(0x5d4c, 0xb48, 0x7190, 0x29c, 0x7d5e, 0xc410, 0x0, 0x1);
        gbc.writeMem(0x5d4c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xb48);
        EXPECT(gbc.pc(), 0x5d4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 003B
        gbc.setState(0xc02e, 0x997e, 0x9900, 0xe4ae, 0x4d87, 0xfa1f, 0x0, 0x0);
        gbc.writeMem(0xc02e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x997e);
        EXPECT(gbc.pc(), 0xc02f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc02e), 0x40);
        // 40 003C
        gbc.setState(0xa357, 0xf26e, 0x87f0, 0x7f27, 0x6942, 0xafb6, 0x0, 0x1);
        gbc.writeMem(0xa357, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xf26e);
        EXPECT(gbc.pc(), 0xa358);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa357), 0x40);
        // 40 003D
        gbc.setState(0x3e55, 0xc7e4, 0x12f0, 0xa9c4, 0x6cbf, 0x5060, 0x0, 0x1);
        gbc.writeMem(0x3e55, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xc7e4);
        EXPECT(gbc.pc(), 0x3e56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 003E
        gbc.setState(0xb673, 0xaaed, 0xfef0, 0xc8cb, 0xf8d7, 0x155d, 0x1, 0x1);
        gbc.writeMem(0xb673, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xaaed);
        EXPECT(gbc.pc(), 0xb674);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb673), 0x40);
        // 40 003F
        gbc.setState(0xcd9e, 0x238f, 0xf2d0, 0xb87a, 0x2c11, 0xbca7, 0x0, 0x0);
        gbc.writeMem(0xcd9e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x238f);
        EXPECT(gbc.pc(), 0xcd9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd9e), 0x40);
        // 40 0040
        gbc.setState(0x6760, 0xae99, 0xf500, 0xc4cc, 0x2d2a, 0xef74, 0x1, 0x0);
        gbc.writeMem(0x6760, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xae99);
        EXPECT(gbc.pc(), 0x6761);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0041
        gbc.setState(0x6884, 0xe6cd, 0x7a20, 0xb6b5, 0x2bbc, 0xb54d, 0x1, 0x1);
        gbc.writeMem(0x6884, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xe6cd);
        EXPECT(gbc.pc(), 0x6885);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0042
        gbc.setState(0x8c28, 0xed41, 0xddb0, 0x3dd3, 0xaa97, 0x151e, 0x0, 0x0);
        gbc.writeMem(0x8c28, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xed41);
        EXPECT(gbc.pc(), 0x8c29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c28), 0x40);
        // 40 0043
        gbc.setState(0x5e8d, 0x3a83, 0xdb40, 0x5d7c, 0x7a8e, 0x9ed7, 0x1, 0x0);
        gbc.writeMem(0x5e8d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x3a83);
        EXPECT(gbc.pc(), 0x5e8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0045
        gbc.setState(0x9db3, 0x8e3e, 0xa220, 0xd6ce, 0x7b06, 0xea59, 0x1, 0x0);
        gbc.writeMem(0x9db3, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x8e3e);
        EXPECT(gbc.pc(), 0x9db4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9db3), 0x40);
        // 40 0046
        gbc.setState(0x7f5b, 0x5118, 0xbe80, 0x1eaf, 0x49a2, 0xf050, 0x1, 0x0);
        gbc.writeMem(0x7f5b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x5118);
        EXPECT(gbc.pc(), 0x7f5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0047
        gbc.setState(0xda22, 0x10b4, 0x9920, 0xfc3b, 0x7e24, 0xa281, 0x1, 0x1);
        gbc.writeMem(0xda22, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x10b4);
        EXPECT(gbc.pc(), 0xda23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda22), 0x40);
        // 40 0048
        gbc.setState(0x73bb, 0xc2eb, 0x3b80, 0x653e, 0x67, 0x6432, 0x0, 0x0);
        gbc.writeMem(0x73bb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xc2eb);
        EXPECT(gbc.pc(), 0x73bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0049
        gbc.setState(0xa697, 0x2db8, 0xadd0, 0xe1cf, 0x5053, 0x468e, 0x1, 0x1);
        gbc.writeMem(0xa697, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x2db8);
        EXPECT(gbc.pc(), 0xa698);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa697), 0x40);
        // 40 004A
        gbc.setState(0x4822, 0x98d5, 0x3d70, 0x91f4, 0x3207, 0x133d, 0x0, 0x1);
        gbc.writeMem(0x4822, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x98d5);
        EXPECT(gbc.pc(), 0x4823);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 004B
        gbc.setState(0x42b0, 0xb708, 0x86a0, 0x69d5, 0x4707, 0x8d89, 0x0, 0x1);
        gbc.writeMem(0x42b0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xb708);
        EXPECT(gbc.pc(), 0x42b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 004C
        gbc.setState(0x47a6, 0x191c, 0x5040, 0x567c, 0x6df4, 0x8ec0, 0x0, 0x1);
        gbc.writeMem(0x47a6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x191c);
        EXPECT(gbc.pc(), 0x47a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 004D
        gbc.setState(0x435c, 0x9ac3, 0x10b0, 0x2c46, 0xa96, 0x86b6, 0x1, 0x0);
        gbc.writeMem(0x435c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x9ac3);
        EXPECT(gbc.pc(), 0x435d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 004E
        gbc.setState(0x65f7, 0x84c, 0xb0, 0x7042, 0x3645, 0x4dc7, 0x0, 0x1);
        gbc.writeMem(0x65f7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x84c);
        EXPECT(gbc.pc(), 0x65f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 004F
        gbc.setState(0xc1b5, 0xd8d1, 0x8ec0, 0x92bf, 0xb5be, 0xcad9, 0x0, 0x0);
        gbc.writeMem(0xc1b5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xd8d1);
        EXPECT(gbc.pc(), 0xc1b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1b5), 0x40);
        // 40 0050
        gbc.setState(0xc4ed, 0x41af, 0x3550, 0x29aa, 0x259f, 0xdadb, 0x1, 0x0);
        gbc.writeMem(0xc4ed, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x41af);
        EXPECT(gbc.pc(), 0xc4ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4ed), 0x40);
        // 40 0051
        gbc.setState(0x48db, 0x86ba, 0x5f0, 0x77da, 0xc164, 0xbfc7, 0x0, 0x0);
        gbc.writeMem(0x48db, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x86ba);
        EXPECT(gbc.pc(), 0x48dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0052
        gbc.setState(0xef87, 0xec30, 0x6180, 0x97d9, 0xc8fb, 0x708b, 0x1, 0x0);
        gbc.writeMem(0xef87, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xec30);
        EXPECT(gbc.pc(), 0xef88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef87), 0x40);
        // 40 0053
        gbc.setState(0xbcbb, 0x3edd, 0xba30, 0x15a8, 0xc260, 0xfd52, 0x1, 0x1);
        gbc.writeMem(0xbcbb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x3edd);
        EXPECT(gbc.pc(), 0xbcbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcbb), 0x40);
        // 40 0054
        gbc.setState(0xde1c, 0xc3a3, 0x830, 0xbb53, 0x72a2, 0x9699, 0x0, 0x0);
        gbc.writeMem(0xde1c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xc3a3);
        EXPECT(gbc.pc(), 0xde1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde1c), 0x40);
        // 40 0055
        gbc.setState(0x5ddc, 0x27d7, 0xe5a0, 0x4b95, 0x26b3, 0xe6df, 0x1, 0x1);
        gbc.writeMem(0x5ddc, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x27d7);
        EXPECT(gbc.pc(), 0x5ddd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0056
        gbc.setState(0x205e, 0x4ab, 0x2330, 0x4782, 0xb82c, 0x935b, 0x0, 0x0);
        gbc.writeMem(0x205e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x4ab);
        EXPECT(gbc.pc(), 0x205f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0057
        gbc.setState(0x6bda, 0xad44, 0x6d80, 0x86ac, 0xc828, 0xe883, 0x1, 0x0);
        gbc.writeMem(0x6bda, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xad44);
        EXPECT(gbc.pc(), 0x6bdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0058
        gbc.setState(0x7993, 0x6137, 0xaef0, 0x2f2d, 0x4444, 0x5c11, 0x0, 0x0);
        gbc.writeMem(0x7993, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x6137);
        EXPECT(gbc.pc(), 0x7994);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0059
        gbc.setState(0xc4db, 0x3efb, 0xad00, 0x2ebd, 0x8faf, 0x9e7d, 0x1, 0x0);
        gbc.writeMem(0xc4db, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x3efb);
        EXPECT(gbc.pc(), 0xc4dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4db), 0x40);
        // 40 005A
        gbc.setState(0xcc7d, 0x97c4, 0xb4f0, 0x3a64, 0xfb42, 0x7d8a, 0x1, 0x0);
        gbc.writeMem(0xcc7d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x97c4);
        EXPECT(gbc.pc(), 0xcc7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc7d), 0x40);
        // 40 005B
        gbc.setState(0x2b73, 0xe67, 0x3740, 0x5b78, 0xc266, 0x61ee, 0x0, 0x0);
        gbc.writeMem(0x2b73, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xe67);
        EXPECT(gbc.pc(), 0x2b74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 005C
        gbc.setState(0x8be6, 0x7e7e, 0x8230, 0x810f, 0x8483, 0xfd5e, 0x0, 0x0);
        gbc.writeMem(0x8be6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x7e7e);
        EXPECT(gbc.pc(), 0x8be7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8be6), 0x40);
        // 40 005D
        gbc.setState(0x4215, 0xd48b, 0xa290, 0x4f0a, 0x1ab4, 0xea4d, 0x1, 0x0);
        gbc.writeMem(0x4215, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xd48b);
        EXPECT(gbc.pc(), 0x4216);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 005E
        gbc.setState(0xd384, 0x5e36, 0x61a0, 0xa8cd, 0x1fa7, 0x652f, 0x1, 0x0);
        gbc.writeMem(0xd384, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x5e36);
        EXPECT(gbc.pc(), 0xd385);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd384), 0x40);
        // 40 005F
        gbc.setState(0x11af, 0x9ca3, 0xc890, 0x603b, 0xb5d8, 0xe9e5, 0x0, 0x0);
        gbc.writeMem(0x11af, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x9ca3);
        EXPECT(gbc.pc(), 0x11b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0060
        gbc.setState(0x6c1c, 0xcdb8, 0xf8e0, 0xfe96, 0x4d42, 0x1390, 0x0, 0x1);
        gbc.writeMem(0x6c1c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xcdb8);
        EXPECT(gbc.pc(), 0x6c1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0061
        gbc.setState(0x4372, 0x6231, 0x97d0, 0x2c67, 0x1328, 0x4b93, 0x1, 0x1);
        gbc.writeMem(0x4372, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x6231);
        EXPECT(gbc.pc(), 0x4373);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0062
        gbc.setState(0x44d9, 0x1a5c, 0xfef0, 0x5170, 0xc8c9, 0xc210, 0x0, 0x0);
        gbc.writeMem(0x44d9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x1a5c);
        EXPECT(gbc.pc(), 0x44da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0063
        gbc.setState(0xb7bd, 0xea9a, 0x28e0, 0x3609, 0xccb3, 0x3a56, 0x1, 0x1);
        gbc.writeMem(0xb7bd, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xea9a);
        EXPECT(gbc.pc(), 0xb7be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7bd), 0x40);
        // 40 0064
        gbc.setState(0x8736, 0x21ab, 0xbc90, 0x168c, 0x10ce, 0x393d, 0x1, 0x0);
        gbc.writeMem(0x8736, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x21ab);
        EXPECT(gbc.pc(), 0x8737);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8736), 0x40);
        // 40 0065
        gbc.setState(0x2f49, 0xb982, 0xa0e0, 0x7f55, 0x3aca, 0xfd95, 0x0, 0x1);
        gbc.writeMem(0x2f49, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xb982);
        EXPECT(gbc.pc(), 0x2f4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0066
        gbc.setState(0x3fd0, 0xecba, 0x67c0, 0x5658, 0xa8f3, 0xec2e, 0x0, 0x0);
        gbc.writeMem(0x3fd0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xecba);
        EXPECT(gbc.pc(), 0x3fd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0067
        gbc.setState(0x5b4b, 0x3e1a, 0x9460, 0x5f02, 0xea70, 0xb9c1, 0x0, 0x0);
        gbc.writeMem(0x5b4b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x3e1a);
        EXPECT(gbc.pc(), 0x5b4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0068
        gbc.setState(0x9b5c, 0x1339, 0x4750, 0x60e3, 0x561c, 0x132, 0x1, 0x0);
        gbc.writeMem(0x9b5c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x1339);
        EXPECT(gbc.pc(), 0x9b5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b5c), 0x40);
        // 40 0069
        gbc.setState(0xe9a5, 0x90a0, 0x7ca0, 0x1df5, 0xbae1, 0xdb04, 0x1, 0x1);
        gbc.writeMem(0xe9a5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x90a0);
        EXPECT(gbc.pc(), 0xe9a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9a5), 0x40);
        // 40 006A
        gbc.setState(0xb3de, 0xfaea, 0x8ff0, 0xbdfb, 0xafef, 0x723c, 0x1, 0x1);
        gbc.writeMem(0xb3de, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xfaea);
        EXPECT(gbc.pc(), 0xb3df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3de), 0x40);
        // 40 006B
        gbc.setState(0xeb2c, 0x85ac, 0x2d40, 0xb9cf, 0x2122, 0x7910, 0x0, 0x0);
        gbc.writeMem(0xeb2c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x85ac);
        EXPECT(gbc.pc(), 0xeb2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb2c), 0x40);
        // 40 006C
        gbc.setState(0x5cb1, 0x54c9, 0xfb90, 0xba1a, 0xd05b, 0xfb72, 0x0, 0x0);
        gbc.writeMem(0x5cb1, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x54c9);
        EXPECT(gbc.pc(), 0x5cb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 006D
        gbc.setState(0xd813, 0x3c24, 0xa270, 0xc6ff, 0xe3eb, 0x7a93, 0x1, 0x0);
        gbc.writeMem(0xd813, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x3c24);
        EXPECT(gbc.pc(), 0xd814);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd813), 0x40);
        // 40 006E
        gbc.setState(0x456d, 0xe768, 0x7380, 0xd1d9, 0xa8b, 0x8993, 0x1, 0x0);
        gbc.writeMem(0x456d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xe768);
        EXPECT(gbc.pc(), 0x456e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 006F
        gbc.setState(0xde82, 0x95c4, 0x3f30, 0x423f, 0xbfce, 0x2438, 0x1, 0x1);
        gbc.writeMem(0xde82, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x95c4);
        EXPECT(gbc.pc(), 0xde83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde82), 0x40);
        // 40 0070
        gbc.setState(0x3437, 0xd0fa, 0xf170, 0x6dd0, 0x26d3, 0xf161, 0x1, 0x0);
        gbc.writeMem(0x3437, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xd0fa);
        EXPECT(gbc.pc(), 0x3438);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0072
        gbc.setState(0xbdc8, 0x4335, 0xeb30, 0x7cbb, 0x3350, 0x691, 0x0, 0x0);
        gbc.writeMem(0xbdc8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x4335);
        EXPECT(gbc.pc(), 0xbdc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdc8), 0x40);
        // 40 0073
        gbc.setState(0xbdfe, 0x3b80, 0x29c0, 0xdf03, 0x7754, 0xb7a0, 0x1, 0x1);
        gbc.writeMem(0xbdfe, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x3b80);
        EXPECT(gbc.pc(), 0xbdff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdfe), 0x40);
        // 40 0074
        gbc.setState(0x349d, 0x39d, 0x3f70, 0x4481, 0x292d, 0xeb0f, 0x1, 0x1);
        gbc.writeMem(0x349d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x39d);
        EXPECT(gbc.pc(), 0x349e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0075
        gbc.setState(0x3ad, 0x5671, 0xba80, 0xc3a, 0xfced, 0x4cc6, 0x1, 0x1);
        gbc.writeMem(0x3ad, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x5671);
        EXPECT(gbc.pc(), 0x3ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0076
        gbc.setState(0xde6f, 0xfaf5, 0x1cf0, 0xe095, 0x82d3, 0x3f5f, 0x1, 0x1);
        gbc.writeMem(0xde6f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xfaf5);
        EXPECT(gbc.pc(), 0xde70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde6f), 0x40);
        // 40 0077
        gbc.setState(0x77cc, 0xdac8, 0xe6d0, 0x1162, 0xbe43, 0xecbc, 0x0, 0x1);
        gbc.writeMem(0x77cc, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xdac8);
        EXPECT(gbc.pc(), 0x77cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0078
        gbc.setState(0x8261, 0xafc0, 0x4450, 0x8ffa, 0xef56, 0x854b, 0x1, 0x1);
        gbc.writeMem(0x8261, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xafc0);
        EXPECT(gbc.pc(), 0x8262);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8261), 0x40);
        // 40 007B
        gbc.setState(0x918a, 0xa76c, 0x4870, 0xe665, 0x9849, 0x7087, 0x0, 0x0);
        gbc.writeMem(0x918a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xa76c);
        EXPECT(gbc.pc(), 0x918b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x918a), 0x40);
        // 40 007C
        gbc.setState(0xc03f, 0x39fc, 0xaa00, 0xb49d, 0x98d0, 0x2fb0, 0x1, 0x0);
        gbc.writeMem(0xc03f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x39fc);
        EXPECT(gbc.pc(), 0xc040);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc03f), 0x40);
        // 40 007E
        gbc.setState(0xa21c, 0xbadd, 0x2070, 0x1ba7, 0xf440, 0xcfe9, 0x0, 0x0);
        gbc.writeMem(0xa21c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xbadd);
        EXPECT(gbc.pc(), 0xa21d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa21c), 0x40);
        // 40 007F
        gbc.setState(0x3538, 0x80f8, 0x1260, 0x83c1, 0x90db, 0xdfb4, 0x1, 0x0);
        gbc.writeMem(0x3538, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x80f8);
        EXPECT(gbc.pc(), 0x3539);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0080
        gbc.setState(0x8f8b, 0x4de0, 0x9bb0, 0x2eb2, 0xeecb, 0x6754, 0x1, 0x0);
        gbc.writeMem(0x8f8b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x4de0);
        EXPECT(gbc.pc(), 0x8f8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f8b), 0x40);
        // 40 0081
        gbc.setState(0x4920, 0xf071, 0x4f80, 0x93b, 0xc4fe, 0xe3fc, 0x1, 0x0);
        gbc.writeMem(0x4920, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xf071);
        EXPECT(gbc.pc(), 0x4921);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0082
        gbc.setState(0xcc7d, 0xad82, 0x5d40, 0x56d7, 0x1e9f, 0xbe3b, 0x1, 0x1);
        gbc.writeMem(0xcc7d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xad82);
        EXPECT(gbc.pc(), 0xcc7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc7d), 0x40);
        // 40 0083
        gbc.setState(0xed44, 0x38f1, 0x8260, 0xbadb, 0x9ec1, 0xf003, 0x0, 0x0);
        gbc.writeMem(0xed44, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x38f1);
        EXPECT(gbc.pc(), 0xed45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed44), 0x40);
        // 40 0084
        gbc.setState(0x6687, 0x1895, 0x5150, 0xa955, 0x7bb6, 0xfe75, 0x0, 0x1);
        gbc.writeMem(0x6687, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x1895);
        EXPECT(gbc.pc(), 0x6688);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0085
        gbc.setState(0x5982, 0x7d26, 0x9e90, 0xf839, 0x7697, 0x726a, 0x0, 0x0);
        gbc.writeMem(0x5982, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x7d26);
        EXPECT(gbc.pc(), 0x5983);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0086
        gbc.setState(0x4bd0, 0xcbd6, 0xc6c0, 0x4418, 0xa645, 0x8d3, 0x1, 0x1);
        gbc.writeMem(0x4bd0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xcbd6);
        EXPECT(gbc.pc(), 0x4bd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0087
        gbc.setState(0xa1ba, 0xb142, 0x92e0, 0x3cb6, 0xc5b7, 0x6660, 0x0, 0x0);
        gbc.writeMem(0xa1ba, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xb142);
        EXPECT(gbc.pc(), 0xa1bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1ba), 0x40);
        // 40 0089
        gbc.setState(0x239a, 0x66da, 0x250, 0x326c, 0x31a, 0x6f92, 0x1, 0x0);
        gbc.writeMem(0x239a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x66da);
        EXPECT(gbc.pc(), 0x239b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 008A
        gbc.setState(0xb248, 0x2bb4, 0xe210, 0xdb84, 0x68a4, 0x8f08, 0x0, 0x0);
        gbc.writeMem(0xb248, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x2bb4);
        EXPECT(gbc.pc(), 0xb249);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb248), 0x40);
        // 40 008B
        gbc.setState(0xae99, 0xda5b, 0x1700, 0x2bbe, 0x86e6, 0x2eeb, 0x1, 0x1);
        gbc.writeMem(0xae99, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xda5b);
        EXPECT(gbc.pc(), 0xae9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae99), 0x40);
        // 40 008C
        gbc.setState(0x3e9, 0xa757, 0x70e0, 0x6fbd, 0x41f2, 0x7c89, 0x0, 0x1);
        gbc.writeMem(0x3e9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xa757);
        EXPECT(gbc.pc(), 0x3ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 008D
        gbc.setState(0x4802, 0x5a3e, 0x7760, 0x1b92, 0xbc22, 0x2ed1, 0x0, 0x0);
        gbc.writeMem(0x4802, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x5a3e);
        EXPECT(gbc.pc(), 0x4803);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 008E
        gbc.setState(0xa922, 0x7aa5, 0x76e0, 0x8871, 0xa657, 0xd2a6, 0x1, 0x0);
        gbc.writeMem(0xa922, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x7aa5);
        EXPECT(gbc.pc(), 0xa923);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa922), 0x40);
        // 40 008F
        gbc.setState(0x4496, 0x900f, 0x98f0, 0x6e7d, 0x712f, 0xd842, 0x1, 0x1);
        gbc.writeMem(0x4496, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x900f);
        EXPECT(gbc.pc(), 0x4497);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0090
        gbc.setState(0xce63, 0x95ab, 0xeee0, 0x76fc, 0xecfc, 0x1a0c, 0x1, 0x1);
        gbc.writeMem(0xce63, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x95ab);
        EXPECT(gbc.pc(), 0xce64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce63), 0x40);
        // 40 0092
        gbc.setState(0x8b72, 0x7862, 0x33c0, 0xfc76, 0xca56, 0xda6, 0x1, 0x0);
        gbc.writeMem(0x8b72, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x7862);
        EXPECT(gbc.pc(), 0x8b73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b72), 0x40);
        // 40 0093
        gbc.setState(0xa6cf, 0x7cac, 0x4650, 0x73a2, 0xa8f0, 0xface, 0x0, 0x0);
        gbc.writeMem(0xa6cf, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x7cac);
        EXPECT(gbc.pc(), 0xa6d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6cf), 0x40);
        // 40 0094
        gbc.setState(0x6641, 0x9bc0, 0x47e0, 0xcf9d, 0x3174, 0x8bee, 0x1, 0x1);
        gbc.writeMem(0x6641, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x9bc0);
        EXPECT(gbc.pc(), 0x6642);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0095
        gbc.setState(0x5b15, 0x5185, 0xed90, 0xa147, 0xf168, 0xf416, 0x0, 0x0);
        gbc.writeMem(0x5b15, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x5185);
        EXPECT(gbc.pc(), 0x5b16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0096
        gbc.setState(0x1eae, 0xf98, 0x1010, 0xe6a1, 0x2ab3, 0x556b, 0x1, 0x0);
        gbc.writeMem(0x1eae, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xf98);
        EXPECT(gbc.pc(), 0x1eaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0097
        gbc.setState(0xd097, 0x5003, 0xf830, 0x5cac, 0x3bd3, 0x4ac9, 0x0, 0x0);
        gbc.writeMem(0xd097, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x5003);
        EXPECT(gbc.pc(), 0xd098);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd097), 0x40);
        // 40 0099
        gbc.setState(0xcbc8, 0xf8de, 0xac70, 0xadc4, 0x439, 0xe45f, 0x1, 0x0);
        gbc.writeMem(0xcbc8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xf8de);
        EXPECT(gbc.pc(), 0xcbc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbc8), 0x40);
        // 40 009A
        gbc.setState(0xa59f, 0xe492, 0x58e0, 0xfa7e, 0x88d6, 0xc6bb, 0x0, 0x1);
        gbc.writeMem(0xa59f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xe492);
        EXPECT(gbc.pc(), 0xa5a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa59f), 0x40);
        // 40 009B
        gbc.setState(0x2fd2, 0xeac0, 0x6520, 0x3834, 0x44d1, 0x8df2, 0x1, 0x1);
        gbc.writeMem(0x2fd2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xeac0);
        EXPECT(gbc.pc(), 0x2fd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 009C
        gbc.setState(0x157e, 0x1ed9, 0xed0, 0x9ab8, 0xa87c, 0x821f, 0x1, 0x0);
        gbc.writeMem(0x157e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x1ed9);
        EXPECT(gbc.pc(), 0x157f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 009D
        gbc.setState(0xa213, 0x9d6, 0xb1c0, 0xd859, 0xc4e6, 0xe7f1, 0x0, 0x0);
        gbc.writeMem(0xa213, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x9d6);
        EXPECT(gbc.pc(), 0xa214);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa213), 0x40);
        // 40 009E
        gbc.setState(0x34f6, 0x106, 0x37a0, 0x6e0d, 0xbcc8, 0xd6c2, 0x1, 0x0);
        gbc.writeMem(0x34f6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x106);
        EXPECT(gbc.pc(), 0x34f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 009F
        gbc.setState(0x9459, 0xd489, 0xd130, 0x37bc, 0xaeb2, 0xe2dd, 0x1, 0x1);
        gbc.writeMem(0x9459, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd489);
        EXPECT(gbc.pc(), 0x945a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9459), 0x40);
        // 40 00A0
        gbc.setState(0x9f78, 0xdf8f, 0x1da0, 0x7371, 0x9230, 0x4ebb, 0x0, 0x0);
        gbc.writeMem(0x9f78, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xdf8f);
        EXPECT(gbc.pc(), 0x9f79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f78), 0x40);
        // 40 00A1
        gbc.setState(0x35f5, 0x7570, 0x2e80, 0xa285, 0xabf5, 0xe8d8, 0x0, 0x1);
        gbc.writeMem(0x35f5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x7570);
        EXPECT(gbc.pc(), 0x35f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 00A2
        gbc.setState(0xca36, 0xd086, 0xee50, 0xb8bf, 0x6dca, 0xcf45, 0x1, 0x1);
        gbc.writeMem(0xca36, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xd086);
        EXPECT(gbc.pc(), 0xca37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca36), 0x40);
        // 40 00A3
        gbc.setState(0x2a61, 0xea4b, 0xd8b0, 0xc51, 0x8a53, 0xad27, 0x1, 0x0);
        gbc.writeMem(0x2a61, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xea4b);
        EXPECT(gbc.pc(), 0x2a62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 00A4
        gbc.setState(0x6373, 0x851a, 0x6720, 0x4ac4, 0x16a8, 0x6f68, 0x1, 0x1);
        gbc.writeMem(0x6373, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x851a);
        EXPECT(gbc.pc(), 0x6374);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 00A5
        gbc.setState(0x550, 0xfcee, 0xee70, 0xd6de, 0x44d6, 0x875e, 0x1, 0x1);
        gbc.writeMem(0x550, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xfcee);
        EXPECT(gbc.pc(), 0x551);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 00A6
        gbc.setState(0x6ac8, 0xb381, 0x1c50, 0x7855, 0xab10, 0xfab, 0x1, 0x1);
        gbc.writeMem(0x6ac8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xb381);
        EXPECT(gbc.pc(), 0x6ac9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 00A7
        gbc.setState(0x5602, 0xe9d1, 0x94e0, 0x36f2, 0x137, 0xf425, 0x0, 0x1);
        gbc.writeMem(0x5602, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xe9d1);
        EXPECT(gbc.pc(), 0x5603);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 00A8
        gbc.setState(0x48b3, 0x8ae8, 0xa150, 0xc844, 0x8dec, 0xd010, 0x1, 0x0);
        gbc.writeMem(0x48b3, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x8ae8);
        EXPECT(gbc.pc(), 0x48b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 00A9
        gbc.setState(0x6d74, 0x33c5, 0xc8f0, 0x829e, 0xa0e8, 0x6c7e, 0x0, 0x0);
        gbc.writeMem(0x6d74, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x33c5);
        EXPECT(gbc.pc(), 0x6d75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 00AA
        gbc.setState(0xdce6, 0x9bb8, 0x3550, 0xd1fb, 0xce89, 0xcaf7, 0x0, 0x0);
        gbc.writeMem(0xdce6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x9bb8);
        EXPECT(gbc.pc(), 0xdce7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdce6), 0x40);
        // 40 00AB
        gbc.setState(0x1e41, 0x5a61, 0xf460, 0xd6fe, 0x4a58, 0x2fa2, 0x0, 0x1);
        gbc.writeMem(0x1e41, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x5a61);
        EXPECT(gbc.pc(), 0x1e42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 00AC
        gbc.setState(0x5693, 0x31d1, 0x4290, 0xbed3, 0xc03d, 0xa64, 0x1, 0x0);
        gbc.writeMem(0x5693, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x31d1);
        EXPECT(gbc.pc(), 0x5694);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 00AD
        gbc.setState(0x43bb, 0x11ea, 0x2440, 0x8180, 0xa09a, 0xdc59, 0x1, 0x0);
        gbc.writeMem(0x43bb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x11ea);
        EXPECT(gbc.pc(), 0x43bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 00AE
        gbc.setState(0xaf93, 0x5c73, 0xa410, 0xc2aa, 0xb71d, 0x383c, 0x0, 0x1);
        gbc.writeMem(0xaf93, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x5c73);
        EXPECT(gbc.pc(), 0xaf94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf93), 0x40);
        // 40 00AF
        gbc.setState(0xe9fd, 0xf01f, 0xcbb0, 0xd6e3, 0xbe06, 0xee95, 0x1, 0x0);
        gbc.writeMem(0xe9fd, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xf01f);
        EXPECT(gbc.pc(), 0xe9fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9fd), 0x40);
        // 40 00B0
        gbc.setState(0x3794, 0x8775, 0x81b0, 0xd471, 0xbcc2, 0x5770, 0x0, 0x0);
        gbc.writeMem(0x3794, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x8775);
        EXPECT(gbc.pc(), 0x3795);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 00B2
        gbc.setState(0x3a39, 0x25cb, 0x5790, 0xdc82, 0xd93d, 0xe44d, 0x1, 0x1);
        gbc.writeMem(0x3a39, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x25cb);
        EXPECT(gbc.pc(), 0x3a3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 00B3
        gbc.setState(0xbaaf, 0xde9, 0xe560, 0x953, 0x782a, 0x89c4, 0x0, 0x1);
        gbc.writeMem(0xbaaf, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xde9);
        EXPECT(gbc.pc(), 0xbab0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaaf), 0x40);
        // 40 00B4
        gbc.setState(0x5b02, 0x7e25, 0x65b0, 0x20eb, 0xc18f, 0xc926, 0x1, 0x1);
        gbc.writeMem(0x5b02, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x7e25);
        EXPECT(gbc.pc(), 0x5b03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 00B5
        gbc.setState(0x5738, 0x71d9, 0x16a0, 0x8185, 0x26c2, 0x2d26, 0x0, 0x1);
        gbc.writeMem(0x5738, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x71d9);
        EXPECT(gbc.pc(), 0x5739);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 00B6
        gbc.setState(0xb12b, 0x47cc, 0xd480, 0xb1e5, 0x9062, 0x2ee8, 0x0, 0x1);
        gbc.writeMem(0xb12b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x47cc);
        EXPECT(gbc.pc(), 0xb12c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb12b), 0x40);
        // 40 00B7
        gbc.setState(0x78ba, 0xb6a9, 0x5930, 0x7730, 0xdd7f, 0xb688, 0x1, 0x1);
        gbc.writeMem(0x78ba, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xb6a9);
        EXPECT(gbc.pc(), 0x78bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 00B8
        gbc.setState(0xa62c, 0x283, 0x2d80, 0x6e44, 0x598f, 0x3c93, 0x1, 0x1);
        gbc.writeMem(0xa62c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x283);
        EXPECT(gbc.pc(), 0xa62d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa62c), 0x40);
        // 40 00BA
        gbc.setState(0x8720, 0xf51d, 0x3240, 0x6a84, 0x9fc2, 0x5200, 0x1, 0x0);
        gbc.writeMem(0x8720, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf51d);
        EXPECT(gbc.pc(), 0x8721);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8720), 0x40);
        // 40 00BB
        gbc.setState(0x1f66, 0x583c, 0x1340, 0x7437, 0x2890, 0xe177, 0x1, 0x0);
        gbc.writeMem(0x1f66, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x583c);
        EXPECT(gbc.pc(), 0x1f67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 00BC
        gbc.setState(0xdd18, 0xb1c1, 0xa640, 0xb42a, 0x6428, 0xae43, 0x0, 0x0);
        gbc.writeMem(0xdd18, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xb1c1);
        EXPECT(gbc.pc(), 0xdd19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd18), 0x40);
        // 40 00BD
        gbc.setState(0x42fb, 0x5a7, 0xc60, 0x5263, 0x7419, 0x64f3, 0x0, 0x1);
        gbc.writeMem(0x42fb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x5a7);
        EXPECT(gbc.pc(), 0x42fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 00BE
        gbc.setState(0x2056, 0x91de, 0xbe50, 0x4c6b, 0x63c0, 0x4a93, 0x1, 0x1);
        gbc.writeMem(0x2056, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x91de);
        EXPECT(gbc.pc(), 0x2057);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 00BF
        gbc.setState(0x366a, 0xb6b2, 0x9960, 0xb962, 0xfff, 0x3dc4, 0x1, 0x0);
        gbc.writeMem(0x366a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xb6b2);
        EXPECT(gbc.pc(), 0x366b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 00C0
        gbc.setState(0x9c1f, 0xab3c, 0xcbe0, 0x975, 0x880c, 0xd2bc, 0x0, 0x1);
        gbc.writeMem(0x9c1f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xab3c);
        EXPECT(gbc.pc(), 0x9c20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c1f), 0x40);
        // 40 00C2
        gbc.setState(0x3b34, 0x4b4c, 0x88f0, 0x6934, 0x4d8, 0x8285, 0x1, 0x1);
        gbc.writeMem(0x3b34, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x4b4c);
        EXPECT(gbc.pc(), 0x3b35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 00C3
        gbc.setState(0xa7cb, 0x15ec, 0xe560, 0x470e, 0xb598, 0x3aa3, 0x1, 0x0);
        gbc.writeMem(0xa7cb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x15ec);
        EXPECT(gbc.pc(), 0xa7cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7cb), 0x40);
        // 40 00C4
        gbc.setState(0xcff4, 0x9480, 0x3520, 0x918, 0x11db, 0x4f0f, 0x1, 0x0);
        gbc.writeMem(0xcff4, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x9480);
        EXPECT(gbc.pc(), 0xcff5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcff4), 0x40);
        // 40 00C5
        gbc.setState(0x420e, 0x5c0a, 0x6c40, 0xa91c, 0xc72e, 0x55f4, 0x1, 0x1);
        gbc.writeMem(0x420e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x5c0a);
        EXPECT(gbc.pc(), 0x420f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 00C6
        gbc.setState(0x5445, 0xcc67, 0xadc0, 0x4378, 0x2d72, 0xb594, 0x0, 0x1);
        gbc.writeMem(0x5445, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xcc67);
        EXPECT(gbc.pc(), 0x5446);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 00C7
        gbc.setState(0xd0fc, 0x67fd, 0x54d0, 0x5cbc, 0x1c57, 0xc1f7, 0x1, 0x1);
        gbc.writeMem(0xd0fc, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x67fd);
        EXPECT(gbc.pc(), 0xd0fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0fc), 0x40);
        // 40 00C8
        gbc.setState(0xebe0, 0xa5e0, 0xe4a0, 0xf77b, 0xdf9d, 0x16d8, 0x1, 0x1);
        gbc.writeMem(0xebe0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xa5e0);
        EXPECT(gbc.pc(), 0xebe1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebe0), 0x40);
        // 40 00C9
        gbc.setState(0xfb6, 0xd674, 0x4f40, 0x22fb, 0x1e37, 0xff57, 0x0, 0x1);
        gbc.writeMem(0xfb6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xd674);
        EXPECT(gbc.pc(), 0xfb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 00CA
        gbc.setState(0x904e, 0x4a0f, 0x2220, 0x2855, 0xdb3e, 0x2d50, 0x0, 0x0);
        gbc.writeMem(0x904e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x4a0f);
        EXPECT(gbc.pc(), 0x904f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x904e), 0x40);
        // 40 00CC
        gbc.setState(0xd10c, 0x87c3, 0xc1f0, 0x8a5e, 0xcc3e, 0x2b3, 0x0, 0x0);
        gbc.writeMem(0xd10c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x87c3);
        EXPECT(gbc.pc(), 0xd10d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd10c), 0x40);
        // 40 00CD
        gbc.setState(0x70f5, 0x307e, 0x3b80, 0xe420, 0x28e1, 0xabca, 0x0, 0x1);
        gbc.writeMem(0x70f5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x307e);
        EXPECT(gbc.pc(), 0x70f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 00CE
        gbc.setState(0x72a8, 0xb43a, 0xc5f0, 0x1ea8, 0x23c, 0xdaa5, 0x1, 0x0);
        gbc.writeMem(0x72a8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xb43a);
        EXPECT(gbc.pc(), 0x72a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 00D0
        gbc.setState(0x7d98, 0xe292, 0xe440, 0x92fd, 0x6d0a, 0xbf20, 0x1, 0x1);
        gbc.writeMem(0x7d98, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xe292);
        EXPECT(gbc.pc(), 0x7d99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 00D1
        gbc.setState(0x45d, 0xc554, 0xb2c0, 0xb6ca, 0xec7b, 0x261d, 0x0, 0x0);
        gbc.writeMem(0x45d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xc554);
        EXPECT(gbc.pc(), 0x45e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 00D2
        gbc.setState(0xcd64, 0x10c7, 0x6490, 0x3e88, 0x8a52, 0x1ba0, 0x1, 0x1);
        gbc.writeMem(0xcd64, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x10c7);
        EXPECT(gbc.pc(), 0xcd65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd64), 0x40);
        // 40 00D3
        gbc.setState(0x5d7c, 0xa8a, 0xc580, 0x5ef, 0x1803, 0x8b0b, 0x1, 0x1);
        gbc.writeMem(0x5d7c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xa8a);
        EXPECT(gbc.pc(), 0x5d7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 00D4
        gbc.setState(0x664b, 0xbc18, 0xd280, 0x928c, 0x3f0c, 0xbb92, 0x0, 0x1);
        gbc.writeMem(0x664b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xbc18);
        EXPECT(gbc.pc(), 0x664c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 00D5
        gbc.setState(0x6a76, 0x8c7d, 0xeaf0, 0xd455, 0x657a, 0x582c, 0x1, 0x1);
        gbc.writeMem(0x6a76, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x8c7d);
        EXPECT(gbc.pc(), 0x6a77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 00D6
        gbc.setState(0x8051, 0x4307, 0x1060, 0xe174, 0x6d11, 0xc742, 0x1, 0x1);
        gbc.writeMem(0x8051, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x4307);
        EXPECT(gbc.pc(), 0x8052);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8051), 0x40);
        // 40 00D7
        gbc.setState(0xa69e, 0xf976, 0xf0a0, 0x6f49, 0x8820, 0xa216, 0x0, 0x0);
        gbc.writeMem(0xa69e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xf976);
        EXPECT(gbc.pc(), 0xa69f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa69e), 0x40);
        // 40 00D9
        gbc.setState(0xe07b, 0xf2fd, 0xa880, 0x4a1b, 0xca7f, 0xd901, 0x1, 0x1);
        gbc.writeMem(0xe07b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xf2fd);
        EXPECT(gbc.pc(), 0xe07c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe07b), 0x40);
        // 40 00DA
        gbc.setState(0xdf56, 0x6d94, 0xc920, 0x276, 0x785f, 0x4696, 0x0, 0x1);
        gbc.writeMem(0xdf56, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x6d94);
        EXPECT(gbc.pc(), 0xdf57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf56), 0x40);
        // 40 00DB
        gbc.setState(0xb587, 0x2d4a, 0x8170, 0x8f94, 0x2612, 0xfcb, 0x0, 0x0);
        gbc.writeMem(0xb587, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x2d4a);
        EXPECT(gbc.pc(), 0xb588);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb587), 0x40);
        // 40 00DC
        gbc.setState(0x89fd, 0x5044, 0xf750, 0xb7c9, 0x75e4, 0xd4e4, 0x0, 0x0);
        gbc.writeMem(0x89fd, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x5044);
        EXPECT(gbc.pc(), 0x89fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89fd), 0x40);
        // 40 00DD
        gbc.setState(0x3e14, 0x88ca, 0x5b80, 0xeaaa, 0xcef9, 0x1989, 0x0, 0x0);
        gbc.writeMem(0x3e14, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x88ca);
        EXPECT(gbc.pc(), 0x3e15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 00DE
        gbc.setState(0xa8d9, 0x1a3c, 0xabc0, 0xa4db, 0x5920, 0x97ce, 0x0, 0x1);
        gbc.writeMem(0xa8d9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x1a3c);
        EXPECT(gbc.pc(), 0xa8da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8d9), 0x40);
        // 40 00DF
        gbc.setState(0x925, 0xf552, 0x1ae0, 0x485a, 0x511a, 0x3675, 0x1, 0x1);
        gbc.writeMem(0x925, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xf552);
        EXPECT(gbc.pc(), 0x926);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 00E0
        gbc.setState(0xbfa0, 0x981e, 0x9000, 0xd085, 0xb48e, 0x658e, 0x0, 0x0);
        gbc.writeMem(0xbfa0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x981e);
        EXPECT(gbc.pc(), 0xbfa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfa0), 0x40);
        // 40 00E1
        gbc.setState(0xb7da, 0xc162, 0x95d0, 0x4f32, 0x2d2c, 0x21a0, 0x1, 0x1);
        gbc.writeMem(0xb7da, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xc162);
        EXPECT(gbc.pc(), 0xb7db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7da), 0x40);
        // 40 00E3
        gbc.setState(0xd68a, 0x4697, 0xcbf0, 0xa8ec, 0x24fe, 0x1ffa, 0x0, 0x1);
        gbc.writeMem(0xd68a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x4697);
        EXPECT(gbc.pc(), 0xd68b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd68a), 0x40);
        // 40 00E4
        gbc.setState(0x375e, 0xeb37, 0xe000, 0x3937, 0x96c1, 0xfe5e, 0x1, 0x1);
        gbc.writeMem(0x375e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xeb37);
        EXPECT(gbc.pc(), 0x375f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 00E5
        gbc.setState(0x73e4, 0x6275, 0xbc20, 0x4516, 0x6e98, 0x1d0b, 0x1, 0x0);
        gbc.writeMem(0x73e4, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x6275);
        EXPECT(gbc.pc(), 0x73e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 00E6
        gbc.setState(0x87a, 0xbebb, 0x2760, 0xdd63, 0xc262, 0xcc74, 0x0, 0x0);
        gbc.writeMem(0x87a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xbebb);
        EXPECT(gbc.pc(), 0x87b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 00E7
        gbc.setState(0xdd20, 0x791d, 0x4df0, 0x33a6, 0xb9bc, 0x7ba9, 0x1, 0x1);
        gbc.writeMem(0xdd20, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x791d);
        EXPECT(gbc.pc(), 0xdd21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd20), 0x40);
        // 40 00E8
        gbc.setState(0xd515, 0xafc5, 0x5a0, 0x4da0, 0xbcee, 0x129d, 0x1, 0x1);
        gbc.writeMem(0xd515, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xafc5);
        EXPECT(gbc.pc(), 0xd516);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd515), 0x40);
        // 40 00E9
        gbc.setState(0x12bb, 0xc392, 0xdc20, 0x9b4f, 0xbcda, 0xe146, 0x0, 0x0);
        gbc.writeMem(0x12bb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xc392);
        EXPECT(gbc.pc(), 0x12bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 00EA
        gbc.setState(0x230f, 0xd24c, 0xbde0, 0x3512, 0x91e4, 0xc03e, 0x0, 0x1);
        gbc.writeMem(0x230f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xd24c);
        EXPECT(gbc.pc(), 0x2310);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 00EB
        gbc.setState(0xc5e7, 0xe0c5, 0x38e0, 0x8e77, 0xf743, 0x1369, 0x0, 0x1);
        gbc.writeMem(0xc5e7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe0c5);
        EXPECT(gbc.pc(), 0xc5e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5e7), 0x40);
        // 40 00EC
        gbc.setState(0x168f, 0xd4ee, 0x97f0, 0x6b5d, 0x2457, 0xa3b, 0x0, 0x0);
        gbc.writeMem(0x168f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xd4ee);
        EXPECT(gbc.pc(), 0x1690);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 00ED
        gbc.setState(0x562e, 0x3d32, 0x26e0, 0xaca8, 0xffa9, 0xe1fb, 0x1, 0x0);
        gbc.writeMem(0x562e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x3d32);
        EXPECT(gbc.pc(), 0x562f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 00EE
        gbc.setState(0xf5a, 0x94d, 0x2940, 0x3a9a, 0x8718, 0x9793, 0x1, 0x0);
        gbc.writeMem(0xf5a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x94d);
        EXPECT(gbc.pc(), 0xf5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 00EF
        gbc.setState(0x75ac, 0x5d18, 0x52d0, 0x46d1, 0xe965, 0x68f8, 0x0, 0x0);
        gbc.writeMem(0x75ac, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x5d18);
        EXPECT(gbc.pc(), 0x75ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 00F0
        gbc.setState(0x612a, 0x71ff, 0x49a0, 0xfd44, 0xa228, 0x7c3f, 0x0, 0x0);
        gbc.writeMem(0x612a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x71ff);
        EXPECT(gbc.pc(), 0x612b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 00F1
        gbc.setState(0x2100, 0x670f, 0x5b10, 0x7594, 0x8f21, 0xd220, 0x0, 0x0);
        gbc.writeMem(0x2100, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x670f);
        EXPECT(gbc.pc(), 0x2101);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 00F2
        gbc.setState(0x33c3, 0xaf4c, 0x3910, 0x79ec, 0xf32, 0xc07d, 0x0, 0x0);
        gbc.writeMem(0x33c3, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xaf4c);
        EXPECT(gbc.pc(), 0x33c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 00F4
        gbc.setState(0xc140, 0x5e33, 0xf990, 0xce48, 0x7f76, 0x6172, 0x0, 0x0);
        gbc.writeMem(0xc140, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x5e33);
        EXPECT(gbc.pc(), 0xc141);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc140), 0x40);
        // 40 00F5
        gbc.setState(0x513e, 0xceb4, 0xbb80, 0xd101, 0x3d9, 0x4626, 0x0, 0x0);
        gbc.writeMem(0x513e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xceb4);
        EXPECT(gbc.pc(), 0x513f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 00F6
        gbc.setState(0x9539, 0x9fbb, 0xfa50, 0xf2a9, 0x9d80, 0x5dcc, 0x0, 0x1);
        gbc.writeMem(0x9539, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x9fbb);
        EXPECT(gbc.pc(), 0x953a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9539), 0x40);
        // 40 00F7
        gbc.setState(0xd6b7, 0xeb33, 0xbd20, 0xa7b0, 0x2df1, 0x2095, 0x1, 0x1);
        gbc.writeMem(0xd6b7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xeb33);
        EXPECT(gbc.pc(), 0xd6b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6b7), 0x40);
        // 40 00F8
        gbc.setState(0x7735, 0x8e7, 0x4760, 0x617c, 0x71f7, 0x8a88, 0x0, 0x0);
        gbc.writeMem(0x7735, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x8e7);
        EXPECT(gbc.pc(), 0x7736);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 00F9
        gbc.setState(0x4c94, 0x6d83, 0xb760, 0xafc6, 0x6b06, 0x557b, 0x0, 0x0);
        gbc.writeMem(0x4c94, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x6d83);
        EXPECT(gbc.pc(), 0x4c95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 00FA
        gbc.setState(0x1269, 0xd489, 0x69c0, 0x6c8e, 0x5029, 0xe7ad, 0x1, 0x0);
        gbc.writeMem(0x1269, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xd489);
        EXPECT(gbc.pc(), 0x126a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 00FB
        gbc.setState(0xe30c, 0x1b00, 0xc680, 0x1c36, 0x2c65, 0xa0a1, 0x1, 0x1);
        gbc.writeMem(0xe30c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x1b00);
        EXPECT(gbc.pc(), 0xe30d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe30c), 0x40);
        // 40 00FC
        gbc.setState(0x1d4a, 0x9164, 0xab90, 0x55ad, 0xe741, 0xccc0, 0x1, 0x1);
        gbc.writeMem(0x1d4a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x9164);
        EXPECT(gbc.pc(), 0x1d4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 00FD
        gbc.setState(0x23f5, 0x3277, 0x8700, 0xb4, 0x29a0, 0x6ac7, 0x1, 0x1);
        gbc.writeMem(0x23f5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x3277);
        EXPECT(gbc.pc(), 0x23f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 00FE
        gbc.setState(0x39a6, 0x3ba4, 0x9700, 0x4be1, 0xe912, 0x78b8, 0x0, 0x0);
        gbc.writeMem(0x39a6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x3ba4);
        EXPECT(gbc.pc(), 0x39a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 00FF
        gbc.setState(0x7e7, 0x1d45, 0x9760, 0xcfc0, 0x4336, 0x2e45, 0x0, 0x0);
        gbc.writeMem(0x7e7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x1d45);
        EXPECT(gbc.pc(), 0x7e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0101
        gbc.setState(0xe82, 0x2b30, 0x7320, 0x894a, 0x646c, 0x4529, 0x0, 0x0);
        gbc.writeMem(0xe82, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x2b30);
        EXPECT(gbc.pc(), 0xe83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0102
        gbc.setState(0x1012, 0xdbdc, 0x75f0, 0x141, 0x7a92, 0x9767, 0x1, 0x1);
        gbc.writeMem(0x1012, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xdbdc);
        EXPECT(gbc.pc(), 0x1013);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0103
        gbc.setState(0xe8ee, 0xb29, 0xb7b0, 0xd358, 0x6366, 0x83d8, 0x0, 0x1);
        gbc.writeMem(0xe8ee, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xb29);
        EXPECT(gbc.pc(), 0xe8ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8ee), 0x40);
        // 40 0104
        gbc.setState(0xede2, 0x6ef1, 0x2710, 0x6490, 0xd9b5, 0xed5c, 0x1, 0x1);
        gbc.writeMem(0xede2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x6ef1);
        EXPECT(gbc.pc(), 0xede3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xede2), 0x40);
        // 40 0105
        gbc.setState(0x3595, 0xb7d5, 0x4aa0, 0x853b, 0x7546, 0xd6e2, 0x0, 0x1);
        gbc.writeMem(0x3595, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xb7d5);
        EXPECT(gbc.pc(), 0x3596);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0106
        gbc.setState(0x821a, 0xfe67, 0xf110, 0xbe07, 0x5c6c, 0x87dc, 0x0, 0x0);
        gbc.writeMem(0x821a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xfe67);
        EXPECT(gbc.pc(), 0x821b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x821a), 0x40);
        // 40 0107
        gbc.setState(0x5327, 0x1877, 0xa290, 0xaf44, 0xead2, 0x74bd, 0x0, 0x0);
        gbc.writeMem(0x5327, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x1877);
        EXPECT(gbc.pc(), 0x5328);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0108
        gbc.setState(0x9992, 0x9528, 0xc770, 0xdd6a, 0x6ae, 0x109e, 0x1, 0x1);
        gbc.writeMem(0x9992, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x9528);
        EXPECT(gbc.pc(), 0x9993);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9992), 0x40);
        // 40 0109
        gbc.setState(0x382a, 0x4965, 0x9e50, 0x32ef, 0xdb39, 0x96f0, 0x1, 0x1);
        gbc.writeMem(0x382a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x4965);
        EXPECT(gbc.pc(), 0x382b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 010A
        gbc.setState(0x23b7, 0xbec4, 0xefa0, 0xe2cf, 0xe73d, 0x8ca0, 0x0, 0x0);
        gbc.writeMem(0x23b7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xbec4);
        EXPECT(gbc.pc(), 0x23b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 010C
        gbc.setState(0x3b7f, 0x9f3a, 0x61c0, 0x6e8c, 0x705, 0x4332, 0x0, 0x0);
        gbc.writeMem(0x3b7f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x9f3a);
        EXPECT(gbc.pc(), 0x3b80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 010D
        gbc.setState(0x8315, 0x17bf, 0xc080, 0x8e9c, 0x9cfa, 0xbb17, 0x0, 0x1);
        gbc.writeMem(0x8315, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x17bf);
        EXPECT(gbc.pc(), 0x8316);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8315), 0x40);
        // 40 010E
        gbc.setState(0x1810, 0x9348, 0x4fa0, 0xa71a, 0x190, 0x4e45, 0x0, 0x1);
        gbc.writeMem(0x1810, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x9348);
        EXPECT(gbc.pc(), 0x1811);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 010F
        gbc.setState(0x9402, 0xd2b1, 0xe60, 0xf5d6, 0xbb13, 0x8784, 0x0, 0x1);
        gbc.writeMem(0x9402, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xd2b1);
        EXPECT(gbc.pc(), 0x9403);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9402), 0x40);
        // 40 0110
        gbc.setState(0x3fda, 0xe430, 0x62e0, 0x1946, 0xd132, 0x5df2, 0x0, 0x0);
        gbc.writeMem(0x3fda, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe430);
        EXPECT(gbc.pc(), 0x3fdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0111
        gbc.setState(0x6a4e, 0xf4b, 0x580, 0xd66c, 0x1df7, 0x4465, 0x1, 0x0);
        gbc.writeMem(0x6a4e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xf4b);
        EXPECT(gbc.pc(), 0x6a4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0112
        gbc.setState(0x1a04, 0x4400, 0x770, 0xe473, 0x1d25, 0x3a23, 0x1, 0x1);
        gbc.writeMem(0x1a04, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x4400);
        EXPECT(gbc.pc(), 0x1a05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0113
        gbc.setState(0x434, 0xb3d2, 0xd30, 0xaaee, 0x8f84, 0xecbd, 0x0, 0x0);
        gbc.writeMem(0x434, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xb3d2);
        EXPECT(gbc.pc(), 0x435);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0115
        gbc.setState(0xe95b, 0xd163, 0x6520, 0xc02f, 0xd89f, 0xe3a8, 0x1, 0x1);
        gbc.writeMem(0xe95b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd163);
        EXPECT(gbc.pc(), 0xe95c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe95b), 0x40);
        // 40 0116
        gbc.setState(0x5b52, 0x1cf5, 0x5280, 0x5380, 0x6533, 0xfd0e, 0x0, 0x1);
        gbc.writeMem(0x5b52, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x1cf5);
        EXPECT(gbc.pc(), 0x5b53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0117
        gbc.setState(0x1028, 0x107b, 0x8670, 0xd8df, 0x3cf5, 0xdc89, 0x1, 0x0);
        gbc.writeMem(0x1028, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x107b);
        EXPECT(gbc.pc(), 0x1029);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0118
        gbc.setState(0x6611, 0xb80a, 0x30a0, 0x451d, 0xc034, 0xfc50, 0x0, 0x0);
        gbc.writeMem(0x6611, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xb80a);
        EXPECT(gbc.pc(), 0x6612);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0119
        gbc.setState(0x6f6f, 0x710, 0xd1c0, 0xd37a, 0x5d67, 0xb69, 0x1, 0x0);
        gbc.writeMem(0x6f6f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x710);
        EXPECT(gbc.pc(), 0x6f70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 011A
        gbc.setState(0x8907, 0xea11, 0x1210, 0xcb01, 0x845b, 0xe8ed, 0x0, 0x1);
        gbc.writeMem(0x8907, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xea11);
        EXPECT(gbc.pc(), 0x8908);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8907), 0x40);
        // 40 011B
        gbc.setState(0xc685, 0xff4f, 0xd0, 0x1553, 0x7750, 0xe000, 0x0, 0x0);
        gbc.writeMem(0xc685, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xff4f);
        EXPECT(gbc.pc(), 0xc686);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc685), 0x40);
        // 40 011C
        gbc.setState(0xa39a, 0xd1d9, 0xff20, 0xbfeb, 0x5f8, 0x95f1, 0x1, 0x1);
        gbc.writeMem(0xa39a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xd1d9);
        EXPECT(gbc.pc(), 0xa39b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa39a), 0x40);
        // 40 011D
        gbc.setState(0xb4b6, 0x1ba7, 0xe6c0, 0x91e7, 0x9309, 0xad43, 0x0, 0x0);
        gbc.writeMem(0xb4b6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x1ba7);
        EXPECT(gbc.pc(), 0xb4b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4b6), 0x40);
        // 40 011E
        gbc.setState(0x4329, 0x1915, 0x7a30, 0x4d30, 0x7d08, 0xd9c8, 0x0, 0x1);
        gbc.writeMem(0x4329, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x1915);
        EXPECT(gbc.pc(), 0x432a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 011F
        gbc.setState(0xaa0b, 0x4960, 0xb140, 0x63be, 0x1c43, 0x1202, 0x0, 0x0);
        gbc.writeMem(0xaa0b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x4960);
        EXPECT(gbc.pc(), 0xaa0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa0b), 0x40);
        // 40 0120
        gbc.setState(0x5ecb, 0x5c1a, 0x7a70, 0xef15, 0x38f7, 0x646e, 0x0, 0x1);
        gbc.writeMem(0x5ecb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x5c1a);
        EXPECT(gbc.pc(), 0x5ecc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0121
        gbc.setState(0x496a, 0xd2d0, 0x6670, 0x9638, 0x5830, 0xf18, 0x1, 0x1);
        gbc.writeMem(0x496a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd2d0);
        EXPECT(gbc.pc(), 0x496b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0122
        gbc.setState(0xcc3e, 0x802e, 0x1930, 0x9698, 0x37ed, 0x3702, 0x1, 0x0);
        gbc.writeMem(0xcc3e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x802e);
        EXPECT(gbc.pc(), 0xcc3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc3e), 0x40);
        // 40 0123
        gbc.setState(0x224c, 0xbf57, 0x5b00, 0xf873, 0xed68, 0xd910, 0x0, 0x0);
        gbc.writeMem(0x224c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xbf57);
        EXPECT(gbc.pc(), 0x224d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0124
        gbc.setState(0x7bc3, 0x356, 0x53b0, 0xb238, 0xd7ad, 0x9543, 0x0, 0x1);
        gbc.writeMem(0x7bc3, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x356);
        EXPECT(gbc.pc(), 0x7bc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0125
        gbc.setState(0x7d00, 0xea3d, 0x2900, 0x72f3, 0x846d, 0x1140, 0x1, 0x0);
        gbc.writeMem(0x7d00, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xea3d);
        EXPECT(gbc.pc(), 0x7d01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0126
        gbc.setState(0x3b62, 0x6d50, 0xc710, 0xeb32, 0x4adb, 0x9411, 0x0, 0x1);
        gbc.writeMem(0x3b62, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x6d50);
        EXPECT(gbc.pc(), 0x3b63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0127
        gbc.setState(0x1bc1, 0x608f, 0x7540, 0x3a86, 0xe9c8, 0x7553, 0x1, 0x0);
        gbc.writeMem(0x1bc1, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x608f);
        EXPECT(gbc.pc(), 0x1bc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0128
        gbc.setState(0x3d3e, 0x2501, 0xa320, 0xbc62, 0x5ec2, 0xf9b0, 0x0, 0x1);
        gbc.writeMem(0x3d3e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x2501);
        EXPECT(gbc.pc(), 0x3d3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0129
        gbc.setState(0x36fc, 0xcdbf, 0xd090, 0xbeb9, 0x7ec9, 0xdb7d, 0x0, 0x1);
        gbc.writeMem(0x36fc, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xcdbf);
        EXPECT(gbc.pc(), 0x36fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 012A
        gbc.setState(0xd4a1, 0x5a72, 0x10a0, 0xbbdc, 0x290, 0x74bb, 0x0, 0x1);
        gbc.writeMem(0xd4a1, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x5a72);
        EXPECT(gbc.pc(), 0xd4a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4a1), 0x40);
        // 40 012C
        gbc.setState(0x12a5, 0xbb4a, 0x3450, 0xdb94, 0xd59e, 0x47db, 0x1, 0x0);
        gbc.writeMem(0x12a5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xbb4a);
        EXPECT(gbc.pc(), 0x12a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 012D
        gbc.setState(0x82ba, 0x56b6, 0xca30, 0x56d8, 0x9da7, 0x9906, 0x0, 0x1);
        gbc.writeMem(0x82ba, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x56b6);
        EXPECT(gbc.pc(), 0x82bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82ba), 0x40);
        // 40 012E
        gbc.setState(0x88fa, 0x9e3f, 0x6f10, 0xb8d3, 0x6d7f, 0x41a9, 0x1, 0x0);
        gbc.writeMem(0x88fa, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x9e3f);
        EXPECT(gbc.pc(), 0x88fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88fa), 0x40);
        // 40 012F
        gbc.setState(0xa69c, 0x828b, 0x1720, 0xad60, 0x35b2, 0xb89c, 0x0, 0x1);
        gbc.writeMem(0xa69c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x828b);
        EXPECT(gbc.pc(), 0xa69d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa69c), 0x40);
        // 40 0130
        gbc.setState(0xc8c, 0x5a10, 0x5060, 0xe0d6, 0x8873, 0x4605, 0x1, 0x1);
        gbc.writeMem(0xc8c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x5a10);
        EXPECT(gbc.pc(), 0xc8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0131
        gbc.setState(0xa235, 0x2ec1, 0x4800, 0xd337, 0x2d4c, 0xb5ac, 0x0, 0x0);
        gbc.writeMem(0xa235, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x2ec1);
        EXPECT(gbc.pc(), 0xa236);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa235), 0x40);
        // 40 0132
        gbc.setState(0x3433, 0xb969, 0x6790, 0xf555, 0xc415, 0x24fd, 0x0, 0x1);
        gbc.writeMem(0x3433, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xb969);
        EXPECT(gbc.pc(), 0x3434);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0133
        gbc.setState(0x147d, 0x3f2e, 0x4330, 0x3b81, 0x46f0, 0xecde, 0x0, 0x1);
        gbc.writeMem(0x147d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x3f2e);
        EXPECT(gbc.pc(), 0x147e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0134
        gbc.setState(0x6d60, 0xa3a0, 0x1f20, 0x465c, 0x4e95, 0xedac, 0x1, 0x0);
        gbc.writeMem(0x6d60, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xa3a0);
        EXPECT(gbc.pc(), 0x6d61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0135
        gbc.setState(0x5568, 0xa8be, 0x95a0, 0x4a7f, 0x8f7c, 0x9877, 0x0, 0x0);
        gbc.writeMem(0x5568, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xa8be);
        EXPECT(gbc.pc(), 0x5569);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0136
        gbc.setState(0x6f44, 0xa89a, 0xfa70, 0xea7f, 0x4058, 0xfdd1, 0x1, 0x0);
        gbc.writeMem(0x6f44, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xa89a);
        EXPECT(gbc.pc(), 0x6f45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0137
        gbc.setState(0xd8e0, 0x50dc, 0xc0c0, 0x3880, 0x25df, 0x71b8, 0x1, 0x1);
        gbc.writeMem(0xd8e0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x50dc);
        EXPECT(gbc.pc(), 0xd8e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8e0), 0x40);
        // 40 0138
        gbc.setState(0x5892, 0xa99b, 0xb3b0, 0xbd3e, 0x24ca, 0xd30c, 0x1, 0x1);
        gbc.writeMem(0x5892, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xa99b);
        EXPECT(gbc.pc(), 0x5893);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0139
        gbc.setState(0xb8, 0xd51c, 0x6820, 0xc1be, 0x3dca, 0xff32, 0x0, 0x1);
        gbc.writeMem(0xb8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xd51c);
        EXPECT(gbc.pc(), 0xb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 013A
        gbc.setState(0xec38, 0x64ae, 0x4880, 0x51dd, 0x8a00, 0x1411, 0x0, 0x0);
        gbc.writeMem(0xec38, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x64ae);
        EXPECT(gbc.pc(), 0xec39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec38), 0x40);
        // 40 013B
        gbc.setState(0x2919, 0x9cb1, 0x42e0, 0xc176, 0xba97, 0x6586, 0x1, 0x1);
        gbc.writeMem(0x2919, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x9cb1);
        EXPECT(gbc.pc(), 0x291a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 013C
        gbc.setState(0x654b, 0xa484, 0x30d0, 0x44ef, 0x7527, 0xaf89, 0x0, 0x1);
        gbc.writeMem(0x654b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xa484);
        EXPECT(gbc.pc(), 0x654c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 013D
        gbc.setState(0x2810, 0x6a99, 0x2920, 0x1b36, 0xee9e, 0x1488, 0x0, 0x1);
        gbc.writeMem(0x2810, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x6a99);
        EXPECT(gbc.pc(), 0x2811);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 013E
        gbc.setState(0x7c7e, 0x9cbc, 0xae50, 0xc841, 0xd49f, 0xd72b, 0x0, 0x0);
        gbc.writeMem(0x7c7e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x9cbc);
        EXPECT(gbc.pc(), 0x7c7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 013F
        gbc.setState(0x25f1, 0xaf0f, 0xf830, 0xeda1, 0x5618, 0x176d, 0x0, 0x0);
        gbc.writeMem(0x25f1, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xaf0f);
        EXPECT(gbc.pc(), 0x25f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0140
        gbc.setState(0x6eb4, 0x51b4, 0x9430, 0x2b44, 0xd551, 0xa42f, 0x1, 0x1);
        gbc.writeMem(0x6eb4, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x51b4);
        EXPECT(gbc.pc(), 0x6eb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0141
        gbc.setState(0xb51d, 0xc6c9, 0x9180, 0x6576, 0xb122, 0x8f71, 0x1, 0x1);
        gbc.writeMem(0xb51d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xc6c9);
        EXPECT(gbc.pc(), 0xb51e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb51d), 0x40);
        // 40 0142
        gbc.setState(0xc0bd, 0xe30c, 0xb6e0, 0xce84, 0x5585, 0xf1d1, 0x1, 0x0);
        gbc.writeMem(0xc0bd, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe30c);
        EXPECT(gbc.pc(), 0xc0be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0bd), 0x40);
        // 40 0143
        gbc.setState(0x3aaf, 0xe7e7, 0x44d0, 0x660b, 0xed1, 0x12c2, 0x0, 0x1);
        gbc.writeMem(0x3aaf, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xe7e7);
        EXPECT(gbc.pc(), 0x3ab0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0144
        gbc.setState(0x19da, 0x3333, 0x2420, 0x3a0b, 0xbb3, 0x4f15, 0x0, 0x1);
        gbc.writeMem(0x19da, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x3333);
        EXPECT(gbc.pc(), 0x19db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0145
        gbc.setState(0xd3f3, 0xb281, 0x74f0, 0x1db, 0xfe1a, 0xf3a3, 0x0, 0x1);
        gbc.writeMem(0xd3f3, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xb281);
        EXPECT(gbc.pc(), 0xd3f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3f3), 0x40);
        // 40 0146
        gbc.setState(0x2438, 0x314d, 0xe740, 0x6b00, 0xe659, 0xe66a, 0x1, 0x1);
        gbc.writeMem(0x2438, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x314d);
        EXPECT(gbc.pc(), 0x2439);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0147
        gbc.setState(0x66cb, 0xdf12, 0x280, 0x1bdf, 0x6a3e, 0x2075, 0x0, 0x1);
        gbc.writeMem(0x66cb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xdf12);
        EXPECT(gbc.pc(), 0x66cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0148
        gbc.setState(0x5bb, 0xa0ba, 0x3c90, 0xcec7, 0xd093, 0x4a0d, 0x1, 0x1);
        gbc.writeMem(0x5bb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xa0ba);
        EXPECT(gbc.pc(), 0x5bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0149
        gbc.setState(0x7100, 0x54ef, 0x5c40, 0x8a7f, 0xedff, 0x589a, 0x1, 0x1);
        gbc.writeMem(0x7100, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x54ef);
        EXPECT(gbc.pc(), 0x7101);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 014A
        gbc.setState(0x15bb, 0xf740, 0x7490, 0x9033, 0x2d1, 0x67cc, 0x1, 0x0);
        gbc.writeMem(0x15bb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xf740);
        EXPECT(gbc.pc(), 0x15bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 014B
        gbc.setState(0xedb5, 0xe160, 0x28f0, 0x5473, 0xe102, 0x4669, 0x1, 0x0);
        gbc.writeMem(0xedb5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe160);
        EXPECT(gbc.pc(), 0xedb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedb5), 0x40);
        // 40 014C
        gbc.setState(0x55d1, 0x6200, 0xc340, 0xca35, 0x2a9b, 0x25b, 0x0, 0x0);
        gbc.writeMem(0x55d1, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x6200);
        EXPECT(gbc.pc(), 0x55d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 014D
        gbc.setState(0xdeb9, 0x5c54, 0x5120, 0x9e29, 0xc410, 0x2c7, 0x0, 0x1);
        gbc.writeMem(0xdeb9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x5c54);
        EXPECT(gbc.pc(), 0xdeba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeb9), 0x40);
        // 40 014E
        gbc.setState(0x8665, 0x8de3, 0x8b10, 0x607a, 0x249d, 0x91e1, 0x0, 0x0);
        gbc.writeMem(0x8665, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x8de3);
        EXPECT(gbc.pc(), 0x8666);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8665), 0x40);
        // 40 0150
        gbc.setState(0x6a85, 0xebb5, 0x1390, 0x9a71, 0x915e, 0xa05, 0x1, 0x0);
        gbc.writeMem(0x6a85, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xebb5);
        EXPECT(gbc.pc(), 0x6a86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0151
        gbc.setState(0xb91b, 0x9163, 0x8c60, 0x2b57, 0x130e, 0xd189, 0x0, 0x0);
        gbc.writeMem(0xb91b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x9163);
        EXPECT(gbc.pc(), 0xb91c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb91b), 0x40);
        // 40 0152
        gbc.setState(0xca23, 0x2b8d, 0x84d0, 0xcf58, 0x5289, 0x94f2, 0x0, 0x1);
        gbc.writeMem(0xca23, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x2b8d);
        EXPECT(gbc.pc(), 0xca24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca23), 0x40);
        // 40 0153
        gbc.setState(0x3f24, 0xf346, 0x1e90, 0x8a1f, 0x5aba, 0xf646, 0x0, 0x0);
        gbc.writeMem(0x3f24, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xf346);
        EXPECT(gbc.pc(), 0x3f25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0154
        gbc.setState(0x5493, 0xcd25, 0x5d70, 0x2d19, 0xd315, 0x55e5, 0x1, 0x0);
        gbc.writeMem(0x5493, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xcd25);
        EXPECT(gbc.pc(), 0x5494);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0155
        gbc.setState(0xe8ad, 0x57d8, 0xa960, 0x6f17, 0x25e5, 0x9554, 0x0, 0x0);
        gbc.writeMem(0xe8ad, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x57d8);
        EXPECT(gbc.pc(), 0xe8ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8ad), 0x40);
        // 40 0156
        gbc.setState(0xde37, 0x4ce3, 0xb9c0, 0x475d, 0xe00, 0x44e3, 0x1, 0x0);
        gbc.writeMem(0xde37, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x4ce3);
        EXPECT(gbc.pc(), 0xde38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde37), 0x40);
        // 40 0157
        gbc.setState(0xa02e, 0xa36a, 0xb80, 0x54c7, 0x4a25, 0x490f, 0x1, 0x1);
        gbc.writeMem(0xa02e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xa36a);
        EXPECT(gbc.pc(), 0xa02f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa02e), 0x40);
        // 40 0158
        gbc.setState(0xab81, 0xcac5, 0x41d0, 0xe39d, 0xd0ca, 0xb266, 0x1, 0x0);
        gbc.writeMem(0xab81, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xcac5);
        EXPECT(gbc.pc(), 0xab82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab81), 0x40);
        // 40 0159
        gbc.setState(0x815c, 0x83ff, 0x4ab0, 0x2c3, 0xf5f1, 0x1791, 0x1, 0x1);
        gbc.writeMem(0x815c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x83ff);
        EXPECT(gbc.pc(), 0x815d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x815c), 0x40);
        // 40 015A
        gbc.setState(0x9a90, 0xcbeb, 0xb0e0, 0x9cdb, 0x727d, 0xed88, 0x1, 0x1);
        gbc.writeMem(0x9a90, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xcbeb);
        EXPECT(gbc.pc(), 0x9a91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a90), 0x40);
        // 40 015B
        gbc.setState(0x1685, 0x9a14, 0xd7d0, 0xef42, 0x8a75, 0x5d29, 0x1, 0x1);
        gbc.writeMem(0x1685, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x9a14);
        EXPECT(gbc.pc(), 0x1686);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 015C
        gbc.setState(0xc1fc, 0xf03c, 0x9570, 0x6932, 0xbbee, 0xce31, 0x1, 0x1);
        gbc.writeMem(0xc1fc, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xf03c);
        EXPECT(gbc.pc(), 0xc1fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1fc), 0x40);
        // 40 015D
        gbc.setState(0xbbf2, 0x5d3a, 0xac40, 0x36f8, 0x5f55, 0x865d, 0x0, 0x0);
        gbc.writeMem(0xbbf2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x5d3a);
        EXPECT(gbc.pc(), 0xbbf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbf2), 0x40);
        // 40 015E
        gbc.setState(0xb501, 0x86cc, 0xa2c0, 0xeb78, 0x4ebd, 0x9b38, 0x1, 0x1);
        gbc.writeMem(0xb501, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x86cc);
        EXPECT(gbc.pc(), 0xb502);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb501), 0x40);
        // 40 015F
        gbc.setState(0xb8eb, 0x8b5, 0x1c00, 0xc756, 0x5ba1, 0xb9d1, 0x0, 0x0);
        gbc.writeMem(0xb8eb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x8b5);
        EXPECT(gbc.pc(), 0xb8ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8eb), 0x40);
        // 40 0160
        gbc.setState(0x45d, 0xf4ad, 0x44f0, 0xd2d7, 0xd21e, 0x2718, 0x0, 0x1);
        gbc.writeMem(0x45d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xf4ad);
        EXPECT(gbc.pc(), 0x45e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0161
        gbc.setState(0x252f, 0x428b, 0xc8e0, 0xda7, 0xfd9f, 0x874d, 0x0, 0x0);
        gbc.writeMem(0x252f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x428b);
        EXPECT(gbc.pc(), 0x2530);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0162
        gbc.setState(0xa444, 0x8c6e, 0x1160, 0xa77c, 0x1c5, 0xaa77, 0x0, 0x0);
        gbc.writeMem(0xa444, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x8c6e);
        EXPECT(gbc.pc(), 0xa445);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa444), 0x40);
        // 40 0163
        gbc.setState(0x6a8c, 0x6cc5, 0x6070, 0x4013, 0xd195, 0x6aa0, 0x0, 0x0);
        gbc.writeMem(0x6a8c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x6cc5);
        EXPECT(gbc.pc(), 0x6a8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0164
        gbc.setState(0xcf03, 0xbf7d, 0xd350, 0xbb7f, 0x5f14, 0xcf24, 0x0, 0x0);
        gbc.writeMem(0xcf03, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xbf7d);
        EXPECT(gbc.pc(), 0xcf04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf03), 0x40);
        // 40 0165
        gbc.setState(0x987c, 0xed, 0x4d60, 0xe782, 0xd52, 0x5cc, 0x0, 0x0);
        gbc.writeMem(0x987c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xed);
        EXPECT(gbc.pc(), 0x987d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x987c), 0x40);
        // 40 0166
        gbc.setState(0x572c, 0xff71, 0x56e0, 0xe236, 0x49ff, 0x440a, 0x0, 0x0);
        gbc.writeMem(0x572c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xff71);
        EXPECT(gbc.pc(), 0x572d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0167
        gbc.setState(0x5c8, 0xce7d, 0x1310, 0xa26d, 0x8f45, 0x6041, 0x1, 0x1);
        gbc.writeMem(0x5c8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xce7d);
        EXPECT(gbc.pc(), 0x5c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0169
        gbc.setState(0x5fe1, 0x792, 0x2540, 0xd969, 0x398b, 0x4cc6, 0x1, 0x1);
        gbc.writeMem(0x5fe1, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x792);
        EXPECT(gbc.pc(), 0x5fe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 016A
        gbc.setState(0x40ce, 0x9631, 0xf9e0, 0x235b, 0xf03a, 0x1f6f, 0x1, 0x0);
        gbc.writeMem(0x40ce, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x9631);
        EXPECT(gbc.pc(), 0x40cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 016B
        gbc.setState(0x5086, 0xf288, 0x5280, 0xf389, 0x48dc, 0x946b, 0x1, 0x0);
        gbc.writeMem(0x5086, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xf288);
        EXPECT(gbc.pc(), 0x5087);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 016C
        gbc.setState(0xb077, 0xa4f2, 0x9d00, 0xf085, 0xc372, 0xd5e4, 0x1, 0x0);
        gbc.writeMem(0xb077, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xa4f2);
        EXPECT(gbc.pc(), 0xb078);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb077), 0x40);
        // 40 016D
        gbc.setState(0xba95, 0x5ea7, 0x8180, 0xa435, 0xb159, 0xb55f, 0x1, 0x1);
        gbc.writeMem(0xba95, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x5ea7);
        EXPECT(gbc.pc(), 0xba96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba95), 0x40);
        // 40 016E
        gbc.setState(0x353d, 0x5d1e, 0xfa70, 0x4120, 0x77bc, 0x2d2c, 0x1, 0x1);
        gbc.writeMem(0x353d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x5d1e);
        EXPECT(gbc.pc(), 0x353e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 016F
        gbc.setState(0x7f09, 0xefab, 0xc1c0, 0x7bdd, 0xe857, 0x91b5, 0x0, 0x0);
        gbc.writeMem(0x7f09, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xefab);
        EXPECT(gbc.pc(), 0x7f0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0170
        gbc.setState(0x582, 0x83f9, 0x7220, 0x713a, 0x205d, 0xaa75, 0x1, 0x1);
        gbc.writeMem(0x582, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x83f9);
        EXPECT(gbc.pc(), 0x583);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0171
        gbc.setState(0xc54c, 0x40d9, 0x2e70, 0xf476, 0x9c04, 0x9224, 0x0, 0x0);
        gbc.writeMem(0xc54c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x40d9);
        EXPECT(gbc.pc(), 0xc54d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc54c), 0x40);
        // 40 0172
        gbc.setState(0x5d37, 0x7bc4, 0xbf90, 0x1dfe, 0xee34, 0x6270, 0x1, 0x0);
        gbc.writeMem(0x5d37, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x7bc4);
        EXPECT(gbc.pc(), 0x5d38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0174
        gbc.setState(0x502e, 0xfb6, 0x3b80, 0x11d3, 0x5ac2, 0x3ef5, 0x1, 0x0);
        gbc.writeMem(0x502e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xfb6);
        EXPECT(gbc.pc(), 0x502f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0175
        gbc.setState(0x2b89, 0x4862, 0x8c70, 0xa7e4, 0x14ba, 0x4a50, 0x0, 0x1);
        gbc.writeMem(0x2b89, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x4862);
        EXPECT(gbc.pc(), 0x2b8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0176
        gbc.setState(0x34e1, 0xb2c2, 0x2610, 0x1c7b, 0xf3c3, 0x2ae9, 0x1, 0x0);
        gbc.writeMem(0x34e1, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xb2c2);
        EXPECT(gbc.pc(), 0x34e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0177
        gbc.setState(0xa4bc, 0x7232, 0x20f0, 0x505e, 0xb43a, 0xd20, 0x0, 0x0);
        gbc.writeMem(0xa4bc, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x7232);
        EXPECT(gbc.pc(), 0xa4bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4bc), 0x40);
        // 40 0178
        gbc.setState(0xd18, 0xc237, 0xa8b0, 0x7026, 0x2e87, 0x9673, 0x1, 0x0);
        gbc.writeMem(0xd18, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xc237);
        EXPECT(gbc.pc(), 0xd19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0179
        gbc.setState(0xd59e, 0x5b38, 0xd9c0, 0x51ce, 0xef5, 0x48cd, 0x1, 0x1);
        gbc.writeMem(0xd59e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x5b38);
        EXPECT(gbc.pc(), 0xd59f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd59e), 0x40);
        // 40 017B
        gbc.setState(0xef9, 0xdcef, 0xdb30, 0x6bcb, 0x1909, 0x7eee, 0x1, 0x1);
        gbc.writeMem(0xef9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xdcef);
        EXPECT(gbc.pc(), 0xefa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 017C
        gbc.setState(0xeec8, 0xf162, 0xab00, 0x1ba3, 0x6c2f, 0x3013, 0x1, 0x1);
        gbc.writeMem(0xeec8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xf162);
        EXPECT(gbc.pc(), 0xeec9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeec8), 0x40);
        // 40 017D
        gbc.setState(0x1f6c, 0x944, 0xe4d0, 0xaad1, 0x73fe, 0x42aa, 0x0, 0x1);
        gbc.writeMem(0x1f6c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x944);
        EXPECT(gbc.pc(), 0x1f6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 017E
        gbc.setState(0x1e71, 0xe29, 0x9db0, 0xe326, 0x8941, 0x58bf, 0x0, 0x1);
        gbc.writeMem(0x1e71, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xe29);
        EXPECT(gbc.pc(), 0x1e72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 017F
        gbc.setState(0x3426, 0xe1d1, 0xbc40, 0x7dc3, 0x48a7, 0xcf8a, 0x0, 0x1);
        gbc.writeMem(0x3426, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xe1d1);
        EXPECT(gbc.pc(), 0x3427);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0180
        gbc.setState(0x9f1, 0x7ee8, 0xc8a0, 0x9a7e, 0x7047, 0x6683, 0x1, 0x0);
        gbc.writeMem(0x9f1, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x7ee8);
        EXPECT(gbc.pc(), 0x9f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0181
        gbc.setState(0xc92e, 0xf835, 0x83d0, 0x4ad5, 0x3606, 0x4d3d, 0x0, 0x0);
        gbc.writeMem(0xc92e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xf835);
        EXPECT(gbc.pc(), 0xc92f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc92e), 0x40);
        // 40 0182
        gbc.setState(0x4c28, 0xa495, 0x8fb0, 0xeb6f, 0x10bd, 0x3e3c, 0x1, 0x1);
        gbc.writeMem(0x4c28, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xa495);
        EXPECT(gbc.pc(), 0x4c29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0183
        gbc.setState(0xb767, 0x1f78, 0x1260, 0xc1e0, 0xd193, 0xb4ca, 0x0, 0x1);
        gbc.writeMem(0xb767, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x1f78);
        EXPECT(gbc.pc(), 0xb768);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb767), 0x40);
        // 40 0184
        gbc.setState(0x4905, 0x8452, 0x7fa0, 0x5e3, 0x8c98, 0xeb40, 0x1, 0x0);
        gbc.writeMem(0x4905, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x8452);
        EXPECT(gbc.pc(), 0x4906);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0185
        gbc.setState(0x729e, 0xdecc, 0x5dc0, 0x11b0, 0x4d6c, 0x15c5, 0x1, 0x1);
        gbc.writeMem(0x729e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xdecc);
        EXPECT(gbc.pc(), 0x729f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0186
        gbc.setState(0x2ae8, 0xc77, 0xd220, 0xf178, 0x134, 0xbd31, 0x1, 0x0);
        gbc.writeMem(0x2ae8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xc77);
        EXPECT(gbc.pc(), 0x2ae9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0187
        gbc.setState(0xc203, 0x8af7, 0xbc00, 0x8608, 0x28c5, 0x2b8b, 0x1, 0x1);
        gbc.writeMem(0xc203, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x8af7);
        EXPECT(gbc.pc(), 0xc204);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc203), 0x40);
        // 40 0189
        gbc.setState(0x1210, 0xff1f, 0x2b30, 0x4190, 0xa463, 0x1907, 0x1, 0x1);
        gbc.writeMem(0x1210, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xff1f);
        EXPECT(gbc.pc(), 0x1211);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 018A
        gbc.setState(0xa691, 0x8057, 0x6280, 0xda9f, 0x649e, 0x689e, 0x0, 0x1);
        gbc.writeMem(0xa691, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x8057);
        EXPECT(gbc.pc(), 0xa692);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa691), 0x40);
        // 40 018B
        gbc.setState(0x6d9b, 0xe669, 0x7a60, 0x6a0f, 0x3b4, 0x4849, 0x1, 0x1);
        gbc.writeMem(0x6d9b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xe669);
        EXPECT(gbc.pc(), 0x6d9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 018C
        gbc.setState(0xec0a, 0x8366, 0x6a50, 0x2937, 0xf243, 0x7e2b, 0x0, 0x0);
        gbc.writeMem(0xec0a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x8366);
        EXPECT(gbc.pc(), 0xec0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec0a), 0x40);
        // 40 018D
        gbc.setState(0xd5ba, 0xe2e9, 0x7ee0, 0x8667, 0xb70e, 0x6a2a, 0x1, 0x0);
        gbc.writeMem(0xd5ba, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xe2e9);
        EXPECT(gbc.pc(), 0xd5bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5ba), 0x40);
        // 40 018E
        gbc.setState(0x8538, 0x866d, 0xf990, 0x6d8, 0x9350, 0x7fda, 0x1, 0x1);
        gbc.writeMem(0x8538, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x866d);
        EXPECT(gbc.pc(), 0x8539);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8538), 0x40);
        // 40 018F
        gbc.setState(0x4a85, 0xe40c, 0xa40, 0x9a1d, 0x61fd, 0xe652, 0x1, 0x1);
        gbc.writeMem(0x4a85, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xe40c);
        EXPECT(gbc.pc(), 0x4a86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0191
        gbc.setState(0xcb8, 0x27f2, 0x3d20, 0xcd8e, 0x8008, 0x163b, 0x0, 0x0);
        gbc.writeMem(0xcb8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x27f2);
        EXPECT(gbc.pc(), 0xcb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0193
        gbc.setState(0xaa48, 0x2a6f, 0xe0d0, 0xe6d5, 0xa0d1, 0x3ade, 0x1, 0x1);
        gbc.writeMem(0xaa48, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x2a6f);
        EXPECT(gbc.pc(), 0xaa49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa48), 0x40);
        // 40 0194
        gbc.setState(0x6156, 0xcb60, 0x7140, 0x55ba, 0xfd37, 0x564c, 0x1, 0x0);
        gbc.writeMem(0x6156, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xcb60);
        EXPECT(gbc.pc(), 0x6157);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0195
        gbc.setState(0x4a91, 0x1868, 0x6630, 0xe528, 0x858f, 0xca90, 0x1, 0x0);
        gbc.writeMem(0x4a91, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x1868);
        EXPECT(gbc.pc(), 0x4a92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0197
        gbc.setState(0xccd8, 0xefee, 0x6580, 0x430f, 0x47a3, 0x4919, 0x1, 0x0);
        gbc.writeMem(0xccd8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xefee);
        EXPECT(gbc.pc(), 0xccd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccd8), 0x40);
        // 40 0198
        gbc.setState(0x13ca, 0x6e85, 0x8f70, 0x208, 0xf143, 0x6e9e, 0x1, 0x0);
        gbc.writeMem(0x13ca, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x6e85);
        EXPECT(gbc.pc(), 0x13cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0199
        gbc.setState(0x2006, 0xc136, 0xa6d0, 0xa369, 0x4392, 0x50b3, 0x0, 0x1);
        gbc.writeMem(0x2006, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc136);
        EXPECT(gbc.pc(), 0x2007);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 019A
        gbc.setState(0xb85e, 0x92af, 0x18c0, 0xc1e5, 0x8b75, 0xb1b3, 0x1, 0x0);
        gbc.writeMem(0xb85e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x92af);
        EXPECT(gbc.pc(), 0xb85f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb85e), 0x40);
        // 40 019B
        gbc.setState(0xb813, 0x2bd3, 0x8f60, 0x1bf1, 0x6b9f, 0xf30d, 0x0, 0x1);
        gbc.writeMem(0xb813, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x2bd3);
        EXPECT(gbc.pc(), 0xb814);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb813), 0x40);
        // 40 019C
        gbc.setState(0xa036, 0x9c05, 0x7250, 0x2e96, 0xc20d, 0x93b9, 0x1, 0x1);
        gbc.writeMem(0xa036, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x9c05);
        EXPECT(gbc.pc(), 0xa037);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa036), 0x40);
        // 40 019D
        gbc.setState(0x8454, 0xf510, 0xcb90, 0xe42, 0xe330, 0x2032, 0x0, 0x0);
        gbc.writeMem(0x8454, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xf510);
        EXPECT(gbc.pc(), 0x8455);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8454), 0x40);
        // 40 019E
        gbc.setState(0x162e, 0x22ad, 0x9e90, 0x3731, 0x5e3b, 0x71c4, 0x0, 0x1);
        gbc.writeMem(0x162e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x22ad);
        EXPECT(gbc.pc(), 0x162f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 019F
        gbc.setState(0x73b0, 0x5c0b, 0xa260, 0x419, 0xd1, 0x7d8c, 0x0, 0x0);
        gbc.writeMem(0x73b0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5c0b);
        EXPECT(gbc.pc(), 0x73b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 01A0
        gbc.setState(0x399c, 0x8d50, 0x80, 0x61d8, 0x1084, 0xe978, 0x0, 0x1);
        gbc.writeMem(0x399c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x8d50);
        EXPECT(gbc.pc(), 0x399d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 01A1
        gbc.setState(0x4e4a, 0x6c1a, 0x85d0, 0x1db2, 0x63b5, 0x6e42, 0x0, 0x1);
        gbc.writeMem(0x4e4a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x6c1a);
        EXPECT(gbc.pc(), 0x4e4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 01A2
        gbc.setState(0x42c6, 0x5dea, 0x7e80, 0x3250, 0xa2e0, 0x6cac, 0x0, 0x0);
        gbc.writeMem(0x42c6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x5dea);
        EXPECT(gbc.pc(), 0x42c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 01A3
        gbc.setState(0xeeb, 0x14ad, 0x260, 0x4c83, 0xba70, 0x234e, 0x0, 0x1);
        gbc.writeMem(0xeeb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x14ad);
        EXPECT(gbc.pc(), 0xeec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 01A4
        gbc.setState(0x3f18, 0xa89d, 0xbc60, 0x3377, 0x1c3e, 0x1758, 0x1, 0x0);
        gbc.writeMem(0x3f18, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xa89d);
        EXPECT(gbc.pc(), 0x3f19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 01A5
        gbc.setState(0xe13f, 0x33f6, 0xe3a0, 0xa26e, 0x807a, 0xe2b4, 0x1, 0x1);
        gbc.writeMem(0xe13f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x33f6);
        EXPECT(gbc.pc(), 0xe140);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe13f), 0x40);
        // 40 01A6
        gbc.setState(0x7962, 0x5fb2, 0x2b90, 0x9286, 0x7412, 0xfadd, 0x1, 0x1);
        gbc.writeMem(0x7962, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x5fb2);
        EXPECT(gbc.pc(), 0x7963);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 01A7
        gbc.setState(0x814f, 0x3d09, 0xe8f0, 0xfeed, 0x3f47, 0x5d0f, 0x0, 0x0);
        gbc.writeMem(0x814f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x3d09);
        EXPECT(gbc.pc(), 0x8150);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x814f), 0x40);
        // 40 01A8
        gbc.setState(0x2dd1, 0x3ca7, 0x69a0, 0xddcd, 0xa6f8, 0x9447, 0x0, 0x1);
        gbc.writeMem(0x2dd1, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x3ca7);
        EXPECT(gbc.pc(), 0x2dd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 01A9
        gbc.setState(0x967, 0xafba, 0xdd40, 0x5481, 0x9b42, 0x1bc2, 0x0, 0x1);
        gbc.writeMem(0x967, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xafba);
        EXPECT(gbc.pc(), 0x968);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 01AA
        gbc.setState(0xb276, 0xda1, 0x9360, 0x1fc0, 0x6b53, 0xbd8, 0x1, 0x1);
        gbc.writeMem(0xb276, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xda1);
        EXPECT(gbc.pc(), 0xb277);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb276), 0x40);
        // 40 01AB
        gbc.setState(0x688f, 0x8027, 0x6430, 0x3b6e, 0xc928, 0xc3ec, 0x0, 0x1);
        gbc.writeMem(0x688f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x8027);
        EXPECT(gbc.pc(), 0x6890);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 01AC
        gbc.setState(0xa53e, 0x551d, 0x7e80, 0x983e, 0xd7dc, 0x3f8c, 0x1, 0x0);
        gbc.writeMem(0xa53e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x551d);
        EXPECT(gbc.pc(), 0xa53f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa53e), 0x40);
        // 40 01AD
        gbc.setState(0x1717, 0x79c3, 0x2540, 0x47de, 0x592c, 0x5578, 0x1, 0x1);
        gbc.writeMem(0x1717, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x79c3);
        EXPECT(gbc.pc(), 0x1718);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 01AE
        gbc.setState(0x3f4, 0x552b, 0x7600, 0x462, 0x7a0e, 0x4e84, 0x0, 0x1);
        gbc.writeMem(0x3f4, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x552b);
        EXPECT(gbc.pc(), 0x3f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 01AF
        gbc.setState(0xcc19, 0x1ebe, 0x27c0, 0xdb82, 0xc6f6, 0x28dc, 0x1, 0x0);
        gbc.writeMem(0xcc19, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x1ebe);
        EXPECT(gbc.pc(), 0xcc1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc19), 0x40);
        // 40 01B0
        gbc.setState(0xbbbd, 0xe363, 0x9da0, 0xb774, 0x5464, 0x110c, 0x0, 0x0);
        gbc.writeMem(0xbbbd, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xe363);
        EXPECT(gbc.pc(), 0xbbbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbbd), 0x40);
        // 40 01B1
        gbc.setState(0xa9e5, 0x1bcf, 0xf770, 0xc3df, 0x80ea, 0x965b, 0x0, 0x1);
        gbc.writeMem(0xa9e5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x1bcf);
        EXPECT(gbc.pc(), 0xa9e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9e5), 0x40);
        // 40 01B3
        gbc.setState(0x5266, 0xf575, 0xa0b0, 0x76fe, 0x8bab, 0x5eba, 0x1, 0x0);
        gbc.writeMem(0x5266, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xf575);
        EXPECT(gbc.pc(), 0x5267);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 01B4
        gbc.setState(0xe2fa, 0x2a7c, 0xe080, 0xfef0, 0x101b, 0xca68, 0x0, 0x1);
        gbc.writeMem(0xe2fa, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x2a7c);
        EXPECT(gbc.pc(), 0xe2fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2fa), 0x40);
        // 40 01B5
        gbc.setState(0x6c28, 0xe59a, 0x58e0, 0xcdab, 0x7693, 0x4596, 0x0, 0x1);
        gbc.writeMem(0x6c28, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xe59a);
        EXPECT(gbc.pc(), 0x6c29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 01B6
        gbc.setState(0xa7e8, 0x85b, 0x23e0, 0xa8fc, 0xd31e, 0xcf33, 0x0, 0x0);
        gbc.writeMem(0xa7e8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x85b);
        EXPECT(gbc.pc(), 0xa7e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7e8), 0x40);
        // 40 01B7
        gbc.setState(0x3650, 0x496b, 0x7650, 0x4c66, 0x40d3, 0x63c4, 0x0, 0x0);
        gbc.writeMem(0x3650, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x496b);
        EXPECT(gbc.pc(), 0x3651);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 01B9
        gbc.setState(0xe877, 0x6be6, 0x1ba0, 0xc9c2, 0x68b8, 0x9bfc, 0x0, 0x1);
        gbc.writeMem(0xe877, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x6be6);
        EXPECT(gbc.pc(), 0xe878);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe877), 0x40);
        // 40 01BA
        gbc.setState(0x4223, 0xb47d, 0x2620, 0xbfa3, 0x76d2, 0xb070, 0x0, 0x1);
        gbc.writeMem(0x4223, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xb47d);
        EXPECT(gbc.pc(), 0x4224);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 01BB
        gbc.setState(0x8ab7, 0xfada, 0x53c0, 0xa163, 0x15b5, 0x2185, 0x0, 0x0);
        gbc.writeMem(0x8ab7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xfada);
        EXPECT(gbc.pc(), 0x8ab8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ab7), 0x40);
        // 40 01BC
        gbc.setState(0xa5b8, 0xd6f7, 0xb040, 0x3b2a, 0xb31d, 0x6c04, 0x1, 0x1);
        gbc.writeMem(0xa5b8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xd6f7);
        EXPECT(gbc.pc(), 0xa5b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5b8), 0x40);
        // 40 01BD
        gbc.setState(0xe8e0, 0xfc67, 0x82e0, 0xf961, 0xeb1e, 0x7c51, 0x1, 0x0);
        gbc.writeMem(0xe8e0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xfc67);
        EXPECT(gbc.pc(), 0xe8e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8e0), 0x40);
        // 40 01BE
        gbc.setState(0x3cf0, 0x8c54, 0x310, 0x4be8, 0xa58b, 0x35ca, 0x1, 0x1);
        gbc.writeMem(0x3cf0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x8c54);
        EXPECT(gbc.pc(), 0x3cf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 01BF
        gbc.setState(0x4e5d, 0xad39, 0x8100, 0x3788, 0x6fdf, 0xb723, 0x0, 0x1);
        gbc.writeMem(0x4e5d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xad39);
        EXPECT(gbc.pc(), 0x4e5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 01C0
        gbc.setState(0x52e2, 0x64b5, 0xe390, 0xad8b, 0x4995, 0x9c35, 0x0, 0x1);
        gbc.writeMem(0x52e2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x64b5);
        EXPECT(gbc.pc(), 0x52e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 01C1
        gbc.setState(0xa1d2, 0x8c27, 0xa840, 0xc5ae, 0xd58f, 0x48e1, 0x1, 0x0);
        gbc.writeMem(0xa1d2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x8c27);
        EXPECT(gbc.pc(), 0xa1d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1d2), 0x40);
        // 40 01C2
        gbc.setState(0x35c1, 0xe7ec, 0xfd00, 0x86cc, 0xb50f, 0x7fcb, 0x1, 0x0);
        gbc.writeMem(0x35c1, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xe7ec);
        EXPECT(gbc.pc(), 0x35c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 01C3
        gbc.setState(0x6dda, 0xecc8, 0x7c20, 0xda2c, 0x87be, 0x7a17, 0x0, 0x1);
        gbc.writeMem(0x6dda, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xecc8);
        EXPECT(gbc.pc(), 0x6ddb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 01C4
        gbc.setState(0xb5b5, 0xb53d, 0x1d40, 0x1cfa, 0xc0f4, 0x4fec, 0x1, 0x1);
        gbc.writeMem(0xb5b5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xb53d);
        EXPECT(gbc.pc(), 0xb5b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5b5), 0x40);
        // 40 01C5
        gbc.setState(0x808b, 0x954f, 0xafa0, 0x343d, 0x3066, 0xf02b, 0x1, 0x0);
        gbc.writeMem(0x808b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x954f);
        EXPECT(gbc.pc(), 0x808c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x808b), 0x40);
        // 40 01C6
        gbc.setState(0x64ae, 0xe7c8, 0x6b70, 0x55c, 0xaab5, 0xfff1, 0x1, 0x1);
        gbc.writeMem(0x64ae, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xe7c8);
        EXPECT(gbc.pc(), 0x64af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 01C7
        gbc.setState(0xc476, 0xcbb8, 0xc190, 0x1079, 0x4eeb, 0xfccf, 0x1, 0x1);
        gbc.writeMem(0xc476, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xcbb8);
        EXPECT(gbc.pc(), 0xc477);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc476), 0x40);
        // 40 01C8
        gbc.setState(0x1fe4, 0x41be, 0x5730, 0xe691, 0xdfc3, 0x186f, 0x0, 0x0);
        gbc.writeMem(0x1fe4, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x41be);
        EXPECT(gbc.pc(), 0x1fe5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 01CA
        gbc.setState(0xa663, 0x3a06, 0xb080, 0xc65d, 0x11b1, 0x8101, 0x0, 0x0);
        gbc.writeMem(0xa663, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x3a06);
        EXPECT(gbc.pc(), 0xa664);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa663), 0x40);
        // 40 01CB
        gbc.setState(0xc28c, 0xc94a, 0x7190, 0xf140, 0x6d10, 0x135c, 0x0, 0x0);
        gbc.writeMem(0xc28c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xc94a);
        EXPECT(gbc.pc(), 0xc28d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc28c), 0x40);
        // 40 01CC
        gbc.setState(0xa201, 0xff06, 0xd0d0, 0x66a6, 0x806, 0x1b80, 0x0, 0x0);
        gbc.writeMem(0xa201, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xff06);
        EXPECT(gbc.pc(), 0xa202);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa201), 0x40);
        // 40 01CD
        gbc.setState(0x1af7, 0x8d8f, 0x1300, 0xc012, 0xa2b9, 0xa875, 0x1, 0x0);
        gbc.writeMem(0x1af7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x8d8f);
        EXPECT(gbc.pc(), 0x1af8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 01CE
        gbc.setState(0x671d, 0xf3e1, 0x3510, 0xd5cb, 0x75dc, 0x7b5c, 0x1, 0x0);
        gbc.writeMem(0x671d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xf3e1);
        EXPECT(gbc.pc(), 0x671e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 01CF
        gbc.setState(0x2ce2, 0x8757, 0x2170, 0x8059, 0x504b, 0x9eec, 0x1, 0x1);
        gbc.writeMem(0x2ce2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x8757);
        EXPECT(gbc.pc(), 0x2ce3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 01D0
        gbc.setState(0x4a35, 0x364, 0x88b0, 0x7ee3, 0x1599, 0x3ab4, 0x1, 0x0);
        gbc.writeMem(0x4a35, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x364);
        EXPECT(gbc.pc(), 0x4a36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 01D1
        gbc.setState(0xd94b, 0xb032, 0x15d0, 0x70cf, 0x202b, 0xa9fb, 0x1, 0x0);
        gbc.writeMem(0xd94b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xb032);
        EXPECT(gbc.pc(), 0xd94c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd94b), 0x40);
        // 40 01D2
        gbc.setState(0x1ec, 0x606c, 0x8e30, 0x81e9, 0xe251, 0x3f8c, 0x1, 0x1);
        gbc.writeMem(0x1ec, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x606c);
        EXPECT(gbc.pc(), 0x1ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 01D3
        gbc.setState(0x7860, 0xe9df, 0xd750, 0x3993, 0x18ba, 0xe385, 0x1, 0x0);
        gbc.writeMem(0x7860, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xe9df);
        EXPECT(gbc.pc(), 0x7861);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 01D4
        gbc.setState(0x4ae5, 0x33cf, 0xcb50, 0x5b08, 0xeccd, 0x6d92, 0x1, 0x0);
        gbc.writeMem(0x4ae5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x33cf);
        EXPECT(gbc.pc(), 0x4ae6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 01D5
        gbc.setState(0x207, 0x61f3, 0xa6a0, 0xb0c8, 0x60f8, 0x96ee, 0x0, 0x1);
        gbc.writeMem(0x207, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x61f3);
        EXPECT(gbc.pc(), 0x208);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 01D6
        gbc.setState(0xa880, 0xe78d, 0xf7d0, 0xc894, 0xf4bd, 0xed24, 0x0, 0x1);
        gbc.writeMem(0xa880, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xe78d);
        EXPECT(gbc.pc(), 0xa881);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa880), 0x40);
        // 40 01D7
        gbc.setState(0xb49, 0x398, 0x2b20, 0xabd0, 0xaf9b, 0x11ae, 0x0, 0x0);
        gbc.writeMem(0xb49, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x398);
        EXPECT(gbc.pc(), 0xb4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 01D8
        gbc.setState(0x7b2e, 0x968f, 0x3390, 0x7be2, 0xe90, 0x165, 0x1, 0x0);
        gbc.writeMem(0x7b2e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x968f);
        EXPECT(gbc.pc(), 0x7b2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 01D9
        gbc.setState(0x7acc, 0x3fe, 0xb60, 0xeac3, 0xfe38, 0x6b69, 0x0, 0x0);
        gbc.writeMem(0x7acc, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x3fe);
        EXPECT(gbc.pc(), 0x7acd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 01DA
        gbc.setState(0x1541, 0xfe4b, 0x460, 0xa8d8, 0x598f, 0xa4c7, 0x1, 0x0);
        gbc.writeMem(0x1541, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xfe4b);
        EXPECT(gbc.pc(), 0x1542);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 01DB
        gbc.setState(0x6b36, 0xa2b, 0x4d30, 0x5ae9, 0xe462, 0x1132, 0x0, 0x1);
        gbc.writeMem(0x6b36, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xa2b);
        EXPECT(gbc.pc(), 0x6b37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 01DC
        gbc.setState(0x3850, 0xeeb3, 0x7500, 0xbd8e, 0xe49, 0x2282, 0x0, 0x1);
        gbc.writeMem(0x3850, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xeeb3);
        EXPECT(gbc.pc(), 0x3851);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 01DD
        gbc.setState(0x9436, 0xc053, 0xe630, 0x7af, 0x2440, 0x3640, 0x0, 0x1);
        gbc.writeMem(0x9436, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xc053);
        EXPECT(gbc.pc(), 0x9437);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9436), 0x40);
        // 40 01DE
        gbc.setState(0x7214, 0xbcd4, 0x5f40, 0x8cb, 0xfbe2, 0x7467, 0x1, 0x1);
        gbc.writeMem(0x7214, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xbcd4);
        EXPECT(gbc.pc(), 0x7215);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 01DF
        gbc.setState(0xa4f7, 0x5131, 0xe0, 0x80d4, 0x12c4, 0xfa80, 0x1, 0x1);
        gbc.writeMem(0xa4f7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x5131);
        EXPECT(gbc.pc(), 0xa4f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4f7), 0x40);
        // 40 01E0
        gbc.setState(0xd08a, 0x48e6, 0x9350, 0xfb97, 0xef41, 0xc6ad, 0x1, 0x0);
        gbc.writeMem(0xd08a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x48e6);
        EXPECT(gbc.pc(), 0xd08b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd08a), 0x40);
        // 40 01E1
        gbc.setState(0x99ab, 0x7699, 0x8d00, 0x90f0, 0x8511, 0xed9f, 0x1, 0x0);
        gbc.writeMem(0x99ab, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x7699);
        EXPECT(gbc.pc(), 0x99ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99ab), 0x40);
        // 40 01E2
        gbc.setState(0x795f, 0xa003, 0x17c0, 0x83ca, 0xb8d5, 0xa68a, 0x0, 0x0);
        gbc.writeMem(0x795f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xa003);
        EXPECT(gbc.pc(), 0x7960);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 01E3
        gbc.setState(0xdc16, 0x646b, 0x410, 0x28f3, 0xb3ff, 0x5c69, 0x0, 0x0);
        gbc.writeMem(0xdc16, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x646b);
        EXPECT(gbc.pc(), 0xdc17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc16), 0x40);
        // 40 01E4
        gbc.setState(0x8a48, 0xf331, 0x1320, 0x9c2, 0x44b3, 0x3981, 0x1, 0x1);
        gbc.writeMem(0x8a48, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xf331);
        EXPECT(gbc.pc(), 0x8a49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a48), 0x40);
        // 40 01E5
        gbc.setState(0xdc56, 0xd4c6, 0x3140, 0x9583, 0x74f3, 0x7f2f, 0x1, 0x0);
        gbc.writeMem(0xdc56, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xd4c6);
        EXPECT(gbc.pc(), 0xdc57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc56), 0x40);
        // 40 01E6
        gbc.setState(0x5e56, 0xf09, 0x1880, 0xda2a, 0xe2fa, 0x9cd8, 0x1, 0x1);
        gbc.writeMem(0x5e56, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xf09);
        EXPECT(gbc.pc(), 0x5e57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 01E7
        gbc.setState(0x8eb5, 0x122, 0x35e0, 0xd96b, 0x607f, 0xf579, 0x1, 0x0);
        gbc.writeMem(0x8eb5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x122);
        EXPECT(gbc.pc(), 0x8eb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8eb5), 0x40);
        // 40 01E8
        gbc.setState(0x407c, 0x329, 0x1930, 0x4576, 0x640d, 0x24c0, 0x0, 0x1);
        gbc.writeMem(0x407c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x329);
        EXPECT(gbc.pc(), 0x407d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 01EA
        gbc.setState(0xd39d, 0xb871, 0xf780, 0x2936, 0xc9f2, 0x7232, 0x1, 0x1);
        gbc.writeMem(0xd39d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xb871);
        EXPECT(gbc.pc(), 0xd39e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd39d), 0x40);
        // 40 01EB
        gbc.setState(0xa34a, 0xb994, 0x7cf0, 0x7320, 0x5aa1, 0xba0, 0x1, 0x0);
        gbc.writeMem(0xa34a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb994);
        EXPECT(gbc.pc(), 0xa34b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa34a), 0x40);
        // 40 01EC
        gbc.setState(0xa3e4, 0xc36c, 0x6220, 0xb985, 0x8685, 0x3f9b, 0x0, 0x1);
        gbc.writeMem(0xa3e4, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xc36c);
        EXPECT(gbc.pc(), 0xa3e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3e4), 0x40);
        // 40 01ED
        gbc.setState(0xd43d, 0x2af9, 0x8410, 0xc5c7, 0x4d41, 0x3ead, 0x1, 0x0);
        gbc.writeMem(0xd43d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x2af9);
        EXPECT(gbc.pc(), 0xd43e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd43d), 0x40);
        // 40 01EE
        gbc.setState(0x5193, 0x62f9, 0xd960, 0x9350, 0x8098, 0xa650, 0x0, 0x0);
        gbc.writeMem(0x5193, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x62f9);
        EXPECT(gbc.pc(), 0x5194);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 01EF
        gbc.setState(0x1d4f, 0x78be, 0xe730, 0xbea, 0x533, 0x7b00, 0x0, 0x1);
        gbc.writeMem(0x1d4f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x78be);
        EXPECT(gbc.pc(), 0x1d50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 01F1
        gbc.setState(0x477b, 0xa1ee, 0x9580, 0x3434, 0x459b, 0x1642, 0x0, 0x0);
        gbc.writeMem(0x477b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xa1ee);
        EXPECT(gbc.pc(), 0x477c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 01F2
        gbc.setState(0xc90e, 0x1e96, 0xda20, 0x71d, 0x5693, 0x7434, 0x1, 0x0);
        gbc.writeMem(0xc90e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x1e96);
        EXPECT(gbc.pc(), 0xc90f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc90e), 0x40);
        // 40 01F3
        gbc.setState(0x67c, 0x9622, 0xf50, 0x3313, 0x4ad7, 0x7e3f, 0x0, 0x0);
        gbc.writeMem(0x67c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x9622);
        EXPECT(gbc.pc(), 0x67d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 01F4
        gbc.setState(0xd8cc, 0xb8b5, 0x4e0, 0x8690, 0x4baf, 0x9137, 0x0, 0x1);
        gbc.writeMem(0xd8cc, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xb8b5);
        EXPECT(gbc.pc(), 0xd8cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8cc), 0x40);
        // 40 01F5
        gbc.setState(0xa81c, 0x7763, 0xa740, 0xa0f6, 0xdcb8, 0x11b2, 0x0, 0x0);
        gbc.writeMem(0xa81c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x7763);
        EXPECT(gbc.pc(), 0xa81d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa81c), 0x40);
        // 40 01F6
        gbc.setState(0x704c, 0x3761, 0x22e0, 0xbe5f, 0xd5d0, 0x33c2, 0x1, 0x0);
        gbc.writeMem(0x704c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x3761);
        EXPECT(gbc.pc(), 0x704d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 01F7
        gbc.setState(0xa5bf, 0x1837, 0xc6e0, 0xe772, 0x4275, 0x161a, 0x1, 0x1);
        gbc.writeMem(0xa5bf, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x1837);
        EXPECT(gbc.pc(), 0xa5c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5bf), 0x40);
        // 40 01F8
        gbc.setState(0x62fb, 0x922c, 0xb3f0, 0x9f93, 0x42e3, 0x1c08, 0x0, 0x0);
        gbc.writeMem(0x62fb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x922c);
        EXPECT(gbc.pc(), 0x62fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 01F9
        gbc.setState(0xab1d, 0xe564, 0x42f0, 0xbd0f, 0xbf3f, 0x4fc9, 0x1, 0x1);
        gbc.writeMem(0xab1d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xe564);
        EXPECT(gbc.pc(), 0xab1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab1d), 0x40);
        // 40 01FA
        gbc.setState(0xea64, 0x6b60, 0x1070, 0x5b16, 0x9748, 0xd542, 0x0, 0x1);
        gbc.writeMem(0xea64, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x6b60);
        EXPECT(gbc.pc(), 0xea65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea64), 0x40);
        // 40 01FB
        gbc.setState(0xdb69, 0xa40, 0x49d0, 0x5620, 0xbf9b, 0x2f4a, 0x1, 0x0);
        gbc.writeMem(0xdb69, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xa40);
        EXPECT(gbc.pc(), 0xdb6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb69), 0x40);
        // 40 01FC
        gbc.setState(0x4bae, 0x3191, 0x7b30, 0x6c8, 0x462d, 0x6c2f, 0x1, 0x1);
        gbc.writeMem(0x4bae, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x3191);
        EXPECT(gbc.pc(), 0x4baf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 01FD
        gbc.setState(0x1fce, 0x1751, 0x72a0, 0x7b92, 0xb76a, 0xf763, 0x0, 0x0);
        gbc.writeMem(0x1fce, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1751);
        EXPECT(gbc.pc(), 0x1fcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 01FE
        gbc.setState(0x5a0a, 0x200f, 0x33d0, 0xf163, 0xc28f, 0xd01d, 0x0, 0x0);
        gbc.writeMem(0x5a0a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x200f);
        EXPECT(gbc.pc(), 0x5a0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 01FF
        gbc.setState(0x5b7a, 0x4d15, 0xffe0, 0x3250, 0xf0c8, 0x50e7, 0x0, 0x1);
        gbc.writeMem(0x5b7a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x4d15);
        EXPECT(gbc.pc(), 0x5b7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0200
        gbc.setState(0xdbc1, 0x144f, 0xde50, 0x3a7d, 0x2cbe, 0xf4f6, 0x0, 0x1);
        gbc.writeMem(0xdbc1, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x144f);
        EXPECT(gbc.pc(), 0xdbc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbc1), 0x40);
        // 40 0201
        gbc.setState(0x691b, 0x7a56, 0xbeb0, 0xd596, 0x5b28, 0x78f5, 0x1, 0x1);
        gbc.writeMem(0x691b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x7a56);
        EXPECT(gbc.pc(), 0x691c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0202
        gbc.setState(0x67d9, 0xfe56, 0x87b0, 0x7a68, 0x7559, 0x1524, 0x1, 0x1);
        gbc.writeMem(0x67d9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xfe56);
        EXPECT(gbc.pc(), 0x67da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0203
        gbc.setState(0xafa3, 0x498a, 0x3890, 0x9678, 0x3b0e, 0xeb0f, 0x1, 0x0);
        gbc.writeMem(0xafa3, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x498a);
        EXPECT(gbc.pc(), 0xafa4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafa3), 0x40);
        // 40 0204
        gbc.setState(0xd56a, 0xeccc, 0xf440, 0x6e55, 0x9d8c, 0xbef0, 0x0, 0x1);
        gbc.writeMem(0xd56a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xeccc);
        EXPECT(gbc.pc(), 0xd56b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd56a), 0x40);
        // 40 0205
        gbc.setState(0xe0ab, 0x340a, 0x68c0, 0x8b0b, 0x9115, 0x7c45, 0x1, 0x1);
        gbc.writeMem(0xe0ab, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x340a);
        EXPECT(gbc.pc(), 0xe0ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0ab), 0x40);
        // 40 0206
        gbc.setState(0x8b23, 0x1314, 0x1ab0, 0xe1f, 0x2803, 0x170a, 0x1, 0x1);
        gbc.writeMem(0x8b23, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x1314);
        EXPECT(gbc.pc(), 0x8b24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b23), 0x40);
        // 40 0207
        gbc.setState(0xe527, 0xef7d, 0x88e0, 0x3a1a, 0xe896, 0xf9c7, 0x1, 0x1);
        gbc.writeMem(0xe527, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xef7d);
        EXPECT(gbc.pc(), 0xe528);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe527), 0x40);
        // 40 0208
        gbc.setState(0x272d, 0xfe00, 0xad20, 0xb313, 0xea90, 0x957e, 0x0, 0x0);
        gbc.writeMem(0x272d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xfe00);
        EXPECT(gbc.pc(), 0x272e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0209
        gbc.setState(0x2e9, 0xf99a, 0xa880, 0x98fa, 0x62dd, 0xa982, 0x0, 0x1);
        gbc.writeMem(0x2e9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xf99a);
        EXPECT(gbc.pc(), 0x2ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 020A
        gbc.setState(0x1cec, 0x389e, 0x7510, 0xc8e7, 0xd07a, 0x7301, 0x1, 0x0);
        gbc.writeMem(0x1cec, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x389e);
        EXPECT(gbc.pc(), 0x1ced);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 020B
        gbc.setState(0x7b3d, 0x9b61, 0xa500, 0xe74, 0x6ce0, 0x7371, 0x0, 0x1);
        gbc.writeMem(0x7b3d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x9b61);
        EXPECT(gbc.pc(), 0x7b3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 020C
        gbc.setState(0xae87, 0x2104, 0x79b0, 0x5d3c, 0xe264, 0xa587, 0x1, 0x1);
        gbc.writeMem(0xae87, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x2104);
        EXPECT(gbc.pc(), 0xae88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae87), 0x40);
        // 40 020D
        gbc.setState(0x2837, 0x288f, 0x4150, 0xb9f3, 0x1d1d, 0x94fd, 0x0, 0x0);
        gbc.writeMem(0x2837, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x288f);
        EXPECT(gbc.pc(), 0x2838);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 020F
        gbc.setState(0x7397, 0x4d86, 0x6a50, 0x281a, 0xc08d, 0xece, 0x0, 0x0);
        gbc.writeMem(0x7397, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x4d86);
        EXPECT(gbc.pc(), 0x7398);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0210
        gbc.setState(0x2cd, 0xfbc7, 0xa9d0, 0xf4fe, 0x861c, 0x2667, 0x0, 0x0);
        gbc.writeMem(0x2cd, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xfbc7);
        EXPECT(gbc.pc(), 0x2ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0211
        gbc.setState(0xa06d, 0x232e, 0xbf50, 0xe475, 0x6c9, 0xa8a2, 0x1, 0x1);
        gbc.writeMem(0xa06d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x232e);
        EXPECT(gbc.pc(), 0xa06e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa06d), 0x40);
        // 40 0213
        gbc.setState(0x5d43, 0x6db4, 0x28e0, 0xef2c, 0xaa82, 0x4d71, 0x0, 0x0);
        gbc.writeMem(0x5d43, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x6db4);
        EXPECT(gbc.pc(), 0x5d44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0214
        gbc.setState(0x7cf6, 0x97d7, 0x9500, 0x7400, 0x46d7, 0x226b, 0x1, 0x0);
        gbc.writeMem(0x7cf6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x97d7);
        EXPECT(gbc.pc(), 0x7cf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0215
        gbc.setState(0xc40c, 0x13cb, 0x9980, 0x5fab, 0xc1ca, 0x30e6, 0x0, 0x0);
        gbc.writeMem(0xc40c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x13cb);
        EXPECT(gbc.pc(), 0xc40d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc40c), 0x40);
        // 40 0216
        gbc.setState(0x34ee, 0x50c3, 0xba50, 0xe131, 0x1e6a, 0x86a1, 0x1, 0x1);
        gbc.writeMem(0x34ee, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x50c3);
        EXPECT(gbc.pc(), 0x34ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0217
        gbc.setState(0x9184, 0xc865, 0x9e10, 0x95cd, 0xebfe, 0xc1c8, 0x1, 0x0);
        gbc.writeMem(0x9184, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xc865);
        EXPECT(gbc.pc(), 0x9185);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9184), 0x40);
        // 40 0218
        gbc.setState(0xaf22, 0xcafe, 0xc670, 0xcbd5, 0xc0d8, 0xa653, 0x0, 0x0);
        gbc.writeMem(0xaf22, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xcafe);
        EXPECT(gbc.pc(), 0xaf23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf22), 0x40);
        // 40 0219
        gbc.setState(0x10a4, 0xacdf, 0x5690, 0x5bd3, 0xbed4, 0x3d60, 0x0, 0x0);
        gbc.writeMem(0x10a4, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xacdf);
        EXPECT(gbc.pc(), 0x10a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 021A
        gbc.setState(0xd06e, 0x34b0, 0x9d10, 0x231a, 0x7a44, 0x5e43, 0x0, 0x0);
        gbc.writeMem(0xd06e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x34b0);
        EXPECT(gbc.pc(), 0xd06f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd06e), 0x40);
        // 40 021B
        gbc.setState(0xd0f9, 0x7699, 0x9270, 0x6a88, 0xbaae, 0xa5f0, 0x0, 0x0);
        gbc.writeMem(0xd0f9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x7699);
        EXPECT(gbc.pc(), 0xd0fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0f9), 0x40);
        // 40 021C
        gbc.setState(0x6f22, 0x11f, 0x6b00, 0xb9fe, 0x94a7, 0x79d4, 0x1, 0x0);
        gbc.writeMem(0x6f22, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x11f);
        EXPECT(gbc.pc(), 0x6f23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 021D
        gbc.setState(0xec7b, 0x3ac8, 0x4170, 0x2647, 0x854a, 0xc170, 0x1, 0x0);
        gbc.writeMem(0xec7b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x3ac8);
        EXPECT(gbc.pc(), 0xec7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec7b), 0x40);
        // 40 021E
        gbc.setState(0x33a6, 0x7155, 0x8c70, 0x222b, 0x348d, 0xef08, 0x0, 0x1);
        gbc.writeMem(0x33a6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x7155);
        EXPECT(gbc.pc(), 0x33a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 021F
        gbc.setState(0x1dd, 0x966e, 0x70c0, 0x4c9c, 0x6d0d, 0x7763, 0x0, 0x1);
        gbc.writeMem(0x1dd, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x966e);
        EXPECT(gbc.pc(), 0x1de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0220
        gbc.setState(0xa0c4, 0x5f1c, 0x2780, 0x8dd0, 0x881, 0x717b, 0x0, 0x1);
        gbc.writeMem(0xa0c4, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x5f1c);
        EXPECT(gbc.pc(), 0xa0c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0c4), 0x40);
        // 40 0221
        gbc.setState(0xd787, 0xc24c, 0x4f0, 0x2466, 0xfd2, 0x1186, 0x1, 0x0);
        gbc.writeMem(0xd787, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xc24c);
        EXPECT(gbc.pc(), 0xd788);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd787), 0x40);
        // 40 0222
        gbc.setState(0x671e, 0x47d2, 0x1700, 0x9fc5, 0x216f, 0xb330, 0x1, 0x1);
        gbc.writeMem(0x671e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x47d2);
        EXPECT(gbc.pc(), 0x671f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0223
        gbc.setState(0x26fa, 0x9fee, 0xd8a0, 0xda25, 0x8423, 0x688e, 0x0, 0x1);
        gbc.writeMem(0x26fa, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x9fee);
        EXPECT(gbc.pc(), 0x26fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0224
        gbc.setState(0xef20, 0xfbbb, 0xf930, 0x5263, 0x9263, 0x662, 0x1, 0x0);
        gbc.writeMem(0xef20, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xfbbb);
        EXPECT(gbc.pc(), 0xef21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef20), 0x40);
        // 40 0225
        gbc.setState(0x346d, 0x4a9a, 0x6bb0, 0xd3be, 0xdc99, 0xb5c1, 0x1, 0x0);
        gbc.writeMem(0x346d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4a9a);
        EXPECT(gbc.pc(), 0x346e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0226
        gbc.setState(0xd162, 0x3407, 0x860, 0x85ee, 0x85db, 0x3e80, 0x0, 0x0);
        gbc.writeMem(0xd162, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x3407);
        EXPECT(gbc.pc(), 0xd163);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd162), 0x40);
        // 40 0227
        gbc.setState(0xbbfe, 0x5963, 0x5f30, 0x72e8, 0x13d6, 0xa0c0, 0x0, 0x0);
        gbc.writeMem(0xbbfe, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x5963);
        EXPECT(gbc.pc(), 0xbbff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbfe), 0x40);
        // 40 0228
        gbc.setState(0x9908, 0x1f11, 0xea60, 0x3ffc, 0x8e12, 0x35af, 0x1, 0x1);
        gbc.writeMem(0x9908, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x1f11);
        EXPECT(gbc.pc(), 0x9909);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9908), 0x40);
        // 40 0229
        gbc.setState(0x42bf, 0x645c, 0x22a0, 0x612d, 0x8436, 0xba8c, 0x1, 0x1);
        gbc.writeMem(0x42bf, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x645c);
        EXPECT(gbc.pc(), 0x42c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 022B
        gbc.setState(0xbd1d, 0x68ba, 0x9dd0, 0xad8d, 0x7c82, 0x5201, 0x1, 0x1);
        gbc.writeMem(0xbd1d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x68ba);
        EXPECT(gbc.pc(), 0xbd1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd1d), 0x40);
        // 40 022C
        gbc.setState(0xcf96, 0x3b97, 0xbbe0, 0x37ad, 0x7d0, 0x20be, 0x0, 0x0);
        gbc.writeMem(0xcf96, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x3b97);
        EXPECT(gbc.pc(), 0xcf97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf96), 0x40);
        // 40 022E
        gbc.setState(0x69e9, 0xf5b4, 0xe650, 0xf469, 0x23fd, 0x143, 0x0, 0x1);
        gbc.writeMem(0x69e9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xf5b4);
        EXPECT(gbc.pc(), 0x69ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 022F
        gbc.setState(0x976, 0x202d, 0x39b0, 0x5a43, 0xaf7e, 0x73f0, 0x0, 0x1);
        gbc.writeMem(0x976, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x202d);
        EXPECT(gbc.pc(), 0x977);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0230
        gbc.setState(0x4876, 0xf561, 0x4a50, 0x35bf, 0x10b5, 0xd43, 0x0, 0x1);
        gbc.writeMem(0x4876, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xf561);
        EXPECT(gbc.pc(), 0x4877);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0232
        gbc.setState(0x2554, 0x7613, 0xf6b0, 0x6618, 0x5abd, 0xcff2, 0x0, 0x0);
        gbc.writeMem(0x2554, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x7613);
        EXPECT(gbc.pc(), 0x2555);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0233
        gbc.setState(0xe8c0, 0xd0e2, 0xf5e0, 0x71d7, 0xbc9a, 0x8ef8, 0x1, 0x0);
        gbc.writeMem(0xe8c0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xd0e2);
        EXPECT(gbc.pc(), 0xe8c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8c0), 0x40);
        // 40 0234
        gbc.setState(0xde02, 0x9498, 0xfa10, 0xaea8, 0xc1af, 0x347f, 0x0, 0x0);
        gbc.writeMem(0xde02, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x9498);
        EXPECT(gbc.pc(), 0xde03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde02), 0x40);
        // 40 0235
        gbc.setState(0x993e, 0xe968, 0x67f0, 0x5e66, 0xea45, 0xe7f2, 0x0, 0x1);
        gbc.writeMem(0x993e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe968);
        EXPECT(gbc.pc(), 0x993f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x993e), 0x40);
        // 40 0236
        gbc.setState(0x76b, 0x899a, 0xa4f0, 0x3c80, 0x4fa2, 0xe86, 0x1, 0x0);
        gbc.writeMem(0x76b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x899a);
        EXPECT(gbc.pc(), 0x76c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0237
        gbc.setState(0xc743, 0x4aaa, 0x4940, 0xa72e, 0xb6c2, 0x2dea, 0x0, 0x1);
        gbc.writeMem(0xc743, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x4aaa);
        EXPECT(gbc.pc(), 0xc744);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc743), 0x40);
        // 40 0238
        gbc.setState(0xc961, 0xfed, 0x21d0, 0xde4a, 0x84b8, 0x24f0, 0x0, 0x1);
        gbc.writeMem(0xc961, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xfed);
        EXPECT(gbc.pc(), 0xc962);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc961), 0x40);
        // 40 0239
        gbc.setState(0x5989, 0x94ec, 0x3e30, 0x111b, 0xbb59, 0x162c, 0x0, 0x0);
        gbc.writeMem(0x5989, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x94ec);
        EXPECT(gbc.pc(), 0x598a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 023A
        gbc.setState(0xab9d, 0xc373, 0x2010, 0x2a9a, 0xba8e, 0xc85, 0x1, 0x1);
        gbc.writeMem(0xab9d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc373);
        EXPECT(gbc.pc(), 0xab9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab9d), 0x40);
        // 40 023B
        gbc.setState(0x2205, 0xd8df, 0x7e0, 0xcead, 0xf9b9, 0x33f5, 0x1, 0x0);
        gbc.writeMem(0x2205, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd8df);
        EXPECT(gbc.pc(), 0x2206);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 023C
        gbc.setState(0x974c, 0xfa1d, 0xdc40, 0x424a, 0x30c2, 0x7f24, 0x1, 0x1);
        gbc.writeMem(0x974c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xfa1d);
        EXPECT(gbc.pc(), 0x974d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x974c), 0x40);
        // 40 023D
        gbc.setState(0x10b8, 0x3cfe, 0xb5a0, 0x8de5, 0xc590, 0xa7bf, 0x1, 0x1);
        gbc.writeMem(0x10b8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x3cfe);
        EXPECT(gbc.pc(), 0x10b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 023E
        gbc.setState(0x1763, 0xb60b, 0x6db0, 0x343a, 0x3fe6, 0x732e, 0x0, 0x1);
        gbc.writeMem(0x1763, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xb60b);
        EXPECT(gbc.pc(), 0x1764);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 023F
        gbc.setState(0x5648, 0x340c, 0x26b0, 0x24f8, 0xab5, 0x1de1, 0x1, 0x0);
        gbc.writeMem(0x5648, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x340c);
        EXPECT(gbc.pc(), 0x5649);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0240
        gbc.setState(0x809f, 0xb827, 0xfbc0, 0x9c5e, 0xb60c, 0xb4f, 0x1, 0x1);
        gbc.writeMem(0x809f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xb827);
        EXPECT(gbc.pc(), 0x80a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x809f), 0x40);
        // 40 0241
        gbc.setState(0x270a, 0xead, 0xc850, 0x5257, 0x87d8, 0xe61b, 0x0, 0x0);
        gbc.writeMem(0x270a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xead);
        EXPECT(gbc.pc(), 0x270b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0242
        gbc.setState(0x2097, 0x5d0a, 0xfe60, 0x40b0, 0x7292, 0x2d94, 0x1, 0x0);
        gbc.writeMem(0x2097, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x5d0a);
        EXPECT(gbc.pc(), 0x2098);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0243
        gbc.setState(0xeb9a, 0xd30d, 0x1d90, 0xc6e4, 0x8dac, 0x2bea, 0x1, 0x1);
        gbc.writeMem(0xeb9a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd30d);
        EXPECT(gbc.pc(), 0xeb9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb9a), 0x40);
        // 40 0244
        gbc.setState(0xafb5, 0x8fba, 0x89d0, 0x5208, 0x4c7f, 0xc8e6, 0x0, 0x0);
        gbc.writeMem(0xafb5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x8fba);
        EXPECT(gbc.pc(), 0xafb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafb5), 0x40);
        // 40 0245
        gbc.setState(0xdd90, 0xfee2, 0x4170, 0x9f18, 0xcd4c, 0x18c8, 0x0, 0x0);
        gbc.writeMem(0xdd90, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xfee2);
        EXPECT(gbc.pc(), 0xdd91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd90), 0x40);
        // 40 0246
        gbc.setState(0xcb9c, 0x842, 0x9c70, 0xe26d, 0x9c69, 0x7415, 0x0, 0x0);
        gbc.writeMem(0xcb9c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x842);
        EXPECT(gbc.pc(), 0xcb9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb9c), 0x40);
        // 40 0247
        gbc.setState(0x3f2b, 0x42e4, 0xf420, 0xf124, 0x4e9d, 0x2a4a, 0x1, 0x1);
        gbc.writeMem(0x3f2b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x42e4);
        EXPECT(gbc.pc(), 0x3f2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0248
        gbc.setState(0x3900, 0xe039, 0xc460, 0x1713, 0x98a1, 0x858f, 0x0, 0x0);
        gbc.writeMem(0x3900, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xe039);
        EXPECT(gbc.pc(), 0x3901);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0249
        gbc.setState(0x1a4d, 0xcd54, 0xe8e0, 0x3d35, 0x89f1, 0x75d8, 0x1, 0x0);
        gbc.writeMem(0x1a4d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xcd54);
        EXPECT(gbc.pc(), 0x1a4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 024A
        gbc.setState(0xd8ee, 0x8eeb, 0xdbd0, 0x6bee, 0x336b, 0xb0a9, 0x0, 0x0);
        gbc.writeMem(0xd8ee, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x8eeb);
        EXPECT(gbc.pc(), 0xd8ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8ee), 0x40);
        // 40 024B
        gbc.setState(0x7efb, 0x6491, 0xaa80, 0x4c5, 0x8cb2, 0x6ab9, 0x1, 0x1);
        gbc.writeMem(0x7efb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x6491);
        EXPECT(gbc.pc(), 0x7efc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 024C
        gbc.setState(0x7b17, 0xe75a, 0xe8b0, 0x4530, 0x16ca, 0xc43e, 0x1, 0x1);
        gbc.writeMem(0x7b17, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xe75a);
        EXPECT(gbc.pc(), 0x7b18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 024D
        gbc.setState(0xc375, 0x59f4, 0x7c40, 0xb610, 0x7d6f, 0x8139, 0x0, 0x1);
        gbc.writeMem(0xc375, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x59f4);
        EXPECT(gbc.pc(), 0xc376);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc375), 0x40);
        // 40 024E
        gbc.setState(0xbd6a, 0xe8b2, 0x51a0, 0x916e, 0x808f, 0xeed1, 0x0, 0x0);
        gbc.writeMem(0xbd6a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe8b2);
        EXPECT(gbc.pc(), 0xbd6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd6a), 0x40);
        // 40 024F
        gbc.setState(0xdd33, 0xab0, 0x5e20, 0x9c67, 0xbb99, 0xf40d, 0x0, 0x0);
        gbc.writeMem(0xdd33, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xab0);
        EXPECT(gbc.pc(), 0xdd34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd33), 0x40);
        // 40 0250
        gbc.setState(0x905d, 0x3d74, 0xff70, 0xee6c, 0xfb5d, 0x9d3f, 0x1, 0x1);
        gbc.writeMem(0x905d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x3d74);
        EXPECT(gbc.pc(), 0x905e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x905d), 0x40);
        // 40 0251
        gbc.setState(0x4545, 0x4c37, 0x4640, 0xc88f, 0x8c9b, 0x62b7, 0x0, 0x0);
        gbc.writeMem(0x4545, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x4c37);
        EXPECT(gbc.pc(), 0x4546);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0252
        gbc.setState(0xafcf, 0xb7da, 0xf200, 0xf06b, 0xd300, 0xef96, 0x1, 0x1);
        gbc.writeMem(0xafcf, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xb7da);
        EXPECT(gbc.pc(), 0xafd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafcf), 0x40);
        // 40 0253
        gbc.setState(0x5d83, 0x31c2, 0xf590, 0x176b, 0xf596, 0xf6a3, 0x1, 0x0);
        gbc.writeMem(0x5d83, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x31c2);
        EXPECT(gbc.pc(), 0x5d84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0254
        gbc.setState(0x76e2, 0xfd58, 0xb180, 0xaa7e, 0x593e, 0x53fb, 0x1, 0x1);
        gbc.writeMem(0x76e2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xfd58);
        EXPECT(gbc.pc(), 0x76e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0256
        gbc.setState(0x1d36, 0xe178, 0x0, 0x95e8, 0xc3eb, 0xee83, 0x1, 0x1);
        gbc.writeMem(0x1d36, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xe178);
        EXPECT(gbc.pc(), 0x1d37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0257
        gbc.setState(0x5c87, 0x43d4, 0x7170, 0x6274, 0x139b, 0xe75d, 0x0, 0x1);
        gbc.writeMem(0x5c87, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x43d4);
        EXPECT(gbc.pc(), 0x5c88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0259
        gbc.setState(0xebe6, 0xf454, 0x1390, 0x5157, 0x62b3, 0xa523, 0x0, 0x0);
        gbc.writeMem(0xebe6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xf454);
        EXPECT(gbc.pc(), 0xebe7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebe6), 0x40);
        // 40 025A
        gbc.setState(0x6a10, 0xd7a4, 0x4bd0, 0xb201, 0x842b, 0x4dfa, 0x0, 0x0);
        gbc.writeMem(0x6a10, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xd7a4);
        EXPECT(gbc.pc(), 0x6a11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 025C
        gbc.setState(0x85bb, 0xd48f, 0xdbb0, 0x29f2, 0xe55c, 0x3af5, 0x1, 0x1);
        gbc.writeMem(0x85bb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd48f);
        EXPECT(gbc.pc(), 0x85bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85bb), 0x40);
        // 40 025D
        gbc.setState(0x1723, 0x41f7, 0x1940, 0x56c8, 0x1cc6, 0x30d4, 0x0, 0x1);
        gbc.writeMem(0x1723, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x41f7);
        EXPECT(gbc.pc(), 0x1724);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 025E
        gbc.setState(0x3d84, 0x71d9, 0x7c20, 0x7469, 0xd5b4, 0xac5d, 0x0, 0x1);
        gbc.writeMem(0x3d84, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x71d9);
        EXPECT(gbc.pc(), 0x3d85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0260
        gbc.setState(0x240, 0x8ac, 0x7d60, 0x6946, 0xb329, 0xdf0b, 0x1, 0x0);
        gbc.writeMem(0x240, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x8ac);
        EXPECT(gbc.pc(), 0x241);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0261
        gbc.setState(0x293a, 0x84f3, 0x9ec0, 0xb0f6, 0xbfd, 0x2929, 0x0, 0x0);
        gbc.writeMem(0x293a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x84f3);
        EXPECT(gbc.pc(), 0x293b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0262
        gbc.setState(0xd418, 0xaad4, 0x2960, 0xf549, 0xf9e0, 0xda10, 0x0, 0x1);
        gbc.writeMem(0xd418, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xaad4);
        EXPECT(gbc.pc(), 0xd419);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd418), 0x40);
        // 40 0263
        gbc.setState(0x4f45, 0xc374, 0xcfd0, 0xd18e, 0x4e56, 0xb65, 0x0, 0x1);
        gbc.writeMem(0x4f45, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc374);
        EXPECT(gbc.pc(), 0x4f46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0264
        gbc.setState(0xe7c7, 0x998f, 0x6c0, 0xd696, 0x4338, 0x6eb1, 0x1, 0x1);
        gbc.writeMem(0xe7c7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x998f);
        EXPECT(gbc.pc(), 0xe7c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7c7), 0x40);
        // 40 0265
        gbc.setState(0x1a9, 0x1d5b, 0xf270, 0x33e, 0x7b0e, 0xcf30, 0x1, 0x0);
        gbc.writeMem(0x1a9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x1d5b);
        EXPECT(gbc.pc(), 0x1aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0266
        gbc.setState(0xd23c, 0xdebe, 0xa010, 0xe0b7, 0x79f5, 0x6cc9, 0x1, 0x1);
        gbc.writeMem(0xd23c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xdebe);
        EXPECT(gbc.pc(), 0xd23d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd23c), 0x40);
        // 40 0267
        gbc.setState(0x9eb9, 0x1792, 0xaee0, 0x3d9, 0x13f8, 0x3f91, 0x1, 0x1);
        gbc.writeMem(0x9eb9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x1792);
        EXPECT(gbc.pc(), 0x9eba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9eb9), 0x40);
        // 40 0268
        gbc.setState(0xa2d1, 0x2fad, 0xb530, 0x677c, 0xb559, 0xa558, 0x0, 0x0);
        gbc.writeMem(0xa2d1, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x2fad);
        EXPECT(gbc.pc(), 0xa2d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2d1), 0x40);
        // 40 0269
        gbc.setState(0x3998, 0xff14, 0x8f00, 0x74df, 0x1d24, 0x4404, 0x1, 0x1);
        gbc.writeMem(0x3998, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xff14);
        EXPECT(gbc.pc(), 0x3999);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 026A
        gbc.setState(0xa1c2, 0x88b, 0x3070, 0x9ef5, 0xf084, 0xddcf, 0x1, 0x0);
        gbc.writeMem(0xa1c2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x88b);
        EXPECT(gbc.pc(), 0xa1c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1c2), 0x40);
        // 40 026B
        gbc.setState(0xe4ec, 0xed7d, 0x7c20, 0xc398, 0x7b2, 0xe92c, 0x1, 0x0);
        gbc.writeMem(0xe4ec, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xed7d);
        EXPECT(gbc.pc(), 0xe4ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4ec), 0x40);
        // 40 026C
        gbc.setState(0x718d, 0x8388, 0x1d60, 0xda91, 0x4918, 0xaeda, 0x1, 0x0);
        gbc.writeMem(0x718d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x8388);
        EXPECT(gbc.pc(), 0x718e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 026D
        gbc.setState(0x3da5, 0xa436, 0xee60, 0xbdb1, 0x82c3, 0x4d93, 0x1, 0x0);
        gbc.writeMem(0x3da5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xa436);
        EXPECT(gbc.pc(), 0x3da6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 026E
        gbc.setState(0xb001, 0x50f0, 0xa880, 0xdac6, 0xac37, 0xaca0, 0x1, 0x1);
        gbc.writeMem(0xb001, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x50f0);
        EXPECT(gbc.pc(), 0xb002);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb001), 0x40);
        // 40 026F
        gbc.setState(0xbe97, 0x1724, 0xd670, 0xd23a, 0x5e59, 0x38a3, 0x0, 0x0);
        gbc.writeMem(0xbe97, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x1724);
        EXPECT(gbc.pc(), 0xbe98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe97), 0x40);
        // 40 0270
        gbc.setState(0xc705, 0xf125, 0x9450, 0xb0ef, 0x57fc, 0x3e62, 0x1, 0x1);
        gbc.writeMem(0xc705, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xf125);
        EXPECT(gbc.pc(), 0xc706);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc705), 0x40);
        // 40 0271
        gbc.setState(0x1688, 0x133b, 0xbec0, 0x69b2, 0xc54f, 0xb528, 0x1, 0x1);
        gbc.writeMem(0x1688, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x133b);
        EXPECT(gbc.pc(), 0x1689);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0272
        gbc.setState(0x6b19, 0xc55d, 0xea30, 0x1bf8, 0x7db, 0xba8, 0x1, 0x0);
        gbc.writeMem(0x6b19, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc55d);
        EXPECT(gbc.pc(), 0x6b1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0273
        gbc.setState(0x7c92, 0xe658, 0x65a0, 0x45aa, 0x57d, 0x5d42, 0x0, 0x0);
        gbc.writeMem(0x7c92, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe658);
        EXPECT(gbc.pc(), 0x7c93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0274
        gbc.setState(0x7ff7, 0xde72, 0x1130, 0x4459, 0x4fdc, 0xa3eb, 0x1, 0x0);
        gbc.writeMem(0x7ff7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xde72);
        EXPECT(gbc.pc(), 0x7ff8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0275
        gbc.setState(0xd66e, 0x70a0, 0x7ea0, 0xb753, 0x829a, 0x45e2, 0x0, 0x1);
        gbc.writeMem(0xd66e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x70a0);
        EXPECT(gbc.pc(), 0xd66f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd66e), 0x40);
        // 40 0276
        gbc.setState(0xc895, 0x701f, 0x7580, 0x8ee2, 0x1a52, 0x6da4, 0x1, 0x0);
        gbc.writeMem(0xc895, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x701f);
        EXPECT(gbc.pc(), 0xc896);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc895), 0x40);
        // 40 0277
        gbc.setState(0x89ee, 0x3c43, 0xcd20, 0x8062, 0xc279, 0xd11f, 0x0, 0x1);
        gbc.writeMem(0x89ee, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x3c43);
        EXPECT(gbc.pc(), 0x89ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89ee), 0x40);
        // 40 0278
        gbc.setState(0xa811, 0x6413, 0x52f0, 0xf5e, 0x5572, 0xa6e6, 0x0, 0x0);
        gbc.writeMem(0xa811, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x6413);
        EXPECT(gbc.pc(), 0xa812);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa811), 0x40);
        // 40 0279
        gbc.setState(0x7a5d, 0xef48, 0xde20, 0xafed, 0x80e6, 0x8443, 0x1, 0x1);
        gbc.writeMem(0x7a5d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xef48);
        EXPECT(gbc.pc(), 0x7a5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 027A
        gbc.setState(0xb9f9, 0x483, 0xa000, 0x7d6c, 0x60f0, 0x5d64, 0x1, 0x0);
        gbc.writeMem(0xb9f9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x483);
        EXPECT(gbc.pc(), 0xb9fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9f9), 0x40);
        // 40 027B
        gbc.setState(0x8dc9, 0xddf5, 0x56a0, 0xe2c0, 0x4417, 0xfe50, 0x0, 0x0);
        gbc.writeMem(0x8dc9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xddf5);
        EXPECT(gbc.pc(), 0x8dca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dc9), 0x40);
        // 40 027C
        gbc.setState(0x82b2, 0xd56d, 0xc7b0, 0x955d, 0x72c3, 0x5229, 0x0, 0x0);
        gbc.writeMem(0x82b2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xd56d);
        EXPECT(gbc.pc(), 0x82b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82b2), 0x40);
        // 40 027D
        gbc.setState(0xc6e0, 0x1800, 0xe6e0, 0x78dc, 0x29de, 0x4b24, 0x0, 0x1);
        gbc.writeMem(0xc6e0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x1800);
        EXPECT(gbc.pc(), 0xc6e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6e0), 0x40);
        // 40 027E
        gbc.setState(0xdcde, 0xbd9f, 0x2dc0, 0x394f, 0xce3, 0xb499, 0x1, 0x1);
        gbc.writeMem(0xdcde, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xbd9f);
        EXPECT(gbc.pc(), 0xdcdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcde), 0x40);
        // 40 027F
        gbc.setState(0x24d8, 0x60fa, 0xc330, 0x8aab, 0x7565, 0x7516, 0x1, 0x0);
        gbc.writeMem(0x24d8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x60fa);
        EXPECT(gbc.pc(), 0x24d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0280
        gbc.setState(0x3fea, 0xaea4, 0xa6f0, 0xdc9f, 0xe844, 0x5b38, 0x0, 0x1);
        gbc.writeMem(0x3fea, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xaea4);
        EXPECT(gbc.pc(), 0x3feb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0281
        gbc.setState(0x2ad4, 0xef80, 0x4890, 0xdfee, 0x2ec2, 0x6cb8, 0x1, 0x1);
        gbc.writeMem(0x2ad4, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xef80);
        EXPECT(gbc.pc(), 0x2ad5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0282
        gbc.setState(0x819a, 0x99f1, 0x5360, 0x503c, 0x5e7, 0x1a3b, 0x0, 0x0);
        gbc.writeMem(0x819a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x99f1);
        EXPECT(gbc.pc(), 0x819b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x819a), 0x40);
        // 40 0283
        gbc.setState(0xe22, 0x1373, 0x11e0, 0xf8cc, 0x22f1, 0xd964, 0x0, 0x1);
        gbc.writeMem(0xe22, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x1373);
        EXPECT(gbc.pc(), 0xe23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0284
        gbc.setState(0x1de4, 0x7a1e, 0x4800, 0xa0d4, 0x34ab, 0xe854, 0x1, 0x1);
        gbc.writeMem(0x1de4, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x7a1e);
        EXPECT(gbc.pc(), 0x1de5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0285
        gbc.setState(0x3841, 0xcec0, 0xa2c0, 0x1203, 0x3912, 0x655b, 0x0, 0x0);
        gbc.writeMem(0x3841, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xcec0);
        EXPECT(gbc.pc(), 0x3842);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0287
        gbc.setState(0x111b, 0x57e1, 0xd110, 0xa9e0, 0xbcf3, 0xf849, 0x0, 0x1);
        gbc.writeMem(0x111b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x57e1);
        EXPECT(gbc.pc(), 0x111c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0288
        gbc.setState(0xb81a, 0x70a, 0x9e90, 0x1b12, 0x8471, 0x9fd8, 0x1, 0x0);
        gbc.writeMem(0xb81a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x70a);
        EXPECT(gbc.pc(), 0xb81b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb81a), 0x40);
        // 40 0289
        gbc.setState(0xb92b, 0xcdea, 0x51c0, 0xf31b, 0x5592, 0x44f, 0x0, 0x1);
        gbc.writeMem(0xb92b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xcdea);
        EXPECT(gbc.pc(), 0xb92c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb92b), 0x40);
        // 40 028A
        gbc.setState(0x917d, 0x74db, 0xbcc0, 0x1c58, 0xc533, 0x6691, 0x1, 0x0);
        gbc.writeMem(0x917d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x74db);
        EXPECT(gbc.pc(), 0x917e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x917d), 0x40);
        // 40 028B
        gbc.setState(0xde6d, 0x66b6, 0x6490, 0xd32c, 0xb5f9, 0xee2, 0x0, 0x1);
        gbc.writeMem(0xde6d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x66b6);
        EXPECT(gbc.pc(), 0xde6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde6d), 0x40);
        // 40 028C
        gbc.setState(0xdbe1, 0xe0e4, 0x23c0, 0x9fe7, 0x1fd2, 0xdcfa, 0x0, 0x1);
        gbc.writeMem(0xdbe1, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xe0e4);
        EXPECT(gbc.pc(), 0xdbe2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbe1), 0x40);
        // 40 028D
        gbc.setState(0xa73f, 0xea4b, 0x20, 0xb121, 0xe718, 0x6b5c, 0x1, 0x0);
        gbc.writeMem(0xa73f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xea4b);
        EXPECT(gbc.pc(), 0xa740);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa73f), 0x40);
        // 40 028E
        gbc.setState(0xacb2, 0xbe6e, 0xd430, 0x44a2, 0xc707, 0x15, 0x1, 0x1);
        gbc.writeMem(0xacb2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xbe6e);
        EXPECT(gbc.pc(), 0xacb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacb2), 0x40);
        // 40 028F
        gbc.setState(0x2ba0, 0xb6a2, 0xa810, 0x8891, 0x58f2, 0x7ede, 0x0, 0x1);
        gbc.writeMem(0x2ba0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xb6a2);
        EXPECT(gbc.pc(), 0x2ba1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0291
        gbc.setState(0x85be, 0xbae1, 0x4d10, 0x821b, 0xc296, 0x4566, 0x1, 0x1);
        gbc.writeMem(0x85be, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xbae1);
        EXPECT(gbc.pc(), 0x85bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85be), 0x40);
        // 40 0292
        gbc.setState(0xac59, 0xb211, 0x1f70, 0xd44c, 0x45a7, 0x2afd, 0x1, 0x0);
        gbc.writeMem(0xac59, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xb211);
        EXPECT(gbc.pc(), 0xac5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac59), 0x40);
        // 40 0293
        gbc.setState(0x7b22, 0x4453, 0x27e0, 0x87b4, 0xfc46, 0xeec9, 0x0, 0x1);
        gbc.writeMem(0x7b22, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x4453);
        EXPECT(gbc.pc(), 0x7b23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0294
        gbc.setState(0xb7d, 0x3a39, 0x5cf0, 0x3042, 0xa3ad, 0x2b68, 0x0, 0x1);
        gbc.writeMem(0xb7d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x3a39);
        EXPECT(gbc.pc(), 0xb7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0295
        gbc.setState(0x8948, 0xadf1, 0x2550, 0x54d, 0xbf4c, 0x4668, 0x1, 0x1);
        gbc.writeMem(0x8948, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xadf1);
        EXPECT(gbc.pc(), 0x8949);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8948), 0x40);
        // 40 0296
        gbc.setState(0x6f9a, 0xf56a, 0x7f80, 0xfcf, 0x2b92, 0xb37f, 0x1, 0x0);
        gbc.writeMem(0x6f9a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xf56a);
        EXPECT(gbc.pc(), 0x6f9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0297
        gbc.setState(0xac05, 0xf61c, 0xe7f0, 0x82a4, 0x20fd, 0x6698, 0x1, 0x1);
        gbc.writeMem(0xac05, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xf61c);
        EXPECT(gbc.pc(), 0xac06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac05), 0x40);
        // 40 0298
        gbc.setState(0x85a3, 0xd4a4, 0x340, 0x4f28, 0xc4ca, 0x73eb, 0x1, 0x1);
        gbc.writeMem(0x85a3, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xd4a4);
        EXPECT(gbc.pc(), 0x85a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85a3), 0x40);
        // 40 0299
        gbc.setState(0x6f1c, 0xc08f, 0x7f00, 0x102f, 0x12e6, 0xdefe, 0x1, 0x1);
        gbc.writeMem(0x6f1c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xc08f);
        EXPECT(gbc.pc(), 0x6f1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 029A
        gbc.setState(0x57f1, 0xc770, 0x8860, 0x7c5a, 0x3558, 0x8b9e, 0x1, 0x0);
        gbc.writeMem(0x57f1, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xc770);
        EXPECT(gbc.pc(), 0x57f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 029B
        gbc.setState(0xbb7e, 0x5888, 0x4f40, 0xf81e, 0xb2ed, 0x2719, 0x1, 0x1);
        gbc.writeMem(0xbb7e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x5888);
        EXPECT(gbc.pc(), 0xbb7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb7e), 0x40);
        // 40 029C
        gbc.setState(0x5fdd, 0x8474, 0xeb20, 0x3193, 0xcc40, 0xf819, 0x0, 0x0);
        gbc.writeMem(0x5fdd, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x8474);
        EXPECT(gbc.pc(), 0x5fde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 029D
        gbc.setState(0x2c52, 0x4731, 0x22e0, 0xba70, 0xcb0d, 0x3274, 0x0, 0x0);
        gbc.writeMem(0x2c52, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x4731);
        EXPECT(gbc.pc(), 0x2c53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 029E
        gbc.setState(0x8b1f, 0x8bfe, 0xf1d0, 0x8b12, 0x294a, 0x6beb, 0x1, 0x0);
        gbc.writeMem(0x8b1f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x8bfe);
        EXPECT(gbc.pc(), 0x8b20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b1f), 0x40);
        // 40 029F
        gbc.setState(0x9d07, 0x8bdb, 0x4bb0, 0x5034, 0xbdde, 0xc889, 0x0, 0x0);
        gbc.writeMem(0x9d07, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x8bdb);
        EXPECT(gbc.pc(), 0x9d08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d07), 0x40);
        // 40 02A0
        gbc.setState(0xd42e, 0xfad1, 0xf250, 0xe3b1, 0x2a43, 0xff01, 0x1, 0x0);
        gbc.writeMem(0xd42e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xfad1);
        EXPECT(gbc.pc(), 0xd42f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd42e), 0x40);
        // 40 02A1
        gbc.setState(0xa332, 0x2fca, 0x42e0, 0x1f10, 0x35d6, 0xc657, 0x1, 0x0);
        gbc.writeMem(0xa332, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x2fca);
        EXPECT(gbc.pc(), 0xa333);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa332), 0x40);
        // 40 02A3
        gbc.setState(0xb4a8, 0x3570, 0x43f0, 0x3b4a, 0x43d2, 0x29e0, 0x0, 0x1);
        gbc.writeMem(0xb4a8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x3570);
        EXPECT(gbc.pc(), 0xb4a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4a8), 0x40);
        // 40 02A5
        gbc.setState(0xdcb9, 0x235e, 0x9fc0, 0xd48c, 0x7a86, 0x37c9, 0x0, 0x1);
        gbc.writeMem(0xdcb9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x235e);
        EXPECT(gbc.pc(), 0xdcba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcb9), 0x40);
        // 40 02A6
        gbc.setState(0xec2b, 0x8b8d, 0xa740, 0xa4a5, 0x3374, 0xa28e, 0x1, 0x0);
        gbc.writeMem(0xec2b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x8b8d);
        EXPECT(gbc.pc(), 0xec2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec2b), 0x40);
        // 40 02A7
        gbc.setState(0x9d61, 0x19b2, 0x8770, 0xa343, 0x7896, 0x7c10, 0x1, 0x1);
        gbc.writeMem(0x9d61, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x19b2);
        EXPECT(gbc.pc(), 0x9d62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d61), 0x40);
        // 40 02A8
        gbc.setState(0x1aed, 0xcbbf, 0x6f50, 0x1390, 0xbe32, 0x3806, 0x0, 0x0);
        gbc.writeMem(0x1aed, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xcbbf);
        EXPECT(gbc.pc(), 0x1aee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 02A9
        gbc.setState(0x5a95, 0xc468, 0xc430, 0x222f, 0xa9e, 0x3a8d, 0x0, 0x1);
        gbc.writeMem(0x5a95, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xc468);
        EXPECT(gbc.pc(), 0x5a96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 02AA
        gbc.setState(0xac5f, 0x5e4a, 0xb600, 0x6919, 0x7e40, 0x16e0, 0x1, 0x0);
        gbc.writeMem(0xac5f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x5e4a);
        EXPECT(gbc.pc(), 0xac60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac5f), 0x40);
        // 40 02AB
        gbc.setState(0x3a1a, 0xf636, 0x2c90, 0x44d6, 0xfad3, 0x3bc5, 0x1, 0x0);
        gbc.writeMem(0x3a1a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xf636);
        EXPECT(gbc.pc(), 0x3a1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 02AC
        gbc.setState(0x821, 0x7236, 0x6c00, 0xc962, 0x12d9, 0xf371, 0x0, 0x0);
        gbc.writeMem(0x821, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x7236);
        EXPECT(gbc.pc(), 0x822);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 02AD
        gbc.setState(0x5a31, 0x60b9, 0xe0e0, 0xd882, 0xa5ed, 0xc1fe, 0x0, 0x1);
        gbc.writeMem(0x5a31, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x60b9);
        EXPECT(gbc.pc(), 0x5a32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 02AE
        gbc.setState(0x3b25, 0x3696, 0x54c0, 0x217a, 0x3717, 0xa945, 0x1, 0x1);
        gbc.writeMem(0x3b25, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x3696);
        EXPECT(gbc.pc(), 0x3b26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 02B0
        gbc.setState(0xd99b, 0x9a44, 0xc8a0, 0xf209, 0xff63, 0xce43, 0x1, 0x0);
        gbc.writeMem(0xd99b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9a44);
        EXPECT(gbc.pc(), 0xd99c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd99b), 0x40);
        // 40 02B1
        gbc.setState(0x89d7, 0x3362, 0x82d0, 0xced7, 0xf1ee, 0x3e7a, 0x0, 0x0);
        gbc.writeMem(0x89d7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x3362);
        EXPECT(gbc.pc(), 0x89d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89d7), 0x40);
        // 40 02B2
        gbc.setState(0x12f5, 0x41ce, 0xa820, 0x8d5, 0x477f, 0x69a4, 0x1, 0x0);
        gbc.writeMem(0x12f5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x41ce);
        EXPECT(gbc.pc(), 0x12f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 02B3
        gbc.setState(0x71b, 0x28f2, 0x8920, 0xe6f8, 0x2799, 0xb027, 0x0, 0x0);
        gbc.writeMem(0x71b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x28f2);
        EXPECT(gbc.pc(), 0x71c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 02B4
        gbc.setState(0x5846, 0x5b22, 0xa9f0, 0xf607, 0x8b71, 0x199e, 0x1, 0x0);
        gbc.writeMem(0x5846, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x5b22);
        EXPECT(gbc.pc(), 0x5847);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 02B5
        gbc.setState(0x4380, 0x72f9, 0xf460, 0x6355, 0xdc97, 0x7ba, 0x0, 0x1);
        gbc.writeMem(0x4380, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x72f9);
        EXPECT(gbc.pc(), 0x4381);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 02B7
        gbc.setState(0xdf, 0x44b0, 0xc6d0, 0x540b, 0xc632, 0x8931, 0x0, 0x1);
        gbc.writeMem(0xdf, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x44b0);
        EXPECT(gbc.pc(), 0xe0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 02B8
        gbc.setState(0xb9f3, 0x5205, 0xb3e0, 0xbb17, 0xfd96, 0xc172, 0x0, 0x1);
        gbc.writeMem(0xb9f3, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x5205);
        EXPECT(gbc.pc(), 0xb9f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9f3), 0x40);
        // 40 02B9
        gbc.setState(0xa261, 0x8cef, 0x2550, 0x841e, 0x54fb, 0x866a, 0x0, 0x1);
        gbc.writeMem(0xa261, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x8cef);
        EXPECT(gbc.pc(), 0xa262);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa261), 0x40);
        // 40 02BA
        gbc.setState(0x2612, 0xb37c, 0xc660, 0x58f4, 0xccca, 0xc0df, 0x0, 0x1);
        gbc.writeMem(0x2612, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xb37c);
        EXPECT(gbc.pc(), 0x2613);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 02BB
        gbc.setState(0xed8e, 0x8f98, 0x3340, 0xab08, 0x963a, 0xe491, 0x0, 0x0);
        gbc.writeMem(0xed8e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x8f98);
        EXPECT(gbc.pc(), 0xed8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed8e), 0x40);
        // 40 02BC
        gbc.setState(0x5263, 0x9369, 0x790, 0x869, 0x4481, 0x5fa4, 0x0, 0x1);
        gbc.writeMem(0x5263, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x9369);
        EXPECT(gbc.pc(), 0x5264);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 02BD
        gbc.setState(0xb4f0, 0x2a59, 0x8260, 0xa801, 0x9235, 0xe473, 0x0, 0x0);
        gbc.writeMem(0xb4f0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x2a59);
        EXPECT(gbc.pc(), 0xb4f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4f0), 0x40);
        // 40 02BE
        gbc.setState(0x8985, 0x99f3, 0x1780, 0xb282, 0x3237, 0xd09d, 0x1, 0x1);
        gbc.writeMem(0x8985, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x99f3);
        EXPECT(gbc.pc(), 0x8986);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8985), 0x40);
        // 40 02C0
        gbc.setState(0xe6e6, 0x4b29, 0xcc30, 0x8186, 0x4032, 0xc96a, 0x1, 0x1);
        gbc.writeMem(0xe6e6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x4b29);
        EXPECT(gbc.pc(), 0xe6e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6e6), 0x40);
        // 40 02C1
        gbc.setState(0x570, 0x1f42, 0x46e0, 0x5321, 0xcf2a, 0xaeff, 0x1, 0x1);
        gbc.writeMem(0x570, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x1f42);
        EXPECT(gbc.pc(), 0x571);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 02C2
        gbc.setState(0x91c4, 0xe40f, 0x3db0, 0x106, 0x24c5, 0x76f6, 0x1, 0x1);
        gbc.writeMem(0x91c4, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xe40f);
        EXPECT(gbc.pc(), 0x91c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91c4), 0x40);
        // 40 02C3
        gbc.setState(0x3bb0, 0x8fed, 0x2690, 0xee3d, 0xe9d9, 0xc710, 0x0, 0x0);
        gbc.writeMem(0x3bb0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x8fed);
        EXPECT(gbc.pc(), 0x3bb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 02C5
        gbc.setState(0x252b, 0xe3a7, 0x6190, 0x3f84, 0x6ee1, 0xc918, 0x0, 0x0);
        gbc.writeMem(0x252b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xe3a7);
        EXPECT(gbc.pc(), 0x252c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 02C6
        gbc.setState(0x23c6, 0x77cb, 0xb1e0, 0xf93d, 0x65ac, 0x5f22, 0x0, 0x0);
        gbc.writeMem(0x23c6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x77cb);
        EXPECT(gbc.pc(), 0x23c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 02C7
        gbc.setState(0xae76, 0xc31c, 0x9540, 0xdc53, 0xcfc8, 0x24fa, 0x1, 0x0);
        gbc.writeMem(0xae76, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc31c);
        EXPECT(gbc.pc(), 0xae77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae76), 0x40);
        // 40 02C8
        gbc.setState(0x1afb, 0xc0b8, 0x42c0, 0xbd93, 0xec17, 0x4fd8, 0x0, 0x1);
        gbc.writeMem(0x1afb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xc0b8);
        EXPECT(gbc.pc(), 0x1afc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 02C9
        gbc.setState(0x63d9, 0x698c, 0xd250, 0x50a4, 0x5047, 0x7ea5, 0x0, 0x1);
        gbc.writeMem(0x63d9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x698c);
        EXPECT(gbc.pc(), 0x63da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 02CA
        gbc.setState(0xaccf, 0xd107, 0x9d70, 0xd0c7, 0xe1a3, 0x116e, 0x0, 0x1);
        gbc.writeMem(0xaccf, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xd107);
        EXPECT(gbc.pc(), 0xacd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaccf), 0x40);
        // 40 02CB
        gbc.setState(0x6fc5, 0x4b0f, 0x98a0, 0x7958, 0x503d, 0xf764, 0x0, 0x1);
        gbc.writeMem(0x6fc5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x4b0f);
        EXPECT(gbc.pc(), 0x6fc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 02CC
        gbc.setState(0x4d2e, 0xf971, 0x1ab0, 0xe0ba, 0x7c41, 0x5cf0, 0x0, 0x0);
        gbc.writeMem(0x4d2e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xf971);
        EXPECT(gbc.pc(), 0x4d2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 02CD
        gbc.setState(0x4076, 0x8659, 0x6380, 0x490, 0x6e1b, 0x870d, 0x0, 0x1);
        gbc.writeMem(0x4076, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x8659);
        EXPECT(gbc.pc(), 0x4077);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 02CE
        gbc.setState(0x838c, 0x267d, 0xc180, 0x1fff, 0x6a8e, 0xccd3, 0x1, 0x0);
        gbc.writeMem(0x838c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x267d);
        EXPECT(gbc.pc(), 0x838d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x838c), 0x40);
        // 40 02CF
        gbc.setState(0x6d80, 0xfefb, 0xc050, 0xec8d, 0x5db1, 0x80cf, 0x0, 0x0);
        gbc.writeMem(0x6d80, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xfefb);
        EXPECT(gbc.pc(), 0x6d81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 02D0
        gbc.setState(0xd3c1, 0xb29b, 0x9040, 0x39ae, 0xaf1e, 0x4ef2, 0x0, 0x0);
        gbc.writeMem(0xd3c1, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xb29b);
        EXPECT(gbc.pc(), 0xd3c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3c1), 0x40);
        // 40 02D1
        gbc.setState(0x5ac9, 0x5d41, 0x6280, 0xe971, 0x26f0, 0x4e98, 0x1, 0x1);
        gbc.writeMem(0x5ac9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x5d41);
        EXPECT(gbc.pc(), 0x5aca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 02D2
        gbc.setState(0x848e, 0x7adc, 0x5e10, 0xdd8a, 0xf6f2, 0x8b4d, 0x1, 0x0);
        gbc.writeMem(0x848e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x7adc);
        EXPECT(gbc.pc(), 0x848f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x848e), 0x40);
        // 40 02D3
        gbc.setState(0x5b4e, 0xbcae, 0x6dc0, 0x1580, 0x83da, 0xeb79, 0x1, 0x1);
        gbc.writeMem(0x5b4e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xbcae);
        EXPECT(gbc.pc(), 0x5b4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 02D4
        gbc.setState(0xbb00, 0x6a05, 0xe820, 0xc66e, 0xa7ac, 0xd997, 0x0, 0x0);
        gbc.writeMem(0xbb00, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x6a05);
        EXPECT(gbc.pc(), 0xbb01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb00), 0x40);
        // 40 02D5
        gbc.setState(0xd243, 0x9222, 0xcc90, 0x2ba, 0x880b, 0x528d, 0x1, 0x1);
        gbc.writeMem(0xd243, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x9222);
        EXPECT(gbc.pc(), 0xd244);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd243), 0x40);
        // 40 02D6
        gbc.setState(0xebbd, 0x1a2d, 0x8c50, 0xc115, 0xce4c, 0x6b12, 0x1, 0x0);
        gbc.writeMem(0xebbd, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x1a2d);
        EXPECT(gbc.pc(), 0xebbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebbd), 0x40);
        // 40 02D7
        gbc.setState(0x12c9, 0xc769, 0x5500, 0x3d19, 0xbff3, 0x4101, 0x1, 0x1);
        gbc.writeMem(0x12c9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xc769);
        EXPECT(gbc.pc(), 0x12ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 02D8
        gbc.setState(0x5e37, 0x1e5b, 0xca0, 0xdbf4, 0xbc9, 0xa3ac, 0x0, 0x0);
        gbc.writeMem(0x5e37, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x1e5b);
        EXPECT(gbc.pc(), 0x5e38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 02D9
        gbc.setState(0x4244, 0x36f9, 0x58d0, 0x91d9, 0x4d8b, 0x2d03, 0x1, 0x1);
        gbc.writeMem(0x4244, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x36f9);
        EXPECT(gbc.pc(), 0x4245);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 02DA
        gbc.setState(0x6526, 0x1717, 0x11d0, 0x1938, 0xd25, 0xaeec, 0x1, 0x0);
        gbc.writeMem(0x6526, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x1717);
        EXPECT(gbc.pc(), 0x6527);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 02DB
        gbc.setState(0xc6d0, 0xc235, 0x50e0, 0xa54b, 0x483a, 0xae4b, 0x0, 0x1);
        gbc.writeMem(0xc6d0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xc235);
        EXPECT(gbc.pc(), 0xc6d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6d0), 0x40);
        // 40 02DC
        gbc.setState(0xb22d, 0xe462, 0x2730, 0x2728, 0xce86, 0x3848, 0x0, 0x0);
        gbc.writeMem(0xb22d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xe462);
        EXPECT(gbc.pc(), 0xb22e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb22d), 0x40);
        // 40 02DD
        gbc.setState(0xeba2, 0x4708, 0x9e70, 0xf747, 0x2911, 0x9f64, 0x0, 0x1);
        gbc.writeMem(0xeba2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x4708);
        EXPECT(gbc.pc(), 0xeba3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeba2), 0x40);
        // 40 02DE
        gbc.setState(0x2c8f, 0xe853, 0xea0, 0xb29b, 0xbb0b, 0x8259, 0x1, 0x0);
        gbc.writeMem(0x2c8f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xe853);
        EXPECT(gbc.pc(), 0x2c90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 02DF
        gbc.setState(0x384d, 0x5c87, 0xe750, 0xaffe, 0x665c, 0x85bd, 0x0, 0x1);
        gbc.writeMem(0x384d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x5c87);
        EXPECT(gbc.pc(), 0x384e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 02E0
        gbc.setState(0x1610, 0x8c6b, 0xe070, 0xabf4, 0x1d4e, 0x275f, 0x0, 0x0);
        gbc.writeMem(0x1610, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x8c6b);
        EXPECT(gbc.pc(), 0x1611);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 02E1
        gbc.setState(0xc3ce, 0xef73, 0x1df0, 0x2933, 0xca8, 0x13c, 0x0, 0x0);
        gbc.writeMem(0xc3ce, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xef73);
        EXPECT(gbc.pc(), 0xc3cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3ce), 0x40);
        // 40 02E2
        gbc.setState(0x4e32, 0x584, 0xe800, 0xe293, 0xb44a, 0xc5e, 0x1, 0x1);
        gbc.writeMem(0x4e32, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x584);
        EXPECT(gbc.pc(), 0x4e33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 02E3
        gbc.setState(0xce24, 0xc3ab, 0x4c0, 0x3beb, 0x79b0, 0x7bc9, 0x0, 0x0);
        gbc.writeMem(0xce24, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xc3ab);
        EXPECT(gbc.pc(), 0xce25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce24), 0x40);
        // 40 02E4
        gbc.setState(0x2d37, 0x30a1, 0x4d20, 0xa7ce, 0x4ce1, 0xbe32, 0x1, 0x0);
        gbc.writeMem(0x2d37, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x30a1);
        EXPECT(gbc.pc(), 0x2d38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 02E5
        gbc.setState(0x7cb5, 0xe5fe, 0x9eb0, 0xe4c6, 0x7ea1, 0x8c35, 0x0, 0x0);
        gbc.writeMem(0x7cb5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xe5fe);
        EXPECT(gbc.pc(), 0x7cb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 02E6
        gbc.setState(0x8b02, 0xb937, 0x64e0, 0xc6a1, 0xeec5, 0x88e0, 0x0, 0x0);
        gbc.writeMem(0x8b02, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xb937);
        EXPECT(gbc.pc(), 0x8b03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b02), 0x40);
        // 40 02E7
        gbc.setState(0x888e, 0xf582, 0x1060, 0xd447, 0x6a21, 0x217a, 0x1, 0x0);
        gbc.writeMem(0x888e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xf582);
        EXPECT(gbc.pc(), 0x888f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x888e), 0x40);
        // 40 02E8
        gbc.setState(0x8194, 0xcc9a, 0xf510, 0xf5b2, 0x6d7a, 0x9dc6, 0x0, 0x0);
        gbc.writeMem(0x8194, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xcc9a);
        EXPECT(gbc.pc(), 0x8195);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8194), 0x40);
        // 40 02EA
        gbc.setState(0x39b7, 0xa3f8, 0xae70, 0x8ef, 0x594d, 0xa9a4, 0x1, 0x1);
        gbc.writeMem(0x39b7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xa3f8);
        EXPECT(gbc.pc(), 0x39b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 02EB
        gbc.setState(0x822a, 0xaa7f, 0x7100, 0x9b48, 0x7d87, 0x2b44, 0x1, 0x0);
        gbc.writeMem(0x822a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xaa7f);
        EXPECT(gbc.pc(), 0x822b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x822a), 0x40);
        // 40 02EC
        gbc.setState(0xb5a, 0x9b02, 0x1b90, 0x2fd7, 0x498b, 0xee33, 0x0, 0x0);
        gbc.writeMem(0xb5a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x9b02);
        EXPECT(gbc.pc(), 0xb5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 02ED
        gbc.setState(0xcfc9, 0x5150, 0x16b0, 0x3e8b, 0xd189, 0xcde0, 0x1, 0x0);
        gbc.writeMem(0xcfc9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x5150);
        EXPECT(gbc.pc(), 0xcfca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfc9), 0x40);
        // 40 02EE
        gbc.setState(0x1201, 0xbbd0, 0x6950, 0x2c65, 0x7dd3, 0x7161, 0x0, 0x1);
        gbc.writeMem(0x1201, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xbbd0);
        EXPECT(gbc.pc(), 0x1202);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 02EF
        gbc.setState(0x83e, 0xec28, 0xf870, 0x9496, 0x709b, 0x6d68, 0x0, 0x1);
        gbc.writeMem(0x83e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xec28);
        EXPECT(gbc.pc(), 0x83f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 02F0
        gbc.setState(0x36c4, 0xd51d, 0xda90, 0xa1c5, 0xf16d, 0x2167, 0x1, 0x0);
        gbc.writeMem(0x36c4, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xd51d);
        EXPECT(gbc.pc(), 0x36c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 02F1
        gbc.setState(0x61b5, 0x7ae2, 0x53e0, 0x7ab, 0x51a6, 0x624f, 0x0, 0x0);
        gbc.writeMem(0x61b5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x7ae2);
        EXPECT(gbc.pc(), 0x61b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 02F2
        gbc.setState(0x1b77, 0x5c2a, 0xeef0, 0xbaf4, 0xeb87, 0x99b4, 0x0, 0x1);
        gbc.writeMem(0x1b77, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x5c2a);
        EXPECT(gbc.pc(), 0x1b78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 02F3
        gbc.setState(0x823, 0xe32b, 0x1720, 0xa587, 0x80e5, 0x4d6b, 0x1, 0x1);
        gbc.writeMem(0x823, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xe32b);
        EXPECT(gbc.pc(), 0x824);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 02F4
        gbc.setState(0xd9e4, 0xa8d7, 0xeb60, 0x4818, 0x7367, 0xff64, 0x1, 0x1);
        gbc.writeMem(0xd9e4, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xa8d7);
        EXPECT(gbc.pc(), 0xd9e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9e4), 0x40);
        // 40 02F5
        gbc.setState(0xeba7, 0x486c, 0xdd60, 0xd6ad, 0x3ddd, 0xd652, 0x0, 0x0);
        gbc.writeMem(0xeba7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x486c);
        EXPECT(gbc.pc(), 0xeba8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeba7), 0x40);
        // 40 02F6
        gbc.setState(0x741f, 0x115f, 0xab90, 0x97b1, 0x237c, 0xe6bc, 0x1, 0x1);
        gbc.writeMem(0x741f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x115f);
        EXPECT(gbc.pc(), 0x7420);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 02F7
        gbc.setState(0xe3a6, 0x1035, 0xc360, 0x3933, 0x56a, 0x6726, 0x1, 0x0);
        gbc.writeMem(0xe3a6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x1035);
        EXPECT(gbc.pc(), 0xe3a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3a6), 0x40);
        // 40 02F8
        gbc.setState(0x56e2, 0xe197, 0xda0, 0xaa59, 0xaa8c, 0x4104, 0x1, 0x1);
        gbc.writeMem(0x56e2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xe197);
        EXPECT(gbc.pc(), 0x56e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 02F9
        gbc.setState(0x5c7, 0x8bc, 0x3830, 0x3709, 0xb82f, 0x9e9b, 0x1, 0x0);
        gbc.writeMem(0x5c7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x8bc);
        EXPECT(gbc.pc(), 0x5c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 02FA
        gbc.setState(0xf2f, 0x5a4b, 0x3fc0, 0x24e7, 0xd15a, 0x5d36, 0x0, 0x0);
        gbc.writeMem(0xf2f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x5a4b);
        EXPECT(gbc.pc(), 0xf30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 02FB
        gbc.setState(0x69af, 0x9143, 0x9670, 0x3c9b, 0xdd8a, 0xb933, 0x0, 0x1);
        gbc.writeMem(0x69af, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x9143);
        EXPECT(gbc.pc(), 0x69b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 02FC
        gbc.setState(0xef3a, 0x93d3, 0x140, 0x1af3, 0x679d, 0xccf9, 0x1, 0x0);
        gbc.writeMem(0xef3a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x93d3);
        EXPECT(gbc.pc(), 0xef3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef3a), 0x40);
        // 40 02FD
        gbc.setState(0xbee6, 0xc4c9, 0x47a0, 0x2af3, 0x59e5, 0xa488, 0x0, 0x0);
        gbc.writeMem(0xbee6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc4c9);
        EXPECT(gbc.pc(), 0xbee7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbee6), 0x40);
        // 40 02FE
        gbc.setState(0x4a5a, 0x38b5, 0x9770, 0x4fb2, 0x93c2, 0x7a26, 0x1, 0x0);
        gbc.writeMem(0x4a5a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x38b5);
        EXPECT(gbc.pc(), 0x4a5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 02FF
        gbc.setState(0x187d, 0x5245, 0x4820, 0x6a97, 0x6e44, 0xaa7e, 0x1, 0x0);
        gbc.writeMem(0x187d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x5245);
        EXPECT(gbc.pc(), 0x187e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0300
        gbc.setState(0x6c8, 0xfe16, 0xd8b0, 0xee5c, 0x22b0, 0xe608, 0x0, 0x1);
        gbc.writeMem(0x6c8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xfe16);
        EXPECT(gbc.pc(), 0x6c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0301
        gbc.setState(0x8e03, 0xd2c6, 0x2f00, 0x9453, 0x5792, 0xd7bd, 0x0, 0x1);
        gbc.writeMem(0x8e03, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd2c6);
        EXPECT(gbc.pc(), 0x8e04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e03), 0x40);
        // 40 0302
        gbc.setState(0x4bdd, 0x5b32, 0xc4e0, 0x22df, 0x7e07, 0xca31, 0x0, 0x1);
        gbc.writeMem(0x4bdd, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x5b32);
        EXPECT(gbc.pc(), 0x4bde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0303
        gbc.setState(0xc500, 0x19fb, 0x850, 0xfcc, 0xdfb2, 0x28c4, 0x0, 0x1);
        gbc.writeMem(0xc500, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x19fb);
        EXPECT(gbc.pc(), 0xc501);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc500), 0x40);
        // 40 0304
        gbc.setState(0x583, 0xc818, 0x9cd0, 0x65b4, 0x4b07, 0xae41, 0x1, 0x1);
        gbc.writeMem(0x583, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xc818);
        EXPECT(gbc.pc(), 0x584);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0305
        gbc.setState(0xcba7, 0x2e2e, 0xf960, 0xd7dd, 0xf80d, 0xf2ac, 0x0, 0x1);
        gbc.writeMem(0xcba7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x2e2e);
        EXPECT(gbc.pc(), 0xcba8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcba7), 0x40);
        // 40 0306
        gbc.setState(0xa362, 0xb8c3, 0x4630, 0xe6af, 0xe69e, 0xd8fb, 0x1, 0x0);
        gbc.writeMem(0xa362, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xb8c3);
        EXPECT(gbc.pc(), 0xa363);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa362), 0x40);
        // 40 0307
        gbc.setState(0x789c, 0x367e, 0x8b0, 0x515d, 0x4e5f, 0x65d9, 0x0, 0x0);
        gbc.writeMem(0x789c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x367e);
        EXPECT(gbc.pc(), 0x789d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0308
        gbc.setState(0x6fb, 0xe04a, 0x53d0, 0xdc7f, 0x7c8f, 0xa632, 0x0, 0x0);
        gbc.writeMem(0x6fb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xe04a);
        EXPECT(gbc.pc(), 0x6fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0309
        gbc.setState(0xe35, 0x30ca, 0xb530, 0x18ae, 0x7807, 0x1439, 0x1, 0x0);
        gbc.writeMem(0xe35, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x30ca);
        EXPECT(gbc.pc(), 0xe36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 030B
        gbc.setState(0x493a, 0xa79c, 0x41e0, 0x830b, 0xb3db, 0x72a9, 0x1, 0x0);
        gbc.writeMem(0x493a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xa79c);
        EXPECT(gbc.pc(), 0x493b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 030C
        gbc.setState(0x99f7, 0x47d8, 0x5a10, 0x765d, 0xf9e7, 0x8e98, 0x0, 0x1);
        gbc.writeMem(0x99f7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x47d8);
        EXPECT(gbc.pc(), 0x99f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99f7), 0x40);
        // 40 030E
        gbc.setState(0xcdff, 0x6f74, 0xe170, 0xe27c, 0xca9, 0x8816, 0x1, 0x0);
        gbc.writeMem(0xcdff, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x6f74);
        EXPECT(gbc.pc(), 0xce00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdff), 0x40);
        // 40 030F
        gbc.setState(0x30a, 0x4bd3, 0x9630, 0x3145, 0xef3d, 0x2f9, 0x1, 0x0);
        gbc.writeMem(0x30a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x4bd3);
        EXPECT(gbc.pc(), 0x30b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0310
        gbc.setState(0xc3a7, 0x3538, 0x4cc0, 0xd4bc, 0x570d, 0x7c02, 0x1, 0x1);
        gbc.writeMem(0xc3a7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x3538);
        EXPECT(gbc.pc(), 0xc3a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3a7), 0x40);
        // 40 0311
        gbc.setState(0x9b61, 0xf6fd, 0xeec0, 0x6bad, 0x3c01, 0x7abb, 0x1, 0x1);
        gbc.writeMem(0x9b61, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xf6fd);
        EXPECT(gbc.pc(), 0x9b62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b61), 0x40);
        // 40 0312
        gbc.setState(0x3b03, 0xd152, 0x4490, 0x2b55, 0xc089, 0x7ca1, 0x1, 0x0);
        gbc.writeMem(0x3b03, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xd152);
        EXPECT(gbc.pc(), 0x3b04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0313
        gbc.setState(0x5cd7, 0x8210, 0xe9f0, 0xc7e9, 0xea8b, 0x267d, 0x0, 0x1);
        gbc.writeMem(0x5cd7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x8210);
        EXPECT(gbc.pc(), 0x5cd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0314
        gbc.setState(0xc54a, 0x7bc0, 0x7b50, 0x8de3, 0x52b2, 0x70ab, 0x0, 0x0);
        gbc.writeMem(0xc54a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7bc0);
        EXPECT(gbc.pc(), 0xc54b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc54a), 0x40);
        // 40 0315
        gbc.setState(0x1486, 0xf6e, 0x3e60, 0x6c7, 0x62e0, 0x7048, 0x1, 0x0);
        gbc.writeMem(0x1486, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xf6e);
        EXPECT(gbc.pc(), 0x1487);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0316
        gbc.setState(0x3de2, 0x1a12, 0x23e0, 0x8c24, 0xc7ed, 0x40b5, 0x1, 0x0);
        gbc.writeMem(0x3de2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x1a12);
        EXPECT(gbc.pc(), 0x3de3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0317
        gbc.setState(0x6002, 0x217a, 0xa660, 0x2257, 0x7b30, 0x28fe, 0x1, 0x1);
        gbc.writeMem(0x6002, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x217a);
        EXPECT(gbc.pc(), 0x6003);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0318
        gbc.setState(0x8fc4, 0x7175, 0x5800, 0x6da6, 0x8432, 0xf94c, 0x0, 0x0);
        gbc.writeMem(0x8fc4, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x7175);
        EXPECT(gbc.pc(), 0x8fc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fc4), 0x40);
        // 40 0319
        gbc.setState(0x71a8, 0x8fee, 0x3410, 0x9601, 0xc514, 0xb4ee, 0x0, 0x1);
        gbc.writeMem(0x71a8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x8fee);
        EXPECT(gbc.pc(), 0x71a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 031A
        gbc.setState(0x532a, 0x95b7, 0xdb40, 0x3c18, 0x84cf, 0x7eba, 0x0, 0x1);
        gbc.writeMem(0x532a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x95b7);
        EXPECT(gbc.pc(), 0x532b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 031B
        gbc.setState(0xb9a8, 0x8f73, 0x85b0, 0x76e6, 0x3c33, 0x5163, 0x1, 0x1);
        gbc.writeMem(0xb9a8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x8f73);
        EXPECT(gbc.pc(), 0xb9a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9a8), 0x40);
        // 40 031C
        gbc.setState(0xac08, 0xc71e, 0x2560, 0x4285, 0xfdf8, 0x63a, 0x0, 0x1);
        gbc.writeMem(0xac08, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xc71e);
        EXPECT(gbc.pc(), 0xac09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac08), 0x40);
        // 40 031D
        gbc.setState(0x8666, 0x77fa, 0xf270, 0x2930, 0x1bd9, 0xc01a, 0x0, 0x0);
        gbc.writeMem(0x8666, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x77fa);
        EXPECT(gbc.pc(), 0x8667);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8666), 0x40);
        // 40 031E
        gbc.setState(0x676c, 0x343b, 0xf920, 0x34e5, 0x52d0, 0xd48f, 0x1, 0x1);
        gbc.writeMem(0x676c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x343b);
        EXPECT(gbc.pc(), 0x676d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0320
        gbc.setState(0x9cc1, 0xb87c, 0x6250, 0xfdd2, 0x4204, 0xc800, 0x0, 0x1);
        gbc.writeMem(0x9cc1, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xb87c);
        EXPECT(gbc.pc(), 0x9cc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cc1), 0x40);
        // 40 0321
        gbc.setState(0xe1de, 0x27fc, 0xd410, 0x3d5a, 0x3f44, 0xcb0c, 0x1, 0x1);
        gbc.writeMem(0xe1de, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x27fc);
        EXPECT(gbc.pc(), 0xe1df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1de), 0x40);
        // 40 0322
        gbc.setState(0xb23a, 0x7ec6, 0xeb0, 0x7a82, 0xa866, 0xa0a3, 0x1, 0x0);
        gbc.writeMem(0xb23a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x7ec6);
        EXPECT(gbc.pc(), 0xb23b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb23a), 0x40);
        // 40 0323
        gbc.setState(0xd792, 0xeed7, 0xdae0, 0xeb09, 0xca5b, 0xb5b, 0x1, 0x1);
        gbc.writeMem(0xd792, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xeed7);
        EXPECT(gbc.pc(), 0xd793);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd792), 0x40);
        // 40 0324
        gbc.setState(0xe58, 0x7de5, 0x1850, 0x78b5, 0x43d8, 0x2456, 0x1, 0x0);
        gbc.writeMem(0xe58, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x7de5);
        EXPECT(gbc.pc(), 0xe59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0325
        gbc.setState(0x3dfb, 0x5c7c, 0x1790, 0x9f5b, 0xcc1f, 0xf92b, 0x1, 0x1);
        gbc.writeMem(0x3dfb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x5c7c);
        EXPECT(gbc.pc(), 0x3dfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0326
        gbc.setState(0x6e87, 0x6768, 0xf2c0, 0xa095, 0x8080, 0x5944, 0x1, 0x1);
        gbc.writeMem(0x6e87, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x6768);
        EXPECT(gbc.pc(), 0x6e88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0327
        gbc.setState(0x93d9, 0x532f, 0x55d0, 0xfb15, 0xb227, 0x2bd0, 0x1, 0x1);
        gbc.writeMem(0x93d9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x532f);
        EXPECT(gbc.pc(), 0x93da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93d9), 0x40);
        // 40 0328
        gbc.setState(0x994f, 0xc3da, 0xb70, 0x9709, 0xf5f, 0x25f1, 0x0, 0x1);
        gbc.writeMem(0x994f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xc3da);
        EXPECT(gbc.pc(), 0x9950);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x994f), 0x40);
        // 40 0329
        gbc.setState(0xe07f, 0x1ae, 0xa680, 0x7372, 0x19b8, 0x16d5, 0x0, 0x0);
        gbc.writeMem(0xe07f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x1ae);
        EXPECT(gbc.pc(), 0xe080);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe07f), 0x40);
        // 40 032A
        gbc.setState(0x3367, 0xc884, 0xbc60, 0x3db5, 0x476, 0x2b83, 0x0, 0x0);
        gbc.writeMem(0x3367, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xc884);
        EXPECT(gbc.pc(), 0x3368);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 032B
        gbc.setState(0x7321, 0xdb30, 0xdaa0, 0xfb3a, 0x528b, 0xb9db, 0x1, 0x1);
        gbc.writeMem(0x7321, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xdb30);
        EXPECT(gbc.pc(), 0x7322);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 032C
        gbc.setState(0xd04e, 0x65ec, 0x47e0, 0x1c77, 0x81a6, 0xa750, 0x0, 0x0);
        gbc.writeMem(0xd04e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x65ec);
        EXPECT(gbc.pc(), 0xd04f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd04e), 0x40);
        // 40 032D
        gbc.setState(0xc7b1, 0x31c3, 0x7cf0, 0xe1a6, 0xc58e, 0xadc1, 0x0, 0x1);
        gbc.writeMem(0xc7b1, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x31c3);
        EXPECT(gbc.pc(), 0xc7b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7b1), 0x40);
        // 40 032E
        gbc.setState(0xbbe6, 0x79b1, 0x650, 0x3cc1, 0x8a79, 0x9432, 0x1, 0x0);
        gbc.writeMem(0xbbe6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x79b1);
        EXPECT(gbc.pc(), 0xbbe7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbe6), 0x40);
        // 40 032F
        gbc.setState(0x26c2, 0xa65d, 0x6710, 0x4551, 0x770a, 0x453f, 0x1, 0x0);
        gbc.writeMem(0x26c2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa65d);
        EXPECT(gbc.pc(), 0x26c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0330
        gbc.setState(0xb04a, 0x2d2a, 0x42b0, 0x6ec2, 0xc84f, 0xc7f0, 0x0, 0x0);
        gbc.writeMem(0xb04a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x2d2a);
        EXPECT(gbc.pc(), 0xb04b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb04a), 0x40);
        // 40 0331
        gbc.setState(0xbb71, 0xbd3c, 0xc330, 0x8a52, 0x9d05, 0x39cb, 0x0, 0x1);
        gbc.writeMem(0xbb71, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xbd3c);
        EXPECT(gbc.pc(), 0xbb72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb71), 0x40);
        // 40 0332
        gbc.setState(0x1a6, 0x4e99, 0x6df0, 0x31, 0xcda6, 0x6901, 0x0, 0x0);
        gbc.writeMem(0x1a6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x4e99);
        EXPECT(gbc.pc(), 0x1a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0333
        gbc.setState(0x2554, 0x7558, 0x77e0, 0xfe58, 0xdaa9, 0x21a7, 0x1, 0x0);
        gbc.writeMem(0x2554, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x7558);
        EXPECT(gbc.pc(), 0x2555);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0334
        gbc.setState(0x54e6, 0x45a0, 0x1dd0, 0xa51e, 0x8731, 0x8769, 0x0, 0x0);
        gbc.writeMem(0x54e6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x45a0);
        EXPECT(gbc.pc(), 0x54e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0335
        gbc.setState(0xbc50, 0xd5ca, 0x7390, 0xfe36, 0xe556, 0xb5c0, 0x0, 0x0);
        gbc.writeMem(0xbc50, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xd5ca);
        EXPECT(gbc.pc(), 0xbc51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc50), 0x40);
        // 40 0336
        gbc.setState(0xe057, 0x2931, 0x9280, 0x23ac, 0x720b, 0x62ad, 0x0, 0x0);
        gbc.writeMem(0xe057, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x2931);
        EXPECT(gbc.pc(), 0xe058);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe057), 0x40);
        // 40 0338
        gbc.setState(0xd632, 0x8acc, 0x6320, 0xb564, 0x3cf7, 0x5846, 0x1, 0x1);
        gbc.writeMem(0xd632, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x8acc);
        EXPECT(gbc.pc(), 0xd633);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd632), 0x40);
        // 40 0339
        gbc.setState(0xd62, 0xd88a, 0xf670, 0xd0fc, 0x8af5, 0x9030, 0x1, 0x1);
        gbc.writeMem(0xd62, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xd88a);
        EXPECT(gbc.pc(), 0xd63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 033A
        gbc.setState(0xcffb, 0x7825, 0x4280, 0x3978, 0x9b77, 0x28a7, 0x1, 0x0);
        gbc.writeMem(0xcffb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x7825);
        EXPECT(gbc.pc(), 0xcffc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcffb), 0x40);
        // 40 033B
        gbc.setState(0x22a0, 0xb8c8, 0x8fa0, 0x127d, 0xb7b5, 0x975c, 0x0, 0x1);
        gbc.writeMem(0x22a0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xb8c8);
        EXPECT(gbc.pc(), 0x22a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 033C
        gbc.setState(0x6ba3, 0xdb91, 0xc0f0, 0xbc4, 0x806e, 0xa179, 0x0, 0x1);
        gbc.writeMem(0x6ba3, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xdb91);
        EXPECT(gbc.pc(), 0x6ba4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 033D
        gbc.setState(0xcb72, 0x9664, 0x8ec0, 0x7307, 0x6860, 0xa77a, 0x1, 0x1);
        gbc.writeMem(0xcb72, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x9664);
        EXPECT(gbc.pc(), 0xcb73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb72), 0x40);
        // 40 033E
        gbc.setState(0xb681, 0x9af1, 0x50f0, 0xb724, 0x958, 0xac27, 0x0, 0x1);
        gbc.writeMem(0xb681, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x9af1);
        EXPECT(gbc.pc(), 0xb682);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb681), 0x40);
        // 40 033F
        gbc.setState(0x64e7, 0x8f63, 0x1af0, 0x850b, 0xebfc, 0xe0fb, 0x1, 0x0);
        gbc.writeMem(0x64e7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x8f63);
        EXPECT(gbc.pc(), 0x64e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0340
        gbc.setState(0xbe80, 0xd671, 0x7250, 0xdd28, 0xd072, 0x1f21, 0x1, 0x0);
        gbc.writeMem(0xbe80, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xd671);
        EXPECT(gbc.pc(), 0xbe81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe80), 0x40);
        // 40 0341
        gbc.setState(0x3990, 0xc4c6, 0x6000, 0x1670, 0x4b2c, 0x1f81, 0x1, 0x0);
        gbc.writeMem(0x3990, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xc4c6);
        EXPECT(gbc.pc(), 0x3991);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0342
        gbc.setState(0xc50a, 0xf781, 0xb6b0, 0xc733, 0xeda1, 0x4aeb, 0x1, 0x0);
        gbc.writeMem(0xc50a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xf781);
        EXPECT(gbc.pc(), 0xc50b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc50a), 0x40);
        // 40 0343
        gbc.setState(0x5ae6, 0x8eca, 0xe200, 0x2fa6, 0x9fc, 0xc424, 0x0, 0x1);
        gbc.writeMem(0x5ae6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8eca);
        EXPECT(gbc.pc(), 0x5ae7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0344
        gbc.setState(0x9cec, 0xdac0, 0xd4b0, 0x7e86, 0x5b07, 0x1f87, 0x0, 0x1);
        gbc.writeMem(0x9cec, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xdac0);
        EXPECT(gbc.pc(), 0x9ced);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cec), 0x40);
        // 40 0345
        gbc.setState(0x98f, 0x2fad, 0x7ff0, 0xa567, 0x1189, 0xde86, 0x0, 0x0);
        gbc.writeMem(0x98f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x2fad);
        EXPECT(gbc.pc(), 0x990);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0346
        gbc.setState(0x352c, 0x991e, 0xf1d0, 0xf669, 0x13c0, 0x38e2, 0x1, 0x1);
        gbc.writeMem(0x352c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x991e);
        EXPECT(gbc.pc(), 0x352d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0347
        gbc.setState(0xbe91, 0xdc25, 0xb3f0, 0xb02c, 0xa2e2, 0xccfa, 0x1, 0x0);
        gbc.writeMem(0xbe91, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xdc25);
        EXPECT(gbc.pc(), 0xbe92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe91), 0x40);
        // 40 0348
        gbc.setState(0xbba, 0x5c2f, 0x1e60, 0x8638, 0x4562, 0x78fe, 0x0, 0x1);
        gbc.writeMem(0xbba, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x5c2f);
        EXPECT(gbc.pc(), 0xbbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0349
        gbc.setState(0x9be4, 0xfeaa, 0x7990, 0x1316, 0xa59d, 0x42c9, 0x1, 0x1);
        gbc.writeMem(0x9be4, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xfeaa);
        EXPECT(gbc.pc(), 0x9be5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9be4), 0x40);
        // 40 034A
        gbc.setState(0x91a2, 0x7b50, 0xdd80, 0xe4f, 0x7dcb, 0x6043, 0x1, 0x1);
        gbc.writeMem(0x91a2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x7b50);
        EXPECT(gbc.pc(), 0x91a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91a2), 0x40);
        // 40 034B
        gbc.setState(0xdbff, 0x5bdd, 0xec50, 0xc99f, 0xcd54, 0xd1f9, 0x0, 0x1);
        gbc.writeMem(0xdbff, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x5bdd);
        EXPECT(gbc.pc(), 0xdc00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbff), 0x40);
        // 40 034C
        gbc.setState(0x439f, 0x4e42, 0x26d0, 0x2091, 0xc6c5, 0x6601, 0x1, 0x1);
        gbc.writeMem(0x439f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x4e42);
        EXPECT(gbc.pc(), 0x43a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 034D
        gbc.setState(0xe60, 0x8866, 0x1c00, 0xf7d, 0x7e02, 0x45ca, 0x0, 0x1);
        gbc.writeMem(0xe60, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x8866);
        EXPECT(gbc.pc(), 0xe61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 034E
        gbc.setState(0xb482, 0x1bde, 0x5390, 0xa186, 0xe598, 0xa37f, 0x0, 0x0);
        gbc.writeMem(0xb482, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x1bde);
        EXPECT(gbc.pc(), 0xb483);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb482), 0x40);
        // 40 034F
        gbc.setState(0xd203, 0xbb60, 0xa390, 0x1681, 0x6030, 0xc12, 0x1, 0x1);
        gbc.writeMem(0xd203, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xbb60);
        EXPECT(gbc.pc(), 0xd204);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd203), 0x40);
        // 40 0350
        gbc.setState(0x4c30, 0x1143, 0xd480, 0x6785, 0x7bf5, 0xb640, 0x0, 0x0);
        gbc.writeMem(0x4c30, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x1143);
        EXPECT(gbc.pc(), 0x4c31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0351
        gbc.setState(0xea1f, 0x2ca4, 0x57c0, 0x5b4f, 0x72bd, 0xb935, 0x0, 0x1);
        gbc.writeMem(0xea1f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x2ca4);
        EXPECT(gbc.pc(), 0xea20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea1f), 0x40);
        // 40 0352
        gbc.setState(0x9561, 0x4ebe, 0xe5e0, 0x4481, 0xa11, 0x219c, 0x1, 0x0);
        gbc.writeMem(0x9561, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x4ebe);
        EXPECT(gbc.pc(), 0x9562);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9561), 0x40);
        // 40 0353
        gbc.setState(0x7d84, 0xcc73, 0x4150, 0xb4f0, 0x526e, 0xe5d3, 0x0, 0x0);
        gbc.writeMem(0x7d84, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xcc73);
        EXPECT(gbc.pc(), 0x7d85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0354
        gbc.setState(0xab5c, 0xf8d1, 0xff90, 0x3490, 0x8be9, 0x627a, 0x0, 0x1);
        gbc.writeMem(0xab5c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xf8d1);
        EXPECT(gbc.pc(), 0xab5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab5c), 0x40);
        // 40 0355
        gbc.setState(0x6780, 0x877d, 0x8870, 0x43f7, 0x46b3, 0x2ce3, 0x0, 0x0);
        gbc.writeMem(0x6780, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x877d);
        EXPECT(gbc.pc(), 0x6781);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0356
        gbc.setState(0xa317, 0x60f6, 0x8750, 0xcb6c, 0x2df0, 0x331a, 0x0, 0x1);
        gbc.writeMem(0xa317, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x60f6);
        EXPECT(gbc.pc(), 0xa318);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa317), 0x40);
        // 40 0357
        gbc.setState(0xa7ce, 0x84ba, 0xa150, 0x3629, 0x1ad4, 0x84db, 0x1, 0x0);
        gbc.writeMem(0xa7ce, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x84ba);
        EXPECT(gbc.pc(), 0xa7cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7ce), 0x40);
        // 40 0358
        gbc.setState(0x2f65, 0xffa4, 0x3e0, 0x4e85, 0x88da, 0x94fd, 0x1, 0x1);
        gbc.writeMem(0x2f65, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xffa4);
        EXPECT(gbc.pc(), 0x2f66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0359
        gbc.setState(0xdb01, 0x828f, 0x9b40, 0x13aa, 0x731, 0x621b, 0x1, 0x1);
        gbc.writeMem(0xdb01, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x828f);
        EXPECT(gbc.pc(), 0xdb02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb01), 0x40);
        // 40 035A
        gbc.setState(0xca0b, 0xd08d, 0xcf30, 0x35c1, 0x719, 0xbe77, 0x0, 0x1);
        gbc.writeMem(0xca0b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xd08d);
        EXPECT(gbc.pc(), 0xca0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca0b), 0x40);
        // 40 035B
        gbc.setState(0x4f59, 0x3cf9, 0xe8f0, 0x58fe, 0x3ac7, 0x6617, 0x1, 0x1);
        gbc.writeMem(0x4f59, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x3cf9);
        EXPECT(gbc.pc(), 0x4f5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 035C
        gbc.setState(0xa364, 0xf552, 0xbba0, 0x63c6, 0x6886, 0x76ad, 0x0, 0x1);
        gbc.writeMem(0xa364, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xf552);
        EXPECT(gbc.pc(), 0xa365);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa364), 0x40);
        // 40 035D
        gbc.setState(0x21a2, 0x1b72, 0xd630, 0x7389, 0xc973, 0x8a26, 0x0, 0x1);
        gbc.writeMem(0x21a2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x1b72);
        EXPECT(gbc.pc(), 0x21a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 035E
        gbc.setState(0x5d29, 0xfc86, 0x8f10, 0xefd7, 0x6a5b, 0xec33, 0x1, 0x0);
        gbc.writeMem(0x5d29, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xfc86);
        EXPECT(gbc.pc(), 0x5d2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 035F
        gbc.setState(0xec59, 0x9650, 0xafd0, 0xa532, 0x68a1, 0x8a22, 0x1, 0x1);
        gbc.writeMem(0xec59, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x9650);
        EXPECT(gbc.pc(), 0xec5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec59), 0x40);
        // 40 0360
        gbc.setState(0x40e2, 0x45ed, 0xbbb0, 0x5125, 0x5cc6, 0xeff6, 0x0, 0x0);
        gbc.writeMem(0x40e2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x45ed);
        EXPECT(gbc.pc(), 0x40e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0361
        gbc.setState(0x7a21, 0xed30, 0x1220, 0x4c9a, 0xa862, 0x826c, 0x0, 0x1);
        gbc.writeMem(0x7a21, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xed30);
        EXPECT(gbc.pc(), 0x7a22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0362
        gbc.setState(0x4685, 0x5de, 0x32a0, 0x74ea, 0xa00f, 0xa941, 0x1, 0x0);
        gbc.writeMem(0x4685, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x5de);
        EXPECT(gbc.pc(), 0x4686);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0363
        gbc.setState(0x47d0, 0xbbb8, 0xeaf0, 0x12a9, 0x9101, 0xcdfc, 0x0, 0x0);
        gbc.writeMem(0x47d0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xbbb8);
        EXPECT(gbc.pc(), 0x47d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0364
        gbc.setState(0x2d87, 0xec3a, 0x7380, 0x18d1, 0x412c, 0x8aa0, 0x0, 0x0);
        gbc.writeMem(0x2d87, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xec3a);
        EXPECT(gbc.pc(), 0x2d88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0365
        gbc.setState(0xb57b, 0x2f, 0x4e00, 0x4010, 0x530, 0xa22a, 0x0, 0x1);
        gbc.writeMem(0xb57b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x2f);
        EXPECT(gbc.pc(), 0xb57c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb57b), 0x40);
        // 40 0366
        gbc.setState(0x45b5, 0x145, 0x5d80, 0xaa7a, 0x49a1, 0x4e31, 0x0, 0x0);
        gbc.writeMem(0x45b5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x145);
        EXPECT(gbc.pc(), 0x45b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0367
        gbc.setState(0x8fb, 0xfb09, 0x37b0, 0xf0ce, 0x5ee0, 0xe37d, 0x1, 0x0);
        gbc.writeMem(0x8fb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xfb09);
        EXPECT(gbc.pc(), 0x8fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0368
        gbc.setState(0x55fa, 0x2e60, 0xb450, 0x402f, 0x5271, 0x5615, 0x0, 0x0);
        gbc.writeMem(0x55fa, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x2e60);
        EXPECT(gbc.pc(), 0x55fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0369
        gbc.setState(0xa318, 0x3f1e, 0x2c00, 0x4be2, 0xf358, 0x1eda, 0x1, 0x0);
        gbc.writeMem(0xa318, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x3f1e);
        EXPECT(gbc.pc(), 0xa319);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa318), 0x40);
        // 40 036A
        gbc.setState(0xc239, 0xa4fa, 0xe960, 0xa1f5, 0x43e9, 0xa994, 0x1, 0x1);
        gbc.writeMem(0xc239, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xa4fa);
        EXPECT(gbc.pc(), 0xc23a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc239), 0x40);
        // 40 036B
        gbc.setState(0x6cb9, 0x9b4f, 0xc900, 0xc7d7, 0xe94, 0xa6dd, 0x1, 0x1);
        gbc.writeMem(0x6cb9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x9b4f);
        EXPECT(gbc.pc(), 0x6cba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 036C
        gbc.setState(0x8e6, 0x2ea, 0xdf10, 0xb704, 0xa1db, 0x3819, 0x0, 0x0);
        gbc.writeMem(0x8e6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x2ea);
        EXPECT(gbc.pc(), 0x8e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 036D
        gbc.setState(0x8d70, 0xf232, 0x61d0, 0x7730, 0xd1dc, 0xe1e4, 0x0, 0x0);
        gbc.writeMem(0x8d70, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xf232);
        EXPECT(gbc.pc(), 0x8d71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d70), 0x40);
        // 40 036E
        gbc.setState(0x6dd, 0x4d33, 0xcfb0, 0x9a53, 0x93e, 0x2ad3, 0x1, 0x0);
        gbc.writeMem(0x6dd, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x4d33);
        EXPECT(gbc.pc(), 0x6de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 036F
        gbc.setState(0x52a2, 0xe4a0, 0x5950, 0x3cd2, 0x39f4, 0x9292, 0x1, 0x1);
        gbc.writeMem(0x52a2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xe4a0);
        EXPECT(gbc.pc(), 0x52a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0370
        gbc.setState(0x83dc, 0x7fbd, 0x3cf0, 0x253, 0xe5d6, 0x2fd9, 0x0, 0x0);
        gbc.writeMem(0x83dc, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x7fbd);
        EXPECT(gbc.pc(), 0x83dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83dc), 0x40);
        // 40 0371
        gbc.setState(0x23f7, 0x716e, 0x1100, 0xcefd, 0x37a5, 0xa7d5, 0x1, 0x0);
        gbc.writeMem(0x23f7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x716e);
        EXPECT(gbc.pc(), 0x23f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 0372
        gbc.setState(0xafad, 0xcf3, 0x5fc0, 0xea30, 0xb9e, 0x6dee, 0x0, 0x1);
        gbc.writeMem(0xafad, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xcf3);
        EXPECT(gbc.pc(), 0xafae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafad), 0x40);
        // 40 0373
        gbc.setState(0x9740, 0x9641, 0x6150, 0xccce, 0x73c1, 0x649f, 0x1, 0x1);
        gbc.writeMem(0x9740, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x9641);
        EXPECT(gbc.pc(), 0x9741);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9740), 0x40);
        // 40 0374
        gbc.setState(0xb5c5, 0xb7e4, 0x4380, 0xc4f1, 0x1d2, 0x3291, 0x0, 0x0);
        gbc.writeMem(0xb5c5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xb7e4);
        EXPECT(gbc.pc(), 0xb5c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5c5), 0x40);
        // 40 0375
        gbc.setState(0x4be5, 0x55c8, 0x5e30, 0x6603, 0xfb66, 0xd942, 0x1, 0x0);
        gbc.writeMem(0x4be5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x55c8);
        EXPECT(gbc.pc(), 0x4be6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0376
        gbc.setState(0xc9a8, 0x67c4, 0x83d0, 0xcbe6, 0xec0d, 0xbf6, 0x1, 0x1);
        gbc.writeMem(0xc9a8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x67c4);
        EXPECT(gbc.pc(), 0xc9a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9a8), 0x40);
        // 40 0377
        gbc.setState(0x2f68, 0xb82d, 0xc0f0, 0x5e4f, 0xac23, 0x6c52, 0x0, 0x0);
        gbc.writeMem(0x2f68, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xb82d);
        EXPECT(gbc.pc(), 0x2f69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0378
        gbc.setState(0xcd0e, 0x5409, 0x1720, 0x91e7, 0x7bcb, 0x33b3, 0x0, 0x0);
        gbc.writeMem(0xcd0e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x5409);
        EXPECT(gbc.pc(), 0xcd0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd0e), 0x40);
        // 40 0379
        gbc.setState(0x983, 0x5ef7, 0x6e40, 0xdc0a, 0xa7a9, 0x786e, 0x0, 0x0);
        gbc.writeMem(0x983, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x5ef7);
        EXPECT(gbc.pc(), 0x984);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 037A
        gbc.setState(0x67d, 0xb88f, 0xf050, 0x3b9d, 0xc8b7, 0x9e6e, 0x0, 0x0);
        gbc.writeMem(0x67d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xb88f);
        EXPECT(gbc.pc(), 0x67e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 037B
        gbc.setState(0x2335, 0x3408, 0xc6a0, 0x9741, 0xb3e1, 0xceb9, 0x0, 0x1);
        gbc.writeMem(0x2335, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x3408);
        EXPECT(gbc.pc(), 0x2336);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 037C
        gbc.setState(0xc759, 0xab15, 0x740, 0x3737, 0x7b50, 0xeed9, 0x0, 0x0);
        gbc.writeMem(0xc759, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xab15);
        EXPECT(gbc.pc(), 0xc75a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc759), 0x40);
        // 40 037D
        gbc.setState(0x18d6, 0x3b9b, 0x48d0, 0x213b, 0x5b7a, 0x4722, 0x1, 0x0);
        gbc.writeMem(0x18d6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x3b9b);
        EXPECT(gbc.pc(), 0x18d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 037E
        gbc.setState(0xf17, 0xb64d, 0xcf50, 0xcc00, 0xa8be, 0x892, 0x1, 0x1);
        gbc.writeMem(0xf17, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xb64d);
        EXPECT(gbc.pc(), 0xf18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 037F
        gbc.setState(0xd771, 0xde26, 0x7c0, 0xe729, 0x13e5, 0xfa1e, 0x0, 0x0);
        gbc.writeMem(0xd771, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xde26);
        EXPECT(gbc.pc(), 0xd772);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd771), 0x40);
        // 40 0380
        gbc.setState(0xb864, 0xbb0b, 0x6b30, 0xdc55, 0x4f3c, 0xc846, 0x0, 0x1);
        gbc.writeMem(0xb864, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xbb0b);
        EXPECT(gbc.pc(), 0xb865);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb864), 0x40);
        // 40 0381
        gbc.setState(0xd69d, 0xfbda, 0xa710, 0x3ad, 0x34eb, 0xec6a, 0x0, 0x1);
        gbc.writeMem(0xd69d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xfbda);
        EXPECT(gbc.pc(), 0xd69e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd69d), 0x40);
        // 40 0382
        gbc.setState(0xd772, 0x56dd, 0x3260, 0xcd84, 0xb403, 0xc45d, 0x0, 0x0);
        gbc.writeMem(0xd772, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x56dd);
        EXPECT(gbc.pc(), 0xd773);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd772), 0x40);
        // 40 0384
        gbc.setState(0xea43, 0xe66f, 0xeae0, 0xb421, 0xe933, 0xc3cf, 0x1, 0x0);
        gbc.writeMem(0xea43, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xe66f);
        EXPECT(gbc.pc(), 0xea44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea43), 0x40);
        // 40 0385
        gbc.setState(0xd165, 0xfb1a, 0xa50, 0xe6dd, 0xd61, 0xca13, 0x0, 0x1);
        gbc.writeMem(0xd165, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xfb1a);
        EXPECT(gbc.pc(), 0xd166);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd165), 0x40);
        // 40 0386
        gbc.setState(0x4ee3, 0xd117, 0x810, 0x733b, 0x5dc2, 0x8704, 0x1, 0x1);
        gbc.writeMem(0x4ee3, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xd117);
        EXPECT(gbc.pc(), 0x4ee4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0388
        gbc.setState(0xa3d7, 0xe162, 0xad60, 0x1ada, 0x3e70, 0x797f, 0x0, 0x1);
        gbc.writeMem(0xa3d7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xe162);
        EXPECT(gbc.pc(), 0xa3d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3d7), 0x40);
        // 40 0389
        gbc.setState(0x39f8, 0x4b29, 0xd1c0, 0x9753, 0x27d2, 0x2db0, 0x0, 0x1);
        gbc.writeMem(0x39f8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x4b29);
        EXPECT(gbc.pc(), 0x39f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 038A
        gbc.setState(0x766c, 0x3f26, 0x5e30, 0xfad2, 0x32bb, 0x47c8, 0x0, 0x1);
        gbc.writeMem(0x766c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x3f26);
        EXPECT(gbc.pc(), 0x766d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 038B
        gbc.setState(0x867c, 0x2608, 0x86c0, 0xbfb4, 0x16c7, 0xbb42, 0x0, 0x1);
        gbc.writeMem(0x867c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x2608);
        EXPECT(gbc.pc(), 0x867d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x867c), 0x40);
        // 40 038C
        gbc.setState(0xed8e, 0x5e2f, 0x8d90, 0x4bdb, 0x4d97, 0x9d0f, 0x1, 0x1);
        gbc.writeMem(0xed8e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x5e2f);
        EXPECT(gbc.pc(), 0xed8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed8e), 0x40);
        // 40 038D
        gbc.setState(0xec1b, 0x135a, 0xae90, 0xc8ed, 0x4b06, 0x2c25, 0x1, 0x1);
        gbc.writeMem(0xec1b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x135a);
        EXPECT(gbc.pc(), 0xec1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec1b), 0x40);
        // 40 038E
        gbc.setState(0x9fe, 0xd77a, 0x2f70, 0x72b0, 0x6e15, 0x1989, 0x0, 0x1);
        gbc.writeMem(0x9fe, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xd77a);
        EXPECT(gbc.pc(), 0x9ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 038F
        gbc.setState(0x2e13, 0x8f24, 0x6220, 0x2c78, 0xa4fc, 0x2853, 0x1, 0x1);
        gbc.writeMem(0x2e13, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x8f24);
        EXPECT(gbc.pc(), 0x2e14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0390
        gbc.setState(0x50a2, 0x3e73, 0xe4f0, 0x73e3, 0xa47b, 0xf02, 0x0, 0x0);
        gbc.writeMem(0x50a2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x3e73);
        EXPECT(gbc.pc(), 0x50a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0391
        gbc.setState(0x4044, 0x82b6, 0x9270, 0x912a, 0xa7c1, 0xdc5f, 0x1, 0x0);
        gbc.writeMem(0x4044, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x82b6);
        EXPECT(gbc.pc(), 0x4045);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0392
        gbc.setState(0x17c1, 0xffda, 0x19a0, 0x3f7f, 0x25d, 0xcb96, 0x1, 0x1);
        gbc.writeMem(0x17c1, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xffda);
        EXPECT(gbc.pc(), 0x17c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 0393
        gbc.setState(0x7f7a, 0x2169, 0xca90, 0xa13c, 0x283, 0xafaf, 0x1, 0x0);
        gbc.writeMem(0x7f7a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x2169);
        EXPECT(gbc.pc(), 0x7f7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 0394
        gbc.setState(0xb157, 0xc7f6, 0xaba0, 0x55b5, 0x5775, 0x4301, 0x1, 0x1);
        gbc.writeMem(0xb157, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xc7f6);
        EXPECT(gbc.pc(), 0xb158);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb157), 0x40);
        // 40 0395
        gbc.setState(0x3447, 0x171b, 0xccb0, 0x1772, 0xee29, 0x60b6, 0x0, 0x1);
        gbc.writeMem(0x3447, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x171b);
        EXPECT(gbc.pc(), 0x3448);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0396
        gbc.setState(0x2940, 0x4f89, 0xf2f0, 0x79a8, 0x9d04, 0xfa4e, 0x0, 0x1);
        gbc.writeMem(0x2940, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x4f89);
        EXPECT(gbc.pc(), 0x2941);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 0397
        gbc.setState(0x82e6, 0x590a, 0x21e0, 0x656e, 0x84f0, 0x12e, 0x0, 0x1);
        gbc.writeMem(0x82e6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x590a);
        EXPECT(gbc.pc(), 0x82e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82e6), 0x40);
        // 40 0399
        gbc.setState(0x975, 0x8193, 0x9e90, 0x58cc, 0xdb38, 0xf856, 0x1, 0x0);
        gbc.writeMem(0x975, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8193);
        EXPECT(gbc.pc(), 0x976);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 039A
        gbc.setState(0x5ea, 0xbe2d, 0xfae0, 0x4239, 0x988e, 0x3d2e, 0x0, 0x0);
        gbc.writeMem(0x5ea, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xbe2d);
        EXPECT(gbc.pc(), 0x5eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 039B
        gbc.setState(0x4410, 0x9dd6, 0xa510, 0xe14c, 0xc2f1, 0xcc24, 0x0, 0x0);
        gbc.writeMem(0x4410, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x9dd6);
        EXPECT(gbc.pc(), 0x4411);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 039C
        gbc.setState(0xb4da, 0xd82f, 0x8ef0, 0xdd8a, 0xb6c7, 0x8388, 0x0, 0x1);
        gbc.writeMem(0xb4da, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xd82f);
        EXPECT(gbc.pc(), 0xb4db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4da), 0x40);
        // 40 039E
        gbc.setState(0xb525, 0xb482, 0xac50, 0x9146, 0x3930, 0x3ced, 0x1, 0x0);
        gbc.writeMem(0xb525, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xb482);
        EXPECT(gbc.pc(), 0xb526);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb525), 0x40);
        // 40 039F
        gbc.setState(0x612c, 0x4f81, 0xbcd0, 0x78d8, 0x7eff, 0x33e9, 0x0, 0x1);
        gbc.writeMem(0x612c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x4f81);
        EXPECT(gbc.pc(), 0x612d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 03A0
        gbc.setState(0xc469, 0xe0af, 0x68a0, 0xca7e, 0xde30, 0xb6e6, 0x1, 0x0);
        gbc.writeMem(0xc469, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xe0af);
        EXPECT(gbc.pc(), 0xc46a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc469), 0x40);
        // 40 03A1
        gbc.setState(0xd473, 0x7827, 0xd840, 0xdfab, 0x2843, 0x5fc4, 0x0, 0x1);
        gbc.writeMem(0xd473, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x7827);
        EXPECT(gbc.pc(), 0xd474);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd473), 0x40);
        // 40 03A2
        gbc.setState(0xcf42, 0xe49d, 0xf4e0, 0xb58e, 0xf1bc, 0xd68b, 0x1, 0x0);
        gbc.writeMem(0xcf42, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xe49d);
        EXPECT(gbc.pc(), 0xcf43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf42), 0x40);
        // 40 03A3
        gbc.setState(0xddc5, 0x83c6, 0xd030, 0x49bf, 0x6d0d, 0x6b70, 0x1, 0x0);
        gbc.writeMem(0xddc5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x83c6);
        EXPECT(gbc.pc(), 0xddc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddc5), 0x40);
        // 40 03A4
        gbc.setState(0x9879, 0x682f, 0xf5d0, 0x7eb2, 0xc9e9, 0xdc96, 0x0, 0x1);
        gbc.writeMem(0x9879, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x682f);
        EXPECT(gbc.pc(), 0x987a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9879), 0x40);
        // 40 03A5
        gbc.setState(0x62a2, 0xb24d, 0xb930, 0xaab, 0xc26e, 0x2b00, 0x0, 0x0);
        gbc.writeMem(0x62a2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xb24d);
        EXPECT(gbc.pc(), 0x62a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 03A6
        gbc.setState(0xb1cd, 0xb40b, 0xdda0, 0xb711, 0x61a5, 0xeaa9, 0x0, 0x0);
        gbc.writeMem(0xb1cd, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xb40b);
        EXPECT(gbc.pc(), 0xb1ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1cd), 0x40);
        // 40 03A7
        gbc.setState(0x7f5e, 0xa7ce, 0xac90, 0x44c2, 0x6eed, 0xee8a, 0x0, 0x0);
        gbc.writeMem(0x7f5e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xa7ce);
        EXPECT(gbc.pc(), 0x7f5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 03A8
        gbc.setState(0x5fc5, 0x9fe3, 0x3800, 0xb13b, 0xc324, 0x9d83, 0x0, 0x1);
        gbc.writeMem(0x5fc5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x9fe3);
        EXPECT(gbc.pc(), 0x5fc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 03A9
        gbc.setState(0xaed0, 0x6b0a, 0xd6f0, 0x9d6e, 0x2692, 0x3b4c, 0x0, 0x0);
        gbc.writeMem(0xaed0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x6b0a);
        EXPECT(gbc.pc(), 0xaed1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaed0), 0x40);
        // 40 03AA
        gbc.setState(0x6db7, 0x5bcc, 0x7d80, 0xa5fa, 0x2076, 0xfe6b, 0x1, 0x0);
        gbc.writeMem(0x6db7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x5bcc);
        EXPECT(gbc.pc(), 0x6db8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 03AC
        gbc.setState(0x1f, 0x5cb5, 0xf630, 0xd732, 0xda6a, 0xbb38, 0x1, 0x0);
        gbc.writeMem(0x1f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x5cb5);
        EXPECT(gbc.pc(), 0x20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 03AD
        gbc.setState(0x51cb, 0xaaea, 0x47f0, 0xf665, 0xc436, 0x4e9, 0x0, 0x1);
        gbc.writeMem(0x51cb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xaaea);
        EXPECT(gbc.pc(), 0x51cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 03AE
        gbc.setState(0x20c3, 0x225a, 0x2560, 0x3bed, 0xe413, 0x2f62, 0x1, 0x0);
        gbc.writeMem(0x20c3, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x225a);
        EXPECT(gbc.pc(), 0x20c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 03AF
        gbc.setState(0xd0a6, 0x724e, 0xfea0, 0xd69e, 0xc7b2, 0x60cf, 0x1, 0x0);
        gbc.writeMem(0xd0a6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x724e);
        EXPECT(gbc.pc(), 0xd0a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0a6), 0x40);
        // 40 03B0
        gbc.setState(0x98c7, 0x86a6, 0x3a10, 0x670c, 0xa176, 0xa07d, 0x0, 0x1);
        gbc.writeMem(0x98c7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x86a6);
        EXPECT(gbc.pc(), 0x98c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98c7), 0x40);
        // 40 03B1
        gbc.setState(0x940b, 0x8623, 0x4ca0, 0x80ec, 0xb230, 0x9db, 0x1, 0x0);
        gbc.writeMem(0x940b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x8623);
        EXPECT(gbc.pc(), 0x940c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x940b), 0x40);
        // 40 03B2
        gbc.setState(0x4804, 0xc59, 0x3a60, 0x4e1f, 0x6604, 0xbc2f, 0x1, 0x0);
        gbc.writeMem(0x4804, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xc59);
        EXPECT(gbc.pc(), 0x4805);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 03B3
        gbc.setState(0x826f, 0x33c4, 0xf5e0, 0x52d9, 0xd179, 0xa245, 0x1, 0x0);
        gbc.writeMem(0x826f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x33c4);
        EXPECT(gbc.pc(), 0x8270);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x826f), 0x40);
        // 40 03B4
        gbc.setState(0x7ed8, 0xe653, 0x7160, 0xa422, 0x9700, 0xfc05, 0x0, 0x1);
        gbc.writeMem(0x7ed8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xe653);
        EXPECT(gbc.pc(), 0x7ed9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 03B5
        gbc.setState(0x7128, 0x9af, 0x8c80, 0x6a8c, 0xebda, 0x7389, 0x1, 0x0);
        gbc.writeMem(0x7128, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x9af);
        EXPECT(gbc.pc(), 0x7129);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 03B6
        gbc.setState(0xa3e5, 0x47b0, 0xf300, 0xee8b, 0x34f7, 0x7c7c, 0x1, 0x1);
        gbc.writeMem(0xa3e5, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x47b0);
        EXPECT(gbc.pc(), 0xa3e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3e5), 0x40);
        // 40 03B7
        gbc.setState(0xe115, 0x9b1a, 0x5660, 0xbaf7, 0x719a, 0xdf9f, 0x1, 0x0);
        gbc.writeMem(0xe115, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x9b1a);
        EXPECT(gbc.pc(), 0xe116);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe115), 0x40);
        // 40 03B8
        gbc.setState(0x3e61, 0x5b8f, 0x6380, 0x9559, 0x1028, 0x107d, 0x1, 0x0);
        gbc.writeMem(0x3e61, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x5b8f);
        EXPECT(gbc.pc(), 0x3e62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 03B9
        gbc.setState(0xae3b, 0xbdcc, 0x30, 0x327c, 0x8c82, 0x61b6, 0x1, 0x0);
        gbc.writeMem(0xae3b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xbdcc);
        EXPECT(gbc.pc(), 0xae3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae3b), 0x40);
        // 40 03BA
        gbc.setState(0xeb6c, 0xf575, 0xe940, 0x350b, 0x7aed, 0xbf61, 0x1, 0x0);
        gbc.writeMem(0xeb6c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xf575);
        EXPECT(gbc.pc(), 0xeb6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb6c), 0x40);
        // 40 03BB
        gbc.setState(0x3b9d, 0x7105, 0x5830, 0x51d2, 0xd072, 0xcbfd, 0x1, 0x0);
        gbc.writeMem(0x3b9d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x7105);
        EXPECT(gbc.pc(), 0x3b9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 03BC
        gbc.setState(0x462, 0xf3c3, 0x2770, 0x36c4, 0x9aa7, 0x6eb5, 0x1, 0x1);
        gbc.writeMem(0x462, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xf3c3);
        EXPECT(gbc.pc(), 0x463);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 03BD
        gbc.setState(0xc3f3, 0xbc4d, 0xa3a0, 0x61fa, 0x9e3b, 0xab8e, 0x1, 0x0);
        gbc.writeMem(0xc3f3, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xbc4d);
        EXPECT(gbc.pc(), 0xc3f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3f3), 0x40);
        // 40 03BE
        gbc.setState(0x79b3, 0x6c3c, 0x4fd0, 0x3f9f, 0xb63f, 0xd5c1, 0x1, 0x0);
        gbc.writeMem(0x79b3, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x6c3c);
        EXPECT(gbc.pc(), 0x79b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 03BF
        gbc.setState(0x6b30, 0x5998, 0xa550, 0x2e69, 0x8a79, 0x11ff, 0x1, 0x1);
        gbc.writeMem(0x6b30, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x5998);
        EXPECT(gbc.pc(), 0x6b31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 03C0
        gbc.setState(0x437, 0xec54, 0xbc10, 0x29f5, 0x7eb4, 0xb077, 0x0, 0x0);
        gbc.writeMem(0x437, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xec54);
        EXPECT(gbc.pc(), 0x438);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 03C1
        gbc.setState(0x8dcb, 0x26ac, 0x99d0, 0x4987, 0xc2d4, 0xd0ed, 0x1, 0x1);
        gbc.writeMem(0x8dcb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x26ac);
        EXPECT(gbc.pc(), 0x8dcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dcb), 0x40);
        // 40 03C2
        gbc.setState(0x86df, 0x244b, 0x9b0, 0x6f93, 0x3c29, 0x2633, 0x0, 0x1);
        gbc.writeMem(0x86df, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x244b);
        EXPECT(gbc.pc(), 0x86e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86df), 0x40);
        // 40 03C4
        gbc.setState(0x3333, 0x3881, 0x8330, 0xb1fd, 0xf39a, 0xdfbf, 0x0, 0x0);
        gbc.writeMem(0x3333, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x3881);
        EXPECT(gbc.pc(), 0x3334);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 03C5
        gbc.setState(0x7bb6, 0x4883, 0x2a20, 0xb400, 0xad7a, 0xcf8, 0x0, 0x1);
        gbc.writeMem(0x7bb6, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x4883);
        EXPECT(gbc.pc(), 0x7bb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 03C6
        gbc.setState(0x9413, 0xece, 0x7a80, 0xeda9, 0x36ac, 0x3b9f, 0x1, 0x1);
        gbc.writeMem(0x9413, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xece);
        EXPECT(gbc.pc(), 0x9414);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9413), 0x40);
        // 40 03C7
        gbc.setState(0xd0db, 0xc25b, 0xacc0, 0x8647, 0x3ebb, 0x71be, 0x1, 0x1);
        gbc.writeMem(0xd0db, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xc25b);
        EXPECT(gbc.pc(), 0xd0dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0db), 0x40);
        // 40 03C8
        gbc.setState(0xadc0, 0x3109, 0x8330, 0x6c77, 0xbf7a, 0x421f, 0x0, 0x1);
        gbc.writeMem(0xadc0, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x3109);
        EXPECT(gbc.pc(), 0xadc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadc0), 0x40);
        // 40 03C9
        gbc.setState(0x8893, 0xb276, 0x2f10, 0xce5d, 0xc2d8, 0x2679, 0x1, 0x1);
        gbc.writeMem(0x8893, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xb276);
        EXPECT(gbc.pc(), 0x8894);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8893), 0x40);
        // 40 03CA
        gbc.setState(0xdfb7, 0x4be7, 0x4e70, 0xa04, 0xb395, 0x7123, 0x1, 0x0);
        gbc.writeMem(0xdfb7, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x4be7);
        EXPECT(gbc.pc(), 0xdfb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfb7), 0x40);
        // 40 03CB
        gbc.setState(0x8688, 0x48c4, 0x8f70, 0x98a4, 0x9952, 0x7ec3, 0x0, 0x1);
        gbc.writeMem(0x8688, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x48c4);
        EXPECT(gbc.pc(), 0x8689);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8688), 0x40);
        // 40 03CC
        gbc.setState(0x727c, 0xb35, 0x2d20, 0x6884, 0x42be, 0x3dfa, 0x1, 0x0);
        gbc.writeMem(0x727c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xb35);
        EXPECT(gbc.pc(), 0x727d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 03CD
        gbc.setState(0x4065, 0x9184, 0x6fb0, 0x546d, 0xc359, 0xf2a4, 0x1, 0x0);
        gbc.writeMem(0x4065, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x9184);
        EXPECT(gbc.pc(), 0x4066);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 03CE
        gbc.setState(0x7a01, 0x28ef, 0xab80, 0xe7b5, 0xfc4e, 0x27df, 0x0, 0x0);
        gbc.writeMem(0x7a01, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x28ef);
        EXPECT(gbc.pc(), 0x7a02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 03CF
        gbc.setState(0xcef, 0xd78d, 0xfe30, 0xde35, 0xf07f, 0xab2a, 0x1, 0x0);
        gbc.writeMem(0xcef, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xd78d);
        EXPECT(gbc.pc(), 0xcf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 03D0
        gbc.setState(0x2e4c, 0xe1d3, 0xe230, 0x9a8e, 0x8fff, 0x8564, 0x1, 0x0);
        gbc.writeMem(0x2e4c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xe1d3);
        EXPECT(gbc.pc(), 0x2e4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 03D1
        gbc.setState(0x149e, 0x94f3, 0x6ae0, 0x258e, 0x740a, 0xc30b, 0x0, 0x0);
        gbc.writeMem(0x149e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x94f3);
        EXPECT(gbc.pc(), 0x149f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 03D2
        gbc.setState(0xd568, 0xeee7, 0xfe50, 0xe33b, 0x560a, 0x7e32, 0x0, 0x0);
        gbc.writeMem(0xd568, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xeee7);
        EXPECT(gbc.pc(), 0xd569);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd568), 0x40);
        // 40 03D3
        gbc.setState(0x709f, 0x93d3, 0x330, 0x6808, 0x830d, 0x508c, 0x1, 0x1);
        gbc.writeMem(0x709f, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x93d3);
        EXPECT(gbc.pc(), 0x70a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 03D4
        gbc.setState(0x9d89, 0xbe0f, 0xfe20, 0x3526, 0xa23a, 0xaa52, 0x1, 0x1);
        gbc.writeMem(0x9d89, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xbe0f);
        EXPECT(gbc.pc(), 0x9d8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d89), 0x40);
        // 40 03D5
        gbc.setState(0x29e3, 0xc1f0, 0x5ce0, 0x8132, 0x35dd, 0x199a, 0x1, 0x1);
        gbc.writeMem(0x29e3, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xc1f0);
        EXPECT(gbc.pc(), 0x29e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 03D6
        gbc.setState(0x53ef, 0xf01a, 0x3dc0, 0x67ab, 0x6334, 0xa235, 0x1, 0x1);
        gbc.writeMem(0x53ef, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xf01a);
        EXPECT(gbc.pc(), 0x53f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 03D7
        gbc.setState(0x3b5d, 0x8229, 0xdbc0, 0x6b9c, 0x2f64, 0x2127, 0x0, 0x0);
        gbc.writeMem(0x3b5d, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x8229);
        EXPECT(gbc.pc(), 0x3b5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 03D8
        gbc.setState(0xb149, 0x4be4, 0xaef0, 0xf03b, 0x4143, 0xa69, 0x1, 0x1);
        gbc.writeMem(0xb149, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x4be4);
        EXPECT(gbc.pc(), 0xb14a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb149), 0x40);
        // 40 03D9
        gbc.setState(0x3ef9, 0xa243, 0x6cd0, 0x646e, 0xa8ec, 0x1376, 0x1, 0x1);
        gbc.writeMem(0x3ef9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xa243);
        EXPECT(gbc.pc(), 0x3efa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 03DA
        gbc.setState(0x8289, 0xb6dd, 0x8f20, 0x5bc4, 0x46e6, 0xc9f2, 0x0, 0x1);
        gbc.writeMem(0x8289, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xb6dd);
        EXPECT(gbc.pc(), 0x828a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8289), 0x40);
        // 40 03DB
        gbc.setState(0x8824, 0x4346, 0xb2e0, 0xd304, 0x806, 0x4989, 0x0, 0x0);
        gbc.writeMem(0x8824, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x4346);
        EXPECT(gbc.pc(), 0x8825);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8824), 0x40);
        // 40 03DC
        gbc.setState(0x7d22, 0x9e6b, 0x21e0, 0x2736, 0x887e, 0xfc74, 0x0, 0x0);
        gbc.writeMem(0x7d22, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x9e6b);
        EXPECT(gbc.pc(), 0x7d23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 03DD
        gbc.setState(0xe502, 0x1f2a, 0x8010, 0x12a4, 0x9e01, 0x9db, 0x0, 0x1);
        gbc.writeMem(0xe502, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x1f2a);
        EXPECT(gbc.pc(), 0xe503);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe502), 0x40);
        // 40 03DE
        gbc.setState(0x7074, 0x6b6f, 0x4f20, 0x7d3, 0xd10e, 0xdabf, 0x1, 0x1);
        gbc.writeMem(0x7074, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x6b6f);
        EXPECT(gbc.pc(), 0x7075);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 40 03DF
        gbc.setState(0x8941, 0xf9cc, 0x7750, 0x2c22, 0x9587, 0x66a7, 0x1, 0x0);
        gbc.writeMem(0x8941, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xf9cc);
        EXPECT(gbc.pc(), 0x8942);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8941), 0x40);
        // 40 03E0
        gbc.setState(0xd7d2, 0x165, 0x15b0, 0x2987, 0xe48c, 0x649b, 0x0, 0x0);
        gbc.writeMem(0xd7d2, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x165);
        EXPECT(gbc.pc(), 0xd7d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7d2), 0x40);
        // 40 03E1
        gbc.setState(0x980, 0x1e84, 0x8170, 0xfb3b, 0x3ec3, 0x9c05, 0x0, 0x0);
        gbc.writeMem(0x980, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x1e84);
        EXPECT(gbc.pc(), 0x981);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 03E2
        gbc.setState(0xbf8, 0x2b9, 0x7f0, 0xa7d, 0xe78d, 0xc7bb, 0x0, 0x1);
        gbc.writeMem(0xbf8, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x2b9);
        EXPECT(gbc.pc(), 0xbf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 40 03E3
        gbc.setState(0x162a, 0xd088, 0xb580, 0xdece, 0x5463, 0xcb48, 0x1, 0x1);
        gbc.writeMem(0x162a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xd088);
        EXPECT(gbc.pc(), 0x162b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 40 03E4
        gbc.setState(0xadc1, 0x9fa6, 0x4b90, 0x8e0e, 0x29ff, 0xdd87, 0x0, 0x1);
        gbc.writeMem(0xadc1, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x9fa6);
        EXPECT(gbc.pc(), 0xadc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadc1), 0x40);
        // 40 03E5
        gbc.setState(0x880a, 0x5b37, 0xb180, 0x44d, 0x9f0b, 0xe821, 0x0, 0x1);
        gbc.writeMem(0x880a, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x5b37);
        EXPECT(gbc.pc(), 0x880b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x880a), 0x40);
        // 40 03E6
        gbc.setState(0x14e, 0xb8fa, 0x7710, 0x7c6, 0x2c64, 0x8b26, 0x1, 0x1);
        gbc.writeMem(0x14e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xb8fa);
        EXPECT(gbc.pc(), 0x14f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 40 03E7
        gbc.setState(0x3beb, 0xb684, 0xf70, 0x8a67, 0xc6d3, 0xe9f8, 0x0, 0x0);
        gbc.writeMem(0x3beb, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xb684);
        EXPECT(gbc.pc(), 0x3bec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
    }
}
#endif
