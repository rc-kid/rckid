    TEST(gbcemu, opcode_cb_31) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 31 0000
        gbc.setState(0x2144, 0x5490, 0x1830, 0xd1bb, 0xc527, 0x145, 0x1, 0x1);
        gbc.writeMem(0x2144, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x5490);
        EXPECT(gbc.pc(), 0x2146);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0001
        gbc.setState(0xec81, 0xf88f, 0x29d0, 0xc4a8, 0xfd67, 0xc136, 0x0, 0x0);
        gbc.writeMem(0xec81, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xf88f);
        EXPECT(gbc.pc(), 0xec83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec81), 0xcb);
        EXPECT(gbc.readMem(0xec82), 0x31);
        // CB 31 0002
        gbc.setState(0x3cbb, 0x7f92, 0x94b0, 0x8caa, 0xe832, 0x3af6, 0x1, 0x1);
        gbc.writeMem(0x3cbb, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x7f92);
        EXPECT(gbc.pc(), 0x3cbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0003
        gbc.setState(0x4937, 0xdd86, 0xe680, 0xc0b9, 0xdd94, 0x1adf, 0x1, 0x0);
        gbc.writeMem(0x4937, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xdd86);
        EXPECT(gbc.pc(), 0x4939);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0004
        gbc.setState(0xbd98, 0x123f, 0xb2b0, 0xb25f, 0x5eef, 0xae3f, 0x1, 0x1);
        gbc.writeMem(0xbd98, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x123f);
        EXPECT(gbc.pc(), 0xbd9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd98), 0xcb);
        EXPECT(gbc.readMem(0xbd99), 0x31);
        // CB 31 0005
        gbc.setState(0x6936, 0x92d4, 0x2d50, 0x4e17, 0xab1e, 0x6cc0, 0x0, 0x0);
        gbc.writeMem(0x6936, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x92d4);
        EXPECT(gbc.pc(), 0x6938);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0006
        gbc.setState(0x908c, 0x868d, 0xfc90, 0xee6, 0x5221, 0xff44, 0x1, 0x1);
        gbc.writeMem(0x908c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x868d);
        EXPECT(gbc.pc(), 0x908e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x908c), 0xcb);
        EXPECT(gbc.readMem(0x908d), 0x31);
        // CB 31 0007
        gbc.setState(0xb406, 0x4d6d, 0x7d50, 0xb3d7, 0x9adf, 0x75c6, 0x0, 0x1);
        gbc.writeMem(0xb406, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x4d6d);
        EXPECT(gbc.pc(), 0xb408);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb406), 0xcb);
        EXPECT(gbc.readMem(0xb407), 0x31);
        // CB 31 0008
        gbc.setState(0x6b5, 0x2888, 0xa010, 0xc446, 0x227, 0xd9a, 0x0, 0x0);
        gbc.writeMem(0x6b5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x2888);
        EXPECT(gbc.pc(), 0x6b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0009
        gbc.setState(0x2bfa, 0x1485, 0x13d0, 0xecc7, 0xd178, 0x78e4, 0x0, 0x1);
        gbc.writeMem(0x2bfa, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x1485);
        EXPECT(gbc.pc(), 0x2bfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 000A
        gbc.setState(0x4d8a, 0x43f7, 0x4a40, 0xe443, 0x4394, 0xc6af, 0x1, 0x0);
        gbc.writeMem(0x4d8a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x43f7);
        EXPECT(gbc.pc(), 0x4d8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 000B
        gbc.setState(0xcb7e, 0xb739, 0x15a0, 0x20a6, 0xe6a2, 0x85db, 0x0, 0x1);
        gbc.writeMem(0xcb7e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xb739);
        EXPECT(gbc.pc(), 0xcb80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb7e), 0xcb);
        EXPECT(gbc.readMem(0xcb7f), 0x31);
        // CB 31 000C
        gbc.setState(0xd37e, 0xae82, 0xd9a0, 0xc559, 0x8352, 0x8684, 0x1, 0x1);
        gbc.writeMem(0xd37e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xae82);
        EXPECT(gbc.pc(), 0xd380);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd37e), 0xcb);
        EXPECT(gbc.readMem(0xd37f), 0x31);
        // CB 31 000D
        gbc.setState(0x47b0, 0x1878, 0xf250, 0xc927, 0x778e, 0x3108, 0x0, 0x0);
        gbc.writeMem(0x47b0, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x1878);
        EXPECT(gbc.pc(), 0x47b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 000E
        gbc.setState(0xcf3, 0x3baf, 0x3a60, 0x9f10, 0xf82, 0x40fd, 0x0, 0x0);
        gbc.writeMem(0xcf3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x3baf);
        EXPECT(gbc.pc(), 0xcf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 000F
        gbc.setState(0xd247, 0x3692, 0x51f0, 0x2c74, 0x9bb1, 0xbc9, 0x1, 0x0);
        gbc.writeMem(0xd247, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x3692);
        EXPECT(gbc.pc(), 0xd249);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd247), 0xcb);
        EXPECT(gbc.readMem(0xd248), 0x31);
        // CB 31 0010
        gbc.setState(0x99ee, 0x86f9, 0xea70, 0x6462, 0x6b32, 0xce58, 0x0, 0x1);
        gbc.writeMem(0x99ee, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x86f9);
        EXPECT(gbc.pc(), 0x99f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99ee), 0xcb);
        EXPECT(gbc.readMem(0x99ef), 0x31);
        // CB 31 0012
        gbc.setState(0x7dda, 0x990c, 0x5da0, 0x55b1, 0xa86d, 0xffbd, 0x0, 0x0);
        gbc.writeMem(0x7dda, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x990c);
        EXPECT(gbc.pc(), 0x7ddc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0014
        gbc.setState(0xd253, 0xec82, 0x3010, 0x740a, 0xd583, 0x3692, 0x1, 0x1);
        gbc.writeMem(0xd253, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xec82);
        EXPECT(gbc.pc(), 0xd255);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd253), 0xcb);
        EXPECT(gbc.readMem(0xd254), 0x31);
        // CB 31 0015
        gbc.setState(0x2c81, 0x477, 0xa8e0, 0x23e0, 0xc702, 0x7f0d, 0x0, 0x0);
        gbc.writeMem(0x2c81, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x477);
        EXPECT(gbc.pc(), 0x2c83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0016
        gbc.setState(0x7e82, 0xcefd, 0x6240, 0x9d83, 0xcba0, 0x877c, 0x1, 0x1);
        gbc.writeMem(0x7e82, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xcefd);
        EXPECT(gbc.pc(), 0x7e84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0017
        gbc.setState(0xeaf0, 0x9554, 0xe110, 0x9e1c, 0xc074, 0x3ec7, 0x0, 0x1);
        gbc.writeMem(0xeaf0, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x9554);
        EXPECT(gbc.pc(), 0xeaf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaf0), 0xcb);
        EXPECT(gbc.readMem(0xeaf1), 0x31);
        // CB 31 0018
        gbc.setState(0x4080, 0x6fef, 0x4c50, 0xfbd3, 0x4ce2, 0x36e5, 0x0, 0x0);
        gbc.writeMem(0x4080, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x6fef);
        EXPECT(gbc.pc(), 0x4082);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0019
        gbc.setState(0xe68d, 0xff3, 0x68b0, 0x9bcd, 0xb896, 0xdd02, 0x0, 0x0);
        gbc.writeMem(0xe68d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xff3);
        EXPECT(gbc.pc(), 0xe68f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe68d), 0xcb);
        EXPECT(gbc.readMem(0xe68e), 0x31);
        // CB 31 001A
        gbc.setState(0xab2f, 0x68ff, 0x7590, 0x593f, 0xee00, 0x481e, 0x1, 0x0);
        gbc.writeMem(0xab2f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x68ff);
        EXPECT(gbc.pc(), 0xab31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab2f), 0xcb);
        EXPECT(gbc.readMem(0xab30), 0x31);
        // CB 31 001C
        gbc.setState(0x43c3, 0x7316, 0xce0, 0x1813, 0x70a1, 0x8f68, 0x0, 0x1);
        gbc.writeMem(0x43c3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x7316);
        EXPECT(gbc.pc(), 0x43c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 001D
        gbc.setState(0xd8fb, 0xf176, 0x6d20, 0x36f9, 0xa7bf, 0xe791, 0x0, 0x0);
        gbc.writeMem(0xd8fb, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xf176);
        EXPECT(gbc.pc(), 0xd8fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8fb), 0xcb);
        EXPECT(gbc.readMem(0xd8fc), 0x31);
        // CB 31 001E
        gbc.setState(0xa3c9, 0xd0db, 0x1e10, 0x2eb, 0x30d0, 0xf2b5, 0x0, 0x0);
        gbc.writeMem(0xa3c9, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xd0db);
        EXPECT(gbc.pc(), 0xa3cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3c9), 0xcb);
        EXPECT(gbc.readMem(0xa3ca), 0x31);
        // CB 31 001F
        gbc.setState(0x4851, 0x2b36, 0x4000, 0xac99, 0xd2a7, 0x358c, 0x0, 0x0);
        gbc.writeMem(0x4851, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x2b36);
        EXPECT(gbc.pc(), 0x4853);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0020
        gbc.setState(0x947f, 0x10c4, 0x4f50, 0x137a, 0x5649, 0x94, 0x1, 0x0);
        gbc.writeMem(0x947f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x10c4);
        EXPECT(gbc.pc(), 0x9481);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x947f), 0xcb);
        EXPECT(gbc.readMem(0x9480), 0x31);
        // CB 31 0021
        gbc.setState(0x5217, 0x86e0, 0x3ee0, 0xe98f, 0x3e65, 0x79d6, 0x0, 0x0);
        gbc.writeMem(0x5217, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x86e0);
        EXPECT(gbc.pc(), 0x5219);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0022
        gbc.setState(0x6f4f, 0x84c, 0x6440, 0xef38, 0xcdb1, 0x7a0b, 0x0, 0x0);
        gbc.writeMem(0x6f4f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x84c);
        EXPECT(gbc.pc(), 0x6f51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0024
        gbc.setState(0x5f6e, 0x52c6, 0xf310, 0x9d24, 0xeb5, 0x458e, 0x0, 0x0);
        gbc.writeMem(0x5f6e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x52c6);
        EXPECT(gbc.pc(), 0x5f70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0025
        gbc.setState(0xa80, 0xdf6d, 0xf520, 0xb9ad, 0xef79, 0xb007, 0x1, 0x0);
        gbc.writeMem(0xa80, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xdf6d);
        EXPECT(gbc.pc(), 0xa82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0026
        gbc.setState(0x7d04, 0xacd8, 0x8cb0, 0xae83, 0x311b, 0x3412, 0x0, 0x1);
        gbc.writeMem(0x7d04, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xacd8);
        EXPECT(gbc.pc(), 0x7d06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0027
        gbc.setState(0x213, 0xdfde, 0x6850, 0x27f9, 0xbec9, 0x66bb, 0x1, 0x1);
        gbc.writeMem(0x213, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xdfde);
        EXPECT(gbc.pc(), 0x215);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0028
        gbc.setState(0x4cf8, 0x7758, 0xcc20, 0x5e86, 0xa48f, 0xc0a4, 0x1, 0x1);
        gbc.writeMem(0x4cf8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x7758);
        EXPECT(gbc.pc(), 0x4cfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0029
        gbc.setState(0xe4cd, 0xd080, 0x2800, 0xc228, 0x7397, 0xdfae, 0x0, 0x0);
        gbc.writeMem(0xe4cd, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xd080);
        EXPECT(gbc.pc(), 0xe4cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4cd), 0xcb);
        EXPECT(gbc.readMem(0xe4ce), 0x31);
        // CB 31 002A
        gbc.setState(0xe9d8, 0x8a38, 0x7ee0, 0x7f92, 0x7140, 0x220b, 0x1, 0x1);
        gbc.writeMem(0xe9d8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x8a38);
        EXPECT(gbc.pc(), 0xe9da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9d8), 0xcb);
        EXPECT(gbc.readMem(0xe9d9), 0x31);
        // CB 31 002B
        gbc.setState(0xe593, 0x8580, 0x34c0, 0x6688, 0x5e35, 0xadf9, 0x0, 0x0);
        gbc.writeMem(0xe593, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x8580);
        EXPECT(gbc.pc(), 0xe595);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe593), 0xcb);
        EXPECT(gbc.readMem(0xe594), 0x31);
        // CB 31 002C
        gbc.setState(0x2a2c, 0x361e, 0x2000, 0xa368, 0xf6ee, 0xb9f5, 0x0, 0x1);
        gbc.writeMem(0x2a2c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x361e);
        EXPECT(gbc.pc(), 0x2a2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 002D
        gbc.setState(0x7f22, 0xcd9d, 0x9d90, 0xe9a1, 0xb0a1, 0x63a3, 0x0, 0x0);
        gbc.writeMem(0x7f22, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xcd9d);
        EXPECT(gbc.pc(), 0x7f24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 002E
        gbc.setState(0xeeab, 0x6712, 0xd260, 0x9a, 0x7cc2, 0xefce, 0x0, 0x1);
        gbc.writeMem(0xeeab, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x6712);
        EXPECT(gbc.pc(), 0xeead);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeeab), 0xcb);
        EXPECT(gbc.readMem(0xeeac), 0x31);
        // CB 31 002F
        gbc.setState(0x2b1b, 0x1659, 0xa1e0, 0xed17, 0xe92a, 0x3dc5, 0x1, 0x0);
        gbc.writeMem(0x2b1b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x1659);
        EXPECT(gbc.pc(), 0x2b1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0032
        gbc.setState(0xa09f, 0x8e13, 0x16e0, 0x6157, 0x90e1, 0xde24, 0x0, 0x0);
        gbc.writeMem(0xa09f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8e13);
        EXPECT(gbc.pc(), 0xa0a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa09f), 0xcb);
        EXPECT(gbc.readMem(0xa0a0), 0x31);
        // CB 31 0033
        gbc.setState(0xb508, 0xf01f, 0xf060, 0x7e6c, 0x6048, 0x8e2b, 0x1, 0x0);
        gbc.writeMem(0xb508, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xf01f);
        EXPECT(gbc.pc(), 0xb50a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb508), 0xcb);
        EXPECT(gbc.readMem(0xb509), 0x31);
        // CB 31 0034
        gbc.setState(0x9554, 0xbb06, 0x15a0, 0x7a50, 0xf74c, 0x4e41, 0x1, 0x1);
        gbc.writeMem(0x9554, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xbb06);
        EXPECT(gbc.pc(), 0x9556);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9554), 0xcb);
        EXPECT(gbc.readMem(0x9555), 0x31);
        // CB 31 0035
        gbc.setState(0x3436, 0xded7, 0xd300, 0x5789, 0x35e3, 0xd885, 0x0, 0x1);
        gbc.writeMem(0x3436, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xded7);
        EXPECT(gbc.pc(), 0x3438);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0036
        gbc.setState(0xd4e2, 0x2758, 0x8dd0, 0x36fa, 0x1a60, 0xf1e0, 0x0, 0x0);
        gbc.writeMem(0xd4e2, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x2758);
        EXPECT(gbc.pc(), 0xd4e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4e2), 0xcb);
        EXPECT(gbc.readMem(0xd4e3), 0x31);
        // CB 31 0037
        gbc.setState(0xb418, 0xb01b, 0x2b30, 0x141d, 0x2ee9, 0x5fb5, 0x0, 0x1);
        gbc.writeMem(0xb418, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xb01b);
        EXPECT(gbc.pc(), 0xb41a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb418), 0xcb);
        EXPECT(gbc.readMem(0xb419), 0x31);
        // CB 31 0038
        gbc.setState(0x4364, 0x5798, 0x6d70, 0xacd5, 0x8624, 0xa6e5, 0x0, 0x0);
        gbc.writeMem(0x4364, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x5798);
        EXPECT(gbc.pc(), 0x4366);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0039
        gbc.setState(0x483d, 0x1088, 0x9e00, 0x5f10, 0x1d0, 0xb859, 0x0, 0x1);
        gbc.writeMem(0x483d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x1088);
        EXPECT(gbc.pc(), 0x483f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 003B
        gbc.setState(0x17e1, 0x8353, 0xfa70, 0x780c, 0x32a3, 0x6213, 0x0, 0x0);
        gbc.writeMem(0x17e1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x8353);
        EXPECT(gbc.pc(), 0x17e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 003D
        gbc.setState(0x2a3e, 0x4fbc, 0x6240, 0xcb4, 0x31b0, 0x310a, 0x0, 0x1);
        gbc.writeMem(0x2a3e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x4fbc);
        EXPECT(gbc.pc(), 0x2a40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 003E
        gbc.setState(0x4da7, 0x29c1, 0x79c0, 0x1223, 0xad6b, 0xb995, 0x1, 0x1);
        gbc.writeMem(0x4da7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x29c1);
        EXPECT(gbc.pc(), 0x4da9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 003F
        gbc.setState(0x93e3, 0x9f58, 0xcfe0, 0x6180, 0xeea8, 0xe2e8, 0x0, 0x1);
        gbc.writeMem(0x93e3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x9f58);
        EXPECT(gbc.pc(), 0x93e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93e3), 0xcb);
        EXPECT(gbc.readMem(0x93e4), 0x31);
        // CB 31 0040
        gbc.setState(0x37e3, 0xcdbf, 0x64a0, 0x8361, 0xc6ba, 0xa837, 0x1, 0x0);
        gbc.writeMem(0x37e3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xcdbf);
        EXPECT(gbc.pc(), 0x37e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0041
        gbc.setState(0xb087, 0x2dfb, 0x40a0, 0xeca0, 0xe5a2, 0xac94, 0x1, 0x0);
        gbc.writeMem(0xb087, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x2dfb);
        EXPECT(gbc.pc(), 0xb089);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb087), 0xcb);
        EXPECT(gbc.readMem(0xb088), 0x31);
        // CB 31 0042
        gbc.setState(0x3b5, 0x7ab, 0x91d0, 0x912f, 0x1a5e, 0xb3fc, 0x0, 0x1);
        gbc.writeMem(0x3b5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x7ab);
        EXPECT(gbc.pc(), 0x3b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0043
        gbc.setState(0x5558, 0x4b8c, 0x7f60, 0xf8f2, 0x9459, 0x2633, 0x0, 0x1);
        gbc.writeMem(0x5558, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x4b8c);
        EXPECT(gbc.pc(), 0x555a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0044
        gbc.setState(0x75e7, 0x78d0, 0x4fd0, 0xa735, 0xce41, 0x971e, 0x0, 0x1);
        gbc.writeMem(0x75e7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x78d0);
        EXPECT(gbc.pc(), 0x75e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0046
        gbc.setState(0x27e9, 0xd0cc, 0x3fb0, 0xac88, 0xf5a1, 0x3adb, 0x0, 0x0);
        gbc.writeMem(0x27e9, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xd0cc);
        EXPECT(gbc.pc(), 0x27eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0047
        gbc.setState(0x55f, 0xbaf9, 0x6600, 0x4242, 0xc4b, 0xc00f, 0x0, 0x1);
        gbc.writeMem(0x55f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xbaf9);
        EXPECT(gbc.pc(), 0x561);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0048
        gbc.setState(0xa3ad, 0x6aeb, 0x7aa0, 0xf2a8, 0x4ab1, 0x88bf, 0x0, 0x0);
        gbc.writeMem(0xa3ad, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x6aeb);
        EXPECT(gbc.pc(), 0xa3af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3ad), 0xcb);
        EXPECT(gbc.readMem(0xa3ae), 0x31);
        // CB 31 004A
        gbc.setState(0x71a5, 0xec28, 0x1620, 0x4da5, 0xf8f3, 0x8ee9, 0x1, 0x1);
        gbc.writeMem(0x71a5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xec28);
        EXPECT(gbc.pc(), 0x71a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 004B
        gbc.setState(0x8b29, 0x6506, 0x1af0, 0x1683, 0x5000, 0xc1ea, 0x0, 0x1);
        gbc.writeMem(0x8b29, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x6506);
        EXPECT(gbc.pc(), 0x8b2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b29), 0xcb);
        EXPECT(gbc.readMem(0x8b2a), 0x31);
        // CB 31 004C
        gbc.setState(0x82d9, 0x1217, 0x7150, 0xa3ab, 0x17f6, 0x25b0, 0x0, 0x0);
        gbc.writeMem(0x82d9, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x1217);
        EXPECT(gbc.pc(), 0x82db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82d9), 0xcb);
        EXPECT(gbc.readMem(0x82da), 0x31);
        // CB 31 004D
        gbc.setState(0xc2ea, 0x96e6, 0x4430, 0xc98f, 0xfde6, 0x4607, 0x1, 0x1);
        gbc.writeMem(0xc2ea, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x96e6);
        EXPECT(gbc.pc(), 0xc2ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2ea), 0xcb);
        EXPECT(gbc.readMem(0xc2eb), 0x31);
        // CB 31 004E
        gbc.setState(0x8e24, 0x7c6f, 0xc0f0, 0x5478, 0x66bd, 0xfbfe, 0x0, 0x1);
        gbc.writeMem(0x8e24, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x7c6f);
        EXPECT(gbc.pc(), 0x8e26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e24), 0xcb);
        EXPECT(gbc.readMem(0x8e25), 0x31);
        // CB 31 004F
        gbc.setState(0x5ca2, 0x5e9e, 0xfd50, 0x7c5e, 0x1ca0, 0x8fd8, 0x1, 0x0);
        gbc.writeMem(0x5ca2, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5e9e);
        EXPECT(gbc.pc(), 0x5ca4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0050
        gbc.setState(0x1c34, 0x3dac, 0x6030, 0xa5b3, 0xc37b, 0x7bc3, 0x1, 0x0);
        gbc.writeMem(0x1c34, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x3dac);
        EXPECT(gbc.pc(), 0x1c36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0051
        gbc.setState(0x82cf, 0x6f38, 0x8340, 0x6554, 0xcb6f, 0x59ce, 0x0, 0x1);
        gbc.writeMem(0x82cf, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x6f38);
        EXPECT(gbc.pc(), 0x82d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82cf), 0xcb);
        EXPECT(gbc.readMem(0x82d0), 0x31);
        // CB 31 0052
        gbc.setState(0x5db0, 0x60d0, 0x4e90, 0x1951, 0xabe4, 0x5df7, 0x1, 0x0);
        gbc.writeMem(0x5db0, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x60d0);
        EXPECT(gbc.pc(), 0x5db2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0053
        gbc.setState(0xbe6c, 0xf3e7, 0xd330, 0x7bd3, 0x1a09, 0x164f, 0x1, 0x0);
        gbc.writeMem(0xbe6c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xf3e7);
        EXPECT(gbc.pc(), 0xbe6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe6c), 0xcb);
        EXPECT(gbc.readMem(0xbe6d), 0x31);
        // CB 31 0054
        gbc.setState(0x2630, 0x9496, 0x5d70, 0x2eac, 0xaf87, 0x4f72, 0x1, 0x0);
        gbc.writeMem(0x2630, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x9496);
        EXPECT(gbc.pc(), 0x2632);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0057
        gbc.setState(0x512d, 0xa165, 0xfa90, 0x60ad, 0x33b7, 0x42f5, 0x0, 0x0);
        gbc.writeMem(0x512d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xa165);
        EXPECT(gbc.pc(), 0x512f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0058
        gbc.setState(0x7182, 0x5b3a, 0xe620, 0x2a41, 0xde14, 0x1034, 0x1, 0x1);
        gbc.writeMem(0x7182, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x5b3a);
        EXPECT(gbc.pc(), 0x7184);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0059
        gbc.setState(0x1818, 0xd604, 0x51d0, 0x422d, 0x7830, 0x7e81, 0x0, 0x1);
        gbc.writeMem(0x1818, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xd604);
        EXPECT(gbc.pc(), 0x181a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 005A
        gbc.setState(0x15f5, 0x567f, 0x5610, 0x3153, 0x1918, 0xfc60, 0x0, 0x0);
        gbc.writeMem(0x15f5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x567f);
        EXPECT(gbc.pc(), 0x15f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 005B
        gbc.setState(0xb82b, 0xbe53, 0xca80, 0xb489, 0xad34, 0xc53f, 0x0, 0x0);
        gbc.writeMem(0xb82b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xbe53);
        EXPECT(gbc.pc(), 0xb82d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb82b), 0xcb);
        EXPECT(gbc.readMem(0xb82c), 0x31);
        // CB 31 005C
        gbc.setState(0xbe2, 0x3fbe, 0x1190, 0xce78, 0x1f02, 0xf778, 0x0, 0x1);
        gbc.writeMem(0xbe2, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x3fbe);
        EXPECT(gbc.pc(), 0xbe4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 005D
        gbc.setState(0xee3, 0x7655, 0xe7a0, 0xec50, 0xc163, 0xec71, 0x0, 0x1);
        gbc.writeMem(0xee3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x7655);
        EXPECT(gbc.pc(), 0xee5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 005E
        gbc.setState(0xd24c, 0x9de3, 0x7fd0, 0x27d5, 0xf787, 0x17bf, 0x1, 0x1);
        gbc.writeMem(0xd24c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x9de3);
        EXPECT(gbc.pc(), 0xd24e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd24c), 0xcb);
        EXPECT(gbc.readMem(0xd24d), 0x31);
        // CB 31 005F
        gbc.setState(0x4601, 0xe460, 0x20b0, 0xaf9d, 0xe9a6, 0x7dd1, 0x1, 0x0);
        gbc.writeMem(0x4601, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe460);
        EXPECT(gbc.pc(), 0x4603);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0060
        gbc.setState(0x9f60, 0x97ea, 0x11e0, 0x6f87, 0x11e1, 0xc5c0, 0x1, 0x0);
        gbc.writeMem(0x9f60, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x97ea);
        EXPECT(gbc.pc(), 0x9f62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f60), 0xcb);
        EXPECT(gbc.readMem(0x9f61), 0x31);
        // CB 31 0061
        gbc.setState(0x46c8, 0x196c, 0x5fc0, 0x5312, 0x49df, 0xb906, 0x0, 0x0);
        gbc.writeMem(0x46c8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x196c);
        EXPECT(gbc.pc(), 0x46ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0062
        gbc.setState(0xd1bf, 0xdc55, 0x6820, 0x1eb1, 0x8cc6, 0x357, 0x0, 0x1);
        gbc.writeMem(0xd1bf, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xdc55);
        EXPECT(gbc.pc(), 0xd1c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1bf), 0xcb);
        EXPECT(gbc.readMem(0xd1c0), 0x31);
        // CB 31 0063
        gbc.setState(0x1cdc, 0xd4ec, 0xbd90, 0x9480, 0xa2fa, 0x2f57, 0x1, 0x0);
        gbc.writeMem(0x1cdc, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xd4ec);
        EXPECT(gbc.pc(), 0x1cde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0064
        gbc.setState(0x610b, 0x39dd, 0x6840, 0xf8cc, 0x6594, 0x72f1, 0x0, 0x1);
        gbc.writeMem(0x610b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x39dd);
        EXPECT(gbc.pc(), 0x610d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0066
        gbc.setState(0xee2d, 0xc3ae, 0xd3f0, 0xace4, 0x2a80, 0xb2ab, 0x0, 0x1);
        gbc.writeMem(0xee2d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xc3ae);
        EXPECT(gbc.pc(), 0xee2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee2d), 0xcb);
        EXPECT(gbc.readMem(0xee2e), 0x31);
        // CB 31 0067
        gbc.setState(0xe20d, 0xb65e, 0x2280, 0xe62b, 0x5a37, 0x616, 0x0, 0x1);
        gbc.writeMem(0xe20d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xb65e);
        EXPECT(gbc.pc(), 0xe20f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe20d), 0xcb);
        EXPECT(gbc.readMem(0xe20e), 0x31);
        // CB 31 0068
        gbc.setState(0xb079, 0x3334, 0x3040, 0x41cc, 0xed1c, 0xce8d, 0x1, 0x1);
        gbc.writeMem(0xb079, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x3334);
        EXPECT(gbc.pc(), 0xb07b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb079), 0xcb);
        EXPECT(gbc.readMem(0xb07a), 0x31);
        // CB 31 0069
        gbc.setState(0x9982, 0xef76, 0xf70, 0x90bb, 0x1163, 0xb15, 0x1, 0x0);
        gbc.writeMem(0x9982, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xef76);
        EXPECT(gbc.pc(), 0x9984);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9982), 0xcb);
        EXPECT(gbc.readMem(0x9983), 0x31);
        // CB 31 006A
        gbc.setState(0x8acc, 0xf60a, 0x3bc0, 0x3455, 0xbc97, 0x9413, 0x0, 0x0);
        gbc.writeMem(0x8acc, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xf60a);
        EXPECT(gbc.pc(), 0x8ace);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8acc), 0xcb);
        EXPECT(gbc.readMem(0x8acd), 0x31);
        // CB 31 006B
        gbc.setState(0x8edd, 0x9f6a, 0xeff0, 0x17d, 0xb9b3, 0xa70, 0x0, 0x1);
        gbc.writeMem(0x8edd, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x9f6a);
        EXPECT(gbc.pc(), 0x8edf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8edd), 0xcb);
        EXPECT(gbc.readMem(0x8ede), 0x31);
        // CB 31 006C
        gbc.setState(0x5836, 0x251b, 0x7f40, 0xbe2b, 0x4d9a, 0xa322, 0x0, 0x0);
        gbc.writeMem(0x5836, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x251b);
        EXPECT(gbc.pc(), 0x5838);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 006D
        gbc.setState(0x7561, 0xe784, 0xfb70, 0x9531, 0x6d54, 0xa37a, 0x0, 0x0);
        gbc.writeMem(0x7561, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe784);
        EXPECT(gbc.pc(), 0x7563);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 006E
        gbc.setState(0x4b88, 0xf7ed, 0xa110, 0xbf1f, 0x6085, 0x3eca, 0x1, 0x1);
        gbc.writeMem(0x4b88, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xf7ed);
        EXPECT(gbc.pc(), 0x4b8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 006F
        gbc.setState(0x9b2c, 0x2d92, 0xe580, 0xf41a, 0xb1a2, 0xf6e0, 0x1, 0x1);
        gbc.writeMem(0x9b2c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x2d92);
        EXPECT(gbc.pc(), 0x9b2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b2c), 0xcb);
        EXPECT(gbc.readMem(0x9b2d), 0x31);
        // CB 31 0071
        gbc.setState(0x8aae, 0x3c16, 0xbdc0, 0x1c25, 0xb8e6, 0x9147, 0x1, 0x1);
        gbc.writeMem(0x8aae, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x3c16);
        EXPECT(gbc.pc(), 0x8ab0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aae), 0xcb);
        EXPECT(gbc.readMem(0x8aaf), 0x31);
        // CB 31 0072
        gbc.setState(0x6daa, 0xbe33, 0xdde0, 0x8788, 0x1ba8, 0x864b, 0x1, 0x0);
        gbc.writeMem(0x6daa, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xbe33);
        EXPECT(gbc.pc(), 0x6dac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0073
        gbc.setState(0x41, 0x70cc, 0x9330, 0x4a7a, 0x3012, 0x3130, 0x0, 0x0);
        gbc.writeMem(0x41, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x70cc);
        EXPECT(gbc.pc(), 0x43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0074
        gbc.setState(0x45f, 0x3352, 0xf130, 0x4d8, 0xd00, 0xcc7, 0x1, 0x1);
        gbc.writeMem(0x45f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x3352);
        EXPECT(gbc.pc(), 0x461);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0075
        gbc.setState(0x53a4, 0x1184, 0x42f0, 0xf27b, 0x413d, 0x3313, 0x0, 0x1);
        gbc.writeMem(0x53a4, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x1184);
        EXPECT(gbc.pc(), 0x53a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0076
        gbc.setState(0x4171, 0xfb9f, 0x68a0, 0xf480, 0x3f4a, 0xa329, 0x0, 0x1);
        gbc.writeMem(0x4171, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xfb9f);
        EXPECT(gbc.pc(), 0x4173);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0077
        gbc.setState(0xc700, 0x77ed, 0xdc50, 0xa7ee, 0x59d, 0xe53, 0x1, 0x1);
        gbc.writeMem(0xc700, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x77ed);
        EXPECT(gbc.pc(), 0xc702);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc700), 0xcb);
        EXPECT(gbc.readMem(0xc701), 0x31);
        // CB 31 0078
        gbc.setState(0xe921, 0xc1b0, 0x1310, 0xf36b, 0xb1, 0x5ca5, 0x1, 0x1);
        gbc.writeMem(0xe921, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xc1b0);
        EXPECT(gbc.pc(), 0xe923);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe921), 0xcb);
        EXPECT(gbc.readMem(0xe922), 0x31);
        // CB 31 0079
        gbc.setState(0x5bac, 0x45ad, 0x9070, 0x41d5, 0x1ed0, 0x1a9, 0x0, 0x0);
        gbc.writeMem(0x5bac, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x45ad);
        EXPECT(gbc.pc(), 0x5bae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 007A
        gbc.setState(0x3c87, 0xc361, 0x80f0, 0x1e86, 0x3b2d, 0x9cca, 0x1, 0x0);
        gbc.writeMem(0x3c87, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xc361);
        EXPECT(gbc.pc(), 0x3c89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 007B
        gbc.setState(0x829b, 0xdf59, 0x5f10, 0xf5af, 0x7ce7, 0x4c78, 0x1, 0x0);
        gbc.writeMem(0x829b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xdf59);
        EXPECT(gbc.pc(), 0x829d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x829b), 0xcb);
        EXPECT(gbc.readMem(0x829c), 0x31);
        // CB 31 007C
        gbc.setState(0x97bd, 0x6f58, 0xb3c0, 0xbe37, 0xa031, 0x42a6, 0x0, 0x1);
        gbc.writeMem(0x97bd, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x6f58);
        EXPECT(gbc.pc(), 0x97bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97bd), 0xcb);
        EXPECT(gbc.readMem(0x97be), 0x31);
        // CB 31 007D
        gbc.setState(0xb636, 0x7720, 0xbce0, 0x233a, 0xa217, 0xa60d, 0x0, 0x0);
        gbc.writeMem(0xb636, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x7720);
        EXPECT(gbc.pc(), 0xb638);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb636), 0xcb);
        EXPECT(gbc.readMem(0xb637), 0x31);
        // CB 31 007E
        gbc.setState(0x975d, 0xdbee, 0xa440, 0x9a14, 0xe8ac, 0xd9aa, 0x1, 0x0);
        gbc.writeMem(0x975d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xdbee);
        EXPECT(gbc.pc(), 0x975f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x975d), 0xcb);
        EXPECT(gbc.readMem(0x975e), 0x31);
        // CB 31 007F
        gbc.setState(0x6195, 0xc0cc, 0xecb0, 0x2d7a, 0xb502, 0xf851, 0x0, 0x1);
        gbc.writeMem(0x6195, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xc0cc);
        EXPECT(gbc.pc(), 0x6197);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0080
        gbc.setState(0x395f, 0x423c, 0xe210, 0x5341, 0xc051, 0xe635, 0x0, 0x0);
        gbc.writeMem(0x395f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x423c);
        EXPECT(gbc.pc(), 0x3961);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0082
        gbc.setState(0x88, 0x3f8e, 0xe570, 0xb44, 0xfc78, 0x6857, 0x1, 0x0);
        gbc.writeMem(0x88, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x3f8e);
        EXPECT(gbc.pc(), 0x8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0083
        gbc.setState(0x2669, 0xf6c0, 0x6c80, 0x1e5c, 0x8eb5, 0xf751, 0x0, 0x0);
        gbc.writeMem(0x2669, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xf6c0);
        EXPECT(gbc.pc(), 0x266b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0084
        gbc.setState(0xb1a2, 0xec31, 0xa7c0, 0x3ce5, 0xed42, 0xd603, 0x0, 0x1);
        gbc.writeMem(0xb1a2, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xec31);
        EXPECT(gbc.pc(), 0xb1a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1a2), 0xcb);
        EXPECT(gbc.readMem(0xb1a3), 0x31);
        // CB 31 0085
        gbc.setState(0xbdb9, 0x4894, 0xe830, 0x4eab, 0xbde4, 0x3b01, 0x0, 0x1);
        gbc.writeMem(0xbdb9, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x4894);
        EXPECT(gbc.pc(), 0xbdbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdb9), 0xcb);
        EXPECT(gbc.readMem(0xbdba), 0x31);
        // CB 31 0086
        gbc.setState(0x9e26, 0xa7ed, 0x1f0, 0x2d8e, 0x7af5, 0x134c, 0x1, 0x0);
        gbc.writeMem(0x9e26, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xa7ed);
        EXPECT(gbc.pc(), 0x9e28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e26), 0xcb);
        EXPECT(gbc.readMem(0x9e27), 0x31);
        // CB 31 0087
        gbc.setState(0x6d08, 0xf58a, 0x10, 0x4ce8, 0x5a7a, 0xbc95, 0x0, 0x0);
        gbc.writeMem(0x6d08, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xf58a);
        EXPECT(gbc.pc(), 0x6d0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0088
        gbc.setState(0x9cd0, 0xeb66, 0x1c40, 0x5735, 0x9b44, 0xbb77, 0x0, 0x1);
        gbc.writeMem(0x9cd0, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xeb66);
        EXPECT(gbc.pc(), 0x9cd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cd0), 0xcb);
        EXPECT(gbc.readMem(0x9cd1), 0x31);
        // CB 31 0089
        gbc.setState(0xa200, 0x12e5, 0xe480, 0xde4e, 0xc0d0, 0xd8a3, 0x1, 0x0);
        gbc.writeMem(0xa200, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x12e5);
        EXPECT(gbc.pc(), 0xa202);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa200), 0xcb);
        EXPECT(gbc.readMem(0xa201), 0x31);
        // CB 31 008A
        gbc.setState(0x6b4c, 0x2dd1, 0x5e10, 0xd9a2, 0x13e7, 0xf031, 0x0, 0x1);
        gbc.writeMem(0x6b4c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x2dd1);
        EXPECT(gbc.pc(), 0x6b4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 008B
        gbc.setState(0x61a, 0xb504, 0xd2c0, 0x72a5, 0x784d, 0x43ca, 0x0, 0x1);
        gbc.writeMem(0x61a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xb504);
        EXPECT(gbc.pc(), 0x61c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 008C
        gbc.setState(0x76ad, 0xf972, 0x9b30, 0x63a0, 0xd9f5, 0x9547, 0x0, 0x1);
        gbc.writeMem(0x76ad, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xf972);
        EXPECT(gbc.pc(), 0x76af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 008D
        gbc.setState(0x78be, 0x2656, 0x4550, 0xf8d7, 0xdb7e, 0x60e8, 0x1, 0x0);
        gbc.writeMem(0x78be, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x2656);
        EXPECT(gbc.pc(), 0x78c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 008F
        gbc.setState(0xe30f, 0x4d82, 0xb3b0, 0xc967, 0x1b5f, 0xc202, 0x1, 0x0);
        gbc.writeMem(0xe30f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x4d82);
        EXPECT(gbc.pc(), 0xe311);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe30f), 0xcb);
        EXPECT(gbc.readMem(0xe310), 0x31);
        // CB 31 0090
        gbc.setState(0x13c8, 0x281e, 0xecb0, 0x4393, 0x9bf4, 0xb4e0, 0x1, 0x0);
        gbc.writeMem(0x13c8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x281e);
        EXPECT(gbc.pc(), 0x13ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0091
        gbc.setState(0xb070, 0x35c8, 0xf900, 0x5fe, 0x73df, 0xd2de, 0x1, 0x1);
        gbc.writeMem(0xb070, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x35c8);
        EXPECT(gbc.pc(), 0xb072);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb070), 0xcb);
        EXPECT(gbc.readMem(0xb071), 0x31);
        // CB 31 0092
        gbc.setState(0xb84d, 0x79ae, 0xd860, 0xd92a, 0x1f95, 0xcdf8, 0x0, 0x0);
        gbc.writeMem(0xb84d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x79ae);
        EXPECT(gbc.pc(), 0xb84f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb84d), 0xcb);
        EXPECT(gbc.readMem(0xb84e), 0x31);
        // CB 31 0093
        gbc.setState(0x3fcb, 0x1c46, 0x45c0, 0x8560, 0x8ffa, 0xe767, 0x1, 0x1);
        gbc.writeMem(0x3fcb, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x1c46);
        EXPECT(gbc.pc(), 0x3fcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0094
        gbc.setState(0x5e69, 0xd60c, 0x9500, 0x6a8f, 0x9d9d, 0x2834, 0x1, 0x0);
        gbc.writeMem(0x5e69, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xd60c);
        EXPECT(gbc.pc(), 0x5e6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0095
        gbc.setState(0x459d, 0xf2a4, 0x5860, 0xabfc, 0xb70f, 0x6da2, 0x1, 0x1);
        gbc.writeMem(0x459d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xf2a4);
        EXPECT(gbc.pc(), 0x459f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0096
        gbc.setState(0x984d, 0xfaa6, 0xaf20, 0xf58b, 0x1a3f, 0x937b, 0x0, 0x0);
        gbc.writeMem(0x984d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xfaa6);
        EXPECT(gbc.pc(), 0x984f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x984d), 0xcb);
        EXPECT(gbc.readMem(0x984e), 0x31);
        // CB 31 0097
        gbc.setState(0xc2bf, 0x8b8, 0x87e0, 0x32e2, 0x8809, 0x9869, 0x1, 0x0);
        gbc.writeMem(0xc2bf, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x8b8);
        EXPECT(gbc.pc(), 0xc2c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2bf), 0xcb);
        EXPECT(gbc.readMem(0xc2c0), 0x31);
        // CB 31 0098
        gbc.setState(0x334f, 0xae16, 0xcc30, 0xf434, 0x9102, 0xb8d8, 0x0, 0x0);
        gbc.writeMem(0x334f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xae16);
        EXPECT(gbc.pc(), 0x3351);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0099
        gbc.setState(0xe9b7, 0xdf50, 0xbe30, 0x18e5, 0x1326, 0x4ec3, 0x0, 0x1);
        gbc.writeMem(0xe9b7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xdf50);
        EXPECT(gbc.pc(), 0xe9b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9b7), 0xcb);
        EXPECT(gbc.readMem(0xe9b8), 0x31);
        // CB 31 009A
        gbc.setState(0xaba, 0x5d38, 0x5470, 0xdd91, 0xbb2a, 0xda7, 0x1, 0x1);
        gbc.writeMem(0xaba, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x5d38);
        EXPECT(gbc.pc(), 0xabc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 009B
        gbc.setState(0x282, 0x5be1, 0xeda0, 0x575b, 0xb572, 0xaad4, 0x1, 0x1);
        gbc.writeMem(0x282, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x5be1);
        EXPECT(gbc.pc(), 0x284);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 009D
        gbc.setState(0x61fe, 0x12e, 0x9fc0, 0x7acf, 0x7b6f, 0x6fab, 0x0, 0x1);
        gbc.writeMem(0x61fe, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x12e);
        EXPECT(gbc.pc(), 0x6200);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 009E
        gbc.setState(0xec79, 0x75c8, 0xdc10, 0xac73, 0xe334, 0x775f, 0x0, 0x0);
        gbc.writeMem(0xec79, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x75c8);
        EXPECT(gbc.pc(), 0xec7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec79), 0xcb);
        EXPECT(gbc.readMem(0xec7a), 0x31);
        // CB 31 009F
        gbc.setState(0xb369, 0x642f, 0x87c0, 0xfeb6, 0xef2b, 0x35d, 0x1, 0x0);
        gbc.writeMem(0xb369, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x642f);
        EXPECT(gbc.pc(), 0xb36b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb369), 0xcb);
        EXPECT(gbc.readMem(0xb36a), 0x31);
        // CB 31 00A0
        gbc.setState(0xe0ec, 0x4248, 0xbab0, 0xe335, 0x14f9, 0x9fad, 0x0, 0x0);
        gbc.writeMem(0xe0ec, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x4248);
        EXPECT(gbc.pc(), 0xe0ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0ec), 0xcb);
        EXPECT(gbc.readMem(0xe0ed), 0x31);
        // CB 31 00A1
        gbc.setState(0x206d, 0x85bd, 0x4600, 0x8e15, 0x69e1, 0xbc61, 0x0, 0x1);
        gbc.writeMem(0x206d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x85bd);
        EXPECT(gbc.pc(), 0x206f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00A2
        gbc.setState(0xa128, 0xa58c, 0xb3d0, 0x7ea4, 0x66ab, 0x2a73, 0x1, 0x1);
        gbc.writeMem(0xa128, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xa58c);
        EXPECT(gbc.pc(), 0xa12a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa128), 0xcb);
        EXPECT(gbc.readMem(0xa129), 0x31);
        // CB 31 00A3
        gbc.setState(0x3854, 0xd33b, 0xe7a0, 0x67ac, 0xb5dd, 0x457a, 0x1, 0x0);
        gbc.writeMem(0x3854, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xd33b);
        EXPECT(gbc.pc(), 0x3856);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00A4
        gbc.setState(0xaf68, 0x9a16, 0xf790, 0xd35d, 0xabde, 0x85e, 0x0, 0x0);
        gbc.writeMem(0xaf68, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9a16);
        EXPECT(gbc.pc(), 0xaf6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf68), 0xcb);
        EXPECT(gbc.readMem(0xaf69), 0x31);
        // CB 31 00A5
        gbc.setState(0xc963, 0x6e42, 0x4a70, 0xb3c3, 0xf5f, 0x7b39, 0x1, 0x1);
        gbc.writeMem(0xc963, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x6e42);
        EXPECT(gbc.pc(), 0xc965);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc963), 0xcb);
        EXPECT(gbc.readMem(0xc964), 0x31);
        // CB 31 00A6
        gbc.setState(0xc603, 0x7953, 0x7db0, 0x8bf4, 0x7762, 0xbb7d, 0x0, 0x1);
        gbc.writeMem(0xc603, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x7953);
        EXPECT(gbc.pc(), 0xc605);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc603), 0xcb);
        EXPECT(gbc.readMem(0xc604), 0x31);
        // CB 31 00A7
        gbc.setState(0xcd69, 0xce51, 0xb150, 0x6d6c, 0x9c1b, 0xba32, 0x1, 0x0);
        gbc.writeMem(0xcd69, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xce51);
        EXPECT(gbc.pc(), 0xcd6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd69), 0xcb);
        EXPECT(gbc.readMem(0xcd6a), 0x31);
        // CB 31 00A8
        gbc.setState(0x7d9b, 0x650d, 0x8160, 0xdf4a, 0xf87e, 0x3583, 0x1, 0x1);
        gbc.writeMem(0x7d9b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x650d);
        EXPECT(gbc.pc(), 0x7d9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00A9
        gbc.setState(0xcedc, 0x263, 0x3760, 0x7745, 0xd91f, 0x5868, 0x0, 0x0);
        gbc.writeMem(0xcedc, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x263);
        EXPECT(gbc.pc(), 0xcede);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcedc), 0xcb);
        EXPECT(gbc.readMem(0xcedd), 0x31);
        // CB 31 00AA
        gbc.setState(0xdd49, 0xace3, 0xa3c0, 0xff16, 0xb6c6, 0x7b59, 0x1, 0x1);
        gbc.writeMem(0xdd49, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xace3);
        EXPECT(gbc.pc(), 0xdd4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd49), 0xcb);
        EXPECT(gbc.readMem(0xdd4a), 0x31);
        // CB 31 00AB
        gbc.setState(0x4ffe, 0x2583, 0xc9e0, 0xa364, 0x5a40, 0x4496, 0x1, 0x0);
        gbc.writeMem(0x4ffe, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2583);
        EXPECT(gbc.pc(), 0x5000);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00AC
        gbc.setState(0xc89b, 0xca14, 0x7c80, 0x1c4f, 0x74d2, 0x3365, 0x1, 0x0);
        gbc.writeMem(0xc89b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xca14);
        EXPECT(gbc.pc(), 0xc89d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc89b), 0xcb);
        EXPECT(gbc.readMem(0xc89c), 0x31);
        // CB 31 00AD
        gbc.setState(0xb563, 0x5f18, 0xc2a0, 0xb9d5, 0x9040, 0xd0d6, 0x1, 0x0);
        gbc.writeMem(0xb563, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x5f18);
        EXPECT(gbc.pc(), 0xb565);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb563), 0xcb);
        EXPECT(gbc.readMem(0xb564), 0x31);
        // CB 31 00AE
        gbc.setState(0x56dd, 0x269c, 0x7950, 0x9b6a, 0x7960, 0x453b, 0x1, 0x0);
        gbc.writeMem(0x56dd, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x269c);
        EXPECT(gbc.pc(), 0x56df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00AF
        gbc.setState(0xb0c0, 0xb352, 0xa330, 0x68ba, 0x31a2, 0xf624, 0x0, 0x0);
        gbc.writeMem(0xb0c0, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xb352);
        EXPECT(gbc.pc(), 0xb0c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0c0), 0xcb);
        EXPECT(gbc.readMem(0xb0c1), 0x31);
        // CB 31 00B0
        gbc.setState(0xc11f, 0x72da, 0x37b0, 0x41f, 0xc16c, 0x71b2, 0x0, 0x1);
        gbc.writeMem(0xc11f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x72da);
        EXPECT(gbc.pc(), 0xc121);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc11f), 0xcb);
        EXPECT(gbc.readMem(0xc120), 0x31);
        // CB 31 00B1
        gbc.setState(0x9cca, 0x9b8c, 0xf730, 0x88e, 0xd577, 0x2874, 0x0, 0x0);
        gbc.writeMem(0x9cca, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x9b8c);
        EXPECT(gbc.pc(), 0x9ccc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cca), 0xcb);
        EXPECT(gbc.readMem(0x9ccb), 0x31);
        // CB 31 00B2
        gbc.setState(0xaf9c, 0x9f5e, 0xd6f0, 0xae49, 0xeabf, 0x23d8, 0x1, 0x1);
        gbc.writeMem(0xaf9c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x9f5e);
        EXPECT(gbc.pc(), 0xaf9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf9c), 0xcb);
        EXPECT(gbc.readMem(0xaf9d), 0x31);
        // CB 31 00B3
        gbc.setState(0x7d0b, 0x939e, 0xff10, 0xdd9f, 0x13a1, 0x83c, 0x0, 0x0);
        gbc.writeMem(0x7d0b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x939e);
        EXPECT(gbc.pc(), 0x7d0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00B4
        gbc.setState(0x767a, 0x987c, 0x2830, 0xd996, 0xbd0a, 0x5cce, 0x0, 0x1);
        gbc.writeMem(0x767a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x987c);
        EXPECT(gbc.pc(), 0x767c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00B5
        gbc.setState(0xb1c4, 0x5aaa, 0xd5c0, 0x5ed5, 0x4ef7, 0xd187, 0x0, 0x1);
        gbc.writeMem(0xb1c4, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x5aaa);
        EXPECT(gbc.pc(), 0xb1c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1c4), 0xcb);
        EXPECT(gbc.readMem(0xb1c5), 0x31);
        // CB 31 00B6
        gbc.setState(0xabd2, 0x7b22, 0xae00, 0x40e6, 0xc076, 0x4ab9, 0x0, 0x0);
        gbc.writeMem(0xabd2, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x7b22);
        EXPECT(gbc.pc(), 0xabd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabd2), 0xcb);
        EXPECT(gbc.readMem(0xabd3), 0x31);
        // CB 31 00B7
        gbc.setState(0x3731, 0xdeb4, 0x2820, 0x4c13, 0xc472, 0x52ee, 0x0, 0x0);
        gbc.writeMem(0x3731, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xdeb4);
        EXPECT(gbc.pc(), 0x3733);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00B8
        gbc.setState(0x5560, 0xce6e, 0xccf0, 0xc5b1, 0x9304, 0x4c0f, 0x0, 0x0);
        gbc.writeMem(0x5560, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xce6e);
        EXPECT(gbc.pc(), 0x5562);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00B9
        gbc.setState(0x9f73, 0x6151, 0xe170, 0x8d49, 0x8e43, 0x701a, 0x0, 0x0);
        gbc.writeMem(0x9f73, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x6151);
        EXPECT(gbc.pc(), 0x9f75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f73), 0xcb);
        EXPECT(gbc.readMem(0x9f74), 0x31);
        // CB 31 00BA
        gbc.setState(0x3e9b, 0x7ae6, 0x3460, 0x3b14, 0x201d, 0x3014, 0x1, 0x0);
        gbc.writeMem(0x3e9b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x7ae6);
        EXPECT(gbc.pc(), 0x3e9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00BB
        gbc.setState(0x9b96, 0xc078, 0x8730, 0xf612, 0xe54c, 0x6149, 0x0, 0x0);
        gbc.writeMem(0x9b96, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xc078);
        EXPECT(gbc.pc(), 0x9b98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b96), 0xcb);
        EXPECT(gbc.readMem(0x9b97), 0x31);
        // CB 31 00BC
        gbc.setState(0xbff7, 0xa295, 0x2e0, 0x91ed, 0x57d6, 0x5673, 0x0, 0x1);
        gbc.writeMem(0xbff7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xa295);
        EXPECT(gbc.pc(), 0xbff9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbff7), 0xcb);
        EXPECT(gbc.readMem(0xbff8), 0x31);
        // CB 31 00BD
        gbc.setState(0x3f08, 0x20cd, 0x1720, 0xae6e, 0x829e, 0x6ebb, 0x0, 0x1);
        gbc.writeMem(0x3f08, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x20cd);
        EXPECT(gbc.pc(), 0x3f0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00BE
        gbc.setState(0xd171, 0x443c, 0x1330, 0x705c, 0xc943, 0x9b11, 0x0, 0x0);
        gbc.writeMem(0xd171, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x443c);
        EXPECT(gbc.pc(), 0xd173);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd171), 0xcb);
        EXPECT(gbc.readMem(0xd172), 0x31);
        // CB 31 00BF
        gbc.setState(0x2529, 0xb29, 0x5ac0, 0xd1d9, 0x5924, 0x367d, 0x0, 0x0);
        gbc.writeMem(0x2529, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xb29);
        EXPECT(gbc.pc(), 0x252b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00C0
        gbc.setState(0xc8c4, 0xa97f, 0xfcc0, 0xb263, 0x3688, 0x34aa, 0x0, 0x0);
        gbc.writeMem(0xc8c4, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xa97f);
        EXPECT(gbc.pc(), 0xc8c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8c4), 0xcb);
        EXPECT(gbc.readMem(0xc8c5), 0x31);
        // CB 31 00C1
        gbc.setState(0x619c, 0x871d, 0x7530, 0x9c9f, 0x676, 0x714f, 0x1, 0x1);
        gbc.writeMem(0x619c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x871d);
        EXPECT(gbc.pc(), 0x619e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00C2
        gbc.setState(0x6386, 0x80fc, 0xa500, 0x3587, 0x8eae, 0xfb41, 0x1, 0x1);
        gbc.writeMem(0x6386, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x80fc);
        EXPECT(gbc.pc(), 0x6388);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00C3
        gbc.setState(0x82d7, 0xf46e, 0x56c0, 0xd85a, 0xdb6f, 0x5d89, 0x0, 0x1);
        gbc.writeMem(0x82d7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xf46e);
        EXPECT(gbc.pc(), 0x82d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82d7), 0xcb);
        EXPECT(gbc.readMem(0x82d8), 0x31);
        // CB 31 00C4
        gbc.setState(0x334, 0x2502, 0xd000, 0x156a, 0xf3dc, 0x4ed0, 0x1, 0x1);
        gbc.writeMem(0x334, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x2502);
        EXPECT(gbc.pc(), 0x336);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00C5
        gbc.setState(0x4315, 0x137b, 0xf4b0, 0x2229, 0xc77d, 0x5fb6, 0x1, 0x0);
        gbc.writeMem(0x4315, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x137b);
        EXPECT(gbc.pc(), 0x4317);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00C6
        gbc.setState(0x802d, 0xb593, 0x5310, 0x6f31, 0x4194, 0x115, 0x0, 0x1);
        gbc.writeMem(0x802d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xb593);
        EXPECT(gbc.pc(), 0x802f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x802d), 0xcb);
        EXPECT(gbc.readMem(0x802e), 0x31);
        // CB 31 00C7
        gbc.setState(0x38c8, 0x7f50, 0xb490, 0x2b97, 0xebfb, 0x61e, 0x0, 0x1);
        gbc.writeMem(0x38c8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x7f50);
        EXPECT(gbc.pc(), 0x38ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00C8
        gbc.setState(0xa1b3, 0x92fd, 0xa230, 0xc315, 0x82cc, 0x4eed, 0x0, 0x1);
        gbc.writeMem(0xa1b3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x92fd);
        EXPECT(gbc.pc(), 0xa1b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1b3), 0xcb);
        EXPECT(gbc.readMem(0xa1b4), 0x31);
        // CB 31 00C9
        gbc.setState(0x17ae, 0xaf01, 0x7ff0, 0xe241, 0x4002, 0xdad2, 0x0, 0x0);
        gbc.writeMem(0x17ae, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xaf01);
        EXPECT(gbc.pc(), 0x17b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00CA
        gbc.setState(0x2edc, 0x9634, 0x9690, 0xb6f0, 0xf574, 0x4b34, 0x0, 0x0);
        gbc.writeMem(0x2edc, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x9634);
        EXPECT(gbc.pc(), 0x2ede);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00CB
        gbc.setState(0xaa4, 0x18d3, 0x380, 0xbd9, 0xeeff, 0x2c2e, 0x1, 0x1);
        gbc.writeMem(0xaa4, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x18d3);
        EXPECT(gbc.pc(), 0xaa6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00CC
        gbc.setState(0x2d38, 0x4942, 0x7bf0, 0x4d79, 0xd10c, 0xdf71, 0x0, 0x0);
        gbc.writeMem(0x2d38, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x4942);
        EXPECT(gbc.pc(), 0x2d3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00CD
        gbc.setState(0xde8b, 0x452f, 0x18d0, 0xa99b, 0xc43f, 0xb50b, 0x1, 0x0);
        gbc.writeMem(0xde8b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x452f);
        EXPECT(gbc.pc(), 0xde8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde8b), 0xcb);
        EXPECT(gbc.readMem(0xde8c), 0x31);
        // CB 31 00CE
        gbc.setState(0xd97, 0xef7b, 0x9370, 0x2c5a, 0xde2c, 0xe2a4, 0x1, 0x0);
        gbc.writeMem(0xd97, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xef7b);
        EXPECT(gbc.pc(), 0xd99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00CF
        gbc.setState(0x2ce8, 0x523d, 0xa750, 0x75bc, 0xe2b8, 0x6799, 0x1, 0x0);
        gbc.writeMem(0x2ce8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x523d);
        EXPECT(gbc.pc(), 0x2cea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00D0
        gbc.setState(0x5c02, 0x251c, 0x9ae0, 0xbf3b, 0x1e2a, 0xd070, 0x0, 0x1);
        gbc.writeMem(0x5c02, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x251c);
        EXPECT(gbc.pc(), 0x5c04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00D1
        gbc.setState(0x4c56, 0x5f0b, 0xca70, 0x5bfc, 0xa1dc, 0x32f8, 0x1, 0x0);
        gbc.writeMem(0x4c56, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x5f0b);
        EXPECT(gbc.pc(), 0x4c58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00D2
        gbc.setState(0x65d2, 0xc9c8, 0x4e50, 0x8ef0, 0x7400, 0x1577, 0x0, 0x0);
        gbc.writeMem(0x65d2, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xc9c8);
        EXPECT(gbc.pc(), 0x65d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00D3
        gbc.setState(0x53a5, 0x3282, 0x54c0, 0xcca6, 0x2232, 0x7172, 0x0, 0x1);
        gbc.writeMem(0x53a5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x3282);
        EXPECT(gbc.pc(), 0x53a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00D4
        gbc.setState(0x3a68, 0x1eaa, 0xbfd0, 0xd839, 0x51c1, 0x7a77, 0x1, 0x1);
        gbc.writeMem(0x3a68, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x1eaa);
        EXPECT(gbc.pc(), 0x3a6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00D5
        gbc.setState(0x2419, 0xdbab, 0x4e0, 0xf770, 0x14c3, 0x4022, 0x0, 0x0);
        gbc.writeMem(0x2419, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xdbab);
        EXPECT(gbc.pc(), 0x241b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00D6
        gbc.setState(0x8a34, 0xea3d, 0x47b0, 0x147b, 0x1945, 0x298a, 0x1, 0x0);
        gbc.writeMem(0x8a34, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xea3d);
        EXPECT(gbc.pc(), 0x8a36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a34), 0xcb);
        EXPECT(gbc.readMem(0x8a35), 0x31);
        // CB 31 00D8
        gbc.setState(0x3815, 0x8d0c, 0xffe0, 0x5d30, 0xac77, 0xfb49, 0x0, 0x1);
        gbc.writeMem(0x3815, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x8d0c);
        EXPECT(gbc.pc(), 0x3817);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00D9
        gbc.setState(0x5e81, 0x1b5b, 0x9810, 0x2b93, 0x5597, 0x373, 0x0, 0x1);
        gbc.writeMem(0x5e81, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x1b5b);
        EXPECT(gbc.pc(), 0x5e83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00DA
        gbc.setState(0x7c6, 0x38de, 0x6010, 0xc104, 0xf46a, 0x5a4, 0x1, 0x0);
        gbc.writeMem(0x7c6, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x38de);
        EXPECT(gbc.pc(), 0x7c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00DB
        gbc.setState(0x9c74, 0x8bb7, 0xcac0, 0x4d4d, 0x993c, 0x2037, 0x1, 0x1);
        gbc.writeMem(0x9c74, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x8bb7);
        EXPECT(gbc.pc(), 0x9c76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c74), 0xcb);
        EXPECT(gbc.readMem(0x9c75), 0x31);
        // CB 31 00DC
        gbc.setState(0xad6d, 0x1a46, 0x4e70, 0x1f6e, 0x8581, 0xf45c, 0x1, 0x0);
        gbc.writeMem(0xad6d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x1a46);
        EXPECT(gbc.pc(), 0xad6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad6d), 0xcb);
        EXPECT(gbc.readMem(0xad6e), 0x31);
        // CB 31 00DD
        gbc.setState(0x6af, 0x2155, 0x2d70, 0x91c1, 0xa03b, 0x8bf0, 0x0, 0x0);
        gbc.writeMem(0x6af, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x2155);
        EXPECT(gbc.pc(), 0x6b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00DE
        gbc.setState(0xeffe, 0xc477, 0xf490, 0xaf57, 0x5cf2, 0x71bf, 0x0, 0x0);
        gbc.writeMem(0xeffe, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xc477);
        EXPECT(gbc.pc(), 0xf000);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeffe), 0xcb);
        EXPECT(gbc.readMem(0xefff), 0x31);
        // CB 31 00DF
        gbc.setState(0x63a8, 0xffe0, 0xb670, 0x1147, 0xf283, 0xad83, 0x0, 0x0);
        gbc.writeMem(0x63a8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xffe0);
        EXPECT(gbc.pc(), 0x63aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00E0
        gbc.setState(0x75a5, 0xa14c, 0xb8b0, 0x1ed2, 0x8c6a, 0x9025, 0x0, 0x1);
        gbc.writeMem(0x75a5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xa14c);
        EXPECT(gbc.pc(), 0x75a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00E1
        gbc.setState(0x113a, 0xf568, 0x54d0, 0x21da, 0x748f, 0xa9a1, 0x0, 0x0);
        gbc.writeMem(0x113a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xf568);
        EXPECT(gbc.pc(), 0x113c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00E2
        gbc.setState(0x10c3, 0x57cf, 0xa000, 0x4c79, 0x99de, 0x56f1, 0x0, 0x1);
        gbc.writeMem(0x10c3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x57cf);
        EXPECT(gbc.pc(), 0x10c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00E3
        gbc.setState(0xd99c, 0xa8ed, 0xb9f0, 0xff0e, 0x5711, 0x1764, 0x1, 0x1);
        gbc.writeMem(0xd99c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xa8ed);
        EXPECT(gbc.pc(), 0xd99e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd99c), 0xcb);
        EXPECT(gbc.readMem(0xd99d), 0x31);
        // CB 31 00E4
        gbc.setState(0xe1da, 0x982, 0x5ba0, 0xdcda, 0x9bc7, 0x4fac, 0x0, 0x1);
        gbc.writeMem(0xe1da, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x982);
        EXPECT(gbc.pc(), 0xe1dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1da), 0xcb);
        EXPECT(gbc.readMem(0xe1db), 0x31);
        // CB 31 00E5
        gbc.setState(0x9063, 0x259c, 0x9700, 0x1a23, 0xea1c, 0x712c, 0x0, 0x1);
        gbc.writeMem(0x9063, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x259c);
        EXPECT(gbc.pc(), 0x9065);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9063), 0xcb);
        EXPECT(gbc.readMem(0x9064), 0x31);
        // CB 31 00E6
        gbc.setState(0x7e80, 0x94a6, 0xaba0, 0x7089, 0x56cd, 0x6076, 0x1, 0x1);
        gbc.writeMem(0x7e80, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x94a6);
        EXPECT(gbc.pc(), 0x7e82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00E8
        gbc.setState(0xd7d7, 0x2e5e, 0x9e10, 0x151a, 0xf855, 0xee91, 0x1, 0x0);
        gbc.writeMem(0xd7d7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x2e5e);
        EXPECT(gbc.pc(), 0xd7d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7d7), 0xcb);
        EXPECT(gbc.readMem(0xd7d8), 0x31);
        // CB 31 00E9
        gbc.setState(0x48c, 0x8152, 0x48f0, 0x8e21, 0x5fa3, 0x8eb8, 0x0, 0x1);
        gbc.writeMem(0x48c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x8152);
        EXPECT(gbc.pc(), 0x48e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00EA
        gbc.setState(0x9107, 0x2162, 0xaff0, 0x8ff2, 0x36e0, 0xa23, 0x0, 0x0);
        gbc.writeMem(0x9107, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x2162);
        EXPECT(gbc.pc(), 0x9109);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9107), 0xcb);
        EXPECT(gbc.readMem(0x9108), 0x31);
        // CB 31 00EB
        gbc.setState(0x258f, 0x1fab, 0xfac0, 0x37df, 0x99e, 0xe328, 0x1, 0x0);
        gbc.writeMem(0x258f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x1fab);
        EXPECT(gbc.pc(), 0x2591);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00EC
        gbc.setState(0xdc05, 0x47b9, 0x9d30, 0x275b, 0xd907, 0xac58, 0x0, 0x1);
        gbc.writeMem(0xdc05, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x47b9);
        EXPECT(gbc.pc(), 0xdc07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc05), 0xcb);
        EXPECT(gbc.readMem(0xdc06), 0x31);
        // CB 31 00ED
        gbc.setState(0x9185, 0x8c9e, 0xf100, 0x7843, 0xdc94, 0xeb93, 0x1, 0x0);
        gbc.writeMem(0x9185, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x8c9e);
        EXPECT(gbc.pc(), 0x9187);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9185), 0xcb);
        EXPECT(gbc.readMem(0x9186), 0x31);
        // CB 31 00EE
        gbc.setState(0xe269, 0xc3ef, 0x6020, 0x3b7d, 0x1341, 0xdf04, 0x0, 0x0);
        gbc.writeMem(0xe269, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xc3ef);
        EXPECT(gbc.pc(), 0xe26b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe269), 0xcb);
        EXPECT(gbc.readMem(0xe26a), 0x31);
        // CB 31 00EF
        gbc.setState(0xd314, 0xf2f1, 0xa30, 0xf13, 0x6b4d, 0x8d80, 0x0, 0x0);
        gbc.writeMem(0xd314, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xf2f1);
        EXPECT(gbc.pc(), 0xd316);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd314), 0xcb);
        EXPECT(gbc.readMem(0xd315), 0x31);
        // CB 31 00F0
        gbc.setState(0x9f81, 0x54d4, 0xfd10, 0x74f8, 0x22f, 0x9e1e, 0x0, 0x0);
        gbc.writeMem(0x9f81, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x54d4);
        EXPECT(gbc.pc(), 0x9f83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f81), 0xcb);
        EXPECT(gbc.readMem(0x9f82), 0x31);
        // CB 31 00F1
        gbc.setState(0xeb62, 0xff14, 0xd950, 0x9ddf, 0xb1f, 0x4639, 0x0, 0x1);
        gbc.writeMem(0xeb62, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xff14);
        EXPECT(gbc.pc(), 0xeb64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb62), 0xcb);
        EXPECT(gbc.readMem(0xeb63), 0x31);
        // CB 31 00F3
        gbc.setState(0x1817, 0x92db, 0xe9f0, 0x3aaf, 0x126, 0xe0a6, 0x1, 0x1);
        gbc.writeMem(0x1817, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x92db);
        EXPECT(gbc.pc(), 0x1819);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00F4
        gbc.setState(0x3373, 0x6937, 0xf090, 0xeab4, 0x64fe, 0x2842, 0x0, 0x1);
        gbc.writeMem(0x3373, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x6937);
        EXPECT(gbc.pc(), 0x3375);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00F5
        gbc.setState(0x1673, 0xa13b, 0xdd50, 0xc6a0, 0x6f02, 0xc51, 0x0, 0x1);
        gbc.writeMem(0x1673, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xa13b);
        EXPECT(gbc.pc(), 0x1675);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00F6
        gbc.setState(0xb9ab, 0x7c34, 0xfad0, 0xe225, 0x9b18, 0x3c12, 0x0, 0x0);
        gbc.writeMem(0xb9ab, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x7c34);
        EXPECT(gbc.pc(), 0xb9ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9ab), 0xcb);
        EXPECT(gbc.readMem(0xb9ac), 0x31);
        // CB 31 00F7
        gbc.setState(0xb2a2, 0xb367, 0x5a50, 0xcda2, 0x7fe6, 0x1b48, 0x0, 0x1);
        gbc.writeMem(0xb2a2, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xb367);
        EXPECT(gbc.pc(), 0xb2a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2a2), 0xcb);
        EXPECT(gbc.readMem(0xb2a3), 0x31);
        // CB 31 00F8
        gbc.setState(0x4b36, 0xc97a, 0x8060, 0x29af, 0x694a, 0x13d1, 0x1, 0x0);
        gbc.writeMem(0x4b36, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xc97a);
        EXPECT(gbc.pc(), 0x4b38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00F9
        gbc.setState(0xa0c7, 0x978c, 0xa150, 0xb6ea, 0xaded, 0x981b, 0x1, 0x1);
        gbc.writeMem(0xa0c7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x978c);
        EXPECT(gbc.pc(), 0xa0c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0c7), 0xcb);
        EXPECT(gbc.readMem(0xa0c8), 0x31);
        // CB 31 00FB
        gbc.setState(0x5e5f, 0x930f, 0x7780, 0x4d, 0x1b07, 0x734a, 0x0, 0x1);
        gbc.writeMem(0x5e5f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x930f);
        EXPECT(gbc.pc(), 0x5e61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00FC
        gbc.setState(0xd8f4, 0xf754, 0xd560, 0xe132, 0xe2ce, 0xbc1e, 0x0, 0x0);
        gbc.writeMem(0xd8f4, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xf754);
        EXPECT(gbc.pc(), 0xd8f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8f4), 0xcb);
        EXPECT(gbc.readMem(0xd8f5), 0x31);
        // CB 31 00FD
        gbc.setState(0x68cd, 0x26f4, 0xfd60, 0x1be5, 0x1c96, 0xcbc2, 0x0, 0x1);
        gbc.writeMem(0x68cd, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x26f4);
        EXPECT(gbc.pc(), 0x68cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00FE
        gbc.setState(0x4504, 0xb122, 0xc130, 0x8bd9, 0x76bb, 0x7c23, 0x1, 0x0);
        gbc.writeMem(0x4504, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xb122);
        EXPECT(gbc.pc(), 0x4506);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 00FF
        gbc.setState(0xb5fc, 0x14f, 0xb160, 0xedec, 0x3e45, 0xd9fc, 0x0, 0x1);
        gbc.writeMem(0xb5fc, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x14f);
        EXPECT(gbc.pc(), 0xb5fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5fc), 0xcb);
        EXPECT(gbc.readMem(0xb5fd), 0x31);
        // CB 31 0100
        gbc.setState(0x107, 0xa458, 0x2f50, 0x6446, 0x36cf, 0x8793, 0x1, 0x1);
        gbc.writeMem(0x107, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xa458);
        EXPECT(gbc.pc(), 0x109);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0101
        gbc.setState(0x33ec, 0xf0cc, 0x28d0, 0x5072, 0x8b81, 0xc120, 0x1, 0x1);
        gbc.writeMem(0x33ec, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xf0cc);
        EXPECT(gbc.pc(), 0x33ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0102
        gbc.setState(0xec31, 0xf615, 0xd0c0, 0x1cee, 0xd568, 0xdad, 0x1, 0x0);
        gbc.writeMem(0xec31, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xf615);
        EXPECT(gbc.pc(), 0xec33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec31), 0xcb);
        EXPECT(gbc.readMem(0xec32), 0x31);
        // CB 31 0103
        gbc.setState(0x61e1, 0xd455, 0x9730, 0x884, 0xe38f, 0x2fc5, 0x1, 0x0);
        gbc.writeMem(0x61e1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xd455);
        EXPECT(gbc.pc(), 0x61e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0104
        gbc.setState(0x957, 0xb7f0, 0xddb0, 0xb0ab, 0x721e, 0xf087, 0x1, 0x0);
        gbc.writeMem(0x957, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xb7f0);
        EXPECT(gbc.pc(), 0x959);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0105
        gbc.setState(0x3c2a, 0x3ce3, 0x9230, 0xd900, 0xbb50, 0xa6f8, 0x0, 0x1);
        gbc.writeMem(0x3c2a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x3ce3);
        EXPECT(gbc.pc(), 0x3c2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0107
        gbc.setState(0xc417, 0x23d5, 0x7db0, 0x7a56, 0x5eff, 0x4982, 0x0, 0x0);
        gbc.writeMem(0xc417, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x23d5);
        EXPECT(gbc.pc(), 0xc419);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc417), 0xcb);
        EXPECT(gbc.readMem(0xc418), 0x31);
        // CB 31 0108
        gbc.setState(0x3176, 0xa948, 0x5560, 0x77a9, 0x8553, 0x30d4, 0x1, 0x0);
        gbc.writeMem(0x3176, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xa948);
        EXPECT(gbc.pc(), 0x3178);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0109
        gbc.setState(0x524, 0x98e7, 0x17e0, 0x55d3, 0xafdd, 0xba56, 0x1, 0x0);
        gbc.writeMem(0x524, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x98e7);
        EXPECT(gbc.pc(), 0x526);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 010A
        gbc.setState(0x4549, 0xf7d8, 0xaf50, 0x6975, 0x200f, 0x2903, 0x1, 0x0);
        gbc.writeMem(0x4549, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xf7d8);
        EXPECT(gbc.pc(), 0x454b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 010B
        gbc.setState(0x4c67, 0x616a, 0xb310, 0x9536, 0x1da3, 0xea76, 0x1, 0x0);
        gbc.writeMem(0x4c67, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x616a);
        EXPECT(gbc.pc(), 0x4c69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 010C
        gbc.setState(0x2f99, 0x365, 0x2540, 0x8395, 0x971b, 0x5dd0, 0x1, 0x1);
        gbc.writeMem(0x2f99, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x365);
        EXPECT(gbc.pc(), 0x2f9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 010E
        gbc.setState(0x671b, 0x2488, 0x7e80, 0xffde, 0xf0f, 0x37ad, 0x1, 0x1);
        gbc.writeMem(0x671b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x2488);
        EXPECT(gbc.pc(), 0x671d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 010F
        gbc.setState(0x44b7, 0xcc4, 0xaee0, 0xfe2f, 0xb33c, 0x5b63, 0x0, 0x0);
        gbc.writeMem(0x44b7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xcc4);
        EXPECT(gbc.pc(), 0x44b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0110
        gbc.setState(0x70fe, 0xae38, 0x360, 0x6a7a, 0x8104, 0x59ce, 0x0, 0x1);
        gbc.writeMem(0x70fe, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xae38);
        EXPECT(gbc.pc(), 0x7100);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0111
        gbc.setState(0xb6aa, 0x6e88, 0x76a0, 0x25db, 0x7503, 0x1392, 0x1, 0x1);
        gbc.writeMem(0xb6aa, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x6e88);
        EXPECT(gbc.pc(), 0xb6ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6aa), 0xcb);
        EXPECT(gbc.readMem(0xb6ab), 0x31);
        // CB 31 0112
        gbc.setState(0x51f1, 0x6a0b, 0x6d0, 0xe457, 0xb47e, 0x7552, 0x0, 0x1);
        gbc.writeMem(0x51f1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x6a0b);
        EXPECT(gbc.pc(), 0x51f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0113
        gbc.setState(0xdf1e, 0x5eda, 0x3aa0, 0x6e05, 0x21fc, 0xc7fe, 0x0, 0x1);
        gbc.writeMem(0xdf1e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x5eda);
        EXPECT(gbc.pc(), 0xdf20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf1e), 0xcb);
        EXPECT(gbc.readMem(0xdf1f), 0x31);
        // CB 31 0114
        gbc.setState(0xa30e, 0x13b5, 0xd6c0, 0xba21, 0x3ace, 0x91f4, 0x0, 0x0);
        gbc.writeMem(0xa30e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x13b5);
        EXPECT(gbc.pc(), 0xa310);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa30e), 0xcb);
        EXPECT(gbc.readMem(0xa30f), 0x31);
        // CB 31 0115
        gbc.setState(0xdd62, 0x4625, 0xb100, 0xa183, 0xd409, 0xe1e9, 0x1, 0x0);
        gbc.writeMem(0xdd62, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x4625);
        EXPECT(gbc.pc(), 0xdd64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd62), 0xcb);
        EXPECT(gbc.readMem(0xdd63), 0x31);
        // CB 31 0116
        gbc.setState(0xeed3, 0xc905, 0x25e0, 0xdc01, 0xcb40, 0xa8cc, 0x1, 0x1);
        gbc.writeMem(0xeed3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xc905);
        EXPECT(gbc.pc(), 0xeed5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeed3), 0xcb);
        EXPECT(gbc.readMem(0xeed4), 0x31);
        // CB 31 0117
        gbc.setState(0x61ae, 0x9169, 0xa60, 0xd7dd, 0x32c9, 0x1c50, 0x1, 0x1);
        gbc.writeMem(0x61ae, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x9169);
        EXPECT(gbc.pc(), 0x61b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0118
        gbc.setState(0x891a, 0x1628, 0xf530, 0x1c24, 0x2e0, 0xc289, 0x0, 0x1);
        gbc.writeMem(0x891a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x1628);
        EXPECT(gbc.pc(), 0x891c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x891a), 0xcb);
        EXPECT(gbc.readMem(0x891b), 0x31);
        // CB 31 0119
        gbc.setState(0xdae6, 0xd2e1, 0x94c0, 0x9f36, 0x413, 0x5728, 0x0, 0x1);
        gbc.writeMem(0xdae6, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xd2e1);
        EXPECT(gbc.pc(), 0xdae8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdae6), 0xcb);
        EXPECT(gbc.readMem(0xdae7), 0x31);
        // CB 31 011A
        gbc.setState(0x7d5a, 0xd472, 0xd8a0, 0x3f87, 0x5cec, 0x5c6f, 0x1, 0x0);
        gbc.writeMem(0x7d5a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xd472);
        EXPECT(gbc.pc(), 0x7d5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 011B
        gbc.setState(0x513c, 0xb5cf, 0x6f50, 0x64f1, 0x3b5c, 0x5439, 0x0, 0x0);
        gbc.writeMem(0x513c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xb5cf);
        EXPECT(gbc.pc(), 0x513e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 011C
        gbc.setState(0x64e3, 0x987c, 0xb9f0, 0x6665, 0x5afa, 0xc9f2, 0x0, 0x0);
        gbc.writeMem(0x64e3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x987c);
        EXPECT(gbc.pc(), 0x64e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 011D
        gbc.setState(0xf31, 0xee8e, 0x2f90, 0xa46c, 0x31bb, 0x6a65, 0x1, 0x1);
        gbc.writeMem(0xf31, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xee8e);
        EXPECT(gbc.pc(), 0xf33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 011E
        gbc.setState(0xb509, 0x1f2, 0x5130, 0x4488, 0x201f, 0xd598, 0x0, 0x0);
        gbc.writeMem(0xb509, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x1f2);
        EXPECT(gbc.pc(), 0xb50b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb509), 0xcb);
        EXPECT(gbc.readMem(0xb50a), 0x31);
        // CB 31 011F
        gbc.setState(0xcbd4, 0xd806, 0x1c40, 0x218a, 0x7608, 0xcb51, 0x0, 0x0);
        gbc.writeMem(0xcbd4, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xd806);
        EXPECT(gbc.pc(), 0xcbd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbd4), 0xcb);
        EXPECT(gbc.readMem(0xcbd5), 0x31);
        // CB 31 0120
        gbc.setState(0x3076, 0xfd43, 0x9000, 0xf5e2, 0xe539, 0x6b4d, 0x1, 0x1);
        gbc.writeMem(0x3076, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xfd43);
        EXPECT(gbc.pc(), 0x3078);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0121
        gbc.setState(0x4219, 0x3a1, 0xc6f0, 0xd52a, 0x4f9b, 0x1064, 0x1, 0x1);
        gbc.writeMem(0x4219, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x3a1);
        EXPECT(gbc.pc(), 0x421b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0122
        gbc.setState(0xc60, 0x9084, 0x82e0, 0x12c3, 0xd9b1, 0x8c17, 0x0, 0x0);
        gbc.writeMem(0xc60, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x9084);
        EXPECT(gbc.pc(), 0xc62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0123
        gbc.setState(0xaa78, 0x220c, 0xa700, 0xae50, 0xe38c, 0xc82a, 0x0, 0x1);
        gbc.writeMem(0xaa78, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x220c);
        EXPECT(gbc.pc(), 0xaa7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa78), 0xcb);
        EXPECT(gbc.readMem(0xaa79), 0x31);
        // CB 31 0124
        gbc.setState(0xb4e8, 0xde96, 0x8820, 0x990b, 0x32e3, 0xea85, 0x0, 0x0);
        gbc.writeMem(0xb4e8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xde96);
        EXPECT(gbc.pc(), 0xb4ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4e8), 0xcb);
        EXPECT(gbc.readMem(0xb4e9), 0x31);
        // CB 31 0125
        gbc.setState(0x5ca3, 0x1108, 0xd900, 0xdec4, 0xecf3, 0xe667, 0x0, 0x1);
        gbc.writeMem(0x5ca3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x1108);
        EXPECT(gbc.pc(), 0x5ca5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0126
        gbc.setState(0x55a9, 0xc71d, 0xb810, 0xa9e0, 0xf0c2, 0xe795, 0x0, 0x0);
        gbc.writeMem(0x55a9, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xc71d);
        EXPECT(gbc.pc(), 0x55ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0127
        gbc.setState(0xd1b1, 0x9b45, 0x500, 0x2599, 0x8c88, 0xea16, 0x0, 0x0);
        gbc.writeMem(0xd1b1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x9b45);
        EXPECT(gbc.pc(), 0xd1b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1b1), 0xcb);
        EXPECT(gbc.readMem(0xd1b2), 0x31);
        // CB 31 0128
        gbc.setState(0xc37c, 0xad7f, 0x7b20, 0x75cb, 0x1711, 0xa08a, 0x0, 0x1);
        gbc.writeMem(0xc37c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xad7f);
        EXPECT(gbc.pc(), 0xc37e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc37c), 0xcb);
        EXPECT(gbc.readMem(0xc37d), 0x31);
        // CB 31 012A
        gbc.setState(0xc447, 0x5c5d, 0xc4a0, 0x1934, 0xd97c, 0xa4aa, 0x0, 0x1);
        gbc.writeMem(0xc447, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x5c5d);
        EXPECT(gbc.pc(), 0xc449);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc447), 0xcb);
        EXPECT(gbc.readMem(0xc448), 0x31);
        // CB 31 012B
        gbc.setState(0xdd27, 0x4f74, 0x37d0, 0x9515, 0x9223, 0x3cf3, 0x0, 0x0);
        gbc.writeMem(0xdd27, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x4f74);
        EXPECT(gbc.pc(), 0xdd29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd27), 0xcb);
        EXPECT(gbc.readMem(0xdd28), 0x31);
        // CB 31 012C
        gbc.setState(0x99b3, 0xe8aa, 0x4db0, 0x64b7, 0xa093, 0xb78b, 0x1, 0x1);
        gbc.writeMem(0x99b3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xe8aa);
        EXPECT(gbc.pc(), 0x99b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99b3), 0xcb);
        EXPECT(gbc.readMem(0x99b4), 0x31);
        // CB 31 012E
        gbc.setState(0x4589, 0xfa9, 0x4d10, 0xd634, 0x4ed2, 0x33bc, 0x0, 0x1);
        gbc.writeMem(0x4589, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xfa9);
        EXPECT(gbc.pc(), 0x458b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 012F
        gbc.setState(0xe98a, 0xdf7a, 0xf580, 0x4559, 0xbd8c, 0x1cd2, 0x1, 0x0);
        gbc.writeMem(0xe98a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xdf7a);
        EXPECT(gbc.pc(), 0xe98c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe98a), 0xcb);
        EXPECT(gbc.readMem(0xe98b), 0x31);
        // CB 31 0130
        gbc.setState(0x8662, 0xc2ca, 0xf1a0, 0xc096, 0xc721, 0x543, 0x0, 0x0);
        gbc.writeMem(0x8662, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xc2ca);
        EXPECT(gbc.pc(), 0x8664);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8662), 0xcb);
        EXPECT(gbc.readMem(0x8663), 0x31);
        // CB 31 0131
        gbc.setState(0xacd8, 0xcb82, 0x4d80, 0x3cf4, 0x6b46, 0x688c, 0x0, 0x1);
        gbc.writeMem(0xacd8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xcb82);
        EXPECT(gbc.pc(), 0xacda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacd8), 0xcb);
        EXPECT(gbc.readMem(0xacd9), 0x31);
        // CB 31 0132
        gbc.setState(0x7e04, 0x8e81, 0xb5d0, 0xf074, 0x61c, 0xcea5, 0x0, 0x1);
        gbc.writeMem(0x7e04, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x8e81);
        EXPECT(gbc.pc(), 0x7e06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0133
        gbc.setState(0x916c, 0xb270, 0x91b0, 0x439f, 0xc4ea, 0xeeb4, 0x1, 0x1);
        gbc.writeMem(0x916c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xb270);
        EXPECT(gbc.pc(), 0x916e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x916c), 0xcb);
        EXPECT(gbc.readMem(0x916d), 0x31);
        // CB 31 0134
        gbc.setState(0x2f0c, 0xabe2, 0xc8e0, 0xbfd8, 0x7622, 0x7ce0, 0x0, 0x0);
        gbc.writeMem(0x2f0c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xabe2);
        EXPECT(gbc.pc(), 0x2f0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0135
        gbc.setState(0x30a3, 0x4054, 0x7650, 0x8654, 0x2d94, 0x5768, 0x1, 0x1);
        gbc.writeMem(0x30a3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x4054);
        EXPECT(gbc.pc(), 0x30a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0136
        gbc.setState(0xaa6a, 0xc981, 0x3130, 0x7087, 0x5b85, 0x70fb, 0x1, 0x1);
        gbc.writeMem(0xaa6a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xc981);
        EXPECT(gbc.pc(), 0xaa6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa6a), 0xcb);
        EXPECT(gbc.readMem(0xaa6b), 0x31);
        // CB 31 0137
        gbc.setState(0xaeb2, 0x851c, 0x6380, 0x9cfb, 0xa0a2, 0x99bc, 0x0, 0x1);
        gbc.writeMem(0xaeb2, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x851c);
        EXPECT(gbc.pc(), 0xaeb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaeb2), 0xcb);
        EXPECT(gbc.readMem(0xaeb3), 0x31);
        // CB 31 0138
        gbc.setState(0x2da9, 0x7141, 0x5d50, 0x6422, 0x76d8, 0xe6ab, 0x0, 0x1);
        gbc.writeMem(0x2da9, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7141);
        EXPECT(gbc.pc(), 0x2dab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0139
        gbc.setState(0xa33d, 0x8cc3, 0x5610, 0x1bf7, 0x1a5e, 0xe2a9, 0x0, 0x1);
        gbc.writeMem(0xa33d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x8cc3);
        EXPECT(gbc.pc(), 0xa33f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa33d), 0xcb);
        EXPECT(gbc.readMem(0xa33e), 0x31);
        // CB 31 013A
        gbc.setState(0xca73, 0xe081, 0x4f90, 0x92a9, 0x9db3, 0xbaf1, 0x1, 0x0);
        gbc.writeMem(0xca73, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xe081);
        EXPECT(gbc.pc(), 0xca75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca73), 0xcb);
        EXPECT(gbc.readMem(0xca74), 0x31);
        // CB 31 013B
        gbc.setState(0x1be6, 0x69c2, 0xd360, 0x152b, 0xaa0f, 0x262, 0x1, 0x0);
        gbc.writeMem(0x1be6, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x69c2);
        EXPECT(gbc.pc(), 0x1be8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 013C
        gbc.setState(0x9d7a, 0x4ba4, 0x9170, 0x4f85, 0x408a, 0x2ecb, 0x1, 0x1);
        gbc.writeMem(0x9d7a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x4ba4);
        EXPECT(gbc.pc(), 0x9d7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d7a), 0xcb);
        EXPECT(gbc.readMem(0x9d7b), 0x31);
        // CB 31 013D
        gbc.setState(0xdb3b, 0x289e, 0x1800, 0xb81, 0x9112, 0xe80c, 0x1, 0x0);
        gbc.writeMem(0xdb3b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x289e);
        EXPECT(gbc.pc(), 0xdb3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb3b), 0xcb);
        EXPECT(gbc.readMem(0xdb3c), 0x31);
        // CB 31 013E
        gbc.setState(0xd358, 0x65b3, 0x980, 0x4d4f, 0x6f88, 0x14b7, 0x1, 0x1);
        gbc.writeMem(0xd358, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x65b3);
        EXPECT(gbc.pc(), 0xd35a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd358), 0xcb);
        EXPECT(gbc.readMem(0xd359), 0x31);
        // CB 31 013F
        gbc.setState(0x3648, 0x679c, 0xcc30, 0x187b, 0x7521, 0x7867, 0x0, 0x1);
        gbc.writeMem(0x3648, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x679c);
        EXPECT(gbc.pc(), 0x364a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0140
        gbc.setState(0x739c, 0x2e5b, 0x28f0, 0x75fd, 0xa3c0, 0x970b, 0x0, 0x1);
        gbc.writeMem(0x739c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x2e5b);
        EXPECT(gbc.pc(), 0x739e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0141
        gbc.setState(0x2f08, 0x4ad4, 0xffd0, 0x666, 0x26e6, 0x5a08, 0x1, 0x1);
        gbc.writeMem(0x2f08, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x4ad4);
        EXPECT(gbc.pc(), 0x2f0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0142
        gbc.setState(0x5e23, 0xec44, 0x7d10, 0xc1fa, 0x8e0b, 0x931b, 0x1, 0x1);
        gbc.writeMem(0x5e23, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xec44);
        EXPECT(gbc.pc(), 0x5e25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0143
        gbc.setState(0xc22e, 0x244f, 0xdc70, 0x501c, 0x10e1, 0x9216, 0x1, 0x0);
        gbc.writeMem(0xc22e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x244f);
        EXPECT(gbc.pc(), 0xc230);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc22e), 0xcb);
        EXPECT(gbc.readMem(0xc22f), 0x31);
        // CB 31 0144
        gbc.setState(0x1c1, 0xe79e, 0x6eb0, 0xf5c1, 0xf293, 0xb649, 0x1, 0x0);
        gbc.writeMem(0x1c1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xe79e);
        EXPECT(gbc.pc(), 0x1c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0145
        gbc.setState(0xaf14, 0x9a40, 0xd740, 0xa98b, 0xe622, 0x489b, 0x0, 0x0);
        gbc.writeMem(0xaf14, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x9a40);
        EXPECT(gbc.pc(), 0xaf16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf14), 0xcb);
        EXPECT(gbc.readMem(0xaf15), 0x31);
        // CB 31 0147
        gbc.setState(0x80f, 0x2c6a, 0x8790, 0x5c5c, 0xf96d, 0xcad, 0x0, 0x0);
        gbc.writeMem(0x80f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x2c6a);
        EXPECT(gbc.pc(), 0x811);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0148
        gbc.setState(0x908a, 0xe66b, 0x9380, 0x4f3c, 0x521e, 0x127a, 0x1, 0x0);
        gbc.writeMem(0x908a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe66b);
        EXPECT(gbc.pc(), 0x908c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x908a), 0xcb);
        EXPECT(gbc.readMem(0x908b), 0x31);
        // CB 31 0149
        gbc.setState(0xacb2, 0x5d4, 0x5b0, 0xf4e0, 0xd134, 0x2c39, 0x0, 0x0);
        gbc.writeMem(0xacb2, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x5d4);
        EXPECT(gbc.pc(), 0xacb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacb2), 0xcb);
        EXPECT(gbc.readMem(0xacb3), 0x31);
        // CB 31 014A
        gbc.setState(0x3aeb, 0xcbbb, 0xc810, 0x8ad7, 0xb1f1, 0xae0d, 0x1, 0x1);
        gbc.writeMem(0x3aeb, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xcbbb);
        EXPECT(gbc.pc(), 0x3aed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 014B
        gbc.setState(0x48f1, 0x719, 0xfb80, 0x65a3, 0x950c, 0x1255, 0x0, 0x1);
        gbc.writeMem(0x48f1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x719);
        EXPECT(gbc.pc(), 0x48f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 014C
        gbc.setState(0x22f, 0x638e, 0x5a30, 0x3553, 0x21cf, 0x5d4d, 0x0, 0x0);
        gbc.writeMem(0x22f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x638e);
        EXPECT(gbc.pc(), 0x231);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 014D
        gbc.setState(0x80d, 0x46be, 0x1520, 0xd5b0, 0xaf6a, 0xe36f, 0x0, 0x0);
        gbc.writeMem(0x80d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x46be);
        EXPECT(gbc.pc(), 0x80f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 014E
        gbc.setState(0xea6b, 0x977e, 0x6f40, 0x4366, 0x93fa, 0x6da1, 0x0, 0x0);
        gbc.writeMem(0xea6b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x977e);
        EXPECT(gbc.pc(), 0xea6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea6b), 0xcb);
        EXPECT(gbc.readMem(0xea6c), 0x31);
        // CB 31 014F
        gbc.setState(0x44d, 0xcd5a, 0xd690, 0x2d7, 0xf537, 0xc57d, 0x1, 0x1);
        gbc.writeMem(0x44d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xcd5a);
        EXPECT(gbc.pc(), 0x44f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0150
        gbc.setState(0xe14d, 0xdd35, 0x18d0, 0x556d, 0x3bbb, 0x7d3f, 0x1, 0x0);
        gbc.writeMem(0xe14d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xdd35);
        EXPECT(gbc.pc(), 0xe14f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe14d), 0xcb);
        EXPECT(gbc.readMem(0xe14e), 0x31);
        // CB 31 0151
        gbc.setState(0x34e3, 0x45d, 0x4780, 0xec68, 0xb0bd, 0xf7c7, 0x0, 0x0);
        gbc.writeMem(0x34e3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x45d);
        EXPECT(gbc.pc(), 0x34e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0152
        gbc.setState(0x3f75, 0xef27, 0x3900, 0x6cee, 0x1a12, 0x18b7, 0x1, 0x0);
        gbc.writeMem(0x3f75, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xef27);
        EXPECT(gbc.pc(), 0x3f77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0153
        gbc.setState(0xce32, 0xccd5, 0xa320, 0x6ee8, 0x341, 0xa53c, 0x0, 0x1);
        gbc.writeMem(0xce32, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xccd5);
        EXPECT(gbc.pc(), 0xce34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce32), 0xcb);
        EXPECT(gbc.readMem(0xce33), 0x31);
        // CB 31 0154
        gbc.setState(0x8f7e, 0xe874, 0x9fb0, 0xebf0, 0x7383, 0x7944, 0x1, 0x1);
        gbc.writeMem(0x8f7e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xe874);
        EXPECT(gbc.pc(), 0x8f80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f7e), 0xcb);
        EXPECT(gbc.readMem(0x8f7f), 0x31);
        // CB 31 0155
        gbc.setState(0x81e4, 0x5504, 0x7a40, 0xb2dd, 0x20b3, 0x1347, 0x0, 0x0);
        gbc.writeMem(0x81e4, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x5504);
        EXPECT(gbc.pc(), 0x81e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81e4), 0xcb);
        EXPECT(gbc.readMem(0x81e5), 0x31);
        // CB 31 0156
        gbc.setState(0x2d5, 0xfa1c, 0xa2d0, 0xd6df, 0x393d, 0x3c5e, 0x0, 0x1);
        gbc.writeMem(0x2d5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xfa1c);
        EXPECT(gbc.pc(), 0x2d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0157
        gbc.setState(0xb6e9, 0xcc8f, 0xbc40, 0x270f, 0xdd3d, 0x67df, 0x0, 0x0);
        gbc.writeMem(0xb6e9, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xcc8f);
        EXPECT(gbc.pc(), 0xb6eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6e9), 0xcb);
        EXPECT(gbc.readMem(0xb6ea), 0x31);
        // CB 31 0158
        gbc.setState(0xd8cd, 0x59bd, 0x5900, 0x6c, 0x434e, 0x648a, 0x0, 0x1);
        gbc.writeMem(0xd8cd, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x59bd);
        EXPECT(gbc.pc(), 0xd8cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8cd), 0xcb);
        EXPECT(gbc.readMem(0xd8ce), 0x31);
        // CB 31 0159
        gbc.setState(0x63c1, 0x6a4c, 0xab10, 0x56dc, 0x68d4, 0x36e, 0x1, 0x0);
        gbc.writeMem(0x63c1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x6a4c);
        EXPECT(gbc.pc(), 0x63c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 015A
        gbc.setState(0x446d, 0x4619, 0xa020, 0xfbce, 0xbc35, 0x4dc0, 0x0, 0x0);
        gbc.writeMem(0x446d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x4619);
        EXPECT(gbc.pc(), 0x446f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 015C
        gbc.setState(0x3473, 0x9426, 0xd8e0, 0x7af7, 0x206a, 0x5fc2, 0x1, 0x1);
        gbc.writeMem(0x3473, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x9426);
        EXPECT(gbc.pc(), 0x3475);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 015D
        gbc.setState(0xc61f, 0x3ff8, 0xd930, 0x272f, 0x938c, 0x1f6d, 0x1, 0x1);
        gbc.writeMem(0xc61f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x3ff8);
        EXPECT(gbc.pc(), 0xc621);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc61f), 0xcb);
        EXPECT(gbc.readMem(0xc620), 0x31);
        // CB 31 015F
        gbc.setState(0xe96c, 0x7cc2, 0x9ce0, 0x7a2a, 0xea34, 0xc5a8, 0x1, 0x0);
        gbc.writeMem(0xe96c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x7cc2);
        EXPECT(gbc.pc(), 0xe96e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe96c), 0xcb);
        EXPECT(gbc.readMem(0xe96d), 0x31);
        // CB 31 0160
        gbc.setState(0xe50f, 0x1c, 0xe940, 0xde9c, 0xebd2, 0xff60, 0x1, 0x1);
        gbc.writeMem(0xe50f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x1c);
        EXPECT(gbc.pc(), 0xe511);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe50f), 0xcb);
        EXPECT(gbc.readMem(0xe510), 0x31);
        // CB 31 0162
        gbc.setState(0x68dc, 0xeffc, 0x2710, 0x63cd, 0x45dc, 0x4e27, 0x0, 0x1);
        gbc.writeMem(0x68dc, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xeffc);
        EXPECT(gbc.pc(), 0x68de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0165
        gbc.setState(0x3563, 0x1b72, 0x6600, 0xedbf, 0x341e, 0xd85c, 0x1, 0x1);
        gbc.writeMem(0x3563, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x1b72);
        EXPECT(gbc.pc(), 0x3565);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0166
        gbc.setState(0x5070, 0x9fec, 0xfff0, 0xb5a5, 0x31ed, 0x1bc3, 0x0, 0x0);
        gbc.writeMem(0x5070, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x9fec);
        EXPECT(gbc.pc(), 0x5072);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0167
        gbc.setState(0xb9fd, 0xe3e2, 0xbf10, 0x3173, 0x7c2d, 0x62e8, 0x1, 0x1);
        gbc.writeMem(0xb9fd, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xe3e2);
        EXPECT(gbc.pc(), 0xb9ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9fd), 0xcb);
        EXPECT(gbc.readMem(0xb9fe), 0x31);
        // CB 31 0169
        gbc.setState(0x5850, 0xe756, 0xcef0, 0x61a1, 0x5bf8, 0x487d, 0x0, 0x1);
        gbc.writeMem(0x5850, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xe756);
        EXPECT(gbc.pc(), 0x5852);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 016A
        gbc.setState(0xd18a, 0xb145, 0x530, 0xe77e, 0x9ed2, 0x852b, 0x0, 0x0);
        gbc.writeMem(0xd18a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xb145);
        EXPECT(gbc.pc(), 0xd18c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd18a), 0xcb);
        EXPECT(gbc.readMem(0xd18b), 0x31);
        // CB 31 016B
        gbc.setState(0x1769, 0x7a87, 0xc3c0, 0x55ea, 0x819b, 0x5263, 0x0, 0x1);
        gbc.writeMem(0x1769, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x7a87);
        EXPECT(gbc.pc(), 0x176b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 016C
        gbc.setState(0x4d6e, 0xe896, 0x1b90, 0xddd5, 0x106f, 0x5d1, 0x0, 0x1);
        gbc.writeMem(0x4d6e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe896);
        EXPECT(gbc.pc(), 0x4d70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 016D
        gbc.setState(0x23cf, 0xded4, 0x8ef0, 0xf7cd, 0x6143, 0x3352, 0x1, 0x1);
        gbc.writeMem(0x23cf, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xded4);
        EXPECT(gbc.pc(), 0x23d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 016E
        gbc.setState(0x563c, 0xc194, 0x38f0, 0xd113, 0x574f, 0x76b6, 0x0, 0x0);
        gbc.writeMem(0x563c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xc194);
        EXPECT(gbc.pc(), 0x563e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 016F
        gbc.setState(0x46ca, 0xc823, 0x1b10, 0x2f9e, 0x3906, 0xc75c, 0x1, 0x0);
        gbc.writeMem(0x46ca, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xc823);
        EXPECT(gbc.pc(), 0x46cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0170
        gbc.setState(0xdc1e, 0x6d16, 0x2700, 0x48ab, 0xd535, 0xc717, 0x0, 0x0);
        gbc.writeMem(0xdc1e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x6d16);
        EXPECT(gbc.pc(), 0xdc20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc1e), 0xcb);
        EXPECT(gbc.readMem(0xdc1f), 0x31);
        // CB 31 0171
        gbc.setState(0xd0fc, 0xb982, 0x41f0, 0xa9ee, 0xde71, 0x5dcb, 0x0, 0x1);
        gbc.writeMem(0xd0fc, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xb982);
        EXPECT(gbc.pc(), 0xd0fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0fc), 0xcb);
        EXPECT(gbc.readMem(0xd0fd), 0x31);
        // CB 31 0172
        gbc.setState(0xa8a1, 0x598e, 0x15e0, 0xa12e, 0x7520, 0x3651, 0x1, 0x1);
        gbc.writeMem(0xa8a1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x598e);
        EXPECT(gbc.pc(), 0xa8a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8a1), 0xcb);
        EXPECT(gbc.readMem(0xa8a2), 0x31);
        // CB 31 0173
        gbc.setState(0x2ddc, 0x308c, 0x730, 0x2f45, 0x1552, 0x6fde, 0x1, 0x1);
        gbc.writeMem(0x2ddc, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x308c);
        EXPECT(gbc.pc(), 0x2dde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0174
        gbc.setState(0x7160, 0x152d, 0x45a0, 0xb8c3, 0x87a2, 0xfdf2, 0x1, 0x0);
        gbc.writeMem(0x7160, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x152d);
        EXPECT(gbc.pc(), 0x7162);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0175
        gbc.setState(0x88e6, 0xb265, 0xc3e0, 0x57a9, 0xc9fc, 0xf0c5, 0x1, 0x0);
        gbc.writeMem(0x88e6, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xb265);
        EXPECT(gbc.pc(), 0x88e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88e6), 0xcb);
        EXPECT(gbc.readMem(0x88e7), 0x31);
        // CB 31 0176
        gbc.setState(0x87f9, 0x6796, 0x1300, 0x7432, 0xdee4, 0xb41d, 0x0, 0x1);
        gbc.writeMem(0x87f9, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x6796);
        EXPECT(gbc.pc(), 0x87fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87f9), 0xcb);
        EXPECT(gbc.readMem(0x87fa), 0x31);
        // CB 31 0177
        gbc.setState(0x9143, 0x3bbb, 0x2d00, 0x941a, 0x8cf9, 0xa258, 0x1, 0x0);
        gbc.writeMem(0x9143, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x3bbb);
        EXPECT(gbc.pc(), 0x9145);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9143), 0xcb);
        EXPECT(gbc.readMem(0x9144), 0x31);
        // CB 31 0178
        gbc.setState(0x1254, 0xba47, 0xb420, 0xebea, 0xfc58, 0x431, 0x0, 0x1);
        gbc.writeMem(0x1254, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xba47);
        EXPECT(gbc.pc(), 0x1256);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0179
        gbc.setState(0xd4c4, 0xd985, 0xcf50, 0x6025, 0x577d, 0xb326, 0x1, 0x1);
        gbc.writeMem(0xd4c4, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xd985);
        EXPECT(gbc.pc(), 0xd4c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4c4), 0xcb);
        EXPECT(gbc.readMem(0xd4c5), 0x31);
        // CB 31 017A
        gbc.setState(0xcd5c, 0x3e5, 0x7220, 0x46f5, 0x350d, 0x53e9, 0x1, 0x0);
        gbc.writeMem(0xcd5c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x3e5);
        EXPECT(gbc.pc(), 0xcd5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd5c), 0xcb);
        EXPECT(gbc.readMem(0xcd5d), 0x31);
        // CB 31 017B
        gbc.setState(0xc939, 0xb621, 0xbcb0, 0x5714, 0x7169, 0x7e13, 0x1, 0x1);
        gbc.writeMem(0xc939, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xb621);
        EXPECT(gbc.pc(), 0xc93b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc939), 0xcb);
        EXPECT(gbc.readMem(0xc93a), 0x31);
        // CB 31 017C
        gbc.setState(0x1cf, 0x82a4, 0x56d0, 0x9a31, 0x192, 0x3ace, 0x1, 0x0);
        gbc.writeMem(0x1cf, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x82a4);
        EXPECT(gbc.pc(), 0x1d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 017D
        gbc.setState(0x53d5, 0x202, 0x18f0, 0x7606, 0xdbfd, 0x3278, 0x1, 0x1);
        gbc.writeMem(0x53d5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x202);
        EXPECT(gbc.pc(), 0x53d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 017E
        gbc.setState(0xfd3, 0x6252, 0xbbc0, 0xa350, 0xd739, 0x6f82, 0x0, 0x1);
        gbc.writeMem(0xfd3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x6252);
        EXPECT(gbc.pc(), 0xfd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 017F
        gbc.setState(0x3240, 0x59ac, 0x82b0, 0x32df, 0xd383, 0x2b40, 0x1, 0x1);
        gbc.writeMem(0x3240, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x59ac);
        EXPECT(gbc.pc(), 0x3242);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0180
        gbc.setState(0x5c00, 0xb380, 0x5c50, 0xccbf, 0xf0c5, 0xf797, 0x0, 0x1);
        gbc.writeMem(0x5c00, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xb380);
        EXPECT(gbc.pc(), 0x5c02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0181
        gbc.setState(0x3a2b, 0xcc18, 0x4400, 0x7de0, 0x1f7f, 0x935, 0x0, 0x1);
        gbc.writeMem(0x3a2b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xcc18);
        EXPECT(gbc.pc(), 0x3a2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0183
        gbc.setState(0xa2f8, 0x5033, 0xaef0, 0xf05f, 0x36b5, 0x440c, 0x0, 0x0);
        gbc.writeMem(0xa2f8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x5033);
        EXPECT(gbc.pc(), 0xa2fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2f8), 0xcb);
        EXPECT(gbc.readMem(0xa2f9), 0x31);
        // CB 31 0185
        gbc.setState(0xcb30, 0xbd69, 0xd1d0, 0x4c30, 0xe52b, 0xc569, 0x1, 0x1);
        gbc.writeMem(0xcb30, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xbd69);
        EXPECT(gbc.pc(), 0xcb32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb30), 0xcb);
        EXPECT(gbc.readMem(0xcb31), 0x31);
        // CB 31 0188
        gbc.setState(0xb5b4, 0x363f, 0xda50, 0x194a, 0xde24, 0xf03c, 0x0, 0x1);
        gbc.writeMem(0xb5b4, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x363f);
        EXPECT(gbc.pc(), 0xb5b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5b4), 0xcb);
        EXPECT(gbc.readMem(0xb5b5), 0x31);
        // CB 31 0189
        gbc.setState(0x88ec, 0xc9e5, 0xfec0, 0x6d61, 0xdac5, 0x3c55, 0x0, 0x1);
        gbc.writeMem(0x88ec, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xc9e5);
        EXPECT(gbc.pc(), 0x88ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ec), 0xcb);
        EXPECT(gbc.readMem(0x88ed), 0x31);
        // CB 31 018A
        gbc.setState(0xd2e8, 0x3340, 0x3320, 0x50e4, 0x2125, 0x5466, 0x0, 0x1);
        gbc.writeMem(0xd2e8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x3340);
        EXPECT(gbc.pc(), 0xd2ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2e8), 0xcb);
        EXPECT(gbc.readMem(0xd2e9), 0x31);
        // CB 31 018B
        gbc.setState(0x7f4d, 0xaf95, 0x2d80, 0x1210, 0x60d2, 0x34a5, 0x0, 0x1);
        gbc.writeMem(0x7f4d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xaf95);
        EXPECT(gbc.pc(), 0x7f4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 018C
        gbc.setState(0x28d9, 0xf133, 0x57f0, 0x80f6, 0xb099, 0xffa5, 0x0, 0x0);
        gbc.writeMem(0x28d9, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xf133);
        EXPECT(gbc.pc(), 0x28db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 018D
        gbc.setState(0xa326, 0x26bf, 0x2fc0, 0x9499, 0xb450, 0x74ec, 0x0, 0x1);
        gbc.writeMem(0xa326, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x26bf);
        EXPECT(gbc.pc(), 0xa328);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa326), 0xcb);
        EXPECT(gbc.readMem(0xa327), 0x31);
        // CB 31 018E
        gbc.setState(0x1ae8, 0x6485, 0xeb40, 0xd71f, 0xdf20, 0x98d9, 0x1, 0x1);
        gbc.writeMem(0x1ae8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x6485);
        EXPECT(gbc.pc(), 0x1aea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 018F
        gbc.setState(0xcef0, 0x5c70, 0x9580, 0xc245, 0xca98, 0x3ba, 0x0, 0x0);
        gbc.writeMem(0xcef0, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x5c70);
        EXPECT(gbc.pc(), 0xcef2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcef0), 0xcb);
        EXPECT(gbc.readMem(0xcef1), 0x31);
        // CB 31 0190
        gbc.setState(0xad3e, 0x130b, 0x3ff0, 0x2f77, 0xa99e, 0x707f, 0x1, 0x0);
        gbc.writeMem(0xad3e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x130b);
        EXPECT(gbc.pc(), 0xad40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad3e), 0xcb);
        EXPECT(gbc.readMem(0xad3f), 0x31);
        // CB 31 0191
        gbc.setState(0x3dc1, 0x445f, 0xda30, 0x9648, 0x6791, 0x83ad, 0x0, 0x1);
        gbc.writeMem(0x3dc1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x445f);
        EXPECT(gbc.pc(), 0x3dc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0192
        gbc.setState(0x474c, 0xf9a, 0x51f0, 0x596, 0xae75, 0xd4f2, 0x0, 0x0);
        gbc.writeMem(0x474c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xf9a);
        EXPECT(gbc.pc(), 0x474e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0193
        gbc.setState(0x398b, 0xa391, 0xf2a0, 0xbf9e, 0x1552, 0xd7fa, 0x1, 0x0);
        gbc.writeMem(0x398b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xa391);
        EXPECT(gbc.pc(), 0x398d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0194
        gbc.setState(0x11e3, 0x8509, 0xeea0, 0xb529, 0x5c94, 0xd1fe, 0x1, 0x0);
        gbc.writeMem(0x11e3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x8509);
        EXPECT(gbc.pc(), 0x11e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0195
        gbc.setState(0xed5d, 0x78ed, 0xaaf0, 0x10f7, 0x47b8, 0xa58e, 0x1, 0x1);
        gbc.writeMem(0xed5d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x78ed);
        EXPECT(gbc.pc(), 0xed5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed5d), 0xcb);
        EXPECT(gbc.readMem(0xed5e), 0x31);
        // CB 31 0196
        gbc.setState(0x97f, 0x1699, 0xa5a0, 0xda1f, 0x65b3, 0xa202, 0x1, 0x0);
        gbc.writeMem(0x97f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x1699);
        EXPECT(gbc.pc(), 0x981);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0197
        gbc.setState(0x56e1, 0x37dc, 0x8cc0, 0x4596, 0xd5d2, 0x712, 0x0, 0x0);
        gbc.writeMem(0x56e1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x37dc);
        EXPECT(gbc.pc(), 0x56e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0198
        gbc.setState(0x606d, 0xe2ae, 0x5d90, 0xfa5f, 0x5a1f, 0xfbda, 0x0, 0x1);
        gbc.writeMem(0x606d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xe2ae);
        EXPECT(gbc.pc(), 0x606f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0199
        gbc.setState(0x7e74, 0x9dba, 0xe240, 0xbb7e, 0xf1fc, 0x2bbe, 0x1, 0x1);
        gbc.writeMem(0x7e74, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x9dba);
        EXPECT(gbc.pc(), 0x7e76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 019A
        gbc.setState(0x725f, 0xbf24, 0x22e0, 0xda30, 0x60dd, 0x1e4a, 0x1, 0x0);
        gbc.writeMem(0x725f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xbf24);
        EXPECT(gbc.pc(), 0x7261);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 019B
        gbc.setState(0x5a0, 0x176e, 0x66a0, 0xca23, 0x1781, 0xb6a3, 0x1, 0x0);
        gbc.writeMem(0x5a0, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x176e);
        EXPECT(gbc.pc(), 0x5a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 019C
        gbc.setState(0xa2d1, 0xf4fe, 0xff10, 0x9227, 0xb189, 0x3c92, 0x0, 0x1);
        gbc.writeMem(0xa2d1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xf4fe);
        EXPECT(gbc.pc(), 0xa2d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2d1), 0xcb);
        EXPECT(gbc.readMem(0xa2d2), 0x31);
        // CB 31 019D
        gbc.setState(0x9da2, 0xea12, 0x6a50, 0x6566, 0xbba2, 0xecbc, 0x0, 0x1);
        gbc.writeMem(0x9da2, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xea12);
        EXPECT(gbc.pc(), 0x9da4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9da2), 0xcb);
        EXPECT(gbc.readMem(0x9da3), 0x31);
        // CB 31 019E
        gbc.setState(0xce12, 0x9599, 0x9d70, 0xc2c5, 0x9402, 0x6d1c, 0x1, 0x1);
        gbc.writeMem(0xce12, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x9599);
        EXPECT(gbc.pc(), 0xce14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce12), 0xcb);
        EXPECT(gbc.readMem(0xce13), 0x31);
        // CB 31 019F
        gbc.setState(0x94a5, 0xdfb1, 0x8f50, 0x44d1, 0x97f, 0x749, 0x1, 0x0);
        gbc.writeMem(0x94a5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xdfb1);
        EXPECT(gbc.pc(), 0x94a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94a5), 0xcb);
        EXPECT(gbc.readMem(0x94a6), 0x31);
        // CB 31 01A0
        gbc.setState(0x1b79, 0x6225, 0x7100, 0x98c5, 0x491b, 0x9cc1, 0x0, 0x1);
        gbc.writeMem(0x1b79, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x6225);
        EXPECT(gbc.pc(), 0x1b7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01A1
        gbc.setState(0x1b3f, 0xf1f2, 0x95b0, 0xe947, 0xb200, 0xe75, 0x1, 0x0);
        gbc.writeMem(0x1b3f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xf1f2);
        EXPECT(gbc.pc(), 0x1b41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01A4
        gbc.setState(0x5bda, 0xb297, 0x27d0, 0x5e55, 0x8546, 0xcca2, 0x1, 0x0);
        gbc.writeMem(0x5bda, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xb297);
        EXPECT(gbc.pc(), 0x5bdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01A5
        gbc.setState(0xc7db, 0xd159, 0x2940, 0x8b92, 0x7ea2, 0x8699, 0x1, 0x0);
        gbc.writeMem(0xc7db, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xd159);
        EXPECT(gbc.pc(), 0xc7dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7db), 0xcb);
        EXPECT(gbc.readMem(0xc7dc), 0x31);
        // CB 31 01A6
        gbc.setState(0x4568, 0x517f, 0x8880, 0xc19a, 0x478d, 0x8d0, 0x0, 0x0);
        gbc.writeMem(0x4568, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x517f);
        EXPECT(gbc.pc(), 0x456a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01A8
        gbc.setState(0x77c3, 0x5046, 0x53b0, 0xf77d, 0x6d49, 0x3c99, 0x0, 0x1);
        gbc.writeMem(0x77c3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x5046);
        EXPECT(gbc.pc(), 0x77c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01A9
        gbc.setState(0x778f, 0x80a9, 0x17f0, 0x12d3, 0xe564, 0xfa1a, 0x1, 0x0);
        gbc.writeMem(0x778f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x80a9);
        EXPECT(gbc.pc(), 0x7791);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01AA
        gbc.setState(0xbe2a, 0xfa3c, 0xb980, 0xf512, 0xb094, 0x36, 0x1, 0x0);
        gbc.writeMem(0xbe2a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xfa3c);
        EXPECT(gbc.pc(), 0xbe2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe2a), 0xcb);
        EXPECT(gbc.readMem(0xbe2b), 0x31);
        // CB 31 01AB
        gbc.setState(0xc24b, 0xaa91, 0xb0d0, 0x6c5f, 0xee7d, 0x5e22, 0x0, 0x1);
        gbc.writeMem(0xc24b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xaa91);
        EXPECT(gbc.pc(), 0xc24d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc24b), 0xcb);
        EXPECT(gbc.readMem(0xc24c), 0x31);
        // CB 31 01AC
        gbc.setState(0xd8b9, 0x2ea7, 0x9a00, 0xebaa, 0x7fdf, 0xd851, 0x0, 0x1);
        gbc.writeMem(0xd8b9, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x2ea7);
        EXPECT(gbc.pc(), 0xd8bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8b9), 0xcb);
        EXPECT(gbc.readMem(0xd8ba), 0x31);
        // CB 31 01AD
        gbc.setState(0x8528, 0x4d36, 0x6080, 0xb873, 0xb32f, 0xbb97, 0x0, 0x1);
        gbc.writeMem(0x8528, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x4d36);
        EXPECT(gbc.pc(), 0x852a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8528), 0xcb);
        EXPECT(gbc.readMem(0x8529), 0x31);
        // CB 31 01AE
        gbc.setState(0x4ad1, 0x1662, 0xb9b0, 0xa21e, 0x9edb, 0x5615, 0x1, 0x0);
        gbc.writeMem(0x4ad1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x1662);
        EXPECT(gbc.pc(), 0x4ad3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01AF
        gbc.setState(0x69b6, 0x26fc, 0xc6c0, 0x21ae, 0xc58b, 0x5463, 0x0, 0x1);
        gbc.writeMem(0x69b6, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x26fc);
        EXPECT(gbc.pc(), 0x69b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01B0
        gbc.setState(0x9632, 0x2743, 0x4680, 0x53bf, 0x9035, 0x2455, 0x0, 0x0);
        gbc.writeMem(0x9632, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x2743);
        EXPECT(gbc.pc(), 0x9634);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9632), 0xcb);
        EXPECT(gbc.readMem(0x9633), 0x31);
        // CB 31 01B1
        gbc.setState(0xe213, 0x5dd1, 0xaf00, 0x42d9, 0xcb8, 0xd479, 0x1, 0x1);
        gbc.writeMem(0xe213, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x5dd1);
        EXPECT(gbc.pc(), 0xe215);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe213), 0xcb);
        EXPECT(gbc.readMem(0xe214), 0x31);
        // CB 31 01B2
        gbc.setState(0xcf0f, 0x62a, 0xaa20, 0x285a, 0x5779, 0x337c, 0x0, 0x1);
        gbc.writeMem(0xcf0f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x62a);
        EXPECT(gbc.pc(), 0xcf11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf0f), 0xcb);
        EXPECT(gbc.readMem(0xcf10), 0x31);
        // CB 31 01B3
        gbc.setState(0xee72, 0xc2b3, 0x2990, 0x9304, 0xda88, 0x1c63, 0x0, 0x0);
        gbc.writeMem(0xee72, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xc2b3);
        EXPECT(gbc.pc(), 0xee74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee72), 0xcb);
        EXPECT(gbc.readMem(0xee73), 0x31);
        // CB 31 01B4
        gbc.setState(0xc52, 0x8f43, 0x1580, 0xf912, 0x32c3, 0xf800, 0x1, 0x0);
        gbc.writeMem(0xc52, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8f43);
        EXPECT(gbc.pc(), 0xc54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01B5
        gbc.setState(0x32ff, 0x1916, 0x30c0, 0x17d6, 0x371b, 0x2312, 0x1, 0x0);
        gbc.writeMem(0x32ff, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x1916);
        EXPECT(gbc.pc(), 0x3301);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01B6
        gbc.setState(0xd526, 0xa048, 0x82f0, 0x1050, 0x90fb, 0xe8f1, 0x1, 0x1);
        gbc.writeMem(0xd526, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xa048);
        EXPECT(gbc.pc(), 0xd528);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd526), 0xcb);
        EXPECT(gbc.readMem(0xd527), 0x31);
        // CB 31 01B7
        gbc.setState(0x5ad3, 0xfe3c, 0xabd0, 0x3873, 0x6a09, 0xbfb9, 0x1, 0x0);
        gbc.writeMem(0x5ad3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xfe3c);
        EXPECT(gbc.pc(), 0x5ad5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01B8
        gbc.setState(0xbb29, 0x7626, 0x6510, 0x59b0, 0x2a92, 0x7f5a, 0x1, 0x1);
        gbc.writeMem(0xbb29, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7626);
        EXPECT(gbc.pc(), 0xbb2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb29), 0xcb);
        EXPECT(gbc.readMem(0xbb2a), 0x31);
        // CB 31 01B9
        gbc.setState(0x3e30, 0x1849, 0x5300, 0xe3e, 0x3db4, 0x7d93, 0x1, 0x1);
        gbc.writeMem(0x3e30, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x1849);
        EXPECT(gbc.pc(), 0x3e32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01BA
        gbc.setState(0x98b2, 0xeb81, 0x70f0, 0xbb0, 0x5e86, 0x7916, 0x1, 0x1);
        gbc.writeMem(0x98b2, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xeb81);
        EXPECT(gbc.pc(), 0x98b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98b2), 0xcb);
        EXPECT(gbc.readMem(0x98b3), 0x31);
        // CB 31 01BB
        gbc.setState(0xdbbc, 0x6c14, 0x18d0, 0x74f0, 0x6cd5, 0x99b1, 0x1, 0x1);
        gbc.writeMem(0xdbbc, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x6c14);
        EXPECT(gbc.pc(), 0xdbbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbbc), 0xcb);
        EXPECT(gbc.readMem(0xdbbd), 0x31);
        // CB 31 01BC
        gbc.setState(0x61, 0xb6cd, 0x3360, 0x9058, 0xd151, 0x5221, 0x0, 0x1);
        gbc.writeMem(0x61, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xb6cd);
        EXPECT(gbc.pc(), 0x63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01BD
        gbc.setState(0x45bf, 0x7e0a, 0x67e0, 0x9252, 0xa54d, 0x8c6c, 0x0, 0x1);
        gbc.writeMem(0x45bf, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x7e0a);
        EXPECT(gbc.pc(), 0x45c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01BE
        gbc.setState(0x1b60, 0x3433, 0xc110, 0x75c, 0x51b2, 0x1262, 0x1, 0x0);
        gbc.writeMem(0x1b60, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x3433);
        EXPECT(gbc.pc(), 0x1b62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01BF
        gbc.setState(0x1df3, 0x8ff9, 0x9ca0, 0xc151, 0xe112, 0x70b2, 0x0, 0x1);
        gbc.writeMem(0x1df3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x8ff9);
        EXPECT(gbc.pc(), 0x1df5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01C0
        gbc.setState(0x7f62, 0xb831, 0x7e60, 0xc115, 0xb0a2, 0x54f4, 0x1, 0x0);
        gbc.writeMem(0x7f62, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xb831);
        EXPECT(gbc.pc(), 0x7f64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01C1
        gbc.setState(0x82e8, 0xf5df, 0x4510, 0x3a63, 0x45a4, 0x984e, 0x0, 0x1);
        gbc.writeMem(0x82e8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xf5df);
        EXPECT(gbc.pc(), 0x82ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82e8), 0xcb);
        EXPECT(gbc.readMem(0x82e9), 0x31);
        // CB 31 01C2
        gbc.setState(0x64e2, 0xca18, 0x6260, 0x61db, 0x1b99, 0x9e3c, 0x1, 0x0);
        gbc.writeMem(0x64e2, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xca18);
        EXPECT(gbc.pc(), 0x64e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01C3
        gbc.setState(0x4773, 0xf662, 0xfe90, 0x559b, 0xde0, 0xa8c0, 0x0, 0x0);
        gbc.writeMem(0x4773, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xf662);
        EXPECT(gbc.pc(), 0x4775);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01C4
        gbc.setState(0x4f27, 0xd2eb, 0x7020, 0x32d3, 0xb4f, 0xdd6c, 0x0, 0x0);
        gbc.writeMem(0x4f27, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xd2eb);
        EXPECT(gbc.pc(), 0x4f29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01C5
        gbc.setState(0x72cf, 0x9eb0, 0x7220, 0x7425, 0x7773, 0xd4c2, 0x1, 0x1);
        gbc.writeMem(0x72cf, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x9eb0);
        EXPECT(gbc.pc(), 0x72d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01C6
        gbc.setState(0x57c0, 0x8a16, 0x4140, 0x81a8, 0xe2ab, 0xb017, 0x0, 0x1);
        gbc.writeMem(0x57c0, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x8a16);
        EXPECT(gbc.pc(), 0x57c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01C7
        gbc.setState(0xee14, 0x4d79, 0x5cc0, 0xa06e, 0x42eb, 0x9cfe, 0x1, 0x1);
        gbc.writeMem(0xee14, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x4d79);
        EXPECT(gbc.pc(), 0xee16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee14), 0xcb);
        EXPECT(gbc.readMem(0xee15), 0x31);
        // CB 31 01C8
        gbc.setState(0x4a87, 0xad09, 0x2340, 0x15c6, 0x62d, 0x2fae, 0x1, 0x1);
        gbc.writeMem(0x4a87, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xad09);
        EXPECT(gbc.pc(), 0x4a89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01C9
        gbc.setState(0x67bb, 0x1f21, 0xca30, 0xdcf7, 0xfd4d, 0xbf84, 0x0, 0x0);
        gbc.writeMem(0x67bb, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x1f21);
        EXPECT(gbc.pc(), 0x67bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01CA
        gbc.setState(0x51d3, 0xa6fa, 0x6830, 0x3d48, 0xbc05, 0xa64d, 0x0, 0x0);
        gbc.writeMem(0x51d3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xa6fa);
        EXPECT(gbc.pc(), 0x51d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01CB
        gbc.setState(0x7fda, 0xdf34, 0x3a20, 0x1592, 0x97b9, 0x7b8c, 0x0, 0x1);
        gbc.writeMem(0x7fda, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xdf34);
        EXPECT(gbc.pc(), 0x7fdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01CC
        gbc.setState(0x39bc, 0xe4b4, 0x1110, 0x611d, 0xe847, 0xaa05, 0x1, 0x1);
        gbc.writeMem(0x39bc, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xe4b4);
        EXPECT(gbc.pc(), 0x39be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01CD
        gbc.setState(0x1d7f, 0xfee5, 0xedf0, 0xf2ca, 0x9578, 0x710a, 0x1, 0x0);
        gbc.writeMem(0x1d7f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xfee5);
        EXPECT(gbc.pc(), 0x1d81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01CE
        gbc.setState(0xa4ec, 0xde12, 0xec10, 0x41a0, 0x1f19, 0x5835, 0x1, 0x1);
        gbc.writeMem(0xa4ec, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xde12);
        EXPECT(gbc.pc(), 0xa4ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4ec), 0xcb);
        EXPECT(gbc.readMem(0xa4ed), 0x31);
        // CB 31 01CF
        gbc.setState(0x194b, 0x4d11, 0xb720, 0xeca5, 0x1631, 0x5c16, 0x0, 0x0);
        gbc.writeMem(0x194b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x4d11);
        EXPECT(gbc.pc(), 0x194d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01D0
        gbc.setState(0x1e28, 0x8980, 0x2440, 0xb4c3, 0xd6fd, 0x2ddb, 0x1, 0x1);
        gbc.writeMem(0x1e28, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x8980);
        EXPECT(gbc.pc(), 0x1e2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01D1
        gbc.setState(0x37f7, 0xd9ff, 0xcac0, 0x872e, 0xd735, 0x4b97, 0x0, 0x1);
        gbc.writeMem(0x37f7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xd9ff);
        EXPECT(gbc.pc(), 0x37f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01D2
        gbc.setState(0xc867, 0x2483, 0x6c60, 0x8a46, 0x20e8, 0x4cc5, 0x1, 0x1);
        gbc.writeMem(0xc867, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x2483);
        EXPECT(gbc.pc(), 0xc869);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc867), 0xcb);
        EXPECT(gbc.readMem(0xc868), 0x31);
        // CB 31 01D3
        gbc.setState(0x4481, 0x4776, 0x1b90, 0x2d41, 0x417e, 0x9a06, 0x1, 0x1);
        gbc.writeMem(0x4481, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x4776);
        EXPECT(gbc.pc(), 0x4483);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01D4
        gbc.setState(0xc07d, 0x5ac, 0xa1e0, 0x1e8f, 0x837d, 0xbfcb, 0x1, 0x0);
        gbc.writeMem(0xc07d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x5ac);
        EXPECT(gbc.pc(), 0xc07f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc07d), 0xcb);
        EXPECT(gbc.readMem(0xc07e), 0x31);
        // CB 31 01D5
        gbc.setState(0xcdc8, 0xb39f, 0xe160, 0xae73, 0x6603, 0x105a, 0x1, 0x0);
        gbc.writeMem(0xcdc8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xb39f);
        EXPECT(gbc.pc(), 0xcdca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdc8), 0xcb);
        EXPECT(gbc.readMem(0xcdc9), 0x31);
        // CB 31 01D6
        gbc.setState(0x520a, 0x77d2, 0xca00, 0xc451, 0x6019, 0xdf7, 0x0, 0x0);
        gbc.writeMem(0x520a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x77d2);
        EXPECT(gbc.pc(), 0x520c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01D7
        gbc.setState(0x711a, 0x946c, 0xa220, 0x7de2, 0x12e3, 0x308, 0x1, 0x1);
        gbc.writeMem(0x711a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x946c);
        EXPECT(gbc.pc(), 0x711c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01D8
        gbc.setState(0xb8f9, 0xf3c5, 0x39a0, 0xabf5, 0x36bd, 0x22bb, 0x1, 0x1);
        gbc.writeMem(0xb8f9, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xf3c5);
        EXPECT(gbc.pc(), 0xb8fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8f9), 0xcb);
        EXPECT(gbc.readMem(0xb8fa), 0x31);
        // CB 31 01D9
        gbc.setState(0xeb1e, 0xaf8f, 0x9300, 0xd47c, 0xd7cf, 0x69fc, 0x0, 0x1);
        gbc.writeMem(0xeb1e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xaf8f);
        EXPECT(gbc.pc(), 0xeb20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb1e), 0xcb);
        EXPECT(gbc.readMem(0xeb1f), 0x31);
        // CB 31 01DA
        gbc.setState(0x9781, 0x65d9, 0xf6b0, 0xacf9, 0x3522, 0xa7d5, 0x0, 0x0);
        gbc.writeMem(0x9781, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x65d9);
        EXPECT(gbc.pc(), 0x9783);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9781), 0xcb);
        EXPECT(gbc.readMem(0x9782), 0x31);
        // CB 31 01DB
        gbc.setState(0xbfce, 0xa9d2, 0x2280, 0x7151, 0x390c, 0x5765, 0x0, 0x0);
        gbc.writeMem(0xbfce, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xa9d2);
        EXPECT(gbc.pc(), 0xbfd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfce), 0xcb);
        EXPECT(gbc.readMem(0xbfcf), 0x31);
        // CB 31 01DC
        gbc.setState(0x9818, 0xf46b, 0x9370, 0xc376, 0x6010, 0xa9e5, 0x1, 0x0);
        gbc.writeMem(0x9818, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xf46b);
        EXPECT(gbc.pc(), 0x981a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9818), 0xcb);
        EXPECT(gbc.readMem(0x9819), 0x31);
        // CB 31 01DD
        gbc.setState(0x24e1, 0x1641, 0xd490, 0xe090, 0x770f, 0x17b9, 0x0, 0x1);
        gbc.writeMem(0x24e1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x1641);
        EXPECT(gbc.pc(), 0x24e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01DE
        gbc.setState(0x903a, 0x4484, 0x9b70, 0xc653, 0xcfb4, 0xc664, 0x0, 0x1);
        gbc.writeMem(0x903a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x4484);
        EXPECT(gbc.pc(), 0x903c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x903a), 0xcb);
        EXPECT(gbc.readMem(0x903b), 0x31);
        // CB 31 01E0
        gbc.setState(0xb2a9, 0x12c0, 0x180, 0xa86c, 0x252c, 0x4983, 0x1, 0x1);
        gbc.writeMem(0xb2a9, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x12c0);
        EXPECT(gbc.pc(), 0xb2ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2a9), 0xcb);
        EXPECT(gbc.readMem(0xb2aa), 0x31);
        // CB 31 01E1
        gbc.setState(0xb57f, 0xea5b, 0xd9e0, 0x308a, 0xfa59, 0x727, 0x0, 0x0);
        gbc.writeMem(0xb57f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xea5b);
        EXPECT(gbc.pc(), 0xb581);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb57f), 0xcb);
        EXPECT(gbc.readMem(0xb580), 0x31);
        // CB 31 01E2
        gbc.setState(0xecab, 0x7fcb, 0x7150, 0xa13b, 0x44b6, 0xe7f4, 0x0, 0x0);
        gbc.writeMem(0xecab, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x7fcb);
        EXPECT(gbc.pc(), 0xecad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecab), 0xcb);
        EXPECT(gbc.readMem(0xecac), 0x31);
        // CB 31 01E3
        gbc.setState(0x88c7, 0x1c01, 0xd060, 0xfcf5, 0x2c9e, 0x1bb8, 0x0, 0x0);
        gbc.writeMem(0x88c7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x1c01);
        EXPECT(gbc.pc(), 0x88c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88c7), 0xcb);
        EXPECT(gbc.readMem(0x88c8), 0x31);
        // CB 31 01E4
        gbc.setState(0xa908, 0xca15, 0x670, 0xd6aa, 0xe90a, 0x38ac, 0x1, 0x0);
        gbc.writeMem(0xa908, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xca15);
        EXPECT(gbc.pc(), 0xa90a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa908), 0xcb);
        EXPECT(gbc.readMem(0xa909), 0x31);
        // CB 31 01E5
        gbc.setState(0x2fa0, 0x9679, 0x6ff0, 0x2ebd, 0xc2cb, 0x90b3, 0x1, 0x0);
        gbc.writeMem(0x2fa0, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x9679);
        EXPECT(gbc.pc(), 0x2fa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01E6
        gbc.setState(0x8855, 0x391d, 0x26f0, 0xf0e6, 0xfacb, 0x584f, 0x0, 0x0);
        gbc.writeMem(0x8855, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x391d);
        EXPECT(gbc.pc(), 0x8857);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8855), 0xcb);
        EXPECT(gbc.readMem(0x8856), 0x31);
        // CB 31 01E7
        gbc.setState(0xecbd, 0xa31, 0xa420, 0xdc8c, 0x59ce, 0xf972, 0x0, 0x1);
        gbc.writeMem(0xecbd, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xa31);
        EXPECT(gbc.pc(), 0xecbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecbd), 0xcb);
        EXPECT(gbc.readMem(0xecbe), 0x31);
        // CB 31 01E8
        gbc.setState(0x395c, 0xf727, 0xdc90, 0x9567, 0xbc96, 0x7207, 0x0, 0x1);
        gbc.writeMem(0x395c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xf727);
        EXPECT(gbc.pc(), 0x395e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01E9
        gbc.setState(0x3a78, 0xb3c5, 0x82d0, 0x5e8f, 0x2a8d, 0xc5a0, 0x0, 0x1);
        gbc.writeMem(0x3a78, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb3c5);
        EXPECT(gbc.pc(), 0x3a7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01EA
        gbc.setState(0x41ab, 0x1dd, 0xd490, 0xd7b6, 0x6ffe, 0xc6ad, 0x0, 0x1);
        gbc.writeMem(0x41ab, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1dd);
        EXPECT(gbc.pc(), 0x41ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01EB
        gbc.setState(0x233f, 0x2c86, 0xdf60, 0x49b6, 0x693, 0xfc52, 0x1, 0x0);
        gbc.writeMem(0x233f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x2c86);
        EXPECT(gbc.pc(), 0x2341);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01EC
        gbc.setState(0x3099, 0x84af, 0xd240, 0xb390, 0x1c0c, 0x38c1, 0x1, 0x0);
        gbc.writeMem(0x3099, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x84af);
        EXPECT(gbc.pc(), 0x309b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01ED
        gbc.setState(0xe15e, 0x8c59, 0xbac0, 0x8fd5, 0x1e2d, 0x2041, 0x1, 0x1);
        gbc.writeMem(0xe15e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x8c59);
        EXPECT(gbc.pc(), 0xe160);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe15e), 0xcb);
        EXPECT(gbc.readMem(0xe15f), 0x31);
        // CB 31 01EE
        gbc.setState(0xc8a2, 0xc9d, 0x6430, 0x36b1, 0xdd76, 0x29a3, 0x0, 0x1);
        gbc.writeMem(0xc8a2, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xc9d);
        EXPECT(gbc.pc(), 0xc8a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8a2), 0xcb);
        EXPECT(gbc.readMem(0xc8a3), 0x31);
        // CB 31 01EF
        gbc.setState(0x2600, 0xfa88, 0x8510, 0xa540, 0xe13e, 0x8ead, 0x0, 0x0);
        gbc.writeMem(0x2600, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xfa88);
        EXPECT(gbc.pc(), 0x2602);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01F0
        gbc.setState(0x4265, 0xff39, 0xcc50, 0x2478, 0x70f1, 0x5a38, 0x0, 0x1);
        gbc.writeMem(0x4265, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xff39);
        EXPECT(gbc.pc(), 0x4267);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01F1
        gbc.setState(0x49dc, 0x994e, 0xd110, 0x23db, 0x90a1, 0xe11d, 0x1, 0x1);
        gbc.writeMem(0x49dc, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x994e);
        EXPECT(gbc.pc(), 0x49de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01F2
        gbc.setState(0x2afe, 0xc2c9, 0xec60, 0x5b7d, 0x1ff7, 0x7046, 0x0, 0x0);
        gbc.writeMem(0x2afe, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xc2c9);
        EXPECT(gbc.pc(), 0x2b00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01F3
        gbc.setState(0xa9b7, 0x7b3b, 0x67f0, 0xcd7d, 0x4c2b, 0x3ddb, 0x0, 0x1);
        gbc.writeMem(0xa9b7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x7b3b);
        EXPECT(gbc.pc(), 0xa9b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9b7), 0xcb);
        EXPECT(gbc.readMem(0xa9b8), 0x31);
        // CB 31 01F4
        gbc.setState(0x9103, 0xd67, 0x8040, 0x1477, 0x659d, 0xce6e, 0x1, 0x0);
        gbc.writeMem(0x9103, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xd67);
        EXPECT(gbc.pc(), 0x9105);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9103), 0xcb);
        EXPECT(gbc.readMem(0x9104), 0x31);
        // CB 31 01F5
        gbc.setState(0xd96c, 0x52fd, 0xd00, 0x3dfc, 0xd3ed, 0xad42, 0x1, 0x1);
        gbc.writeMem(0xd96c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x52fd);
        EXPECT(gbc.pc(), 0xd96e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd96c), 0xcb);
        EXPECT(gbc.readMem(0xd96d), 0x31);
        // CB 31 01F6
        gbc.setState(0xea14, 0xa16c, 0x3c60, 0x9374, 0x25ae, 0x6999, 0x0, 0x1);
        gbc.writeMem(0xea14, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xa16c);
        EXPECT(gbc.pc(), 0xea16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea14), 0xcb);
        EXPECT(gbc.readMem(0xea15), 0x31);
        // CB 31 01F7
        gbc.setState(0xbf39, 0xde90, 0xcd90, 0x1e7d, 0x2221, 0xb8ed, 0x1, 0x0);
        gbc.writeMem(0xbf39, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xde90);
        EXPECT(gbc.pc(), 0xbf3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf39), 0xcb);
        EXPECT(gbc.readMem(0xbf3a), 0x31);
        // CB 31 01F8
        gbc.setState(0x4cd8, 0x80ad, 0x1d50, 0xbf9d, 0x192f, 0xb0ea, 0x1, 0x1);
        gbc.writeMem(0x4cd8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x80ad);
        EXPECT(gbc.pc(), 0x4cda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01F9
        gbc.setState(0xb830, 0xa72a, 0xd8f0, 0x44ef, 0xd85, 0x59f3, 0x1, 0x0);
        gbc.writeMem(0xb830, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa72a);
        EXPECT(gbc.pc(), 0xb832);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb830), 0xcb);
        EXPECT(gbc.readMem(0xb831), 0x31);
        // CB 31 01FA
        gbc.setState(0xdee8, 0x2992, 0x2e60, 0xdcda, 0x67dd, 0x26c, 0x1, 0x0);
        gbc.writeMem(0xdee8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x2992);
        EXPECT(gbc.pc(), 0xdeea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdee8), 0xcb);
        EXPECT(gbc.readMem(0xdee9), 0x31);
        // CB 31 01FB
        gbc.setState(0x96e7, 0xe439, 0xe00, 0xbf07, 0xf4f8, 0x732c, 0x1, 0x0);
        gbc.writeMem(0x96e7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xe439);
        EXPECT(gbc.pc(), 0x96e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96e7), 0xcb);
        EXPECT(gbc.readMem(0x96e8), 0x31);
        // CB 31 01FC
        gbc.setState(0x66c, 0xebda, 0xea70, 0x3946, 0xb75, 0xdf03, 0x0, 0x1);
        gbc.writeMem(0x66c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xebda);
        EXPECT(gbc.pc(), 0x66e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01FD
        gbc.setState(0x8f2d, 0xae82, 0x9ce0, 0x3d05, 0x9348, 0x7c74, 0x1, 0x1);
        gbc.writeMem(0x8f2d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xae82);
        EXPECT(gbc.pc(), 0x8f2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f2d), 0xcb);
        EXPECT(gbc.readMem(0x8f2e), 0x31);
        // CB 31 01FE
        gbc.setState(0x641f, 0xbc5b, 0xca10, 0xda9e, 0x52f5, 0xb2db, 0x1, 0x0);
        gbc.writeMem(0x641f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xbc5b);
        EXPECT(gbc.pc(), 0x6421);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 01FF
        gbc.setState(0x20a4, 0x880d, 0x29f0, 0x694a, 0x32d7, 0xf81f, 0x1, 0x1);
        gbc.writeMem(0x20a4, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x880d);
        EXPECT(gbc.pc(), 0x20a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0200
        gbc.setState(0x17d4, 0x2d72, 0x63e0, 0x6e8a, 0x103a, 0x6f87, 0x1, 0x1);
        gbc.writeMem(0x17d4, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x2d72);
        EXPECT(gbc.pc(), 0x17d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0201
        gbc.setState(0x9df5, 0xb425, 0x6500, 0xc0b7, 0xf5c0, 0xd3fc, 0x0, 0x1);
        gbc.writeMem(0x9df5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xb425);
        EXPECT(gbc.pc(), 0x9df7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9df5), 0xcb);
        EXPECT(gbc.readMem(0x9df6), 0x31);
        // CB 31 0202
        gbc.setState(0x9bbf, 0x1b03, 0x90c0, 0x10a7, 0x1602, 0xea6a, 0x1, 0x1);
        gbc.writeMem(0x9bbf, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x1b03);
        EXPECT(gbc.pc(), 0x9bc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bbf), 0xcb);
        EXPECT(gbc.readMem(0x9bc0), 0x31);
        // CB 31 0203
        gbc.setState(0xcb2e, 0x810f, 0xef50, 0x46e8, 0xbbfd, 0xf848, 0x1, 0x0);
        gbc.writeMem(0xcb2e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x810f);
        EXPECT(gbc.pc(), 0xcb30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb2e), 0xcb);
        EXPECT(gbc.readMem(0xcb2f), 0x31);
        // CB 31 0204
        gbc.setState(0x1aad, 0xfd9a, 0x8560, 0x949c, 0x3e48, 0x1e45, 0x0, 0x1);
        gbc.writeMem(0x1aad, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xfd9a);
        EXPECT(gbc.pc(), 0x1aaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0205
        gbc.setState(0xa072, 0xf94b, 0xf660, 0xd67f, 0x9425, 0x275b, 0x1, 0x0);
        gbc.writeMem(0xa072, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xf94b);
        EXPECT(gbc.pc(), 0xa074);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa072), 0xcb);
        EXPECT(gbc.readMem(0xa073), 0x31);
        // CB 31 0206
        gbc.setState(0xcccd, 0xf03f, 0x2160, 0x2c2d, 0x9ca1, 0x37d0, 0x0, 0x0);
        gbc.writeMem(0xcccd, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xf03f);
        EXPECT(gbc.pc(), 0xcccf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcccd), 0xcb);
        EXPECT(gbc.readMem(0xccce), 0x31);
        // CB 31 0207
        gbc.setState(0x4c8, 0xfdae, 0x6dc0, 0xda04, 0xab6f, 0x3ba, 0x0, 0x0);
        gbc.writeMem(0x4c8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xfdae);
        EXPECT(gbc.pc(), 0x4ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0208
        gbc.setState(0x2d6b, 0x6b9b, 0xc770, 0xb17a, 0x22cc, 0xa4e5, 0x1, 0x0);
        gbc.writeMem(0x2d6b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x6b9b);
        EXPECT(gbc.pc(), 0x2d6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0209
        gbc.setState(0xa67b, 0xf76, 0x19d0, 0x657d, 0x441f, 0x91ab, 0x0, 0x1);
        gbc.writeMem(0xa67b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xf76);
        EXPECT(gbc.pc(), 0xa67d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa67b), 0xcb);
        EXPECT(gbc.readMem(0xa67c), 0x31);
        // CB 31 020A
        gbc.setState(0x72d8, 0x43cf, 0xa720, 0x5201, 0x5c69, 0x49b, 0x0, 0x1);
        gbc.writeMem(0x72d8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x43cf);
        EXPECT(gbc.pc(), 0x72da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 020B
        gbc.setState(0xd7b5, 0xc165, 0x5f70, 0xa9c8, 0x7eba, 0xf89a, 0x0, 0x1);
        gbc.writeMem(0xd7b5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xc165);
        EXPECT(gbc.pc(), 0xd7b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7b5), 0xcb);
        EXPECT(gbc.readMem(0xd7b6), 0x31);
        // CB 31 020C
        gbc.setState(0x35a7, 0xd085, 0xbc0, 0x79fb, 0x3bc8, 0x6473, 0x0, 0x0);
        gbc.writeMem(0x35a7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xd085);
        EXPECT(gbc.pc(), 0x35a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 020F
        gbc.setState(0xda60, 0xfeb6, 0xa870, 0x1a1b, 0x2ad4, 0xb298, 0x0, 0x1);
        gbc.writeMem(0xda60, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xfeb6);
        EXPECT(gbc.pc(), 0xda62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda60), 0xcb);
        EXPECT(gbc.readMem(0xda61), 0x31);
        // CB 31 0210
        gbc.setState(0x9f40, 0x5760, 0xf30, 0x753, 0x2b4d, 0xa316, 0x0, 0x1);
        gbc.writeMem(0x9f40, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x5760);
        EXPECT(gbc.pc(), 0x9f42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f40), 0xcb);
        EXPECT(gbc.readMem(0x9f41), 0x31);
        // CB 31 0211
        gbc.setState(0x1724, 0xb2bf, 0x4380, 0x41cb, 0xd25, 0x5459, 0x0, 0x0);
        gbc.writeMem(0x1724, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xb2bf);
        EXPECT(gbc.pc(), 0x1726);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0212
        gbc.setState(0x8f7, 0x95e7, 0xa6f0, 0x873c, 0xaba5, 0x37f6, 0x1, 0x1);
        gbc.writeMem(0x8f7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x95e7);
        EXPECT(gbc.pc(), 0x8f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0213
        gbc.setState(0x2f51, 0x2fee, 0xd00, 0x7fc5, 0xc7c1, 0x5243, 0x0, 0x1);
        gbc.writeMem(0x2f51, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x2fee);
        EXPECT(gbc.pc(), 0x2f53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0214
        gbc.setState(0x682b, 0x5fa8, 0xbd10, 0x7fc2, 0x376e, 0x6dd9, 0x1, 0x1);
        gbc.writeMem(0x682b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x5fa8);
        EXPECT(gbc.pc(), 0x682d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0215
        gbc.setState(0x9271, 0x2e67, 0x54e0, 0xc745, 0x86a8, 0x38f0, 0x1, 0x0);
        gbc.writeMem(0x9271, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x2e67);
        EXPECT(gbc.pc(), 0x9273);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9271), 0xcb);
        EXPECT(gbc.readMem(0x9272), 0x31);
        // CB 31 0216
        gbc.setState(0x3e37, 0xb058, 0x2260, 0x695b, 0xe157, 0x41df, 0x1, 0x0);
        gbc.writeMem(0x3e37, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xb058);
        EXPECT(gbc.pc(), 0x3e39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0217
        gbc.setState(0xa569, 0x9977, 0x47a0, 0x135, 0xb458, 0xaf50, 0x1, 0x1);
        gbc.writeMem(0xa569, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x9977);
        EXPECT(gbc.pc(), 0xa56b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa569), 0xcb);
        EXPECT(gbc.readMem(0xa56a), 0x31);
        // CB 31 0218
        gbc.setState(0x490d, 0x2a79, 0xea50, 0x1c62, 0x6f68, 0xe34c, 0x1, 0x0);
        gbc.writeMem(0x490d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x2a79);
        EXPECT(gbc.pc(), 0x490f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0219
        gbc.setState(0x51c8, 0x5f0f, 0x1240, 0x15ab, 0xc54c, 0x561b, 0x0, 0x0);
        gbc.writeMem(0x51c8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x5f0f);
        EXPECT(gbc.pc(), 0x51ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 021A
        gbc.setState(0x5d04, 0x3990, 0xac0, 0xa8c9, 0x7cd6, 0xd18f, 0x0, 0x1);
        gbc.writeMem(0x5d04, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x3990);
        EXPECT(gbc.pc(), 0x5d06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 021B
        gbc.setState(0xe2a7, 0xade0, 0x4a90, 0xd7ba, 0xde3f, 0xe32d, 0x1, 0x0);
        gbc.writeMem(0xe2a7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xade0);
        EXPECT(gbc.pc(), 0xe2a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2a7), 0xcb);
        EXPECT(gbc.readMem(0xe2a8), 0x31);
        // CB 31 021C
        gbc.setState(0xe319, 0x9e58, 0xd3e0, 0x6aa7, 0x2583, 0x126f, 0x1, 0x1);
        gbc.writeMem(0xe319, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x9e58);
        EXPECT(gbc.pc(), 0xe31b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe319), 0xcb);
        EXPECT(gbc.readMem(0xe31a), 0x31);
        // CB 31 021D
        gbc.setState(0xc3f8, 0x8d0, 0xe260, 0xb5e8, 0x395f, 0x349d, 0x1, 0x0);
        gbc.writeMem(0xc3f8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x8d0);
        EXPECT(gbc.pc(), 0xc3fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3f8), 0xcb);
        EXPECT(gbc.readMem(0xc3f9), 0x31);
        // CB 31 021E
        gbc.setState(0xcd88, 0xe29d, 0x12c0, 0xb24e, 0xc8c5, 0x9ae7, 0x1, 0x0);
        gbc.writeMem(0xcd88, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xe29d);
        EXPECT(gbc.pc(), 0xcd8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd88), 0xcb);
        EXPECT(gbc.readMem(0xcd89), 0x31);
        // CB 31 021F
        gbc.setState(0x915c, 0xc8d6, 0xb90, 0x9b66, 0xbee9, 0x5525, 0x1, 0x1);
        gbc.writeMem(0x915c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xc8d6);
        EXPECT(gbc.pc(), 0x915e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x915c), 0xcb);
        EXPECT(gbc.readMem(0x915d), 0x31);
        // CB 31 0220
        gbc.setState(0x2ebb, 0x73ab, 0x7db0, 0xf971, 0x7aa5, 0xe61d, 0x0, 0x1);
        gbc.writeMem(0x2ebb, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x73ab);
        EXPECT(gbc.pc(), 0x2ebd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0221
        gbc.setState(0xe0ad, 0x3a85, 0xc240, 0x1101, 0x3184, 0x514e, 0x0, 0x1);
        gbc.writeMem(0xe0ad, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x3a85);
        EXPECT(gbc.pc(), 0xe0af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0ad), 0xcb);
        EXPECT(gbc.readMem(0xe0ae), 0x31);
        // CB 31 0222
        gbc.setState(0x42d0, 0x3483, 0x1800, 0x1b44, 0x830d, 0x2dce, 0x0, 0x1);
        gbc.writeMem(0x42d0, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x3483);
        EXPECT(gbc.pc(), 0x42d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0223
        gbc.setState(0x7c06, 0x361, 0x7580, 0x6df1, 0x9740, 0xecac, 0x1, 0x1);
        gbc.writeMem(0x7c06, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x361);
        EXPECT(gbc.pc(), 0x7c08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0224
        gbc.setState(0x2238, 0x5111, 0xc700, 0x2fdc, 0x342e, 0xbacd, 0x0, 0x1);
        gbc.writeMem(0x2238, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x5111);
        EXPECT(gbc.pc(), 0x223a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0225
        gbc.setState(0xc1b5, 0xe4d7, 0xd460, 0xe3ca, 0x995e, 0xf136, 0x0, 0x0);
        gbc.writeMem(0xc1b5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xe4d7);
        EXPECT(gbc.pc(), 0xc1b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1b5), 0xcb);
        EXPECT(gbc.readMem(0xc1b6), 0x31);
        // CB 31 0226
        gbc.setState(0x5f10, 0x2017, 0xa730, 0x96d6, 0x2974, 0xd6c2, 0x1, 0x1);
        gbc.writeMem(0x5f10, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x2017);
        EXPECT(gbc.pc(), 0x5f12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0228
        gbc.setState(0x2084, 0x1bfa, 0x4b70, 0x22d6, 0xb1b3, 0x72ef, 0x1, 0x0);
        gbc.writeMem(0x2084, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x1bfa);
        EXPECT(gbc.pc(), 0x2086);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0229
        gbc.setState(0x8eff, 0xd13e, 0x3e90, 0xb353, 0x9060, 0x226b, 0x0, 0x1);
        gbc.writeMem(0x8eff, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xd13e);
        EXPECT(gbc.pc(), 0x8f01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8eff), 0xcb);
        EXPECT(gbc.readMem(0x8f00), 0x31);
        // CB 31 022A
        gbc.setState(0x426a, 0xb9fd, 0x6eb0, 0xbb0a, 0xb406, 0x653b, 0x0, 0x0);
        gbc.writeMem(0x426a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xb9fd);
        EXPECT(gbc.pc(), 0x426c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 022B
        gbc.setState(0xa62d, 0x61d4, 0x160, 0xd682, 0x3b71, 0xb38c, 0x1, 0x0);
        gbc.writeMem(0xa62d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x61d4);
        EXPECT(gbc.pc(), 0xa62f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa62d), 0xcb);
        EXPECT(gbc.readMem(0xa62e), 0x31);
        // CB 31 022C
        gbc.setState(0x7e43, 0xc793, 0xe0f0, 0x2590, 0x52dd, 0x1eef, 0x1, 0x0);
        gbc.writeMem(0x7e43, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xc793);
        EXPECT(gbc.pc(), 0x7e45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 022E
        gbc.setState(0x5660, 0x8d19, 0xd3f0, 0xad41, 0x1a67, 0xd41c, 0x0, 0x1);
        gbc.writeMem(0x5660, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x8d19);
        EXPECT(gbc.pc(), 0x5662);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 022F
        gbc.setState(0x8672, 0x7b9d, 0xb650, 0x69ca, 0x55cc, 0x5e8e, 0x1, 0x0);
        gbc.writeMem(0x8672, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x7b9d);
        EXPECT(gbc.pc(), 0x8674);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8672), 0xcb);
        EXPECT(gbc.readMem(0x8673), 0x31);
        // CB 31 0230
        gbc.setState(0x8ccf, 0x1271, 0x8ec0, 0xef0c, 0x9111, 0xfa51, 0x0, 0x0);
        gbc.writeMem(0x8ccf, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x1271);
        EXPECT(gbc.pc(), 0x8cd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ccf), 0xcb);
        EXPECT(gbc.readMem(0x8cd0), 0x31);
        // CB 31 0231
        gbc.setState(0xba61, 0xbeab, 0xb680, 0xadbe, 0x56e9, 0xb7b3, 0x1, 0x1);
        gbc.writeMem(0xba61, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xbeab);
        EXPECT(gbc.pc(), 0xba63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba61), 0xcb);
        EXPECT(gbc.readMem(0xba62), 0x31);
        // CB 31 0232
        gbc.setState(0x1279, 0x85d7, 0xc820, 0x2227, 0xf11b, 0x177b, 0x0, 0x0);
        gbc.writeMem(0x1279, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x85d7);
        EXPECT(gbc.pc(), 0x127b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0233
        gbc.setState(0x25ab, 0x2702, 0x5d60, 0xa861, 0x4dbb, 0xf65c, 0x1, 0x0);
        gbc.writeMem(0x25ab, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x2702);
        EXPECT(gbc.pc(), 0x25ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0234
        gbc.setState(0x5c68, 0xaf8b, 0x9070, 0x5e46, 0x4717, 0xda48, 0x1, 0x1);
        gbc.writeMem(0x5c68, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xaf8b);
        EXPECT(gbc.pc(), 0x5c6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0235
        gbc.setState(0x4b05, 0x7a41, 0x7960, 0x849b, 0x1c4f, 0x890, 0x1, 0x1);
        gbc.writeMem(0x4b05, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x7a41);
        EXPECT(gbc.pc(), 0x4b07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0236
        gbc.setState(0x1cd5, 0x6b3, 0x7760, 0x537e, 0x2e58, 0xbd3b, 0x0, 0x0);
        gbc.writeMem(0x1cd5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x6b3);
        EXPECT(gbc.pc(), 0x1cd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0237
        gbc.setState(0xb45a, 0x9595, 0x2310, 0xa882, 0x2324, 0x2dea, 0x1, 0x1);
        gbc.writeMem(0xb45a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x9595);
        EXPECT(gbc.pc(), 0xb45c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb45a), 0xcb);
        EXPECT(gbc.readMem(0xb45b), 0x31);
        // CB 31 0238
        gbc.setState(0x8716, 0x52db, 0xbe20, 0x9185, 0x61d6, 0x6ce6, 0x1, 0x0);
        gbc.writeMem(0x8716, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x52db);
        EXPECT(gbc.pc(), 0x8718);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8716), 0xcb);
        EXPECT(gbc.readMem(0x8717), 0x31);
        // CB 31 023A
        gbc.setState(0xea24, 0x6d35, 0x1c50, 0x620e, 0x904e, 0xbc17, 0x0, 0x1);
        gbc.writeMem(0xea24, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x6d35);
        EXPECT(gbc.pc(), 0xea26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea24), 0xcb);
        EXPECT(gbc.readMem(0xea25), 0x31);
        // CB 31 023B
        gbc.setState(0x1d5f, 0x11ea, 0x71a0, 0x46d, 0xbfe8, 0xe17d, 0x0, 0x1);
        gbc.writeMem(0x1d5f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x11ea);
        EXPECT(gbc.pc(), 0x1d61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 023C
        gbc.setState(0x19f9, 0x8bc4, 0xeec0, 0x816b, 0x3d17, 0x6435, 0x0, 0x0);
        gbc.writeMem(0x19f9, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x8bc4);
        EXPECT(gbc.pc(), 0x19fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 023D
        gbc.setState(0xef3e, 0xca7d, 0x8600, 0xf94, 0xd843, 0x52b8, 0x0, 0x0);
        gbc.writeMem(0xef3e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xca7d);
        EXPECT(gbc.pc(), 0xef40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef3e), 0xcb);
        EXPECT(gbc.readMem(0xef3f), 0x31);
        // CB 31 023E
        gbc.setState(0x383, 0x53c6, 0xadb0, 0x9340, 0xfa2c, 0x5096, 0x0, 0x1);
        gbc.writeMem(0x383, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x53c6);
        EXPECT(gbc.pc(), 0x385);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 023F
        gbc.setState(0xd2b8, 0x8cdc, 0x2a50, 0x2c1b, 0xa3fc, 0x9141, 0x1, 0x1);
        gbc.writeMem(0xd2b8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x8cdc);
        EXPECT(gbc.pc(), 0xd2ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2b8), 0xcb);
        EXPECT(gbc.readMem(0xd2b9), 0x31);
        // CB 31 0240
        gbc.setState(0xa37, 0x8fdf, 0x6ec0, 0xa650, 0xa2be, 0x44e, 0x0, 0x1);
        gbc.writeMem(0xa37, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x8fdf);
        EXPECT(gbc.pc(), 0xa39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0241
        gbc.setState(0x6eb1, 0x4e5e, 0x6f60, 0x6bd7, 0x7beb, 0xc176, 0x1, 0x1);
        gbc.writeMem(0x6eb1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x4e5e);
        EXPECT(gbc.pc(), 0x6eb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0242
        gbc.setState(0x18d, 0xbe2d, 0x79d0, 0xf378, 0x9b6f, 0x36a6, 0x1, 0x0);
        gbc.writeMem(0x18d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xbe2d);
        EXPECT(gbc.pc(), 0x18f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0243
        gbc.setState(0xce21, 0x240a, 0x8d30, 0x20d7, 0xb4fd, 0xb06, 0x1, 0x0);
        gbc.writeMem(0xce21, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x240a);
        EXPECT(gbc.pc(), 0xce23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce21), 0xcb);
        EXPECT(gbc.readMem(0xce22), 0x31);
        // CB 31 0244
        gbc.setState(0xd0d0, 0x4e39, 0x1ed0, 0x56c, 0x359b, 0xd76b, 0x1, 0x0);
        gbc.writeMem(0xd0d0, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x4e39);
        EXPECT(gbc.pc(), 0xd0d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0d0), 0xcb);
        EXPECT(gbc.readMem(0xd0d1), 0x31);
        // CB 31 0245
        gbc.setState(0x70be, 0xa6ef, 0x8cb0, 0x1d87, 0xe8e7, 0xa009, 0x0, 0x0);
        gbc.writeMem(0x70be, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xa6ef);
        EXPECT(gbc.pc(), 0x70c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0246
        gbc.setState(0xa5ae, 0xb701, 0x7f30, 0xb0b9, 0x61ec, 0x78b3, 0x0, 0x1);
        gbc.writeMem(0xa5ae, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xb701);
        EXPECT(gbc.pc(), 0xa5b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5ae), 0xcb);
        EXPECT(gbc.readMem(0xa5af), 0x31);
        // CB 31 0248
        gbc.setState(0x8e6b, 0xd3ee, 0x98a0, 0xeb5d, 0x4da9, 0xebf7, 0x1, 0x1);
        gbc.writeMem(0x8e6b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xd3ee);
        EXPECT(gbc.pc(), 0x8e6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e6b), 0xcb);
        EXPECT(gbc.readMem(0x8e6c), 0x31);
        // CB 31 0249
        gbc.setState(0xb32b, 0x819a, 0x6900, 0xfdb9, 0x8763, 0x3787, 0x1, 0x0);
        gbc.writeMem(0xb32b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x819a);
        EXPECT(gbc.pc(), 0xb32d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb32b), 0xcb);
        EXPECT(gbc.readMem(0xb32c), 0x31);
        // CB 31 024A
        gbc.setState(0x9ac7, 0x712, 0xffd0, 0xcd4, 0x161f, 0xd1dc, 0x1, 0x1);
        gbc.writeMem(0x9ac7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x712);
        EXPECT(gbc.pc(), 0x9ac9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ac7), 0xcb);
        EXPECT(gbc.readMem(0x9ac8), 0x31);
        // CB 31 024B
        gbc.setState(0x39bb, 0x8a88, 0xca50, 0xcdc3, 0x3f1f, 0x31fc, 0x0, 0x1);
        gbc.writeMem(0x39bb, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x8a88);
        EXPECT(gbc.pc(), 0x39bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 024C
        gbc.setState(0x5ab5, 0x8a03, 0x4630, 0x9161, 0x4717, 0x84cb, 0x1, 0x1);
        gbc.writeMem(0x5ab5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x8a03);
        EXPECT(gbc.pc(), 0x5ab7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 024D
        gbc.setState(0x4989, 0x43e8, 0xbf60, 0x93a0, 0xde7f, 0xa2a5, 0x1, 0x1);
        gbc.writeMem(0x4989, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x43e8);
        EXPECT(gbc.pc(), 0x498b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 024E
        gbc.setState(0xd9f, 0x54bc, 0xd630, 0xd644, 0x9e39, 0x1dcf, 0x0, 0x0);
        gbc.writeMem(0xd9f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x54bc);
        EXPECT(gbc.pc(), 0xda1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 024F
        gbc.setState(0x42ca, 0x7c8c, 0x5d70, 0xe7d7, 0x4b37, 0xf2bd, 0x0, 0x1);
        gbc.writeMem(0x42ca, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x7c8c);
        EXPECT(gbc.pc(), 0x42cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0250
        gbc.setState(0x660, 0x621e, 0x98f0, 0x93ef, 0x5ae7, 0x4d2e, 0x1, 0x0);
        gbc.writeMem(0x660, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x621e);
        EXPECT(gbc.pc(), 0x662);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0251
        gbc.setState(0x1e96, 0x847d, 0x4ca0, 0xdfac, 0xc546, 0x5312, 0x0, 0x0);
        gbc.writeMem(0x1e96, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x847d);
        EXPECT(gbc.pc(), 0x1e98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0252
        gbc.setState(0x8ca8, 0x56c3, 0xe960, 0x26ba, 0x663e, 0xce44, 0x1, 0x1);
        gbc.writeMem(0x8ca8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x56c3);
        EXPECT(gbc.pc(), 0x8caa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ca8), 0xcb);
        EXPECT(gbc.readMem(0x8ca9), 0x31);
        // CB 31 0253
        gbc.setState(0xb3eb, 0x7306, 0xb640, 0x4b67, 0xecc2, 0x9ff5, 0x1, 0x1);
        gbc.writeMem(0xb3eb, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x7306);
        EXPECT(gbc.pc(), 0xb3ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3eb), 0xcb);
        EXPECT(gbc.readMem(0xb3ec), 0x31);
        // CB 31 0254
        gbc.setState(0x597c, 0x70fb, 0x9640, 0x700a, 0xa1a4, 0xe2b, 0x1, 0x1);
        gbc.writeMem(0x597c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x70fb);
        EXPECT(gbc.pc(), 0x597e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0255
        gbc.setState(0x8119, 0xac2f, 0x58e0, 0x2af8, 0x6351, 0x4e04, 0x0, 0x0);
        gbc.writeMem(0x8119, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xac2f);
        EXPECT(gbc.pc(), 0x811b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8119), 0xcb);
        EXPECT(gbc.readMem(0x811a), 0x31);
        // CB 31 0256
        gbc.setState(0xe707, 0x8e74, 0x49a0, 0x2bf, 0xb539, 0x9b0, 0x0, 0x1);
        gbc.writeMem(0xe707, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x8e74);
        EXPECT(gbc.pc(), 0xe709);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe707), 0xcb);
        EXPECT(gbc.readMem(0xe708), 0x31);
        // CB 31 0257
        gbc.setState(0x4863, 0x21c2, 0xb430, 0xe93c, 0x9ba2, 0x9bdd, 0x1, 0x0);
        gbc.writeMem(0x4863, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x21c2);
        EXPECT(gbc.pc(), 0x4865);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0258
        gbc.setState(0x6c1a, 0x7173, 0xe4e0, 0x68b5, 0x760b, 0xc8a3, 0x0, 0x0);
        gbc.writeMem(0x6c1a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x7173);
        EXPECT(gbc.pc(), 0x6c1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0259
        gbc.setState(0x8823, 0x906c, 0x6470, 0xd04c, 0x4ed4, 0x7a7a, 0x0, 0x0);
        gbc.writeMem(0x8823, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x906c);
        EXPECT(gbc.pc(), 0x8825);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8823), 0xcb);
        EXPECT(gbc.readMem(0x8824), 0x31);
        // CB 31 025A
        gbc.setState(0x46b6, 0x6075, 0x7a40, 0x785a, 0xc9da, 0xdab2, 0x0, 0x1);
        gbc.writeMem(0x46b6, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6075);
        EXPECT(gbc.pc(), 0x46b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 025B
        gbc.setState(0x4785, 0x64cd, 0x2440, 0x7ce0, 0x1ac4, 0x917a, 0x1, 0x0);
        gbc.writeMem(0x4785, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x64cd);
        EXPECT(gbc.pc(), 0x4787);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 025C
        gbc.setState(0xab7e, 0x9c0e, 0x1d0, 0xc57, 0x34f7, 0x63f1, 0x0, 0x0);
        gbc.writeMem(0xab7e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x9c0e);
        EXPECT(gbc.pc(), 0xab80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab7e), 0xcb);
        EXPECT(gbc.readMem(0xab7f), 0x31);
        // CB 31 025D
        gbc.setState(0xecd6, 0x6da3, 0x4d0, 0x2850, 0x7a3f, 0xe7c1, 0x1, 0x0);
        gbc.writeMem(0xecd6, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x6da3);
        EXPECT(gbc.pc(), 0xecd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecd6), 0xcb);
        EXPECT(gbc.readMem(0xecd7), 0x31);
        // CB 31 025E
        gbc.setState(0xdbc7, 0xea4e, 0x3d0, 0xea7a, 0x4ecb, 0xc5a7, 0x1, 0x1);
        gbc.writeMem(0xdbc7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xea4e);
        EXPECT(gbc.pc(), 0xdbc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbc7), 0xcb);
        EXPECT(gbc.readMem(0xdbc8), 0x31);
        // CB 31 025F
        gbc.setState(0x29cc, 0x4172, 0xd720, 0xd351, 0x280b, 0x4115, 0x0, 0x0);
        gbc.writeMem(0x29cc, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x4172);
        EXPECT(gbc.pc(), 0x29ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0260
        gbc.setState(0xeb0c, 0x9edf, 0x26f0, 0xb5d9, 0x4e0b, 0xf97a, 0x1, 0x1);
        gbc.writeMem(0xeb0c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x9edf);
        EXPECT(gbc.pc(), 0xeb0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb0c), 0xcb);
        EXPECT(gbc.readMem(0xeb0d), 0x31);
        // CB 31 0261
        gbc.setState(0x5093, 0x35ec, 0x1e30, 0x77d2, 0xa648, 0xd97c, 0x1, 0x1);
        gbc.writeMem(0x5093, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x35ec);
        EXPECT(gbc.pc(), 0x5095);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0262
        gbc.setState(0x23c4, 0xa065, 0x5910, 0x8358, 0x4d5c, 0x1443, 0x0, 0x0);
        gbc.writeMem(0x23c4, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xa065);
        EXPECT(gbc.pc(), 0x23c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0263
        gbc.setState(0x646c, 0x4d76, 0x22f0, 0xfc0e, 0xab60, 0x9409, 0x1, 0x0);
        gbc.writeMem(0x646c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x4d76);
        EXPECT(gbc.pc(), 0x646e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0264
        gbc.setState(0x48e1, 0xeac4, 0xaee0, 0x16bb, 0x9798, 0xf007, 0x1, 0x0);
        gbc.writeMem(0x48e1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xeac4);
        EXPECT(gbc.pc(), 0x48e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0265
        gbc.setState(0x8c25, 0x4ad5, 0xa0e0, 0x5709, 0x3c2b, 0x78b0, 0x0, 0x1);
        gbc.writeMem(0x8c25, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x4ad5);
        EXPECT(gbc.pc(), 0x8c27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c25), 0xcb);
        EXPECT(gbc.readMem(0x8c26), 0x31);
        // CB 31 0266
        gbc.setState(0x477a, 0xd969, 0x57b0, 0x3a5, 0xa2da, 0xcd2b, 0x0, 0x1);
        gbc.writeMem(0x477a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xd969);
        EXPECT(gbc.pc(), 0x477c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0267
        gbc.setState(0x48fd, 0xe0f1, 0x9740, 0xe5fe, 0x393b, 0x313e, 0x1, 0x1);
        gbc.writeMem(0x48fd, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xe0f1);
        EXPECT(gbc.pc(), 0x48ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0268
        gbc.setState(0x6be3, 0x9f4e, 0x9400, 0x7918, 0xe1d3, 0x99b9, 0x1, 0x1);
        gbc.writeMem(0x6be3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x9f4e);
        EXPECT(gbc.pc(), 0x6be5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0269
        gbc.setState(0x92c0, 0x1b95, 0xaf60, 0x24bf, 0x1ea0, 0x33be, 0x1, 0x0);
        gbc.writeMem(0x92c0, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x1b95);
        EXPECT(gbc.pc(), 0x92c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92c0), 0xcb);
        EXPECT(gbc.readMem(0x92c1), 0x31);
        // CB 31 026A
        gbc.setState(0x3c47, 0x2681, 0x8d70, 0x29a6, 0x6665, 0x57f2, 0x0, 0x0);
        gbc.writeMem(0x3c47, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x2681);
        EXPECT(gbc.pc(), 0x3c49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 026B
        gbc.setState(0x1bac, 0x500c, 0xf260, 0xa7ce, 0x552b, 0x7a57, 0x0, 0x0);
        gbc.writeMem(0x1bac, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x500c);
        EXPECT(gbc.pc(), 0x1bae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 026C
        gbc.setState(0x5ff6, 0xe0b6, 0x5d50, 0x5dcf, 0x96af, 0x827b, 0x0, 0x0);
        gbc.writeMem(0x5ff6, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xe0b6);
        EXPECT(gbc.pc(), 0x5ff8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 026D
        gbc.setState(0xd08a, 0x76d9, 0x23c0, 0xda63, 0x201c, 0x489, 0x0, 0x1);
        gbc.writeMem(0xd08a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x76d9);
        EXPECT(gbc.pc(), 0xd08c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd08a), 0xcb);
        EXPECT(gbc.readMem(0xd08b), 0x31);
        // CB 31 026E
        gbc.setState(0x6b2f, 0x6836, 0xd530, 0x635, 0xe885, 0x3e71, 0x1, 0x0);
        gbc.writeMem(0x6b2f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x6836);
        EXPECT(gbc.pc(), 0x6b31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 026F
        gbc.setState(0x7f0b, 0x3525, 0xa770, 0x2672, 0xa64, 0xcc, 0x0, 0x0);
        gbc.writeMem(0x7f0b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x3525);
        EXPECT(gbc.pc(), 0x7f0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0270
        gbc.setState(0x7bd2, 0xdd32, 0x2d90, 0x4fe2, 0x11b0, 0xae19, 0x1, 0x1);
        gbc.writeMem(0x7bd2, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xdd32);
        EXPECT(gbc.pc(), 0x7bd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0271
        gbc.setState(0x18e5, 0x183f, 0xa320, 0xb2f, 0xe5ad, 0xb71b, 0x1, 0x1);
        gbc.writeMem(0x18e5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x183f);
        EXPECT(gbc.pc(), 0x18e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0272
        gbc.setState(0x9dc5, 0x60c5, 0xfbe0, 0x8a4c, 0xec70, 0x3990, 0x0, 0x0);
        gbc.writeMem(0x9dc5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x60c5);
        EXPECT(gbc.pc(), 0x9dc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dc5), 0xcb);
        EXPECT(gbc.readMem(0x9dc6), 0x31);
        // CB 31 0273
        gbc.setState(0x1e79, 0x9294, 0xec0, 0xc872, 0xe721, 0xf2ae, 0x0, 0x1);
        gbc.writeMem(0x1e79, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x9294);
        EXPECT(gbc.pc(), 0x1e7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0274
        gbc.setState(0xe014, 0x87fe, 0x57c0, 0xb53e, 0xf24e, 0xf725, 0x0, 0x1);
        gbc.writeMem(0xe014, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x87fe);
        EXPECT(gbc.pc(), 0xe016);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe014), 0xcb);
        EXPECT(gbc.readMem(0xe015), 0x31);
        // CB 31 0275
        gbc.setState(0xa821, 0xab5b, 0x9ae0, 0x3618, 0xf583, 0x412f, 0x0, 0x0);
        gbc.writeMem(0xa821, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xab5b);
        EXPECT(gbc.pc(), 0xa823);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa821), 0xcb);
        EXPECT(gbc.readMem(0xa822), 0x31);
        // CB 31 0276
        gbc.setState(0x2c41, 0xe060, 0x2ac0, 0xcc41, 0x33ca, 0xb106, 0x0, 0x0);
        gbc.writeMem(0x2c41, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xe060);
        EXPECT(gbc.pc(), 0x2c43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0277
        gbc.setState(0x23bf, 0x5c35, 0x4790, 0xc4f6, 0xdbcd, 0x6071, 0x1, 0x1);
        gbc.writeMem(0x23bf, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x5c35);
        EXPECT(gbc.pc(), 0x23c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0278
        gbc.setState(0x61b5, 0xf2c1, 0x5150, 0x3cb7, 0x912d, 0x36b8, 0x0, 0x0);
        gbc.writeMem(0x61b5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xf2c1);
        EXPECT(gbc.pc(), 0x61b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0279
        gbc.setState(0x62ab, 0xd21b, 0x88e0, 0x7f73, 0x23ca, 0x1733, 0x0, 0x1);
        gbc.writeMem(0x62ab, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xd21b);
        EXPECT(gbc.pc(), 0x62ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 027A
        gbc.setState(0xa44c, 0xd0d2, 0x7c30, 0xae92, 0x633c, 0xe184, 0x1, 0x1);
        gbc.writeMem(0xa44c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xd0d2);
        EXPECT(gbc.pc(), 0xa44e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa44c), 0xcb);
        EXPECT(gbc.readMem(0xa44d), 0x31);
        // CB 31 027B
        gbc.setState(0xda5c, 0x807f, 0x33d0, 0x674e, 0xf2b6, 0x2796, 0x1, 0x0);
        gbc.writeMem(0xda5c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x807f);
        EXPECT(gbc.pc(), 0xda5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda5c), 0xcb);
        EXPECT(gbc.readMem(0xda5d), 0x31);
        // CB 31 027C
        gbc.setState(0x6d44, 0x98f9, 0x9770, 0x99fe, 0xc394, 0x63a, 0x1, 0x0);
        gbc.writeMem(0x6d44, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x98f9);
        EXPECT(gbc.pc(), 0x6d46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 027D
        gbc.setState(0x6513, 0x3ccf, 0xf3f0, 0x7694, 0x25cf, 0xf057, 0x1, 0x0);
        gbc.writeMem(0x6513, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x3ccf);
        EXPECT(gbc.pc(), 0x6515);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 027E
        gbc.setState(0x772d, 0x1aec, 0xf3e0, 0xb01b, 0x580, 0x2ef9, 0x0, 0x1);
        gbc.writeMem(0x772d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x1aec);
        EXPECT(gbc.pc(), 0x772f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 027F
        gbc.setState(0x993a, 0xe9f, 0x6010, 0x818c, 0xf71a, 0x7aeb, 0x0, 0x1);
        gbc.writeMem(0x993a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xe9f);
        EXPECT(gbc.pc(), 0x993c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x993a), 0xcb);
        EXPECT(gbc.readMem(0x993b), 0x31);
        // CB 31 0280
        gbc.setState(0x5023, 0xd8de, 0x3770, 0x959f, 0x751c, 0x6850, 0x1, 0x1);
        gbc.writeMem(0x5023, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xd8de);
        EXPECT(gbc.pc(), 0x5025);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0281
        gbc.setState(0x88a, 0x451b, 0x7d50, 0x771d, 0x9c13, 0xaba3, 0x0, 0x0);
        gbc.writeMem(0x88a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x451b);
        EXPECT(gbc.pc(), 0x88c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0282
        gbc.setState(0x3edf, 0x8760, 0x5e0, 0x655, 0x70c9, 0xb7ad, 0x1, 0x0);
        gbc.writeMem(0x3edf, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x8760);
        EXPECT(gbc.pc(), 0x3ee1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0283
        gbc.setState(0xacaa, 0xdef, 0xef00, 0x11f0, 0x989d, 0x744f, 0x0, 0x0);
        gbc.writeMem(0xacaa, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xdef);
        EXPECT(gbc.pc(), 0xacac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacaa), 0xcb);
        EXPECT(gbc.readMem(0xacab), 0x31);
        // CB 31 0284
        gbc.setState(0xede8, 0x1a61, 0x3d00, 0xc0f1, 0x93d5, 0x313f, 0x1, 0x0);
        gbc.writeMem(0xede8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x1a61);
        EXPECT(gbc.pc(), 0xedea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xede8), 0xcb);
        EXPECT(gbc.readMem(0xede9), 0x31);
        // CB 31 0285
        gbc.setState(0xac6, 0xf1d1, 0x2350, 0x605d, 0x16fa, 0x3730, 0x1, 0x0);
        gbc.writeMem(0xac6, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xf1d1);
        EXPECT(gbc.pc(), 0xac8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0286
        gbc.setState(0x85dd, 0xf7bf, 0x68f0, 0xf784, 0xac39, 0x762a, 0x1, 0x0);
        gbc.writeMem(0x85dd, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xf7bf);
        EXPECT(gbc.pc(), 0x85df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85dd), 0xcb);
        EXPECT(gbc.readMem(0x85de), 0x31);
        // CB 31 0287
        gbc.setState(0x1d23, 0x7a0a, 0xaf0, 0x8215, 0x8dea, 0xe6f2, 0x0, 0x0);
        gbc.writeMem(0x1d23, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x7a0a);
        EXPECT(gbc.pc(), 0x1d25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0288
        gbc.setState(0x5dc7, 0xe0d4, 0xf30, 0xed24, 0xecbb, 0x317e, 0x0, 0x0);
        gbc.writeMem(0x5dc7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xe0d4);
        EXPECT(gbc.pc(), 0x5dc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0289
        gbc.setState(0x17cc, 0x84a1, 0x8380, 0x141c, 0x5fbe, 0x7723, 0x1, 0x1);
        gbc.writeMem(0x17cc, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x84a1);
        EXPECT(gbc.pc(), 0x17ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 028A
        gbc.setState(0xe350, 0x5e37, 0x7ba0, 0xc08a, 0xe3d8, 0x88d5, 0x0, 0x1);
        gbc.writeMem(0xe350, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x5e37);
        EXPECT(gbc.pc(), 0xe352);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe350), 0xcb);
        EXPECT(gbc.readMem(0xe351), 0x31);
        // CB 31 028B
        gbc.setState(0x47cc, 0x9a2c, 0x1510, 0xd3c9, 0x2803, 0x670c, 0x0, 0x1);
        gbc.writeMem(0x47cc, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x9a2c);
        EXPECT(gbc.pc(), 0x47ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 028C
        gbc.setState(0x3e94, 0xe7c9, 0x2c10, 0x1d2e, 0x2c25, 0x4d62, 0x0, 0x0);
        gbc.writeMem(0x3e94, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xe7c9);
        EXPECT(gbc.pc(), 0x3e96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 028D
        gbc.setState(0xe185, 0xf8bd, 0x870, 0x9c90, 0x6349, 0xcb8d, 0x1, 0x1);
        gbc.writeMem(0xe185, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xf8bd);
        EXPECT(gbc.pc(), 0xe187);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe185), 0xcb);
        EXPECT(gbc.readMem(0xe186), 0x31);
        // CB 31 028E
        gbc.setState(0xdb08, 0xa2bb, 0x80a0, 0xe573, 0x911f, 0x467e, 0x0, 0x1);
        gbc.writeMem(0xdb08, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xa2bb);
        EXPECT(gbc.pc(), 0xdb0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb08), 0xcb);
        EXPECT(gbc.readMem(0xdb09), 0x31);
        // CB 31 028F
        gbc.setState(0x541d, 0x4cc7, 0x5d00, 0xcf9e, 0xf4bb, 0x5561, 0x0, 0x1);
        gbc.writeMem(0x541d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x4cc7);
        EXPECT(gbc.pc(), 0x541f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0291
        gbc.setState(0xdfc0, 0xac6f, 0xa230, 0x66fc, 0x29aa, 0x4dce, 0x0, 0x1);
        gbc.writeMem(0xdfc0, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xac6f);
        EXPECT(gbc.pc(), 0xdfc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfc0), 0xcb);
        EXPECT(gbc.readMem(0xdfc1), 0x31);
        // CB 31 0292
        gbc.setState(0x3ef9, 0x1e5d, 0xb860, 0xf8e3, 0x8094, 0x926a, 0x1, 0x0);
        gbc.writeMem(0x3ef9, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x1e5d);
        EXPECT(gbc.pc(), 0x3efb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0293
        gbc.setState(0x2730, 0x3334, 0x1ab0, 0x34b5, 0x41ee, 0x9ca5, 0x0, 0x0);
        gbc.writeMem(0x2730, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x3334);
        EXPECT(gbc.pc(), 0x2732);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0294
        gbc.setState(0xaf76, 0x86bd, 0x1f90, 0x4c38, 0x7f09, 0xa85c, 0x1, 0x0);
        gbc.writeMem(0xaf76, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x86bd);
        EXPECT(gbc.pc(), 0xaf78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf76), 0xcb);
        EXPECT(gbc.readMem(0xaf77), 0x31);
        // CB 31 0295
        gbc.setState(0xed40, 0x2537, 0x560, 0x347b, 0xa429, 0xb8eb, 0x0, 0x0);
        gbc.writeMem(0xed40, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2537);
        EXPECT(gbc.pc(), 0xed42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed40), 0xcb);
        EXPECT(gbc.readMem(0xed41), 0x31);
        // CB 31 0296
        gbc.setState(0xc4bb, 0x613b, 0x3240, 0xd8c9, 0x37c8, 0x5520, 0x1, 0x1);
        gbc.writeMem(0xc4bb, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x613b);
        EXPECT(gbc.pc(), 0xc4bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4bb), 0xcb);
        EXPECT(gbc.readMem(0xc4bc), 0x31);
        // CB 31 0297
        gbc.setState(0x5dc1, 0xcc86, 0x5900, 0xaa89, 0x44d1, 0x52bc, 0x0, 0x1);
        gbc.writeMem(0x5dc1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xcc86);
        EXPECT(gbc.pc(), 0x5dc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0299
        gbc.setState(0x8643, 0x61e7, 0x13c0, 0x16f8, 0xc04f, 0x1cf6, 0x1, 0x0);
        gbc.writeMem(0x8643, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x61e7);
        EXPECT(gbc.pc(), 0x8645);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8643), 0xcb);
        EXPECT(gbc.readMem(0x8644), 0x31);
        // CB 31 029A
        gbc.setState(0x8b58, 0xa1d2, 0x4150, 0x2ae6, 0x5012, 0x21ae, 0x1, 0x1);
        gbc.writeMem(0x8b58, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa1d2);
        EXPECT(gbc.pc(), 0x8b5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b58), 0xcb);
        EXPECT(gbc.readMem(0x8b59), 0x31);
        // CB 31 029B
        gbc.setState(0x7855, 0xa071, 0x8360, 0x3df5, 0xb7bb, 0xfa0a, 0x1, 0x0);
        gbc.writeMem(0x7855, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xa071);
        EXPECT(gbc.pc(), 0x7857);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 029C
        gbc.setState(0x28d6, 0x514b, 0x5170, 0x446e, 0x5936, 0xc63, 0x0, 0x0);
        gbc.writeMem(0x28d6, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x514b);
        EXPECT(gbc.pc(), 0x28d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 029D
        gbc.setState(0x9254, 0xa486, 0x5120, 0x7449, 0x419f, 0x8ac9, 0x0, 0x1);
        gbc.writeMem(0x9254, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xa486);
        EXPECT(gbc.pc(), 0x9256);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9254), 0xcb);
        EXPECT(gbc.readMem(0x9255), 0x31);
        // CB 31 029F
        gbc.setState(0x5e40, 0x260, 0xdfa0, 0xe309, 0x24ce, 0x116b, 0x0, 0x1);
        gbc.writeMem(0x5e40, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x260);
        EXPECT(gbc.pc(), 0x5e42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02A0
        gbc.setState(0x9c50, 0xf052, 0xaa80, 0x408, 0x7e11, 0xb22d, 0x1, 0x0);
        gbc.writeMem(0x9c50, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xf052);
        EXPECT(gbc.pc(), 0x9c52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c50), 0xcb);
        EXPECT(gbc.readMem(0x9c51), 0x31);
        // CB 31 02A1
        gbc.setState(0x5d8e, 0xce4, 0x6b40, 0x9a92, 0x597e, 0xb315, 0x1, 0x0);
        gbc.writeMem(0x5d8e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xce4);
        EXPECT(gbc.pc(), 0x5d90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02A2
        gbc.setState(0xd656, 0xbdb4, 0x52c0, 0xf352, 0x7525, 0xcdce, 0x0, 0x1);
        gbc.writeMem(0xd656, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xbdb4);
        EXPECT(gbc.pc(), 0xd658);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd656), 0xcb);
        EXPECT(gbc.readMem(0xd657), 0x31);
        // CB 31 02A3
        gbc.setState(0xacba, 0xfc6d, 0x18f0, 0xce0f, 0xd2aa, 0xeec9, 0x0, 0x1);
        gbc.writeMem(0xacba, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xfc6d);
        EXPECT(gbc.pc(), 0xacbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacba), 0xcb);
        EXPECT(gbc.readMem(0xacbb), 0x31);
        // CB 31 02A4
        gbc.setState(0xacc5, 0xf797, 0x4720, 0xfd1a, 0x966, 0x8067, 0x1, 0x1);
        gbc.writeMem(0xacc5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xf797);
        EXPECT(gbc.pc(), 0xacc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacc5), 0xcb);
        EXPECT(gbc.readMem(0xacc6), 0x31);
        // CB 31 02A5
        gbc.setState(0x8302, 0x1812, 0x9b30, 0x68e5, 0x2fa, 0xa397, 0x1, 0x0);
        gbc.writeMem(0x8302, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x1812);
        EXPECT(gbc.pc(), 0x8304);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8302), 0xcb);
        EXPECT(gbc.readMem(0x8303), 0x31);
        // CB 31 02A6
        gbc.setState(0x3e1c, 0xbbfe, 0xd0e0, 0x57a1, 0xb4d0, 0x9fa4, 0x0, 0x1);
        gbc.writeMem(0x3e1c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xbbfe);
        EXPECT(gbc.pc(), 0x3e1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02A7
        gbc.setState(0xc72, 0x6311, 0xf20, 0x7a6f, 0xce9c, 0x3be1, 0x0, 0x1);
        gbc.writeMem(0xc72, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x6311);
        EXPECT(gbc.pc(), 0xc74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02A8
        gbc.setState(0x5082, 0x37f1, 0x4d40, 0x8f70, 0x69c9, 0xf8ec, 0x1, 0x1);
        gbc.writeMem(0x5082, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x37f1);
        EXPECT(gbc.pc(), 0x5084);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02A9
        gbc.setState(0xb1ea, 0xc262, 0x3a20, 0xdc0b, 0x6710, 0xfd95, 0x1, 0x1);
        gbc.writeMem(0xb1ea, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xc262);
        EXPECT(gbc.pc(), 0xb1ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1ea), 0xcb);
        EXPECT(gbc.readMem(0xb1eb), 0x31);
        // CB 31 02AA
        gbc.setState(0x8675, 0xb075, 0x9eb0, 0xa877, 0x5969, 0x1679, 0x1, 0x1);
        gbc.writeMem(0x8675, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xb075);
        EXPECT(gbc.pc(), 0x8677);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8675), 0xcb);
        EXPECT(gbc.readMem(0x8676), 0x31);
        // CB 31 02AB
        gbc.setState(0x1c9c, 0xe165, 0xf4c0, 0x8757, 0x838d, 0xdc7b, 0x0, 0x0);
        gbc.writeMem(0x1c9c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xe165);
        EXPECT(gbc.pc(), 0x1c9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02AD
        gbc.setState(0xc998, 0x177f, 0x3b60, 0x8f2c, 0x9a09, 0xff90, 0x1, 0x1);
        gbc.writeMem(0xc998, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x177f);
        EXPECT(gbc.pc(), 0xc99a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc998), 0xcb);
        EXPECT(gbc.readMem(0xc999), 0x31);
        // CB 31 02AF
        gbc.setState(0x4a05, 0x3737, 0x540, 0x8470, 0xa562, 0x5e76, 0x1, 0x0);
        gbc.writeMem(0x4a05, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x3737);
        EXPECT(gbc.pc(), 0x4a07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02B0
        gbc.setState(0x6dee, 0x1762, 0xe4b0, 0xf2e6, 0xeb56, 0x968b, 0x1, 0x0);
        gbc.writeMem(0x6dee, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x1762);
        EXPECT(gbc.pc(), 0x6df0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02B1
        gbc.setState(0x61b1, 0x5061, 0x3250, 0x9903, 0xf56e, 0xa631, 0x0, 0x1);
        gbc.writeMem(0x61b1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x5061);
        EXPECT(gbc.pc(), 0x61b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02B3
        gbc.setState(0xb145, 0xc5c1, 0xb8d0, 0xd3d4, 0x25f5, 0xe7ce, 0x1, 0x0);
        gbc.writeMem(0xb145, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xc5c1);
        EXPECT(gbc.pc(), 0xb147);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb145), 0xcb);
        EXPECT(gbc.readMem(0xb146), 0x31);
        // CB 31 02B4
        gbc.setState(0x1fce, 0xf608, 0x6b10, 0x709c, 0xf82f, 0x1930, 0x1, 0x1);
        gbc.writeMem(0x1fce, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xf608);
        EXPECT(gbc.pc(), 0x1fd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02B6
        gbc.setState(0x1d25, 0x3786, 0x4660, 0x16bf, 0x1894, 0xfcc9, 0x1, 0x1);
        gbc.writeMem(0x1d25, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x3786);
        EXPECT(gbc.pc(), 0x1d27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02B7
        gbc.setState(0x37ee, 0x13fc, 0xa0b0, 0x590f, 0xb75f, 0x7e18, 0x0, 0x1);
        gbc.writeMem(0x37ee, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x13fc);
        EXPECT(gbc.pc(), 0x37f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02B8
        gbc.setState(0xef4c, 0x1948, 0x97f0, 0xbc48, 0x6cb8, 0x3d12, 0x0, 0x0);
        gbc.writeMem(0xef4c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x1948);
        EXPECT(gbc.pc(), 0xef4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef4c), 0xcb);
        EXPECT(gbc.readMem(0xef4d), 0x31);
        // CB 31 02B9
        gbc.setState(0x9a4, 0x8e00, 0x40e0, 0xb93e, 0x2d72, 0xb6ca, 0x1, 0x1);
        gbc.writeMem(0x9a4, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x8e00);
        EXPECT(gbc.pc(), 0x9a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02BA
        gbc.setState(0x8c9e, 0x9b23, 0x4de0, 0xf1db, 0x60aa, 0x595, 0x0, 0x0);
        gbc.writeMem(0x8c9e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x9b23);
        EXPECT(gbc.pc(), 0x8ca0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c9e), 0xcb);
        EXPECT(gbc.readMem(0x8c9f), 0x31);
        // CB 31 02BB
        gbc.setState(0xa7a2, 0xcde5, 0xf080, 0x4cf3, 0xdaa5, 0x2b22, 0x0, 0x0);
        gbc.writeMem(0xa7a2, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xcde5);
        EXPECT(gbc.pc(), 0xa7a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7a2), 0xcb);
        EXPECT(gbc.readMem(0xa7a3), 0x31);
        // CB 31 02BC
        gbc.setState(0x84bf, 0x5148, 0x6f20, 0x6bba, 0x85c6, 0xeaf0, 0x1, 0x0);
        gbc.writeMem(0x84bf, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x5148);
        EXPECT(gbc.pc(), 0x84c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84bf), 0xcb);
        EXPECT(gbc.readMem(0x84c0), 0x31);
        // CB 31 02BD
        gbc.setState(0x1b1e, 0xa031, 0xe290, 0x1174, 0x4415, 0x1986, 0x0, 0x0);
        gbc.writeMem(0x1b1e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xa031);
        EXPECT(gbc.pc(), 0x1b20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02BE
        gbc.setState(0x79b, 0xf4b4, 0xdf30, 0xd31e, 0xb00b, 0x7269, 0x1, 0x1);
        gbc.writeMem(0x79b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xf4b4);
        EXPECT(gbc.pc(), 0x79d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02BF
        gbc.setState(0x9ea6, 0xcbdf, 0xf390, 0x8b6e, 0x3aad, 0xee37, 0x1, 0x1);
        gbc.writeMem(0x9ea6, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xcbdf);
        EXPECT(gbc.pc(), 0x9ea8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ea6), 0xcb);
        EXPECT(gbc.readMem(0x9ea7), 0x31);
        // CB 31 02C0
        gbc.setState(0xc0a, 0xf455, 0x4650, 0xa9ff, 0x2333, 0x2ac4, 0x1, 0x1);
        gbc.writeMem(0xc0a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xf455);
        EXPECT(gbc.pc(), 0xc0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02C1
        gbc.setState(0xd6e3, 0x8505, 0x7100, 0xaa7, 0x9681, 0x60d0, 0x1, 0x0);
        gbc.writeMem(0xd6e3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x8505);
        EXPECT(gbc.pc(), 0xd6e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6e3), 0xcb);
        EXPECT(gbc.readMem(0xd6e4), 0x31);
        // CB 31 02C2
        gbc.setState(0x7259, 0xb531, 0x8130, 0x4318, 0xc52f, 0x8681, 0x0, 0x1);
        gbc.writeMem(0x7259, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xb531);
        EXPECT(gbc.pc(), 0x725b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02C3
        gbc.setState(0x799, 0xc40f, 0xe770, 0x29ea, 0x67a4, 0xf1b2, 0x1, 0x0);
        gbc.writeMem(0x799, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xc40f);
        EXPECT(gbc.pc(), 0x79b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02C4
        gbc.setState(0x991c, 0x83b3, 0x860, 0x6c1, 0xbab9, 0x6102, 0x0, 0x0);
        gbc.writeMem(0x991c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x83b3);
        EXPECT(gbc.pc(), 0x991e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x991c), 0xcb);
        EXPECT(gbc.readMem(0x991d), 0x31);
        // CB 31 02C5
        gbc.setState(0xdcb8, 0x1d1f, 0xad20, 0xff39, 0xde11, 0x9ed3, 0x0, 0x0);
        gbc.writeMem(0xdcb8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x1d1f);
        EXPECT(gbc.pc(), 0xdcba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcb8), 0xcb);
        EXPECT(gbc.readMem(0xdcb9), 0x31);
        // CB 31 02C6
        gbc.setState(0xa561, 0x9f41, 0xc6e0, 0xdf9b, 0x8dc5, 0xaece, 0x0, 0x1);
        gbc.writeMem(0xa561, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x9f41);
        EXPECT(gbc.pc(), 0xa563);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa561), 0xcb);
        EXPECT(gbc.readMem(0xa562), 0x31);
        // CB 31 02C7
        gbc.setState(0x63b7, 0xb4c, 0x4930, 0x5eb, 0xbed4, 0x39b1, 0x0, 0x1);
        gbc.writeMem(0x63b7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xb4c);
        EXPECT(gbc.pc(), 0x63b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02C8
        gbc.setState(0xd70f, 0xf53f, 0x30f0, 0x175d, 0x2bb9, 0xe43, 0x0, 0x0);
        gbc.writeMem(0xd70f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xf53f);
        EXPECT(gbc.pc(), 0xd711);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd70f), 0xcb);
        EXPECT(gbc.readMem(0xd710), 0x31);
        // CB 31 02CA
        gbc.setState(0x8959, 0x28de, 0x3540, 0x6ba0, 0x7b9b, 0x98, 0x1, 0x0);
        gbc.writeMem(0x8959, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x28de);
        EXPECT(gbc.pc(), 0x895b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8959), 0xcb);
        EXPECT(gbc.readMem(0x895a), 0x31);
        // CB 31 02CB
        gbc.setState(0xc889, 0x507f, 0xef00, 0xced8, 0x8444, 0x2596, 0x0, 0x0);
        gbc.writeMem(0xc889, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x507f);
        EXPECT(gbc.pc(), 0xc88b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc889), 0xcb);
        EXPECT(gbc.readMem(0xc88a), 0x31);
        // CB 31 02CD
        gbc.setState(0xccfe, 0x6a82, 0xcab0, 0xd7a6, 0xd0f5, 0x90ce, 0x0, 0x1);
        gbc.writeMem(0xccfe, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x6a82);
        EXPECT(gbc.pc(), 0xcd00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccfe), 0xcb);
        EXPECT(gbc.readMem(0xccff), 0x31);
        // CB 31 02CE
        gbc.setState(0x25f1, 0x252b, 0xeb00, 0xe61a, 0xc9ee, 0x4997, 0x1, 0x1);
        gbc.writeMem(0x25f1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x252b);
        EXPECT(gbc.pc(), 0x25f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02CF
        gbc.setState(0xd859, 0x507a, 0x83c0, 0x1895, 0x2511, 0x16a6, 0x1, 0x0);
        gbc.writeMem(0xd859, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x507a);
        EXPECT(gbc.pc(), 0xd85b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd859), 0xcb);
        EXPECT(gbc.readMem(0xd85a), 0x31);
        // CB 31 02D1
        gbc.setState(0xd643, 0xddc2, 0xdeb0, 0xf4f8, 0xbb56, 0xd101, 0x0, 0x0);
        gbc.writeMem(0xd643, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xddc2);
        EXPECT(gbc.pc(), 0xd645);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd643), 0xcb);
        EXPECT(gbc.readMem(0xd644), 0x31);
        // CB 31 02D2
        gbc.setState(0xb6bc, 0xf633, 0x1e90, 0x1153, 0x6e4a, 0xb38a, 0x0, 0x0);
        gbc.writeMem(0xb6bc, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xf633);
        EXPECT(gbc.pc(), 0xb6be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6bc), 0xcb);
        EXPECT(gbc.readMem(0xb6bd), 0x31);
        // CB 31 02D3
        gbc.setState(0xa86f, 0x9a71, 0x86f0, 0x22cf, 0x6e24, 0x93a4, 0x0, 0x1);
        gbc.writeMem(0xa86f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x9a71);
        EXPECT(gbc.pc(), 0xa871);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa86f), 0xcb);
        EXPECT(gbc.readMem(0xa870), 0x31);
        // CB 31 02D4
        gbc.setState(0xa9ae, 0xa248, 0xfd20, 0x7d7a, 0x44bb, 0x53c1, 0x0, 0x0);
        gbc.writeMem(0xa9ae, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xa248);
        EXPECT(gbc.pc(), 0xa9b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9ae), 0xcb);
        EXPECT(gbc.readMem(0xa9af), 0x31);
        // CB 31 02D5
        gbc.setState(0x691b, 0x8129, 0x220, 0xda6d, 0x5799, 0xd8e1, 0x1, 0x1);
        gbc.writeMem(0x691b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x8129);
        EXPECT(gbc.pc(), 0x691d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02D6
        gbc.setState(0x9424, 0xd6aa, 0x7620, 0xc95f, 0x995a, 0x83c9, 0x0, 0x1);
        gbc.writeMem(0x9424, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xd6aa);
        EXPECT(gbc.pc(), 0x9426);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9424), 0xcb);
        EXPECT(gbc.readMem(0x9425), 0x31);
        // CB 31 02D7
        gbc.setState(0x5e45, 0x21c2, 0xd40, 0xab15, 0xf972, 0xe0d7, 0x1, 0x0);
        gbc.writeMem(0x5e45, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x21c2);
        EXPECT(gbc.pc(), 0x5e47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02D8
        gbc.setState(0xe70e, 0x1d4b, 0x200, 0x8792, 0x54ad, 0xdc14, 0x1, 0x0);
        gbc.writeMem(0xe70e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x1d4b);
        EXPECT(gbc.pc(), 0xe710);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe70e), 0xcb);
        EXPECT(gbc.readMem(0xe70f), 0x31);
        // CB 31 02D9
        gbc.setState(0xe049, 0xe436, 0xffa0, 0x8984, 0x273d, 0xb668, 0x0, 0x1);
        gbc.writeMem(0xe049, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xe436);
        EXPECT(gbc.pc(), 0xe04b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe049), 0xcb);
        EXPECT(gbc.readMem(0xe04a), 0x31);
        // CB 31 02DA
        gbc.setState(0x9d62, 0x801a, 0xb060, 0x99de, 0xfd8a, 0x68bf, 0x0, 0x0);
        gbc.writeMem(0x9d62, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x801a);
        EXPECT(gbc.pc(), 0x9d64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d62), 0xcb);
        EXPECT(gbc.readMem(0x9d63), 0x31);
        // CB 31 02DB
        gbc.setState(0x566b, 0xb2d8, 0x3660, 0x1c52, 0x869d, 0xd532, 0x1, 0x1);
        gbc.writeMem(0x566b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xb2d8);
        EXPECT(gbc.pc(), 0x566d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02DC
        gbc.setState(0xee07, 0xd5ff, 0x3dc0, 0xebce, 0xdce5, 0x333f, 0x0, 0x1);
        gbc.writeMem(0xee07, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xd5ff);
        EXPECT(gbc.pc(), 0xee09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee07), 0xcb);
        EXPECT(gbc.readMem(0xee08), 0x31);
        // CB 31 02DD
        gbc.setState(0x1226, 0x94c7, 0x6460, 0x2edf, 0xc8d, 0x44d3, 0x0, 0x0);
        gbc.writeMem(0x1226, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x94c7);
        EXPECT(gbc.pc(), 0x1228);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02DF
        gbc.setState(0x817d, 0xf683, 0x6260, 0x6c5, 0x206, 0x8558, 0x0, 0x1);
        gbc.writeMem(0x817d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xf683);
        EXPECT(gbc.pc(), 0x817f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x817d), 0xcb);
        EXPECT(gbc.readMem(0x817e), 0x31);
        // CB 31 02E0
        gbc.setState(0xc099, 0x80ee, 0x9420, 0x562b, 0xb7a1, 0xb2dd, 0x1, 0x0);
        gbc.writeMem(0xc099, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x80ee);
        EXPECT(gbc.pc(), 0xc09b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc099), 0xcb);
        EXPECT(gbc.readMem(0xc09a), 0x31);
        // CB 31 02E1
        gbc.setState(0x1bff, 0x1459, 0x5860, 0x633b, 0x8a35, 0x90ab, 0x0, 0x1);
        gbc.writeMem(0x1bff, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x1459);
        EXPECT(gbc.pc(), 0x1c01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02E2
        gbc.setState(0xb6, 0xcdea, 0xc100, 0x9ee2, 0x39d2, 0xad06, 0x1, 0x1);
        gbc.writeMem(0xb6, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xcdea);
        EXPECT(gbc.pc(), 0xb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02E3
        gbc.setState(0xa633, 0x3f50, 0x97d0, 0x32df, 0xbc6b, 0x7b7, 0x1, 0x1);
        gbc.writeMem(0xa633, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x3f50);
        EXPECT(gbc.pc(), 0xa635);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa633), 0xcb);
        EXPECT(gbc.readMem(0xa634), 0x31);
        // CB 31 02E4
        gbc.setState(0xb11e, 0xd7c, 0xd130, 0x22c3, 0x970f, 0xbc44, 0x1, 0x1);
        gbc.writeMem(0xb11e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xd7c);
        EXPECT(gbc.pc(), 0xb120);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb11e), 0xcb);
        EXPECT(gbc.readMem(0xb11f), 0x31);
        // CB 31 02E5
        gbc.setState(0x86b2, 0xc8c9, 0x94a0, 0x8bb5, 0x408b, 0xa641, 0x0, 0x1);
        gbc.writeMem(0x86b2, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xc8c9);
        EXPECT(gbc.pc(), 0x86b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86b2), 0xcb);
        EXPECT(gbc.readMem(0x86b3), 0x31);
        // CB 31 02E6
        gbc.setState(0xb164, 0x97ea, 0x2790, 0x341c, 0x4aca, 0x64ac, 0x0, 0x0);
        gbc.writeMem(0xb164, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x97ea);
        EXPECT(gbc.pc(), 0xb166);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb164), 0xcb);
        EXPECT(gbc.readMem(0xb165), 0x31);
        // CB 31 02E7
        gbc.setState(0xac29, 0x601a, 0x3a80, 0x338f, 0x8b45, 0x6505, 0x1, 0x1);
        gbc.writeMem(0xac29, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x601a);
        EXPECT(gbc.pc(), 0xac2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac29), 0xcb);
        EXPECT(gbc.readMem(0xac2a), 0x31);
        // CB 31 02E8
        gbc.setState(0x5f5e, 0x4e5b, 0x7210, 0xcdd3, 0x7f50, 0xf742, 0x0, 0x0);
        gbc.writeMem(0x5f5e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x4e5b);
        EXPECT(gbc.pc(), 0x5f60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02E9
        gbc.setState(0x23a8, 0x380b, 0x6650, 0x2988, 0xb2eb, 0xdc48, 0x0, 0x1);
        gbc.writeMem(0x23a8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x380b);
        EXPECT(gbc.pc(), 0x23aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02EA
        gbc.setState(0xc604, 0x19cc, 0xf50, 0xb10e, 0x2b0d, 0x1062, 0x0, 0x1);
        gbc.writeMem(0xc604, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x19cc);
        EXPECT(gbc.pc(), 0xc606);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc604), 0xcb);
        EXPECT(gbc.readMem(0xc605), 0x31);
        // CB 31 02EB
        gbc.setState(0x96c9, 0x6bb0, 0xaf10, 0x93d5, 0xfb84, 0x4527, 0x0, 0x1);
        gbc.writeMem(0x96c9, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x6bb0);
        EXPECT(gbc.pc(), 0x96cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96c9), 0xcb);
        EXPECT(gbc.readMem(0x96ca), 0x31);
        // CB 31 02ED
        gbc.setState(0x459d, 0x7914, 0x91e0, 0xea08, 0x4d96, 0x4bea, 0x1, 0x1);
        gbc.writeMem(0x459d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x7914);
        EXPECT(gbc.pc(), 0x459f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02EE
        gbc.setState(0xc6c3, 0x8c06, 0xad0, 0x1c49, 0x2904, 0x9a31, 0x0, 0x1);
        gbc.writeMem(0xc6c3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x8c06);
        EXPECT(gbc.pc(), 0xc6c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6c3), 0xcb);
        EXPECT(gbc.readMem(0xc6c4), 0x31);
        // CB 31 02EF
        gbc.setState(0x9793, 0x2f05, 0x5610, 0x31eb, 0xc3d5, 0xf38c, 0x1, 0x0);
        gbc.writeMem(0x9793, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x2f05);
        EXPECT(gbc.pc(), 0x9795);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9793), 0xcb);
        EXPECT(gbc.readMem(0x9794), 0x31);
        // CB 31 02F0
        gbc.setState(0x489, 0x217b, 0xc3e0, 0x4185, 0xf201, 0x557c, 0x1, 0x1);
        gbc.writeMem(0x489, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x217b);
        EXPECT(gbc.pc(), 0x48b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02F1
        gbc.setState(0x9d6a, 0xf39b, 0x4780, 0x8160, 0xf519, 0x1863, 0x1, 0x1);
        gbc.writeMem(0x9d6a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xf39b);
        EXPECT(gbc.pc(), 0x9d6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d6a), 0xcb);
        EXPECT(gbc.readMem(0x9d6b), 0x31);
        // CB 31 02F2
        gbc.setState(0x7fbb, 0x8f63, 0x93d0, 0x6a54, 0xb367, 0x7a81, 0x1, 0x1);
        gbc.writeMem(0x7fbb, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x8f63);
        EXPECT(gbc.pc(), 0x7fbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02F4
        gbc.setState(0xef72, 0xde87, 0xfd10, 0x5b48, 0x470c, 0xb526, 0x0, 0x0);
        gbc.writeMem(0xef72, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xde87);
        EXPECT(gbc.pc(), 0xef74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef72), 0xcb);
        EXPECT(gbc.readMem(0xef73), 0x31);
        // CB 31 02F5
        gbc.setState(0x73cb, 0x87d, 0x9b90, 0xee4e, 0x56c8, 0xc54c, 0x0, 0x1);
        gbc.writeMem(0x73cb, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x87d);
        EXPECT(gbc.pc(), 0x73cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02F7
        gbc.setState(0x14b7, 0xf451, 0x8e00, 0x3971, 0xa949, 0xeb3f, 0x1, 0x0);
        gbc.writeMem(0x14b7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xf451);
        EXPECT(gbc.pc(), 0x14b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02F8
        gbc.setState(0x1fcf, 0xd792, 0x95a0, 0x6bd2, 0xc7c1, 0xdc09, 0x1, 0x0);
        gbc.writeMem(0x1fcf, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xd792);
        EXPECT(gbc.pc(), 0x1fd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02F9
        gbc.setState(0x1c4b, 0xea5d, 0x9bd0, 0xafc1, 0x75ad, 0xf68, 0x0, 0x0);
        gbc.writeMem(0x1c4b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xea5d);
        EXPECT(gbc.pc(), 0x1c4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02FA
        gbc.setState(0x6f1c, 0xaf92, 0x7ea0, 0x4ba0, 0x3813, 0xfa0, 0x1, 0x0);
        gbc.writeMem(0x6f1c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xaf92);
        EXPECT(gbc.pc(), 0x6f1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02FB
        gbc.setState(0x75dc, 0xd950, 0xba50, 0xe035, 0x78d, 0xb010, 0x1, 0x0);
        gbc.writeMem(0x75dc, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xd950);
        EXPECT(gbc.pc(), 0x75de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02FC
        gbc.setState(0x57d2, 0xa312, 0x73a0, 0x735f, 0x5504, 0x9f6f, 0x1, 0x1);
        gbc.writeMem(0x57d2, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xa312);
        EXPECT(gbc.pc(), 0x57d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02FD
        gbc.setState(0x8f7, 0xd4ef, 0xbb50, 0x55b3, 0x1567, 0x164a, 0x1, 0x0);
        gbc.writeMem(0x8f7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xd4ef);
        EXPECT(gbc.pc(), 0x8f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 02FE
        gbc.setState(0x904, 0x7347, 0x6fb0, 0xabd4, 0xa765, 0x7494, 0x0, 0x1);
        gbc.writeMem(0x904, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x7347);
        EXPECT(gbc.pc(), 0x906);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0300
        gbc.setState(0x34c0, 0x6bcf, 0x8370, 0x1e8e, 0x2af7, 0x4d28, 0x0, 0x0);
        gbc.writeMem(0x34c0, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x6bcf);
        EXPECT(gbc.pc(), 0x34c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0301
        gbc.setState(0xef4b, 0x5049, 0x4700, 0xe013, 0x8e22, 0xde71, 0x1, 0x0);
        gbc.writeMem(0xef4b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x5049);
        EXPECT(gbc.pc(), 0xef4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef4b), 0xcb);
        EXPECT(gbc.readMem(0xef4c), 0x31);
        // CB 31 0302
        gbc.setState(0x8124, 0xa87b, 0x2a20, 0xe288, 0x74ed, 0xca2d, 0x0, 0x1);
        gbc.writeMem(0x8124, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xa87b);
        EXPECT(gbc.pc(), 0x8126);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8124), 0xcb);
        EXPECT(gbc.readMem(0x8125), 0x31);
        // CB 31 0303
        gbc.setState(0xc3ce, 0xaf77, 0xfc30, 0x1a94, 0x1a88, 0x3fb6, 0x1, 0x0);
        gbc.writeMem(0xc3ce, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xaf77);
        EXPECT(gbc.pc(), 0xc3d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3ce), 0xcb);
        EXPECT(gbc.readMem(0xc3cf), 0x31);
        // CB 31 0304
        gbc.setState(0x2261, 0xf098, 0x52c0, 0x43b5, 0x3585, 0x319f, 0x1, 0x0);
        gbc.writeMem(0x2261, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xf098);
        EXPECT(gbc.pc(), 0x2263);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0305
        gbc.setState(0x6590, 0xb2f5, 0xba80, 0x325a, 0x10df, 0xa3e8, 0x1, 0x0);
        gbc.writeMem(0x6590, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xb2f5);
        EXPECT(gbc.pc(), 0x6592);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0306
        gbc.setState(0x15a8, 0x3130, 0xf370, 0x3e54, 0x69c5, 0x8e34, 0x1, 0x1);
        gbc.writeMem(0x15a8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x3130);
        EXPECT(gbc.pc(), 0x15aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0307
        gbc.setState(0x2e47, 0x49a7, 0xa1b0, 0x25f1, 0x9573, 0x9e0e, 0x1, 0x0);
        gbc.writeMem(0x2e47, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x49a7);
        EXPECT(gbc.pc(), 0x2e49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0308
        gbc.setState(0x5e86, 0x962, 0x8b0, 0xb0eb, 0x7ef4, 0x155d, 0x1, 0x1);
        gbc.writeMem(0x5e86, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x962);
        EXPECT(gbc.pc(), 0x5e88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0309
        gbc.setState(0x20b8, 0x45c3, 0x7310, 0x89e, 0x6948, 0xbf27, 0x1, 0x1);
        gbc.writeMem(0x20b8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x45c3);
        EXPECT(gbc.pc(), 0x20ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 030A
        gbc.setState(0xe513, 0xd724, 0x42a0, 0x4906, 0xf7d7, 0x356b, 0x1, 0x0);
        gbc.writeMem(0xe513, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xd724);
        EXPECT(gbc.pc(), 0xe515);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe513), 0xcb);
        EXPECT(gbc.readMem(0xe514), 0x31);
        // CB 31 030B
        gbc.setState(0xda89, 0x8f82, 0xb670, 0x7e2, 0x68b4, 0x9caa, 0x0, 0x0);
        gbc.writeMem(0xda89, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x8f82);
        EXPECT(gbc.pc(), 0xda8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda89), 0xcb);
        EXPECT(gbc.readMem(0xda8a), 0x31);
        // CB 31 030C
        gbc.setState(0xd6f2, 0x2cc3, 0xb530, 0x4c30, 0xf32d, 0x98b, 0x0, 0x0);
        gbc.writeMem(0xd6f2, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x2cc3);
        EXPECT(gbc.pc(), 0xd6f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6f2), 0xcb);
        EXPECT(gbc.readMem(0xd6f3), 0x31);
        // CB 31 030D
        gbc.setState(0x712a, 0x338, 0x1b00, 0x92a7, 0xe4f4, 0x6f0a, 0x1, 0x1);
        gbc.writeMem(0x712a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x338);
        EXPECT(gbc.pc(), 0x712c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 030F
        gbc.setState(0x5d44, 0xca1e, 0x1fa0, 0xdd24, 0x8151, 0xea51, 0x0, 0x1);
        gbc.writeMem(0x5d44, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xca1e);
        EXPECT(gbc.pc(), 0x5d46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0310
        gbc.setState(0x3db0, 0x3507, 0xd060, 0x530c, 0x1057, 0xd8d0, 0x1, 0x1);
        gbc.writeMem(0x3db0, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x3507);
        EXPECT(gbc.pc(), 0x3db2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0311
        gbc.setState(0x17c4, 0x4b71, 0x300, 0x1be2, 0x8e38, 0x9ab0, 0x0, 0x1);
        gbc.writeMem(0x17c4, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x4b71);
        EXPECT(gbc.pc(), 0x17c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0312
        gbc.setState(0xc817, 0x6ab, 0x5e0, 0x228f, 0x3147, 0x9ed6, 0x0, 0x1);
        gbc.writeMem(0xc817, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x6ab);
        EXPECT(gbc.pc(), 0xc819);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc817), 0xcb);
        EXPECT(gbc.readMem(0xc818), 0x31);
        // CB 31 0313
        gbc.setState(0x22e3, 0x8569, 0x5810, 0x500b, 0x95d1, 0xe680, 0x0, 0x0);
        gbc.writeMem(0x22e3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x8569);
        EXPECT(gbc.pc(), 0x22e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0314
        gbc.setState(0x4375, 0x203, 0xb1d0, 0xefc4, 0xcf12, 0x1d1f, 0x0, 0x0);
        gbc.writeMem(0x4375, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x203);
        EXPECT(gbc.pc(), 0x4377);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0315
        gbc.setState(0x4c33, 0x3ffe, 0xc5f0, 0x7237, 0x1492, 0xded2, 0x1, 0x0);
        gbc.writeMem(0x4c33, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x3ffe);
        EXPECT(gbc.pc(), 0x4c35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0316
        gbc.setState(0xd118, 0x28df, 0x1900, 0xe670, 0x50d5, 0xe80c, 0x0, 0x1);
        gbc.writeMem(0xd118, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x28df);
        EXPECT(gbc.pc(), 0xd11a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd118), 0xcb);
        EXPECT(gbc.readMem(0xd119), 0x31);
        // CB 31 0317
        gbc.setState(0xb254, 0x2b38, 0x660, 0x1c60, 0x97fc, 0xeab3, 0x0, 0x0);
        gbc.writeMem(0xb254, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x2b38);
        EXPECT(gbc.pc(), 0xb256);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb254), 0xcb);
        EXPECT(gbc.readMem(0xb255), 0x31);
        // CB 31 0318
        gbc.setState(0xa2bb, 0x55e, 0x6b00, 0xd73c, 0x5cee, 0xc017, 0x0, 0x0);
        gbc.writeMem(0xa2bb, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x55e);
        EXPECT(gbc.pc(), 0xa2bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2bb), 0xcb);
        EXPECT(gbc.readMem(0xa2bc), 0x31);
        // CB 31 0319
        gbc.setState(0xa866, 0x878b, 0xf40, 0xda13, 0x92bc, 0x26e1, 0x0, 0x1);
        gbc.writeMem(0xa866, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x878b);
        EXPECT(gbc.pc(), 0xa868);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa866), 0xcb);
        EXPECT(gbc.readMem(0xa867), 0x31);
        // CB 31 031A
        gbc.setState(0x966f, 0xe15f, 0x7e30, 0x59af, 0x745f, 0x5c7d, 0x0, 0x1);
        gbc.writeMem(0x966f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xe15f);
        EXPECT(gbc.pc(), 0x9671);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x966f), 0xcb);
        EXPECT(gbc.readMem(0x9670), 0x31);
        // CB 31 031B
        gbc.setState(0xe073, 0xc35d, 0x7d70, 0xf63c, 0x4992, 0xf045, 0x1, 0x1);
        gbc.writeMem(0xe073, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xc35d);
        EXPECT(gbc.pc(), 0xe075);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe073), 0xcb);
        EXPECT(gbc.readMem(0xe074), 0x31);
        // CB 31 031C
        gbc.setState(0xd141, 0x16a2, 0xa380, 0x1e1f, 0x4e9e, 0x7091, 0x1, 0x1);
        gbc.writeMem(0xd141, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x16a2);
        EXPECT(gbc.pc(), 0xd143);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd141), 0xcb);
        EXPECT(gbc.readMem(0xd142), 0x31);
        // CB 31 031D
        gbc.setState(0xa652, 0xd67e, 0x3e20, 0xaed, 0x1057, 0x1b46, 0x0, 0x1);
        gbc.writeMem(0xa652, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xd67e);
        EXPECT(gbc.pc(), 0xa654);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa652), 0xcb);
        EXPECT(gbc.readMem(0xa653), 0x31);
        // CB 31 031E
        gbc.setState(0xe109, 0x7e8e, 0xbe00, 0x75be, 0xbe13, 0x4b08, 0x1, 0x1);
        gbc.writeMem(0xe109, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x7e8e);
        EXPECT(gbc.pc(), 0xe10b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe109), 0xcb);
        EXPECT(gbc.readMem(0xe10a), 0x31);
        // CB 31 031F
        gbc.setState(0x317a, 0xfc8c, 0xddf0, 0xd7fe, 0x88c8, 0x452f, 0x0, 0x1);
        gbc.writeMem(0x317a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xfc8c);
        EXPECT(gbc.pc(), 0x317c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0320
        gbc.setState(0x4c11, 0xbb17, 0x76f0, 0x695a, 0x9d6b, 0xf8cd, 0x1, 0x1);
        gbc.writeMem(0x4c11, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xbb17);
        EXPECT(gbc.pc(), 0x4c13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0321
        gbc.setState(0xe3e2, 0x8a59, 0xe4c0, 0x8ec9, 0x8946, 0x7f91, 0x0, 0x0);
        gbc.writeMem(0xe3e2, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x8a59);
        EXPECT(gbc.pc(), 0xe3e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3e2), 0xcb);
        EXPECT(gbc.readMem(0xe3e3), 0x31);
        // CB 31 0322
        gbc.setState(0x35a8, 0xdd71, 0xf8a0, 0xd934, 0x9ca4, 0xf7bb, 0x1, 0x1);
        gbc.writeMem(0x35a8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xdd71);
        EXPECT(gbc.pc(), 0x35aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0323
        gbc.setState(0x7d1, 0x6a89, 0x9d40, 0xe9bc, 0xa994, 0x1812, 0x0, 0x1);
        gbc.writeMem(0x7d1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x6a89);
        EXPECT(gbc.pc(), 0x7d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0324
        gbc.setState(0x6a7e, 0x21e, 0xbf60, 0xa358, 0x8dc8, 0x995d, 0x1, 0x1);
        gbc.writeMem(0x6a7e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x21e);
        EXPECT(gbc.pc(), 0x6a80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0325
        gbc.setState(0xae86, 0xd55c, 0x85f0, 0x5403, 0x4560, 0x19bd, 0x1, 0x0);
        gbc.writeMem(0xae86, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd55c);
        EXPECT(gbc.pc(), 0xae88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae86), 0xcb);
        EXPECT(gbc.readMem(0xae87), 0x31);
        // CB 31 0326
        gbc.setState(0xc7d5, 0xf0d4, 0x5be0, 0x5465, 0xf03e, 0xff88, 0x1, 0x0);
        gbc.writeMem(0xc7d5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xf0d4);
        EXPECT(gbc.pc(), 0xc7d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7d5), 0xcb);
        EXPECT(gbc.readMem(0xc7d6), 0x31);
        // CB 31 0327
        gbc.setState(0x132b, 0xc6d2, 0xd560, 0xdfef, 0xaa88, 0x232e, 0x1, 0x0);
        gbc.writeMem(0x132b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xc6d2);
        EXPECT(gbc.pc(), 0x132d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0328
        gbc.setState(0xef57, 0xab37, 0xed0, 0x2100, 0xc776, 0x3899, 0x1, 0x1);
        gbc.writeMem(0xef57, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xab37);
        EXPECT(gbc.pc(), 0xef59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef57), 0xcb);
        EXPECT(gbc.readMem(0xef58), 0x31);
        // CB 31 0329
        gbc.setState(0xad91, 0x7d67, 0xe640, 0xe790, 0xece1, 0xae31, 0x1, 0x1);
        gbc.writeMem(0xad91, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x7d67);
        EXPECT(gbc.pc(), 0xad93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad91), 0xcb);
        EXPECT(gbc.readMem(0xad92), 0x31);
        // CB 31 032A
        gbc.setState(0xb4ca, 0x9213, 0xb200, 0x54f2, 0x72a1, 0x2cea, 0x1, 0x0);
        gbc.writeMem(0xb4ca, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x9213);
        EXPECT(gbc.pc(), 0xb4cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4ca), 0xcb);
        EXPECT(gbc.readMem(0xb4cb), 0x31);
        // CB 31 032B
        gbc.setState(0x22f8, 0x87a9, 0xd7c0, 0xbdb7, 0x45a9, 0xed70, 0x0, 0x0);
        gbc.writeMem(0x22f8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x87a9);
        EXPECT(gbc.pc(), 0x22fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 032C
        gbc.setState(0xad30, 0xe1b9, 0x2970, 0xdcac, 0x3f40, 0x289a, 0x0, 0x0);
        gbc.writeMem(0xad30, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xe1b9);
        EXPECT(gbc.pc(), 0xad32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad30), 0xcb);
        EXPECT(gbc.readMem(0xad31), 0x31);
        // CB 31 032D
        gbc.setState(0x165f, 0xffa, 0x84d0, 0x68db, 0x64b6, 0xbf8a, 0x1, 0x1);
        gbc.writeMem(0x165f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xffa);
        EXPECT(gbc.pc(), 0x1661);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 032E
        gbc.setState(0xaea8, 0x6360, 0x46d0, 0x7f0c, 0xb288, 0x70f5, 0x0, 0x1);
        gbc.writeMem(0xaea8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x6360);
        EXPECT(gbc.pc(), 0xaeaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaea8), 0xcb);
        EXPECT(gbc.readMem(0xaea9), 0x31);
        // CB 31 0330
        gbc.setState(0xac5f, 0x9321, 0xf430, 0x9bbf, 0xcc30, 0xee22, 0x0, 0x0);
        gbc.writeMem(0xac5f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x9321);
        EXPECT(gbc.pc(), 0xac61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac5f), 0xcb);
        EXPECT(gbc.readMem(0xac60), 0x31);
        // CB 31 0331
        gbc.setState(0x8425, 0x3038, 0x2840, 0xdcf, 0x5d17, 0x8f16, 0x0, 0x1);
        gbc.writeMem(0x8425, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x3038);
        EXPECT(gbc.pc(), 0x8427);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8425), 0xcb);
        EXPECT(gbc.readMem(0x8426), 0x31);
        // CB 31 0332
        gbc.setState(0x33b8, 0x7f44, 0x5040, 0x37ef, 0xf4b7, 0x33, 0x0, 0x1);
        gbc.writeMem(0x33b8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x7f44);
        EXPECT(gbc.pc(), 0x33ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0333
        gbc.setState(0xa99f, 0x72b, 0xe910, 0x29ff, 0x8914, 0x94be, 0x0, 0x1);
        gbc.writeMem(0xa99f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x72b);
        EXPECT(gbc.pc(), 0xa9a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa99f), 0xcb);
        EXPECT(gbc.readMem(0xa9a0), 0x31);
        // CB 31 0334
        gbc.setState(0x22c7, 0xb712, 0x96a0, 0xd90d, 0x4a72, 0x62a2, 0x1, 0x0);
        gbc.writeMem(0x22c7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xb712);
        EXPECT(gbc.pc(), 0x22c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0335
        gbc.setState(0xba6b, 0x2459, 0x2c70, 0xfb, 0x5bcc, 0xb39c, 0x0, 0x0);
        gbc.writeMem(0xba6b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x2459);
        EXPECT(gbc.pc(), 0xba6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba6b), 0xcb);
        EXPECT(gbc.readMem(0xba6c), 0x31);
        // CB 31 0336
        gbc.setState(0x3d6f, 0xa12e, 0x7a60, 0xf6d3, 0xc778, 0x69a6, 0x0, 0x0);
        gbc.writeMem(0x3d6f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xa12e);
        EXPECT(gbc.pc(), 0x3d71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0337
        gbc.setState(0xae27, 0xf2d1, 0x86d0, 0x6b32, 0xb4e, 0x8647, 0x1, 0x1);
        gbc.writeMem(0xae27, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xf2d1);
        EXPECT(gbc.pc(), 0xae29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae27), 0xcb);
        EXPECT(gbc.readMem(0xae28), 0x31);
        // CB 31 0338
        gbc.setState(0x1978, 0x7ebf, 0x9820, 0x2284, 0xd734, 0xb8e4, 0x1, 0x1);
        gbc.writeMem(0x1978, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x7ebf);
        EXPECT(gbc.pc(), 0x197a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0339
        gbc.setState(0xe9b4, 0xcdd4, 0x2ea0, 0x6911, 0x3397, 0x8f54, 0x0, 0x1);
        gbc.writeMem(0xe9b4, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xcdd4);
        EXPECT(gbc.pc(), 0xe9b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9b4), 0xcb);
        EXPECT(gbc.readMem(0xe9b5), 0x31);
        // CB 31 033A
        gbc.setState(0x6f25, 0x5283, 0x1fd0, 0xe63f, 0xf648, 0x2ad7, 0x0, 0x0);
        gbc.writeMem(0x6f25, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x5283);
        EXPECT(gbc.pc(), 0x6f27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 033B
        gbc.setState(0x32c0, 0xa9f, 0x8570, 0x4ad7, 0xfdf6, 0x21e1, 0x1, 0x1);
        gbc.writeMem(0x32c0, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xa9f);
        EXPECT(gbc.pc(), 0x32c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 033C
        gbc.setState(0x3c6d, 0xdbd4, 0xd040, 0x8745, 0x850b, 0x2383, 0x0, 0x0);
        gbc.writeMem(0x3c6d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xdbd4);
        EXPECT(gbc.pc(), 0x3c6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 033D
        gbc.setState(0xb8ac, 0xab67, 0x8a20, 0xab8f, 0x533d, 0x1b89, 0x1, 0x1);
        gbc.writeMem(0xb8ac, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xab67);
        EXPECT(gbc.pc(), 0xb8ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8ac), 0xcb);
        EXPECT(gbc.readMem(0xb8ad), 0x31);
        // CB 31 033E
        gbc.setState(0x3d2d, 0xfcce, 0xba90, 0x3727, 0x4bd3, 0x74f6, 0x0, 0x0);
        gbc.writeMem(0x3d2d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xfcce);
        EXPECT(gbc.pc(), 0x3d2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 033F
        gbc.setState(0xda6, 0x3c5f, 0x1240, 0xa8ef, 0x84cf, 0xcc61, 0x1, 0x0);
        gbc.writeMem(0xda6, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x3c5f);
        EXPECT(gbc.pc(), 0xda8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0340
        gbc.setState(0x181c, 0xc84, 0x110, 0xc2ac, 0xc2a, 0xbab6, 0x0, 0x0);
        gbc.writeMem(0x181c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xc84);
        EXPECT(gbc.pc(), 0x181e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0341
        gbc.setState(0x8c86, 0x8890, 0xf70, 0x4de1, 0x8de6, 0x6f91, 0x0, 0x0);
        gbc.writeMem(0x8c86, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x8890);
        EXPECT(gbc.pc(), 0x8c88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c86), 0xcb);
        EXPECT(gbc.readMem(0x8c87), 0x31);
        // CB 31 0342
        gbc.setState(0x13d2, 0x3a0e, 0xf160, 0x50f5, 0x7472, 0xcfb1, 0x1, 0x1);
        gbc.writeMem(0x13d2, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x3a0e);
        EXPECT(gbc.pc(), 0x13d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0343
        gbc.setState(0xc75, 0x14f6, 0x21b0, 0xac08, 0xa422, 0xb002, 0x1, 0x1);
        gbc.writeMem(0xc75, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x14f6);
        EXPECT(gbc.pc(), 0xc77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0344
        gbc.setState(0xa0ff, 0x7ed3, 0xbc20, 0x20c9, 0xc69d, 0xb898, 0x1, 0x1);
        gbc.writeMem(0xa0ff, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x7ed3);
        EXPECT(gbc.pc(), 0xa101);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0ff), 0xcb);
        EXPECT(gbc.readMem(0xa100), 0x31);
        // CB 31 0345
        gbc.setState(0x37f5, 0x1a62, 0x9e80, 0xf921, 0xf754, 0x5aed, 0x1, 0x1);
        gbc.writeMem(0x37f5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x1a62);
        EXPECT(gbc.pc(), 0x37f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0346
        gbc.setState(0xd8b0, 0x3999, 0xf570, 0x2d97, 0xae56, 0x8d7e, 0x0, 0x1);
        gbc.writeMem(0xd8b0, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x3999);
        EXPECT(gbc.pc(), 0xd8b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8b0), 0xcb);
        EXPECT(gbc.readMem(0xd8b1), 0x31);
        // CB 31 0347
        gbc.setState(0x4800, 0x651d, 0x95e0, 0xc793, 0x7a3f, 0xeaee, 0x0, 0x1);
        gbc.writeMem(0x4800, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x651d);
        EXPECT(gbc.pc(), 0x4802);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0348
        gbc.setState(0xb286, 0xb6fc, 0x37a0, 0xd6, 0xbf11, 0x8977, 0x0, 0x0);
        gbc.writeMem(0xb286, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xb6fc);
        EXPECT(gbc.pc(), 0xb288);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb286), 0xcb);
        EXPECT(gbc.readMem(0xb287), 0x31);
        // CB 31 0349
        gbc.setState(0x2879, 0xfde4, 0xcc0, 0xe863, 0x4356, 0x280, 0x0, 0x0);
        gbc.writeMem(0x2879, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xfde4);
        EXPECT(gbc.pc(), 0x287b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 034A
        gbc.setState(0xef6d, 0xd832, 0x8050, 0x317e, 0x5dc8, 0xd786, 0x0, 0x0);
        gbc.writeMem(0xef6d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xd832);
        EXPECT(gbc.pc(), 0xef6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef6d), 0xcb);
        EXPECT(gbc.readMem(0xef6e), 0x31);
        // CB 31 034B
        gbc.setState(0x1ca3, 0x187f, 0x9c80, 0x4adb, 0xc760, 0x126f, 0x0, 0x0);
        gbc.writeMem(0x1ca3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x187f);
        EXPECT(gbc.pc(), 0x1ca5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 034C
        gbc.setState(0x21af, 0x55ec, 0xb210, 0x9344, 0x1665, 0x1506, 0x0, 0x1);
        gbc.writeMem(0x21af, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x55ec);
        EXPECT(gbc.pc(), 0x21b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 034D
        gbc.setState(0x4e7b, 0xe, 0x8880, 0xc04b, 0x98df, 0x1074, 0x0, 0x1);
        gbc.writeMem(0x4e7b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xe);
        EXPECT(gbc.pc(), 0x4e7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 034E
        gbc.setState(0x1f3c, 0xe7a0, 0xebe0, 0xd02d, 0x9d74, 0x27e3, 0x1, 0x1);
        gbc.writeMem(0x1f3c, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xe7a0);
        EXPECT(gbc.pc(), 0x1f3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 034F
        gbc.setState(0xa0, 0xe766, 0xc910, 0x7e45, 0xf6a4, 0xf50d, 0x1, 0x0);
        gbc.writeMem(0xa0, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xe766);
        EXPECT(gbc.pc(), 0xa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0350
        gbc.setState(0x18f3, 0xc3fd, 0xcb50, 0x4fa, 0xe76a, 0x84c9, 0x0, 0x1);
        gbc.writeMem(0x18f3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xc3fd);
        EXPECT(gbc.pc(), 0x18f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0351
        gbc.setState(0xa218, 0xdf24, 0x8db0, 0x1677, 0x461b, 0xefe, 0x0, 0x0);
        gbc.writeMem(0xa218, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xdf24);
        EXPECT(gbc.pc(), 0xa21a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa218), 0xcb);
        EXPECT(gbc.readMem(0xa219), 0x31);
        // CB 31 0352
        gbc.setState(0x5cc7, 0x9e72, 0x56e0, 0x7f6a, 0x6b28, 0x8eba, 0x1, 0x0);
        gbc.writeMem(0x5cc7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x9e72);
        EXPECT(gbc.pc(), 0x5cc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0353
        gbc.setState(0x2f78, 0x2284, 0x65b0, 0xe123, 0x11bb, 0x6187, 0x0, 0x1);
        gbc.writeMem(0x2f78, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x2284);
        EXPECT(gbc.pc(), 0x2f7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0354
        gbc.setState(0xa553, 0x4d25, 0xb0a0, 0x929b, 0x2761, 0xf7c1, 0x0, 0x0);
        gbc.writeMem(0xa553, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4d25);
        EXPECT(gbc.pc(), 0xa555);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa553), 0xcb);
        EXPECT(gbc.readMem(0xa554), 0x31);
        // CB 31 0355
        gbc.setState(0x7c16, 0xa01, 0xad70, 0xd334, 0x3d93, 0x7c0, 0x0, 0x0);
        gbc.writeMem(0x7c16, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xa01);
        EXPECT(gbc.pc(), 0x7c18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0356
        gbc.setState(0xc4d9, 0x9afc, 0x9b30, 0xd2b9, 0xda0e, 0x72e1, 0x0, 0x0);
        gbc.writeMem(0xc4d9, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x9afc);
        EXPECT(gbc.pc(), 0xc4db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4d9), 0xcb);
        EXPECT(gbc.readMem(0xc4da), 0x31);
        // CB 31 0357
        gbc.setState(0xa9b7, 0x8793, 0xaad0, 0xc228, 0x6a04, 0x3954, 0x1, 0x1);
        gbc.writeMem(0xa9b7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x8793);
        EXPECT(gbc.pc(), 0xa9b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9b7), 0xcb);
        EXPECT(gbc.readMem(0xa9b8), 0x31);
        // CB 31 0358
        gbc.setState(0x74d1, 0x5973, 0x1620, 0x797d, 0x306a, 0xd36c, 0x1, 0x0);
        gbc.writeMem(0x74d1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5973);
        EXPECT(gbc.pc(), 0x74d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0359
        gbc.setState(0x15f4, 0xbf8d, 0x690, 0x6f84, 0x8fa, 0x8734, 0x0, 0x1);
        gbc.writeMem(0x15f4, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xbf8d);
        EXPECT(gbc.pc(), 0x15f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 035A
        gbc.setState(0x63a0, 0x4c8f, 0x16d0, 0xa1a4, 0xb687, 0x2686, 0x1, 0x0);
        gbc.writeMem(0x63a0, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4c8f);
        EXPECT(gbc.pc(), 0x63a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 035B
        gbc.setState(0x57ad, 0x920a, 0x8e10, 0xacbb, 0x96af, 0xfeb2, 0x1, 0x1);
        gbc.writeMem(0x57ad, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x920a);
        EXPECT(gbc.pc(), 0x57af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 035C
        gbc.setState(0xb81f, 0x6b39, 0xa450, 0x1be5, 0xe445, 0xd0b1, 0x1, 0x1);
        gbc.writeMem(0xb81f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x6b39);
        EXPECT(gbc.pc(), 0xb821);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb81f), 0xcb);
        EXPECT(gbc.readMem(0xb820), 0x31);
        // CB 31 035D
        gbc.setState(0xe713, 0xd3ff, 0x38d0, 0x2a35, 0xc8d6, 0x3a9c, 0x1, 0x0);
        gbc.writeMem(0xe713, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd3ff);
        EXPECT(gbc.pc(), 0xe715);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe713), 0xcb);
        EXPECT(gbc.readMem(0xe714), 0x31);
        // CB 31 035E
        gbc.setState(0xb0a4, 0x5713, 0x8710, 0xb3a1, 0xf6e2, 0xe76b, 0x1, 0x0);
        gbc.writeMem(0xb0a4, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x5713);
        EXPECT(gbc.pc(), 0xb0a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0a4), 0xcb);
        EXPECT(gbc.readMem(0xb0a5), 0x31);
        // CB 31 035F
        gbc.setState(0xae0d, 0x58a6, 0x8440, 0xff5f, 0x596b, 0xb63d, 0x0, 0x0);
        gbc.writeMem(0xae0d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x58a6);
        EXPECT(gbc.pc(), 0xae0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae0d), 0xcb);
        EXPECT(gbc.readMem(0xae0e), 0x31);
        // CB 31 0360
        gbc.setState(0x577, 0x8220, 0x39b0, 0x4c80, 0x77a5, 0x918c, 0x0, 0x1);
        gbc.writeMem(0x577, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8220);
        EXPECT(gbc.pc(), 0x579);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0361
        gbc.setState(0x1fbd, 0x1ba7, 0x1d20, 0x9ae8, 0x7fd1, 0x2f01, 0x0, 0x1);
        gbc.writeMem(0x1fbd, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x1ba7);
        EXPECT(gbc.pc(), 0x1fbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0362
        gbc.setState(0xce2e, 0xd4cc, 0xea30, 0xcee7, 0x4067, 0x8836, 0x0, 0x0);
        gbc.writeMem(0xce2e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xd4cc);
        EXPECT(gbc.pc(), 0xce30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce2e), 0xcb);
        EXPECT(gbc.readMem(0xce2f), 0x31);
        // CB 31 0363
        gbc.setState(0x5ccb, 0x8968, 0x6130, 0xe13f, 0xb353, 0xdd5e, 0x1, 0x0);
        gbc.writeMem(0x5ccb, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x8968);
        EXPECT(gbc.pc(), 0x5ccd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0364
        gbc.setState(0xe034, 0x535, 0xbd20, 0x27bd, 0x354c, 0x4e69, 0x0, 0x1);
        gbc.writeMem(0xe034, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x535);
        EXPECT(gbc.pc(), 0xe036);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe034), 0xcb);
        EXPECT(gbc.readMem(0xe035), 0x31);
        // CB 31 0365
        gbc.setState(0x8368, 0x9950, 0x8540, 0x2a12, 0x8a7a, 0x9bfa, 0x1, 0x1);
        gbc.writeMem(0x8368, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x9950);
        EXPECT(gbc.pc(), 0x836a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8368), 0xcb);
        EXPECT(gbc.readMem(0x8369), 0x31);
        // CB 31 0366
        gbc.setState(0x7583, 0x9a13, 0x2d10, 0x8228, 0x2354, 0xa3db, 0x1, 0x1);
        gbc.writeMem(0x7583, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x9a13);
        EXPECT(gbc.pc(), 0x7585);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0367
        gbc.setState(0x4d39, 0xdac8, 0x350, 0x4ce6, 0xcf5b, 0x936a, 0x1, 0x0);
        gbc.writeMem(0x4d39, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xdac8);
        EXPECT(gbc.pc(), 0x4d3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0368
        gbc.setState(0x940a, 0x7a42, 0x69b0, 0xfc23, 0x4d12, 0xe94e, 0x1, 0x0);
        gbc.writeMem(0x940a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x7a42);
        EXPECT(gbc.pc(), 0x940c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x940a), 0xcb);
        EXPECT(gbc.readMem(0x940b), 0x31);
        // CB 31 0369
        gbc.setState(0x239b, 0xd9ef, 0xcf90, 0x9f31, 0xf0d9, 0x893, 0x1, 0x1);
        gbc.writeMem(0x239b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xd9ef);
        EXPECT(gbc.pc(), 0x239d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 036A
        gbc.setState(0xd01d, 0x7ea, 0xb960, 0xb9db, 0xa30a, 0xf3e0, 0x0, 0x0);
        gbc.writeMem(0xd01d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x7ea);
        EXPECT(gbc.pc(), 0xd01f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd01d), 0xcb);
        EXPECT(gbc.readMem(0xd01e), 0x31);
        // CB 31 036B
        gbc.setState(0x4562, 0x81ff, 0x44b0, 0xebab, 0xb782, 0x958d, 0x0, 0x1);
        gbc.writeMem(0x4562, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x81ff);
        EXPECT(gbc.pc(), 0x4564);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 036C
        gbc.setState(0x399f, 0xa42, 0x82b0, 0xe175, 0xf201, 0xbbd9, 0x1, 0x1);
        gbc.writeMem(0x399f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xa42);
        EXPECT(gbc.pc(), 0x39a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 036D
        gbc.setState(0x593f, 0x21b, 0x1560, 0x2703, 0x5fe4, 0xce12, 0x0, 0x0);
        gbc.writeMem(0x593f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x21b);
        EXPECT(gbc.pc(), 0x5941);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 036E
        gbc.setState(0x5b0b, 0x6e31, 0x7430, 0x4dc4, 0xbc02, 0x65ac, 0x1, 0x1);
        gbc.writeMem(0x5b0b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x6e31);
        EXPECT(gbc.pc(), 0x5b0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 036F
        gbc.setState(0x3658, 0x9e37, 0x45c0, 0xf072, 0xcdca, 0x1e4, 0x0, 0x0);
        gbc.writeMem(0x3658, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x9e37);
        EXPECT(gbc.pc(), 0x365a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0370
        gbc.setState(0x49ee, 0x58ec, 0x8810, 0x6de1, 0x4897, 0x9321, 0x0, 0x0);
        gbc.writeMem(0x49ee, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x58ec);
        EXPECT(gbc.pc(), 0x49f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0371
        gbc.setState(0x1104, 0x91a8, 0x6830, 0x4222, 0xd974, 0xee32, 0x1, 0x0);
        gbc.writeMem(0x1104, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x91a8);
        EXPECT(gbc.pc(), 0x1106);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0372
        gbc.setState(0x383, 0xe0a2, 0xdf00, 0xd386, 0xa5d9, 0x4685, 0x1, 0x0);
        gbc.writeMem(0x383, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xe0a2);
        EXPECT(gbc.pc(), 0x385);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0373
        gbc.setState(0x90e7, 0x73f1, 0x19c0, 0x1ca4, 0xda01, 0x38a8, 0x0, 0x0);
        gbc.writeMem(0x90e7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x73f1);
        EXPECT(gbc.pc(), 0x90e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90e7), 0xcb);
        EXPECT(gbc.readMem(0x90e8), 0x31);
        // CB 31 0374
        gbc.setState(0x910a, 0x954e, 0x11f0, 0x62af, 0x4efb, 0x486d, 0x1, 0x1);
        gbc.writeMem(0x910a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x954e);
        EXPECT(gbc.pc(), 0x910c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x910a), 0xcb);
        EXPECT(gbc.readMem(0x910b), 0x31);
        // CB 31 0375
        gbc.setState(0xeb76, 0x26b9, 0x7b30, 0x9e26, 0x4264, 0xb522, 0x0, 0x1);
        gbc.writeMem(0xeb76, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x26b9);
        EXPECT(gbc.pc(), 0xeb78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb76), 0xcb);
        EXPECT(gbc.readMem(0xeb77), 0x31);
        // CB 31 0376
        gbc.setState(0x4cd7, 0xd1c0, 0x7060, 0xbcd, 0x8311, 0xab9c, 0x0, 0x1);
        gbc.writeMem(0x4cd7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd1c0);
        EXPECT(gbc.pc(), 0x4cd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0377
        gbc.setState(0x59a6, 0xbedc, 0x28a0, 0x1b1b, 0xb224, 0x5515, 0x1, 0x0);
        gbc.writeMem(0x59a6, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xbedc);
        EXPECT(gbc.pc(), 0x59a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0378
        gbc.setState(0xe719, 0x3484, 0xb2e0, 0xb5d5, 0x112c, 0xd335, 0x1, 0x1);
        gbc.writeMem(0xe719, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x3484);
        EXPECT(gbc.pc(), 0xe71b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe719), 0xcb);
        EXPECT(gbc.readMem(0xe71a), 0x31);
        // CB 31 0379
        gbc.setState(0x69f9, 0x6aeb, 0x4830, 0x93b8, 0xa610, 0xcdbf, 0x1, 0x0);
        gbc.writeMem(0x69f9, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x6aeb);
        EXPECT(gbc.pc(), 0x69fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 037A
        gbc.setState(0xe633, 0xe517, 0xc4e0, 0x7917, 0xb339, 0xb2db, 0x0, 0x0);
        gbc.writeMem(0xe633, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xe517);
        EXPECT(gbc.pc(), 0xe635);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe633), 0xcb);
        EXPECT(gbc.readMem(0xe634), 0x31);
        // CB 31 037B
        gbc.setState(0xa0ca, 0xad6a, 0x490, 0xb574, 0x5b21, 0x80ea, 0x0, 0x0);
        gbc.writeMem(0xa0ca, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xad6a);
        EXPECT(gbc.pc(), 0xa0cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0ca), 0xcb);
        EXPECT(gbc.readMem(0xa0cb), 0x31);
        // CB 31 037C
        gbc.setState(0x3815, 0x3fb6, 0xf890, 0xba5, 0x5299, 0x2c7b, 0x1, 0x1);
        gbc.writeMem(0x3815, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x3fb6);
        EXPECT(gbc.pc(), 0x3817);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 037D
        gbc.setState(0x6594, 0xb915, 0x31b0, 0x436d, 0x6bb1, 0x4f8, 0x1, 0x0);
        gbc.writeMem(0x6594, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xb915);
        EXPECT(gbc.pc(), 0x6596);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 037E
        gbc.setState(0x63d6, 0x97f, 0x3640, 0x5287, 0x9a0b, 0xf539, 0x1, 0x1);
        gbc.writeMem(0x63d6, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x97f);
        EXPECT(gbc.pc(), 0x63d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 037F
        gbc.setState(0xea3a, 0x4a83, 0x1820, 0x37f9, 0x54c5, 0xbc8a, 0x1, 0x1);
        gbc.writeMem(0xea3a, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x4a83);
        EXPECT(gbc.pc(), 0xea3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea3a), 0xcb);
        EXPECT(gbc.readMem(0xea3b), 0x31);
        // CB 31 0380
        gbc.setState(0x6066, 0x8927, 0xd680, 0x94b6, 0x4280, 0x2407, 0x1, 0x1);
        gbc.writeMem(0x6066, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x8927);
        EXPECT(gbc.pc(), 0x6068);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0381
        gbc.setState(0xed57, 0x400e, 0x1db0, 0x9d4e, 0xe656, 0x7ce1, 0x0, 0x0);
        gbc.writeMem(0xed57, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x400e);
        EXPECT(gbc.pc(), 0xed59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed57), 0xcb);
        EXPECT(gbc.readMem(0xed58), 0x31);
        // CB 31 0382
        gbc.setState(0x8b3e, 0x11d8, 0x98c0, 0xfe28, 0x8089, 0x3452, 0x1, 0x1);
        gbc.writeMem(0x8b3e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x11d8);
        EXPECT(gbc.pc(), 0x8b40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b3e), 0xcb);
        EXPECT(gbc.readMem(0x8b3f), 0x31);
        // CB 31 0384
        gbc.setState(0x68ee, 0xa82, 0xce0, 0xba79, 0xc2d5, 0x386a, 0x0, 0x0);
        gbc.writeMem(0x68ee, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xa82);
        EXPECT(gbc.pc(), 0x68f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0385
        gbc.setState(0x4ba5, 0x8662, 0x6950, 0x26d3, 0x9eb1, 0xe2f9, 0x1, 0x0);
        gbc.writeMem(0x4ba5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x8662);
        EXPECT(gbc.pc(), 0x4ba7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0386
        gbc.setState(0x3e90, 0x70fa, 0x5fa0, 0xba9b, 0x3adf, 0x233d, 0x0, 0x1);
        gbc.writeMem(0x3e90, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x70fa);
        EXPECT(gbc.pc(), 0x3e92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0387
        gbc.setState(0xdefa, 0xbef8, 0xbb30, 0x5ef1, 0x8f68, 0xecfc, 0x1, 0x0);
        gbc.writeMem(0xdefa, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xbef8);
        EXPECT(gbc.pc(), 0xdefc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdefa), 0xcb);
        EXPECT(gbc.readMem(0xdefb), 0x31);
        // CB 31 0388
        gbc.setState(0xd1ce, 0xde73, 0x3820, 0x5a78, 0x1433, 0x9ccc, 0x1, 0x1);
        gbc.writeMem(0xd1ce, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xde73);
        EXPECT(gbc.pc(), 0xd1d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1ce), 0xcb);
        EXPECT(gbc.readMem(0xd1cf), 0x31);
        // CB 31 0389
        gbc.setState(0xc9be, 0x88ce, 0xa5c0, 0xf224, 0xb3f2, 0x8b91, 0x0, 0x1);
        gbc.writeMem(0xc9be, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x88ce);
        EXPECT(gbc.pc(), 0xc9c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9be), 0xcb);
        EXPECT(gbc.readMem(0xc9bf), 0x31);
        // CB 31 038A
        gbc.setState(0x4259, 0xc486, 0xfe30, 0xae6a, 0x5e05, 0xa112, 0x0, 0x1);
        gbc.writeMem(0x4259, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xc486);
        EXPECT(gbc.pc(), 0x425b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 038B
        gbc.setState(0x1f05, 0xd1e, 0xe510, 0x68e2, 0x34c8, 0xd918, 0x0, 0x1);
        gbc.writeMem(0x1f05, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd1e);
        EXPECT(gbc.pc(), 0x1f07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 038C
        gbc.setState(0x9d38, 0x2d1c, 0x2c60, 0x100b, 0x7a4f, 0x23c6, 0x0, 0x0);
        gbc.writeMem(0x9d38, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x2d1c);
        EXPECT(gbc.pc(), 0x9d3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d38), 0xcb);
        EXPECT(gbc.readMem(0x9d39), 0x31);
        // CB 31 038D
        gbc.setState(0x299d, 0x43a5, 0xbdd0, 0x65fd, 0x991a, 0xab4, 0x0, 0x1);
        gbc.writeMem(0x299d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x43a5);
        EXPECT(gbc.pc(), 0x299f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 038E
        gbc.setState(0x4225, 0x538d, 0xe5f0, 0xbca9, 0x3a52, 0x195a, 0x1, 0x0);
        gbc.writeMem(0x4225, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x538d);
        EXPECT(gbc.pc(), 0x4227);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 038F
        gbc.setState(0x4fa5, 0xfc9e, 0xa9c0, 0xa3a8, 0x614, 0x95a7, 0x1, 0x0);
        gbc.writeMem(0x4fa5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xfc9e);
        EXPECT(gbc.pc(), 0x4fa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0390
        gbc.setState(0x30fa, 0x6eb0, 0xaf30, 0x1585, 0xe15d, 0x90d2, 0x0, 0x1);
        gbc.writeMem(0x30fa, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x6eb0);
        EXPECT(gbc.pc(), 0x30fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0391
        gbc.setState(0x9846, 0xb121, 0x8d10, 0x2c4f, 0x24c3, 0xbc85, 0x0, 0x0);
        gbc.writeMem(0x9846, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb121);
        EXPECT(gbc.pc(), 0x9848);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9846), 0xcb);
        EXPECT(gbc.readMem(0x9847), 0x31);
        // CB 31 0392
        gbc.setState(0xc264, 0xba5a, 0x1290, 0xb92b, 0xae90, 0xb540, 0x0, 0x0);
        gbc.writeMem(0xc264, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xba5a);
        EXPECT(gbc.pc(), 0xc266);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc264), 0xcb);
        EXPECT(gbc.readMem(0xc265), 0x31);
        // CB 31 0393
        gbc.setState(0x3679, 0x41ce, 0x2f60, 0xb7be, 0x2fc2, 0x7c43, 0x1, 0x0);
        gbc.writeMem(0x3679, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x41ce);
        EXPECT(gbc.pc(), 0x367b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0394
        gbc.setState(0x4123, 0xa12f, 0xd420, 0x1181, 0x83e6, 0x69b5, 0x1, 0x0);
        gbc.writeMem(0x4123, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xa12f);
        EXPECT(gbc.pc(), 0x4125);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0395
        gbc.setState(0x2c24, 0xcef, 0xa240, 0x9c27, 0x9c5, 0x19c1, 0x1, 0x0);
        gbc.writeMem(0x2c24, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xcef);
        EXPECT(gbc.pc(), 0x2c26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0396
        gbc.setState(0x9b9f, 0x2a4, 0x14a0, 0x2fa9, 0x87cb, 0x695d, 0x1, 0x0);
        gbc.writeMem(0x9b9f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x2a4);
        EXPECT(gbc.pc(), 0x9ba1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b9f), 0xcb);
        EXPECT(gbc.readMem(0x9ba0), 0x31);
        // CB 31 0397
        gbc.setState(0x197b, 0xb3fe, 0x8850, 0x6f28, 0x154e, 0x7e4c, 0x1, 0x1);
        gbc.writeMem(0x197b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xb3fe);
        EXPECT(gbc.pc(), 0x197d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0398
        gbc.setState(0x6b54, 0xf632, 0xf400, 0x12a1, 0xdb9f, 0xc4eb, 0x0, 0x0);
        gbc.writeMem(0x6b54, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xf632);
        EXPECT(gbc.pc(), 0x6b56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 0399
        gbc.setState(0x4a29, 0xc285, 0xb850, 0x7b87, 0x4a30, 0xbf4e, 0x1, 0x0);
        gbc.writeMem(0x4a29, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xc285);
        EXPECT(gbc.pc(), 0x4a2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 039A
        gbc.setState(0xebcb, 0x4e97, 0x7f00, 0x5f50, 0x3d60, 0x6f7b, 0x1, 0x0);
        gbc.writeMem(0xebcb, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x4e97);
        EXPECT(gbc.pc(), 0xebcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebcb), 0xcb);
        EXPECT(gbc.readMem(0xebcc), 0x31);
        // CB 31 039B
        gbc.setState(0xd91b, 0x57fa, 0xd3f0, 0xaa0d, 0x4f3a, 0x4db, 0x1, 0x1);
        gbc.writeMem(0xd91b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x57fa);
        EXPECT(gbc.pc(), 0xd91d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd91b), 0xcb);
        EXPECT(gbc.readMem(0xd91c), 0x31);
        // CB 31 039C
        gbc.setState(0xba47, 0xac82, 0x6e60, 0xbc2, 0x3c4c, 0xae70, 0x0, 0x0);
        gbc.writeMem(0xba47, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xac82);
        EXPECT(gbc.pc(), 0xba49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba47), 0xcb);
        EXPECT(gbc.readMem(0xba48), 0x31);
        // CB 31 039D
        gbc.setState(0xd8da, 0x21c2, 0x37a0, 0x28a6, 0xd8d, 0xe561, 0x1, 0x1);
        gbc.writeMem(0xd8da, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x21c2);
        EXPECT(gbc.pc(), 0xd8dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8da), 0xcb);
        EXPECT(gbc.readMem(0xd8db), 0x31);
        // CB 31 039E
        gbc.setState(0xd469, 0xf3cd, 0xc10, 0x88dd, 0xe894, 0xbbfc, 0x0, 0x1);
        gbc.writeMem(0xd469, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xf3cd);
        EXPECT(gbc.pc(), 0xd46b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd469), 0xcb);
        EXPECT(gbc.readMem(0xd46a), 0x31);
        // CB 31 039F
        gbc.setState(0x8ce8, 0xae9e, 0x6780, 0x76fa, 0x763a, 0xa9bf, 0x1, 0x1);
        gbc.writeMem(0x8ce8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xae9e);
        EXPECT(gbc.pc(), 0x8cea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ce8), 0xcb);
        EXPECT(gbc.readMem(0x8ce9), 0x31);
        // CB 31 03A0
        gbc.setState(0xd4a6, 0xe531, 0x9470, 0xed77, 0xbba9, 0xc347, 0x0, 0x1);
        gbc.writeMem(0xd4a6, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xe531);
        EXPECT(gbc.pc(), 0xd4a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4a6), 0xcb);
        EXPECT(gbc.readMem(0xd4a7), 0x31);
        // CB 31 03A1
        gbc.setState(0xd01f, 0x443, 0x9410, 0x70c, 0x183a, 0x3eb4, 0x0, 0x0);
        gbc.writeMem(0xd01f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x443);
        EXPECT(gbc.pc(), 0xd021);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd01f), 0xcb);
        EXPECT(gbc.readMem(0xd020), 0x31);
        // CB 31 03A3
        gbc.setState(0xdcda, 0xf1f5, 0x53b0, 0x21f8, 0x1fcc, 0x1149, 0x0, 0x0);
        gbc.writeMem(0xdcda, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xf1f5);
        EXPECT(gbc.pc(), 0xdcdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcda), 0xcb);
        EXPECT(gbc.readMem(0xdcdb), 0x31);
        // CB 31 03A4
        gbc.setState(0xe109, 0x4472, 0xd960, 0x7129, 0xe192, 0x776a, 0x0, 0x1);
        gbc.writeMem(0xe109, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x4472);
        EXPECT(gbc.pc(), 0xe10b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe109), 0xcb);
        EXPECT(gbc.readMem(0xe10a), 0x31);
        // CB 31 03A5
        gbc.setState(0x9c67, 0x58ab, 0x1770, 0xcfc1, 0x6afc, 0x18e6, 0x0, 0x0);
        gbc.writeMem(0x9c67, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x58ab);
        EXPECT(gbc.pc(), 0x9c69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c67), 0xcb);
        EXPECT(gbc.readMem(0x9c68), 0x31);
        // CB 31 03A6
        gbc.setState(0x7696, 0xcfe, 0x4140, 0xf801, 0xd99, 0xf327, 0x1, 0x0);
        gbc.writeMem(0x7696, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xcfe);
        EXPECT(gbc.pc(), 0x7698);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03A7
        gbc.setState(0x82bd, 0xafbe, 0x23a0, 0x141e, 0x6d60, 0xc76a, 0x1, 0x1);
        gbc.writeMem(0x82bd, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xafbe);
        EXPECT(gbc.pc(), 0x82bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82bd), 0xcb);
        EXPECT(gbc.readMem(0x82be), 0x31);
        // CB 31 03A8
        gbc.setState(0x2820, 0x953d, 0xcef0, 0x6c91, 0x79a2, 0x5329, 0x0, 0x0);
        gbc.writeMem(0x2820, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x953d);
        EXPECT(gbc.pc(), 0x2822);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03A9
        gbc.setState(0xa235, 0xfabf, 0xe7a0, 0xe733, 0x9380, 0xcf9d, 0x0, 0x0);
        gbc.writeMem(0xa235, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xfabf);
        EXPECT(gbc.pc(), 0xa237);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa235), 0xcb);
        EXPECT(gbc.readMem(0xa236), 0x31);
        // CB 31 03AA
        gbc.setState(0x75f9, 0xa649, 0x5310, 0xa131, 0x1a5a, 0x80e3, 0x0, 0x1);
        gbc.writeMem(0x75f9, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xa649);
        EXPECT(gbc.pc(), 0x75fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03AC
        gbc.setState(0x6b2d, 0x378d, 0x6890, 0x4605, 0xb94c, 0x5a58, 0x1, 0x1);
        gbc.writeMem(0x6b2d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x378d);
        EXPECT(gbc.pc(), 0x6b2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03AD
        gbc.setState(0x3fd1, 0x237e, 0x7940, 0xc409, 0x53f5, 0xb2a9, 0x1, 0x1);
        gbc.writeMem(0x3fd1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x237e);
        EXPECT(gbc.pc(), 0x3fd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03AF
        gbc.setState(0x6d53, 0x204e, 0x8a30, 0xf531, 0x8a4d, 0xa1a2, 0x0, 0x0);
        gbc.writeMem(0x6d53, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x204e);
        EXPECT(gbc.pc(), 0x6d55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03B0
        gbc.setState(0x9881, 0x4284, 0xdb20, 0xa3d8, 0x71a, 0xe895, 0x1, 0x1);
        gbc.writeMem(0x9881, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x4284);
        EXPECT(gbc.pc(), 0x9883);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9881), 0xcb);
        EXPECT(gbc.readMem(0x9882), 0x31);
        // CB 31 03B1
        gbc.setState(0xa836, 0x51cc, 0xb370, 0x364b, 0xdd83, 0x3b85, 0x0, 0x0);
        gbc.writeMem(0xa836, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x51cc);
        EXPECT(gbc.pc(), 0xa838);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa836), 0xcb);
        EXPECT(gbc.readMem(0xa837), 0x31);
        // CB 31 03B2
        gbc.setState(0x5378, 0x5568, 0x7ea0, 0xd3ba, 0xe27f, 0xd70e, 0x0, 0x0);
        gbc.writeMem(0x5378, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x5568);
        EXPECT(gbc.pc(), 0x537a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03B3
        gbc.setState(0x5fe8, 0xe786, 0x8160, 0x5d11, 0xbb85, 0xcd3, 0x1, 0x1);
        gbc.writeMem(0x5fe8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe786);
        EXPECT(gbc.pc(), 0x5fea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03B4
        gbc.setState(0xb7b7, 0xb2d1, 0x300, 0xa671, 0x4d1d, 0xb3e7, 0x0, 0x0);
        gbc.writeMem(0xb7b7, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xb2d1);
        EXPECT(gbc.pc(), 0xb7b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7b7), 0xcb);
        EXPECT(gbc.readMem(0xb7b8), 0x31);
        // CB 31 03B5
        gbc.setState(0xc838, 0x2abb, 0x75b0, 0x7695, 0xfe4b, 0x90f8, 0x0, 0x0);
        gbc.writeMem(0xc838, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x2abb);
        EXPECT(gbc.pc(), 0xc83a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc838), 0xcb);
        EXPECT(gbc.readMem(0xc839), 0x31);
        // CB 31 03B6
        gbc.setState(0xdebe, 0xc824, 0x8ff0, 0xa624, 0xc073, 0xbdbe, 0x0, 0x1);
        gbc.writeMem(0xdebe, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xc824);
        EXPECT(gbc.pc(), 0xdec0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdebe), 0xcb);
        EXPECT(gbc.readMem(0xdebf), 0x31);
        // CB 31 03B7
        gbc.setState(0x4e47, 0x5032, 0x1110, 0x9409, 0xf51f, 0x8c8c, 0x0, 0x1);
        gbc.writeMem(0x4e47, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5032);
        EXPECT(gbc.pc(), 0x4e49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03B8
        gbc.setState(0x49c6, 0x187f, 0xdb70, 0xa1ff, 0x18e9, 0x5b3b, 0x0, 0x1);
        gbc.writeMem(0x49c6, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x187f);
        EXPECT(gbc.pc(), 0x49c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03B9
        gbc.setState(0xd8a3, 0xdd77, 0x4280, 0xc5d9, 0x2d62, 0x4ab8, 0x1, 0x0);
        gbc.writeMem(0xd8a3, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xdd77);
        EXPECT(gbc.pc(), 0xd8a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8a3), 0xcb);
        EXPECT(gbc.readMem(0xd8a4), 0x31);
        // CB 31 03BA
        gbc.setState(0x4cfa, 0x12f2, 0x46e0, 0xe109, 0xe873, 0xf07b, 0x0, 0x1);
        gbc.writeMem(0x4cfa, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x12f2);
        EXPECT(gbc.pc(), 0x4cfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03BB
        gbc.setState(0x48cf, 0xda26, 0xe3f0, 0xe73b, 0x58fa, 0x8ed8, 0x0, 0x0);
        gbc.writeMem(0x48cf, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xda26);
        EXPECT(gbc.pc(), 0x48d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03BC
        gbc.setState(0xecf8, 0xd002, 0xa00, 0x84c0, 0x4df3, 0xe76c, 0x0, 0x0);
        gbc.writeMem(0xecf8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xd002);
        EXPECT(gbc.pc(), 0xecfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecf8), 0xcb);
        EXPECT(gbc.readMem(0xecf9), 0x31);
        // CB 31 03BE
        gbc.setState(0x529b, 0x3f48, 0x8ea0, 0xbf69, 0xaf00, 0x250b, 0x0, 0x1);
        gbc.writeMem(0x529b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x3f48);
        EXPECT(gbc.pc(), 0x529d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03BF
        gbc.setState(0x3a8b, 0x68fc, 0xe340, 0xcc17, 0x5ec5, 0x13ee, 0x1, 0x1);
        gbc.writeMem(0x3a8b, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x68fc);
        EXPECT(gbc.pc(), 0x3a8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03C0
        gbc.setState(0x7fef, 0x6cef, 0xae40, 0x9aff, 0x6a38, 0x45df, 0x1, 0x0);
        gbc.writeMem(0x7fef, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x6cef);
        EXPECT(gbc.pc(), 0x7ff1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03C1
        gbc.setState(0x86e9, 0xf2b1, 0xcff0, 0x75c4, 0x3613, 0x510c, 0x0, 0x1);
        gbc.writeMem(0x86e9, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xf2b1);
        EXPECT(gbc.pc(), 0x86eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86e9), 0xcb);
        EXPECT(gbc.readMem(0x86ea), 0x31);
        // CB 31 03C2
        gbc.setState(0x1016, 0x357a, 0x16a0, 0xf883, 0xad92, 0xf3bc, 0x1, 0x0);
        gbc.writeMem(0x1016, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x357a);
        EXPECT(gbc.pc(), 0x1018);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03C3
        gbc.setState(0xdd50, 0x4e56, 0xfd60, 0x919c, 0xf952, 0x4d51, 0x1, 0x0);
        gbc.writeMem(0xdd50, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x4e56);
        EXPECT(gbc.pc(), 0xdd52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd50), 0xcb);
        EXPECT(gbc.readMem(0xdd51), 0x31);
        // CB 31 03C4
        gbc.setState(0x4799, 0x6be0, 0x4830, 0xa422, 0x12f9, 0x75a3, 0x1, 0x1);
        gbc.writeMem(0x4799, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x6be0);
        EXPECT(gbc.pc(), 0x479b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03C5
        gbc.setState(0xc04d, 0x817d, 0x7760, 0xf51d, 0xc872, 0x8d41, 0x1, 0x1);
        gbc.writeMem(0xc04d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x817d);
        EXPECT(gbc.pc(), 0xc04f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc04d), 0xcb);
        EXPECT(gbc.readMem(0xc04e), 0x31);
        // CB 31 03C6
        gbc.setState(0x14a8, 0x498a, 0x62c0, 0x1300, 0x444b, 0x6ab8, 0x0, 0x1);
        gbc.writeMem(0x14a8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x498a);
        EXPECT(gbc.pc(), 0x14aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03C7
        gbc.setState(0x9058, 0xd4a7, 0x9f20, 0x3423, 0x5c68, 0x7847, 0x0, 0x1);
        gbc.writeMem(0x9058, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xd4a7);
        EXPECT(gbc.pc(), 0x905a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9058), 0xcb);
        EXPECT(gbc.readMem(0x9059), 0x31);
        // CB 31 03C8
        gbc.setState(0x81ce, 0x250, 0xc0, 0x59a7, 0x544e, 0x1703, 0x1, 0x0);
        gbc.writeMem(0x81ce, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x250);
        EXPECT(gbc.pc(), 0x81d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81ce), 0xcb);
        EXPECT(gbc.readMem(0x81cf), 0x31);
        // CB 31 03C9
        gbc.setState(0xba74, 0x68f0, 0xad10, 0xa3ad, 0x9446, 0xdbca, 0x1, 0x1);
        gbc.writeMem(0xba74, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x68f0);
        EXPECT(gbc.pc(), 0xba76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba74), 0xcb);
        EXPECT(gbc.readMem(0xba75), 0x31);
        // CB 31 03CA
        gbc.setState(0xc4d5, 0x6b3f, 0x9980, 0xdc6c, 0x659b, 0xf6ab, 0x1, 0x1);
        gbc.writeMem(0xc4d5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x6b3f);
        EXPECT(gbc.pc(), 0xc4d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4d5), 0xcb);
        EXPECT(gbc.readMem(0xc4d6), 0x31);
        // CB 31 03CB
        gbc.setState(0xa701, 0xa63c, 0x1750, 0x37b3, 0x9f78, 0xbdad, 0x0, 0x0);
        gbc.writeMem(0xa701, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xa63c);
        EXPECT(gbc.pc(), 0xa703);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa701), 0xcb);
        EXPECT(gbc.readMem(0xa702), 0x31);
        // CB 31 03CC
        gbc.setState(0x6fa8, 0xfd99, 0x60e0, 0xe5ef, 0x4dd8, 0x8fff, 0x1, 0x1);
        gbc.writeMem(0x6fa8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xfd99);
        EXPECT(gbc.pc(), 0x6faa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03CD
        gbc.setState(0x22cf, 0x4198, 0x57a0, 0x96c7, 0xe1bf, 0x3e62, 0x1, 0x1);
        gbc.writeMem(0x22cf, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x4198);
        EXPECT(gbc.pc(), 0x22d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03CE
        gbc.setState(0x2547, 0xa852, 0xa330, 0x5e33, 0x4e2f, 0x243, 0x1, 0x0);
        gbc.writeMem(0x2547, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xa852);
        EXPECT(gbc.pc(), 0x2549);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03CF
        gbc.setState(0xca96, 0x6e6, 0x3a50, 0x196c, 0xc174, 0x8e2c, 0x0, 0x0);
        gbc.writeMem(0xca96, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x6e6);
        EXPECT(gbc.pc(), 0xca98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca96), 0xcb);
        EXPECT(gbc.readMem(0xca97), 0x31);
        // CB 31 03D0
        gbc.setState(0xc5eb, 0xeaf2, 0x1d40, 0x5c92, 0x27e1, 0x4cb9, 0x0, 0x1);
        gbc.writeMem(0xc5eb, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xeaf2);
        EXPECT(gbc.pc(), 0xc5ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5eb), 0xcb);
        EXPECT(gbc.readMem(0xc5ec), 0x31);
        // CB 31 03D1
        gbc.setState(0x8892, 0x17b3, 0xea40, 0x523c, 0xa9ba, 0x8cb1, 0x0, 0x1);
        gbc.writeMem(0x8892, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x17b3);
        EXPECT(gbc.pc(), 0x8894);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8892), 0xcb);
        EXPECT(gbc.readMem(0x8893), 0x31);
        // CB 31 03D2
        gbc.setState(0x7400, 0x1bb5, 0xfe30, 0x156a, 0xbfae, 0x5379, 0x1, 0x1);
        gbc.writeMem(0x7400, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x1bb5);
        EXPECT(gbc.pc(), 0x7402);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03D3
        gbc.setState(0x4019, 0x48c1, 0xdc70, 0xa634, 0xeeca, 0x297a, 0x1, 0x1);
        gbc.writeMem(0x4019, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x48c1);
        EXPECT(gbc.pc(), 0x401b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03D4
        gbc.setState(0xa88e, 0xfe9d, 0x66f0, 0x7de3, 0x253d, 0x9eef, 0x0, 0x0);
        gbc.writeMem(0xa88e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xfe9d);
        EXPECT(gbc.pc(), 0xa890);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa88e), 0xcb);
        EXPECT(gbc.readMem(0xa88f), 0x31);
        // CB 31 03D5
        gbc.setState(0x22ac, 0x6296, 0xc8f0, 0xdb43, 0x71a, 0x7a55, 0x1, 0x1);
        gbc.writeMem(0x22ac, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x6296);
        EXPECT(gbc.pc(), 0x22ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03D6
        gbc.setState(0x1bbd, 0x27f7, 0x9c00, 0x4bc3, 0xfcff, 0x8b15, 0x0, 0x1);
        gbc.writeMem(0x1bbd, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x27f7);
        EXPECT(gbc.pc(), 0x1bbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03D7
        gbc.setState(0x874e, 0x566b, 0x6d60, 0x1129, 0x685d, 0x79eb, 0x1, 0x1);
        gbc.writeMem(0x874e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x566b);
        EXPECT(gbc.pc(), 0x8750);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x874e), 0xcb);
        EXPECT(gbc.readMem(0x874f), 0x31);
        // CB 31 03D8
        gbc.setState(0xc232, 0x8834, 0x97d0, 0x4651, 0xcdd2, 0x7240, 0x1, 0x1);
        gbc.writeMem(0xc232, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x8834);
        EXPECT(gbc.pc(), 0xc234);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc232), 0xcb);
        EXPECT(gbc.readMem(0xc233), 0x31);
        // CB 31 03D9
        gbc.setState(0x9458, 0x3afe, 0xc900, 0x1ddd, 0x4005, 0xe6e7, 0x1, 0x1);
        gbc.writeMem(0x9458, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x3afe);
        EXPECT(gbc.pc(), 0x945a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9458), 0xcb);
        EXPECT(gbc.readMem(0x9459), 0x31);
        // CB 31 03DA
        gbc.setState(0xbc86, 0x9819, 0xf6e0, 0x4dbe, 0x59b9, 0xf862, 0x0, 0x1);
        gbc.writeMem(0xbc86, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x9819);
        EXPECT(gbc.pc(), 0xbc88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc86), 0xcb);
        EXPECT(gbc.readMem(0xbc87), 0x31);
        // CB 31 03DB
        gbc.setState(0x65b1, 0xdd55, 0x41f0, 0x41bc, 0xf10, 0x2734, 0x1, 0x1);
        gbc.writeMem(0x65b1, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xdd55);
        EXPECT(gbc.pc(), 0x65b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03DC
        gbc.setState(0x6ea8, 0xe953, 0xd4e0, 0x6f35, 0xedbe, 0xffe6, 0x0, 0x1);
        gbc.writeMem(0x6ea8, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xe953);
        EXPECT(gbc.pc(), 0x6eaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03DD
        gbc.setState(0x646e, 0xc4ed, 0xac80, 0x4127, 0xa5b3, 0x87cf, 0x0, 0x1);
        gbc.writeMem(0x646e, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xc4ed);
        EXPECT(gbc.pc(), 0x6470);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03DE
        gbc.setState(0x922d, 0x9c6d, 0x28e0, 0xe669, 0xa663, 0x6b25, 0x0, 0x0);
        gbc.writeMem(0x922d, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x9c6d);
        EXPECT(gbc.pc(), 0x922f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x922d), 0xcb);
        EXPECT(gbc.readMem(0x922e), 0x31);
        // CB 31 03DF
        gbc.setState(0x8b12, 0xce80, 0x4d70, 0x2efb, 0x2aa6, 0x81d7, 0x0, 0x0);
        gbc.writeMem(0x8b12, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xce80);
        EXPECT(gbc.pc(), 0x8b14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b12), 0xcb);
        EXPECT(gbc.readMem(0x8b13), 0x31);
        // CB 31 03E0
        gbc.setState(0xe991, 0xdf03, 0xe640, 0x349, 0xb6df, 0xb7c5, 0x0, 0x0);
        gbc.writeMem(0xe991, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xdf03);
        EXPECT(gbc.pc(), 0xe993);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe991), 0xcb);
        EXPECT(gbc.readMem(0xe992), 0x31);
        // CB 31 03E1
        gbc.setState(0xb665, 0xc7df, 0x4430, 0x9b4b, 0x7e50, 0xc0f2, 0x0, 0x1);
        gbc.writeMem(0xb665, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xc7df);
        EXPECT(gbc.pc(), 0xb667);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb665), 0xcb);
        EXPECT(gbc.readMem(0xb666), 0x31);
        // CB 31 03E2
        gbc.setState(0xb795, 0x7ffd, 0xa3d0, 0x662c, 0xeafe, 0x4371, 0x0, 0x1);
        gbc.writeMem(0xb795, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x7ffd);
        EXPECT(gbc.pc(), 0xb797);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb795), 0xcb);
        EXPECT(gbc.readMem(0xb796), 0x31);
        // CB 31 03E3
        gbc.setState(0xade5, 0x1507, 0x2cd0, 0x4732, 0x61e, 0xd655, 0x0, 0x0);
        gbc.writeMem(0xade5, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x1507);
        EXPECT(gbc.pc(), 0xade7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xade5), 0xcb);
        EXPECT(gbc.readMem(0xade6), 0x31);
        // CB 31 03E4
        gbc.setState(0x9f45, 0x1ca1, 0xf0b0, 0x86e2, 0xe6b8, 0x3359, 0x0, 0x0);
        gbc.writeMem(0x9f45, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x1ca1);
        EXPECT(gbc.pc(), 0x9f47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f45), 0xcb);
        EXPECT(gbc.readMem(0x9f46), 0x31);
        // CB 31 03E5
        gbc.setState(0xe06f, 0xc87c, 0x2540, 0x9b1f, 0x940f, 0xb6b9, 0x0, 0x0);
        gbc.writeMem(0xe06f, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xc87c);
        EXPECT(gbc.pc(), 0xe071);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe06f), 0xcb);
        EXPECT(gbc.readMem(0xe070), 0x31);
        // CB 31 03E6
        gbc.setState(0x5818, 0x593b, 0xe8d0, 0xfbcd, 0xa572, 0xc14b, 0x1, 0x1);
        gbc.writeMem(0x5818, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x593b);
        EXPECT(gbc.pc(), 0x581a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 31 03E7
        gbc.setState(0x5891, 0x6a9d, 0xc290, 0x2f0a, 0xc271, 0x1a6d, 0x0, 0x1);
        gbc.writeMem(0x5891, { 0xcb, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x6a9d);
        EXPECT(gbc.pc(), 0x5893);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
    }
