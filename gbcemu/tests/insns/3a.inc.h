    TEST(gbcemu, opcode_3a) {
        GBCEmu gbc{"", nullptr};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 3A 0000
        gbc.setState(0xc8fc, 0x41d9, 0x41a0, 0xe33e, 0x801f, 0x561a, 0x0, 0x0);
        gbc.writeMem(0x561a, { 0x18 });
        gbc.writeMem(0xc8fc, { 0x3a });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x41d9, gbc.sp());
        EXPECT(0xc8fd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc8fc));
        // 3A 0001
        gbc.setState(0xce72, 0x53fa, 0x9660, 0x45dc, 0xc33b, 0xe845, 0x0, 0x0);
        gbc.writeMem(0xce72, { 0x3a });
        gbc.writeMem(0xe845, { 0xab });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x53fa, gbc.sp());
        EXPECT(0xce73, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xce72));
        EXPECT(0xab, gbc.readMem(0xe845));
        // 3A 0002
        gbc.setState(0xaf2f, 0x471e, 0xca50, 0xabbc, 0xbeb, 0x90dd, 0x1, 0x0);
        gbc.writeMem(0x90dd, { 0x42 });
        gbc.writeMem(0xaf2f, { 0x3a });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x471e, gbc.sp());
        EXPECT(0xaf30, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x42, gbc.readMem(0x90dd));
        EXPECT(0x3a, gbc.readMem(0xaf2f));
        // 3A 0003
        gbc.setState(0x59b0, 0x696c, 0x9160, 0x44e9, 0xfcaf, 0xeff0, 0x0, 0x1);
        gbc.writeMem(0x59b0, { 0x3a });
        gbc.writeMem(0xeff0, { 0xc4 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x696c, gbc.sp());
        EXPECT(0x59b1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc4, gbc.readMem(0xeff0));
        // 3A 0004
        gbc.setState(0x4cfa, 0xa37d, 0x1ba0, 0x2f15, 0x7d25, 0x5284, 0x1, 0x0);
        gbc.writeMem(0x4cfa, { 0x3a });
        gbc.writeMem(0x5284, { 0x1a });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0xa37d, gbc.sp());
        EXPECT(0x4cfb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0005
        gbc.setState(0xf2d, 0x4149, 0xe3e0, 0xe036, 0x332, 0x563d, 0x0, 0x0);
        gbc.writeMem(0xf2d, { 0x3a });
        gbc.writeMem(0x563d, { 0xf7 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x4149, gbc.sp());
        EXPECT(0xf2e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0006
        gbc.setState(0x4e96, 0xd10d, 0xc570, 0x1f42, 0x500d, 0xd235, 0x1, 0x1);
        gbc.writeMem(0x4e96, { 0x3a });
        gbc.writeMem(0xd235, { 0x5f });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0xd10d, gbc.sp());
        EXPECT(0x4e97, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5f, gbc.readMem(0xd235));
        // 3A 0007
        gbc.setState(0xc454, 0xa545, 0x4db0, 0xc4ee, 0xc0ad, 0xf446, 0x0, 0x1);
        gbc.writeMem(0xc454, { 0x3a });
        gbc.writeMem(0xf446, { 0x7d });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xa545, gbc.sp());
        EXPECT(0xc455, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc454));
        EXPECT(0x7d, gbc.readMem(0xf446));
        // 3A 0008
        gbc.setState(0xa0e7, 0x8860, 0x7bf0, 0x2723, 0x2953, 0xfd5e, 0x1, 0x1);
        gbc.writeMem(0xa0e7, { 0x3a });
        gbc.writeMem(0xfd5e, { 0x3f });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x8860, gbc.sp());
        EXPECT(0xa0e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa0e7));
        EXPECT(0x3f, gbc.readMem(0xfd5e));
        // 3A 0009
        gbc.setState(0xcb68, 0xae6e, 0xf970, 0x3a7b, 0x8df1, 0x5089, 0x1, 0x1);
        gbc.writeMem(0x5089, { 0xcf });
        gbc.writeMem(0xcb68, { 0x3a });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xae6e, gbc.sp());
        EXPECT(0xcb69, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xcb68));
        // 3A 000A
        gbc.setState(0xeb08, 0x6ef1, 0x1ef0, 0x4bcf, 0x26bd, 0xb3ba, 0x0, 0x1);
        gbc.writeMem(0xb3ba, { 0xef });
        gbc.writeMem(0xeb08, { 0x3a });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x6ef1, gbc.sp());
        EXPECT(0xeb09, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xb3ba));
        EXPECT(0x3a, gbc.readMem(0xeb08));
        // 3A 000B
        gbc.setState(0xbe60, 0x179, 0x7bf0, 0x7870, 0x46f, 0xf596, 0x1, 0x0);
        gbc.writeMem(0xbe60, { 0x3a });
        gbc.writeMem(0xf596, { 0x14 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x179, gbc.sp());
        EXPECT(0xbe61, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbe60));
        EXPECT(0x14, gbc.readMem(0xf596));
        // 3A 000D
        gbc.setState(0x3b25, 0x6f09, 0x84b0, 0x22ac, 0x971a, 0x334f, 0x0, 0x1);
        gbc.writeMem(0x334f, { 0xc0 });
        gbc.writeMem(0x3b25, { 0x3a });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x6f09, gbc.sp());
        EXPECT(0x3b26, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 000E
        gbc.setState(0x9ad1, 0x4e8f, 0x7ab0, 0x4836, 0x6c9c, 0xb31e, 0x0, 0x0);
        gbc.writeMem(0x9ad1, { 0x3a });
        gbc.writeMem(0xb31e, { 0xda });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x4e8f, gbc.sp());
        EXPECT(0x9ad2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9ad1));
        EXPECT(0xda, gbc.readMem(0xb31e));
        // 3A 0010
        gbc.setState(0x4e73, 0x9861, 0xa7f0, 0x5490, 0x8f04, 0xcd8a, 0x0, 0x1);
        gbc.writeMem(0x4e73, { 0x3a });
        gbc.writeMem(0xcd8a, { 0x11 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x9861, gbc.sp());
        EXPECT(0x4e74, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x11, gbc.readMem(0xcd8a));
        // 3A 0011
        gbc.setState(0x4ff5, 0xc5fc, 0x4090, 0x32c6, 0x2b48, 0xa5d7, 0x1, 0x0);
        gbc.writeMem(0x4ff5, { 0x3a });
        gbc.writeMem(0xa5d7, { 0x9c });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xc5fc, gbc.sp());
        EXPECT(0x4ff6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x9c, gbc.readMem(0xa5d7));
        // 3A 0012
        gbc.setState(0x1f6d, 0xc194, 0x6dd0, 0xddcd, 0x115b, 0x4321, 0x0, 0x0);
        gbc.writeMem(0x1f6d, { 0x3a });
        gbc.writeMem(0x4321, { 0x8e });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0xc194, gbc.sp());
        EXPECT(0x1f6e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0013
        gbc.setState(0xb81, 0x2930, 0x5d90, 0xc051, 0xf02b, 0xe549, 0x1, 0x0);
        gbc.writeMem(0xb81, { 0x3a });
        gbc.writeMem(0xe549, { 0xe1 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x2930, gbc.sp());
        EXPECT(0xb82, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe1, gbc.readMem(0xe549));
        // 3A 0014
        gbc.setState(0x318b, 0xab24, 0xc030, 0xf141, 0xdbbd, 0x60cb, 0x1, 0x1);
        gbc.writeMem(0x318b, { 0x3a });
        gbc.writeMem(0x60cb, { 0xc1 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0xab24, gbc.sp());
        EXPECT(0x318c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0016
        gbc.setState(0x5ad0, 0x2bbe, 0x7d40, 0x17de, 0x60fb, 0xe73c, 0x1, 0x1);
        gbc.writeMem(0x5ad0, { 0x3a });
        gbc.writeMem(0xe73c, { 0x84 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x2bbe, gbc.sp());
        EXPECT(0x5ad1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x84, gbc.readMem(0xe73c));
        // 3A 0017
        gbc.setState(0x9db2, 0x8567, 0x9320, 0x923, 0xa446, 0xcaaa, 0x0, 0x0);
        gbc.writeMem(0x9db2, { 0x3a });
        gbc.writeMem(0xcaaa, { 0xcf });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x8567, gbc.sp());
        EXPECT(0x9db3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9db2));
        EXPECT(0xcf, gbc.readMem(0xcaaa));
        // 3A 0018
        gbc.setState(0x17b7, 0xd495, 0x8b0, 0xfc43, 0x1775, 0x31ae, 0x0, 0x0);
        gbc.writeMem(0x17b7, { 0x3a });
        gbc.writeMem(0x31ae, { 0xe });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xd495, gbc.sp());
        EXPECT(0x17b8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0019
        gbc.setState(0x88b0, 0xffb8, 0x2780, 0xc30e, 0x43d8, 0xb03d, 0x0, 0x1);
        gbc.writeMem(0x88b0, { 0x3a });
        gbc.writeMem(0xb03d, { 0x4 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xffb8, gbc.sp());
        EXPECT(0x88b1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x88b0));
        EXPECT(0x4, gbc.readMem(0xb03d));
        // 3A 001B
        gbc.setState(0x564, 0x38be, 0xd1a0, 0x8a1, 0x5e1c, 0xabed, 0x0, 0x1);
        gbc.writeMem(0x564, { 0x3a });
        gbc.writeMem(0xabed, { 0x4a });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x38be, gbc.sp());
        EXPECT(0x565, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x4a, gbc.readMem(0xabed));
        // 3A 001C
        gbc.setState(0x5cba, 0xa8f1, 0xce70, 0xfbec, 0x5a61, 0xc84b, 0x1, 0x1);
        gbc.writeMem(0x5cba, { 0x3a });
        gbc.writeMem(0xc84b, { 0xba });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xa8f1, gbc.sp());
        EXPECT(0x5cbb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xba, gbc.readMem(0xc84b));
        // 3A 001D
        gbc.setState(0x953c, 0xc7b5, 0xfa70, 0x2461, 0x17f, 0x4656, 0x0, 0x0);
        gbc.writeMem(0x4656, { 0x4b });
        gbc.writeMem(0x953c, { 0x3a });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0xc7b5, gbc.sp());
        EXPECT(0x953d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x953c));
        // 3A 001E
        gbc.setState(0x311b, 0xf624, 0x8980, 0x5b36, 0x1ec2, 0x480f, 0x0, 0x0);
        gbc.writeMem(0x311b, { 0x3a });
        gbc.writeMem(0x480f, { 0x75 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0xf624, gbc.sp());
        EXPECT(0x311c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 001F
        gbc.setState(0x14ee, 0x6db6, 0xd840, 0x9e48, 0xc7a5, 0x8341, 0x0, 0x1);
        gbc.writeMem(0x14ee, { 0x3a });
        gbc.writeMem(0x8341, { 0xfd });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x6db6, gbc.sp());
        EXPECT(0x14ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xfd, gbc.readMem(0x8341));
        // 3A 0020
        gbc.setState(0xbde8, 0x4eda, 0xdd00, 0x20e9, 0xde28, 0x6e6d, 0x1, 0x0);
        gbc.writeMem(0x6e6d, { 0x4a });
        gbc.writeMem(0xbde8, { 0x3a });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x4eda, gbc.sp());
        EXPECT(0xbde9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbde8));
        // 3A 0021
        gbc.setState(0x94b2, 0xff8a, 0xd870, 0x7785, 0x8c7, 0xf5e, 0x1, 0x0);
        gbc.writeMem(0xf5e, { 0x33 });
        gbc.writeMem(0x94b2, { 0x3a });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xff8a, gbc.sp());
        EXPECT(0x94b3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x94b2));
        // 3A 0022
        gbc.setState(0x6fa, 0xb8bd, 0x4c20, 0x23c2, 0x64d0, 0xce23, 0x0, 0x1);
        gbc.writeMem(0x6fa, { 0x3a });
        gbc.writeMem(0xce23, { 0xba });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xb8bd, gbc.sp());
        EXPECT(0x6fb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xba, gbc.readMem(0xce23));
        // 3A 0023
        gbc.setState(0x63ab, 0x6d95, 0xfe00, 0x1e8c, 0x7866, 0xebe7, 0x1, 0x0);
        gbc.writeMem(0x63ab, { 0x3a });
        gbc.writeMem(0xebe7, { 0x81 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x6d95, gbc.sp());
        EXPECT(0x63ac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x81, gbc.readMem(0xebe7));
        // 3A 0024
        gbc.setState(0xa5ef, 0x3468, 0xc7a0, 0x2592, 0x990d, 0x9971, 0x1, 0x0);
        gbc.writeMem(0x9971, { 0x11 });
        gbc.writeMem(0xa5ef, { 0x3a });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x3468, gbc.sp());
        EXPECT(0xa5f0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x11, gbc.readMem(0x9971));
        EXPECT(0x3a, gbc.readMem(0xa5ef));
        // 3A 0025
        gbc.setState(0x602, 0x1914, 0xd2d0, 0xb55a, 0xc2f0, 0xf8ca, 0x1, 0x1);
        gbc.writeMem(0x602, { 0x3a });
        gbc.writeMem(0xf8ca, { 0xb4 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x1914, gbc.sp());
        EXPECT(0x603, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb4, gbc.readMem(0xf8ca));
        // 3A 0026
        gbc.setState(0xaa, 0xf6a2, 0xb080, 0xa3a6, 0x8ed1, 0x84f3, 0x1, 0x1);
        gbc.writeMem(0xaa, { 0x3a });
        gbc.writeMem(0x84f3, { 0xc1 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xf6a2, gbc.sp());
        EXPECT(0xab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc1, gbc.readMem(0x84f3));
        // 3A 0027
        gbc.setState(0x26b9, 0x865f, 0x2ab0, 0x4e36, 0x5b56, 0x90fe, 0x1, 0x0);
        gbc.writeMem(0x26b9, { 0x3a });
        gbc.writeMem(0x90fe, { 0xe4 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x865f, gbc.sp());
        EXPECT(0x26ba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe4, gbc.readMem(0x90fe));
        // 3A 0028
        gbc.setState(0xc0b8, 0x275, 0x8900, 0x6674, 0xaa3e, 0x5241, 0x1, 0x0);
        gbc.writeMem(0x5241, { 0xa8 });
        gbc.writeMem(0xc0b8, { 0x3a });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x275, gbc.sp());
        EXPECT(0xc0b9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc0b8));
        // 3A 0029
        gbc.setState(0xb825, 0xe7dc, 0xe340, 0x5dd, 0x4da7, 0x99d, 0x1, 0x1);
        gbc.writeMem(0x99d, { 0xf1 });
        gbc.writeMem(0xb825, { 0x3a });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xe7dc, gbc.sp());
        EXPECT(0xb826, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb825));
        // 3A 002C
        gbc.setState(0x1680, 0x8376, 0x47b0, 0xabef, 0x6d0d, 0x2978, 0x0, 0x1);
        gbc.writeMem(0x1680, { 0x3a });
        gbc.writeMem(0x2978, { 0xc9 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x8376, gbc.sp());
        EXPECT(0x1681, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 002D
        gbc.setState(0x4160, 0x5da9, 0x8450, 0xff3c, 0xb938, 0xe2f5, 0x1, 0x0);
        gbc.writeMem(0x4160, { 0x3a });
        gbc.writeMem(0xe2f5, { 0x80 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x5da9, gbc.sp());
        EXPECT(0x4161, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x80, gbc.readMem(0xe2f5));
        // 3A 002E
        gbc.setState(0xdb94, 0xba5f, 0xc2b0, 0x47b4, 0xc752, 0x6fec, 0x1, 0x0);
        gbc.writeMem(0x6fec, { 0x2 });
        gbc.writeMem(0xdb94, { 0x3a });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xba5f, gbc.sp());
        EXPECT(0xdb95, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xdb94));
        // 3A 002F
        gbc.setState(0x754c, 0xd699, 0x6970, 0x59ed, 0xa512, 0xe00a, 0x0, 0x0);
        gbc.writeMem(0x754c, { 0x3a });
        gbc.writeMem(0xe00a, { 0x77 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0xd699, gbc.sp());
        EXPECT(0x754d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x77, gbc.readMem(0xe00a));
        // 3A 0030
        gbc.setState(0xdd2d, 0x91ad, 0xb550, 0x260a, 0x41b7, 0x2779, 0x1, 0x0);
        gbc.writeMem(0x2779, { 0x80 });
        gbc.writeMem(0xdd2d, { 0x3a });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x91ad, gbc.sp());
        EXPECT(0xdd2e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xdd2d));
        // 3A 0031
        gbc.setState(0xd098, 0xa42a, 0x1d20, 0xcc4e, 0x29e7, 0xfdbb, 0x1, 0x0);
        gbc.writeMem(0xd098, { 0x3a });
        gbc.writeMem(0xfdbb, { 0xee });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0xa42a, gbc.sp());
        EXPECT(0xd099, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xd098));
        EXPECT(0xee, gbc.readMem(0xfdbb));
        // 3A 0032
        gbc.setState(0x5408, 0xc12a, 0x86a0, 0x379d, 0xb9dc, 0xf4cb, 0x1, 0x0);
        gbc.writeMem(0x5408, { 0x3a });
        gbc.writeMem(0xf4cb, { 0x53 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0xc12a, gbc.sp());
        EXPECT(0x5409, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x53, gbc.readMem(0xf4cb));
        // 3A 0033
        gbc.setState(0x2817, 0xe514, 0x28f0, 0x2bb5, 0x4e32, 0x5172, 0x0, 0x0);
        gbc.writeMem(0x2817, { 0x3a });
        gbc.writeMem(0x5172, { 0xf2 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xe514, gbc.sp());
        EXPECT(0x2818, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0034
        gbc.setState(0xdf59, 0x15f7, 0xee30, 0x5908, 0xd1ae, 0x64b2, 0x0, 0x1);
        gbc.writeMem(0x64b2, { 0xae });
        gbc.writeMem(0xdf59, { 0x3a });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x15f7, gbc.sp());
        EXPECT(0xdf5a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xdf59));
        // 3A 0036
        gbc.setState(0xd316, 0x47d2, 0x3530, 0xe1fa, 0xd4d2, 0x3e96, 0x1, 0x0);
        gbc.writeMem(0x3e96, { 0x28 });
        gbc.writeMem(0xd316, { 0x3a });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x47d2, gbc.sp());
        EXPECT(0xd317, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xd316));
        // 3A 0037
        gbc.setState(0xe32f, 0x8911, 0x25a0, 0x2ace, 0x3e3, 0xa6c1, 0x0, 0x1);
        gbc.writeMem(0xa6c1, { 0x89 });
        gbc.writeMem(0xe32f, { 0x3a });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x8911, gbc.sp());
        EXPECT(0xe330, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x89, gbc.readMem(0xa6c1));
        EXPECT(0x3a, gbc.readMem(0xe32f));
        // 3A 0038
        gbc.setState(0xc371, 0x95e1, 0x2c90, 0x617b, 0x3cb6, 0x2dca, 0x0, 0x1);
        gbc.writeMem(0x2dca, { 0x71 });
        gbc.writeMem(0xc371, { 0x3a });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x95e1, gbc.sp());
        EXPECT(0xc372, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc371));
        // 3A 0039
        gbc.setState(0xeeb7, 0x463a, 0xec10, 0xa0f, 0x434e, 0x4b64, 0x0, 0x1);
        gbc.writeMem(0x4b64, { 0xfd });
        gbc.writeMem(0xeeb7, { 0x3a });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x463a, gbc.sp());
        EXPECT(0xeeb8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xeeb7));
        // 3A 003A
        gbc.setState(0x688d, 0xb02e, 0xb860, 0xf865, 0x57e4, 0x71f5, 0x1, 0x1);
        gbc.writeMem(0x688d, { 0x3a });
        gbc.writeMem(0x71f5, { 0x39 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xb02e, gbc.sp());
        EXPECT(0x688e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 003B
        gbc.setState(0xe71a, 0x3946, 0x8ed0, 0xf4aa, 0xcc6c, 0x36f, 0x0, 0x0);
        gbc.writeMem(0x36f, { 0x1a });
        gbc.writeMem(0xe71a, { 0x3a });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x3946, gbc.sp());
        EXPECT(0xe71b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xe71a));
        // 3A 003C
        gbc.setState(0x34da, 0xc2a2, 0x24a0, 0xa49c, 0x6bc9, 0xa4b7, 0x1, 0x0);
        gbc.writeMem(0x34da, { 0x3a });
        gbc.writeMem(0xa4b7, { 0xf4 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xc2a2, gbc.sp());
        EXPECT(0x34db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf4, gbc.readMem(0xa4b7));
        // 3A 003D
        gbc.setState(0xc56c, 0x92cf, 0xb10, 0xc2a0, 0xecc6, 0xf084, 0x1, 0x0);
        gbc.writeMem(0xc56c, { 0x3a });
        gbc.writeMem(0xf084, { 0x60 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x92cf, gbc.sp());
        EXPECT(0xc56d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc56c));
        EXPECT(0x60, gbc.readMem(0xf084));
        // 3A 003E
        gbc.setState(0xc199, 0x8208, 0xf570, 0xd71b, 0x2a9d, 0xc314, 0x1, 0x1);
        gbc.writeMem(0xc199, { 0x3a });
        gbc.writeMem(0xc314, { 0x4e });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x8208, gbc.sp());
        EXPECT(0xc19a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc199));
        EXPECT(0x4e, gbc.readMem(0xc314));
        // 3A 003F
        gbc.setState(0x3fec, 0x299e, 0x9680, 0x71d6, 0x83f7, 0xe321, 0x0, 0x0);
        gbc.writeMem(0x3fec, { 0x3a });
        gbc.writeMem(0xe321, { 0x3d });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x299e, gbc.sp());
        EXPECT(0x3fed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3d, gbc.readMem(0xe321));
        // 3A 0040
        gbc.setState(0xc315, 0x998d, 0x2f00, 0x5f3c, 0x78db, 0xb5b1, 0x1, 0x0);
        gbc.writeMem(0xb5b1, { 0x4e });
        gbc.writeMem(0xc315, { 0x3a });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x998d, gbc.sp());
        EXPECT(0xc316, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x4e, gbc.readMem(0xb5b1));
        EXPECT(0x3a, gbc.readMem(0xc315));
        // 3A 0041
        gbc.setState(0x4190, 0x9658, 0x7f70, 0x5b35, 0xbe6c, 0x829c, 0x0, 0x0);
        gbc.writeMem(0x4190, { 0x3a });
        gbc.writeMem(0x829c, { 0x78 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x9658, gbc.sp());
        EXPECT(0x4191, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x78, gbc.readMem(0x829c));
        // 3A 0042
        gbc.setState(0x78d, 0x6842, 0x78d0, 0xd276, 0x440c, 0xeb14, 0x1, 0x1);
        gbc.writeMem(0x78d, { 0x3a });
        gbc.writeMem(0xeb14, { 0x8c });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x6842, gbc.sp());
        EXPECT(0x78e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8c, gbc.readMem(0xeb14));
        // 3A 0044
        gbc.setState(0x71d3, 0x868c, 0x7d70, 0xd0d0, 0xad2c, 0x3b82, 0x1, 0x0);
        gbc.writeMem(0x3b82, { 0x5e });
        gbc.writeMem(0x71d3, { 0x3a });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x868c, gbc.sp());
        EXPECT(0x71d4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0045
        gbc.setState(0xc4af, 0x35f1, 0xa340, 0x5064, 0x2de9, 0x4cb3, 0x0, 0x0);
        gbc.writeMem(0x4cb3, { 0xfb });
        gbc.writeMem(0xc4af, { 0x3a });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x35f1, gbc.sp());
        EXPECT(0xc4b0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc4af));
        // 3A 0046
        gbc.setState(0x777e, 0x61f7, 0xc040, 0x6d78, 0xc4c, 0x183b, 0x0, 0x1);
        gbc.writeMem(0x183b, { 0xfd });
        gbc.writeMem(0x777e, { 0x3a });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x61f7, gbc.sp());
        EXPECT(0x777f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0047
        gbc.setState(0xa2c6, 0xac76, 0xd470, 0xd82b, 0x8c56, 0xf67, 0x1, 0x0);
        gbc.writeMem(0xf67, { 0xfe });
        gbc.writeMem(0xa2c6, { 0x3a });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0xac76, gbc.sp());
        EXPECT(0xa2c7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa2c6));
        // 3A 0048
        gbc.setState(0xacb, 0x56f7, 0xcee0, 0x78c0, 0x8b25, 0x75c3, 0x1, 0x0);
        gbc.writeMem(0xacb, { 0x3a });
        gbc.writeMem(0x75c3, { 0x22 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x56f7, gbc.sp());
        EXPECT(0xacc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0049
        gbc.setState(0x1e45, 0x1e8a, 0x6720, 0xbc2d, 0x8989, 0x39f3, 0x1, 0x0);
        gbc.writeMem(0x1e45, { 0x3a });
        gbc.writeMem(0x39f3, { 0x62 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x1e8a, gbc.sp());
        EXPECT(0x1e46, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 004A
        gbc.setState(0xa33, 0x8c76, 0x8000, 0xfa70, 0xd2ae, 0xe1f6, 0x0, 0x1);
        gbc.writeMem(0xa33, { 0x3a });
        gbc.writeMem(0xe1f6, { 0xdc });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x8c76, gbc.sp());
        EXPECT(0xa34, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xdc, gbc.readMem(0xe1f6));
        // 3A 004C
        gbc.setState(0x28f, 0x6c2, 0xf10, 0x6b63, 0x99ae, 0xc63d, 0x0, 0x1);
        gbc.writeMem(0x28f, { 0x3a });
        gbc.writeMem(0xc63d, { 0x3e });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x6c2, gbc.sp());
        EXPECT(0x290, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3e, gbc.readMem(0xc63d));
        // 3A 004D
        gbc.setState(0x943f, 0x44d0, 0x3ce0, 0xa74e, 0xadcc, 0xf1de, 0x0, 0x1);
        gbc.writeMem(0x943f, { 0x3a });
        gbc.writeMem(0xf1de, { 0x25 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x44d0, gbc.sp());
        EXPECT(0x9440, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x943f));
        EXPECT(0x25, gbc.readMem(0xf1de));
        // 3A 004E
        gbc.setState(0x1748, 0x71ef, 0x1ee0, 0x3081, 0xafd1, 0xea37, 0x1, 0x0);
        gbc.writeMem(0x1748, { 0x3a });
        gbc.writeMem(0xea37, { 0x42 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x71ef, gbc.sp());
        EXPECT(0x1749, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x42, gbc.readMem(0xea37));
        // 3A 004F
        gbc.setState(0x3806, 0x9a62, 0x7ce0, 0x4d4e, 0x4fb4, 0x7d82, 0x0, 0x0);
        gbc.writeMem(0x3806, { 0x3a });
        gbc.writeMem(0x7d82, { 0x84 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x9a62, gbc.sp());
        EXPECT(0x3807, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0050
        gbc.setState(0x7e42, 0x9392, 0x6480, 0x636d, 0xfa50, 0xf8e9, 0x0, 0x1);
        gbc.writeMem(0x7e42, { 0x3a });
        gbc.writeMem(0xf8e9, { 0x9f });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x9392, gbc.sp());
        EXPECT(0x7e43, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x9f, gbc.readMem(0xf8e9));
        // 3A 0051
        gbc.setState(0x7cfc, 0xc8de, 0x6ad0, 0x9e9, 0x87ff, 0xe906, 0x1, 0x0);
        gbc.writeMem(0x7cfc, { 0x3a });
        gbc.writeMem(0xe906, { 0x1c });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xc8de, gbc.sp());
        EXPECT(0x7cfd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1c, gbc.readMem(0xe906));
        // 3A 0053
        gbc.setState(0x4519, 0xbdc4, 0x1f40, 0x3619, 0xf8ea, 0x344e, 0x0, 0x1);
        gbc.writeMem(0x344e, { 0x63 });
        gbc.writeMem(0x4519, { 0x3a });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xbdc4, gbc.sp());
        EXPECT(0x451a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0054
        gbc.setState(0x5a1d, 0x241a, 0x4ab0, 0xb05e, 0x8771, 0x3dea, 0x1, 0x1);
        gbc.writeMem(0x3dea, { 0xb0 });
        gbc.writeMem(0x5a1d, { 0x3a });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x241a, gbc.sp());
        EXPECT(0x5a1e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0055
        gbc.setState(0x638a, 0x8bcc, 0x2e20, 0xa6b7, 0x1bdc, 0x4e6f, 0x0, 0x0);
        gbc.writeMem(0x4e6f, { 0xac });
        gbc.writeMem(0x638a, { 0x3a });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x8bcc, gbc.sp());
        EXPECT(0x638b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0056
        gbc.setState(0xd908, 0xb411, 0x6850, 0xa96a, 0x7344, 0x98ce, 0x1, 0x1);
        gbc.writeMem(0x98ce, { 0xb3 });
        gbc.writeMem(0xd908, { 0x3a });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0xb411, gbc.sp());
        EXPECT(0xd909, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb3, gbc.readMem(0x98ce));
        EXPECT(0x3a, gbc.readMem(0xd908));
        // 3A 0057
        gbc.setState(0xc0a6, 0x21ff, 0xf260, 0xa8b5, 0x2a01, 0xe287, 0x1, 0x1);
        gbc.writeMem(0xc0a6, { 0x3a });
        gbc.writeMem(0xe287, { 0x1 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x21ff, gbc.sp());
        EXPECT(0xc0a7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc0a6));
        EXPECT(0x1, gbc.readMem(0xe287));
        // 3A 0058
        gbc.setState(0x81b0, 0x5fff, 0xd970, 0x2ccf, 0xaa14, 0xbea1, 0x1, 0x1);
        gbc.writeMem(0x81b0, { 0x3a });
        gbc.writeMem(0xbea1, { 0xa });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x5fff, gbc.sp());
        EXPECT(0x81b1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x81b0));
        EXPECT(0xa, gbc.readMem(0xbea1));
        // 3A 0059
        gbc.setState(0xc8d4, 0xa413, 0x6eb0, 0x581e, 0x4d61, 0xdf3c, 0x1, 0x1);
        gbc.writeMem(0xc8d4, { 0x3a });
        gbc.writeMem(0xdf3c, { 0x1c });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0xa413, gbc.sp());
        EXPECT(0xc8d5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc8d4));
        EXPECT(0x1c, gbc.readMem(0xdf3c));
        // 3A 005A
        gbc.setState(0x3f49, 0x25b1, 0x5c50, 0x3c9b, 0x9f9d, 0x9dce, 0x0, 0x0);
        gbc.writeMem(0x3f49, { 0x3a });
        gbc.writeMem(0x9dce, { 0xd9 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x25b1, gbc.sp());
        EXPECT(0x3f4a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd9, gbc.readMem(0x9dce));
        // 3A 005B
        gbc.setState(0xcc14, 0x6ed8, 0x1c10, 0x5dc, 0xa5a2, 0x50a0, 0x1, 0x1);
        gbc.writeMem(0x50a0, { 0x3e });
        gbc.writeMem(0xcc14, { 0x3a });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x6ed8, gbc.sp());
        EXPECT(0xcc15, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xcc14));
        // 3A 005C
        gbc.setState(0xdf69, 0x8b73, 0x96b0, 0x332b, 0xd4a6, 0xfd6f, 0x0, 0x0);
        gbc.writeMem(0xdf69, { 0x3a });
        gbc.writeMem(0xfd6f, { 0xb2 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x8b73, gbc.sp());
        EXPECT(0xdf6a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xdf69));
        EXPECT(0xb2, gbc.readMem(0xfd6f));
        // 3A 005D
        gbc.setState(0x8360, 0xa5b0, 0xe020, 0x6f71, 0x835c, 0xb1b2, 0x0, 0x1);
        gbc.writeMem(0x8360, { 0x3a });
        gbc.writeMem(0xb1b2, { 0x9e });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xa5b0, gbc.sp());
        EXPECT(0x8361, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8360));
        EXPECT(0x9e, gbc.readMem(0xb1b2));
        // 3A 005E
        gbc.setState(0x7f29, 0x41d1, 0xb080, 0x45a0, 0x757a, 0xd18d, 0x1, 0x0);
        gbc.writeMem(0x7f29, { 0x3a });
        gbc.writeMem(0xd18d, { 0x22 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x41d1, gbc.sp());
        EXPECT(0x7f2a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x22, gbc.readMem(0xd18d));
        // 3A 005F
        gbc.setState(0xc058, 0xf938, 0x8410, 0xadf9, 0x47ee, 0x2d28, 0x0, 0x1);
        gbc.writeMem(0x2d28, { 0x91 });
        gbc.writeMem(0xc058, { 0x3a });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xf938, gbc.sp());
        EXPECT(0xc059, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc058));
        // 3A 0060
        gbc.setState(0xdb06, 0xb8f8, 0x5d90, 0xb4c, 0x47e6, 0x42aa, 0x1, 0x1);
        gbc.writeMem(0x42aa, { 0x74 });
        gbc.writeMem(0xdb06, { 0x3a });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xb8f8, gbc.sp());
        EXPECT(0xdb07, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xdb06));
        // 3A 0061
        gbc.setState(0x2e27, 0xaa9a, 0xe860, 0x6d09, 0xdde2, 0xed1a, 0x0, 0x1);
        gbc.writeMem(0x2e27, { 0x3a });
        gbc.writeMem(0xed1a, { 0x27 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xaa9a, gbc.sp());
        EXPECT(0x2e28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x27, gbc.readMem(0xed1a));
        // 3A 0062
        gbc.setState(0x3cf1, 0x77b2, 0xa330, 0x5d14, 0x2e7e, 0x7792, 0x1, 0x0);
        gbc.writeMem(0x3cf1, { 0x3a });
        gbc.writeMem(0x7792, { 0x81 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x77b2, gbc.sp());
        EXPECT(0x3cf2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0063
        gbc.setState(0x2d34, 0xfc61, 0xa960, 0xc503, 0x959b, 0x13f3, 0x1, 0x1);
        gbc.writeMem(0x13f3, { 0x6a });
        gbc.writeMem(0x2d34, { 0x3a });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xfc61, gbc.sp());
        EXPECT(0x2d35, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0064
        gbc.setState(0x80ec, 0xc7ae, 0xfe60, 0x29ad, 0x38db, 0xb306, 0x1, 0x0);
        gbc.writeMem(0x80ec, { 0x3a });
        gbc.writeMem(0xb306, { 0xad });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xc7ae, gbc.sp());
        EXPECT(0x80ed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x80ec));
        EXPECT(0xad, gbc.readMem(0xb306));
        // 3A 0065
        gbc.setState(0x92cd, 0xb5c4, 0x4da0, 0xfbe0, 0x66fe, 0x81dd, 0x1, 0x1);
        gbc.writeMem(0x81dd, { 0x99 });
        gbc.writeMem(0x92cd, { 0x3a });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xb5c4, gbc.sp());
        EXPECT(0x92ce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x99, gbc.readMem(0x81dd));
        EXPECT(0x3a, gbc.readMem(0x92cd));
        // 3A 0066
        gbc.setState(0x5d60, 0xcef9, 0x89b0, 0x319d, 0x620e, 0x961e, 0x1, 0x0);
        gbc.writeMem(0x5d60, { 0x3a });
        gbc.writeMem(0x961e, { 0x1d });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xcef9, gbc.sp());
        EXPECT(0x5d61, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1d, gbc.readMem(0x961e));
        // 3A 0067
        gbc.setState(0xdee4, 0xf0e0, 0xf510, 0xe7c5, 0x215b, 0xf4b3, 0x0, 0x0);
        gbc.writeMem(0xdee4, { 0x3a });
        gbc.writeMem(0xf4b3, { 0x7c });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xf0e0, gbc.sp());
        EXPECT(0xdee5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xdee4));
        EXPECT(0x7c, gbc.readMem(0xf4b3));
        // 3A 0068
        gbc.setState(0xb6d6, 0x53ef, 0xcc50, 0x9e7, 0xf389, 0x654e, 0x0, 0x0);
        gbc.writeMem(0x654e, { 0x5d });
        gbc.writeMem(0xb6d6, { 0x3a });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x53ef, gbc.sp());
        EXPECT(0xb6d7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb6d6));
        // 3A 0069
        gbc.setState(0x38e, 0x75fc, 0x3af0, 0x1429, 0x11de, 0x8b72, 0x0, 0x1);
        gbc.writeMem(0x38e, { 0x3a });
        gbc.writeMem(0x8b72, { 0xe2 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x75fc, gbc.sp());
        EXPECT(0x38f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe2, gbc.readMem(0x8b72));
        // 3A 006A
        gbc.setState(0x226a, 0xcfd8, 0x5b0, 0x9515, 0x643e, 0xc0a2, 0x1, 0x1);
        gbc.writeMem(0x226a, { 0x3a });
        gbc.writeMem(0xc0a2, { 0x2 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xcfd8, gbc.sp());
        EXPECT(0x226b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2, gbc.readMem(0xc0a2));
        // 3A 006B
        gbc.setState(0x7eff, 0x310, 0x2910, 0x5950, 0x48cb, 0x12f9, 0x0, 0x1);
        gbc.writeMem(0x12f9, { 0xc1 });
        gbc.writeMem(0x7eff, { 0x3a });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x310, gbc.sp());
        EXPECT(0x7f00, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 006D
        gbc.setState(0xeb74, 0xe38d, 0x9bd0, 0xf74, 0x9d38, 0x6a36, 0x1, 0x0);
        gbc.writeMem(0x6a36, { 0x22 });
        gbc.writeMem(0xeb74, { 0x3a });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xe38d, gbc.sp());
        EXPECT(0xeb75, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xeb74));
        // 3A 006E
        gbc.setState(0x9fa2, 0x863, 0x3df0, 0x2b45, 0x9812, 0xdcb4, 0x0, 0x1);
        gbc.writeMem(0x9fa2, { 0x3a });
        gbc.writeMem(0xdcb4, { 0xa });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x863, gbc.sp());
        EXPECT(0x9fa3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9fa2));
        EXPECT(0xa, gbc.readMem(0xdcb4));
        // 3A 006F
        gbc.setState(0xb9fb, 0xef67, 0xdf20, 0x5ddd, 0x7d86, 0x6865, 0x1, 0x1);
        gbc.writeMem(0x6865, { 0x90 });
        gbc.writeMem(0xb9fb, { 0x3a });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xef67, gbc.sp());
        EXPECT(0xb9fc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb9fb));
        // 3A 0070
        gbc.setState(0xd8a5, 0xde6b, 0x3280, 0x371d, 0x1877, 0x2c57, 0x1, 0x0);
        gbc.writeMem(0x2c57, { 0xb3 });
        gbc.writeMem(0xd8a5, { 0x3a });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xde6b, gbc.sp());
        EXPECT(0xd8a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xd8a5));
        // 3A 0071
        gbc.setState(0xa222, 0xbd9f, 0x2c80, 0xee46, 0x5c85, 0x74e7, 0x0, 0x1);
        gbc.writeMem(0x74e7, { 0x1b });
        gbc.writeMem(0xa222, { 0x3a });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xbd9f, gbc.sp());
        EXPECT(0xa223, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa222));
        // 3A 0072
        gbc.setState(0x4619, 0x79cc, 0x2180, 0xa1dc, 0xca32, 0x941b, 0x1, 0x0);
        gbc.writeMem(0x4619, { 0x3a });
        gbc.writeMem(0x941b, { 0xb8 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x79cc, gbc.sp());
        EXPECT(0x461a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb8, gbc.readMem(0x941b));
        // 3A 0073
        gbc.setState(0x9d1a, 0x3da9, 0xad60, 0x3ad2, 0x1fa1, 0x5867, 0x1, 0x0);
        gbc.writeMem(0x5867, { 0xb2 });
        gbc.writeMem(0x9d1a, { 0x3a });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x3da9, gbc.sp());
        EXPECT(0x9d1b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9d1a));
        // 3A 0074
        gbc.setState(0xeb8, 0x5fbc, 0xe400, 0x1287, 0x5c83, 0x8e52, 0x1, 0x1);
        gbc.writeMem(0xeb8, { 0x3a });
        gbc.writeMem(0x8e52, { 0x3f });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x5fbc, gbc.sp());
        EXPECT(0xeb9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3f, gbc.readMem(0x8e52));
        // 3A 0075
        gbc.setState(0x6c50, 0xe86f, 0x61c0, 0xb855, 0x2010, 0xdd6f, 0x0, 0x1);
        gbc.writeMem(0x6c50, { 0x3a });
        gbc.writeMem(0xdd6f, { 0xb3 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xe86f, gbc.sp());
        EXPECT(0x6c51, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb3, gbc.readMem(0xdd6f));
        // 3A 0076
        gbc.setState(0xea15, 0x7845, 0xcf00, 0x3d2b, 0x5dd5, 0x2e6a, 0x1, 0x1);
        gbc.writeMem(0x2e6a, { 0xd9 });
        gbc.writeMem(0xea15, { 0x3a });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x7845, gbc.sp());
        EXPECT(0xea16, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xea15));
        // 3A 0077
        gbc.setState(0x4368, 0x8a8e, 0x4b00, 0x329e, 0x9e6c, 0xe7e8, 0x0, 0x1);
        gbc.writeMem(0x4368, { 0x3a });
        gbc.writeMem(0xe7e8, { 0x15 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x8a8e, gbc.sp());
        EXPECT(0x4369, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x15, gbc.readMem(0xe7e8));
        // 3A 0078
        gbc.setState(0x7c94, 0x166c, 0x1580, 0x1e5b, 0x34dd, 0x5abc, 0x0, 0x0);
        gbc.writeMem(0x5abc, { 0x44 });
        gbc.writeMem(0x7c94, { 0x3a });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x166c, gbc.sp());
        EXPECT(0x7c95, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0079
        gbc.setState(0x3199, 0x19b, 0xa500, 0xf293, 0x34b3, 0x1f66, 0x0, 0x0);
        gbc.writeMem(0x1f66, { 0xf4 });
        gbc.writeMem(0x3199, { 0x3a });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x19b, gbc.sp());
        EXPECT(0x319a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 007A
        gbc.setState(0x7d74, 0x6a8e, 0x8590, 0x540d, 0x52a2, 0xd083, 0x0, 0x1);
        gbc.writeMem(0x7d74, { 0x3a });
        gbc.writeMem(0xd083, { 0x35 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x6a8e, gbc.sp());
        EXPECT(0x7d75, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x35, gbc.readMem(0xd083));
        // 3A 007B
        gbc.setState(0xa3c8, 0xd30b, 0x90b0, 0x7d9a, 0xf8b9, 0x3277, 0x1, 0x1);
        gbc.writeMem(0x3277, { 0x7a });
        gbc.writeMem(0xa3c8, { 0x3a });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xd30b, gbc.sp());
        EXPECT(0xa3c9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa3c8));
        // 3A 007C
        gbc.setState(0xc90c, 0x5fec, 0xac60, 0xd1a0, 0x7c6a, 0x253, 0x0, 0x0);
        gbc.writeMem(0x253, { 0x4b });
        gbc.writeMem(0xc90c, { 0x3a });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x5fec, gbc.sp());
        EXPECT(0xc90d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc90c));
        // 3A 007D
        gbc.setState(0xa501, 0x5f68, 0xdcf0, 0x8fe8, 0x3d6, 0x5b90, 0x1, 0x0);
        gbc.writeMem(0x5b90, { 0x5a });
        gbc.writeMem(0xa501, { 0x3a });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x5f68, gbc.sp());
        EXPECT(0xa502, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa501));
        // 3A 007E
        gbc.setState(0x5ad0, 0x91e6, 0x4c70, 0xbd1e, 0x47ec, 0xaac9, 0x1, 0x0);
        gbc.writeMem(0x5ad0, { 0x3a });
        gbc.writeMem(0xaac9, { 0xff });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x91e6, gbc.sp());
        EXPECT(0x5ad1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xff, gbc.readMem(0xaac9));
        // 3A 007F
        gbc.setState(0xe18, 0x371b, 0x9e90, 0xb388, 0x3612, 0x505c, 0x0, 0x1);
        gbc.writeMem(0xe18, { 0x3a });
        gbc.writeMem(0x505c, { 0xfa });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x371b, gbc.sp());
        EXPECT(0xe19, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0080
        gbc.setState(0x76ea, 0x613d, 0x8b90, 0xe52f, 0xbbdb, 0x7bf9, 0x1, 0x1);
        gbc.writeMem(0x76ea, { 0x3a });
        gbc.writeMem(0x7bf9, { 0x36 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x613d, gbc.sp());
        EXPECT(0x76eb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0081
        gbc.setState(0x2cec, 0xbbe5, 0x5610, 0x1f93, 0x8ecc, 0xe95c, 0x0, 0x1);
        gbc.writeMem(0x2cec, { 0x3a });
        gbc.writeMem(0xe95c, { 0xa });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0xbbe5, gbc.sp());
        EXPECT(0x2ced, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa, gbc.readMem(0xe95c));
        // 3A 0082
        gbc.setState(0xdac5, 0x58ad, 0xf1d0, 0x151b, 0xa6cb, 0xb7c8, 0x0, 0x0);
        gbc.writeMem(0xb7c8, { 0x8b });
        gbc.writeMem(0xdac5, { 0x3a });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x58ad, gbc.sp());
        EXPECT(0xdac6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8b, gbc.readMem(0xb7c8));
        EXPECT(0x3a, gbc.readMem(0xdac5));
        // 3A 0083
        gbc.setState(0xe15c, 0x7ae8, 0x9d40, 0xdbc8, 0x85bd, 0xed79, 0x0, 0x0);
        gbc.writeMem(0xe15c, { 0x3a });
        gbc.writeMem(0xed79, { 0x3c });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x7ae8, gbc.sp());
        EXPECT(0xe15d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xe15c));
        EXPECT(0x3c, gbc.readMem(0xed79));
        // 3A 0085
        gbc.setState(0xdb32, 0x10db, 0xc70, 0x505f, 0xb9e, 0xaa89, 0x0, 0x0);
        gbc.writeMem(0xaa89, { 0x98 });
        gbc.writeMem(0xdb32, { 0x3a });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x10db, gbc.sp());
        EXPECT(0xdb33, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x98, gbc.readMem(0xaa89));
        EXPECT(0x3a, gbc.readMem(0xdb32));
        // 3A 0086
        gbc.setState(0x1ba9, 0xfe65, 0xb8f0, 0xff3c, 0xbcc4, 0xc57e, 0x1, 0x1);
        gbc.writeMem(0x1ba9, { 0x3a });
        gbc.writeMem(0xc57e, { 0xde });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xfe65, gbc.sp());
        EXPECT(0x1baa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xde, gbc.readMem(0xc57e));
        // 3A 0087
        gbc.setState(0x2f72, 0xfed3, 0xb860, 0x1037, 0x29ec, 0xba54, 0x1, 0x1);
        gbc.writeMem(0x2f72, { 0x3a });
        gbc.writeMem(0xba54, { 0x9e });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xfed3, gbc.sp());
        EXPECT(0x2f73, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x9e, gbc.readMem(0xba54));
        // 3A 0088
        gbc.setState(0x760a, 0xaef6, 0x6f00, 0x81e1, 0x5a54, 0xd1dc, 0x1, 0x1);
        gbc.writeMem(0x760a, { 0x3a });
        gbc.writeMem(0xd1dc, { 0x78 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xaef6, gbc.sp());
        EXPECT(0x760b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x78, gbc.readMem(0xd1dc));
        // 3A 0089
        gbc.setState(0x9bb5, 0x1d79, 0x8900, 0x2a3d, 0x4a40, 0x9f9a, 0x1, 0x0);
        gbc.writeMem(0x9bb5, { 0x3a });
        gbc.writeMem(0x9f9a, { 0xe5 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x1d79, gbc.sp());
        EXPECT(0x9bb6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9bb5));
        EXPECT(0xe5, gbc.readMem(0x9f9a));
        // 3A 008A
        gbc.setState(0x997c, 0x7630, 0xe4e0, 0xa972, 0x1236, 0x2016, 0x1, 0x0);
        gbc.writeMem(0x2016, { 0xce });
        gbc.writeMem(0x997c, { 0x3a });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x7630, gbc.sp());
        EXPECT(0x997d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x997c));
        // 3A 008B
        gbc.setState(0xa9a0, 0x2eb9, 0x1de0, 0x9e78, 0x1f84, 0x9673, 0x0, 0x1);
        gbc.writeMem(0x9673, { 0xbb });
        gbc.writeMem(0xa9a0, { 0x3a });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x2eb9, gbc.sp());
        EXPECT(0xa9a1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xbb, gbc.readMem(0x9673));
        EXPECT(0x3a, gbc.readMem(0xa9a0));
        // 3A 008C
        gbc.setState(0xa3ff, 0x1e5, 0xa430, 0x793c, 0xe865, 0x5724, 0x1, 0x0);
        gbc.writeMem(0x5724, { 0x7d });
        gbc.writeMem(0xa3ff, { 0x3a });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x1e5, gbc.sp());
        EXPECT(0xa400, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa3ff));
        // 3A 008D
        gbc.setState(0x58ba, 0x8c47, 0x9060, 0xe7f3, 0xaa7e, 0x67e, 0x0, 0x0);
        gbc.writeMem(0x67e, { 0x3 });
        gbc.writeMem(0x58ba, { 0x3a });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x8c47, gbc.sp());
        EXPECT(0x58bb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 008E
        gbc.setState(0x21e5, 0x2cb0, 0x7e60, 0x98f2, 0x69b1, 0xc867, 0x1, 0x1);
        gbc.writeMem(0x21e5, { 0x3a });
        gbc.writeMem(0xc867, { 0x37 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x2cb0, gbc.sp());
        EXPECT(0x21e6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x37, gbc.readMem(0xc867));
        // 3A 008F
        gbc.setState(0xd5ae, 0xcccb, 0xd330, 0xc30d, 0x2f88, 0xb919, 0x0, 0x1);
        gbc.writeMem(0xb919, { 0xa5 });
        gbc.writeMem(0xd5ae, { 0x3a });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xcccb, gbc.sp());
        EXPECT(0xd5af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa5, gbc.readMem(0xb919));
        EXPECT(0x3a, gbc.readMem(0xd5ae));
        // 3A 0090
        gbc.setState(0x70dc, 0xcb2e, 0xa4b0, 0xf2a6, 0xc52b, 0x4b80, 0x1, 0x0);
        gbc.writeMem(0x4b80, { 0xb });
        gbc.writeMem(0x70dc, { 0x3a });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xcb2e, gbc.sp());
        EXPECT(0x70dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0091
        gbc.setState(0x88d, 0x6e20, 0xa4e0, 0x102a, 0x53a0, 0x22cb, 0x1, 0x0);
        gbc.writeMem(0x88d, { 0x3a });
        gbc.writeMem(0x22cb, { 0x49 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x6e20, gbc.sp());
        EXPECT(0x88e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0092
        gbc.setState(0xb61c, 0xfca4, 0x4690, 0xa0d3, 0x65c6, 0x921, 0x1, 0x0);
        gbc.writeMem(0x921, { 0x4f });
        gbc.writeMem(0xb61c, { 0x3a });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0xfca4, gbc.sp());
        EXPECT(0xb61d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb61c));
        // 3A 0094
        gbc.setState(0xbecf, 0xc4d9, 0x8e60, 0xf77f, 0x2fa2, 0x1389, 0x1, 0x1);
        gbc.writeMem(0x1389, { 0xd6 });
        gbc.writeMem(0xbecf, { 0x3a });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xc4d9, gbc.sp());
        EXPECT(0xbed0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbecf));
        // 3A 0096
        gbc.setState(0xae67, 0xdcf9, 0x30a0, 0xeb1a, 0xc11b, 0x6150, 0x0, 0x1);
        gbc.writeMem(0x6150, { 0x58 });
        gbc.writeMem(0xae67, { 0x3a });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0xdcf9, gbc.sp());
        EXPECT(0xae68, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xae67));
        // 3A 0097
        gbc.setState(0x76b5, 0xb0d0, 0xa390, 0x5daf, 0xf9da, 0x2fc3, 0x0, 0x0);
        gbc.writeMem(0x2fc3, { 0x31 });
        gbc.writeMem(0x76b5, { 0x3a });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xb0d0, gbc.sp());
        EXPECT(0x76b6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0098
        gbc.setState(0x59fa, 0xc179, 0x6fb0, 0xb7d3, 0x2264, 0x8f77, 0x1, 0x0);
        gbc.writeMem(0x59fa, { 0x3a });
        gbc.writeMem(0x8f77, { 0x24 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xc179, gbc.sp());
        EXPECT(0x59fb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x24, gbc.readMem(0x8f77));
        // 3A 0099
        gbc.setState(0x42b9, 0x33f3, 0xff60, 0x59cf, 0x1b3d, 0x9698, 0x1, 0x1);
        gbc.writeMem(0x42b9, { 0x3a });
        gbc.writeMem(0x9698, { 0x5b });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x33f3, gbc.sp());
        EXPECT(0x42ba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5b, gbc.readMem(0x9698));
        // 3A 009A
        gbc.setState(0x38a0, 0x6d57, 0x1d40, 0xf6b7, 0xa711, 0xa5ee, 0x1, 0x0);
        gbc.writeMem(0x38a0, { 0x3a });
        gbc.writeMem(0xa5ee, { 0x97 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x6d57, gbc.sp());
        EXPECT(0x38a1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x97, gbc.readMem(0xa5ee));
        // 3A 009B
        gbc.setState(0xc9aa, 0x5d42, 0xa370, 0x3303, 0xe9c8, 0x63c3, 0x1, 0x1);
        gbc.writeMem(0x63c3, { 0x51 });
        gbc.writeMem(0xc9aa, { 0x3a });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x5d42, gbc.sp());
        EXPECT(0xc9ab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc9aa));
        // 3A 009C
        gbc.setState(0x1519, 0xb82f, 0xa660, 0x28a9, 0x7984, 0xfc58, 0x1, 0x1);
        gbc.writeMem(0x1519, { 0x3a });
        gbc.writeMem(0xfc58, { 0x68 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xb82f, gbc.sp());
        EXPECT(0x151a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x68, gbc.readMem(0xfc58));
        // 3A 009D
        gbc.setState(0xeacc, 0xea7e, 0x9620, 0xa49f, 0x5581, 0xdd4c, 0x1, 0x0);
        gbc.writeMem(0xdd4c, { 0x16 });
        gbc.writeMem(0xeacc, { 0x3a });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xea7e, gbc.sp());
        EXPECT(0xeacd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x16, gbc.readMem(0xdd4c));
        EXPECT(0x3a, gbc.readMem(0xeacc));
        // 3A 009F
        gbc.setState(0x2dc1, 0x72d8, 0xd0a0, 0x9d83, 0xa7eb, 0x1d8b, 0x0, 0x1);
        gbc.writeMem(0x1d8b, { 0x3 });
        gbc.writeMem(0x2dc1, { 0x3a });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x72d8, gbc.sp());
        EXPECT(0x2dc2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 00A0
        gbc.setState(0xcbae, 0x276b, 0xdca0, 0xaa44, 0xe7ce, 0xe152, 0x0, 0x1);
        gbc.writeMem(0xcbae, { 0x3a });
        gbc.writeMem(0xe152, { 0xcc });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x276b, gbc.sp());
        EXPECT(0xcbaf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xcbae));
        EXPECT(0xcc, gbc.readMem(0xe152));
        // 3A 00A1
        gbc.setState(0x9652, 0xeb95, 0xec80, 0x1465, 0xd6ca, 0xb88d, 0x1, 0x0);
        gbc.writeMem(0x9652, { 0x3a });
        gbc.writeMem(0xb88d, { 0x37 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xeb95, gbc.sp());
        EXPECT(0x9653, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9652));
        EXPECT(0x37, gbc.readMem(0xb88d));
        // 3A 00A2
        gbc.setState(0xa831, 0x8ceb, 0x4c00, 0x8321, 0x7149, 0xa00a, 0x0, 0x0);
        gbc.writeMem(0xa00a, { 0xb6 });
        gbc.writeMem(0xa831, { 0x3a });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0x8ceb, gbc.sp());
        EXPECT(0xa832, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb6, gbc.readMem(0xa00a));
        EXPECT(0x3a, gbc.readMem(0xa831));
        // 3A 00A3
        gbc.setState(0xc2c0, 0xca29, 0x9f50, 0x5287, 0x7bb3, 0xfb5, 0x0, 0x0);
        gbc.writeMem(0xfb5, { 0xe2 });
        gbc.writeMem(0xc2c0, { 0x3a });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xca29, gbc.sp());
        EXPECT(0xc2c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc2c0));
        // 3A 00A4
        gbc.setState(0xb2b5, 0x252f, 0x2c70, 0x255f, 0x1af5, 0x5a07, 0x0, 0x0);
        gbc.writeMem(0x5a07, { 0xe6 });
        gbc.writeMem(0xb2b5, { 0x3a });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x252f, gbc.sp());
        EXPECT(0xb2b6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb2b5));
        // 3A 00A5
        gbc.setState(0x5ce1, 0x89a1, 0xa230, 0xd770, 0x1214, 0x2b20, 0x0, 0x1);
        gbc.writeMem(0x2b20, { 0xc0 });
        gbc.writeMem(0x5ce1, { 0x3a });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x89a1, gbc.sp());
        EXPECT(0x5ce2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 00A6
        gbc.setState(0x2124, 0xcfcd, 0x9800, 0x3777, 0x2df3, 0x6db1, 0x0, 0x1);
        gbc.writeMem(0x2124, { 0x3a });
        gbc.writeMem(0x6db1, { 0x43 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xcfcd, gbc.sp());
        EXPECT(0x2125, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 00A7
        gbc.setState(0x5a07, 0x4f31, 0x7280, 0xd3af, 0x699c, 0x6b69, 0x1, 0x1);
        gbc.writeMem(0x5a07, { 0x3a });
        gbc.writeMem(0x6b69, { 0xdd });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x4f31, gbc.sp());
        EXPECT(0x5a08, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 00A8
        gbc.setState(0xd6d4, 0x535d, 0x5850, 0x644d, 0x83da, 0xbf68, 0x1, 0x0);
        gbc.writeMem(0xbf68, { 0xe3 });
        gbc.writeMem(0xd6d4, { 0x3a });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x535d, gbc.sp());
        EXPECT(0xd6d5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe3, gbc.readMem(0xbf68));
        EXPECT(0x3a, gbc.readMem(0xd6d4));
        // 3A 00A9
        gbc.setState(0x7caa, 0x80cc, 0xe40, 0x45f7, 0x419c, 0x56ee, 0x1, 0x0);
        gbc.writeMem(0x56ee, { 0xf1 });
        gbc.writeMem(0x7caa, { 0x3a });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x80cc, gbc.sp());
        EXPECT(0x7cab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 00AA
        gbc.setState(0xdc03, 0x601, 0x9e0, 0x3a93, 0x8745, 0x57b7, 0x0, 0x0);
        gbc.writeMem(0x57b7, { 0x6d });
        gbc.writeMem(0xdc03, { 0x3a });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x601, gbc.sp());
        EXPECT(0xdc04, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xdc03));
        // 3A 00AC
        gbc.setState(0xbde2, 0x2b02, 0xfd30, 0xc8f3, 0x4550, 0x8dea, 0x0, 0x1);
        gbc.writeMem(0x8dea, { 0x22 });
        gbc.writeMem(0xbde2, { 0x3a });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x2b02, gbc.sp());
        EXPECT(0xbde3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x22, gbc.readMem(0x8dea));
        EXPECT(0x3a, gbc.readMem(0xbde2));
        // 3A 00AD
        gbc.setState(0xbb03, 0x2d4d, 0xd650, 0x69fa, 0x66c7, 0x402a, 0x1, 0x1);
        gbc.writeMem(0x402a, { 0x12 });
        gbc.writeMem(0xbb03, { 0x3a });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x2d4d, gbc.sp());
        EXPECT(0xbb04, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbb03));
        // 3A 00AE
        gbc.setState(0xa6c0, 0x165c, 0x7180, 0x3256, 0x1768, 0x399a, 0x0, 0x0);
        gbc.writeMem(0x399a, { 0xd4 });
        gbc.writeMem(0xa6c0, { 0x3a });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x165c, gbc.sp());
        EXPECT(0xa6c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa6c0));
        // 3A 00AF
        gbc.setState(0x6a60, 0xbc68, 0xfe20, 0x1a03, 0x72d2, 0x4d44, 0x0, 0x1);
        gbc.writeMem(0x4d44, { 0x4b });
        gbc.writeMem(0x6a60, { 0x3a });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xbc68, gbc.sp());
        EXPECT(0x6a61, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 00B1
        gbc.setState(0x17a7, 0xa754, 0xd0f0, 0xed71, 0x50cf, 0xae21, 0x0, 0x1);
        gbc.writeMem(0x17a7, { 0x3a });
        gbc.writeMem(0xae21, { 0x7a });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0xa754, gbc.sp());
        EXPECT(0x17a8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7a, gbc.readMem(0xae21));
        // 3A 00B2
        gbc.setState(0x6c07, 0xfcda, 0x7c10, 0xdc67, 0xb287, 0x17d0, 0x1, 0x0);
        gbc.writeMem(0x17d0, { 0x3d });
        gbc.writeMem(0x6c07, { 0x3a });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xfcda, gbc.sp());
        EXPECT(0x6c08, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 00B3
        gbc.setState(0x1d92, 0x91a7, 0xa3d0, 0x1d5, 0x2962, 0x95e, 0x1, 0x0);
        gbc.writeMem(0x95e, { 0x53 });
        gbc.writeMem(0x1d92, { 0x3a });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x91a7, gbc.sp());
        EXPECT(0x1d93, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 00B4
        gbc.setState(0xddc3, 0x526c, 0x1d60, 0xa035, 0x10d5, 0x4495, 0x0, 0x1);
        gbc.writeMem(0x4495, { 0x9b });
        gbc.writeMem(0xddc3, { 0x3a });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x526c, gbc.sp());
        EXPECT(0xddc4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xddc3));
        // 3A 00B5
        gbc.setState(0x8b89, 0xb83d, 0x2e20, 0x6f70, 0x86fa, 0xc3e, 0x0, 0x1);
        gbc.writeMem(0xc3e, { 0x71 });
        gbc.writeMem(0x8b89, { 0x3a });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xb83d, gbc.sp());
        EXPECT(0x8b8a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8b89));
        // 3A 00B6
        gbc.setState(0x7063, 0xfaca, 0xabf0, 0x4fb6, 0x79cf, 0xab2c, 0x0, 0x1);
        gbc.writeMem(0x7063, { 0x3a });
        gbc.writeMem(0xab2c, { 0xea });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xfaca, gbc.sp());
        EXPECT(0x7064, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xea, gbc.readMem(0xab2c));
        // 3A 00B7
        gbc.setState(0xa11b, 0x3fef, 0x17d0, 0xc37b, 0xcd18, 0x5c72, 0x0, 0x1);
        gbc.writeMem(0x5c72, { 0xfa });
        gbc.writeMem(0xa11b, { 0x3a });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x3fef, gbc.sp());
        EXPECT(0xa11c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa11b));
        // 3A 00B8
        gbc.setState(0x12d3, 0xa99c, 0xbd10, 0xabf4, 0xbede, 0x95d6, 0x1, 0x0);
        gbc.writeMem(0x12d3, { 0x3a });
        gbc.writeMem(0x95d6, { 0xc7 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xa99c, gbc.sp());
        EXPECT(0x12d4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc7, gbc.readMem(0x95d6));
        // 3A 00B9
        gbc.setState(0xb259, 0x7fee, 0xac10, 0xc9d7, 0x976f, 0xe305, 0x1, 0x1);
        gbc.writeMem(0xb259, { 0x3a });
        gbc.writeMem(0xe305, { 0x64 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x7fee, gbc.sp());
        EXPECT(0xb25a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb259));
        EXPECT(0x64, gbc.readMem(0xe305));
        // 3A 00BA
        gbc.setState(0x5e5f, 0x9807, 0xdef0, 0x799d, 0x3324, 0x4b93, 0x1, 0x0);
        gbc.writeMem(0x4b93, { 0x34 });
        gbc.writeMem(0x5e5f, { 0x3a });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x9807, gbc.sp());
        EXPECT(0x5e60, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 00BB
        gbc.setState(0x62c9, 0xd3d6, 0x9130, 0xdceb, 0x86f5, 0xcbfa, 0x1, 0x1);
        gbc.writeMem(0x62c9, { 0x3a });
        gbc.writeMem(0xcbfa, { 0x30 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xd3d6, gbc.sp());
        EXPECT(0x62ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x30, gbc.readMem(0xcbfa));
        // 3A 00BC
        gbc.setState(0x8ba, 0xb55c, 0x1810, 0x9449, 0x772, 0xe974, 0x0, 0x0);
        gbc.writeMem(0x8ba, { 0x3a });
        gbc.writeMem(0xe974, { 0x63 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0xb55c, gbc.sp());
        EXPECT(0x8bb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x63, gbc.readMem(0xe974));
        // 3A 00BD
        gbc.setState(0xefce, 0x6b52, 0x3d70, 0xb7b, 0x46f5, 0xb198, 0x0, 0x0);
        gbc.writeMem(0xb198, { 0x27 });
        gbc.writeMem(0xefce, { 0x3a });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x6b52, gbc.sp());
        EXPECT(0xefcf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x27, gbc.readMem(0xb198));
        EXPECT(0x3a, gbc.readMem(0xefce));
        // 3A 00BE
        gbc.setState(0x6536, 0xdc61, 0xe7d0, 0x48d0, 0xd3b, 0xd542, 0x0, 0x0);
        gbc.writeMem(0x6536, { 0x3a });
        gbc.writeMem(0xd542, { 0x63 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0xdc61, gbc.sp());
        EXPECT(0x6537, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x63, gbc.readMem(0xd542));
        // 3A 00BF
        gbc.setState(0x2466, 0xc6fd, 0x5890, 0x7dd7, 0x3d75, 0x12a0, 0x1, 0x0);
        gbc.writeMem(0x12a0, { 0xc7 });
        gbc.writeMem(0x2466, { 0x3a });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xc6fd, gbc.sp());
        EXPECT(0x2467, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 00C0
        gbc.setState(0x7721, 0x59f5, 0xd670, 0xbfd9, 0x9e64, 0xd508, 0x1, 0x1);
        gbc.writeMem(0x7721, { 0x3a });
        gbc.writeMem(0xd508, { 0x2a });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x59f5, gbc.sp());
        EXPECT(0x7722, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2a, gbc.readMem(0xd508));
        // 3A 00C1
        gbc.setState(0x8f2f, 0xec2d, 0x81e0, 0x46fe, 0x2ffe, 0xa6f1, 0x1, 0x1);
        gbc.writeMem(0x8f2f, { 0x3a });
        gbc.writeMem(0xa6f1, { 0x46 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xec2d, gbc.sp());
        EXPECT(0x8f30, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8f2f));
        EXPECT(0x46, gbc.readMem(0xa6f1));
        // 3A 00C2
        gbc.setState(0x378d, 0x70a8, 0x96a0, 0x7344, 0xcb86, 0x88fc, 0x1, 0x1);
        gbc.writeMem(0x378d, { 0x3a });
        gbc.writeMem(0x88fc, { 0xc7 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x70a8, gbc.sp());
        EXPECT(0x378e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc7, gbc.readMem(0x88fc));
        // 3A 00C3
        gbc.setState(0x4dcd, 0x8bc, 0xdda0, 0x8ad2, 0x6c7c, 0x2945, 0x1, 0x0);
        gbc.writeMem(0x2945, { 0x55 });
        gbc.writeMem(0x4dcd, { 0x3a });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x8bc, gbc.sp());
        EXPECT(0x4dce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 00C4
        gbc.setState(0x806c, 0x1ff, 0xfbc0, 0x1984, 0x4ed, 0x71cf, 0x1, 0x1);
        gbc.writeMem(0x71cf, { 0x42 });
        gbc.writeMem(0x806c, { 0x3a });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x1ff, gbc.sp());
        EXPECT(0x806d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x806c));
        // 3A 00C5
        gbc.setState(0x2077, 0x38, 0xf240, 0xb242, 0xd56, 0xc34c, 0x1, 0x1);
        gbc.writeMem(0x2077, { 0x3a });
        gbc.writeMem(0xc34c, { 0xed });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x38, gbc.sp());
        EXPECT(0x2078, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xed, gbc.readMem(0xc34c));
        // 3A 00C6
        gbc.setState(0x9f1c, 0xdd0d, 0x58d0, 0x4b7f, 0xca62, 0x2840, 0x0, 0x1);
        gbc.writeMem(0x2840, { 0xea });
        gbc.writeMem(0x9f1c, { 0x3a });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xdd0d, gbc.sp());
        EXPECT(0x9f1d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9f1c));
        // 3A 00C7
        gbc.setState(0xedd, 0x2705, 0x2740, 0xf6e7, 0xfb5e, 0x6de2, 0x0, 0x0);
        gbc.writeMem(0xedd, { 0x3a });
        gbc.writeMem(0x6de2, { 0x56 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x2705, gbc.sp());
        EXPECT(0xede, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 00C9
        gbc.setState(0x65bd, 0x3c94, 0x1940, 0x741d, 0xc279, 0xe998, 0x1, 0x0);
        gbc.writeMem(0x65bd, { 0x3a });
        gbc.writeMem(0xe998, { 0xf2 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x3c94, gbc.sp());
        EXPECT(0x65be, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf2, gbc.readMem(0xe998));
        // 3A 00CA
        gbc.setState(0x8a8a, 0xb657, 0x3ef0, 0x167d, 0x1030, 0x2b87, 0x0, 0x0);
        gbc.writeMem(0x2b87, { 0xb3 });
        gbc.writeMem(0x8a8a, { 0x3a });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xb657, gbc.sp());
        EXPECT(0x8a8b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8a8a));
        // 3A 00CB
        gbc.setState(0x4afc, 0x1c09, 0xb1d0, 0xf4a, 0x5883, 0x784c, 0x1, 0x0);
        gbc.writeMem(0x4afc, { 0x3a });
        gbc.writeMem(0x784c, { 0xdb });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x1c09, gbc.sp());
        EXPECT(0x4afd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 00CC
        gbc.setState(0xe172, 0xde99, 0xba0, 0x269f, 0x8949, 0x8657, 0x0, 0x1);
        gbc.writeMem(0x8657, { 0xfe });
        gbc.writeMem(0xe172, { 0x3a });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xde99, gbc.sp());
        EXPECT(0xe173, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xfe, gbc.readMem(0x8657));
        EXPECT(0x3a, gbc.readMem(0xe172));
        // 3A 00CD
        gbc.setState(0xdfcd, 0x14d, 0xb930, 0x68d1, 0x46d6, 0x7a19, 0x1, 0x1);
        gbc.writeMem(0x7a19, { 0x41 });
        gbc.writeMem(0xdfcd, { 0x3a });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x14d, gbc.sp());
        EXPECT(0xdfce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xdfcd));
        // 3A 00CE
        gbc.setState(0x8e57, 0x282c, 0xcf30, 0x3125, 0xf2db, 0x9480, 0x0, 0x1);
        gbc.writeMem(0x8e57, { 0x3a });
        gbc.writeMem(0x9480, { 0xb8 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x282c, gbc.sp());
        EXPECT(0x8e58, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8e57));
        EXPECT(0xb8, gbc.readMem(0x9480));
        // 3A 00CF
        gbc.setState(0x1f25, 0x3e85, 0x1570, 0x9412, 0x2b92, 0x2c6e, 0x1, 0x1);
        gbc.writeMem(0x1f25, { 0x3a });
        gbc.writeMem(0x2c6e, { 0x12 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x3e85, gbc.sp());
        EXPECT(0x1f26, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 00D0
        gbc.setState(0x6db0, 0xfcac, 0xe600, 0x86ab, 0xd630, 0x9c40, 0x0, 0x1);
        gbc.writeMem(0x6db0, { 0x3a });
        gbc.writeMem(0x9c40, { 0x7e });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xfcac, gbc.sp());
        EXPECT(0x6db1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x7e, gbc.readMem(0x9c40));
        // 3A 00D1
        gbc.setState(0xd3c8, 0x996f, 0xe3b0, 0x7e89, 0xf004, 0x79ef, 0x0, 0x0);
        gbc.writeMem(0x79ef, { 0xbc });
        gbc.writeMem(0xd3c8, { 0x3a });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x996f, gbc.sp());
        EXPECT(0xd3c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xd3c8));
        // 3A 00D2
        gbc.setState(0x970b, 0xd4c0, 0x80a0, 0x64e9, 0xa487, 0x8f54, 0x1, 0x1);
        gbc.writeMem(0x8f54, { 0x79 });
        gbc.writeMem(0x970b, { 0x3a });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xd4c0, gbc.sp());
        EXPECT(0x970c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x79, gbc.readMem(0x8f54));
        EXPECT(0x3a, gbc.readMem(0x970b));
        // 3A 00D3
        gbc.setState(0x38a8, 0xd52b, 0x1780, 0xa36d, 0x503f, 0x3997, 0x0, 0x1);
        gbc.writeMem(0x38a8, { 0x3a });
        gbc.writeMem(0x3997, { 0xe4 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xd52b, gbc.sp());
        EXPECT(0x38a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 00D4
        gbc.setState(0x4b85, 0x8b41, 0xb940, 0x73e0, 0x2e5b, 0x2c66, 0x1, 0x1);
        gbc.writeMem(0x2c66, { 0xfb });
        gbc.writeMem(0x4b85, { 0x3a });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x8b41, gbc.sp());
        EXPECT(0x4b86, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 00D5
        gbc.setState(0x9a0a, 0x4c1f, 0x1ab0, 0xa8db, 0x7568, 0xbf85, 0x1, 0x1);
        gbc.writeMem(0x9a0a, { 0x3a });
        gbc.writeMem(0xbf85, { 0x5 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x4c1f, gbc.sp());
        EXPECT(0x9a0b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9a0a));
        EXPECT(0x5, gbc.readMem(0xbf85));
        // 3A 00D6
        gbc.setState(0xb29a, 0xad8f, 0xd360, 0xa3b3, 0x4aaf, 0xf857, 0x1, 0x0);
        gbc.writeMem(0xb29a, { 0x3a });
        gbc.writeMem(0xf857, { 0x3c });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xad8f, gbc.sp());
        EXPECT(0xb29b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb29a));
        EXPECT(0x3c, gbc.readMem(0xf857));
        // 3A 00D7
        gbc.setState(0x625e, 0xd53f, 0x4600, 0xb9bd, 0x5049, 0x83e4, 0x0, 0x0);
        gbc.writeMem(0x625e, { 0x3a });
        gbc.writeMem(0x83e4, { 0x22 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xd53f, gbc.sp());
        EXPECT(0x625f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x22, gbc.readMem(0x83e4));
        // 3A 00D8
        gbc.setState(0xc345, 0x925a, 0xb080, 0x5475, 0xfb06, 0x4909, 0x1, 0x1);
        gbc.writeMem(0x4909, { 0x6c });
        gbc.writeMem(0xc345, { 0x3a });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x925a, gbc.sp());
        EXPECT(0xc346, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc345));
        // 3A 00D9
        gbc.setState(0xdd19, 0xad5d, 0xfaa0, 0x1c82, 0xd813, 0xb6cc, 0x1, 0x1);
        gbc.writeMem(0xb6cc, { 0x8d });
        gbc.writeMem(0xdd19, { 0x3a });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xad5d, gbc.sp());
        EXPECT(0xdd1a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x8d, gbc.readMem(0xb6cc));
        EXPECT(0x3a, gbc.readMem(0xdd19));
        // 3A 00DA
        gbc.setState(0xd6d1, 0x6263, 0x3ab0, 0xde6f, 0x6256, 0x11c1, 0x0, 0x0);
        gbc.writeMem(0x11c1, { 0x9e });
        gbc.writeMem(0xd6d1, { 0x3a });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x6263, gbc.sp());
        EXPECT(0xd6d2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xd6d1));
        // 3A 00DB
        gbc.setState(0x1e6, 0xcc8b, 0x74f0, 0xfcdf, 0xfcc2, 0x53db, 0x1, 0x0);
        gbc.writeMem(0x1e6, { 0x3a });
        gbc.writeMem(0x53db, { 0x19 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xcc8b, gbc.sp());
        EXPECT(0x1e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 00DC
        gbc.setState(0xdab1, 0x7005, 0xb600, 0x3805, 0x7c45, 0x12cc, 0x1, 0x1);
        gbc.writeMem(0x12cc, { 0x75 });
        gbc.writeMem(0xdab1, { 0x3a });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x7005, gbc.sp());
        EXPECT(0xdab2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xdab1));
        // 3A 00DD
        gbc.setState(0xbad1, 0xad09, 0x8730, 0x77b5, 0x1f32, 0xaffb, 0x1, 0x0);
        gbc.writeMem(0xaffb, { 0x9c });
        gbc.writeMem(0xbad1, { 0x3a });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xad09, gbc.sp());
        EXPECT(0xbad2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x9c, gbc.readMem(0xaffb));
        EXPECT(0x3a, gbc.readMem(0xbad1));
        // 3A 00DE
        gbc.setState(0x4a3e, 0x607f, 0x580, 0x70cd, 0x2530, 0xf3c6, 0x1, 0x1);
        gbc.writeMem(0x4a3e, { 0x3a });
        gbc.writeMem(0xf3c6, { 0xac });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x607f, gbc.sp());
        EXPECT(0x4a3f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xac, gbc.readMem(0xf3c6));
        // 3A 00DF
        gbc.setState(0x6fdc, 0xf87c, 0xab30, 0x40e8, 0xcca3, 0xfeb7, 0x0, 0x1);
        gbc.writeMem(0x6fdc, { 0x3a });
        gbc.writeMem(0xfeb7, { 0x95 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xf87c, gbc.sp());
        EXPECT(0x6fdd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x95, gbc.readMem(0xfeb7));
        // 3A 00E0
        gbc.setState(0x4fc4, 0x444f, 0xef90, 0xf7da, 0xc2ec, 0x1f4f, 0x0, 0x0);
        gbc.writeMem(0x1f4f, { 0xbd });
        gbc.writeMem(0x4fc4, { 0x3a });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x444f, gbc.sp());
        EXPECT(0x4fc5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 00E1
        gbc.setState(0xa0e3, 0xeb49, 0x73b0, 0x3de7, 0x3628, 0x5256, 0x0, 0x1);
        gbc.writeMem(0x5256, { 0xc });
        gbc.writeMem(0xa0e3, { 0x3a });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0xeb49, gbc.sp());
        EXPECT(0xa0e4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa0e3));
        // 3A 00E3
        gbc.setState(0x6664, 0x907a, 0xb770, 0x130, 0x90a3, 0x4e6d, 0x1, 0x0);
        gbc.writeMem(0x4e6d, { 0xc6 });
        gbc.writeMem(0x6664, { 0x3a });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x907a, gbc.sp());
        EXPECT(0x6665, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 00E4
        gbc.setState(0x6e34, 0xa49b, 0x5cd0, 0x9b68, 0x7f11, 0x3b32, 0x1, 0x0);
        gbc.writeMem(0x3b32, { 0xe1 });
        gbc.writeMem(0x6e34, { 0x3a });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0xa49b, gbc.sp());
        EXPECT(0x6e35, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 00E5
        gbc.setState(0xc978, 0x886d, 0x3bf0, 0xb16a, 0xe3fb, 0xf9fc, 0x0, 0x1);
        gbc.writeMem(0xc978, { 0x3a });
        gbc.writeMem(0xf9fc, { 0xbc });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x886d, gbc.sp());
        EXPECT(0xc979, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc978));
        EXPECT(0xbc, gbc.readMem(0xf9fc));
        // 3A 00E6
        gbc.setState(0x3113, 0x7cf3, 0xa650, 0x3306, 0xf0b4, 0xfc8e, 0x0, 0x1);
        gbc.writeMem(0x3113, { 0x3a });
        gbc.writeMem(0xfc8e, { 0x35 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x7cf3, gbc.sp());
        EXPECT(0x3114, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x35, gbc.readMem(0xfc8e));
        // 3A 00E7
        gbc.setState(0x5569, 0xa612, 0xbdf0, 0x2039, 0x3602, 0x947e, 0x0, 0x1);
        gbc.writeMem(0x5569, { 0x3a });
        gbc.writeMem(0x947e, { 0x9b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xa612, gbc.sp());
        EXPECT(0x556a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x9b, gbc.readMem(0x947e));
        // 3A 00E8
        gbc.setState(0x5501, 0xc961, 0x95e0, 0xe826, 0xdd9e, 0xdf54, 0x0, 0x0);
        gbc.writeMem(0x5501, { 0x3a });
        gbc.writeMem(0xdf54, { 0x2 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xc961, gbc.sp());
        EXPECT(0x5502, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2, gbc.readMem(0xdf54));
        // 3A 00E9
        gbc.setState(0x8360, 0xd912, 0x8430, 0x7e1e, 0x5223, 0x4486, 0x0, 0x1);
        gbc.writeMem(0x4486, { 0xe5 });
        gbc.writeMem(0x8360, { 0x3a });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xd912, gbc.sp());
        EXPECT(0x8361, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8360));
        // 3A 00EA
        gbc.setState(0xef50, 0x4b8b, 0x2a80, 0xd79c, 0x510, 0xa8b6, 0x1, 0x1);
        gbc.writeMem(0xa8b6, { 0x8d });
        gbc.writeMem(0xef50, { 0x3a });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x4b8b, gbc.sp());
        EXPECT(0xef51, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x8d, gbc.readMem(0xa8b6));
        EXPECT(0x3a, gbc.readMem(0xef50));
        // 3A 00EB
        gbc.setState(0x30a1, 0xa753, 0xd440, 0x8467, 0x9942, 0x68c4, 0x1, 0x0);
        gbc.writeMem(0x30a1, { 0x3a });
        gbc.writeMem(0x68c4, { 0xa9 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xa753, gbc.sp());
        EXPECT(0x30a2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 00EC
        gbc.setState(0x85e4, 0xcb6c, 0xc0f0, 0x3588, 0xcfc0, 0x2f20, 0x1, 0x0);
        gbc.writeMem(0x2f20, { 0x96 });
        gbc.writeMem(0x85e4, { 0x3a });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0xcb6c, gbc.sp());
        EXPECT(0x85e5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x85e4));
        // 3A 00ED
        gbc.setState(0x1313, 0x7120, 0x41c0, 0xb97d, 0xf0fc, 0xd31b, 0x1, 0x0);
        gbc.writeMem(0x1313, { 0x3a });
        gbc.writeMem(0xd31b, { 0xb2 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x7120, gbc.sp());
        EXPECT(0x1314, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb2, gbc.readMem(0xd31b));
        // 3A 00EE
        gbc.setState(0xd0e9, 0xe53f, 0x56c0, 0xa3, 0x4bf, 0xdbe6, 0x1, 0x0);
        gbc.writeMem(0xd0e9, { 0x3a });
        gbc.writeMem(0xdbe6, { 0x5f });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0xe53f, gbc.sp());
        EXPECT(0xd0ea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xd0e9));
        EXPECT(0x5f, gbc.readMem(0xdbe6));
        // 3A 00EF
        gbc.setState(0x3fa, 0xb119, 0x95c0, 0x55b0, 0x8844, 0xf036, 0x1, 0x1);
        gbc.writeMem(0x3fa, { 0x3a });
        gbc.writeMem(0xf036, { 0xb });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xb119, gbc.sp());
        EXPECT(0x3fb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb, gbc.readMem(0xf036));
        // 3A 00F0
        gbc.setState(0x1499, 0x2a6b, 0x5620, 0x33e5, 0xf8b9, 0x9561, 0x0, 0x0);
        gbc.writeMem(0x1499, { 0x3a });
        gbc.writeMem(0x9561, { 0x76 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x2a6b, gbc.sp());
        EXPECT(0x149a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x76, gbc.readMem(0x9561));
        // 3A 00F1
        gbc.setState(0xe983, 0x790d, 0x3b00, 0xf042, 0x99cb, 0xb925, 0x1, 0x0);
        gbc.writeMem(0xb925, { 0x0 });
        gbc.writeMem(0xe983, { 0x3a });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x790d, gbc.sp());
        EXPECT(0xe984, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x0, gbc.readMem(0xb925));
        EXPECT(0x3a, gbc.readMem(0xe983));
        // 3A 00F2
        gbc.setState(0xd0c6, 0x8599, 0xde00, 0x5509, 0xcd4b, 0x8d42, 0x1, 0x0);
        gbc.writeMem(0x8d42, { 0x6 });
        gbc.writeMem(0xd0c6, { 0x3a });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x8599, gbc.sp());
        EXPECT(0xd0c7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6, gbc.readMem(0x8d42));
        EXPECT(0x3a, gbc.readMem(0xd0c6));
        // 3A 00F3
        gbc.setState(0xbea2, 0x864a, 0xce0, 0xb74, 0x12e2, 0x3010, 0x0, 0x1);
        gbc.writeMem(0x3010, { 0xa5 });
        gbc.writeMem(0xbea2, { 0x3a });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x864a, gbc.sp());
        EXPECT(0xbea3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbea2));
        // 3A 00F4
        gbc.setState(0xafaa, 0xc7a3, 0x8da0, 0x4c9c, 0xee92, 0x8b48, 0x1, 0x0);
        gbc.writeMem(0x8b48, { 0x20 });
        gbc.writeMem(0xafaa, { 0x3a });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0xc7a3, gbc.sp());
        EXPECT(0xafab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x20, gbc.readMem(0x8b48));
        EXPECT(0x3a, gbc.readMem(0xafaa));
        // 3A 00F5
        gbc.setState(0x836b, 0x7587, 0x0, 0x362a, 0xfba6, 0xeb4e, 0x1, 0x1);
        gbc.writeMem(0x836b, { 0x3a });
        gbc.writeMem(0xeb4e, { 0xa5 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x7587, gbc.sp());
        EXPECT(0x836c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x836b));
        EXPECT(0xa5, gbc.readMem(0xeb4e));
        // 3A 00F6
        gbc.setState(0x11f9, 0xb2b3, 0xed10, 0x4fa8, 0xf0c7, 0xcd15, 0x0, 0x1);
        gbc.writeMem(0x11f9, { 0x3a });
        gbc.writeMem(0xcd15, { 0x66 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xb2b3, gbc.sp());
        EXPECT(0x11fa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x66, gbc.readMem(0xcd15));
        // 3A 00F7
        gbc.setState(0xe862, 0xe38e, 0xf220, 0x1415, 0x27be, 0xde93, 0x0, 0x1);
        gbc.writeMem(0xde93, { 0x3d });
        gbc.writeMem(0xe862, { 0x3a });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xe38e, gbc.sp());
        EXPECT(0xe863, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3d, gbc.readMem(0xde93));
        EXPECT(0x3a, gbc.readMem(0xe862));
        // 3A 00F8
        gbc.setState(0xce6c, 0x53bc, 0xadb0, 0x129c, 0x5ae, 0xf674, 0x1, 0x0);
        gbc.writeMem(0xce6c, { 0x3a });
        gbc.writeMem(0xf674, { 0x83 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x53bc, gbc.sp());
        EXPECT(0xce6d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xce6c));
        EXPECT(0x83, gbc.readMem(0xf674));
        // 3A 00FA
        gbc.setState(0x6863, 0xc25, 0x53f0, 0xa80, 0xdc, 0x7a8d, 0x1, 0x0);
        gbc.writeMem(0x6863, { 0x3a });
        gbc.writeMem(0x7a8d, { 0x17 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xc25, gbc.sp());
        EXPECT(0x6864, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 00FB
        gbc.setState(0x52cd, 0xbdb, 0x16e0, 0x2b87, 0xaaa, 0x5c9f, 0x0, 0x0);
        gbc.writeMem(0x52cd, { 0x3a });
        gbc.writeMem(0x5c9f, { 0xa });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xbdb, gbc.sp());
        EXPECT(0x52ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 00FC
        gbc.setState(0xbfd3, 0xe6a3, 0xa4c0, 0x4092, 0xb501, 0x39aa, 0x0, 0x1);
        gbc.writeMem(0x39aa, { 0x95 });
        gbc.writeMem(0xbfd3, { 0x3a });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xe6a3, gbc.sp());
        EXPECT(0xbfd4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbfd3));
        // 3A 00FD
        gbc.setState(0x753b, 0x1334, 0x7b00, 0x7534, 0x797b, 0x6e42, 0x0, 0x1);
        gbc.writeMem(0x6e42, { 0x96 });
        gbc.writeMem(0x753b, { 0x3a });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x1334, gbc.sp());
        EXPECT(0x753c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 00FE
        gbc.setState(0x425d, 0x5851, 0xfe60, 0xfd86, 0x9d7d, 0x14b1, 0x1, 0x1);
        gbc.writeMem(0x14b1, { 0x57 });
        gbc.writeMem(0x425d, { 0x3a });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x5851, gbc.sp());
        EXPECT(0x425e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 00FF
        gbc.setState(0x66cb, 0x4acb, 0x13f0, 0xe224, 0xbfc7, 0x4da, 0x1, 0x1);
        gbc.writeMem(0x4da, { 0x77 });
        gbc.writeMem(0x66cb, { 0x3a });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x4acb, gbc.sp());
        EXPECT(0x66cc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0100
        gbc.setState(0xcfbb, 0x89d1, 0x4db0, 0xd809, 0x5a41, 0x454, 0x1, 0x1);
        gbc.writeMem(0x454, { 0x44 });
        gbc.writeMem(0xcfbb, { 0x3a });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x89d1, gbc.sp());
        EXPECT(0xcfbc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xcfbb));
        // 3A 0101
        gbc.setState(0x3e8, 0xfd14, 0xdd20, 0xa7c4, 0x5dbc, 0x9cd5, 0x0, 0x0);
        gbc.writeMem(0x3e8, { 0x3a });
        gbc.writeMem(0x9cd5, { 0x6b });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0xfd14, gbc.sp());
        EXPECT(0x3e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6b, gbc.readMem(0x9cd5));
        // 3A 0102
        gbc.setState(0xac07, 0x32c8, 0x95d0, 0x3ecc, 0x32f8, 0xef9a, 0x1, 0x0);
        gbc.writeMem(0xac07, { 0x3a });
        gbc.writeMem(0xef9a, { 0xfd });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x32c8, gbc.sp());
        EXPECT(0xac08, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xac07));
        EXPECT(0xfd, gbc.readMem(0xef9a));
        // 3A 0103
        gbc.setState(0xad05, 0x7129, 0x2060, 0x2117, 0x8f9a, 0x862, 0x1, 0x1);
        gbc.writeMem(0x862, { 0x99 });
        gbc.writeMem(0xad05, { 0x3a });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x7129, gbc.sp());
        EXPECT(0xad06, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xad05));
        // 3A 0104
        gbc.setState(0x8df3, 0xc6ed, 0x3b60, 0x8eff, 0xc0c6, 0x54cc, 0x1, 0x1);
        gbc.writeMem(0x54cc, { 0x5f });
        gbc.writeMem(0x8df3, { 0x3a });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xc6ed, gbc.sp());
        EXPECT(0x8df4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8df3));
        // 3A 0105
        gbc.setState(0x444a, 0x3394, 0x99a0, 0x35, 0x6f01, 0xfd52, 0x0, 0x1);
        gbc.writeMem(0x444a, { 0x3a });
        gbc.writeMem(0xfd52, { 0xa6 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x3394, gbc.sp());
        EXPECT(0x444b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa6, gbc.readMem(0xfd52));
        // 3A 0106
        gbc.setState(0xbee4, 0x202b, 0xa6f0, 0x5b7f, 0xc2fd, 0xde01, 0x0, 0x1);
        gbc.writeMem(0xbee4, { 0x3a });
        gbc.writeMem(0xde01, { 0xbe });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x202b, gbc.sp());
        EXPECT(0xbee5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbee4));
        EXPECT(0xbe, gbc.readMem(0xde01));
        // 3A 0107
        gbc.setState(0x2174, 0x3375, 0xa030, 0x525e, 0x3510, 0x2e78, 0x0, 0x1);
        gbc.writeMem(0x2174, { 0x3a });
        gbc.writeMem(0x2e78, { 0x98 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x3375, gbc.sp());
        EXPECT(0x2175, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0108
        gbc.setState(0x9e85, 0x1115, 0x41f0, 0x75f0, 0xde2, 0xe3c2, 0x0, 0x0);
        gbc.writeMem(0x9e85, { 0x3a });
        gbc.writeMem(0xe3c2, { 0x1d });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x1115, gbc.sp());
        EXPECT(0x9e86, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9e85));
        EXPECT(0x1d, gbc.readMem(0xe3c2));
        // 3A 0109
        gbc.setState(0x4a57, 0x6958, 0xb380, 0xc91a, 0x49f0, 0x1d9d, 0x1, 0x0);
        gbc.writeMem(0x1d9d, { 0x65 });
        gbc.writeMem(0x4a57, { 0x3a });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x6958, gbc.sp());
        EXPECT(0x4a58, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 010A
        gbc.setState(0x3052, 0x1e81, 0x2000, 0x465d, 0x9b93, 0x9f84, 0x0, 0x0);
        gbc.writeMem(0x3052, { 0x3a });
        gbc.writeMem(0x9f84, { 0x57 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x1e81, gbc.sp());
        EXPECT(0x3053, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x57, gbc.readMem(0x9f84));
        // 3A 010B
        gbc.setState(0x6d53, 0xb958, 0x8290, 0x9b40, 0x83f, 0x8552, 0x0, 0x0);
        gbc.writeMem(0x6d53, { 0x3a });
        gbc.writeMem(0x8552, { 0xb4 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xb958, gbc.sp());
        EXPECT(0x6d54, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb4, gbc.readMem(0x8552));
        // 3A 010C
        gbc.setState(0xea34, 0xd8d6, 0x36e0, 0xffc5, 0xc827, 0x2f78, 0x0, 0x0);
        gbc.writeMem(0x2f78, { 0x21 });
        gbc.writeMem(0xea34, { 0x3a });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xd8d6, gbc.sp());
        EXPECT(0xea35, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xea34));
        // 3A 010D
        gbc.setState(0xa684, 0xc0ea, 0xb970, 0x9bd2, 0x2110, 0x89d3, 0x0, 0x0);
        gbc.writeMem(0x89d3, { 0x20 });
        gbc.writeMem(0xa684, { 0x3a });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xc0ea, gbc.sp());
        EXPECT(0xa685, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x20, gbc.readMem(0x89d3));
        EXPECT(0x3a, gbc.readMem(0xa684));
        // 3A 010F
        gbc.setState(0xc994, 0x1099, 0xe7b0, 0xccda, 0xe603, 0x1225, 0x0, 0x0);
        gbc.writeMem(0x1225, { 0xd1 });
        gbc.writeMem(0xc994, { 0x3a });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x1099, gbc.sp());
        EXPECT(0xc995, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc994));
        // 3A 0110
        gbc.setState(0x5c71, 0x2569, 0xde30, 0x372e, 0x9be, 0x5a5c, 0x0, 0x0);
        gbc.writeMem(0x5a5c, { 0xb8 });
        gbc.writeMem(0x5c71, { 0x3a });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x2569, gbc.sp());
        EXPECT(0x5c72, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0111
        gbc.setState(0xa994, 0x8561, 0x1ba0, 0x13a2, 0xed49, 0xafce, 0x0, 0x0);
        gbc.writeMem(0xa994, { 0x3a });
        gbc.writeMem(0xafce, { 0x7d });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x8561, gbc.sp());
        EXPECT(0xa995, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa994));
        EXPECT(0x7d, gbc.readMem(0xafce));
        // 3A 0112
        gbc.setState(0x3bc, 0xa329, 0x2640, 0xf69f, 0x1906, 0x9a9, 0x1, 0x0);
        gbc.writeMem(0x3bc, { 0x3a });
        gbc.writeMem(0x9a9, { 0xc3 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xa329, gbc.sp());
        EXPECT(0x3bd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0113
        gbc.setState(0x46d4, 0xbc13, 0x95c0, 0x9d90, 0x2d7e, 0xc476, 0x1, 0x0);
        gbc.writeMem(0x46d4, { 0x3a });
        gbc.writeMem(0xc476, { 0xc0 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xbc13, gbc.sp());
        EXPECT(0x46d5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc0, gbc.readMem(0xc476));
        // 3A 0114
        gbc.setState(0x6de4, 0x5184, 0x4af0, 0x32a6, 0x5f13, 0xbb9f, 0x1, 0x1);
        gbc.writeMem(0x6de4, { 0x3a });
        gbc.writeMem(0xbb9f, { 0xd1 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x5184, gbc.sp());
        EXPECT(0x6de5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd1, gbc.readMem(0xbb9f));
        // 3A 0115
        gbc.setState(0x9b8c, 0xdf0f, 0x2b40, 0x47e5, 0x69ee, 0xc368, 0x0, 0x0);
        gbc.writeMem(0x9b8c, { 0x3a });
        gbc.writeMem(0xc368, { 0xea });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xdf0f, gbc.sp());
        EXPECT(0x9b8d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9b8c));
        EXPECT(0xea, gbc.readMem(0xc368));
        // 3A 0116
        gbc.setState(0xa7f8, 0x6645, 0x5180, 0xaf85, 0x9c8e, 0x74d4, 0x0, 0x0);
        gbc.writeMem(0x74d4, { 0xcb });
        gbc.writeMem(0xa7f8, { 0x3a });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x6645, gbc.sp());
        EXPECT(0xa7f9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa7f8));
        // 3A 0117
        gbc.setState(0x9d34, 0x4916, 0xa450, 0x2a09, 0x307e, 0x338, 0x1, 0x0);
        gbc.writeMem(0x338, { 0xb4 });
        gbc.writeMem(0x9d34, { 0x3a });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x4916, gbc.sp());
        EXPECT(0x9d35, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9d34));
        // 3A 0119
        gbc.setState(0x4713, 0x8955, 0x2590, 0x4b20, 0xef5, 0x44db, 0x1, 0x0);
        gbc.writeMem(0x44db, { 0x3b });
        gbc.writeMem(0x4713, { 0x3a });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x8955, gbc.sp());
        EXPECT(0x4714, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 011A
        gbc.setState(0x1995, 0x8b90, 0xa3f0, 0x5467, 0x4cfc, 0x9856, 0x0, 0x1);
        gbc.writeMem(0x1995, { 0x3a });
        gbc.writeMem(0x9856, { 0x8f });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x8b90, gbc.sp());
        EXPECT(0x1996, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8f, gbc.readMem(0x9856));
        // 3A 011B
        gbc.setState(0x409a, 0xd799, 0x7d40, 0x78e5, 0xc887, 0xeb05, 0x0, 0x1);
        gbc.writeMem(0x409a, { 0x3a });
        gbc.writeMem(0xeb05, { 0xb4 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xd799, gbc.sp());
        EXPECT(0x409b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb4, gbc.readMem(0xeb05));
        // 3A 011C
        gbc.setState(0x120d, 0x4807, 0x1860, 0x45bf, 0x1c38, 0xe75b, 0x0, 0x0);
        gbc.writeMem(0x120d, { 0x3a });
        gbc.writeMem(0xe75b, { 0xcc });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x4807, gbc.sp());
        EXPECT(0x120e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcc, gbc.readMem(0xe75b));
        // 3A 011D
        gbc.setState(0x227f, 0x6798, 0x3520, 0xc7a9, 0x7a1b, 0xeb80, 0x1, 0x0);
        gbc.writeMem(0x227f, { 0x3a });
        gbc.writeMem(0xeb80, { 0xc4 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x6798, gbc.sp());
        EXPECT(0x2280, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc4, gbc.readMem(0xeb80));
        // 3A 011E
        gbc.setState(0x55b9, 0xf369, 0x8110, 0x58da, 0x52f1, 0x97a2, 0x1, 0x1);
        gbc.writeMem(0x55b9, { 0x3a });
        gbc.writeMem(0x97a2, { 0x5 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xf369, gbc.sp());
        EXPECT(0x55ba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5, gbc.readMem(0x97a2));
        // 3A 011F
        gbc.setState(0x5b2d, 0x97ed, 0x9820, 0x7b16, 0x64aa, 0xc3d2, 0x0, 0x1);
        gbc.writeMem(0x5b2d, { 0x3a });
        gbc.writeMem(0xc3d2, { 0x81 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x97ed, gbc.sp());
        EXPECT(0x5b2e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x81, gbc.readMem(0xc3d2));
        // 3A 0120
        gbc.setState(0x2856, 0xbd39, 0x9a50, 0x92bc, 0xc38d, 0x890e, 0x1, 0x1);
        gbc.writeMem(0x2856, { 0x3a });
        gbc.writeMem(0x890e, { 0x42 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0xbd39, gbc.sp());
        EXPECT(0x2857, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x42, gbc.readMem(0x890e));
        // 3A 0121
        gbc.setState(0x9d50, 0x2e81, 0xb840, 0xb4d2, 0x4ca7, 0xb962, 0x1, 0x1);
        gbc.writeMem(0x9d50, { 0x3a });
        gbc.writeMem(0xb962, { 0x66 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x2e81, gbc.sp());
        EXPECT(0x9d51, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9d50));
        EXPECT(0x66, gbc.readMem(0xb962));
        // 3A 0122
        gbc.setState(0x9bd7, 0xefe0, 0xdba0, 0x3b86, 0x93e4, 0xa18c, 0x1, 0x1);
        gbc.writeMem(0x9bd7, { 0x3a });
        gbc.writeMem(0xa18c, { 0x68 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xefe0, gbc.sp());
        EXPECT(0x9bd8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9bd7));
        EXPECT(0x68, gbc.readMem(0xa18c));
        // 3A 0123
        gbc.setState(0x9f1f, 0xf317, 0xdf10, 0xdb55, 0x73d, 0x239a, 0x0, 0x1);
        gbc.writeMem(0x239a, { 0xef });
        gbc.writeMem(0x9f1f, { 0x3a });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xf317, gbc.sp());
        EXPECT(0x9f20, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9f1f));
        // 3A 0124
        gbc.setState(0x24ff, 0x5b85, 0x77b0, 0xb31a, 0x513f, 0x5ba7, 0x0, 0x0);
        gbc.writeMem(0x24ff, { 0x3a });
        gbc.writeMem(0x5ba7, { 0xc0 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x5b85, gbc.sp());
        EXPECT(0x2500, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0125
        gbc.setState(0x7a14, 0x2c33, 0x4a20, 0xca1d, 0xd6ea, 0xe74e, 0x1, 0x1);
        gbc.writeMem(0x7a14, { 0x3a });
        gbc.writeMem(0xe74e, { 0x11 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x2c33, gbc.sp());
        EXPECT(0x7a15, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x11, gbc.readMem(0xe74e));
        // 3A 0126
        gbc.setState(0x37bf, 0xcc66, 0x7a00, 0x70b3, 0x70e3, 0xa091, 0x1, 0x1);
        gbc.writeMem(0x37bf, { 0x3a });
        gbc.writeMem(0xa091, { 0xc4 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0xcc66, gbc.sp());
        EXPECT(0x37c0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc4, gbc.readMem(0xa091));
        // 3A 0127
        gbc.setState(0xc7b1, 0x830a, 0xb9b0, 0x41d, 0xe87f, 0xca0f, 0x1, 0x1);
        gbc.writeMem(0xc7b1, { 0x3a });
        gbc.writeMem(0xca0f, { 0x4f });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x830a, gbc.sp());
        EXPECT(0xc7b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc7b1));
        EXPECT(0x4f, gbc.readMem(0xca0f));
        // 3A 0128
        gbc.setState(0x1668, 0xa6fd, 0xa260, 0x561b, 0xaf71, 0x872, 0x0, 0x0);
        gbc.writeMem(0x872, { 0xf1 });
        gbc.writeMem(0x1668, { 0x3a });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xa6fd, gbc.sp());
        EXPECT(0x1669, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0129
        gbc.setState(0xcdb6, 0x96c3, 0x8fa0, 0xbc99, 0xf3fd, 0xc44e, 0x0, 0x0);
        gbc.writeMem(0xc44e, { 0xfb });
        gbc.writeMem(0xcdb6, { 0x3a });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x96c3, gbc.sp());
        EXPECT(0xcdb7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xfb, gbc.readMem(0xc44e));
        EXPECT(0x3a, gbc.readMem(0xcdb6));
        // 3A 012A
        gbc.setState(0x8c82, 0x875a, 0x60c0, 0x51e7, 0xc234, 0xdd46, 0x0, 0x0);
        gbc.writeMem(0x8c82, { 0x3a });
        gbc.writeMem(0xdd46, { 0x73 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x875a, gbc.sp());
        EXPECT(0x8c83, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8c82));
        EXPECT(0x73, gbc.readMem(0xdd46));
        // 3A 012B
        gbc.setState(0x99c2, 0x1a68, 0xf8e0, 0x8efa, 0xfef1, 0xe268, 0x1, 0x1);
        gbc.writeMem(0x99c2, { 0x3a });
        gbc.writeMem(0xe268, { 0x17 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x1a68, gbc.sp());
        EXPECT(0x99c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x99c2));
        EXPECT(0x17, gbc.readMem(0xe268));
        // 3A 012C
        gbc.setState(0xba25, 0x8cfa, 0xd90, 0xd730, 0x3365, 0xab59, 0x1, 0x0);
        gbc.writeMem(0xab59, { 0xe5 });
        gbc.writeMem(0xba25, { 0x3a });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x8cfa, gbc.sp());
        EXPECT(0xba26, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe5, gbc.readMem(0xab59));
        EXPECT(0x3a, gbc.readMem(0xba25));
        // 3A 012E
        gbc.setState(0x1f88, 0x3d16, 0x2420, 0xfafa, 0x1c26, 0x6dcd, 0x0, 0x1);
        gbc.writeMem(0x1f88, { 0x3a });
        gbc.writeMem(0x6dcd, { 0x70 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x3d16, gbc.sp());
        EXPECT(0x1f89, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 012F
        gbc.setState(0x522c, 0x9e5a, 0xe40, 0x851a, 0xc907, 0xe701, 0x0, 0x1);
        gbc.writeMem(0x522c, { 0x3a });
        gbc.writeMem(0xe701, { 0x72 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x9e5a, gbc.sp());
        EXPECT(0x522d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x72, gbc.readMem(0xe701));
        // 3A 0131
        gbc.setState(0xc1db, 0x2498, 0x180, 0x9a34, 0xefc6, 0x3c26, 0x0, 0x1);
        gbc.writeMem(0x3c26, { 0x67 });
        gbc.writeMem(0xc1db, { 0x3a });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x2498, gbc.sp());
        EXPECT(0xc1dc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc1db));
        // 3A 0132
        gbc.setState(0x3055, 0x7860, 0x7e00, 0x2e75, 0x7a25, 0x6533, 0x0, 0x1);
        gbc.writeMem(0x3055, { 0x3a });
        gbc.writeMem(0x6533, { 0xb9 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x7860, gbc.sp());
        EXPECT(0x3056, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0133
        gbc.setState(0x6612, 0x84c7, 0x4a30, 0xb807, 0x9877, 0xb957, 0x0, 0x0);
        gbc.writeMem(0x6612, { 0x3a });
        gbc.writeMem(0xb957, { 0x96 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x84c7, gbc.sp());
        EXPECT(0x6613, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x96, gbc.readMem(0xb957));
        // 3A 0134
        gbc.setState(0x5e7d, 0xe4b8, 0x65b0, 0x4a93, 0x32c9, 0x2e79, 0x1, 0x1);
        gbc.writeMem(0x2e79, { 0xf6 });
        gbc.writeMem(0x5e7d, { 0x3a });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0xe4b8, gbc.sp());
        EXPECT(0x5e7e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0135
        gbc.setState(0xdb1b, 0xf6cf, 0x66c0, 0x9aba, 0x2b6f, 0xfc8e, 0x0, 0x1);
        gbc.writeMem(0xdb1b, { 0x3a });
        gbc.writeMem(0xfc8e, { 0x35 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xf6cf, gbc.sp());
        EXPECT(0xdb1c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xdb1b));
        EXPECT(0x35, gbc.readMem(0xfc8e));
        // 3A 0136
        gbc.setState(0xacbe, 0x31ec, 0x48b0, 0x5a27, 0x71a7, 0xf9d4, 0x1, 0x1);
        gbc.writeMem(0xacbe, { 0x3a });
        gbc.writeMem(0xf9d4, { 0xad });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x31ec, gbc.sp());
        EXPECT(0xacbf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xacbe));
        EXPECT(0xad, gbc.readMem(0xf9d4));
        // 3A 0137
        gbc.setState(0xaddc, 0x795f, 0xb530, 0x4f47, 0xbd45, 0x7d7a, 0x0, 0x1);
        gbc.writeMem(0x7d7a, { 0x74 });
        gbc.writeMem(0xaddc, { 0x3a });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x795f, gbc.sp());
        EXPECT(0xaddd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xaddc));
        // 3A 0138
        gbc.setState(0xc771, 0x821f, 0xb5a0, 0x5f43, 0xe9a4, 0xeebf, 0x0, 0x1);
        gbc.writeMem(0xc771, { 0x3a });
        gbc.writeMem(0xeebf, { 0x94 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x821f, gbc.sp());
        EXPECT(0xc772, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc771));
        EXPECT(0x94, gbc.readMem(0xeebf));
        // 3A 0139
        gbc.setState(0x254b, 0x2960, 0x15a0, 0x9ce, 0x6b34, 0x5f4a, 0x1, 0x0);
        gbc.writeMem(0x254b, { 0x3a });
        gbc.writeMem(0x5f4a, { 0x7c });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x2960, gbc.sp());
        EXPECT(0x254c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 013A
        gbc.setState(0x2fd4, 0x7efa, 0x2f50, 0x7714, 0x9b69, 0xaf66, 0x1, 0x1);
        gbc.writeMem(0x2fd4, { 0x3a });
        gbc.writeMem(0xaf66, { 0x41 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x7efa, gbc.sp());
        EXPECT(0x2fd5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x41, gbc.readMem(0xaf66));
        // 3A 013B
        gbc.setState(0x3dfc, 0xd6fa, 0xd860, 0x8ea1, 0x43f8, 0x1151, 0x0, 0x0);
        gbc.writeMem(0x1151, { 0xc9 });
        gbc.writeMem(0x3dfc, { 0x3a });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xd6fa, gbc.sp());
        EXPECT(0x3dfd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 013C
        gbc.setState(0xbeaa, 0xfa8, 0xa500, 0x16a9, 0x26d6, 0x12c, 0x1, 0x1);
        gbc.writeMem(0x12c, { 0x81 });
        gbc.writeMem(0xbeaa, { 0x3a });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xfa8, gbc.sp());
        EXPECT(0xbeab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbeaa));
        // 3A 013D
        gbc.setState(0xd45e, 0x64b9, 0x8f30, 0x42db, 0x3d36, 0xcbc8, 0x0, 0x0);
        gbc.writeMem(0xcbc8, { 0x8c });
        gbc.writeMem(0xd45e, { 0x3a });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x64b9, gbc.sp());
        EXPECT(0xd45f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8c, gbc.readMem(0xcbc8));
        EXPECT(0x3a, gbc.readMem(0xd45e));
        // 3A 013E
        gbc.setState(0xec46, 0x4a9e, 0xe7b0, 0x1b5, 0x3856, 0x6a14, 0x1, 0x1);
        gbc.writeMem(0x6a14, { 0x76 });
        gbc.writeMem(0xec46, { 0x3a });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x4a9e, gbc.sp());
        EXPECT(0xec47, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xec46));
        // 3A 013F
        gbc.setState(0x20a1, 0x1b2a, 0x2a90, 0x296d, 0x33c9, 0x4276, 0x1, 0x0);
        gbc.writeMem(0x20a1, { 0x3a });
        gbc.writeMem(0x4276, { 0x42 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x1b2a, gbc.sp());
        EXPECT(0x20a2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0140
        gbc.setState(0x7264, 0xfda9, 0xc250, 0xc42c, 0xe194, 0x343, 0x1, 0x0);
        gbc.writeMem(0x343, { 0x37 });
        gbc.writeMem(0x7264, { 0x3a });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xfda9, gbc.sp());
        EXPECT(0x7265, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0141
        gbc.setState(0x2ae2, 0xa632, 0x4e00, 0x29ab, 0x2deb, 0x7b9a, 0x1, 0x0);
        gbc.writeMem(0x2ae2, { 0x3a });
        gbc.writeMem(0x7b9a, { 0x14 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xa632, gbc.sp());
        EXPECT(0x2ae3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0142
        gbc.setState(0xba5a, 0xb23d, 0x870, 0x2b47, 0xba28, 0x4c83, 0x0, 0x0);
        gbc.writeMem(0x4c83, { 0xc });
        gbc.writeMem(0xba5a, { 0x3a });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xb23d, gbc.sp());
        EXPECT(0xba5b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xba5a));
        // 3A 0143
        gbc.setState(0x5a76, 0x4db9, 0x2fe0, 0x5acf, 0x5b33, 0xadc2, 0x1, 0x0);
        gbc.writeMem(0x5a76, { 0x3a });
        gbc.writeMem(0xadc2, { 0xd9 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x4db9, gbc.sp());
        EXPECT(0x5a77, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd9, gbc.readMem(0xadc2));
        // 3A 0144
        gbc.setState(0x8035, 0x9b7, 0x7a30, 0x1d85, 0x8471, 0x8485, 0x0, 0x0);
        gbc.writeMem(0x8035, { 0x3a });
        gbc.writeMem(0x8485, { 0x4b });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x9b7, gbc.sp());
        EXPECT(0x8036, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8035));
        EXPECT(0x4b, gbc.readMem(0x8485));
        // 3A 0145
        gbc.setState(0xddec, 0x3e64, 0xb630, 0x1db1, 0x43d0, 0x4d1, 0x0, 0x0);
        gbc.writeMem(0x4d1, { 0xf9 });
        gbc.writeMem(0xddec, { 0x3a });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x3e64, gbc.sp());
        EXPECT(0xdded, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xddec));
        // 3A 0146
        gbc.setState(0x2cf4, 0xa0a, 0x75d0, 0x9e4c, 0xe531, 0xad8e, 0x1, 0x0);
        gbc.writeMem(0x2cf4, { 0x3a });
        gbc.writeMem(0xad8e, { 0xdd });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xa0a, gbc.sp());
        EXPECT(0x2cf5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xdd, gbc.readMem(0xad8e));
        // 3A 0147
        gbc.setState(0x508a, 0x2990, 0xf4c0, 0x783, 0xa9f6, 0x23b9, 0x1, 0x1);
        gbc.writeMem(0x23b9, { 0xc8 });
        gbc.writeMem(0x508a, { 0x3a });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x2990, gbc.sp());
        EXPECT(0x508b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0148
        gbc.setState(0xd69c, 0x6df0, 0x8e20, 0xd279, 0x5ed2, 0x9425, 0x0, 0x1);
        gbc.writeMem(0x9425, { 0x84 });
        gbc.writeMem(0xd69c, { 0x3a });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x6df0, gbc.sp());
        EXPECT(0xd69d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x84, gbc.readMem(0x9425));
        EXPECT(0x3a, gbc.readMem(0xd69c));
        // 3A 0149
        gbc.setState(0x1a63, 0x37ff, 0xa1c0, 0x7689, 0xae80, 0x97e4, 0x1, 0x1);
        gbc.writeMem(0x1a63, { 0x3a });
        gbc.writeMem(0x97e4, { 0x75 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x37ff, gbc.sp());
        EXPECT(0x1a64, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x75, gbc.readMem(0x97e4));
        // 3A 014A
        gbc.setState(0xc9a, 0xef8, 0xf450, 0xfd16, 0xce1, 0x9c5f, 0x0, 0x0);
        gbc.writeMem(0xc9a, { 0x3a });
        gbc.writeMem(0x9c5f, { 0x8 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xef8, gbc.sp());
        EXPECT(0xc9b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8, gbc.readMem(0x9c5f));
        // 3A 014B
        gbc.setState(0xdc01, 0xfe54, 0x6f00, 0x4b62, 0x12ad, 0x5078, 0x1, 0x0);
        gbc.writeMem(0x5078, { 0x10 });
        gbc.writeMem(0xdc01, { 0x3a });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xfe54, gbc.sp());
        EXPECT(0xdc02, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xdc01));
        // 3A 014C
        gbc.setState(0x213d, 0xc5a3, 0xef10, 0xc3dd, 0x9395, 0x8ad2, 0x1, 0x1);
        gbc.writeMem(0x213d, { 0x3a });
        gbc.writeMem(0x8ad2, { 0xc3 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xc5a3, gbc.sp());
        EXPECT(0x213e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc3, gbc.readMem(0x8ad2));
        // 3A 014D
        gbc.setState(0x1b0f, 0x31f8, 0x3c80, 0x71cc, 0x8162, 0x2ff4, 0x1, 0x0);
        gbc.writeMem(0x1b0f, { 0x3a });
        gbc.writeMem(0x2ff4, { 0x8f });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x31f8, gbc.sp());
        EXPECT(0x1b10, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 014E
        gbc.setState(0x6050, 0x2569, 0x2350, 0x8a05, 0xa8f8, 0xa3fd, 0x1, 0x0);
        gbc.writeMem(0x6050, { 0x3a });
        gbc.writeMem(0xa3fd, { 0x4b });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x2569, gbc.sp());
        EXPECT(0x6051, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4b, gbc.readMem(0xa3fd));
        // 3A 014F
        gbc.setState(0x9138, 0x8d28, 0x9c60, 0xdc08, 0x110c, 0xa3a3, 0x1, 0x1);
        gbc.writeMem(0x9138, { 0x3a });
        gbc.writeMem(0xa3a3, { 0x5 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x8d28, gbc.sp());
        EXPECT(0x9139, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9138));
        EXPECT(0x5, gbc.readMem(0xa3a3));
        // 3A 0151
        gbc.setState(0xdac0, 0x64ff, 0x3b80, 0xa8de, 0x111d, 0x5420, 0x1, 0x1);
        gbc.writeMem(0x5420, { 0xd5 });
        gbc.writeMem(0xdac0, { 0x3a });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x64ff, gbc.sp());
        EXPECT(0xdac1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xdac0));
        // 3A 0152
        gbc.setState(0xbcf, 0x4e56, 0x5ac0, 0xb614, 0xad82, 0x2df5, 0x1, 0x1);
        gbc.writeMem(0xbcf, { 0x3a });
        gbc.writeMem(0x2df5, { 0xba });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x4e56, gbc.sp());
        EXPECT(0xbd0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0153
        gbc.setState(0x932a, 0x3dbe, 0x1560, 0xfbfa, 0x88d1, 0xeee8, 0x0, 0x0);
        gbc.writeMem(0x932a, { 0x3a });
        gbc.writeMem(0xeee8, { 0xab });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x3dbe, gbc.sp());
        EXPECT(0x932b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x932a));
        EXPECT(0xab, gbc.readMem(0xeee8));
        // 3A 0154
        gbc.setState(0xabde, 0xb100, 0xc6e0, 0xe0fd, 0x4867, 0xb062, 0x1, 0x0);
        gbc.writeMem(0xabde, { 0x3a });
        gbc.writeMem(0xb062, { 0x14 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xb100, gbc.sp());
        EXPECT(0xabdf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xabde));
        EXPECT(0x14, gbc.readMem(0xb062));
        // 3A 0155
        gbc.setState(0x2490, 0x2184, 0xfc60, 0x2ca5, 0x9dd8, 0xa91d, 0x1, 0x1);
        gbc.writeMem(0x2490, { 0x3a });
        gbc.writeMem(0xa91d, { 0x1a });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x2184, gbc.sp());
        EXPECT(0x2491, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1a, gbc.readMem(0xa91d));
        // 3A 0157
        gbc.setState(0xb4ea, 0xd67e, 0xe0b0, 0xa684, 0x5816, 0xfef6, 0x0, 0x0);
        gbc.writeMem(0xb4ea, { 0x3a });
        gbc.writeMem(0xfef6, { 0x67 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xd67e, gbc.sp());
        EXPECT(0xb4eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb4ea));
        EXPECT(0x67, gbc.readMem(0xfef6));
        // 3A 0158
        gbc.setState(0xce21, 0x138e, 0x40f0, 0xb89c, 0xda13, 0xf2c1, 0x1, 0x1);
        gbc.writeMem(0xce21, { 0x3a });
        gbc.writeMem(0xf2c1, { 0xec });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x138e, gbc.sp());
        EXPECT(0xce22, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xce21));
        EXPECT(0xec, gbc.readMem(0xf2c1));
        // 3A 0159
        gbc.setState(0xcd79, 0xd559, 0x21c0, 0x66bf, 0x3a05, 0x68a3, 0x0, 0x0);
        gbc.writeMem(0x68a3, { 0x18 });
        gbc.writeMem(0xcd79, { 0x3a });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xd559, gbc.sp());
        EXPECT(0xcd7a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xcd79));
        // 3A 015A
        gbc.setState(0x7153, 0xc169, 0xb290, 0xe8cd, 0x2a62, 0xc87b, 0x1, 0x0);
        gbc.writeMem(0x7153, { 0x3a });
        gbc.writeMem(0xc87b, { 0xe1 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0xc169, gbc.sp());
        EXPECT(0x7154, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe1, gbc.readMem(0xc87b));
        // 3A 015B
        gbc.setState(0x3089, 0xa7d1, 0x9270, 0x26ea, 0x8adb, 0xa7a5, 0x0, 0x0);
        gbc.writeMem(0x3089, { 0x3a });
        gbc.writeMem(0xa7a5, { 0x8f });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xa7d1, gbc.sp());
        EXPECT(0x308a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8f, gbc.readMem(0xa7a5));
        // 3A 015C
        gbc.setState(0xaf44, 0x34af, 0xb790, 0xcfdd, 0xbf5, 0x1beb, 0x0, 0x0);
        gbc.writeMem(0x1beb, { 0x2b });
        gbc.writeMem(0xaf44, { 0x3a });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x34af, gbc.sp());
        EXPECT(0xaf45, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xaf44));
        // 3A 015D
        gbc.setState(0x3a4b, 0xdea, 0x1010, 0x4145, 0x92a6, 0x1160, 0x0, 0x0);
        gbc.writeMem(0x1160, { 0xee });
        gbc.writeMem(0x3a4b, { 0x3a });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xdea, gbc.sp());
        EXPECT(0x3a4c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 015E
        gbc.setState(0xce5a, 0xb541, 0xd830, 0xb91f, 0xee76, 0x362, 0x1, 0x1);
        gbc.writeMem(0x362, { 0x25 });
        gbc.writeMem(0xce5a, { 0x3a });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xb541, gbc.sp());
        EXPECT(0xce5b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xce5a));
        // 3A 015F
        gbc.setState(0x120d, 0x90a7, 0x76c0, 0xe630, 0x1ba1, 0x6869, 0x0, 0x1);
        gbc.writeMem(0x120d, { 0x3a });
        gbc.writeMem(0x6869, { 0x9f });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x90a7, gbc.sp());
        EXPECT(0x120e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0160
        gbc.setState(0x7db8, 0x848d, 0x5950, 0x1395, 0xa10, 0x897f, 0x1, 0x1);
        gbc.writeMem(0x7db8, { 0x3a });
        gbc.writeMem(0x897f, { 0x86 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x848d, gbc.sp());
        EXPECT(0x7db9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x86, gbc.readMem(0x897f));
        // 3A 0161
        gbc.setState(0x146d, 0x812a, 0xf390, 0x1f93, 0xcc55, 0xe39b, 0x0, 0x1);
        gbc.writeMem(0x146d, { 0x3a });
        gbc.writeMem(0xe39b, { 0x9b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x812a, gbc.sp());
        EXPECT(0x146e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x9b, gbc.readMem(0xe39b));
        // 3A 0162
        gbc.setState(0x7ba6, 0x68df, 0xd060, 0xbfa8, 0xe437, 0x5658, 0x1, 0x0);
        gbc.writeMem(0x5658, { 0x6c });
        gbc.writeMem(0x7ba6, { 0x3a });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x68df, gbc.sp());
        EXPECT(0x7ba7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0163
        gbc.setState(0x5f14, 0xf8ce, 0x9990, 0x2cbe, 0x2811, 0x293d, 0x1, 0x1);
        gbc.writeMem(0x293d, { 0x93 });
        gbc.writeMem(0x5f14, { 0x3a });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xf8ce, gbc.sp());
        EXPECT(0x5f15, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0164
        gbc.setState(0xe0d9, 0xb866, 0xa5f0, 0xd22b, 0xd6e1, 0x1bc1, 0x1, 0x0);
        gbc.writeMem(0x1bc1, { 0x3d });
        gbc.writeMem(0xe0d9, { 0x3a });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xb866, gbc.sp());
        EXPECT(0xe0da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xe0d9));
        // 3A 0165
        gbc.setState(0x4bcb, 0xca22, 0x6350, 0xf47a, 0x8bc5, 0x4e89, 0x0, 0x0);
        gbc.writeMem(0x4bcb, { 0x3a });
        gbc.writeMem(0x4e89, { 0x9f });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xca22, gbc.sp());
        EXPECT(0x4bcc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0166
        gbc.setState(0x5a42, 0x9eee, 0x9820, 0x33cc, 0xa594, 0xaa09, 0x1, 0x0);
        gbc.writeMem(0x5a42, { 0x3a });
        gbc.writeMem(0xaa09, { 0x56 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x9eee, gbc.sp());
        EXPECT(0x5a43, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x56, gbc.readMem(0xaa09));
        // 3A 0167
        gbc.setState(0x97da, 0x35a9, 0xb2f0, 0xa7d5, 0xaad0, 0xb390, 0x1, 0x1);
        gbc.writeMem(0x97da, { 0x3a });
        gbc.writeMem(0xb390, { 0xc1 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x35a9, gbc.sp());
        EXPECT(0x97db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x97da));
        EXPECT(0xc1, gbc.readMem(0xb390));
        // 3A 0168
        gbc.setState(0x7dc3, 0x9b26, 0x96d0, 0xad15, 0xf91, 0x61db, 0x0, 0x0);
        gbc.writeMem(0x61db, { 0xa3 });
        gbc.writeMem(0x7dc3, { 0x3a });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x9b26, gbc.sp());
        EXPECT(0x7dc4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0169
        gbc.setState(0x6a57, 0xe9e8, 0x1cc0, 0x7fd6, 0x5179, 0x9dfc, 0x1, 0x1);
        gbc.writeMem(0x6a57, { 0x3a });
        gbc.writeMem(0x9dfc, { 0xad });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xe9e8, gbc.sp());
        EXPECT(0x6a58, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xad, gbc.readMem(0x9dfc));
        // 3A 016A
        gbc.setState(0xa5eb, 0xbf11, 0xf7f0, 0xfd49, 0x317c, 0xc657, 0x0, 0x0);
        gbc.writeMem(0xa5eb, { 0x3a });
        gbc.writeMem(0xc657, { 0x96 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xbf11, gbc.sp());
        EXPECT(0xa5ec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa5eb));
        EXPECT(0x96, gbc.readMem(0xc657));
        // 3A 016B
        gbc.setState(0x425c, 0xa267, 0xf30, 0xc75c, 0x5764, 0x5899, 0x0, 0x0);
        gbc.writeMem(0x425c, { 0x3a });
        gbc.writeMem(0x5899, { 0xa9 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xa267, gbc.sp());
        EXPECT(0x425d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 016C
        gbc.setState(0x4328, 0x30d4, 0x85d0, 0x6117, 0x53b0, 0xbf6a, 0x0, 0x1);
        gbc.writeMem(0x4328, { 0x3a });
        gbc.writeMem(0xbf6a, { 0x2a });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x30d4, gbc.sp());
        EXPECT(0x4329, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2a, gbc.readMem(0xbf6a));
        // 3A 016D
        gbc.setState(0x9542, 0xbe00, 0x6f00, 0x317, 0x8e7e, 0xd477, 0x0, 0x1);
        gbc.writeMem(0x9542, { 0x3a });
        gbc.writeMem(0xd477, { 0x53 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xbe00, gbc.sp());
        EXPECT(0x9543, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9542));
        EXPECT(0x53, gbc.readMem(0xd477));
        // 3A 016E
        gbc.setState(0x6096, 0x7cef, 0xf60, 0x33de, 0x1653, 0x464a, 0x1, 0x0);
        gbc.writeMem(0x464a, { 0x97 });
        gbc.writeMem(0x6096, { 0x3a });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x7cef, gbc.sp());
        EXPECT(0x6097, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 016F
        gbc.setState(0x36b, 0x6681, 0x9ca0, 0x8cab, 0x6031, 0x87e0, 0x0, 0x1);
        gbc.writeMem(0x36b, { 0x3a });
        gbc.writeMem(0x87e0, { 0x87 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x6681, gbc.sp());
        EXPECT(0x36c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x87, gbc.readMem(0x87e0));
        // 3A 0170
        gbc.setState(0x7a07, 0x8624, 0xc360, 0x1c6e, 0x5465, 0xd1d2, 0x0, 0x1);
        gbc.writeMem(0x7a07, { 0x3a });
        gbc.writeMem(0xd1d2, { 0x37 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x8624, gbc.sp());
        EXPECT(0x7a08, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x37, gbc.readMem(0xd1d2));
        // 3A 0171
        gbc.setState(0xbd5c, 0x8745, 0x1a90, 0xe66, 0xac80, 0x7a22, 0x1, 0x0);
        gbc.writeMem(0x7a22, { 0xb6 });
        gbc.writeMem(0xbd5c, { 0x3a });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x8745, gbc.sp());
        EXPECT(0xbd5d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbd5c));
        // 3A 0172
        gbc.setState(0xdd4c, 0xabeb, 0x7410, 0x87e7, 0x7a14, 0x78ee, 0x0, 0x0);
        gbc.writeMem(0x78ee, { 0x1b });
        gbc.writeMem(0xdd4c, { 0x3a });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xabeb, gbc.sp());
        EXPECT(0xdd4d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xdd4c));
        // 3A 0173
        gbc.setState(0xa52b, 0x39b6, 0x28e0, 0x14ba, 0x39c5, 0xcd66, 0x0, 0x0);
        gbc.writeMem(0xa52b, { 0x3a });
        gbc.writeMem(0xcd66, { 0xcc });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x39b6, gbc.sp());
        EXPECT(0xa52c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa52b));
        EXPECT(0xcc, gbc.readMem(0xcd66));
        // 3A 0174
        gbc.setState(0x2631, 0x3930, 0x83e0, 0x9ad4, 0x42b5, 0x2630, 0x0, 0x0);
        gbc.writeMem(0x2630, { 0x7a, 0x3a });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x3930, gbc.sp());
        EXPECT(0x2632, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0175
        gbc.setState(0x85f5, 0x7e69, 0xcaa0, 0xdcbe, 0xd1c2, 0x5db8, 0x0, 0x0);
        gbc.writeMem(0x5db8, { 0x96 });
        gbc.writeMem(0x85f5, { 0x3a });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x7e69, gbc.sp());
        EXPECT(0x85f6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x85f5));
        // 3A 0176
        gbc.setState(0x60da, 0x3db0, 0x4940, 0xcf0d, 0xd710, 0x77e1, 0x0, 0x1);
        gbc.writeMem(0x60da, { 0x3a });
        gbc.writeMem(0x77e1, { 0x1c });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x3db0, gbc.sp());
        EXPECT(0x60db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0177
        gbc.setState(0xb9fc, 0x4a3, 0x4880, 0x12d8, 0xa90, 0xe07, 0x1, 0x1);
        gbc.writeMem(0xe07, { 0x82 });
        gbc.writeMem(0xb9fc, { 0x3a });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x4a3, gbc.sp());
        EXPECT(0xb9fd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb9fc));
        // 3A 0178
        gbc.setState(0x959b, 0x3612, 0x4f30, 0xc3e3, 0xc0f5, 0x5979, 0x1, 0x1);
        gbc.writeMem(0x5979, { 0xf3 });
        gbc.writeMem(0x959b, { 0x3a });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x3612, gbc.sp());
        EXPECT(0x959c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x959b));
        // 3A 0179
        gbc.setState(0xd8b7, 0xa594, 0xfd00, 0x97da, 0x2213, 0xe9b1, 0x0, 0x1);
        gbc.writeMem(0xd8b7, { 0x3a });
        gbc.writeMem(0xe9b1, { 0x81 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xa594, gbc.sp());
        EXPECT(0xd8b8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xd8b7));
        EXPECT(0x81, gbc.readMem(0xe9b1));
        // 3A 017A
        gbc.setState(0xb38e, 0x41f1, 0x18b0, 0x578e, 0xfdeb, 0x6930, 0x1, 0x0);
        gbc.writeMem(0x6930, { 0xa3 });
        gbc.writeMem(0xb38e, { 0x3a });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x41f1, gbc.sp());
        EXPECT(0xb38f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb38e));
        // 3A 017B
        gbc.setState(0x387d, 0xc1c, 0x4460, 0x1770, 0xe4dd, 0x6316, 0x1, 0x0);
        gbc.writeMem(0x387d, { 0x3a });
        gbc.writeMem(0x6316, { 0x2b });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xc1c, gbc.sp());
        EXPECT(0x387e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 017D
        gbc.setState(0x5a48, 0x813, 0x5620, 0x6f6d, 0x3209, 0x1f4a, 0x1, 0x0);
        gbc.writeMem(0x1f4a, { 0x9c });
        gbc.writeMem(0x5a48, { 0x3a });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x813, gbc.sp());
        EXPECT(0x5a49, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 017E
        gbc.setState(0x6e2, 0xc37b, 0xba10, 0xd074, 0x23d8, 0x1403, 0x0, 0x1);
        gbc.writeMem(0x6e2, { 0x3a });
        gbc.writeMem(0x1403, { 0xcd });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0xc37b, gbc.sp());
        EXPECT(0x6e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 017F
        gbc.setState(0x79b6, 0x6670, 0x3540, 0x775d, 0xce28, 0x94bf, 0x1, 0x1);
        gbc.writeMem(0x79b6, { 0x3a });
        gbc.writeMem(0x94bf, { 0xc2 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x6670, gbc.sp());
        EXPECT(0x79b7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc2, gbc.readMem(0x94bf));
        // 3A 0180
        gbc.setState(0x1ea, 0xd2e, 0x6c30, 0xedb0, 0xe5df, 0x2458, 0x0, 0x1);
        gbc.writeMem(0x1ea, { 0x3a });
        gbc.writeMem(0x2458, { 0xe9 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xd2e, gbc.sp());
        EXPECT(0x1eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0182
        gbc.setState(0xd9f5, 0x115, 0x3930, 0x6b25, 0x7664, 0x76be, 0x0, 0x1);
        gbc.writeMem(0x76be, { 0xd4 });
        gbc.writeMem(0xd9f5, { 0x3a });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x115, gbc.sp());
        EXPECT(0xd9f6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xd9f5));
        // 3A 0183
        gbc.setState(0x9e3c, 0x210c, 0x7990, 0x39df, 0x2072, 0xc8c2, 0x1, 0x1);
        gbc.writeMem(0x9e3c, { 0x3a });
        gbc.writeMem(0xc8c2, { 0xcc });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x210c, gbc.sp());
        EXPECT(0x9e3d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9e3c));
        EXPECT(0xcc, gbc.readMem(0xc8c2));
        // 3A 0184
        gbc.setState(0x3e1c, 0xe1e, 0x7960, 0x3df8, 0xafe, 0x18ee, 0x0, 0x0);
        gbc.writeMem(0x18ee, { 0x1 });
        gbc.writeMem(0x3e1c, { 0x3a });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xe1e, gbc.sp());
        EXPECT(0x3e1d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0185
        gbc.setState(0x604d, 0x184f, 0x9f80, 0x41, 0x87ab, 0x6027, 0x1, 0x1);
        gbc.writeMem(0x6027, { 0x67 });
        gbc.writeMem(0x604d, { 0x3a });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x184f, gbc.sp());
        EXPECT(0x604e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0186
        gbc.setState(0xfa5, 0xc39d, 0xdc90, 0x2e34, 0xdcaf, 0x3b68, 0x1, 0x0);
        gbc.writeMem(0xfa5, { 0x3a });
        gbc.writeMem(0x3b68, { 0x91 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xc39d, gbc.sp());
        EXPECT(0xfa6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0187
        gbc.setState(0x98ed, 0x761f, 0xf0, 0x8f7d, 0xee37, 0x7de6, 0x1, 0x0);
        gbc.writeMem(0x7de6, { 0x50 });
        gbc.writeMem(0x98ed, { 0x3a });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x761f, gbc.sp());
        EXPECT(0x98ee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x98ed));
        // 3A 0188
        gbc.setState(0x8744, 0xd1c9, 0xf6f0, 0x7e53, 0x3326, 0xc9ca, 0x1, 0x1);
        gbc.writeMem(0x8744, { 0x3a });
        gbc.writeMem(0xc9ca, { 0xa4 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xd1c9, gbc.sp());
        EXPECT(0x8745, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8744));
        EXPECT(0xa4, gbc.readMem(0xc9ca));
        // 3A 0189
        gbc.setState(0x6f16, 0x4ef, 0x6c50, 0x5531, 0x5272, 0xd35, 0x0, 0x1);
        gbc.writeMem(0xd35, { 0x84 });
        gbc.writeMem(0x6f16, { 0x3a });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x4ef, gbc.sp());
        EXPECT(0x6f17, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 018A
        gbc.setState(0xc679, 0x8ef0, 0xd760, 0xa8be, 0x8bfc, 0x5260, 0x1, 0x1);
        gbc.writeMem(0x5260, { 0x2c });
        gbc.writeMem(0xc679, { 0x3a });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x8ef0, gbc.sp());
        EXPECT(0xc67a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc679));
        // 3A 018B
        gbc.setState(0x82f7, 0xa93f, 0xa410, 0xe6b0, 0xb67a, 0x25fb, 0x0, 0x1);
        gbc.writeMem(0x25fb, { 0xb7 });
        gbc.writeMem(0x82f7, { 0x3a });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xa93f, gbc.sp());
        EXPECT(0x82f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x82f7));
        // 3A 018C
        gbc.setState(0xdd1a, 0xb343, 0xa050, 0x2f9c, 0x3a87, 0x512f, 0x1, 0x1);
        gbc.writeMem(0x512f, { 0x6a });
        gbc.writeMem(0xdd1a, { 0x3a });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xb343, gbc.sp());
        EXPECT(0xdd1b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xdd1a));
        // 3A 018D
        gbc.setState(0x2f21, 0xc337, 0x7290, 0xb001, 0xa18d, 0x333c, 0x1, 0x0);
        gbc.writeMem(0x2f21, { 0x3a });
        gbc.writeMem(0x333c, { 0x81 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0xc337, gbc.sp());
        EXPECT(0x2f22, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 018E
        gbc.setState(0xe244, 0x554b, 0x7610, 0xe8a8, 0xfc84, 0xd23f, 0x1, 0x0);
        gbc.writeMem(0xd23f, { 0xe9 });
        gbc.writeMem(0xe244, { 0x3a });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x554b, gbc.sp());
        EXPECT(0xe245, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe9, gbc.readMem(0xd23f));
        EXPECT(0x3a, gbc.readMem(0xe244));
        // 3A 018F
        gbc.setState(0x34fc, 0x1d48, 0x16b0, 0x5b7a, 0x600a, 0x3983, 0x0, 0x1);
        gbc.writeMem(0x34fc, { 0x3a });
        gbc.writeMem(0x3983, { 0x9b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x1d48, gbc.sp());
        EXPECT(0x34fd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0191
        gbc.setState(0x929c, 0x21cb, 0xe150, 0x751c, 0x681e, 0x5b76, 0x0, 0x1);
        gbc.writeMem(0x5b76, { 0x96 });
        gbc.writeMem(0x929c, { 0x3a });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x21cb, gbc.sp());
        EXPECT(0x929d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x929c));
        // 3A 0192
        gbc.setState(0x6867, 0xa24, 0xedf0, 0x6d08, 0xc791, 0xba78, 0x0, 0x1);
        gbc.writeMem(0x6867, { 0x3a });
        gbc.writeMem(0xba78, { 0xa1 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xa24, gbc.sp());
        EXPECT(0x6868, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa1, gbc.readMem(0xba78));
        // 3A 0193
        gbc.setState(0x29d7, 0xd536, 0x1320, 0x7833, 0xa4bb, 0x60ce, 0x0, 0x0);
        gbc.writeMem(0x29d7, { 0x3a });
        gbc.writeMem(0x60ce, { 0x90 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0xd536, gbc.sp());
        EXPECT(0x29d8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0194
        gbc.setState(0x15a4, 0x8570, 0x6f40, 0xf39, 0x3ec, 0x9e54, 0x1, 0x0);
        gbc.writeMem(0x15a4, { 0x3a });
        gbc.writeMem(0x9e54, { 0xf8 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x8570, gbc.sp());
        EXPECT(0x15a5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf8, gbc.readMem(0x9e54));
        // 3A 0196
        gbc.setState(0xa8a1, 0x218c, 0xea50, 0x53ce, 0xa7be, 0x94e3, 0x0, 0x1);
        gbc.writeMem(0x94e3, { 0xb6 });
        gbc.writeMem(0xa8a1, { 0x3a });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x218c, gbc.sp());
        EXPECT(0xa8a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb6, gbc.readMem(0x94e3));
        EXPECT(0x3a, gbc.readMem(0xa8a1));
        // 3A 0197
        gbc.setState(0x119a, 0x7d8c, 0x6b00, 0x5ef7, 0x7038, 0x92ed, 0x1, 0x1);
        gbc.writeMem(0x119a, { 0x3a });
        gbc.writeMem(0x92ed, { 0x71 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x7d8c, gbc.sp());
        EXPECT(0x119b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x71, gbc.readMem(0x92ed));
        // 3A 0198
        gbc.setState(0x9709, 0x1f29, 0x23e0, 0xb096, 0xa3f2, 0xea72, 0x0, 0x1);
        gbc.writeMem(0x9709, { 0x3a });
        gbc.writeMem(0xea72, { 0xec });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x1f29, gbc.sp());
        EXPECT(0x970a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9709));
        EXPECT(0xec, gbc.readMem(0xea72));
        // 3A 0199
        gbc.setState(0x3ceb, 0x1a1e, 0x8370, 0xca0c, 0xc071, 0x971b, 0x0, 0x0);
        gbc.writeMem(0x3ceb, { 0x3a });
        gbc.writeMem(0x971b, { 0x1a });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x1a1e, gbc.sp());
        EXPECT(0x3cec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1a, gbc.readMem(0x971b));
        // 3A 019A
        gbc.setState(0x9947, 0x113d, 0xc220, 0xae56, 0x4246, 0xa413, 0x0, 0x0);
        gbc.writeMem(0x9947, { 0x3a });
        gbc.writeMem(0xa413, { 0x82 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x113d, gbc.sp());
        EXPECT(0x9948, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9947));
        EXPECT(0x82, gbc.readMem(0xa413));
        // 3A 019B
        gbc.setState(0x97b1, 0x5ac0, 0x2c30, 0x8880, 0xfea3, 0xde34, 0x0, 0x1);
        gbc.writeMem(0x97b1, { 0x3a });
        gbc.writeMem(0xde34, { 0xf9 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x5ac0, gbc.sp());
        EXPECT(0x97b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x97b1));
        EXPECT(0xf9, gbc.readMem(0xde34));
        // 3A 019C
        gbc.setState(0xda64, 0x610c, 0xd640, 0xb20b, 0x8dd4, 0x424d, 0x1, 0x1);
        gbc.writeMem(0x424d, { 0x33 });
        gbc.writeMem(0xda64, { 0x3a });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x610c, gbc.sp());
        EXPECT(0xda65, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xda64));
        // 3A 019D
        gbc.setState(0x695f, 0x99a2, 0xd1f0, 0x9c5, 0xf5fd, 0x65cf, 0x0, 0x1);
        gbc.writeMem(0x65cf, { 0xfe });
        gbc.writeMem(0x695f, { 0x3a });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x99a2, gbc.sp());
        EXPECT(0x6960, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 019E
        gbc.setState(0xd168, 0x5c25, 0x80e0, 0x69f5, 0xb458, 0xd3f1, 0x1, 0x1);
        gbc.writeMem(0xd168, { 0x3a });
        gbc.writeMem(0xd3f1, { 0x66 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x5c25, gbc.sp());
        EXPECT(0xd169, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xd168));
        EXPECT(0x66, gbc.readMem(0xd3f1));
        // 3A 019F
        gbc.setState(0xc097, 0x2816, 0x8c80, 0xf86e, 0x2b0d, 0x14f, 0x0, 0x1);
        gbc.writeMem(0x14f, { 0x4b });
        gbc.writeMem(0xc097, { 0x3a });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x2816, gbc.sp());
        EXPECT(0xc098, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc097));
        // 3A 01A0
        gbc.setState(0x3d3e, 0x2834, 0xd8e0, 0xd223, 0xac20, 0xb31a, 0x0, 0x1);
        gbc.writeMem(0x3d3e, { 0x3a });
        gbc.writeMem(0xb31a, { 0xbe });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x2834, gbc.sp());
        EXPECT(0x3d3f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xbe, gbc.readMem(0xb31a));
        // 3A 01A1
        gbc.setState(0x46b2, 0xb49a, 0xf2e0, 0x8826, 0xe619, 0xdde9, 0x1, 0x0);
        gbc.writeMem(0x46b2, { 0x3a });
        gbc.writeMem(0xdde9, { 0x72 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xb49a, gbc.sp());
        EXPECT(0x46b3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x72, gbc.readMem(0xdde9));
        // 3A 01A2
        gbc.setState(0x6793, 0x1042, 0xa360, 0x20b4, 0x5321, 0x2051, 0x1, 0x0);
        gbc.writeMem(0x2051, { 0xdd });
        gbc.writeMem(0x6793, { 0x3a });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x1042, gbc.sp());
        EXPECT(0x6794, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 01A3
        gbc.setState(0x75fd, 0x3c24, 0x98f0, 0x363, 0xa842, 0xd87b, 0x1, 0x0);
        gbc.writeMem(0x75fd, { 0x3a });
        gbc.writeMem(0xd87b, { 0xcc });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x3c24, gbc.sp());
        EXPECT(0x75fe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcc, gbc.readMem(0xd87b));
        // 3A 01A4
        gbc.setState(0x3527, 0x1719, 0x92d0, 0x1e35, 0x7140, 0x7fdf, 0x1, 0x1);
        gbc.writeMem(0x3527, { 0x3a });
        gbc.writeMem(0x7fdf, { 0x62 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x1719, gbc.sp());
        EXPECT(0x3528, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 01A5
        gbc.setState(0xe99b, 0x4c19, 0x4890, 0xa69e, 0x8bd5, 0x2c84, 0x1, 0x1);
        gbc.writeMem(0x2c84, { 0x81 });
        gbc.writeMem(0xe99b, { 0x3a });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x4c19, gbc.sp());
        EXPECT(0xe99c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xe99b));
        // 3A 01A6
        gbc.setState(0x50f, 0x1432, 0x73c0, 0x50a6, 0x8004, 0x2912, 0x1, 0x0);
        gbc.writeMem(0x50f, { 0x3a });
        gbc.writeMem(0x2912, { 0x2f });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x1432, gbc.sp());
        EXPECT(0x510, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 01A7
        gbc.setState(0x3b51, 0x1747, 0x330, 0x5f98, 0x98cf, 0x3023, 0x0, 0x1);
        gbc.writeMem(0x3023, { 0x57 });
        gbc.writeMem(0x3b51, { 0x3a });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x1747, gbc.sp());
        EXPECT(0x3b52, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 01A8
        gbc.setState(0x3fa2, 0x997, 0x1980, 0xc6a9, 0x4cdc, 0x6c2e, 0x0, 0x0);
        gbc.writeMem(0x3fa2, { 0x3a });
        gbc.writeMem(0x6c2e, { 0x95 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x997, gbc.sp());
        EXPECT(0x3fa3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 01A9
        gbc.setState(0x1ca4, 0xfe2b, 0xad20, 0xb9ae, 0xda3a, 0x3cd, 0x1, 0x1);
        gbc.writeMem(0x3cd, { 0xb4 });
        gbc.writeMem(0x1ca4, { 0x3a });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xfe2b, gbc.sp());
        EXPECT(0x1ca5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 01AA
        gbc.setState(0x7181, 0x84cd, 0x3870, 0x2129, 0x7a61, 0xda35, 0x0, 0x0);
        gbc.writeMem(0x7181, { 0x3a });
        gbc.writeMem(0xda35, { 0x57 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x84cd, gbc.sp());
        EXPECT(0x7182, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x57, gbc.readMem(0xda35));
        // 3A 01AB
        gbc.setState(0xa0f6, 0x8939, 0x4180, 0xe552, 0xeb8e, 0x548d, 0x1, 0x0);
        gbc.writeMem(0x548d, { 0xe0 });
        gbc.writeMem(0xa0f6, { 0x3a });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x8939, gbc.sp());
        EXPECT(0xa0f7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa0f6));
        // 3A 01AD
        gbc.setState(0x52d2, 0x35d5, 0x12d0, 0x45a9, 0x3891, 0x18a5, 0x0, 0x1);
        gbc.writeMem(0x18a5, { 0xf4 });
        gbc.writeMem(0x52d2, { 0x3a });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x35d5, gbc.sp());
        EXPECT(0x52d3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 01AE
        gbc.setState(0xf2e, 0xbb26, 0xd9b0, 0x4f6, 0xe836, 0x69a0, 0x1, 0x1);
        gbc.writeMem(0xf2e, { 0x3a });
        gbc.writeMem(0x69a0, { 0xd3 });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xbb26, gbc.sp());
        EXPECT(0xf2f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 01AF
        gbc.setState(0x2ddd, 0xf30d, 0x8140, 0x3da9, 0xd2a, 0x156b, 0x0, 0x1);
        gbc.writeMem(0x156b, { 0x24 });
        gbc.writeMem(0x2ddd, { 0x3a });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xf30d, gbc.sp());
        EXPECT(0x2dde, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 01B0
        gbc.setState(0xae81, 0xc7d2, 0xf5f0, 0x7646, 0xcf22, 0x5676, 0x1, 0x1);
        gbc.writeMem(0x5676, { 0x72 });
        gbc.writeMem(0xae81, { 0x3a });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xc7d2, gbc.sp());
        EXPECT(0xae82, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xae81));
        // 3A 01B1
        gbc.setState(0xab5, 0xade7, 0x3390, 0xd292, 0x9e27, 0x5f78, 0x1, 0x0);
        gbc.writeMem(0xab5, { 0x3a });
        gbc.writeMem(0x5f78, { 0x56 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xade7, gbc.sp());
        EXPECT(0xab6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 01B2
        gbc.setState(0x219, 0x8a13, 0x7fb0, 0xbf86, 0x7b3b, 0xf5d, 0x1, 0x1);
        gbc.writeMem(0x219, { 0x3a });
        gbc.writeMem(0xf5d, { 0x1b });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x8a13, gbc.sp());
        EXPECT(0x21a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 01B3
        gbc.setState(0x7f40, 0x2dcc, 0x3560, 0x8589, 0xddc4, 0xf59f, 0x0, 0x1);
        gbc.writeMem(0x7f40, { 0x3a });
        gbc.writeMem(0xf59f, { 0x0 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x2dcc, gbc.sp());
        EXPECT(0x7f41, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x0, gbc.readMem(0xf59f));
        // 3A 01B4
        gbc.setState(0xa377, 0xc764, 0x31c0, 0xd3b0, 0x6df1, 0x1acb, 0x0, 0x1);
        gbc.writeMem(0x1acb, { 0x26 });
        gbc.writeMem(0xa377, { 0x3a });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0xc764, gbc.sp());
        EXPECT(0xa378, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa377));
        // 3A 01B5
        gbc.setState(0x743, 0xcd67, 0x5cd0, 0xe77d, 0x97f, 0x1dce, 0x1, 0x0);
        gbc.writeMem(0x743, { 0x3a });
        gbc.writeMem(0x1dce, { 0xcd });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0xcd67, gbc.sp());
        EXPECT(0x744, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 01B6
        gbc.setState(0x389a, 0x3a9b, 0xf5b0, 0x8a14, 0x2348, 0x5bd5, 0x0, 0x1);
        gbc.writeMem(0x389a, { 0x3a });
        gbc.writeMem(0x5bd5, { 0xb0 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x3a9b, gbc.sp());
        EXPECT(0x389b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 01B7
        gbc.setState(0x7579, 0xfd2, 0x6060, 0xe93a, 0x981f, 0xcbc9, 0x0, 0x0);
        gbc.writeMem(0x7579, { 0x3a });
        gbc.writeMem(0xcbc9, { 0x5c });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0xfd2, gbc.sp());
        EXPECT(0x757a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5c, gbc.readMem(0xcbc9));
        // 3A 01B8
        gbc.setState(0x41d, 0xf00d, 0x9fe0, 0xddbf, 0xba11, 0x4f97, 0x0, 0x0);
        gbc.writeMem(0x41d, { 0x3a });
        gbc.writeMem(0x4f97, { 0x9e });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xf00d, gbc.sp());
        EXPECT(0x41e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 01B9
        gbc.setState(0x7d17, 0x34a0, 0x4860, 0xa966, 0x3037, 0xa062, 0x0, 0x1);
        gbc.writeMem(0x7d17, { 0x3a });
        gbc.writeMem(0xa062, { 0xba });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x34a0, gbc.sp());
        EXPECT(0x7d18, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xba, gbc.readMem(0xa062));
        // 3A 01BA
        gbc.setState(0xb10a, 0x8907, 0xb810, 0x7d10, 0xc153, 0x3a47, 0x1, 0x0);
        gbc.writeMem(0x3a47, { 0x33 });
        gbc.writeMem(0xb10a, { 0x3a });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x8907, gbc.sp());
        EXPECT(0xb10b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb10a));
        // 3A 01BB
        gbc.setState(0x72a2, 0x341a, 0x67d0, 0xabe8, 0xb2c2, 0x9560, 0x1, 0x1);
        gbc.writeMem(0x72a2, { 0x3a });
        gbc.writeMem(0x9560, { 0xb1 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x341a, gbc.sp());
        EXPECT(0x72a3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb1, gbc.readMem(0x9560));
        // 3A 01BC
        gbc.setState(0x99ca, 0x3d58, 0xd8e0, 0x2f39, 0x92f9, 0xccf4, 0x1, 0x1);
        gbc.writeMem(0x99ca, { 0x3a });
        gbc.writeMem(0xccf4, { 0x1d });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x3d58, gbc.sp());
        EXPECT(0x99cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x99ca));
        EXPECT(0x1d, gbc.readMem(0xccf4));
        // 3A 01BE
        gbc.setState(0x69d8, 0x5cbd, 0x6240, 0xfe74, 0xe212, 0xe3e2, 0x0, 0x0);
        gbc.writeMem(0x69d8, { 0x3a });
        gbc.writeMem(0xe3e2, { 0x7f });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x5cbd, gbc.sp());
        EXPECT(0x69d9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x7f, gbc.readMem(0xe3e2));
        // 3A 01BF
        gbc.setState(0x4fc2, 0x8c81, 0xb200, 0x5c1b, 0x3daf, 0x7b11, 0x1, 0x1);
        gbc.writeMem(0x4fc2, { 0x3a });
        gbc.writeMem(0x7b11, { 0xdc });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x8c81, gbc.sp());
        EXPECT(0x4fc3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 01C0
        gbc.setState(0xc5b4, 0xd5e5, 0xfbc0, 0x2c37, 0x6f02, 0x93e1, 0x1, 0x1);
        gbc.writeMem(0x93e1, { 0x88 });
        gbc.writeMem(0xc5b4, { 0x3a });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xd5e5, gbc.sp());
        EXPECT(0xc5b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x88, gbc.readMem(0x93e1));
        EXPECT(0x3a, gbc.readMem(0xc5b4));
        // 3A 01C1
        gbc.setState(0x10d9, 0x3fc7, 0x70e0, 0x9060, 0x3d38, 0xd95a, 0x0, 0x0);
        gbc.writeMem(0x10d9, { 0x3a });
        gbc.writeMem(0xd95a, { 0x6f });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x3fc7, gbc.sp());
        EXPECT(0x10da, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6f, gbc.readMem(0xd95a));
        // 3A 01C2
        gbc.setState(0xad3a, 0x812f, 0xc030, 0xde9e, 0x635, 0x2f44, 0x0, 0x1);
        gbc.writeMem(0x2f44, { 0xc5 });
        gbc.writeMem(0xad3a, { 0x3a });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x812f, gbc.sp());
        EXPECT(0xad3b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xad3a));
        // 3A 01C3
        gbc.setState(0x3b90, 0x3bd, 0xb560, 0xc3d2, 0x7163, 0x1970, 0x0, 0x1);
        gbc.writeMem(0x1970, { 0xb6 });
        gbc.writeMem(0x3b90, { 0x3a });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x3bd, gbc.sp());
        EXPECT(0x3b91, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 01C4
        gbc.setState(0xdd62, 0x21e9, 0xfac0, 0xbe18, 0x4836, 0xa25e, 0x0, 0x1);
        gbc.writeMem(0xa25e, { 0x5b });
        gbc.writeMem(0xdd62, { 0x3a });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x21e9, gbc.sp());
        EXPECT(0xdd63, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5b, gbc.readMem(0xa25e));
        EXPECT(0x3a, gbc.readMem(0xdd62));
        // 3A 01C5
        gbc.setState(0x7f5d, 0x6bef, 0xee80, 0x5cf5, 0x12e6, 0xda2b, 0x1, 0x1);
        gbc.writeMem(0x7f5d, { 0x3a });
        gbc.writeMem(0xda2b, { 0x7d });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x6bef, gbc.sp());
        EXPECT(0x7f5e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x7d, gbc.readMem(0xda2b));
        // 3A 01C6
        gbc.setState(0xef, 0x7cf7, 0x66c0, 0xbaa5, 0x250f, 0xa095, 0x1, 0x0);
        gbc.writeMem(0xef, { 0x3a });
        gbc.writeMem(0xa095, { 0x72 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x7cf7, gbc.sp());
        EXPECT(0xf0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x72, gbc.readMem(0xa095));
        // 3A 01C7
        gbc.setState(0x4573, 0x5bc9, 0x3320, 0x6c34, 0xa04a, 0xfda5, 0x1, 0x1);
        gbc.writeMem(0x4573, { 0x3a });
        gbc.writeMem(0xfda5, { 0xfa });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x5bc9, gbc.sp());
        EXPECT(0x4574, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xfa, gbc.readMem(0xfda5));
        // 3A 01C8
        gbc.setState(0x6454, 0xa11f, 0xab40, 0x19cf, 0x5399, 0xaa93, 0x0, 0x1);
        gbc.writeMem(0x6454, { 0x3a });
        gbc.writeMem(0xaa93, { 0xb2 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xa11f, gbc.sp());
        EXPECT(0x6455, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb2, gbc.readMem(0xaa93));
        // 3A 01C9
        gbc.setState(0xc530, 0xae68, 0x83c0, 0xef1e, 0xb134, 0x4cbf, 0x0, 0x1);
        gbc.writeMem(0x4cbf, { 0x1d });
        gbc.writeMem(0xc530, { 0x3a });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xae68, gbc.sp());
        EXPECT(0xc531, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc530));
        // 3A 01CA
        gbc.setState(0x2501, 0x799e, 0x25b0, 0xec07, 0x696f, 0x3819, 0x0, 0x0);
        gbc.writeMem(0x2501, { 0x3a });
        gbc.writeMem(0x3819, { 0x1b });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x799e, gbc.sp());
        EXPECT(0x2502, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 01CB
        gbc.setState(0xe85c, 0x5eac, 0xce40, 0xecd1, 0x660d, 0x5fc6, 0x0, 0x1);
        gbc.writeMem(0x5fc6, { 0xde });
        gbc.writeMem(0xe85c, { 0x3a });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x5eac, gbc.sp());
        EXPECT(0xe85d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xe85c));
        // 3A 01CC
        gbc.setState(0xb34b, 0x588d, 0x620, 0x4944, 0xdcf4, 0x7470, 0x1, 0x1);
        gbc.writeMem(0x7470, { 0x96 });
        gbc.writeMem(0xb34b, { 0x3a });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x588d, gbc.sp());
        EXPECT(0xb34c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb34b));
        // 3A 01CD
        gbc.setState(0x825e, 0x4ef3, 0xc7b0, 0x8fa2, 0x9110, 0x5085, 0x0, 0x1);
        gbc.writeMem(0x5085, { 0xb6 });
        gbc.writeMem(0x825e, { 0x3a });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x4ef3, gbc.sp());
        EXPECT(0x825f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x825e));
        // 3A 01CE
        gbc.setState(0xd3f6, 0x1f90, 0xbc40, 0x45b2, 0x9da4, 0xe0d6, 0x0, 0x0);
        gbc.writeMem(0xd3f6, { 0x3a });
        gbc.writeMem(0xe0d6, { 0xa5 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x1f90, gbc.sp());
        EXPECT(0xd3f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xd3f6));
        EXPECT(0xa5, gbc.readMem(0xe0d6));
        // 3A 01CF
        gbc.setState(0xa959, 0xac8e, 0x3770, 0x2ab7, 0xae7a, 0x14da, 0x0, 0x0);
        gbc.writeMem(0x14da, { 0x4b });
        gbc.writeMem(0xa959, { 0x3a });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xac8e, gbc.sp());
        EXPECT(0xa95a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa959));
        // 3A 01D0
        gbc.setState(0xcb2f, 0x5381, 0xfc70, 0x4ff0, 0xe793, 0x731f, 0x0, 0x1);
        gbc.writeMem(0x731f, { 0x4f });
        gbc.writeMem(0xcb2f, { 0x3a });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x5381, gbc.sp());
        EXPECT(0xcb30, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xcb2f));
        // 3A 01D1
        gbc.setState(0xeac5, 0xc9db, 0x1d90, 0x9821, 0x80a2, 0x5950, 0x0, 0x0);
        gbc.writeMem(0x5950, { 0xc3 });
        gbc.writeMem(0xeac5, { 0x3a });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0xc9db, gbc.sp());
        EXPECT(0xeac6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xeac5));
        // 3A 01D2
        gbc.setState(0xe0b6, 0xbf9, 0x94f0, 0xd73c, 0xbc9d, 0x77de, 0x0, 0x1);
        gbc.writeMem(0x77de, { 0x8f });
        gbc.writeMem(0xe0b6, { 0x3a });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xbf9, gbc.sp());
        EXPECT(0xe0b7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xe0b6));
        // 3A 01D3
        gbc.setState(0x71fa, 0x7113, 0x6150, 0xcd62, 0xe5a6, 0xf997, 0x1, 0x0);
        gbc.writeMem(0x71fa, { 0x3a });
        gbc.writeMem(0xf997, { 0x35 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x7113, gbc.sp());
        EXPECT(0x71fb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x35, gbc.readMem(0xf997));
        // 3A 01D4
        gbc.setState(0x4493, 0xf128, 0x4130, 0x3ebc, 0x8cbb, 0x1e5, 0x1, 0x1);
        gbc.writeMem(0x1e5, { 0x97 });
        gbc.writeMem(0x4493, { 0x3a });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xf128, gbc.sp());
        EXPECT(0x4494, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 01D5
        gbc.setState(0x5a08, 0x2b08, 0xb060, 0xa2c7, 0x700a, 0x44cf, 0x1, 0x0);
        gbc.writeMem(0x44cf, { 0x2a });
        gbc.writeMem(0x5a08, { 0x3a });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x2b08, gbc.sp());
        EXPECT(0x5a09, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 01D7
        gbc.setState(0x93f2, 0x9601, 0x4da0, 0xac56, 0x2237, 0x1ddd, 0x1, 0x0);
        gbc.writeMem(0x1ddd, { 0x1c });
        gbc.writeMem(0x93f2, { 0x3a });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x9601, gbc.sp());
        EXPECT(0x93f3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x93f2));
        // 3A 01D8
        gbc.setState(0x8afd, 0x3963, 0x4560, 0x616, 0xc03e, 0xc2e6, 0x1, 0x1);
        gbc.writeMem(0x8afd, { 0x3a });
        gbc.writeMem(0xc2e6, { 0xfc });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x3963, gbc.sp());
        EXPECT(0x8afe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8afd));
        EXPECT(0xfc, gbc.readMem(0xc2e6));
        // 3A 01D9
        gbc.setState(0x3185, 0xb2af, 0xdff0, 0x62ed, 0x28bb, 0x91dd, 0x1, 0x1);
        gbc.writeMem(0x3185, { 0x3a });
        gbc.writeMem(0x91dd, { 0x54 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xb2af, gbc.sp());
        EXPECT(0x3186, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x54, gbc.readMem(0x91dd));
        // 3A 01DA
        gbc.setState(0x733f, 0xf0f, 0xcbc0, 0xea32, 0x57ed, 0x5533, 0x1, 0x0);
        gbc.writeMem(0x5533, { 0x1d });
        gbc.writeMem(0x733f, { 0x3a });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0xf0f, gbc.sp());
        EXPECT(0x7340, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 01DB
        gbc.setState(0x2388, 0xffc4, 0x5d80, 0x715d, 0xf05c, 0xd971, 0x0, 0x0);
        gbc.writeMem(0x2388, { 0x3a });
        gbc.writeMem(0xd971, { 0x26 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xffc4, gbc.sp());
        EXPECT(0x2389, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x26, gbc.readMem(0xd971));
        // 3A 01DC
        gbc.setState(0xad8d, 0xb4b4, 0x5ff0, 0xd3c3, 0xeb5d, 0x523b, 0x0, 0x1);
        gbc.writeMem(0x523b, { 0xa0 });
        gbc.writeMem(0xad8d, { 0x3a });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xb4b4, gbc.sp());
        EXPECT(0xad8e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xad8d));
        // 3A 01DD
        gbc.setState(0x5cde, 0xa846, 0xa40, 0x3f93, 0x527d, 0x1868, 0x1, 0x1);
        gbc.writeMem(0x1868, { 0x47 });
        gbc.writeMem(0x5cde, { 0x3a });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xa846, gbc.sp());
        EXPECT(0x5cdf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 01DE
        gbc.setState(0x12f8, 0x1497, 0xf850, 0x53b7, 0xb8ce, 0x2d60, 0x0, 0x0);
        gbc.writeMem(0x12f8, { 0x3a });
        gbc.writeMem(0x2d60, { 0x32 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x1497, gbc.sp());
        EXPECT(0x12f9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 01DF
        gbc.setState(0x25da, 0x7cef, 0x910, 0xdf38, 0x9ec, 0x5502, 0x0, 0x0);
        gbc.writeMem(0x25da, { 0x3a });
        gbc.writeMem(0x5502, { 0x6b });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x7cef, gbc.sp());
        EXPECT(0x25db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 01E0
        gbc.setState(0x224, 0x25e4, 0x4d20, 0x21b9, 0xdf9a, 0xef3c, 0x0, 0x1);
        gbc.writeMem(0x224, { 0x3a });
        gbc.writeMem(0xef3c, { 0xee });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x25e4, gbc.sp());
        EXPECT(0x225, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xee, gbc.readMem(0xef3c));
        // 3A 01E1
        gbc.setState(0xb870, 0x78c7, 0x9740, 0xe948, 0xee68, 0xf298, 0x1, 0x1);
        gbc.writeMem(0xb870, { 0x3a });
        gbc.writeMem(0xf298, { 0x20 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x78c7, gbc.sp());
        EXPECT(0xb871, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb870));
        EXPECT(0x20, gbc.readMem(0xf298));
        // 3A 01E2
        gbc.setState(0x70f8, 0x5e29, 0xe170, 0x379f, 0x7d98, 0x2fbc, 0x0, 0x0);
        gbc.writeMem(0x2fbc, { 0xef });
        gbc.writeMem(0x70f8, { 0x3a });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x5e29, gbc.sp());
        EXPECT(0x70f9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 01E3
        gbc.setState(0x75af, 0x11e, 0x120, 0x46c, 0x1048, 0x55c4, 0x1, 0x0);
        gbc.writeMem(0x55c4, { 0x3a });
        gbc.writeMem(0x75af, { 0x3a });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x11e, gbc.sp());
        EXPECT(0x75b0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 01E4
        gbc.setState(0x2f53, 0x78e7, 0xa630, 0x1e90, 0x1dc2, 0xe3f0, 0x0, 0x0);
        gbc.writeMem(0x2f53, { 0x3a });
        gbc.writeMem(0xe3f0, { 0x65 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x78e7, gbc.sp());
        EXPECT(0x2f54, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x65, gbc.readMem(0xe3f0));
        // 3A 01E5
        gbc.setState(0xa60, 0xa71d, 0x7180, 0x811e, 0x7290, 0xfad6, 0x1, 0x0);
        gbc.writeMem(0xa60, { 0x3a });
        gbc.writeMem(0xfad6, { 0x9c });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xa71d, gbc.sp());
        EXPECT(0xa61, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x9c, gbc.readMem(0xfad6));
        // 3A 01E6
        gbc.setState(0x36e1, 0xa6b6, 0xa540, 0xd67f, 0x1239, 0x471c, 0x1, 0x0);
        gbc.writeMem(0x36e1, { 0x3a });
        gbc.writeMem(0x471c, { 0xe9 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xa6b6, gbc.sp());
        EXPECT(0x36e2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 01E7
        gbc.setState(0xdbae, 0xad56, 0x2d60, 0x5576, 0x753a, 0x8c44, 0x1, 0x0);
        gbc.writeMem(0x8c44, { 0x4b });
        gbc.writeMem(0xdbae, { 0x3a });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xad56, gbc.sp());
        EXPECT(0xdbaf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x4b, gbc.readMem(0x8c44));
        EXPECT(0x3a, gbc.readMem(0xdbae));
        // 3A 01E8
        gbc.setState(0x2df1, 0xf142, 0xece0, 0x9ae6, 0x8fa3, 0x44ba, 0x1, 0x1);
        gbc.writeMem(0x2df1, { 0x3a });
        gbc.writeMem(0x44ba, { 0xa });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xf142, gbc.sp());
        EXPECT(0x2df2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 01E9
        gbc.setState(0x6979, 0x373f, 0xba10, 0x55ae, 0x4757, 0xd9e, 0x0, 0x1);
        gbc.writeMem(0xd9e, { 0x42 });
        gbc.writeMem(0x6979, { 0x3a });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x373f, gbc.sp());
        EXPECT(0x697a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 01EA
        gbc.setState(0x9c3c, 0x337c, 0xca90, 0x4cf9, 0xb347, 0x692b, 0x1, 0x0);
        gbc.writeMem(0x692b, { 0xa3 });
        gbc.writeMem(0x9c3c, { 0x3a });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x337c, gbc.sp());
        EXPECT(0x9c3d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9c3c));
        // 3A 01EB
        gbc.setState(0x4a1f, 0x8136, 0x2d40, 0xc4c9, 0xc80f, 0xd959, 0x0, 0x1);
        gbc.writeMem(0x4a1f, { 0x3a });
        gbc.writeMem(0xd959, { 0xff });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x8136, gbc.sp());
        EXPECT(0x4a20, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xff, gbc.readMem(0xd959));
        // 3A 01EC
        gbc.setState(0x1569, 0x79dc, 0x80a0, 0x8451, 0xde1f, 0xe399, 0x1, 0x0);
        gbc.writeMem(0x1569, { 0x3a });
        gbc.writeMem(0xe399, { 0xa9 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x79dc, gbc.sp());
        EXPECT(0x156a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa9, gbc.readMem(0xe399));
        // 3A 01ED
        gbc.setState(0xec04, 0x60b0, 0xfc30, 0x76e0, 0x5ee9, 0x5f5c, 0x1, 0x0);
        gbc.writeMem(0x5f5c, { 0x8c });
        gbc.writeMem(0xec04, { 0x3a });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x60b0, gbc.sp());
        EXPECT(0xec05, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xec04));
        // 3A 01EE
        gbc.setState(0x21aa, 0x4a23, 0x95d0, 0x91fa, 0x5970, 0xf0ab, 0x0, 0x1);
        gbc.writeMem(0x21aa, { 0x3a });
        gbc.writeMem(0xf0ab, { 0x66 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x4a23, gbc.sp());
        EXPECT(0x21ab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x66, gbc.readMem(0xf0ab));
        // 3A 01EF
        gbc.setState(0xe5d9, 0x671, 0x7020, 0xb764, 0x8de5, 0xab0, 0x1, 0x0);
        gbc.writeMem(0xab0, { 0x75 });
        gbc.writeMem(0xe5d9, { 0x3a });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x671, gbc.sp());
        EXPECT(0xe5da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xe5d9));
        // 3A 01F0
        gbc.setState(0x3647, 0x85c0, 0xf6f0, 0x4e7b, 0xa0ac, 0x7c22, 0x0, 0x0);
        gbc.writeMem(0x3647, { 0x3a });
        gbc.writeMem(0x7c22, { 0x8e });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x85c0, gbc.sp());
        EXPECT(0x3648, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 01F1
        gbc.setState(0x12da, 0x8077, 0x2520, 0xd25f, 0x2de, 0x5df3, 0x1, 0x1);
        gbc.writeMem(0x12da, { 0x3a });
        gbc.writeMem(0x5df3, { 0x64 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x8077, gbc.sp());
        EXPECT(0x12db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 01F2
        gbc.setState(0xed6c, 0x4599, 0x72d0, 0x83a8, 0x6f24, 0x7caf, 0x0, 0x0);
        gbc.writeMem(0x7caf, { 0x46 });
        gbc.writeMem(0xed6c, { 0x3a });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x4599, gbc.sp());
        EXPECT(0xed6d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xed6c));
        // 3A 01F4
        gbc.setState(0x8b3, 0x976c, 0x7d20, 0x729a, 0x4d8c, 0xc1b, 0x1, 0x1);
        gbc.writeMem(0x8b3, { 0x3a });
        gbc.writeMem(0xc1b, { 0x3a });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x976c, gbc.sp());
        EXPECT(0x8b4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 01F5
        gbc.setState(0x8323, 0x4ad3, 0xafb0, 0xa7e8, 0xea57, 0x65be, 0x0, 0x0);
        gbc.writeMem(0x65be, { 0xdd });
        gbc.writeMem(0x8323, { 0x3a });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x4ad3, gbc.sp());
        EXPECT(0x8324, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8323));
        // 3A 01F6
        gbc.setState(0x402, 0xbf9b, 0x2720, 0x2d90, 0xc82c, 0x30bf, 0x0, 0x1);
        gbc.writeMem(0x402, { 0x3a });
        gbc.writeMem(0x30bf, { 0x1b });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xbf9b, gbc.sp());
        EXPECT(0x403, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 01F7
        gbc.setState(0xd8da, 0xa00c, 0x82b0, 0x1641, 0x9097, 0xa562, 0x0, 0x0);
        gbc.writeMem(0xa562, { 0x7a });
        gbc.writeMem(0xd8da, { 0x3a });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xa00c, gbc.sp());
        EXPECT(0xd8db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7a, gbc.readMem(0xa562));
        EXPECT(0x3a, gbc.readMem(0xd8da));
        // 3A 01F8
        gbc.setState(0xcd80, 0x7c15, 0x76b0, 0x9b44, 0x57b1, 0x27ab, 0x1, 0x1);
        gbc.writeMem(0x27ab, { 0xca });
        gbc.writeMem(0xcd80, { 0x3a });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x7c15, gbc.sp());
        EXPECT(0xcd81, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xcd80));
        // 3A 01F9
        gbc.setState(0x8227, 0xc560, 0x1390, 0x4209, 0x5ac8, 0x40e5, 0x0, 0x1);
        gbc.writeMem(0x40e5, { 0xa5 });
        gbc.writeMem(0x8227, { 0x3a });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xc560, gbc.sp());
        EXPECT(0x8228, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8227));
        // 3A 01FA
        gbc.setState(0x84ce, 0xdbc1, 0x4570, 0xa8eb, 0xc3fa, 0xd841, 0x0, 0x0);
        gbc.writeMem(0x84ce, { 0x3a });
        gbc.writeMem(0xd841, { 0xc1 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0xdbc1, gbc.sp());
        EXPECT(0x84cf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x84ce));
        EXPECT(0xc1, gbc.readMem(0xd841));
        // 3A 01FB
        gbc.setState(0x61cd, 0xf516, 0x3860, 0xb494, 0x50ae, 0x1bd6, 0x1, 0x0);
        gbc.writeMem(0x1bd6, { 0x56 });
        gbc.writeMem(0x61cd, { 0x3a });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xf516, gbc.sp());
        EXPECT(0x61ce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 01FC
        gbc.setState(0x36a8, 0x99c, 0x5840, 0x17e3, 0xcd47, 0x9736, 0x1, 0x1);
        gbc.writeMem(0x36a8, { 0x3a });
        gbc.writeMem(0x9736, { 0x0 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x99c, gbc.sp());
        EXPECT(0x36a9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x0, gbc.readMem(0x9736));
        // 3A 01FD
        gbc.setState(0xb1f0, 0x147f, 0x3bd0, 0xfad3, 0xcc77, 0x1b6d, 0x1, 0x1);
        gbc.writeMem(0x1b6d, { 0x2f });
        gbc.writeMem(0xb1f0, { 0x3a });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x147f, gbc.sp());
        EXPECT(0xb1f1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb1f0));
        // 3A 01FE
        gbc.setState(0x81f3, 0xa531, 0xc8b0, 0xace8, 0xa476, 0x4561, 0x1, 0x1);
        gbc.writeMem(0x4561, { 0xe9 });
        gbc.writeMem(0x81f3, { 0x3a });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0xa531, gbc.sp());
        EXPECT(0x81f4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x81f3));
        // 3A 01FF
        gbc.setState(0x5ace, 0x13b4, 0x3f0, 0x975a, 0x1061, 0x519f, 0x0, 0x0);
        gbc.writeMem(0x519f, { 0xcd });
        gbc.writeMem(0x5ace, { 0x3a });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x13b4, gbc.sp());
        EXPECT(0x5acf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0200
        gbc.setState(0xce21, 0x28ef, 0x7100, 0x8279, 0x2b9a, 0x4f7e, 0x0, 0x1);
        gbc.writeMem(0x4f7e, { 0xea });
        gbc.writeMem(0xce21, { 0x3a });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x28ef, gbc.sp());
        EXPECT(0xce22, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xce21));
        // 3A 0201
        gbc.setState(0x2c84, 0xe085, 0x2ca0, 0xfd1c, 0x99af, 0x15ed, 0x0, 0x0);
        gbc.writeMem(0x15ed, { 0x1f });
        gbc.writeMem(0x2c84, { 0x3a });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xe085, gbc.sp());
        EXPECT(0x2c85, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0204
        gbc.setState(0x2004, 0x701, 0x2750, 0x607b, 0x21a4, 0x863f, 0x0, 0x1);
        gbc.writeMem(0x2004, { 0x3a });
        gbc.writeMem(0x863f, { 0x5 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x701, gbc.sp());
        EXPECT(0x2005, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5, gbc.readMem(0x863f));
        // 3A 0205
        gbc.setState(0xaede, 0x7a16, 0xf70, 0xe241, 0x4626, 0x6a13, 0x1, 0x1);
        gbc.writeMem(0x6a13, { 0x8d });
        gbc.writeMem(0xaede, { 0x3a });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x7a16, gbc.sp());
        EXPECT(0xaedf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xaede));
        // 3A 0206
        gbc.setState(0xe3be, 0x9ebd, 0xe780, 0xe82f, 0xbabf, 0x2680, 0x0, 0x1);
        gbc.writeMem(0x2680, { 0x6e });
        gbc.writeMem(0xe3be, { 0x3a });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x9ebd, gbc.sp());
        EXPECT(0xe3bf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xe3be));
        // 3A 0207
        gbc.setState(0x49cc, 0xeb1d, 0x6640, 0xf2be, 0xfacd, 0xd910, 0x0, 0x0);
        gbc.writeMem(0x49cc, { 0x3a });
        gbc.writeMem(0xd910, { 0xbc });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0xeb1d, gbc.sp());
        EXPECT(0x49cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xbc, gbc.readMem(0xd910));
        // 3A 0208
        gbc.setState(0x4ba1, 0x969f, 0x5c50, 0x2b96, 0xf624, 0x44b9, 0x0, 0x0);
        gbc.writeMem(0x44b9, { 0xfb });
        gbc.writeMem(0x4ba1, { 0x3a });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x969f, gbc.sp());
        EXPECT(0x4ba2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0209
        gbc.setState(0xe866, 0xf0e2, 0x6e10, 0x4e3, 0x7f55, 0x5c6d, 0x1, 0x1);
        gbc.writeMem(0x5c6d, { 0x45 });
        gbc.writeMem(0xe866, { 0x3a });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xf0e2, gbc.sp());
        EXPECT(0xe867, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xe866));
        // 3A 020A
        gbc.setState(0x9d8b, 0x4fdb, 0x4f80, 0xe5c1, 0x84b9, 0xcff7, 0x1, 0x0);
        gbc.writeMem(0x9d8b, { 0x3a });
        gbc.writeMem(0xcff7, { 0x6 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x4fdb, gbc.sp());
        EXPECT(0x9d8c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9d8b));
        EXPECT(0x6, gbc.readMem(0xcff7));
        // 3A 020B
        gbc.setState(0xc007, 0x659, 0x2050, 0x964e, 0xcb48, 0x6a17, 0x0, 0x1);
        gbc.writeMem(0x6a17, { 0x1b });
        gbc.writeMem(0xc007, { 0x3a });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x659, gbc.sp());
        EXPECT(0xc008, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc007));
        // 3A 020C
        gbc.setState(0x567f, 0x3263, 0xbf30, 0x95cf, 0x5b4e, 0x4bc7, 0x1, 0x1);
        gbc.writeMem(0x4bc7, { 0xd4 });
        gbc.writeMem(0x567f, { 0x3a });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x3263, gbc.sp());
        EXPECT(0x5680, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 020D
        gbc.setState(0x1cd9, 0x41e9, 0x650, 0xf1af, 0x3e76, 0xf22e, 0x1, 0x1);
        gbc.writeMem(0x1cd9, { 0x3a });
        gbc.writeMem(0xf22e, { 0xb2 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x41e9, gbc.sp());
        EXPECT(0x1cda, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb2, gbc.readMem(0xf22e));
        // 3A 020E
        gbc.setState(0x3111, 0x1f16, 0xafd0, 0x3899, 0x16dd, 0x9cbc, 0x0, 0x1);
        gbc.writeMem(0x3111, { 0x3a });
        gbc.writeMem(0x9cbc, { 0xd9 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x1f16, gbc.sp());
        EXPECT(0x3112, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd9, gbc.readMem(0x9cbc));
        // 3A 020F
        gbc.setState(0xcfc2, 0x8f94, 0xf4d0, 0xc10b, 0x7971, 0x142, 0x0, 0x1);
        gbc.writeMem(0x142, { 0x19 });
        gbc.writeMem(0xcfc2, { 0x3a });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x8f94, gbc.sp());
        EXPECT(0xcfc3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xcfc2));
        // 3A 0210
        gbc.setState(0x5519, 0x7fae, 0x2650, 0x3b, 0x5976, 0x8757, 0x0, 0x0);
        gbc.writeMem(0x5519, { 0x3a });
        gbc.writeMem(0x8757, { 0xc9 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x7fae, gbc.sp());
        EXPECT(0x551a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc9, gbc.readMem(0x8757));
        // 3A 0211
        gbc.setState(0x16e2, 0xa888, 0xcd40, 0x21ea, 0x6244, 0x4d81, 0x1, 0x0);
        gbc.writeMem(0x16e2, { 0x3a });
        gbc.writeMem(0x4d81, { 0x21 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0xa888, gbc.sp());
        EXPECT(0x16e3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0212
        gbc.setState(0xc57, 0xaeba, 0x16f0, 0xd4b3, 0xeeea, 0x363a, 0x0, 0x0);
        gbc.writeMem(0xc57, { 0x3a });
        gbc.writeMem(0x363a, { 0x44 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xaeba, gbc.sp());
        EXPECT(0xc58, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0213
        gbc.setState(0xea7d, 0x267f, 0x1a40, 0x63e5, 0xbb58, 0x2575, 0x0, 0x0);
        gbc.writeMem(0x2575, { 0xa4 });
        gbc.writeMem(0xea7d, { 0x3a });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x267f, gbc.sp());
        EXPECT(0xea7e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xea7d));
        // 3A 0214
        gbc.setState(0x17f5, 0xea9e, 0x8b90, 0x82d3, 0x681a, 0x5, 0x1, 0x1);
        gbc.writeMem(0x5, { 0xef });
        gbc.writeMem(0x17f5, { 0x3a });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xea9e, gbc.sp());
        EXPECT(0x17f6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0215
        gbc.setState(0xa650, 0x7b95, 0x8d30, 0x3426, 0x5904, 0x7959, 0x0, 0x0);
        gbc.writeMem(0x7959, { 0xa4 });
        gbc.writeMem(0xa650, { 0x3a });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x7b95, gbc.sp());
        EXPECT(0xa651, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa650));
        // 3A 0216
        gbc.setState(0xe56b, 0x2f59, 0xc3a0, 0xd7eb, 0x3043, 0xcf18, 0x1, 0x1);
        gbc.writeMem(0xcf18, { 0xe8 });
        gbc.writeMem(0xe56b, { 0x3a });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x2f59, gbc.sp());
        EXPECT(0xe56c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe8, gbc.readMem(0xcf18));
        EXPECT(0x3a, gbc.readMem(0xe56b));
        // 3A 0217
        gbc.setState(0xc3f1, 0x4e43, 0x510, 0x3426, 0x71c8, 0x5010, 0x1, 0x0);
        gbc.writeMem(0x5010, { 0xf2 });
        gbc.writeMem(0xc3f1, { 0x3a });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x4e43, gbc.sp());
        EXPECT(0xc3f2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc3f1));
        // 3A 0218
        gbc.setState(0xd509, 0x8e05, 0xd200, 0xbd44, 0xf034, 0x2746, 0x0, 0x1);
        gbc.writeMem(0x2746, { 0xb3 });
        gbc.writeMem(0xd509, { 0x3a });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x8e05, gbc.sp());
        EXPECT(0xd50a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xd509));
        // 3A 0219
        gbc.setState(0x2cd2, 0x5551, 0xcd20, 0x5eed, 0x1f2e, 0x3878, 0x1, 0x0);
        gbc.writeMem(0x2cd2, { 0x3a });
        gbc.writeMem(0x3878, { 0x34 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x5551, gbc.sp());
        EXPECT(0x2cd3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 021A
        gbc.setState(0x5def, 0x170e, 0x2e40, 0xbf0c, 0x5f5b, 0x5660, 0x0, 0x0);
        gbc.writeMem(0x5660, { 0x3b });
        gbc.writeMem(0x5def, { 0x3a });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x170e, gbc.sp());
        EXPECT(0x5df0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 021B
        gbc.setState(0x290, 0x5773, 0x7dd0, 0x7e83, 0x4c87, 0xc08d, 0x0, 0x0);
        gbc.writeMem(0x290, { 0x3a });
        gbc.writeMem(0xc08d, { 0xa6 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x5773, gbc.sp());
        EXPECT(0x291, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa6, gbc.readMem(0xc08d));
        // 3A 021C
        gbc.setState(0x9687, 0x8985, 0x4eb0, 0x7bc5, 0xf3bd, 0x7139, 0x1, 0x0);
        gbc.writeMem(0x7139, { 0xe2 });
        gbc.writeMem(0x9687, { 0x3a });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x8985, gbc.sp());
        EXPECT(0x9688, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9687));
        // 3A 021D
        gbc.setState(0x3b8c, 0xa4b9, 0xe580, 0x82ab, 0x6b88, 0x5885, 0x1, 0x1);
        gbc.writeMem(0x3b8c, { 0x3a });
        gbc.writeMem(0x5885, { 0xec });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xa4b9, gbc.sp());
        EXPECT(0x3b8d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 021E
        gbc.setState(0x9883, 0xe32c, 0xf7d0, 0x5631, 0xf0e9, 0xf22c, 0x0, 0x0);
        gbc.writeMem(0x9883, { 0x3a });
        gbc.writeMem(0xf22c, { 0x65 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xe32c, gbc.sp());
        EXPECT(0x9884, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9883));
        EXPECT(0x65, gbc.readMem(0xf22c));
        // 3A 021F
        gbc.setState(0xd4f3, 0x4413, 0xb320, 0x5f8, 0x2ce3, 0xd18b, 0x0, 0x1);
        gbc.writeMem(0xd18b, { 0x8b });
        gbc.writeMem(0xd4f3, { 0x3a });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x4413, gbc.sp());
        EXPECT(0xd4f4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x8b, gbc.readMem(0xd18b));
        EXPECT(0x3a, gbc.readMem(0xd4f3));
        // 3A 0220
        gbc.setState(0x48e7, 0x7d2f, 0xcf80, 0x2332, 0x1a4, 0xecae, 0x1, 0x0);
        gbc.writeMem(0x48e7, { 0x3a });
        gbc.writeMem(0xecae, { 0x74 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x7d2f, gbc.sp());
        EXPECT(0x48e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x74, gbc.readMem(0xecae));
        // 3A 0221
        gbc.setState(0x28fb, 0x7131, 0x4a90, 0x5975, 0x6bb5, 0xa07f, 0x0, 0x1);
        gbc.writeMem(0x28fb, { 0x3a });
        gbc.writeMem(0xa07f, { 0x7f });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x7131, gbc.sp());
        EXPECT(0x28fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7f, gbc.readMem(0xa07f));
        // 3A 0222
        gbc.setState(0x6005, 0xa603, 0x6fe0, 0xce92, 0x5939, 0x5239, 0x0, 0x1);
        gbc.writeMem(0x5239, { 0xf2 });
        gbc.writeMem(0x6005, { 0x3a });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xa603, gbc.sp());
        EXPECT(0x6006, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0223
        gbc.setState(0xa4e, 0x5a0, 0x710, 0x6df3, 0x1535, 0x2a07, 0x0, 0x1);
        gbc.writeMem(0xa4e, { 0x3a });
        gbc.writeMem(0x2a07, { 0xac });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x5a0, gbc.sp());
        EXPECT(0xa4f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0224
        gbc.setState(0xd5e2, 0xefba, 0xcff0, 0x1668, 0x778d, 0xb83a, 0x0, 0x1);
        gbc.writeMem(0xb83a, { 0xa2 });
        gbc.writeMem(0xd5e2, { 0x3a });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xefba, gbc.sp());
        EXPECT(0xd5e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa2, gbc.readMem(0xb83a));
        EXPECT(0x3a, gbc.readMem(0xd5e2));
        // 3A 0225
        gbc.setState(0xd9a7, 0xed21, 0xccf0, 0x9d05, 0xc288, 0xa26f, 0x0, 0x1);
        gbc.writeMem(0xa26f, { 0x8d });
        gbc.writeMem(0xd9a7, { 0x3a });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xed21, gbc.sp());
        EXPECT(0xd9a8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8d, gbc.readMem(0xa26f));
        EXPECT(0x3a, gbc.readMem(0xd9a7));
        // 3A 0226
        gbc.setState(0x7480, 0x4eed, 0xfaa0, 0x12c7, 0x4e2f, 0xc22a, 0x1, 0x0);
        gbc.writeMem(0x7480, { 0x3a });
        gbc.writeMem(0xc22a, { 0xc5 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x4eed, gbc.sp());
        EXPECT(0x7481, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc5, gbc.readMem(0xc22a));
        // 3A 0228
        gbc.setState(0x7f7b, 0x446a, 0xf910, 0x25d1, 0x58a8, 0xd31d, 0x1, 0x0);
        gbc.writeMem(0x7f7b, { 0x3a });
        gbc.writeMem(0xd31d, { 0x68 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x446a, gbc.sp());
        EXPECT(0x7f7c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x68, gbc.readMem(0xd31d));
        // 3A 0229
        gbc.setState(0x9e00, 0x7f25, 0x7470, 0x1ef1, 0x312e, 0xbf41, 0x0, 0x1);
        gbc.writeMem(0x9e00, { 0x3a });
        gbc.writeMem(0xbf41, { 0xa7 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x7f25, gbc.sp());
        EXPECT(0x9e01, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9e00));
        EXPECT(0xa7, gbc.readMem(0xbf41));
        // 3A 022A
        gbc.setState(0xea40, 0x7bd0, 0x7690, 0xbeb2, 0x516, 0xf70b, 0x0, 0x1);
        gbc.writeMem(0xea40, { 0x3a });
        gbc.writeMem(0xf70b, { 0x22 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x7bd0, gbc.sp());
        EXPECT(0xea41, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xea40));
        EXPECT(0x22, gbc.readMem(0xf70b));
        // 3A 022B
        gbc.setState(0x3a00, 0x5b1d, 0xc670, 0xe9be, 0xd1d7, 0xc89a, 0x0, 0x1);
        gbc.writeMem(0x3a00, { 0x3a });
        gbc.writeMem(0xc89a, { 0x3d });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x5b1d, gbc.sp());
        EXPECT(0x3a01, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3d, gbc.readMem(0xc89a));
        // 3A 022C
        gbc.setState(0xbb92, 0x2299, 0x1730, 0x4d9, 0x1895, 0xc885, 0x1, 0x1);
        gbc.writeMem(0xbb92, { 0x3a });
        gbc.writeMem(0xc885, { 0x5d });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x2299, gbc.sp());
        EXPECT(0xbb93, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbb92));
        EXPECT(0x5d, gbc.readMem(0xc885));
        // 3A 022D
        gbc.setState(0x14b8, 0x9a9d, 0x3560, 0xf8b5, 0xd7e7, 0xbec0, 0x0, 0x1);
        gbc.writeMem(0x14b8, { 0x3a });
        gbc.writeMem(0xbec0, { 0xee });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x9a9d, gbc.sp());
        EXPECT(0x14b9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xee, gbc.readMem(0xbec0));
        // 3A 022F
        gbc.setState(0x2f92, 0xaa3b, 0x4b70, 0xa3d, 0xf59a, 0x4ddb, 0x0, 0x1);
        gbc.writeMem(0x2f92, { 0x3a });
        gbc.writeMem(0x4ddb, { 0xf9 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xaa3b, gbc.sp());
        EXPECT(0x2f93, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0230
        gbc.setState(0x4a5f, 0xa9f1, 0xa2f0, 0x46f5, 0x9875, 0x94d, 0x0, 0x1);
        gbc.writeMem(0x94d, { 0x15 });
        gbc.writeMem(0x4a5f, { 0x3a });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xa9f1, gbc.sp());
        EXPECT(0x4a60, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0231
        gbc.setState(0xb2c3, 0x72d, 0xcd70, 0x14a5, 0x255f, 0x3ece, 0x0, 0x0);
        gbc.writeMem(0x3ece, { 0x27 });
        gbc.writeMem(0xb2c3, { 0x3a });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x72d, gbc.sp());
        EXPECT(0xb2c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb2c3));
        // 3A 0232
        gbc.setState(0x262b, 0x2b00, 0x37b0, 0xbfd6, 0x8769, 0xd2ac, 0x1, 0x0);
        gbc.writeMem(0x262b, { 0x3a });
        gbc.writeMem(0xd2ac, { 0x30 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x2b00, gbc.sp());
        EXPECT(0x262c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x30, gbc.readMem(0xd2ac));
        // 3A 0233
        gbc.setState(0xc060, 0xdbcf, 0xe590, 0xf3f, 0xc52b, 0x47d1, 0x0, 0x1);
        gbc.writeMem(0x47d1, { 0x73 });
        gbc.writeMem(0xc060, { 0x3a });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xdbcf, gbc.sp());
        EXPECT(0xc061, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc060));
        // 3A 0234
        gbc.setState(0xabed, 0xe4, 0x61d0, 0x1010, 0x7ea5, 0x26ff, 0x0, 0x0);
        gbc.writeMem(0x26ff, { 0x70 });
        gbc.writeMem(0xabed, { 0x3a });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xe4, gbc.sp());
        EXPECT(0xabee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xabed));
        // 3A 0235
        gbc.setState(0xa41a, 0x6bb7, 0x9320, 0x4f92, 0xdb25, 0x6211, 0x0, 0x0);
        gbc.writeMem(0x6211, { 0x18 });
        gbc.writeMem(0xa41a, { 0x3a });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x6bb7, gbc.sp());
        EXPECT(0xa41b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa41a));
        // 3A 0236
        gbc.setState(0x8307, 0x4e56, 0xdeb0, 0xd405, 0x6fd5, 0xcf3e, 0x0, 0x0);
        gbc.writeMem(0x8307, { 0x3a });
        gbc.writeMem(0xcf3e, { 0x5f });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x4e56, gbc.sp());
        EXPECT(0x8308, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8307));
        EXPECT(0x5f, gbc.readMem(0xcf3e));
        // 3A 0237
        gbc.setState(0x2083, 0xc000, 0xd170, 0xa5f1, 0x47ab, 0x5da7, 0x1, 0x0);
        gbc.writeMem(0x2083, { 0x3a });
        gbc.writeMem(0x5da7, { 0xe2 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xc000, gbc.sp());
        EXPECT(0x2084, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0238
        gbc.setState(0x9e, 0x497, 0xf220, 0xfc56, 0x8dfc, 0x2f0b, 0x0, 0x0);
        gbc.writeMem(0x9e, { 0x3a });
        gbc.writeMem(0x2f0b, { 0x74 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x497, gbc.sp());
        EXPECT(0x9f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0239
        gbc.setState(0xd54a, 0x2706, 0x2bc0, 0x61a7, 0xacdc, 0x673b, 0x1, 0x0);
        gbc.writeMem(0x673b, { 0xbc });
        gbc.writeMem(0xd54a, { 0x3a });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x2706, gbc.sp());
        EXPECT(0xd54b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xd54a));
        // 3A 023A
        gbc.setState(0x8abe, 0xd8e0, 0xfc20, 0x53b1, 0xfb2, 0xe7d9, 0x1, 0x0);
        gbc.writeMem(0x8abe, { 0x3a });
        gbc.writeMem(0xe7d9, { 0xed });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xd8e0, gbc.sp());
        EXPECT(0x8abf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8abe));
        EXPECT(0xed, gbc.readMem(0xe7d9));
        // 3A 023B
        gbc.setState(0x2cab, 0xce28, 0x2f80, 0xe3f3, 0x1919, 0x5c55, 0x1, 0x1);
        gbc.writeMem(0x2cab, { 0x3a });
        gbc.writeMem(0x5c55, { 0xcd });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xce28, gbc.sp());
        EXPECT(0x2cac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 023C
        gbc.setState(0x10f3, 0xb839, 0xfa50, 0x1721, 0x30ac, 0xbcaf, 0x1, 0x0);
        gbc.writeMem(0x10f3, { 0x3a });
        gbc.writeMem(0xbcaf, { 0xef });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xb839, gbc.sp());
        EXPECT(0x10f4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xbcaf));
        // 3A 023E
        gbc.setState(0xca19, 0xcbfb, 0x52b0, 0xe57e, 0xdbf3, 0x7647, 0x0, 0x0);
        gbc.writeMem(0x7647, { 0xc });
        gbc.writeMem(0xca19, { 0x3a });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xcbfb, gbc.sp());
        EXPECT(0xca1a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xca19));
        // 3A 023F
        gbc.setState(0xca5c, 0xbafa, 0xb20, 0x41d4, 0x7347, 0x28c9, 0x1, 0x0);
        gbc.writeMem(0x28c9, { 0x2a });
        gbc.writeMem(0xca5c, { 0x3a });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0xbafa, gbc.sp());
        EXPECT(0xca5d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xca5c));
        // 3A 0240
        gbc.setState(0xb1e7, 0xa700, 0x6880, 0x74ad, 0x4069, 0x3a5a, 0x1, 0x1);
        gbc.writeMem(0x3a5a, { 0x4d });
        gbc.writeMem(0xb1e7, { 0x3a });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xa700, gbc.sp());
        EXPECT(0xb1e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb1e7));
        // 3A 0241
        gbc.setState(0x499a, 0x91df, 0x3ba0, 0x12ec, 0x23ba, 0xc649, 0x0, 0x0);
        gbc.writeMem(0x499a, { 0x3a });
        gbc.writeMem(0xc649, { 0xc6 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x91df, gbc.sp());
        EXPECT(0x499b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc6, gbc.readMem(0xc649));
        // 3A 0242
        gbc.setState(0x42c1, 0xaa13, 0x5830, 0x83bb, 0x918, 0xa3ae, 0x1, 0x0);
        gbc.writeMem(0x42c1, { 0x3a });
        gbc.writeMem(0xa3ae, { 0xa6 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xaa13, gbc.sp());
        EXPECT(0x42c2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa6, gbc.readMem(0xa3ae));
        // 3A 0243
        gbc.setState(0x1f79, 0x6e5f, 0x6d50, 0xa405, 0xb3c8, 0xbb62, 0x0, 0x0);
        gbc.writeMem(0x1f79, { 0x3a });
        gbc.writeMem(0xbb62, { 0x2a });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x6e5f, gbc.sp());
        EXPECT(0x1f7a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2a, gbc.readMem(0xbb62));
        // 3A 0244
        gbc.setState(0xcefb, 0xa138, 0xa7f0, 0x6285, 0x5b61, 0x8f1d, 0x1, 0x0);
        gbc.writeMem(0x8f1d, { 0x8c });
        gbc.writeMem(0xcefb, { 0x3a });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xa138, gbc.sp());
        EXPECT(0xcefc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8c, gbc.readMem(0x8f1d));
        EXPECT(0x3a, gbc.readMem(0xcefb));
        // 3A 0245
        gbc.setState(0xce6e, 0xbdc5, 0x1e30, 0x16c5, 0xcb2a, 0xa0c2, 0x0, 0x0);
        gbc.writeMem(0xa0c2, { 0x30 });
        gbc.writeMem(0xce6e, { 0x3a });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xbdc5, gbc.sp());
        EXPECT(0xce6f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x30, gbc.readMem(0xa0c2));
        EXPECT(0x3a, gbc.readMem(0xce6e));
        // 3A 0246
        gbc.setState(0x7d27, 0xb0bf, 0x3240, 0x1c45, 0x6d70, 0x819a, 0x1, 0x1);
        gbc.writeMem(0x7d27, { 0x3a });
        gbc.writeMem(0x819a, { 0xb2 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xb0bf, gbc.sp());
        EXPECT(0x7d28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb2, gbc.readMem(0x819a));
        // 3A 0247
        gbc.setState(0x10f9, 0xeb13, 0xa710, 0x7283, 0x8e8c, 0x5e0d, 0x1, 0x1);
        gbc.writeMem(0x10f9, { 0x3a });
        gbc.writeMem(0x5e0d, { 0x86 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xeb13, gbc.sp());
        EXPECT(0x10fa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0248
        gbc.setState(0xfeb, 0x85f6, 0x32f0, 0x8c3c, 0x88c, 0x3912, 0x0, 0x1);
        gbc.writeMem(0xfeb, { 0x3a });
        gbc.writeMem(0x3912, { 0x20 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x85f6, gbc.sp());
        EXPECT(0xfec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0249
        gbc.setState(0xba2d, 0xb719, 0x3c70, 0xfff9, 0x1b07, 0xc096, 0x0, 0x1);
        gbc.writeMem(0xba2d, { 0x3a });
        gbc.writeMem(0xc096, { 0x9b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xb719, gbc.sp());
        EXPECT(0xba2e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xba2d));
        EXPECT(0x9b, gbc.readMem(0xc096));
        // 3A 024A
        gbc.setState(0x4c6, 0xec03, 0x590, 0x6852, 0x5cc6, 0x45a2, 0x0, 0x0);
        gbc.writeMem(0x4c6, { 0x3a });
        gbc.writeMem(0x45a2, { 0xf4 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xec03, gbc.sp());
        EXPECT(0x4c7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 024B
        gbc.setState(0x20cd, 0xeaba, 0x78f0, 0xdc19, 0x6400, 0xdc38, 0x1, 0x1);
        gbc.writeMem(0x20cd, { 0x3a });
        gbc.writeMem(0xdc38, { 0x8e });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0xeaba, gbc.sp());
        EXPECT(0x20ce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8e, gbc.readMem(0xdc38));
        // 3A 024D
        gbc.setState(0xe119, 0xfb9f, 0xd670, 0xfbec, 0x7bc4, 0xd2fe, 0x1, 0x1);
        gbc.writeMem(0xd2fe, { 0x22 });
        gbc.writeMem(0xe119, { 0x3a });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xfb9f, gbc.sp());
        EXPECT(0xe11a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x22, gbc.readMem(0xd2fe));
        EXPECT(0x3a, gbc.readMem(0xe119));
        // 3A 024F
        gbc.setState(0x9d3d, 0xcf96, 0xa050, 0x34bb, 0x49ae, 0xd4e4, 0x0, 0x0);
        gbc.writeMem(0x9d3d, { 0x3a });
        gbc.writeMem(0xd4e4, { 0x41 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xcf96, gbc.sp());
        EXPECT(0x9d3e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9d3d));
        EXPECT(0x41, gbc.readMem(0xd4e4));
        // 3A 0250
        gbc.setState(0x1ac6, 0xb1c2, 0x40b0, 0xa083, 0xd118, 0xa196, 0x1, 0x0);
        gbc.writeMem(0x1ac6, { 0x3a });
        gbc.writeMem(0xa196, { 0x70 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xb1c2, gbc.sp());
        EXPECT(0x1ac7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x70, gbc.readMem(0xa196));
        // 3A 0251
        gbc.setState(0x46e3, 0x71b0, 0xee70, 0xc9a9, 0xa9ac, 0x2220, 0x0, 0x0);
        gbc.writeMem(0x2220, { 0xa3 });
        gbc.writeMem(0x46e3, { 0x3a });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x71b0, gbc.sp());
        EXPECT(0x46e4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0252
        gbc.setState(0xe650, 0x711d, 0x9ee0, 0x3990, 0xbe59, 0x2fd7, 0x1, 0x1);
        gbc.writeMem(0x2fd7, { 0x73 });
        gbc.writeMem(0xe650, { 0x3a });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x711d, gbc.sp());
        EXPECT(0xe651, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xe650));
        // 3A 0253
        gbc.setState(0x83cd, 0x33c4, 0xc9c0, 0xe3a0, 0x4b1e, 0xfcc4, 0x0, 0x1);
        gbc.writeMem(0x83cd, { 0x3a });
        gbc.writeMem(0xfcc4, { 0xf });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x33c4, gbc.sp());
        EXPECT(0x83ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x83cd));
        EXPECT(0xf, gbc.readMem(0xfcc4));
        // 3A 0255
        gbc.setState(0xd05, 0x5c98, 0xcff0, 0xaff, 0xaf02, 0xf3ba, 0x0, 0x1);
        gbc.writeMem(0xd05, { 0x3a });
        gbc.writeMem(0xf3ba, { 0x0 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x5c98, gbc.sp());
        EXPECT(0xd06, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x0, gbc.readMem(0xf3ba));
        // 3A 0256
        gbc.setState(0x2d84, 0x8722, 0x4350, 0xfa33, 0x61f7, 0x5636, 0x0, 0x0);
        gbc.writeMem(0x2d84, { 0x3a });
        gbc.writeMem(0x5636, { 0x1f });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x8722, gbc.sp());
        EXPECT(0x2d85, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0257
        gbc.setState(0x496f, 0xaf38, 0x2a0, 0xe427, 0x62ed, 0x882e, 0x0, 0x1);
        gbc.writeMem(0x496f, { 0x3a });
        gbc.writeMem(0x882e, { 0x41 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xaf38, gbc.sp());
        EXPECT(0x4970, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x41, gbc.readMem(0x882e));
        // 3A 0258
        gbc.setState(0x1ffa, 0x70c9, 0xf250, 0x1f93, 0x9cd0, 0x1de4, 0x1, 0x1);
        gbc.writeMem(0x1de4, { 0x97 });
        gbc.writeMem(0x1ffa, { 0x3a });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x70c9, gbc.sp());
        EXPECT(0x1ffb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0259
        gbc.setState(0x3a1a, 0x2f57, 0x2ba0, 0xfe2, 0xff54, 0xaefb, 0x1, 0x0);
        gbc.writeMem(0x3a1a, { 0x3a });
        gbc.writeMem(0xaefb, { 0xe6 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x2f57, gbc.sp());
        EXPECT(0x3a1b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe6, gbc.readMem(0xaefb));
        // 3A 025A
        gbc.setState(0x9df4, 0xb6dd, 0x6020, 0x85e9, 0x8ddf, 0x6ae9, 0x0, 0x0);
        gbc.writeMem(0x6ae9, { 0x7f });
        gbc.writeMem(0x9df4, { 0x3a });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xb6dd, gbc.sp());
        EXPECT(0x9df5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9df4));
        // 3A 025B
        gbc.setState(0x7c5b, 0x7b6d, 0x530, 0x92fa, 0x6122, 0xbe33, 0x1, 0x1);
        gbc.writeMem(0x7c5b, { 0x3a });
        gbc.writeMem(0xbe33, { 0xfe });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x7b6d, gbc.sp());
        EXPECT(0x7c5c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xfe, gbc.readMem(0xbe33));
        // 3A 025C
        gbc.setState(0x1030, 0xa903, 0x780, 0xa9ef, 0x6fb2, 0xb1ec, 0x0, 0x0);
        gbc.writeMem(0x1030, { 0x3a });
        gbc.writeMem(0xb1ec, { 0xee });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xa903, gbc.sp());
        EXPECT(0x1031, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xee, gbc.readMem(0xb1ec));
        // 3A 025D
        gbc.setState(0x966d, 0x26b7, 0x7920, 0x8afc, 0x11a0, 0x5f1c, 0x1, 0x1);
        gbc.writeMem(0x5f1c, { 0xb });
        gbc.writeMem(0x966d, { 0x3a });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x26b7, gbc.sp());
        EXPECT(0x966e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x966d));
        // 3A 025E
        gbc.setState(0xec0c, 0x1c0e, 0xf5c0, 0x6c38, 0xe042, 0x41ff, 0x1, 0x0);
        gbc.writeMem(0x41ff, { 0xba });
        gbc.writeMem(0xec0c, { 0x3a });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x1c0e, gbc.sp());
        EXPECT(0xec0d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xec0c));
        // 3A 025F
        gbc.setState(0x1465, 0x1c0e, 0x39b0, 0x33c0, 0xc21b, 0xe8e4, 0x1, 0x1);
        gbc.writeMem(0x1465, { 0x3a });
        gbc.writeMem(0xe8e4, { 0xdc });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x1c0e, gbc.sp());
        EXPECT(0x1466, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xdc, gbc.readMem(0xe8e4));
        // 3A 0260
        gbc.setState(0x8f23, 0xa30c, 0x56d0, 0x3737, 0xac3a, 0xf840, 0x0, 0x0);
        gbc.writeMem(0x8f23, { 0x3a });
        gbc.writeMem(0xf840, { 0xaa });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xa30c, gbc.sp());
        EXPECT(0x8f24, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8f23));
        EXPECT(0xaa, gbc.readMem(0xf840));
        // 3A 0261
        gbc.setState(0x20da, 0x5b90, 0xbf40, 0x2a18, 0xe92f, 0x7adf, 0x1, 0x0);
        gbc.writeMem(0x20da, { 0x3a });
        gbc.writeMem(0x7adf, { 0xb6 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x5b90, gbc.sp());
        EXPECT(0x20db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0262
        gbc.setState(0x1383, 0xb6c5, 0xb030, 0xb719, 0x969f, 0xf818, 0x0, 0x1);
        gbc.writeMem(0x1383, { 0x3a });
        gbc.writeMem(0xf818, { 0x9e });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xb6c5, gbc.sp());
        EXPECT(0x1384, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x9e, gbc.readMem(0xf818));
        // 3A 0263
        gbc.setState(0x3315, 0xf9b7, 0x95f0, 0xf80c, 0xb584, 0x9449, 0x0, 0x1);
        gbc.writeMem(0x3315, { 0x3a });
        gbc.writeMem(0x9449, { 0x24 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xf9b7, gbc.sp());
        EXPECT(0x3316, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x24, gbc.readMem(0x9449));
        // 3A 0264
        gbc.setState(0x7139, 0x6e93, 0x3220, 0xdd50, 0x8301, 0x501b, 0x0, 0x1);
        gbc.writeMem(0x501b, { 0x99 });
        gbc.writeMem(0x7139, { 0x3a });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x6e93, gbc.sp());
        EXPECT(0x713a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0265
        gbc.setState(0xa92b, 0x4c81, 0xfdc0, 0x749c, 0x4b5a, 0xffef, 0x1, 0x0);
        gbc.writeMem(0xa92b, { 0x3a });
        gbc.writeMem(0xffef, { 0xdb });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x4c81, gbc.sp());
        EXPECT(0xa92c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa92b));
        EXPECT(0xdb, gbc.readMem(0xffef));
        // 3A 0266
        gbc.setState(0xa87f, 0x1c7f, 0x2a10, 0x599b, 0x9f2c, 0x4f78, 0x1, 0x0);
        gbc.writeMem(0x4f78, { 0xa6 });
        gbc.writeMem(0xa87f, { 0x3a });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x1c7f, gbc.sp());
        EXPECT(0xa880, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa87f));
        // 3A 0267
        gbc.setState(0x5b40, 0x682c, 0xaaa0, 0x9938, 0xcd6d, 0xced1, 0x0, 0x1);
        gbc.writeMem(0x5b40, { 0x3a });
        gbc.writeMem(0xced1, { 0x49 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x682c, gbc.sp());
        EXPECT(0x5b41, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x49, gbc.readMem(0xced1));
        // 3A 0268
        gbc.setState(0xd76, 0xe2b1, 0x17e0, 0xa9d8, 0x64fe, 0xead1, 0x0, 0x1);
        gbc.writeMem(0xd76, { 0x3a });
        gbc.writeMem(0xead1, { 0xb3 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xe2b1, gbc.sp());
        EXPECT(0xd77, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb3, gbc.readMem(0xead1));
        // 3A 0269
        gbc.setState(0x724d, 0xf41a, 0xfa10, 0xa14, 0xb515, 0xd1b8, 0x1, 0x1);
        gbc.writeMem(0x724d, { 0x3a });
        gbc.writeMem(0xd1b8, { 0xd4 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xf41a, gbc.sp());
        EXPECT(0x724e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd4, gbc.readMem(0xd1b8));
        // 3A 026A
        gbc.setState(0x2516, 0x876d, 0xa3a0, 0x4405, 0x522c, 0x720a, 0x0, 0x0);
        gbc.writeMem(0x2516, { 0x3a });
        gbc.writeMem(0x720a, { 0xf9 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0x876d, gbc.sp());
        EXPECT(0x2517, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 026B
        gbc.setState(0xcda9, 0x5361, 0xfe20, 0x5c45, 0xc411, 0xd92a, 0x1, 0x1);
        gbc.writeMem(0xcda9, { 0x3a });
        gbc.writeMem(0xd92a, { 0xfa });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x5361, gbc.sp());
        EXPECT(0xcdaa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xcda9));
        EXPECT(0xfa, gbc.readMem(0xd92a));
        // 3A 026C
        gbc.setState(0xb74d, 0x8af7, 0x4cb0, 0xa35a, 0x89c, 0x7fe8, 0x0, 0x1);
        gbc.writeMem(0x7fe8, { 0xe1 });
        gbc.writeMem(0xb74d, { 0x3a });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x8af7, gbc.sp());
        EXPECT(0xb74e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb74d));
        // 3A 026D
        gbc.setState(0x2c4c, 0x459e, 0x8890, 0x8b93, 0xa5e2, 0x17b0, 0x1, 0x1);
        gbc.writeMem(0x17b0, { 0x63 });
        gbc.writeMem(0x2c4c, { 0x3a });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x459e, gbc.sp());
        EXPECT(0x2c4d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 026E
        gbc.setState(0x6bad, 0xa3c8, 0xe980, 0x31e9, 0x4b11, 0x5c1d, 0x0, 0x1);
        gbc.writeMem(0x5c1d, { 0xd3 });
        gbc.writeMem(0x6bad, { 0x3a });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xa3c8, gbc.sp());
        EXPECT(0x6bae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 026F
        gbc.setState(0x9e66, 0x4e72, 0xe440, 0x35b0, 0x9a8e, 0xd00, 0x0, 0x1);
        gbc.writeMem(0xd00, { 0x8e });
        gbc.writeMem(0x9e66, { 0x3a });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x4e72, gbc.sp());
        EXPECT(0x9e67, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9e66));
        // 3A 0270
        gbc.setState(0x813d, 0xdd05, 0x4450, 0x16a7, 0xf96b, 0xc7c2, 0x1, 0x1);
        gbc.writeMem(0x813d, { 0x3a });
        gbc.writeMem(0xc7c2, { 0x1f });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xdd05, gbc.sp());
        EXPECT(0x813e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x813d));
        EXPECT(0x1f, gbc.readMem(0xc7c2));
        // 3A 0271
        gbc.setState(0x7d02, 0x66bf, 0x96d0, 0xedf5, 0x9305, 0x5542, 0x0, 0x0);
        gbc.writeMem(0x5542, { 0xc0 });
        gbc.writeMem(0x7d02, { 0x3a });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x66bf, gbc.sp());
        EXPECT(0x7d03, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0272
        gbc.setState(0x2930, 0x6553, 0x8a50, 0x8d5e, 0x897c, 0x1834, 0x0, 0x1);
        gbc.writeMem(0x1834, { 0xb9 });
        gbc.writeMem(0x2930, { 0x3a });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x6553, gbc.sp());
        EXPECT(0x2931, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0273
        gbc.setState(0xed96, 0x294c, 0x32d0, 0x7805, 0x3655, 0x9810, 0x0, 0x1);
        gbc.writeMem(0x9810, { 0xbf });
        gbc.writeMem(0xed96, { 0x3a });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x294c, gbc.sp());
        EXPECT(0xed97, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xbf, gbc.readMem(0x9810));
        EXPECT(0x3a, gbc.readMem(0xed96));
        // 3A 0274
        gbc.setState(0xcd8c, 0xd6be, 0xeac0, 0x6215, 0xb3fc, 0x5b76, 0x0, 0x1);
        gbc.writeMem(0x5b76, { 0x96 });
        gbc.writeMem(0xcd8c, { 0x3a });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xd6be, gbc.sp());
        EXPECT(0xcd8d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xcd8c));
        // 3A 0275
        gbc.setState(0xb65f, 0xa3c0, 0xd690, 0xca03, 0xa55b, 0x7a3f, 0x1, 0x1);
        gbc.writeMem(0x7a3f, { 0x5a });
        gbc.writeMem(0xb65f, { 0x3a });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0xa3c0, gbc.sp());
        EXPECT(0xb660, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb65f));
        // 3A 0276
        gbc.setState(0x2b8, 0x14fc, 0x7570, 0xb27a, 0xb102, 0x69df, 0x1, 0x0);
        gbc.writeMem(0x2b8, { 0x3a });
        gbc.writeMem(0x69df, { 0x7a });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x14fc, gbc.sp());
        EXPECT(0x2b9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0277
        gbc.setState(0xe3c4, 0xa04a, 0x94c0, 0x7655, 0xa161, 0x29d2, 0x1, 0x0);
        gbc.writeMem(0x29d2, { 0x66 });
        gbc.writeMem(0xe3c4, { 0x3a });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xa04a, gbc.sp());
        EXPECT(0xe3c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xe3c4));
        // 3A 0278
        gbc.setState(0xa1ba, 0xc040, 0xfe50, 0x8840, 0x2355, 0x7139, 0x1, 0x0);
        gbc.writeMem(0x7139, { 0xe2 });
        gbc.writeMem(0xa1ba, { 0x3a });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xc040, gbc.sp());
        EXPECT(0xa1bb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa1ba));
        // 3A 0279
        gbc.setState(0x90c5, 0x16d0, 0xe6b0, 0x33f4, 0x1bd8, 0xb2f3, 0x1, 0x0);
        gbc.writeMem(0x90c5, { 0x3a });
        gbc.writeMem(0xb2f3, { 0xbe });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x16d0, gbc.sp());
        EXPECT(0x90c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x90c5));
        EXPECT(0xbe, gbc.readMem(0xb2f3));
        // 3A 027A
        gbc.setState(0x2304, 0x3597, 0xf300, 0x8a27, 0xee4b, 0x86a8, 0x0, 0x1);
        gbc.writeMem(0x2304, { 0x3a });
        gbc.writeMem(0x86a8, { 0x2f });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x3597, gbc.sp());
        EXPECT(0x2305, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2f, gbc.readMem(0x86a8));
        // 3A 027B
        gbc.setState(0x1aaa, 0xf0c9, 0x1b80, 0xc88b, 0xe1bd, 0x9c04, 0x0, 0x1);
        gbc.writeMem(0x1aaa, { 0x3a });
        gbc.writeMem(0x9c04, { 0x10 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xf0c9, gbc.sp());
        EXPECT(0x1aab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x10, gbc.readMem(0x9c04));
        // 3A 027C
        gbc.setState(0x56b9, 0xc0cb, 0xa190, 0x5bc8, 0xe207, 0x76a6, 0x1, 0x1);
        gbc.writeMem(0x56b9, { 0x3a });
        gbc.writeMem(0x76a6, { 0xf1 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xc0cb, gbc.sp());
        EXPECT(0x56ba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 027D
        gbc.setState(0x169, 0xcb3, 0xabb0, 0xeae6, 0x3dfe, 0x66c0, 0x0, 0x0);
        gbc.writeMem(0x169, { 0x3a });
        gbc.writeMem(0x66c0, { 0xa1 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xcb3, gbc.sp());
        EXPECT(0x16a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 027E
        gbc.setState(0xcf8e, 0x5b1b, 0xc60, 0x9415, 0xcdb3, 0xedc5, 0x0, 0x1);
        gbc.writeMem(0xcf8e, { 0x3a });
        gbc.writeMem(0xedc5, { 0xba });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x5b1b, gbc.sp());
        EXPECT(0xcf8f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xcf8e));
        EXPECT(0xba, gbc.readMem(0xedc5));
        // 3A 027F
        gbc.setState(0x51f1, 0x7dd1, 0x3210, 0xff9e, 0x8f40, 0x80ee, 0x0, 0x1);
        gbc.writeMem(0x51f1, { 0x3a });
        gbc.writeMem(0x80ee, { 0x13 });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x7dd1, gbc.sp());
        EXPECT(0x51f2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x13, gbc.readMem(0x80ee));
        // 3A 0280
        gbc.setState(0x457b, 0xa20c, 0xc710, 0xd053, 0x8bb2, 0x171f, 0x1, 0x1);
        gbc.writeMem(0x171f, { 0x71 });
        gbc.writeMem(0x457b, { 0x3a });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xa20c, gbc.sp());
        EXPECT(0x457c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0281
        gbc.setState(0x48c9, 0x7e0f, 0xac40, 0xe0f9, 0xe502, 0x70ca, 0x1, 0x1);
        gbc.writeMem(0x48c9, { 0x3a });
        gbc.writeMem(0x70ca, { 0xb7 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x7e0f, gbc.sp());
        EXPECT(0x48ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0282
        gbc.setState(0xc650, 0x1d4a, 0xadc0, 0x506, 0xdc4, 0x4d28, 0x0, 0x1);
        gbc.writeMem(0x4d28, { 0xdc });
        gbc.writeMem(0xc650, { 0x3a });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x1d4a, gbc.sp());
        EXPECT(0xc651, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc650));
        // 3A 0283
        gbc.setState(0xc29b, 0x4ff5, 0x8b20, 0x65f7, 0x5be6, 0x18b2, 0x1, 0x1);
        gbc.writeMem(0x18b2, { 0x53 });
        gbc.writeMem(0xc29b, { 0x3a });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x4ff5, gbc.sp());
        EXPECT(0xc29c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc29b));
        // 3A 0284
        gbc.setState(0xc161, 0xff51, 0x6e20, 0x8d42, 0x7bc4, 0xe4d3, 0x1, 0x0);
        gbc.writeMem(0xc161, { 0x3a });
        gbc.writeMem(0xe4d3, { 0xf9 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xff51, gbc.sp());
        EXPECT(0xc162, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc161));
        EXPECT(0xf9, gbc.readMem(0xe4d3));
        // 3A 0285
        gbc.setState(0xbf56, 0x279a, 0xbbd0, 0x618f, 0x2988, 0x3be0, 0x0, 0x0);
        gbc.writeMem(0x3be0, { 0xeb });
        gbc.writeMem(0xbf56, { 0x3a });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x279a, gbc.sp());
        EXPECT(0xbf57, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbf56));
        // 3A 0286
        gbc.setState(0xaa78, 0xde8, 0x9b30, 0xa302, 0xc623, 0xe74a, 0x0, 0x1);
        gbc.writeMem(0xaa78, { 0x3a });
        gbc.writeMem(0xe74a, { 0x54 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xde8, gbc.sp());
        EXPECT(0xaa79, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xaa78));
        EXPECT(0x54, gbc.readMem(0xe74a));
        // 3A 0287
        gbc.setState(0x3731, 0x6e1b, 0xa3a0, 0xb6bf, 0x6ca, 0x8d9e, 0x0, 0x1);
        gbc.writeMem(0x3731, { 0x3a });
        gbc.writeMem(0x8d9e, { 0xbc });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x6e1b, gbc.sp());
        EXPECT(0x3732, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xbc, gbc.readMem(0x8d9e));
        // 3A 0288
        gbc.setState(0x829, 0x9dde, 0x4790, 0xed8e, 0x7eca, 0xf3ba, 0x0, 0x1);
        gbc.writeMem(0x829, { 0x3a });
        gbc.writeMem(0xf3ba, { 0x0 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x9dde, gbc.sp());
        EXPECT(0x82a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x0, gbc.readMem(0xf3ba));
        // 3A 0289
        gbc.setState(0x6fab, 0xef65, 0x3380, 0x30c7, 0x9525, 0xa1a1, 0x1, 0x0);
        gbc.writeMem(0x6fab, { 0x3a });
        gbc.writeMem(0xa1a1, { 0x2c });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xef65, gbc.sp());
        EXPECT(0x6fac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2c, gbc.readMem(0xa1a1));
        // 3A 028A
        gbc.setState(0x47a, 0x372b, 0x4410, 0x31de, 0xc3fd, 0xcdac, 0x0, 0x1);
        gbc.writeMem(0x47a, { 0x3a });
        gbc.writeMem(0xcdac, { 0xdc });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x372b, gbc.sp());
        EXPECT(0x47b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xdc, gbc.readMem(0xcdac));
        // 3A 028B
        gbc.setState(0x961e, 0x9979, 0x4e10, 0x41c7, 0x85df, 0xd058, 0x0, 0x1);
        gbc.writeMem(0x961e, { 0x3a });
        gbc.writeMem(0xd058, { 0xe0 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x9979, gbc.sp());
        EXPECT(0x961f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x961e));
        EXPECT(0xe0, gbc.readMem(0xd058));
        // 3A 028C
        gbc.setState(0x6a05, 0x4339, 0x3e60, 0xac53, 0xc6ca, 0x4835, 0x1, 0x1);
        gbc.writeMem(0x4835, { 0x2 });
        gbc.writeMem(0x6a05, { 0x3a });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x4339, gbc.sp());
        EXPECT(0x6a06, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 028D
        gbc.setState(0x8bd1, 0x4398, 0x9130, 0x5943, 0x4755, 0x4e99, 0x1, 0x0);
        gbc.writeMem(0x4e99, { 0xcf });
        gbc.writeMem(0x8bd1, { 0x3a });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x4398, gbc.sp());
        EXPECT(0x8bd2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8bd1));
        // 3A 028E
        gbc.setState(0x7bb6, 0x778f, 0xb7e0, 0x2c5, 0x9296, 0xd967, 0x0, 0x0);
        gbc.writeMem(0x7bb6, { 0x3a });
        gbc.writeMem(0xd967, { 0xb });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x778f, gbc.sp());
        EXPECT(0x7bb7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb, gbc.readMem(0xd967));
        // 3A 028F
        gbc.setState(0xa542, 0x2058, 0xf530, 0xe22c, 0xb594, 0x7ea5, 0x1, 0x1);
        gbc.writeMem(0x7ea5, { 0xfa });
        gbc.writeMem(0xa542, { 0x3a });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x2058, gbc.sp());
        EXPECT(0xa543, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa542));
        // 3A 0290
        gbc.setState(0x90cd, 0x7076, 0x5b0, 0x592b, 0xdbc6, 0x9c5, 0x0, 0x0);
        gbc.writeMem(0x9c5, { 0x57 });
        gbc.writeMem(0x90cd, { 0x3a });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x7076, gbc.sp());
        EXPECT(0x90ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x90cd));
        // 3A 0291
        gbc.setState(0xe971, 0xb31d, 0x27a0, 0x130, 0xa1aa, 0xd0bc, 0x0, 0x1);
        gbc.writeMem(0xd0bc, { 0x72 });
        gbc.writeMem(0xe971, { 0x3a });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xb31d, gbc.sp());
        EXPECT(0xe972, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x72, gbc.readMem(0xd0bc));
        EXPECT(0x3a, gbc.readMem(0xe971));
        // 3A 0292
        gbc.setState(0xec1f, 0x64d6, 0x8ba0, 0xa03, 0x1da6, 0x364a, 0x1, 0x1);
        gbc.writeMem(0x364a, { 0x2e });
        gbc.writeMem(0xec1f, { 0x3a });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x64d6, gbc.sp());
        EXPECT(0xec20, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xec1f));
        // 3A 0293
        gbc.setState(0xfa9, 0x8bfc, 0xc2f0, 0x1cb7, 0x618f, 0xd57a, 0x1, 0x0);
        gbc.writeMem(0xfa9, { 0x3a });
        gbc.writeMem(0xd57a, { 0x39 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x8bfc, gbc.sp());
        EXPECT(0xfaa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x39, gbc.readMem(0xd57a));
        // 3A 0294
        gbc.setState(0x2c36, 0xb652, 0x84e0, 0x4236, 0x3376, 0x22a7, 0x1, 0x0);
        gbc.writeMem(0x22a7, { 0x62 });
        gbc.writeMem(0x2c36, { 0x3a });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xb652, gbc.sp());
        EXPECT(0x2c37, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0295
        gbc.setState(0xe6ed, 0xfbf1, 0x8270, 0x7216, 0xce0, 0x2ce7, 0x1, 0x1);
        gbc.writeMem(0x2ce7, { 0xe1 });
        gbc.writeMem(0xe6ed, { 0x3a });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xfbf1, gbc.sp());
        EXPECT(0xe6ee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xe6ed));
        // 3A 0296
        gbc.setState(0x148, 0xe6d7, 0xa350, 0xabdb, 0xab6f, 0x6a6e, 0x0, 0x0);
        gbc.writeMem(0x148, { 0x3a });
        gbc.writeMem(0x6a6e, { 0xfe });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xe6d7, gbc.sp());
        EXPECT(0x149, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0297
        gbc.setState(0x338, 0x655b, 0xc4e0, 0xadcc, 0x201c, 0xda40, 0x0, 0x0);
        gbc.writeMem(0x338, { 0x3a });
        gbc.writeMem(0xda40, { 0x85 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x655b, gbc.sp());
        EXPECT(0x339, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x85, gbc.readMem(0xda40));
        // 3A 0298
        gbc.setState(0x499c, 0xed2d, 0x25e0, 0x6ff9, 0x5f45, 0x4cd7, 0x0, 0x1);
        gbc.writeMem(0x499c, { 0x3a });
        gbc.writeMem(0x4cd7, { 0x40 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xed2d, gbc.sp());
        EXPECT(0x499d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0299
        gbc.setState(0x74f5, 0x3aef, 0x91d0, 0x23cb, 0x6d83, 0x5aaf, 0x0, 0x1);
        gbc.writeMem(0x5aaf, { 0xad });
        gbc.writeMem(0x74f5, { 0x3a });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x3aef, gbc.sp());
        EXPECT(0x74f6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 029A
        gbc.setState(0x56bf, 0xf80a, 0x1500, 0x5175, 0xb97e, 0x4f15, 0x0, 0x0);
        gbc.writeMem(0x4f15, { 0x43 });
        gbc.writeMem(0x56bf, { 0x3a });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xf80a, gbc.sp());
        EXPECT(0x56c0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 029B
        gbc.setState(0xa4d8, 0x933c, 0xcd60, 0x1615, 0xfd4c, 0xa814, 0x1, 0x1);
        gbc.writeMem(0xa4d8, { 0x3a });
        gbc.writeMem(0xa814, { 0xc6 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x933c, gbc.sp());
        EXPECT(0xa4d9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa4d8));
        EXPECT(0xc6, gbc.readMem(0xa814));
        // 3A 029C
        gbc.setState(0xb67, 0xfd88, 0x8ff0, 0x283c, 0x48c8, 0xe49e, 0x1, 0x0);
        gbc.writeMem(0xb67, { 0x3a });
        gbc.writeMem(0xe49e, { 0x7 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xfd88, gbc.sp());
        EXPECT(0xb68, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7, gbc.readMem(0xe49e));
        // 3A 029D
        gbc.setState(0x4d17, 0x6b1a, 0x74b0, 0x1e34, 0x4498, 0xe776, 0x1, 0x0);
        gbc.writeMem(0x4d17, { 0x3a });
        gbc.writeMem(0xe776, { 0x78 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x6b1a, gbc.sp());
        EXPECT(0x4d18, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x78, gbc.readMem(0xe776));
        // 3A 029E
        gbc.setState(0x8083, 0x68e7, 0x8b10, 0xa2cc, 0xff25, 0xb9bd, 0x1, 0x1);
        gbc.writeMem(0x8083, { 0x3a });
        gbc.writeMem(0xb9bd, { 0x66 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x68e7, gbc.sp());
        EXPECT(0x8084, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8083));
        EXPECT(0x66, gbc.readMem(0xb9bd));
        // 3A 029F
        gbc.setState(0xab8d, 0xa98f, 0x3f0, 0xc8a1, 0x1c40, 0x754d, 0x0, 0x1);
        gbc.writeMem(0x754d, { 0x5 });
        gbc.writeMem(0xab8d, { 0x3a });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xa98f, gbc.sp());
        EXPECT(0xab8e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xab8d));
        // 3A 02A0
        gbc.setState(0xe04a, 0x84ca, 0xeb40, 0x9fdc, 0x6478, 0xe2e3, 0x1, 0x1);
        gbc.writeMem(0xe04a, { 0x3a });
        gbc.writeMem(0xe2e3, { 0xd9 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x84ca, gbc.sp());
        EXPECT(0xe04b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xe04a));
        EXPECT(0xd9, gbc.readMem(0xe2e3));
        // 3A 02A1
        gbc.setState(0x9326, 0xd44, 0x2b00, 0x1951, 0x4881, 0x3a03, 0x1, 0x1);
        gbc.writeMem(0x3a03, { 0xef });
        gbc.writeMem(0x9326, { 0x3a });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0xd44, gbc.sp());
        EXPECT(0x9327, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9326));
        // 3A 02A2
        gbc.setState(0xde54, 0xf13d, 0x5770, 0xda7e, 0x5786, 0xafb, 0x0, 0x1);
        gbc.writeMem(0xafb, { 0x5b });
        gbc.writeMem(0xde54, { 0x3a });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xf13d, gbc.sp());
        EXPECT(0xde55, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xde54));
        // 3A 02A3
        gbc.setState(0x9708, 0xb2d5, 0x41c0, 0x8e34, 0xd861, 0x1744, 0x1, 0x1);
        gbc.writeMem(0x1744, { 0xd4 });
        gbc.writeMem(0x9708, { 0x3a });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xb2d5, gbc.sp());
        EXPECT(0x9709, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9708));
        // 3A 02A4
        gbc.setState(0xa285, 0x7441, 0xec60, 0xd098, 0xafb3, 0x9745, 0x1, 0x0);
        gbc.writeMem(0x9745, { 0x9a });
        gbc.writeMem(0xa285, { 0x3a });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x7441, gbc.sp());
        EXPECT(0xa286, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x9a, gbc.readMem(0x9745));
        EXPECT(0x3a, gbc.readMem(0xa285));
        // 3A 02A5
        gbc.setState(0xf43, 0x46ca, 0x3e90, 0xe8e4, 0xba60, 0x5776, 0x0, 0x1);
        gbc.writeMem(0xf43, { 0x3a });
        gbc.writeMem(0x5776, { 0xa2 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x46ca, gbc.sp());
        EXPECT(0xf44, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 02A6
        gbc.setState(0x90cd, 0xd5d0, 0xbb00, 0x6cbd, 0x6bfc, 0xf775, 0x0, 0x1);
        gbc.writeMem(0x90cd, { 0x3a });
        gbc.writeMem(0xf775, { 0xaf });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xd5d0, gbc.sp());
        EXPECT(0x90ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x90cd));
        EXPECT(0xaf, gbc.readMem(0xf775));
        // 3A 02A7
        gbc.setState(0x5547, 0xa72f, 0xf580, 0xbcc0, 0x58d7, 0x8b33, 0x0, 0x1);
        gbc.writeMem(0x5547, { 0x3a });
        gbc.writeMem(0x8b33, { 0xb2 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0xa72f, gbc.sp());
        EXPECT(0x5548, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb2, gbc.readMem(0x8b33));
        // 3A 02A8
        gbc.setState(0xa996, 0x52b5, 0x8db0, 0xbbf6, 0x9fc, 0x40e4, 0x1, 0x1);
        gbc.writeMem(0x40e4, { 0x39 });
        gbc.writeMem(0xa996, { 0x3a });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x52b5, gbc.sp());
        EXPECT(0xa997, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa996));
        // 3A 02A9
        gbc.setState(0x5f77, 0x5df3, 0x8480, 0x8d23, 0xf61e, 0xf71c, 0x0, 0x1);
        gbc.writeMem(0x5f77, { 0x3a });
        gbc.writeMem(0xf71c, { 0x5d });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x5df3, gbc.sp());
        EXPECT(0x5f78, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5d, gbc.readMem(0xf71c));
        // 3A 02AA
        gbc.setState(0x43e4, 0x858d, 0x6480, 0x2512, 0x739a, 0xdca8, 0x0, 0x0);
        gbc.writeMem(0x43e4, { 0x3a });
        gbc.writeMem(0xdca8, { 0x2c });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x858d, gbc.sp());
        EXPECT(0x43e5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2c, gbc.readMem(0xdca8));
        // 3A 02AB
        gbc.setState(0x351f, 0x494e, 0x8c0, 0x3e1f, 0xa6a4, 0xd50b, 0x1, 0x1);
        gbc.writeMem(0x351f, { 0x3a });
        gbc.writeMem(0xd50b, { 0x3d });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x494e, gbc.sp());
        EXPECT(0x3520, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3d, gbc.readMem(0xd50b));
        // 3A 02AD
        gbc.setState(0xd606, 0xf5d4, 0xb820, 0xeb5a, 0x22b, 0x931d, 0x0, 0x0);
        gbc.writeMem(0x931d, { 0x50 });
        gbc.writeMem(0xd606, { 0x3a });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xf5d4, gbc.sp());
        EXPECT(0xd607, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x50, gbc.readMem(0x931d));
        EXPECT(0x3a, gbc.readMem(0xd606));
        // 3A 02AE
        gbc.setState(0xdf45, 0x3fee, 0x4530, 0x178d, 0x3ce2, 0xf74f, 0x1, 0x1);
        gbc.writeMem(0xdf45, { 0x3a });
        gbc.writeMem(0xf74f, { 0x3d });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x3fee, gbc.sp());
        EXPECT(0xdf46, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xdf45));
        EXPECT(0x3d, gbc.readMem(0xf74f));
        // 3A 02AF
        gbc.setState(0x7340, 0x4256, 0x2cb0, 0x8199, 0xdd4a, 0x4dc0, 0x1, 0x1);
        gbc.writeMem(0x4dc0, { 0x70 });
        gbc.writeMem(0x7340, { 0x3a });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x4256, gbc.sp());
        EXPECT(0x7341, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 02B0
        gbc.setState(0x5a92, 0x4a0e, 0xc8b0, 0xd19d, 0x5838, 0xc2af, 0x0, 0x1);
        gbc.writeMem(0x5a92, { 0x3a });
        gbc.writeMem(0xc2af, { 0xff });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x4a0e, gbc.sp());
        EXPECT(0x5a93, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xff, gbc.readMem(0xc2af));
        // 3A 02B2
        gbc.setState(0x57b4, 0x9d03, 0xd560, 0x8c98, 0x4277, 0xc79c, 0x0, 0x0);
        gbc.writeMem(0x57b4, { 0x3a });
        gbc.writeMem(0xc79c, { 0x62 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x9d03, gbc.sp());
        EXPECT(0x57b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x62, gbc.readMem(0xc79c));
        // 3A 02B3
        gbc.setState(0x30b8, 0x9ba9, 0xeea0, 0xd732, 0x9394, 0x6cbc, 0x0, 0x0);
        gbc.writeMem(0x30b8, { 0x3a });
        gbc.writeMem(0x6cbc, { 0xe2 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x9ba9, gbc.sp());
        EXPECT(0x30b9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 02B4
        gbc.setState(0x204d, 0xbe28, 0x8390, 0xefd8, 0x5423, 0x26be, 0x0, 0x0);
        gbc.writeMem(0x204d, { 0x3a });
        gbc.writeMem(0x26be, { 0x2d });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xbe28, gbc.sp());
        EXPECT(0x204e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 02B5
        gbc.setState(0x3dd0, 0x46b2, 0x1ea0, 0x2559, 0x1dec, 0xd00, 0x1, 0x0);
        gbc.writeMem(0xd00, { 0x8e });
        gbc.writeMem(0x3dd0, { 0x3a });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x46b2, gbc.sp());
        EXPECT(0x3dd1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 02B6
        gbc.setState(0xc95c, 0x37e5, 0x8750, 0x299d, 0xa3ea, 0xe8b7, 0x0, 0x1);
        gbc.writeMem(0xc95c, { 0x3a });
        gbc.writeMem(0xe8b7, { 0xdb });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x37e5, gbc.sp());
        EXPECT(0xc95d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc95c));
        EXPECT(0xdb, gbc.readMem(0xe8b7));
        // 3A 02B7
        gbc.setState(0xd455, 0x89f4, 0xe000, 0xb718, 0xddd5, 0xa9ff, 0x0, 0x0);
        gbc.writeMem(0xa9ff, { 0x19 });
        gbc.writeMem(0xd455, { 0x3a });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x89f4, gbc.sp());
        EXPECT(0xd456, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x19, gbc.readMem(0xa9ff));
        EXPECT(0x3a, gbc.readMem(0xd455));
        // 3A 02B8
        gbc.setState(0xc447, 0x66c7, 0x8090, 0xe9c4, 0xd11d, 0x1ecd, 0x1, 0x0);
        gbc.writeMem(0x1ecd, { 0xd });
        gbc.writeMem(0xc447, { 0x3a });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x66c7, gbc.sp());
        EXPECT(0xc448, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc447));
        // 3A 02B9
        gbc.setState(0x3665, 0xfa6b, 0xd2c0, 0xc0b6, 0x64e3, 0x68e8, 0x0, 0x1);
        gbc.writeMem(0x3665, { 0x3a });
        gbc.writeMem(0x68e8, { 0x9a });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xfa6b, gbc.sp());
        EXPECT(0x3666, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 02BA
        gbc.setState(0x1ee6, 0x6449, 0x48c0, 0x4254, 0x651a, 0x24df, 0x1, 0x1);
        gbc.writeMem(0x1ee6, { 0x3a });
        gbc.writeMem(0x24df, { 0x38 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x6449, gbc.sp());
        EXPECT(0x1ee7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 02BB
        gbc.setState(0x4dd9, 0x3e51, 0x32f0, 0xb115, 0x5e2, 0x1e92, 0x0, 0x0);
        gbc.writeMem(0x1e92, { 0x1e });
        gbc.writeMem(0x4dd9, { 0x3a });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x3e51, gbc.sp());
        EXPECT(0x4dda, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 02BC
        gbc.setState(0x6d46, 0xf005, 0xe720, 0xf18a, 0xa353, 0x4f2f, 0x1, 0x1);
        gbc.writeMem(0x4f2f, { 0xd7 });
        gbc.writeMem(0x6d46, { 0x3a });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xf005, gbc.sp());
        EXPECT(0x6d47, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 02BD
        gbc.setState(0x3221, 0xf79c, 0xc290, 0x2c3f, 0x6cb3, 0x1213, 0x1, 0x0);
        gbc.writeMem(0x1213, { 0x86 });
        gbc.writeMem(0x3221, { 0x3a });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0xf79c, gbc.sp());
        EXPECT(0x3222, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 02BE
        gbc.setState(0x862c, 0x441c, 0x5cc0, 0xf0b, 0xabe5, 0xbfb4, 0x0, 0x0);
        gbc.writeMem(0x862c, { 0x3a });
        gbc.writeMem(0xbfb4, { 0x94 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x441c, gbc.sp());
        EXPECT(0x862d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x862c));
        EXPECT(0x94, gbc.readMem(0xbfb4));
        // 3A 02BF
        gbc.setState(0x6eab, 0x192e, 0x7a80, 0xa515, 0x1473, 0x4f8f, 0x1, 0x1);
        gbc.writeMem(0x4f8f, { 0x20 });
        gbc.writeMem(0x6eab, { 0x3a });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x192e, gbc.sp());
        EXPECT(0x6eac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 02C1
        gbc.setState(0xab2e, 0x5c6e, 0x3ae0, 0x93c3, 0x409f, 0xe293, 0x1, 0x0);
        gbc.writeMem(0xab2e, { 0x3a });
        gbc.writeMem(0xe293, { 0x17 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x5c6e, gbc.sp());
        EXPECT(0xab2f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xab2e));
        EXPECT(0x17, gbc.readMem(0xe293));
        // 3A 02C2
        gbc.setState(0x8075, 0xb020, 0x4cf0, 0x2075, 0x8b09, 0xf66c, 0x1, 0x0);
        gbc.writeMem(0x8075, { 0x3a });
        gbc.writeMem(0xf66c, { 0xdf });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xb020, gbc.sp());
        EXPECT(0x8076, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8075));
        EXPECT(0xdf, gbc.readMem(0xf66c));
        // 3A 02C3
        gbc.setState(0x3c79, 0x3734, 0x6150, 0x3b2e, 0xeaba, 0x6011, 0x0, 0x1);
        gbc.writeMem(0x3c79, { 0x3a });
        gbc.writeMem(0x6011, { 0xa6 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x3734, gbc.sp());
        EXPECT(0x3c7a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 02C4
        gbc.setState(0x16a7, 0x67f9, 0xad90, 0x92e1, 0x651a, 0xffe1, 0x1, 0x0);
        gbc.writeMem(0x16a7, { 0x3a });
        gbc.writeMem(0xffe1, { 0x88 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x67f9, gbc.sp());
        EXPECT(0x16a8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x88, gbc.readMem(0xffe1));
        // 3A 02C5
        gbc.setState(0xade1, 0x7990, 0xb440, 0x81a6, 0xe730, 0x3966, 0x0, 0x1);
        gbc.writeMem(0x3966, { 0xe });
        gbc.writeMem(0xade1, { 0x3a });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x7990, gbc.sp());
        EXPECT(0xade2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xade1));
        // 3A 02C6
        gbc.setState(0x1cd1, 0x61d5, 0x67e0, 0x76c0, 0x7f33, 0xeb57, 0x1, 0x1);
        gbc.writeMem(0x1cd1, { 0x3a });
        gbc.writeMem(0xeb57, { 0x2c });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x61d5, gbc.sp());
        EXPECT(0x1cd2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2c, gbc.readMem(0xeb57));
        // 3A 02C7
        gbc.setState(0x9bb7, 0x7ffb, 0x7b90, 0x3629, 0x41f9, 0x3341, 0x1, 0x1);
        gbc.writeMem(0x3341, { 0xbd });
        gbc.writeMem(0x9bb7, { 0x3a });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x7ffb, gbc.sp());
        EXPECT(0x9bb8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9bb7));
        // 3A 02C8
        gbc.setState(0xcc15, 0xb643, 0xc540, 0xaaac, 0x3c1d, 0xa2fa, 0x1, 0x1);
        gbc.writeMem(0xa2fa, { 0xb3 });
        gbc.writeMem(0xcc15, { 0x3a });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xb643, gbc.sp());
        EXPECT(0xcc16, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb3, gbc.readMem(0xa2fa));
        EXPECT(0x3a, gbc.readMem(0xcc15));
        // 3A 02C9
        gbc.setState(0x573b, 0x55d1, 0xa30, 0x229c, 0x2677, 0x106b, 0x1, 0x0);
        gbc.writeMem(0x106b, { 0x9f });
        gbc.writeMem(0x573b, { 0x3a });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0x55d1, gbc.sp());
        EXPECT(0x573c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 02CA
        gbc.setState(0x9ba2, 0x4d5a, 0x5540, 0x63cf, 0xf330, 0x4e77, 0x1, 0x0);
        gbc.writeMem(0x4e77, { 0xa9 });
        gbc.writeMem(0x9ba2, { 0x3a });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x4d5a, gbc.sp());
        EXPECT(0x9ba3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9ba2));
        // 3A 02CB
        gbc.setState(0x312c, 0xb7ea, 0xf300, 0xe271, 0xdd2, 0x818f, 0x1, 0x1);
        gbc.writeMem(0x312c, { 0x3a });
        gbc.writeMem(0x818f, { 0xe7 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xb7ea, gbc.sp());
        EXPECT(0x312d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe7, gbc.readMem(0x818f));
        // 3A 02CD
        gbc.setState(0x14ae, 0x929f, 0x4cf0, 0xef7f, 0x3d34, 0x7e7c, 0x1, 0x0);
        gbc.writeMem(0x14ae, { 0x3a });
        gbc.writeMem(0x7e7c, { 0x66 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x929f, gbc.sp());
        EXPECT(0x14af, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 02CE
        gbc.setState(0xebab, 0x908, 0xa770, 0xb478, 0x677b, 0xce42, 0x1, 0x1);
        gbc.writeMem(0xce42, { 0x5a });
        gbc.writeMem(0xebab, { 0x3a });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x908, gbc.sp());
        EXPECT(0xebac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5a, gbc.readMem(0xce42));
        EXPECT(0x3a, gbc.readMem(0xebab));
        // 3A 02CF
        gbc.setState(0xda5f, 0xe7cf, 0x2d60, 0x4001, 0x95e9, 0xc0a9, 0x0, 0x1);
        gbc.writeMem(0xc0a9, { 0x18 });
        gbc.writeMem(0xda5f, { 0x3a });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xe7cf, gbc.sp());
        EXPECT(0xda60, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x18, gbc.readMem(0xc0a9));
        EXPECT(0x3a, gbc.readMem(0xda5f));
        // 3A 02D0
        gbc.setState(0xda9e, 0x83cb, 0xf620, 0x3a3f, 0x1093, 0xcc87, 0x0, 0x0);
        gbc.writeMem(0xcc87, { 0x4e });
        gbc.writeMem(0xda9e, { 0x3a });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x83cb, gbc.sp());
        EXPECT(0xda9f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x4e, gbc.readMem(0xcc87));
        EXPECT(0x3a, gbc.readMem(0xda9e));
        // 3A 02D1
        gbc.setState(0x6261, 0xb7a7, 0xbc40, 0xd464, 0x465d, 0xcc6a, 0x0, 0x1);
        gbc.writeMem(0x6261, { 0x3a });
        gbc.writeMem(0xcc6a, { 0x16 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xb7a7, gbc.sp());
        EXPECT(0x6262, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x16, gbc.readMem(0xcc6a));
        // 3A 02D2
        gbc.setState(0xc067, 0xac0a, 0x2ac0, 0xe0c5, 0xbde1, 0xb3f8, 0x1, 0x0);
        gbc.writeMem(0xb3f8, { 0x6b });
        gbc.writeMem(0xc067, { 0x3a });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xac0a, gbc.sp());
        EXPECT(0xc068, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6b, gbc.readMem(0xb3f8));
        EXPECT(0x3a, gbc.readMem(0xc067));
        // 3A 02D3
        gbc.setState(0xbecf, 0xb3e5, 0xe490, 0x6fbe, 0x25d9, 0x19d4, 0x0, 0x0);
        gbc.writeMem(0x19d4, { 0xe1 });
        gbc.writeMem(0xbecf, { 0x3a });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0xb3e5, gbc.sp());
        EXPECT(0xbed0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbecf));
        // 3A 02D4
        gbc.setState(0xa067, 0x1a50, 0xf8b0, 0xc05b, 0x671b, 0x62c8, 0x1, 0x1);
        gbc.writeMem(0x62c8, { 0xb1 });
        gbc.writeMem(0xa067, { 0x3a });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x1a50, gbc.sp());
        EXPECT(0xa068, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa067));
        // 3A 02D5
        gbc.setState(0x113d, 0x5c4, 0x1490, 0xa378, 0x1990, 0x7079, 0x0, 0x0);
        gbc.writeMem(0x113d, { 0x3a });
        gbc.writeMem(0x7079, { 0xc1 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x5c4, gbc.sp());
        EXPECT(0x113e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 02D6
        gbc.setState(0x1818, 0x15b7, 0x2ea0, 0xca5c, 0x7ca6, 0x454a, 0x0, 0x1);
        gbc.writeMem(0x1818, { 0x3a });
        gbc.writeMem(0x454a, { 0x77 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x15b7, gbc.sp());
        EXPECT(0x1819, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 02D7
        gbc.setState(0xa0a1, 0xf74f, 0x8bb0, 0xecb2, 0xef33, 0xb2d7, 0x1, 0x1);
        gbc.writeMem(0xa0a1, { 0x3a });
        gbc.writeMem(0xb2d7, { 0x9f });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xf74f, gbc.sp());
        EXPECT(0xa0a2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa0a1));
        EXPECT(0x9f, gbc.readMem(0xb2d7));
        // 3A 02D8
        gbc.setState(0xbf37, 0xfebe, 0x3740, 0xd313, 0x7e3d, 0x530d, 0x1, 0x0);
        gbc.writeMem(0x530d, { 0x6c });
        gbc.writeMem(0xbf37, { 0x3a });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xfebe, gbc.sp());
        EXPECT(0xbf38, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbf37));
        // 3A 02D9
        gbc.setState(0x7247, 0x8903, 0xb5c0, 0x64ac, 0xa8e4, 0x8988, 0x0, 0x1);
        gbc.writeMem(0x7247, { 0x3a });
        gbc.writeMem(0x8988, { 0xf0 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x8903, gbc.sp());
        EXPECT(0x7248, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf0, gbc.readMem(0x8988));
        // 3A 02DA
        gbc.setState(0xb777, 0x74, 0x1f20, 0x9329, 0x4892, 0x2c88, 0x1, 0x1);
        gbc.writeMem(0x2c88, { 0x57 });
        gbc.writeMem(0xb777, { 0x3a });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x74, gbc.sp());
        EXPECT(0xb778, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb777));
        // 3A 02DB
        gbc.setState(0x9f0, 0x3f5f, 0x4a60, 0x5871, 0x2cb3, 0x1ea0, 0x0, 0x0);
        gbc.writeMem(0x9f0, { 0x3a });
        gbc.writeMem(0x1ea0, { 0xee });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x3f5f, gbc.sp());
        EXPECT(0x9f1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 02DC
        gbc.setState(0x231, 0x3831, 0x6870, 0x89df, 0x9834, 0x4404, 0x1, 0x0);
        gbc.writeMem(0x231, { 0x3a });
        gbc.writeMem(0x4404, { 0x2a });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x3831, gbc.sp());
        EXPECT(0x232, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 02DD
        gbc.setState(0xb204, 0x900c, 0xe570, 0xfe15, 0xfd4a, 0x9361, 0x0, 0x1);
        gbc.writeMem(0x9361, { 0xa7 });
        gbc.writeMem(0xb204, { 0x3a });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x900c, gbc.sp());
        EXPECT(0xb205, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa7, gbc.readMem(0x9361));
        EXPECT(0x3a, gbc.readMem(0xb204));
        // 3A 02DE
        gbc.setState(0xa66a, 0x6613, 0x5160, 0xcf7c, 0x7a31, 0xae7d, 0x1, 0x0);
        gbc.writeMem(0xa66a, { 0x3a });
        gbc.writeMem(0xae7d, { 0x42 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x6613, gbc.sp());
        EXPECT(0xa66b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa66a));
        EXPECT(0x42, gbc.readMem(0xae7d));
        // 3A 02DF
        gbc.setState(0x2415, 0x8639, 0x2ce0, 0x6d57, 0xb21a, 0x124c, 0x1, 0x0);
        gbc.writeMem(0x124c, { 0xcf });
        gbc.writeMem(0x2415, { 0x3a });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x8639, gbc.sp());
        EXPECT(0x2416, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 02E0
        gbc.setState(0x3ca0, 0xee90, 0x57c0, 0xc869, 0x422, 0xc4fe, 0x0, 0x1);
        gbc.writeMem(0x3ca0, { 0x3a });
        gbc.writeMem(0xc4fe, { 0x2b });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xee90, gbc.sp());
        EXPECT(0x3ca1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2b, gbc.readMem(0xc4fe));
        // 3A 02E1
        gbc.setState(0x339f, 0x9057, 0x7f40, 0x3b6c, 0xc588, 0xb988, 0x1, 0x0);
        gbc.writeMem(0x339f, { 0x3a });
        gbc.writeMem(0xb988, { 0x25 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x9057, gbc.sp());
        EXPECT(0x33a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x25, gbc.readMem(0xb988));
        // 3A 02E2
        gbc.setState(0x5630, 0x7f9b, 0x4410, 0xb813, 0x2f4a, 0x8d73, 0x0, 0x0);
        gbc.writeMem(0x5630, { 0x3a });
        gbc.writeMem(0x8d73, { 0x4 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x7f9b, gbc.sp());
        EXPECT(0x5631, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4, gbc.readMem(0x8d73));
        // 3A 02E3
        gbc.setState(0x25ac, 0xa96c, 0xfbb0, 0x95d4, 0x4085, 0xc34b, 0x0, 0x0);
        gbc.writeMem(0x25ac, { 0x3a });
        gbc.writeMem(0xc34b, { 0x7f });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xa96c, gbc.sp());
        EXPECT(0x25ad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7f, gbc.readMem(0xc34b));
        // 3A 02E4
        gbc.setState(0x63f, 0xd081, 0xe470, 0xb7de, 0x3636, 0x89f8, 0x1, 0x0);
        gbc.writeMem(0x63f, { 0x3a });
        gbc.writeMem(0x89f8, { 0xd3 });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xd081, gbc.sp());
        EXPECT(0x640, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd3, gbc.readMem(0x89f8));
        // 3A 02E5
        gbc.setState(0x69ca, 0xa462, 0xfd00, 0xe855, 0x6ff5, 0xce0b, 0x0, 0x1);
        gbc.writeMem(0x69ca, { 0x3a });
        gbc.writeMem(0xce0b, { 0x9e });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xa462, gbc.sp());
        EXPECT(0x69cb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x9e, gbc.readMem(0xce0b));
        // 3A 02E6
        gbc.setState(0x56e, 0x1e70, 0xbe90, 0x783e, 0xcc4e, 0x8c87, 0x1, 0x1);
        gbc.writeMem(0x56e, { 0x3a });
        gbc.writeMem(0x8c87, { 0x84 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x1e70, gbc.sp());
        EXPECT(0x56f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x84, gbc.readMem(0x8c87));
        // 3A 02E7
        gbc.setState(0x350c, 0x4228, 0x1690, 0xdc90, 0xd9e2, 0x8dae, 0x0, 0x1);
        gbc.writeMem(0x350c, { 0x3a });
        gbc.writeMem(0x8dae, { 0x8f });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x4228, gbc.sp());
        EXPECT(0x350d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8f, gbc.readMem(0x8dae));
        // 3A 02E8
        gbc.setState(0x69a8, 0x5790, 0xc000, 0xb8e8, 0x8aa6, 0xc6cb, 0x0, 0x0);
        gbc.writeMem(0x69a8, { 0x3a });
        gbc.writeMem(0xc6cb, { 0x5d });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x5790, gbc.sp());
        EXPECT(0x69a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5d, gbc.readMem(0xc6cb));
        // 3A 02E9
        gbc.setState(0x74ea, 0x9a9b, 0xc3e0, 0x44cb, 0x4fa0, 0xf7f7, 0x1, 0x1);
        gbc.writeMem(0x74ea, { 0x3a });
        gbc.writeMem(0xf7f7, { 0x50 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x9a9b, gbc.sp());
        EXPECT(0x74eb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x50, gbc.readMem(0xf7f7));
        // 3A 02EA
        gbc.setState(0x8f02, 0x141c, 0x1fa0, 0x4d03, 0xc40a, 0x2451, 0x0, 0x1);
        gbc.writeMem(0x2451, { 0x3f });
        gbc.writeMem(0x8f02, { 0x3a });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x141c, gbc.sp());
        EXPECT(0x8f03, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8f02));
        // 3A 02EB
        gbc.setState(0x11c0, 0x6e28, 0xe5b0, 0xb52f, 0xbdd7, 0x47a4, 0x1, 0x0);
        gbc.writeMem(0x11c0, { 0x3a });
        gbc.writeMem(0x47a4, { 0x0 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x6e28, gbc.sp());
        EXPECT(0x11c1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 02EC
        gbc.setState(0x11b3, 0xc51d, 0xec20, 0x1b66, 0xed7d, 0x1952, 0x1, 0x0);
        gbc.writeMem(0x11b3, { 0x3a });
        gbc.writeMem(0x1952, { 0x5f });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xc51d, gbc.sp());
        EXPECT(0x11b4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 02ED
        gbc.setState(0xdb97, 0x4ff, 0x8670, 0x9257, 0x850e, 0x36fb, 0x1, 0x0);
        gbc.writeMem(0x36fb, { 0x3d });
        gbc.writeMem(0xdb97, { 0x3a });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x4ff, gbc.sp());
        EXPECT(0xdb98, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xdb97));
        // 3A 02EE
        gbc.setState(0x62dd, 0x4638, 0xbf10, 0x5366, 0x4391, 0xc128, 0x0, 0x0);
        gbc.writeMem(0x62dd, { 0x3a });
        gbc.writeMem(0xc128, { 0xa0 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x4638, gbc.sp());
        EXPECT(0x62de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa0, gbc.readMem(0xc128));
        // 3A 02EF
        gbc.setState(0x552f, 0x5b59, 0xf250, 0x27c0, 0xcd10, 0x56cb, 0x1, 0x0);
        gbc.writeMem(0x552f, { 0x3a });
        gbc.writeMem(0x56cb, { 0x8c });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x5b59, gbc.sp());
        EXPECT(0x5530, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 02F0
        gbc.setState(0x9c93, 0xae65, 0xff00, 0x7240, 0xfa56, 0x523b, 0x1, 0x1);
        gbc.writeMem(0x523b, { 0xa0 });
        gbc.writeMem(0x9c93, { 0x3a });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xae65, gbc.sp());
        EXPECT(0x9c94, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9c93));
        // 3A 02F1
        gbc.setState(0x60b2, 0x301a, 0x4190, 0x7fca, 0x67d2, 0xe099, 0x0, 0x1);
        gbc.writeMem(0x60b2, { 0x3a });
        gbc.writeMem(0xe099, { 0x80 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x301a, gbc.sp());
        EXPECT(0x60b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x80, gbc.readMem(0xe099));
        // 3A 02F2
        gbc.setState(0xef5f, 0xecdc, 0xf940, 0xf253, 0xd434, 0x9876, 0x0, 0x1);
        gbc.writeMem(0x9876, { 0x18 });
        gbc.writeMem(0xef5f, { 0x3a });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xecdc, gbc.sp());
        EXPECT(0xef60, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x18, gbc.readMem(0x9876));
        EXPECT(0x3a, gbc.readMem(0xef5f));
        // 3A 02F3
        gbc.setState(0xcda, 0xcb31, 0x3fb0, 0x2ede, 0xb029, 0x6c8e, 0x1, 0x0);
        gbc.writeMem(0xcda, { 0x3a });
        gbc.writeMem(0x6c8e, { 0x77 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xcb31, gbc.sp());
        EXPECT(0xcdb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 02F4
        gbc.setState(0x3649, 0xbbbf, 0xbf10, 0x1b17, 0x3a40, 0x2ec0, 0x1, 0x0);
        gbc.writeMem(0x2ec0, { 0x75 });
        gbc.writeMem(0x3649, { 0x3a });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xbbbf, gbc.sp());
        EXPECT(0x364a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 02F5
        gbc.setState(0x4c8c, 0x5c5, 0xde00, 0xa2f9, 0xb780, 0x1e85, 0x0, 0x1);
        gbc.writeMem(0x1e85, { 0xee });
        gbc.writeMem(0x4c8c, { 0x3a });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x5c5, gbc.sp());
        EXPECT(0x4c8d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 02F6
        gbc.setState(0x63b1, 0xd227, 0xc520, 0xe5e2, 0x93a0, 0x4dad, 0x1, 0x1);
        gbc.writeMem(0x4dad, { 0xbc });
        gbc.writeMem(0x63b1, { 0x3a });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xd227, gbc.sp());
        EXPECT(0x63b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 02F7
        gbc.setState(0xe51d, 0xdc14, 0xe850, 0x4426, 0xa448, 0xbf47, 0x1, 0x0);
        gbc.writeMem(0xbf47, { 0xe0 });
        gbc.writeMem(0xe51d, { 0x3a });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xdc14, gbc.sp());
        EXPECT(0xe51e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe0, gbc.readMem(0xbf47));
        EXPECT(0x3a, gbc.readMem(0xe51d));
        // 3A 02F8
        gbc.setState(0x5744, 0xf381, 0x4100, 0xf931, 0x6669, 0x836, 0x0, 0x0);
        gbc.writeMem(0x836, { 0xb8 });
        gbc.writeMem(0x5744, { 0x3a });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xf381, gbc.sp());
        EXPECT(0x5745, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 02F9
        gbc.setState(0x7c94, 0x7bd6, 0xfad0, 0x485b, 0xb215, 0xd874, 0x1, 0x0);
        gbc.writeMem(0x7c94, { 0x3a });
        gbc.writeMem(0xd874, { 0x80 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x7bd6, gbc.sp());
        EXPECT(0x7c95, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x80, gbc.readMem(0xd874));
        // 3A 02FA
        gbc.setState(0xbc5, 0x7206, 0xec40, 0x1715, 0xad83, 0x96d2, 0x1, 0x0);
        gbc.writeMem(0xbc5, { 0x3a });
        gbc.writeMem(0x96d2, { 0xb5 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x7206, gbc.sp());
        EXPECT(0xbc6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb5, gbc.readMem(0x96d2));
        // 3A 02FB
        gbc.setState(0x44d1, 0xd3ff, 0x2280, 0x7286, 0x7e09, 0x1268, 0x1, 0x0);
        gbc.writeMem(0x1268, { 0x90 });
        gbc.writeMem(0x44d1, { 0x3a });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xd3ff, gbc.sp());
        EXPECT(0x44d2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 02FD
        gbc.setState(0x1de9, 0x7bfc, 0xbde0, 0x7648, 0xc550, 0x54a6, 0x1, 0x1);
        gbc.writeMem(0x1de9, { 0x3a });
        gbc.writeMem(0x54a6, { 0x4e });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x7bfc, gbc.sp());
        EXPECT(0x1dea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 02FE
        gbc.setState(0x6033, 0x4804, 0x550, 0xe50d, 0xfc5f, 0x45e1, 0x1, 0x0);
        gbc.writeMem(0x45e1, { 0x9b });
        gbc.writeMem(0x6033, { 0x3a });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x4804, gbc.sp());
        EXPECT(0x6034, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 02FF
        gbc.setState(0x7d05, 0x9636, 0x6170, 0xf9da, 0x59ed, 0xf19, 0x1, 0x0);
        gbc.writeMem(0xf19, { 0x3d });
        gbc.writeMem(0x7d05, { 0x3a });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x9636, gbc.sp());
        EXPECT(0x7d06, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0300
        gbc.setState(0xcf24, 0x77ce, 0x3030, 0x99bc, 0xb8cc, 0xa727, 0x0, 0x1);
        gbc.writeMem(0xa727, { 0xe9 });
        gbc.writeMem(0xcf24, { 0x3a });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x77ce, gbc.sp());
        EXPECT(0xcf25, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe9, gbc.readMem(0xa727));
        EXPECT(0x3a, gbc.readMem(0xcf24));
        // 3A 0301
        gbc.setState(0x6ff4, 0x2d75, 0xb7f0, 0x21b4, 0x524, 0x7457, 0x0, 0x0);
        gbc.writeMem(0x6ff4, { 0x3a });
        gbc.writeMem(0x7457, { 0x31 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x2d75, gbc.sp());
        EXPECT(0x6ff5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0303
        gbc.setState(0x43cd, 0x6b48, 0xaef0, 0x8b58, 0xb7e6, 0x39c0, 0x1, 0x1);
        gbc.writeMem(0x39c0, { 0x28 });
        gbc.writeMem(0x43cd, { 0x3a });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x6b48, gbc.sp());
        EXPECT(0x43ce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0304
        gbc.setState(0xb4a6, 0x1989, 0xb8a0, 0xaa93, 0x2cb3, 0x2751, 0x0, 0x0);
        gbc.writeMem(0x2751, { 0xc });
        gbc.writeMem(0xb4a6, { 0x3a });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x1989, gbc.sp());
        EXPECT(0xb4a7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb4a6));
        // 3A 0305
        gbc.setState(0xcc86, 0xe57e, 0x6d60, 0xa80a, 0xb6a7, 0xd038, 0x0, 0x0);
        gbc.writeMem(0xcc86, { 0x3a });
        gbc.writeMem(0xd038, { 0x11 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0xe57e, gbc.sp());
        EXPECT(0xcc87, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xcc86));
        EXPECT(0x11, gbc.readMem(0xd038));
        // 3A 0306
        gbc.setState(0x5144, 0xa0e7, 0x30b0, 0x2706, 0xda06, 0xc2fd, 0x0, 0x0);
        gbc.writeMem(0x5144, { 0x3a });
        gbc.writeMem(0xc2fd, { 0xdb });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xa0e7, gbc.sp());
        EXPECT(0x5145, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xdb, gbc.readMem(0xc2fd));
        // 3A 0307
        gbc.setState(0xd27, 0x1cf8, 0x6fa0, 0x50ee, 0x57b1, 0x3934, 0x0, 0x0);
        gbc.writeMem(0xd27, { 0x3a });
        gbc.writeMem(0x3934, { 0xed });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x1cf8, gbc.sp());
        EXPECT(0xd28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0308
        gbc.setState(0xe4d4, 0xf57c, 0x30f0, 0x87b6, 0x987c, 0xcb69, 0x0, 0x1);
        gbc.writeMem(0xcb69, { 0xfc });
        gbc.writeMem(0xe4d4, { 0x3a });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0xf57c, gbc.sp());
        EXPECT(0xe4d5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xfc, gbc.readMem(0xcb69));
        EXPECT(0x3a, gbc.readMem(0xe4d4));
        // 3A 0309
        gbc.setState(0xd5f9, 0x4aea, 0x180, 0x76be, 0x967c, 0x8ac7, 0x0, 0x1);
        gbc.writeMem(0x8ac7, { 0xbf });
        gbc.writeMem(0xd5f9, { 0x3a });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x4aea, gbc.sp());
        EXPECT(0xd5fa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xbf, gbc.readMem(0x8ac7));
        EXPECT(0x3a, gbc.readMem(0xd5f9));
        // 3A 030A
        gbc.setState(0x9919, 0x6c75, 0xd340, 0xcc90, 0xc1a2, 0x34aa, 0x1, 0x0);
        gbc.writeMem(0x34aa, { 0x20 });
        gbc.writeMem(0x9919, { 0x3a });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x6c75, gbc.sp());
        EXPECT(0x991a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9919));
        // 3A 030B
        gbc.setState(0x1028, 0x41b, 0x5de0, 0xc3a4, 0xa39b, 0x14d2, 0x0, 0x1);
        gbc.writeMem(0x1028, { 0x3a });
        gbc.writeMem(0x14d2, { 0x35 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x41b, gbc.sp());
        EXPECT(0x1029, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 030C
        gbc.setState(0x5501, 0x4f1c, 0x1c10, 0xd17d, 0x7e30, 0x4d2d, 0x1, 0x0);
        gbc.writeMem(0x4d2d, { 0x6b });
        gbc.writeMem(0x5501, { 0x3a });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x4f1c, gbc.sp());
        EXPECT(0x5502, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 030D
        gbc.setState(0xdc42, 0xc2cc, 0x23e0, 0x630c, 0xa015, 0x67df, 0x0, 0x0);
        gbc.writeMem(0x67df, { 0x7f });
        gbc.writeMem(0xdc42, { 0x3a });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xc2cc, gbc.sp());
        EXPECT(0xdc43, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xdc42));
        // 3A 030E
        gbc.setState(0x7926, 0xff12, 0x6c80, 0xec65, 0x59fc, 0xec53, 0x1, 0x1);
        gbc.writeMem(0x7926, { 0x3a });
        gbc.writeMem(0xec53, { 0x5f });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xff12, gbc.sp());
        EXPECT(0x7927, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5f, gbc.readMem(0xec53));
        // 3A 030F
        gbc.setState(0xbc0b, 0xfc1d, 0x79c0, 0x6547, 0x1721, 0x1066, 0x1, 0x1);
        gbc.writeMem(0x1066, { 0x2 });
        gbc.writeMem(0xbc0b, { 0x3a });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0xfc1d, gbc.sp());
        EXPECT(0xbc0c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbc0b));
        // 3A 0311
        gbc.setState(0x7761, 0x83e3, 0x4430, 0x59da, 0x287c, 0xa471, 0x1, 0x1);
        gbc.writeMem(0x7761, { 0x3a });
        gbc.writeMem(0xa471, { 0x21 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x83e3, gbc.sp());
        EXPECT(0x7762, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x21, gbc.readMem(0xa471));
        // 3A 0312
        gbc.setState(0xc124, 0x4110, 0x1110, 0x7a01, 0xacea, 0x4e91, 0x0, 0x0);
        gbc.writeMem(0x4e91, { 0x29 });
        gbc.writeMem(0xc124, { 0x3a });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x4110, gbc.sp());
        EXPECT(0xc125, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc124));
        // 3A 0313
        gbc.setState(0xe2cd, 0xf43b, 0x4db0, 0x5cd6, 0x835, 0x86d6, 0x0, 0x0);
        gbc.writeMem(0x86d6, { 0x1f });
        gbc.writeMem(0xe2cd, { 0x3a });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xf43b, gbc.sp());
        EXPECT(0xe2ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1f, gbc.readMem(0x86d6));
        EXPECT(0x3a, gbc.readMem(0xe2cd));
        // 3A 0314
        gbc.setState(0xbf9f, 0xd859, 0xf260, 0xf0b7, 0x51e8, 0xd3b0, 0x0, 0x1);
        gbc.writeMem(0xbf9f, { 0x3a });
        gbc.writeMem(0xd3b0, { 0x26 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xd859, gbc.sp());
        EXPECT(0xbfa0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbf9f));
        EXPECT(0x26, gbc.readMem(0xd3b0));
        // 3A 0315
        gbc.setState(0x9056, 0x8981, 0x1250, 0x70e, 0xc743, 0xc53e, 0x1, 0x0);
        gbc.writeMem(0x9056, { 0x3a });
        gbc.writeMem(0xc53e, { 0x22 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x8981, gbc.sp());
        EXPECT(0x9057, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9056));
        EXPECT(0x22, gbc.readMem(0xc53e));
        // 3A 0316
        gbc.setState(0xae23, 0x50e4, 0xa7d0, 0xc8e7, 0x880c, 0x1f90, 0x1, 0x1);
        gbc.writeMem(0x1f90, { 0xaa });
        gbc.writeMem(0xae23, { 0x3a });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x50e4, gbc.sp());
        EXPECT(0xae24, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xae23));
        // 3A 0317
        gbc.setState(0xcfa3, 0xe738, 0x4e00, 0xbc22, 0x3b41, 0xd806, 0x1, 0x0);
        gbc.writeMem(0xcfa3, { 0x3a });
        gbc.writeMem(0xd806, { 0x78 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xe738, gbc.sp());
        EXPECT(0xcfa4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xcfa3));
        EXPECT(0x78, gbc.readMem(0xd806));
        // 3A 0318
        gbc.setState(0x7310, 0x60dc, 0xc070, 0x582d, 0x49bf, 0x7434, 0x1, 0x1);
        gbc.writeMem(0x7310, { 0x3a });
        gbc.writeMem(0x7434, { 0x8b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x60dc, gbc.sp());
        EXPECT(0x7311, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0319
        gbc.setState(0x2ca1, 0x3eec, 0x7de0, 0xb860, 0x4595, 0xf754, 0x1, 0x0);
        gbc.writeMem(0x2ca1, { 0x3a });
        gbc.writeMem(0xf754, { 0xfb });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x3eec, gbc.sp());
        EXPECT(0x2ca2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xfb, gbc.readMem(0xf754));
        // 3A 031A
        gbc.setState(0xa20, 0xfe49, 0x7330, 0xba7a, 0x9a66, 0xcdf3, 0x1, 0x0);
        gbc.writeMem(0xa20, { 0x3a });
        gbc.writeMem(0xcdf3, { 0x98 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xfe49, gbc.sp());
        EXPECT(0xa21, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x98, gbc.readMem(0xcdf3));
        // 3A 031B
        gbc.setState(0xc911, 0xf685, 0xb3d0, 0x2308, 0xde52, 0x795c, 0x0, 0x1);
        gbc.writeMem(0x795c, { 0x7 });
        gbc.writeMem(0xc911, { 0x3a });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0xf685, gbc.sp());
        EXPECT(0xc912, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc911));
        // 3A 031C
        gbc.setState(0x2616, 0x829c, 0x1f90, 0xbf60, 0xfe72, 0x9b81, 0x0, 0x0);
        gbc.writeMem(0x2616, { 0x3a });
        gbc.writeMem(0x9b81, { 0x96 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x829c, gbc.sp());
        EXPECT(0x2617, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x96, gbc.readMem(0x9b81));
        // 3A 031D
        gbc.setState(0xe510, 0x1da6, 0x9d10, 0xaff, 0x9b49, 0x94aa, 0x0, 0x1);
        gbc.writeMem(0x94aa, { 0x6f });
        gbc.writeMem(0xe510, { 0x3a });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x1da6, gbc.sp());
        EXPECT(0xe511, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6f, gbc.readMem(0x94aa));
        EXPECT(0x3a, gbc.readMem(0xe510));
        // 3A 031E
        gbc.setState(0xc9ff, 0x27f9, 0xa5f0, 0x9888, 0xead8, 0x27e6, 0x1, 0x1);
        gbc.writeMem(0x27e6, { 0x3f });
        gbc.writeMem(0xc9ff, { 0x3a });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x27f9, gbc.sp());
        EXPECT(0xca00, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc9ff));
        // 3A 0320
        gbc.setState(0x1406, 0x1f70, 0x5c70, 0xedd3, 0x14db, 0x2cbd, 0x0, 0x0);
        gbc.writeMem(0x1406, { 0x3a });
        gbc.writeMem(0x2cbd, { 0xc3 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x1f70, gbc.sp());
        EXPECT(0x1407, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0321
        gbc.setState(0x8a59, 0x98d1, 0xace0, 0xd82c, 0x616c, 0x7dbf, 0x1, 0x1);
        gbc.writeMem(0x7dbf, { 0x4a });
        gbc.writeMem(0x8a59, { 0x3a });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x98d1, gbc.sp());
        EXPECT(0x8a5a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8a59));
        // 3A 0322
        gbc.setState(0xb064, 0xc03d, 0xd0a0, 0x5429, 0x2ef0, 0xe86f, 0x0, 0x0);
        gbc.writeMem(0xb064, { 0x3a });
        gbc.writeMem(0xe86f, { 0xc3 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xc03d, gbc.sp());
        EXPECT(0xb065, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb064));
        EXPECT(0xc3, gbc.readMem(0xe86f));
        // 3A 0323
        gbc.setState(0xa5e2, 0x61c4, 0xd490, 0xd6ab, 0x4bd9, 0x33b4, 0x0, 0x0);
        gbc.writeMem(0x33b4, { 0x8 });
        gbc.writeMem(0xa5e2, { 0x3a });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x61c4, gbc.sp());
        EXPECT(0xa5e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa5e2));
        // 3A 0324
        gbc.setState(0x817f, 0x5f, 0x8f10, 0x6cdc, 0xb3a6, 0xfcac, 0x1, 0x1);
        gbc.writeMem(0x817f, { 0x3a });
        gbc.writeMem(0xfcac, { 0xc3 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x5f, gbc.sp());
        EXPECT(0x8180, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x817f));
        EXPECT(0xc3, gbc.readMem(0xfcac));
        // 3A 0325
        gbc.setState(0xa4db, 0x7ea7, 0xc7a0, 0xe685, 0x7749, 0x9cf2, 0x1, 0x1);
        gbc.writeMem(0x9cf2, { 0xa2 });
        gbc.writeMem(0xa4db, { 0x3a });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x7ea7, gbc.sp());
        EXPECT(0xa4dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa2, gbc.readMem(0x9cf2));
        EXPECT(0x3a, gbc.readMem(0xa4db));
        // 3A 0326
        gbc.setState(0x33df, 0x3257, 0xdde0, 0xa876, 0xde11, 0x3fd9, 0x1, 0x1);
        gbc.writeMem(0x33df, { 0x3a });
        gbc.writeMem(0x3fd9, { 0xb9 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x3257, gbc.sp());
        EXPECT(0x33e0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0327
        gbc.setState(0xb3e7, 0x344a, 0xb880, 0x7990, 0x4b07, 0x4de5, 0x1, 0x1);
        gbc.writeMem(0x4de5, { 0x2b });
        gbc.writeMem(0xb3e7, { 0x3a });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x344a, gbc.sp());
        EXPECT(0xb3e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb3e7));
        // 3A 0328
        gbc.setState(0xc939, 0x36c0, 0x4e10, 0x969e, 0x88f4, 0x4717, 0x0, 0x1);
        gbc.writeMem(0x4717, { 0x47 });
        gbc.writeMem(0xc939, { 0x3a });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x36c0, gbc.sp());
        EXPECT(0xc93a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc939));
        // 3A 032A
        gbc.setState(0xc3a7, 0x184b, 0xd180, 0x3b7e, 0x6680, 0xfd3f, 0x1, 0x0);
        gbc.writeMem(0xc3a7, { 0x3a });
        gbc.writeMem(0xfd3f, { 0xfc });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x184b, gbc.sp());
        EXPECT(0xc3a8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc3a7));
        EXPECT(0xfc, gbc.readMem(0xfd3f));
        // 3A 032B
        gbc.setState(0x7687, 0x470d, 0xad50, 0xab02, 0x3f49, 0xb1c5, 0x1, 0x0);
        gbc.writeMem(0x7687, { 0x3a });
        gbc.writeMem(0xb1c5, { 0x4d });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x470d, gbc.sp());
        EXPECT(0x7688, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4d, gbc.readMem(0xb1c5));
        // 3A 032C
        gbc.setState(0x1014, 0x3704, 0x9e50, 0x9261, 0x1a85, 0xe4d7, 0x1, 0x0);
        gbc.writeMem(0x1014, { 0x3a });
        gbc.writeMem(0xe4d7, { 0x43 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x3704, gbc.sp());
        EXPECT(0x1015, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x43, gbc.readMem(0xe4d7));
        // 3A 032E
        gbc.setState(0x7eda, 0xb912, 0x9950, 0xfbc1, 0xffee, 0x86b, 0x0, 0x0);
        gbc.writeMem(0x86b, { 0xfd });
        gbc.writeMem(0x7eda, { 0x3a });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xb912, gbc.sp());
        EXPECT(0x7edb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 032F
        gbc.setState(0x596a, 0xfe87, 0x8ca0, 0xe820, 0x450c, 0x5020, 0x1, 0x1);
        gbc.writeMem(0x5020, { 0x4c });
        gbc.writeMem(0x596a, { 0x3a });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0xfe87, gbc.sp());
        EXPECT(0x596b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0330
        gbc.setState(0xf56, 0x799, 0x780, 0x3e64, 0x875d, 0x5153, 0x1, 0x1);
        gbc.writeMem(0xf56, { 0x3a });
        gbc.writeMem(0x5153, { 0x53 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x799, gbc.sp());
        EXPECT(0xf57, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0331
        gbc.setState(0xc4fe, 0x1949, 0xd310, 0xe667, 0x7141, 0x559f, 0x0, 0x0);
        gbc.writeMem(0x559f, { 0xd4 });
        gbc.writeMem(0xc4fe, { 0x3a });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x1949, gbc.sp());
        EXPECT(0xc4ff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc4fe));
        // 3A 0332
        gbc.setState(0xec89, 0x2e3, 0x1800, 0x69c2, 0x8447, 0xc450, 0x1, 0x1);
        gbc.writeMem(0xc450, { 0x1c });
        gbc.writeMem(0xec89, { 0x3a });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x2e3, gbc.sp());
        EXPECT(0xec8a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1c, gbc.readMem(0xc450));
        EXPECT(0x3a, gbc.readMem(0xec89));
        // 3A 0333
        gbc.setState(0x4b5a, 0x4f3f, 0x17b0, 0xf9f8, 0x41b6, 0x742f, 0x1, 0x0);
        gbc.writeMem(0x4b5a, { 0x3a });
        gbc.writeMem(0x742f, { 0xaf });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x4f3f, gbc.sp());
        EXPECT(0x4b5b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0334
        gbc.setState(0xaab6, 0x2bd4, 0x3a0, 0xea59, 0x5210, 0xcf97, 0x0, 0x1);
        gbc.writeMem(0xaab6, { 0x3a });
        gbc.writeMem(0xcf97, { 0x4b });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x2bd4, gbc.sp());
        EXPECT(0xaab7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xaab6));
        EXPECT(0x4b, gbc.readMem(0xcf97));
        // 3A 0335
        gbc.setState(0xe307, 0xdf5d, 0x75d0, 0xacca, 0x5756, 0x628b, 0x1, 0x1);
        gbc.writeMem(0x628b, { 0xe2 });
        gbc.writeMem(0xe307, { 0x3a });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0xdf5d, gbc.sp());
        EXPECT(0xe308, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xe307));
        // 3A 0336
        gbc.setState(0x876c, 0x32a9, 0x8870, 0xfd7f, 0xcf1a, 0x8abe, 0x0, 0x0);
        gbc.writeMem(0x876c, { 0x3a });
        gbc.writeMem(0x8abe, { 0xc5 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x32a9, gbc.sp());
        EXPECT(0x876d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x876c));
        EXPECT(0xc5, gbc.readMem(0x8abe));
        // 3A 0337
        gbc.setState(0x548b, 0xeb70, 0x6930, 0x92b2, 0x785d, 0xf9c4, 0x0, 0x0);
        gbc.writeMem(0x548b, { 0x3a });
        gbc.writeMem(0xf9c4, { 0x1c });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xeb70, gbc.sp());
        EXPECT(0x548c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1c, gbc.readMem(0xf9c4));
        // 3A 0339
        gbc.setState(0x7742, 0x9e37, 0xce00, 0x685, 0x421d, 0xaa23, 0x0, 0x1);
        gbc.writeMem(0x7742, { 0x3a });
        gbc.writeMem(0xaa23, { 0x2f });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x9e37, gbc.sp());
        EXPECT(0x7743, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2f, gbc.readMem(0xaa23));
        // 3A 033A
        gbc.setState(0x3cf5, 0xf220, 0xd980, 0x68b6, 0x4e23, 0x947b, 0x1, 0x0);
        gbc.writeMem(0x3cf5, { 0x3a });
        gbc.writeMem(0x947b, { 0xd8 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0xf220, gbc.sp());
        EXPECT(0x3cf6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x947b));
        // 3A 033B
        gbc.setState(0x8a6d, 0xdaa5, 0x7c40, 0x547a, 0x5206, 0x7f2, 0x0, 0x0);
        gbc.writeMem(0x7f2, { 0x6b });
        gbc.writeMem(0x8a6d, { 0x3a });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0xdaa5, gbc.sp());
        EXPECT(0x8a6e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8a6d));
        // 3A 033C
        gbc.setState(0x9fa9, 0x4f19, 0xf1b0, 0x40a0, 0xca89, 0x380f, 0x0, 0x0);
        gbc.writeMem(0x380f, { 0x81 });
        gbc.writeMem(0x9fa9, { 0x3a });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x4f19, gbc.sp());
        EXPECT(0x9faa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9fa9));
        // 3A 033D
        gbc.setState(0x759f, 0x2a6f, 0xe8e0, 0xcf99, 0x1213, 0x4482, 0x1, 0x0);
        gbc.writeMem(0x4482, { 0x72 });
        gbc.writeMem(0x759f, { 0x3a });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x2a6f, gbc.sp());
        EXPECT(0x75a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 033E
        gbc.setState(0x66f, 0xe12a, 0x2210, 0x4d32, 0x41cb, 0x9a1f, 0x0, 0x0);
        gbc.writeMem(0x66f, { 0x3a });
        gbc.writeMem(0x9a1f, { 0x6 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xe12a, gbc.sp());
        EXPECT(0x670, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6, gbc.readMem(0x9a1f));
        // 3A 033F
        gbc.setState(0xe5e5, 0x1f9e, 0x4a90, 0x416e, 0x7aba, 0xee5f, 0x1, 0x1);
        gbc.writeMem(0xe5e5, { 0x3a });
        gbc.writeMem(0xee5f, { 0xba });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x1f9e, gbc.sp());
        EXPECT(0xe5e6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xe5e5));
        EXPECT(0xba, gbc.readMem(0xee5f));
        // 3A 0340
        gbc.setState(0x9829, 0xeb36, 0x9160, 0xcb67, 0x8418, 0xa577, 0x0, 0x1);
        gbc.writeMem(0x9829, { 0x3a });
        gbc.writeMem(0xa577, { 0xfb });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xeb36, gbc.sp());
        EXPECT(0x982a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9829));
        EXPECT(0xfb, gbc.readMem(0xa577));
        // 3A 0341
        gbc.setState(0xabc5, 0x8f7d, 0x1670, 0x63f, 0xc883, 0x217a, 0x1, 0x0);
        gbc.writeMem(0x217a, { 0x65 });
        gbc.writeMem(0xabc5, { 0x3a });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x8f7d, gbc.sp());
        EXPECT(0xabc6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xabc5));
        // 3A 0342
        gbc.setState(0x4002, 0x87ae, 0x1cd0, 0xefd4, 0x9f7f, 0x8146, 0x1, 0x1);
        gbc.writeMem(0x4002, { 0x3a });
        gbc.writeMem(0x8146, { 0x6b });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x87ae, gbc.sp());
        EXPECT(0x4003, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6b, gbc.readMem(0x8146));
        // 3A 0343
        gbc.setState(0x4afe, 0x12db, 0xde50, 0x5ba7, 0xfa45, 0x7fdb, 0x0, 0x1);
        gbc.writeMem(0x4afe, { 0x3a });
        gbc.writeMem(0x7fdb, { 0xc8 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x12db, gbc.sp());
        EXPECT(0x4aff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0344
        gbc.setState(0xed4, 0xc7b6, 0xb00, 0xdf3e, 0x6b3d, 0x8f05, 0x1, 0x0);
        gbc.writeMem(0xed4, { 0x3a });
        gbc.writeMem(0x8f05, { 0x96 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xc7b6, gbc.sp());
        EXPECT(0xed5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x96, gbc.readMem(0x8f05));
        // 3A 0345
        gbc.setState(0x2ad, 0x7325, 0x1570, 0xaa16, 0x3a6, 0x2285, 0x1, 0x0);
        gbc.writeMem(0x2ad, { 0x3a });
        gbc.writeMem(0x2285, { 0xc0 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x7325, gbc.sp());
        EXPECT(0x2ae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0346
        gbc.setState(0xbd9, 0x27e6, 0x20a0, 0x14db, 0x78a8, 0x9ad5, 0x1, 0x1);
        gbc.writeMem(0xbd9, { 0x3a });
        gbc.writeMem(0x9ad5, { 0x85 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x27e6, gbc.sp());
        EXPECT(0xbda, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x85, gbc.readMem(0x9ad5));
        // 3A 0347
        gbc.setState(0xbec0, 0xe1a1, 0x1e00, 0x9053, 0xf64b, 0x2b6f, 0x0, 0x1);
        gbc.writeMem(0x2b6f, { 0x3f });
        gbc.writeMem(0xbec0, { 0x3a });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xe1a1, gbc.sp());
        EXPECT(0xbec1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbec0));
        // 3A 0348
        gbc.setState(0x4132, 0x60d4, 0x57e0, 0x2d7, 0x1374, 0xc4d3, 0x1, 0x0);
        gbc.writeMem(0x4132, { 0x3a });
        gbc.writeMem(0xc4d3, { 0xc });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x60d4, gbc.sp());
        EXPECT(0x4133, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc, gbc.readMem(0xc4d3));
        // 3A 0349
        gbc.setState(0x8c7a, 0x228a, 0xe320, 0x3471, 0x8997, 0x53b7, 0x0, 0x1);
        gbc.writeMem(0x53b7, { 0x36 });
        gbc.writeMem(0x8c7a, { 0x3a });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x228a, gbc.sp());
        EXPECT(0x8c7b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8c7a));
        // 3A 034A
        gbc.setState(0x936d, 0x1846, 0x1050, 0xc9a6, 0xc2a3, 0xcb6e, 0x1, 0x0);
        gbc.writeMem(0x936d, { 0x3a });
        gbc.writeMem(0xcb6e, { 0xa9 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x1846, gbc.sp());
        EXPECT(0x936e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x936d));
        EXPECT(0xa9, gbc.readMem(0xcb6e));
        // 3A 034B
        gbc.setState(0x2409, 0x1963, 0xb2a0, 0x3f3e, 0x9da, 0xf9b0, 0x0, 0x0);
        gbc.writeMem(0x2409, { 0x3a });
        gbc.writeMem(0xf9b0, { 0x73 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x1963, gbc.sp());
        EXPECT(0x240a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x73, gbc.readMem(0xf9b0));
        // 3A 034C
        gbc.setState(0x9cae, 0x1318, 0xe040, 0xabc4, 0x11c3, 0xaba, 0x1, 0x0);
        gbc.writeMem(0xaba, { 0x46 });
        gbc.writeMem(0x9cae, { 0x3a });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x1318, gbc.sp());
        EXPECT(0x9caf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9cae));
        // 3A 034D
        gbc.setState(0x8d62, 0xb4a7, 0x1620, 0x6f44, 0x9d02, 0xcf3f, 0x1, 0x1);
        gbc.writeMem(0x8d62, { 0x3a });
        gbc.writeMem(0xcf3f, { 0x81 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0xb4a7, gbc.sp());
        EXPECT(0x8d63, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8d62));
        EXPECT(0x81, gbc.readMem(0xcf3f));
        // 3A 034E
        gbc.setState(0xb549, 0x187a, 0x7fd0, 0x669, 0xabd5, 0x7234, 0x1, 0x0);
        gbc.writeMem(0x7234, { 0x5f });
        gbc.writeMem(0xb549, { 0x3a });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x187a, gbc.sp());
        EXPECT(0xb54a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb549));
        // 3A 034F
        gbc.setState(0xfcd, 0xe822, 0xe50, 0x64cf, 0xaf7, 0x7c94, 0x0, 0x0);
        gbc.writeMem(0xfcd, { 0x3a });
        gbc.writeMem(0x7c94, { 0xff });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xe822, gbc.sp());
        EXPECT(0xfce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0350
        gbc.setState(0xa77d, 0x8fac, 0xb0b0, 0x9c44, 0x74e4, 0x78c2, 0x1, 0x1);
        gbc.writeMem(0x78c2, { 0x7 });
        gbc.writeMem(0xa77d, { 0x3a });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x8fac, gbc.sp());
        EXPECT(0xa77e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa77d));
        // 3A 0351
        gbc.setState(0x80bf, 0x853c, 0xa4e0, 0xb561, 0x5ad4, 0xf19c, 0x0, 0x1);
        gbc.writeMem(0x80bf, { 0x3a });
        gbc.writeMem(0xf19c, { 0x93 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x853c, gbc.sp());
        EXPECT(0x80c0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x80bf));
        EXPECT(0x93, gbc.readMem(0xf19c));
        // 3A 0352
        gbc.setState(0x42, 0x5252, 0x7480, 0x14c0, 0xe43c, 0x254e, 0x1, 0x1);
        gbc.writeMem(0x42, { 0x3a });
        gbc.writeMem(0x254e, { 0xbd });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x5252, gbc.sp());
        EXPECT(0x43, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0353
        gbc.setState(0x35ce, 0x58b9, 0xc10, 0x828f, 0x26b3, 0xc3c1, 0x0, 0x0);
        gbc.writeMem(0x35ce, { 0x3a });
        gbc.writeMem(0xc3c1, { 0xa2 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x58b9, gbc.sp());
        EXPECT(0x35cf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa2, gbc.readMem(0xc3c1));
        // 3A 0354
        gbc.setState(0xd947, 0xd3c3, 0x4270, 0x643d, 0x8adb, 0x946e, 0x1, 0x1);
        gbc.writeMem(0x946e, { 0x93 });
        gbc.writeMem(0xd947, { 0x3a });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xd3c3, gbc.sp());
        EXPECT(0xd948, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x93, gbc.readMem(0x946e));
        EXPECT(0x3a, gbc.readMem(0xd947));
        // 3A 0355
        gbc.setState(0xc53c, 0x4816, 0x56a0, 0x85f, 0xc635, 0x12e1, 0x1, 0x0);
        gbc.writeMem(0x12e1, { 0x95 });
        gbc.writeMem(0xc53c, { 0x3a });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x4816, gbc.sp());
        EXPECT(0xc53d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc53c));
        // 3A 0356
        gbc.setState(0x87a1, 0x3505, 0xb1d0, 0xc08, 0xaf50, 0x148a, 0x0, 0x0);
        gbc.writeMem(0x148a, { 0xff });
        gbc.writeMem(0x87a1, { 0x3a });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x3505, gbc.sp());
        EXPECT(0x87a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x87a1));
        // 3A 0357
        gbc.setState(0xe3dd, 0xa791, 0x4570, 0xc1ea, 0xaaa3, 0xd36a, 0x1, 0x0);
        gbc.writeMem(0xd36a, { 0xdd });
        gbc.writeMem(0xe3dd, { 0x3a });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xa791, gbc.sp());
        EXPECT(0xe3de, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xdd, gbc.readMem(0xd36a));
        EXPECT(0x3a, gbc.readMem(0xe3dd));
        // 3A 0358
        gbc.setState(0xeb53, 0xcb1f, 0x410, 0xf7f6, 0x95b1, 0x2a69, 0x1, 0x1);
        gbc.writeMem(0x2a69, { 0x30 });
        gbc.writeMem(0xeb53, { 0x3a });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0xcb1f, gbc.sp());
        EXPECT(0xeb54, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xeb53));
        // 3A 0359
        gbc.setState(0xc7c0, 0x4107, 0x8870, 0x407f, 0x85f4, 0xa213, 0x0, 0x0);
        gbc.writeMem(0xa213, { 0xca });
        gbc.writeMem(0xc7c0, { 0x3a });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x4107, gbc.sp());
        EXPECT(0xc7c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xca, gbc.readMem(0xa213));
        EXPECT(0x3a, gbc.readMem(0xc7c0));
        // 3A 035A
        gbc.setState(0x53a5, 0x35af, 0x6790, 0xc62b, 0xc812, 0xbeb7, 0x0, 0x1);
        gbc.writeMem(0x53a5, { 0x3a });
        gbc.writeMem(0xbeb7, { 0xd5 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x35af, gbc.sp());
        EXPECT(0x53a6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd5, gbc.readMem(0xbeb7));
        // 3A 035B
        gbc.setState(0xad57, 0x9719, 0xcce0, 0x8330, 0xbd06, 0x92aa, 0x0, 0x1);
        gbc.writeMem(0x92aa, { 0x98 });
        gbc.writeMem(0xad57, { 0x3a });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x9719, gbc.sp());
        EXPECT(0xad58, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x98, gbc.readMem(0x92aa));
        EXPECT(0x3a, gbc.readMem(0xad57));
        // 3A 035C
        gbc.setState(0x4a32, 0x310a, 0xae50, 0x862, 0xe29f, 0x11f4, 0x1, 0x0);
        gbc.writeMem(0x11f4, { 0x2a });
        gbc.writeMem(0x4a32, { 0x3a });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x310a, gbc.sp());
        EXPECT(0x4a33, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 035D
        gbc.setState(0x2f24, 0x5007, 0xd150, 0x6912, 0xf4aa, 0x378b, 0x1, 0x1);
        gbc.writeMem(0x2f24, { 0x3a });
        gbc.writeMem(0x378b, { 0xb0 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x5007, gbc.sp());
        EXPECT(0x2f25, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 035E
        gbc.setState(0x653c, 0xb894, 0x2900, 0x2cb2, 0x84e0, 0x439d, 0x0, 0x0);
        gbc.writeMem(0x439d, { 0x19 });
        gbc.writeMem(0x653c, { 0x3a });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xb894, gbc.sp());
        EXPECT(0x653d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 035F
        gbc.setState(0xdf56, 0xcf70, 0xeee0, 0xf186, 0x68da, 0xcbf0, 0x0, 0x1);
        gbc.writeMem(0xcbf0, { 0x32 });
        gbc.writeMem(0xdf56, { 0x3a });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xcf70, gbc.sp());
        EXPECT(0xdf57, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x32, gbc.readMem(0xcbf0));
        EXPECT(0x3a, gbc.readMem(0xdf56));
        // 3A 0360
        gbc.setState(0xb48e, 0x1987, 0x70c0, 0xdaa0, 0x14b, 0x6de6, 0x0, 0x1);
        gbc.writeMem(0x6de6, { 0xdd });
        gbc.writeMem(0xb48e, { 0x3a });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x1987, gbc.sp());
        EXPECT(0xb48f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb48e));
        // 3A 0361
        gbc.setState(0xe59c, 0xea51, 0x31d0, 0x653d, 0xadb7, 0xa043, 0x0, 0x0);
        gbc.writeMem(0xa043, { 0xad });
        gbc.writeMem(0xe59c, { 0x3a });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xea51, gbc.sp());
        EXPECT(0xe59d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xad, gbc.readMem(0xa043));
        EXPECT(0x3a, gbc.readMem(0xe59c));
        // 3A 0362
        gbc.setState(0x6a83, 0xd68f, 0xfc40, 0xe79c, 0x3a55, 0xa631, 0x1, 0x1);
        gbc.writeMem(0x6a83, { 0x3a });
        gbc.writeMem(0xa631, { 0x39 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0xd68f, gbc.sp());
        EXPECT(0x6a84, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x39, gbc.readMem(0xa631));
        // 3A 0363
        gbc.setState(0xbed8, 0x40cf, 0xee50, 0x87e9, 0xab95, 0x5b13, 0x0, 0x0);
        gbc.writeMem(0x5b13, { 0xc7 });
        gbc.writeMem(0xbed8, { 0x3a });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x40cf, gbc.sp());
        EXPECT(0xbed9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbed8));
        // 3A 0364
        gbc.setState(0x13cb, 0x8d6e, 0x5370, 0xdcb8, 0x30df, 0x89af, 0x0, 0x1);
        gbc.writeMem(0x13cb, { 0x3a });
        gbc.writeMem(0x89af, { 0x71 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x8d6e, gbc.sp());
        EXPECT(0x13cc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x71, gbc.readMem(0x89af));
        // 3A 0365
        gbc.setState(0x230e, 0xc138, 0xd250, 0x42, 0x2fc7, 0x2a18, 0x0, 0x1);
        gbc.writeMem(0x230e, { 0x3a });
        gbc.writeMem(0x2a18, { 0x6d });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xc138, gbc.sp());
        EXPECT(0x230f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0366
        gbc.setState(0xacce, 0xd65d, 0x4650, 0x4025, 0x611c, 0x4f55, 0x1, 0x0);
        gbc.writeMem(0x4f55, { 0xcc });
        gbc.writeMem(0xacce, { 0x3a });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xd65d, gbc.sp());
        EXPECT(0xaccf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xacce));
        // 3A 0367
        gbc.setState(0x990f, 0xa5d0, 0xcfe0, 0xafd6, 0x1c4c, 0xd13e, 0x0, 0x0);
        gbc.writeMem(0x990f, { 0x3a });
        gbc.writeMem(0xd13e, { 0xd0 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xa5d0, gbc.sp());
        EXPECT(0x9910, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x990f));
        EXPECT(0xd0, gbc.readMem(0xd13e));
        // 3A 0368
        gbc.setState(0x96e9, 0xc8cf, 0xee50, 0xdf96, 0x9508, 0x9a05, 0x0, 0x0);
        gbc.writeMem(0x96e9, { 0x3a });
        gbc.writeMem(0x9a05, { 0xd9 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xc8cf, gbc.sp());
        EXPECT(0x96ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x96e9));
        EXPECT(0xd9, gbc.readMem(0x9a05));
        // 3A 0369
        gbc.setState(0x7aec, 0x6ed4, 0xa820, 0x5fdb, 0x9761, 0xc148, 0x1, 0x0);
        gbc.writeMem(0x7aec, { 0x3a });
        gbc.writeMem(0xc148, { 0x6b });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x6ed4, gbc.sp());
        EXPECT(0x7aed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6b, gbc.readMem(0xc148));
        // 3A 036A
        gbc.setState(0x2e91, 0xa017, 0xc970, 0x36e5, 0xf802, 0x4a2a, 0x0, 0x0);
        gbc.writeMem(0x2e91, { 0x3a });
        gbc.writeMem(0x4a2a, { 0xbc });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0xa017, gbc.sp());
        EXPECT(0x2e92, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 036B
        gbc.setState(0x5c69, 0xfdbc, 0x36c0, 0xe8d7, 0x2dc9, 0x87a5, 0x0, 0x1);
        gbc.writeMem(0x5c69, { 0x3a });
        gbc.writeMem(0x87a5, { 0x62 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xfdbc, gbc.sp());
        EXPECT(0x5c6a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x62, gbc.readMem(0x87a5));
        // 3A 036C
        gbc.setState(0x5660, 0x2596, 0x2dc0, 0xb815, 0x7df4, 0x7797, 0x1, 0x1);
        gbc.writeMem(0x5660, { 0x3a });
        gbc.writeMem(0x7797, { 0x31 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x2596, gbc.sp());
        EXPECT(0x5661, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 036D
        gbc.setState(0x1b9f, 0xcd11, 0x3b60, 0x2f90, 0xdd15, 0xe5a3, 0x1, 0x1);
        gbc.writeMem(0x1b9f, { 0x3a });
        gbc.writeMem(0xe5a3, { 0xf1 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xcd11, gbc.sp());
        EXPECT(0x1ba0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf1, gbc.readMem(0xe5a3));
        // 3A 036E
        gbc.setState(0x4b01, 0x1d1d, 0x64f0, 0x5fdc, 0x8e83, 0x9b59, 0x1, 0x1);
        gbc.writeMem(0x4b01, { 0x3a });
        gbc.writeMem(0x9b59, { 0x5b });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x1d1d, gbc.sp());
        EXPECT(0x4b02, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5b, gbc.readMem(0x9b59));
        // 3A 036F
        gbc.setState(0x9589, 0xc764, 0x9fe0, 0x54b0, 0xfcaf, 0x956e, 0x0, 0x0);
        gbc.writeMem(0x956e, { 0x8e });
        gbc.writeMem(0x9589, { 0x3a });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xc764, gbc.sp());
        EXPECT(0x958a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x8e, gbc.readMem(0x956e));
        EXPECT(0x3a, gbc.readMem(0x9589));
        // 3A 0370
        gbc.setState(0x6762, 0x3c7a, 0xbbf0, 0xb458, 0x8ef8, 0xf77, 0x0, 0x0);
        gbc.writeMem(0xf77, { 0x53 });
        gbc.writeMem(0x6762, { 0x3a });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x3c7a, gbc.sp());
        EXPECT(0x6763, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0371
        gbc.setState(0xbf66, 0xb6fa, 0x2aa0, 0xe8c3, 0xa1b2, 0x6a1, 0x0, 0x1);
        gbc.writeMem(0x6a1, { 0x42 });
        gbc.writeMem(0xbf66, { 0x3a });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xb6fa, gbc.sp());
        EXPECT(0xbf67, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbf66));
        // 3A 0372
        gbc.setState(0xad28, 0xdf84, 0x4ca0, 0x70b8, 0xb14, 0x584f, 0x1, 0x0);
        gbc.writeMem(0x584f, { 0xb5 });
        gbc.writeMem(0xad28, { 0x3a });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xdf84, gbc.sp());
        EXPECT(0xad29, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xad28));
        // 3A 0373
        gbc.setState(0xde69, 0xfc68, 0x77e0, 0x5784, 0x3d92, 0xd892, 0x1, 0x1);
        gbc.writeMem(0xd892, { 0x49 });
        gbc.writeMem(0xde69, { 0x3a });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xfc68, gbc.sp());
        EXPECT(0xde6a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x49, gbc.readMem(0xd892));
        EXPECT(0x3a, gbc.readMem(0xde69));
        // 3A 0374
        gbc.setState(0x1901, 0xc2d3, 0xf030, 0x8e89, 0x1c47, 0x4a51, 0x0, 0x0);
        gbc.writeMem(0x1901, { 0x3a });
        gbc.writeMem(0x4a51, { 0x8d });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xc2d3, gbc.sp());
        EXPECT(0x1902, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0375
        gbc.setState(0xabc4, 0x551d, 0x9350, 0x84ca, 0xb6d, 0xcb51, 0x0, 0x1);
        gbc.writeMem(0xabc4, { 0x3a });
        gbc.writeMem(0xcb51, { 0x86 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x551d, gbc.sp());
        EXPECT(0xabc5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xabc4));
        EXPECT(0x86, gbc.readMem(0xcb51));
        // 3A 0376
        gbc.setState(0xec0a, 0x205d, 0xef20, 0xbbb4, 0xbe26, 0x4ad7, 0x1, 0x0);
        gbc.writeMem(0x4ad7, { 0xc8 });
        gbc.writeMem(0xec0a, { 0x3a });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x205d, gbc.sp());
        EXPECT(0xec0b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xec0a));
        // 3A 0377
        gbc.setState(0xdfb6, 0x56ae, 0x2910, 0xccbf, 0x8f07, 0xd77f, 0x1, 0x1);
        gbc.writeMem(0xd77f, { 0x13 });
        gbc.writeMem(0xdfb6, { 0x3a });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x56ae, gbc.sp());
        EXPECT(0xdfb7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x13, gbc.readMem(0xd77f));
        EXPECT(0x3a, gbc.readMem(0xdfb6));
        // 3A 0378
        gbc.setState(0x3585, 0x672b, 0xb10, 0xf3de, 0x2bb8, 0x55ec, 0x0, 0x1);
        gbc.writeMem(0x3585, { 0x3a });
        gbc.writeMem(0x55ec, { 0x60 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x672b, gbc.sp());
        EXPECT(0x3586, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0379
        gbc.setState(0xd12, 0x517d, 0x5b20, 0x57d8, 0x6029, 0x4e23, 0x0, 0x0);
        gbc.writeMem(0xd12, { 0x3a });
        gbc.writeMem(0x4e23, { 0xb });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x517d, gbc.sp());
        EXPECT(0xd13, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 037A
        gbc.setState(0xdbb0, 0x3e98, 0x7320, 0x4ef1, 0xe486, 0xfc7c, 0x0, 0x1);
        gbc.writeMem(0xdbb0, { 0x3a });
        gbc.writeMem(0xfc7c, { 0x69 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x3e98, gbc.sp());
        EXPECT(0xdbb1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xdbb0));
        EXPECT(0x69, gbc.readMem(0xfc7c));
        // 3A 037B
        gbc.setState(0x2bb3, 0x2cf3, 0xc080, 0xa935, 0x9d14, 0xd534, 0x0, 0x1);
        gbc.writeMem(0x2bb3, { 0x3a });
        gbc.writeMem(0xd534, { 0x5c });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x2cf3, gbc.sp());
        EXPECT(0x2bb4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5c, gbc.readMem(0xd534));
        // 3A 037C
        gbc.setState(0x6352, 0xc687, 0x2640, 0x1ce6, 0xe9f4, 0x522e, 0x1, 0x1);
        gbc.writeMem(0x522e, { 0x6f });
        gbc.writeMem(0x6352, { 0x3a });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xc687, gbc.sp());
        EXPECT(0x6353, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 037D
        gbc.setState(0x19a4, 0x680b, 0x4fc0, 0xd1e7, 0x3518, 0x8a42, 0x0, 0x0);
        gbc.writeMem(0x19a4, { 0x3a });
        gbc.writeMem(0x8a42, { 0x7c });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x680b, gbc.sp());
        EXPECT(0x19a5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x7c, gbc.readMem(0x8a42));
        // 3A 037E
        gbc.setState(0x8735, 0x2b67, 0x9490, 0x3a3c, 0xac29, 0x119b, 0x0, 0x1);
        gbc.writeMem(0x119b, { 0x3d });
        gbc.writeMem(0x8735, { 0x3a });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x2b67, gbc.sp());
        EXPECT(0x8736, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8735));
        // 3A 037F
        gbc.setState(0x381d, 0xbea5, 0xd3f0, 0xfec4, 0x3847, 0xbe6e, 0x0, 0x1);
        gbc.writeMem(0x381d, { 0x3a });
        gbc.writeMem(0xbe6e, { 0xb6 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xbea5, gbc.sp());
        EXPECT(0x381e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb6, gbc.readMem(0xbe6e));
        // 3A 0380
        gbc.setState(0x5157, 0xaf3d, 0x82d0, 0xa10a, 0x98fb, 0xefea, 0x1, 0x0);
        gbc.writeMem(0x5157, { 0x3a });
        gbc.writeMem(0xefea, { 0xd9 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xaf3d, gbc.sp());
        EXPECT(0x5158, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd9, gbc.readMem(0xefea));
        // 3A 0381
        gbc.setState(0x739b, 0x5c36, 0xc7f0, 0x9976, 0x3af4, 0xfb3a, 0x1, 0x0);
        gbc.writeMem(0x739b, { 0x3a });
        gbc.writeMem(0xfb3a, { 0x30 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x5c36, gbc.sp());
        EXPECT(0x739c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x30, gbc.readMem(0xfb3a));
        // 3A 0382
        gbc.setState(0xac72, 0xecd3, 0x8740, 0xbeb5, 0x9749, 0x122, 0x0, 0x0);
        gbc.writeMem(0x122, { 0xb3 });
        gbc.writeMem(0xac72, { 0x3a });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xecd3, gbc.sp());
        EXPECT(0xac73, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xac72));
        // 3A 0383
        gbc.setState(0x6a61, 0xbd92, 0x7c20, 0xfc67, 0xaf21, 0xd995, 0x1, 0x1);
        gbc.writeMem(0x6a61, { 0x3a });
        gbc.writeMem(0xd995, { 0x9b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xbd92, gbc.sp());
        EXPECT(0x6a62, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x9b, gbc.readMem(0xd995));
        // 3A 0384
        gbc.setState(0x9d70, 0x62a2, 0x44d0, 0x126d, 0xb27d, 0x9091, 0x0, 0x1);
        gbc.writeMem(0x9091, { 0x94 });
        gbc.writeMem(0x9d70, { 0x3a });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x62a2, gbc.sp());
        EXPECT(0x9d71, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x94, gbc.readMem(0x9091));
        EXPECT(0x3a, gbc.readMem(0x9d70));
        // 3A 0385
        gbc.setState(0xa4c2, 0xcb0d, 0x7e00, 0xd0f8, 0x72d3, 0x9337, 0x1, 0x0);
        gbc.writeMem(0x9337, { 0xa9 });
        gbc.writeMem(0xa4c2, { 0x3a });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xcb0d, gbc.sp());
        EXPECT(0xa4c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa9, gbc.readMem(0x9337));
        EXPECT(0x3a, gbc.readMem(0xa4c2));
        // 3A 0386
        gbc.setState(0x2875, 0xb19d, 0xee60, 0x46a6, 0xb10a, 0xfb77, 0x1, 0x1);
        gbc.writeMem(0x2875, { 0x3a });
        gbc.writeMem(0xfb77, { 0x88 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xb19d, gbc.sp());
        EXPECT(0x2876, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x88, gbc.readMem(0xfb77));
        // 3A 0387
        gbc.setState(0xc976, 0x68c2, 0x2630, 0xa0a, 0x4398, 0xc335, 0x0, 0x0);
        gbc.writeMem(0xc335, { 0xd1 });
        gbc.writeMem(0xc976, { 0x3a });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x68c2, gbc.sp());
        EXPECT(0xc977, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd1, gbc.readMem(0xc335));
        EXPECT(0x3a, gbc.readMem(0xc976));
        // 3A 0388
        gbc.setState(0xb901, 0x1ca8, 0xe580, 0x1a55, 0x7ee0, 0xfa, 0x1, 0x0);
        gbc.writeMem(0xfa, { 0x32 });
        gbc.writeMem(0xb901, { 0x3a });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x1ca8, gbc.sp());
        EXPECT(0xb902, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb901));
        // 3A 0389
        gbc.setState(0x2b17, 0xf474, 0x31e0, 0x2b76, 0xf7e2, 0x3281, 0x1, 0x0);
        gbc.writeMem(0x2b17, { 0x3a });
        gbc.writeMem(0x3281, { 0xbf });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0xf474, gbc.sp());
        EXPECT(0x2b18, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 038A
        gbc.setState(0x1ad7, 0x6c0, 0x5920, 0x73ce, 0x5dc3, 0x7dcb, 0x1, 0x1);
        gbc.writeMem(0x1ad7, { 0x3a });
        gbc.writeMem(0x7dcb, { 0xa3 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x6c0, gbc.sp());
        EXPECT(0x1ad8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 038B
        gbc.setState(0x78ef, 0xe74d, 0xadc0, 0x43de, 0x40f, 0x1555, 0x0, 0x0);
        gbc.writeMem(0x1555, { 0xf0 });
        gbc.writeMem(0x78ef, { 0x3a });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xe74d, gbc.sp());
        EXPECT(0x78f0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 038C
        gbc.setState(0x5dbd, 0xac6f, 0x48a0, 0xcbf0, 0xfd1b, 0x7e83, 0x0, 0x0);
        gbc.writeMem(0x5dbd, { 0x3a });
        gbc.writeMem(0x7e83, { 0x74 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xac6f, gbc.sp());
        EXPECT(0x5dbe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 038D
        gbc.setState(0x93c4, 0xad3c, 0x7810, 0x9af, 0x71f2, 0xf03d, 0x1, 0x1);
        gbc.writeMem(0x93c4, { 0x3a });
        gbc.writeMem(0xf03d, { 0x34 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xad3c, gbc.sp());
        EXPECT(0x93c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x93c4));
        EXPECT(0x34, gbc.readMem(0xf03d));
        // 3A 038F
        gbc.setState(0xb0fc, 0x3245, 0xec30, 0x11e6, 0xfdaf, 0xfebf, 0x0, 0x1);
        gbc.writeMem(0xb0fc, { 0x3a });
        gbc.writeMem(0xfebf, { 0xfa });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x3245, gbc.sp());
        EXPECT(0xb0fd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb0fc));
        EXPECT(0xfa, gbc.readMem(0xfebf));
        // 3A 0390
        gbc.setState(0x7b49, 0xf433, 0x7160, 0xc912, 0x86d4, 0x2882, 0x1, 0x0);
        gbc.writeMem(0x2882, { 0xb6 });
        gbc.writeMem(0x7b49, { 0x3a });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xf433, gbc.sp());
        EXPECT(0x7b4a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0391
        gbc.setState(0xc3b5, 0xeb82, 0x3de0, 0x6ba5, 0x9dfa, 0xcd3, 0x1, 0x0);
        gbc.writeMem(0xcd3, { 0x6c });
        gbc.writeMem(0xc3b5, { 0x3a });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xeb82, gbc.sp());
        EXPECT(0xc3b6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xc3b5));
        // 3A 0392
        gbc.setState(0x34a9, 0xc692, 0x52b0, 0xcd45, 0x60e7, 0x7b88, 0x1, 0x0);
        gbc.writeMem(0x34a9, { 0x3a });
        gbc.writeMem(0x7b88, { 0xad });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xc692, gbc.sp());
        EXPECT(0x34aa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0393
        gbc.setState(0x11fe, 0xdd74, 0x8e70, 0xe837, 0xe978, 0xc4a2, 0x0, 0x0);
        gbc.writeMem(0x11fe, { 0x3a });
        gbc.writeMem(0xc4a2, { 0xf2 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xdd74, gbc.sp());
        EXPECT(0x11ff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf2, gbc.readMem(0xc4a2));
        // 3A 0394
        gbc.setState(0x68c2, 0x3250, 0x6db0, 0x8a01, 0xd4d4, 0x3fd, 0x1, 0x1);
        gbc.writeMem(0x3fd, { 0x6 });
        gbc.writeMem(0x68c2, { 0x3a });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x3250, gbc.sp());
        EXPECT(0x68c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 0395
        gbc.setState(0xd660, 0xebfc, 0x93b0, 0x1bc, 0xd01f, 0xba2d, 0x1, 0x1);
        gbc.writeMem(0xba2d, { 0x52 });
        gbc.writeMem(0xd660, { 0x3a });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xebfc, gbc.sp());
        EXPECT(0xd661, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x52, gbc.readMem(0xba2d));
        EXPECT(0x3a, gbc.readMem(0xd660));
        // 3A 0396
        gbc.setState(0xd752, 0x977d, 0x78b0, 0xe778, 0x6e4d, 0x6e46, 0x0, 0x0);
        gbc.writeMem(0x6e46, { 0x19 });
        gbc.writeMem(0xd752, { 0x3a });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x977d, gbc.sp());
        EXPECT(0xd753, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xd752));
        // 3A 0397
        gbc.setState(0x7e19, 0x703, 0x9a40, 0x875, 0x6c07, 0x2431, 0x0, 0x0);
        gbc.writeMem(0x2431, { 0x29 });
        gbc.writeMem(0x7e19, { 0x3a });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x703, gbc.sp());
        EXPECT(0x7e1a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 0398
        gbc.setState(0xbbbb, 0x6de5, 0xbbf0, 0x470b, 0xf4c8, 0x8b9c, 0x0, 0x0);
        gbc.writeMem(0x8b9c, { 0x17 });
        gbc.writeMem(0xbbbb, { 0x3a });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x6de5, gbc.sp());
        EXPECT(0xbbbc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x17, gbc.readMem(0x8b9c));
        EXPECT(0x3a, gbc.readMem(0xbbbb));
        // 3A 0399
        gbc.setState(0x3896, 0x772b, 0x83d0, 0x63de, 0x9c97, 0x77b4, 0x1, 0x1);
        gbc.writeMem(0x3896, { 0x3a });
        gbc.writeMem(0x77b4, { 0xee });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x772b, gbc.sp());
        EXPECT(0x3897, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 039A
        gbc.setState(0x81eb, 0x3311, 0x3cb0, 0xd711, 0xc5bf, 0x4113, 0x1, 0x0);
        gbc.writeMem(0x4113, { 0xbd });
        gbc.writeMem(0x81eb, { 0x3a });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x3311, gbc.sp());
        EXPECT(0x81ec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x81eb));
        // 3A 039B
        gbc.setState(0x349e, 0x5dd6, 0xe0b0, 0xc51a, 0x3173, 0xe5a9, 0x0, 0x1);
        gbc.writeMem(0x349e, { 0x3a });
        gbc.writeMem(0xe5a9, { 0x99 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x5dd6, gbc.sp());
        EXPECT(0x349f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x99, gbc.readMem(0xe5a9));
        // 3A 039C
        gbc.setState(0xb353, 0xcbad, 0x7100, 0xf2ea, 0x5e04, 0xeaba, 0x1, 0x1);
        gbc.writeMem(0xb353, { 0x3a });
        gbc.writeMem(0xeaba, { 0x17 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xcbad, gbc.sp());
        EXPECT(0xb354, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb353));
        EXPECT(0x17, gbc.readMem(0xeaba));
        // 3A 039D
        gbc.setState(0xb626, 0xe1e, 0x3710, 0x7288, 0xa1f8, 0xf412, 0x0, 0x0);
        gbc.writeMem(0xb626, { 0x3a });
        gbc.writeMem(0xf412, { 0xc0 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0xe1e, gbc.sp());
        EXPECT(0xb627, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb626));
        EXPECT(0xc0, gbc.readMem(0xf412));
        // 3A 039E
        gbc.setState(0x81f, 0x8ff4, 0x5750, 0x9cf, 0xf7fa, 0x1643, 0x1, 0x1);
        gbc.writeMem(0x81f, { 0x3a });
        gbc.writeMem(0x1643, { 0x15 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x8ff4, gbc.sp());
        EXPECT(0x820, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 039F
        gbc.setState(0xbdf2, 0x4d9e, 0x7b90, 0x8eed, 0xc09d, 0xf892, 0x0, 0x1);
        gbc.writeMem(0xbdf2, { 0x3a });
        gbc.writeMem(0xf892, { 0x4 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x4d9e, gbc.sp());
        EXPECT(0xbdf3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbdf2));
        EXPECT(0x4, gbc.readMem(0xf892));
        // 3A 03A0
        gbc.setState(0xa0dd, 0x5747, 0xffe0, 0x74b, 0x78b5, 0xbc12, 0x0, 0x1);
        gbc.writeMem(0xa0dd, { 0x3a });
        gbc.writeMem(0xbc12, { 0x97 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x5747, gbc.sp());
        EXPECT(0xa0de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa0dd));
        EXPECT(0x97, gbc.readMem(0xbc12));
        // 3A 03A1
        gbc.setState(0x3057, 0xc806, 0xb4b0, 0x8865, 0x7573, 0x6b82, 0x0, 0x0);
        gbc.writeMem(0x3057, { 0x3a });
        gbc.writeMem(0x6b82, { 0xc });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xc806, gbc.sp());
        EXPECT(0x3058, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 03A3
        gbc.setState(0x49e9, 0x33e0, 0x320, 0x2ebf, 0x35c2, 0x3d32, 0x1, 0x0);
        gbc.writeMem(0x3d32, { 0x69 });
        gbc.writeMem(0x49e9, { 0x3a });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x33e0, gbc.sp());
        EXPECT(0x49ea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 03A4
        gbc.setState(0xa2b9, 0x1c2b, 0x1950, 0xdacb, 0xbce1, 0x2ae1, 0x0, 0x0);
        gbc.writeMem(0x2ae1, { 0x95 });
        gbc.writeMem(0xa2b9, { 0x3a });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x1c2b, gbc.sp());
        EXPECT(0xa2ba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa2b9));
        // 3A 03A5
        gbc.setState(0x947b, 0x54b7, 0x3ce0, 0x29bb, 0xbd4a, 0x8fa4, 0x1, 0x0);
        gbc.writeMem(0x8fa4, { 0x3c });
        gbc.writeMem(0x947b, { 0x3a });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x54b7, gbc.sp());
        EXPECT(0x947c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3c, gbc.readMem(0x8fa4));
        EXPECT(0x3a, gbc.readMem(0x947b));
        // 3A 03A6
        gbc.setState(0x489a, 0x7ef4, 0x5480, 0xaae0, 0x2107, 0x6f0b, 0x0, 0x0);
        gbc.writeMem(0x489a, { 0x3a });
        gbc.writeMem(0x6f0b, { 0xd8 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x7ef4, gbc.sp());
        EXPECT(0x489b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 03A7
        gbc.setState(0x3fcf, 0x5868, 0x9fe0, 0xc698, 0x821a, 0x6235, 0x1, 0x0);
        gbc.writeMem(0x3fcf, { 0x3a });
        gbc.writeMem(0x6235, { 0xac });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x5868, gbc.sp());
        EXPECT(0x3fd0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 03A9
        gbc.setState(0xde40, 0x2111, 0x7c80, 0xf683, 0xf8b3, 0x43cb, 0x1, 0x0);
        gbc.writeMem(0x43cb, { 0xe3 });
        gbc.writeMem(0xde40, { 0x3a });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x2111, gbc.sp());
        EXPECT(0xde41, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xde40));
        // 3A 03AA
        gbc.setState(0x926b, 0x86f8, 0x2970, 0x4d8c, 0x373, 0x6aa5, 0x1, 0x1);
        gbc.writeMem(0x6aa5, { 0xd6 });
        gbc.writeMem(0x926b, { 0x3a });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x86f8, gbc.sp());
        EXPECT(0x926c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x926b));
        // 3A 03AB
        gbc.setState(0x8c2a, 0x4cf0, 0x2460, 0x89fa, 0x93b0, 0x355e, 0x1, 0x0);
        gbc.writeMem(0x355e, { 0x84 });
        gbc.writeMem(0x8c2a, { 0x3a });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x4cf0, gbc.sp());
        EXPECT(0x8c2b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8c2a));
        // 3A 03AC
        gbc.setState(0x9add, 0x1, 0xdbc0, 0x2558, 0xb7c7, 0xe86c, 0x0, 0x1);
        gbc.writeMem(0x9add, { 0x3a });
        gbc.writeMem(0xe86c, { 0xbf });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x1, gbc.sp());
        EXPECT(0x9ade, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9add));
        EXPECT(0xbf, gbc.readMem(0xe86c));
        // 3A 03AD
        gbc.setState(0x9715, 0xed55, 0x5460, 0x63e4, 0x731c, 0x494a, 0x1, 0x1);
        gbc.writeMem(0x494a, { 0xa3 });
        gbc.writeMem(0x9715, { 0x3a });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xed55, gbc.sp());
        EXPECT(0x9716, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9715));
        // 3A 03AE
        gbc.setState(0x85e3, 0xceb5, 0xca10, 0x6c09, 0xa24c, 0x17d2, 0x1, 0x1);
        gbc.writeMem(0x17d2, { 0xa1 });
        gbc.writeMem(0x85e3, { 0x3a });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xceb5, gbc.sp());
        EXPECT(0x85e4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x85e3));
        // 3A 03AF
        gbc.setState(0xcf6c, 0xac7a, 0xd580, 0xbe63, 0xb18a, 0x2986, 0x0, 0x1);
        gbc.writeMem(0x2986, { 0x4 });
        gbc.writeMem(0xcf6c, { 0x3a });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xac7a, gbc.sp());
        EXPECT(0xcf6d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xcf6c));
        // 3A 03B0
        gbc.setState(0x211a, 0xc85a, 0x65a0, 0x6c51, 0x456d, 0x1adc, 0x0, 0x1);
        gbc.writeMem(0x1adc, { 0xa9 });
        gbc.writeMem(0x211a, { 0x3a });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xc85a, gbc.sp());
        EXPECT(0x211b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 03B1
        gbc.setState(0x2b2d, 0x16c8, 0x8370, 0xbd0e, 0x3c21, 0xf3d6, 0x0, 0x1);
        gbc.writeMem(0x2b2d, { 0x3a });
        gbc.writeMem(0xf3d6, { 0x30 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x16c8, gbc.sp());
        EXPECT(0x2b2e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x30, gbc.readMem(0xf3d6));
        // 3A 03B2
        gbc.setState(0x9980, 0xc754, 0xc6a0, 0x48a1, 0xb278, 0xe823, 0x1, 0x1);
        gbc.writeMem(0x9980, { 0x3a });
        gbc.writeMem(0xe823, { 0x86 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xc754, gbc.sp());
        EXPECT(0x9981, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9980));
        EXPECT(0x86, gbc.readMem(0xe823));
        // 3A 03B3
        gbc.setState(0x37ad, 0x852c, 0x6920, 0xb3e9, 0x7301, 0x45a3, 0x0, 0x1);
        gbc.writeMem(0x37ad, { 0x3a });
        gbc.writeMem(0x45a3, { 0xc });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x852c, gbc.sp());
        EXPECT(0x37ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 03B4
        gbc.setState(0x64f7, 0xb7ac, 0x16a0, 0xc054, 0xa4f7, 0x7d06, 0x0, 0x0);
        gbc.writeMem(0x64f7, { 0x3a });
        gbc.writeMem(0x7d06, { 0xc2 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xb7ac, gbc.sp());
        EXPECT(0x64f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 03B5
        gbc.setState(0x3c6a, 0xfab0, 0xfdb0, 0xb1d7, 0xab4a, 0xd4da, 0x1, 0x0);
        gbc.writeMem(0x3c6a, { 0x3a });
        gbc.writeMem(0xd4da, { 0x93 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xfab0, gbc.sp());
        EXPECT(0x3c6b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x93, gbc.readMem(0xd4da));
        // 3A 03B6
        gbc.setState(0x2a, 0x1b58, 0xa110, 0xfe8a, 0x94dc, 0x38b8, 0x1, 0x0);
        gbc.writeMem(0x2a, { 0x3a });
        gbc.writeMem(0x38b8, { 0x8e });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x1b58, gbc.sp());
        EXPECT(0x2b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 03B7
        gbc.setState(0x5045, 0xdcd9, 0xc000, 0x2433, 0x4fa2, 0xae2b, 0x0, 0x1);
        gbc.writeMem(0x5045, { 0x3a });
        gbc.writeMem(0xae2b, { 0xce });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0xdcd9, gbc.sp());
        EXPECT(0x5046, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xce, gbc.readMem(0xae2b));
        // 3A 03B8
        gbc.setState(0xd641, 0x5efb, 0x7740, 0xf52c, 0xf7d9, 0x1bfe, 0x1, 0x0);
        gbc.writeMem(0x1bfe, { 0x98 });
        gbc.writeMem(0xd641, { 0x3a });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x5efb, gbc.sp());
        EXPECT(0xd642, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xd641));
        // 3A 03B9
        gbc.setState(0x4cba, 0x885, 0xd470, 0xd2fa, 0xa409, 0xbd98, 0x0, 0x1);
        gbc.writeMem(0x4cba, { 0x3a });
        gbc.writeMem(0xbd98, { 0x82 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x885, gbc.sp());
        EXPECT(0x4cbb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x82, gbc.readMem(0xbd98));
        // 3A 03BA
        gbc.setState(0x8813, 0x89c3, 0xa650, 0x301c, 0x5565, 0x5d6c, 0x1, 0x0);
        gbc.writeMem(0x5d6c, { 0x6e });
        gbc.writeMem(0x8813, { 0x3a });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x89c3, gbc.sp());
        EXPECT(0x8814, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8813));
        // 3A 03BB
        gbc.setState(0xde3d, 0x259f, 0x6960, 0xe859, 0x3e88, 0x4b5f, 0x0, 0x1);
        gbc.writeMem(0x4b5f, { 0x3a });
        gbc.writeMem(0xde3d, { 0x3a });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x259f, gbc.sp());
        EXPECT(0xde3e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xde3d));
        // 3A 03BC
        gbc.setState(0x2aee, 0x901e, 0x5c60, 0x2c9e, 0x8efb, 0x461d, 0x1, 0x0);
        gbc.writeMem(0x2aee, { 0x3a });
        gbc.writeMem(0x461d, { 0x1f });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x901e, gbc.sp());
        EXPECT(0x2aef, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 03BD
        gbc.setState(0xef6a, 0xbfa5, 0x7480, 0x40d4, 0x2a4a, 0xce46, 0x0, 0x0);
        gbc.writeMem(0xce46, { 0x0 });
        gbc.writeMem(0xef6a, { 0x3a });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xbfa5, gbc.sp());
        EXPECT(0xef6b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x0, gbc.readMem(0xce46));
        EXPECT(0x3a, gbc.readMem(0xef6a));
        // 3A 03BE
        gbc.setState(0xbfad, 0x43e, 0x2bf0, 0x520e, 0x3491, 0x2356, 0x0, 0x1);
        gbc.writeMem(0x2356, { 0xd6 });
        gbc.writeMem(0xbfad, { 0x3a });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x43e, gbc.sp());
        EXPECT(0xbfae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbfad));
        // 3A 03BF
        gbc.setState(0x9670, 0x30f9, 0xb490, 0x8490, 0x40df, 0x7b51, 0x1, 0x0);
        gbc.writeMem(0x7b51, { 0xf7 });
        gbc.writeMem(0x9670, { 0x3a });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x30f9, gbc.sp());
        EXPECT(0x9671, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9670));
        // 3A 03C0
        gbc.setState(0xd7d6, 0x6cc1, 0xb50, 0xbfe4, 0xd43d, 0x5c1e, 0x1, 0x0);
        gbc.writeMem(0x5c1e, { 0x99 });
        gbc.writeMem(0xd7d6, { 0x3a });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x6cc1, gbc.sp());
        EXPECT(0xd7d7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xd7d6));
        // 3A 03C1
        gbc.setState(0xd65b, 0x379a, 0x5910, 0x5070, 0x6988, 0x830d, 0x0, 0x0);
        gbc.writeMem(0x830d, { 0x73 });
        gbc.writeMem(0xd65b, { 0x3a });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x379a, gbc.sp());
        EXPECT(0xd65c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x73, gbc.readMem(0x830d));
        EXPECT(0x3a, gbc.readMem(0xd65b));
        // 3A 03C2
        gbc.setState(0x5018, 0x2749, 0x1810, 0x996a, 0xbcf6, 0x6b10, 0x1, 0x1);
        gbc.writeMem(0x5018, { 0x3a });
        gbc.writeMem(0x6b10, { 0xea });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x2749, gbc.sp());
        EXPECT(0x5019, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 03C3
        gbc.setState(0x71c4, 0xd7c2, 0x7220, 0x644d, 0xcf77, 0x2115, 0x0, 0x0);
        gbc.writeMem(0x2115, { 0xc0 });
        gbc.writeMem(0x71c4, { 0x3a });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xd7c2, gbc.sp());
        EXPECT(0x71c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 03C4
        gbc.setState(0x2bc2, 0x4604, 0x4770, 0xa7d9, 0x39bc, 0x4776, 0x1, 0x1);
        gbc.writeMem(0x2bc2, { 0x3a });
        gbc.writeMem(0x4776, { 0xac });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x4604, gbc.sp());
        EXPECT(0x2bc3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 03C5
        gbc.setState(0xdc48, 0x870b, 0x5a00, 0x264, 0xac78, 0x941b, 0x0, 0x0);
        gbc.writeMem(0x941b, { 0xb8 });
        gbc.writeMem(0xdc48, { 0x3a });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x870b, gbc.sp());
        EXPECT(0xdc49, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb8, gbc.readMem(0x941b));
        EXPECT(0x3a, gbc.readMem(0xdc48));
        // 3A 03C6
        gbc.setState(0x6d92, 0x563c, 0x5190, 0x5f8a, 0xa404, 0x1559, 0x0, 0x1);
        gbc.writeMem(0x1559, { 0xb8 });
        gbc.writeMem(0x6d92, { 0x3a });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x563c, gbc.sp());
        EXPECT(0x6d93, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 03C7
        gbc.setState(0xbf40, 0x62ef, 0x24f0, 0x34de, 0x7ceb, 0x493b, 0x1, 0x0);
        gbc.writeMem(0x493b, { 0xb8 });
        gbc.writeMem(0xbf40, { 0x3a });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x62ef, gbc.sp());
        EXPECT(0xbf41, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbf40));
        // 3A 03C8
        gbc.setState(0xe690, 0xdea2, 0xee30, 0x79be, 0x44d7, 0xae98, 0x0, 0x1);
        gbc.writeMem(0xae98, { 0x76 });
        gbc.writeMem(0xe690, { 0x3a });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xdea2, gbc.sp());
        EXPECT(0xe691, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x76, gbc.readMem(0xae98));
        EXPECT(0x3a, gbc.readMem(0xe690));
        // 3A 03C9
        gbc.setState(0x8e5e, 0x5650, 0x1d80, 0xd7ea, 0x2209, 0xfbf8, 0x0, 0x1);
        gbc.writeMem(0x8e5e, { 0x3a });
        gbc.writeMem(0xfbf8, { 0xa2 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x5650, gbc.sp());
        EXPECT(0x8e5f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8e5e));
        EXPECT(0xa2, gbc.readMem(0xfbf8));
        // 3A 03CA
        gbc.setState(0x7888, 0x66a4, 0xa8a0, 0x8655, 0x1a59, 0xe6e1, 0x0, 0x1);
        gbc.writeMem(0x7888, { 0x3a });
        gbc.writeMem(0xe6e1, { 0xe });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x66a4, gbc.sp());
        EXPECT(0x7889, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe, gbc.readMem(0xe6e1));
        // 3A 03CB
        gbc.setState(0x141a, 0x3796, 0xe1f0, 0x3311, 0xc527, 0x3e49, 0x0, 0x1);
        gbc.writeMem(0x141a, { 0x3a });
        gbc.writeMem(0x3e49, { 0x28 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x3796, gbc.sp());
        EXPECT(0x141b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 03CC
        gbc.setState(0x3eb9, 0xfb86, 0xf0d0, 0xb969, 0x1637, 0x58d1, 0x0, 0x1);
        gbc.writeMem(0x3eb9, { 0x3a });
        gbc.writeMem(0x58d1, { 0xdc });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xfb86, gbc.sp());
        EXPECT(0x3eba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 03CD
        gbc.setState(0xb606, 0x8242, 0x2dd0, 0xfad8, 0x1f1f, 0x8894, 0x0, 0x0);
        gbc.writeMem(0x8894, { 0x61 });
        gbc.writeMem(0xb606, { 0x3a });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x8242, gbc.sp());
        EXPECT(0xb607, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x61, gbc.readMem(0x8894));
        EXPECT(0x3a, gbc.readMem(0xb606));
        // 3A 03CE
        gbc.setState(0xc14, 0x9b7a, 0xbfb0, 0xaf8e, 0xf567, 0xc3cb, 0x1, 0x1);
        gbc.writeMem(0xc14, { 0x3a });
        gbc.writeMem(0xc3cb, { 0x29 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x9b7a, gbc.sp());
        EXPECT(0xc15, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x29, gbc.readMem(0xc3cb));
        // 3A 03CF
        gbc.setState(0x81c7, 0xe8f8, 0x7d20, 0xafd8, 0xb431, 0x414a, 0x0, 0x1);
        gbc.writeMem(0x414a, { 0x6b });
        gbc.writeMem(0x81c7, { 0x3a });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xe8f8, gbc.sp());
        EXPECT(0x81c8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x81c7));
        // 3A 03D0
        gbc.setState(0x5100, 0x93ed, 0xcc20, 0xbfef, 0xc316, 0xc3a4, 0x1, 0x1);
        gbc.writeMem(0x5100, { 0x3a });
        gbc.writeMem(0xc3a4, { 0x2a });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x93ed, gbc.sp());
        EXPECT(0x5101, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2a, gbc.readMem(0xc3a4));
        // 3A 03D1
        gbc.setState(0x8912, 0x158a, 0x1d30, 0x2473, 0x11cd, 0x30e0, 0x1, 0x1);
        gbc.writeMem(0x30e0, { 0x70 });
        gbc.writeMem(0x8912, { 0x3a });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x158a, gbc.sp());
        EXPECT(0x8913, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x8912));
        // 3A 03D2
        gbc.setState(0x21d9, 0xee40, 0x3b50, 0xc76e, 0x525c, 0xa02d, 0x1, 0x1);
        gbc.writeMem(0x21d9, { 0x3a });
        gbc.writeMem(0xa02d, { 0xc7 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xee40, gbc.sp());
        EXPECT(0x21da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc7, gbc.readMem(0xa02d));
        // 3A 03D3
        gbc.setState(0x7932, 0x9d04, 0xe8e0, 0x8fa, 0x1d03, 0xde28, 0x0, 0x1);
        gbc.writeMem(0x7932, { 0x3a });
        gbc.writeMem(0xde28, { 0x2f });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x9d04, gbc.sp());
        EXPECT(0x7933, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2f, gbc.readMem(0xde28));
        // 3A 03D4
        gbc.setState(0xbfdc, 0xbcab, 0x660, 0x903, 0x290d, 0xe67a, 0x1, 0x1);
        gbc.writeMem(0xbfdc, { 0x3a });
        gbc.writeMem(0xe67a, { 0x9a });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0xbcab, gbc.sp());
        EXPECT(0xbfdd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xbfdc));
        EXPECT(0x9a, gbc.readMem(0xe67a));
        // 3A 03D5
        gbc.setState(0x5153, 0x87c6, 0x2b50, 0x57d3, 0x7eba, 0x4eed, 0x0, 0x0);
        gbc.writeMem(0x4eed, { 0xa4 });
        gbc.writeMem(0x5153, { 0x3a });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x87c6, gbc.sp());
        EXPECT(0x5154, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 03D6
        gbc.setState(0xdd7, 0x1cfd, 0x85f0, 0x62a1, 0x7d7c, 0x9a92, 0x1, 0x1);
        gbc.writeMem(0xdd7, { 0x3a });
        gbc.writeMem(0x9a92, { 0x7 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x1cfd, gbc.sp());
        EXPECT(0xdd8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7, gbc.readMem(0x9a92));
        // 3A 03D7
        gbc.setState(0xcd79, 0xab64, 0x7d80, 0x408d, 0x8636, 0x3e7a, 0x1, 0x1);
        gbc.writeMem(0x3e7a, { 0xc8 });
        gbc.writeMem(0xcd79, { 0x3a });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0xab64, gbc.sp());
        EXPECT(0xcd7a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xcd79));
        // 3A 03D8
        gbc.setState(0x5534, 0x8612, 0x20, 0xb725, 0x127b, 0x6bdf, 0x1, 0x1);
        gbc.writeMem(0x5534, { 0x3a });
        gbc.writeMem(0x6bdf, { 0xe7 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x8612, gbc.sp());
        EXPECT(0x5535, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 03D9
        gbc.setState(0xd1d0, 0x49d2, 0x3ef0, 0xb24d, 0x5b50, 0x6c57, 0x0, 0x1);
        gbc.writeMem(0x6c57, { 0x1f });
        gbc.writeMem(0xd1d0, { 0x3a });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x49d2, gbc.sp());
        EXPECT(0xd1d1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xd1d0));
        // 3A 03DA
        gbc.setState(0xa72e, 0xf108, 0xb810, 0x9c9d, 0x17c2, 0xf5f2, 0x1, 0x1);
        gbc.writeMem(0xa72e, { 0x3a });
        gbc.writeMem(0xf5f2, { 0x78 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0xf108, gbc.sp());
        EXPECT(0xa72f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa72e));
        EXPECT(0x78, gbc.readMem(0xf5f2));
        // 3A 03DB
        gbc.setState(0x3c46, 0x6c06, 0x97a0, 0x7f1, 0x3ae0, 0x6f65, 0x1, 0x0);
        gbc.writeMem(0x3c46, { 0x3a });
        gbc.writeMem(0x6f65, { 0xf3 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0x6c06, gbc.sp());
        EXPECT(0x3c47, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 3A 03DC
        gbc.setState(0x1de6, 0xec8a, 0xa50, 0x7750, 0x66f2, 0xd98, 0x1, 0x0);
        gbc.writeMem(0xd98, { 0x7c });
        gbc.writeMem(0x1de6, { 0x3a });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xec8a, gbc.sp());
        EXPECT(0x1de7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 03DD
        gbc.setState(0xe0c5, 0x6a3, 0xac10, 0xfb58, 0xc7dc, 0x6e9e, 0x1, 0x0);
        gbc.writeMem(0x6e9e, { 0xba });
        gbc.writeMem(0xe0c5, { 0x3a });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x6a3, gbc.sp());
        EXPECT(0xe0c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xe0c5));
        // 3A 03DE
        gbc.setState(0x50c, 0x5e62, 0x51e0, 0x3631, 0x5b81, 0xf582, 0x0, 0x0);
        gbc.writeMem(0x50c, { 0x3a });
        gbc.writeMem(0xf582, { 0x4b });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x5e62, gbc.sp());
        EXPECT(0x50d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x4b, gbc.readMem(0xf582));
        // 3A 03DF
        gbc.setState(0x9b46, 0x2b60, 0x7de0, 0x4a91, 0xa3c3, 0xeb68, 0x1, 0x0);
        gbc.writeMem(0x9b46, { 0x3a });
        gbc.writeMem(0xeb68, { 0xb3 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x2b60, gbc.sp());
        EXPECT(0x9b47, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x9b46));
        EXPECT(0xb3, gbc.readMem(0xeb68));
        // 3A 03E0
        gbc.setState(0x492, 0x724, 0x9f50, 0x51d1, 0x51d2, 0xf79e, 0x0, 0x0);
        gbc.writeMem(0x492, { 0x3a });
        gbc.writeMem(0xf79e, { 0x79 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x724, gbc.sp());
        EXPECT(0x493, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x79, gbc.readMem(0xf79e));
        // 3A 03E1
        gbc.setState(0xb1c2, 0xa8a3, 0xe960, 0x7151, 0xb32, 0xb0a3, 0x0, 0x1);
        gbc.writeMem(0xb0a3, { 0xc });
        gbc.writeMem(0xb1c2, { 0x3a });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xa8a3, gbc.sp());
        EXPECT(0xb1c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc, gbc.readMem(0xb0a3));
        EXPECT(0x3a, gbc.readMem(0xb1c2));
        // 3A 03E3
        gbc.setState(0xa271, 0x2911, 0x2510, 0x3c74, 0x9990, 0x35c4, 0x0, 0x0);
        gbc.writeMem(0x35c4, { 0x7b });
        gbc.writeMem(0xa271, { 0x3a });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x2911, gbc.sp());
        EXPECT(0xa272, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa271));
        // 3A 03E4
        gbc.setState(0xb391, 0x162d, 0xf680, 0x335a, 0x71a9, 0x9904, 0x0, 0x0);
        gbc.writeMem(0x9904, { 0xdb });
        gbc.writeMem(0xb391, { 0x3a });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x162d, gbc.sp());
        EXPECT(0xb392, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xdb, gbc.readMem(0x9904));
        EXPECT(0x3a, gbc.readMem(0xb391));
        // 3A 03E5
        gbc.setState(0x4f26, 0xee88, 0xf2b0, 0xb626, 0xa217, 0x5b48, 0x0, 0x1);
        gbc.writeMem(0x4f26, { 0x3a });
        gbc.writeMem(0x5b48, { 0x8b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0xee88, gbc.sp());
        EXPECT(0x4f27, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 3A 03E6
        gbc.setState(0xab40, 0x9d7d, 0x9c80, 0xc99f, 0xa53d, 0x1a7c, 0x0, 0x1);
        gbc.writeMem(0x1a7c, { 0xc2 });
        gbc.writeMem(0xab40, { 0x3a });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x9d7d, gbc.sp());
        EXPECT(0xab41, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xab40));
        // 3A 03E7
        gbc.setState(0xb935, 0x78f, 0xa9e0, 0x23d, 0xd05f, 0xc4fe, 0x0, 0x0);
        gbc.writeMem(0xb935, { 0x3a });
        gbc.writeMem(0xc4fe, { 0x2b });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x78f, gbc.sp());
        EXPECT(0xb936, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xb935));
        EXPECT(0x2b, gbc.readMem(0xc4fe));
    }
