    TEST(gbcemu, opcode_b4) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // B4 0000
        gbc.setState(0x5094, 0x549, 0x2fe0, 0xd4c2, 0x3e19, 0x4ea9, 0x1, 0x0);
        gbc.writeMem(0x5094, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x549);
        EXPECT(gbc.pc(), 0x5095);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0001
        gbc.setState(0x74f, 0x4e8a, 0x96a0, 0xd2a1, 0xfb85, 0x8f75, 0x0, 0x1);
        gbc.writeMem(0x74f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x4e8a);
        EXPECT(gbc.pc(), 0x750);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0002
        gbc.setState(0x89af, 0xfa4b, 0xa070, 0x2962, 0x8050, 0x712, 0x0, 0x1);
        gbc.writeMem(0x89af, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xfa4b);
        EXPECT(gbc.pc(), 0x89b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89af), 0xb4);
        // B4 0003
        gbc.setState(0x5ff0, 0xb9c3, 0x3a30, 0x2cde, 0xae03, 0x9216, 0x1, 0x0);
        gbc.writeMem(0x5ff0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xb9c3);
        EXPECT(gbc.pc(), 0x5ff1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0004
        gbc.setState(0x139e, 0xfff1, 0xd7d0, 0xbb2a, 0xf215, 0x3b05, 0x0, 0x0);
        gbc.writeMem(0x139e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xfff1);
        EXPECT(gbc.pc(), 0x139f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0005
        gbc.setState(0xa94e, 0x20a9, 0xd7d0, 0xe1e9, 0x7d8d, 0x70d, 0x0, 0x0);
        gbc.writeMem(0xa94e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x20a9);
        EXPECT(gbc.pc(), 0xa94f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa94e), 0xb4);
        // B4 0006
        gbc.setState(0x1fe8, 0x1b49, 0xf2a0, 0x20a5, 0xe5d8, 0x508a, 0x1, 0x1);
        gbc.writeMem(0x1fe8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x1b49);
        EXPECT(gbc.pc(), 0x1fe9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0007
        gbc.setState(0x791f, 0x918a, 0x71b0, 0xa719, 0x66ba, 0x6584, 0x1, 0x0);
        gbc.writeMem(0x791f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x918a);
        EXPECT(gbc.pc(), 0x7920);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0008
        gbc.setState(0x64c2, 0x9d51, 0xcb30, 0x4826, 0x6926, 0xcae2, 0x1, 0x1);
        gbc.writeMem(0x64c2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x9d51);
        EXPECT(gbc.pc(), 0x64c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0009
        gbc.setState(0xe853, 0x912d, 0xb630, 0x5b7, 0xe318, 0x7191, 0x0, 0x1);
        gbc.writeMem(0xe853, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x912d);
        EXPECT(gbc.pc(), 0xe854);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe853), 0xb4);
        // B4 000A
        gbc.setState(0x702d, 0x5c28, 0xedd0, 0x511e, 0x1c92, 0x4805, 0x0, 0x0);
        gbc.writeMem(0x702d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x5c28);
        EXPECT(gbc.pc(), 0x702e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 000B
        gbc.setState(0x2623, 0x8e36, 0xa250, 0x421a, 0xb88b, 0x2704, 0x0, 0x1);
        gbc.writeMem(0x2623, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x8e36);
        EXPECT(gbc.pc(), 0x2624);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 000C
        gbc.setState(0xdb5f, 0xb1f8, 0x1c10, 0x9fa6, 0xb096, 0x4382, 0x0, 0x0);
        gbc.writeMem(0xdb5f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xb1f8);
        EXPECT(gbc.pc(), 0xdb60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb5f), 0xb4);
        // B4 000D
        gbc.setState(0x1ca, 0x6fb8, 0x2140, 0xace9, 0xbd91, 0x7e2, 0x1, 0x0);
        gbc.writeMem(0x1ca, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x6fb8);
        EXPECT(gbc.pc(), 0x1cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 000E
        gbc.setState(0xa313, 0xfa68, 0xcc00, 0xa506, 0x17d8, 0x3440, 0x0, 0x0);
        gbc.writeMem(0xa313, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xfa68);
        EXPECT(gbc.pc(), 0xa314);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa313), 0xb4);
        // B4 000F
        gbc.setState(0x3e8b, 0xcdb9, 0x5740, 0x331e, 0xfca5, 0x1f32, 0x1, 0x0);
        gbc.writeMem(0x3e8b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xcdb9);
        EXPECT(gbc.pc(), 0x3e8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0010
        gbc.setState(0x7746, 0x4117, 0x9f50, 0x8144, 0x7a9d, 0x4c98, 0x1, 0x1);
        gbc.writeMem(0x7746, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x4117);
        EXPECT(gbc.pc(), 0x7747);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0011
        gbc.setState(0xbd0f, 0xf5f9, 0x8ba0, 0x40b2, 0x2d04, 0xf989, 0x0, 0x0);
        gbc.writeMem(0xbd0f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xf5f9);
        EXPECT(gbc.pc(), 0xbd10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd0f), 0xb4);
        // B4 0012
        gbc.setState(0x8556, 0x8c28, 0xd170, 0x999c, 0xa7f3, 0xae0d, 0x0, 0x1);
        gbc.writeMem(0x8556, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x8c28);
        EXPECT(gbc.pc(), 0x8557);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8556), 0xb4);
        // B4 0013
        gbc.setState(0xc9f5, 0xe54f, 0xfa30, 0xab68, 0x6b7c, 0x49cc, 0x0, 0x0);
        gbc.writeMem(0xc9f5, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xe54f);
        EXPECT(gbc.pc(), 0xc9f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9f5), 0xb4);
        // B4 0014
        gbc.setState(0x691e, 0x7c39, 0xd190, 0x9109, 0x1513, 0x5581, 0x0, 0x1);
        gbc.writeMem(0x691e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x7c39);
        EXPECT(gbc.pc(), 0x691f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0015
        gbc.setState(0x45e8, 0x8dae, 0xeb90, 0xd17d, 0x97db, 0xe34c, 0x0, 0x0);
        gbc.writeMem(0x45e8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x8dae);
        EXPECT(gbc.pc(), 0x45e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0016
        gbc.setState(0x95e1, 0x923d, 0x5930, 0xa211, 0xcfa7, 0x27b7, 0x0, 0x1);
        gbc.writeMem(0x95e1, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x923d);
        EXPECT(gbc.pc(), 0x95e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95e1), 0xb4);
        // B4 0017
        gbc.setState(0x61fe, 0xf503, 0x4ca0, 0x827f, 0x62a7, 0xdf0b, 0x0, 0x1);
        gbc.writeMem(0x61fe, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf503);
        EXPECT(gbc.pc(), 0x61ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0018
        gbc.setState(0x45e8, 0xcb9a, 0x2d70, 0xa23, 0xcbcf, 0xca05, 0x1, 0x0);
        gbc.writeMem(0x45e8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xcb9a);
        EXPECT(gbc.pc(), 0x45e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0019
        gbc.setState(0x795e, 0xfcb2, 0x9bc0, 0xfb20, 0xd42f, 0x4435, 0x1, 0x1);
        gbc.writeMem(0x795e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xfcb2);
        EXPECT(gbc.pc(), 0x795f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 001A
        gbc.setState(0x83a0, 0x1a88, 0x8680, 0x9726, 0x1284, 0xbc45, 0x1, 0x0);
        gbc.writeMem(0x83a0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x1a88);
        EXPECT(gbc.pc(), 0x83a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83a0), 0xb4);
        // B4 001B
        gbc.setState(0x7d1c, 0x949b, 0xe490, 0x4ff2, 0xcf43, 0x1366, 0x1, 0x0);
        gbc.writeMem(0x7d1c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x949b);
        EXPECT(gbc.pc(), 0x7d1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 001C
        gbc.setState(0x549e, 0x17e7, 0x76e0, 0x3a3e, 0x7ade, 0xaac4, 0x1, 0x1);
        gbc.writeMem(0x549e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x17e7);
        EXPECT(gbc.pc(), 0x549f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 001D
        gbc.setState(0xb6b, 0xcf56, 0x54a0, 0xfa8b, 0x7f5c, 0x3898, 0x1, 0x0);
        gbc.writeMem(0xb6b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xcf56);
        EXPECT(gbc.pc(), 0xb6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 001E
        gbc.setState(0xdc3d, 0x3da9, 0xef10, 0x4174, 0xb116, 0x1333, 0x0, 0x1);
        gbc.writeMem(0xdc3d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x3da9);
        EXPECT(gbc.pc(), 0xdc3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc3d), 0xb4);
        // B4 001F
        gbc.setState(0x691, 0x3e14, 0x3910, 0xe475, 0xaf33, 0x2918, 0x0, 0x0);
        gbc.writeMem(0x691, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x3e14);
        EXPECT(gbc.pc(), 0x692);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0020
        gbc.setState(0xeff9, 0x996e, 0xac20, 0xbad3, 0xc327, 0x6301, 0x0, 0x1);
        gbc.writeMem(0xeff9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x996e);
        EXPECT(gbc.pc(), 0xeffa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeff9), 0xb4);
        // B4 0021
        gbc.setState(0x8cf0, 0xed56, 0xfd90, 0xae04, 0x7d99, 0xcb30, 0x1, 0x1);
        gbc.writeMem(0x8cf0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xed56);
        EXPECT(gbc.pc(), 0x8cf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cf0), 0xb4);
        // B4 0022
        gbc.setState(0xb81f, 0xa36, 0x32a0, 0xb9f0, 0xe7cc, 0xd2c5, 0x0, 0x0);
        gbc.writeMem(0xb81f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xa36);
        EXPECT(gbc.pc(), 0xb820);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb81f), 0xb4);
        // B4 0023
        gbc.setState(0x9cd6, 0xfd1c, 0xe290, 0x9158, 0x872e, 0xbed3, 0x0, 0x1);
        gbc.writeMem(0x9cd6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xfd1c);
        EXPECT(gbc.pc(), 0x9cd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cd6), 0xb4);
        // B4 0024
        gbc.setState(0xa495, 0x2489, 0x4a30, 0x819a, 0xf565, 0x23df, 0x0, 0x1);
        gbc.writeMem(0xa495, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x2489);
        EXPECT(gbc.pc(), 0xa496);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa495), 0xb4);
        // B4 0025
        gbc.setState(0x2d83, 0x604a, 0xdf10, 0x9851, 0x77ff, 0x2482, 0x0, 0x1);
        gbc.writeMem(0x2d83, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x604a);
        EXPECT(gbc.pc(), 0x2d84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0027
        gbc.setState(0x5e4f, 0x1407, 0x2a70, 0x4b, 0x5646, 0xd081, 0x1, 0x0);
        gbc.writeMem(0x5e4f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x1407);
        EXPECT(gbc.pc(), 0x5e50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0029
        gbc.setState(0x63a4, 0x604f, 0x1680, 0xe4eb, 0x8a25, 0x233, 0x0, 0x0);
        gbc.writeMem(0x63a4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x604f);
        EXPECT(gbc.pc(), 0x63a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 002A
        gbc.setState(0xb752, 0x458a, 0xf390, 0xa846, 0xca14, 0x3de5, 0x1, 0x0);
        gbc.writeMem(0xb752, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x458a);
        EXPECT(gbc.pc(), 0xb753);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb752), 0xb4);
        // B4 002B
        gbc.setState(0x361f, 0x5fe, 0x89c0, 0x8278, 0x763f, 0x685a, 0x1, 0x0);
        gbc.writeMem(0x361f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x5fe);
        EXPECT(gbc.pc(), 0x3620);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 002C
        gbc.setState(0x3152, 0x9509, 0x1e40, 0xc63a, 0x3975, 0xf736, 0x1, 0x1);
        gbc.writeMem(0x3152, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x9509);
        EXPECT(gbc.pc(), 0x3153);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 002D
        gbc.setState(0x52f4, 0x6d8e, 0x57b0, 0xfa25, 0xe466, 0xa904, 0x1, 0x0);
        gbc.writeMem(0x52f4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x6d8e);
        EXPECT(gbc.pc(), 0x52f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 002E
        gbc.setState(0x5004, 0xf219, 0x79d0, 0x3a1a, 0x80b3, 0xf2ed, 0x1, 0x1);
        gbc.writeMem(0x5004, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xf219);
        EXPECT(gbc.pc(), 0x5005);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 002F
        gbc.setState(0x3706, 0xfbcd, 0x1790, 0x896c, 0xe1f2, 0x5337, 0x0, 0x0);
        gbc.writeMem(0x3706, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xfbcd);
        EXPECT(gbc.pc(), 0x3707);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0030
        gbc.setState(0x392, 0x63e9, 0x1aa0, 0xc8f, 0x638, 0xb8d9, 0x1, 0x1);
        gbc.writeMem(0x392, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x63e9);
        EXPECT(gbc.pc(), 0x393);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0031
        gbc.setState(0xbbd2, 0x1236, 0xea80, 0x8f89, 0xf370, 0x82d4, 0x0, 0x1);
        gbc.writeMem(0xbbd2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x1236);
        EXPECT(gbc.pc(), 0xbbd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbd2), 0xb4);
        // B4 0032
        gbc.setState(0x9e39, 0x412b, 0xa9b0, 0x2691, 0x5c41, 0x8719, 0x0, 0x0);
        gbc.writeMem(0x9e39, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x412b);
        EXPECT(gbc.pc(), 0x9e3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e39), 0xb4);
        // B4 0033
        gbc.setState(0xbc9c, 0x40f9, 0x7410, 0xc7d7, 0x51de, 0xce49, 0x0, 0x0);
        gbc.writeMem(0xbc9c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x40f9);
        EXPECT(gbc.pc(), 0xbc9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc9c), 0xb4);
        // B4 0034
        gbc.setState(0xce62, 0xfd2b, 0x8970, 0xf6b4, 0xf2f3, 0xaa4e, 0x0, 0x0);
        gbc.writeMem(0xce62, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xfd2b);
        EXPECT(gbc.pc(), 0xce63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce62), 0xb4);
        // B4 0035
        gbc.setState(0x9367, 0x3bcd, 0x7ac0, 0x3fcb, 0x7be6, 0xfb0e, 0x0, 0x1);
        gbc.writeMem(0x9367, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x3bcd);
        EXPECT(gbc.pc(), 0x9368);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9367), 0xb4);
        // B4 0036
        gbc.setState(0x52c5, 0x54a1, 0x22d0, 0x8519, 0xbeea, 0x4c0b, 0x0, 0x0);
        gbc.writeMem(0x52c5, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x54a1);
        EXPECT(gbc.pc(), 0x52c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0037
        gbc.setState(0x39a4, 0x92ca, 0x8980, 0x37a3, 0xd5f9, 0x7f06, 0x0, 0x1);
        gbc.writeMem(0x39a4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x92ca);
        EXPECT(gbc.pc(), 0x39a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0038
        gbc.setState(0x987d, 0x36a9, 0x21d0, 0x784, 0xb13b, 0xedd9, 0x0, 0x0);
        gbc.writeMem(0x987d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x36a9);
        EXPECT(gbc.pc(), 0x987e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x987d), 0xb4);
        // B4 0039
        gbc.setState(0x397c, 0x7fe8, 0xfb0, 0xdec8, 0xcd0f, 0x25e1, 0x0, 0x0);
        gbc.writeMem(0x397c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x7fe8);
        EXPECT(gbc.pc(), 0x397d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 003A
        gbc.setState(0x4fc6, 0x300f, 0xa180, 0x7552, 0x323b, 0x375d, 0x0, 0x1);
        gbc.writeMem(0x4fc6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x300f);
        EXPECT(gbc.pc(), 0x4fc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 003B
        gbc.setState(0x830c, 0x2c35, 0xc3d0, 0xae14, 0x35b3, 0xc45a, 0x0, 0x1);
        gbc.writeMem(0x830c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x2c35);
        EXPECT(gbc.pc(), 0x830d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x830c), 0xb4);
        // B4 003C
        gbc.setState(0xd544, 0xf6b3, 0xcec0, 0xc155, 0xa3f7, 0xb495, 0x0, 0x1);
        gbc.writeMem(0xd544, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xf6b3);
        EXPECT(gbc.pc(), 0xd545);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd544), 0xb4);
        // B4 003F
        gbc.setState(0x535d, 0xe5d1, 0x44b0, 0xfb5a, 0x8532, 0x9d50, 0x0, 0x1);
        gbc.writeMem(0x535d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xe5d1);
        EXPECT(gbc.pc(), 0x535e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0040
        gbc.setState(0x395a, 0x1490, 0x860, 0xb74c, 0xe27a, 0x159c, 0x1, 0x1);
        gbc.writeMem(0x395a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x1490);
        EXPECT(gbc.pc(), 0x395b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0042
        gbc.setState(0xc7b, 0x3e2f, 0x3520, 0xebbd, 0x6c43, 0x6bca, 0x1, 0x0);
        gbc.writeMem(0xc7b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x3e2f);
        EXPECT(gbc.pc(), 0xc7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0043
        gbc.setState(0xda9b, 0xa2fb, 0xba10, 0x3945, 0xc6ea, 0x9f25, 0x0, 0x1);
        gbc.writeMem(0xda9b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xa2fb);
        EXPECT(gbc.pc(), 0xda9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda9b), 0xb4);
        // B4 0044
        gbc.setState(0xdc13, 0x2d8b, 0x87f0, 0x81c0, 0xad9d, 0x3606, 0x0, 0x0);
        gbc.writeMem(0xdc13, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x2d8b);
        EXPECT(gbc.pc(), 0xdc14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc13), 0xb4);
        // B4 0045
        gbc.setState(0xc1f7, 0x1bfa, 0x6580, 0x54fc, 0xaaa1, 0xbe50, 0x0, 0x0);
        gbc.writeMem(0xc1f7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x1bfa);
        EXPECT(gbc.pc(), 0xc1f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1f7), 0xb4);
        // B4 0046
        gbc.setState(0x9b9a, 0x7aa4, 0x4120, 0xf59b, 0xb7ae, 0x494a, 0x1, 0x1);
        gbc.writeMem(0x9b9a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x7aa4);
        EXPECT(gbc.pc(), 0x9b9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b9a), 0xb4);
        // B4 0047
        gbc.setState(0x8ad4, 0xf19, 0x53d0, 0xb109, 0x94f8, 0xb81e, 0x0, 0x1);
        gbc.writeMem(0x8ad4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xf19);
        EXPECT(gbc.pc(), 0x8ad5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ad4), 0xb4);
        // B4 0048
        gbc.setState(0xe563, 0xbd12, 0x2690, 0xcb1, 0xb255, 0x5642, 0x0, 0x1);
        gbc.writeMem(0xe563, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xbd12);
        EXPECT(gbc.pc(), 0xe564);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe563), 0xb4);
        // B4 0049
        gbc.setState(0x16ce, 0xacc1, 0x1a60, 0x7195, 0x2ccb, 0xea7b, 0x0, 0x1);
        gbc.writeMem(0x16ce, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xacc1);
        EXPECT(gbc.pc(), 0x16cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 004A
        gbc.setState(0x629d, 0x6523, 0x4a20, 0x5769, 0xfc3d, 0xade, 0x1, 0x0);
        gbc.writeMem(0x629d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x6523);
        EXPECT(gbc.pc(), 0x629e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 004B
        gbc.setState(0x7c0e, 0x6457, 0x48f0, 0x49dd, 0xd4cf, 0x97c3, 0x0, 0x1);
        gbc.writeMem(0x7c0e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x6457);
        EXPECT(gbc.pc(), 0x7c0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 004C
        gbc.setState(0x9335, 0x6034, 0xcdd0, 0x6e5, 0xb167, 0xd693, 0x0, 0x1);
        gbc.writeMem(0x9335, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x6034);
        EXPECT(gbc.pc(), 0x9336);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9335), 0xb4);
        // B4 004D
        gbc.setState(0x1c69, 0x51ff, 0x5600, 0x5722, 0x3866, 0x7d88, 0x0, 0x0);
        gbc.writeMem(0x1c69, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x51ff);
        EXPECT(gbc.pc(), 0x1c6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 004E
        gbc.setState(0xb8b4, 0x29f6, 0xc2c0, 0x974f, 0x601a, 0x4d5d, 0x0, 0x0);
        gbc.writeMem(0xb8b4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x29f6);
        EXPECT(gbc.pc(), 0xb8b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8b4), 0xb4);
        // B4 004F
        gbc.setState(0x17b3, 0xf224, 0xfd10, 0x54eb, 0xedf6, 0x2d59, 0x1, 0x1);
        gbc.writeMem(0x17b3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xf224);
        EXPECT(gbc.pc(), 0x17b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0050
        gbc.setState(0x7ae0, 0x3c96, 0xf400, 0x78a2, 0x3c10, 0xe094, 0x0, 0x1);
        gbc.writeMem(0x7ae0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x3c96);
        EXPECT(gbc.pc(), 0x7ae1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0051
        gbc.setState(0x7fdc, 0xf420, 0x9d20, 0x66cb, 0xa0ea, 0xe4aa, 0x1, 0x1);
        gbc.writeMem(0x7fdc, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xf420);
        EXPECT(gbc.pc(), 0x7fdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0052
        gbc.setState(0xccd, 0x4af6, 0x7c10, 0x426c, 0x4997, 0x20e2, 0x1, 0x0);
        gbc.writeMem(0xccd, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x4af6);
        EXPECT(gbc.pc(), 0xcce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0053
        gbc.setState(0x112f, 0x1518, 0xac30, 0x3c19, 0xdca5, 0xdd1e, 0x0, 0x1);
        gbc.writeMem(0x112f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x1518);
        EXPECT(gbc.pc(), 0x1130);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0054
        gbc.setState(0x2a2f, 0x80f6, 0xdca0, 0x4b6, 0x5d38, 0xf129, 0x1, 0x1);
        gbc.writeMem(0x2a2f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x80f6);
        EXPECT(gbc.pc(), 0x2a30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0055
        gbc.setState(0xd6f9, 0x149d, 0x99c0, 0x6cc1, 0x762, 0xdb21, 0x1, 0x0);
        gbc.writeMem(0xd6f9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x149d);
        EXPECT(gbc.pc(), 0xd6fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6f9), 0xb4);
        // B4 0056
        gbc.setState(0xe3ad, 0xc9bc, 0x72d0, 0x43a4, 0x6d3d, 0x3184, 0x0, 0x0);
        gbc.writeMem(0xe3ad, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xc9bc);
        EXPECT(gbc.pc(), 0xe3ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3ad), 0xb4);
        // B4 0057
        gbc.setState(0xead7, 0x5a2f, 0xf820, 0x7eb4, 0x6d4c, 0xa4f1, 0x1, 0x1);
        gbc.writeMem(0xead7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x5a2f);
        EXPECT(gbc.pc(), 0xead8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xead7), 0xb4);
        // B4 0058
        gbc.setState(0x4efa, 0x711e, 0x6a10, 0x17b4, 0x796c, 0x2f79, 0x1, 0x0);
        gbc.writeMem(0x4efa, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x711e);
        EXPECT(gbc.pc(), 0x4efb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0059
        gbc.setState(0x65cb, 0xcda8, 0xd890, 0x2595, 0xe5bc, 0x4a23, 0x0, 0x0);
        gbc.writeMem(0x65cb, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xcda8);
        EXPECT(gbc.pc(), 0x65cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 005A
        gbc.setState(0x1b65, 0x35c9, 0x8f50, 0x4527, 0x27b4, 0xe82a, 0x0, 0x1);
        gbc.writeMem(0x1b65, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x35c9);
        EXPECT(gbc.pc(), 0x1b66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 005B
        gbc.setState(0x8361, 0xe385, 0xe370, 0x5aa5, 0x33ab, 0x6a49, 0x1, 0x1);
        gbc.writeMem(0x8361, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xe385);
        EXPECT(gbc.pc(), 0x8362);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8361), 0xb4);
        // B4 005C
        gbc.setState(0x9a26, 0xa314, 0x4000, 0xf005, 0x34dd, 0x5077, 0x1, 0x1);
        gbc.writeMem(0x9a26, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xa314);
        EXPECT(gbc.pc(), 0x9a27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a26), 0xb4);
        // B4 005D
        gbc.setState(0x5491, 0x6eb, 0x62d0, 0xa6bf, 0xf333, 0xffb9, 0x1, 0x1);
        gbc.writeMem(0x5491, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x6eb);
        EXPECT(gbc.pc(), 0x5492);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 005E
        gbc.setState(0xb87, 0x3802, 0x85f0, 0xbc16, 0xf62c, 0xbe32, 0x0, 0x0);
        gbc.writeMem(0xb87, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x3802);
        EXPECT(gbc.pc(), 0xb88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 005F
        gbc.setState(0x5e6a, 0xeedc, 0x50f0, 0xc7e2, 0xd159, 0xd13f, 0x0, 0x0);
        gbc.writeMem(0x5e6a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xeedc);
        EXPECT(gbc.pc(), 0x5e6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0060
        gbc.setState(0x9a83, 0x1c3a, 0x7e90, 0x511, 0x504, 0x302, 0x1, 0x1);
        gbc.writeMem(0x9a83, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x1c3a);
        EXPECT(gbc.pc(), 0x9a84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a83), 0xb4);
        // B4 0061
        gbc.setState(0x9275, 0xdc00, 0x4eb0, 0xa7b1, 0x9224, 0x82d, 0x0, 0x0);
        gbc.writeMem(0x9275, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xdc00);
        EXPECT(gbc.pc(), 0x9276);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9275), 0xb4);
        // B4 0062
        gbc.setState(0x119e, 0xc957, 0xba00, 0xf61f, 0x4089, 0xae2f, 0x0, 0x0);
        gbc.writeMem(0x119e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xc957);
        EXPECT(gbc.pc(), 0x119f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0063
        gbc.setState(0x87a2, 0x7783, 0xcf00, 0x56a, 0xc731, 0x1fc4, 0x1, 0x0);
        gbc.writeMem(0x87a2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x7783);
        EXPECT(gbc.pc(), 0x87a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87a2), 0xb4);
        // B4 0064
        gbc.setState(0x7704, 0xfbfb, 0x28a0, 0x1f8a, 0x192a, 0x20ed, 0x1, 0x1);
        gbc.writeMem(0x7704, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xfbfb);
        EXPECT(gbc.pc(), 0x7705);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0066
        gbc.setState(0x161c, 0x722b, 0xfdd0, 0x991e, 0x6ba6, 0xdedd, 0x1, 0x0);
        gbc.writeMem(0x161c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x722b);
        EXPECT(gbc.pc(), 0x161d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0067
        gbc.setState(0xc60e, 0xb40, 0x5070, 0xc375, 0xbdd8, 0x9463, 0x0, 0x0);
        gbc.writeMem(0xc60e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xb40);
        EXPECT(gbc.pc(), 0xc60f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc60e), 0xb4);
        // B4 0068
        gbc.setState(0xef00, 0xc79c, 0xc5b0, 0x6ee, 0xbba7, 0xa805, 0x1, 0x0);
        gbc.writeMem(0xef00, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xc79c);
        EXPECT(gbc.pc(), 0xef01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef00), 0xb4);
        // B4 0069
        gbc.setState(0xa655, 0x7ed1, 0x3fe0, 0x7991, 0x22d3, 0x16cd, 0x0, 0x1);
        gbc.writeMem(0xa655, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x7ed1);
        EXPECT(gbc.pc(), 0xa656);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa655), 0xb4);
        // B4 006A
        gbc.setState(0x831f, 0xaf5, 0x4590, 0x169a, 0x6153, 0x5248, 0x0, 0x1);
        gbc.writeMem(0x831f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xaf5);
        EXPECT(gbc.pc(), 0x8320);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x831f), 0xb4);
        // B4 006B
        gbc.setState(0x5d68, 0x9f42, 0x2980, 0xbd8b, 0x265e, 0xae13, 0x0, 0x0);
        gbc.writeMem(0x5d68, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x9f42);
        EXPECT(gbc.pc(), 0x5d69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 006C
        gbc.setState(0x78a0, 0x74c, 0x1610, 0xcf53, 0xce61, 0x8f5b, 0x1, 0x1);
        gbc.writeMem(0x78a0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x74c);
        EXPECT(gbc.pc(), 0x78a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 006D
        gbc.setState(0x91b8, 0xce72, 0xa010, 0xa2b8, 0xf364, 0x14a5, 0x0, 0x0);
        gbc.writeMem(0x91b8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xce72);
        EXPECT(gbc.pc(), 0x91b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91b8), 0xb4);
        // B4 006E
        gbc.setState(0x8c5b, 0xa2ab, 0xac60, 0xad37, 0xa11a, 0x7c9, 0x1, 0x1);
        gbc.writeMem(0x8c5b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xa2ab);
        EXPECT(gbc.pc(), 0x8c5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c5b), 0xb4);
        // B4 006F
        gbc.setState(0x36f, 0xa3e1, 0x3460, 0x7fcd, 0xae2e, 0xed17, 0x1, 0x0);
        gbc.writeMem(0x36f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa3e1);
        EXPECT(gbc.pc(), 0x370);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0070
        gbc.setState(0x1075, 0xaf6c, 0x4100, 0xa077, 0xb92f, 0xaed7, 0x1, 0x1);
        gbc.writeMem(0x1075, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xaf6c);
        EXPECT(gbc.pc(), 0x1076);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0071
        gbc.setState(0x1ff, 0x80a3, 0x7e90, 0x51c8, 0x5970, 0x4bb2, 0x0, 0x0);
        gbc.writeMem(0x1ff, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x80a3);
        EXPECT(gbc.pc(), 0x200);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0072
        gbc.setState(0xd8c6, 0xbce2, 0xa4c0, 0xbf4e, 0xbf67, 0xc8ce, 0x0, 0x0);
        gbc.writeMem(0xd8c6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xbce2);
        EXPECT(gbc.pc(), 0xd8c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8c6), 0xb4);
        // B4 0073
        gbc.setState(0x554c, 0xafce, 0xd0b0, 0xfee3, 0x8007, 0xa957, 0x0, 0x1);
        gbc.writeMem(0x554c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xafce);
        EXPECT(gbc.pc(), 0x554d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0074
        gbc.setState(0x8ade, 0x1e38, 0x1c0, 0x9cce, 0x7acb, 0x1017, 0x0, 0x1);
        gbc.writeMem(0x8ade, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x1e38);
        EXPECT(gbc.pc(), 0x8adf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ade), 0xb4);
        // B4 0075
        gbc.setState(0x52d4, 0xd679, 0x3010, 0xd45d, 0x4db, 0x3180, 0x0, 0x0);
        gbc.writeMem(0x52d4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xd679);
        EXPECT(gbc.pc(), 0x52d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0076
        gbc.setState(0xc4a6, 0x969, 0xe790, 0xc06e, 0x9351, 0x12e, 0x0, 0x1);
        gbc.writeMem(0xc4a6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x969);
        EXPECT(gbc.pc(), 0xc4a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4a6), 0xb4);
        // B4 0077
        gbc.setState(0xede8, 0xc96e, 0x830, 0xeedb, 0x98e8, 0x80af, 0x1, 0x1);
        gbc.writeMem(0xede8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xc96e);
        EXPECT(gbc.pc(), 0xede9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xede8), 0xb4);
        // B4 0078
        gbc.setState(0x126, 0x4446, 0x4e00, 0x2d6f, 0xa1da, 0x5dfa, 0x1, 0x1);
        gbc.writeMem(0x126, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x4446);
        EXPECT(gbc.pc(), 0x127);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0079
        gbc.setState(0x4945, 0xcf6c, 0xe170, 0xe8c0, 0xd77c, 0xb2bc, 0x1, 0x0);
        gbc.writeMem(0x4945, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xcf6c);
        EXPECT(gbc.pc(), 0x4946);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 007A
        gbc.setState(0xd026, 0xe814, 0xc190, 0xd161, 0x299a, 0x512a, 0x0, 0x1);
        gbc.writeMem(0xd026, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xe814);
        EXPECT(gbc.pc(), 0xd027);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd026), 0xb4);
        // B4 007B
        gbc.setState(0x88a0, 0xe181, 0x2480, 0xa2ae, 0x25b9, 0x9e20, 0x0, 0x0);
        gbc.writeMem(0x88a0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xe181);
        EXPECT(gbc.pc(), 0x88a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88a0), 0xb4);
        // B4 007C
        gbc.setState(0x7bec, 0xa350, 0x74d0, 0xd968, 0x45b, 0x6e20, 0x0, 0x1);
        gbc.writeMem(0x7bec, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xa350);
        EXPECT(gbc.pc(), 0x7bed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 007D
        gbc.setState(0x4785, 0x501b, 0x3440, 0x390f, 0x1b36, 0x2905, 0x0, 0x1);
        gbc.writeMem(0x4785, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x501b);
        EXPECT(gbc.pc(), 0x4786);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 007E
        gbc.setState(0x69aa, 0x2340, 0x2060, 0xe42b, 0xdd61, 0xbc2, 0x0, 0x0);
        gbc.writeMem(0x69aa, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x2340);
        EXPECT(gbc.pc(), 0x69ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 007F
        gbc.setState(0x76d1, 0x609f, 0xc5f0, 0xa5ba, 0xe6f5, 0x184b, 0x0, 0x1);
        gbc.writeMem(0x76d1, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x609f);
        EXPECT(gbc.pc(), 0x76d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0080
        gbc.setState(0x360d, 0xba7e, 0x8070, 0x383e, 0xec15, 0xc04e, 0x0, 0x0);
        gbc.writeMem(0x360d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xba7e);
        EXPECT(gbc.pc(), 0x360e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0081
        gbc.setState(0x35c9, 0x5190, 0x20, 0x82d, 0xf4f2, 0x541, 0x1, 0x1);
        gbc.writeMem(0x35c9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x5190);
        EXPECT(gbc.pc(), 0x35ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0082
        gbc.setState(0xf7b, 0xbcb3, 0xf6f0, 0xc691, 0x559c, 0xf2b7, 0x0, 0x0);
        gbc.writeMem(0xf7b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xbcb3);
        EXPECT(gbc.pc(), 0xf7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0083
        gbc.setState(0x1ccf, 0x9758, 0xe5c0, 0xa8a8, 0xe72b, 0xe45b, 0x0, 0x1);
        gbc.writeMem(0x1ccf, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9758);
        EXPECT(gbc.pc(), 0x1cd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0084
        gbc.setState(0x28b7, 0x3211, 0x7b0, 0x8373, 0x3030, 0x95c, 0x1, 0x0);
        gbc.writeMem(0x28b7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x3211);
        EXPECT(gbc.pc(), 0x28b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0085
        gbc.setState(0xcf36, 0x6c93, 0x6fa0, 0xcf73, 0x78c1, 0xc8a3, 0x1, 0x0);
        gbc.writeMem(0xcf36, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x6c93);
        EXPECT(gbc.pc(), 0xcf37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf36), 0xb4);
        // B4 0086
        gbc.setState(0xc250, 0xb29b, 0x9760, 0x8d89, 0x3420, 0x8912, 0x1, 0x0);
        gbc.writeMem(0xc250, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xb29b);
        EXPECT(gbc.pc(), 0xc251);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc250), 0xb4);
        // B4 0087
        gbc.setState(0x7f6d, 0x88f3, 0x2f80, 0xb7a5, 0xa06c, 0x435b, 0x1, 0x0);
        gbc.writeMem(0x7f6d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x88f3);
        EXPECT(gbc.pc(), 0x7f6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0088
        gbc.setState(0x6720, 0x4898, 0xa4e0, 0x9adc, 0x1d2, 0xfdc, 0x1, 0x0);
        gbc.writeMem(0x6720, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x4898);
        EXPECT(gbc.pc(), 0x6721);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0089
        gbc.setState(0x4384, 0xabd2, 0x39f0, 0x3f7d, 0x811a, 0x41af, 0x0, 0x0);
        gbc.writeMem(0x4384, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xabd2);
        EXPECT(gbc.pc(), 0x4385);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 008B
        gbc.setState(0x4d7e, 0xa4e2, 0x9f40, 0x609, 0xaa76, 0x1e7, 0x1, 0x1);
        gbc.writeMem(0x4d7e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xa4e2);
        EXPECT(gbc.pc(), 0x4d7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 008C
        gbc.setState(0x2866, 0xf3a7, 0x1a0, 0xf408, 0x71fc, 0xa4a9, 0x1, 0x0);
        gbc.writeMem(0x2866, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xf3a7);
        EXPECT(gbc.pc(), 0x2867);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 008D
        gbc.setState(0x1953, 0x1e78, 0x2e40, 0xc9b3, 0x3af2, 0x8e15, 0x0, 0x1);
        gbc.writeMem(0x1953, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x1e78);
        EXPECT(gbc.pc(), 0x1954);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 008E
        gbc.setState(0x2246, 0x7b2, 0x5ad0, 0x301f, 0x5cc8, 0x29f1, 0x0, 0x1);
        gbc.writeMem(0x2246, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x7b2);
        EXPECT(gbc.pc(), 0x2247);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 008F
        gbc.setState(0x88f4, 0xb244, 0x4c40, 0xda76, 0xd940, 0x91cb, 0x0, 0x1);
        gbc.writeMem(0x88f4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xb244);
        EXPECT(gbc.pc(), 0x88f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88f4), 0xb4);
        // B4 0090
        gbc.setState(0xd2b, 0xd10f, 0xd0d0, 0x36a9, 0x820c, 0x8b34, 0x0, 0x1);
        gbc.writeMem(0xd2b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xd10f);
        EXPECT(gbc.pc(), 0xd2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0091
        gbc.setState(0x24db, 0x32ce, 0x890, 0xa9e5, 0x38bd, 0x46e9, 0x0, 0x0);
        gbc.writeMem(0x24db, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x32ce);
        EXPECT(gbc.pc(), 0x24dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0092
        gbc.setState(0xa71c, 0xc2fb, 0xe3e0, 0x92a, 0x4596, 0xc4e6, 0x1, 0x0);
        gbc.writeMem(0xa71c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xc2fb);
        EXPECT(gbc.pc(), 0xa71d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa71c), 0xb4);
        // B4 0093
        gbc.setState(0x6c1d, 0xeac0, 0x26e0, 0x932, 0x4849, 0xf681, 0x0, 0x1);
        gbc.writeMem(0x6c1d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xeac0);
        EXPECT(gbc.pc(), 0x6c1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0094
        gbc.setState(0xe231, 0x30ce, 0xefe0, 0x1ee6, 0xe8ed, 0x5c9f, 0x1, 0x1);
        gbc.writeMem(0xe231, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x30ce);
        EXPECT(gbc.pc(), 0xe232);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe231), 0xb4);
        // B4 0095
        gbc.setState(0xbfe5, 0xc029, 0xa4c0, 0xdc2a, 0x3452, 0x2c93, 0x1, 0x1);
        gbc.writeMem(0xbfe5, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xc029);
        EXPECT(gbc.pc(), 0xbfe6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfe5), 0xb4);
        // B4 0096
        gbc.setState(0x4c01, 0xae79, 0x1dd0, 0xdc79, 0xf919, 0xc2b4, 0x0, 0x1);
        gbc.writeMem(0x4c01, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xae79);
        EXPECT(gbc.pc(), 0x4c02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0097
        gbc.setState(0x93fa, 0x2619, 0xdfd0, 0x4b19, 0x4845, 0x6bb0, 0x1, 0x1);
        gbc.writeMem(0x93fa, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x2619);
        EXPECT(gbc.pc(), 0x93fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93fa), 0xb4);
        // B4 0098
        gbc.setState(0xe906, 0xa3fe, 0x46a0, 0x3e51, 0xb13b, 0x9305, 0x0, 0x0);
        gbc.writeMem(0xe906, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xa3fe);
        EXPECT(gbc.pc(), 0xe907);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe906), 0xb4);
        // B4 0099
        gbc.setState(0x4c0b, 0xcc29, 0x2b40, 0xaae3, 0xb1c0, 0x5d00, 0x0, 0x0);
        gbc.writeMem(0x4c0b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xcc29);
        EXPECT(gbc.pc(), 0x4c0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 009A
        gbc.setState(0x3bd5, 0x6f44, 0x6590, 0xaa0e, 0x2b7, 0x72e, 0x1, 0x1);
        gbc.writeMem(0x3bd5, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x6f44);
        EXPECT(gbc.pc(), 0x3bd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 009C
        gbc.setState(0xde34, 0xccf1, 0x4980, 0xbc16, 0x7ebd, 0xa1e4, 0x0, 0x1);
        gbc.writeMem(0xde34, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xccf1);
        EXPECT(gbc.pc(), 0xde35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde34), 0xb4);
        // B4 009D
        gbc.setState(0xea04, 0xf1e, 0x940, 0xd85c, 0xde3d, 0xad00, 0x0, 0x0);
        gbc.writeMem(0xea04, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf1e);
        EXPECT(gbc.pc(), 0xea05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea04), 0xb4);
        // B4 009E
        gbc.setState(0x714c, 0x744d, 0x72c0, 0x4a75, 0xd42a, 0x1af6, 0x0, 0x0);
        gbc.writeMem(0x714c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x744d);
        EXPECT(gbc.pc(), 0x714d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 009F
        gbc.setState(0x7991, 0xef48, 0x330, 0xd410, 0x8b4, 0xebc3, 0x1, 0x1);
        gbc.writeMem(0x7991, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xef48);
        EXPECT(gbc.pc(), 0x7992);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00A0
        gbc.setState(0xe9a8, 0x2c7b, 0x50c0, 0x367, 0x909c, 0x915e, 0x1, 0x0);
        gbc.writeMem(0xe9a8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x2c7b);
        EXPECT(gbc.pc(), 0xe9a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9a8), 0xb4);
        // B4 00A1
        gbc.setState(0x2fb6, 0xe417, 0x1820, 0x11bd, 0xda0, 0x9fb7, 0x1, 0x1);
        gbc.writeMem(0x2fb6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xe417);
        EXPECT(gbc.pc(), 0x2fb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00A2
        gbc.setState(0x95e6, 0x670, 0x6670, 0xa647, 0x8485, 0xc1b9, 0x1, 0x1);
        gbc.writeMem(0x95e6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x670);
        EXPECT(gbc.pc(), 0x95e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95e6), 0xb4);
        // B4 00A3
        gbc.setState(0x4dc2, 0xadc, 0x3210, 0x3821, 0xef6e, 0x8254, 0x1, 0x0);
        gbc.writeMem(0x4dc2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xadc);
        EXPECT(gbc.pc(), 0x4dc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00A4
        gbc.setState(0x23e7, 0x5d28, 0xdc00, 0xfc36, 0x8135, 0xa16a, 0x0, 0x0);
        gbc.writeMem(0x23e7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x5d28);
        EXPECT(gbc.pc(), 0x23e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00A5
        gbc.setState(0xc519, 0x3cfd, 0x1300, 0x535, 0x26, 0xdc97, 0x0, 0x1);
        gbc.writeMem(0xc519, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x3cfd);
        EXPECT(gbc.pc(), 0xc51a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc519), 0xb4);
        // B4 00A6
        gbc.setState(0x53f6, 0x7daa, 0xb6b0, 0xbba5, 0xdb99, 0xa9a8, 0x0, 0x1);
        gbc.writeMem(0x53f6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x7daa);
        EXPECT(gbc.pc(), 0x53f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00A7
        gbc.setState(0xd7d5, 0x7b7c, 0x8e20, 0x191b, 0x852c, 0xa02, 0x0, 0x0);
        gbc.writeMem(0xd7d5, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x7b7c);
        EXPECT(gbc.pc(), 0xd7d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7d5), 0xb4);
        // B4 00A8
        gbc.setState(0xadf1, 0x36e1, 0x6260, 0x41e7, 0x2e0, 0xbc2f, 0x0, 0x0);
        gbc.writeMem(0xadf1, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x36e1);
        EXPECT(gbc.pc(), 0xadf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadf1), 0xb4);
        // B4 00A9
        gbc.setState(0xa38b, 0x666e, 0xc180, 0x8164, 0x8fee, 0x621, 0x0, 0x1);
        gbc.writeMem(0xa38b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x666e);
        EXPECT(gbc.pc(), 0xa38c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa38b), 0xb4);
        // B4 00AA
        gbc.setState(0xb5b8, 0x7104, 0xad80, 0x3939, 0xbe9d, 0xffc, 0x0, 0x0);
        gbc.writeMem(0xb5b8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x7104);
        EXPECT(gbc.pc(), 0xb5b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5b8), 0xb4);
        // B4 00AB
        gbc.setState(0x347d, 0x28e5, 0x8200, 0x4aba, 0xd3a3, 0xf791, 0x1, 0x0);
        gbc.writeMem(0x347d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x28e5);
        EXPECT(gbc.pc(), 0x347e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00AC
        gbc.setState(0xc412, 0xd997, 0xc7c0, 0x4e2e, 0xfa95, 0x7891, 0x0, 0x0);
        gbc.writeMem(0xc412, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xd997);
        EXPECT(gbc.pc(), 0xc413);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc412), 0xb4);
        // B4 00AD
        gbc.setState(0xb89f, 0xa4b0, 0xcca0, 0x4b2d, 0x10ff, 0x844c, 0x0, 0x1);
        gbc.writeMem(0xb89f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xa4b0);
        EXPECT(gbc.pc(), 0xb8a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb89f), 0xb4);
        // B4 00AE
        gbc.setState(0xbfa9, 0x383e, 0x2a90, 0x7cda, 0x10bc, 0x62cd, 0x1, 0x1);
        gbc.writeMem(0xbfa9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x383e);
        EXPECT(gbc.pc(), 0xbfaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfa9), 0xb4);
        // B4 00AF
        gbc.setState(0x4917, 0x3c74, 0xf5a0, 0xe0d0, 0x4107, 0xdb3c, 0x0, 0x1);
        gbc.writeMem(0x4917, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x3c74);
        EXPECT(gbc.pc(), 0x4918);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00B0
        gbc.setState(0xe685, 0xb443, 0x1460, 0x357, 0x7c2a, 0x774a, 0x1, 0x1);
        gbc.writeMem(0xe685, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xb443);
        EXPECT(gbc.pc(), 0xe686);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe685), 0xb4);
        // B4 00B1
        gbc.setState(0x29b, 0xc80f, 0x9050, 0xe8da, 0x8b7a, 0xf1d1, 0x1, 0x0);
        gbc.writeMem(0x29b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xc80f);
        EXPECT(gbc.pc(), 0x29c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00B2
        gbc.setState(0x8794, 0xc620, 0xe7e0, 0x26a5, 0x2dc5, 0xc27b, 0x1, 0x0);
        gbc.writeMem(0x8794, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xc620);
        EXPECT(gbc.pc(), 0x8795);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8794), 0xb4);
        // B4 00B3
        gbc.setState(0x9b30, 0xac14, 0xbea0, 0x4dca, 0x46d, 0x501, 0x1, 0x1);
        gbc.writeMem(0x9b30, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xac14);
        EXPECT(gbc.pc(), 0x9b31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b30), 0xb4);
        // B4 00B4
        gbc.setState(0x9905, 0x2ffe, 0x9440, 0xe27b, 0x5ceb, 0x3f6, 0x1, 0x1);
        gbc.writeMem(0x9905, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x2ffe);
        EXPECT(gbc.pc(), 0x9906);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9905), 0xb4);
        // B4 00B5
        gbc.setState(0x9638, 0x9e83, 0x1f70, 0x2254, 0x1fd8, 0x24a9, 0x1, 0x0);
        gbc.writeMem(0x9638, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x9e83);
        EXPECT(gbc.pc(), 0x9639);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9638), 0xb4);
        // B4 00B7
        gbc.setState(0xb3a3, 0x4a77, 0xbc40, 0x5550, 0xfb64, 0x1d9, 0x0, 0x1);
        gbc.writeMem(0xb3a3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x4a77);
        EXPECT(gbc.pc(), 0xb3a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3a3), 0xb4);
        // B4 00B8
        gbc.setState(0xa36e, 0x718b, 0xda40, 0xa7ec, 0xcd89, 0x7f3c, 0x1, 0x0);
        gbc.writeMem(0xa36e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x718b);
        EXPECT(gbc.pc(), 0xa36f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa36e), 0xb4);
        // B4 00B9
        gbc.setState(0x22d8, 0x61fe, 0x6d20, 0x3e16, 0x1783, 0x4bac, 0x1, 0x0);
        gbc.writeMem(0x22d8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x61fe);
        EXPECT(gbc.pc(), 0x22d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00BA
        gbc.setState(0xa07e, 0x6171, 0xc40, 0xef69, 0x89c9, 0x7758, 0x0, 0x1);
        gbc.writeMem(0xa07e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x6171);
        EXPECT(gbc.pc(), 0xa07f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa07e), 0xb4);
        // B4 00BB
        gbc.setState(0x95b2, 0x7e22, 0x4d70, 0xb42d, 0x14d1, 0x6522, 0x0, 0x0);
        gbc.writeMem(0x95b2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x7e22);
        EXPECT(gbc.pc(), 0x95b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95b2), 0xb4);
        // B4 00BC
        gbc.setState(0xcb99, 0x1ab0, 0x1000, 0x7e79, 0x64b0, 0x11ca, 0x0, 0x1);
        gbc.writeMem(0xcb99, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x1ab0);
        EXPECT(gbc.pc(), 0xcb9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb99), 0xb4);
        // B4 00BD
        gbc.setState(0x49f5, 0xa1f, 0xa9d0, 0x5800, 0x3229, 0x3a33, 0x1, 0x0);
        gbc.writeMem(0x49f5, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xa1f);
        EXPECT(gbc.pc(), 0x49f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00BE
        gbc.setState(0x7d8, 0x6def, 0x5e60, 0xdda9, 0xa0eb, 0x4676, 0x1, 0x0);
        gbc.writeMem(0x7d8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x6def);
        EXPECT(gbc.pc(), 0x7d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00BF
        gbc.setState(0x4de6, 0xefaa, 0x2520, 0xc149, 0x79eb, 0x48e8, 0x0, 0x0);
        gbc.writeMem(0x4de6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xefaa);
        EXPECT(gbc.pc(), 0x4de7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00C0
        gbc.setState(0xd5f5, 0x15a0, 0x1600, 0xcc, 0x5186, 0x796c, 0x0, 0x1);
        gbc.writeMem(0xd5f5, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x15a0);
        EXPECT(gbc.pc(), 0xd5f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5f5), 0xb4);
        // B4 00C1
        gbc.setState(0xbe00, 0xfaa2, 0x8d40, 0xe074, 0x77ce, 0x37c0, 0x1, 0x1);
        gbc.writeMem(0xbe00, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xfaa2);
        EXPECT(gbc.pc(), 0xbe01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe00), 0xb4);
        // B4 00C2
        gbc.setState(0x732e, 0xd25e, 0x3230, 0xf3ee, 0xb748, 0x61b4, 0x0, 0x1);
        gbc.writeMem(0x732e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xd25e);
        EXPECT(gbc.pc(), 0x732f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00C3
        gbc.setState(0x744c, 0x6ec4, 0x13e0, 0xf196, 0x4edf, 0x2127, 0x0, 0x1);
        gbc.writeMem(0x744c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x6ec4);
        EXPECT(gbc.pc(), 0x744d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00C4
        gbc.setState(0x38ad, 0xfb57, 0x7210, 0x834b, 0xa3f2, 0xd366, 0x0, 0x1);
        gbc.writeMem(0x38ad, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xfb57);
        EXPECT(gbc.pc(), 0x38ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00C5
        gbc.setState(0xbc3a, 0x8342, 0x96c0, 0xecdd, 0x47fe, 0xc169, 0x0, 0x1);
        gbc.writeMem(0xbc3a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x8342);
        EXPECT(gbc.pc(), 0xbc3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc3a), 0xb4);
        // B4 00C6
        gbc.setState(0x3773, 0xd157, 0x6480, 0x9c93, 0xed6f, 0x8460, 0x0, 0x0);
        gbc.writeMem(0x3773, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xd157);
        EXPECT(gbc.pc(), 0x3774);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00C7
        gbc.setState(0x2fcb, 0x925d, 0x80, 0xbf0f, 0x1e20, 0x591d, 0x0, 0x0);
        gbc.writeMem(0x2fcb, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x925d);
        EXPECT(gbc.pc(), 0x2fcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00C8
        gbc.setState(0xcda0, 0xce07, 0x8bb0, 0x2416, 0x170a, 0xb49, 0x0, 0x1);
        gbc.writeMem(0xcda0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xce07);
        EXPECT(gbc.pc(), 0xcda1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcda0), 0xb4);
        // B4 00C9
        gbc.setState(0x90a8, 0x35e7, 0xfe00, 0x9a4b, 0xe976, 0xb2de, 0x1, 0x1);
        gbc.writeMem(0x90a8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x35e7);
        EXPECT(gbc.pc(), 0x90a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90a8), 0xb4);
        // B4 00CA
        gbc.setState(0x290e, 0x20e, 0xc3c0, 0x12ba, 0x2596, 0x436, 0x0, 0x1);
        gbc.writeMem(0x290e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x20e);
        EXPECT(gbc.pc(), 0x290f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00CC
        gbc.setState(0x455, 0xc0b1, 0x7720, 0x3f2d, 0xd273, 0xf59b, 0x0, 0x0);
        gbc.writeMem(0x455, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xc0b1);
        EXPECT(gbc.pc(), 0x456);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00CD
        gbc.setState(0x772e, 0xf67e, 0x9fe0, 0xb587, 0xab5e, 0xc93f, 0x1, 0x1);
        gbc.writeMem(0x772e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xf67e);
        EXPECT(gbc.pc(), 0x772f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00CE
        gbc.setState(0xbbe9, 0x370c, 0x6d70, 0xe1de, 0x6ec6, 0xf214, 0x1, 0x1);
        gbc.writeMem(0xbbe9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x370c);
        EXPECT(gbc.pc(), 0xbbea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbe9), 0xb4);
        // B4 00CF
        gbc.setState(0xaaa2, 0xdecd, 0xa4b0, 0x812e, 0x865d, 0x9293, 0x1, 0x1);
        gbc.writeMem(0xaaa2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xdecd);
        EXPECT(gbc.pc(), 0xaaa3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaa2), 0xb4);
        // B4 00D0
        gbc.setState(0xa5a, 0x989, 0x9be0, 0x2f35, 0xc1e7, 0x5f98, 0x0, 0x0);
        gbc.writeMem(0xa5a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x989);
        EXPECT(gbc.pc(), 0xa5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00D1
        gbc.setState(0x2aac, 0x5799, 0x8bd0, 0x3940, 0xcb8d, 0x987c, 0x0, 0x1);
        gbc.writeMem(0x2aac, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x5799);
        EXPECT(gbc.pc(), 0x2aad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00D2
        gbc.setState(0xc089, 0x4ca4, 0x5c40, 0x8794, 0x5b58, 0x24f6, 0x0, 0x1);
        gbc.writeMem(0xc089, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x4ca4);
        EXPECT(gbc.pc(), 0xc08a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc089), 0xb4);
        // B4 00D3
        gbc.setState(0x2ff, 0x3f82, 0xc970, 0x1c58, 0xdf1d, 0x37be, 0x1, 0x1);
        gbc.writeMem(0x2ff, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x3f82);
        EXPECT(gbc.pc(), 0x300);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00D4
        gbc.setState(0x5a7c, 0xb1ba, 0xbbf0, 0xd587, 0xa204, 0xe48, 0x1, 0x0);
        gbc.writeMem(0x5a7c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xb1ba);
        EXPECT(gbc.pc(), 0x5a7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00D5
        gbc.setState(0xb17c, 0xf97f, 0xbde0, 0xa717, 0x8e1e, 0x32ef, 0x1, 0x1);
        gbc.writeMem(0xb17c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xf97f);
        EXPECT(gbc.pc(), 0xb17d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb17c), 0xb4);
        // B4 00D6
        gbc.setState(0x7228, 0xa11d, 0xb250, 0xe9a6, 0xdc8f, 0x948, 0x1, 0x1);
        gbc.writeMem(0x7228, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xa11d);
        EXPECT(gbc.pc(), 0x7229);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00D7
        gbc.setState(0x9ecb, 0x1f27, 0x5540, 0xd1eb, 0x7364, 0x461f, 0x0, 0x1);
        gbc.writeMem(0x9ecb, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x1f27);
        EXPECT(gbc.pc(), 0x9ecc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ecb), 0xb4);
        // B4 00D9
        gbc.setState(0x132f, 0x4193, 0xdad0, 0x6f00, 0x5d9d, 0x358d, 0x1, 0x1);
        gbc.writeMem(0x132f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x4193);
        EXPECT(gbc.pc(), 0x1330);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00DA
        gbc.setState(0x4539, 0x77ce, 0x51a0, 0x3225, 0x7cbe, 0x37d8, 0x0, 0x0);
        gbc.writeMem(0x4539, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x77ce);
        EXPECT(gbc.pc(), 0x453a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00DB
        gbc.setState(0x5429, 0x5282, 0xff0, 0xf3b4, 0x7a0e, 0xe45a, 0x1, 0x1);
        gbc.writeMem(0x5429, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x5282);
        EXPECT(gbc.pc(), 0x542a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00DD
        gbc.setState(0x5ed4, 0x4ff9, 0x4bd0, 0xf9df, 0x556f, 0x219, 0x1, 0x0);
        gbc.writeMem(0x5ed4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x4ff9);
        EXPECT(gbc.pc(), 0x5ed5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00DE
        gbc.setState(0x5b85, 0x45ed, 0xb680, 0x872e, 0xcbc5, 0x5429, 0x0, 0x1);
        gbc.writeMem(0x5b85, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x45ed);
        EXPECT(gbc.pc(), 0x5b86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00DF
        gbc.setState(0xe750, 0x55a3, 0x4100, 0x8d74, 0xf5ba, 0x191e, 0x1, 0x1);
        gbc.writeMem(0xe750, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x55a3);
        EXPECT(gbc.pc(), 0xe751);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe750), 0xb4);
        // B4 00E0
        gbc.setState(0x854a, 0x15f1, 0x7a0, 0xbd88, 0xe267, 0xfc7e, 0x0, 0x0);
        gbc.writeMem(0x854a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x15f1);
        EXPECT(gbc.pc(), 0x854b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x854a), 0xb4);
        // B4 00E1
        gbc.setState(0xa892, 0xc475, 0x8060, 0x40c2, 0x7921, 0x3685, 0x0, 0x0);
        gbc.writeMem(0xa892, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc475);
        EXPECT(gbc.pc(), 0xa893);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa892), 0xb4);
        // B4 00E2
        gbc.setState(0xcceb, 0x54ef, 0x3840, 0x7e99, 0xe9f0, 0x8691, 0x0, 0x0);
        gbc.writeMem(0xcceb, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x54ef);
        EXPECT(gbc.pc(), 0xccec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcceb), 0xb4);
        // B4 00E3
        gbc.setState(0xbcfa, 0x11f3, 0x72f0, 0xe0e2, 0xe805, 0x97ac, 0x0, 0x1);
        gbc.writeMem(0xbcfa, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x11f3);
        EXPECT(gbc.pc(), 0xbcfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcfa), 0xb4);
        // B4 00E5
        gbc.setState(0x3f8e, 0x6cf8, 0xd9a0, 0xe75f, 0x76f3, 0xc848, 0x0, 0x0);
        gbc.writeMem(0x3f8e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x6cf8);
        EXPECT(gbc.pc(), 0x3f8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00E6
        gbc.setState(0xe0cf, 0x31b6, 0xcfb0, 0x6786, 0x69a4, 0x3b2, 0x1, 0x0);
        gbc.writeMem(0xe0cf, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x31b6);
        EXPECT(gbc.pc(), 0xe0d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0cf), 0xb4);
        // B4 00E7
        gbc.setState(0x2677, 0xdf63, 0x1ed0, 0x463f, 0xbe51, 0xbc46, 0x1, 0x1);
        gbc.writeMem(0x2677, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xdf63);
        EXPECT(gbc.pc(), 0x2678);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00E8
        gbc.setState(0xe848, 0x4b64, 0x9450, 0xc32f, 0x2974, 0xb6ac, 0x0, 0x0);
        gbc.writeMem(0xe848, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x4b64);
        EXPECT(gbc.pc(), 0xe849);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe848), 0xb4);
        // B4 00E9
        gbc.setState(0x8acf, 0xee3, 0x4ab0, 0xb10a, 0xb6fd, 0x9719, 0x0, 0x1);
        gbc.writeMem(0x8acf, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xee3);
        EXPECT(gbc.pc(), 0x8ad0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8acf), 0xb4);
        // B4 00EA
        gbc.setState(0x37cd, 0xa753, 0xebd0, 0x315b, 0xc43f, 0xda4f, 0x1, 0x0);
        gbc.writeMem(0x37cd, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xa753);
        EXPECT(gbc.pc(), 0x37ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00EB
        gbc.setState(0x990d, 0x4ac4, 0x9b0, 0x8692, 0x78fb, 0x37c8, 0x0, 0x1);
        gbc.writeMem(0x990d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x4ac4);
        EXPECT(gbc.pc(), 0x990e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x990d), 0xb4);
        // B4 00EC
        gbc.setState(0xa0e7, 0x285b, 0xa4e0, 0x2bd2, 0x70ee, 0x94ac, 0x1, 0x0);
        gbc.writeMem(0xa0e7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x285b);
        EXPECT(gbc.pc(), 0xa0e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0e7), 0xb4);
        // B4 00ED
        gbc.setState(0x343e, 0xc9a7, 0x860, 0xf7d1, 0xecb8, 0x648d, 0x1, 0x1);
        gbc.writeMem(0x343e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xc9a7);
        EXPECT(gbc.pc(), 0x343f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00EF
        gbc.setState(0x4f1b, 0xee95, 0x1230, 0xd709, 0xd5ed, 0x2eba, 0x0, 0x1);
        gbc.writeMem(0x4f1b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xee95);
        EXPECT(gbc.pc(), 0x4f1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00F0
        gbc.setState(0x4118, 0x7e41, 0x3c60, 0xdf4, 0x1f0, 0xe4a2, 0x1, 0x0);
        gbc.writeMem(0x4118, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x7e41);
        EXPECT(gbc.pc(), 0x4119);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00F2
        gbc.setState(0x6788, 0xfbdd, 0xba70, 0xcc77, 0xa7fb, 0x431, 0x0, 0x0);
        gbc.writeMem(0x6788, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xfbdd);
        EXPECT(gbc.pc(), 0x6789);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00F3
        gbc.setState(0x2231, 0xc52c, 0xf210, 0x8bfb, 0x5557, 0xc073, 0x0, 0x1);
        gbc.writeMem(0x2231, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xc52c);
        EXPECT(gbc.pc(), 0x2232);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00F4
        gbc.setState(0x313, 0x832b, 0x3c70, 0x4b21, 0x939b, 0x86be, 0x0, 0x0);
        gbc.writeMem(0x313, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x832b);
        EXPECT(gbc.pc(), 0x314);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00F5
        gbc.setState(0xd6ca, 0xd75b, 0x7a80, 0xd3d8, 0x8735, 0xecc0, 0x1, 0x0);
        gbc.writeMem(0xd6ca, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xd75b);
        EXPECT(gbc.pc(), 0xd6cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6ca), 0xb4);
        // B4 00F6
        gbc.setState(0x7549, 0xa1c6, 0xfb40, 0x3d62, 0x2a17, 0x59e4, 0x1, 0x1);
        gbc.writeMem(0x7549, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xa1c6);
        EXPECT(gbc.pc(), 0x754a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00F7
        gbc.setState(0x116, 0xcfbb, 0x2c30, 0x6736, 0x2031, 0xfeed, 0x1, 0x1);
        gbc.writeMem(0x116, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xcfbb);
        EXPECT(gbc.pc(), 0x117);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00F8
        gbc.setState(0xed84, 0x4b71, 0x2340, 0x8b75, 0x7109, 0x720c, 0x1, 0x1);
        gbc.writeMem(0xed84, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x4b71);
        EXPECT(gbc.pc(), 0xed85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed84), 0xb4);
        // B4 00F9
        gbc.setState(0xe3f, 0x3e3e, 0x1340, 0x5b90, 0x73da, 0x281f, 0x0, 0x1);
        gbc.writeMem(0xe3f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x3e3e);
        EXPECT(gbc.pc(), 0xe40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00FA
        gbc.setState(0x5287, 0x7328, 0x26c0, 0xe9bc, 0xea62, 0x1d73, 0x1, 0x0);
        gbc.writeMem(0x5287, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x7328);
        EXPECT(gbc.pc(), 0x5288);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00FC
        gbc.setState(0x85a, 0xc195, 0x95a0, 0x9eb1, 0xe4f6, 0xba07, 0x1, 0x1);
        gbc.writeMem(0x85a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xc195);
        EXPECT(gbc.pc(), 0x85b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 00FD
        gbc.setState(0xaf9c, 0xe707, 0x9560, 0x2df5, 0x8977, 0x4b19, 0x1, 0x0);
        gbc.writeMem(0xaf9c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe707);
        EXPECT(gbc.pc(), 0xaf9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf9c), 0xb4);
        // B4 00FE
        gbc.setState(0xc789, 0x40d3, 0x9490, 0x8ef6, 0xfc6a, 0xce08, 0x1, 0x0);
        gbc.writeMem(0xc789, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x40d3);
        EXPECT(gbc.pc(), 0xc78a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc789), 0xb4);
        // B4 00FF
        gbc.setState(0x545a, 0x22be, 0xeff0, 0x24d0, 0x280b, 0xa043, 0x0, 0x1);
        gbc.writeMem(0x545a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x22be);
        EXPECT(gbc.pc(), 0x545b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0100
        gbc.setState(0xac22, 0xf066, 0x10b0, 0x62ce, 0xdb9f, 0x5d9e, 0x1, 0x0);
        gbc.writeMem(0xac22, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xf066);
        EXPECT(gbc.pc(), 0xac23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac22), 0xb4);
        // B4 0101
        gbc.setState(0x7712, 0x9c48, 0xc770, 0xbc05, 0x720c, 0xb91a, 0x1, 0x1);
        gbc.writeMem(0x7712, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x9c48);
        EXPECT(gbc.pc(), 0x7713);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0103
        gbc.setState(0xe3ea, 0xce3a, 0xb9f0, 0xc87d, 0x8961, 0xca6, 0x0, 0x0);
        gbc.writeMem(0xe3ea, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xce3a);
        EXPECT(gbc.pc(), 0xe3eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3ea), 0xb4);
        // B4 0104
        gbc.setState(0x369d, 0xa4ca, 0xa800, 0x11d6, 0xda81, 0x65c3, 0x1, 0x1);
        gbc.writeMem(0x369d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xa4ca);
        EXPECT(gbc.pc(), 0x369e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0105
        gbc.setState(0x9bde, 0x43b1, 0xa580, 0x552d, 0x95bf, 0x52a8, 0x0, 0x0);
        gbc.writeMem(0x9bde, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x43b1);
        EXPECT(gbc.pc(), 0x9bdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bde), 0xb4);
        // B4 0106
        gbc.setState(0x870c, 0x4572, 0x7e0, 0x96db, 0x54ab, 0x7c89, 0x0, 0x1);
        gbc.writeMem(0x870c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x4572);
        EXPECT(gbc.pc(), 0x870d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x870c), 0xb4);
        // B4 0107
        gbc.setState(0x4152, 0xc0c3, 0xa890, 0xd343, 0x1d01, 0x93ef, 0x0, 0x0);
        gbc.writeMem(0x4152, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xc0c3);
        EXPECT(gbc.pc(), 0x4153);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0108
        gbc.setState(0x4ff3, 0x3716, 0x5580, 0x3468, 0x696d, 0xdddf, 0x1, 0x0);
        gbc.writeMem(0x4ff3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x3716);
        EXPECT(gbc.pc(), 0x4ff4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0109
        gbc.setState(0xc13f, 0xe67b, 0xfb90, 0x8b53, 0x9ed5, 0x56ee, 0x0, 0x0);
        gbc.writeMem(0xc13f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xe67b);
        EXPECT(gbc.pc(), 0xc140);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc13f), 0xb4);
        // B4 010A
        gbc.setState(0x6827, 0x4061, 0xf190, 0xd19f, 0x115c, 0xfee6, 0x1, 0x0);
        gbc.writeMem(0x6827, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x4061);
        EXPECT(gbc.pc(), 0x6828);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 010B
        gbc.setState(0x9c9c, 0x20fc, 0x5890, 0xe3a0, 0xfa57, 0x5964, 0x0, 0x0);
        gbc.writeMem(0x9c9c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x20fc);
        EXPECT(gbc.pc(), 0x9c9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c9c), 0xb4);
        // B4 010C
        gbc.setState(0xbff6, 0x4b0d, 0xa090, 0xc453, 0x6101, 0xdf08, 0x0, 0x1);
        gbc.writeMem(0xbff6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x4b0d);
        EXPECT(gbc.pc(), 0xbff7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbff6), 0xb4);
        // B4 010D
        gbc.setState(0x2eec, 0x3728, 0xfe70, 0xcceb, 0x6df3, 0x4708, 0x0, 0x1);
        gbc.writeMem(0x2eec, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x3728);
        EXPECT(gbc.pc(), 0x2eed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 010E
        gbc.setState(0xbd4a, 0xbc55, 0x4c90, 0x1161, 0x7a71, 0x563, 0x1, 0x1);
        gbc.writeMem(0xbd4a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xbc55);
        EXPECT(gbc.pc(), 0xbd4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd4a), 0xb4);
        // B4 010F
        gbc.setState(0x9645, 0x1fd7, 0xbee0, 0x9ccd, 0x3f32, 0x56fa, 0x1, 0x1);
        gbc.writeMem(0x9645, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x1fd7);
        EXPECT(gbc.pc(), 0x9646);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9645), 0xb4);
        // B4 0110
        gbc.setState(0x2516, 0x573a, 0xee60, 0xd5eb, 0x30b1, 0x9da2, 0x0, 0x1);
        gbc.writeMem(0x2516, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x573a);
        EXPECT(gbc.pc(), 0x2517);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0111
        gbc.setState(0x54e7, 0xae6e, 0x65e0, 0x48bc, 0xfb8d, 0xbaa1, 0x1, 0x0);
        gbc.writeMem(0x54e7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xae6e);
        EXPECT(gbc.pc(), 0x54e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0112
        gbc.setState(0xa828, 0xba46, 0xe9c0, 0xcbaf, 0xcb9b, 0xacda, 0x1, 0x0);
        gbc.writeMem(0xa828, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xba46);
        EXPECT(gbc.pc(), 0xa829);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa828), 0xb4);
        // B4 0113
        gbc.setState(0xb993, 0xe3e1, 0x9b10, 0x2c71, 0x1614, 0x79ad, 0x0, 0x0);
        gbc.writeMem(0xb993, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xe3e1);
        EXPECT(gbc.pc(), 0xb994);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb993), 0xb4);
        // B4 0114
        gbc.setState(0xe863, 0x4452, 0xf500, 0x1873, 0xd8bb, 0x1879, 0x1, 0x0);
        gbc.writeMem(0xe863, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x4452);
        EXPECT(gbc.pc(), 0xe864);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe863), 0xb4);
        // B4 0115
        gbc.setState(0x95ca, 0xae30, 0x8a70, 0xd230, 0x51ae, 0x2676, 0x1, 0x0);
        gbc.writeMem(0x95ca, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xae30);
        EXPECT(gbc.pc(), 0x95cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95ca), 0xb4);
        // B4 0116
        gbc.setState(0xcdff, 0xcb55, 0x9020, 0x2743, 0x9629, 0x73, 0x0, 0x1);
        gbc.writeMem(0xcdff, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xcb55);
        EXPECT(gbc.pc(), 0xce00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdff), 0xb4);
        // B4 0117
        gbc.setState(0x84ef, 0x6c4b, 0x240, 0x8ce1, 0xc861, 0x9801, 0x1, 0x1);
        gbc.writeMem(0x84ef, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x6c4b);
        EXPECT(gbc.pc(), 0x84f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84ef), 0xb4);
        // B4 0118
        gbc.setState(0x141f, 0x83c3, 0x4600, 0x53a9, 0x2b79, 0xac3b, 0x1, 0x0);
        gbc.writeMem(0x141f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x83c3);
        EXPECT(gbc.pc(), 0x1420);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0119
        gbc.setState(0x72ed, 0x8793, 0x1550, 0xa19a, 0x8854, 0xb105, 0x0, 0x1);
        gbc.writeMem(0x72ed, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x8793);
        EXPECT(gbc.pc(), 0x72ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 011A
        gbc.setState(0xd8e2, 0x8ad7, 0xcc40, 0x3a77, 0x902e, 0x4f99, 0x0, 0x0);
        gbc.writeMem(0xd8e2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x8ad7);
        EXPECT(gbc.pc(), 0xd8e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8e2), 0xb4);
        // B4 011B
        gbc.setState(0x4eee, 0x4319, 0x33a0, 0x7a6c, 0xcc74, 0xe030, 0x0, 0x1);
        gbc.writeMem(0x4eee, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x4319);
        EXPECT(gbc.pc(), 0x4eef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 011C
        gbc.setState(0x22f3, 0xe86a, 0x66c0, 0x4cd2, 0xed98, 0xee0c, 0x1, 0x0);
        gbc.writeMem(0x22f3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xe86a);
        EXPECT(gbc.pc(), 0x22f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 011D
        gbc.setState(0x4ec7, 0x18bc, 0x7680, 0x2a6a, 0x39dc, 0x41ec, 0x0, 0x1);
        gbc.writeMem(0x4ec7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x18bc);
        EXPECT(gbc.pc(), 0x4ec8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 011F
        gbc.setState(0x8c35, 0xa213, 0x9610, 0xbcdf, 0xcf0e, 0x23da, 0x0, 0x1);
        gbc.writeMem(0x8c35, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xa213);
        EXPECT(gbc.pc(), 0x8c36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c35), 0xb4);
        // B4 0120
        gbc.setState(0x34cc, 0x3d1, 0x78f0, 0x4b68, 0xc70f, 0x249, 0x0, 0x0);
        gbc.writeMem(0x34cc, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x3d1);
        EXPECT(gbc.pc(), 0x34cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0121
        gbc.setState(0xc1f4, 0xb128, 0x8970, 0xfbe5, 0x307e, 0xabac, 0x1, 0x1);
        gbc.writeMem(0xc1f4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xb128);
        EXPECT(gbc.pc(), 0xc1f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1f4), 0xb4);
        // B4 0122
        gbc.setState(0x154, 0x9c02, 0x87a0, 0xf96e, 0x5a28, 0x6df, 0x1, 0x1);
        gbc.writeMem(0x154, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x9c02);
        EXPECT(gbc.pc(), 0x155);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0123
        gbc.setState(0x43ae, 0x8151, 0x4630, 0x6f00, 0xe2f1, 0xde0a, 0x0, 0x1);
        gbc.writeMem(0x43ae, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8151);
        EXPECT(gbc.pc(), 0x43af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0124
        gbc.setState(0x8f92, 0x85a8, 0xdb20, 0xd144, 0xc5ae, 0x2720, 0x0, 0x0);
        gbc.writeMem(0x8f92, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x85a8);
        EXPECT(gbc.pc(), 0x8f93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f92), 0xb4);
        // B4 0125
        gbc.setState(0x9da7, 0x26ea, 0x9a60, 0xaed3, 0xfeb1, 0xd602, 0x1, 0x0);
        gbc.writeMem(0x9da7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x26ea);
        EXPECT(gbc.pc(), 0x9da8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9da7), 0xb4);
        // B4 0126
        gbc.setState(0xcbe1, 0xf9f1, 0xef90, 0x2380, 0xa181, 0x3331, 0x1, 0x1);
        gbc.writeMem(0xcbe1, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xf9f1);
        EXPECT(gbc.pc(), 0xcbe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbe1), 0xb4);
        // B4 0127
        gbc.setState(0x4497, 0x480, 0x4ef0, 0x6d28, 0xfcfb, 0x59a8, 0x1, 0x0);
        gbc.writeMem(0x4497, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x480);
        EXPECT(gbc.pc(), 0x4498);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0128
        gbc.setState(0x79aa, 0xb780, 0xe860, 0x40d8, 0x4c41, 0xbe68, 0x0, 0x1);
        gbc.writeMem(0x79aa, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xb780);
        EXPECT(gbc.pc(), 0x79ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0129
        gbc.setState(0xa59d, 0x815f, 0x1d00, 0x8020, 0xf8d6, 0x8fb0, 0x1, 0x0);
        gbc.writeMem(0xa59d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x815f);
        EXPECT(gbc.pc(), 0xa59e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa59d), 0xb4);
        // B4 012A
        gbc.setState(0x7149, 0xbba0, 0x5920, 0xcf53, 0x6528, 0xb9cc, 0x1, 0x1);
        gbc.writeMem(0x7149, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xbba0);
        EXPECT(gbc.pc(), 0x714a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 012B
        gbc.setState(0xe9a0, 0x4a1a, 0xb1b0, 0x8ef6, 0x73d1, 0xc812, 0x0, 0x0);
        gbc.writeMem(0xe9a0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x4a1a);
        EXPECT(gbc.pc(), 0xe9a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9a0), 0xb4);
        // B4 012C
        gbc.setState(0x815, 0xf3ec, 0xd110, 0xc86f, 0xd788, 0x17b8, 0x1, 0x0);
        gbc.writeMem(0x815, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xf3ec);
        EXPECT(gbc.pc(), 0x816);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 012D
        gbc.setState(0xce72, 0xde86, 0x50b0, 0x9130, 0x4ac7, 0xdeba, 0x0, 0x0);
        gbc.writeMem(0xce72, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xde86);
        EXPECT(gbc.pc(), 0xce73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce72), 0xb4);
        // B4 012E
        gbc.setState(0xd40, 0x8bd3, 0xa40, 0x5cfb, 0xaf07, 0x9009, 0x1, 0x1);
        gbc.writeMem(0xd40, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x8bd3);
        EXPECT(gbc.pc(), 0xd41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 012F
        gbc.setState(0xac9, 0x81b5, 0xce80, 0x4483, 0xcc6, 0x22b0, 0x1, 0x1);
        gbc.writeMem(0xac9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x81b5);
        EXPECT(gbc.pc(), 0xaca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0130
        gbc.setState(0xb2be, 0xcc8a, 0xacb0, 0x774f, 0xb174, 0x958b, 0x0, 0x1);
        gbc.writeMem(0xb2be, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xcc8a);
        EXPECT(gbc.pc(), 0xb2bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2be), 0xb4);
        // B4 0131
        gbc.setState(0xd71b, 0xcdb8, 0xb510, 0x293, 0x8596, 0x624c, 0x0, 0x0);
        gbc.writeMem(0xd71b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xcdb8);
        EXPECT(gbc.pc(), 0xd71c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd71b), 0xb4);
        // B4 0132
        gbc.setState(0x8faf, 0xfdea, 0x9180, 0x620f, 0xcc33, 0xb278, 0x1, 0x1);
        gbc.writeMem(0x8faf, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xfdea);
        EXPECT(gbc.pc(), 0x8fb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8faf), 0xb4);
        // B4 0133
        gbc.setState(0x5356, 0x4f86, 0xde00, 0x2c5b, 0xe119, 0xea3c, 0x0, 0x1);
        gbc.writeMem(0x5356, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x4f86);
        EXPECT(gbc.pc(), 0x5357);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0134
        gbc.setState(0xe462, 0x9f99, 0x34c0, 0x70de, 0x6f0e, 0x1d96, 0x1, 0x0);
        gbc.writeMem(0xe462, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x9f99);
        EXPECT(gbc.pc(), 0xe463);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe462), 0xb4);
        // B4 0136
        gbc.setState(0xde92, 0x8a86, 0x3e70, 0x1681, 0x964c, 0x6a51, 0x1, 0x1);
        gbc.writeMem(0xde92, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x8a86);
        EXPECT(gbc.pc(), 0xde93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde92), 0xb4);
        // B4 0137
        gbc.setState(0xe6e, 0xcf5, 0xc590, 0xe816, 0x172d, 0x4f33, 0x0, 0x0);
        gbc.writeMem(0xe6e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xcf5);
        EXPECT(gbc.pc(), 0xe6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0138
        gbc.setState(0xd22a, 0xd439, 0xd290, 0xeec1, 0xb079, 0xc64c, 0x1, 0x1);
        gbc.writeMem(0xd22a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd439);
        EXPECT(gbc.pc(), 0xd22b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd22a), 0xb4);
        // B4 0139
        gbc.setState(0xa6b9, 0x4e63, 0x6f70, 0xa792, 0x502d, 0x6f46, 0x0, 0x0);
        gbc.writeMem(0xa6b9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x4e63);
        EXPECT(gbc.pc(), 0xa6ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6b9), 0xb4);
        // B4 013A
        gbc.setState(0x6cf0, 0xad22, 0xc540, 0xacd9, 0x124b, 0x38b1, 0x1, 0x1);
        gbc.writeMem(0x6cf0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xad22);
        EXPECT(gbc.pc(), 0x6cf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 013B
        gbc.setState(0x293c, 0x7398, 0xb270, 0x89d5, 0xdd12, 0xf556, 0x1, 0x1);
        gbc.writeMem(0x293c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x7398);
        EXPECT(gbc.pc(), 0x293d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 013C
        gbc.setState(0x43fc, 0x8855, 0x7d90, 0x5839, 0xea10, 0x4430, 0x0, 0x1);
        gbc.writeMem(0x43fc, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x8855);
        EXPECT(gbc.pc(), 0x43fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 013D
        gbc.setState(0x3b10, 0x82c, 0xd9c0, 0xd85a, 0x5e99, 0x6c17, 0x0, 0x1);
        gbc.writeMem(0x3b10, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x82c);
        EXPECT(gbc.pc(), 0x3b11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 013E
        gbc.setState(0x3a46, 0x43cc, 0x3900, 0xfc44, 0x556d, 0x45c9, 0x0, 0x1);
        gbc.writeMem(0x3a46, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x43cc);
        EXPECT(gbc.pc(), 0x3a47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 013F
        gbc.setState(0x49c4, 0xa8e7, 0xc410, 0x674a, 0x6663, 0x4bbb, 0x1, 0x0);
        gbc.writeMem(0x49c4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xa8e7);
        EXPECT(gbc.pc(), 0x49c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0140
        gbc.setState(0xd60f, 0x947d, 0x3320, 0x3e45, 0x5331, 0xebc8, 0x0, 0x1);
        gbc.writeMem(0xd60f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x947d);
        EXPECT(gbc.pc(), 0xd610);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd60f), 0xb4);
        // B4 0141
        gbc.setState(0x27b8, 0x5759, 0x7630, 0x842a, 0x4a69, 0x7886, 0x0, 0x0);
        gbc.writeMem(0x27b8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x5759);
        EXPECT(gbc.pc(), 0x27b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0142
        gbc.setState(0xab49, 0xe35d, 0x3460, 0x4885, 0x7d03, 0xf497, 0x0, 0x0);
        gbc.writeMem(0xab49, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xe35d);
        EXPECT(gbc.pc(), 0xab4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab49), 0xb4);
        // B4 0143
        gbc.setState(0x23a8, 0x5cf4, 0x25f0, 0xdc00, 0x8d7b, 0x14cb, 0x1, 0x1);
        gbc.writeMem(0x23a8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x5cf4);
        EXPECT(gbc.pc(), 0x23a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0144
        gbc.setState(0x9ba8, 0xf8a5, 0xff80, 0xf84b, 0xd28c, 0xe0ae, 0x1, 0x1);
        gbc.writeMem(0x9ba8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xf8a5);
        EXPECT(gbc.pc(), 0x9ba9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ba8), 0xb4);
        // B4 0145
        gbc.setState(0x4ad2, 0x2240, 0xb10, 0x7341, 0x5da0, 0xaaaf, 0x0, 0x0);
        gbc.writeMem(0x4ad2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x2240);
        EXPECT(gbc.pc(), 0x4ad3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0146
        gbc.setState(0xe686, 0x8547, 0xac50, 0xa65c, 0x228e, 0x1d5b, 0x1, 0x0);
        gbc.writeMem(0xe686, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x8547);
        EXPECT(gbc.pc(), 0xe687);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe686), 0xb4);
        // B4 0147
        gbc.setState(0x4e0d, 0x3a18, 0x31e0, 0xa041, 0x32c0, 0xf494, 0x1, 0x0);
        gbc.writeMem(0x4e0d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x3a18);
        EXPECT(gbc.pc(), 0x4e0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0148
        gbc.setState(0x59a7, 0x6caf, 0xc270, 0x894e, 0x79cc, 0xab8a, 0x0, 0x0);
        gbc.writeMem(0x59a7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x6caf);
        EXPECT(gbc.pc(), 0x59a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 014A
        gbc.setState(0x2026, 0x9be, 0x4fa0, 0x14db, 0x1479, 0x7f73, 0x1, 0x1);
        gbc.writeMem(0x2026, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x9be);
        EXPECT(gbc.pc(), 0x2027);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 014B
        gbc.setState(0x8460, 0xa9cb, 0xc670, 0x9a17, 0x141f, 0xa55, 0x0, 0x0);
        gbc.writeMem(0x8460, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xa9cb);
        EXPECT(gbc.pc(), 0x8461);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8460), 0xb4);
        // B4 014C
        gbc.setState(0x720, 0x6395, 0xec30, 0x5163, 0x272e, 0x91ff, 0x1, 0x1);
        gbc.writeMem(0x720, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x6395);
        EXPECT(gbc.pc(), 0x721);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 014D
        gbc.setState(0xa00b, 0x13d, 0x97c0, 0x8bdc, 0xf00e, 0xf16e, 0x1, 0x1);
        gbc.writeMem(0xa00b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x13d);
        EXPECT(gbc.pc(), 0xa00c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa00b), 0xb4);
        // B4 014E
        gbc.setState(0x239d, 0x6e77, 0x1a00, 0xf10c, 0x1f90, 0x4707, 0x1, 0x0);
        gbc.writeMem(0x239d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x6e77);
        EXPECT(gbc.pc(), 0x239e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 014F
        gbc.setState(0x3ce5, 0x5393, 0x4b90, 0x2fdb, 0x3e09, 0x2404, 0x0, 0x0);
        gbc.writeMem(0x3ce5, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x5393);
        EXPECT(gbc.pc(), 0x3ce6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0150
        gbc.setState(0xe269, 0xbff6, 0x67e0, 0xce53, 0x16ae, 0xd429, 0x0, 0x0);
        gbc.writeMem(0xe269, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xbff6);
        EXPECT(gbc.pc(), 0xe26a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe269), 0xb4);
        // B4 0151
        gbc.setState(0x982a, 0x2b18, 0xf630, 0x1fb2, 0xe887, 0x1ba7, 0x1, 0x0);
        gbc.writeMem(0x982a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x2b18);
        EXPECT(gbc.pc(), 0x982b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x982a), 0xb4);
        // B4 0152
        gbc.setState(0x31e8, 0x2ce4, 0xbe70, 0x3310, 0x619b, 0x769d, 0x1, 0x1);
        gbc.writeMem(0x31e8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x2ce4);
        EXPECT(gbc.pc(), 0x31e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0153
        gbc.setState(0xa7a7, 0xb202, 0x13c0, 0xdb8, 0x638e, 0x418c, 0x0, 0x1);
        gbc.writeMem(0xa7a7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xb202);
        EXPECT(gbc.pc(), 0xa7a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7a7), 0xb4);
        // B4 0154
        gbc.setState(0x9c26, 0xe79f, 0x5310, 0x1b23, 0xea1, 0xac4a, 0x0, 0x0);
        gbc.writeMem(0x9c26, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xe79f);
        EXPECT(gbc.pc(), 0x9c27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c26), 0xb4);
        // B4 0155
        gbc.setState(0x3ee6, 0xa93f, 0x47c0, 0x8ab0, 0x7199, 0x19e9, 0x1, 0x0);
        gbc.writeMem(0x3ee6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa93f);
        EXPECT(gbc.pc(), 0x3ee7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0156
        gbc.setState(0xd5b4, 0xf6fd, 0xdee0, 0x3da5, 0xc156, 0x4219, 0x1, 0x1);
        gbc.writeMem(0xd5b4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xf6fd);
        EXPECT(gbc.pc(), 0xd5b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5b4), 0xb4);
        // B4 0158
        gbc.setState(0x43f4, 0xecb1, 0x2110, 0x8a97, 0x5a9e, 0x3d4a, 0x0, 0x1);
        gbc.writeMem(0x43f4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xecb1);
        EXPECT(gbc.pc(), 0x43f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0159
        gbc.setState(0x3e17, 0xb0a8, 0xabe0, 0x5199, 0xe5c8, 0xae31, 0x1, 0x0);
        gbc.writeMem(0x3e17, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb0a8);
        EXPECT(gbc.pc(), 0x3e18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 015A
        gbc.setState(0x5a46, 0x4060, 0x5040, 0x5704, 0xda97, 0x548f, 0x1, 0x0);
        gbc.writeMem(0x5a46, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x4060);
        EXPECT(gbc.pc(), 0x5a47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 015B
        gbc.setState(0xe6e4, 0x1705, 0x7db0, 0xaa7b, 0x9b2e, 0x8838, 0x0, 0x0);
        gbc.writeMem(0xe6e4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x1705);
        EXPECT(gbc.pc(), 0xe6e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6e4), 0xb4);
        // B4 015C
        gbc.setState(0xabd2, 0x199a, 0x37b0, 0x472b, 0x63c4, 0x9dd0, 0x1, 0x1);
        gbc.writeMem(0xabd2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x199a);
        EXPECT(gbc.pc(), 0xabd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabd2), 0xb4);
        // B4 015D
        gbc.setState(0x8d14, 0xe338, 0x7060, 0xbbe, 0x52c8, 0x46b5, 0x1, 0x1);
        gbc.writeMem(0x8d14, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xe338);
        EXPECT(gbc.pc(), 0x8d15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d14), 0xb4);
        // B4 015E
        gbc.setState(0x6f07, 0xbfa7, 0xefe0, 0xea8f, 0x8ccb, 0xc3d1, 0x1, 0x0);
        gbc.writeMem(0x6f07, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xbfa7);
        EXPECT(gbc.pc(), 0x6f08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 015F
        gbc.setState(0xa5e4, 0x2102, 0x8130, 0x62dc, 0x888d, 0x4bc3, 0x1, 0x0);
        gbc.writeMem(0xa5e4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x2102);
        EXPECT(gbc.pc(), 0xa5e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5e4), 0xb4);
        // B4 0160
        gbc.setState(0xa560, 0x6846, 0xd180, 0xa18, 0x3f6b, 0xb89b, 0x0, 0x0);
        gbc.writeMem(0xa560, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x6846);
        EXPECT(gbc.pc(), 0xa561);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa560), 0xb4);
        // B4 0161
        gbc.setState(0x3a48, 0x8692, 0x74c0, 0x4b98, 0x85d6, 0x8e82, 0x0, 0x0);
        gbc.writeMem(0x3a48, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x8692);
        EXPECT(gbc.pc(), 0x3a49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0163
        gbc.setState(0x1d2, 0x781f, 0x62a0, 0x5dea, 0x9156, 0x4a9e, 0x1, 0x1);
        gbc.writeMem(0x1d2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x781f);
        EXPECT(gbc.pc(), 0x1d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0164
        gbc.setState(0x689, 0x8285, 0x94a0, 0x5bd9, 0x8e46, 0x242a, 0x0, 0x0);
        gbc.writeMem(0x689, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x8285);
        EXPECT(gbc.pc(), 0x68a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0165
        gbc.setState(0x72fa, 0xa07b, 0x29b0, 0xbbb8, 0x64ad, 0xcd18, 0x1, 0x0);
        gbc.writeMem(0x72fa, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xa07b);
        EXPECT(gbc.pc(), 0x72fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0166
        gbc.setState(0xa4fc, 0x1ea3, 0x1490, 0x591b, 0x3fbf, 0xed3d, 0x0, 0x0);
        gbc.writeMem(0xa4fc, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x1ea3);
        EXPECT(gbc.pc(), 0xa4fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4fc), 0xb4);
        // B4 0167
        gbc.setState(0x564e, 0xc413, 0x9e80, 0x5be2, 0x32e3, 0x37e6, 0x1, 0x0);
        gbc.writeMem(0x564e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xc413);
        EXPECT(gbc.pc(), 0x564f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0168
        gbc.setState(0x300e, 0xa537, 0x43b0, 0x926e, 0xc29e, 0x3945, 0x0, 0x0);
        gbc.writeMem(0x300e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xa537);
        EXPECT(gbc.pc(), 0x300f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0169
        gbc.setState(0xd633, 0x81d9, 0xb910, 0xfd95, 0xab9f, 0xc02, 0x1, 0x1);
        gbc.writeMem(0xd633, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x81d9);
        EXPECT(gbc.pc(), 0xd634);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd633), 0xb4);
        // B4 016A
        gbc.setState(0x5e46, 0xb9f8, 0x3140, 0x3615, 0xf7a2, 0xcc2e, 0x1, 0x1);
        gbc.writeMem(0x5e46, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xb9f8);
        EXPECT(gbc.pc(), 0x5e47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 016B
        gbc.setState(0x4d02, 0xb5bc, 0x64f0, 0x2048, 0x271e, 0x693c, 0x1, 0x0);
        gbc.writeMem(0x4d02, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xb5bc);
        EXPECT(gbc.pc(), 0x4d03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 016C
        gbc.setState(0x76e7, 0xe212, 0xfb10, 0x32be, 0x3ce4, 0xdb24, 0x0, 0x1);
        gbc.writeMem(0x76e7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xe212);
        EXPECT(gbc.pc(), 0x76e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 016D
        gbc.setState(0x1f1e, 0x9283, 0xf5f0, 0x7d9e, 0xd384, 0x1d3a, 0x0, 0x1);
        gbc.writeMem(0x1f1e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x9283);
        EXPECT(gbc.pc(), 0x1f1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 016E
        gbc.setState(0xad7f, 0xe1ac, 0x84e0, 0x1102, 0xdd0f, 0x1b5b, 0x0, 0x1);
        gbc.writeMem(0xad7f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xe1ac);
        EXPECT(gbc.pc(), 0xad80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad7f), 0xb4);
        // B4 016F
        gbc.setState(0x681f, 0x9758, 0xf400, 0x7601, 0xd380, 0x6398, 0x0, 0x1);
        gbc.writeMem(0x681f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x9758);
        EXPECT(gbc.pc(), 0x6820);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0170
        gbc.setState(0x2b74, 0x4ea4, 0xf6f0, 0x580e, 0xfcf5, 0xfa4f, 0x1, 0x0);
        gbc.writeMem(0x2b74, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x4ea4);
        EXPECT(gbc.pc(), 0x2b75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0171
        gbc.setState(0xd609, 0x33a3, 0x4410, 0xf1f3, 0x75af, 0xa220, 0x0, 0x1);
        gbc.writeMem(0xd609, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x33a3);
        EXPECT(gbc.pc(), 0xd60a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd609), 0xb4);
        // B4 0172
        gbc.setState(0x9d50, 0x12eb, 0x17b0, 0xb466, 0xf20b, 0x538c, 0x0, 0x1);
        gbc.writeMem(0x9d50, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x12eb);
        EXPECT(gbc.pc(), 0x9d51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d50), 0xb4);
        // B4 0173
        gbc.setState(0x553, 0x7246, 0x1ab0, 0x8186, 0x385d, 0xd265, 0x1, 0x0);
        gbc.writeMem(0x553, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x7246);
        EXPECT(gbc.pc(), 0x554);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0174
        gbc.setState(0xe09f, 0x91f4, 0x6500, 0x549a, 0xc22c, 0xe09a, 0x0, 0x0);
        gbc.writeMem(0xe09f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x91f4);
        EXPECT(gbc.pc(), 0xe0a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe09f), 0xb4);
        // B4 0175
        gbc.setState(0xbf98, 0xe8d1, 0x1250, 0x4c69, 0x2a1b, 0xeb4, 0x1, 0x1);
        gbc.writeMem(0xbf98, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xe8d1);
        EXPECT(gbc.pc(), 0xbf99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf98), 0xb4);
        // B4 0176
        gbc.setState(0x7503, 0xcdc6, 0xe620, 0x8b0b, 0x36a4, 0xa179, 0x1, 0x0);
        gbc.writeMem(0x7503, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xcdc6);
        EXPECT(gbc.pc(), 0x7504);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0177
        gbc.setState(0xd037, 0xd49, 0x8c20, 0x9ee, 0x42ab, 0x4981, 0x0, 0x1);
        gbc.writeMem(0xd037, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xd49);
        EXPECT(gbc.pc(), 0xd038);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd037), 0xb4);
        // B4 0178
        gbc.setState(0x4a48, 0x8680, 0xb150, 0x64f3, 0xf31f, 0x1f4a, 0x1, 0x0);
        gbc.writeMem(0x4a48, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x8680);
        EXPECT(gbc.pc(), 0x4a49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0179
        gbc.setState(0x805, 0xdf1f, 0x35d0, 0x9f7b, 0x4d3e, 0xb81e, 0x1, 0x1);
        gbc.writeMem(0x805, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xdf1f);
        EXPECT(gbc.pc(), 0x806);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 017A
        gbc.setState(0x3436, 0xc5e2, 0xd840, 0x3eb4, 0x51fd, 0x137a, 0x0, 0x0);
        gbc.writeMem(0x3436, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc5e2);
        EXPECT(gbc.pc(), 0x3437);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 017B
        gbc.setState(0x7184, 0x88b2, 0x28d0, 0x84f7, 0x8ac9, 0xc66, 0x1, 0x0);
        gbc.writeMem(0x7184, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x88b2);
        EXPECT(gbc.pc(), 0x7185);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 017C
        gbc.setState(0x498f, 0x6c47, 0x59c0, 0xfc44, 0xdba2, 0xcb08, 0x0, 0x1);
        gbc.writeMem(0x498f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6c47);
        EXPECT(gbc.pc(), 0x4990);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 017D
        gbc.setState(0xb275, 0x919a, 0x60f0, 0x3561, 0x87eb, 0x24cf, 0x1, 0x0);
        gbc.writeMem(0xb275, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x919a);
        EXPECT(gbc.pc(), 0xb276);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb275), 0xb4);
        // B4 017E
        gbc.setState(0x8216, 0xf3a8, 0x6ed0, 0xf5d1, 0x6eee, 0xa625, 0x0, 0x0);
        gbc.writeMem(0x8216, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xf3a8);
        EXPECT(gbc.pc(), 0x8217);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8216), 0xb4);
        // B4 017F
        gbc.setState(0x22bd, 0x8f0, 0x8070, 0x95e8, 0xd21a, 0x6e80, 0x0, 0x1);
        gbc.writeMem(0x22bd, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x8f0);
        EXPECT(gbc.pc(), 0x22be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0180
        gbc.setState(0xa43a, 0xb19c, 0x1d70, 0x5d2b, 0x9f58, 0xb57c, 0x1, 0x0);
        gbc.writeMem(0xa43a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xb19c);
        EXPECT(gbc.pc(), 0xa43b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa43a), 0xb4);
        // B4 0181
        gbc.setState(0x7a5b, 0xe486, 0x6160, 0xb73b, 0x2089, 0xedff, 0x0, 0x1);
        gbc.writeMem(0x7a5b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xe486);
        EXPECT(gbc.pc(), 0x7a5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0182
        gbc.setState(0x8381, 0xa76f, 0x9f60, 0xb4e3, 0x85c, 0x4db1, 0x0, 0x0);
        gbc.writeMem(0x8381, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xa76f);
        EXPECT(gbc.pc(), 0x8382);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8381), 0xb4);
        // B4 0183
        gbc.setState(0x35f0, 0x1daf, 0x2250, 0xda26, 0xc95e, 0xeff4, 0x0, 0x0);
        gbc.writeMem(0x35f0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x1daf);
        EXPECT(gbc.pc(), 0x35f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0184
        gbc.setState(0x5344, 0xd01e, 0x3a30, 0xa439, 0xe5fb, 0x7548, 0x1, 0x0);
        gbc.writeMem(0x5344, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xd01e);
        EXPECT(gbc.pc(), 0x5345);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0185
        gbc.setState(0x9dde, 0xfa05, 0xa0e0, 0x13a7, 0xc09f, 0xe483, 0x0, 0x0);
        gbc.writeMem(0x9dde, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xfa05);
        EXPECT(gbc.pc(), 0x9ddf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dde), 0xb4);
        // B4 0186
        gbc.setState(0x6f7d, 0xd018, 0xacb0, 0x2e3a, 0x1868, 0xc24f, 0x1, 0x0);
        gbc.writeMem(0x6f7d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xd018);
        EXPECT(gbc.pc(), 0x6f7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0187
        gbc.setState(0x87f, 0x94cf, 0xc880, 0x8d35, 0xfe19, 0xc30c, 0x0, 0x0);
        gbc.writeMem(0x87f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x94cf);
        EXPECT(gbc.pc(), 0x880);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0188
        gbc.setState(0xbb18, 0xd1b0, 0xf440, 0x1167, 0x1371, 0x152b, 0x0, 0x0);
        gbc.writeMem(0xbb18, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xd1b0);
        EXPECT(gbc.pc(), 0xbb19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb18), 0xb4);
        // B4 0189
        gbc.setState(0x355b, 0xef51, 0x5e90, 0x7b49, 0x9998, 0x1531, 0x0, 0x1);
        gbc.writeMem(0x355b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xef51);
        EXPECT(gbc.pc(), 0x355c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 018A
        gbc.setState(0x5571, 0x9a09, 0xec80, 0x4426, 0x1b34, 0x4a5f, 0x1, 0x1);
        gbc.writeMem(0x5571, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x9a09);
        EXPECT(gbc.pc(), 0x5572);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 018B
        gbc.setState(0xdc34, 0x3e18, 0xb170, 0x8caa, 0xe4b1, 0x63f0, 0x0, 0x1);
        gbc.writeMem(0xdc34, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x3e18);
        EXPECT(gbc.pc(), 0xdc35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc34), 0xb4);
        // B4 018C
        gbc.setState(0xcdd4, 0x8606, 0xc940, 0xdca7, 0x2b98, 0xee2c, 0x1, 0x0);
        gbc.writeMem(0xcdd4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x8606);
        EXPECT(gbc.pc(), 0xcdd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdd4), 0xb4);
        // B4 018D
        gbc.setState(0x43af, 0xb238, 0x3190, 0xefa0, 0xb0c9, 0x7dc3, 0x0, 0x1);
        gbc.writeMem(0x43af, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xb238);
        EXPECT(gbc.pc(), 0x43b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 018E
        gbc.setState(0x267c, 0xa269, 0xbfe0, 0x6038, 0xdcb7, 0x88b, 0x0, 0x1);
        gbc.writeMem(0x267c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xa269);
        EXPECT(gbc.pc(), 0x267d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 018F
        gbc.setState(0xe0d3, 0xfbea, 0x7220, 0xd3f0, 0xdce6, 0xad0, 0x1, 0x1);
        gbc.writeMem(0xe0d3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xfbea);
        EXPECT(gbc.pc(), 0xe0d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0d3), 0xb4);
        // B4 0190
        gbc.setState(0x6c0c, 0x929c, 0x5560, 0xaec6, 0xa73, 0x6df2, 0x0, 0x1);
        gbc.writeMem(0x6c0c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x929c);
        EXPECT(gbc.pc(), 0x6c0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0191
        gbc.setState(0xcdc1, 0xf5d1, 0x63d0, 0x64de, 0x22a2, 0x5cd4, 0x1, 0x0);
        gbc.writeMem(0xcdc1, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf5d1);
        EXPECT(gbc.pc(), 0xcdc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdc1), 0xb4);
        // B4 0192
        gbc.setState(0xb451, 0x45a6, 0xaec0, 0x35c9, 0x9af7, 0xafd3, 0x0, 0x1);
        gbc.writeMem(0xb451, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x45a6);
        EXPECT(gbc.pc(), 0xb452);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb451), 0xb4);
        // B4 0193
        gbc.setState(0xd588, 0x3a58, 0xf1c0, 0x53d6, 0x3a37, 0x5d9e, 0x1, 0x1);
        gbc.writeMem(0xd588, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x3a58);
        EXPECT(gbc.pc(), 0xd589);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd588), 0xb4);
        // B4 0194
        gbc.setState(0x99f3, 0xe43d, 0x100, 0x4ff0, 0x7625, 0xc31c, 0x0, 0x1);
        gbc.writeMem(0x99f3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xe43d);
        EXPECT(gbc.pc(), 0x99f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99f3), 0xb4);
        // B4 0195
        gbc.setState(0xb77f, 0xa163, 0x7470, 0x704a, 0x1f1a, 0x35d, 0x1, 0x0);
        gbc.writeMem(0xb77f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xa163);
        EXPECT(gbc.pc(), 0xb780);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb77f), 0xb4);
        // B4 0196
        gbc.setState(0x65dc, 0x51b8, 0x6550, 0x826, 0x35cb, 0x506e, 0x0, 0x1);
        gbc.writeMem(0x65dc, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x51b8);
        EXPECT(gbc.pc(), 0x65dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0197
        gbc.setState(0x3948, 0xde39, 0xe710, 0x27a7, 0xf3b2, 0x3417, 0x0, 0x0);
        gbc.writeMem(0x3948, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xde39);
        EXPECT(gbc.pc(), 0x3949);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0198
        gbc.setState(0xed64, 0x9c88, 0xad10, 0x7b24, 0xc1ad, 0x1c7f, 0x1, 0x1);
        gbc.writeMem(0xed64, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x9c88);
        EXPECT(gbc.pc(), 0xed65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed64), 0xb4);
        // B4 0199
        gbc.setState(0x5f3, 0xb20e, 0x8380, 0x5abd, 0xe4a7, 0x4160, 0x1, 0x1);
        gbc.writeMem(0x5f3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xb20e);
        EXPECT(gbc.pc(), 0x5f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 019A
        gbc.setState(0x7a6, 0xa516, 0xab30, 0xd65a, 0xc205, 0xf8bb, 0x0, 0x1);
        gbc.writeMem(0x7a6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xa516);
        EXPECT(gbc.pc(), 0x7a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 019B
        gbc.setState(0x350, 0xe99c, 0x8010, 0xf0b6, 0xf733, 0x23bb, 0x0, 0x1);
        gbc.writeMem(0x350, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xe99c);
        EXPECT(gbc.pc(), 0x351);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 019C
        gbc.setState(0xb601, 0x21cd, 0xa940, 0xdb96, 0xc7fe, 0xeb4, 0x1, 0x1);
        gbc.writeMem(0xb601, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x21cd);
        EXPECT(gbc.pc(), 0xb602);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb601), 0xb4);
        // B4 019D
        gbc.setState(0x14e8, 0xf829, 0x48a0, 0x77e9, 0x1947, 0xb069, 0x0, 0x1);
        gbc.writeMem(0x14e8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xf829);
        EXPECT(gbc.pc(), 0x14e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 019F
        gbc.setState(0xaeee, 0xe0e8, 0xe3d0, 0x7855, 0x6b1e, 0x16df, 0x0, 0x0);
        gbc.writeMem(0xaeee, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xe0e8);
        EXPECT(gbc.pc(), 0xaeef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaeee), 0xb4);
        // B4 01A0
        gbc.setState(0x6948, 0xd2ed, 0xeb0, 0xc1f8, 0x550e, 0xed78, 0x0, 0x1);
        gbc.writeMem(0x6948, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xd2ed);
        EXPECT(gbc.pc(), 0x6949);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01A1
        gbc.setState(0xa320, 0x6513, 0x36f0, 0x7a1f, 0x4cb3, 0xedbe, 0x1, 0x0);
        gbc.writeMem(0xa320, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x6513);
        EXPECT(gbc.pc(), 0xa321);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa320), 0xb4);
        // B4 01A2
        gbc.setState(0x7f90, 0xbcf6, 0x37a0, 0xf79f, 0xe898, 0xb5c6, 0x1, 0x0);
        gbc.writeMem(0x7f90, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xbcf6);
        EXPECT(gbc.pc(), 0x7f91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01A3
        gbc.setState(0x3808, 0xefba, 0x3bf0, 0xb188, 0xcf33, 0x68a1, 0x1, 0x0);
        gbc.writeMem(0x3808, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xefba);
        EXPECT(gbc.pc(), 0x3809);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01A5
        gbc.setState(0x8b3b, 0x4b40, 0xe0b0, 0x9d2d, 0xe7e3, 0xe0a1, 0x0, 0x0);
        gbc.writeMem(0x8b3b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x4b40);
        EXPECT(gbc.pc(), 0x8b3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b3b), 0xb4);
        // B4 01A6
        gbc.setState(0xec9c, 0xdb5c, 0x29f0, 0x8e2, 0x7f19, 0x7bfa, 0x1, 0x0);
        gbc.writeMem(0xec9c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xdb5c);
        EXPECT(gbc.pc(), 0xec9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec9c), 0xb4);
        // B4 01A7
        gbc.setState(0x59e9, 0x4ec6, 0xd800, 0x884, 0x50ad, 0xd108, 0x0, 0x1);
        gbc.writeMem(0x59e9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x4ec6);
        EXPECT(gbc.pc(), 0x59ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01A9
        gbc.setState(0x710b, 0x2819, 0x8510, 0xccef, 0xbb16, 0x37e0, 0x0, 0x1);
        gbc.writeMem(0x710b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x2819);
        EXPECT(gbc.pc(), 0x710c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01AA
        gbc.setState(0x841b, 0x226e, 0xf310, 0x3b7a, 0x9ace, 0xa6e2, 0x1, 0x1);
        gbc.writeMem(0x841b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x226e);
        EXPECT(gbc.pc(), 0x841c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x841b), 0xb4);
        // B4 01AB
        gbc.setState(0xe1b1, 0xa4c5, 0x7a60, 0x4ef7, 0xd201, 0x793a, 0x0, 0x1);
        gbc.writeMem(0xe1b1, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xa4c5);
        EXPECT(gbc.pc(), 0xe1b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1b1), 0xb4);
        // B4 01AC
        gbc.setState(0xa28b, 0x66ff, 0x3760, 0xccec, 0xafb0, 0x16c7, 0x1, 0x1);
        gbc.writeMem(0xa28b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x66ff);
        EXPECT(gbc.pc(), 0xa28c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa28b), 0xb4);
        // B4 01AD
        gbc.setState(0x79ec, 0xf8a3, 0x5f00, 0xb52e, 0xf7de, 0xf61d, 0x0, 0x0);
        gbc.writeMem(0x79ec, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xf8a3);
        EXPECT(gbc.pc(), 0x79ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01AE
        gbc.setState(0x7ad7, 0x7cde, 0x9b50, 0xcdee, 0x55c0, 0x449d, 0x1, 0x0);
        gbc.writeMem(0x7ad7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x7cde);
        EXPECT(gbc.pc(), 0x7ad8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01AF
        gbc.setState(0x45be, 0xef7c, 0x5600, 0xe9de, 0x260e, 0x48ce, 0x0, 0x1);
        gbc.writeMem(0x45be, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xef7c);
        EXPECT(gbc.pc(), 0x45bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01B0
        gbc.setState(0xce33, 0x1566, 0x86a0, 0xf65c, 0x7de7, 0xe882, 0x0, 0x0);
        gbc.writeMem(0xce33, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x1566);
        EXPECT(gbc.pc(), 0xce34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce33), 0xb4);
        // B4 01B2
        gbc.setState(0x2e85, 0xac0b, 0xe820, 0xe00, 0x352, 0x980a, 0x1, 0x0);
        gbc.writeMem(0x2e85, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xac0b);
        EXPECT(gbc.pc(), 0x2e86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01B3
        gbc.setState(0x7145, 0xda0e, 0x79e0, 0xbe02, 0x7b09, 0x2baa, 0x0, 0x1);
        gbc.writeMem(0x7145, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xda0e);
        EXPECT(gbc.pc(), 0x7146);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01B4
        gbc.setState(0xc32a, 0x97c8, 0xf7f0, 0x50f, 0x7a8d, 0x17b6, 0x0, 0x1);
        gbc.writeMem(0xc32a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x97c8);
        EXPECT(gbc.pc(), 0xc32b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc32a), 0xb4);
        // B4 01B6
        gbc.setState(0xb5db, 0x74b4, 0xce10, 0x639c, 0x2693, 0x1283, 0x0, 0x1);
        gbc.writeMem(0xb5db, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x74b4);
        EXPECT(gbc.pc(), 0xb5dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5db), 0xb4);
        // B4 01B8
        gbc.setState(0x3fba, 0x3f3b, 0x39f0, 0x6e3a, 0xb764, 0x518b, 0x1, 0x1);
        gbc.writeMem(0x3fba, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3f3b);
        EXPECT(gbc.pc(), 0x3fbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01B9
        gbc.setState(0x1e8, 0xeb0b, 0x990, 0x4a10, 0xdf0d, 0xfa7c, 0x0, 0x0);
        gbc.writeMem(0x1e8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xeb0b);
        EXPECT(gbc.pc(), 0x1e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01BA
        gbc.setState(0x3e5b, 0x7af4, 0x5410, 0x4edc, 0x63e1, 0xca18, 0x1, 0x1);
        gbc.writeMem(0x3e5b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x7af4);
        EXPECT(gbc.pc(), 0x3e5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01BB
        gbc.setState(0x41f2, 0x4732, 0x4720, 0xce77, 0x2c5c, 0x9ea, 0x1, 0x0);
        gbc.writeMem(0x41f2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x4732);
        EXPECT(gbc.pc(), 0x41f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01BC
        gbc.setState(0xc4a5, 0x54c0, 0x5e0, 0x6f45, 0x400a, 0x1847, 0x0, 0x0);
        gbc.writeMem(0xc4a5, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x54c0);
        EXPECT(gbc.pc(), 0xc4a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4a5), 0xb4);
        // B4 01BD
        gbc.setState(0x2ed3, 0x688b, 0x9480, 0xc78b, 0x8ffd, 0x7655, 0x1, 0x0);
        gbc.writeMem(0x2ed3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x688b);
        EXPECT(gbc.pc(), 0x2ed4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01BE
        gbc.setState(0xed8c, 0xc3e6, 0x45e0, 0x7111, 0x75e7, 0x5343, 0x1, 0x0);
        gbc.writeMem(0xed8c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xc3e6);
        EXPECT(gbc.pc(), 0xed8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed8c), 0xb4);
        // B4 01BF
        gbc.setState(0x72c0, 0x257f, 0xe5a0, 0x4b1f, 0x315f, 0xa458, 0x1, 0x0);
        gbc.writeMem(0x72c0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x257f);
        EXPECT(gbc.pc(), 0x72c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01C0
        gbc.setState(0xbefc, 0x88b0, 0x870, 0x9a5f, 0xcc67, 0xdb64, 0x1, 0x0);
        gbc.writeMem(0xbefc, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x88b0);
        EXPECT(gbc.pc(), 0xbefd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbefc), 0xb4);
        // B4 01C1
        gbc.setState(0x4537, 0x3854, 0xa210, 0x9b0f, 0xa7cd, 0x5c45, 0x1, 0x0);
        gbc.writeMem(0x4537, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x3854);
        EXPECT(gbc.pc(), 0x4538);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01C2
        gbc.setState(0x7917, 0xa5f3, 0xb630, 0x85a4, 0x52f9, 0x721d, 0x1, 0x1);
        gbc.writeMem(0x7917, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xa5f3);
        EXPECT(gbc.pc(), 0x7918);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01C3
        gbc.setState(0xa043, 0x79c8, 0x3fa0, 0x9f81, 0x8a7a, 0x67a7, 0x1, 0x1);
        gbc.writeMem(0xa043, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x79c8);
        EXPECT(gbc.pc(), 0xa044);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa043), 0xb4);
        // B4 01C4
        gbc.setState(0xe1e3, 0x238b, 0xa9c0, 0x3785, 0x3a02, 0x9f0c, 0x1, 0x1);
        gbc.writeMem(0xe1e3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x238b);
        EXPECT(gbc.pc(), 0xe1e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1e3), 0xb4);
        // B4 01C5
        gbc.setState(0x3d84, 0xd9d3, 0x6a50, 0xcc6c, 0xf1f9, 0x79c, 0x1, 0x1);
        gbc.writeMem(0x3d84, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd9d3);
        EXPECT(gbc.pc(), 0x3d85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01C6
        gbc.setState(0x6a9f, 0xafc5, 0x57e0, 0xe045, 0x796e, 0x5626, 0x1, 0x1);
        gbc.writeMem(0x6a9f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xafc5);
        EXPECT(gbc.pc(), 0x6aa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01C7
        gbc.setState(0xce58, 0x121e, 0x29d0, 0x820e, 0xae5c, 0x7693, 0x1, 0x0);
        gbc.writeMem(0xce58, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x121e);
        EXPECT(gbc.pc(), 0xce59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce58), 0xb4);
        // B4 01C8
        gbc.setState(0x10e9, 0xad6, 0xa730, 0x4c14, 0x2459, 0x8d6, 0x1, 0x0);
        gbc.writeMem(0x10e9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xad6);
        EXPECT(gbc.pc(), 0x10ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01C9
        gbc.setState(0xb03c, 0x9b8e, 0xfdd0, 0x7604, 0xe88b, 0x101f, 0x1, 0x0);
        gbc.writeMem(0xb03c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x9b8e);
        EXPECT(gbc.pc(), 0xb03d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb03c), 0xb4);
        // B4 01CA
        gbc.setState(0x2571, 0x3b8f, 0xa5a0, 0x2be, 0x455, 0x741d, 0x0, 0x0);
        gbc.writeMem(0x2571, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x3b8f);
        EXPECT(gbc.pc(), 0x2572);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01CB
        gbc.setState(0xe886, 0xc327, 0x28e0, 0x3b2a, 0x203d, 0xbb3d, 0x0, 0x0);
        gbc.writeMem(0xe886, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xc327);
        EXPECT(gbc.pc(), 0xe887);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe886), 0xb4);
        // B4 01CC
        gbc.setState(0x9196, 0xf445, 0x79b0, 0x764d, 0x335a, 0x79b6, 0x1, 0x0);
        gbc.writeMem(0x9196, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xf445);
        EXPECT(gbc.pc(), 0x9197);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9196), 0xb4);
        // B4 01CD
        gbc.setState(0x38af, 0xb280, 0x6b60, 0x9354, 0x30b, 0x7d1c, 0x0, 0x1);
        gbc.writeMem(0x38af, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xb280);
        EXPECT(gbc.pc(), 0x38b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01CE
        gbc.setState(0xa6da, 0x5eca, 0x3530, 0xbfa8, 0x3a09, 0xb405, 0x0, 0x1);
        gbc.writeMem(0xa6da, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x5eca);
        EXPECT(gbc.pc(), 0xa6db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6da), 0xb4);
        // B4 01CF
        gbc.setState(0x5b80, 0x5e5f, 0xd2c0, 0x44e2, 0x99ea, 0xb7d5, 0x1, 0x1);
        gbc.writeMem(0x5b80, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x5e5f);
        EXPECT(gbc.pc(), 0x5b81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01D0
        gbc.setState(0x7efe, 0x9858, 0x3e00, 0xb1bf, 0x1b7, 0xba27, 0x0, 0x0);
        gbc.writeMem(0x7efe, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x9858);
        EXPECT(gbc.pc(), 0x7eff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01D1
        gbc.setState(0x124d, 0xa105, 0xb110, 0x3ec3, 0x2d09, 0xa38e, 0x1, 0x1);
        gbc.writeMem(0x124d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xa105);
        EXPECT(gbc.pc(), 0x124e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01D2
        gbc.setState(0xa9ee, 0xb5dd, 0x8b50, 0x1e88, 0xf627, 0xb56a, 0x1, 0x1);
        gbc.writeMem(0xa9ee, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xb5dd);
        EXPECT(gbc.pc(), 0xa9ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9ee), 0xb4);
        // B4 01D3
        gbc.setState(0x2db7, 0xef5a, 0xdf30, 0x56d, 0x202b, 0x7ac3, 0x1, 0x1);
        gbc.writeMem(0x2db7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xef5a);
        EXPECT(gbc.pc(), 0x2db8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01D4
        gbc.setState(0x1c86, 0xfc8e, 0xcfc0, 0x1b7d, 0xa7bd, 0x48ae, 0x1, 0x0);
        gbc.writeMem(0x1c86, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xfc8e);
        EXPECT(gbc.pc(), 0x1c87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01D6
        gbc.setState(0xe993, 0x3483, 0x38d0, 0x356, 0xfec3, 0xbb4b, 0x1, 0x1);
        gbc.writeMem(0xe993, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x3483);
        EXPECT(gbc.pc(), 0xe994);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe993), 0xb4);
        // B4 01D7
        gbc.setState(0x9ac6, 0x8cf2, 0x4b30, 0x1a81, 0xd7dd, 0x70ab, 0x0, 0x0);
        gbc.writeMem(0x9ac6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x8cf2);
        EXPECT(gbc.pc(), 0x9ac7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ac6), 0xb4);
        // B4 01D8
        gbc.setState(0x3c7, 0x877d, 0xf6b0, 0x4197, 0x2672, 0x3433, 0x1, 0x1);
        gbc.writeMem(0x3c7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x877d);
        EXPECT(gbc.pc(), 0x3c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01D9
        gbc.setState(0x1a67, 0x4118, 0xd340, 0xc333, 0x7362, 0xf937, 0x1, 0x0);
        gbc.writeMem(0x1a67, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x4118);
        EXPECT(gbc.pc(), 0x1a68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01DA
        gbc.setState(0xa61f, 0x385d, 0x99a0, 0x1672, 0x519f, 0x86e1, 0x1, 0x1);
        gbc.writeMem(0xa61f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x385d);
        EXPECT(gbc.pc(), 0xa620);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa61f), 0xb4);
        // B4 01DB
        gbc.setState(0xc23a, 0xdfbe, 0x7520, 0x6ba, 0x40fa, 0x1dc5, 0x1, 0x1);
        gbc.writeMem(0xc23a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xdfbe);
        EXPECT(gbc.pc(), 0xc23b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc23a), 0xb4);
        // B4 01DC
        gbc.setState(0x590e, 0x1fe6, 0x6b00, 0xe5f2, 0x6cdc, 0x373c, 0x1, 0x0);
        gbc.writeMem(0x590e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x1fe6);
        EXPECT(gbc.pc(), 0x590f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01DD
        gbc.setState(0xa018, 0xd59c, 0x2aa0, 0x8e62, 0x431f, 0x4b79, 0x1, 0x0);
        gbc.writeMem(0xa018, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xd59c);
        EXPECT(gbc.pc(), 0xa019);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa018), 0xb4);
        // B4 01DE
        gbc.setState(0x1e2e, 0x5171, 0x81a0, 0x2027, 0x5b3f, 0x3698, 0x1, 0x0);
        gbc.writeMem(0x1e2e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x5171);
        EXPECT(gbc.pc(), 0x1e2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01DF
        gbc.setState(0x6f35, 0x9a99, 0x2fc0, 0x5a96, 0xab26, 0xb3de, 0x1, 0x0);
        gbc.writeMem(0x6f35, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x9a99);
        EXPECT(gbc.pc(), 0x6f36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01E0
        gbc.setState(0xce51, 0xefd3, 0x4e80, 0xbf4c, 0x8836, 0x26e2, 0x1, 0x0);
        gbc.writeMem(0xce51, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xefd3);
        EXPECT(gbc.pc(), 0xce52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce51), 0xb4);
        // B4 01E2
        gbc.setState(0xd4d9, 0x9e9, 0x1b60, 0x6d2, 0xbff6, 0x1029, 0x0, 0x0);
        gbc.writeMem(0xd4d9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x9e9);
        EXPECT(gbc.pc(), 0xd4da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4d9), 0xb4);
        // B4 01E3
        gbc.setState(0x51b8, 0x37e3, 0xfaf0, 0x76be, 0x62f5, 0x70c0, 0x0, 0x0);
        gbc.writeMem(0x51b8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x37e3);
        EXPECT(gbc.pc(), 0x51b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01E4
        gbc.setState(0xcfa8, 0x2504, 0x7df0, 0xcc8d, 0xf641, 0x3a7a, 0x1, 0x0);
        gbc.writeMem(0xcfa8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x2504);
        EXPECT(gbc.pc(), 0xcfa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfa8), 0xb4);
        // B4 01E5
        gbc.setState(0xe0c7, 0x4422, 0x9d80, 0xe984, 0x6b40, 0x2f5a, 0x1, 0x0);
        gbc.writeMem(0xe0c7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x4422);
        EXPECT(gbc.pc(), 0xe0c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0c7), 0xb4);
        // B4 01E6
        gbc.setState(0x7f9f, 0x6762, 0xcdc0, 0x2dea, 0x4b97, 0xca38, 0x1, 0x0);
        gbc.writeMem(0x7f9f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x6762);
        EXPECT(gbc.pc(), 0x7fa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01E8
        gbc.setState(0xc16, 0xcecc, 0x6220, 0x55a, 0x1874, 0xd46e, 0x1, 0x0);
        gbc.writeMem(0xc16, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xcecc);
        EXPECT(gbc.pc(), 0xc17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01E9
        gbc.setState(0x366b, 0xdca7, 0x74b0, 0x3b90, 0x1bb7, 0x88a5, 0x0, 0x0);
        gbc.writeMem(0x366b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xdca7);
        EXPECT(gbc.pc(), 0x366c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01EA
        gbc.setState(0x5611, 0xb4d4, 0xe970, 0x2a33, 0x8064, 0x6126, 0x0, 0x1);
        gbc.writeMem(0x5611, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xb4d4);
        EXPECT(gbc.pc(), 0x5612);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01EB
        gbc.setState(0x741c, 0x6c5d, 0x5920, 0x18b6, 0x1669, 0xd6f4, 0x0, 0x0);
        gbc.writeMem(0x741c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x6c5d);
        EXPECT(gbc.pc(), 0x741d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01EC
        gbc.setState(0x775d, 0x8996, 0xf950, 0xb8a8, 0x3413, 0x8ded, 0x1, 0x1);
        gbc.writeMem(0x775d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x8996);
        EXPECT(gbc.pc(), 0x775e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01ED
        gbc.setState(0x194b, 0x57bb, 0xbdf0, 0xde92, 0x2896, 0xd4ef, 0x1, 0x1);
        gbc.writeMem(0x194b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x57bb);
        EXPECT(gbc.pc(), 0x194c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01EE
        gbc.setState(0x4bc5, 0x3fc0, 0x3f60, 0x2b46, 0x862f, 0x22f7, 0x1, 0x1);
        gbc.writeMem(0x4bc5, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x3fc0);
        EXPECT(gbc.pc(), 0x4bc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01EF
        gbc.setState(0x3371, 0xbfc, 0xd4d0, 0x6ab6, 0x54c3, 0xf0eb, 0x1, 0x0);
        gbc.writeMem(0x3371, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xbfc);
        EXPECT(gbc.pc(), 0x3372);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01F0
        gbc.setState(0x37d7, 0x247a, 0xe7d0, 0xdef7, 0x8d78, 0xcafa, 0x1, 0x0);
        gbc.writeMem(0x37d7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x247a);
        EXPECT(gbc.pc(), 0x37d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01F1
        gbc.setState(0x385a, 0xd461, 0xa060, 0x9058, 0x4c0e, 0x87fd, 0x0, 0x1);
        gbc.writeMem(0x385a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xd461);
        EXPECT(gbc.pc(), 0x385b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01F2
        gbc.setState(0x68b4, 0x7d11, 0xc7d0, 0x1da5, 0x6995, 0xcd95, 0x1, 0x0);
        gbc.writeMem(0x68b4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x7d11);
        EXPECT(gbc.pc(), 0x68b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01F3
        gbc.setState(0x3252, 0xee80, 0x82e0, 0x6c29, 0x680e, 0x286, 0x1, 0x0);
        gbc.writeMem(0x3252, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xee80);
        EXPECT(gbc.pc(), 0x3253);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01F4
        gbc.setState(0x4acc, 0x1209, 0x1ea0, 0x4570, 0x3e9c, 0xafbf, 0x1, 0x0);
        gbc.writeMem(0x4acc, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x1209);
        EXPECT(gbc.pc(), 0x4acd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01F5
        gbc.setState(0xd26d, 0xfc3e, 0xacc0, 0xc160, 0x1669, 0x8983, 0x1, 0x0);
        gbc.writeMem(0xd26d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xfc3e);
        EXPECT(gbc.pc(), 0xd26e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd26d), 0xb4);
        // B4 01F6
        gbc.setState(0x1ee8, 0xe2a, 0x88d0, 0x7d8f, 0x3c9b, 0xeb43, 0x0, 0x1);
        gbc.writeMem(0x1ee8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xe2a);
        EXPECT(gbc.pc(), 0x1ee9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01F7
        gbc.setState(0x7e53, 0xf308, 0x3510, 0xdfa3, 0x308f, 0x72dc, 0x0, 0x0);
        gbc.writeMem(0x7e53, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xf308);
        EXPECT(gbc.pc(), 0x7e54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01F8
        gbc.setState(0x369, 0xe48b, 0xb350, 0xa81c, 0xc1db, 0xcc5a, 0x1, 0x0);
        gbc.writeMem(0x369, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xe48b);
        EXPECT(gbc.pc(), 0x36a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01F9
        gbc.setState(0x76f9, 0xfabe, 0x8a30, 0x70a7, 0x1f1e, 0x1770, 0x1, 0x1);
        gbc.writeMem(0x76f9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xfabe);
        EXPECT(gbc.pc(), 0x76fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01FA
        gbc.setState(0xdd99, 0x9d5f, 0xfd00, 0xa571, 0x8c29, 0xd8bb, 0x1, 0x1);
        gbc.writeMem(0xdd99, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x9d5f);
        EXPECT(gbc.pc(), 0xdd9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd99), 0xb4);
        // B4 01FB
        gbc.setState(0xe1c1, 0xe570, 0x35d0, 0x8f4f, 0x7947, 0xade5, 0x1, 0x1);
        gbc.writeMem(0xe1c1, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xe570);
        EXPECT(gbc.pc(), 0xe1c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1c1), 0xb4);
        // B4 01FC
        gbc.setState(0x3e3f, 0xc9b6, 0xd3f0, 0xf9d9, 0x37fd, 0xedda, 0x0, 0x1);
        gbc.writeMem(0x3e3f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc9b6);
        EXPECT(gbc.pc(), 0x3e40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01FD
        gbc.setState(0x3e12, 0x64f9, 0x2af0, 0x878, 0xe1e4, 0x5bb4, 0x0, 0x0);
        gbc.writeMem(0x3e12, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x64f9);
        EXPECT(gbc.pc(), 0x3e13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 01FE
        gbc.setState(0x92ad, 0x2b84, 0xade0, 0x3cfe, 0x18c2, 0xedd3, 0x0, 0x0);
        gbc.writeMem(0x92ad, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x2b84);
        EXPECT(gbc.pc(), 0x92ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92ad), 0xb4);
        // B4 01FF
        gbc.setState(0x62e3, 0x8ba5, 0xc5c0, 0xaca3, 0x26c8, 0xf756, 0x0, 0x1);
        gbc.writeMem(0x62e3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8ba5);
        EXPECT(gbc.pc(), 0x62e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0200
        gbc.setState(0x8674, 0x4571, 0x2ff0, 0x9b3e, 0xbc14, 0xba3a, 0x1, 0x1);
        gbc.writeMem(0x8674, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x4571);
        EXPECT(gbc.pc(), 0x8675);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8674), 0xb4);
        // B4 0201
        gbc.setState(0xd70b, 0xa206, 0x8010, 0x336, 0x676a, 0xed85, 0x1, 0x1);
        gbc.writeMem(0xd70b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xa206);
        EXPECT(gbc.pc(), 0xd70c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd70b), 0xb4);
        // B4 0203
        gbc.setState(0x2192, 0xdfca, 0xbe10, 0x231c, 0x5f82, 0xb72e, 0x0, 0x0);
        gbc.writeMem(0x2192, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xdfca);
        EXPECT(gbc.pc(), 0x2193);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0204
        gbc.setState(0x26e3, 0x2041, 0x9100, 0x8034, 0xca7f, 0xb785, 0x0, 0x1);
        gbc.writeMem(0x26e3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x2041);
        EXPECT(gbc.pc(), 0x26e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0205
        gbc.setState(0xd2f6, 0x4cbd, 0x7c20, 0x495d, 0x455f, 0xab84, 0x1, 0x1);
        gbc.writeMem(0xd2f6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x4cbd);
        EXPECT(gbc.pc(), 0xd2f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2f6), 0xb4);
        // B4 0206
        gbc.setState(0xee23, 0x4c0, 0x8110, 0xe8b3, 0x595c, 0x6e6, 0x0, 0x0);
        gbc.writeMem(0xee23, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x4c0);
        EXPECT(gbc.pc(), 0xee24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee23), 0xb4);
        // B4 0207
        gbc.setState(0x5a91, 0x32b4, 0xfe20, 0xe4a7, 0xc83e, 0x1bd5, 0x1, 0x0);
        gbc.writeMem(0x5a91, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x32b4);
        EXPECT(gbc.pc(), 0x5a92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0208
        gbc.setState(0xa8f1, 0x65c6, 0xab0, 0x4a4f, 0x4375, 0xfceb, 0x1, 0x1);
        gbc.writeMem(0xa8f1, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x65c6);
        EXPECT(gbc.pc(), 0xa8f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8f1), 0xb4);
        // B4 0209
        gbc.setState(0x4b6f, 0x275c, 0xd390, 0xee68, 0x297f, 0x15fe, 0x1, 0x1);
        gbc.writeMem(0x4b6f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x275c);
        EXPECT(gbc.pc(), 0x4b70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 020A
        gbc.setState(0x54c4, 0x216d, 0x1840, 0x2688, 0x1685, 0xfc34, 0x1, 0x1);
        gbc.writeMem(0x54c4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x216d);
        EXPECT(gbc.pc(), 0x54c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 020B
        gbc.setState(0x5673, 0xc312, 0xcae0, 0x5c91, 0x48b0, 0xe52a, 0x1, 0x1);
        gbc.writeMem(0x5673, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xc312);
        EXPECT(gbc.pc(), 0x5674);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 020C
        gbc.setState(0x9a1, 0xb6f6, 0xa940, 0x4bd9, 0xd74a, 0xab44, 0x0, 0x1);
        gbc.writeMem(0x9a1, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xb6f6);
        EXPECT(gbc.pc(), 0x9a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 020D
        gbc.setState(0x1d91, 0x1b69, 0x46e0, 0x2f1b, 0x5d43, 0x22ad, 0x0, 0x1);
        gbc.writeMem(0x1d91, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1b69);
        EXPECT(gbc.pc(), 0x1d92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 020E
        gbc.setState(0x95f9, 0xc144, 0x6c30, 0x13b0, 0x3735, 0x52d5, 0x0, 0x1);
        gbc.writeMem(0x95f9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xc144);
        EXPECT(gbc.pc(), 0x95fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95f9), 0xb4);
        // B4 020F
        gbc.setState(0x4c5c, 0x57e4, 0x8270, 0xcc20, 0x941d, 0x59c1, 0x1, 0x1);
        gbc.writeMem(0x4c5c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x57e4);
        EXPECT(gbc.pc(), 0x4c5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0210
        gbc.setState(0xae2e, 0x8c5a, 0x5c30, 0x561b, 0x3bbc, 0xd37e, 0x1, 0x0);
        gbc.writeMem(0xae2e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x8c5a);
        EXPECT(gbc.pc(), 0xae2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae2e), 0xb4);
        // B4 0211
        gbc.setState(0x72d, 0x5a58, 0xbd00, 0xcad9, 0xb0f0, 0x1e68, 0x0, 0x1);
        gbc.writeMem(0x72d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x5a58);
        EXPECT(gbc.pc(), 0x72e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0212
        gbc.setState(0x68c2, 0x43c3, 0x2dc0, 0x9eb5, 0x6701, 0x3a88, 0x0, 0x0);
        gbc.writeMem(0x68c2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x43c3);
        EXPECT(gbc.pc(), 0x68c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0213
        gbc.setState(0xa548, 0xab07, 0x33c0, 0x7c7, 0x1c29, 0xc8df, 0x1, 0x1);
        gbc.writeMem(0xa548, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xab07);
        EXPECT(gbc.pc(), 0xa549);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa548), 0xb4);
        // B4 0214
        gbc.setState(0xb777, 0x114, 0x54a0, 0xc8b2, 0x485e, 0xb239, 0x0, 0x0);
        gbc.writeMem(0xb777, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x114);
        EXPECT(gbc.pc(), 0xb778);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb777), 0xb4);
        // B4 0215
        gbc.setState(0x443, 0x54c1, 0x5540, 0x2267, 0x7ec9, 0x419b, 0x0, 0x1);
        gbc.writeMem(0x443, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x54c1);
        EXPECT(gbc.pc(), 0x444);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0216
        gbc.setState(0xa45c, 0x2730, 0xa7c0, 0xa5ab, 0xc69, 0x89d, 0x0, 0x0);
        gbc.writeMem(0xa45c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x2730);
        EXPECT(gbc.pc(), 0xa45d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa45c), 0xb4);
        // B4 0217
        gbc.setState(0xde85, 0x875b, 0x3b40, 0x1e2d, 0x3b3b, 0xf8b6, 0x1, 0x0);
        gbc.writeMem(0xde85, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x875b);
        EXPECT(gbc.pc(), 0xde86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde85), 0xb4);
        // B4 0218
        gbc.setState(0x64fb, 0xdba0, 0x2780, 0x828c, 0xfa61, 0x7de8, 0x0, 0x1);
        gbc.writeMem(0x64fb, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xdba0);
        EXPECT(gbc.pc(), 0x64fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0219
        gbc.setState(0x7828, 0x1bc9, 0xe50, 0x8e30, 0xa242, 0xb483, 0x1, 0x1);
        gbc.writeMem(0x7828, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x1bc9);
        EXPECT(gbc.pc(), 0x7829);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 021A
        gbc.setState(0xc553, 0x587d, 0x1570, 0xc3ba, 0xee90, 0xed04, 0x0, 0x1);
        gbc.writeMem(0xc553, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x587d);
        EXPECT(gbc.pc(), 0xc554);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc553), 0xb4);
        // B4 021B
        gbc.setState(0x4fb4, 0x28ab, 0x9b0, 0x8fad, 0x61b9, 0xf96f, 0x0, 0x0);
        gbc.writeMem(0x4fb4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x28ab);
        EXPECT(gbc.pc(), 0x4fb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 021C
        gbc.setState(0xeea7, 0xce9c, 0xc690, 0xb1bb, 0xe6d4, 0x5c6e, 0x0, 0x0);
        gbc.writeMem(0xeea7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xce9c);
        EXPECT(gbc.pc(), 0xeea8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeea7), 0xb4);
        // B4 021E
        gbc.setState(0xd0af, 0x29f1, 0x19e0, 0xad9a, 0xdeca, 0x74f4, 0x0, 0x1);
        gbc.writeMem(0xd0af, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x29f1);
        EXPECT(gbc.pc(), 0xd0b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0af), 0xb4);
        // B4 021F
        gbc.setState(0x75c8, 0xb2b0, 0x3de0, 0x7b8e, 0xdb78, 0x25a0, 0x0, 0x0);
        gbc.writeMem(0x75c8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb2b0);
        EXPECT(gbc.pc(), 0x75c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0220
        gbc.setState(0x68a3, 0x31ef, 0x6380, 0x1fa2, 0xbb67, 0x971d, 0x0, 0x1);
        gbc.writeMem(0x68a3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x31ef);
        EXPECT(gbc.pc(), 0x68a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0221
        gbc.setState(0x1d8, 0xb69c, 0xc330, 0xb14f, 0x65dc, 0x5a63, 0x0, 0x0);
        gbc.writeMem(0x1d8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xb69c);
        EXPECT(gbc.pc(), 0x1d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0222
        gbc.setState(0x5a20, 0x2d84, 0x69b0, 0x5eac, 0x54a5, 0x2f61, 0x0, 0x0);
        gbc.writeMem(0x5a20, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x2d84);
        EXPECT(gbc.pc(), 0x5a21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0223
        gbc.setState(0xb6da, 0xc7d2, 0x9b30, 0x8dde, 0x20a8, 0x2e34, 0x0, 0x1);
        gbc.writeMem(0xb6da, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc7d2);
        EXPECT(gbc.pc(), 0xb6db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6da), 0xb4);
        // B4 0224
        gbc.setState(0x7ce7, 0xb945, 0x170, 0x8604, 0x5c5, 0x6e0f, 0x1, 0x0);
        gbc.writeMem(0x7ce7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xb945);
        EXPECT(gbc.pc(), 0x7ce8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0225
        gbc.setState(0xcbbe, 0x6632, 0xe7f0, 0x4d22, 0x99d5, 0x50a9, 0x1, 0x0);
        gbc.writeMem(0xcbbe, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x6632);
        EXPECT(gbc.pc(), 0xcbbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbbe), 0xb4);
        // B4 0226
        gbc.setState(0xeb37, 0xa97f, 0xe640, 0xe28f, 0xea6a, 0x90db, 0x1, 0x0);
        gbc.writeMem(0xeb37, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xa97f);
        EXPECT(gbc.pc(), 0xeb38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb37), 0xb4);
        // B4 0227
        gbc.setState(0x4430, 0x5851, 0xed80, 0x9993, 0x5443, 0x68c3, 0x1, 0x1);
        gbc.writeMem(0x4430, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x5851);
        EXPECT(gbc.pc(), 0x4431);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0228
        gbc.setState(0xbc19, 0x262f, 0x4080, 0x2859, 0xc335, 0x8f45, 0x1, 0x0);
        gbc.writeMem(0xbc19, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x262f);
        EXPECT(gbc.pc(), 0xbc1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc19), 0xb4);
        // B4 0229
        gbc.setState(0x6f4b, 0x6adc, 0x1260, 0x6ec8, 0x6b8, 0x5f81, 0x0, 0x1);
        gbc.writeMem(0x6f4b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x6adc);
        EXPECT(gbc.pc(), 0x6f4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 022A
        gbc.setState(0xd119, 0x4e3f, 0x1ea0, 0xff03, 0x4101, 0x6e65, 0x1, 0x1);
        gbc.writeMem(0xd119, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x4e3f);
        EXPECT(gbc.pc(), 0xd11a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd119), 0xb4);
        // B4 022B
        gbc.setState(0xdf22, 0x26c0, 0xa760, 0x9d00, 0xf394, 0x9014, 0x0, 0x1);
        gbc.writeMem(0xdf22, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x26c0);
        EXPECT(gbc.pc(), 0xdf23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf22), 0xb4);
        // B4 022C
        gbc.setState(0x9f71, 0x5995, 0x95c0, 0x6d14, 0x52db, 0x12e, 0x0, 0x1);
        gbc.writeMem(0x9f71, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x5995);
        EXPECT(gbc.pc(), 0x9f72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f71), 0xb4);
        // B4 022D
        gbc.setState(0xb35, 0xcc81, 0xe450, 0x77c7, 0x80ff, 0xbef, 0x1, 0x0);
        gbc.writeMem(0xb35, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xcc81);
        EXPECT(gbc.pc(), 0xb36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 022E
        gbc.setState(0x822c, 0x5466, 0xb790, 0xd5b2, 0x8dba, 0x77e3, 0x0, 0x0);
        gbc.writeMem(0x822c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x5466);
        EXPECT(gbc.pc(), 0x822d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x822c), 0xb4);
        // B4 022F
        gbc.setState(0x283a, 0x8652, 0x8e0, 0x2080, 0xef5c, 0xf857, 0x1, 0x1);
        gbc.writeMem(0x283a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8652);
        EXPECT(gbc.pc(), 0x283b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0230
        gbc.setState(0xb230, 0x5ca7, 0x8210, 0x16d9, 0x324b, 0x40cd, 0x0, 0x0);
        gbc.writeMem(0xb230, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x5ca7);
        EXPECT(gbc.pc(), 0xb231);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb230), 0xb4);
        // B4 0231
        gbc.setState(0xcf1b, 0xb64d, 0x14e0, 0x741c, 0x5566, 0xc37e, 0x0, 0x1);
        gbc.writeMem(0xcf1b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xb64d);
        EXPECT(gbc.pc(), 0xcf1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf1b), 0xb4);
        // B4 0232
        gbc.setState(0x8684, 0xfaf5, 0x4160, 0xf8c, 0xc5af, 0x3aa2, 0x0, 0x1);
        gbc.writeMem(0x8684, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xfaf5);
        EXPECT(gbc.pc(), 0x8685);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8684), 0xb4);
        // B4 0233
        gbc.setState(0x8576, 0xa2b6, 0xcd70, 0xeb59, 0x37d2, 0xea12, 0x1, 0x1);
        gbc.writeMem(0x8576, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xa2b6);
        EXPECT(gbc.pc(), 0x8577);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8576), 0xb4);
        // B4 0234
        gbc.setState(0x9d3, 0xf964, 0xbe50, 0x52d0, 0xd928, 0x3e78, 0x1, 0x0);
        gbc.writeMem(0x9d3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xf964);
        EXPECT(gbc.pc(), 0x9d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0236
        gbc.setState(0x3c4e, 0xc67a, 0x1140, 0xf759, 0xfb7a, 0xc41, 0x0, 0x1);
        gbc.writeMem(0x3c4e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xc67a);
        EXPECT(gbc.pc(), 0x3c4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0239
        gbc.setState(0xa9e6, 0x71d7, 0x20f0, 0x7241, 0xec8d, 0x1c7d, 0x0, 0x0);
        gbc.writeMem(0xa9e6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x71d7);
        EXPECT(gbc.pc(), 0xa9e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9e6), 0xb4);
        // B4 023A
        gbc.setState(0xc20b, 0xf49d, 0x1700, 0x2240, 0xa031, 0xadd4, 0x0, 0x0);
        gbc.writeMem(0xc20b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf49d);
        EXPECT(gbc.pc(), 0xc20c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc20b), 0xb4);
        // B4 023B
        gbc.setState(0xcad0, 0xf446, 0x7aa0, 0x41d4, 0xfa06, 0x6da5, 0x1, 0x0);
        gbc.writeMem(0xcad0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xf446);
        EXPECT(gbc.pc(), 0xcad1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcad0), 0xb4);
        // B4 023C
        gbc.setState(0xa32a, 0xd072, 0x3500, 0x305a, 0x12a5, 0xddd0, 0x1, 0x1);
        gbc.writeMem(0xa32a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xd072);
        EXPECT(gbc.pc(), 0xa32b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa32a), 0xb4);
        // B4 023D
        gbc.setState(0xef8b, 0xadfa, 0x72e0, 0x2568, 0x156e, 0x79fb, 0x0, 0x0);
        gbc.writeMem(0xef8b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xadfa);
        EXPECT(gbc.pc(), 0xef8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef8b), 0xb4);
        // B4 023E
        gbc.setState(0xe8d1, 0xa5a5, 0x9b90, 0x4712, 0xc68b, 0x4feb, 0x1, 0x1);
        gbc.writeMem(0xe8d1, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xa5a5);
        EXPECT(gbc.pc(), 0xe8d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8d1), 0xb4);
        // B4 023F
        gbc.setState(0x608f, 0x24c4, 0x5340, 0x33fd, 0x7fb7, 0x591b, 0x1, 0x0);
        gbc.writeMem(0x608f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x24c4);
        EXPECT(gbc.pc(), 0x6090);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0240
        gbc.setState(0xa30b, 0x1504, 0xce10, 0x4c4e, 0x81aa, 0x37e, 0x1, 0x1);
        gbc.writeMem(0xa30b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x1504);
        EXPECT(gbc.pc(), 0xa30c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa30b), 0xb4);
        // B4 0241
        gbc.setState(0xd42f, 0x6c37, 0x7f10, 0xd06a, 0x23b4, 0xbab6, 0x0, 0x0);
        gbc.writeMem(0xd42f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x6c37);
        EXPECT(gbc.pc(), 0xd430);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd42f), 0xb4);
        // B4 0242
        gbc.setState(0xe788, 0x8de2, 0xe4c0, 0xe56b, 0xc44d, 0x74a3, 0x1, 0x1);
        gbc.writeMem(0xe788, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x8de2);
        EXPECT(gbc.pc(), 0xe789);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe788), 0xb4);
        // B4 0243
        gbc.setState(0xe56a, 0xe260, 0x9bc0, 0xa23, 0xe9f8, 0xb4cf, 0x1, 0x0);
        gbc.writeMem(0xe56a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xe260);
        EXPECT(gbc.pc(), 0xe56b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe56a), 0xb4);
        // B4 0244
        gbc.setState(0x227d, 0x4c3b, 0xc570, 0x5def, 0xcc4a, 0x5bae, 0x1, 0x1);
        gbc.writeMem(0x227d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x4c3b);
        EXPECT(gbc.pc(), 0x227e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0245
        gbc.setState(0x1004, 0xcc00, 0x4700, 0x8126, 0x3a95, 0x4dab, 0x0, 0x0);
        gbc.writeMem(0x1004, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xcc00);
        EXPECT(gbc.pc(), 0x1005);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0248
        gbc.setState(0xa20c, 0xbe39, 0x780, 0x54f, 0xe8ac, 0xab2c, 0x0, 0x0);
        gbc.writeMem(0xa20c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xbe39);
        EXPECT(gbc.pc(), 0xa20d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa20c), 0xb4);
        // B4 0249
        gbc.setState(0x33c0, 0x462f, 0x6740, 0x7e17, 0x4cbe, 0x5836, 0x0, 0x1);
        gbc.writeMem(0x33c0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x462f);
        EXPECT(gbc.pc(), 0x33c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 024A
        gbc.setState(0x91d8, 0x1feb, 0x27d0, 0x3dc8, 0x5ff1, 0xb90, 0x1, 0x1);
        gbc.writeMem(0x91d8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x1feb);
        EXPECT(gbc.pc(), 0x91d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91d8), 0xb4);
        // B4 024B
        gbc.setState(0x37ed, 0x86a9, 0xbfb0, 0xbc27, 0x7ae, 0x3d4d, 0x1, 0x1);
        gbc.writeMem(0x37ed, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x86a9);
        EXPECT(gbc.pc(), 0x37ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 024C
        gbc.setState(0x408e, 0xbfce, 0xc510, 0xcaa2, 0xa8e5, 0x598, 0x1, 0x0);
        gbc.writeMem(0x408e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xbfce);
        EXPECT(gbc.pc(), 0x408f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 024D
        gbc.setState(0xd9e3, 0x9e74, 0x8ce0, 0x3712, 0x5429, 0x4829, 0x0, 0x1);
        gbc.writeMem(0xd9e3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x9e74);
        EXPECT(gbc.pc(), 0xd9e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9e3), 0xb4);
        // B4 024E
        gbc.setState(0x8cda, 0x3ed4, 0x9540, 0xbeae, 0x64ad, 0xd5f8, 0x0, 0x0);
        gbc.writeMem(0x8cda, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x3ed4);
        EXPECT(gbc.pc(), 0x8cdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cda), 0xb4);
        // B4 024F
        gbc.setState(0xb9d9, 0x9191, 0xdc20, 0xc4f8, 0x739f, 0x96ea, 0x1, 0x0);
        gbc.writeMem(0xb9d9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x9191);
        EXPECT(gbc.pc(), 0xb9da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9d9), 0xb4);
        // B4 0250
        gbc.setState(0x3b33, 0xf799, 0xf7a0, 0xc1f0, 0x4354, 0x214c, 0x1, 0x1);
        gbc.writeMem(0x3b33, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xf799);
        EXPECT(gbc.pc(), 0x3b34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0251
        gbc.setState(0xe62b, 0x1aa3, 0x95f0, 0x819a, 0xd7e6, 0x4ae1, 0x1, 0x1);
        gbc.writeMem(0xe62b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x1aa3);
        EXPECT(gbc.pc(), 0xe62c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe62b), 0xb4);
        // B4 0252
        gbc.setState(0xc87a, 0x447, 0x1730, 0xdc10, 0x52b6, 0x44b5, 0x1, 0x1);
        gbc.writeMem(0xc87a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x447);
        EXPECT(gbc.pc(), 0xc87b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc87a), 0xb4);
        // B4 0253
        gbc.setState(0x8c06, 0xfd35, 0x3480, 0x537e, 0x5973, 0xc994, 0x1, 0x1);
        gbc.writeMem(0x8c06, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xfd35);
        EXPECT(gbc.pc(), 0x8c07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c06), 0xb4);
        // B4 0254
        gbc.setState(0xe04c, 0xbdf6, 0x5cd0, 0xcd6d, 0xee81, 0x335c, 0x1, 0x0);
        gbc.writeMem(0xe04c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xbdf6);
        EXPECT(gbc.pc(), 0xe04d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe04c), 0xb4);
        // B4 0255
        gbc.setState(0xcad6, 0x6f50, 0xcad0, 0x865b, 0x4c8c, 0x23be, 0x0, 0x0);
        gbc.writeMem(0xcad6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x6f50);
        EXPECT(gbc.pc(), 0xcad7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcad6), 0xb4);
        // B4 0256
        gbc.setState(0x3213, 0x5b47, 0xa510, 0x8b24, 0x28f6, 0xf42a, 0x0, 0x1);
        gbc.writeMem(0x3213, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x5b47);
        EXPECT(gbc.pc(), 0x3214);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0257
        gbc.setState(0x85e1, 0x31f5, 0x78b0, 0x1469, 0x3635, 0x7f75, 0x1, 0x1);
        gbc.writeMem(0x85e1, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x31f5);
        EXPECT(gbc.pc(), 0x85e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85e1), 0xb4);
        // B4 0258
        gbc.setState(0x3a23, 0x1c80, 0x5b00, 0x48b5, 0x4399, 0xe2e9, 0x0, 0x1);
        gbc.writeMem(0x3a23, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x1c80);
        EXPECT(gbc.pc(), 0x3a24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0259
        gbc.setState(0x7d07, 0xd545, 0x6a20, 0x1959, 0xa149, 0xd809, 0x0, 0x0);
        gbc.writeMem(0x7d07, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xd545);
        EXPECT(gbc.pc(), 0x7d08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 025A
        gbc.setState(0xe77e, 0x4c3d, 0x1470, 0x949a, 0x4e88, 0x1430, 0x0, 0x1);
        gbc.writeMem(0xe77e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x4c3d);
        EXPECT(gbc.pc(), 0xe77f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe77e), 0xb4);
        // B4 025B
        gbc.setState(0x1f24, 0x9302, 0xc1f0, 0xd6b4, 0x250b, 0xa943, 0x1, 0x0);
        gbc.writeMem(0x1f24, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9302);
        EXPECT(gbc.pc(), 0x1f25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 025C
        gbc.setState(0xe1f4, 0xb68, 0xeb0, 0x375a, 0x2008, 0xbd4a, 0x0, 0x1);
        gbc.writeMem(0xe1f4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xb68);
        EXPECT(gbc.pc(), 0xe1f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1f4), 0xb4);
        // B4 025D
        gbc.setState(0x17e7, 0x6b46, 0xd550, 0x664e, 0xd645, 0xcca0, 0x1, 0x0);
        gbc.writeMem(0x17e7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x6b46);
        EXPECT(gbc.pc(), 0x17e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 025E
        gbc.setState(0xb1e9, 0x9fd7, 0xd3c0, 0xafe9, 0xd27a, 0x829, 0x1, 0x1);
        gbc.writeMem(0xb1e9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x9fd7);
        EXPECT(gbc.pc(), 0xb1ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1e9), 0xb4);
        // B4 025F
        gbc.setState(0x2ce, 0x70e, 0xa810, 0xdfd2, 0x1fb7, 0x959f, 0x0, 0x0);
        gbc.writeMem(0x2ce, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x70e);
        EXPECT(gbc.pc(), 0x2cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0260
        gbc.setState(0xc882, 0x9e84, 0xd430, 0xc7f1, 0xbc46, 0x1e23, 0x0, 0x1);
        gbc.writeMem(0xc882, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x9e84);
        EXPECT(gbc.pc(), 0xc883);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc882), 0xb4);
        // B4 0261
        gbc.setState(0x99fe, 0xba50, 0xdcf0, 0x322, 0xe16a, 0x6dcf, 0x0, 0x1);
        gbc.writeMem(0x99fe, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xba50);
        EXPECT(gbc.pc(), 0x99ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99fe), 0xb4);
        // B4 0262
        gbc.setState(0x5633, 0x1710, 0x870, 0xd4f6, 0xfa33, 0x6418, 0x0, 0x0);
        gbc.writeMem(0x5633, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x1710);
        EXPECT(gbc.pc(), 0x5634);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0263
        gbc.setState(0x5e34, 0x6ee2, 0x8370, 0x9873, 0x64c3, 0x8086, 0x0, 0x0);
        gbc.writeMem(0x5e34, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x6ee2);
        EXPECT(gbc.pc(), 0x5e35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0264
        gbc.setState(0x6f21, 0xebfc, 0x7cb0, 0x39a0, 0x91cc, 0x4742, 0x1, 0x0);
        gbc.writeMem(0x6f21, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xebfc);
        EXPECT(gbc.pc(), 0x6f22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0265
        gbc.setState(0x5954, 0x5905, 0xb100, 0xd5f, 0xf71, 0xb89, 0x0, 0x1);
        gbc.writeMem(0x5954, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x5905);
        EXPECT(gbc.pc(), 0x5955);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0266
        gbc.setState(0x2e88, 0x833e, 0x65c0, 0x7a2e, 0xa4b8, 0x1494, 0x0, 0x0);
        gbc.writeMem(0x2e88, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x833e);
        EXPECT(gbc.pc(), 0x2e89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0267
        gbc.setState(0xae60, 0x568c, 0x9de0, 0x74a6, 0xd73, 0xd42f, 0x1, 0x0);
        gbc.writeMem(0xae60, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x568c);
        EXPECT(gbc.pc(), 0xae61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae60), 0xb4);
        // B4 0268
        gbc.setState(0xa1d7, 0x550e, 0x550, 0xb06f, 0x7d42, 0xca03, 0x0, 0x1);
        gbc.writeMem(0xa1d7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x550e);
        EXPECT(gbc.pc(), 0xa1d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1d7), 0xb4);
        // B4 0269
        gbc.setState(0x6085, 0x3aa8, 0x9180, 0x2a6d, 0x57aa, 0xc559, 0x0, 0x1);
        gbc.writeMem(0x6085, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x3aa8);
        EXPECT(gbc.pc(), 0x6086);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 026A
        gbc.setState(0x1ce3, 0x47ae, 0x5910, 0x5f08, 0x80f0, 0xfb21, 0x0, 0x1);
        gbc.writeMem(0x1ce3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x47ae);
        EXPECT(gbc.pc(), 0x1ce4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 026B
        gbc.setState(0xd8bb, 0xedaf, 0xf90, 0x3e2b, 0x13dd, 0x357, 0x0, 0x1);
        gbc.writeMem(0xd8bb, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xedaf);
        EXPECT(gbc.pc(), 0xd8bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8bb), 0xb4);
        // B4 026C
        gbc.setState(0xa82f, 0x1875, 0x6eb0, 0x48e3, 0xa14e, 0x4e65, 0x0, 0x0);
        gbc.writeMem(0xa82f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x1875);
        EXPECT(gbc.pc(), 0xa830);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa82f), 0xb4);
        // B4 026D
        gbc.setState(0xbd7f, 0x5af5, 0x7670, 0x737c, 0x902f, 0xe951, 0x1, 0x0);
        gbc.writeMem(0xbd7f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x5af5);
        EXPECT(gbc.pc(), 0xbd80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd7f), 0xb4);
        // B4 026E
        gbc.setState(0xd069, 0x5ebf, 0xc350, 0xccf, 0x8e1c, 0xbbf1, 0x1, 0x1);
        gbc.writeMem(0xd069, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x5ebf);
        EXPECT(gbc.pc(), 0xd06a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd069), 0xb4);
        // B4 026F
        gbc.setState(0xebb0, 0x1f81, 0xa80, 0xd92a, 0x4d8b, 0xae82, 0x1, 0x1);
        gbc.writeMem(0xebb0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x1f81);
        EXPECT(gbc.pc(), 0xebb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebb0), 0xb4);
        // B4 0270
        gbc.setState(0x7153, 0xe94c, 0xa6f0, 0xa53b, 0xc3e7, 0xe511, 0x0, 0x1);
        gbc.writeMem(0x7153, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xe94c);
        EXPECT(gbc.pc(), 0x7154);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0271
        gbc.setState(0xe15c, 0x20fc, 0x88b0, 0xc332, 0x7543, 0x307f, 0x0, 0x0);
        gbc.writeMem(0xe15c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x20fc);
        EXPECT(gbc.pc(), 0xe15d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe15c), 0xb4);
        // B4 0272
        gbc.setState(0xb0b6, 0x8158, 0x8880, 0x11fb, 0x65e6, 0x71ff, 0x0, 0x1);
        gbc.writeMem(0xb0b6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x8158);
        EXPECT(gbc.pc(), 0xb0b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0b6), 0xb4);
        // B4 0273
        gbc.setState(0xa8be, 0x5db7, 0xf1d0, 0x8ddb, 0x7d7e, 0x6078, 0x0, 0x0);
        gbc.writeMem(0xa8be, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x5db7);
        EXPECT(gbc.pc(), 0xa8bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8be), 0xb4);
        // B4 0274
        gbc.setState(0x9ffe, 0x56a9, 0xc0e0, 0x3f5a, 0xcdf5, 0x736e, 0x0, 0x0);
        gbc.writeMem(0x9ffe, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x56a9);
        EXPECT(gbc.pc(), 0x9fff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ffe), 0xb4);
        // B4 0275
        gbc.setState(0x3c38, 0xaf5e, 0xaf90, 0xb143, 0x47ca, 0x2fb4, 0x1, 0x1);
        gbc.writeMem(0x3c38, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xaf5e);
        EXPECT(gbc.pc(), 0x3c39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0276
        gbc.setState(0x9403, 0xceda, 0x8060, 0xfa3f, 0x12ef, 0x5b0b, 0x0, 0x1);
        gbc.writeMem(0x9403, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xceda);
        EXPECT(gbc.pc(), 0x9404);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9403), 0xb4);
        // B4 0277
        gbc.setState(0x89d9, 0xb088, 0x7080, 0xf46f, 0xceed, 0xbb68, 0x1, 0x1);
        gbc.writeMem(0x89d9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xb088);
        EXPECT(gbc.pc(), 0x89da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89d9), 0xb4);
        // B4 0278
        gbc.setState(0x8e31, 0xfcf5, 0x4980, 0xcc2b, 0x6826, 0x8b70, 0x0, 0x0);
        gbc.writeMem(0x8e31, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xfcf5);
        EXPECT(gbc.pc(), 0x8e32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e31), 0xb4);
        // B4 0279
        gbc.setState(0x6a32, 0x4120, 0x6c20, 0x4a5f, 0xd9a7, 0x2af4, 0x0, 0x1);
        gbc.writeMem(0x6a32, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x4120);
        EXPECT(gbc.pc(), 0x6a33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 027A
        gbc.setState(0x3e41, 0x8f67, 0xb590, 0x9cf5, 0x769a, 0x3116, 0x0, 0x0);
        gbc.writeMem(0x3e41, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x8f67);
        EXPECT(gbc.pc(), 0x3e42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 027B
        gbc.setState(0xa40e, 0xf276, 0x140, 0x8e47, 0x36e6, 0x34f7, 0x1, 0x0);
        gbc.writeMem(0xa40e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xf276);
        EXPECT(gbc.pc(), 0xa40f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa40e), 0xb4);
        // B4 027C
        gbc.setState(0x5683, 0xe27, 0x56a0, 0x98ef, 0x93ce, 0xdfbc, 0x1, 0x1);
        gbc.writeMem(0x5683, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xe27);
        EXPECT(gbc.pc(), 0x5684);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 027D
        gbc.setState(0x39af, 0x4d88, 0x4c80, 0xe622, 0x6904, 0x80cd, 0x0, 0x1);
        gbc.writeMem(0x39af, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4d88);
        EXPECT(gbc.pc(), 0x39b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 027E
        gbc.setState(0x903b, 0x999f, 0xaa00, 0x2dd, 0x4cfe, 0x3ad, 0x1, 0x1);
        gbc.writeMem(0x903b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x999f);
        EXPECT(gbc.pc(), 0x903c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x903b), 0xb4);
        // B4 027F
        gbc.setState(0x6244, 0x5dc7, 0x3190, 0x5107, 0x12fc, 0x704d, 0x0, 0x1);
        gbc.writeMem(0x6244, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x5dc7);
        EXPECT(gbc.pc(), 0x6245);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0280
        gbc.setState(0x6842, 0xe93e, 0x1240, 0xcebf, 0xb3aa, 0x8470, 0x0, 0x1);
        gbc.writeMem(0x6842, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xe93e);
        EXPECT(gbc.pc(), 0x6843);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0281
        gbc.setState(0xeb7b, 0xba0b, 0x15c0, 0x9e17, 0xd581, 0x9e95, 0x0, 0x0);
        gbc.writeMem(0xeb7b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xba0b);
        EXPECT(gbc.pc(), 0xeb7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb7b), 0xb4);
        // B4 0282
        gbc.setState(0x30ac, 0xe56d, 0x9c80, 0x10d7, 0x59dd, 0x56dc, 0x1, 0x0);
        gbc.writeMem(0x30ac, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xe56d);
        EXPECT(gbc.pc(), 0x30ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0283
        gbc.setState(0xa4, 0x2565, 0xff80, 0x4d05, 0x6df6, 0xd56c, 0x0, 0x1);
        gbc.writeMem(0xa4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x2565);
        EXPECT(gbc.pc(), 0xa5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0284
        gbc.setState(0x34af, 0x5531, 0x33e0, 0xd635, 0x97f3, 0x992, 0x0, 0x1);
        gbc.writeMem(0x34af, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x5531);
        EXPECT(gbc.pc(), 0x34b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0285
        gbc.setState(0x98a4, 0xd5cf, 0xefa0, 0x1167, 0xdc64, 0x6139, 0x1, 0x0);
        gbc.writeMem(0x98a4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xd5cf);
        EXPECT(gbc.pc(), 0x98a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98a4), 0xb4);
        // B4 0286
        gbc.setState(0x86a3, 0x5721, 0x5f10, 0xec16, 0xc71e, 0x1e7b, 0x1, 0x0);
        gbc.writeMem(0x86a3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x5721);
        EXPECT(gbc.pc(), 0x86a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86a3), 0xb4);
        // B4 0287
        gbc.setState(0xe041, 0x24a9, 0x45f0, 0x1427, 0x2705, 0xa08f, 0x1, 0x1);
        gbc.writeMem(0xe041, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x24a9);
        EXPECT(gbc.pc(), 0xe042);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe041), 0xb4);
        // B4 0288
        gbc.setState(0x255, 0x1f6d, 0x34d0, 0x64a0, 0x44dd, 0xd8bf, 0x0, 0x0);
        gbc.writeMem(0x255, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x1f6d);
        EXPECT(gbc.pc(), 0x256);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 028A
        gbc.setState(0xad29, 0x74b3, 0x4e20, 0x59b1, 0x3dbc, 0x597c, 0x0, 0x0);
        gbc.writeMem(0xad29, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x74b3);
        EXPECT(gbc.pc(), 0xad2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad29), 0xb4);
        // B4 028B
        gbc.setState(0xef19, 0xe6d1, 0x9510, 0x5f1c, 0x6dad, 0x7642, 0x0, 0x1);
        gbc.writeMem(0xef19, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe6d1);
        EXPECT(gbc.pc(), 0xef1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef19), 0xb4);
        // B4 028C
        gbc.setState(0x3497, 0x870b, 0xd9c0, 0x41c0, 0xbfe8, 0x3177, 0x0, 0x0);
        gbc.writeMem(0x3497, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x870b);
        EXPECT(gbc.pc(), 0x3498);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 028D
        gbc.setState(0xd881, 0x14b3, 0x89a0, 0xae19, 0xa8e8, 0x299a, 0x0, 0x1);
        gbc.writeMem(0xd881, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x14b3);
        EXPECT(gbc.pc(), 0xd882);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd881), 0xb4);
        // B4 028F
        gbc.setState(0x852b, 0xf3df, 0xb000, 0x79db, 0xd7b7, 0xf730, 0x0, 0x0);
        gbc.writeMem(0x852b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xf3df);
        EXPECT(gbc.pc(), 0x852c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x852b), 0xb4);
        // B4 0290
        gbc.setState(0xbfd1, 0x3eab, 0x79a0, 0x5696, 0xb187, 0x1b4, 0x1, 0x0);
        gbc.writeMem(0xbfd1, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x3eab);
        EXPECT(gbc.pc(), 0xbfd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfd1), 0xb4);
        // B4 0291
        gbc.setState(0x8655, 0x4c08, 0xd5f0, 0x275c, 0x72a7, 0xe447, 0x1, 0x1);
        gbc.writeMem(0x8655, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x4c08);
        EXPECT(gbc.pc(), 0x8656);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8655), 0xb4);
        // B4 0292
        gbc.setState(0x9fd1, 0xde70, 0xc9f0, 0xbe2f, 0x8614, 0x923c, 0x1, 0x0);
        gbc.writeMem(0x9fd1, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xde70);
        EXPECT(gbc.pc(), 0x9fd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fd1), 0xb4);
        // B4 0293
        gbc.setState(0xb8d3, 0x3fff, 0x440, 0xff10, 0x18f5, 0xb68e, 0x0, 0x0);
        gbc.writeMem(0xb8d3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x3fff);
        EXPECT(gbc.pc(), 0xb8d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8d3), 0xb4);
        // B4 0294
        gbc.setState(0x30d0, 0x9589, 0xa6b0, 0xe73e, 0xdf52, 0xe603, 0x1, 0x1);
        gbc.writeMem(0x30d0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x9589);
        EXPECT(gbc.pc(), 0x30d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0295
        gbc.setState(0x9167, 0x2d24, 0xe6e0, 0x8332, 0xac40, 0x849d, 0x0, 0x0);
        gbc.writeMem(0x9167, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x2d24);
        EXPECT(gbc.pc(), 0x9168);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9167), 0xb4);
        // B4 0297
        gbc.setState(0x9d15, 0x7ce4, 0x5270, 0x7920, 0x2dba, 0x7019, 0x1, 0x0);
        gbc.writeMem(0x9d15, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x7ce4);
        EXPECT(gbc.pc(), 0x9d16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d15), 0xb4);
        // B4 0298
        gbc.setState(0x223, 0xa4e6, 0x9320, 0x3737, 0x379d, 0x23d2, 0x1, 0x0);
        gbc.writeMem(0x223, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa4e6);
        EXPECT(gbc.pc(), 0x224);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0299
        gbc.setState(0x1525, 0x48f6, 0x1bb0, 0x3f88, 0x7c58, 0x139d, 0x0, 0x1);
        gbc.writeMem(0x1525, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x48f6);
        EXPECT(gbc.pc(), 0x1526);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 029A
        gbc.setState(0xb276, 0x6508, 0x75c0, 0x7027, 0xb261, 0xbdf7, 0x1, 0x1);
        gbc.writeMem(0xb276, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x6508);
        EXPECT(gbc.pc(), 0xb277);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb276), 0xb4);
        // B4 029B
        gbc.setState(0x3f09, 0x529a, 0xaa90, 0xc362, 0xa257, 0x2e5e, 0x1, 0x0);
        gbc.writeMem(0x3f09, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x529a);
        EXPECT(gbc.pc(), 0x3f0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 029C
        gbc.setState(0xeff0, 0x4eb6, 0x7cf0, 0x1f11, 0x198c, 0x36b6, 0x0, 0x1);
        gbc.writeMem(0xeff0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x4eb6);
        EXPECT(gbc.pc(), 0xeff1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeff0), 0xb4);
        // B4 029D
        gbc.setState(0xa289, 0x596d, 0x33c0, 0x847a, 0x1455, 0x3cec, 0x1, 0x1);
        gbc.writeMem(0xa289, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x596d);
        EXPECT(gbc.pc(), 0xa28a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa289), 0xb4);
        // B4 029E
        gbc.setState(0x81bb, 0xe3fa, 0xdb60, 0x5c1b, 0x542e, 0x32e7, 0x0, 0x1);
        gbc.writeMem(0x81bb, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xe3fa);
        EXPECT(gbc.pc(), 0x81bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81bb), 0xb4);
        // B4 029F
        gbc.setState(0xdb01, 0xa240, 0x4e10, 0x9e4d, 0xba0f, 0xa802, 0x0, 0x1);
        gbc.writeMem(0xdb01, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xa240);
        EXPECT(gbc.pc(), 0xdb02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb01), 0xb4);
        // B4 02A0
        gbc.setState(0x22a9, 0x6d2f, 0x1d90, 0xf615, 0xd73c, 0x6bb7, 0x1, 0x0);
        gbc.writeMem(0x22a9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x6d2f);
        EXPECT(gbc.pc(), 0x22aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02A1
        gbc.setState(0xcb9a, 0xaeda, 0xce80, 0x1f80, 0x8502, 0xcd72, 0x0, 0x0);
        gbc.writeMem(0xcb9a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xaeda);
        EXPECT(gbc.pc(), 0xcb9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb9a), 0xb4);
        // B4 02A2
        gbc.setState(0x6fd1, 0xf12c, 0xfcc0, 0xfda7, 0x807d, 0xb039, 0x0, 0x0);
        gbc.writeMem(0x6fd1, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xf12c);
        EXPECT(gbc.pc(), 0x6fd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02A3
        gbc.setState(0xeb3e, 0xdf75, 0xc770, 0xe2fb, 0x83b8, 0xc36c, 0x1, 0x1);
        gbc.writeMem(0xeb3e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xdf75);
        EXPECT(gbc.pc(), 0xeb3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb3e), 0xb4);
        // B4 02A4
        gbc.setState(0xe522, 0xebdc, 0x7610, 0x417d, 0x7c81, 0xd7cb, 0x1, 0x1);
        gbc.writeMem(0xe522, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xebdc);
        EXPECT(gbc.pc(), 0xe523);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe522), 0xb4);
        // B4 02A5
        gbc.setState(0xd5b, 0x8656, 0xc370, 0x1b22, 0x5709, 0xf1e5, 0x0, 0x0);
        gbc.writeMem(0xd5b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x8656);
        EXPECT(gbc.pc(), 0xd5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02A6
        gbc.setState(0x58b2, 0x1166, 0x6fb0, 0x6e43, 0xcc4d, 0x13c2, 0x0, 0x1);
        gbc.writeMem(0x58b2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x1166);
        EXPECT(gbc.pc(), 0x58b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02A7
        gbc.setState(0x3317, 0x466, 0xb660, 0x50bb, 0x3b2a, 0x5688, 0x1, 0x1);
        gbc.writeMem(0x3317, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x466);
        EXPECT(gbc.pc(), 0x3318);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02A8
        gbc.setState(0x83b6, 0x5935, 0xffd0, 0xa4fb, 0x3719, 0x581a, 0x1, 0x0);
        gbc.writeMem(0x83b6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x5935);
        EXPECT(gbc.pc(), 0x83b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83b6), 0xb4);
        // B4 02A9
        gbc.setState(0x37f8, 0x3ec3, 0x4860, 0x8c25, 0xc5f3, 0xc284, 0x0, 0x0);
        gbc.writeMem(0x37f8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x3ec3);
        EXPECT(gbc.pc(), 0x37f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02AA
        gbc.setState(0x408c, 0x3b5b, 0xabf0, 0x3c5f, 0xff76, 0x24f0, 0x0, 0x0);
        gbc.writeMem(0x408c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x3b5b);
        EXPECT(gbc.pc(), 0x408d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02AB
        gbc.setState(0x41c5, 0xc3b0, 0xd570, 0x906e, 0x1bc8, 0xf16, 0x0, 0x0);
        gbc.writeMem(0x41c5, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xc3b0);
        EXPECT(gbc.pc(), 0x41c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02AD
        gbc.setState(0xd700, 0xec3b, 0xa530, 0xa0aa, 0xa0e4, 0xbb16, 0x1, 0x1);
        gbc.writeMem(0xd700, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xec3b);
        EXPECT(gbc.pc(), 0xd701);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd700), 0xb4);
        // B4 02AE
        gbc.setState(0xd0eb, 0x2c56, 0xa420, 0xfbaf, 0x1474, 0xa9bb, 0x0, 0x1);
        gbc.writeMem(0xd0eb, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x2c56);
        EXPECT(gbc.pc(), 0xd0ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0eb), 0xb4);
        // B4 02AF
        gbc.setState(0xaa7e, 0x4632, 0x9080, 0x1ef8, 0xf91b, 0xd857, 0x0, 0x1);
        gbc.writeMem(0xaa7e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x4632);
        EXPECT(gbc.pc(), 0xaa7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa7e), 0xb4);
        // B4 02B0
        gbc.setState(0xc38, 0x8634, 0xb440, 0x72e5, 0x57eb, 0xad7e, 0x1, 0x0);
        gbc.writeMem(0xc38, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x8634);
        EXPECT(gbc.pc(), 0xc39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02B1
        gbc.setState(0xadb6, 0x7ff, 0x45d0, 0x4e43, 0x1ad, 0xace3, 0x0, 0x0);
        gbc.writeMem(0xadb6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x7ff);
        EXPECT(gbc.pc(), 0xadb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadb6), 0xb4);
        // B4 02B2
        gbc.setState(0x916d, 0xa3e1, 0xae50, 0xa75a, 0x5d24, 0xf146, 0x1, 0x1);
        gbc.writeMem(0x916d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xa3e1);
        EXPECT(gbc.pc(), 0x916e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x916d), 0xb4);
        // B4 02B3
        gbc.setState(0xbf01, 0x5446, 0x5f10, 0x7ccb, 0x9134, 0xaf85, 0x0, 0x1);
        gbc.writeMem(0xbf01, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x5446);
        EXPECT(gbc.pc(), 0xbf02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf01), 0xb4);
        // B4 02B4
        gbc.setState(0xeff8, 0x2449, 0xa370, 0x683d, 0xa8d9, 0xdb1, 0x0, 0x0);
        gbc.writeMem(0xeff8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x2449);
        EXPECT(gbc.pc(), 0xeff9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeff8), 0xb4);
        // B4 02B5
        gbc.setState(0xd1d9, 0xac30, 0xa970, 0x5cda, 0x2f81, 0x47dc, 0x0, 0x1);
        gbc.writeMem(0xd1d9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xac30);
        EXPECT(gbc.pc(), 0xd1da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1d9), 0xb4);
        // B4 02B6
        gbc.setState(0x1bf0, 0x382d, 0x5e70, 0x3751, 0xa96a, 0xcc31, 0x0, 0x0);
        gbc.writeMem(0x1bf0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x382d);
        EXPECT(gbc.pc(), 0x1bf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02B7
        gbc.setState(0x1065, 0x73db, 0xa400, 0x4935, 0xf37f, 0x5590, 0x0, 0x1);
        gbc.writeMem(0x1065, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x73db);
        EXPECT(gbc.pc(), 0x1066);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02B8
        gbc.setState(0x5a1f, 0x19a2, 0x5b10, 0x7bb8, 0x64f9, 0x9f5f, 0x0, 0x0);
        gbc.writeMem(0x5a1f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x19a2);
        EXPECT(gbc.pc(), 0x5a20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02B9
        gbc.setState(0xc05b, 0x37cc, 0x6b90, 0xd1e7, 0x48ed, 0xd96, 0x1, 0x0);
        gbc.writeMem(0xc05b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x37cc);
        EXPECT(gbc.pc(), 0xc05c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc05b), 0xb4);
        // B4 02BA
        gbc.setState(0xd158, 0x9a9, 0x2eb0, 0xaa30, 0x30c2, 0x793c, 0x1, 0x1);
        gbc.writeMem(0xd158, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x9a9);
        EXPECT(gbc.pc(), 0xd159);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd158), 0xb4);
        // B4 02BB
        gbc.setState(0xbb1b, 0x73ca, 0x2330, 0x83a7, 0xd35, 0x4b4d, 0x0, 0x0);
        gbc.writeMem(0xbb1b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x73ca);
        EXPECT(gbc.pc(), 0xbb1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb1b), 0xb4);
        // B4 02BC
        gbc.setState(0xdeee, 0xffcf, 0xee60, 0xb8f2, 0x24c8, 0x76fe, 0x0, 0x1);
        gbc.writeMem(0xdeee, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xffcf);
        EXPECT(gbc.pc(), 0xdeef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeee), 0xb4);
        // B4 02BD
        gbc.setState(0x8449, 0xbdd9, 0x14d0, 0x3b0d, 0x9a3c, 0x6ea3, 0x1, 0x1);
        gbc.writeMem(0x8449, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xbdd9);
        EXPECT(gbc.pc(), 0x844a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8449), 0xb4);
        // B4 02BE
        gbc.setState(0x1f75, 0xa51e, 0x6bc0, 0xf6f5, 0x6d67, 0xeea5, 0x1, 0x1);
        gbc.writeMem(0x1f75, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xa51e);
        EXPECT(gbc.pc(), 0x1f76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02BF
        gbc.setState(0x618, 0x1dca, 0x3cf0, 0xcc0f, 0x31cf, 0x1521, 0x0, 0x1);
        gbc.writeMem(0x618, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x1dca);
        EXPECT(gbc.pc(), 0x619);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02C0
        gbc.setState(0xd9e4, 0x73cf, 0x6b0, 0xa7e, 0xb89, 0x8427, 0x1, 0x0);
        gbc.writeMem(0xd9e4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x73cf);
        EXPECT(gbc.pc(), 0xd9e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9e4), 0xb4);
        // B4 02C1
        gbc.setState(0xb523, 0x4b0d, 0xd820, 0x8af1, 0x623d, 0x3aac, 0x0, 0x1);
        gbc.writeMem(0xb523, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x4b0d);
        EXPECT(gbc.pc(), 0xb524);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb523), 0xb4);
        // B4 02C2
        gbc.setState(0xbf19, 0xdd6b, 0xf210, 0x7b17, 0xf1a6, 0x1d41, 0x0, 0x1);
        gbc.writeMem(0xbf19, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xdd6b);
        EXPECT(gbc.pc(), 0xbf1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf19), 0xb4);
        // B4 02C3
        gbc.setState(0x9210, 0xd580, 0xb7f0, 0x1204, 0xcb4e, 0xbeb6, 0x1, 0x0);
        gbc.writeMem(0x9210, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xd580);
        EXPECT(gbc.pc(), 0x9211);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9210), 0xb4);
        // B4 02C4
        gbc.setState(0x3dad, 0xbce3, 0x30, 0x32b9, 0xc22f, 0x597c, 0x1, 0x1);
        gbc.writeMem(0x3dad, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xbce3);
        EXPECT(gbc.pc(), 0x3dae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02C5
        gbc.setState(0x31bb, 0x5ebd, 0xae30, 0x9f70, 0x3b22, 0xc8d4, 0x1, 0x0);
        gbc.writeMem(0x31bb, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x5ebd);
        EXPECT(gbc.pc(), 0x31bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02C6
        gbc.setState(0xd6c2, 0xdeed, 0xd4d0, 0x281d, 0xc004, 0xafaa, 0x1, 0x0);
        gbc.writeMem(0xd6c2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xdeed);
        EXPECT(gbc.pc(), 0xd6c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6c2), 0xb4);
        // B4 02C7
        gbc.setState(0x668b, 0x461, 0x3480, 0x8c, 0x63f4, 0x1dd0, 0x0, 0x0);
        gbc.writeMem(0x668b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x461);
        EXPECT(gbc.pc(), 0x668c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02C9
        gbc.setState(0x98f2, 0x5bbb, 0x1a0, 0xf9cf, 0xa861, 0x6926, 0x1, 0x0);
        gbc.writeMem(0x98f2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x5bbb);
        EXPECT(gbc.pc(), 0x98f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98f2), 0xb4);
        // B4 02CA
        gbc.setState(0x1ee, 0x2375, 0xdf60, 0x3165, 0x1a9e, 0x1d37, 0x0, 0x0);
        gbc.writeMem(0x1ee, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x2375);
        EXPECT(gbc.pc(), 0x1ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02CB
        gbc.setState(0xaac4, 0x4feb, 0xcb10, 0xaaac, 0x7d19, 0x811f, 0x0, 0x0);
        gbc.writeMem(0xaac4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x4feb);
        EXPECT(gbc.pc(), 0xaac5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaac4), 0xb4);
        // B4 02CC
        gbc.setState(0x26d9, 0x90fb, 0x1580, 0x69c3, 0xe5d7, 0xde20, 0x0, 0x1);
        gbc.writeMem(0x26d9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x90fb);
        EXPECT(gbc.pc(), 0x26da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02CE
        gbc.setState(0x8acd, 0xe247, 0xfc10, 0xe785, 0xf301, 0x5237, 0x1, 0x1);
        gbc.writeMem(0x8acd, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xe247);
        EXPECT(gbc.pc(), 0x8ace);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8acd), 0xb4);
        // B4 02CF
        gbc.setState(0x1789, 0xe23d, 0xb9b0, 0x48d2, 0xab58, 0xef9d, 0x1, 0x1);
        gbc.writeMem(0x1789, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xe23d);
        EXPECT(gbc.pc(), 0x178a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02D0
        gbc.setState(0x5c64, 0xe772, 0x21b0, 0xe6dd, 0x644f, 0x8bf1, 0x1, 0x0);
        gbc.writeMem(0x5c64, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xe772);
        EXPECT(gbc.pc(), 0x5c65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02D1
        gbc.setState(0xeacf, 0x6dbd, 0x5070, 0xa012, 0x44ba, 0x54bc, 0x0, 0x1);
        gbc.writeMem(0xeacf, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x6dbd);
        EXPECT(gbc.pc(), 0xead0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeacf), 0xb4);
        // B4 02D2
        gbc.setState(0xefda, 0x164d, 0x1b20, 0x487f, 0xcd1d, 0x2045, 0x1, 0x0);
        gbc.writeMem(0xefda, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x164d);
        EXPECT(gbc.pc(), 0xefdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefda), 0xb4);
        // B4 02D3
        gbc.setState(0x72ba, 0x2fe0, 0xa170, 0x72a, 0x7f5a, 0x728, 0x0, 0x1);
        gbc.writeMem(0x72ba, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x2fe0);
        EXPECT(gbc.pc(), 0x72bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02D4
        gbc.setState(0xc591, 0xe2d, 0xee90, 0x947, 0x1772, 0xe2dc, 0x1, 0x1);
        gbc.writeMem(0xc591, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xe2d);
        EXPECT(gbc.pc(), 0xc592);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc591), 0xb4);
        // B4 02D5
        gbc.setState(0xd64a, 0x76c1, 0x5790, 0xde23, 0x2540, 0x1543, 0x1, 0x1);
        gbc.writeMem(0xd64a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x76c1);
        EXPECT(gbc.pc(), 0xd64b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd64a), 0xb4);
        // B4 02D7
        gbc.setState(0xe9da, 0x5831, 0xc7f0, 0xb1d8, 0x10e7, 0x57d2, 0x0, 0x1);
        gbc.writeMem(0xe9da, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x5831);
        EXPECT(gbc.pc(), 0xe9db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9da), 0xb4);
        // B4 02D8
        gbc.setState(0x9631, 0x3b1b, 0x5510, 0x8795, 0x5c59, 0x906d, 0x0, 0x1);
        gbc.writeMem(0x9631, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x3b1b);
        EXPECT(gbc.pc(), 0x9632);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9631), 0xb4);
        // B4 02D9
        gbc.setState(0xa721, 0x34d9, 0x8600, 0xe470, 0xe7be, 0x3835, 0x1, 0x1);
        gbc.writeMem(0xa721, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x34d9);
        EXPECT(gbc.pc(), 0xa722);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa721), 0xb4);
        // B4 02DA
        gbc.setState(0x30d, 0x64fd, 0xd2a0, 0x11db, 0x5e40, 0x5212, 0x1, 0x1);
        gbc.writeMem(0x30d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x64fd);
        EXPECT(gbc.pc(), 0x30e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02DB
        gbc.setState(0x4853, 0xdaa5, 0x2a80, 0xef42, 0xcd6f, 0x10a8, 0x1, 0x1);
        gbc.writeMem(0x4853, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xdaa5);
        EXPECT(gbc.pc(), 0x4854);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02DC
        gbc.setState(0x4a14, 0xb3d4, 0xff50, 0x3b56, 0xd3a8, 0xace2, 0x1, 0x0);
        gbc.writeMem(0x4a14, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xb3d4);
        EXPECT(gbc.pc(), 0x4a15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02DD
        gbc.setState(0xace6, 0x89cf, 0x2180, 0x2802, 0xdbd7, 0x4388, 0x1, 0x0);
        gbc.writeMem(0xace6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x89cf);
        EXPECT(gbc.pc(), 0xace7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xace6), 0xb4);
        // B4 02DE
        gbc.setState(0x29b5, 0xcc91, 0x4700, 0xe2a, 0x68cc, 0x7f76, 0x0, 0x1);
        gbc.writeMem(0x29b5, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xcc91);
        EXPECT(gbc.pc(), 0x29b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02DF
        gbc.setState(0x885b, 0x1511, 0x7ea0, 0x3056, 0xcbaf, 0xd7ef, 0x1, 0x1);
        gbc.writeMem(0x885b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x1511);
        EXPECT(gbc.pc(), 0x885c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x885b), 0xb4);
        // B4 02E0
        gbc.setState(0x3643, 0x70c9, 0x5b90, 0x778b, 0x3f13, 0xc626, 0x0, 0x0);
        gbc.writeMem(0x3643, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x70c9);
        EXPECT(gbc.pc(), 0x3644);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02E1
        gbc.setState(0x9629, 0xaa2d, 0x6490, 0xb444, 0x17fe, 0xdec2, 0x0, 0x0);
        gbc.writeMem(0x9629, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xaa2d);
        EXPECT(gbc.pc(), 0x962a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9629), 0xb4);
        // B4 02E2
        gbc.setState(0x7473, 0xd274, 0x8ab0, 0x2f04, 0xb2fc, 0x26b3, 0x0, 0x1);
        gbc.writeMem(0x7473, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xd274);
        EXPECT(gbc.pc(), 0x7474);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02E3
        gbc.setState(0x40d9, 0xc81d, 0x4570, 0x4abd, 0xc1fb, 0x16e6, 0x1, 0x0);
        gbc.writeMem(0x40d9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xc81d);
        EXPECT(gbc.pc(), 0x40da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02E4
        gbc.setState(0xd2f, 0x6ba0, 0x4ca0, 0xafe, 0xd3a8, 0x3785, 0x0, 0x1);
        gbc.writeMem(0xd2f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x6ba0);
        EXPECT(gbc.pc(), 0xd30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02E5
        gbc.setState(0xa1f2, 0xd05c, 0x7ee0, 0xabc0, 0xc0ef, 0xad46, 0x1, 0x1);
        gbc.writeMem(0xa1f2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xd05c);
        EXPECT(gbc.pc(), 0xa1f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1f2), 0xb4);
        // B4 02E6
        gbc.setState(0x6162, 0xcb34, 0xda20, 0x15b3, 0x2494, 0x7a3a, 0x0, 0x0);
        gbc.writeMem(0x6162, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xcb34);
        EXPECT(gbc.pc(), 0x6163);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02E7
        gbc.setState(0xbe38, 0x3063, 0x89c0, 0xd8b, 0x9ebf, 0x9ad2, 0x1, 0x0);
        gbc.writeMem(0xbe38, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x3063);
        EXPECT(gbc.pc(), 0xbe39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe38), 0xb4);
        // B4 02E8
        gbc.setState(0xca22, 0x694d, 0x22c0, 0x1dfa, 0xd637, 0x798e, 0x0, 0x0);
        gbc.writeMem(0xca22, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x694d);
        EXPECT(gbc.pc(), 0xca23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca22), 0xb4);
        // B4 02EA
        gbc.setState(0xce34, 0x7c6b, 0x8710, 0xc032, 0x9364, 0xc0ca, 0x1, 0x0);
        gbc.writeMem(0xce34, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x7c6b);
        EXPECT(gbc.pc(), 0xce35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce34), 0xb4);
        // B4 02EB
        gbc.setState(0x8d6d, 0x5e44, 0xcc60, 0xe247, 0xd642, 0x490d, 0x1, 0x0);
        gbc.writeMem(0x8d6d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x5e44);
        EXPECT(gbc.pc(), 0x8d6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d6d), 0xb4);
        // B4 02EC
        gbc.setState(0x8002, 0xf4d4, 0xf180, 0x9514, 0xae35, 0x614, 0x0, 0x0);
        gbc.writeMem(0x8002, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xf4d4);
        EXPECT(gbc.pc(), 0x8003);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8002), 0xb4);
        // B4 02ED
        gbc.setState(0x841f, 0x8430, 0x2db0, 0x38a2, 0xfb9d, 0x4c4e, 0x1, 0x0);
        gbc.writeMem(0x841f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x8430);
        EXPECT(gbc.pc(), 0x8420);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x841f), 0xb4);
        // B4 02EE
        gbc.setState(0x2e7e, 0x85a2, 0xb770, 0x699e, 0x293, 0xfb1c, 0x1, 0x1);
        gbc.writeMem(0x2e7e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x85a2);
        EXPECT(gbc.pc(), 0x2e7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02EF
        gbc.setState(0x44bd, 0xfc10, 0x9200, 0xdc9f, 0xdd7c, 0x3353, 0x1, 0x1);
        gbc.writeMem(0x44bd, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xfc10);
        EXPECT(gbc.pc(), 0x44be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02F0
        gbc.setState(0x7006, 0x3426, 0xef10, 0xe5a3, 0xe180, 0xa734, 0x0, 0x1);
        gbc.writeMem(0x7006, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x3426);
        EXPECT(gbc.pc(), 0x7007);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02F1
        gbc.setState(0xd9d3, 0x3da5, 0x4710, 0xeba8, 0x8a82, 0x33ab, 0x0, 0x0);
        gbc.writeMem(0xd9d3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x3da5);
        EXPECT(gbc.pc(), 0xd9d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9d3), 0xb4);
        // B4 02F2
        gbc.setState(0xd171, 0xf2b5, 0xa6c0, 0x29c6, 0x813a, 0x4fdd, 0x0, 0x1);
        gbc.writeMem(0xd171, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xf2b5);
        EXPECT(gbc.pc(), 0xd172);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd171), 0xb4);
        // B4 02F3
        gbc.setState(0xa5c9, 0xf17b, 0xb320, 0xeaa, 0x5323, 0x6b83, 0x0, 0x1);
        gbc.writeMem(0xa5c9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xf17b);
        EXPECT(gbc.pc(), 0xa5ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5c9), 0xb4);
        // B4 02F5
        gbc.setState(0x6413, 0x7761, 0xd520, 0x8818, 0x66b5, 0x3c3c, 0x0, 0x1);
        gbc.writeMem(0x6413, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x7761);
        EXPECT(gbc.pc(), 0x6414);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02F6
        gbc.setState(0x97a0, 0x327d, 0x900, 0xe147, 0xe347, 0xa265, 0x1, 0x1);
        gbc.writeMem(0x97a0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x327d);
        EXPECT(gbc.pc(), 0x97a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97a0), 0xb4);
        // B4 02F7
        gbc.setState(0xda46, 0xa043, 0xa5c0, 0xb1c9, 0x78d8, 0x8900, 0x1, 0x0);
        gbc.writeMem(0xda46, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xa043);
        EXPECT(gbc.pc(), 0xda47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda46), 0xb4);
        // B4 02F8
        gbc.setState(0xc3b0, 0xd4ec, 0xe9a0, 0x4f42, 0xf36d, 0xe8ab, 0x0, 0x0);
        gbc.writeMem(0xc3b0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xd4ec);
        EXPECT(gbc.pc(), 0xc3b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3b0), 0xb4);
        // B4 02F9
        gbc.setState(0x5690, 0x34cf, 0x68a0, 0x42d, 0xf9b2, 0xb261, 0x1, 0x1);
        gbc.writeMem(0x5690, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x34cf);
        EXPECT(gbc.pc(), 0x5691);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02FA
        gbc.setState(0x6f7c, 0xc22a, 0xadf0, 0xa857, 0xec54, 0x265e, 0x0, 0x0);
        gbc.writeMem(0x6f7c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xc22a);
        EXPECT(gbc.pc(), 0x6f7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02FB
        gbc.setState(0x59e0, 0x9464, 0x31f0, 0xd697, 0x9d8d, 0x8e33, 0x1, 0x1);
        gbc.writeMem(0x59e0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x9464);
        EXPECT(gbc.pc(), 0x59e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02FC
        gbc.setState(0x3c7e, 0x70c, 0x14e0, 0x44c0, 0x604a, 0x9068, 0x1, 0x0);
        gbc.writeMem(0x3c7e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x70c);
        EXPECT(gbc.pc(), 0x3c7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02FD
        gbc.setState(0x3885, 0xc8cc, 0x380, 0xcd11, 0xc442, 0x92ab, 0x0, 0x1);
        gbc.writeMem(0x3885, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xc8cc);
        EXPECT(gbc.pc(), 0x3886);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 02FE
        gbc.setState(0xc0d8, 0xe3f0, 0x3c70, 0x9656, 0x893a, 0x16b8, 0x0, 0x1);
        gbc.writeMem(0xc0d8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xe3f0);
        EXPECT(gbc.pc(), 0xc0d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0d8), 0xb4);
        // B4 02FF
        gbc.setState(0x2084, 0x95f, 0x1180, 0x2697, 0x7bb, 0x88a0, 0x0, 0x0);
        gbc.writeMem(0x2084, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x95f);
        EXPECT(gbc.pc(), 0x2085);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0300
        gbc.setState(0x2c9f, 0xcbac, 0xe300, 0x13ce, 0x7a2c, 0x285b, 0x0, 0x0);
        gbc.writeMem(0x2c9f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xcbac);
        EXPECT(gbc.pc(), 0x2ca0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0301
        gbc.setState(0x287a, 0xe982, 0x2220, 0x420, 0x9982, 0xd119, 0x1, 0x1);
        gbc.writeMem(0x287a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe982);
        EXPECT(gbc.pc(), 0x287b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0302
        gbc.setState(0x63ca, 0x2f3e, 0xd650, 0x169c, 0x1ba8, 0xf510, 0x1, 0x0);
        gbc.writeMem(0x63ca, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x2f3e);
        EXPECT(gbc.pc(), 0x63cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0303
        gbc.setState(0xb7ff, 0xcf27, 0x3e40, 0x4e2e, 0x5d85, 0x80e9, 0x0, 0x0);
        gbc.writeMem(0xb7ff, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xcf27);
        EXPECT(gbc.pc(), 0xb800);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7ff), 0xb4);
        // B4 0304
        gbc.setState(0xe1a, 0x5785, 0xac60, 0xd0e2, 0xad91, 0xbc75, 0x0, 0x1);
        gbc.writeMem(0xe1a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x5785);
        EXPECT(gbc.pc(), 0xe1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0306
        gbc.setState(0x2517, 0x9e2b, 0xf6f0, 0xf7b, 0x9cdd, 0x48fb, 0x0, 0x0);
        gbc.writeMem(0x2517, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x9e2b);
        EXPECT(gbc.pc(), 0x2518);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0307
        gbc.setState(0x30ea, 0x68d1, 0x3320, 0x5f89, 0x4bb8, 0xf496, 0x0, 0x0);
        gbc.writeMem(0x30ea, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x68d1);
        EXPECT(gbc.pc(), 0x30eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0308
        gbc.setState(0x3c09, 0xf6f4, 0x320, 0x423, 0xfbc1, 0x5ca, 0x0, 0x0);
        gbc.writeMem(0x3c09, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xf6f4);
        EXPECT(gbc.pc(), 0x3c0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0309
        gbc.setState(0x5ee4, 0xf53e, 0x2dd0, 0xae5d, 0x43e1, 0x2d34, 0x1, 0x0);
        gbc.writeMem(0x5ee4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xf53e);
        EXPECT(gbc.pc(), 0x5ee5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 030A
        gbc.setState(0x6bc8, 0x7796, 0x3270, 0x2886, 0x5178, 0xd28e, 0x0, 0x1);
        gbc.writeMem(0x6bc8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x7796);
        EXPECT(gbc.pc(), 0x6bc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 030B
        gbc.setState(0xc95c, 0x83e6, 0x8e90, 0x7be, 0x46a3, 0x6d0, 0x0, 0x0);
        gbc.writeMem(0xc95c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x83e6);
        EXPECT(gbc.pc(), 0xc95d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc95c), 0xb4);
        // B4 030D
        gbc.setState(0x3434, 0xd910, 0x3f40, 0x6c9a, 0xe09, 0xfc18, 0x0, 0x0);
        gbc.writeMem(0x3434, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd910);
        EXPECT(gbc.pc(), 0x3435);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 030E
        gbc.setState(0x9d94, 0x1d0f, 0xdda0, 0x657d, 0x9e26, 0xddde, 0x0, 0x0);
        gbc.writeMem(0x9d94, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x1d0f);
        EXPECT(gbc.pc(), 0x9d95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d94), 0xb4);
        // B4 030F
        gbc.setState(0x4f4b, 0x4e2c, 0xd3f0, 0x5110, 0x2805, 0xae67, 0x1, 0x1);
        gbc.writeMem(0x4f4b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x4e2c);
        EXPECT(gbc.pc(), 0x4f4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0311
        gbc.setState(0x8b2a, 0xbb86, 0x8430, 0xf6bc, 0x7660, 0x1af6, 0x1, 0x0);
        gbc.writeMem(0x8b2a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xbb86);
        EXPECT(gbc.pc(), 0x8b2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b2a), 0xb4);
        // B4 0312
        gbc.setState(0x6db, 0x6ba0, 0xeba0, 0xc941, 0x265e, 0x80ec, 0x0, 0x0);
        gbc.writeMem(0x6db, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x6ba0);
        EXPECT(gbc.pc(), 0x6dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0313
        gbc.setState(0xc1c6, 0x6cf4, 0x8f70, 0xa8c, 0xb33d, 0xd1a7, 0x1, 0x0);
        gbc.writeMem(0xc1c6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x6cf4);
        EXPECT(gbc.pc(), 0xc1c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1c6), 0xb4);
        // B4 0314
        gbc.setState(0x4333, 0x87a, 0xa5d0, 0x34ed, 0x1454, 0x7476, 0x0, 0x1);
        gbc.writeMem(0x4333, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x87a);
        EXPECT(gbc.pc(), 0x4334);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0315
        gbc.setState(0x1ba3, 0x1b37, 0x7e70, 0x3ebc, 0xbe48, 0xeaa0, 0x0, 0x0);
        gbc.writeMem(0x1ba3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x1b37);
        EXPECT(gbc.pc(), 0x1ba4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0316
        gbc.setState(0xcc1f, 0x2f57, 0x3af0, 0x46b6, 0x51b2, 0x8cf6, 0x1, 0x0);
        gbc.writeMem(0xcc1f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x2f57);
        EXPECT(gbc.pc(), 0xcc20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc1f), 0xb4);
        // B4 0317
        gbc.setState(0xe514, 0xbd1b, 0xd2c0, 0x4735, 0x5e69, 0x38c2, 0x1, 0x1);
        gbc.writeMem(0xe514, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xbd1b);
        EXPECT(gbc.pc(), 0xe515);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe514), 0xb4);
        // B4 0318
        gbc.setState(0xee9d, 0x2133, 0x4190, 0xf20a, 0x4010, 0x47c9, 0x0, 0x1);
        gbc.writeMem(0xee9d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x2133);
        EXPECT(gbc.pc(), 0xee9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee9d), 0xb4);
        // B4 0319
        gbc.setState(0xdd8a, 0xba76, 0xa9e0, 0xd4e8, 0xaa72, 0x7ef1, 0x0, 0x1);
        gbc.writeMem(0xdd8a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xba76);
        EXPECT(gbc.pc(), 0xdd8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd8a), 0xb4);
        // B4 031A
        gbc.setState(0xb085, 0xa4c9, 0xbce0, 0xb9e1, 0xcaca, 0xea12, 0x1, 0x0);
        gbc.writeMem(0xb085, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xa4c9);
        EXPECT(gbc.pc(), 0xb086);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb085), 0xb4);
        // B4 031B
        gbc.setState(0xb36e, 0xd76d, 0xb400, 0x5bcb, 0xd86f, 0x92c0, 0x1, 0x1);
        gbc.writeMem(0xb36e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xd76d);
        EXPECT(gbc.pc(), 0xb36f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb36e), 0xb4);
        // B4 031C
        gbc.setState(0xddd5, 0x6677, 0x70c0, 0xdae4, 0x331d, 0x5f45, 0x1, 0x1);
        gbc.writeMem(0xddd5, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x6677);
        EXPECT(gbc.pc(), 0xddd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddd5), 0xb4);
        // B4 031D
        gbc.setState(0xe70b, 0xbe02, 0x6cd0, 0xe57b, 0xd12a, 0x1f12, 0x0, 0x0);
        gbc.writeMem(0xe70b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xbe02);
        EXPECT(gbc.pc(), 0xe70c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe70b), 0xb4);
        // B4 031E
        gbc.setState(0x5c16, 0x6aeb, 0xf200, 0xba9e, 0x8d55, 0xc6ee, 0x1, 0x1);
        gbc.writeMem(0x5c16, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x6aeb);
        EXPECT(gbc.pc(), 0x5c17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 031F
        gbc.setState(0x1753, 0xdb99, 0x2530, 0xe50f, 0x7e1d, 0x5362, 0x0, 0x1);
        gbc.writeMem(0x1753, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xdb99);
        EXPECT(gbc.pc(), 0x1754);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0320
        gbc.setState(0x8e5e, 0x8177, 0xf2c0, 0x3549, 0xcdf0, 0xd1c, 0x0, 0x0);
        gbc.writeMem(0x8e5e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x8177);
        EXPECT(gbc.pc(), 0x8e5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e5e), 0xb4);
        // B4 0321
        gbc.setState(0xd843, 0x656b, 0x6b00, 0xd341, 0xab30, 0x8abe, 0x1, 0x1);
        gbc.writeMem(0xd843, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x656b);
        EXPECT(gbc.pc(), 0xd844);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd843), 0xb4);
        // B4 0322
        gbc.setState(0x62a4, 0x5ce6, 0x2110, 0x522e, 0xe4d7, 0x9083, 0x0, 0x0);
        gbc.writeMem(0x62a4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x5ce6);
        EXPECT(gbc.pc(), 0x62a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0323
        gbc.setState(0x269b, 0xfa5, 0xac60, 0xaa3a, 0x147c, 0x9cda, 0x1, 0x0);
        gbc.writeMem(0x269b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xfa5);
        EXPECT(gbc.pc(), 0x269c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0324
        gbc.setState(0xd3da, 0x7532, 0x1b30, 0xfe34, 0x62d8, 0x8902, 0x1, 0x1);
        gbc.writeMem(0xd3da, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x7532);
        EXPECT(gbc.pc(), 0xd3db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3da), 0xb4);
        // B4 0325
        gbc.setState(0x54c, 0x1414, 0xae20, 0xbac4, 0x5dd3, 0xe23, 0x0, 0x1);
        gbc.writeMem(0x54c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x1414);
        EXPECT(gbc.pc(), 0x54d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0326
        gbc.setState(0xe3a5, 0x9bd2, 0x4470, 0xd0e6, 0x91a8, 0x9455, 0x1, 0x1);
        gbc.writeMem(0xe3a5, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x9bd2);
        EXPECT(gbc.pc(), 0xe3a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3a5), 0xb4);
        // B4 0327
        gbc.setState(0x5169, 0x9a1e, 0x3c80, 0x5d18, 0x48c5, 0x8a2, 0x1, 0x0);
        gbc.writeMem(0x5169, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x9a1e);
        EXPECT(gbc.pc(), 0x516a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0328
        gbc.setState(0x6cfa, 0x519c, 0x16c0, 0x6f49, 0x1970, 0x1a77, 0x1, 0x0);
        gbc.writeMem(0x6cfa, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x519c);
        EXPECT(gbc.pc(), 0x6cfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0329
        gbc.setState(0xa758, 0xbdec, 0x3190, 0x5ee2, 0xb8bb, 0x44a9, 0x1, 0x1);
        gbc.writeMem(0xa758, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xbdec);
        EXPECT(gbc.pc(), 0xa759);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa758), 0xb4);
        // B4 032A
        gbc.setState(0xa9fb, 0xd183, 0xbfe0, 0x466a, 0x9bc7, 0xa02b, 0x0, 0x0);
        gbc.writeMem(0xa9fb, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xd183);
        EXPECT(gbc.pc(), 0xa9fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9fb), 0xb4);
        // B4 032C
        gbc.setState(0xa516, 0x4b9, 0x3ac0, 0x9134, 0x96ba, 0x4dd0, 0x1, 0x1);
        gbc.writeMem(0xa516, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x4b9);
        EXPECT(gbc.pc(), 0xa517);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa516), 0xb4);
        // B4 032D
        gbc.setState(0x8c7d, 0xeccb, 0xb940, 0x73a9, 0xe657, 0xaf77, 0x1, 0x0);
        gbc.writeMem(0x8c7d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xeccb);
        EXPECT(gbc.pc(), 0x8c7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c7d), 0xb4);
        // B4 032E
        gbc.setState(0xe958, 0xcbee, 0x6a90, 0x6b43, 0xf86c, 0x7ccb, 0x1, 0x0);
        gbc.writeMem(0xe958, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xcbee);
        EXPECT(gbc.pc(), 0xe959);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe958), 0xb4);
        // B4 0330
        gbc.setState(0x71d8, 0xe7a4, 0x2760, 0x57f8, 0xdc46, 0x960, 0x0, 0x1);
        gbc.writeMem(0x71d8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xe7a4);
        EXPECT(gbc.pc(), 0x71d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0331
        gbc.setState(0x99a2, 0x7a34, 0x6cb0, 0xf813, 0xf54a, 0x9366, 0x1, 0x1);
        gbc.writeMem(0x99a2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x7a34);
        EXPECT(gbc.pc(), 0x99a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99a2), 0xb4);
        // B4 0332
        gbc.setState(0x597f, 0x8f6b, 0x4760, 0xc863, 0x607a, 0x5afa, 0x1, 0x0);
        gbc.writeMem(0x597f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x8f6b);
        EXPECT(gbc.pc(), 0x5980);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0333
        gbc.setState(0xba51, 0xa4cf, 0x7da0, 0xebc2, 0xfd42, 0x82c3, 0x1, 0x0);
        gbc.writeMem(0xba51, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xa4cf);
        EXPECT(gbc.pc(), 0xba52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba51), 0xb4);
        // B4 0334
        gbc.setState(0x22a9, 0xbdca, 0x7eb0, 0xdfb4, 0xe64, 0xf3c4, 0x0, 0x0);
        gbc.writeMem(0x22a9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xbdca);
        EXPECT(gbc.pc(), 0x22aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0335
        gbc.setState(0x6f86, 0xb0bf, 0x860, 0x4af3, 0x9448, 0x9a2a, 0x1, 0x1);
        gbc.writeMem(0x6f86, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xb0bf);
        EXPECT(gbc.pc(), 0x6f87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0336
        gbc.setState(0x117a, 0xb736, 0xf360, 0xb139, 0x2690, 0xbb6, 0x0, 0x0);
        gbc.writeMem(0x117a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xb736);
        EXPECT(gbc.pc(), 0x117b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0337
        gbc.setState(0xbb4e, 0x743f, 0x7f00, 0x4e7e, 0x45e7, 0xe945, 0x0, 0x1);
        gbc.writeMem(0xbb4e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x743f);
        EXPECT(gbc.pc(), 0xbb4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb4e), 0xb4);
        // B4 0338
        gbc.setState(0x6164, 0xd5ee, 0xf530, 0xcf3e, 0x26cd, 0x3cb7, 0x1, 0x1);
        gbc.writeMem(0x6164, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xd5ee);
        EXPECT(gbc.pc(), 0x6165);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 033A
        gbc.setState(0xa6dc, 0x51da, 0xffc0, 0xc197, 0xbfa7, 0x43a1, 0x0, 0x1);
        gbc.writeMem(0xa6dc, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x51da);
        EXPECT(gbc.pc(), 0xa6dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6dc), 0xb4);
        // B4 033B
        gbc.setState(0xc312, 0xc0, 0x8d90, 0xab84, 0x9260, 0xc452, 0x0, 0x0);
        gbc.writeMem(0xc312, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xc0);
        EXPECT(gbc.pc(), 0xc313);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc312), 0xb4);
        // B4 033C
        gbc.setState(0xcefc, 0x39c2, 0x9c70, 0xa328, 0x75d5, 0x7582, 0x1, 0x1);
        gbc.writeMem(0xcefc, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x39c2);
        EXPECT(gbc.pc(), 0xcefd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcefc), 0xb4);
        // B4 033D
        gbc.setState(0xa8f5, 0x8329, 0x8b60, 0xf23c, 0xd5c7, 0x7824, 0x1, 0x0);
        gbc.writeMem(0xa8f5, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8329);
        EXPECT(gbc.pc(), 0xa8f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8f5), 0xb4);
        // B4 033E
        gbc.setState(0x6f03, 0xb739, 0xed60, 0xbf9b, 0xe26b, 0xd5e1, 0x0, 0x0);
        gbc.writeMem(0x6f03, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xb739);
        EXPECT(gbc.pc(), 0x6f04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 033F
        gbc.setState(0xa452, 0x2ed6, 0x5ab0, 0xdcd6, 0xbfda, 0xfee7, 0x1, 0x0);
        gbc.writeMem(0xa452, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x2ed6);
        EXPECT(gbc.pc(), 0xa453);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa452), 0xb4);
        // B4 0340
        gbc.setState(0x59ed, 0xdfc7, 0xb910, 0x57, 0xdfde, 0x8712, 0x0, 0x1);
        gbc.writeMem(0x59ed, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xdfc7);
        EXPECT(gbc.pc(), 0x59ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0341
        gbc.setState(0x3984, 0x7e3c, 0xbf40, 0xbd92, 0x8b44, 0x86de, 0x0, 0x1);
        gbc.writeMem(0x3984, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x7e3c);
        EXPECT(gbc.pc(), 0x3985);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0342
        gbc.setState(0x7862, 0xdd44, 0x9fb0, 0x76b, 0xd839, 0xe817, 0x1, 0x0);
        gbc.writeMem(0x7862, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xdd44);
        EXPECT(gbc.pc(), 0x7863);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0343
        gbc.setState(0x628d, 0x84d3, 0xb210, 0x8777, 0x4bb1, 0x772a, 0x0, 0x0);
        gbc.writeMem(0x628d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x84d3);
        EXPECT(gbc.pc(), 0x628e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0344
        gbc.setState(0x164b, 0x2ae4, 0xba20, 0x3b02, 0xaef3, 0x4c06, 0x1, 0x0);
        gbc.writeMem(0x164b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x2ae4);
        EXPECT(gbc.pc(), 0x164c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0345
        gbc.setState(0x8d68, 0x403f, 0x8ac0, 0xb6d4, 0x7873, 0x3f9f, 0x0, 0x1);
        gbc.writeMem(0x8d68, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x403f);
        EXPECT(gbc.pc(), 0x8d69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d68), 0xb4);
        // B4 0346
        gbc.setState(0x8657, 0xb089, 0x9260, 0x5523, 0xf425, 0x7d7a, 0x1, 0x0);
        gbc.writeMem(0x8657, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xb089);
        EXPECT(gbc.pc(), 0x8658);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8657), 0xb4);
        // B4 0347
        gbc.setState(0x75b5, 0xf905, 0xaae0, 0x839e, 0x685, 0x218f, 0x0, 0x0);
        gbc.writeMem(0x75b5, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xf905);
        EXPECT(gbc.pc(), 0x75b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0348
        gbc.setState(0xdd43, 0x1f0a, 0xbe0, 0x4e1, 0x6d6d, 0x9f56, 0x0, 0x1);
        gbc.writeMem(0xdd43, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x1f0a);
        EXPECT(gbc.pc(), 0xdd44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd43), 0xb4);
        // B4 0349
        gbc.setState(0x4972, 0x46, 0xa520, 0x52c, 0xad57, 0x9f29, 0x0, 0x1);
        gbc.writeMem(0x4972, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x46);
        EXPECT(gbc.pc(), 0x4973);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 034A
        gbc.setState(0xafb6, 0x661c, 0x3dd0, 0xe957, 0x768c, 0xe4d4, 0x0, 0x0);
        gbc.writeMem(0xafb6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x661c);
        EXPECT(gbc.pc(), 0xafb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafb6), 0xb4);
        // B4 034D
        gbc.setState(0x493f, 0x22f, 0xa2e0, 0xd400, 0xc9b1, 0x180a, 0x0, 0x1);
        gbc.writeMem(0x493f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x22f);
        EXPECT(gbc.pc(), 0x4940);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 034E
        gbc.setState(0x2dab, 0xfdd6, 0xeef0, 0x42b0, 0xc6ef, 0xc0a6, 0x0, 0x1);
        gbc.writeMem(0x2dab, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xfdd6);
        EXPECT(gbc.pc(), 0x2dac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 034F
        gbc.setState(0xa7b0, 0xef9, 0x7ee0, 0x30ce, 0x91a6, 0x4a5f, 0x0, 0x0);
        gbc.writeMem(0xa7b0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xef9);
        EXPECT(gbc.pc(), 0xa7b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7b0), 0xb4);
        // B4 0350
        gbc.setState(0xea64, 0xbff3, 0x6a60, 0x54f9, 0xdd57, 0x447, 0x1, 0x1);
        gbc.writeMem(0xea64, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xbff3);
        EXPECT(gbc.pc(), 0xea65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea64), 0xb4);
        // B4 0351
        gbc.setState(0x753c, 0x9c0e, 0x41e0, 0x1979, 0xe4d3, 0x9ed9, 0x1, 0x0);
        gbc.writeMem(0x753c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x9c0e);
        EXPECT(gbc.pc(), 0x753d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0352
        gbc.setState(0xc01, 0xb6e1, 0xb360, 0x8d5d, 0xf759, 0xc046, 0x0, 0x1);
        gbc.writeMem(0xc01, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xb6e1);
        EXPECT(gbc.pc(), 0xc02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0353
        gbc.setState(0x7602, 0xa3a, 0x6b70, 0x2547, 0xd7bb, 0x9034, 0x0, 0x0);
        gbc.writeMem(0x7602, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xa3a);
        EXPECT(gbc.pc(), 0x7603);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0354
        gbc.setState(0x5fa8, 0xa781, 0x26f0, 0x1473, 0x7e9d, 0x53c7, 0x0, 0x0);
        gbc.writeMem(0x5fa8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xa781);
        EXPECT(gbc.pc(), 0x5fa9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0355
        gbc.setState(0x6791, 0x2dbe, 0x9e40, 0xf099, 0x7d31, 0x74e7, 0x0, 0x0);
        gbc.writeMem(0x6791, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x2dbe);
        EXPECT(gbc.pc(), 0x6792);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0356
        gbc.setState(0x7ab4, 0x3012, 0xcfa0, 0x6049, 0x5d76, 0x55f9, 0x1, 0x1);
        gbc.writeMem(0x7ab4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x3012);
        EXPECT(gbc.pc(), 0x7ab5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0357
        gbc.setState(0xd641, 0x3dfa, 0x980, 0xffcd, 0x2ea3, 0xdc38, 0x0, 0x0);
        gbc.writeMem(0xd641, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x3dfa);
        EXPECT(gbc.pc(), 0xd642);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd641), 0xb4);
        // B4 0358
        gbc.setState(0x11dd, 0x49c, 0x8060, 0x7300, 0x1082, 0x9d01, 0x0, 0x0);
        gbc.writeMem(0x11dd, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x49c);
        EXPECT(gbc.pc(), 0x11de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0359
        gbc.setState(0x3916, 0x9180, 0x5870, 0x3a54, 0x906b, 0xd65e, 0x1, 0x0);
        gbc.writeMem(0x3916, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9180);
        EXPECT(gbc.pc(), 0x3917);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 035A
        gbc.setState(0xe316, 0xb63, 0x9a80, 0x2678, 0xc290, 0x150a, 0x0, 0x1);
        gbc.writeMem(0xe316, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb63);
        EXPECT(gbc.pc(), 0xe317);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe316), 0xb4);
        // B4 035B
        gbc.setState(0x6f3a, 0x3664, 0xa2d0, 0xc67e, 0x423b, 0xfd2d, 0x1, 0x1);
        gbc.writeMem(0x6f3a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x3664);
        EXPECT(gbc.pc(), 0x6f3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 035C
        gbc.setState(0x481d, 0xcd9, 0x7e00, 0x6a52, 0x4373, 0x4f2b, 0x0, 0x1);
        gbc.writeMem(0x481d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xcd9);
        EXPECT(gbc.pc(), 0x481e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 035D
        gbc.setState(0x929e, 0xd72, 0xcea0, 0x7c37, 0x3016, 0xff1e, 0x1, 0x0);
        gbc.writeMem(0x929e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xd72);
        EXPECT(gbc.pc(), 0x929f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x929e), 0xb4);
        // B4 035E
        gbc.setState(0x13ac, 0x3fca, 0xed20, 0xbf7f, 0xdb3c, 0xb531, 0x0, 0x0);
        gbc.writeMem(0x13ac, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x3fca);
        EXPECT(gbc.pc(), 0x13ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 035F
        gbc.setState(0x48ab, 0x26f0, 0xe2f0, 0x8945, 0x4ee2, 0xb74d, 0x0, 0x0);
        gbc.writeMem(0x48ab, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x26f0);
        EXPECT(gbc.pc(), 0x48ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0360
        gbc.setState(0x991e, 0x8a8b, 0x9140, 0xa00, 0x9808, 0xdc15, 0x0, 0x1);
        gbc.writeMem(0x991e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8a8b);
        EXPECT(gbc.pc(), 0x991f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x991e), 0xb4);
        // B4 0361
        gbc.setState(0x7434, 0xad6a, 0x1640, 0xd5f3, 0xbd52, 0x274d, 0x0, 0x0);
        gbc.writeMem(0x7434, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xad6a);
        EXPECT(gbc.pc(), 0x7435);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0362
        gbc.setState(0x429a, 0xc33d, 0xfc00, 0xa135, 0x162d, 0x9bc4, 0x0, 0x1);
        gbc.writeMem(0x429a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xc33d);
        EXPECT(gbc.pc(), 0x429b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0363
        gbc.setState(0xaf7b, 0x8f16, 0x8120, 0x209f, 0x34de, 0x5165, 0x1, 0x1);
        gbc.writeMem(0xaf7b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x8f16);
        EXPECT(gbc.pc(), 0xaf7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf7b), 0xb4);
        // B4 0364
        gbc.setState(0xeeb3, 0xb4fe, 0xd370, 0x3373, 0x53cd, 0xb102, 0x1, 0x0);
        gbc.writeMem(0xeeb3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xb4fe);
        EXPECT(gbc.pc(), 0xeeb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeeb3), 0xb4);
        // B4 0365
        gbc.setState(0x7c1c, 0xea86, 0xce90, 0xc5db, 0x78a9, 0xa899, 0x0, 0x1);
        gbc.writeMem(0x7c1c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xea86);
        EXPECT(gbc.pc(), 0x7c1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0366
        gbc.setState(0x7a57, 0x7f89, 0xb70, 0xaeca, 0x57b6, 0x5d9, 0x0, 0x1);
        gbc.writeMem(0x7a57, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x7f89);
        EXPECT(gbc.pc(), 0x7a58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0367
        gbc.setState(0x5adc, 0x8220, 0x99e0, 0xb0b5, 0xe32c, 0x303, 0x1, 0x1);
        gbc.writeMem(0x5adc, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x8220);
        EXPECT(gbc.pc(), 0x5add);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0368
        gbc.setState(0xbfba, 0xef0e, 0xb490, 0x8be4, 0x6f94, 0x12ae, 0x1, 0x0);
        gbc.writeMem(0xbfba, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xef0e);
        EXPECT(gbc.pc(), 0xbfbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfba), 0xb4);
        // B4 0369
        gbc.setState(0x7f5d, 0x3b74, 0x5220, 0x2e8, 0x6c4f, 0x4f54, 0x1, 0x1);
        gbc.writeMem(0x7f5d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x3b74);
        EXPECT(gbc.pc(), 0x7f5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 036B
        gbc.setState(0xd007, 0xda05, 0xb750, 0xfedb, 0x7150, 0xac96, 0x1, 0x0);
        gbc.writeMem(0xd007, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xda05);
        EXPECT(gbc.pc(), 0xd008);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd007), 0xb4);
        // B4 036C
        gbc.setState(0xe45, 0x8969, 0xf660, 0xeb43, 0xb858, 0x7b3a, 0x0, 0x0);
        gbc.writeMem(0xe45, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x8969);
        EXPECT(gbc.pc(), 0xe46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 036D
        gbc.setState(0xdfdb, 0x502, 0x4db0, 0x42be, 0x9ae7, 0x9a70, 0x0, 0x1);
        gbc.writeMem(0xdfdb, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x502);
        EXPECT(gbc.pc(), 0xdfdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfdb), 0xb4);
        // B4 036E
        gbc.setState(0x4823, 0xc6c9, 0x26c0, 0x9328, 0x2043, 0x1fd6, 0x1, 0x0);
        gbc.writeMem(0x4823, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xc6c9);
        EXPECT(gbc.pc(), 0x4824);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 036F
        gbc.setState(0x9946, 0xf645, 0xf010, 0x156a, 0x14a1, 0xdf4d, 0x0, 0x1);
        gbc.writeMem(0x9946, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xf645);
        EXPECT(gbc.pc(), 0x9947);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9946), 0xb4);
        // B4 0370
        gbc.setState(0xa87a, 0x114b, 0x3cf0, 0xa8b8, 0xd249, 0x2c2c, 0x1, 0x0);
        gbc.writeMem(0xa87a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x114b);
        EXPECT(gbc.pc(), 0xa87b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa87a), 0xb4);
        // B4 0371
        gbc.setState(0xba68, 0x5ec3, 0xfc20, 0xf215, 0x2de, 0xb8fe, 0x1, 0x0);
        gbc.writeMem(0xba68, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x5ec3);
        EXPECT(gbc.pc(), 0xba69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba68), 0xb4);
        // B4 0372
        gbc.setState(0x618b, 0x219f, 0xe630, 0x4d26, 0x9ad5, 0x579e, 0x0, 0x1);
        gbc.writeMem(0x618b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x219f);
        EXPECT(gbc.pc(), 0x618c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0373
        gbc.setState(0xc94, 0x706c, 0x7430, 0xfc57, 0x8fe, 0x3ff4, 0x0, 0x0);
        gbc.writeMem(0xc94, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x706c);
        EXPECT(gbc.pc(), 0xc95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0374
        gbc.setState(0x70e2, 0xc6a, 0xbd90, 0xa765, 0x607b, 0x1b54, 0x0, 0x1);
        gbc.writeMem(0x70e2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xc6a);
        EXPECT(gbc.pc(), 0x70e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0376
        gbc.setState(0xdfcb, 0x1d13, 0xa580, 0xcf7f, 0xa2b5, 0xd15f, 0x1, 0x0);
        gbc.writeMem(0xdfcb, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x1d13);
        EXPECT(gbc.pc(), 0xdfcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfcb), 0xb4);
        // B4 0377
        gbc.setState(0xcec1, 0xa3ca, 0x2300, 0x8d58, 0xc1f9, 0xad1c, 0x0, 0x1);
        gbc.writeMem(0xcec1, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xa3ca);
        EXPECT(gbc.pc(), 0xcec2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcec1), 0xb4);
        // B4 0378
        gbc.setState(0xf36, 0xc5a, 0xdee0, 0x4dce, 0xf4a6, 0xcf76, 0x1, 0x1);
        gbc.writeMem(0xf36, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xc5a);
        EXPECT(gbc.pc(), 0xf37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0379
        gbc.setState(0xc31a, 0xccc2, 0xfd10, 0xdf71, 0x4f5, 0xfee, 0x1, 0x0);
        gbc.writeMem(0xc31a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xccc2);
        EXPECT(gbc.pc(), 0xc31b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc31a), 0xb4);
        // B4 037A
        gbc.setState(0xe00b, 0x77b8, 0x30, 0xe994, 0x92c6, 0xe138, 0x1, 0x0);
        gbc.writeMem(0xe00b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x77b8);
        EXPECT(gbc.pc(), 0xe00c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe00b), 0xb4);
        // B4 037B
        gbc.setState(0xacf9, 0x5c3b, 0xf3b0, 0x4936, 0xe986, 0x177c, 0x1, 0x0);
        gbc.writeMem(0xacf9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x5c3b);
        EXPECT(gbc.pc(), 0xacfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacf9), 0xb4);
        // B4 037C
        gbc.setState(0x9682, 0xde0f, 0xdab0, 0xa924, 0xcbfe, 0x8027, 0x0, 0x0);
        gbc.writeMem(0x9682, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xde0f);
        EXPECT(gbc.pc(), 0x9683);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9682), 0xb4);
        // B4 037D
        gbc.setState(0x372e, 0xff7c, 0xe790, 0x77ea, 0x9f0, 0x6a1c, 0x0, 0x0);
        gbc.writeMem(0x372e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xff7c);
        EXPECT(gbc.pc(), 0x372f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 037E
        gbc.setState(0xda84, 0xe41a, 0x2500, 0x53bc, 0x2814, 0xd83a, 0x0, 0x0);
        gbc.writeMem(0xda84, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xe41a);
        EXPECT(gbc.pc(), 0xda85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda84), 0xb4);
        // B4 037F
        gbc.setState(0x516c, 0x6811, 0x76f0, 0x3446, 0x77e9, 0x4c2, 0x1, 0x1);
        gbc.writeMem(0x516c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x6811);
        EXPECT(gbc.pc(), 0x516d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0380
        gbc.setState(0x7400, 0xd7a9, 0xb760, 0xf40d, 0xaea7, 0x4562, 0x0, 0x0);
        gbc.writeMem(0x7400, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xd7a9);
        EXPECT(gbc.pc(), 0x7401);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0381
        gbc.setState(0xb305, 0xcf1, 0x5d20, 0xdab6, 0x486, 0x3b8f, 0x0, 0x0);
        gbc.writeMem(0xb305, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xcf1);
        EXPECT(gbc.pc(), 0xb306);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb305), 0xb4);
        // B4 0382
        gbc.setState(0xbe50, 0xf0e7, 0x3c10, 0x82f, 0xbc24, 0x2c4d, 0x1, 0x0);
        gbc.writeMem(0xbe50, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xf0e7);
        EXPECT(gbc.pc(), 0xbe51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe50), 0xb4);
        // B4 0384
        gbc.setState(0xd90, 0x1251, 0xc830, 0x8fa3, 0xf6e9, 0x49a3, 0x1, 0x0);
        gbc.writeMem(0xd90, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x1251);
        EXPECT(gbc.pc(), 0xd91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0386
        gbc.setState(0xa689, 0x8d64, 0x700, 0x7426, 0xae2d, 0x88f9, 0x0, 0x1);
        gbc.writeMem(0xa689, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x8d64);
        EXPECT(gbc.pc(), 0xa68a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa689), 0xb4);
        // B4 0387
        gbc.setState(0x68e, 0x165e, 0x5720, 0xa98e, 0x8213, 0x7059, 0x0, 0x1);
        gbc.writeMem(0x68e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x165e);
        EXPECT(gbc.pc(), 0x68f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0388
        gbc.setState(0x609, 0xef74, 0x5fd0, 0xa1ca, 0x9af4, 0x9013, 0x0, 0x0);
        gbc.writeMem(0x609, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xef74);
        EXPECT(gbc.pc(), 0x60a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0389
        gbc.setState(0x41b8, 0xa4, 0x90e0, 0x9d5, 0x4512, 0xaa9e, 0x1, 0x1);
        gbc.writeMem(0x41b8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xa4);
        EXPECT(gbc.pc(), 0x41b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 038A
        gbc.setState(0xc74, 0xd5e0, 0xa1b0, 0x3114, 0x6cd3, 0x664b, 0x1, 0x1);
        gbc.writeMem(0xc74, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xd5e0);
        EXPECT(gbc.pc(), 0xc75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 038B
        gbc.setState(0xe91e, 0x5a32, 0x7a20, 0x16d0, 0x97aa, 0x33e3, 0x1, 0x1);
        gbc.writeMem(0xe91e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x5a32);
        EXPECT(gbc.pc(), 0xe91f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe91e), 0xb4);
        // B4 038C
        gbc.setState(0x8615, 0xc05d, 0x2cf0, 0xf498, 0xbf96, 0xc523, 0x1, 0x0);
        gbc.writeMem(0x8615, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xc05d);
        EXPECT(gbc.pc(), 0x8616);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8615), 0xb4);
        // B4 038D
        gbc.setState(0x804b, 0x1f84, 0xbae0, 0x862e, 0xf600, 0x1857, 0x1, 0x0);
        gbc.writeMem(0x804b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x1f84);
        EXPECT(gbc.pc(), 0x804c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x804b), 0xb4);
        // B4 038E
        gbc.setState(0x7e77, 0x3db0, 0xa770, 0x32f5, 0x2ae7, 0x2c0f, 0x0, 0x0);
        gbc.writeMem(0x7e77, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x3db0);
        EXPECT(gbc.pc(), 0x7e78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 038F
        gbc.setState(0xdb84, 0x2b78, 0xde0, 0xda06, 0x9529, 0x3f39, 0x0, 0x1);
        gbc.writeMem(0xdb84, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x2b78);
        EXPECT(gbc.pc(), 0xdb85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb84), 0xb4);
        // B4 0390
        gbc.setState(0x645e, 0x5ace, 0xe6f0, 0x24b3, 0x69e1, 0xe9af, 0x0, 0x0);
        gbc.writeMem(0x645e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x5ace);
        EXPECT(gbc.pc(), 0x645f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0391
        gbc.setState(0xbc84, 0xaedb, 0xbfa0, 0x9303, 0xf501, 0x9de0, 0x1, 0x0);
        gbc.writeMem(0xbc84, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xaedb);
        EXPECT(gbc.pc(), 0xbc85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc84), 0xb4);
        // B4 0392
        gbc.setState(0x33a7, 0xa599, 0xc580, 0x1e90, 0x66b5, 0xf4f7, 0x0, 0x0);
        gbc.writeMem(0x33a7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xa599);
        EXPECT(gbc.pc(), 0x33a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0393
        gbc.setState(0x482d, 0xcf78, 0xe2c0, 0xc423, 0xa5f9, 0xd3ae, 0x1, 0x1);
        gbc.writeMem(0x482d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xcf78);
        EXPECT(gbc.pc(), 0x482e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0395
        gbc.setState(0x246, 0xa759, 0x6730, 0x576d, 0x94ad, 0x18c, 0x0, 0x0);
        gbc.writeMem(0x246, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xa759);
        EXPECT(gbc.pc(), 0x247);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0396
        gbc.setState(0x42a2, 0xaa10, 0xd0f0, 0x2607, 0x24dc, 0x8b44, 0x1, 0x1);
        gbc.writeMem(0x42a2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xaa10);
        EXPECT(gbc.pc(), 0x42a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0397
        gbc.setState(0x3b84, 0xfd0c, 0x7de0, 0x2e6b, 0xd1a7, 0xe1e4, 0x1, 0x0);
        gbc.writeMem(0x3b84, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xfd0c);
        EXPECT(gbc.pc(), 0x3b85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0398
        gbc.setState(0x7093, 0xb2bb, 0xba40, 0x9d25, 0x373b, 0xc75b, 0x0, 0x1);
        gbc.writeMem(0x7093, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xb2bb);
        EXPECT(gbc.pc(), 0x7094);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 0399
        gbc.setState(0xe5c6, 0x6658, 0x65e0, 0x885e, 0xfda3, 0x4fda, 0x0, 0x0);
        gbc.writeMem(0xe5c6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x6658);
        EXPECT(gbc.pc(), 0xe5c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5c6), 0xb4);
        // B4 039B
        gbc.setState(0xc32, 0xf7ee, 0x2b60, 0x3e5e, 0xdbc5, 0xa254, 0x1, 0x0);
        gbc.writeMem(0xc32, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xf7ee);
        EXPECT(gbc.pc(), 0xc33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 039C
        gbc.setState(0x409f, 0xee89, 0x8ab0, 0x9d71, 0x7ca1, 0xdfd2, 0x1, 0x0);
        gbc.writeMem(0x409f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xee89);
        EXPECT(gbc.pc(), 0x40a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 039D
        gbc.setState(0x5c99, 0x17fe, 0xb7d0, 0x9f8c, 0x2ebd, 0x31a7, 0x1, 0x1);
        gbc.writeMem(0x5c99, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x17fe);
        EXPECT(gbc.pc(), 0x5c9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 039E
        gbc.setState(0x7148, 0x46d2, 0x8870, 0xb239, 0xd0be, 0x9867, 0x0, 0x1);
        gbc.writeMem(0x7148, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x46d2);
        EXPECT(gbc.pc(), 0x7149);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 039F
        gbc.setState(0x4ebd, 0x79ce, 0x2f10, 0xb16d, 0x1d78, 0x7250, 0x0, 0x0);
        gbc.writeMem(0x4ebd, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x79ce);
        EXPECT(gbc.pc(), 0x4ebe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03A0
        gbc.setState(0x4e5a, 0x386b, 0x1b40, 0x45aa, 0x800d, 0xfeb2, 0x0, 0x0);
        gbc.writeMem(0x4e5a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x386b);
        EXPECT(gbc.pc(), 0x4e5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03A1
        gbc.setState(0x7541, 0x41b, 0x2220, 0x4f37, 0x125f, 0x2c2f, 0x1, 0x0);
        gbc.writeMem(0x7541, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x41b);
        EXPECT(gbc.pc(), 0x7542);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03A2
        gbc.setState(0xb69a, 0x5e02, 0x1360, 0x2012, 0x23f7, 0xbb93, 0x1, 0x0);
        gbc.writeMem(0xb69a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x5e02);
        EXPECT(gbc.pc(), 0xb69b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb69a), 0xb4);
        // B4 03A3
        gbc.setState(0xacfd, 0x66de, 0x90d0, 0x444f, 0xa4fe, 0x6ff7, 0x0, 0x0);
        gbc.writeMem(0xacfd, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x66de);
        EXPECT(gbc.pc(), 0xacfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacfd), 0xb4);
        // B4 03A4
        gbc.setState(0x43c2, 0x2468, 0xdc30, 0xc2e3, 0xe4b9, 0x4db2, 0x0, 0x1);
        gbc.writeMem(0x43c2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x2468);
        EXPECT(gbc.pc(), 0x43c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03A5
        gbc.setState(0x3f31, 0xad5d, 0x97f0, 0x621, 0x17fd, 0xc3b6, 0x1, 0x0);
        gbc.writeMem(0x3f31, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xad5d);
        EXPECT(gbc.pc(), 0x3f32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03A6
        gbc.setState(0xa25b, 0x358f, 0xd1a0, 0xb29d, 0x6c29, 0x2366, 0x1, 0x0);
        gbc.writeMem(0xa25b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x358f);
        EXPECT(gbc.pc(), 0xa25c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa25b), 0xb4);
        // B4 03A7
        gbc.setState(0x87de, 0x4702, 0x70d0, 0x2eb8, 0x52, 0xbdd8, 0x0, 0x0);
        gbc.writeMem(0x87de, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x4702);
        EXPECT(gbc.pc(), 0x87df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87de), 0xb4);
        // B4 03A8
        gbc.setState(0x81a4, 0x9264, 0x4dc0, 0xde1a, 0xd82e, 0x56a, 0x0, 0x0);
        gbc.writeMem(0x81a4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x9264);
        EXPECT(gbc.pc(), 0x81a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81a4), 0xb4);
        // B4 03A9
        gbc.setState(0x1dc2, 0x301, 0x1b70, 0x2db, 0xcd2a, 0xc121, 0x0, 0x1);
        gbc.writeMem(0x1dc2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x301);
        EXPECT(gbc.pc(), 0x1dc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03AA
        gbc.setState(0x2cf8, 0xe14a, 0x8a30, 0xee55, 0x1aaa, 0xe148, 0x1, 0x0);
        gbc.writeMem(0x2cf8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xe14a);
        EXPECT(gbc.pc(), 0x2cf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03AB
        gbc.setState(0xe7d7, 0x2e55, 0xb580, 0x2b03, 0xd4e7, 0x821, 0x0, 0x1);
        gbc.writeMem(0xe7d7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x2e55);
        EXPECT(gbc.pc(), 0xe7d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7d7), 0xb4);
        // B4 03AC
        gbc.setState(0x19bf, 0x8b5f, 0xc0f0, 0x404c, 0xc468, 0x4954, 0x0, 0x0);
        gbc.writeMem(0x19bf, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x8b5f);
        EXPECT(gbc.pc(), 0x19c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03AD
        gbc.setState(0x4159, 0xe45, 0xc0d0, 0x36fc, 0x36e, 0x92b0, 0x0, 0x1);
        gbc.writeMem(0x4159, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xe45);
        EXPECT(gbc.pc(), 0x415a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03AE
        gbc.setState(0xb35d, 0xd88, 0xce20, 0xd9c2, 0xdb15, 0x1e9c, 0x1, 0x0);
        gbc.writeMem(0xb35d, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd88);
        EXPECT(gbc.pc(), 0xb35e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb35d), 0xb4);
        // B4 03AF
        gbc.setState(0x7e96, 0xb621, 0xbfb0, 0xee4c, 0x906e, 0x366f, 0x0, 0x0);
        gbc.writeMem(0x7e96, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xb621);
        EXPECT(gbc.pc(), 0x7e97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03B0
        gbc.setState(0xc5e5, 0x41a4, 0xed90, 0x5dbb, 0x1694, 0xd0e9, 0x1, 0x0);
        gbc.writeMem(0xc5e5, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x41a4);
        EXPECT(gbc.pc(), 0xc5e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5e5), 0xb4);
        // B4 03B1
        gbc.setState(0x58f8, 0x44c6, 0x14b0, 0x4735, 0xaec1, 0xf1ed, 0x1, 0x0);
        gbc.writeMem(0x58f8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x44c6);
        EXPECT(gbc.pc(), 0x58f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03B2
        gbc.setState(0xd3bd, 0x40b7, 0x13f0, 0x81ed, 0x4bc4, 0x569e, 0x1, 0x0);
        gbc.writeMem(0xd3bd, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x40b7);
        EXPECT(gbc.pc(), 0xd3be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3bd), 0xb4);
        // B4 03B3
        gbc.setState(0xb83c, 0x7104, 0xa050, 0x58f0, 0xcc66, 0x6c34, 0x0, 0x1);
        gbc.writeMem(0xb83c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x7104);
        EXPECT(gbc.pc(), 0xb83d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb83c), 0xb4);
        // B4 03B4
        gbc.setState(0xbed4, 0x6970, 0x8120, 0x40ab, 0xe3d2, 0x2f44, 0x0, 0x0);
        gbc.writeMem(0xbed4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x6970);
        EXPECT(gbc.pc(), 0xbed5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbed4), 0xb4);
        // B4 03B5
        gbc.setState(0x959b, 0x77fb, 0xd2a0, 0x159e, 0x1f04, 0x66c7, 0x0, 0x0);
        gbc.writeMem(0x959b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x77fb);
        EXPECT(gbc.pc(), 0x959c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x959b), 0xb4);
        // B4 03B6
        gbc.setState(0x40d3, 0x2d38, 0xeda0, 0xd7b1, 0xac0c, 0x65c3, 0x1, 0x0);
        gbc.writeMem(0x40d3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x2d38);
        EXPECT(gbc.pc(), 0x40d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03B7
        gbc.setState(0x3c34, 0xa98a, 0x6c60, 0xffbe, 0x7405, 0x2b3c, 0x0, 0x0);
        gbc.writeMem(0x3c34, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xa98a);
        EXPECT(gbc.pc(), 0x3c35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03B8
        gbc.setState(0xdc08, 0xc437, 0x6440, 0x2a33, 0x7dff, 0x56fb, 0x0, 0x0);
        gbc.writeMem(0xdc08, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xc437);
        EXPECT(gbc.pc(), 0xdc09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc08), 0xb4);
        // B4 03B9
        gbc.setState(0x3c03, 0x9fcc, 0xf200, 0xb2d5, 0xecb7, 0x9252, 0x1, 0x1);
        gbc.writeMem(0x3c03, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x9fcc);
        EXPECT(gbc.pc(), 0x3c04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03BA
        gbc.setState(0xc0ca, 0xab66, 0x89c0, 0x6d33, 0xfa7d, 0xa191, 0x0, 0x0);
        gbc.writeMem(0xc0ca, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xab66);
        EXPECT(gbc.pc(), 0xc0cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0ca), 0xb4);
        // B4 03BB
        gbc.setState(0x2d3f, 0xf4ba, 0x1560, 0x7ea0, 0xdb71, 0xb9ae, 0x1, 0x0);
        gbc.writeMem(0x2d3f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xf4ba);
        EXPECT(gbc.pc(), 0x2d40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03BC
        gbc.setState(0x107c, 0x149, 0xd5c0, 0xae4f, 0x5afb, 0x4c80, 0x1, 0x0);
        gbc.writeMem(0x107c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x149);
        EXPECT(gbc.pc(), 0x107d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03BD
        gbc.setState(0x2394, 0xa7c0, 0x53f0, 0x2e19, 0x5fe8, 0xc648, 0x0, 0x1);
        gbc.writeMem(0x2394, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xa7c0);
        EXPECT(gbc.pc(), 0x2395);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03BE
        gbc.setState(0x3bf6, 0xc107, 0xe440, 0x13fa, 0x6881, 0x9989, 0x1, 0x0);
        gbc.writeMem(0x3bf6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc107);
        EXPECT(gbc.pc(), 0x3bf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03BF
        gbc.setState(0x9720, 0xa316, 0x4560, 0x5f63, 0xd6c3, 0x69d2, 0x1, 0x1);
        gbc.writeMem(0x9720, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa316);
        EXPECT(gbc.pc(), 0x9721);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9720), 0xb4);
        // B4 03C0
        gbc.setState(0x9483, 0xca9f, 0x6310, 0x3198, 0xfe0d, 0xd9d7, 0x0, 0x1);
        gbc.writeMem(0x9483, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xca9f);
        EXPECT(gbc.pc(), 0x9484);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9483), 0xb4);
        // B4 03C1
        gbc.setState(0x74ae, 0x9a69, 0x3a70, 0x955c, 0xe7bb, 0x8700, 0x1, 0x0);
        gbc.writeMem(0x74ae, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x9a69);
        EXPECT(gbc.pc(), 0x74af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03C2
        gbc.setState(0xbe74, 0xde0, 0x7280, 0x64e6, 0xaadc, 0x9444, 0x0, 0x1);
        gbc.writeMem(0xbe74, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xde0);
        EXPECT(gbc.pc(), 0xbe75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe74), 0xb4);
        // B4 03C3
        gbc.setState(0x6f98, 0x82e3, 0xae80, 0xe330, 0xeeff, 0x3e51, 0x1, 0x0);
        gbc.writeMem(0x6f98, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x82e3);
        EXPECT(gbc.pc(), 0x6f99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03C4
        gbc.setState(0x7fdf, 0xb59c, 0xe880, 0xb8f0, 0x590a, 0xe37b, 0x1, 0x0);
        gbc.writeMem(0x7fdf, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xb59c);
        EXPECT(gbc.pc(), 0x7fe0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03C5
        gbc.setState(0x1ddc, 0xc070, 0xb3f0, 0x27ba, 0x4401, 0x3bdd, 0x1, 0x1);
        gbc.writeMem(0x1ddc, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xc070);
        EXPECT(gbc.pc(), 0x1ddd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03C6
        gbc.setState(0xb853, 0x7f98, 0xee70, 0xbf44, 0xd3b7, 0x4b44, 0x1, 0x0);
        gbc.writeMem(0xb853, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x7f98);
        EXPECT(gbc.pc(), 0xb854);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb853), 0xb4);
        // B4 03C7
        gbc.setState(0xae1b, 0x135d, 0x64a0, 0xe275, 0x14e4, 0xdea5, 0x1, 0x1);
        gbc.writeMem(0xae1b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x135d);
        EXPECT(gbc.pc(), 0xae1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae1b), 0xb4);
        // B4 03C8
        gbc.setState(0x1e58, 0xc620, 0xe580, 0x6a7b, 0x5e6b, 0x3a4e, 0x0, 0x1);
        gbc.writeMem(0x1e58, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xc620);
        EXPECT(gbc.pc(), 0x1e59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03C9
        gbc.setState(0x72ad, 0x1966, 0x9fb0, 0x8e98, 0x26a5, 0xab9c, 0x1, 0x0);
        gbc.writeMem(0x72ad, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x1966);
        EXPECT(gbc.pc(), 0x72ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03CA
        gbc.setState(0x5a10, 0x1ef2, 0xd330, 0xa2ec, 0x159c, 0x6a6d, 0x0, 0x0);
        gbc.writeMem(0x5a10, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x1ef2);
        EXPECT(gbc.pc(), 0x5a11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03CB
        gbc.setState(0xbe4e, 0xc7a0, 0x7020, 0x449d, 0x22c1, 0x595f, 0x1, 0x0);
        gbc.writeMem(0xbe4e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xc7a0);
        EXPECT(gbc.pc(), 0xbe4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe4e), 0xb4);
        // B4 03CC
        gbc.setState(0x72e0, 0xf83d, 0x9d80, 0xa066, 0xdd8b, 0x5cab, 0x0, 0x1);
        gbc.writeMem(0x72e0, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xf83d);
        EXPECT(gbc.pc(), 0x72e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03CD
        gbc.setState(0x8084, 0x2a20, 0x2160, 0x3191, 0x13ee, 0xbef, 0x0, 0x1);
        gbc.writeMem(0x8084, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x2a20);
        EXPECT(gbc.pc(), 0x8085);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8084), 0xb4);
        // B4 03CE
        gbc.setState(0x7d7c, 0x2486, 0x4670, 0x4443, 0xc9dd, 0x7f71, 0x1, 0x1);
        gbc.writeMem(0x7d7c, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x2486);
        EXPECT(gbc.pc(), 0x7d7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03CF
        gbc.setState(0xe3a, 0x8294, 0xe1b0, 0x6662, 0x8190, 0xc531, 0x0, 0x1);
        gbc.writeMem(0xe3a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x8294);
        EXPECT(gbc.pc(), 0xe3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03D0
        gbc.setState(0x758f, 0xfc8c, 0xf070, 0x90be, 0xc19e, 0xac53, 0x0, 0x0);
        gbc.writeMem(0x758f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xfc8c);
        EXPECT(gbc.pc(), 0x7590);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03D1
        gbc.setState(0x5fd2, 0xd9b0, 0x2f60, 0x7a3, 0x5ed7, 0x2ab6, 0x1, 0x1);
        gbc.writeMem(0x5fd2, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xd9b0);
        EXPECT(gbc.pc(), 0x5fd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03D2
        gbc.setState(0x903, 0xe002, 0x21e0, 0x7efa, 0xbf52, 0x3ced, 0x0, 0x1);
        gbc.writeMem(0x903, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe002);
        EXPECT(gbc.pc(), 0x904);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03D3
        gbc.setState(0x8235, 0x8656, 0x4fb0, 0x724d, 0x636a, 0x8d08, 0x0, 0x1);
        gbc.writeMem(0x8235, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x8656);
        EXPECT(gbc.pc(), 0x8236);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8235), 0xb4);
        // B4 03D5
        gbc.setState(0xcdb8, 0x1fc6, 0x9960, 0xb0c7, 0x52f5, 0x7c31, 0x0, 0x1);
        gbc.writeMem(0xcdb8, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x1fc6);
        EXPECT(gbc.pc(), 0xcdb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdb8), 0xb4);
        // B4 03D6
        gbc.setState(0x50f7, 0x1c1e, 0x3b90, 0xbffe, 0xace2, 0xe654, 0x1, 0x1);
        gbc.writeMem(0x50f7, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x1c1e);
        EXPECT(gbc.pc(), 0x50f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03D7
        gbc.setState(0x3800, 0x1ae, 0x68c0, 0xe621, 0x4e84, 0x920f, 0x1, 0x1);
        gbc.writeMem(0x3800, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x1ae);
        EXPECT(gbc.pc(), 0x3801);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03D8
        gbc.setState(0x3423, 0x1ff7, 0x6080, 0xc3f3, 0xdb43, 0x373b, 0x1, 0x1);
        gbc.writeMem(0x3423, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x1ff7);
        EXPECT(gbc.pc(), 0x3424);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03D9
        gbc.setState(0x7947, 0x9724, 0xe970, 0xd893, 0x93a8, 0x12c7, 0x0, 0x1);
        gbc.writeMem(0x7947, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x9724);
        EXPECT(gbc.pc(), 0x7948);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03DA
        gbc.setState(0x7991, 0x86d0, 0x2650, 0x4fb2, 0x87a9, 0x2b75, 0x0, 0x0);
        gbc.writeMem(0x7991, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x86d0);
        EXPECT(gbc.pc(), 0x7992);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03DB
        gbc.setState(0x884e, 0x306c, 0x8500, 0xd84e, 0x705d, 0x37f0, 0x0, 0x0);
        gbc.writeMem(0x884e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x306c);
        EXPECT(gbc.pc(), 0x884f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x884e), 0xb4);
        // B4 03DC
        gbc.setState(0xf93, 0x414e, 0xdb80, 0xf532, 0x1fb5, 0x8e99, 0x0, 0x0);
        gbc.writeMem(0xf93, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x414e);
        EXPECT(gbc.pc(), 0xf94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03DD
        gbc.setState(0xa0c1, 0x2d5, 0xf670, 0x8850, 0x739, 0xdc4, 0x1, 0x0);
        gbc.writeMem(0xa0c1, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x2d5);
        EXPECT(gbc.pc(), 0xa0c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0c1), 0xb4);
        // B4 03DE
        gbc.setState(0x565f, 0x5b18, 0x2c90, 0x21f4, 0xe770, 0x2aad, 0x1, 0x0);
        gbc.writeMem(0x565f, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x5b18);
        EXPECT(gbc.pc(), 0x5660);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03DF
        gbc.setState(0x478a, 0xfbda, 0xc4d0, 0xfb97, 0xc1e9, 0xdfa9, 0x0, 0x0);
        gbc.writeMem(0x478a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xfbda);
        EXPECT(gbc.pc(), 0x478b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03E0
        gbc.setState(0x7a81, 0x52a7, 0x1890, 0xb2c, 0x88a, 0xa4d6, 0x1, 0x0);
        gbc.writeMem(0x7a81, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x52a7);
        EXPECT(gbc.pc(), 0x7a82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03E1
        gbc.setState(0xd5ae, 0xa802, 0xc4c0, 0x3cfc, 0xf49, 0x8b58, 0x0, 0x1);
        gbc.writeMem(0xd5ae, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xa802);
        EXPECT(gbc.pc(), 0xd5af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5ae), 0xb4);
        // B4 03E3
        gbc.setState(0x2826, 0x59e1, 0x3bc0, 0xb501, 0x42a0, 0x260b, 0x0, 0x1);
        gbc.writeMem(0x2826, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x59e1);
        EXPECT(gbc.pc(), 0x2827);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03E4
        gbc.setState(0x5477, 0x3043, 0xcb20, 0x8d5d, 0x4c3a, 0x2c0d, 0x0, 0x0);
        gbc.writeMem(0x5477, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x3043);
        EXPECT(gbc.pc(), 0x5478);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03E5
        gbc.setState(0x18d4, 0x781c, 0x8f00, 0x716d, 0x2dc9, 0xbba2, 0x1, 0x0);
        gbc.writeMem(0x18d4, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x781c);
        EXPECT(gbc.pc(), 0x18d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03E6
        gbc.setState(0xd34, 0xf460, 0x62d0, 0xcccc, 0xaa9c, 0x477b, 0x1, 0x1);
        gbc.writeMem(0xd34, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xf460);
        EXPECT(gbc.pc(), 0xd35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // B4 03E7
        gbc.setState(0xd5a1, 0xd900, 0xd8e0, 0x756, 0x72e8, 0xbc43, 0x1, 0x1);
        gbc.writeMem(0xd5a1, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xd900);
        EXPECT(gbc.pc(), 0xd5a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5a1), 0xb4);
    }
