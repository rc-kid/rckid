#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_6b)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_6b) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 6B 0000
        gbc.setState(0xcd30, 0xc54c, 0xc430, 0x4c34, 0xaaa3, 0x5fbf, 0x0, 0x0);
        gbc.writeMem(0xcd30, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xc54c);
        EXPECT(gbc.pc(), 0xcd31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd30), 0x6b);
        // 6B 0001
        gbc.setState(0x7374, 0x717b, 0x7330, 0xafc7, 0x8375, 0x7f7c, 0x0, 0x1);
        gbc.writeMem(0x7374, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x717b);
        EXPECT(gbc.pc(), 0x7375);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0002
        gbc.setState(0x352e, 0x2d87, 0x5f10, 0x3c5a, 0xa904, 0xf910, 0x1, 0x1);
        gbc.writeMem(0x352e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x2d87);
        EXPECT(gbc.pc(), 0x352f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0003
        gbc.setState(0xdf28, 0xa6f, 0x1050, 0xf7a8, 0x9ef1, 0x121b, 0x0, 0x1);
        gbc.writeMem(0xdf28, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xa6f);
        EXPECT(gbc.pc(), 0xdf29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf28), 0x6b);
        // 6B 0004
        gbc.setState(0xa62f, 0x612b, 0x3c20, 0xd7b8, 0x40eb, 0x338c, 0x1, 0x0);
        gbc.writeMem(0xa62f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x612b);
        EXPECT(gbc.pc(), 0xa630);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa62f), 0x6b);
        // 6B 0005
        gbc.setState(0x44fd, 0xaca8, 0x7b90, 0xe039, 0xd7ff, 0xa7c5, 0x1, 0x1);
        gbc.writeMem(0x44fd, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xaca8);
        EXPECT(gbc.pc(), 0x44fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0006
        gbc.setState(0x586a, 0xa2f6, 0xdb70, 0x6c9c, 0x8507, 0xd81b, 0x0, 0x1);
        gbc.writeMem(0x586a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xa2f6);
        EXPECT(gbc.pc(), 0x586b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0007
        gbc.setState(0x84f9, 0x1d93, 0x23d0, 0x7afc, 0x2f62, 0x8b34, 0x1, 0x1);
        gbc.writeMem(0x84f9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x1d93);
        EXPECT(gbc.pc(), 0x84fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84f9), 0x6b);
        // 6B 0008
        gbc.setState(0x68fc, 0xba43, 0xfd50, 0x105b, 0x42a7, 0xf626, 0x0, 0x0);
        gbc.writeMem(0x68fc, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xba43);
        EXPECT(gbc.pc(), 0x68fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0009
        gbc.setState(0x7a14, 0xbc75, 0x3ce0, 0x7ae4, 0xb063, 0x1cba, 0x1, 0x0);
        gbc.writeMem(0x7a14, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xbc75);
        EXPECT(gbc.pc(), 0x7a15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 000A
        gbc.setState(0xb7dc, 0x634c, 0x7fc0, 0x9a9, 0x626b, 0x22f6, 0x1, 0x1);
        gbc.writeMem(0xb7dc, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x634c);
        EXPECT(gbc.pc(), 0xb7dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7dc), 0x6b);
        // 6B 000B
        gbc.setState(0x9ed2, 0x2632, 0x40e0, 0xaccd, 0x7566, 0xd099, 0x1, 0x0);
        gbc.writeMem(0x9ed2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x2632);
        EXPECT(gbc.pc(), 0x9ed3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ed2), 0x6b);
        // 6B 000C
        gbc.setState(0xef8a, 0x425a, 0x6560, 0x6fb, 0x4252, 0x222a, 0x1, 0x0);
        gbc.writeMem(0xef8a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x425a);
        EXPECT(gbc.pc(), 0xef8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef8a), 0x6b);
        // 6B 000D
        gbc.setState(0xaa0f, 0x9cd5, 0x47c0, 0x434, 0xcd26, 0x2965, 0x1, 0x0);
        gbc.writeMem(0xaa0f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x9cd5);
        EXPECT(gbc.pc(), 0xaa10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa0f), 0x6b);
        // 6B 000E
        gbc.setState(0x7d22, 0x2478, 0x1b90, 0xaa95, 0x8574, 0x60d6, 0x0, 0x0);
        gbc.writeMem(0x7d22, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x2478);
        EXPECT(gbc.pc(), 0x7d23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 000F
        gbc.setState(0x6014, 0xc089, 0xb600, 0x63, 0x17aa, 0xa71e, 0x1, 0x1);
        gbc.writeMem(0x6014, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xc089);
        EXPECT(gbc.pc(), 0x6015);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0010
        gbc.setState(0x62c1, 0x4879, 0x3370, 0x3269, 0x829e, 0xfcbb, 0x0, 0x1);
        gbc.writeMem(0x62c1, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x4879);
        EXPECT(gbc.pc(), 0x62c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0011
        gbc.setState(0x912b, 0xe1ed, 0x5e80, 0xaf84, 0x8b13, 0x7011, 0x1, 0x0);
        gbc.writeMem(0x912b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xe1ed);
        EXPECT(gbc.pc(), 0x912c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x912b), 0x6b);
        // 6B 0012
        gbc.setState(0xb537, 0x5308, 0x2740, 0x267a, 0x388b, 0x67d9, 0x1, 0x1);
        gbc.writeMem(0xb537, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x5308);
        EXPECT(gbc.pc(), 0xb538);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb537), 0x6b);
        // 6B 0013
        gbc.setState(0x36fc, 0x9521, 0x7590, 0xca4f, 0x7012, 0x5183, 0x1, 0x1);
        gbc.writeMem(0x36fc, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x9521);
        EXPECT(gbc.pc(), 0x36fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0014
        gbc.setState(0xdbe6, 0xf2a1, 0x7010, 0xa2e7, 0x71bd, 0xe5de, 0x1, 0x0);
        gbc.writeMem(0xdbe6, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xf2a1);
        EXPECT(gbc.pc(), 0xdbe7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbe6), 0x6b);
        // 6B 0015
        gbc.setState(0x5572, 0x5ca, 0x71b0, 0x4e0c, 0xcec0, 0xe38f, 0x0, 0x1);
        gbc.writeMem(0x5572, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x5ca);
        EXPECT(gbc.pc(), 0x5573);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0016
        gbc.setState(0x3cf4, 0xa127, 0x160, 0x9f36, 0x5095, 0xca20, 0x0, 0x0);
        gbc.writeMem(0x3cf4, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa127);
        EXPECT(gbc.pc(), 0x3cf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0017
        gbc.setState(0xd8d0, 0x3e35, 0xefc0, 0xb588, 0x5a49, 0xb8b6, 0x0, 0x1);
        gbc.writeMem(0xd8d0, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x3e35);
        EXPECT(gbc.pc(), 0xd8d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8d0), 0x6b);
        // 6B 0018
        gbc.setState(0x6cd5, 0x88ae, 0x7930, 0x3eaf, 0x24ec, 0xf3f2, 0x1, 0x0);
        gbc.writeMem(0x6cd5, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x88ae);
        EXPECT(gbc.pc(), 0x6cd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0019
        gbc.setState(0xb650, 0x36dc, 0x1540, 0x65d4, 0x972e, 0x38f3, 0x0, 0x1);
        gbc.writeMem(0xb650, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x36dc);
        EXPECT(gbc.pc(), 0xb651);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb650), 0x6b);
        // 6B 001B
        gbc.setState(0x9a93, 0xb9b4, 0xd0d0, 0x24ab, 0x6416, 0xea33, 0x1, 0x0);
        gbc.writeMem(0x9a93, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xb9b4);
        EXPECT(gbc.pc(), 0x9a94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a93), 0x6b);
        // 6B 001C
        gbc.setState(0x64e5, 0x886e, 0xcf50, 0xa706, 0x1be4, 0xb740, 0x1, 0x1);
        gbc.writeMem(0x64e5, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x886e);
        EXPECT(gbc.pc(), 0x64e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 001D
        gbc.setState(0xe13d, 0x5ed8, 0x3fd0, 0x40db, 0xb18f, 0x9bf3, 0x1, 0x1);
        gbc.writeMem(0xe13d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x5ed8);
        EXPECT(gbc.pc(), 0xe13e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe13d), 0x6b);
        // 6B 001E
        gbc.setState(0xab80, 0xb16, 0x56f0, 0x40e4, 0x6449, 0x5627, 0x1, 0x0);
        gbc.writeMem(0xab80, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xb16);
        EXPECT(gbc.pc(), 0xab81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab80), 0x6b);
        // 6B 001F
        gbc.setState(0xa58e, 0x1cf3, 0x1a70, 0xd719, 0xe73c, 0x645c, 0x0, 0x1);
        gbc.writeMem(0xa58e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x1cf3);
        EXPECT(gbc.pc(), 0xa58f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa58e), 0x6b);
        // 6B 0020
        gbc.setState(0x53df, 0x5b7, 0x3570, 0x6784, 0x3a48, 0xdbcb, 0x1, 0x0);
        gbc.writeMem(0x53df, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x5b7);
        EXPECT(gbc.pc(), 0x53e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0021
        gbc.setState(0x2861, 0xf90c, 0x1470, 0x39c1, 0x9a7e, 0x225a, 0x1, 0x0);
        gbc.writeMem(0x2861, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xf90c);
        EXPECT(gbc.pc(), 0x2862);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0022
        gbc.setState(0xcf8c, 0x320b, 0x80d0, 0x12cd, 0x316f, 0xd5e0, 0x1, 0x0);
        gbc.writeMem(0xcf8c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x320b);
        EXPECT(gbc.pc(), 0xcf8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf8c), 0x6b);
        // 6B 0023
        gbc.setState(0xbb08, 0xb60e, 0x2a30, 0xa583, 0x91e8, 0x2097, 0x0, 0x0);
        gbc.writeMem(0xbb08, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xb60e);
        EXPECT(gbc.pc(), 0xbb09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb08), 0x6b);
        // 6B 0024
        gbc.setState(0xc9f7, 0x230a, 0x95e0, 0xc652, 0xdfc0, 0x2301, 0x1, 0x1);
        gbc.writeMem(0xc9f7, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x230a);
        EXPECT(gbc.pc(), 0xc9f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9f7), 0x6b);
        // 6B 0026
        gbc.setState(0x6e99, 0x9494, 0xb010, 0x1cf8, 0x7fae, 0x7b03, 0x0, 0x1);
        gbc.writeMem(0x6e99, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x9494);
        EXPECT(gbc.pc(), 0x6e9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0027
        gbc.setState(0x2824, 0xd277, 0x6260, 0x3993, 0x2e6d, 0x84a8, 0x1, 0x1);
        gbc.writeMem(0x2824, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xd277);
        EXPECT(gbc.pc(), 0x2825);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0028
        gbc.setState(0x29b1, 0x610a, 0xad0, 0xfb6b, 0xffe8, 0x60cf, 0x1, 0x1);
        gbc.writeMem(0x29b1, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x610a);
        EXPECT(gbc.pc(), 0x29b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0029
        gbc.setState(0x5cc4, 0xc46a, 0x55f0, 0x8869, 0x1f13, 0xd087, 0x0, 0x1);
        gbc.writeMem(0x5cc4, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xc46a);
        EXPECT(gbc.pc(), 0x5cc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 002A
        gbc.setState(0x459e, 0x5626, 0x33f0, 0xf04c, 0xa395, 0x5f7b, 0x1, 0x0);
        gbc.writeMem(0x459e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x5626);
        EXPECT(gbc.pc(), 0x459f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 002B
        gbc.setState(0x6cc7, 0x50, 0x1160, 0x5913, 0x6734, 0x66e1, 0x0, 0x0);
        gbc.writeMem(0x6cc7, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x50);
        EXPECT(gbc.pc(), 0x6cc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 002C
        gbc.setState(0x3f0c, 0x5c4c, 0x20a0, 0x504c, 0x2f88, 0x73d8, 0x0, 0x1);
        gbc.writeMem(0x3f0c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x5c4c);
        EXPECT(gbc.pc(), 0x3f0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 002D
        gbc.setState(0xa86e, 0xfa8e, 0x6490, 0xf0e5, 0x788e, 0x6e6d, 0x0, 0x1);
        gbc.writeMem(0xa86e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xfa8e);
        EXPECT(gbc.pc(), 0xa86f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa86e), 0x6b);
        // 6B 002F
        gbc.setState(0x9ce9, 0x248e, 0x5040, 0xf9ca, 0x38e5, 0x8377, 0x1, 0x0);
        gbc.writeMem(0x9ce9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x248e);
        EXPECT(gbc.pc(), 0x9cea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ce9), 0x6b);
        // 6B 0030
        gbc.setState(0x3673, 0x20da, 0x32b0, 0x4a92, 0x1cd, 0x3920, 0x0, 0x1);
        gbc.writeMem(0x3673, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x20da);
        EXPECT(gbc.pc(), 0x3674);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0031
        gbc.setState(0x9bef, 0x1f36, 0x3d80, 0x1ee6, 0xcc70, 0x98c1, 0x0, 0x1);
        gbc.writeMem(0x9bef, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x1f36);
        EXPECT(gbc.pc(), 0x9bf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bef), 0x6b);
        // 6B 0033
        gbc.setState(0x12de, 0xdf1e, 0xafe0, 0x4115, 0x94cf, 0x8305, 0x1, 0x1);
        gbc.writeMem(0x12de, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xdf1e);
        EXPECT(gbc.pc(), 0x12df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0034
        gbc.setState(0x32d4, 0x7dc0, 0x6540, 0xa4e4, 0x648, 0x7dae, 0x0, 0x0);
        gbc.writeMem(0x32d4, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x7dc0);
        EXPECT(gbc.pc(), 0x32d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0035
        gbc.setState(0xefe6, 0xc591, 0x9680, 0x2232, 0x7d9b, 0xfd4c, 0x1, 0x1);
        gbc.writeMem(0xefe6, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xc591);
        EXPECT(gbc.pc(), 0xefe7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefe6), 0x6b);
        // 6B 0036
        gbc.setState(0xeca3, 0x4430, 0xf3a0, 0x9b12, 0x7e4b, 0x58e2, 0x1, 0x1);
        gbc.writeMem(0xeca3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x4430);
        EXPECT(gbc.pc(), 0xeca4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeca3), 0x6b);
        // 6B 0037
        gbc.setState(0x19a7, 0xc889, 0x3d90, 0x9a92, 0x2068, 0xccc1, 0x0, 0x1);
        gbc.writeMem(0x19a7, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xc889);
        EXPECT(gbc.pc(), 0x19a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0038
        gbc.setState(0xbef8, 0xa610, 0xf930, 0x1553, 0x5f0d, 0x4ed, 0x0, 0x1);
        gbc.writeMem(0xbef8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xa610);
        EXPECT(gbc.pc(), 0xbef9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbef8), 0x6b);
        // 6B 0039
        gbc.setState(0xa76b, 0x1962, 0xc4f0, 0x780, 0xa4c6, 0x80a6, 0x1, 0x0);
        gbc.writeMem(0xa76b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x1962);
        EXPECT(gbc.pc(), 0xa76c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa76b), 0x6b);
        // 6B 003A
        gbc.setState(0x6970, 0xde2e, 0xacb0, 0xc86a, 0x8260, 0x7cea, 0x0, 0x0);
        gbc.writeMem(0x6970, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xde2e);
        EXPECT(gbc.pc(), 0x6971);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 003B
        gbc.setState(0xc0dd, 0x922b, 0x7690, 0x3efd, 0x1b60, 0x2dc0, 0x1, 0x1);
        gbc.writeMem(0xc0dd, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x922b);
        EXPECT(gbc.pc(), 0xc0de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0dd), 0x6b);
        // 6B 003C
        gbc.setState(0x1ba0, 0x9014, 0xda00, 0xefb5, 0x7fea, 0x7572, 0x0, 0x0);
        gbc.writeMem(0x1ba0, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x9014);
        EXPECT(gbc.pc(), 0x1ba1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 003D
        gbc.setState(0xb5a, 0xfc1, 0x9020, 0x5ecd, 0x8cec, 0x610a, 0x0, 0x1);
        gbc.writeMem(0xb5a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xfc1);
        EXPECT(gbc.pc(), 0xb5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 003E
        gbc.setState(0x9fa7, 0xb949, 0x43a0, 0x1270, 0x65a7, 0xa265, 0x1, 0x1);
        gbc.writeMem(0x9fa7, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xb949);
        EXPECT(gbc.pc(), 0x9fa8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fa7), 0x6b);
        // 6B 003F
        gbc.setState(0x9fa0, 0x4985, 0x8ec0, 0x3578, 0x5a9b, 0x9918, 0x1, 0x0);
        gbc.writeMem(0x9fa0, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x4985);
        EXPECT(gbc.pc(), 0x9fa1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fa0), 0x6b);
        // 6B 0040
        gbc.setState(0x9eba, 0x3380, 0x1070, 0x6f20, 0x939d, 0x13e2, 0x0, 0x1);
        gbc.writeMem(0x9eba, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x3380);
        EXPECT(gbc.pc(), 0x9ebb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9eba), 0x6b);
        // 6B 0041
        gbc.setState(0x82, 0x737c, 0x7180, 0xfd87, 0x2cd5, 0x1e20, 0x1, 0x0);
        gbc.writeMem(0x82, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x737c);
        EXPECT(gbc.pc(), 0x83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0042
        gbc.setState(0x87c9, 0x12bc, 0x6d80, 0x2300, 0xb939, 0xee89, 0x1, 0x0);
        gbc.writeMem(0x87c9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x12bc);
        EXPECT(gbc.pc(), 0x87ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87c9), 0x6b);
        // 6B 0043
        gbc.setState(0xd263, 0xa7f5, 0x30, 0x6d06, 0x9325, 0xfcdc, 0x1, 0x0);
        gbc.writeMem(0xd263, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xa7f5);
        EXPECT(gbc.pc(), 0xd264);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd263), 0x6b);
        // 6B 0044
        gbc.setState(0xccd8, 0xf435, 0xd150, 0x3b2e, 0xdf62, 0xfe17, 0x1, 0x1);
        gbc.writeMem(0xccd8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xf435);
        EXPECT(gbc.pc(), 0xccd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccd8), 0x6b);
        // 6B 0045
        gbc.setState(0x3032, 0xd4fa, 0x9160, 0x667b, 0x1517, 0x91ee, 0x1, 0x1);
        gbc.writeMem(0x3032, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xd4fa);
        EXPECT(gbc.pc(), 0x3033);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0046
        gbc.setState(0xd72a, 0x7293, 0xbd20, 0x3f6f, 0x73bc, 0x37c8, 0x0, 0x1);
        gbc.writeMem(0xd72a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x7293);
        EXPECT(gbc.pc(), 0xd72b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd72a), 0x6b);
        // 6B 0047
        gbc.setState(0x751, 0xe768, 0x730, 0xcdc5, 0x1c4e, 0xb6e5, 0x1, 0x0);
        gbc.writeMem(0x751, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xe768);
        EXPECT(gbc.pc(), 0x752);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0048
        gbc.setState(0xa010, 0xbe26, 0x21d0, 0x8ed4, 0x3c80, 0x5798, 0x1, 0x0);
        gbc.writeMem(0xa010, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xbe26);
        EXPECT(gbc.pc(), 0xa011);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa010), 0x6b);
        // 6B 0049
        gbc.setState(0xb19f, 0xfb4a, 0x3b0, 0xeca9, 0xa6df, 0xef07, 0x0, 0x1);
        gbc.writeMem(0xb19f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xfb4a);
        EXPECT(gbc.pc(), 0xb1a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb19f), 0x6b);
        // 6B 004A
        gbc.setState(0x89b8, 0xa24, 0x3e50, 0xbe4, 0x9878, 0x74f8, 0x0, 0x0);
        gbc.writeMem(0x89b8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xa24);
        EXPECT(gbc.pc(), 0x89b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89b8), 0x6b);
        // 6B 004C
        gbc.setState(0xe63a, 0x553, 0x1110, 0x8a47, 0x8461, 0x3051, 0x0, 0x1);
        gbc.writeMem(0xe63a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x553);
        EXPECT(gbc.pc(), 0xe63b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe63a), 0x6b);
        // 6B 004D
        gbc.setState(0x5913, 0xf203, 0xd9c0, 0xaaf3, 0x5a8e, 0xb140, 0x1, 0x1);
        gbc.writeMem(0x5913, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xf203);
        EXPECT(gbc.pc(), 0x5914);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 004E
        gbc.setState(0x856d, 0x44d2, 0xd860, 0xd1f1, 0xf9fd, 0xf1ef, 0x1, 0x1);
        gbc.writeMem(0x856d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x44d2);
        EXPECT(gbc.pc(), 0x856e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x856d), 0x6b);
        // 6B 004F
        gbc.setState(0xd364, 0x8a16, 0xc0d0, 0x6066, 0x28b9, 0xb438, 0x0, 0x0);
        gbc.writeMem(0xd364, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x8a16);
        EXPECT(gbc.pc(), 0xd365);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd364), 0x6b);
        // 6B 0050
        gbc.setState(0x6ece, 0x4149, 0x3910, 0xa97f, 0xfa7, 0x81b9, 0x0, 0x1);
        gbc.writeMem(0x6ece, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x4149);
        EXPECT(gbc.pc(), 0x6ecf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0051
        gbc.setState(0x8787, 0x38c6, 0x63d0, 0x205d, 0xa64f, 0x1aa0, 0x0, 0x1);
        gbc.writeMem(0x8787, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x38c6);
        EXPECT(gbc.pc(), 0x8788);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8787), 0x6b);
        // 6B 0052
        gbc.setState(0x7015, 0x6a98, 0x5f90, 0x66d5, 0x3772, 0xcb6c, 0x0, 0x1);
        gbc.writeMem(0x7015, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x6a98);
        EXPECT(gbc.pc(), 0x7016);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0053
        gbc.setState(0x3617, 0xdb9c, 0xdf70, 0xf84a, 0x4e65, 0xe498, 0x0, 0x0);
        gbc.writeMem(0x3617, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xdb9c);
        EXPECT(gbc.pc(), 0x3618);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0054
        gbc.setState(0x6dff, 0x337f, 0x2d50, 0xd9b0, 0xceea, 0xd4c9, 0x0, 0x0);
        gbc.writeMem(0x6dff, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x337f);
        EXPECT(gbc.pc(), 0x6e00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0055
        gbc.setState(0x6cd2, 0x8ecf, 0x6900, 0x39d2, 0xefc5, 0x13a9, 0x0, 0x1);
        gbc.writeMem(0x6cd2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x8ecf);
        EXPECT(gbc.pc(), 0x6cd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0056
        gbc.setState(0x49f9, 0x1e5c, 0x9e00, 0x81ed, 0xdb5a, 0x2930, 0x0, 0x0);
        gbc.writeMem(0x49f9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x1e5c);
        EXPECT(gbc.pc(), 0x49fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0057
        gbc.setState(0xe51c, 0x29a5, 0x8ab0, 0xff31, 0x40c5, 0x1311, 0x0, 0x0);
        gbc.writeMem(0xe51c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x29a5);
        EXPECT(gbc.pc(), 0xe51d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe51c), 0x6b);
        // 6B 0058
        gbc.setState(0x4bd4, 0x96c8, 0x9f30, 0xf63c, 0x781f, 0x7184, 0x0, 0x0);
        gbc.writeMem(0x4bd4, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x96c8);
        EXPECT(gbc.pc(), 0x4bd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0059
        gbc.setState(0xe976, 0xee37, 0x5ad0, 0x8df8, 0x183d, 0x21a8, 0x1, 0x0);
        gbc.writeMem(0xe976, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xee37);
        EXPECT(gbc.pc(), 0xe977);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe976), 0x6b);
        // 6B 005A
        gbc.setState(0x4c34, 0x3577, 0xe280, 0xbabc, 0xf3ed, 0x95f3, 0x0, 0x0);
        gbc.writeMem(0x4c34, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x3577);
        EXPECT(gbc.pc(), 0x4c35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 005B
        gbc.setState(0xda5e, 0x5bba, 0x6a00, 0x29c5, 0x1b5a, 0x4da5, 0x1, 0x0);
        gbc.writeMem(0xda5e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x5bba);
        EXPECT(gbc.pc(), 0xda5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda5e), 0x6b);
        // 6B 005C
        gbc.setState(0x7b67, 0x1db1, 0x25a0, 0xfdea, 0x44b3, 0x321d, 0x0, 0x1);
        gbc.writeMem(0x7b67, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x1db1);
        EXPECT(gbc.pc(), 0x7b68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 005D
        gbc.setState(0xee, 0x7f93, 0xdb70, 0xf666, 0xe402, 0x90b2, 0x0, 0x0);
        gbc.writeMem(0xee, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x7f93);
        EXPECT(gbc.pc(), 0xef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 005E
        gbc.setState(0x12e6, 0x210f, 0x6550, 0xda95, 0x72fe, 0x893, 0x1, 0x1);
        gbc.writeMem(0x12e6, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x210f);
        EXPECT(gbc.pc(), 0x12e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 005F
        gbc.setState(0x5a65, 0x3ab4, 0x7920, 0x78e1, 0x49d9, 0x3f1d, 0x1, 0x1);
        gbc.writeMem(0x5a65, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x3ab4);
        EXPECT(gbc.pc(), 0x5a66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0061
        gbc.setState(0x2dac, 0x8d67, 0x24d0, 0x6f78, 0xd6c9, 0x41b7, 0x0, 0x0);
        gbc.writeMem(0x2dac, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x8d67);
        EXPECT(gbc.pc(), 0x2dad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0062
        gbc.setState(0xae93, 0x506f, 0xd0c0, 0x2e0c, 0xd641, 0x8ed3, 0x0, 0x1);
        gbc.writeMem(0xae93, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x506f);
        EXPECT(gbc.pc(), 0xae94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae93), 0x6b);
        // 6B 0063
        gbc.setState(0xd378, 0x8892, 0xb3b0, 0x7502, 0x6731, 0xab03, 0x1, 0x1);
        gbc.writeMem(0xd378, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x8892);
        EXPECT(gbc.pc(), 0xd379);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd378), 0x6b);
        // 6B 0065
        gbc.setState(0x7dd3, 0x1f45, 0xfb10, 0x811e, 0x934, 0x144, 0x1, 0x1);
        gbc.writeMem(0x7dd3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x1f45);
        EXPECT(gbc.pc(), 0x7dd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0066
        gbc.setState(0xa440, 0x381c, 0xf6e0, 0x7593, 0x5e1c, 0x72cb, 0x1, 0x1);
        gbc.writeMem(0xa440, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x381c);
        EXPECT(gbc.pc(), 0xa441);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa440), 0x6b);
        // 6B 0067
        gbc.setState(0x7929, 0x91ec, 0x29e0, 0x597f, 0x7b49, 0xd1e8, 0x0, 0x0);
        gbc.writeMem(0x7929, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x91ec);
        EXPECT(gbc.pc(), 0x792a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0068
        gbc.setState(0xbaee, 0x1c5a, 0x7f80, 0x8a15, 0x6a68, 0x8ab3, 0x0, 0x0);
        gbc.writeMem(0xbaee, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x1c5a);
        EXPECT(gbc.pc(), 0xbaef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaee), 0x6b);
        // 6B 0069
        gbc.setState(0xc40b, 0xa82f, 0x31f0, 0x8743, 0xcd7f, 0xaa87, 0x0, 0x1);
        gbc.writeMem(0xc40b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xa82f);
        EXPECT(gbc.pc(), 0xc40c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc40b), 0x6b);
        // 6B 006A
        gbc.setState(0xd913, 0xd703, 0x8ec0, 0xd982, 0xf042, 0xfed3, 0x1, 0x0);
        gbc.writeMem(0xd913, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xd703);
        EXPECT(gbc.pc(), 0xd914);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd913), 0x6b);
        // 6B 006B
        gbc.setState(0x952d, 0xb3a1, 0x3f30, 0xc899, 0xac7a, 0xb5c5, 0x0, 0x1);
        gbc.writeMem(0x952d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xb3a1);
        EXPECT(gbc.pc(), 0x952e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x952d), 0x6b);
        // 6B 006C
        gbc.setState(0x7339, 0x7c06, 0x62d0, 0x979d, 0xb03b, 0x7cf0, 0x1, 0x0);
        gbc.writeMem(0x7339, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x7c06);
        EXPECT(gbc.pc(), 0x733a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 006D
        gbc.setState(0x9a3, 0x1149, 0x8820, 0xe2fa, 0xf12a, 0xbf86, 0x0, 0x0);
        gbc.writeMem(0x9a3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x1149);
        EXPECT(gbc.pc(), 0x9a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 006E
        gbc.setState(0x97a9, 0x1638, 0x1ed0, 0xb716, 0xb9f1, 0xa0, 0x0, 0x1);
        gbc.writeMem(0x97a9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x1638);
        EXPECT(gbc.pc(), 0x97aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97a9), 0x6b);
        // 6B 006F
        gbc.setState(0xc183, 0xcc18, 0x1640, 0xc23c, 0x884d, 0x9f36, 0x1, 0x0);
        gbc.writeMem(0xc183, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xcc18);
        EXPECT(gbc.pc(), 0xc184);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc183), 0x6b);
        // 6B 0070
        gbc.setState(0xcda6, 0xff0, 0xeca0, 0xa5cc, 0x9521, 0xb178, 0x1, 0x0);
        gbc.writeMem(0xcda6, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xff0);
        EXPECT(gbc.pc(), 0xcda7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcda6), 0x6b);
        // 6B 0071
        gbc.setState(0xe873, 0x47c0, 0xabf0, 0x4aeb, 0x1853, 0xcd74, 0x0, 0x0);
        gbc.writeMem(0xe873, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x47c0);
        EXPECT(gbc.pc(), 0xe874);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe873), 0x6b);
        // 6B 0072
        gbc.setState(0x7826, 0x9b67, 0x4100, 0x5bd8, 0xba74, 0x802, 0x1, 0x0);
        gbc.writeMem(0x7826, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x9b67);
        EXPECT(gbc.pc(), 0x7827);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0073
        gbc.setState(0x5c98, 0xaf40, 0xb4d0, 0x798f, 0x1221, 0x692c, 0x1, 0x1);
        gbc.writeMem(0x5c98, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xaf40);
        EXPECT(gbc.pc(), 0x5c99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0074
        gbc.setState(0x7b71, 0x34e, 0xf730, 0xf95f, 0x8817, 0xd40d, 0x0, 0x0);
        gbc.writeMem(0x7b71, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x34e);
        EXPECT(gbc.pc(), 0x7b72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0075
        gbc.setState(0xb7ee, 0x4f0e, 0x6650, 0x62a7, 0xb97e, 0xd74f, 0x0, 0x1);
        gbc.writeMem(0xb7ee, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x4f0e);
        EXPECT(gbc.pc(), 0xb7ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7ee), 0x6b);
        // 6B 0076
        gbc.setState(0x748, 0x2f81, 0x6320, 0xa8aa, 0xc5b0, 0x2e9d, 0x0, 0x0);
        gbc.writeMem(0x748, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x2f81);
        EXPECT(gbc.pc(), 0x749);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0077
        gbc.setState(0x5ddc, 0xb13b, 0x72f0, 0xfbb1, 0x5762, 0x4a50, 0x0, 0x0);
        gbc.writeMem(0x5ddc, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xb13b);
        EXPECT(gbc.pc(), 0x5ddd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0078
        gbc.setState(0xd092, 0xfe71, 0x6450, 0xa253, 0x564f, 0xeb5a, 0x0, 0x1);
        gbc.writeMem(0xd092, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xfe71);
        EXPECT(gbc.pc(), 0xd093);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd092), 0x6b);
        // 6B 0079
        gbc.setState(0xe359, 0x3b69, 0x660, 0x6d17, 0xd2e7, 0xeffc, 0x0, 0x1);
        gbc.writeMem(0xe359, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x3b69);
        EXPECT(gbc.pc(), 0xe35a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe359), 0x6b);
        // 6B 007A
        gbc.setState(0xce88, 0xd988, 0xc160, 0xbd30, 0xa2f6, 0xc4cb, 0x0, 0x1);
        gbc.writeMem(0xce88, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xd988);
        EXPECT(gbc.pc(), 0xce89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce88), 0x6b);
        // 6B 007B
        gbc.setState(0x8ac2, 0x85e3, 0x5380, 0xa761, 0x1acc, 0x367a, 0x0, 0x0);
        gbc.writeMem(0x8ac2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x85e3);
        EXPECT(gbc.pc(), 0x8ac3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ac2), 0x6b);
        // 6B 007C
        gbc.setState(0x23bf, 0xb2a, 0xa650, 0x2b5, 0xf699, 0xdca6, 0x0, 0x1);
        gbc.writeMem(0x23bf, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xb2a);
        EXPECT(gbc.pc(), 0x23c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 007D
        gbc.setState(0xc2a7, 0xa5bb, 0x5db0, 0xee34, 0x1559, 0x442c, 0x0, 0x1);
        gbc.writeMem(0xc2a7, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xa5bb);
        EXPECT(gbc.pc(), 0xc2a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2a7), 0x6b);
        // 6B 007E
        gbc.setState(0xb5df, 0x7ac5, 0x1810, 0x5e0e, 0x7925, 0x2958, 0x1, 0x1);
        gbc.writeMem(0xb5df, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x7ac5);
        EXPECT(gbc.pc(), 0xb5e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5df), 0x6b);
        // 6B 007F
        gbc.setState(0x47da, 0xbba5, 0x8490, 0x8e79, 0x6405, 0xd481, 0x0, 0x0);
        gbc.writeMem(0x47da, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xbba5);
        EXPECT(gbc.pc(), 0x47db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0080
        gbc.setState(0x5574, 0xdf98, 0x7840, 0x42ed, 0xe8a0, 0xaee8, 0x0, 0x0);
        gbc.writeMem(0x5574, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xdf98);
        EXPECT(gbc.pc(), 0x5575);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0081
        gbc.setState(0xb2d7, 0x701b, 0x450, 0x7122, 0xac97, 0xef7a, 0x0, 0x1);
        gbc.writeMem(0xb2d7, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x701b);
        EXPECT(gbc.pc(), 0xb2d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2d7), 0x6b);
        // 6B 0082
        gbc.setState(0x409b, 0xce48, 0xf5e0, 0x6f36, 0x4ecd, 0x9f06, 0x0, 0x1);
        gbc.writeMem(0x409b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xce48);
        EXPECT(gbc.pc(), 0x409c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0083
        gbc.setState(0x3c67, 0x421a, 0xb900, 0x8cbb, 0xe108, 0x4906, 0x1, 0x1);
        gbc.writeMem(0x3c67, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x421a);
        EXPECT(gbc.pc(), 0x3c68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0084
        gbc.setState(0xa4d, 0xacd6, 0xfd30, 0xd711, 0xdfb7, 0xfc0d, 0x0, 0x1);
        gbc.writeMem(0xa4d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xacd6);
        EXPECT(gbc.pc(), 0xa4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0085
        gbc.setState(0x3c9, 0x7345, 0x1b70, 0x2d75, 0xe61e, 0xb4d, 0x0, 0x1);
        gbc.writeMem(0x3c9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x7345);
        EXPECT(gbc.pc(), 0x3ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0086
        gbc.setState(0xb0fb, 0xadb9, 0x7b10, 0x5363, 0xe23c, 0x9b21, 0x1, 0x0);
        gbc.writeMem(0xb0fb, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xadb9);
        EXPECT(gbc.pc(), 0xb0fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0fb), 0x6b);
        // 6B 0087
        gbc.setState(0xcf7c, 0x4d81, 0x4710, 0xedc6, 0x4297, 0xe61a, 0x0, 0x1);
        gbc.writeMem(0xcf7c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x4d81);
        EXPECT(gbc.pc(), 0xcf7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf7c), 0x6b);
        // 6B 0088
        gbc.setState(0xd8ec, 0xb7b7, 0x6060, 0x4b4d, 0x7b5c, 0xa2cc, 0x0, 0x0);
        gbc.writeMem(0xd8ec, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xb7b7);
        EXPECT(gbc.pc(), 0xd8ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8ec), 0x6b);
        // 6B 0089
        gbc.setState(0x2b50, 0x6e65, 0x9af0, 0xe22f, 0xd715, 0x748c, 0x0, 0x1);
        gbc.writeMem(0x2b50, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x6e65);
        EXPECT(gbc.pc(), 0x2b51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 008A
        gbc.setState(0x5c8f, 0xf9d3, 0xfdd0, 0x9a2a, 0x13a1, 0xac9c, 0x1, 0x1);
        gbc.writeMem(0x5c8f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xf9d3);
        EXPECT(gbc.pc(), 0x5c90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 008B
        gbc.setState(0x39f, 0xf3f1, 0xa8f0, 0x69e6, 0x2fd0, 0xb43b, 0x0, 0x1);
        gbc.writeMem(0x39f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xf3f1);
        EXPECT(gbc.pc(), 0x3a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 008C
        gbc.setState(0xdccf, 0xb4a4, 0x4370, 0x757a, 0x233f, 0xce4c, 0x0, 0x0);
        gbc.writeMem(0xdccf, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xb4a4);
        EXPECT(gbc.pc(), 0xdcd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdccf), 0x6b);
        // 6B 008D
        gbc.setState(0x2504, 0x877c, 0x5310, 0x9caa, 0x1e77, 0x4bac, 0x0, 0x0);
        gbc.writeMem(0x2504, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x877c);
        EXPECT(gbc.pc(), 0x2505);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 008E
        gbc.setState(0x2e0e, 0xe402, 0xa3f0, 0x80d, 0x982e, 0x130b, 0x1, 0x1);
        gbc.writeMem(0x2e0e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xe402);
        EXPECT(gbc.pc(), 0x2e0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 008F
        gbc.setState(0x21a7, 0x530e, 0x1d60, 0xdd29, 0x18a2, 0x87c4, 0x1, 0x1);
        gbc.writeMem(0x21a7, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x530e);
        EXPECT(gbc.pc(), 0x21a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0090
        gbc.setState(0x4446, 0xd7d6, 0x3d20, 0xbaa7, 0x8d7f, 0xbdcd, 0x1, 0x1);
        gbc.writeMem(0x4446, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xd7d6);
        EXPECT(gbc.pc(), 0x4447);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0091
        gbc.setState(0xde1d, 0x1f97, 0x1140, 0x6e93, 0xa129, 0xf209, 0x1, 0x1);
        gbc.writeMem(0xde1d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x1f97);
        EXPECT(gbc.pc(), 0xde1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde1d), 0x6b);
        // 6B 0092
        gbc.setState(0xbe14, 0x7f74, 0x2f70, 0xceed, 0x4de, 0xa444, 0x1, 0x1);
        gbc.writeMem(0xbe14, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x7f74);
        EXPECT(gbc.pc(), 0xbe15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe14), 0x6b);
        // 6B 0093
        gbc.setState(0xb28a, 0xa486, 0xa3d0, 0x623e, 0x9add, 0x7d38, 0x0, 0x0);
        gbc.writeMem(0xb28a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xa486);
        EXPECT(gbc.pc(), 0xb28b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb28a), 0x6b);
        // 6B 0094
        gbc.setState(0x4aee, 0xa688, 0xdd60, 0x1d6b, 0x24e0, 0x2f51, 0x0, 0x1);
        gbc.writeMem(0x4aee, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xa688);
        EXPECT(gbc.pc(), 0x4aef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0095
        gbc.setState(0xf9b, 0xd45e, 0xa2a0, 0x959a, 0x88c2, 0xed4b, 0x1, 0x1);
        gbc.writeMem(0xf9b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xd45e);
        EXPECT(gbc.pc(), 0xf9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0096
        gbc.setState(0x476a, 0x381a, 0x6440, 0x3175, 0x4f52, 0xc1f2, 0x0, 0x1);
        gbc.writeMem(0x476a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x381a);
        EXPECT(gbc.pc(), 0x476b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0097
        gbc.setState(0x2d1a, 0x9f9b, 0xba70, 0x8301, 0xbbec, 0x4578, 0x0, 0x0);
        gbc.writeMem(0x2d1a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x9f9b);
        EXPECT(gbc.pc(), 0x2d1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0098
        gbc.setState(0xfe4, 0x9cee, 0x3d50, 0x63ec, 0xca25, 0xd95b, 0x0, 0x0);
        gbc.writeMem(0xfe4, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x9cee);
        EXPECT(gbc.pc(), 0xfe5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0099
        gbc.setState(0x47c2, 0xd124, 0x3f0, 0xc92f, 0x57d5, 0x9bb3, 0x0, 0x0);
        gbc.writeMem(0x47c2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xd124);
        EXPECT(gbc.pc(), 0x47c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 009A
        gbc.setState(0x80f8, 0xbcbe, 0x7760, 0x5768, 0xe041, 0xfd43, 0x0, 0x0);
        gbc.writeMem(0x80f8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xbcbe);
        EXPECT(gbc.pc(), 0x80f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80f8), 0x6b);
        // 6B 009B
        gbc.setState(0x80d1, 0x39be, 0x22c0, 0xd781, 0xf381, 0xca7f, 0x0, 0x0);
        gbc.writeMem(0x80d1, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x39be);
        EXPECT(gbc.pc(), 0x80d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80d1), 0x6b);
        // 6B 009C
        gbc.setState(0xbf2e, 0x80d2, 0x1850, 0xda69, 0x9e4e, 0x8bdc, 0x1, 0x1);
        gbc.writeMem(0xbf2e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x80d2);
        EXPECT(gbc.pc(), 0xbf2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf2e), 0x6b);
        // 6B 009D
        gbc.setState(0xb44c, 0xe1b7, 0xc640, 0x9146, 0x6da, 0x4256, 0x1, 0x0);
        gbc.writeMem(0xb44c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xe1b7);
        EXPECT(gbc.pc(), 0xb44d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb44c), 0x6b);
        // 6B 009E
        gbc.setState(0x715b, 0x8c30, 0x7c80, 0x1a1a, 0x81ba, 0xc468, 0x1, 0x1);
        gbc.writeMem(0x715b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x8c30);
        EXPECT(gbc.pc(), 0x715c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 009F
        gbc.setState(0xec75, 0xa05d, 0x4660, 0xf828, 0x87c3, 0xb6f1, 0x0, 0x1);
        gbc.writeMem(0xec75, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xa05d);
        EXPECT(gbc.pc(), 0xec76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec75), 0x6b);
        // 6B 00A0
        gbc.setState(0xc7f2, 0x7ab8, 0x9f60, 0x5d99, 0xdd70, 0x526f, 0x0, 0x0);
        gbc.writeMem(0xc7f2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x7ab8);
        EXPECT(gbc.pc(), 0xc7f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7f2), 0x6b);
        // 6B 00A1
        gbc.setState(0x3451, 0x2f37, 0xa980, 0x81f, 0x2c9e, 0x23da, 0x0, 0x1);
        gbc.writeMem(0x3451, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x2f37);
        EXPECT(gbc.pc(), 0x3452);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 00A2
        gbc.setState(0x5a6f, 0xfce4, 0x5900, 0xc916, 0xb9bc, 0x3612, 0x0, 0x0);
        gbc.writeMem(0x5a6f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xfce4);
        EXPECT(gbc.pc(), 0x5a70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 00A3
        gbc.setState(0x661a, 0x5c03, 0xb730, 0xa6a, 0x6829, 0x784c, 0x0, 0x0);
        gbc.writeMem(0x661a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x5c03);
        EXPECT(gbc.pc(), 0x661b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 00A4
        gbc.setState(0x22f, 0x9f7c, 0xb470, 0xba, 0x5d05, 0x811b, 0x0, 0x1);
        gbc.writeMem(0x22f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x9f7c);
        EXPECT(gbc.pc(), 0x230);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 00A5
        gbc.setState(0x59db, 0x192d, 0x4330, 0xe731, 0xa36b, 0xde30, 0x0, 0x1);
        gbc.writeMem(0x59db, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x192d);
        EXPECT(gbc.pc(), 0x59dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 00A6
        gbc.setState(0x6088, 0xd98f, 0x6e20, 0xd4c8, 0xb0cd, 0xa55d, 0x1, 0x1);
        gbc.writeMem(0x6088, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xd98f);
        EXPECT(gbc.pc(), 0x6089);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 00A7
        gbc.setState(0xec93, 0xa206, 0xf930, 0x94d, 0x15ec, 0xfee6, 0x1, 0x1);
        gbc.writeMem(0xec93, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xa206);
        EXPECT(gbc.pc(), 0xec94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec93), 0x6b);
        // 6B 00A8
        gbc.setState(0xb32f, 0xc116, 0x3610, 0xd99, 0xb238, 0xe514, 0x0, 0x0);
        gbc.writeMem(0xb32f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xc116);
        EXPECT(gbc.pc(), 0xb330);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb32f), 0x6b);
        // 6B 00A9
        gbc.setState(0x946, 0x8de7, 0x7f80, 0xd499, 0xa440, 0x6022, 0x0, 0x0);
        gbc.writeMem(0x946, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x8de7);
        EXPECT(gbc.pc(), 0x947);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 00AA
        gbc.setState(0x552f, 0xe878, 0xdcc0, 0x2b53, 0x7e4f, 0xc824, 0x0, 0x1);
        gbc.writeMem(0x552f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xe878);
        EXPECT(gbc.pc(), 0x5530);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 00AB
        gbc.setState(0xba7f, 0x48cc, 0xa9e0, 0x37da, 0xe1a8, 0xdbb8, 0x1, 0x1);
        gbc.writeMem(0xba7f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x48cc);
        EXPECT(gbc.pc(), 0xba80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba7f), 0x6b);
        // 6B 00AC
        gbc.setState(0x8a66, 0x2811, 0x6730, 0xec8b, 0x78e, 0xdc33, 0x1, 0x0);
        gbc.writeMem(0x8a66, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x2811);
        EXPECT(gbc.pc(), 0x8a67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a66), 0x6b);
        // 6B 00AD
        gbc.setState(0xbe1, 0x4913, 0x7a70, 0x9300, 0x5c64, 0x7f8a, 0x1, 0x0);
        gbc.writeMem(0xbe1, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x4913);
        EXPECT(gbc.pc(), 0xbe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 00AE
        gbc.setState(0x8fbb, 0x9083, 0x89f0, 0xe5c7, 0x2d61, 0x6ec1, 0x0, 0x0);
        gbc.writeMem(0x8fbb, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x9083);
        EXPECT(gbc.pc(), 0x8fbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fbb), 0x6b);
        // 6B 00AF
        gbc.setState(0x37a5, 0x4e2e, 0x830, 0x22bb, 0x74c8, 0x225e, 0x1, 0x1);
        gbc.writeMem(0x37a5, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x4e2e);
        EXPECT(gbc.pc(), 0x37a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 00B0
        gbc.setState(0x25aa, 0x40a2, 0xc6a0, 0x892c, 0xda3b, 0x9fc, 0x1, 0x0);
        gbc.writeMem(0x25aa, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x40a2);
        EXPECT(gbc.pc(), 0x25ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 00B1
        gbc.setState(0x5ade, 0xee3b, 0x6660, 0xab47, 0x41a7, 0x9dfc, 0x1, 0x0);
        gbc.writeMem(0x5ade, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xee3b);
        EXPECT(gbc.pc(), 0x5adf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 00B2
        gbc.setState(0x32c6, 0xb8a5, 0x1510, 0x496, 0xd009, 0x5973, 0x1, 0x1);
        gbc.writeMem(0x32c6, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xb8a5);
        EXPECT(gbc.pc(), 0x32c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 00B3
        gbc.setState(0xc961, 0x302a, 0xa3e0, 0x91e2, 0xe796, 0x7baa, 0x1, 0x0);
        gbc.writeMem(0xc961, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x302a);
        EXPECT(gbc.pc(), 0xc962);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc961), 0x6b);
        // 6B 00B5
        gbc.setState(0x73f0, 0x5aff, 0xc330, 0x335d, 0x26b9, 0x7ab0, 0x1, 0x0);
        gbc.writeMem(0x73f0, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x5aff);
        EXPECT(gbc.pc(), 0x73f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 00B6
        gbc.setState(0x9544, 0x6132, 0x7350, 0x5001, 0xddbc, 0x498f, 0x0, 0x1);
        gbc.writeMem(0x9544, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x6132);
        EXPECT(gbc.pc(), 0x9545);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9544), 0x6b);
        // 6B 00B7
        gbc.setState(0xe391, 0x6e96, 0xae70, 0xc9f1, 0x2c79, 0x6aff, 0x0, 0x0);
        gbc.writeMem(0xe391, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x6e96);
        EXPECT(gbc.pc(), 0xe392);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe391), 0x6b);
        // 6B 00B8
        gbc.setState(0xdf5a, 0xcbe4, 0xeab0, 0xa25c, 0xee4, 0x8129, 0x1, 0x0);
        gbc.writeMem(0xdf5a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xcbe4);
        EXPECT(gbc.pc(), 0xdf5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf5a), 0x6b);
        // 6B 00B9
        gbc.setState(0x8259, 0x4d9c, 0xda0, 0xbf40, 0x964f, 0xbdcf, 0x1, 0x1);
        gbc.writeMem(0x8259, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x4d9c);
        EXPECT(gbc.pc(), 0x825a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8259), 0x6b);
        // 6B 00BA
        gbc.setState(0x6dbe, 0xbb71, 0xb8c0, 0x3ed9, 0x2e0e, 0xd3de, 0x1, 0x1);
        gbc.writeMem(0x6dbe, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xbb71);
        EXPECT(gbc.pc(), 0x6dbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 00BB
        gbc.setState(0x4bff, 0x8f44, 0x5180, 0xf4e3, 0xb228, 0x2b6d, 0x0, 0x0);
        gbc.writeMem(0x4bff, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x8f44);
        EXPECT(gbc.pc(), 0x4c00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 00BC
        gbc.setState(0x7cb8, 0x3791, 0x6860, 0x1886, 0xf465, 0x1a92, 0x1, 0x0);
        gbc.writeMem(0x7cb8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x3791);
        EXPECT(gbc.pc(), 0x7cb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 00BD
        gbc.setState(0x5d25, 0xf5ef, 0xe1a0, 0xe587, 0x28a2, 0x7634, 0x1, 0x1);
        gbc.writeMem(0x5d25, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xf5ef);
        EXPECT(gbc.pc(), 0x5d26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 00BE
        gbc.setState(0x85bd, 0x5931, 0x5360, 0x8cd0, 0x9f7b, 0x4007, 0x1, 0x0);
        gbc.writeMem(0x85bd, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x5931);
        EXPECT(gbc.pc(), 0x85be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85bd), 0x6b);
        // 6B 00BF
        gbc.setState(0x33cb, 0xe3db, 0x6f50, 0x95a0, 0x6a69, 0x904c, 0x0, 0x0);
        gbc.writeMem(0x33cb, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe3db);
        EXPECT(gbc.pc(), 0x33cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 00C1
        gbc.setState(0xa49e, 0x20d9, 0x6d80, 0xc62b, 0x22df, 0x70a8, 0x0, 0x0);
        gbc.writeMem(0xa49e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x20d9);
        EXPECT(gbc.pc(), 0xa49f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa49e), 0x6b);
        // 6B 00C2
        gbc.setState(0x104, 0x7aba, 0xe900, 0x8166, 0xcea1, 0x3229, 0x1, 0x1);
        gbc.writeMem(0x104, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x7aba);
        EXPECT(gbc.pc(), 0x105);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 00C3
        gbc.setState(0xac5b, 0x740b, 0xa790, 0x4942, 0x47c0, 0x778a, 0x1, 0x1);
        gbc.writeMem(0xac5b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x740b);
        EXPECT(gbc.pc(), 0xac5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac5b), 0x6b);
        // 6B 00C4
        gbc.setState(0xe5d9, 0x1213, 0xfbc0, 0x734a, 0x3e60, 0xd32f, 0x1, 0x0);
        gbc.writeMem(0xe5d9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x1213);
        EXPECT(gbc.pc(), 0xe5da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5d9), 0x6b);
        // 6B 00C5
        gbc.setState(0x7967, 0xf24, 0x5320, 0x7a34, 0xa542, 0x91c8, 0x0, 0x1);
        gbc.writeMem(0x7967, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xf24);
        EXPECT(gbc.pc(), 0x7968);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 00C6
        gbc.setState(0x1731, 0x1637, 0xad00, 0x2d90, 0x1e02, 0xc623, 0x1, 0x0);
        gbc.writeMem(0x1731, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x1637);
        EXPECT(gbc.pc(), 0x1732);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 00C7
        gbc.setState(0x610a, 0x6466, 0x7220, 0xa2df, 0xbf28, 0x3145, 0x1, 0x0);
        gbc.writeMem(0x610a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x6466);
        EXPECT(gbc.pc(), 0x610b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 00C8
        gbc.setState(0xa10d, 0x7016, 0xf420, 0x3219, 0x70a3, 0xf1a4, 0x1, 0x0);
        gbc.writeMem(0xa10d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x7016);
        EXPECT(gbc.pc(), 0xa10e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa10d), 0x6b);
        // 6B 00C9
        gbc.setState(0x592e, 0x15b2, 0x8950, 0x29d7, 0xb7a6, 0x2790, 0x0, 0x0);
        gbc.writeMem(0x592e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x15b2);
        EXPECT(gbc.pc(), 0x592f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 00CA
        gbc.setState(0xb119, 0xfd0d, 0xf8b0, 0x8aea, 0xb4ec, 0x435c, 0x0, 0x1);
        gbc.writeMem(0xb119, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xfd0d);
        EXPECT(gbc.pc(), 0xb11a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb119), 0x6b);
        // 6B 00CB
        gbc.setState(0x6322, 0x71d9, 0x1050, 0x3c09, 0x1f76, 0x6eb9, 0x1, 0x1);
        gbc.writeMem(0x6322, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x71d9);
        EXPECT(gbc.pc(), 0x6323);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 00CC
        gbc.setState(0x7ca9, 0x8ff8, 0xd550, 0xe33f, 0x3576, 0x3ca2, 0x1, 0x1);
        gbc.writeMem(0x7ca9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x8ff8);
        EXPECT(gbc.pc(), 0x7caa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 00CD
        gbc.setState(0x5702, 0x2431, 0x59c0, 0x14a, 0xf291, 0xd995, 0x0, 0x1);
        gbc.writeMem(0x5702, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x2431);
        EXPECT(gbc.pc(), 0x5703);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 00CE
        gbc.setState(0x2dd8, 0x65c2, 0xdf70, 0x1701, 0xa791, 0x3fc2, 0x0, 0x1);
        gbc.writeMem(0x2dd8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x65c2);
        EXPECT(gbc.pc(), 0x2dd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 00CF
        gbc.setState(0xed82, 0x3754, 0x8710, 0x7682, 0xa173, 0x79f6, 0x0, 0x1);
        gbc.writeMem(0xed82, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x3754);
        EXPECT(gbc.pc(), 0xed83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed82), 0x6b);
        // 6B 00D0
        gbc.setState(0x7a26, 0xc43d, 0xdc70, 0x78ec, 0xf623, 0xd1cf, 0x1, 0x0);
        gbc.writeMem(0x7a26, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xc43d);
        EXPECT(gbc.pc(), 0x7a27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 00D1
        gbc.setState(0xae7e, 0xfd2f, 0x1ad0, 0x54a6, 0xc949, 0x607c, 0x0, 0x0);
        gbc.writeMem(0xae7e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xfd2f);
        EXPECT(gbc.pc(), 0xae7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae7e), 0x6b);
        // 6B 00D2
        gbc.setState(0xbc19, 0x982e, 0x8070, 0x4c25, 0x4210, 0x1b95, 0x0, 0x1);
        gbc.writeMem(0xbc19, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x982e);
        EXPECT(gbc.pc(), 0xbc1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc19), 0x6b);
        // 6B 00D3
        gbc.setState(0x61a, 0xbe5c, 0xc170, 0xc93b, 0x9721, 0xd36f, 0x0, 0x1);
        gbc.writeMem(0x61a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xbe5c);
        EXPECT(gbc.pc(), 0x61b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 00D4
        gbc.setState(0x8831, 0xa403, 0xa320, 0x32ab, 0x460e, 0xf15f, 0x0, 0x0);
        gbc.writeMem(0x8831, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xa403);
        EXPECT(gbc.pc(), 0x8832);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8831), 0x6b);
        // 6B 00D5
        gbc.setState(0x798b, 0xbab5, 0x6f10, 0x273b, 0xe398, 0xaaa3, 0x1, 0x0);
        gbc.writeMem(0x798b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xbab5);
        EXPECT(gbc.pc(), 0x798c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 00D6
        gbc.setState(0xd4dd, 0x8b30, 0x39b0, 0xc7d, 0xb73f, 0x44bf, 0x1, 0x1);
        gbc.writeMem(0xd4dd, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x8b30);
        EXPECT(gbc.pc(), 0xd4de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4dd), 0x6b);
        // 6B 00D7
        gbc.setState(0x7697, 0xb986, 0x49f0, 0xdd80, 0x261d, 0x70c6, 0x1, 0x0);
        gbc.writeMem(0x7697, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xb986);
        EXPECT(gbc.pc(), 0x7698);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 00D8
        gbc.setState(0x4a4a, 0x9a46, 0xee10, 0x4f44, 0x17c6, 0x9b16, 0x1, 0x0);
        gbc.writeMem(0x4a4a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x9a46);
        EXPECT(gbc.pc(), 0x4a4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 00D9
        gbc.setState(0x7b5c, 0xc33a, 0xd220, 0x827a, 0x9e90, 0x4ba0, 0x1, 0x1);
        gbc.writeMem(0x7b5c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xc33a);
        EXPECT(gbc.pc(), 0x7b5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 00DA
        gbc.setState(0x4a82, 0xb204, 0x1480, 0x1f53, 0xa6b3, 0x1a4d, 0x0, 0x0);
        gbc.writeMem(0x4a82, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xb204);
        EXPECT(gbc.pc(), 0x4a83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 00DB
        gbc.setState(0xb4e7, 0xaab5, 0x7d80, 0x7174, 0x9ec4, 0x88ae, 0x1, 0x0);
        gbc.writeMem(0xb4e7, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xaab5);
        EXPECT(gbc.pc(), 0xb4e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4e7), 0x6b);
        // 6B 00DC
        gbc.setState(0x1e14, 0x392d, 0x78d0, 0xd1b6, 0x7a89, 0xe6a3, 0x0, 0x0);
        gbc.writeMem(0x1e14, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x392d);
        EXPECT(gbc.pc(), 0x1e15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 00DD
        gbc.setState(0xa6ff, 0xa392, 0x67c0, 0x35af, 0x3101, 0xe43, 0x0, 0x1);
        gbc.writeMem(0xa6ff, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xa392);
        EXPECT(gbc.pc(), 0xa700);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6ff), 0x6b);
        // 6B 00DE
        gbc.setState(0x2d7e, 0xd08d, 0x11a0, 0x6fc3, 0x5fd4, 0x1f96, 0x0, 0x0);
        gbc.writeMem(0x2d7e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xd08d);
        EXPECT(gbc.pc(), 0x2d7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 00DF
        gbc.setState(0x720b, 0x4c9c, 0x7640, 0xe0e5, 0xeb76, 0xb4ce, 0x1, 0x0);
        gbc.writeMem(0x720b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x4c9c);
        EXPECT(gbc.pc(), 0x720c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 00E0
        gbc.setState(0x31bd, 0x5011, 0x4d40, 0x5476, 0x5f23, 0x5e89, 0x1, 0x1);
        gbc.writeMem(0x31bd, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x5011);
        EXPECT(gbc.pc(), 0x31be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 00E1
        gbc.setState(0x6784, 0x2844, 0x6670, 0xb001, 0x44c4, 0xbefc, 0x0, 0x1);
        gbc.writeMem(0x6784, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x2844);
        EXPECT(gbc.pc(), 0x6785);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 00E3
        gbc.setState(0x1650, 0xc23b, 0x8470, 0xeab7, 0xebf7, 0xc5d9, 0x0, 0x0);
        gbc.writeMem(0x1650, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xc23b);
        EXPECT(gbc.pc(), 0x1651);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 00E4
        gbc.setState(0xb110, 0x1a02, 0x9d00, 0xe44, 0xccac, 0x8fe3, 0x0, 0x1);
        gbc.writeMem(0xb110, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x1a02);
        EXPECT(gbc.pc(), 0xb111);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb110), 0x6b);
        // 6B 00E5
        gbc.setState(0x3104, 0x72a5, 0x8ed0, 0x66ee, 0xaded, 0x3d11, 0x1, 0x0);
        gbc.writeMem(0x3104, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x72a5);
        EXPECT(gbc.pc(), 0x3105);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 00E6
        gbc.setState(0x9146, 0x23ba, 0xc910, 0x601, 0xf694, 0xba25, 0x1, 0x1);
        gbc.writeMem(0x9146, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x23ba);
        EXPECT(gbc.pc(), 0x9147);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9146), 0x6b);
        // 6B 00E8
        gbc.setState(0xc0f2, 0x25c7, 0xb2f0, 0x3aec, 0xd1e, 0xc063, 0x1, 0x1);
        gbc.writeMem(0xc0f2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x25c7);
        EXPECT(gbc.pc(), 0xc0f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0f2), 0x6b);
        // 6B 00EA
        gbc.setState(0x12a9, 0xa948, 0xe5a0, 0x7c11, 0x52e6, 0xa9a3, 0x0, 0x1);
        gbc.writeMem(0x12a9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xa948);
        EXPECT(gbc.pc(), 0x12aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 00EB
        gbc.setState(0x199, 0xf524, 0x2550, 0x3491, 0x72af, 0xaf5b, 0x1, 0x1);
        gbc.writeMem(0x199, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xf524);
        EXPECT(gbc.pc(), 0x19a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 00EC
        gbc.setState(0xbab9, 0x4f13, 0x1ac0, 0xa7ad, 0x2890, 0x6b1a, 0x0, 0x1);
        gbc.writeMem(0xbab9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x4f13);
        EXPECT(gbc.pc(), 0xbaba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbab9), 0x6b);
        // 6B 00ED
        gbc.setState(0xa64c, 0x321f, 0x2e70, 0x20e7, 0x9ef5, 0x82dd, 0x0, 0x0);
        gbc.writeMem(0xa64c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x321f);
        EXPECT(gbc.pc(), 0xa64d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa64c), 0x6b);
        // 6B 00EE
        gbc.setState(0x36fb, 0x5de2, 0xf2c0, 0x86d5, 0x84b9, 0x473c, 0x0, 0x0);
        gbc.writeMem(0x36fb, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x5de2);
        EXPECT(gbc.pc(), 0x36fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 00EF
        gbc.setState(0x3f5f, 0x1cbd, 0x4c30, 0x71ad, 0x87b1, 0x13fc, 0x0, 0x0);
        gbc.writeMem(0x3f5f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x1cbd);
        EXPECT(gbc.pc(), 0x3f60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 00F0
        gbc.setState(0x5b3c, 0x1d9, 0x72e0, 0x85f9, 0xcfa9, 0x89ae, 0x1, 0x1);
        gbc.writeMem(0x5b3c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x1d9);
        EXPECT(gbc.pc(), 0x5b3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 00F1
        gbc.setState(0xba7e, 0x38c0, 0xf250, 0x7edb, 0xdbce, 0x8e13, 0x1, 0x0);
        gbc.writeMem(0xba7e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x38c0);
        EXPECT(gbc.pc(), 0xba7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba7e), 0x6b);
        // 6B 00F2
        gbc.setState(0xd01b, 0x362c, 0xd480, 0xcf46, 0x2b19, 0xe74c, 0x0, 0x0);
        gbc.writeMem(0xd01b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x362c);
        EXPECT(gbc.pc(), 0xd01c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd01b), 0x6b);
        // 6B 00F3
        gbc.setState(0xd188, 0x240e, 0x8750, 0x7ce5, 0x68bd, 0x4dd5, 0x0, 0x1);
        gbc.writeMem(0xd188, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x240e);
        EXPECT(gbc.pc(), 0xd189);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd188), 0x6b);
        // 6B 00F4
        gbc.setState(0xe3c2, 0xaaa5, 0x2ce0, 0x6169, 0x6387, 0xc992, 0x0, 0x0);
        gbc.writeMem(0xe3c2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xaaa5);
        EXPECT(gbc.pc(), 0xe3c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3c2), 0x6b);
        // 6B 00F5
        gbc.setState(0x9c0f, 0xa6c3, 0x4510, 0xa5eb, 0xb278, 0xdced, 0x1, 0x0);
        gbc.writeMem(0x9c0f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xa6c3);
        EXPECT(gbc.pc(), 0x9c10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c0f), 0x6b);
        // 6B 00F6
        gbc.setState(0x1c7e, 0xcc85, 0xad0, 0xe2f4, 0x62b9, 0xb97e, 0x1, 0x0);
        gbc.writeMem(0x1c7e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xcc85);
        EXPECT(gbc.pc(), 0x1c7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 00F7
        gbc.setState(0xea59, 0x5744, 0xcfb0, 0xac2f, 0x2f9e, 0x5428, 0x0, 0x1);
        gbc.writeMem(0xea59, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x5744);
        EXPECT(gbc.pc(), 0xea5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea59), 0x6b);
        // 6B 00F8
        gbc.setState(0x185d, 0xaba5, 0xaaa0, 0x584a, 0x3b89, 0x33dc, 0x0, 0x1);
        gbc.writeMem(0x185d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xaba5);
        EXPECT(gbc.pc(), 0x185e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 00F9
        gbc.setState(0x72b4, 0xda3d, 0x3960, 0xa089, 0xf5c8, 0x48b5, 0x1, 0x0);
        gbc.writeMem(0x72b4, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xda3d);
        EXPECT(gbc.pc(), 0x72b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 00FA
        gbc.setState(0xb6ee, 0x30b1, 0xee90, 0x9c5d, 0x9b3b, 0x32e5, 0x1, 0x1);
        gbc.writeMem(0xb6ee, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x30b1);
        EXPECT(gbc.pc(), 0xb6ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6ee), 0x6b);
        // 6B 00FB
        gbc.setState(0xa175, 0x7a8c, 0x7710, 0x8a03, 0x7558, 0x6b75, 0x0, 0x0);
        gbc.writeMem(0xa175, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x7a8c);
        EXPECT(gbc.pc(), 0xa176);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa175), 0x6b);
        // 6B 00FC
        gbc.setState(0x850b, 0xf267, 0x7280, 0x3cae, 0x8be1, 0x9987, 0x1, 0x1);
        gbc.writeMem(0x850b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xf267);
        EXPECT(gbc.pc(), 0x850c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x850b), 0x6b);
        // 6B 00FD
        gbc.setState(0x80ae, 0xd9c9, 0xe2d0, 0x4550, 0xe60, 0x63be, 0x1, 0x1);
        gbc.writeMem(0x80ae, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xd9c9);
        EXPECT(gbc.pc(), 0x80af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80ae), 0x6b);
        // 6B 00FE
        gbc.setState(0x4c1e, 0x166c, 0x24e0, 0xa9fd, 0xfd62, 0xad39, 0x0, 0x1);
        gbc.writeMem(0x4c1e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x166c);
        EXPECT(gbc.pc(), 0x4c1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 00FF
        gbc.setState(0x47a7, 0xd5d5, 0x7130, 0x1a8f, 0xffdd, 0x9d2c, 0x1, 0x0);
        gbc.writeMem(0x47a7, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd5d5);
        EXPECT(gbc.pc(), 0x47a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0102
        gbc.setState(0x6e44, 0x9e2f, 0xbe30, 0x4669, 0x2364, 0x5ae6, 0x1, 0x0);
        gbc.writeMem(0x6e44, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x9e2f);
        EXPECT(gbc.pc(), 0x6e45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0103
        gbc.setState(0xb290, 0x3481, 0xec50, 0xfea3, 0x16cd, 0x1777, 0x0, 0x0);
        gbc.writeMem(0xb290, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x3481);
        EXPECT(gbc.pc(), 0xb291);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb290), 0x6b);
        // 6B 0104
        gbc.setState(0x3408, 0x64a, 0x5ce0, 0xc7a8, 0x5829, 0x7702, 0x0, 0x1);
        gbc.writeMem(0x3408, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x64a);
        EXPECT(gbc.pc(), 0x3409);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0105
        gbc.setState(0xa860, 0xf271, 0xace0, 0x3fe3, 0x12d8, 0x541a, 0x0, 0x0);
        gbc.writeMem(0xa860, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xf271);
        EXPECT(gbc.pc(), 0xa861);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa860), 0x6b);
        // 6B 0106
        gbc.setState(0x3b94, 0xa641, 0xc3a0, 0x40ff, 0xe8ab, 0xa787, 0x1, 0x0);
        gbc.writeMem(0x3b94, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xa641);
        EXPECT(gbc.pc(), 0x3b95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0108
        gbc.setState(0x2d36, 0x5342, 0xe400, 0xe614, 0xde0f, 0xf5df, 0x1, 0x1);
        gbc.writeMem(0x2d36, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x5342);
        EXPECT(gbc.pc(), 0x2d37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0109
        gbc.setState(0xcd16, 0x4a87, 0x290, 0x7dd5, 0x91dc, 0x877e, 0x1, 0x1);
        gbc.writeMem(0xcd16, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x4a87);
        EXPECT(gbc.pc(), 0xcd17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd16), 0x6b);
        // 6B 010A
        gbc.setState(0x97, 0xe8c7, 0x32d0, 0xa147, 0x1d65, 0xbbf4, 0x1, 0x0);
        gbc.writeMem(0x97, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xe8c7);
        EXPECT(gbc.pc(), 0x98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 010B
        gbc.setState(0x4f25, 0x8a4e, 0xac60, 0xf7af, 0xf9b8, 0xb087, 0x1, 0x0);
        gbc.writeMem(0x4f25, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x8a4e);
        EXPECT(gbc.pc(), 0x4f26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 010C
        gbc.setState(0x77aa, 0xb801, 0x6d70, 0xf499, 0x4a0a, 0xce14, 0x1, 0x0);
        gbc.writeMem(0x77aa, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb801);
        EXPECT(gbc.pc(), 0x77ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 010D
        gbc.setState(0x18ae, 0x4562, 0xa9c0, 0xb615, 0xbb61, 0x1973, 0x1, 0x1);
        gbc.writeMem(0x18ae, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x4562);
        EXPECT(gbc.pc(), 0x18af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 010E
        gbc.setState(0x4c17, 0x7b46, 0x6f90, 0x9618, 0x5f57, 0xc7f1, 0x1, 0x0);
        gbc.writeMem(0x4c17, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x7b46);
        EXPECT(gbc.pc(), 0x4c18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 010F
        gbc.setState(0x407, 0xcf46, 0x8d80, 0x7391, 0xfe22, 0xddc0, 0x1, 0x1);
        gbc.writeMem(0x407, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xcf46);
        EXPECT(gbc.pc(), 0x408);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0110
        gbc.setState(0xbc84, 0xc68d, 0xe840, 0x4c14, 0xee2b, 0x5d96, 0x1, 0x1);
        gbc.writeMem(0xbc84, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xc68d);
        EXPECT(gbc.pc(), 0xbc85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc84), 0x6b);
        // 6B 0111
        gbc.setState(0xbc09, 0x4188, 0x34f0, 0xbc2a, 0xc04c, 0x8784, 0x0, 0x0);
        gbc.writeMem(0xbc09, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x4188);
        EXPECT(gbc.pc(), 0xbc0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc09), 0x6b);
        // 6B 0112
        gbc.setState(0x6cd, 0x158c, 0x2f50, 0x7105, 0x92f2, 0x2234, 0x0, 0x1);
        gbc.writeMem(0x6cd, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x158c);
        EXPECT(gbc.pc(), 0x6ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0113
        gbc.setState(0x2f30, 0x5bb5, 0x58b0, 0xad77, 0x607a, 0x852d, 0x1, 0x1);
        gbc.writeMem(0x2f30, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x5bb5);
        EXPECT(gbc.pc(), 0x2f31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0114
        gbc.setState(0x3767, 0x4064, 0x190, 0xb4bb, 0x45d6, 0x171a, 0x0, 0x0);
        gbc.writeMem(0x3767, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x4064);
        EXPECT(gbc.pc(), 0x3768);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0115
        gbc.setState(0xf18, 0x4fab, 0xed10, 0x2880, 0x52af, 0xd6f8, 0x0, 0x0);
        gbc.writeMem(0xf18, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x4fab);
        EXPECT(gbc.pc(), 0xf19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0116
        gbc.setState(0xc8c9, 0x6e94, 0xb890, 0x6552, 0xbffc, 0x1778, 0x0, 0x0);
        gbc.writeMem(0xc8c9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x6e94);
        EXPECT(gbc.pc(), 0xc8ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8c9), 0x6b);
        // 6B 0117
        gbc.setState(0xc67e, 0x10bd, 0x6170, 0x9f6c, 0xf378, 0x6b89, 0x0, 0x0);
        gbc.writeMem(0xc67e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x10bd);
        EXPECT(gbc.pc(), 0xc67f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc67e), 0x6b);
        // 6B 0118
        gbc.setState(0x9197, 0x839b, 0x2470, 0xb1e1, 0x1ce4, 0xd518, 0x1, 0x0);
        gbc.writeMem(0x9197, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x839b);
        EXPECT(gbc.pc(), 0x9198);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9197), 0x6b);
        // 6B 011A
        gbc.setState(0x5c72, 0x5476, 0xc780, 0xb777, 0x4320, 0xe854, 0x0, 0x1);
        gbc.writeMem(0x5c72, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x5476);
        EXPECT(gbc.pc(), 0x5c73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 011B
        gbc.setState(0x4991, 0x4121, 0x9b0, 0x65f9, 0x16e9, 0xd81e, 0x0, 0x1);
        gbc.writeMem(0x4991, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x4121);
        EXPECT(gbc.pc(), 0x4992);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 011C
        gbc.setState(0x902d, 0x6bcb, 0xde00, 0xaf8a, 0x663, 0x9d6e, 0x1, 0x1);
        gbc.writeMem(0x902d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x6bcb);
        EXPECT(gbc.pc(), 0x902e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x902d), 0x6b);
        // 6B 011D
        gbc.setState(0x2731, 0xcc75, 0xd100, 0xa1d4, 0x143a, 0x41ee, 0x1, 0x0);
        gbc.writeMem(0x2731, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xcc75);
        EXPECT(gbc.pc(), 0x2732);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 011E
        gbc.setState(0x83cc, 0xb350, 0x8d50, 0x333e, 0xb92f, 0x28a3, 0x1, 0x0);
        gbc.writeMem(0x83cc, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xb350);
        EXPECT(gbc.pc(), 0x83cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83cc), 0x6b);
        // 6B 011F
        gbc.setState(0x7cd3, 0x7a35, 0x4b70, 0xd7b, 0x50b7, 0xa0df, 0x1, 0x1);
        gbc.writeMem(0x7cd3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x7a35);
        EXPECT(gbc.pc(), 0x7cd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0120
        gbc.setState(0x1490, 0x7896, 0xde90, 0xeea3, 0x2f97, 0xaf4, 0x1, 0x1);
        gbc.writeMem(0x1490, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x7896);
        EXPECT(gbc.pc(), 0x1491);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0121
        gbc.setState(0x36d8, 0xbbba, 0xc130, 0x1898, 0xb9ba, 0x3bf6, 0x1, 0x0);
        gbc.writeMem(0x36d8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xbbba);
        EXPECT(gbc.pc(), 0x36d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0122
        gbc.setState(0xd8ee, 0xc9bf, 0xd250, 0x9c89, 0x8f4e, 0xfd8e, 0x0, 0x0);
        gbc.writeMem(0xd8ee, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xc9bf);
        EXPECT(gbc.pc(), 0xd8ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8ee), 0x6b);
        // 6B 0124
        gbc.setState(0x2381, 0xd965, 0xed0, 0x5544, 0x626a, 0x25d4, 0x1, 0x1);
        gbc.writeMem(0x2381, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xd965);
        EXPECT(gbc.pc(), 0x2382);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0125
        gbc.setState(0xbabe, 0xc074, 0xc7c0, 0x1bec, 0x4fb0, 0x65ca, 0x0, 0x0);
        gbc.writeMem(0xbabe, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xc074);
        EXPECT(gbc.pc(), 0xbabf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbabe), 0x6b);
        // 6B 0126
        gbc.setState(0xc6b8, 0xa260, 0x1aa0, 0x913e, 0xb5be, 0xfac6, 0x0, 0x1);
        gbc.writeMem(0xc6b8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xa260);
        EXPECT(gbc.pc(), 0xc6b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6b8), 0x6b);
        // 6B 0127
        gbc.setState(0x97d0, 0xa065, 0x62d0, 0x8693, 0x5694, 0x6767, 0x1, 0x0);
        gbc.writeMem(0x97d0, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xa065);
        EXPECT(gbc.pc(), 0x97d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97d0), 0x6b);
        // 6B 0128
        gbc.setState(0x7ac5, 0xea81, 0x47c0, 0xfdf8, 0xe5f4, 0xc49d, 0x1, 0x1);
        gbc.writeMem(0x7ac5, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xea81);
        EXPECT(gbc.pc(), 0x7ac6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0129
        gbc.setState(0xd623, 0x177c, 0xb720, 0x87fd, 0x6480, 0x6991, 0x0, 0x1);
        gbc.writeMem(0xd623, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x177c);
        EXPECT(gbc.pc(), 0xd624);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd623), 0x6b);
        // 6B 012A
        gbc.setState(0x45de, 0xe085, 0xe8b0, 0x68e9, 0x5995, 0x2471, 0x0, 0x1);
        gbc.writeMem(0x45de, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xe085);
        EXPECT(gbc.pc(), 0x45df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 012B
        gbc.setState(0xb708, 0xea15, 0x69e0, 0x1928, 0x566d, 0x2c6f, 0x0, 0x1);
        gbc.writeMem(0xb708, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xea15);
        EXPECT(gbc.pc(), 0xb709);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb708), 0x6b);
        // 6B 012C
        gbc.setState(0x34b2, 0x5325, 0x2c20, 0xfd30, 0x3051, 0xac44, 0x0, 0x1);
        gbc.writeMem(0x34b2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x5325);
        EXPECT(gbc.pc(), 0x34b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 012F
        gbc.setState(0x3130, 0xc862, 0xc300, 0xbaf9, 0x25e7, 0x570b, 0x1, 0x0);
        gbc.writeMem(0x3130, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xc862);
        EXPECT(gbc.pc(), 0x3131);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0130
        gbc.setState(0x32c9, 0x56a, 0xad30, 0x11e3, 0x8fec, 0xbe90, 0x1, 0x0);
        gbc.writeMem(0x32c9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x56a);
        EXPECT(gbc.pc(), 0x32ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0131
        gbc.setState(0xd818, 0xac28, 0x8030, 0x3952, 0xb2b3, 0xc971, 0x0, 0x1);
        gbc.writeMem(0xd818, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xac28);
        EXPECT(gbc.pc(), 0xd819);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd818), 0x6b);
        // 6B 0132
        gbc.setState(0xd07e, 0xe50b, 0xf9a0, 0x58a2, 0x65e9, 0xed1e, 0x1, 0x1);
        gbc.writeMem(0xd07e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xe50b);
        EXPECT(gbc.pc(), 0xd07f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd07e), 0x6b);
        // 6B 0133
        gbc.setState(0xc4d5, 0xea47, 0x9930, 0x155c, 0xc53a, 0x734d, 0x1, 0x1);
        gbc.writeMem(0xc4d5, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xea47);
        EXPECT(gbc.pc(), 0xc4d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4d5), 0x6b);
        // 6B 0134
        gbc.setState(0x6b14, 0xeb79, 0x1600, 0xf787, 0x4cb2, 0xdc41, 0x0, 0x1);
        gbc.writeMem(0x6b14, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xeb79);
        EXPECT(gbc.pc(), 0x6b15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0135
        gbc.setState(0x5d6c, 0xde5e, 0xa700, 0x7a5e, 0x7fa8, 0x9098, 0x0, 0x0);
        gbc.writeMem(0x5d6c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xde5e);
        EXPECT(gbc.pc(), 0x5d6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0136
        gbc.setState(0xe032, 0xaff6, 0xea0, 0x8985, 0x5bf0, 0x7e58, 0x0, 0x1);
        gbc.writeMem(0xe032, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xaff6);
        EXPECT(gbc.pc(), 0xe033);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe032), 0x6b);
        // 6B 0137
        gbc.setState(0xd4f6, 0xf5b0, 0x2110, 0xd2d, 0x4a85, 0xf656, 0x0, 0x0);
        gbc.writeMem(0xd4f6, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xf5b0);
        EXPECT(gbc.pc(), 0xd4f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4f6), 0x6b);
        // 6B 0138
        gbc.setState(0x6091, 0x6e62, 0x6d90, 0xbdba, 0xd612, 0x3b14, 0x0, 0x0);
        gbc.writeMem(0x6091, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x6e62);
        EXPECT(gbc.pc(), 0x6092);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0139
        gbc.setState(0xc6a2, 0x8c22, 0x6000, 0x518c, 0x4b43, 0x5189, 0x0, 0x0);
        gbc.writeMem(0xc6a2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x8c22);
        EXPECT(gbc.pc(), 0xc6a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6a2), 0x6b);
        // 6B 013A
        gbc.setState(0x13ab, 0xa1ba, 0x3190, 0x6554, 0xbca0, 0xf236, 0x1, 0x1);
        gbc.writeMem(0x13ab, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xa1ba);
        EXPECT(gbc.pc(), 0x13ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 013B
        gbc.setState(0x5d92, 0x947e, 0x1430, 0xd259, 0x121, 0x55c5, 0x0, 0x1);
        gbc.writeMem(0x5d92, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x947e);
        EXPECT(gbc.pc(), 0x5d93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 013C
        gbc.setState(0xbbcc, 0xb24c, 0x5db0, 0x3e45, 0x30c0, 0x3f32, 0x0, 0x1);
        gbc.writeMem(0xbbcc, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xb24c);
        EXPECT(gbc.pc(), 0xbbcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbcc), 0x6b);
        // 6B 013D
        gbc.setState(0x2d3, 0x81cc, 0x3880, 0xa8da, 0x5b32, 0x598e, 0x1, 0x1);
        gbc.writeMem(0x2d3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x81cc);
        EXPECT(gbc.pc(), 0x2d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 013E
        gbc.setState(0xc456, 0x77be, 0x23b0, 0xb304, 0x23b8, 0xcc5d, 0x0, 0x1);
        gbc.writeMem(0xc456, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x77be);
        EXPECT(gbc.pc(), 0xc457);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc456), 0x6b);
        // 6B 0140
        gbc.setState(0x1f0, 0x3f9a, 0x41d0, 0x4e7d, 0x6d64, 0xe1c1, 0x0, 0x0);
        gbc.writeMem(0x1f0, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x3f9a);
        EXPECT(gbc.pc(), 0x1f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0141
        gbc.setState(0x42bc, 0x26e4, 0xf530, 0x3ef4, 0x866b, 0xe7b5, 0x1, 0x0);
        gbc.writeMem(0x42bc, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x26e4);
        EXPECT(gbc.pc(), 0x42bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0142
        gbc.setState(0x795f, 0xccb5, 0xa8b0, 0x37ac, 0x238, 0xcf4c, 0x1, 0x0);
        gbc.writeMem(0x795f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xccb5);
        EXPECT(gbc.pc(), 0x7960);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0143
        gbc.setState(0x6da, 0xf116, 0x1c30, 0xbd44, 0x1639, 0x3b3c, 0x0, 0x1);
        gbc.writeMem(0x6da, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xf116);
        EXPECT(gbc.pc(), 0x6db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0144
        gbc.setState(0x8e10, 0x415c, 0xff60, 0xd3e5, 0xc6ee, 0x22ff, 0x0, 0x0);
        gbc.writeMem(0x8e10, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x415c);
        EXPECT(gbc.pc(), 0x8e11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e10), 0x6b);
        // 6B 0145
        gbc.setState(0xa89e, 0x6f83, 0x9190, 0x5ff0, 0x827f, 0xe82b, 0x1, 0x0);
        gbc.writeMem(0xa89e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x6f83);
        EXPECT(gbc.pc(), 0xa89f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa89e), 0x6b);
        // 6B 0146
        gbc.setState(0x7c69, 0x85e5, 0x4e0, 0x2203, 0x12cb, 0x5542, 0x1, 0x1);
        gbc.writeMem(0x7c69, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x85e5);
        EXPECT(gbc.pc(), 0x7c6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0147
        gbc.setState(0x4459, 0x45fa, 0x1590, 0xf75d, 0x5bf7, 0xc9d6, 0x1, 0x1);
        gbc.writeMem(0x4459, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x45fa);
        EXPECT(gbc.pc(), 0x445a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0148
        gbc.setState(0x8092, 0xf429, 0x12f0, 0x3a2f, 0x19a0, 0x16c7, 0x0, 0x0);
        gbc.writeMem(0x8092, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xf429);
        EXPECT(gbc.pc(), 0x8093);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8092), 0x6b);
        // 6B 0149
        gbc.setState(0x841a, 0x764f, 0xc650, 0xa4e, 0x6213, 0x946d, 0x1, 0x0);
        gbc.writeMem(0x841a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x764f);
        EXPECT(gbc.pc(), 0x841b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x841a), 0x6b);
        // 6B 014A
        gbc.setState(0x746e, 0xc9fe, 0xfc60, 0xc227, 0x33ea, 0x19d2, 0x1, 0x0);
        gbc.writeMem(0x746e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xc9fe);
        EXPECT(gbc.pc(), 0x746f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 014B
        gbc.setState(0xeeea, 0x9401, 0x5130, 0x8126, 0x94d6, 0xfe01, 0x1, 0x1);
        gbc.writeMem(0xeeea, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x9401);
        EXPECT(gbc.pc(), 0xeeeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeeea), 0x6b);
        // 6B 014C
        gbc.setState(0xe343, 0x34b4, 0xa9a0, 0x4876, 0xf113, 0x266b, 0x1, 0x1);
        gbc.writeMem(0xe343, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x34b4);
        EXPECT(gbc.pc(), 0xe344);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe343), 0x6b);
        // 6B 014D
        gbc.setState(0xdc33, 0x2abb, 0x60d0, 0xa399, 0x752e, 0xd5e3, 0x1, 0x1);
        gbc.writeMem(0xdc33, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x2abb);
        EXPECT(gbc.pc(), 0xdc34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc33), 0x6b);
        // 6B 014E
        gbc.setState(0xa570, 0x2d82, 0x5390, 0x776e, 0xd8d9, 0xb3d1, 0x1, 0x0);
        gbc.writeMem(0xa570, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x2d82);
        EXPECT(gbc.pc(), 0xa571);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa570), 0x6b);
        // 6B 014F
        gbc.setState(0x516a, 0x604b, 0x3ec0, 0x24b2, 0x50fc, 0xb062, 0x1, 0x0);
        gbc.writeMem(0x516a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x604b);
        EXPECT(gbc.pc(), 0x516b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0150
        gbc.setState(0x7079, 0xa13e, 0xa490, 0x89eb, 0xa985, 0xc69c, 0x1, 0x0);
        gbc.writeMem(0x7079, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xa13e);
        EXPECT(gbc.pc(), 0x707a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0151
        gbc.setState(0x2305, 0xa6f5, 0x7150, 0x591b, 0xbb17, 0xf9ad, 0x0, 0x0);
        gbc.writeMem(0x2305, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa6f5);
        EXPECT(gbc.pc(), 0x2306);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0153
        gbc.setState(0x2834, 0x6e48, 0xc230, 0xde21, 0x9b2b, 0x8044, 0x1, 0x0);
        gbc.writeMem(0x2834, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x6e48);
        EXPECT(gbc.pc(), 0x2835);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0154
        gbc.setState(0x17a8, 0x10f3, 0x4070, 0xd91a, 0xea23, 0x6df6, 0x1, 0x1);
        gbc.writeMem(0x17a8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x10f3);
        EXPECT(gbc.pc(), 0x17a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0155
        gbc.setState(0x4090, 0x989f, 0xaf20, 0xc5eb, 0x7a65, 0xa0d8, 0x0, 0x1);
        gbc.writeMem(0x4090, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x989f);
        EXPECT(gbc.pc(), 0x4091);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0156
        gbc.setState(0xa88c, 0x562d, 0x22c0, 0x6603, 0x674d, 0xa200, 0x1, 0x0);
        gbc.writeMem(0xa88c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x562d);
        EXPECT(gbc.pc(), 0xa88d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa88c), 0x6b);
        // 6B 0157
        gbc.setState(0x12e4, 0x2e9c, 0x8bc0, 0x7674, 0x3ca6, 0xaffc, 0x1, 0x1);
        gbc.writeMem(0x12e4, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x2e9c);
        EXPECT(gbc.pc(), 0x12e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0158
        gbc.setState(0x2cd4, 0x3b3, 0x4230, 0xe4f, 0x5a23, 0xd08c, 0x0, 0x0);
        gbc.writeMem(0x2cd4, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x3b3);
        EXPECT(gbc.pc(), 0x2cd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0159
        gbc.setState(0xd118, 0xc4e3, 0x1db0, 0x9b05, 0x507e, 0x67b4, 0x1, 0x0);
        gbc.writeMem(0xd118, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xc4e3);
        EXPECT(gbc.pc(), 0xd119);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd118), 0x6b);
        // 6B 015A
        gbc.setState(0x935c, 0xf73, 0xcea0, 0xde98, 0x642f, 0x874a, 0x0, 0x1);
        gbc.writeMem(0x935c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xf73);
        EXPECT(gbc.pc(), 0x935d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x935c), 0x6b);
        // 6B 015B
        gbc.setState(0x1a96, 0x68e1, 0x29d0, 0x6192, 0x3a83, 0xe35d, 0x0, 0x1);
        gbc.writeMem(0x1a96, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x68e1);
        EXPECT(gbc.pc(), 0x1a97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 015C
        gbc.setState(0x9019, 0x86df, 0xb150, 0xef28, 0xc406, 0x819b, 0x0, 0x1);
        gbc.writeMem(0x9019, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x86df);
        EXPECT(gbc.pc(), 0x901a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9019), 0x6b);
        // 6B 015D
        gbc.setState(0xc260, 0xc945, 0xc670, 0xe4c5, 0x8e8, 0x7bf9, 0x0, 0x1);
        gbc.writeMem(0xc260, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xc945);
        EXPECT(gbc.pc(), 0xc261);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc260), 0x6b);
        // 6B 015E
        gbc.setState(0xb839, 0x93ee, 0x6680, 0xe371, 0x408c, 0xb441, 0x1, 0x1);
        gbc.writeMem(0xb839, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x93ee);
        EXPECT(gbc.pc(), 0xb83a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb839), 0x6b);
        // 6B 015F
        gbc.setState(0x861d, 0x4a25, 0x4430, 0xe38e, 0xcc9a, 0xb943, 0x0, 0x0);
        gbc.writeMem(0x861d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x4a25);
        EXPECT(gbc.pc(), 0x861e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x861d), 0x6b);
        // 6B 0160
        gbc.setState(0x930f, 0x4513, 0xc7e0, 0x1c66, 0xe875, 0x7d1f, 0x1, 0x1);
        gbc.writeMem(0x930f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x4513);
        EXPECT(gbc.pc(), 0x9310);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x930f), 0x6b);
        // 6B 0161
        gbc.setState(0xe612, 0x2bb3, 0x63a0, 0xa876, 0xf978, 0xc256, 0x1, 0x0);
        gbc.writeMem(0xe612, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x2bb3);
        EXPECT(gbc.pc(), 0xe613);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe612), 0x6b);
        // 6B 0162
        gbc.setState(0x3351, 0x74c1, 0x7920, 0x2c49, 0xdd2b, 0x7bd7, 0x1, 0x1);
        gbc.writeMem(0x3351, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x74c1);
        EXPECT(gbc.pc(), 0x3352);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0163
        gbc.setState(0x978e, 0x8cc0, 0xe490, 0x20b2, 0x13fb, 0xa350, 0x0, 0x0);
        gbc.writeMem(0x978e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x8cc0);
        EXPECT(gbc.pc(), 0x978f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x978e), 0x6b);
        // 6B 0164
        gbc.setState(0x1556, 0xd2e6, 0xd8f0, 0xd4b, 0x55bd, 0x307d, 0x1, 0x1);
        gbc.writeMem(0x1556, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd2e6);
        EXPECT(gbc.pc(), 0x1557);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0165
        gbc.setState(0x7888, 0x9373, 0x54b0, 0xdb8c, 0x6821, 0x5e5f, 0x1, 0x1);
        gbc.writeMem(0x7888, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x9373);
        EXPECT(gbc.pc(), 0x7889);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0166
        gbc.setState(0xad5d, 0x81b9, 0x4f80, 0x474a, 0x2340, 0x6f17, 0x1, 0x1);
        gbc.writeMem(0xad5d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x81b9);
        EXPECT(gbc.pc(), 0xad5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad5d), 0x6b);
        // 6B 0167
        gbc.setState(0x2c4, 0xf402, 0x1160, 0x1bd7, 0x7388, 0x50aa, 0x1, 0x0);
        gbc.writeMem(0x2c4, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xf402);
        EXPECT(gbc.pc(), 0x2c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0168
        gbc.setState(0xcb88, 0x8f66, 0x1760, 0x1675, 0x6f17, 0x92af, 0x0, 0x1);
        gbc.writeMem(0xcb88, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x8f66);
        EXPECT(gbc.pc(), 0xcb89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb88), 0x6b);
        // 6B 0169
        gbc.setState(0xc3e0, 0xe3fd, 0x80e0, 0x1e4a, 0x189f, 0x6864, 0x0, 0x1);
        gbc.writeMem(0xc3e0, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xe3fd);
        EXPECT(gbc.pc(), 0xc3e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3e0), 0x6b);
        // 6B 016A
        gbc.setState(0xd772, 0x9603, 0x9970, 0xfbae, 0xd26c, 0x8191, 0x0, 0x0);
        gbc.writeMem(0xd772, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x9603);
        EXPECT(gbc.pc(), 0xd773);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd772), 0x6b);
        // 6B 016B
        gbc.setState(0x68ad, 0x7aad, 0x800, 0xa3c7, 0x1a49, 0x1f2f, 0x1, 0x1);
        gbc.writeMem(0x68ad, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x7aad);
        EXPECT(gbc.pc(), 0x68ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 016C
        gbc.setState(0x11fd, 0x40d0, 0xa640, 0x35b9, 0xb06d, 0xf068, 0x0, 0x1);
        gbc.writeMem(0x11fd, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x40d0);
        EXPECT(gbc.pc(), 0x11fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 016D
        gbc.setState(0x224d, 0x539d, 0xfeb0, 0x8f29, 0x5c91, 0x563e, 0x0, 0x1);
        gbc.writeMem(0x224d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x539d);
        EXPECT(gbc.pc(), 0x224e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 016E
        gbc.setState(0x6526, 0x18a8, 0xe080, 0xa75d, 0xa8f6, 0x492d, 0x0, 0x0);
        gbc.writeMem(0x6526, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x18a8);
        EXPECT(gbc.pc(), 0x6527);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0170
        gbc.setState(0xd0c5, 0x724d, 0xaf0, 0x7c2f, 0x8a94, 0x8043, 0x0, 0x1);
        gbc.writeMem(0xd0c5, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x724d);
        EXPECT(gbc.pc(), 0xd0c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0c5), 0x6b);
        // 6B 0171
        gbc.setState(0x541a, 0xcd78, 0xb8f0, 0x16a, 0xbace, 0x7910, 0x0, 0x1);
        gbc.writeMem(0x541a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xcd78);
        EXPECT(gbc.pc(), 0x541b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0172
        gbc.setState(0xa981, 0x8322, 0x5aa0, 0x2dc5, 0xc87a, 0x3d35, 0x1, 0x0);
        gbc.writeMem(0xa981, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x8322);
        EXPECT(gbc.pc(), 0xa982);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa981), 0x6b);
        // 6B 0173
        gbc.setState(0x3034, 0x9b2d, 0x2640, 0x57ef, 0x4868, 0x9fff, 0x1, 0x1);
        gbc.writeMem(0x3034, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x9b2d);
        EXPECT(gbc.pc(), 0x3035);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0174
        gbc.setState(0x80a9, 0x60cb, 0x9580, 0x3b2b, 0x44ae, 0x74c3, 0x1, 0x1);
        gbc.writeMem(0x80a9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x60cb);
        EXPECT(gbc.pc(), 0x80aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80a9), 0x6b);
        // 6B 0175
        gbc.setState(0x6d1f, 0x3846, 0xea10, 0x8732, 0x106a, 0x12ac, 0x1, 0x1);
        gbc.writeMem(0x6d1f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x3846);
        EXPECT(gbc.pc(), 0x6d20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0176
        gbc.setState(0xaa14, 0x5bd3, 0x94b0, 0x97d9, 0x2ede, 0xa8cf, 0x1, 0x0);
        gbc.writeMem(0xaa14, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x5bd3);
        EXPECT(gbc.pc(), 0xaa15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa14), 0x6b);
        // 6B 0177
        gbc.setState(0x78d8, 0x6b30, 0x9e0, 0x7e2d, 0xccc7, 0x15fc, 0x0, 0x0);
        gbc.writeMem(0x78d8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x6b30);
        EXPECT(gbc.pc(), 0x78d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0178
        gbc.setState(0x83b2, 0x9fdc, 0x7f90, 0xb20f, 0x623f, 0x7ec9, 0x0, 0x1);
        gbc.writeMem(0x83b2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x9fdc);
        EXPECT(gbc.pc(), 0x83b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83b2), 0x6b);
        // 6B 0179
        gbc.setState(0x2fa3, 0x2d1c, 0xefb0, 0x49c1, 0x5676, 0x854f, 0x0, 0x1);
        gbc.writeMem(0x2fa3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x2d1c);
        EXPECT(gbc.pc(), 0x2fa4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 017A
        gbc.setState(0x2ef5, 0x7f4e, 0x6cf0, 0x23de, 0xb00e, 0x2751, 0x0, 0x0);
        gbc.writeMem(0x2ef5, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x7f4e);
        EXPECT(gbc.pc(), 0x2ef6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 017B
        gbc.setState(0x7d08, 0x463, 0x9be0, 0x3a82, 0x9b0e, 0x1fc, 0x1, 0x1);
        gbc.writeMem(0x7d08, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x463);
        EXPECT(gbc.pc(), 0x7d09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 017C
        gbc.setState(0x4930, 0x445b, 0x8610, 0x7f29, 0xe60e, 0x6e83, 0x0, 0x1);
        gbc.writeMem(0x4930, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x445b);
        EXPECT(gbc.pc(), 0x4931);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 017D
        gbc.setState(0xaa16, 0x42e6, 0x2a70, 0x9df8, 0xef79, 0xe95e, 0x0, 0x0);
        gbc.writeMem(0xaa16, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x42e6);
        EXPECT(gbc.pc(), 0xaa17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa16), 0x6b);
        // 6B 017E
        gbc.setState(0x82e2, 0xe50f, 0xcd60, 0xc1e4, 0x3fe2, 0xc4d4, 0x1, 0x0);
        gbc.writeMem(0x82e2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xe50f);
        EXPECT(gbc.pc(), 0x82e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82e2), 0x6b);
        // 6B 017F
        gbc.setState(0x6e92, 0x159e, 0x9c20, 0xfc74, 0x530b, 0x144e, 0x1, 0x1);
        gbc.writeMem(0x6e92, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x159e);
        EXPECT(gbc.pc(), 0x6e93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0180
        gbc.setState(0xc1d8, 0xbc12, 0xf070, 0x2330, 0x5011, 0x142b, 0x0, 0x1);
        gbc.writeMem(0xc1d8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xbc12);
        EXPECT(gbc.pc(), 0xc1d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1d8), 0x6b);
        // 6B 0181
        gbc.setState(0x2e08, 0x9994, 0x58c0, 0x96b0, 0xb608, 0xb5a8, 0x0, 0x0);
        gbc.writeMem(0x2e08, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x9994);
        EXPECT(gbc.pc(), 0x2e09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0182
        gbc.setState(0xa77e, 0x5300, 0xa9f0, 0xe9a4, 0xb78c, 0x5d4e, 0x0, 0x1);
        gbc.writeMem(0xa77e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5300);
        EXPECT(gbc.pc(), 0xa77f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa77e), 0x6b);
        // 6B 0183
        gbc.setState(0xdee0, 0x2088, 0x4c60, 0xa548, 0xae25, 0xfbfc, 0x1, 0x1);
        gbc.writeMem(0xdee0, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x2088);
        EXPECT(gbc.pc(), 0xdee1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdee0), 0x6b);
        // 6B 0184
        gbc.setState(0xc927, 0x81d4, 0x2c40, 0x8279, 0x8848, 0xd1cc, 0x0, 0x1);
        gbc.writeMem(0xc927, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x81d4);
        EXPECT(gbc.pc(), 0xc928);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc927), 0x6b);
        // 6B 0185
        gbc.setState(0x809e, 0x6d42, 0x5e10, 0xd7fb, 0x5a0f, 0xc82f, 0x0, 0x0);
        gbc.writeMem(0x809e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x6d42);
        EXPECT(gbc.pc(), 0x809f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x809e), 0x6b);
        // 6B 0186
        gbc.setState(0x7fb1, 0x3471, 0x3fb0, 0x6878, 0x807f, 0x1f19, 0x1, 0x1);
        gbc.writeMem(0x7fb1, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x3471);
        EXPECT(gbc.pc(), 0x7fb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0187
        gbc.setState(0x88de, 0x698c, 0xb810, 0xfaf3, 0x6bfb, 0x65d3, 0x0, 0x1);
        gbc.writeMem(0x88de, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x698c);
        EXPECT(gbc.pc(), 0x88df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88de), 0x6b);
        // 6B 0188
        gbc.setState(0x3bf6, 0x3fb, 0x6740, 0xc9e3, 0xdb2d, 0xe6c1, 0x0, 0x0);
        gbc.writeMem(0x3bf6, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x3fb);
        EXPECT(gbc.pc(), 0x3bf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0189
        gbc.setState(0xb9d1, 0x9b9f, 0x8d30, 0x680e, 0x3c29, 0x6ed5, 0x1, 0x1);
        gbc.writeMem(0xb9d1, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x9b9f);
        EXPECT(gbc.pc(), 0xb9d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9d1), 0x6b);
        // 6B 018A
        gbc.setState(0x76a9, 0x37c4, 0x1c40, 0x3624, 0x6e1a, 0x4d37, 0x0, 0x0);
        gbc.writeMem(0x76a9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x37c4);
        EXPECT(gbc.pc(), 0x76aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 018B
        gbc.setState(0x142f, 0xa686, 0x4c30, 0x8190, 0xbb04, 0x5000, 0x1, 0x0);
        gbc.writeMem(0x142f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xa686);
        EXPECT(gbc.pc(), 0x1430);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 018C
        gbc.setState(0x6114, 0x5551, 0x4700, 0xf33b, 0xa1f1, 0x741f, 0x1, 0x0);
        gbc.writeMem(0x6114, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x5551);
        EXPECT(gbc.pc(), 0x6115);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 018D
        gbc.setState(0x3284, 0x25c8, 0xf10, 0x6515, 0xa326, 0xd1bf, 0x1, 0x0);
        gbc.writeMem(0x3284, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x25c8);
        EXPECT(gbc.pc(), 0x3285);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 018E
        gbc.setState(0x92c9, 0x649d, 0x2ca0, 0xfd39, 0xed05, 0x56fe, 0x0, 0x1);
        gbc.writeMem(0x92c9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x649d);
        EXPECT(gbc.pc(), 0x92ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92c9), 0x6b);
        // 6B 018F
        gbc.setState(0x20d9, 0x54db, 0x2930, 0x48d5, 0xec, 0x8d9f, 0x1, 0x0);
        gbc.writeMem(0x20d9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x54db);
        EXPECT(gbc.pc(), 0x20da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0190
        gbc.setState(0x53dc, 0x1b3b, 0xb030, 0xd6f5, 0xd5e4, 0x4de7, 0x0, 0x1);
        gbc.writeMem(0x53dc, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x1b3b);
        EXPECT(gbc.pc(), 0x53dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0191
        gbc.setState(0x78b2, 0xea41, 0xb9c0, 0x1182, 0x8a38, 0x7d6a, 0x1, 0x0);
        gbc.writeMem(0x78b2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xea41);
        EXPECT(gbc.pc(), 0x78b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0192
        gbc.setState(0xd6c7, 0xc89c, 0xf480, 0x4e69, 0xec08, 0x324e, 0x1, 0x1);
        gbc.writeMem(0xd6c7, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xc89c);
        EXPECT(gbc.pc(), 0xd6c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6c7), 0x6b);
        // 6B 0193
        gbc.setState(0x61a1, 0x7b2c, 0xc400, 0x13ac, 0xfcef, 0x38b5, 0x0, 0x0);
        gbc.writeMem(0x61a1, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x7b2c);
        EXPECT(gbc.pc(), 0x61a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0195
        gbc.setState(0x61f5, 0xd761, 0xa4b0, 0x9f36, 0x29f7, 0x399d, 0x1, 0x0);
        gbc.writeMem(0x61f5, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xd761);
        EXPECT(gbc.pc(), 0x61f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0196
        gbc.setState(0xae55, 0x52d5, 0x7790, 0x9631, 0x7bc8, 0x8b72, 0x0, 0x1);
        gbc.writeMem(0xae55, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x52d5);
        EXPECT(gbc.pc(), 0xae56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae55), 0x6b);
        // 6B 0197
        gbc.setState(0x63f3, 0x6c85, 0xc1a0, 0xc765, 0xf177, 0xb086, 0x0, 0x0);
        gbc.writeMem(0x63f3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x6c85);
        EXPECT(gbc.pc(), 0x63f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0198
        gbc.setState(0xed0c, 0xee21, 0x6d50, 0x89f5, 0xe27a, 0xc8bb, 0x0, 0x0);
        gbc.writeMem(0xed0c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xee21);
        EXPECT(gbc.pc(), 0xed0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed0c), 0x6b);
        // 6B 0199
        gbc.setState(0x25bf, 0x316d, 0xaef0, 0x2073, 0xe9dc, 0x174d, 0x1, 0x0);
        gbc.writeMem(0x25bf, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x316d);
        EXPECT(gbc.pc(), 0x25c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 019A
        gbc.setState(0x8e58, 0xbe6c, 0x89b0, 0x87dd, 0x4380, 0x8b3e, 0x0, 0x1);
        gbc.writeMem(0x8e58, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xbe6c);
        EXPECT(gbc.pc(), 0x8e59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e58), 0x6b);
        // 6B 019B
        gbc.setState(0xc336, 0xe6b9, 0x7d00, 0xa528, 0x16d8, 0xc0ca, 0x1, 0x1);
        gbc.writeMem(0xc336, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xe6b9);
        EXPECT(gbc.pc(), 0xc337);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc336), 0x6b);
        // 6B 019C
        gbc.setState(0xdf4f, 0x5025, 0x58a0, 0x8496, 0x213a, 0x70ef, 0x1, 0x1);
        gbc.writeMem(0xdf4f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x5025);
        EXPECT(gbc.pc(), 0xdf50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf4f), 0x6b);
        // 6B 019D
        gbc.setState(0x28f5, 0x7a7f, 0x460, 0x8238, 0x989a, 0xb4da, 0x1, 0x0);
        gbc.writeMem(0x28f5, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x7a7f);
        EXPECT(gbc.pc(), 0x28f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 019E
        gbc.setState(0xed25, 0xe586, 0x8b00, 0x5a99, 0x64f5, 0xf784, 0x1, 0x1);
        gbc.writeMem(0xed25, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xe586);
        EXPECT(gbc.pc(), 0xed26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed25), 0x6b);
        // 6B 019F
        gbc.setState(0xa80b, 0xb022, 0xadc0, 0x201c, 0x86c9, 0x9f6f, 0x0, 0x1);
        gbc.writeMem(0xa80b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xb022);
        EXPECT(gbc.pc(), 0xa80c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa80b), 0x6b);
        // 6B 01A0
        gbc.setState(0x5b6f, 0xf70a, 0x7980, 0xf5ba, 0x62c9, 0xe80d, 0x0, 0x0);
        gbc.writeMem(0x5b6f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xf70a);
        EXPECT(gbc.pc(), 0x5b70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 01A1
        gbc.setState(0xec5f, 0xd93e, 0xc6b0, 0x8486, 0xc78b, 0xd5f4, 0x0, 0x0);
        gbc.writeMem(0xec5f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xd93e);
        EXPECT(gbc.pc(), 0xec60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec5f), 0x6b);
        // 6B 01A2
        gbc.setState(0x6240, 0x4bae, 0x3280, 0x10c0, 0xd4ec, 0x6bb2, 0x0, 0x0);
        gbc.writeMem(0x6240, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x4bae);
        EXPECT(gbc.pc(), 0x6241);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 01A3
        gbc.setState(0x6556, 0x25a1, 0xffd0, 0x66a1, 0x9fcd, 0xf4ed, 0x1, 0x1);
        gbc.writeMem(0x6556, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x25a1);
        EXPECT(gbc.pc(), 0x6557);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 01A4
        gbc.setState(0xbfcf, 0x5530, 0x3410, 0x3905, 0xc348, 0x4269, 0x0, 0x1);
        gbc.writeMem(0xbfcf, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x5530);
        EXPECT(gbc.pc(), 0xbfd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfcf), 0x6b);
        // 6B 01A5
        gbc.setState(0x8da6, 0x46a9, 0x2460, 0xd8a1, 0xce67, 0x34fb, 0x1, 0x1);
        gbc.writeMem(0x8da6, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x46a9);
        EXPECT(gbc.pc(), 0x8da7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8da6), 0x6b);
        // 6B 01A6
        gbc.setState(0xe6e5, 0x1b35, 0x85e0, 0x4e18, 0xcdb6, 0xcf8a, 0x1, 0x0);
        gbc.writeMem(0xe6e5, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x1b35);
        EXPECT(gbc.pc(), 0xe6e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6e5), 0x6b);
        // 6B 01A8
        gbc.setState(0x1461, 0x2e4e, 0xe4d0, 0x3424, 0x3ce6, 0x479b, 0x0, 0x1);
        gbc.writeMem(0x1461, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x2e4e);
        EXPECT(gbc.pc(), 0x1462);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 01A9
        gbc.setState(0x7b96, 0xc2b2, 0x8790, 0x477d, 0x5b88, 0x9e47, 0x1, 0x1);
        gbc.writeMem(0x7b96, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc2b2);
        EXPECT(gbc.pc(), 0x7b97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 01AA
        gbc.setState(0xe592, 0xa4a0, 0x3340, 0xb71d, 0xeb76, 0xecd3, 0x0, 0x0);
        gbc.writeMem(0xe592, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xa4a0);
        EXPECT(gbc.pc(), 0xe593);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe592), 0x6b);
        // 6B 01AB
        gbc.setState(0x1c79, 0x3a21, 0xcc40, 0x86c5, 0x2970, 0x5d96, 0x1, 0x0);
        gbc.writeMem(0x1c79, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x3a21);
        EXPECT(gbc.pc(), 0x1c7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 01AC
        gbc.setState(0xb335, 0x83a1, 0x79e0, 0xf21e, 0xd849, 0x20ee, 0x0, 0x1);
        gbc.writeMem(0xb335, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x83a1);
        EXPECT(gbc.pc(), 0xb336);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb335), 0x6b);
        // 6B 01AD
        gbc.setState(0x7e45, 0x80d4, 0x9a70, 0x56a4, 0xb5c8, 0xcba2, 0x1, 0x0);
        gbc.writeMem(0x7e45, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x80d4);
        EXPECT(gbc.pc(), 0x7e46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 01AE
        gbc.setState(0x7e20, 0x681c, 0x7c90, 0xf3c8, 0xdd99, 0xa181, 0x1, 0x1);
        gbc.writeMem(0x7e20, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x681c);
        EXPECT(gbc.pc(), 0x7e21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 01AF
        gbc.setState(0x9765, 0x6e4e, 0x7910, 0x9543, 0x8a58, 0xd71a, 0x1, 0x1);
        gbc.writeMem(0x9765, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x6e4e);
        EXPECT(gbc.pc(), 0x9766);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9765), 0x6b);
        // 6B 01B0
        gbc.setState(0xc04c, 0x4ec6, 0xa970, 0xfb62, 0x5862, 0x973b, 0x1, 0x0);
        gbc.writeMem(0xc04c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x4ec6);
        EXPECT(gbc.pc(), 0xc04d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc04c), 0x6b);
        // 6B 01B1
        gbc.setState(0x109, 0x5c20, 0x58a0, 0x1b24, 0xd1e9, 0xeac6, 0x1, 0x1);
        gbc.writeMem(0x109, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x5c20);
        EXPECT(gbc.pc(), 0x10a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 01B2
        gbc.setState(0x4339, 0x41f6, 0x940, 0xf701, 0x8d70, 0xc659, 0x1, 0x1);
        gbc.writeMem(0x4339, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x41f6);
        EXPECT(gbc.pc(), 0x433a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 01B3
        gbc.setState(0x1dda, 0xe7ff, 0x86b0, 0x8852, 0x234e, 0x17fc, 0x0, 0x0);
        gbc.writeMem(0x1dda, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xe7ff);
        EXPECT(gbc.pc(), 0x1ddb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 01B4
        gbc.setState(0x4e1c, 0xccda, 0x1550, 0xe167, 0x9088, 0x1106, 0x0, 0x0);
        gbc.writeMem(0x4e1c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xccda);
        EXPECT(gbc.pc(), 0x4e1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 01B5
        gbc.setState(0xbda9, 0x7c72, 0x4b00, 0x7eb6, 0xfb53, 0xad1f, 0x1, 0x0);
        gbc.writeMem(0xbda9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x7c72);
        EXPECT(gbc.pc(), 0xbdaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbda9), 0x6b);
        // 6B 01B6
        gbc.setState(0xa525, 0xcee2, 0x1b50, 0x2295, 0xafac, 0x3179, 0x0, 0x0);
        gbc.writeMem(0xa525, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xcee2);
        EXPECT(gbc.pc(), 0xa526);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa525), 0x6b);
        // 6B 01B7
        gbc.setState(0xd5ff, 0x2406, 0x9aa0, 0x9209, 0xf985, 0x7be6, 0x0, 0x1);
        gbc.writeMem(0xd5ff, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x2406);
        EXPECT(gbc.pc(), 0xd600);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5ff), 0x6b);
        // 6B 01B8
        gbc.setState(0x35de, 0x28d1, 0xb70, 0xc4a3, 0x5666, 0x17f8, 0x1, 0x0);
        gbc.writeMem(0x35de, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x28d1);
        EXPECT(gbc.pc(), 0x35df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 01B9
        gbc.setState(0x678d, 0xb583, 0x38f0, 0xac3e, 0x54b7, 0xd6bd, 0x0, 0x0);
        gbc.writeMem(0x678d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xb583);
        EXPECT(gbc.pc(), 0x678e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 01BA
        gbc.setState(0x770d, 0x21e9, 0x18f0, 0xf45, 0xc379, 0x6b69, 0x1, 0x1);
        gbc.writeMem(0x770d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x21e9);
        EXPECT(gbc.pc(), 0x770e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 01BB
        gbc.setState(0xebdb, 0x2d7e, 0x26e0, 0x3c28, 0xdb5f, 0xf09e, 0x0, 0x0);
        gbc.writeMem(0xebdb, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x2d7e);
        EXPECT(gbc.pc(), 0xebdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebdb), 0x6b);
        // 6B 01BC
        gbc.setState(0x2e6b, 0xfee6, 0xf990, 0x653, 0xc13b, 0xe3db, 0x0, 0x0);
        gbc.writeMem(0x2e6b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xfee6);
        EXPECT(gbc.pc(), 0x2e6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 01BD
        gbc.setState(0xe191, 0xffd7, 0x3ab0, 0x4af2, 0x5b63, 0x1412, 0x0, 0x1);
        gbc.writeMem(0xe191, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xffd7);
        EXPECT(gbc.pc(), 0xe192);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe191), 0x6b);
        // 6B 01BE
        gbc.setState(0x547f, 0x5ca2, 0x8f90, 0xa3f6, 0xccf0, 0x229d, 0x0, 0x0);
        gbc.writeMem(0x547f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x5ca2);
        EXPECT(gbc.pc(), 0x5480);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 01BF
        gbc.setState(0x21ad, 0x7dfd, 0x130, 0xef60, 0x4950, 0x995a, 0x0, 0x1);
        gbc.writeMem(0x21ad, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x7dfd);
        EXPECT(gbc.pc(), 0x21ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 01C0
        gbc.setState(0x9953, 0x4ac2, 0x5b80, 0xbdb8, 0x1b1d, 0x4041, 0x0, 0x1);
        gbc.writeMem(0x9953, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x4ac2);
        EXPECT(gbc.pc(), 0x9954);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9953), 0x6b);
        // 6B 01C1
        gbc.setState(0x4209, 0xbe84, 0x9b00, 0xe026, 0xf583, 0x73d2, 0x1, 0x1);
        gbc.writeMem(0x4209, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xbe84);
        EXPECT(gbc.pc(), 0x420a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 01C2
        gbc.setState(0x9cbc, 0x4256, 0x18c0, 0x6524, 0x9d6c, 0x1027, 0x0, 0x1);
        gbc.writeMem(0x9cbc, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x4256);
        EXPECT(gbc.pc(), 0x9cbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cbc), 0x6b);
        // 6B 01C3
        gbc.setState(0xd8b6, 0x3938, 0xfef0, 0x977b, 0x5cea, 0x5074, 0x1, 0x0);
        gbc.writeMem(0xd8b6, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x3938);
        EXPECT(gbc.pc(), 0xd8b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8b6), 0x6b);
        // 6B 01C4
        gbc.setState(0x121b, 0x21b, 0x3ec0, 0x8c9d, 0xb3b9, 0x9ec5, 0x1, 0x0);
        gbc.writeMem(0x121b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x21b);
        EXPECT(gbc.pc(), 0x121c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 01C5
        gbc.setState(0xad0, 0x6bd, 0xdc0, 0xb3fe, 0x90d1, 0x859b, 0x1, 0x1);
        gbc.writeMem(0xad0, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x6bd);
        EXPECT(gbc.pc(), 0xad1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 01C7
        gbc.setState(0x59e9, 0x4d58, 0x1f20, 0xee66, 0x6bcd, 0x5c42, 0x0, 0x1);
        gbc.writeMem(0x59e9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4d58);
        EXPECT(gbc.pc(), 0x59ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 01C8
        gbc.setState(0x48d1, 0x5045, 0xc310, 0x7c51, 0xba6d, 0x9bed, 0x0, 0x1);
        gbc.writeMem(0x48d1, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x5045);
        EXPECT(gbc.pc(), 0x48d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 01C9
        gbc.setState(0x9433, 0xffb2, 0xfad0, 0xa238, 0xc438, 0xc5de, 0x0, 0x0);
        gbc.writeMem(0x9433, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xffb2);
        EXPECT(gbc.pc(), 0x9434);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9433), 0x6b);
        // 6B 01CA
        gbc.setState(0x81c3, 0x3307, 0x8230, 0x6948, 0x3f4f, 0xa8ee, 0x1, 0x1);
        gbc.writeMem(0x81c3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x3307);
        EXPECT(gbc.pc(), 0x81c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81c3), 0x6b);
        // 6B 01CB
        gbc.setState(0x4b8f, 0x4623, 0x8920, 0xc740, 0xab8d, 0x5748, 0x1, 0x1);
        gbc.writeMem(0x4b8f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x4623);
        EXPECT(gbc.pc(), 0x4b90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 01CC
        gbc.setState(0x20a, 0xe464, 0xbe70, 0xb224, 0x210c, 0xda1d, 0x0, 0x1);
        gbc.writeMem(0x20a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xe464);
        EXPECT(gbc.pc(), 0x20b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 01CD
        gbc.setState(0x1a03, 0xd69a, 0x79f0, 0xa218, 0x32d7, 0xe387, 0x0, 0x0);
        gbc.writeMem(0x1a03, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xd69a);
        EXPECT(gbc.pc(), 0x1a04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 01CF
        gbc.setState(0x7670, 0x3576, 0x2bf0, 0x3f6e, 0xc22d, 0x7f66, 0x0, 0x0);
        gbc.writeMem(0x7670, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x3576);
        EXPECT(gbc.pc(), 0x7671);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 01D0
        gbc.setState(0xad26, 0x2b60, 0x310, 0x8694, 0x3bfc, 0xb6b4, 0x0, 0x0);
        gbc.writeMem(0xad26, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x2b60);
        EXPECT(gbc.pc(), 0xad27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad26), 0x6b);
        // 6B 01D1
        gbc.setState(0x6714, 0x1fd1, 0x9b40, 0xf47f, 0xa6a1, 0x974b, 0x0, 0x1);
        gbc.writeMem(0x6714, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x1fd1);
        EXPECT(gbc.pc(), 0x6715);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 01D2
        gbc.setState(0x2a39, 0x2d80, 0x7a40, 0xd41e, 0x42a2, 0x9135, 0x0, 0x1);
        gbc.writeMem(0x2a39, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x2d80);
        EXPECT(gbc.pc(), 0x2a3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 01D3
        gbc.setState(0x723c, 0xa4e4, 0xc840, 0x9f74, 0x74e0, 0x1239, 0x1, 0x1);
        gbc.writeMem(0x723c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xa4e4);
        EXPECT(gbc.pc(), 0x723d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 01D4
        gbc.setState(0x7842, 0x81a5, 0x2e00, 0x1c2a, 0x60aa, 0xd246, 0x0, 0x1);
        gbc.writeMem(0x7842, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x81a5);
        EXPECT(gbc.pc(), 0x7843);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 01D5
        gbc.setState(0x750f, 0x958d, 0x6cf0, 0x9e6e, 0x27e1, 0xd51f, 0x1, 0x1);
        gbc.writeMem(0x750f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x958d);
        EXPECT(gbc.pc(), 0x7510);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 01D7
        gbc.setState(0xe584, 0x95e5, 0x81f0, 0x5043, 0x9ec8, 0xb92a, 0x1, 0x0);
        gbc.writeMem(0xe584, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x95e5);
        EXPECT(gbc.pc(), 0xe585);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe584), 0x6b);
        // 6B 01D8
        gbc.setState(0xd9e6, 0x1051, 0xba70, 0x24aa, 0xe550, 0xa360, 0x0, 0x1);
        gbc.writeMem(0xd9e6, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x1051);
        EXPECT(gbc.pc(), 0xd9e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9e6), 0x6b);
        // 6B 01D9
        gbc.setState(0x505c, 0x7676, 0x1500, 0x6508, 0x9bfb, 0x636f, 0x0, 0x1);
        gbc.writeMem(0x505c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x7676);
        EXPECT(gbc.pc(), 0x505d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 01DA
        gbc.setState(0xd5f8, 0xcb99, 0xda80, 0x9fec, 0xcc63, 0x1c71, 0x0, 0x0);
        gbc.writeMem(0xd5f8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xcb99);
        EXPECT(gbc.pc(), 0xd5f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5f8), 0x6b);
        // 6B 01DB
        gbc.setState(0x9d61, 0xf520, 0xc170, 0xe916, 0xecb5, 0xc00d, 0x1, 0x0);
        gbc.writeMem(0x9d61, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xf520);
        EXPECT(gbc.pc(), 0x9d62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d61), 0x6b);
        // 6B 01DC
        gbc.setState(0xb61e, 0xd0ad, 0x2390, 0x443b, 0x1ea, 0x6d1f, 0x1, 0x1);
        gbc.writeMem(0xb61e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd0ad);
        EXPECT(gbc.pc(), 0xb61f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb61e), 0x6b);
        // 6B 01DD
        gbc.setState(0x5856, 0x1fa6, 0x3850, 0x4586, 0x60f0, 0x88af, 0x1, 0x1);
        gbc.writeMem(0x5856, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x1fa6);
        EXPECT(gbc.pc(), 0x5857);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 01DE
        gbc.setState(0x6223, 0xab07, 0x8790, 0x7dcc, 0xa1b8, 0x8fc6, 0x0, 0x0);
        gbc.writeMem(0x6223, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xab07);
        EXPECT(gbc.pc(), 0x6224);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 01DF
        gbc.setState(0x50fa, 0xb0d0, 0x9170, 0x50ff, 0x2f80, 0xafaf, 0x0, 0x0);
        gbc.writeMem(0x50fa, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xb0d0);
        EXPECT(gbc.pc(), 0x50fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 01E0
        gbc.setState(0x892f, 0x5153, 0x34b0, 0xcc8a, 0x943e, 0x5c68, 0x0, 0x1);
        gbc.writeMem(0x892f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x5153);
        EXPECT(gbc.pc(), 0x8930);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x892f), 0x6b);
        // 6B 01E1
        gbc.setState(0xcbef, 0xa5e8, 0x2810, 0xc779, 0xdd49, 0xb49b, 0x0, 0x1);
        gbc.writeMem(0xcbef, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xa5e8);
        EXPECT(gbc.pc(), 0xcbf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbef), 0x6b);
        // 6B 01E2
        gbc.setState(0xea50, 0xba80, 0x70b0, 0xe3b6, 0xe0b2, 0xa0cc, 0x0, 0x1);
        gbc.writeMem(0xea50, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xba80);
        EXPECT(gbc.pc(), 0xea51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea50), 0x6b);
        // 6B 01E3
        gbc.setState(0xca07, 0xb4e5, 0x6fa0, 0x4a90, 0xf7b0, 0x4edb, 0x1, 0x1);
        gbc.writeMem(0xca07, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xb4e5);
        EXPECT(gbc.pc(), 0xca08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca07), 0x6b);
        // 6B 01E4
        gbc.setState(0x969, 0xea86, 0x940, 0x4cfc, 0x72cd, 0xf02b, 0x1, 0x0);
        gbc.writeMem(0x969, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xea86);
        EXPECT(gbc.pc(), 0x96a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 01E5
        gbc.setState(0xc230, 0x3cef, 0x4990, 0x8ff6, 0xd4cb, 0xabba, 0x1, 0x1);
        gbc.writeMem(0xc230, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x3cef);
        EXPECT(gbc.pc(), 0xc231);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc230), 0x6b);
        // 6B 01E6
        gbc.setState(0xb2bd, 0x7ef8, 0xd490, 0x3325, 0xb54b, 0x77a6, 0x0, 0x0);
        gbc.writeMem(0xb2bd, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x7ef8);
        EXPECT(gbc.pc(), 0xb2be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2bd), 0x6b);
        // 6B 01E7
        gbc.setState(0xcf74, 0x3e01, 0x47e0, 0xf0bf, 0xaf40, 0x6005, 0x0, 0x1);
        gbc.writeMem(0xcf74, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x3e01);
        EXPECT(gbc.pc(), 0xcf75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf74), 0x6b);
        // 6B 01E8
        gbc.setState(0x2136, 0xbd46, 0x26a0, 0xd333, 0x2b55, 0xfd8a, 0x0, 0x1);
        gbc.writeMem(0x2136, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xbd46);
        EXPECT(gbc.pc(), 0x2137);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 01E9
        gbc.setState(0x347a, 0x78c8, 0xf9c0, 0x3c8f, 0x9d80, 0xa430, 0x1, 0x1);
        gbc.writeMem(0x347a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x78c8);
        EXPECT(gbc.pc(), 0x347b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 01EA
        gbc.setState(0x42e4, 0xd65d, 0x8f20, 0x595e, 0xd03, 0xfc2d, 0x1, 0x1);
        gbc.writeMem(0x42e4, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xd65d);
        EXPECT(gbc.pc(), 0x42e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 01EB
        gbc.setState(0xc1d5, 0x931d, 0x4290, 0x1def, 0x415c, 0xfdeb, 0x0, 0x0);
        gbc.writeMem(0xc1d5, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x931d);
        EXPECT(gbc.pc(), 0xc1d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1d5), 0x6b);
        // 6B 01EC
        gbc.setState(0x682c, 0xbd1f, 0xc2b0, 0xff4c, 0x668, 0xb77b, 0x0, 0x0);
        gbc.writeMem(0x682c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xbd1f);
        EXPECT(gbc.pc(), 0x682d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 01ED
        gbc.setState(0xeba0, 0xb4fe, 0x2300, 0xa2cd, 0x3114, 0xeec0, 0x0, 0x1);
        gbc.writeMem(0xeba0, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xb4fe);
        EXPECT(gbc.pc(), 0xeba1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeba0), 0x6b);
        // 6B 01EE
        gbc.setState(0x9211, 0xe3f3, 0x3710, 0xb86, 0xf0e3, 0xf8b7, 0x1, 0x1);
        gbc.writeMem(0x9211, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xe3f3);
        EXPECT(gbc.pc(), 0x9212);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9211), 0x6b);
        // 6B 01EF
        gbc.setState(0x9c96, 0x5494, 0x6600, 0xe357, 0x59cb, 0x1fb6, 0x0, 0x0);
        gbc.writeMem(0x9c96, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x5494);
        EXPECT(gbc.pc(), 0x9c97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c96), 0x6b);
        // 6B 01F0
        gbc.setState(0x1c85, 0x89a4, 0x4880, 0xd157, 0x70b6, 0x89e4, 0x1, 0x1);
        gbc.writeMem(0x1c85, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x89a4);
        EXPECT(gbc.pc(), 0x1c86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 01F1
        gbc.setState(0x7b3c, 0xe9be, 0xaa30, 0xab45, 0x27be, 0x6b54, 0x1, 0x0);
        gbc.writeMem(0x7b3c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xe9be);
        EXPECT(gbc.pc(), 0x7b3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 01F2
        gbc.setState(0x9171, 0x5092, 0x9500, 0xb2ba, 0xdf7a, 0xb0e7, 0x1, 0x0);
        gbc.writeMem(0x9171, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x5092);
        EXPECT(gbc.pc(), 0x9172);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9171), 0x6b);
        // 6B 01F3
        gbc.setState(0x967e, 0x1301, 0xba40, 0x521f, 0x9786, 0xbf16, 0x1, 0x0);
        gbc.writeMem(0x967e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x1301);
        EXPECT(gbc.pc(), 0x967f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x967e), 0x6b);
        // 6B 01F4
        gbc.setState(0x944b, 0xf2e9, 0xc280, 0x5675, 0x507d, 0xc27a, 0x1, 0x0);
        gbc.writeMem(0x944b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xf2e9);
        EXPECT(gbc.pc(), 0x944c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x944b), 0x6b);
        // 6B 01F5
        gbc.setState(0x71f8, 0x5d6e, 0x0, 0x80b, 0x5b1d, 0x7981, 0x1, 0x0);
        gbc.writeMem(0x71f8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x5d6e);
        EXPECT(gbc.pc(), 0x71f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 01F6
        gbc.setState(0x64bd, 0xc148, 0xc820, 0xbb75, 0xa5e6, 0x12b4, 0x1, 0x1);
        gbc.writeMem(0x64bd, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xc148);
        EXPECT(gbc.pc(), 0x64be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 01F7
        gbc.setState(0x2c99, 0x1dba, 0x6410, 0x267d, 0xaae8, 0x7713, 0x0, 0x0);
        gbc.writeMem(0x2c99, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x1dba);
        EXPECT(gbc.pc(), 0x2c9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 01F8
        gbc.setState(0x4f03, 0x19fe, 0x3140, 0x4b7a, 0x120d, 0x10fe, 0x1, 0x1);
        gbc.writeMem(0x4f03, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x19fe);
        EXPECT(gbc.pc(), 0x4f04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 01F9
        gbc.setState(0xb317, 0x1078, 0xe350, 0xed48, 0x3d12, 0x72e1, 0x0, 0x0);
        gbc.writeMem(0xb317, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x1078);
        EXPECT(gbc.pc(), 0xb318);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb317), 0x6b);
        // 6B 01FA
        gbc.setState(0x7b0c, 0xd108, 0xc790, 0xb477, 0xe97f, 0xfcd2, 0x0, 0x0);
        gbc.writeMem(0x7b0c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xd108);
        EXPECT(gbc.pc(), 0x7b0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 01FB
        gbc.setState(0x3ce4, 0x9075, 0x2810, 0xad89, 0x41d2, 0xdd52, 0x0, 0x0);
        gbc.writeMem(0x3ce4, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x9075);
        EXPECT(gbc.pc(), 0x3ce5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 01FC
        gbc.setState(0x40f9, 0xf9dc, 0x7950, 0xd698, 0x2673, 0x5c30, 0x1, 0x1);
        gbc.writeMem(0x40f9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xf9dc);
        EXPECT(gbc.pc(), 0x40fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 01FD
        gbc.setState(0x5a57, 0x8c8a, 0x15c0, 0x5e94, 0x34b3, 0x78b9, 0x1, 0x0);
        gbc.writeMem(0x5a57, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x8c8a);
        EXPECT(gbc.pc(), 0x5a58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 01FE
        gbc.setState(0xad3f, 0xe179, 0xf090, 0xa9a8, 0x3b0a, 0x4606, 0x1, 0x1);
        gbc.writeMem(0xad3f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xe179);
        EXPECT(gbc.pc(), 0xad40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad3f), 0x6b);
        // 6B 01FF
        gbc.setState(0xf03, 0x7096, 0xefa0, 0x272c, 0x620c, 0x2195, 0x0, 0x0);
        gbc.writeMem(0xf03, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x7096);
        EXPECT(gbc.pc(), 0xf04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0200
        gbc.setState(0x4210, 0xcb41, 0x2710, 0x11d3, 0x953, 0x8388, 0x1, 0x0);
        gbc.writeMem(0x4210, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xcb41);
        EXPECT(gbc.pc(), 0x4211);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0201
        gbc.setState(0xeed8, 0xfcb9, 0xd210, 0xfad6, 0x64df, 0x15e4, 0x1, 0x0);
        gbc.writeMem(0xeed8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xfcb9);
        EXPECT(gbc.pc(), 0xeed9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeed8), 0x6b);
        // 6B 0202
        gbc.setState(0x390f, 0x28ac, 0xc820, 0x2681, 0x5ce7, 0x25f2, 0x0, 0x0);
        gbc.writeMem(0x390f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x28ac);
        EXPECT(gbc.pc(), 0x3910);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0203
        gbc.setState(0xed65, 0xc97c, 0xbd70, 0x3ff3, 0x936b, 0xcca0, 0x0, 0x0);
        gbc.writeMem(0xed65, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xc97c);
        EXPECT(gbc.pc(), 0xed66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed65), 0x6b);
        // 6B 0204
        gbc.setState(0xe69e, 0x512f, 0xa740, 0xcbe3, 0xe57b, 0x77df, 0x1, 0x0);
        gbc.writeMem(0xe69e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x512f);
        EXPECT(gbc.pc(), 0xe69f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe69e), 0x6b);
        // 6B 0205
        gbc.setState(0x4db8, 0x4b46, 0xd9f0, 0xe8e7, 0xdb3e, 0x2b7c, 0x0, 0x0);
        gbc.writeMem(0x4db8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x4b46);
        EXPECT(gbc.pc(), 0x4db9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0206
        gbc.setState(0x31c1, 0xd173, 0xd180, 0xe90, 0xd695, 0xa93d, 0x0, 0x1);
        gbc.writeMem(0x31c1, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xd173);
        EXPECT(gbc.pc(), 0x31c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0207
        gbc.setState(0xda08, 0x4e04, 0x88f0, 0x4704, 0xe0f4, 0xb174, 0x0, 0x0);
        gbc.writeMem(0xda08, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x4e04);
        EXPECT(gbc.pc(), 0xda09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda08), 0x6b);
        // 6B 0209
        gbc.setState(0x8878, 0xed37, 0x1f00, 0x11e8, 0x66f6, 0x701d, 0x1, 0x1);
        gbc.writeMem(0x8878, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xed37);
        EXPECT(gbc.pc(), 0x8879);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8878), 0x6b);
        // 6B 020A
        gbc.setState(0x85b8, 0x936f, 0x2400, 0xf74e, 0xc8ef, 0xf834, 0x0, 0x0);
        gbc.writeMem(0x85b8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x936f);
        EXPECT(gbc.pc(), 0x85b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85b8), 0x6b);
        // 6B 020B
        gbc.setState(0x579b, 0xf9a0, 0xa460, 0x261a, 0xd81a, 0xc918, 0x0, 0x0);
        gbc.writeMem(0x579b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xf9a0);
        EXPECT(gbc.pc(), 0x579c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 020D
        gbc.setState(0x489a, 0xbe0c, 0xdf00, 0x6f61, 0x517b, 0x8748, 0x1, 0x0);
        gbc.writeMem(0x489a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xbe0c);
        EXPECT(gbc.pc(), 0x489b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 020E
        gbc.setState(0x2b5d, 0xca98, 0xa710, 0xca58, 0x22bd, 0x9f96, 0x1, 0x1);
        gbc.writeMem(0x2b5d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xca98);
        EXPECT(gbc.pc(), 0x2b5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 020F
        gbc.setState(0x3be, 0x119d, 0x840, 0xadc2, 0x7add, 0xae75, 0x0, 0x0);
        gbc.writeMem(0x3be, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x119d);
        EXPECT(gbc.pc(), 0x3bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0210
        gbc.setState(0x61b9, 0x98e9, 0xfbc0, 0xbd46, 0xe9fe, 0xbe91, 0x0, 0x0);
        gbc.writeMem(0x61b9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x98e9);
        EXPECT(gbc.pc(), 0x61ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0211
        gbc.setState(0x23a2, 0x38dd, 0x4920, 0x40a7, 0x1f9b, 0x1d55, 0x1, 0x0);
        gbc.writeMem(0x23a2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x38dd);
        EXPECT(gbc.pc(), 0x23a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0212
        gbc.setState(0x4c7c, 0xe984, 0x7de0, 0xaf94, 0x340b, 0x8c3c, 0x1, 0x1);
        gbc.writeMem(0x4c7c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xe984);
        EXPECT(gbc.pc(), 0x4c7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0213
        gbc.setState(0x299c, 0x493c, 0x3670, 0x878e, 0xeb47, 0x647b, 0x1, 0x1);
        gbc.writeMem(0x299c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x493c);
        EXPECT(gbc.pc(), 0x299d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0214
        gbc.setState(0xadb9, 0x6768, 0xe810, 0x7efa, 0x99c1, 0x95d5, 0x0, 0x1);
        gbc.writeMem(0xadb9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x6768);
        EXPECT(gbc.pc(), 0xadba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadb9), 0x6b);
        // 6B 0215
        gbc.setState(0xc309, 0x53b3, 0x3ee0, 0xb6b7, 0x5641, 0x90ab, 0x1, 0x1);
        gbc.writeMem(0xc309, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x53b3);
        EXPECT(gbc.pc(), 0xc30a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc309), 0x6b);
        // 6B 0216
        gbc.setState(0x3fd2, 0x7511, 0xa040, 0xa0bd, 0x2888, 0x7521, 0x0, 0x0);
        gbc.writeMem(0x3fd2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x7511);
        EXPECT(gbc.pc(), 0x3fd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0217
        gbc.setState(0xe44d, 0x107e, 0x15c0, 0x86ea, 0x74c, 0x73ae, 0x0, 0x0);
        gbc.writeMem(0xe44d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x107e);
        EXPECT(gbc.pc(), 0xe44e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe44d), 0x6b);
        // 6B 0218
        gbc.setState(0xd505, 0x86bf, 0x2680, 0x77f1, 0x44d4, 0x627a, 0x0, 0x0);
        gbc.writeMem(0xd505, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x86bf);
        EXPECT(gbc.pc(), 0xd506);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd505), 0x6b);
        // 6B 0219
        gbc.setState(0x3689, 0x12fb, 0x22d0, 0xbe82, 0xfea4, 0x8fc9, 0x0, 0x1);
        gbc.writeMem(0x3689, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x12fb);
        EXPECT(gbc.pc(), 0x368a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 021B
        gbc.setState(0x73ec, 0x5fa2, 0x43a0, 0x44a7, 0x6cb5, 0x8a65, 0x0, 0x0);
        gbc.writeMem(0x73ec, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x5fa2);
        EXPECT(gbc.pc(), 0x73ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 021C
        gbc.setState(0x9755, 0x7c28, 0x9930, 0xce56, 0xd107, 0x8cbe, 0x0, 0x0);
        gbc.writeMem(0x9755, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x7c28);
        EXPECT(gbc.pc(), 0x9756);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9755), 0x6b);
        // 6B 021D
        gbc.setState(0xe374, 0x1b91, 0x6940, 0x464f, 0x43db, 0xcd77, 0x0, 0x1);
        gbc.writeMem(0xe374, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x1b91);
        EXPECT(gbc.pc(), 0xe375);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe374), 0x6b);
        // 6B 021E
        gbc.setState(0xd01d, 0x7621, 0x8250, 0x68bc, 0x638b, 0x8b6b, 0x1, 0x0);
        gbc.writeMem(0xd01d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x7621);
        EXPECT(gbc.pc(), 0xd01e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd01d), 0x6b);
        // 6B 021F
        gbc.setState(0x5afd, 0x5b3, 0x42e0, 0xaac2, 0x7fd7, 0x9fcf, 0x1, 0x1);
        gbc.writeMem(0x5afd, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x5b3);
        EXPECT(gbc.pc(), 0x5afe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0220
        gbc.setState(0x4b75, 0x1cf6, 0x44f0, 0xc6ce, 0x3b89, 0x8ebf, 0x0, 0x1);
        gbc.writeMem(0x4b75, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x1cf6);
        EXPECT(gbc.pc(), 0x4b76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0221
        gbc.setState(0x1478, 0xca6f, 0xd0d0, 0xaac, 0xcd6, 0x5eaf, 0x1, 0x1);
        gbc.writeMem(0x1478, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xca6f);
        EXPECT(gbc.pc(), 0x1479);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0222
        gbc.setState(0x17e9, 0xb2f5, 0x2ce0, 0x752b, 0x51df, 0xaaa9, 0x0, 0x0);
        gbc.writeMem(0x17e9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xb2f5);
        EXPECT(gbc.pc(), 0x17ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0223
        gbc.setState(0x40e9, 0x9092, 0x65a0, 0x5ef9, 0xcc11, 0x9d98, 0x0, 0x1);
        gbc.writeMem(0x40e9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x9092);
        EXPECT(gbc.pc(), 0x40ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0224
        gbc.setState(0x68f0, 0xbde8, 0x6e30, 0xc2e9, 0x2c0e, 0xee57, 0x1, 0x1);
        gbc.writeMem(0x68f0, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xbde8);
        EXPECT(gbc.pc(), 0x68f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0225
        gbc.setState(0xc75a, 0xa24f, 0xecc0, 0xb754, 0x3873, 0x89dc, 0x1, 0x0);
        gbc.writeMem(0xc75a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xa24f);
        EXPECT(gbc.pc(), 0xc75b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc75a), 0x6b);
        // 6B 0226
        gbc.setState(0x17c6, 0xee5e, 0xd2e0, 0xa321, 0x47b6, 0x901f, 0x1, 0x0);
        gbc.writeMem(0x17c6, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xee5e);
        EXPECT(gbc.pc(), 0x17c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0227
        gbc.setState(0x9169, 0x33f5, 0x4a80, 0x4ace, 0x3414, 0x4cc5, 0x0, 0x1);
        gbc.writeMem(0x9169, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x33f5);
        EXPECT(gbc.pc(), 0x916a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9169), 0x6b);
        // 6B 0228
        gbc.setState(0xdf13, 0xc8d7, 0xd8d0, 0x96b1, 0x870, 0x6b48, 0x1, 0x1);
        gbc.writeMem(0xdf13, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xc8d7);
        EXPECT(gbc.pc(), 0xdf14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf13), 0x6b);
        // 6B 0229
        gbc.setState(0x23cb, 0x6008, 0x270, 0x9cf9, 0xaa51, 0x43f0, 0x1, 0x1);
        gbc.writeMem(0x23cb, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x6008);
        EXPECT(gbc.pc(), 0x23cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 022A
        gbc.setState(0x73e8, 0x47a7, 0x1690, 0x6218, 0xa204, 0x3627, 0x0, 0x0);
        gbc.writeMem(0x73e8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x47a7);
        EXPECT(gbc.pc(), 0x73e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 022B
        gbc.setState(0x8e1b, 0x9891, 0xa6e0, 0x2a68, 0x16b2, 0xd95, 0x1, 0x0);
        gbc.writeMem(0x8e1b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x9891);
        EXPECT(gbc.pc(), 0x8e1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e1b), 0x6b);
        // 6B 022D
        gbc.setState(0x8dc3, 0xcfc6, 0x3330, 0xacf3, 0xca8a, 0x34fe, 0x1, 0x1);
        gbc.writeMem(0x8dc3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xcfc6);
        EXPECT(gbc.pc(), 0x8dc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dc3), 0x6b);
        // 6B 022F
        gbc.setState(0x8518, 0x6710, 0x9240, 0xc84b, 0xf323, 0xd940, 0x1, 0x0);
        gbc.writeMem(0x8518, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x6710);
        EXPECT(gbc.pc(), 0x8519);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8518), 0x6b);
        // 6B 0230
        gbc.setState(0xdd20, 0xd4b4, 0xe20, 0xf3e, 0xdf52, 0x83b, 0x0, 0x1);
        gbc.writeMem(0xdd20, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xd4b4);
        EXPECT(gbc.pc(), 0xdd21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd20), 0x6b);
        // 6B 0231
        gbc.setState(0xdc6, 0x62a4, 0xa400, 0x1e6c, 0x6282, 0xe3e5, 0x1, 0x1);
        gbc.writeMem(0xdc6, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x62a4);
        EXPECT(gbc.pc(), 0xdc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0232
        gbc.setState(0xf5c, 0x8a29, 0xe3a0, 0xc8c3, 0x2617, 0x5f89, 0x1, 0x0);
        gbc.writeMem(0xf5c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x8a29);
        EXPECT(gbc.pc(), 0xf5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0234
        gbc.setState(0xa9ed, 0x1098, 0xfb60, 0xfab, 0xc15c, 0xb795, 0x1, 0x0);
        gbc.writeMem(0xa9ed, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x1098);
        EXPECT(gbc.pc(), 0xa9ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9ed), 0x6b);
        // 6B 0235
        gbc.setState(0x1959, 0xdb9, 0xe190, 0x444c, 0x25fe, 0xec2, 0x0, 0x0);
        gbc.writeMem(0x1959, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xdb9);
        EXPECT(gbc.pc(), 0x195a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0236
        gbc.setState(0x4471, 0xf34a, 0x3300, 0x1bc6, 0x1bd9, 0x4034, 0x1, 0x1);
        gbc.writeMem(0x4471, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xf34a);
        EXPECT(gbc.pc(), 0x4472);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0237
        gbc.setState(0xc8a1, 0x8fcb, 0xf0c0, 0xeeb1, 0x3c77, 0x8987, 0x0, 0x0);
        gbc.writeMem(0xc8a1, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x8fcb);
        EXPECT(gbc.pc(), 0xc8a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8a1), 0x6b);
        // 6B 0238
        gbc.setState(0x8e39, 0xb41e, 0x7a20, 0x95a5, 0xea85, 0xc7ba, 0x0, 0x0);
        gbc.writeMem(0x8e39, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb41e);
        EXPECT(gbc.pc(), 0x8e3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e39), 0x6b);
        // 6B 0239
        gbc.setState(0x6804, 0x7131, 0xe880, 0xf001, 0x8f1, 0xcc78, 0x1, 0x0);
        gbc.writeMem(0x6804, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x7131);
        EXPECT(gbc.pc(), 0x6805);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 023A
        gbc.setState(0xc1e1, 0xf62b, 0xa120, 0x6c22, 0xba02, 0xa70b, 0x1, 0x0);
        gbc.writeMem(0xc1e1, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xf62b);
        EXPECT(gbc.pc(), 0xc1e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1e1), 0x6b);
        // 6B 023B
        gbc.setState(0xb83e, 0x4c6a, 0xccc0, 0x2944, 0xa288, 0xd6e7, 0x1, 0x1);
        gbc.writeMem(0xb83e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x4c6a);
        EXPECT(gbc.pc(), 0xb83f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb83e), 0x6b);
        // 6B 023C
        gbc.setState(0x30fb, 0xf8d8, 0xa4c0, 0xe14a, 0xdd0e, 0x2349, 0x1, 0x1);
        gbc.writeMem(0x30fb, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xf8d8);
        EXPECT(gbc.pc(), 0x30fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 023D
        gbc.setState(0xc6ee, 0xbc85, 0x5ee0, 0x2da9, 0x77af, 0x7893, 0x0, 0x0);
        gbc.writeMem(0xc6ee, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xbc85);
        EXPECT(gbc.pc(), 0xc6ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6ee), 0x6b);
        // 6B 023E
        gbc.setState(0xa98b, 0xd7a5, 0x1a50, 0xfd4c, 0x4dec, 0x1929, 0x0, 0x1);
        gbc.writeMem(0xa98b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xd7a5);
        EXPECT(gbc.pc(), 0xa98c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa98b), 0x6b);
        // 6B 023F
        gbc.setState(0xcc96, 0xf470, 0x2020, 0xde1b, 0x648b, 0x95de, 0x0, 0x0);
        gbc.writeMem(0xcc96, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xf470);
        EXPECT(gbc.pc(), 0xcc97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc96), 0x6b);
        // 6B 0241
        gbc.setState(0x138, 0xc52b, 0x3dc0, 0x139b, 0xc90d, 0x5ae1, 0x0, 0x0);
        gbc.writeMem(0x138, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xc52b);
        EXPECT(gbc.pc(), 0x139);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0242
        gbc.setState(0xca45, 0x8443, 0x1cc0, 0x344e, 0x388d, 0x5a21, 0x0, 0x1);
        gbc.writeMem(0xca45, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x8443);
        EXPECT(gbc.pc(), 0xca46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca45), 0x6b);
        // 6B 0243
        gbc.setState(0x1fbb, 0x3cab, 0x45a0, 0x4445, 0x7a3e, 0x25cd, 0x1, 0x1);
        gbc.writeMem(0x1fbb, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x3cab);
        EXPECT(gbc.pc(), 0x1fbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0244
        gbc.setState(0x4564, 0x914, 0x39a0, 0x2d06, 0x4a39, 0x2fac, 0x0, 0x1);
        gbc.writeMem(0x4564, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x914);
        EXPECT(gbc.pc(), 0x4565);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0245
        gbc.setState(0xb973, 0x3742, 0xc60, 0xda76, 0x49f7, 0x8d77, 0x0, 0x1);
        gbc.writeMem(0xb973, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x3742);
        EXPECT(gbc.pc(), 0xb974);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb973), 0x6b);
        // 6B 0246
        gbc.setState(0xa7db, 0xfbfe, 0xd470, 0x49ba, 0xf2e, 0xfc81, 0x1, 0x1);
        gbc.writeMem(0xa7db, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xfbfe);
        EXPECT(gbc.pc(), 0xa7dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7db), 0x6b);
        // 6B 0247
        gbc.setState(0x3316, 0x35ab, 0x8ee0, 0x2153, 0xaa15, 0x13c7, 0x0, 0x1);
        gbc.writeMem(0x3316, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x35ab);
        EXPECT(gbc.pc(), 0x3317);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0248
        gbc.setState(0x1d11, 0xfb7a, 0xc770, 0x3b6c, 0x4adf, 0xf2a, 0x1, 0x1);
        gbc.writeMem(0x1d11, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xfb7a);
        EXPECT(gbc.pc(), 0x1d12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0249
        gbc.setState(0xefe9, 0x71fa, 0xfd90, 0xa4ed, 0xfaf3, 0x4da2, 0x0, 0x0);
        gbc.writeMem(0xefe9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x71fa);
        EXPECT(gbc.pc(), 0xefea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefe9), 0x6b);
        // 6B 024A
        gbc.setState(0xb7cd, 0x41fa, 0xa80, 0x789a, 0x26a4, 0x9923, 0x1, 0x1);
        gbc.writeMem(0xb7cd, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x41fa);
        EXPECT(gbc.pc(), 0xb7ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7cd), 0x6b);
        // 6B 024B
        gbc.setState(0x6125, 0xeb3f, 0x7750, 0x151a, 0x4689, 0xfb96, 0x0, 0x0);
        gbc.writeMem(0x6125, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xeb3f);
        EXPECT(gbc.pc(), 0x6126);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 024C
        gbc.setState(0x5b50, 0x3c3e, 0x2140, 0x222e, 0xa56, 0x5337, 0x1, 0x0);
        gbc.writeMem(0x5b50, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x3c3e);
        EXPECT(gbc.pc(), 0x5b51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 024D
        gbc.setState(0x105e, 0xb7a7, 0xc4e0, 0xf96d, 0x402b, 0xa25c, 0x1, 0x0);
        gbc.writeMem(0x105e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xb7a7);
        EXPECT(gbc.pc(), 0x105f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 024E
        gbc.setState(0x1a28, 0x5c94, 0x6500, 0x5778, 0xa311, 0x12ff, 0x1, 0x1);
        gbc.writeMem(0x1a28, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x5c94);
        EXPECT(gbc.pc(), 0x1a29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 024F
        gbc.setState(0x223d, 0x82bc, 0x9e70, 0xc318, 0x6de0, 0x8f05, 0x0, 0x1);
        gbc.writeMem(0x223d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x82bc);
        EXPECT(gbc.pc(), 0x223e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0250
        gbc.setState(0xc3a7, 0x95c2, 0x9160, 0x976e, 0x7aee, 0x4038, 0x1, 0x0);
        gbc.writeMem(0xc3a7, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x95c2);
        EXPECT(gbc.pc(), 0xc3a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3a7), 0x6b);
        // 6B 0251
        gbc.setState(0x8a9e, 0xdc1d, 0x3be0, 0xaea3, 0xe043, 0x12c1, 0x0, 0x0);
        gbc.writeMem(0x8a9e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xdc1d);
        EXPECT(gbc.pc(), 0x8a9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a9e), 0x6b);
        // 6B 0252
        gbc.setState(0x2c6a, 0xabf, 0x8860, 0xcf0e, 0x3654, 0xf201, 0x0, 0x0);
        gbc.writeMem(0x2c6a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xabf);
        EXPECT(gbc.pc(), 0x2c6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0253
        gbc.setState(0x450c, 0xbb38, 0x3b20, 0x94d9, 0x8fe1, 0xe39e, 0x0, 0x0);
        gbc.writeMem(0x450c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xbb38);
        EXPECT(gbc.pc(), 0x450d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0254
        gbc.setState(0x54cb, 0x2d60, 0xe620, 0x1fb0, 0x2d17, 0xbf8b, 0x0, 0x1);
        gbc.writeMem(0x54cb, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x2d60);
        EXPECT(gbc.pc(), 0x54cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0255
        gbc.setState(0xdd8b, 0xab2d, 0xb9e0, 0x2a90, 0x2835, 0x3563, 0x0, 0x1);
        gbc.writeMem(0xdd8b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xab2d);
        EXPECT(gbc.pc(), 0xdd8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd8b), 0x6b);
        // 6B 0256
        gbc.setState(0xc394, 0x1764, 0x1050, 0x957e, 0x5ab0, 0xd985, 0x1, 0x0);
        gbc.writeMem(0xc394, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x1764);
        EXPECT(gbc.pc(), 0xc395);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc394), 0x6b);
        // 6B 0257
        gbc.setState(0x2c9b, 0x292a, 0x81a0, 0x5776, 0x6765, 0x48b5, 0x1, 0x0);
        gbc.writeMem(0x2c9b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x292a);
        EXPECT(gbc.pc(), 0x2c9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0258
        gbc.setState(0x3d80, 0x7766, 0x22d0, 0xdaf5, 0xbd7b, 0x7992, 0x1, 0x1);
        gbc.writeMem(0x3d80, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x7766);
        EXPECT(gbc.pc(), 0x3d81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0259
        gbc.setState(0x8f6d, 0x34d1, 0xf70, 0x665d, 0x7ab2, 0x3009, 0x0, 0x0);
        gbc.writeMem(0x8f6d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x34d1);
        EXPECT(gbc.pc(), 0x8f6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f6d), 0x6b);
        // 6B 025A
        gbc.setState(0x84a8, 0xef71, 0xe3b0, 0xc27f, 0x7a68, 0xd1b6, 0x1, 0x0);
        gbc.writeMem(0x84a8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xef71);
        EXPECT(gbc.pc(), 0x84a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84a8), 0x6b);
        // 6B 025B
        gbc.setState(0x3dd, 0x1173, 0x75b0, 0xcaa2, 0xebee, 0xd0b6, 0x0, 0x0);
        gbc.writeMem(0x3dd, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x1173);
        EXPECT(gbc.pc(), 0x3de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 025C
        gbc.setState(0x7, 0x2fb4, 0x9d10, 0x151c, 0xafc5, 0xbcb3, 0x0, 0x1);
        gbc.writeMem(0x7, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x2fb4);
        EXPECT(gbc.pc(), 0x8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 025D
        gbc.setState(0x5f76, 0x3c1f, 0x2410, 0xb5c6, 0xf48b, 0x8115, 0x1, 0x1);
        gbc.writeMem(0x5f76, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3c1f);
        EXPECT(gbc.pc(), 0x5f77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 025E
        gbc.setState(0x260f, 0xb7ba, 0xf470, 0x7c95, 0xeb81, 0x3efd, 0x1, 0x0);
        gbc.writeMem(0x260f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xb7ba);
        EXPECT(gbc.pc(), 0x2610);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 025F
        gbc.setState(0xaf18, 0x8410, 0x8f20, 0xe6af, 0xb5ee, 0xe68c, 0x0, 0x0);
        gbc.writeMem(0xaf18, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x8410);
        EXPECT(gbc.pc(), 0xaf19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf18), 0x6b);
        // 6B 0260
        gbc.setState(0xa42e, 0x69ed, 0x1920, 0x7e85, 0xfae3, 0x188a, 0x1, 0x1);
        gbc.writeMem(0xa42e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x69ed);
        EXPECT(gbc.pc(), 0xa42f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa42e), 0x6b);
        // 6B 0261
        gbc.setState(0x2773, 0x7f03, 0x8040, 0xfc20, 0x5af3, 0x9f35, 0x1, 0x1);
        gbc.writeMem(0x2773, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x7f03);
        EXPECT(gbc.pc(), 0x2774);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0262
        gbc.setState(0x8317, 0x9406, 0xe2d0, 0x6386, 0xd57e, 0xe7b5, 0x1, 0x0);
        gbc.writeMem(0x8317, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x9406);
        EXPECT(gbc.pc(), 0x8318);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8317), 0x6b);
        // 6B 0263
        gbc.setState(0xa6c5, 0x48d2, 0xae0, 0xe950, 0xa8a3, 0x2a18, 0x0, 0x0);
        gbc.writeMem(0xa6c5, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x48d2);
        EXPECT(gbc.pc(), 0xa6c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6c5), 0x6b);
        // 6B 0264
        gbc.setState(0x6da7, 0x7484, 0x2260, 0x5f50, 0xfc9e, 0xed48, 0x1, 0x1);
        gbc.writeMem(0x6da7, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x7484);
        EXPECT(gbc.pc(), 0x6da8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0265
        gbc.setState(0xc85a, 0x97e, 0x6cc0, 0x89dd, 0x2144, 0x9084, 0x0, 0x1);
        gbc.writeMem(0xc85a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x97e);
        EXPECT(gbc.pc(), 0xc85b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc85a), 0x6b);
        // 6B 0266
        gbc.setState(0x7548, 0xc4e5, 0x6d10, 0xfb2b, 0x8df0, 0xcc10, 0x1, 0x1);
        gbc.writeMem(0x7548, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xc4e5);
        EXPECT(gbc.pc(), 0x7549);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0267
        gbc.setState(0xcc4a, 0xf0ae, 0xd360, 0xf922, 0xeddc, 0x55fe, 0x1, 0x1);
        gbc.writeMem(0xcc4a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xf0ae);
        EXPECT(gbc.pc(), 0xcc4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc4a), 0x6b);
        // 6B 0268
        gbc.setState(0x4a98, 0xbfdc, 0x23b0, 0x504d, 0xad28, 0x635e, 0x0, 0x0);
        gbc.writeMem(0x4a98, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xbfdc);
        EXPECT(gbc.pc(), 0x4a99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0269
        gbc.setState(0x9059, 0xa15, 0x7720, 0x3d03, 0x5200, 0xe8c3, 0x1, 0x1);
        gbc.writeMem(0x9059, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xa15);
        EXPECT(gbc.pc(), 0x905a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9059), 0x6b);
        // 6B 026A
        gbc.setState(0x935b, 0xec3, 0x4090, 0xe0aa, 0x495b, 0xc836, 0x0, 0x1);
        gbc.writeMem(0x935b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xec3);
        EXPECT(gbc.pc(), 0x935c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x935b), 0x6b);
        // 6B 026B
        gbc.setState(0x8a4b, 0x5a43, 0x5e70, 0x9a18, 0x144d, 0xac7d, 0x0, 0x0);
        gbc.writeMem(0x8a4b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x5a43);
        EXPECT(gbc.pc(), 0x8a4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a4b), 0x6b);
        // 6B 026C
        gbc.setState(0x35b0, 0xc47, 0x7aa0, 0xe18b, 0xc9de, 0xc59a, 0x0, 0x1);
        gbc.writeMem(0x35b0, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xc47);
        EXPECT(gbc.pc(), 0x35b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 026D
        gbc.setState(0x3a3c, 0xa8eb, 0x7090, 0xe5b1, 0xb8ca, 0xe542, 0x1, 0x0);
        gbc.writeMem(0x3a3c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xa8eb);
        EXPECT(gbc.pc(), 0x3a3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 026E
        gbc.setState(0x1e67, 0xd186, 0x5010, 0x69a5, 0x53fa, 0xf939, 0x0, 0x1);
        gbc.writeMem(0x1e67, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xd186);
        EXPECT(gbc.pc(), 0x1e68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 026F
        gbc.setState(0x78d5, 0x6efd, 0x1130, 0x8f86, 0x139, 0xa103, 0x0, 0x0);
        gbc.writeMem(0x78d5, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x6efd);
        EXPECT(gbc.pc(), 0x78d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0270
        gbc.setState(0xb6a8, 0x9426, 0x9b10, 0xd512, 0xa7b, 0x4e09, 0x1, 0x0);
        gbc.writeMem(0xb6a8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x9426);
        EXPECT(gbc.pc(), 0xb6a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6a8), 0x6b);
        // 6B 0271
        gbc.setState(0x16a3, 0x6290, 0x5140, 0x1b7c, 0xd36c, 0x9e4a, 0x0, 0x0);
        gbc.writeMem(0x16a3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x6290);
        EXPECT(gbc.pc(), 0x16a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0272
        gbc.setState(0xb927, 0x5731, 0xc5a0, 0x836e, 0x69a0, 0x967e, 0x0, 0x1);
        gbc.writeMem(0xb927, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x5731);
        EXPECT(gbc.pc(), 0xb928);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb927), 0x6b);
        // 6B 0273
        gbc.setState(0x7adc, 0x2092, 0x5ac0, 0x85eb, 0x96da, 0xdbed, 0x0, 0x1);
        gbc.writeMem(0x7adc, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x2092);
        EXPECT(gbc.pc(), 0x7add);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0274
        gbc.setState(0x847e, 0xc4ba, 0x5ac0, 0x443e, 0x328e, 0x7f54, 0x0, 0x0);
        gbc.writeMem(0x847e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xc4ba);
        EXPECT(gbc.pc(), 0x847f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x847e), 0x6b);
        // 6B 0275
        gbc.setState(0xc7cb, 0x344d, 0x1cb0, 0xe17b, 0xf1ff, 0x3df4, 0x1, 0x0);
        gbc.writeMem(0xc7cb, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x344d);
        EXPECT(gbc.pc(), 0xc7cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7cb), 0x6b);
        // 6B 0276
        gbc.setState(0xc508, 0xf197, 0xe320, 0xac3b, 0xf267, 0xffcc, 0x0, 0x1);
        gbc.writeMem(0xc508, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xf197);
        EXPECT(gbc.pc(), 0xc509);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc508), 0x6b);
        // 6B 0278
        gbc.setState(0x105f, 0xf5f1, 0x1c00, 0x211b, 0x6619, 0x8ac1, 0x0, 0x0);
        gbc.writeMem(0x105f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xf5f1);
        EXPECT(gbc.pc(), 0x1060);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0279
        gbc.setState(0x4ac, 0x62c9, 0x8e10, 0xf074, 0x3353, 0x465d, 0x0, 0x0);
        gbc.writeMem(0x4ac, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x62c9);
        EXPECT(gbc.pc(), 0x4ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 027A
        gbc.setState(0x7fb3, 0x9a9a, 0x79d0, 0x2cf5, 0x4ab9, 0x9205, 0x0, 0x0);
        gbc.writeMem(0x7fb3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x9a9a);
        EXPECT(gbc.pc(), 0x7fb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 027B
        gbc.setState(0x9480, 0x5588, 0x63a0, 0x13b4, 0x878e, 0x6e2d, 0x0, 0x1);
        gbc.writeMem(0x9480, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x5588);
        EXPECT(gbc.pc(), 0x9481);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9480), 0x6b);
        // 6B 027C
        gbc.setState(0xebb3, 0xf256, 0x6f60, 0xbca8, 0xc7fe, 0xead8, 0x0, 0x1);
        gbc.writeMem(0xebb3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xf256);
        EXPECT(gbc.pc(), 0xebb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebb3), 0x6b);
        // 6B 027D
        gbc.setState(0x1834, 0x40cf, 0xb0e0, 0x8099, 0x45e5, 0xfe55, 0x0, 0x0);
        gbc.writeMem(0x1834, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x40cf);
        EXPECT(gbc.pc(), 0x1835);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 027E
        gbc.setState(0x54c3, 0xad, 0xd8e0, 0xb753, 0x7dfc, 0xfbba, 0x1, 0x1);
        gbc.writeMem(0x54c3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xad);
        EXPECT(gbc.pc(), 0x54c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 027F
        gbc.setState(0x5309, 0xe077, 0x5a90, 0xdf7e, 0xe3ef, 0x91c1, 0x1, 0x0);
        gbc.writeMem(0x5309, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xe077);
        EXPECT(gbc.pc(), 0x530a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0280
        gbc.setState(0x405c, 0xa676, 0x6b40, 0x475b, 0xf51b, 0x3356, 0x1, 0x1);
        gbc.writeMem(0x405c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xa676);
        EXPECT(gbc.pc(), 0x405d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0281
        gbc.setState(0x6d03, 0xd36d, 0x7cb0, 0x7a3e, 0x4b19, 0xc783, 0x0, 0x1);
        gbc.writeMem(0x6d03, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xd36d);
        EXPECT(gbc.pc(), 0x6d04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0282
        gbc.setState(0x81ce, 0x8286, 0x5210, 0xf611, 0xd8db, 0xb226, 0x0, 0x0);
        gbc.writeMem(0x81ce, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x8286);
        EXPECT(gbc.pc(), 0x81cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81ce), 0x6b);
        // 6B 0283
        gbc.setState(0x22bb, 0x4130, 0xed0, 0x1ba7, 0xcab6, 0x22df, 0x0, 0x1);
        gbc.writeMem(0x22bb, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x4130);
        EXPECT(gbc.pc(), 0x22bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0284
        gbc.setState(0x9c75, 0x7ae0, 0x4820, 0x34b, 0x2830, 0x1fd3, 0x1, 0x0);
        gbc.writeMem(0x9c75, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x7ae0);
        EXPECT(gbc.pc(), 0x9c76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c75), 0x6b);
        // 6B 0285
        gbc.setState(0x8a79, 0x7623, 0xe830, 0x80a0, 0x3ea9, 0x1f3c, 0x0, 0x0);
        gbc.writeMem(0x8a79, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x7623);
        EXPECT(gbc.pc(), 0x8a7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a79), 0x6b);
        // 6B 0286
        gbc.setState(0x7d68, 0xfc19, 0x24c0, 0x150a, 0xa60e, 0xedde, 0x1, 0x0);
        gbc.writeMem(0x7d68, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xfc19);
        EXPECT(gbc.pc(), 0x7d69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0287
        gbc.setState(0xe90f, 0x9b96, 0xd090, 0x822f, 0x40d4, 0x7dc2, 0x1, 0x0);
        gbc.writeMem(0xe90f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x9b96);
        EXPECT(gbc.pc(), 0xe910);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe90f), 0x6b);
        // 6B 0288
        gbc.setState(0xdc69, 0xdeae, 0x97b0, 0xf77d, 0xfb51, 0xedc8, 0x1, 0x1);
        gbc.writeMem(0xdc69, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xdeae);
        EXPECT(gbc.pc(), 0xdc6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc69), 0x6b);
        // 6B 0289
        gbc.setState(0x45d, 0xeece, 0xee90, 0xbfbb, 0x3b59, 0x6c5d, 0x1, 0x0);
        gbc.writeMem(0x45d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xeece);
        EXPECT(gbc.pc(), 0x45e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 028A
        gbc.setState(0x6f5b, 0x3e61, 0xe940, 0xe95c, 0x3186, 0xb378, 0x0, 0x0);
        gbc.writeMem(0x6f5b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x3e61);
        EXPECT(gbc.pc(), 0x6f5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 028B
        gbc.setState(0xe04d, 0x15be, 0xccd0, 0xbbff, 0xf67c, 0xa79c, 0x0, 0x1);
        gbc.writeMem(0xe04d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x15be);
        EXPECT(gbc.pc(), 0xe04e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe04d), 0x6b);
        // 6B 028C
        gbc.setState(0x3f12, 0xfbb0, 0x65e0, 0x10c, 0x894e, 0x57b8, 0x1, 0x1);
        gbc.writeMem(0x3f12, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xfbb0);
        EXPECT(gbc.pc(), 0x3f13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 028D
        gbc.setState(0xa6e6, 0x6d5f, 0x96f0, 0x8b4a, 0x13ae, 0x1150, 0x1, 0x0);
        gbc.writeMem(0xa6e6, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x6d5f);
        EXPECT(gbc.pc(), 0xa6e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6e6), 0x6b);
        // 6B 028E
        gbc.setState(0xc764, 0xb2b3, 0xd170, 0xfe55, 0x80f8, 0x9c60, 0x1, 0x0);
        gbc.writeMem(0xc764, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xb2b3);
        EXPECT(gbc.pc(), 0xc765);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc764), 0x6b);
        // 6B 028F
        gbc.setState(0xc7ff, 0xbfd, 0x35d0, 0x3a9d, 0x3ded, 0xbc57, 0x0, 0x1);
        gbc.writeMem(0xc7ff, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xbfd);
        EXPECT(gbc.pc(), 0xc800);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7ff), 0x6b);
        // 6B 0290
        gbc.setState(0xb282, 0xd2f6, 0x23c0, 0x62a1, 0x8b5d, 0x5d49, 0x0, 0x0);
        gbc.writeMem(0xb282, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xd2f6);
        EXPECT(gbc.pc(), 0xb283);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb282), 0x6b);
        // 6B 0291
        gbc.setState(0x7c43, 0xc33f, 0x4970, 0x9c6a, 0xe737, 0x3ac0, 0x1, 0x0);
        gbc.writeMem(0x7c43, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xc33f);
        EXPECT(gbc.pc(), 0x7c44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0292
        gbc.setState(0x765, 0xd7c3, 0x4770, 0xd6c8, 0x92af, 0xe99d, 0x1, 0x0);
        gbc.writeMem(0x765, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xd7c3);
        EXPECT(gbc.pc(), 0x766);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0293
        gbc.setState(0x368a, 0x5cda, 0x20c0, 0xa1d7, 0x2d59, 0x1cfa, 0x1, 0x1);
        gbc.writeMem(0x368a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x5cda);
        EXPECT(gbc.pc(), 0x368b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0294
        gbc.setState(0x64e0, 0xd845, 0x9240, 0x5057, 0x8f03, 0x93f5, 0x1, 0x1);
        gbc.writeMem(0x64e0, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xd845);
        EXPECT(gbc.pc(), 0x64e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0295
        gbc.setState(0x7f65, 0xb0f2, 0xa0c0, 0xf527, 0x2d8e, 0x59ff, 0x1, 0x1);
        gbc.writeMem(0x7f65, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xb0f2);
        EXPECT(gbc.pc(), 0x7f66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0296
        gbc.setState(0x147, 0xb363, 0x1410, 0x872f, 0xb963, 0x43db, 0x1, 0x1);
        gbc.writeMem(0x147, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xb363);
        EXPECT(gbc.pc(), 0x148);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0297
        gbc.setState(0x5a81, 0xd2a6, 0x8590, 0xc60f, 0x515f, 0x76d7, 0x0, 0x0);
        gbc.writeMem(0x5a81, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xd2a6);
        EXPECT(gbc.pc(), 0x5a82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0298
        gbc.setState(0x73ed, 0xa111, 0xef60, 0xac2, 0x897c, 0x893, 0x0, 0x1);
        gbc.writeMem(0x73ed, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xa111);
        EXPECT(gbc.pc(), 0x73ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0299
        gbc.setState(0x2afa, 0x7661, 0x20b0, 0x4ccd, 0x827, 0x68e1, 0x0, 0x0);
        gbc.writeMem(0x2afa, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x7661);
        EXPECT(gbc.pc(), 0x2afb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 029A
        gbc.setState(0x10f2, 0xabe6, 0xd3c0, 0xcf62, 0x7c55, 0xe5d5, 0x1, 0x0);
        gbc.writeMem(0x10f2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xabe6);
        EXPECT(gbc.pc(), 0x10f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 029B
        gbc.setState(0x8746, 0x4c1d, 0x7610, 0x5c03, 0xa6b2, 0xfad0, 0x0, 0x1);
        gbc.writeMem(0x8746, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x4c1d);
        EXPECT(gbc.pc(), 0x8747);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8746), 0x6b);
        // 6B 029C
        gbc.setState(0x9c2d, 0x72a7, 0x1640, 0x1b7d, 0x87a3, 0xb7a3, 0x0, 0x1);
        gbc.writeMem(0x9c2d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x72a7);
        EXPECT(gbc.pc(), 0x9c2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c2d), 0x6b);
        // 6B 029D
        gbc.setState(0x9939, 0x15a9, 0x7570, 0xdc58, 0x3375, 0x9e15, 0x1, 0x0);
        gbc.writeMem(0x9939, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x15a9);
        EXPECT(gbc.pc(), 0x993a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9939), 0x6b);
        // 6B 029E
        gbc.setState(0x7c41, 0x91dd, 0x1d30, 0x31c2, 0x7938, 0x4e55, 0x0, 0x0);
        gbc.writeMem(0x7c41, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x91dd);
        EXPECT(gbc.pc(), 0x7c42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 02A0
        gbc.setState(0x7053, 0x75bf, 0xd670, 0xbb02, 0x6d66, 0xd1f9, 0x0, 0x0);
        gbc.writeMem(0x7053, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x75bf);
        EXPECT(gbc.pc(), 0x7054);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 02A1
        gbc.setState(0xb015, 0x452d, 0xd670, 0x6b0b, 0xc943, 0x5cd5, 0x0, 0x1);
        gbc.writeMem(0xb015, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x452d);
        EXPECT(gbc.pc(), 0xb016);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb015), 0x6b);
        // 6B 02A2
        gbc.setState(0x1c9a, 0xd1de, 0x7b80, 0xf3c5, 0xe1dc, 0x317e, 0x0, 0x1);
        gbc.writeMem(0x1c9a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xd1de);
        EXPECT(gbc.pc(), 0x1c9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 02A3
        gbc.setState(0xab74, 0xc70e, 0x1550, 0x9544, 0x828a, 0x382b, 0x1, 0x0);
        gbc.writeMem(0xab74, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xc70e);
        EXPECT(gbc.pc(), 0xab75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab74), 0x6b);
        // 6B 02A4
        gbc.setState(0x4906, 0xd18c, 0x1310, 0x67fa, 0x326a, 0xb3ef, 0x1, 0x0);
        gbc.writeMem(0x4906, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xd18c);
        EXPECT(gbc.pc(), 0x4907);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 02A5
        gbc.setState(0x365a, 0x3837, 0xfc30, 0xbb78, 0x9c1d, 0x9f71, 0x1, 0x0);
        gbc.writeMem(0x365a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x3837);
        EXPECT(gbc.pc(), 0x365b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 02A6
        gbc.setState(0x354d, 0xbb02, 0xe770, 0xb475, 0x7c95, 0x7c5e, 0x0, 0x1);
        gbc.writeMem(0x354d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xbb02);
        EXPECT(gbc.pc(), 0x354e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 02A7
        gbc.setState(0x8c5, 0x5a82, 0xf680, 0x8517, 0xcd06, 0x9ac9, 0x0, 0x1);
        gbc.writeMem(0x8c5, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x5a82);
        EXPECT(gbc.pc(), 0x8c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 02A8
        gbc.setState(0x67ce, 0x34c8, 0x110, 0xe645, 0xa626, 0x8c54, 0x1, 0x0);
        gbc.writeMem(0x67ce, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x34c8);
        EXPECT(gbc.pc(), 0x67cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 02A9
        gbc.setState(0x355d, 0x9d28, 0xcc80, 0x9670, 0xd2f1, 0x87ba, 0x1, 0x0);
        gbc.writeMem(0x355d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x9d28);
        EXPECT(gbc.pc(), 0x355e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 02AA
        gbc.setState(0x1137, 0x51ae, 0x8d10, 0x8863, 0x2ad6, 0x904f, 0x1, 0x0);
        gbc.writeMem(0x1137, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x51ae);
        EXPECT(gbc.pc(), 0x1138);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 02AB
        gbc.setState(0x2038, 0x29db, 0x6980, 0x85b9, 0xf0c, 0x714c, 0x1, 0x1);
        gbc.writeMem(0x2038, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x29db);
        EXPECT(gbc.pc(), 0x2039);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 02AC
        gbc.setState(0x9136, 0xaa25, 0x9c90, 0x3a94, 0x19b0, 0x9337, 0x1, 0x0);
        gbc.writeMem(0x9136, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xaa25);
        EXPECT(gbc.pc(), 0x9137);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9136), 0x6b);
        // 6B 02AE
        gbc.setState(0x894f, 0x136b, 0x56f0, 0xd47a, 0x8bf3, 0x3247, 0x0, 0x1);
        gbc.writeMem(0x894f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x136b);
        EXPECT(gbc.pc(), 0x8950);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x894f), 0x6b);
        // 6B 02AF
        gbc.setState(0xe0ce, 0x1bf8, 0x53a0, 0x236b, 0x27df, 0xb3, 0x0, 0x0);
        gbc.writeMem(0xe0ce, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x1bf8);
        EXPECT(gbc.pc(), 0xe0cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0ce), 0x6b);
        // 6B 02B0
        gbc.setState(0x7e80, 0xb382, 0xd110, 0x8214, 0xbcd9, 0x2a0c, 0x0, 0x1);
        gbc.writeMem(0x7e80, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xb382);
        EXPECT(gbc.pc(), 0x7e81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 02B1
        gbc.setState(0xa7dc, 0x140, 0xc70, 0xdabc, 0x5df8, 0x2ebf, 0x1, 0x0);
        gbc.writeMem(0xa7dc, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x140);
        EXPECT(gbc.pc(), 0xa7dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7dc), 0x6b);
        // 6B 02B2
        gbc.setState(0xabb2, 0x3c9d, 0xb4a0, 0xf29, 0x1cee, 0x3249, 0x0, 0x1);
        gbc.writeMem(0xabb2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x3c9d);
        EXPECT(gbc.pc(), 0xabb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabb2), 0x6b);
        // 6B 02B3
        gbc.setState(0x10e9, 0xcb20, 0x9d20, 0x15ca, 0xf19, 0x2f42, 0x0, 0x1);
        gbc.writeMem(0x10e9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xcb20);
        EXPECT(gbc.pc(), 0x10ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 02B4
        gbc.setState(0x4a0a, 0x9270, 0x8a20, 0x6779, 0xa218, 0xd24, 0x0, 0x1);
        gbc.writeMem(0x4a0a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x9270);
        EXPECT(gbc.pc(), 0x4a0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 02B5
        gbc.setState(0x30f, 0xc568, 0x5290, 0x1bb5, 0x383f, 0x3c3e, 0x0, 0x1);
        gbc.writeMem(0x30f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xc568);
        EXPECT(gbc.pc(), 0x310);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 02B6
        gbc.setState(0xeacd, 0xb20, 0xb2f0, 0x8cb3, 0x8682, 0x91c2, 0x1, 0x0);
        gbc.writeMem(0xeacd, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xb20);
        EXPECT(gbc.pc(), 0xeace);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeacd), 0x6b);
        // 6B 02B7
        gbc.setState(0x31c8, 0x6e94, 0x1be0, 0x9590, 0xd51e, 0x95b, 0x0, 0x0);
        gbc.writeMem(0x31c8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x6e94);
        EXPECT(gbc.pc(), 0x31c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 02B8
        gbc.setState(0xa9ce, 0xdf0a, 0x9ad0, 0x1099, 0x6971, 0x5cba, 0x1, 0x0);
        gbc.writeMem(0xa9ce, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xdf0a);
        EXPECT(gbc.pc(), 0xa9cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9ce), 0x6b);
        // 6B 02BA
        gbc.setState(0xb18d, 0x97f2, 0x8a80, 0x4a89, 0x630d, 0x15de, 0x0, 0x0);
        gbc.writeMem(0xb18d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x97f2);
        EXPECT(gbc.pc(), 0xb18e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb18d), 0x6b);
        // 6B 02BB
        gbc.setState(0x80b8, 0xa39b, 0x8b20, 0x4352, 0xd664, 0x3298, 0x1, 0x1);
        gbc.writeMem(0x80b8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xa39b);
        EXPECT(gbc.pc(), 0x80b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80b8), 0x6b);
        // 6B 02BC
        gbc.setState(0x93c6, 0xa30c, 0x8820, 0xc9c2, 0x8a74, 0x921a, 0x1, 0x0);
        gbc.writeMem(0x93c6, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xa30c);
        EXPECT(gbc.pc(), 0x93c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93c6), 0x6b);
        // 6B 02BD
        gbc.setState(0xb5b, 0x9451, 0xd000, 0x7ccd, 0xf0cc, 0xa926, 0x1, 0x1);
        gbc.writeMem(0xb5b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x9451);
        EXPECT(gbc.pc(), 0xb5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 02BE
        gbc.setState(0xa95e, 0xe7f3, 0x7ea0, 0x4537, 0x6524, 0xe49, 0x0, 0x1);
        gbc.writeMem(0xa95e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xe7f3);
        EXPECT(gbc.pc(), 0xa95f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa95e), 0x6b);
        // 6B 02BF
        gbc.setState(0xcbde, 0x2fa1, 0x7bc0, 0xb400, 0xdc19, 0xf903, 0x1, 0x1);
        gbc.writeMem(0xcbde, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x2fa1);
        EXPECT(gbc.pc(), 0xcbdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbde), 0x6b);
        // 6B 02C0
        gbc.setState(0xd4cd, 0xba0, 0xe5b0, 0x6923, 0xfa2f, 0xc724, 0x0, 0x0);
        gbc.writeMem(0xd4cd, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xba0);
        EXPECT(gbc.pc(), 0xd4ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4cd), 0x6b);
        // 6B 02C1
        gbc.setState(0x9082, 0xea25, 0x430, 0xd624, 0x31c, 0xa7fd, 0x0, 0x1);
        gbc.writeMem(0x9082, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xea25);
        EXPECT(gbc.pc(), 0x9083);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9082), 0x6b);
        // 6B 02C2
        gbc.setState(0x3cd2, 0xa9d5, 0x5840, 0xe313, 0xa1c, 0xdef6, 0x1, 0x0);
        gbc.writeMem(0x3cd2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xa9d5);
        EXPECT(gbc.pc(), 0x3cd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 02C3
        gbc.setState(0x18f6, 0x4046, 0x36b0, 0x1dc5, 0x9d62, 0x6120, 0x0, 0x0);
        gbc.writeMem(0x18f6, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x4046);
        EXPECT(gbc.pc(), 0x18f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 02C4
        gbc.setState(0xc098, 0x96d0, 0x9fe0, 0x2df6, 0x660f, 0xe47b, 0x0, 0x1);
        gbc.writeMem(0xc098, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x96d0);
        EXPECT(gbc.pc(), 0xc099);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc098), 0x6b);
        // 6B 02C5
        gbc.setState(0x7bf1, 0xd601, 0x19f0, 0xc79e, 0x4e01, 0x3210, 0x0, 0x0);
        gbc.writeMem(0x7bf1, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xd601);
        EXPECT(gbc.pc(), 0x7bf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 02C6
        gbc.setState(0xe5b, 0xe1c3, 0x1960, 0x4d5d, 0x1ebc, 0x15cf, 0x1, 0x0);
        gbc.writeMem(0xe5b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xe1c3);
        EXPECT(gbc.pc(), 0xe5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 02C7
        gbc.setState(0x1158, 0x220e, 0x8aa0, 0xd521, 0xb51c, 0xc8aa, 0x0, 0x0);
        gbc.writeMem(0x1158, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x220e);
        EXPECT(gbc.pc(), 0x1159);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 02C8
        gbc.setState(0x98e2, 0xc188, 0x6630, 0x1d8f, 0x5b64, 0x834, 0x0, 0x0);
        gbc.writeMem(0x98e2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xc188);
        EXPECT(gbc.pc(), 0x98e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98e2), 0x6b);
        // 6B 02C9
        gbc.setState(0x9718, 0xc5b4, 0x9630, 0x8213, 0x6429, 0x6fd5, 0x0, 0x1);
        gbc.writeMem(0x9718, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xc5b4);
        EXPECT(gbc.pc(), 0x9719);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9718), 0x6b);
        // 6B 02CA
        gbc.setState(0xdb32, 0x7f89, 0xc380, 0xd81d, 0xa1aa, 0x664c, 0x1, 0x0);
        gbc.writeMem(0xdb32, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x7f89);
        EXPECT(gbc.pc(), 0xdb33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb32), 0x6b);
        // 6B 02CB
        gbc.setState(0x5892, 0x8bc9, 0x7c50, 0x7bea, 0xf564, 0x6243, 0x0, 0x1);
        gbc.writeMem(0x5892, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x8bc9);
        EXPECT(gbc.pc(), 0x5893);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 02CC
        gbc.setState(0x46d0, 0x6123, 0x86f0, 0x40aa, 0xf403, 0xe16f, 0x1, 0x0);
        gbc.writeMem(0x46d0, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x6123);
        EXPECT(gbc.pc(), 0x46d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 02CD
        gbc.setState(0x9d36, 0xe13d, 0x9860, 0x30d, 0x6977, 0x2ba7, 0x0, 0x0);
        gbc.writeMem(0x9d36, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xe13d);
        EXPECT(gbc.pc(), 0x9d37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d36), 0x6b);
        // 6B 02CE
        gbc.setState(0x7cbf, 0xb7f3, 0x3920, 0x56ea, 0x1016, 0x755e, 0x0, 0x0);
        gbc.writeMem(0x7cbf, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xb7f3);
        EXPECT(gbc.pc(), 0x7cc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 02CF
        gbc.setState(0x95fd, 0x5ecf, 0xbda0, 0x28e9, 0x4ad, 0xd152, 0x1, 0x0);
        gbc.writeMem(0x95fd, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x5ecf);
        EXPECT(gbc.pc(), 0x95fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95fd), 0x6b);
        // 6B 02D0
        gbc.setState(0x3835, 0x716f, 0xbda0, 0x123f, 0xfe96, 0xb6cc, 0x1, 0x1);
        gbc.writeMem(0x3835, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x716f);
        EXPECT(gbc.pc(), 0x3836);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 02D1
        gbc.setState(0x2544, 0xc48b, 0xb00, 0x8557, 0x6722, 0x87a1, 0x0, 0x1);
        gbc.writeMem(0x2544, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xc48b);
        EXPECT(gbc.pc(), 0x2545);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 02D2
        gbc.setState(0x5553, 0x2494, 0xfd20, 0xfb92, 0x679e, 0x4bad, 0x0, 0x1);
        gbc.writeMem(0x5553, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x2494);
        EXPECT(gbc.pc(), 0x5554);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 02D3
        gbc.setState(0x5734, 0xf432, 0x700, 0x4c8d, 0x4d86, 0x607, 0x0, 0x0);
        gbc.writeMem(0x5734, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xf432);
        EXPECT(gbc.pc(), 0x5735);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 02D4
        gbc.setState(0x7488, 0x2f10, 0xe230, 0x77e, 0x8a8f, 0xbde3, 0x1, 0x1);
        gbc.writeMem(0x7488, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x2f10);
        EXPECT(gbc.pc(), 0x7489);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 02D5
        gbc.setState(0xe2ec, 0x8a3, 0xda30, 0x7e42, 0xd18e, 0xa799, 0x1, 0x1);
        gbc.writeMem(0xe2ec, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x8a3);
        EXPECT(gbc.pc(), 0xe2ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2ec), 0x6b);
        // 6B 02D7
        gbc.setState(0x30f9, 0x3603, 0x8170, 0x8f8c, 0x5231, 0x8270, 0x1, 0x1);
        gbc.writeMem(0x30f9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x3603);
        EXPECT(gbc.pc(), 0x30fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 02D8
        gbc.setState(0x8481, 0x6627, 0xce20, 0xf16a, 0x4953, 0xa33, 0x0, 0x1);
        gbc.writeMem(0x8481, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x6627);
        EXPECT(gbc.pc(), 0x8482);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8481), 0x6b);
        // 6B 02D9
        gbc.setState(0xae92, 0xc0ec, 0x3790, 0x517c, 0xc20d, 0xa8d3, 0x1, 0x1);
        gbc.writeMem(0xae92, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xc0ec);
        EXPECT(gbc.pc(), 0xae93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae92), 0x6b);
        // 6B 02DA
        gbc.setState(0xede3, 0xb439, 0x6ca0, 0xe8db, 0x5a25, 0xc3f7, 0x0, 0x0);
        gbc.writeMem(0xede3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xb439);
        EXPECT(gbc.pc(), 0xede4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xede3), 0x6b);
        // 6B 02DC
        gbc.setState(0x7855, 0x1e05, 0xac80, 0xfcb2, 0x8824, 0x8c30, 0x0, 0x0);
        gbc.writeMem(0x7855, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x1e05);
        EXPECT(gbc.pc(), 0x7856);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 02DD
        gbc.setState(0xa6a9, 0x1bd6, 0xd2f0, 0xcfe1, 0xcfc4, 0xcbea, 0x0, 0x0);
        gbc.writeMem(0xa6a9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x1bd6);
        EXPECT(gbc.pc(), 0xa6aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6a9), 0x6b);
        // 6B 02DE
        gbc.setState(0xa9ca, 0x10b1, 0x16f0, 0x4df3, 0x1e3a, 0xddf1, 0x1, 0x0);
        gbc.writeMem(0xa9ca, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x10b1);
        EXPECT(gbc.pc(), 0xa9cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9ca), 0x6b);
        // 6B 02DF
        gbc.setState(0x4995, 0x4906, 0x81d0, 0x60cf, 0xdb72, 0x4b72, 0x1, 0x1);
        gbc.writeMem(0x4995, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x4906);
        EXPECT(gbc.pc(), 0x4996);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 02E0
        gbc.setState(0xb2a8, 0x3a46, 0xad0, 0x7053, 0x46e8, 0xf308, 0x0, 0x0);
        gbc.writeMem(0xb2a8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x3a46);
        EXPECT(gbc.pc(), 0xb2a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2a8), 0x6b);
        // 6B 02E1
        gbc.setState(0x7b6a, 0xa507, 0x72d0, 0xc878, 0xb11d, 0xb19b, 0x1, 0x0);
        gbc.writeMem(0x7b6a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xa507);
        EXPECT(gbc.pc(), 0x7b6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 02E2
        gbc.setState(0xbb41, 0xa7a8, 0x2090, 0xa79f, 0x6158, 0x65bf, 0x1, 0x1);
        gbc.writeMem(0xbb41, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xa7a8);
        EXPECT(gbc.pc(), 0xbb42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb41), 0x6b);
        // 6B 02E3
        gbc.setState(0xa0e, 0xda8e, 0x6c60, 0xd7c1, 0x6c0b, 0xdb8, 0x0, 0x0);
        gbc.writeMem(0xa0e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xda8e);
        EXPECT(gbc.pc(), 0xa0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 02E4
        gbc.setState(0xaaf8, 0xe64f, 0xb1e0, 0x1342, 0x9c5a, 0x879a, 0x0, 0x0);
        gbc.writeMem(0xaaf8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xe64f);
        EXPECT(gbc.pc(), 0xaaf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaf8), 0x6b);
        // 6B 02E5
        gbc.setState(0x8e40, 0xf666, 0x4d70, 0xb5c2, 0xe47, 0xed94, 0x0, 0x1);
        gbc.writeMem(0x8e40, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xf666);
        EXPECT(gbc.pc(), 0x8e41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e40), 0x6b);
        // 6B 02E6
        gbc.setState(0xd627, 0x9f66, 0x97e0, 0x3a8f, 0x2c9a, 0xc97d, 0x0, 0x0);
        gbc.writeMem(0xd627, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x9f66);
        EXPECT(gbc.pc(), 0xd628);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd627), 0x6b);
        // 6B 02E7
        gbc.setState(0x146e, 0x55f2, 0x8e40, 0x75f, 0x933b, 0x2d69, 0x0, 0x1);
        gbc.writeMem(0x146e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x55f2);
        EXPECT(gbc.pc(), 0x146f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 02E8
        gbc.setState(0x9ccc, 0x477f, 0x4080, 0xc3, 0x4131, 0xa571, 0x1, 0x1);
        gbc.writeMem(0x9ccc, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x477f);
        EXPECT(gbc.pc(), 0x9ccd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ccc), 0x6b);
        // 6B 02EA
        gbc.setState(0xe379, 0x6e15, 0x1e0, 0xefd0, 0xeaa1, 0xcc13, 0x1, 0x0);
        gbc.writeMem(0xe379, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x6e15);
        EXPECT(gbc.pc(), 0xe37a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe379), 0x6b);
        // 6B 02EB
        gbc.setState(0x397b, 0x8aad, 0xd7c0, 0x5d0b, 0xf736, 0xdb27, 0x0, 0x1);
        gbc.writeMem(0x397b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x8aad);
        EXPECT(gbc.pc(), 0x397c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 02EE
        gbc.setState(0x82e8, 0x3e44, 0x2a40, 0x2fc1, 0x726a, 0xb460, 0x1, 0x0);
        gbc.writeMem(0x82e8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x3e44);
        EXPECT(gbc.pc(), 0x82e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82e8), 0x6b);
        // 6B 02EF
        gbc.setState(0x7ae9, 0x8fd, 0xab10, 0x35c0, 0xe11a, 0x56c1, 0x1, 0x0);
        gbc.writeMem(0x7ae9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x8fd);
        EXPECT(gbc.pc(), 0x7aea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 02F0
        gbc.setState(0x928c, 0x21fb, 0xe8a0, 0xf484, 0xe2af, 0x2ff5, 0x0, 0x1);
        gbc.writeMem(0x928c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x21fb);
        EXPECT(gbc.pc(), 0x928d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x928c), 0x6b);
        // 6B 02F1
        gbc.setState(0xd75a, 0xa710, 0x8d20, 0x7ace, 0x3721, 0x7e00, 0x1, 0x1);
        gbc.writeMem(0xd75a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xa710);
        EXPECT(gbc.pc(), 0xd75b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd75a), 0x6b);
        // 6B 02F2
        gbc.setState(0x3796, 0x3077, 0xba80, 0xb923, 0xab5, 0xfc59, 0x1, 0x0);
        gbc.writeMem(0x3796, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x3077);
        EXPECT(gbc.pc(), 0x3797);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 02F3
        gbc.setState(0x79e, 0xf865, 0x6170, 0x7be7, 0x2b6e, 0x1e6d, 0x1, 0x0);
        gbc.writeMem(0x79e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xf865);
        EXPECT(gbc.pc(), 0x79f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 02F4
        gbc.setState(0xda79, 0x11a1, 0xeac0, 0x4592, 0xe1a5, 0xbdec, 0x0, 0x0);
        gbc.writeMem(0xda79, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x11a1);
        EXPECT(gbc.pc(), 0xda7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda79), 0x6b);
        // 6B 02F5
        gbc.setState(0x8781, 0x62fa, 0x45a0, 0x300b, 0xfab7, 0xecbc, 0x1, 0x1);
        gbc.writeMem(0x8781, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x62fa);
        EXPECT(gbc.pc(), 0x8782);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8781), 0x6b);
        // 6B 02F6
        gbc.setState(0xb1e8, 0x4f17, 0xdee0, 0x679b, 0x8e99, 0x7eff, 0x0, 0x0);
        gbc.writeMem(0xb1e8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x4f17);
        EXPECT(gbc.pc(), 0xb1e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1e8), 0x6b);
        // 6B 02F7
        gbc.setState(0x7c5a, 0xbf, 0x4ca0, 0x2e45, 0x8d81, 0x35bc, 0x0, 0x1);
        gbc.writeMem(0x7c5a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xbf);
        EXPECT(gbc.pc(), 0x7c5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 02F8
        gbc.setState(0x2429, 0xdb34, 0x3fe0, 0x52aa, 0xa40e, 0x9dc2, 0x0, 0x1);
        gbc.writeMem(0x2429, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xdb34);
        EXPECT(gbc.pc(), 0x242a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 02F9
        gbc.setState(0x6cfb, 0x820c, 0x97c0, 0x89db, 0xdb91, 0xc79b, 0x0, 0x1);
        gbc.writeMem(0x6cfb, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x820c);
        EXPECT(gbc.pc(), 0x6cfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 02FA
        gbc.setState(0x8c57, 0xe2fa, 0x4c20, 0x67a8, 0xa143, 0x489a, 0x0, 0x1);
        gbc.writeMem(0x8c57, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xe2fa);
        EXPECT(gbc.pc(), 0x8c58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c57), 0x6b);
        // 6B 02FB
        gbc.setState(0xc749, 0xaad, 0x22f0, 0x35db, 0x15e8, 0x30e6, 0x1, 0x0);
        gbc.writeMem(0xc749, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xaad);
        EXPECT(gbc.pc(), 0xc74a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc749), 0x6b);
        // 6B 02FC
        gbc.setState(0x9c6b, 0x7eeb, 0x6fd0, 0x4600, 0x4ea3, 0x8b78, 0x0, 0x1);
        gbc.writeMem(0x9c6b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x7eeb);
        EXPECT(gbc.pc(), 0x9c6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c6b), 0x6b);
        // 6B 02FD
        gbc.setState(0xbb13, 0x30d8, 0x2bb0, 0xc439, 0x793d, 0x954c, 0x1, 0x0);
        gbc.writeMem(0xbb13, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x30d8);
        EXPECT(gbc.pc(), 0xbb14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb13), 0x6b);
        // 6B 02FE
        gbc.setState(0xdb85, 0x55ed, 0x79e0, 0xfcc4, 0x6d4c, 0x1b28, 0x0, 0x0);
        gbc.writeMem(0xdb85, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x55ed);
        EXPECT(gbc.pc(), 0xdb86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb85), 0x6b);
        // 6B 02FF
        gbc.setState(0x4d4b, 0x5d6d, 0x930, 0xd942, 0x96af, 0xd4c, 0x0, 0x0);
        gbc.writeMem(0x4d4b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x5d6d);
        EXPECT(gbc.pc(), 0x4d4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0300
        gbc.setState(0xa270, 0xbbf, 0x7fc0, 0x4c05, 0x5f0f, 0x7439, 0x0, 0x1);
        gbc.writeMem(0xa270, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xbbf);
        EXPECT(gbc.pc(), 0xa271);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa270), 0x6b);
        // 6B 0301
        gbc.setState(0x2e36, 0x82de, 0x5be0, 0xd2d2, 0x610a, 0xcb9a, 0x0, 0x1);
        gbc.writeMem(0x2e36, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x82de);
        EXPECT(gbc.pc(), 0x2e37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0302
        gbc.setState(0x6af, 0x10e1, 0x86f0, 0xa895, 0xba3d, 0xa48d, 0x0, 0x0);
        gbc.writeMem(0x6af, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x10e1);
        EXPECT(gbc.pc(), 0x6b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0303
        gbc.setState(0x7825, 0x33db, 0x2a90, 0xd3ba, 0x720b, 0x17e4, 0x0, 0x1);
        gbc.writeMem(0x7825, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x33db);
        EXPECT(gbc.pc(), 0x7826);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0304
        gbc.setState(0x9a51, 0x867f, 0x9fe0, 0x821a, 0x767a, 0xf357, 0x0, 0x0);
        gbc.writeMem(0x9a51, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x867f);
        EXPECT(gbc.pc(), 0x9a52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a51), 0x6b);
        // 6B 0306
        gbc.setState(0xb2de, 0x892a, 0xf9b0, 0x28c1, 0xff48, 0xe991, 0x1, 0x0);
        gbc.writeMem(0xb2de, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x892a);
        EXPECT(gbc.pc(), 0xb2df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2de), 0x6b);
        // 6B 0307
        gbc.setState(0x8577, 0x23bf, 0xf50, 0x6541, 0x192f, 0xadc1, 0x0, 0x0);
        gbc.writeMem(0x8577, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x23bf);
        EXPECT(gbc.pc(), 0x8578);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8577), 0x6b);
        // 6B 0308
        gbc.setState(0xa77e, 0xd56f, 0x84c0, 0x77a3, 0xbfa1, 0xe720, 0x0, 0x1);
        gbc.writeMem(0xa77e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xd56f);
        EXPECT(gbc.pc(), 0xa77f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa77e), 0x6b);
        // 6B 0309
        gbc.setState(0x8400, 0x82d7, 0xb9e0, 0x6b62, 0x235a, 0xde69, 0x1, 0x1);
        gbc.writeMem(0x8400, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x82d7);
        EXPECT(gbc.pc(), 0x8401);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8400), 0x6b);
        // 6B 030A
        gbc.setState(0x3c63, 0x85eb, 0xb070, 0xabfc, 0xfd9b, 0x42d, 0x0, 0x1);
        gbc.writeMem(0x3c63, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x85eb);
        EXPECT(gbc.pc(), 0x3c64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 030B
        gbc.setState(0xe7b1, 0xf2ce, 0xea90, 0x627f, 0x4666, 0xe713, 0x1, 0x1);
        gbc.writeMem(0xe7b1, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xf2ce);
        EXPECT(gbc.pc(), 0xe7b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7b1), 0x6b);
        // 6B 030C
        gbc.setState(0x9ad3, 0xbbfc, 0x7250, 0x1cb1, 0x7653, 0x5f55, 0x1, 0x0);
        gbc.writeMem(0x9ad3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xbbfc);
        EXPECT(gbc.pc(), 0x9ad4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ad3), 0x6b);
        // 6B 030D
        gbc.setState(0x949f, 0xe864, 0x5180, 0x17d, 0xef40, 0xe89e, 0x0, 0x0);
        gbc.writeMem(0x949f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xe864);
        EXPECT(gbc.pc(), 0x94a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x949f), 0x6b);
        // 6B 030E
        gbc.setState(0x3b60, 0x1226, 0x80a0, 0x92d3, 0x5373, 0xfe4d, 0x0, 0x0);
        gbc.writeMem(0x3b60, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x1226);
        EXPECT(gbc.pc(), 0x3b61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 030F
        gbc.setState(0xdb27, 0x80ce, 0x5c30, 0x30bd, 0xd661, 0xa7cd, 0x1, 0x1);
        gbc.writeMem(0xdb27, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x80ce);
        EXPECT(gbc.pc(), 0xdb28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb27), 0x6b);
        // 6B 0310
        gbc.setState(0xab2c, 0x8cc3, 0xbb10, 0xe79e, 0x1da1, 0xd5ad, 0x0, 0x1);
        gbc.writeMem(0xab2c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x8cc3);
        EXPECT(gbc.pc(), 0xab2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab2c), 0x6b);
        // 6B 0311
        gbc.setState(0x209c, 0x4bb2, 0x8a0, 0xfcf5, 0x788b, 0x6a4f, 0x0, 0x0);
        gbc.writeMem(0x209c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x4bb2);
        EXPECT(gbc.pc(), 0x209d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0312
        gbc.setState(0xa218, 0xa3a, 0x7150, 0xa63b, 0xdc52, 0xd4aa, 0x1, 0x0);
        gbc.writeMem(0xa218, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xa3a);
        EXPECT(gbc.pc(), 0xa219);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa218), 0x6b);
        // 6B 0313
        gbc.setState(0x53cd, 0xa2d3, 0x15d0, 0xbe00, 0x9b98, 0xd26, 0x1, 0x0);
        gbc.writeMem(0x53cd, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xa2d3);
        EXPECT(gbc.pc(), 0x53ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0314
        gbc.setState(0xa207, 0xbdf3, 0x92b0, 0x7cf2, 0x6902, 0x4b16, 0x0, 0x1);
        gbc.writeMem(0xa207, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xbdf3);
        EXPECT(gbc.pc(), 0xa208);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa207), 0x6b);
        // 6B 0315
        gbc.setState(0x2708, 0x5583, 0xe700, 0xdee2, 0x41a0, 0xf9b5, 0x1, 0x1);
        gbc.writeMem(0x2708, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x5583);
        EXPECT(gbc.pc(), 0x2709);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0316
        gbc.setState(0x7680, 0xaa9a, 0xc0, 0xc8cc, 0x686c, 0x2e28, 0x0, 0x1);
        gbc.writeMem(0x7680, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xaa9a);
        EXPECT(gbc.pc(), 0x7681);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0317
        gbc.setState(0x74c, 0x3f40, 0xd5e0, 0x35a3, 0xa7cb, 0x1682, 0x0, 0x0);
        gbc.writeMem(0x74c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x3f40);
        EXPECT(gbc.pc(), 0x74d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0318
        gbc.setState(0xc33c, 0x5cd4, 0x9370, 0x2190, 0x8eeb, 0xe92c, 0x1, 0x0);
        gbc.writeMem(0xc33c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x5cd4);
        EXPECT(gbc.pc(), 0xc33d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc33c), 0x6b);
        // 6B 0319
        gbc.setState(0x9b7d, 0x56ac, 0xd760, 0x2872, 0xe1fc, 0x570a, 0x0, 0x1);
        gbc.writeMem(0x9b7d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x56ac);
        EXPECT(gbc.pc(), 0x9b7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b7d), 0x6b);
        // 6B 031A
        gbc.setState(0x48dc, 0xc810, 0x8960, 0x1257, 0xf5ff, 0xed5b, 0x1, 0x0);
        gbc.writeMem(0x48dc, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xc810);
        EXPECT(gbc.pc(), 0x48dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 031B
        gbc.setState(0x16b3, 0xea55, 0xf020, 0x49b2, 0xa7da, 0x60e1, 0x0, 0x1);
        gbc.writeMem(0x16b3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xea55);
        EXPECT(gbc.pc(), 0x16b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 031C
        gbc.setState(0x67d8, 0x3100, 0x9e40, 0xe800, 0xee93, 0x9828, 0x1, 0x0);
        gbc.writeMem(0x67d8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x3100);
        EXPECT(gbc.pc(), 0x67d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 031D
        gbc.setState(0xe243, 0xe022, 0x4050, 0x8cd6, 0xd10a, 0xd43e, 0x0, 0x0);
        gbc.writeMem(0xe243, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xe022);
        EXPECT(gbc.pc(), 0xe244);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe243), 0x6b);
        // 6B 031E
        gbc.setState(0xb2c3, 0xfb37, 0x1300, 0x6cf, 0x1774, 0xc00d, 0x0, 0x0);
        gbc.writeMem(0xb2c3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xfb37);
        EXPECT(gbc.pc(), 0xb2c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2c3), 0x6b);
        // 6B 031F
        gbc.setState(0x4983, 0x773a, 0x8700, 0xd798, 0x5e1, 0x10da, 0x0, 0x1);
        gbc.writeMem(0x4983, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x773a);
        EXPECT(gbc.pc(), 0x4984);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0320
        gbc.setState(0x8c30, 0x454, 0x8ee0, 0x14ab, 0xa702, 0xedf3, 0x1, 0x1);
        gbc.writeMem(0x8c30, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x454);
        EXPECT(gbc.pc(), 0x8c31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c30), 0x6b);
        // 6B 0321
        gbc.setState(0x75a3, 0x3acf, 0x1760, 0x730b, 0xe3d3, 0xd622, 0x1, 0x1);
        gbc.writeMem(0x75a3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x3acf);
        EXPECT(gbc.pc(), 0x75a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0322
        gbc.setState(0xb7c, 0x87b9, 0x7d10, 0x79e6, 0xd104, 0x192c, 0x1, 0x0);
        gbc.writeMem(0xb7c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x87b9);
        EXPECT(gbc.pc(), 0xb7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0323
        gbc.setState(0x16a8, 0xbe4b, 0x6a60, 0x3929, 0xab74, 0xdc0a, 0x1, 0x0);
        gbc.writeMem(0x16a8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xbe4b);
        EXPECT(gbc.pc(), 0x16a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0324
        gbc.setState(0xdd68, 0xef7f, 0xc280, 0x2a79, 0xbf1e, 0x270f, 0x0, 0x1);
        gbc.writeMem(0xdd68, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xef7f);
        EXPECT(gbc.pc(), 0xdd69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd68), 0x6b);
        // 6B 0325
        gbc.setState(0x1df1, 0xe38f, 0x31c0, 0x376c, 0x5225, 0xb711, 0x0, 0x0);
        gbc.writeMem(0x1df1, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xe38f);
        EXPECT(gbc.pc(), 0x1df2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0326
        gbc.setState(0xba1c, 0x2aff, 0x3b60, 0xc6f0, 0x8e6d, 0xa59f, 0x0, 0x1);
        gbc.writeMem(0xba1c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x2aff);
        EXPECT(gbc.pc(), 0xba1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba1c), 0x6b);
        // 6B 0327
        gbc.setState(0x4257, 0x36cd, 0x3d50, 0xefb7, 0x5827, 0x2aa9, 0x0, 0x1);
        gbc.writeMem(0x4257, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x36cd);
        EXPECT(gbc.pc(), 0x4258);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0328
        gbc.setState(0x6b94, 0x6e33, 0x1650, 0x79b2, 0x715a, 0x9f06, 0x1, 0x0);
        gbc.writeMem(0x6b94, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x6e33);
        EXPECT(gbc.pc(), 0x6b95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0329
        gbc.setState(0xc827, 0x5366, 0xef90, 0xabb9, 0xeea8, 0x96bd, 0x1, 0x1);
        gbc.writeMem(0xc827, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x5366);
        EXPECT(gbc.pc(), 0xc828);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc827), 0x6b);
        // 6B 032A
        gbc.setState(0x6e, 0xa25, 0x1130, 0xbd83, 0xa7f0, 0xe675, 0x1, 0x0);
        gbc.writeMem(0x6e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xa25);
        EXPECT(gbc.pc(), 0x6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 032B
        gbc.setState(0x77f6, 0xee4a, 0xe60, 0x6cc8, 0xf69c, 0x51f2, 0x0, 0x0);
        gbc.writeMem(0x77f6, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xee4a);
        EXPECT(gbc.pc(), 0x77f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 032C
        gbc.setState(0x29c9, 0x6bf3, 0xffd0, 0x2e54, 0x347a, 0x5349, 0x0, 0x1);
        gbc.writeMem(0x29c9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x6bf3);
        EXPECT(gbc.pc(), 0x29ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 032D
        gbc.setState(0x636d, 0xdef7, 0xd260, 0x91b9, 0xc5b3, 0x247c, 0x0, 0x0);
        gbc.writeMem(0x636d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xdef7);
        EXPECT(gbc.pc(), 0x636e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 032E
        gbc.setState(0xd74e, 0x1e0b, 0xf0b0, 0x5abd, 0xd3d0, 0x7076, 0x0, 0x1);
        gbc.writeMem(0xd74e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x1e0b);
        EXPECT(gbc.pc(), 0xd74f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd74e), 0x6b);
        // 6B 032F
        gbc.setState(0x1ace, 0x1184, 0x6070, 0xd9ac, 0x2cb0, 0xb577, 0x1, 0x0);
        gbc.writeMem(0x1ace, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x1184);
        EXPECT(gbc.pc(), 0x1acf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0330
        gbc.setState(0x68c0, 0xb22d, 0xdee0, 0xb624, 0x304c, 0x5323, 0x1, 0x1);
        gbc.writeMem(0x68c0, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xb22d);
        EXPECT(gbc.pc(), 0x68c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0331
        gbc.setState(0x5067, 0xdc4d, 0x6b90, 0xa9bd, 0x3f6, 0x71db, 0x1, 0x1);
        gbc.writeMem(0x5067, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xdc4d);
        EXPECT(gbc.pc(), 0x5068);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0332
        gbc.setState(0xef1b, 0x161e, 0x24e0, 0xbc, 0x753e, 0xee02, 0x1, 0x1);
        gbc.writeMem(0xef1b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x161e);
        EXPECT(gbc.pc(), 0xef1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef1b), 0x6b);
        // 6B 0333
        gbc.setState(0x9470, 0x304e, 0xcca0, 0x3662, 0x16d8, 0x5ca8, 0x1, 0x1);
        gbc.writeMem(0x9470, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x304e);
        EXPECT(gbc.pc(), 0x9471);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9470), 0x6b);
        // 6B 0334
        gbc.setState(0x95ec, 0x4579, 0xab10, 0x3f83, 0x4b3a, 0xc7c5, 0x0, 0x1);
        gbc.writeMem(0x95ec, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x4579);
        EXPECT(gbc.pc(), 0x95ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95ec), 0x6b);
        // 6B 0335
        gbc.setState(0x8ddd, 0xf9d7, 0x26a0, 0xd761, 0xac10, 0x6bd2, 0x0, 0x1);
        gbc.writeMem(0x8ddd, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xf9d7);
        EXPECT(gbc.pc(), 0x8dde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ddd), 0x6b);
        // 6B 0336
        gbc.setState(0xb9c6, 0x64a5, 0x8130, 0xab8, 0x7ae5, 0x1c19, 0x1, 0x0);
        gbc.writeMem(0xb9c6, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x64a5);
        EXPECT(gbc.pc(), 0xb9c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9c6), 0x6b);
        // 6B 0337
        gbc.setState(0x4fec, 0x602b, 0x5f0, 0xddd2, 0xcfa1, 0x2a77, 0x0, 0x1);
        gbc.writeMem(0x4fec, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x602b);
        EXPECT(gbc.pc(), 0x4fed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0338
        gbc.setState(0xc7f, 0x646a, 0x2ac0, 0xdf0d, 0xfaf, 0x457e, 0x0, 0x1);
        gbc.writeMem(0xc7f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x646a);
        EXPECT(gbc.pc(), 0xc80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0339
        gbc.setState(0x750c, 0x55b0, 0x8560, 0x7a38, 0xfc66, 0xfe81, 0x1, 0x1);
        gbc.writeMem(0x750c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x55b0);
        EXPECT(gbc.pc(), 0x750d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 033A
        gbc.setState(0xc127, 0xe805, 0x5a50, 0xe423, 0x5efd, 0xc061, 0x1, 0x0);
        gbc.writeMem(0xc127, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xe805);
        EXPECT(gbc.pc(), 0xc128);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc127), 0x6b);
        // 6B 033B
        gbc.setState(0x5e90, 0xf91c, 0xd520, 0xfe3, 0xb50c, 0x50ff, 0x0, 0x1);
        gbc.writeMem(0x5e90, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xf91c);
        EXPECT(gbc.pc(), 0x5e91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 033C
        gbc.setState(0x575b, 0xe7e3, 0xf300, 0xea73, 0xae43, 0xbf88, 0x1, 0x0);
        gbc.writeMem(0x575b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xe7e3);
        EXPECT(gbc.pc(), 0x575c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 033D
        gbc.setState(0x878b, 0xf1a0, 0xe60, 0xbb3a, 0x57e1, 0x9df9, 0x1, 0x0);
        gbc.writeMem(0x878b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xf1a0);
        EXPECT(gbc.pc(), 0x878c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x878b), 0x6b);
        // 6B 033E
        gbc.setState(0x7c99, 0x83dd, 0xbc40, 0x8c1d, 0x110b, 0x83e4, 0x0, 0x1);
        gbc.writeMem(0x7c99, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x83dd);
        EXPECT(gbc.pc(), 0x7c9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 033F
        gbc.setState(0x9ced, 0x9eb4, 0x74f0, 0xa648, 0xe3eb, 0xc40c, 0x1, 0x1);
        gbc.writeMem(0x9ced, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x9eb4);
        EXPECT(gbc.pc(), 0x9cee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ced), 0x6b);
        // 6B 0340
        gbc.setState(0x67ca, 0x2618, 0x790, 0x5065, 0x674d, 0x814d, 0x0, 0x0);
        gbc.writeMem(0x67ca, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x2618);
        EXPECT(gbc.pc(), 0x67cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0341
        gbc.setState(0x7fd2, 0x60e1, 0x96d0, 0xe116, 0xa991, 0x2258, 0x1, 0x1);
        gbc.writeMem(0x7fd2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x60e1);
        EXPECT(gbc.pc(), 0x7fd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0342
        gbc.setState(0xc603, 0x9ef0, 0x3050, 0x2331, 0x8a6f, 0x3f1, 0x0, 0x0);
        gbc.writeMem(0xc603, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x9ef0);
        EXPECT(gbc.pc(), 0xc604);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc603), 0x6b);
        // 6B 0344
        gbc.setState(0x5419, 0xdf81, 0x87f0, 0x9e33, 0x5e82, 0x2929, 0x1, 0x1);
        gbc.writeMem(0x5419, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xdf81);
        EXPECT(gbc.pc(), 0x541a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0345
        gbc.setState(0xad1c, 0x7df9, 0x5490, 0xf755, 0xed39, 0x627b, 0x1, 0x0);
        gbc.writeMem(0xad1c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x7df9);
        EXPECT(gbc.pc(), 0xad1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad1c), 0x6b);
        // 6B 0346
        gbc.setState(0x29a2, 0x3dbd, 0xbb60, 0x2210, 0x6a55, 0x7033, 0x0, 0x0);
        gbc.writeMem(0x29a2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x3dbd);
        EXPECT(gbc.pc(), 0x29a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0347
        gbc.setState(0x5153, 0x7ae5, 0x8180, 0x84ce, 0xaf11, 0xdf1f, 0x1, 0x1);
        gbc.writeMem(0x5153, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x7ae5);
        EXPECT(gbc.pc(), 0x5154);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0348
        gbc.setState(0x36c8, 0x8f6, 0x1c40, 0x9a, 0xa823, 0xa05b, 0x0, 0x1);
        gbc.writeMem(0x36c8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x8f6);
        EXPECT(gbc.pc(), 0x36c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0349
        gbc.setState(0x1c26, 0xadb7, 0x480, 0x254f, 0xca, 0xe347, 0x0, 0x1);
        gbc.writeMem(0x1c26, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xadb7);
        EXPECT(gbc.pc(), 0x1c27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 034A
        gbc.setState(0xb75, 0x8b96, 0x600, 0xd983, 0xc3d, 0xb1f9, 0x1, 0x0);
        gbc.writeMem(0xb75, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x8b96);
        EXPECT(gbc.pc(), 0xb76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 034B
        gbc.setState(0xdc04, 0xdc91, 0x91e0, 0x64f6, 0xe3a9, 0x4a73, 0x0, 0x1);
        gbc.writeMem(0xdc04, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xdc91);
        EXPECT(gbc.pc(), 0xdc05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc04), 0x6b);
        // 6B 034C
        gbc.setState(0xb54c, 0xc28c, 0x8840, 0x4576, 0x54bc, 0x5e10, 0x0, 0x0);
        gbc.writeMem(0xb54c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xc28c);
        EXPECT(gbc.pc(), 0xb54d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb54c), 0x6b);
        // 6B 034D
        gbc.setState(0x8891, 0xdcc5, 0x4c40, 0xa8d6, 0xcfb, 0xfe4d, 0x0, 0x1);
        gbc.writeMem(0x8891, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xdcc5);
        EXPECT(gbc.pc(), 0x8892);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8891), 0x6b);
        // 6B 034E
        gbc.setState(0xccba, 0x473b, 0x87c0, 0xa367, 0xcbb0, 0xd2e2, 0x0, 0x0);
        gbc.writeMem(0xccba, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x473b);
        EXPECT(gbc.pc(), 0xccbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccba), 0x6b);
        // 6B 034F
        gbc.setState(0x5808, 0x431, 0xa40, 0x7e96, 0x1afe, 0x70cb, 0x1, 0x1);
        gbc.writeMem(0x5808, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x431);
        EXPECT(gbc.pc(), 0x5809);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0350
        gbc.setState(0xe757, 0x2015, 0x7710, 0x3f1, 0xcf7f, 0x1e87, 0x0, 0x0);
        gbc.writeMem(0xe757, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x2015);
        EXPECT(gbc.pc(), 0xe758);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe757), 0x6b);
        // 6B 0352
        gbc.setState(0xd7f7, 0x3546, 0xc250, 0x147a, 0x379a, 0x500d, 0x0, 0x0);
        gbc.writeMem(0xd7f7, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x3546);
        EXPECT(gbc.pc(), 0xd7f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7f7), 0x6b);
        // 6B 0353
        gbc.setState(0x603a, 0x5ac3, 0xdb00, 0x1304, 0x143d, 0x2bc, 0x0, 0x0);
        gbc.writeMem(0x603a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x5ac3);
        EXPECT(gbc.pc(), 0x603b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0354
        gbc.setState(0x28d1, 0x4283, 0x4720, 0x2d72, 0xcb2f, 0x95c8, 0x0, 0x0);
        gbc.writeMem(0x28d1, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x4283);
        EXPECT(gbc.pc(), 0x28d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0355
        gbc.setState(0xc7fc, 0xfa56, 0xab30, 0x2c92, 0xa13a, 0xb733, 0x0, 0x0);
        gbc.writeMem(0xc7fc, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xfa56);
        EXPECT(gbc.pc(), 0xc7fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7fc), 0x6b);
        // 6B 0358
        gbc.setState(0x3605, 0x2a76, 0x75e0, 0xdb35, 0x2263, 0xd17d, 0x0, 0x1);
        gbc.writeMem(0x3605, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x2a76);
        EXPECT(gbc.pc(), 0x3606);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0359
        gbc.setState(0x1b9f, 0x9c10, 0x8660, 0x7a80, 0x3afa, 0xabfa, 0x0, 0x1);
        gbc.writeMem(0x1b9f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x9c10);
        EXPECT(gbc.pc(), 0x1ba0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 035A
        gbc.setState(0x6da5, 0x7628, 0x2860, 0x399e, 0xd00c, 0x51fb, 0x1, 0x1);
        gbc.writeMem(0x6da5, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x7628);
        EXPECT(gbc.pc(), 0x6da6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 035B
        gbc.setState(0xac23, 0x2bb1, 0x8f30, 0x7beb, 0xe8cd, 0x75b2, 0x1, 0x0);
        gbc.writeMem(0xac23, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x2bb1);
        EXPECT(gbc.pc(), 0xac24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac23), 0x6b);
        // 6B 035C
        gbc.setState(0xbed5, 0xea84, 0xb670, 0xdbf5, 0x268, 0xaaee, 0x0, 0x1);
        gbc.writeMem(0xbed5, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xea84);
        EXPECT(gbc.pc(), 0xbed6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbed5), 0x6b);
        // 6B 035D
        gbc.setState(0xec23, 0xf7c, 0x1030, 0xd854, 0xddb7, 0xd31e, 0x0, 0x0);
        gbc.writeMem(0xec23, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xf7c);
        EXPECT(gbc.pc(), 0xec24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec23), 0x6b);
        // 6B 035E
        gbc.setState(0x28ac, 0x92c6, 0x10, 0xa950, 0x8ec3, 0x3532, 0x1, 0x1);
        gbc.writeMem(0x28ac, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x92c6);
        EXPECT(gbc.pc(), 0x28ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 035F
        gbc.setState(0x8824, 0xb404, 0x7230, 0xb59c, 0x9d2e, 0xd4f2, 0x0, 0x0);
        gbc.writeMem(0x8824, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xb404);
        EXPECT(gbc.pc(), 0x8825);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8824), 0x6b);
        // 6B 0360
        gbc.setState(0x6b5e, 0x788, 0xd1c0, 0xe466, 0x5685, 0xae71, 0x0, 0x0);
        gbc.writeMem(0x6b5e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x788);
        EXPECT(gbc.pc(), 0x6b5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0361
        gbc.setState(0xc5b9, 0xcba0, 0xea00, 0x815c, 0x6cdb, 0xe3fe, 0x0, 0x1);
        gbc.writeMem(0xc5b9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xcba0);
        EXPECT(gbc.pc(), 0xc5ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5b9), 0x6b);
        // 6B 0362
        gbc.setState(0x2ca6, 0xde95, 0xb090, 0x3e96, 0xdea9, 0x49f8, 0x1, 0x0);
        gbc.writeMem(0x2ca6, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xde95);
        EXPECT(gbc.pc(), 0x2ca7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0363
        gbc.setState(0x2a03, 0xe5d2, 0x8240, 0xbcb1, 0xd98b, 0x49c9, 0x0, 0x0);
        gbc.writeMem(0x2a03, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xe5d2);
        EXPECT(gbc.pc(), 0x2a04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0364
        gbc.setState(0x7220, 0x74d0, 0x2b30, 0xe45f, 0xc9cd, 0x82b1, 0x1, 0x0);
        gbc.writeMem(0x7220, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x74d0);
        EXPECT(gbc.pc(), 0x7221);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0365
        gbc.setState(0x4f61, 0xcbd8, 0xef00, 0x40b, 0x717f, 0x6e1, 0x1, 0x1);
        gbc.writeMem(0x4f61, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xcbd8);
        EXPECT(gbc.pc(), 0x4f62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0366
        gbc.setState(0x594c, 0xfee6, 0x55f0, 0x73d6, 0xd449, 0x739b, 0x0, 0x0);
        gbc.writeMem(0x594c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xfee6);
        EXPECT(gbc.pc(), 0x594d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0367
        gbc.setState(0x9272, 0xb051, 0xeb00, 0x2f43, 0x9ff4, 0x6abb, 0x0, 0x1);
        gbc.writeMem(0x9272, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xb051);
        EXPECT(gbc.pc(), 0x9273);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9272), 0x6b);
        // 6B 0368
        gbc.setState(0x76b4, 0x521b, 0x1b70, 0x30c0, 0x6d88, 0x45da, 0x1, 0x0);
        gbc.writeMem(0x76b4, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x521b);
        EXPECT(gbc.pc(), 0x76b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 0369
        gbc.setState(0xea42, 0xb4a0, 0xff00, 0x47ed, 0xd8ff, 0x4c4c, 0x0, 0x1);
        gbc.writeMem(0xea42, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xb4a0);
        EXPECT(gbc.pc(), 0xea43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea42), 0x6b);
        // 6B 036A
        gbc.setState(0xeb22, 0xee96, 0xd0c0, 0xd5e7, 0x8b20, 0xd164, 0x1, 0x0);
        gbc.writeMem(0xeb22, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xee96);
        EXPECT(gbc.pc(), 0xeb23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb22), 0x6b);
        // 6B 036B
        gbc.setState(0x65e0, 0x7a19, 0xdc00, 0xf150, 0xeb40, 0xbaf0, 0x1, 0x1);
        gbc.writeMem(0x65e0, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x7a19);
        EXPECT(gbc.pc(), 0x65e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 036C
        gbc.setState(0x23e0, 0xeb5e, 0x8520, 0xfbb6, 0xbd21, 0xa22b, 0x0, 0x0);
        gbc.writeMem(0x23e0, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xeb5e);
        EXPECT(gbc.pc(), 0x23e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 036D
        gbc.setState(0xd1bb, 0xbf36, 0x65c0, 0xddb8, 0x22dc, 0x67a7, 0x1, 0x1);
        gbc.writeMem(0xd1bb, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xbf36);
        EXPECT(gbc.pc(), 0xd1bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1bb), 0x6b);
        // 6B 036E
        gbc.setState(0xe321, 0x660c, 0xd8e0, 0x7f09, 0xa1b8, 0x1735, 0x1, 0x0);
        gbc.writeMem(0xe321, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x660c);
        EXPECT(gbc.pc(), 0xe322);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe321), 0x6b);
        // 6B 036F
        gbc.setState(0xe0f7, 0x843e, 0x97b0, 0x81ab, 0x9b7, 0xbdc1, 0x1, 0x1);
        gbc.writeMem(0xe0f7, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x843e);
        EXPECT(gbc.pc(), 0xe0f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0f7), 0x6b);
        // 6B 0370
        gbc.setState(0x8c5c, 0x2a13, 0xd0, 0x6aa9, 0x8902, 0xb90f, 0x0, 0x0);
        gbc.writeMem(0x8c5c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x2a13);
        EXPECT(gbc.pc(), 0x8c5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c5c), 0x6b);
        // 6B 0371
        gbc.setState(0xc94b, 0x9bd2, 0xfa0, 0xeafb, 0x177f, 0x28fd, 0x0, 0x1);
        gbc.writeMem(0xc94b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x9bd2);
        EXPECT(gbc.pc(), 0xc94c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc94b), 0x6b);
        // 6B 0372
        gbc.setState(0x8060, 0x99b1, 0xe070, 0xfb6e, 0x1f24, 0x8651, 0x0, 0x0);
        gbc.writeMem(0x8060, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x99b1);
        EXPECT(gbc.pc(), 0x8061);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8060), 0x6b);
        // 6B 0373
        gbc.setState(0xeaeb, 0xa33b, 0x6770, 0x2761, 0xea0e, 0xc7c, 0x0, 0x0);
        gbc.writeMem(0xeaeb, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xa33b);
        EXPECT(gbc.pc(), 0xeaec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeaeb), 0x6b);
        // 6B 0374
        gbc.setState(0x38cb, 0x5feb, 0x3d00, 0x935c, 0x5256, 0x7538, 0x1, 0x0);
        gbc.writeMem(0x38cb, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x5feb);
        EXPECT(gbc.pc(), 0x38cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0375
        gbc.setState(0xd349, 0x1cf2, 0xd250, 0x5e24, 0xd044, 0x16b4, 0x0, 0x1);
        gbc.writeMem(0xd349, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x1cf2);
        EXPECT(gbc.pc(), 0xd34a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd349), 0x6b);
        // 6B 0376
        gbc.setState(0x3f90, 0x28c, 0x5400, 0xd37a, 0x728, 0xc132, 0x0, 0x1);
        gbc.writeMem(0x3f90, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x28c);
        EXPECT(gbc.pc(), 0x3f91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0377
        gbc.setState(0x37ec, 0xf0d4, 0x6de0, 0xf2f6, 0x849f, 0x3680, 0x0, 0x0);
        gbc.writeMem(0x37ec, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xf0d4);
        EXPECT(gbc.pc(), 0x37ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0378
        gbc.setState(0x8c8e, 0x5986, 0x5c60, 0xb126, 0x60a6, 0x2442, 0x0, 0x1);
        gbc.writeMem(0x8c8e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x5986);
        EXPECT(gbc.pc(), 0x8c8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c8e), 0x6b);
        // 6B 0379
        gbc.setState(0xbae1, 0x68d, 0x1540, 0x69ba, 0x83f4, 0xd005, 0x1, 0x0);
        gbc.writeMem(0xbae1, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x68d);
        EXPECT(gbc.pc(), 0xbae2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbae1), 0x6b);
        // 6B 037A
        gbc.setState(0x14f7, 0x1469, 0xc990, 0xe824, 0x7e4d, 0x2587, 0x1, 0x0);
        gbc.writeMem(0x14f7, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1469);
        EXPECT(gbc.pc(), 0x14f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 037B
        gbc.setState(0xeaf9, 0x1f4b, 0xcd60, 0x12d, 0x7276, 0x9645, 0x0, 0x0);
        gbc.writeMem(0xeaf9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x1f4b);
        EXPECT(gbc.pc(), 0xeafa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaf9), 0x6b);
        // 6B 037C
        gbc.setState(0xc3b0, 0x503d, 0x8890, 0x42f9, 0x2df3, 0x63bb, 0x0, 0x0);
        gbc.writeMem(0xc3b0, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x503d);
        EXPECT(gbc.pc(), 0xc3b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3b0), 0x6b);
        // 6B 037D
        gbc.setState(0x9fc2, 0xea76, 0x4df0, 0x59c3, 0xcb4c, 0xa719, 0x1, 0x1);
        gbc.writeMem(0x9fc2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xea76);
        EXPECT(gbc.pc(), 0x9fc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fc2), 0x6b);
        // 6B 037E
        gbc.setState(0x3295, 0xe517, 0x230, 0xb52c, 0x457f, 0xa1b4, 0x1, 0x0);
        gbc.writeMem(0x3295, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xe517);
        EXPECT(gbc.pc(), 0x3296);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 037F
        gbc.setState(0x59bf, 0x7d20, 0xa960, 0x3dfa, 0x9cf5, 0x363f, 0x0, 0x1);
        gbc.writeMem(0x59bf, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x7d20);
        EXPECT(gbc.pc(), 0x59c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0380
        gbc.setState(0x84f7, 0x2ad5, 0x3850, 0xc5a7, 0x291f, 0xe0a, 0x1, 0x1);
        gbc.writeMem(0x84f7, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x2ad5);
        EXPECT(gbc.pc(), 0x84f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84f7), 0x6b);
        // 6B 0381
        gbc.setState(0x3316, 0x95ed, 0xc320, 0x9e41, 0xb13c, 0x1de, 0x1, 0x0);
        gbc.writeMem(0x3316, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x95ed);
        EXPECT(gbc.pc(), 0x3317);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0382
        gbc.setState(0x832c, 0x9150, 0x680, 0x46b2, 0x5b67, 0x4d57, 0x1, 0x0);
        gbc.writeMem(0x832c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x9150);
        EXPECT(gbc.pc(), 0x832d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x832c), 0x6b);
        // 6B 0383
        gbc.setState(0xe39c, 0x37f9, 0xeb80, 0xa8f8, 0x67ed, 0xf494, 0x0, 0x0);
        gbc.writeMem(0xe39c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x37f9);
        EXPECT(gbc.pc(), 0xe39d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe39c), 0x6b);
        // 6B 0384
        gbc.setState(0xb0e6, 0x7598, 0xe440, 0x7553, 0x41f4, 0xdcd, 0x0, 0x0);
        gbc.writeMem(0xb0e6, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x7598);
        EXPECT(gbc.pc(), 0xb0e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0e6), 0x6b);
        // 6B 0386
        gbc.setState(0x9f61, 0x8cf6, 0x2630, 0x7e9e, 0x4adb, 0xeb4e, 0x0, 0x1);
        gbc.writeMem(0x9f61, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x8cf6);
        EXPECT(gbc.pc(), 0x9f62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f61), 0x6b);
        // 6B 0387
        gbc.setState(0x69e5, 0x8d5, 0x7680, 0x64b5, 0x652, 0xa87, 0x0, 0x1);
        gbc.writeMem(0x69e5, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x8d5);
        EXPECT(gbc.pc(), 0x69e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0389
        gbc.setState(0xc949, 0x858d, 0xb8d0, 0x938e, 0x6171, 0xb406, 0x0, 0x0);
        gbc.writeMem(0xc949, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x858d);
        EXPECT(gbc.pc(), 0xc94a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc949), 0x6b);
        // 6B 038A
        gbc.setState(0xba6d, 0xf132, 0xb4b0, 0xc022, 0xf232, 0x378d, 0x0, 0x0);
        gbc.writeMem(0xba6d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xf132);
        EXPECT(gbc.pc(), 0xba6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba6d), 0x6b);
        // 6B 038B
        gbc.setState(0xe489, 0x8d0a, 0x8500, 0x7b14, 0xb3c1, 0xdc17, 0x0, 0x1);
        gbc.writeMem(0xe489, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x8d0a);
        EXPECT(gbc.pc(), 0xe48a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe489), 0x6b);
        // 6B 038C
        gbc.setState(0x973d, 0x53c, 0xf090, 0x81cd, 0xed7c, 0xbc29, 0x0, 0x0);
        gbc.writeMem(0x973d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x53c);
        EXPECT(gbc.pc(), 0x973e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x973d), 0x6b);
        // 6B 038D
        gbc.setState(0x29cd, 0x978c, 0x4720, 0xfb4f, 0xee8, 0xe124, 0x0, 0x0);
        gbc.writeMem(0x29cd, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x978c);
        EXPECT(gbc.pc(), 0x29ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 038F
        gbc.setState(0x82b2, 0xfd1d, 0x7290, 0xbe57, 0x8e6f, 0x9c60, 0x0, 0x1);
        gbc.writeMem(0x82b2, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xfd1d);
        EXPECT(gbc.pc(), 0x82b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82b2), 0x6b);
        // 6B 0390
        gbc.setState(0x5089, 0x15d4, 0xd390, 0x6f15, 0xaf5c, 0x14cf, 0x1, 0x0);
        gbc.writeMem(0x5089, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x15d4);
        EXPECT(gbc.pc(), 0x508a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 0391
        gbc.setState(0x4b8e, 0x457f, 0x8e60, 0xc613, 0xa2b0, 0x88c4, 0x0, 0x0);
        gbc.writeMem(0x4b8e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x457f);
        EXPECT(gbc.pc(), 0x4b8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 0392
        gbc.setState(0xdec1, 0xbb9e, 0xb930, 0x2f76, 0x339f, 0xf2d8, 0x0, 0x1);
        gbc.writeMem(0xdec1, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xbb9e);
        EXPECT(gbc.pc(), 0xdec2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdec1), 0x6b);
        // 6B 0393
        gbc.setState(0x7852, 0x6a68, 0x7380, 0x421b, 0x9c08, 0xf883, 0x1, 0x1);
        gbc.writeMem(0x7852, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6a68);
        EXPECT(gbc.pc(), 0x7853);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 0394
        gbc.setState(0xa01b, 0xb8f0, 0x7420, 0xaeae, 0x33c1, 0x3110, 0x0, 0x0);
        gbc.writeMem(0xa01b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xb8f0);
        EXPECT(gbc.pc(), 0xa01c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa01b), 0x6b);
        // 6B 0395
        gbc.setState(0xc65a, 0xb90b, 0xab30, 0x8955, 0xfc12, 0xdc70, 0x1, 0x1);
        gbc.writeMem(0xc65a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xb90b);
        EXPECT(gbc.pc(), 0xc65b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc65a), 0x6b);
        // 6B 0397
        gbc.setState(0xc6e1, 0x1df3, 0x2160, 0xbad0, 0xb3a9, 0x2209, 0x1, 0x1);
        gbc.writeMem(0xc6e1, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x1df3);
        EXPECT(gbc.pc(), 0xc6e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6e1), 0x6b);
        // 6B 0398
        gbc.setState(0xaf0e, 0xb7ce, 0x6c0, 0xc5d0, 0xed0c, 0x6f35, 0x1, 0x0);
        gbc.writeMem(0xaf0e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xb7ce);
        EXPECT(gbc.pc(), 0xaf0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf0e), 0x6b);
        // 6B 0399
        gbc.setState(0x6629, 0xb1de, 0xe0c0, 0x39b6, 0x214f, 0x6cba, 0x0, 0x1);
        gbc.writeMem(0x6629, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xb1de);
        EXPECT(gbc.pc(), 0x662a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 039A
        gbc.setState(0x5a3b, 0x4ad1, 0x5a30, 0x150f, 0x6adc, 0x2c13, 0x0, 0x0);
        gbc.writeMem(0x5a3b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x4ad1);
        EXPECT(gbc.pc(), 0x5a3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 039B
        gbc.setState(0xab21, 0xe8da, 0x4d30, 0x35ba, 0xe019, 0x5b6f, 0x0, 0x0);
        gbc.writeMem(0xab21, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe8da);
        EXPECT(gbc.pc(), 0xab22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab21), 0x6b);
        // 6B 039C
        gbc.setState(0x9e61, 0x61cd, 0x65f0, 0x2d25, 0x82cd, 0x2c1e, 0x1, 0x1);
        gbc.writeMem(0x9e61, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x61cd);
        EXPECT(gbc.pc(), 0x9e62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e61), 0x6b);
        // 6B 039D
        gbc.setState(0x258d, 0x6a77, 0x4c10, 0xd394, 0x11ff, 0xf148, 0x0, 0x0);
        gbc.writeMem(0x258d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x6a77);
        EXPECT(gbc.pc(), 0x258e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 039E
        gbc.setState(0xb5b6, 0x35, 0x5a50, 0xb1ba, 0x1303, 0x29f, 0x0, 0x0);
        gbc.writeMem(0xb5b6, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x35);
        EXPECT(gbc.pc(), 0xb5b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5b6), 0x6b);
        // 6B 03A0
        gbc.setState(0x258c, 0x11e8, 0x1f70, 0x6a7b, 0x8438, 0xa84f, 0x0, 0x1);
        gbc.writeMem(0x258c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x11e8);
        EXPECT(gbc.pc(), 0x258d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 03A1
        gbc.setState(0x275, 0x8dcd, 0x6c80, 0x931b, 0x36db, 0x11de, 0x1, 0x0);
        gbc.writeMem(0x275, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x8dcd);
        EXPECT(gbc.pc(), 0x276);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 03A2
        gbc.setState(0xd39a, 0x255c, 0xf320, 0x3e5a, 0x686e, 0x2d0c, 0x0, 0x1);
        gbc.writeMem(0xd39a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x255c);
        EXPECT(gbc.pc(), 0xd39b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd39a), 0x6b);
        // 6B 03A3
        gbc.setState(0xb9a0, 0x33d5, 0xd8b0, 0x311a, 0x75c3, 0x6c55, 0x0, 0x1);
        gbc.writeMem(0xb9a0, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x33d5);
        EXPECT(gbc.pc(), 0xb9a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9a0), 0x6b);
        // 6B 03A4
        gbc.setState(0xee0b, 0xb92, 0x37d0, 0x6c4e, 0xe8d6, 0xc45b, 0x0, 0x0);
        gbc.writeMem(0xee0b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xb92);
        EXPECT(gbc.pc(), 0xee0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee0b), 0x6b);
        // 6B 03A5
        gbc.setState(0x9cdd, 0x9b75, 0xce20, 0x9582, 0x90dc, 0xde4b, 0x1, 0x0);
        gbc.writeMem(0x9cdd, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x9b75);
        EXPECT(gbc.pc(), 0x9cde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cdd), 0x6b);
        // 6B 03A6
        gbc.setState(0xcf3f, 0xd652, 0x6d0, 0x3b79, 0x4a70, 0x358, 0x0, 0x1);
        gbc.writeMem(0xcf3f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xd652);
        EXPECT(gbc.pc(), 0xcf40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf3f), 0x6b);
        // 6B 03A7
        gbc.setState(0x7ba0, 0x2336, 0x2b0, 0xca73, 0x442b, 0xdce5, 0x0, 0x0);
        gbc.writeMem(0x7ba0, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x2336);
        EXPECT(gbc.pc(), 0x7ba1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 03A8
        gbc.setState(0x271, 0x6f95, 0x4d70, 0x2a6b, 0x6d6b, 0xf76, 0x1, 0x1);
        gbc.writeMem(0x271, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x6f95);
        EXPECT(gbc.pc(), 0x272);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 03A9
        gbc.setState(0x70a3, 0xe523, 0xe920, 0x412a, 0x9287, 0x6238, 0x1, 0x0);
        gbc.writeMem(0x70a3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xe523);
        EXPECT(gbc.pc(), 0x70a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 03AA
        gbc.setState(0xd7f9, 0xa13d, 0x36f0, 0x16fb, 0x5495, 0x2c83, 0x0, 0x1);
        gbc.writeMem(0xd7f9, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa13d);
        EXPECT(gbc.pc(), 0xd7fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7f9), 0x6b);
        // 6B 03AB
        gbc.setState(0x1d5f, 0x67ce, 0x9ef0, 0xd553, 0xb3, 0x4375, 0x0, 0x0);
        gbc.writeMem(0x1d5f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x67ce);
        EXPECT(gbc.pc(), 0x1d60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 03AC
        gbc.setState(0x829e, 0xae8d, 0xf5e0, 0x573a, 0xf440, 0xe9e4, 0x0, 0x1);
        gbc.writeMem(0x829e, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xae8d);
        EXPECT(gbc.pc(), 0x829f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x829e), 0x6b);
        // 6B 03AD
        gbc.setState(0xbaa1, 0xe6ae, 0x8080, 0xb63b, 0x9a8b, 0x7d7b, 0x1, 0x1);
        gbc.writeMem(0xbaa1, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xe6ae);
        EXPECT(gbc.pc(), 0xbaa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaa1), 0x6b);
        // 6B 03AE
        gbc.setState(0xa364, 0xbf55, 0x5a00, 0x574f, 0x7764, 0x9d8a, 0x1, 0x1);
        gbc.writeMem(0xa364, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xbf55);
        EXPECT(gbc.pc(), 0xa365);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa364), 0x6b);
        // 6B 03AF
        gbc.setState(0xbcc8, 0x2c9c, 0xc6b0, 0xf802, 0x7f38, 0xe0b3, 0x1, 0x1);
        gbc.writeMem(0xbcc8, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x2c9c);
        EXPECT(gbc.pc(), 0xbcc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcc8), 0x6b);
        // 6B 03B1
        gbc.setState(0x1d84, 0xed22, 0x5110, 0x6bc4, 0x8d1e, 0xffa8, 0x1, 0x1);
        gbc.writeMem(0x1d84, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xed22);
        EXPECT(gbc.pc(), 0x1d85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 03B2
        gbc.setState(0xc3f1, 0xe13e, 0x1180, 0x4b32, 0x839a, 0xa993, 0x1, 0x1);
        gbc.writeMem(0xc3f1, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xe13e);
        EXPECT(gbc.pc(), 0xc3f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3f1), 0x6b);
        // 6B 03B3
        gbc.setState(0xb6ef, 0x5def, 0xd660, 0xd092, 0x5fe1, 0xbba1, 0x0, 0x1);
        gbc.writeMem(0xb6ef, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5def);
        EXPECT(gbc.pc(), 0xb6f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6ef), 0x6b);
        // 6B 03B4
        gbc.setState(0x9280, 0xeca0, 0x47a0, 0x3c2, 0xd055, 0x32a7, 0x0, 0x1);
        gbc.writeMem(0x9280, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xeca0);
        EXPECT(gbc.pc(), 0x9281);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9280), 0x6b);
        // 6B 03B5
        gbc.setState(0xdb2d, 0x3300, 0xc610, 0x1756, 0x2002, 0x68ea, 0x0, 0x0);
        gbc.writeMem(0xdb2d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x3300);
        EXPECT(gbc.pc(), 0xdb2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb2d), 0x6b);
        // 6B 03B6
        gbc.setState(0x885b, 0xda0b, 0x5bd0, 0x87c3, 0xccda, 0x5a2, 0x0, 0x1);
        gbc.writeMem(0x885b, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xda0b);
        EXPECT(gbc.pc(), 0x885c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x885b), 0x6b);
        // 6B 03B7
        gbc.setState(0x4618, 0x163c, 0x85f0, 0xfa00, 0x3c66, 0xf35, 0x0, 0x1);
        gbc.writeMem(0x4618, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x163c);
        EXPECT(gbc.pc(), 0x4619);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 03B8
        gbc.setState(0x7b9c, 0xdc57, 0x7260, 0xf912, 0x1564, 0xcccf, 0x0, 0x1);
        gbc.writeMem(0x7b9c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xdc57);
        EXPECT(gbc.pc(), 0x7b9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 03B9
        gbc.setState(0xa3b5, 0x2853, 0x470, 0x87a6, 0xc6a9, 0xa1b3, 0x1, 0x0);
        gbc.writeMem(0xa3b5, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x2853);
        EXPECT(gbc.pc(), 0xa3b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3b5), 0x6b);
        // 6B 03BA
        gbc.setState(0x700d, 0x7610, 0x2560, 0x4b8f, 0xa6c0, 0xed1a, 0x0, 0x1);
        gbc.writeMem(0x700d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x7610);
        EXPECT(gbc.pc(), 0x700e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 03BB
        gbc.setState(0x991f, 0x5623, 0x2870, 0x5276, 0x7377, 0x746, 0x1, 0x0);
        gbc.writeMem(0x991f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x5623);
        EXPECT(gbc.pc(), 0x9920);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x991f), 0x6b);
        // 6B 03BC
        gbc.setState(0x6910, 0xe34a, 0xbdc0, 0x59e2, 0x6b, 0x918, 0x1, 0x1);
        gbc.writeMem(0x6910, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xe34a);
        EXPECT(gbc.pc(), 0x6911);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 03BD
        gbc.setState(0x229, 0xea62, 0xb060, 0x96e6, 0x85a3, 0xa87d, 0x1, 0x1);
        gbc.writeMem(0x229, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xea62);
        EXPECT(gbc.pc(), 0x22a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 03BE
        gbc.setState(0x6f43, 0x2f63, 0xafb0, 0x7a1b, 0x4179, 0xd517, 0x0, 0x1);
        gbc.writeMem(0x6f43, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x2f63);
        EXPECT(gbc.pc(), 0x6f44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 03BF
        gbc.setState(0xf19, 0x9c2e, 0xe160, 0x479, 0x113f, 0xa294, 0x1, 0x0);
        gbc.writeMem(0xf19, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x9c2e);
        EXPECT(gbc.pc(), 0xf1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 03C0
        gbc.setState(0xe986, 0x4a18, 0x7ed0, 0xf1c3, 0x44e, 0x1189, 0x0, 0x0);
        gbc.writeMem(0xe986, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x4a18);
        EXPECT(gbc.pc(), 0xe987);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe986), 0x6b);
        // 6B 03C1
        gbc.setState(0x833d, 0xa3a, 0x9cb0, 0x1c4, 0xf4b9, 0x4e6e, 0x1, 0x1);
        gbc.writeMem(0x833d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xa3a);
        EXPECT(gbc.pc(), 0x833e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x833d), 0x6b);
        // 6B 03C2
        gbc.setState(0x238d, 0xd026, 0xb40, 0xe363, 0x9c2d, 0x5633, 0x1, 0x1);
        gbc.writeMem(0x238d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xd026);
        EXPECT(gbc.pc(), 0x238e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 03C3
        gbc.setState(0x6689, 0xb7e4, 0xb770, 0xc55, 0x647, 0x28c4, 0x1, 0x1);
        gbc.writeMem(0x6689, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xb7e4);
        EXPECT(gbc.pc(), 0x668a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 03C4
        gbc.setState(0x9bbe, 0xa978, 0x3fa0, 0x91, 0xdf34, 0x1039, 0x0, 0x0);
        gbc.writeMem(0x9bbe, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xa978);
        EXPECT(gbc.pc(), 0x9bbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bbe), 0x6b);
        // 6B 03C6
        gbc.setState(0x7056, 0xebe4, 0x9d00, 0xb649, 0x1e9b, 0xee14, 0x1, 0x0);
        gbc.writeMem(0x7056, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xebe4);
        EXPECT(gbc.pc(), 0x7057);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 03C7
        gbc.setState(0xeddc, 0x146, 0x2c60, 0x9a35, 0x3b80, 0x3e47, 0x0, 0x1);
        gbc.writeMem(0xeddc, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x146);
        EXPECT(gbc.pc(), 0xeddd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeddc), 0x6b);
        // 6B 03C8
        gbc.setState(0x3c33, 0x20c8, 0x2510, 0xc3a, 0xe87, 0x50b2, 0x1, 0x1);
        gbc.writeMem(0x3c33, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x20c8);
        EXPECT(gbc.pc(), 0x3c34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 03C9
        gbc.setState(0xaa69, 0xe6d6, 0x820, 0x2660, 0xb270, 0xdddd, 0x0, 0x1);
        gbc.writeMem(0xaa69, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xe6d6);
        EXPECT(gbc.pc(), 0xaa6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa69), 0x6b);
        // 6B 03CA
        gbc.setState(0x4a70, 0x540, 0xebb0, 0x3311, 0xdc79, 0x85d8, 0x1, 0x0);
        gbc.writeMem(0x4a70, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x540);
        EXPECT(gbc.pc(), 0x4a71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 03CB
        gbc.setState(0x2393, 0xcbc9, 0x2df0, 0xbaa1, 0xd120, 0xc64a, 0x0, 0x1);
        gbc.writeMem(0x2393, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xcbc9);
        EXPECT(gbc.pc(), 0x2394);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 03CC
        gbc.setState(0x2a88, 0x1929, 0x6ec0, 0x44c5, 0xc8fa, 0xfebd, 0x0, 0x0);
        gbc.writeMem(0x2a88, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x1929);
        EXPECT(gbc.pc(), 0x2a89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 03CD
        gbc.setState(0x7724, 0xb380, 0xb2f0, 0xce26, 0x21af, 0xc67f, 0x1, 0x0);
        gbc.writeMem(0x7724, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xb380);
        EXPECT(gbc.pc(), 0x7725);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 03CE
        gbc.setState(0x5b13, 0xb652, 0x7ec0, 0x736d, 0x8fc2, 0x63f, 0x1, 0x1);
        gbc.writeMem(0x5b13, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xb652);
        EXPECT(gbc.pc(), 0x5b14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 6B 03CF
        gbc.setState(0xe0e3, 0xba6c, 0xf360, 0x1a4e, 0x8de5, 0x4272, 0x1, 0x0);
        gbc.writeMem(0xe0e3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xba6c);
        EXPECT(gbc.pc(), 0xe0e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0e3), 0x6b);
        // 6B 03D0
        gbc.setState(0x5111, 0xe7eb, 0x3f90, 0x3b00, 0x6ea4, 0xb4fa, 0x1, 0x1);
        gbc.writeMem(0x5111, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xe7eb);
        EXPECT(gbc.pc(), 0x5112);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 03D1
        gbc.setState(0xe531, 0xf1cf, 0x59e0, 0x3d0b, 0x5b04, 0xcc4c, 0x0, 0x0);
        gbc.writeMem(0xe531, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xf1cf);
        EXPECT(gbc.pc(), 0xe532);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe531), 0x6b);
        // 6B 03D2
        gbc.setState(0xc4aa, 0xf7a8, 0xcae0, 0xc119, 0xc9e8, 0x422a, 0x1, 0x0);
        gbc.writeMem(0xc4aa, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xf7a8);
        EXPECT(gbc.pc(), 0xc4ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4aa), 0x6b);
        // 6B 03D3
        gbc.setState(0xa745, 0xc268, 0xf590, 0x6fee, 0xcabc, 0xcbe3, 0x0, 0x0);
        gbc.writeMem(0xa745, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xc268);
        EXPECT(gbc.pc(), 0xa746);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa745), 0x6b);
        // 6B 03D4
        gbc.setState(0xa34a, 0x5e1a, 0x410, 0xea47, 0x3d32, 0x5f5a, 0x0, 0x1);
        gbc.writeMem(0xa34a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x5e1a);
        EXPECT(gbc.pc(), 0xa34b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa34a), 0x6b);
        // 6B 03D5
        gbc.setState(0x2412, 0x7902, 0x1290, 0x56d4, 0x56ec, 0xef3d, 0x1, 0x1);
        gbc.writeMem(0x2412, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x7902);
        EXPECT(gbc.pc(), 0x2413);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 03D6
        gbc.setState(0xd971, 0x9594, 0x6b10, 0x9ab9, 0x559e, 0x71ab, 0x1, 0x1);
        gbc.writeMem(0xd971, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x9594);
        EXPECT(gbc.pc(), 0xd972);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd971), 0x6b);
        // 6B 03D7
        gbc.setState(0x7ada, 0xb73a, 0x6fe0, 0xd257, 0x6570, 0xbe5f, 0x0, 0x1);
        gbc.writeMem(0x7ada, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xb73a);
        EXPECT(gbc.pc(), 0x7adb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 03D8
        gbc.setState(0xa035, 0x33c0, 0x100, 0x9755, 0xf97c, 0x6692, 0x1, 0x1);
        gbc.writeMem(0xa035, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x33c0);
        EXPECT(gbc.pc(), 0xa036);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa035), 0x6b);
        // 6B 03D9
        gbc.setState(0xbb34, 0x7b04, 0xb210, 0x975, 0x5211, 0xa192, 0x0, 0x1);
        gbc.writeMem(0xbb34, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x7b04);
        EXPECT(gbc.pc(), 0xbb35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb34), 0x6b);
        // 6B 03DA
        gbc.setState(0x265a, 0x6dfd, 0xcba0, 0x7c66, 0x6674, 0x2798, 0x1, 0x0);
        gbc.writeMem(0x265a, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x6dfd);
        EXPECT(gbc.pc(), 0x265b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 03DB
        gbc.setState(0x7d7, 0xb2bb, 0x5a90, 0xd324, 0xf5df, 0x232b, 0x0, 0x0);
        gbc.writeMem(0x7d7, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xb2bb);
        EXPECT(gbc.pc(), 0x7d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 03DC
        gbc.setState(0x9ee3, 0x7856, 0xcb10, 0x217, 0x4238, 0xbcd4, 0x1, 0x1);
        gbc.writeMem(0x9ee3, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x7856);
        EXPECT(gbc.pc(), 0x9ee4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ee3), 0x6b);
        // 6B 03DD
        gbc.setState(0xaf7f, 0x2c9, 0x2a0, 0x4b20, 0x6c7e, 0xe662, 0x0, 0x1);
        gbc.writeMem(0xaf7f, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x2c9);
        EXPECT(gbc.pc(), 0xaf80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf7f), 0x6b);
        // 6B 03DE
        gbc.setState(0xa462, 0xdb2f, 0xb620, 0x6213, 0xb66c, 0x1d52, 0x0, 0x0);
        gbc.writeMem(0xa462, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xdb2f);
        EXPECT(gbc.pc(), 0xa463);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa462), 0x6b);
        // 6B 03DF
        gbc.setState(0xd930, 0xce48, 0x1490, 0xb7ae, 0xcc85, 0x20d1, 0x0, 0x0);
        gbc.writeMem(0xd930, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xce48);
        EXPECT(gbc.pc(), 0xd931);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd930), 0x6b);
        // 6B 03E0
        gbc.setState(0x9c, 0xfad4, 0x3df0, 0x555b, 0xb653, 0x9e97, 0x0, 0x0);
        gbc.writeMem(0x9c, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xfad4);
        EXPECT(gbc.pc(), 0x9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 03E1
        gbc.setState(0x367d, 0xa3a5, 0xc2d0, 0xea6d, 0xe378, 0x6456, 0x1, 0x1);
        gbc.writeMem(0x367d, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xa3a5);
        EXPECT(gbc.pc(), 0x367e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 6B 03E2
        gbc.setState(0x3cb6, 0x5ebf, 0x8270, 0x7757, 0xb9aa, 0x115a, 0x1, 0x0);
        gbc.writeMem(0x3cb6, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x5ebf);
        EXPECT(gbc.pc(), 0x3cb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 03E3
        gbc.setState(0x76dd, 0x2d30, 0x16f0, 0xc4aa, 0x43a3, 0x1d17, 0x0, 0x1);
        gbc.writeMem(0x76dd, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x2d30);
        EXPECT(gbc.pc(), 0x76de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 6B 03E4
        gbc.setState(0xb9da, 0xdd13, 0x4230, 0xf3d2, 0x1f3d, 0x8bcb, 0x1, 0x1);
        gbc.writeMem(0xb9da, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xdd13);
        EXPECT(gbc.pc(), 0xb9db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9da), 0x6b);
        // 6B 03E5
        gbc.setState(0x6015, 0x8295, 0x60a0, 0xd6dd, 0x69d1, 0x9034, 0x1, 0x1);
        gbc.writeMem(0x6015, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x8295);
        EXPECT(gbc.pc(), 0x6016);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 6B 03E7
        gbc.setState(0x94ef, 0xb2d5, 0x9620, 0xcb47, 0x7d65, 0x59c, 0x1, 0x0);
        gbc.writeMem(0x94ef, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xb2d5);
        EXPECT(gbc.pc(), 0x94f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94ef), 0x6b);
    }
}
#endif
