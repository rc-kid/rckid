    TEST(gbcemu, opcode_cb_6b) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 6B 0000
        gbc.setState(0xb2c2, 0xb3e7, 0x1aa0, 0x83d4, 0x85a2, 0xe1cd, 0x0, 0x0);
        gbc.writeMem(0xb2c2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xb3e7);
        EXPECT(gbc.pc(), 0xb2c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2c2), 0xcb);
        EXPECT(gbc.readMem(0xb2c3), 0x6b);
        // CB 6B 0001
        gbc.setState(0x3e4d, 0x6c31, 0xe130, 0x63aa, 0xa34e, 0xd708, 0x1, 0x1);
        gbc.writeMem(0x3e4d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6c31);
        EXPECT(gbc.pc(), 0x3e4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0002
        gbc.setState(0x74a4, 0xb854, 0xf090, 0xc0ca, 0x2eff, 0x35c9, 0x1, 0x1);
        gbc.writeMem(0x74a4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xb854);
        EXPECT(gbc.pc(), 0x74a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0003
        gbc.setState(0x6235, 0x7d3a, 0xc40, 0x53e3, 0xc2d5, 0xd84b, 0x0, 0x1);
        gbc.writeMem(0x6235, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x7d3a);
        EXPECT(gbc.pc(), 0x6237);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0004
        gbc.setState(0x34af, 0xe49e, 0x4e00, 0xe38e, 0x386, 0x47ed, 0x1, 0x1);
        gbc.writeMem(0x34af, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe49e);
        EXPECT(gbc.pc(), 0x34b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0005
        gbc.setState(0x6c5a, 0xabaf, 0x91e0, 0x393f, 0xc727, 0x7873, 0x1, 0x1);
        gbc.writeMem(0x6c5a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xabaf);
        EXPECT(gbc.pc(), 0x6c5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0006
        gbc.setState(0x20cd, 0xefdd, 0xe70, 0xd8b2, 0x76fd, 0x4283, 0x0, 0x0);
        gbc.writeMem(0x20cd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xefdd);
        EXPECT(gbc.pc(), 0x20cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0007
        gbc.setState(0x792b, 0x3248, 0xe770, 0x4569, 0x130f, 0xf6e8, 0x0, 0x0);
        gbc.writeMem(0x792b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x3248);
        EXPECT(gbc.pc(), 0x792d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0008
        gbc.setState(0x4fdc, 0x934, 0xe20, 0xa994, 0xf31, 0xc134, 0x0, 0x0);
        gbc.writeMem(0x4fdc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x934);
        EXPECT(gbc.pc(), 0x4fde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0009
        gbc.setState(0x4a2f, 0x2f7f, 0xf220, 0xa666, 0x239a, 0x92b8, 0x1, 0x1);
        gbc.writeMem(0x4a2f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x2f7f);
        EXPECT(gbc.pc(), 0x4a31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 000A
        gbc.setState(0x6297, 0xf863, 0x62e0, 0x19ee, 0xc90c, 0xee95, 0x0, 0x0);
        gbc.writeMem(0x6297, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xf863);
        EXPECT(gbc.pc(), 0x6299);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 000B
        gbc.setState(0x9d5d, 0x53a9, 0xd320, 0x734c, 0x416, 0xebc8, 0x1, 0x0);
        gbc.writeMem(0x9d5d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x53a9);
        EXPECT(gbc.pc(), 0x9d5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d5d), 0xcb);
        EXPECT(gbc.readMem(0x9d5e), 0x6b);
        // CB 6B 000C
        gbc.setState(0xd7fe, 0x4851, 0x66b0, 0x141e, 0xa655, 0x28bb, 0x0, 0x0);
        gbc.writeMem(0xd7fe, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x4851);
        EXPECT(gbc.pc(), 0xd800);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7fe), 0xcb);
        EXPECT(gbc.readMem(0xd7ff), 0x6b);
        // CB 6B 000D
        gbc.setState(0xace5, 0x8955, 0x6d0, 0xd6af, 0x6761, 0xad0e, 0x0, 0x1);
        gbc.writeMem(0xace5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x8955);
        EXPECT(gbc.pc(), 0xace7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xace5), 0xcb);
        EXPECT(gbc.readMem(0xace6), 0x6b);
        // CB 6B 000E
        gbc.setState(0x6c15, 0x621b, 0x130, 0xe22b, 0xfd82, 0x7717, 0x0, 0x1);
        gbc.writeMem(0x6c15, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x621b);
        EXPECT(gbc.pc(), 0x6c17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 000F
        gbc.setState(0x8f0b, 0x4b67, 0x500, 0x5b5b, 0x8022, 0x53c6, 0x0, 0x1);
        gbc.writeMem(0x8f0b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x4b67);
        EXPECT(gbc.pc(), 0x8f0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f0b), 0xcb);
        EXPECT(gbc.readMem(0x8f0c), 0x6b);
        // CB 6B 0010
        gbc.setState(0xa394, 0x766c, 0x93c0, 0x689, 0xa223, 0xc536, 0x1, 0x0);
        gbc.writeMem(0xa394, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x766c);
        EXPECT(gbc.pc(), 0xa396);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa394), 0xcb);
        EXPECT(gbc.readMem(0xa395), 0x6b);
        // CB 6B 0011
        gbc.setState(0x22dd, 0x21eb, 0x1190, 0xa37, 0xf533, 0x1493, 0x1, 0x0);
        gbc.writeMem(0x22dd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x21eb);
        EXPECT(gbc.pc(), 0x22df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0012
        gbc.setState(0x521c, 0x14bf, 0xaa00, 0x3457, 0x499a, 0x6cf, 0x1, 0x1);
        gbc.writeMem(0x521c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x14bf);
        EXPECT(gbc.pc(), 0x521e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0013
        gbc.setState(0xafed, 0x3389, 0xdd20, 0x825f, 0x64fc, 0x8766, 0x0, 0x0);
        gbc.writeMem(0xafed, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x3389);
        EXPECT(gbc.pc(), 0xafef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafed), 0xcb);
        EXPECT(gbc.readMem(0xafee), 0x6b);
        // CB 6B 0014
        gbc.setState(0x7e87, 0x5096, 0x4450, 0x30da, 0xcf36, 0xbc91, 0x1, 0x0);
        gbc.writeMem(0x7e87, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x5096);
        EXPECT(gbc.pc(), 0x7e89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0015
        gbc.setState(0x9237, 0x6b2b, 0xe8c0, 0x9494, 0x21d, 0x4ff, 0x1, 0x0);
        gbc.writeMem(0x9237, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x6b2b);
        EXPECT(gbc.pc(), 0x9239);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9237), 0xcb);
        EXPECT(gbc.readMem(0x9238), 0x6b);
        // CB 6B 0016
        gbc.setState(0xbbb0, 0xa761, 0x37a0, 0xfe75, 0x5299, 0xe7e3, 0x0, 0x0);
        gbc.writeMem(0xbbb0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xa761);
        EXPECT(gbc.pc(), 0xbbb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbb0), 0xcb);
        EXPECT(gbc.readMem(0xbbb1), 0x6b);
        // CB 6B 0018
        gbc.setState(0x363f, 0x97bf, 0xe8b0, 0x2f7b, 0x7409, 0x123, 0x1, 0x1);
        gbc.writeMem(0x363f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x97bf);
        EXPECT(gbc.pc(), 0x3641);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0019
        gbc.setState(0x7e7c, 0xddd7, 0xe8c0, 0xcfa0, 0xee8c, 0xd047, 0x1, 0x0);
        gbc.writeMem(0x7e7c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xddd7);
        EXPECT(gbc.pc(), 0x7e7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 001A
        gbc.setState(0x4782, 0xccd9, 0xede0, 0x1675, 0x4498, 0xa871, 0x1, 0x1);
        gbc.writeMem(0x4782, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xccd9);
        EXPECT(gbc.pc(), 0x4784);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 001B
        gbc.setState(0x9d1d, 0xddfb, 0xdcc0, 0xb5e3, 0xdb0f, 0xeafb, 0x1, 0x1);
        gbc.writeMem(0x9d1d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xddfb);
        EXPECT(gbc.pc(), 0x9d1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d1d), 0xcb);
        EXPECT(gbc.readMem(0x9d1e), 0x6b);
        // CB 6B 001C
        gbc.setState(0xdd54, 0x6635, 0x95e0, 0x761a, 0xb03c, 0x88fd, 0x1, 0x0);
        gbc.writeMem(0xdd54, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x6635);
        EXPECT(gbc.pc(), 0xdd56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd54), 0xcb);
        EXPECT(gbc.readMem(0xdd55), 0x6b);
        // CB 6B 001D
        gbc.setState(0xb24f, 0xdb15, 0x8750, 0xe181, 0x97aa, 0x5d6d, 0x1, 0x0);
        gbc.writeMem(0xb24f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xdb15);
        EXPECT(gbc.pc(), 0xb251);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb24f), 0xcb);
        EXPECT(gbc.readMem(0xb250), 0x6b);
        // CB 6B 001E
        gbc.setState(0xe414, 0x4f7b, 0xc30, 0xa475, 0xa1ca, 0x5a07, 0x0, 0x1);
        gbc.writeMem(0xe414, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x4f7b);
        EXPECT(gbc.pc(), 0xe416);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe414), 0xcb);
        EXPECT(gbc.readMem(0xe415), 0x6b);
        // CB 6B 001F
        gbc.setState(0x1997, 0x99f7, 0x9b60, 0x1976, 0x2741, 0x2b5f, 0x0, 0x0);
        gbc.writeMem(0x1997, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x99f7);
        EXPECT(gbc.pc(), 0x1999);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0020
        gbc.setState(0x1059, 0x269f, 0xf950, 0x4849, 0x6763, 0xef3, 0x0, 0x0);
        gbc.writeMem(0x1059, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x269f);
        EXPECT(gbc.pc(), 0x105b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0021
        gbc.setState(0xd90d, 0xb0d0, 0x6700, 0xa21c, 0xd3d6, 0x8e19, 0x0, 0x0);
        gbc.writeMem(0xd90d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xb0d0);
        EXPECT(gbc.pc(), 0xd90f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd90d), 0xcb);
        EXPECT(gbc.readMem(0xd90e), 0x6b);
        // CB 6B 0022
        gbc.setState(0x666f, 0x8cc5, 0x1e20, 0x3f32, 0x7f61, 0x1122, 0x0, 0x0);
        gbc.writeMem(0x666f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x8cc5);
        EXPECT(gbc.pc(), 0x6671);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0023
        gbc.setState(0xee8a, 0x6728, 0x3bf0, 0xa763, 0x7c19, 0x2e21, 0x0, 0x0);
        gbc.writeMem(0xee8a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x6728);
        EXPECT(gbc.pc(), 0xee8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee8a), 0xcb);
        EXPECT(gbc.readMem(0xee8b), 0x6b);
        // CB 6B 0024
        gbc.setState(0x8ad9, 0x8af0, 0x8900, 0x8148, 0xa048, 0xf3a3, 0x0, 0x0);
        gbc.writeMem(0x8ad9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x8af0);
        EXPECT(gbc.pc(), 0x8adb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ad9), 0xcb);
        EXPECT(gbc.readMem(0x8ada), 0x6b);
        // CB 6B 0025
        gbc.setState(0x330e, 0xb4b3, 0x8bb0, 0xf390, 0x1788, 0xcd1a, 0x1, 0x0);
        gbc.writeMem(0x330e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xb4b3);
        EXPECT(gbc.pc(), 0x3310);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0026
        gbc.setState(0x3244, 0xe335, 0x54e0, 0x338a, 0x2a95, 0x476e, 0x0, 0x1);
        gbc.writeMem(0x3244, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xe335);
        EXPECT(gbc.pc(), 0x3246);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0027
        gbc.setState(0x396, 0x3995, 0xa430, 0x1593, 0xc3ec, 0xb711, 0x1, 0x1);
        gbc.writeMem(0x396, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x3995);
        EXPECT(gbc.pc(), 0x398);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0028
        gbc.setState(0xe5f2, 0x22bf, 0x35a0, 0x2353, 0x4da9, 0x81bb, 0x0, 0x1);
        gbc.writeMem(0xe5f2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x22bf);
        EXPECT(gbc.pc(), 0xe5f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5f2), 0xcb);
        EXPECT(gbc.readMem(0xe5f3), 0x6b);
        // CB 6B 0029
        gbc.setState(0xb6c5, 0x57db, 0x9b80, 0xfa57, 0xea4c, 0x9654, 0x0, 0x1);
        gbc.writeMem(0xb6c5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x57db);
        EXPECT(gbc.pc(), 0xb6c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6c5), 0xcb);
        EXPECT(gbc.readMem(0xb6c6), 0x6b);
        // CB 6B 002A
        gbc.setState(0xd7bd, 0x2d01, 0x7870, 0x478, 0x5022, 0x945b, 0x1, 0x0);
        gbc.writeMem(0xd7bd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x2d01);
        EXPECT(gbc.pc(), 0xd7bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7bd), 0xcb);
        EXPECT(gbc.readMem(0xd7be), 0x6b);
        // CB 6B 002B
        gbc.setState(0x98b5, 0x37ce, 0x320, 0x5f31, 0x64bd, 0x86d6, 0x1, 0x1);
        gbc.writeMem(0x98b5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x37ce);
        EXPECT(gbc.pc(), 0x98b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98b5), 0xcb);
        EXPECT(gbc.readMem(0x98b6), 0x6b);
        // CB 6B 002C
        gbc.setState(0xef09, 0x4252, 0x89d0, 0x417d, 0x1fa9, 0xac41, 0x0, 0x1);
        gbc.writeMem(0xef09, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x4252);
        EXPECT(gbc.pc(), 0xef0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef09), 0xcb);
        EXPECT(gbc.readMem(0xef0a), 0x6b);
        // CB 6B 002D
        gbc.setState(0x9071, 0x95b4, 0xefa0, 0x4bbc, 0x228d, 0x5ae0, 0x1, 0x0);
        gbc.writeMem(0x9071, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x95b4);
        EXPECT(gbc.pc(), 0x9073);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9071), 0xcb);
        EXPECT(gbc.readMem(0x9072), 0x6b);
        // CB 6B 002E
        gbc.setState(0x11b2, 0x2b0a, 0xc070, 0xd7b1, 0x24d3, 0x965d, 0x1, 0x0);
        gbc.writeMem(0x11b2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x2b0a);
        EXPECT(gbc.pc(), 0x11b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 002F
        gbc.setState(0xd77, 0x54a4, 0xd760, 0x7381, 0x593c, 0xfe8, 0x0, 0x0);
        gbc.writeMem(0xd77, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x54a4);
        EXPECT(gbc.pc(), 0xd79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0030
        gbc.setState(0x532b, 0x3a4, 0x6300, 0xf5b, 0x194c, 0x11d7, 0x1, 0x1);
        gbc.writeMem(0x532b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x3a4);
        EXPECT(gbc.pc(), 0x532d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0031
        gbc.setState(0x8585, 0x7245, 0xefa0, 0x5492, 0x55ea, 0x7895, 0x1, 0x1);
        gbc.writeMem(0x8585, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x7245);
        EXPECT(gbc.pc(), 0x8587);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8585), 0xcb);
        EXPECT(gbc.readMem(0x8586), 0x6b);
        // CB 6B 0032
        gbc.setState(0xc265, 0xf9d7, 0xa20, 0xa5b, 0x39cb, 0xb94f, 0x1, 0x0);
        gbc.writeMem(0xc265, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xf9d7);
        EXPECT(gbc.pc(), 0xc267);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc265), 0xcb);
        EXPECT(gbc.readMem(0xc266), 0x6b);
        // CB 6B 0033
        gbc.setState(0x1356, 0x3493, 0x7500, 0xb2ad, 0x9a2b, 0xedbb, 0x1, 0x0);
        gbc.writeMem(0x1356, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x3493);
        EXPECT(gbc.pc(), 0x1358);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0034
        gbc.setState(0xe12f, 0xcec8, 0x1c20, 0xd02, 0xc2f1, 0x1734, 0x1, 0x1);
        gbc.writeMem(0xe12f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xcec8);
        EXPECT(gbc.pc(), 0xe131);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe12f), 0xcb);
        EXPECT(gbc.readMem(0xe130), 0x6b);
        // CB 6B 0035
        gbc.setState(0x39da, 0x2d, 0xe7d0, 0xe80b, 0x1ef9, 0xd1a4, 0x0, 0x0);
        gbc.writeMem(0x39da, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x2d);
        EXPECT(gbc.pc(), 0x39dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0036
        gbc.setState(0xd925, 0x9b14, 0x4d40, 0xa69b, 0x166, 0xd9fd, 0x1, 0x0);
        gbc.writeMem(0xd925, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x9b14);
        EXPECT(gbc.pc(), 0xd927);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd925), 0xcb);
        EXPECT(gbc.readMem(0xd926), 0x6b);
        // CB 6B 0037
        gbc.setState(0xce29, 0x70ff, 0xeaa0, 0xd3df, 0x664f, 0x5314, 0x0, 0x0);
        gbc.writeMem(0xce29, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x70ff);
        EXPECT(gbc.pc(), 0xce2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce29), 0xcb);
        EXPECT(gbc.readMem(0xce2a), 0x6b);
        // CB 6B 0038
        gbc.setState(0xc3cb, 0x1e73, 0x36f0, 0xd4f5, 0x637d, 0x3ab0, 0x1, 0x1);
        gbc.writeMem(0xc3cb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x1e73);
        EXPECT(gbc.pc(), 0xc3cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3cb), 0xcb);
        EXPECT(gbc.readMem(0xc3cc), 0x6b);
        // CB 6B 0039
        gbc.setState(0x9e98, 0x9f50, 0xb780, 0x486e, 0x99db, 0xfe4a, 0x1, 0x1);
        gbc.writeMem(0x9e98, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x9f50);
        EXPECT(gbc.pc(), 0x9e9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e98), 0xcb);
        EXPECT(gbc.readMem(0x9e99), 0x6b);
        // CB 6B 003A
        gbc.setState(0x7ecf, 0xb21, 0x1b20, 0x7030, 0x1151, 0x1543, 0x1, 0x1);
        gbc.writeMem(0x7ecf, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xb21);
        EXPECT(gbc.pc(), 0x7ed1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 003B
        gbc.setState(0x9c1c, 0xcb35, 0x9d0, 0xa006, 0x7fb, 0xa610, 0x0, 0x1);
        gbc.writeMem(0x9c1c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xcb35);
        EXPECT(gbc.pc(), 0x9c1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c1c), 0xcb);
        EXPECT(gbc.readMem(0x9c1d), 0x6b);
        // CB 6B 003C
        gbc.setState(0x7405, 0x7403, 0xdd30, 0x7a38, 0x84c1, 0x857a, 0x0, 0x0);
        gbc.writeMem(0x7405, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x7403);
        EXPECT(gbc.pc(), 0x7407);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 003D
        gbc.setState(0xe65d, 0x953b, 0x3bd0, 0x9ff, 0x3b7b, 0x6f9b, 0x1, 0x1);
        gbc.writeMem(0xe65d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x953b);
        EXPECT(gbc.pc(), 0xe65f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe65d), 0xcb);
        EXPECT(gbc.readMem(0xe65e), 0x6b);
        // CB 6B 003F
        gbc.setState(0xd5f6, 0x4012, 0x9910, 0xcb70, 0xafe, 0x5589, 0x1, 0x1);
        gbc.writeMem(0xd5f6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x4012);
        EXPECT(gbc.pc(), 0xd5f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5f6), 0xcb);
        EXPECT(gbc.readMem(0xd5f7), 0x6b);
        // CB 6B 0040
        gbc.setState(0x1eca, 0xf7b4, 0xc210, 0x90ee, 0x27b6, 0x22a6, 0x0, 0x0);
        gbc.writeMem(0x1eca, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xf7b4);
        EXPECT(gbc.pc(), 0x1ecc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0041
        gbc.setState(0x6e68, 0x6a41, 0x4af0, 0xf9eb, 0x4490, 0x8333, 0x0, 0x0);
        gbc.writeMem(0x6e68, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x6a41);
        EXPECT(gbc.pc(), 0x6e6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0042
        gbc.setState(0x9e07, 0xf10f, 0x51f0, 0x6e72, 0x320a, 0xf139, 0x1, 0x1);
        gbc.writeMem(0x9e07, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xf10f);
        EXPECT(gbc.pc(), 0x9e09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e07), 0xcb);
        EXPECT(gbc.readMem(0x9e08), 0x6b);
        // CB 6B 0043
        gbc.setState(0xd478, 0xb086, 0x73e0, 0xed48, 0xbb07, 0x780a, 0x0, 0x0);
        gbc.writeMem(0xd478, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb086);
        EXPECT(gbc.pc(), 0xd47a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd478), 0xcb);
        EXPECT(gbc.readMem(0xd479), 0x6b);
        // CB 6B 0045
        gbc.setState(0x4896, 0xf7aa, 0x1370, 0x9c52, 0x9e58, 0x43d0, 0x1, 0x0);
        gbc.writeMem(0x4896, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xf7aa);
        EXPECT(gbc.pc(), 0x4898);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0046
        gbc.setState(0xa65d, 0x9475, 0x2550, 0x35f, 0xb8a4, 0x4e2c, 0x1, 0x1);
        gbc.writeMem(0xa65d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x9475);
        EXPECT(gbc.pc(), 0xa65f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa65d), 0xcb);
        EXPECT(gbc.readMem(0xa65e), 0x6b);
        // CB 6B 0047
        gbc.setState(0x316c, 0xe552, 0x20a0, 0x4aa5, 0x727c, 0xbf89, 0x1, 0x1);
        gbc.writeMem(0x316c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xe552);
        EXPECT(gbc.pc(), 0x316e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0048
        gbc.setState(0x4783, 0x7016, 0xb570, 0x8984, 0x2cad, 0x84bc, 0x0, 0x1);
        gbc.writeMem(0x4783, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x7016);
        EXPECT(gbc.pc(), 0x4785);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0049
        gbc.setState(0x8df2, 0x33b0, 0x8fb0, 0x245f, 0x750a, 0xb9c5, 0x1, 0x1);
        gbc.writeMem(0x8df2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x33b0);
        EXPECT(gbc.pc(), 0x8df4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8df2), 0xcb);
        EXPECT(gbc.readMem(0x8df3), 0x6b);
        // CB 6B 004A
        gbc.setState(0xdf13, 0x7ba3, 0xc220, 0x6cb, 0x73ff, 0x1357, 0x0, 0x0);
        gbc.writeMem(0xdf13, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x7ba3);
        EXPECT(gbc.pc(), 0xdf15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf13), 0xcb);
        EXPECT(gbc.readMem(0xdf14), 0x6b);
        // CB 6B 004B
        gbc.setState(0xa945, 0x7ed5, 0x1e40, 0x649e, 0xac1c, 0x73bb, 0x0, 0x0);
        gbc.writeMem(0xa945, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x7ed5);
        EXPECT(gbc.pc(), 0xa947);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa945), 0xcb);
        EXPECT(gbc.readMem(0xa946), 0x6b);
        // CB 6B 004C
        gbc.setState(0xa53a, 0xfa9, 0x60d0, 0x226a, 0x5a71, 0x13f0, 0x1, 0x0);
        gbc.writeMem(0xa53a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xfa9);
        EXPECT(gbc.pc(), 0xa53c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa53a), 0xcb);
        EXPECT(gbc.readMem(0xa53b), 0x6b);
        // CB 6B 004D
        gbc.setState(0x64da, 0xeca6, 0xdda0, 0xc4c0, 0x7dc4, 0x1257, 0x1, 0x0);
        gbc.writeMem(0x64da, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xeca6);
        EXPECT(gbc.pc(), 0x64dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 004E
        gbc.setState(0x65aa, 0x12fe, 0xaf90, 0xfd1c, 0x442, 0xfaa2, 0x0, 0x0);
        gbc.writeMem(0x65aa, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x12fe);
        EXPECT(gbc.pc(), 0x65ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 004F
        gbc.setState(0x66a, 0x6ca0, 0xff70, 0x728b, 0x8c80, 0xdcf4, 0x1, 0x1);
        gbc.writeMem(0x66a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x6ca0);
        EXPECT(gbc.pc(), 0x66c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0050
        gbc.setState(0x1c21, 0x1141, 0x65e0, 0x1da9, 0x66b3, 0xc142, 0x1, 0x0);
        gbc.writeMem(0x1c21, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x1141);
        EXPECT(gbc.pc(), 0x1c23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0051
        gbc.setState(0xc34c, 0xf5df, 0xf270, 0xf04c, 0x1c73, 0xc05a, 0x1, 0x1);
        gbc.writeMem(0xc34c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xf5df);
        EXPECT(gbc.pc(), 0xc34e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc34c), 0xcb);
        EXPECT(gbc.readMem(0xc34d), 0x6b);
        // CB 6B 0052
        gbc.setState(0x11d8, 0xedd6, 0x45f0, 0x383c, 0xfe77, 0x47da, 0x1, 0x0);
        gbc.writeMem(0x11d8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xedd6);
        EXPECT(gbc.pc(), 0x11da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0053
        gbc.setState(0xc9a7, 0x71f9, 0xda10, 0x824c, 0xd73c, 0x8919, 0x1, 0x1);
        gbc.writeMem(0xc9a7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x71f9);
        EXPECT(gbc.pc(), 0xc9a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9a7), 0xcb);
        EXPECT(gbc.readMem(0xc9a8), 0x6b);
        // CB 6B 0054
        gbc.setState(0x1295, 0xa912, 0xe2e0, 0xc2f3, 0x4f7c, 0x4901, 0x1, 0x0);
        gbc.writeMem(0x1295, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xa912);
        EXPECT(gbc.pc(), 0x1297);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0055
        gbc.setState(0xb3dc, 0xb33b, 0x8c10, 0x3476, 0xfc33, 0x1c61, 0x0, 0x1);
        gbc.writeMem(0xb3dc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xb33b);
        EXPECT(gbc.pc(), 0xb3de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3dc), 0xcb);
        EXPECT(gbc.readMem(0xb3dd), 0x6b);
        // CB 6B 0056
        gbc.setState(0xb43d, 0x42e1, 0xcfa0, 0x7677, 0x40fe, 0xf783, 0x0, 0x0);
        gbc.writeMem(0xb43d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x42e1);
        EXPECT(gbc.pc(), 0xb43f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb43d), 0xcb);
        EXPECT(gbc.readMem(0xb43e), 0x6b);
        // CB 6B 0057
        gbc.setState(0x47ac, 0xd382, 0x3080, 0x7ec0, 0x4d10, 0xc55d, 0x0, 0x1);
        gbc.writeMem(0x47ac, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xd382);
        EXPECT(gbc.pc(), 0x47ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0059
        gbc.setState(0x223c, 0x2eb9, 0xd9e0, 0xb426, 0x8275, 0x8aa5, 0x0, 0x0);
        gbc.writeMem(0x223c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x2eb9);
        EXPECT(gbc.pc(), 0x223e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 005A
        gbc.setState(0x5086, 0x26fd, 0x8b00, 0x176a, 0xef77, 0xa98b, 0x1, 0x0);
        gbc.writeMem(0x5086, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x26fd);
        EXPECT(gbc.pc(), 0x5088);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 005B
        gbc.setState(0x6b46, 0x520, 0x8220, 0xc2eb, 0x268d, 0x69c2, 0x1, 0x0);
        gbc.writeMem(0x6b46, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x520);
        EXPECT(gbc.pc(), 0x6b48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 005C
        gbc.setState(0xd1b3, 0x312b, 0xc1b0, 0xc075, 0xf025, 0xc052, 0x0, 0x0);
        gbc.writeMem(0xd1b3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x312b);
        EXPECT(gbc.pc(), 0xd1b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1b3), 0xcb);
        EXPECT(gbc.readMem(0xd1b4), 0x6b);
        // CB 6B 005D
        gbc.setState(0x5213, 0x9542, 0x33d0, 0x5243, 0xe5b5, 0xcc84, 0x0, 0x1);
        gbc.writeMem(0x5213, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x9542);
        EXPECT(gbc.pc(), 0x5215);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 005E
        gbc.setState(0x3f85, 0xf30f, 0x79c0, 0x3b17, 0xbf93, 0x9e16, 0x0, 0x0);
        gbc.writeMem(0x3f85, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xf30f);
        EXPECT(gbc.pc(), 0x3f87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 005F
        gbc.setState(0xbe50, 0x163d, 0xe20, 0x871c, 0x1fe2, 0x93a8, 0x0, 0x0);
        gbc.writeMem(0xbe50, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x163d);
        EXPECT(gbc.pc(), 0xbe52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe50), 0xcb);
        EXPECT(gbc.readMem(0xbe51), 0x6b);
        // CB 6B 0060
        gbc.setState(0x89dd, 0xcb78, 0x75d0, 0x89cd, 0x50b0, 0xab7d, 0x1, 0x1);
        gbc.writeMem(0x89dd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xcb78);
        EXPECT(gbc.pc(), 0x89df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89dd), 0xcb);
        EXPECT(gbc.readMem(0x89de), 0x6b);
        // CB 6B 0061
        gbc.setState(0xdb41, 0x4de2, 0x6950, 0x741e, 0xe209, 0xe3af, 0x1, 0x0);
        gbc.writeMem(0xdb41, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x4de2);
        EXPECT(gbc.pc(), 0xdb43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb41), 0xcb);
        EXPECT(gbc.readMem(0xdb42), 0x6b);
        // CB 6B 0063
        gbc.setState(0x5bbd, 0xc7c5, 0x55d0, 0xb93a, 0x17a6, 0xd126, 0x0, 0x0);
        gbc.writeMem(0x5bbd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xc7c5);
        EXPECT(gbc.pc(), 0x5bbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0064
        gbc.setState(0x2136, 0x4332, 0x4ce0, 0x1075, 0xfa6a, 0x1e58, 0x0, 0x0);
        gbc.writeMem(0x2136, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4332);
        EXPECT(gbc.pc(), 0x2138);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0065
        gbc.setState(0x57aa, 0x7799, 0x9c10, 0xb862, 0xe8c3, 0x300b, 0x1, 0x0);
        gbc.writeMem(0x57aa, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x7799);
        EXPECT(gbc.pc(), 0x57ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0066
        gbc.setState(0x2d21, 0xffee, 0xfb10, 0x74f6, 0x3e5e, 0x409e, 0x0, 0x1);
        gbc.writeMem(0x2d21, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xffee);
        EXPECT(gbc.pc(), 0x2d23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0067
        gbc.setState(0x4c78, 0x7f65, 0x4900, 0x8f22, 0xc70c, 0x3652, 0x1, 0x1);
        gbc.writeMem(0x4c78, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x7f65);
        EXPECT(gbc.pc(), 0x4c7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0068
        gbc.setState(0xec57, 0x4a1e, 0x1290, 0x2195, 0xee92, 0x950a, 0x0, 0x1);
        gbc.writeMem(0xec57, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x4a1e);
        EXPECT(gbc.pc(), 0xec59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec57), 0xcb);
        EXPECT(gbc.readMem(0xec58), 0x6b);
        // CB 6B 0069
        gbc.setState(0xec19, 0x444e, 0xcff0, 0x923, 0xb7f5, 0x1de3, 0x1, 0x0);
        gbc.writeMem(0xec19, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x444e);
        EXPECT(gbc.pc(), 0xec1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec19), 0xcb);
        EXPECT(gbc.readMem(0xec1a), 0x6b);
        // CB 6B 006A
        gbc.setState(0x4c0e, 0xdd37, 0x9350, 0x6803, 0x6c3c, 0xd7fe, 0x0, 0x1);
        gbc.writeMem(0x4c0e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xdd37);
        EXPECT(gbc.pc(), 0x4c10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 006B
        gbc.setState(0x1455, 0xc33d, 0xccf0, 0xc2cc, 0x41f, 0x2569, 0x0, 0x0);
        gbc.writeMem(0x1455, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xc33d);
        EXPECT(gbc.pc(), 0x1457);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 006C
        gbc.setState(0x6bb2, 0x331f, 0x3840, 0x9330, 0x7740, 0x6653, 0x1, 0x0);
        gbc.writeMem(0x6bb2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x331f);
        EXPECT(gbc.pc(), 0x6bb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 006D
        gbc.setState(0x827, 0x46e, 0xf050, 0xb2b0, 0x72a8, 0x4441, 0x1, 0x0);
        gbc.writeMem(0x827, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x46e);
        EXPECT(gbc.pc(), 0x829);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 006E
        gbc.setState(0x7e92, 0xaf9, 0x8830, 0xbbec, 0x14c8, 0x350b, 0x0, 0x0);
        gbc.writeMem(0x7e92, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xaf9);
        EXPECT(gbc.pc(), 0x7e94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 006F
        gbc.setState(0x7892, 0xee7a, 0x7d50, 0x1a9b, 0x9073, 0xb0fc, 0x0, 0x0);
        gbc.writeMem(0x7892, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xee7a);
        EXPECT(gbc.pc(), 0x7894);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0071
        gbc.setState(0x5c7c, 0xfaed, 0x25b0, 0x5218, 0x3bc0, 0x61f2, 0x0, 0x0);
        gbc.writeMem(0x5c7c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xfaed);
        EXPECT(gbc.pc(), 0x5c7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0072
        gbc.setState(0xddb8, 0xe482, 0xd0f0, 0xad4d, 0xda79, 0xe, 0x1, 0x0);
        gbc.writeMem(0xddb8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xe482);
        EXPECT(gbc.pc(), 0xddba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddb8), 0xcb);
        EXPECT(gbc.readMem(0xddb9), 0x6b);
        // CB 6B 0073
        gbc.setState(0xcaa7, 0xfaed, 0xcf0, 0x14a0, 0x5a2b, 0x5b4c, 0x1, 0x0);
        gbc.writeMem(0xcaa7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xfaed);
        EXPECT(gbc.pc(), 0xcaa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcaa7), 0xcb);
        EXPECT(gbc.readMem(0xcaa8), 0x6b);
        // CB 6B 0074
        gbc.setState(0x5699, 0x81bd, 0x6560, 0x918e, 0x831f, 0x6dd7, 0x1, 0x0);
        gbc.writeMem(0x5699, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x81bd);
        EXPECT(gbc.pc(), 0x569b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0075
        gbc.setState(0x4a34, 0x6024, 0x12e0, 0xccf, 0x4364, 0xddef, 0x0, 0x1);
        gbc.writeMem(0x4a34, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x6024);
        EXPECT(gbc.pc(), 0x4a36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0076
        gbc.setState(0x95df, 0x1f5b, 0x70c0, 0x9cf1, 0x21bc, 0xa3e4, 0x1, 0x1);
        gbc.writeMem(0x95df, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x1f5b);
        EXPECT(gbc.pc(), 0x95e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95df), 0xcb);
        EXPECT(gbc.readMem(0x95e0), 0x6b);
        // CB 6B 0077
        gbc.setState(0xb88, 0xd734, 0x2310, 0x54c8, 0x45f0, 0xced0, 0x1, 0x0);
        gbc.writeMem(0xb88, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xd734);
        EXPECT(gbc.pc(), 0xb8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0078
        gbc.setState(0xdb4d, 0xb77b, 0x49b0, 0x7b2, 0xcceb, 0xe7e4, 0x0, 0x1);
        gbc.writeMem(0xdb4d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xb77b);
        EXPECT(gbc.pc(), 0xdb4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb4d), 0xcb);
        EXPECT(gbc.readMem(0xdb4e), 0x6b);
        // CB 6B 0079
        gbc.setState(0xc16d, 0x1db3, 0x5720, 0x2e6d, 0x71c7, 0x17da, 0x0, 0x0);
        gbc.writeMem(0xc16d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x1db3);
        EXPECT(gbc.pc(), 0xc16f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc16d), 0xcb);
        EXPECT(gbc.readMem(0xc16e), 0x6b);
        // CB 6B 007A
        gbc.setState(0xe948, 0x6aa6, 0x56e0, 0xb566, 0xc389, 0xef84, 0x1, 0x0);
        gbc.writeMem(0xe948, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x6aa6);
        EXPECT(gbc.pc(), 0xe94a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe948), 0xcb);
        EXPECT(gbc.readMem(0xe949), 0x6b);
        // CB 6B 007B
        gbc.setState(0x9252, 0x2e52, 0xe860, 0xf237, 0x62d4, 0xa63e, 0x0, 0x1);
        gbc.writeMem(0x9252, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x2e52);
        EXPECT(gbc.pc(), 0x9254);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9252), 0xcb);
        EXPECT(gbc.readMem(0x9253), 0x6b);
        // CB 6B 007C
        gbc.setState(0xc81e, 0x3567, 0xcde0, 0x55d3, 0xfcd3, 0x22e8, 0x0, 0x1);
        gbc.writeMem(0xc81e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x3567);
        EXPECT(gbc.pc(), 0xc820);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc81e), 0xcb);
        EXPECT(gbc.readMem(0xc81f), 0x6b);
        // CB 6B 007D
        gbc.setState(0xe271, 0x9c4e, 0x80d0, 0x1fe7, 0x4ec7, 0x6cd8, 0x1, 0x1);
        gbc.writeMem(0xe271, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x9c4e);
        EXPECT(gbc.pc(), 0xe273);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe271), 0xcb);
        EXPECT(gbc.readMem(0xe272), 0x6b);
        // CB 6B 007E
        gbc.setState(0x7f21, 0x39df, 0xfd60, 0x5fc8, 0xd7e1, 0xce27, 0x1, 0x1);
        gbc.writeMem(0x7f21, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x39df);
        EXPECT(gbc.pc(), 0x7f23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 007F
        gbc.setState(0x91c3, 0xb989, 0xd700, 0xc319, 0xc882, 0x98b7, 0x1, 0x1);
        gbc.writeMem(0x91c3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xb989);
        EXPECT(gbc.pc(), 0x91c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91c3), 0xcb);
        EXPECT(gbc.readMem(0x91c4), 0x6b);
        // CB 6B 0080
        gbc.setState(0x7885, 0x2c99, 0x8710, 0xa056, 0x9f49, 0x2a91, 0x0, 0x0);
        gbc.writeMem(0x7885, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x2c99);
        EXPECT(gbc.pc(), 0x7887);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0081
        gbc.setState(0x5e82, 0xa9d6, 0x4440, 0x6522, 0x610f, 0x62de, 0x0, 0x1);
        gbc.writeMem(0x5e82, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xa9d6);
        EXPECT(gbc.pc(), 0x5e84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0082
        gbc.setState(0x893e, 0x4bee, 0xf5b0, 0x6f1, 0xd414, 0x3566, 0x1, 0x1);
        gbc.writeMem(0x893e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x4bee);
        EXPECT(gbc.pc(), 0x8940);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x893e), 0xcb);
        EXPECT(gbc.readMem(0x893f), 0x6b);
        // CB 6B 0083
        gbc.setState(0x5355, 0x647a, 0x6620, 0x98d5, 0x28d6, 0x890c, 0x1, 0x1);
        gbc.writeMem(0x5355, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x647a);
        EXPECT(gbc.pc(), 0x5357);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0084
        gbc.setState(0x70e, 0xa177, 0xa790, 0x59c5, 0xb3f4, 0x4261, 0x0, 0x1);
        gbc.writeMem(0x70e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xa177);
        EXPECT(gbc.pc(), 0x710);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0085
        gbc.setState(0x392d, 0x2ccd, 0x1dd0, 0xea0f, 0xc1c3, 0xd575, 0x1, 0x0);
        gbc.writeMem(0x392d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2ccd);
        EXPECT(gbc.pc(), 0x392f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0086
        gbc.setState(0x9154, 0x49b6, 0x1940, 0xad01, 0x11e2, 0x1421, 0x0, 0x1);
        gbc.writeMem(0x9154, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x49b6);
        EXPECT(gbc.pc(), 0x9156);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9154), 0xcb);
        EXPECT(gbc.readMem(0x9155), 0x6b);
        // CB 6B 0087
        gbc.setState(0xdb95, 0x4021, 0xccf0, 0x3330, 0x2a29, 0x87dd, 0x1, 0x0);
        gbc.writeMem(0xdb95, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x4021);
        EXPECT(gbc.pc(), 0xdb97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb95), 0xcb);
        EXPECT(gbc.readMem(0xdb96), 0x6b);
        // CB 6B 0088
        gbc.setState(0x3ad3, 0xc965, 0xf9c0, 0xfe18, 0x5691, 0xa0f8, 0x1, 0x0);
        gbc.writeMem(0x3ad3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xc965);
        EXPECT(gbc.pc(), 0x3ad5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0089
        gbc.setState(0x5155, 0x1662, 0xf5c0, 0x3c7, 0x8d24, 0xc3eb, 0x1, 0x1);
        gbc.writeMem(0x5155, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x1662);
        EXPECT(gbc.pc(), 0x5157);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 008A
        gbc.setState(0xa975, 0x174, 0x7900, 0x462d, 0x40fd, 0xa189, 0x1, 0x0);
        gbc.writeMem(0xa975, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x174);
        EXPECT(gbc.pc(), 0xa977);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa975), 0xcb);
        EXPECT(gbc.readMem(0xa976), 0x6b);
        // CB 6B 008C
        gbc.setState(0xf0, 0x8217, 0x8ad0, 0x1f5a, 0x8f0, 0xbfbf, 0x1, 0x0);
        gbc.writeMem(0xf0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x8217);
        EXPECT(gbc.pc(), 0xf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 008D
        gbc.setState(0x1ab7, 0xc3e2, 0x4ef0, 0x1c5, 0xf4b2, 0x677f, 0x1, 0x1);
        gbc.writeMem(0x1ab7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xc3e2);
        EXPECT(gbc.pc(), 0x1ab9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 008E
        gbc.setState(0x69dd, 0x4885, 0x4a10, 0xf62, 0x4261, 0x3647, 0x0, 0x0);
        gbc.writeMem(0x69dd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x4885);
        EXPECT(gbc.pc(), 0x69df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 008F
        gbc.setState(0x2615, 0xe9c9, 0xaaf0, 0x9a, 0x3560, 0xfab7, 0x0, 0x1);
        gbc.writeMem(0x2615, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xe9c9);
        EXPECT(gbc.pc(), 0x2617);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0090
        gbc.setState(0x53ce, 0x353e, 0x61b0, 0xf91e, 0x7595, 0x6ec1, 0x0, 0x1);
        gbc.writeMem(0x53ce, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x353e);
        EXPECT(gbc.pc(), 0x53d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0091
        gbc.setState(0xecd9, 0x6e3c, 0xb000, 0x9766, 0x9e2e, 0xcbfc, 0x0, 0x0);
        gbc.writeMem(0xecd9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x6e3c);
        EXPECT(gbc.pc(), 0xecdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecd9), 0xcb);
        EXPECT(gbc.readMem(0xecda), 0x6b);
        // CB 6B 0092
        gbc.setState(0x118d, 0xf880, 0x9be0, 0x7ba1, 0x340b, 0xa31e, 0x0, 0x1);
        gbc.writeMem(0x118d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xf880);
        EXPECT(gbc.pc(), 0x118f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0093
        gbc.setState(0x3704, 0x78af, 0xd300, 0x1e8f, 0x1723, 0x6fd8, 0x1, 0x0);
        gbc.writeMem(0x3704, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x78af);
        EXPECT(gbc.pc(), 0x3706);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0094
        gbc.setState(0x5da5, 0x512c, 0x6970, 0x8426, 0x1e5d, 0x5cf1, 0x1, 0x1);
        gbc.writeMem(0x5da5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x512c);
        EXPECT(gbc.pc(), 0x5da7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0095
        gbc.setState(0x7abe, 0x8694, 0xf400, 0x8d2a, 0x8a80, 0xb24, 0x1, 0x0);
        gbc.writeMem(0x7abe, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8694);
        EXPECT(gbc.pc(), 0x7ac0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0096
        gbc.setState(0xc139, 0x19bf, 0xe3d0, 0xafcc, 0x1726, 0x7184, 0x0, 0x0);
        gbc.writeMem(0xc139, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x19bf);
        EXPECT(gbc.pc(), 0xc13b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc139), 0xcb);
        EXPECT(gbc.readMem(0xc13a), 0x6b);
        // CB 6B 0097
        gbc.setState(0x17ed, 0xc104, 0x3510, 0xa406, 0x1994, 0x736b, 0x0, 0x1);
        gbc.writeMem(0x17ed, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xc104);
        EXPECT(gbc.pc(), 0x17ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0098
        gbc.setState(0xe91c, 0xcbad, 0x3730, 0x6136, 0xcdb4, 0xb357, 0x0, 0x1);
        gbc.writeMem(0xe91c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xcbad);
        EXPECT(gbc.pc(), 0xe91e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe91c), 0xcb);
        EXPECT(gbc.readMem(0xe91d), 0x6b);
        // CB 6B 0099
        gbc.setState(0x3d66, 0xd9c6, 0xfc00, 0xecdd, 0x763d, 0x582d, 0x1, 0x1);
        gbc.writeMem(0x3d66, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xd9c6);
        EXPECT(gbc.pc(), 0x3d68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 009A
        gbc.setState(0x6a0, 0x63f, 0x1a90, 0xa9db, 0xc4f0, 0x14ba, 0x1, 0x1);
        gbc.writeMem(0x6a0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x63f);
        EXPECT(gbc.pc(), 0x6a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 009C
        gbc.setState(0x87f, 0x7af2, 0xd070, 0x44e1, 0x1aee, 0x6c5d, 0x0, 0x1);
        gbc.writeMem(0x87f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x7af2);
        EXPECT(gbc.pc(), 0x881);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 009D
        gbc.setState(0xc20d, 0x119a, 0x4270, 0xc5ff, 0x32fc, 0xba43, 0x0, 0x0);
        gbc.writeMem(0xc20d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x119a);
        EXPECT(gbc.pc(), 0xc20f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc20d), 0xcb);
        EXPECT(gbc.readMem(0xc20e), 0x6b);
        // CB 6B 009E
        gbc.setState(0xb3b4, 0x388e, 0x45c0, 0x93a3, 0x858a, 0x31d7, 0x1, 0x0);
        gbc.writeMem(0xb3b4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x388e);
        EXPECT(gbc.pc(), 0xb3b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3b4), 0xcb);
        EXPECT(gbc.readMem(0xb3b5), 0x6b);
        // CB 6B 009F
        gbc.setState(0x9b40, 0x9168, 0x63e0, 0xebe6, 0x5480, 0x59d8, 0x0, 0x1);
        gbc.writeMem(0x9b40, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x9168);
        EXPECT(gbc.pc(), 0x9b42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b40), 0xcb);
        EXPECT(gbc.readMem(0x9b41), 0x6b);
        // CB 6B 00A0
        gbc.setState(0x5dcd, 0xd9d7, 0x4850, 0xbef8, 0xe0d1, 0x6a14, 0x1, 0x0);
        gbc.writeMem(0x5dcd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd9d7);
        EXPECT(gbc.pc(), 0x5dcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00A1
        gbc.setState(0x7950, 0x56d0, 0x94e0, 0xa835, 0xd9f, 0x9435, 0x1, 0x1);
        gbc.writeMem(0x7950, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x56d0);
        EXPECT(gbc.pc(), 0x7952);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00A2
        gbc.setState(0x5bdb, 0xf2d2, 0x2450, 0xd01f, 0x2168, 0xeb69, 0x0, 0x1);
        gbc.writeMem(0x5bdb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xf2d2);
        EXPECT(gbc.pc(), 0x5bdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00A3
        gbc.setState(0x25da, 0x8d3f, 0x260, 0x94f8, 0x8555, 0xb91f, 0x1, 0x0);
        gbc.writeMem(0x25da, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x8d3f);
        EXPECT(gbc.pc(), 0x25dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00A4
        gbc.setState(0x399c, 0xd6eb, 0x5ca0, 0x412c, 0xdcad, 0x12ab, 0x1, 0x0);
        gbc.writeMem(0x399c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xd6eb);
        EXPECT(gbc.pc(), 0x399e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00A5
        gbc.setState(0x687d, 0x74f0, 0xaaf0, 0x3f1, 0x25ef, 0x8cf9, 0x1, 0x0);
        gbc.writeMem(0x687d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x74f0);
        EXPECT(gbc.pc(), 0x687f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00A6
        gbc.setState(0xbb4c, 0x5147, 0x7680, 0xdc91, 0x7253, 0x2b2b, 0x0, 0x1);
        gbc.writeMem(0xbb4c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x5147);
        EXPECT(gbc.pc(), 0xbb4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb4c), 0xcb);
        EXPECT(gbc.readMem(0xbb4d), 0x6b);
        // CB 6B 00A7
        gbc.setState(0x3799, 0xee9a, 0x8a10, 0x95c7, 0x6617, 0xfd9d, 0x1, 0x0);
        gbc.writeMem(0x3799, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xee9a);
        EXPECT(gbc.pc(), 0x379b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00A8
        gbc.setState(0xb024, 0x8db0, 0xcc50, 0xe2f3, 0x68f6, 0xab3, 0x0, 0x1);
        gbc.writeMem(0xb024, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x8db0);
        EXPECT(gbc.pc(), 0xb026);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb024), 0xcb);
        EXPECT(gbc.readMem(0xb025), 0x6b);
        // CB 6B 00A9
        gbc.setState(0x5688, 0x1efc, 0x76a0, 0x41b0, 0x3818, 0xce0a, 0x0, 0x1);
        gbc.writeMem(0x5688, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x1efc);
        EXPECT(gbc.pc(), 0x568a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00AA
        gbc.setState(0x601b, 0x244, 0x4500, 0x6bfc, 0xfd8c, 0xdc49, 0x0, 0x0);
        gbc.writeMem(0x601b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x244);
        EXPECT(gbc.pc(), 0x601d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00AB
        gbc.setState(0x5dd6, 0x8679, 0xdba0, 0x5ce2, 0xf938, 0x8062, 0x0, 0x1);
        gbc.writeMem(0x5dd6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x8679);
        EXPECT(gbc.pc(), 0x5dd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00AC
        gbc.setState(0x50af, 0xedf, 0xc270, 0x7819, 0x8643, 0x1086, 0x1, 0x1);
        gbc.writeMem(0x50af, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xedf);
        EXPECT(gbc.pc(), 0x50b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00AD
        gbc.setState(0x9da9, 0x5a4d, 0x78e0, 0xe990, 0x5bcc, 0x1e26, 0x1, 0x1);
        gbc.writeMem(0x9da9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x5a4d);
        EXPECT(gbc.pc(), 0x9dab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9da9), 0xcb);
        EXPECT(gbc.readMem(0x9daa), 0x6b);
        // CB 6B 00AE
        gbc.setState(0x23f1, 0xe18e, 0xe230, 0xb51, 0x94fe, 0x459c, 0x0, 0x1);
        gbc.writeMem(0x23f1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xe18e);
        EXPECT(gbc.pc(), 0x23f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00AF
        gbc.setState(0x40bf, 0x2523, 0xb640, 0x5a4, 0xfd78, 0xe7d5, 0x1, 0x1);
        gbc.writeMem(0x40bf, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x2523);
        EXPECT(gbc.pc(), 0x40c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00B0
        gbc.setState(0x7a78, 0x8e4a, 0x4460, 0x6e7d, 0x86c2, 0xc300, 0x1, 0x1);
        gbc.writeMem(0x7a78, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8e4a);
        EXPECT(gbc.pc(), 0x7a7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00B1
        gbc.setState(0xdcf4, 0x46ab, 0x9b00, 0x773d, 0x3c05, 0x5470, 0x1, 0x1);
        gbc.writeMem(0xdcf4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x46ab);
        EXPECT(gbc.pc(), 0xdcf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcf4), 0xcb);
        EXPECT(gbc.readMem(0xdcf5), 0x6b);
        // CB 6B 00B2
        gbc.setState(0x6696, 0x5399, 0xfb80, 0x59bd, 0xabea, 0x51d4, 0x1, 0x1);
        gbc.writeMem(0x6696, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x5399);
        EXPECT(gbc.pc(), 0x6698);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00B3
        gbc.setState(0xdb92, 0xe04, 0xb070, 0x1597, 0x416f, 0x43f6, 0x0, 0x0);
        gbc.writeMem(0xdb92, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xe04);
        EXPECT(gbc.pc(), 0xdb94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb92), 0xcb);
        EXPECT(gbc.readMem(0xdb93), 0x6b);
        // CB 6B 00B4
        gbc.setState(0x7b23, 0xdfbc, 0x3250, 0x3cc2, 0x443e, 0x8d69, 0x1, 0x1);
        gbc.writeMem(0x7b23, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xdfbc);
        EXPECT(gbc.pc(), 0x7b25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00B5
        gbc.setState(0xaa6, 0xb731, 0x8b50, 0x1196, 0x67b2, 0xfc0, 0x0, 0x0);
        gbc.writeMem(0xaa6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xb731);
        EXPECT(gbc.pc(), 0xaa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00B6
        gbc.setState(0x86f, 0xbe6a, 0xb80, 0x3d98, 0x56f8, 0xa7c3, 0x1, 0x1);
        gbc.writeMem(0x86f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xbe6a);
        EXPECT(gbc.pc(), 0x871);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00B7
        gbc.setState(0x309a, 0x9f43, 0xce70, 0xd504, 0x4cfe, 0xaff3, 0x1, 0x0);
        gbc.writeMem(0x309a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x9f43);
        EXPECT(gbc.pc(), 0x309c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00B8
        gbc.setState(0xd122, 0x170d, 0x18f0, 0x2767, 0x7f3f, 0x22d, 0x0, 0x0);
        gbc.writeMem(0xd122, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x170d);
        EXPECT(gbc.pc(), 0xd124);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd122), 0xcb);
        EXPECT(gbc.readMem(0xd123), 0x6b);
        // CB 6B 00B9
        gbc.setState(0x2b4, 0xbd6d, 0xd400, 0x8bf, 0x331f, 0xdeb4, 0x0, 0x1);
        gbc.writeMem(0x2b4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xbd6d);
        EXPECT(gbc.pc(), 0x2b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00BA
        gbc.setState(0x9d61, 0x5003, 0x470, 0xc6a4, 0xd6c, 0x7090, 0x0, 0x1);
        gbc.writeMem(0x9d61, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x5003);
        EXPECT(gbc.pc(), 0x9d63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d61), 0xcb);
        EXPECT(gbc.readMem(0x9d62), 0x6b);
        // CB 6B 00BB
        gbc.setState(0x1375, 0x8e57, 0x8120, 0x8481, 0x932a, 0x2c58, 0x1, 0x0);
        gbc.writeMem(0x1375, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x8e57);
        EXPECT(gbc.pc(), 0x1377);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00BC
        gbc.setState(0xa438, 0xf90b, 0x64a0, 0x3c32, 0x6d8c, 0x977, 0x1, 0x0);
        gbc.writeMem(0xa438, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xf90b);
        EXPECT(gbc.pc(), 0xa43a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa438), 0xcb);
        EXPECT(gbc.readMem(0xa439), 0x6b);
        // CB 6B 00BD
        gbc.setState(0xc254, 0x6812, 0x870, 0xa09e, 0x4eee, 0x6671, 0x0, 0x0);
        gbc.writeMem(0xc254, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x6812);
        EXPECT(gbc.pc(), 0xc256);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc254), 0xcb);
        EXPECT(gbc.readMem(0xc255), 0x6b);
        // CB 6B 00BE
        gbc.setState(0xa397, 0xd0b0, 0x8910, 0x210b, 0xd16d, 0x9066, 0x1, 0x0);
        gbc.writeMem(0xa397, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd0b0);
        EXPECT(gbc.pc(), 0xa399);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa397), 0xcb);
        EXPECT(gbc.readMem(0xa398), 0x6b);
        // CB 6B 00C0
        gbc.setState(0xd73f, 0xf3d4, 0x1e20, 0x7f4a, 0xdb3c, 0x37a5, 0x1, 0x1);
        gbc.writeMem(0xd73f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xf3d4);
        EXPECT(gbc.pc(), 0xd741);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd73f), 0xcb);
        EXPECT(gbc.readMem(0xd740), 0x6b);
        // CB 6B 00C1
        gbc.setState(0x7a2e, 0xb950, 0x7590, 0xa67d, 0xa936, 0xc637, 0x0, 0x0);
        gbc.writeMem(0x7a2e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xb950);
        EXPECT(gbc.pc(), 0x7a30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00C2
        gbc.setState(0x875, 0xcf94, 0x4960, 0x7923, 0xf176, 0x52e2, 0x1, 0x0);
        gbc.writeMem(0x875, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xcf94);
        EXPECT(gbc.pc(), 0x877);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00C3
        gbc.setState(0x1278, 0x70cd, 0x3520, 0x3968, 0xb09e, 0xa9d4, 0x1, 0x0);
        gbc.writeMem(0x1278, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x70cd);
        EXPECT(gbc.pc(), 0x127a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00C4
        gbc.setState(0xe8d2, 0x8eb7, 0x5b80, 0xdf24, 0xf13d, 0xf1e9, 0x0, 0x1);
        gbc.writeMem(0xe8d2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8eb7);
        EXPECT(gbc.pc(), 0xe8d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8d2), 0xcb);
        EXPECT(gbc.readMem(0xe8d3), 0x6b);
        // CB 6B 00C5
        gbc.setState(0x1780, 0x1d55, 0xf1b0, 0xb628, 0xb295, 0x9d9f, 0x1, 0x0);
        gbc.writeMem(0x1780, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x1d55);
        EXPECT(gbc.pc(), 0x1782);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00C6
        gbc.setState(0x3941, 0x672d, 0x8270, 0x394d, 0xb664, 0xa, 0x1, 0x0);
        gbc.writeMem(0x3941, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x672d);
        EXPECT(gbc.pc(), 0x3943);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00C7
        gbc.setState(0xa91, 0xe48d, 0x4110, 0xb4d6, 0x3d78, 0xa479, 0x0, 0x0);
        gbc.writeMem(0xa91, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xe48d);
        EXPECT(gbc.pc(), 0xa93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00C8
        gbc.setState(0xbc38, 0x405b, 0x8160, 0x3ad, 0x249a, 0x47d4, 0x1, 0x0);
        gbc.writeMem(0xbc38, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x405b);
        EXPECT(gbc.pc(), 0xbc3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc38), 0xcb);
        EXPECT(gbc.readMem(0xbc39), 0x6b);
        // CB 6B 00C9
        gbc.setState(0x2ea8, 0x2bb2, 0xf4c0, 0xf165, 0x2ad4, 0x596d, 0x1, 0x1);
        gbc.writeMem(0x2ea8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x2bb2);
        EXPECT(gbc.pc(), 0x2eaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00CA
        gbc.setState(0x63bb, 0x6d14, 0xf400, 0x436c, 0xe429, 0x6d33, 0x0, 0x0);
        gbc.writeMem(0x63bb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x6d14);
        EXPECT(gbc.pc(), 0x63bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00CB
        gbc.setState(0x7657, 0xb3f, 0x5890, 0xd970, 0x77f3, 0xbaa1, 0x1, 0x1);
        gbc.writeMem(0x7657, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xb3f);
        EXPECT(gbc.pc(), 0x7659);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00CC
        gbc.setState(0x4e69, 0x5142, 0x580, 0xa8ae, 0x8b07, 0xc136, 0x0, 0x1);
        gbc.writeMem(0x4e69, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x5142);
        EXPECT(gbc.pc(), 0x4e6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00CD
        gbc.setState(0x8951, 0xa3d5, 0xbaf0, 0xe1b1, 0x1b9b, 0x8c78, 0x1, 0x1);
        gbc.writeMem(0x8951, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xa3d5);
        EXPECT(gbc.pc(), 0x8953);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8951), 0xcb);
        EXPECT(gbc.readMem(0x8952), 0x6b);
        // CB 6B 00CF
        gbc.setState(0x4fb5, 0x8910, 0x4180, 0x9d8b, 0x5c6a, 0xaa6b, 0x0, 0x0);
        gbc.writeMem(0x4fb5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x8910);
        EXPECT(gbc.pc(), 0x4fb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00D0
        gbc.setState(0x7b94, 0x6a63, 0x4d20, 0x16ef, 0xf58b, 0xfe83, 0x0, 0x0);
        gbc.writeMem(0x7b94, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x6a63);
        EXPECT(gbc.pc(), 0x7b96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00D1
        gbc.setState(0xe88e, 0x4e21, 0x6610, 0xea30, 0x1ac2, 0xff19, 0x1, 0x1);
        gbc.writeMem(0xe88e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x4e21);
        EXPECT(gbc.pc(), 0xe890);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe88e), 0xcb);
        EXPECT(gbc.readMem(0xe88f), 0x6b);
        // CB 6B 00D2
        gbc.setState(0x1c24, 0xe36b, 0x7a0, 0x42ae, 0xc1ec, 0x4cc2, 0x1, 0x1);
        gbc.writeMem(0x1c24, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xe36b);
        EXPECT(gbc.pc(), 0x1c26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00D3
        gbc.setState(0x1b5c, 0x8d8c, 0xe190, 0x4eef, 0x2fb8, 0xef58, 0x1, 0x0);
        gbc.writeMem(0x1b5c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x8d8c);
        EXPECT(gbc.pc(), 0x1b5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00D5
        gbc.setState(0xe534, 0x43ed, 0x3780, 0x4801, 0xe0b9, 0x6930, 0x0, 0x1);
        gbc.writeMem(0xe534, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x43ed);
        EXPECT(gbc.pc(), 0xe536);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe534), 0xcb);
        EXPECT(gbc.readMem(0xe535), 0x6b);
        // CB 6B 00D6
        gbc.setState(0xabd6, 0xc496, 0xcd90, 0xe2f6, 0x5247, 0xc9ea, 0x0, 0x0);
        gbc.writeMem(0xabd6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xc496);
        EXPECT(gbc.pc(), 0xabd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabd6), 0xcb);
        EXPECT(gbc.readMem(0xabd7), 0x6b);
        // CB 6B 00D8
        gbc.setState(0x8b7e, 0xfb2e, 0xedc0, 0xb59c, 0x4799, 0x272d, 0x1, 0x1);
        gbc.writeMem(0x8b7e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xfb2e);
        EXPECT(gbc.pc(), 0x8b80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b7e), 0xcb);
        EXPECT(gbc.readMem(0x8b7f), 0x6b);
        // CB 6B 00D9
        gbc.setState(0xb7a2, 0x1350, 0xf2c0, 0xf316, 0xde51, 0xd7fa, 0x1, 0x1);
        gbc.writeMem(0xb7a2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x1350);
        EXPECT(gbc.pc(), 0xb7a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7a2), 0xcb);
        EXPECT(gbc.readMem(0xb7a3), 0x6b);
        // CB 6B 00DA
        gbc.setState(0xb183, 0x58f0, 0xd2f0, 0x8db8, 0x99db, 0xb467, 0x1, 0x1);
        gbc.writeMem(0xb183, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x58f0);
        EXPECT(gbc.pc(), 0xb185);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb183), 0xcb);
        EXPECT(gbc.readMem(0xb184), 0x6b);
        // CB 6B 00DB
        gbc.setState(0x6b06, 0x3082, 0x9500, 0x2943, 0xcf8e, 0x3783, 0x1, 0x1);
        gbc.writeMem(0x6b06, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x3082);
        EXPECT(gbc.pc(), 0x6b08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00DC
        gbc.setState(0xa36e, 0x2682, 0xd080, 0xb5fe, 0x9460, 0x372d, 0x0, 0x1);
        gbc.writeMem(0xa36e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x2682);
        EXPECT(gbc.pc(), 0xa370);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa36e), 0xcb);
        EXPECT(gbc.readMem(0xa36f), 0x6b);
        // CB 6B 00DD
        gbc.setState(0x25d8, 0x568c, 0x8470, 0x137a, 0xe351, 0x44b7, 0x1, 0x1);
        gbc.writeMem(0x25d8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x568c);
        EXPECT(gbc.pc(), 0x25da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00DE
        gbc.setState(0x585e, 0x627, 0xa400, 0x1487, 0x45ee, 0x7134, 0x0, 0x0);
        gbc.writeMem(0x585e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x627);
        EXPECT(gbc.pc(), 0x5860);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00E0
        gbc.setState(0x5f56, 0x39de, 0x8dc0, 0xb619, 0x649f, 0x7d06, 0x1, 0x0);
        gbc.writeMem(0x5f56, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x39de);
        EXPECT(gbc.pc(), 0x5f58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00E1
        gbc.setState(0xa465, 0x5d24, 0xd60, 0xe391, 0x662f, 0xb173, 0x1, 0x1);
        gbc.writeMem(0xa465, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x5d24);
        EXPECT(gbc.pc(), 0xa467);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa465), 0xcb);
        EXPECT(gbc.readMem(0xa466), 0x6b);
        // CB 6B 00E2
        gbc.setState(0x8ddb, 0xe248, 0x4610, 0x3589, 0x7ee9, 0x8f75, 0x1, 0x0);
        gbc.writeMem(0x8ddb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xe248);
        EXPECT(gbc.pc(), 0x8ddd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ddb), 0xcb);
        EXPECT(gbc.readMem(0x8ddc), 0x6b);
        // CB 6B 00E3
        gbc.setState(0x7790, 0x876, 0xa570, 0x35aa, 0x3a1f, 0xd6ce, 0x1, 0x1);
        gbc.writeMem(0x7790, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x876);
        EXPECT(gbc.pc(), 0x7792);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00E4
        gbc.setState(0xefa0, 0x46b0, 0xc520, 0x2b2f, 0x1c7f, 0x45e6, 0x1, 0x1);
        gbc.writeMem(0xefa0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x46b0);
        EXPECT(gbc.pc(), 0xefa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefa0), 0xcb);
        EXPECT(gbc.readMem(0xefa1), 0x6b);
        // CB 6B 00E5
        gbc.setState(0x1532, 0x318, 0x4e90, 0xdaae, 0xdd6f, 0x4485, 0x0, 0x1);
        gbc.writeMem(0x1532, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x318);
        EXPECT(gbc.pc(), 0x1534);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00E6
        gbc.setState(0x5d2a, 0x2706, 0xcee0, 0x4675, 0xf334, 0x8142, 0x0, 0x1);
        gbc.writeMem(0x5d2a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x2706);
        EXPECT(gbc.pc(), 0x5d2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00E9
        gbc.setState(0x1ed0, 0x23b2, 0x8910, 0xc146, 0x92ad, 0xf7db, 0x0, 0x0);
        gbc.writeMem(0x1ed0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x23b2);
        EXPECT(gbc.pc(), 0x1ed2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00EA
        gbc.setState(0x7dbe, 0x62d6, 0xfc30, 0xe158, 0x637b, 0x80a9, 0x0, 0x0);
        gbc.writeMem(0x7dbe, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x62d6);
        EXPECT(gbc.pc(), 0x7dc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00EB
        gbc.setState(0xac41, 0x4711, 0xcf70, 0x2a4, 0x5275, 0x4064, 0x0, 0x0);
        gbc.writeMem(0xac41, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x4711);
        EXPECT(gbc.pc(), 0xac43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac41), 0xcb);
        EXPECT(gbc.readMem(0xac42), 0x6b);
        // CB 6B 00EC
        gbc.setState(0x7106, 0x56a3, 0x4350, 0xccaf, 0xeec8, 0x522d, 0x0, 0x0);
        gbc.writeMem(0x7106, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x56a3);
        EXPECT(gbc.pc(), 0x7108);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00ED
        gbc.setState(0x9b7, 0x8da2, 0xf940, 0x4648, 0x8aec, 0xd29f, 0x1, 0x1);
        gbc.writeMem(0x9b7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x8da2);
        EXPECT(gbc.pc(), 0x9b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00EE
        gbc.setState(0xa490, 0xa7a6, 0x78c0, 0x8739, 0xa59b, 0x71f1, 0x0, 0x0);
        gbc.writeMem(0xa490, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xa7a6);
        EXPECT(gbc.pc(), 0xa492);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa490), 0xcb);
        EXPECT(gbc.readMem(0xa491), 0x6b);
        // CB 6B 00EF
        gbc.setState(0xc175, 0xa453, 0xe330, 0x759e, 0x3955, 0xabb2, 0x0, 0x1);
        gbc.writeMem(0xc175, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xa453);
        EXPECT(gbc.pc(), 0xc177);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc175), 0xcb);
        EXPECT(gbc.readMem(0xc176), 0x6b);
        // CB 6B 00F0
        gbc.setState(0xa699, 0x4b9b, 0x6080, 0x12cf, 0x122e, 0x15e2, 0x1, 0x0);
        gbc.writeMem(0xa699, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x4b9b);
        EXPECT(gbc.pc(), 0xa69b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa699), 0xcb);
        EXPECT(gbc.readMem(0xa69a), 0x6b);
        // CB 6B 00F1
        gbc.setState(0x6e80, 0xfe5d, 0xbfe0, 0xaf5, 0x546, 0xea2e, 0x0, 0x1);
        gbc.writeMem(0x6e80, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xfe5d);
        EXPECT(gbc.pc(), 0x6e82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 00F2
        gbc.setState(0x9795, 0x5cd0, 0x48f0, 0x8195, 0xeff9, 0xd3f5, 0x0, 0x0);
        gbc.writeMem(0x9795, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x5cd0);
        EXPECT(gbc.pc(), 0x9797);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9795), 0xcb);
        EXPECT(gbc.readMem(0x9796), 0x6b);
        // CB 6B 00F3
        gbc.setState(0xd625, 0x4959, 0x5e60, 0xffff, 0x36e6, 0x78f3, 0x0, 0x0);
        gbc.writeMem(0xd625, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x4959);
        EXPECT(gbc.pc(), 0xd627);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd625), 0xcb);
        EXPECT(gbc.readMem(0xd626), 0x6b);
        // CB 6B 00F4
        gbc.setState(0xc160, 0x525b, 0x9880, 0xcf82, 0xe468, 0xe081, 0x1, 0x0);
        gbc.writeMem(0xc160, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x525b);
        EXPECT(gbc.pc(), 0xc162);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc160), 0xcb);
        EXPECT(gbc.readMem(0xc161), 0x6b);
        // CB 6B 00F5
        gbc.setState(0xbad0, 0x6ef8, 0xf0c0, 0xa545, 0xd275, 0x5918, 0x1, 0x1);
        gbc.writeMem(0xbad0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x6ef8);
        EXPECT(gbc.pc(), 0xbad2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbad0), 0xcb);
        EXPECT(gbc.readMem(0xbad1), 0x6b);
        // CB 6B 00F6
        gbc.setState(0xe49c, 0xbdc, 0xa3a0, 0xfcc5, 0x93de, 0xc46c, 0x0, 0x1);
        gbc.writeMem(0xe49c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xbdc);
        EXPECT(gbc.pc(), 0xe49e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe49c), 0xcb);
        EXPECT(gbc.readMem(0xe49d), 0x6b);
        // CB 6B 00F8
        gbc.setState(0x4e13, 0x2b79, 0xf630, 0xbdb5, 0x172f, 0x303d, 0x1, 0x1);
        gbc.writeMem(0x4e13, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x2b79);
        EXPECT(gbc.pc(), 0x4e15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00F9
        gbc.setState(0xe6c4, 0xa05a, 0x6520, 0x7c8e, 0xc959, 0xeb3c, 0x0, 0x1);
        gbc.writeMem(0xe6c4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xa05a);
        EXPECT(gbc.pc(), 0xe6c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6c4), 0xcb);
        EXPECT(gbc.readMem(0xe6c5), 0x6b);
        // CB 6B 00FA
        gbc.setState(0xe9a1, 0x653e, 0xfad0, 0x39b6, 0xcb03, 0xa676, 0x0, 0x0);
        gbc.writeMem(0xe9a1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x653e);
        EXPECT(gbc.pc(), 0xe9a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9a1), 0xcb);
        EXPECT(gbc.readMem(0xe9a2), 0x6b);
        // CB 6B 00FB
        gbc.setState(0x7899, 0x5143, 0x4f10, 0xd8f7, 0x711, 0x7f24, 0x1, 0x1);
        gbc.writeMem(0x7899, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x5143);
        EXPECT(gbc.pc(), 0x789b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00FC
        gbc.setState(0x5ef8, 0x86be, 0xf090, 0xa24d, 0xbd1c, 0x7265, 0x1, 0x1);
        gbc.writeMem(0x5ef8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x86be);
        EXPECT(gbc.pc(), 0x5efa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00FD
        gbc.setState(0xbe35, 0xf7c1, 0xf040, 0xc702, 0x8abb, 0xfa48, 0x1, 0x0);
        gbc.writeMem(0xbe35, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xf7c1);
        EXPECT(gbc.pc(), 0xbe37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe35), 0xcb);
        EXPECT(gbc.readMem(0xbe36), 0x6b);
        // CB 6B 00FE
        gbc.setState(0x5dd3, 0xe676, 0xe150, 0x726c, 0x3c52, 0x817f, 0x1, 0x1);
        gbc.writeMem(0x5dd3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xe676);
        EXPECT(gbc.pc(), 0x5dd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 00FF
        gbc.setState(0xb428, 0x9a06, 0x1040, 0x4db1, 0x9039, 0x4757, 0x0, 0x1);
        gbc.writeMem(0xb428, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x9a06);
        EXPECT(gbc.pc(), 0xb42a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb428), 0xcb);
        EXPECT(gbc.readMem(0xb429), 0x6b);
        // CB 6B 0100
        gbc.setState(0x6601, 0xbeff, 0x6470, 0xea3a, 0x8592, 0x4ce1, 0x1, 0x0);
        gbc.writeMem(0x6601, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xbeff);
        EXPECT(gbc.pc(), 0x6603);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0101
        gbc.setState(0x407f, 0xd962, 0x1250, 0x596a, 0x633c, 0x57a6, 0x0, 0x1);
        gbc.writeMem(0x407f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd962);
        EXPECT(gbc.pc(), 0x4081);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0102
        gbc.setState(0x5130, 0x5fe5, 0xf240, 0x1889, 0x488e, 0x660c, 0x0, 0x1);
        gbc.writeMem(0x5130, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x5fe5);
        EXPECT(gbc.pc(), 0x5132);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0104
        gbc.setState(0xa69b, 0x2bb7, 0x520, 0x943a, 0xcfa0, 0x81b7, 0x1, 0x1);
        gbc.writeMem(0xa69b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x2bb7);
        EXPECT(gbc.pc(), 0xa69d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa69b), 0xcb);
        EXPECT(gbc.readMem(0xa69c), 0x6b);
        // CB 6B 0105
        gbc.setState(0x5ae5, 0x9e7a, 0x9e10, 0x4720, 0xa84b, 0xed80, 0x1, 0x1);
        gbc.writeMem(0x5ae5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x9e7a);
        EXPECT(gbc.pc(), 0x5ae7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0106
        gbc.setState(0xebf5, 0xbfd6, 0x40a0, 0x7aab, 0xb6e1, 0x3c5e, 0x0, 0x0);
        gbc.writeMem(0xebf5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xbfd6);
        EXPECT(gbc.pc(), 0xebf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebf5), 0xcb);
        EXPECT(gbc.readMem(0xebf6), 0x6b);
        // CB 6B 0107
        gbc.setState(0x3d4, 0x1a5a, 0x7910, 0xeaa2, 0x2d2d, 0xbc8a, 0x0, 0x0);
        gbc.writeMem(0x3d4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x1a5a);
        EXPECT(gbc.pc(), 0x3d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0108
        gbc.setState(0xd10d, 0x25ed, 0x84e0, 0xf6a5, 0xcf4a, 0xfa5, 0x0, 0x0);
        gbc.writeMem(0xd10d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x25ed);
        EXPECT(gbc.pc(), 0xd10f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd10d), 0xcb);
        EXPECT(gbc.readMem(0xd10e), 0x6b);
        // CB 6B 0109
        gbc.setState(0xda32, 0x8cd7, 0xd450, 0x2408, 0x3f4e, 0x8c8e, 0x0, 0x1);
        gbc.writeMem(0xda32, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x8cd7);
        EXPECT(gbc.pc(), 0xda34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda32), 0xcb);
        EXPECT(gbc.readMem(0xda33), 0x6b);
        // CB 6B 010A
        gbc.setState(0xc1b6, 0xfd3e, 0x9980, 0x30a3, 0x5de8, 0xe2a8, 0x1, 0x0);
        gbc.writeMem(0xc1b6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xfd3e);
        EXPECT(gbc.pc(), 0xc1b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1b6), 0xcb);
        EXPECT(gbc.readMem(0xc1b7), 0x6b);
        // CB 6B 010B
        gbc.setState(0x1cb4, 0x78fc, 0x750, 0x3bc0, 0xfad3, 0x7f0f, 0x1, 0x0);
        gbc.writeMem(0x1cb4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x78fc);
        EXPECT(gbc.pc(), 0x1cb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 010C
        gbc.setState(0x718e, 0x78d3, 0xa400, 0xc5aa, 0xa9bd, 0x7803, 0x0, 0x1);
        gbc.writeMem(0x718e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x78d3);
        EXPECT(gbc.pc(), 0x7190);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 010D
        gbc.setState(0x3841, 0xe64, 0x97f0, 0x5d3, 0x1313, 0xe4ca, 0x0, 0x1);
        gbc.writeMem(0x3841, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xe64);
        EXPECT(gbc.pc(), 0x3843);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 010E
        gbc.setState(0x613f, 0xf785, 0xfb30, 0x8a1a, 0x5b, 0xc0d0, 0x0, 0x1);
        gbc.writeMem(0x613f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xf785);
        EXPECT(gbc.pc(), 0x6141);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 010F
        gbc.setState(0x9f32, 0x81e2, 0xf420, 0xc2bc, 0x7691, 0xec25, 0x1, 0x0);
        gbc.writeMem(0x9f32, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x81e2);
        EXPECT(gbc.pc(), 0x9f34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f32), 0xcb);
        EXPECT(gbc.readMem(0x9f33), 0x6b);
        // CB 6B 0110
        gbc.setState(0x591, 0xc08f, 0x7c30, 0x1299, 0x1874, 0xedbd, 0x1, 0x1);
        gbc.writeMem(0x591, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xc08f);
        EXPECT(gbc.pc(), 0x593);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0111
        gbc.setState(0x3039, 0x372e, 0x9390, 0x9d8e, 0x4830, 0xd2e3, 0x0, 0x1);
        gbc.writeMem(0x3039, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x372e);
        EXPECT(gbc.pc(), 0x303b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0112
        gbc.setState(0xdcd3, 0xf228, 0xa910, 0x2486, 0xf95e, 0xc005, 0x1, 0x0);
        gbc.writeMem(0xdcd3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xf228);
        EXPECT(gbc.pc(), 0xdcd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcd3), 0xcb);
        EXPECT(gbc.readMem(0xdcd4), 0x6b);
        // CB 6B 0113
        gbc.setState(0xccab, 0xdb6a, 0xd530, 0xa987, 0x2875, 0x2356, 0x1, 0x0);
        gbc.writeMem(0xccab, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xdb6a);
        EXPECT(gbc.pc(), 0xccad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccab), 0xcb);
        EXPECT(gbc.readMem(0xccac), 0x6b);
        // CB 6B 0114
        gbc.setState(0x76e2, 0x9e80, 0x96d0, 0x2d20, 0x69b7, 0x440c, 0x0, 0x1);
        gbc.writeMem(0x76e2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x9e80);
        EXPECT(gbc.pc(), 0x76e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0115
        gbc.setState(0x973e, 0x821e, 0xd960, 0xcee9, 0x4729, 0x4c97, 0x1, 0x1);
        gbc.writeMem(0x973e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x821e);
        EXPECT(gbc.pc(), 0x9740);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x973e), 0xcb);
        EXPECT(gbc.readMem(0x973f), 0x6b);
        // CB 6B 0117
        gbc.setState(0xddd0, 0x872c, 0x7e50, 0xa340, 0xde22, 0xa47c, 0x1, 0x1);
        gbc.writeMem(0xddd0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x872c);
        EXPECT(gbc.pc(), 0xddd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddd0), 0xcb);
        EXPECT(gbc.readMem(0xddd1), 0x6b);
        // CB 6B 0118
        gbc.setState(0xd35a, 0xa840, 0xfcc0, 0x718d, 0x4284, 0x6c39, 0x1, 0x0);
        gbc.writeMem(0xd35a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xa840);
        EXPECT(gbc.pc(), 0xd35c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd35a), 0xcb);
        EXPECT(gbc.readMem(0xd35b), 0x6b);
        // CB 6B 0119
        gbc.setState(0x8f79, 0x7c61, 0x1730, 0x5b6, 0xbf64, 0x7489, 0x1, 0x1);
        gbc.writeMem(0x8f79, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x7c61);
        EXPECT(gbc.pc(), 0x8f7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f79), 0xcb);
        EXPECT(gbc.readMem(0x8f7a), 0x6b);
        // CB 6B 011B
        gbc.setState(0x1771, 0x7fd6, 0xd820, 0x9567, 0x2426, 0x527, 0x1, 0x1);
        gbc.writeMem(0x1771, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x7fd6);
        EXPECT(gbc.pc(), 0x1773);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 011C
        gbc.setState(0xc202, 0x5f75, 0x4ec0, 0xdde8, 0x8d3b, 0x568b, 0x1, 0x0);
        gbc.writeMem(0xc202, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x5f75);
        EXPECT(gbc.pc(), 0xc204);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc202), 0xcb);
        EXPECT(gbc.readMem(0xc203), 0x6b);
        // CB 6B 011D
        gbc.setState(0x368b, 0x8a6b, 0x2a70, 0xb0bd, 0xa8eb, 0x9417, 0x0, 0x0);
        gbc.writeMem(0x368b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x8a6b);
        EXPECT(gbc.pc(), 0x368d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 011E
        gbc.setState(0xd12f, 0x11e7, 0xf5c0, 0xd0f5, 0x6e2, 0x1806, 0x1, 0x0);
        gbc.writeMem(0xd12f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x11e7);
        EXPECT(gbc.pc(), 0xd131);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd12f), 0xcb);
        EXPECT(gbc.readMem(0xd130), 0x6b);
        // CB 6B 011F
        gbc.setState(0x6214, 0xbd3b, 0x6c30, 0x5795, 0x7717, 0x7c16, 0x1, 0x1);
        gbc.writeMem(0x6214, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xbd3b);
        EXPECT(gbc.pc(), 0x6216);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0120
        gbc.setState(0x63fa, 0xe55b, 0x6760, 0xbd49, 0x26e4, 0x80ff, 0x1, 0x0);
        gbc.writeMem(0x63fa, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xe55b);
        EXPECT(gbc.pc(), 0x63fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0122
        gbc.setState(0x9b0b, 0x1e1c, 0xdc80, 0x9682, 0xe9bc, 0x1c4d, 0x1, 0x1);
        gbc.writeMem(0x9b0b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1e1c);
        EXPECT(gbc.pc(), 0x9b0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b0b), 0xcb);
        EXPECT(gbc.readMem(0x9b0c), 0x6b);
        // CB 6B 0123
        gbc.setState(0x4fee, 0x239, 0x38b0, 0xc345, 0xe176, 0xc65c, 0x1, 0x1);
        gbc.writeMem(0x4fee, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x239);
        EXPECT(gbc.pc(), 0x4ff0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0124
        gbc.setState(0x4e71, 0xcec5, 0x82a0, 0x4e07, 0x391, 0xa2f5, 0x1, 0x0);
        gbc.writeMem(0x4e71, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xcec5);
        EXPECT(gbc.pc(), 0x4e73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0125
        gbc.setState(0x8b5, 0x225b, 0x9710, 0xcdd4, 0xdb81, 0xc877, 0x1, 0x0);
        gbc.writeMem(0x8b5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x225b);
        EXPECT(gbc.pc(), 0x8b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0126
        gbc.setState(0x1c43, 0x6f59, 0x7790, 0xa72f, 0xccb8, 0xddb1, 0x0, 0x0);
        gbc.writeMem(0x1c43, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x6f59);
        EXPECT(gbc.pc(), 0x1c45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0127
        gbc.setState(0xc205, 0xe4dc, 0x8910, 0x5870, 0x847a, 0xf32b, 0x1, 0x0);
        gbc.writeMem(0xc205, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xe4dc);
        EXPECT(gbc.pc(), 0xc207);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc205), 0xcb);
        EXPECT(gbc.readMem(0xc206), 0x6b);
        // CB 6B 0129
        gbc.setState(0xab9d, 0xa87a, 0x55d0, 0x8ab3, 0xa2c4, 0xa8f7, 0x0, 0x1);
        gbc.writeMem(0xab9d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xa87a);
        EXPECT(gbc.pc(), 0xab9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab9d), 0xcb);
        EXPECT(gbc.readMem(0xab9e), 0x6b);
        // CB 6B 012A
        gbc.setState(0x24e, 0x4d4a, 0x7ae0, 0x6a4a, 0xd370, 0x4e6a, 0x0, 0x0);
        gbc.writeMem(0x24e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x4d4a);
        EXPECT(gbc.pc(), 0x250);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 012B
        gbc.setState(0x9a99, 0x19e0, 0x9190, 0x6172, 0xcc0e, 0xddcb, 0x0, 0x1);
        gbc.writeMem(0x9a99, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x19e0);
        EXPECT(gbc.pc(), 0x9a9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a99), 0xcb);
        EXPECT(gbc.readMem(0x9a9a), 0x6b);
        // CB 6B 012C
        gbc.setState(0xac1, 0x5eb, 0xa200, 0x5f80, 0x467c, 0x8d3d, 0x1, 0x1);
        gbc.writeMem(0xac1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x5eb);
        EXPECT(gbc.pc(), 0xac3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 012D
        gbc.setState(0xd90, 0xd7de, 0xb240, 0x8ed6, 0x1360, 0x928d, 0x1, 0x1);
        gbc.writeMem(0xd90, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xd7de);
        EXPECT(gbc.pc(), 0xd92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 012E
        gbc.setState(0x6611, 0x3181, 0x8570, 0xa45, 0xbf65, 0x957f, 0x0, 0x1);
        gbc.writeMem(0x6611, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x3181);
        EXPECT(gbc.pc(), 0x6613);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 012F
        gbc.setState(0xc9f9, 0x1477, 0x53f0, 0x205e, 0x4feb, 0x2b58, 0x0, 0x1);
        gbc.writeMem(0xc9f9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x1477);
        EXPECT(gbc.pc(), 0xc9fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9f9), 0xcb);
        EXPECT(gbc.readMem(0xc9fa), 0x6b);
        // CB 6B 0130
        gbc.setState(0x970b, 0xe4c8, 0x4210, 0xd193, 0xedb, 0x8aaa, 0x1, 0x0);
        gbc.writeMem(0x970b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xe4c8);
        EXPECT(gbc.pc(), 0x970d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x970b), 0xcb);
        EXPECT(gbc.readMem(0x970c), 0x6b);
        // CB 6B 0131
        gbc.setState(0xca2c, 0x7267, 0x5dd0, 0x2839, 0xea6d, 0x57b4, 0x0, 0x1);
        gbc.writeMem(0xca2c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x7267);
        EXPECT(gbc.pc(), 0xca2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca2c), 0xcb);
        EXPECT(gbc.readMem(0xca2d), 0x6b);
        // CB 6B 0132
        gbc.setState(0x1e5d, 0xa548, 0x5d50, 0x3206, 0x93b4, 0x5a66, 0x0, 0x0);
        gbc.writeMem(0x1e5d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xa548);
        EXPECT(gbc.pc(), 0x1e5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0133
        gbc.setState(0x664, 0x9251, 0x78c0, 0x6bc0, 0xea2a, 0xfd34, 0x0, 0x0);
        gbc.writeMem(0x664, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x9251);
        EXPECT(gbc.pc(), 0x666);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0134
        gbc.setState(0xe659, 0xa5, 0x4340, 0x9ab2, 0x3830, 0x197d, 0x0, 0x1);
        gbc.writeMem(0xe659, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xa5);
        EXPECT(gbc.pc(), 0xe65b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe659), 0xcb);
        EXPECT(gbc.readMem(0xe65a), 0x6b);
        // CB 6B 0135
        gbc.setState(0xf87, 0x6b97, 0xd1a0, 0x9591, 0xe88b, 0xdfed, 0x0, 0x0);
        gbc.writeMem(0xf87, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x6b97);
        EXPECT(gbc.pc(), 0xf89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0136
        gbc.setState(0xa7d1, 0xe87a, 0x8050, 0x24f7, 0x720f, 0x7d57, 0x0, 0x1);
        gbc.writeMem(0xa7d1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xe87a);
        EXPECT(gbc.pc(), 0xa7d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7d1), 0xcb);
        EXPECT(gbc.readMem(0xa7d2), 0x6b);
        // CB 6B 0138
        gbc.setState(0x80e8, 0xec66, 0x7ae0, 0x7c2f, 0x5594, 0xdda4, 0x1, 0x0);
        gbc.writeMem(0x80e8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xec66);
        EXPECT(gbc.pc(), 0x80ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80e8), 0xcb);
        EXPECT(gbc.readMem(0x80e9), 0x6b);
        // CB 6B 0139
        gbc.setState(0xa007, 0x28ec, 0xb0a0, 0xd6d6, 0x530, 0xece6, 0x1, 0x1);
        gbc.writeMem(0xa007, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x28ec);
        EXPECT(gbc.pc(), 0xa009);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa007), 0xcb);
        EXPECT(gbc.readMem(0xa008), 0x6b);
        // CB 6B 013A
        gbc.setState(0x50ef, 0x6b65, 0x3b70, 0xd312, 0x57f, 0x5c4, 0x0, 0x0);
        gbc.writeMem(0x50ef, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x6b65);
        EXPECT(gbc.pc(), 0x50f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 013C
        gbc.setState(0x12c8, 0xbf58, 0xb290, 0xd250, 0xd64d, 0xeb0, 0x0, 0x1);
        gbc.writeMem(0x12c8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xbf58);
        EXPECT(gbc.pc(), 0x12ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 013D
        gbc.setState(0xabb7, 0xa3a3, 0xf90, 0x2f64, 0x9d57, 0x2da4, 0x1, 0x0);
        gbc.writeMem(0xabb7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xa3a3);
        EXPECT(gbc.pc(), 0xabb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabb7), 0xcb);
        EXPECT(gbc.readMem(0xabb8), 0x6b);
        // CB 6B 013E
        gbc.setState(0x4b70, 0x16e7, 0x5940, 0xda35, 0x2a31, 0xd208, 0x0, 0x0);
        gbc.writeMem(0x4b70, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x16e7);
        EXPECT(gbc.pc(), 0x4b72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 013F
        gbc.setState(0x88c4, 0x1758, 0x51e0, 0xa392, 0x7479, 0xe480, 0x1, 0x1);
        gbc.writeMem(0x88c4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x1758);
        EXPECT(gbc.pc(), 0x88c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88c4), 0xcb);
        EXPECT(gbc.readMem(0x88c5), 0x6b);
        // CB 6B 0140
        gbc.setState(0xd022, 0x4378, 0xb60, 0xd94, 0xd653, 0x2bf, 0x0, 0x1);
        gbc.writeMem(0xd022, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x4378);
        EXPECT(gbc.pc(), 0xd024);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd022), 0xcb);
        EXPECT(gbc.readMem(0xd023), 0x6b);
        // CB 6B 0141
        gbc.setState(0x22b0, 0xcfad, 0xbcd0, 0x689, 0x3a61, 0xb721, 0x1, 0x0);
        gbc.writeMem(0x22b0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xcfad);
        EXPECT(gbc.pc(), 0x22b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0142
        gbc.setState(0xa02c, 0x1e53, 0x8c40, 0x7805, 0x9181, 0x3990, 0x0, 0x1);
        gbc.writeMem(0xa02c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x1e53);
        EXPECT(gbc.pc(), 0xa02e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa02c), 0xcb);
        EXPECT(gbc.readMem(0xa02d), 0x6b);
        // CB 6B 0143
        gbc.setState(0x9b1e, 0xb293, 0x3370, 0xa8c0, 0xf51f, 0xa2f5, 0x0, 0x0);
        gbc.writeMem(0x9b1e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xb293);
        EXPECT(gbc.pc(), 0x9b20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b1e), 0xcb);
        EXPECT(gbc.readMem(0x9b1f), 0x6b);
        // CB 6B 0144
        gbc.setState(0x299d, 0x9ed2, 0xd7b0, 0x9ae9, 0xba95, 0x1f73, 0x0, 0x1);
        gbc.writeMem(0x299d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x9ed2);
        EXPECT(gbc.pc(), 0x299f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0147
        gbc.setState(0x7a91, 0xd5e7, 0xc3c0, 0x7443, 0x9657, 0x3ce, 0x1, 0x1);
        gbc.writeMem(0x7a91, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xd5e7);
        EXPECT(gbc.pc(), 0x7a93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0148
        gbc.setState(0x59d1, 0x6832, 0x5330, 0xf061, 0x402f, 0xb007, 0x1, 0x1);
        gbc.writeMem(0x59d1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x6832);
        EXPECT(gbc.pc(), 0x59d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0149
        gbc.setState(0x1bf5, 0x280, 0xae0, 0x40a5, 0xc785, 0x8393, 0x1, 0x0);
        gbc.writeMem(0x1bf5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x280);
        EXPECT(gbc.pc(), 0x1bf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 014A
        gbc.setState(0x3dc8, 0x2649, 0xdd10, 0x8645, 0x477, 0x98d6, 0x0, 0x0);
        gbc.writeMem(0x3dc8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x2649);
        EXPECT(gbc.pc(), 0x3dca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 014B
        gbc.setState(0x7e85, 0x5c5a, 0x2040, 0xb78e, 0xf625, 0xea32, 0x0, 0x0);
        gbc.writeMem(0x7e85, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x5c5a);
        EXPECT(gbc.pc(), 0x7e87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 014C
        gbc.setState(0xb4a5, 0xeb7f, 0x4d60, 0x7c08, 0x561f, 0x6fe2, 0x0, 0x0);
        gbc.writeMem(0xb4a5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xeb7f);
        EXPECT(gbc.pc(), 0xb4a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4a5), 0xcb);
        EXPECT(gbc.readMem(0xb4a6), 0x6b);
        // CB 6B 014D
        gbc.setState(0x2f2a, 0x7d86, 0x7ae0, 0x594, 0x6619, 0x44e1, 0x1, 0x1);
        gbc.writeMem(0x2f2a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x7d86);
        EXPECT(gbc.pc(), 0x2f2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 014E
        gbc.setState(0xde7d, 0xced1, 0xafb0, 0x1aed, 0xe48a, 0x73fa, 0x0, 0x1);
        gbc.writeMem(0xde7d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xced1);
        EXPECT(gbc.pc(), 0xde7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde7d), 0xcb);
        EXPECT(gbc.readMem(0xde7e), 0x6b);
        // CB 6B 014F
        gbc.setState(0x52e3, 0xb92a, 0x4ef0, 0xe0f2, 0x62f2, 0x18a9, 0x0, 0x0);
        gbc.writeMem(0x52e3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xb92a);
        EXPECT(gbc.pc(), 0x52e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0150
        gbc.setState(0x15e0, 0x7721, 0x7000, 0xe9dd, 0xdac8, 0x9ac5, 0x1, 0x0);
        gbc.writeMem(0x15e0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x7721);
        EXPECT(gbc.pc(), 0x15e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0151
        gbc.setState(0x8095, 0xe2e8, 0xbda0, 0xfc44, 0x39e9, 0x72f7, 0x1, 0x1);
        gbc.writeMem(0x8095, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xe2e8);
        EXPECT(gbc.pc(), 0x8097);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8095), 0xcb);
        EXPECT(gbc.readMem(0x8096), 0x6b);
        // CB 6B 0152
        gbc.setState(0x1ddf, 0x55f0, 0x3fa0, 0xc4c9, 0xc0ca, 0x6140, 0x1, 0x1);
        gbc.writeMem(0x1ddf, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x55f0);
        EXPECT(gbc.pc(), 0x1de1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0153
        gbc.setState(0x933e, 0x3884, 0xa060, 0x6b09, 0xf8bc, 0xd523, 0x1, 0x1);
        gbc.writeMem(0x933e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x3884);
        EXPECT(gbc.pc(), 0x9340);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x933e), 0xcb);
        EXPECT(gbc.readMem(0x933f), 0x6b);
        // CB 6B 0154
        gbc.setState(0xc72c, 0xdbe8, 0x7150, 0xb03a, 0x5b6a, 0x5392, 0x0, 0x1);
        gbc.writeMem(0xc72c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xdbe8);
        EXPECT(gbc.pc(), 0xc72e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc72c), 0xcb);
        EXPECT(gbc.readMem(0xc72d), 0x6b);
        // CB 6B 0155
        gbc.setState(0xa30c, 0x7961, 0xb350, 0x7b89, 0x6496, 0xaed2, 0x1, 0x0);
        gbc.writeMem(0xa30c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x7961);
        EXPECT(gbc.pc(), 0xa30e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa30c), 0xcb);
        EXPECT(gbc.readMem(0xa30d), 0x6b);
        // CB 6B 0156
        gbc.setState(0x8714, 0x720b, 0x62d0, 0x41b4, 0x5de4, 0x19ee, 0x1, 0x1);
        gbc.writeMem(0x8714, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x720b);
        EXPECT(gbc.pc(), 0x8716);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8714), 0xcb);
        EXPECT(gbc.readMem(0x8715), 0x6b);
        // CB 6B 0157
        gbc.setState(0xed4b, 0x476e, 0x55f0, 0xf559, 0xad20, 0xa4b3, 0x1, 0x0);
        gbc.writeMem(0xed4b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x476e);
        EXPECT(gbc.pc(), 0xed4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed4b), 0xcb);
        EXPECT(gbc.readMem(0xed4c), 0x6b);
        // CB 6B 0158
        gbc.setState(0xe7d6, 0xfae3, 0x2540, 0xdc72, 0xcf1e, 0xb0b5, 0x0, 0x0);
        gbc.writeMem(0xe7d6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xfae3);
        EXPECT(gbc.pc(), 0xe7d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7d6), 0xcb);
        EXPECT(gbc.readMem(0xe7d7), 0x6b);
        // CB 6B 0159
        gbc.setState(0x9ba5, 0xf9a8, 0xa550, 0x8cac, 0x126, 0x23fd, 0x0, 0x0);
        gbc.writeMem(0x9ba5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xf9a8);
        EXPECT(gbc.pc(), 0x9ba7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ba5), 0xcb);
        EXPECT(gbc.readMem(0x9ba6), 0x6b);
        // CB 6B 015A
        gbc.setState(0xba5, 0x3865, 0x8610, 0x820b, 0x1014, 0xd6be, 0x1, 0x0);
        gbc.writeMem(0xba5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x3865);
        EXPECT(gbc.pc(), 0xba7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 015B
        gbc.setState(0xe233, 0x90f9, 0x49d0, 0xee91, 0x481c, 0xec08, 0x0, 0x0);
        gbc.writeMem(0xe233, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x90f9);
        EXPECT(gbc.pc(), 0xe235);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe233), 0xcb);
        EXPECT(gbc.readMem(0xe234), 0x6b);
        // CB 6B 015C
        gbc.setState(0xa164, 0xfd6f, 0x67e0, 0x7253, 0x4b9b, 0xeb9c, 0x0, 0x1);
        gbc.writeMem(0xa164, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xfd6f);
        EXPECT(gbc.pc(), 0xa166);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa164), 0xcb);
        EXPECT(gbc.readMem(0xa165), 0x6b);
        // CB 6B 015D
        gbc.setState(0x97c3, 0x9440, 0xfb00, 0x2514, 0x82, 0x62c3, 0x1, 0x1);
        gbc.writeMem(0x97c3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x9440);
        EXPECT(gbc.pc(), 0x97c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97c3), 0xcb);
        EXPECT(gbc.readMem(0x97c4), 0x6b);
        // CB 6B 015E
        gbc.setState(0xcb06, 0xa8f, 0x87c0, 0x1535, 0x6093, 0x1d5f, 0x0, 0x1);
        gbc.writeMem(0xcb06, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xa8f);
        EXPECT(gbc.pc(), 0xcb08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb06), 0xcb);
        EXPECT(gbc.readMem(0xcb07), 0x6b);
        // CB 6B 015F
        gbc.setState(0xcd13, 0xa9f3, 0x6f90, 0xbcc7, 0xd298, 0xd190, 0x1, 0x0);
        gbc.writeMem(0xcd13, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xa9f3);
        EXPECT(gbc.pc(), 0xcd15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd13), 0xcb);
        EXPECT(gbc.readMem(0xcd14), 0x6b);
        // CB 6B 0160
        gbc.setState(0x9e3b, 0x50fc, 0x3740, 0x57fe, 0xda21, 0x97dd, 0x1, 0x1);
        gbc.writeMem(0x9e3b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x50fc);
        EXPECT(gbc.pc(), 0x9e3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e3b), 0xcb);
        EXPECT(gbc.readMem(0x9e3c), 0x6b);
        // CB 6B 0161
        gbc.setState(0x9611, 0xb4a1, 0x3f70, 0x8c, 0xf43d, 0x7739, 0x0, 0x1);
        gbc.writeMem(0x9611, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xb4a1);
        EXPECT(gbc.pc(), 0x9613);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9611), 0xcb);
        EXPECT(gbc.readMem(0x9612), 0x6b);
        // CB 6B 0162
        gbc.setState(0x2c75, 0x4c30, 0x9070, 0xb71, 0x2d61, 0xed23, 0x0, 0x0);
        gbc.writeMem(0x2c75, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x4c30);
        EXPECT(gbc.pc(), 0x2c77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0164
        gbc.setState(0x63b1, 0x7412, 0xd290, 0xdc22, 0x5a57, 0x8b68, 0x1, 0x0);
        gbc.writeMem(0x63b1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x7412);
        EXPECT(gbc.pc(), 0x63b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0165
        gbc.setState(0x2a64, 0x3b40, 0x4d40, 0xaf58, 0x483b, 0x6344, 0x1, 0x1);
        gbc.writeMem(0x2a64, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x3b40);
        EXPECT(gbc.pc(), 0x2a66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0166
        gbc.setState(0x19bc, 0xa6b5, 0x3710, 0x8ef8, 0xfc02, 0x990, 0x0, 0x0);
        gbc.writeMem(0x19bc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xa6b5);
        EXPECT(gbc.pc(), 0x19be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0167
        gbc.setState(0x3fb3, 0x3963, 0x5cd0, 0x1602, 0xc455, 0xc66f, 0x0, 0x1);
        gbc.writeMem(0x3fb3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x3963);
        EXPECT(gbc.pc(), 0x3fb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0168
        gbc.setState(0x16d6, 0x8a8b, 0xe120, 0x9400, 0x69b7, 0x4ccd, 0x1, 0x0);
        gbc.writeMem(0x16d6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x8a8b);
        EXPECT(gbc.pc(), 0x16d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0169
        gbc.setState(0x8cde, 0xea86, 0x4d50, 0xf249, 0x9cf, 0x4b2f, 0x0, 0x0);
        gbc.writeMem(0x8cde, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xea86);
        EXPECT(gbc.pc(), 0x8ce0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cde), 0xcb);
        EXPECT(gbc.readMem(0x8cdf), 0x6b);
        // CB 6B 016A
        gbc.setState(0xbe2d, 0xa147, 0x50b0, 0x7f48, 0xfc0c, 0x1ef8, 0x0, 0x0);
        gbc.writeMem(0xbe2d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xa147);
        EXPECT(gbc.pc(), 0xbe2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe2d), 0xcb);
        EXPECT(gbc.readMem(0xbe2e), 0x6b);
        // CB 6B 016B
        gbc.setState(0xd97e, 0xcb49, 0xa240, 0x5d96, 0x8c1, 0x9fa1, 0x0, 0x0);
        gbc.writeMem(0xd97e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xcb49);
        EXPECT(gbc.pc(), 0xd980);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd97e), 0xcb);
        EXPECT(gbc.readMem(0xd97f), 0x6b);
        // CB 6B 016C
        gbc.setState(0x3c41, 0x10f3, 0x4520, 0x5559, 0x121a, 0x734d, 0x0, 0x1);
        gbc.writeMem(0x3c41, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x10f3);
        EXPECT(gbc.pc(), 0x3c43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 016E
        gbc.setState(0x8636, 0xcc21, 0x1c30, 0x28f3, 0xc169, 0xa14, 0x1, 0x0);
        gbc.writeMem(0x8636, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xcc21);
        EXPECT(gbc.pc(), 0x8638);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8636), 0xcb);
        EXPECT(gbc.readMem(0x8637), 0x6b);
        // CB 6B 016F
        gbc.setState(0xae56, 0xadd5, 0x2920, 0x458d, 0x313b, 0x1a8, 0x1, 0x0);
        gbc.writeMem(0xae56, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xadd5);
        EXPECT(gbc.pc(), 0xae58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae56), 0xcb);
        EXPECT(gbc.readMem(0xae57), 0x6b);
        // CB 6B 0170
        gbc.setState(0xca96, 0xb42a, 0xbb00, 0xb5b6, 0xff94, 0x11, 0x1, 0x1);
        gbc.writeMem(0xca96, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xb42a);
        EXPECT(gbc.pc(), 0xca98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca96), 0xcb);
        EXPECT(gbc.readMem(0xca97), 0x6b);
        // CB 6B 0171
        gbc.setState(0x8d3b, 0x424c, 0xcf10, 0xd256, 0x991c, 0x2898, 0x0, 0x0);
        gbc.writeMem(0x8d3b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x424c);
        EXPECT(gbc.pc(), 0x8d3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d3b), 0xcb);
        EXPECT(gbc.readMem(0x8d3c), 0x6b);
        // CB 6B 0172
        gbc.setState(0x3b57, 0xc94b, 0xdb00, 0x8c33, 0x2fb2, 0xbc74, 0x0, 0x1);
        gbc.writeMem(0x3b57, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xc94b);
        EXPECT(gbc.pc(), 0x3b59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0173
        gbc.setState(0xdd39, 0x6b90, 0x1de0, 0xd5a7, 0x29c5, 0x7326, 0x1, 0x1);
        gbc.writeMem(0xdd39, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x6b90);
        EXPECT(gbc.pc(), 0xdd3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd39), 0xcb);
        EXPECT(gbc.readMem(0xdd3a), 0x6b);
        // CB 6B 0174
        gbc.setState(0x5bae, 0x35b1, 0x5610, 0x41b6, 0x3cb1, 0x7d46, 0x0, 0x1);
        gbc.writeMem(0x5bae, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x35b1);
        EXPECT(gbc.pc(), 0x5bb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0175
        gbc.setState(0x8935, 0xb142, 0x2510, 0xadf8, 0x5447, 0x536b, 0x0, 0x0);
        gbc.writeMem(0x8935, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xb142);
        EXPECT(gbc.pc(), 0x8937);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8935), 0xcb);
        EXPECT(gbc.readMem(0x8936), 0x6b);
        // CB 6B 0177
        gbc.setState(0x4be2, 0x9419, 0x7c0, 0xe68b, 0x3566, 0xdebb, 0x1, 0x0);
        gbc.writeMem(0x4be2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x9419);
        EXPECT(gbc.pc(), 0x4be4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0178
        gbc.setState(0xe452, 0x727a, 0x41e0, 0xbc21, 0xdd80, 0xcb3, 0x0, 0x1);
        gbc.writeMem(0xe452, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x727a);
        EXPECT(gbc.pc(), 0xe454);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe452), 0xcb);
        EXPECT(gbc.readMem(0xe453), 0x6b);
        // CB 6B 0179
        gbc.setState(0x547b, 0x375b, 0x7060, 0x7aa0, 0xaac8, 0x3044, 0x0, 0x1);
        gbc.writeMem(0x547b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x375b);
        EXPECT(gbc.pc(), 0x547d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 017A
        gbc.setState(0x6c71, 0x2f74, 0xc4d0, 0xe53e, 0x2cfb, 0x999d, 0x1, 0x0);
        gbc.writeMem(0x6c71, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x2f74);
        EXPECT(gbc.pc(), 0x6c73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 017B
        gbc.setState(0x6aa5, 0x4553, 0x32c0, 0xf99e, 0x66d6, 0xf2f3, 0x0, 0x0);
        gbc.writeMem(0x6aa5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x4553);
        EXPECT(gbc.pc(), 0x6aa7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 017C
        gbc.setState(0xa4e5, 0x8a58, 0x8360, 0xb940, 0x2c03, 0xa9e6, 0x0, 0x1);
        gbc.writeMem(0xa4e5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x8a58);
        EXPECT(gbc.pc(), 0xa4e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4e5), 0xcb);
        EXPECT(gbc.readMem(0xa4e6), 0x6b);
        // CB 6B 017D
        gbc.setState(0x654e, 0x4ad3, 0xb70, 0x9727, 0xe2bc, 0xa9ef, 0x0, 0x0);
        gbc.writeMem(0x654e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x4ad3);
        EXPECT(gbc.pc(), 0x6550);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 017E
        gbc.setState(0x5e0c, 0x7993, 0xa380, 0xea41, 0x1883, 0x9408, 0x1, 0x0);
        gbc.writeMem(0x5e0c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x7993);
        EXPECT(gbc.pc(), 0x5e0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 017F
        gbc.setState(0xb5cc, 0x371c, 0xa000, 0x33b, 0x2169, 0xca50, 0x1, 0x0);
        gbc.writeMem(0xb5cc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x371c);
        EXPECT(gbc.pc(), 0xb5ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5cc), 0xcb);
        EXPECT(gbc.readMem(0xb5cd), 0x6b);
        // CB 6B 0181
        gbc.setState(0x9a63, 0x784a, 0x6880, 0x1e3d, 0x695b, 0xc373, 0x1, 0x0);
        gbc.writeMem(0x9a63, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x784a);
        EXPECT(gbc.pc(), 0x9a65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a63), 0xcb);
        EXPECT(gbc.readMem(0x9a64), 0x6b);
        // CB 6B 0182
        gbc.setState(0xce08, 0xbda, 0x6080, 0x81df, 0xb932, 0xb29e, 0x0, 0x0);
        gbc.writeMem(0xce08, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xbda);
        EXPECT(gbc.pc(), 0xce0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce08), 0xcb);
        EXPECT(gbc.readMem(0xce09), 0x6b);
        // CB 6B 0184
        gbc.setState(0x8e19, 0xd814, 0x5e40, 0x7cec, 0x7ca9, 0x66d1, 0x1, 0x1);
        gbc.writeMem(0x8e19, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xd814);
        EXPECT(gbc.pc(), 0x8e1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e19), 0xcb);
        EXPECT(gbc.readMem(0x8e1a), 0x6b);
        // CB 6B 0185
        gbc.setState(0x3ef, 0x96ac, 0x1190, 0xbfe8, 0x5a8e, 0xc4bc, 0x1, 0x1);
        gbc.writeMem(0x3ef, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x96ac);
        EXPECT(gbc.pc(), 0x3f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0186
        gbc.setState(0x6ceb, 0xc164, 0xf90, 0x872c, 0x6561, 0x12e4, 0x0, 0x1);
        gbc.writeMem(0x6ceb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xc164);
        EXPECT(gbc.pc(), 0x6ced);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0187
        gbc.setState(0x9b57, 0x6afa, 0x52a0, 0xb646, 0x7c8b, 0x2cb, 0x1, 0x0);
        gbc.writeMem(0x9b57, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x6afa);
        EXPECT(gbc.pc(), 0x9b59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b57), 0xcb);
        EXPECT(gbc.readMem(0x9b58), 0x6b);
        // CB 6B 0188
        gbc.setState(0x990d, 0x657d, 0x3510, 0x731a, 0x7d70, 0x4805, 0x0, 0x0);
        gbc.writeMem(0x990d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x657d);
        EXPECT(gbc.pc(), 0x990f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x990d), 0xcb);
        EXPECT(gbc.readMem(0x990e), 0x6b);
        // CB 6B 0189
        gbc.setState(0x19ca, 0x3f86, 0x8430, 0xf213, 0x3a8d, 0xafd4, 0x1, 0x1);
        gbc.writeMem(0x19ca, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x3f86);
        EXPECT(gbc.pc(), 0x19cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 018A
        gbc.setState(0x6d72, 0xc015, 0x2a60, 0x96a, 0x5272, 0xbfb3, 0x1, 0x0);
        gbc.writeMem(0x6d72, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc015);
        EXPECT(gbc.pc(), 0x6d74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 018B
        gbc.setState(0x7317, 0x119a, 0x5bb0, 0xb03d, 0xaee2, 0x74a, 0x0, 0x0);
        gbc.writeMem(0x7317, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x119a);
        EXPECT(gbc.pc(), 0x7319);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 018C
        gbc.setState(0x524b, 0x8f58, 0x2e90, 0x63a1, 0xfcb3, 0x92c, 0x1, 0x0);
        gbc.writeMem(0x524b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x8f58);
        EXPECT(gbc.pc(), 0x524d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 018D
        gbc.setState(0xa774, 0x1b68, 0x74c0, 0x70f2, 0xbc3e, 0x6a7b, 0x1, 0x1);
        gbc.writeMem(0xa774, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x1b68);
        EXPECT(gbc.pc(), 0xa776);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa774), 0xcb);
        EXPECT(gbc.readMem(0xa775), 0x6b);
        // CB 6B 018E
        gbc.setState(0x5f50, 0x8a16, 0x5a00, 0x7a59, 0x7f36, 0x63b8, 0x0, 0x1);
        gbc.writeMem(0x5f50, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x8a16);
        EXPECT(gbc.pc(), 0x5f52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 018F
        gbc.setState(0x44f9, 0x7e1e, 0xb8d0, 0x23a, 0x69fb, 0xcda6, 0x0, 0x1);
        gbc.writeMem(0x44f9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x7e1e);
        EXPECT(gbc.pc(), 0x44fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0190
        gbc.setState(0x33b2, 0x2020, 0x9520, 0x8688, 0x817d, 0x6366, 0x0, 0x0);
        gbc.writeMem(0x33b2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x2020);
        EXPECT(gbc.pc(), 0x33b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0191
        gbc.setState(0x1a9b, 0x5ee3, 0xc2b0, 0xfc2d, 0xb7e3, 0x2ee0, 0x1, 0x0);
        gbc.writeMem(0x1a9b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x5ee3);
        EXPECT(gbc.pc(), 0x1a9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0192
        gbc.setState(0x760a, 0x59f, 0xd8b0, 0x5910, 0xc347, 0xf089, 0x0, 0x1);
        gbc.writeMem(0x760a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x59f);
        EXPECT(gbc.pc(), 0x760c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0193
        gbc.setState(0xd806, 0x6497, 0x28a0, 0x1164, 0xa9b2, 0x5092, 0x0, 0x0);
        gbc.writeMem(0xd806, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x6497);
        EXPECT(gbc.pc(), 0xd808);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd806), 0xcb);
        EXPECT(gbc.readMem(0xd807), 0x6b);
        // CB 6B 0194
        gbc.setState(0xc025, 0x76d, 0xd8d0, 0xf78b, 0xb7b8, 0xe728, 0x0, 0x1);
        gbc.writeMem(0xc025, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x76d);
        EXPECT(gbc.pc(), 0xc027);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc025), 0xcb);
        EXPECT(gbc.readMem(0xc026), 0x6b);
        // CB 6B 0195
        gbc.setState(0x4f74, 0xb630, 0xa810, 0x7b69, 0xc2ef, 0x9949, 0x1, 0x0);
        gbc.writeMem(0x4f74, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xb630);
        EXPECT(gbc.pc(), 0x4f76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0197
        gbc.setState(0x6b3c, 0xdd52, 0x8940, 0xf400, 0x6e01, 0x100a, 0x1, 0x1);
        gbc.writeMem(0x6b3c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xdd52);
        EXPECT(gbc.pc(), 0x6b3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0198
        gbc.setState(0x1c23, 0x3f8, 0xbe40, 0xe7b3, 0x7d06, 0x4c65, 0x0, 0x1);
        gbc.writeMem(0x1c23, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x3f8);
        EXPECT(gbc.pc(), 0x1c25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 019A
        gbc.setState(0xe833, 0x3306, 0x1d10, 0xd3e4, 0x8358, 0xaeaa, 0x0, 0x1);
        gbc.writeMem(0xe833, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x3306);
        EXPECT(gbc.pc(), 0xe835);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe833), 0xcb);
        EXPECT(gbc.readMem(0xe834), 0x6b);
        // CB 6B 019B
        gbc.setState(0x4a2, 0xa8d0, 0x6390, 0xdc1a, 0x4b4d, 0xcc3f, 0x1, 0x0);
        gbc.writeMem(0x4a2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa8d0);
        EXPECT(gbc.pc(), 0x4a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 019C
        gbc.setState(0x225f, 0x7dd, 0xea50, 0xd4d9, 0x9225, 0x214e, 0x1, 0x1);
        gbc.writeMem(0x225f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x7dd);
        EXPECT(gbc.pc(), 0x2261);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 019D
        gbc.setState(0xe526, 0xd8b7, 0x5160, 0x8c07, 0xd29, 0x2304, 0x1, 0x0);
        gbc.writeMem(0xe526, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xd8b7);
        EXPECT(gbc.pc(), 0xe528);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe526), 0xcb);
        EXPECT(gbc.readMem(0xe527), 0x6b);
        // CB 6B 019E
        gbc.setState(0x23a4, 0xb95f, 0xd600, 0x5f7a, 0x2283, 0x91b, 0x0, 0x0);
        gbc.writeMem(0x23a4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xb95f);
        EXPECT(gbc.pc(), 0x23a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 019F
        gbc.setState(0xebf9, 0xed46, 0x6640, 0x1c67, 0x4bd7, 0x84d5, 0x0, 0x0);
        gbc.writeMem(0xebf9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xed46);
        EXPECT(gbc.pc(), 0xebfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebf9), 0xcb);
        EXPECT(gbc.readMem(0xebfa), 0x6b);
        // CB 6B 01A0
        gbc.setState(0xefdb, 0xb77a, 0x5360, 0x2f2b, 0x65d7, 0x665d, 0x1, 0x0);
        gbc.writeMem(0xefdb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xb77a);
        EXPECT(gbc.pc(), 0xefdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefdb), 0xcb);
        EXPECT(gbc.readMem(0xefdc), 0x6b);
        // CB 6B 01A1
        gbc.setState(0xbc8a, 0x319a, 0x5300, 0x7497, 0xe914, 0x16d3, 0x1, 0x1);
        gbc.writeMem(0xbc8a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x319a);
        EXPECT(gbc.pc(), 0xbc8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc8a), 0xcb);
        EXPECT(gbc.readMem(0xbc8b), 0x6b);
        // CB 6B 01A2
        gbc.setState(0xb094, 0x8140, 0xec10, 0xa968, 0x8236, 0x3b51, 0x0, 0x1);
        gbc.writeMem(0xb094, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x8140);
        EXPECT(gbc.pc(), 0xb096);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb094), 0xcb);
        EXPECT(gbc.readMem(0xb095), 0x6b);
        // CB 6B 01A3
        gbc.setState(0xd168, 0x8ac5, 0xbbf0, 0xd0df, 0xc51, 0x7b2a, 0x0, 0x1);
        gbc.writeMem(0xd168, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x8ac5);
        EXPECT(gbc.pc(), 0xd16a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd168), 0xcb);
        EXPECT(gbc.readMem(0xd169), 0x6b);
        // CB 6B 01A4
        gbc.setState(0x32da, 0x6c03, 0x2e50, 0xc5d7, 0x8018, 0x530c, 0x1, 0x1);
        gbc.writeMem(0x32da, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6c03);
        EXPECT(gbc.pc(), 0x32dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 01A5
        gbc.setState(0xb0fe, 0xc610, 0xef0, 0x7c14, 0x291b, 0x6c7d, 0x1, 0x1);
        gbc.writeMem(0xb0fe, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc610);
        EXPECT(gbc.pc(), 0xb100);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0fe), 0xcb);
        EXPECT(gbc.readMem(0xb0ff), 0x6b);
        // CB 6B 01A6
        gbc.setState(0x3e2c, 0xf598, 0x2880, 0xe0cb, 0x65c6, 0x8663, 0x0, 0x0);
        gbc.writeMem(0x3e2c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xf598);
        EXPECT(gbc.pc(), 0x3e2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01A9
        gbc.setState(0xbed4, 0x631c, 0x8fb0, 0xf729, 0x9187, 0x1408, 0x1, 0x0);
        gbc.writeMem(0xbed4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x631c);
        EXPECT(gbc.pc(), 0xbed6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbed4), 0xcb);
        EXPECT(gbc.readMem(0xbed5), 0x6b);
        // CB 6B 01AA
        gbc.setState(0xa4c2, 0xc7cf, 0xe950, 0x767b, 0x33b5, 0xa2d6, 0x1, 0x1);
        gbc.writeMem(0xa4c2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xc7cf);
        EXPECT(gbc.pc(), 0xa4c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4c2), 0xcb);
        EXPECT(gbc.readMem(0xa4c3), 0x6b);
        // CB 6B 01AB
        gbc.setState(0x6aac, 0xfa09, 0x9b40, 0x6cf6, 0x6677, 0x5366, 0x1, 0x0);
        gbc.writeMem(0x6aac, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xfa09);
        EXPECT(gbc.pc(), 0x6aae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01AC
        gbc.setState(0x59e7, 0x5e4, 0xb040, 0x69c2, 0xfc7f, 0x27b2, 0x0, 0x0);
        gbc.writeMem(0x59e7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x5e4);
        EXPECT(gbc.pc(), 0x59e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01AD
        gbc.setState(0x7bbf, 0xb711, 0x5f40, 0x288e, 0x6fd5, 0x994c, 0x0, 0x0);
        gbc.writeMem(0x7bbf, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xb711);
        EXPECT(gbc.pc(), 0x7bc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01AE
        gbc.setState(0x7f8b, 0x1124, 0x7880, 0x6090, 0x916d, 0x95eb, 0x1, 0x1);
        gbc.writeMem(0x7f8b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x1124);
        EXPECT(gbc.pc(), 0x7f8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01AF
        gbc.setState(0xac12, 0x7bf6, 0x3c20, 0x3e83, 0xd367, 0x1df, 0x0, 0x0);
        gbc.writeMem(0xac12, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x7bf6);
        EXPECT(gbc.pc(), 0xac14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac12), 0xcb);
        EXPECT(gbc.readMem(0xac13), 0x6b);
        // CB 6B 01B0
        gbc.setState(0x847e, 0x65e0, 0x62e0, 0xab74, 0xc028, 0x5804, 0x0, 0x0);
        gbc.writeMem(0x847e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x65e0);
        EXPECT(gbc.pc(), 0x8480);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x847e), 0xcb);
        EXPECT(gbc.readMem(0x847f), 0x6b);
        // CB 6B 01B1
        gbc.setState(0x809b, 0xceb8, 0x31b0, 0x2f20, 0x22ec, 0x5c6b, 0x0, 0x0);
        gbc.writeMem(0x809b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xceb8);
        EXPECT(gbc.pc(), 0x809d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x809b), 0xcb);
        EXPECT(gbc.readMem(0x809c), 0x6b);
        // CB 6B 01B2
        gbc.setState(0x4400, 0x13b2, 0xc150, 0x7f40, 0x428a, 0x683b, 0x1, 0x1);
        gbc.writeMem(0x4400, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x13b2);
        EXPECT(gbc.pc(), 0x4402);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 01B3
        gbc.setState(0x95c4, 0x711b, 0x6dd0, 0x8142, 0x4d9f, 0x72fc, 0x1, 0x0);
        gbc.writeMem(0x95c4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x711b);
        EXPECT(gbc.pc(), 0x95c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95c4), 0xcb);
        EXPECT(gbc.readMem(0x95c5), 0x6b);
        // CB 6B 01B4
        gbc.setState(0xaa24, 0xd4bd, 0x6d40, 0xb94e, 0x5556, 0xae44, 0x1, 0x0);
        gbc.writeMem(0xaa24, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xd4bd);
        EXPECT(gbc.pc(), 0xaa26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa24), 0xcb);
        EXPECT(gbc.readMem(0xaa25), 0x6b);
        // CB 6B 01B5
        gbc.setState(0xe992, 0xdaa9, 0x6560, 0x3b36, 0x5169, 0xc0eb, 0x1, 0x1);
        gbc.writeMem(0xe992, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xdaa9);
        EXPECT(gbc.pc(), 0xe994);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe992), 0xcb);
        EXPECT(gbc.readMem(0xe993), 0x6b);
        // CB 6B 01B6
        gbc.setState(0x4ce9, 0x2b46, 0xa950, 0x5cc5, 0xb58c, 0x7fab, 0x1, 0x0);
        gbc.writeMem(0x4ce9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x2b46);
        EXPECT(gbc.pc(), 0x4ceb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 01B7
        gbc.setState(0x5538, 0xdadd, 0x8fa0, 0x85ea, 0x3673, 0x9cbe, 0x0, 0x0);
        gbc.writeMem(0x5538, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xdadd);
        EXPECT(gbc.pc(), 0x553a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01B8
        gbc.setState(0x326b, 0xec74, 0x27b0, 0xa26b, 0xd156, 0x4333, 0x1, 0x1);
        gbc.writeMem(0x326b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xec74);
        EXPECT(gbc.pc(), 0x326d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 01B9
        gbc.setState(0x78c8, 0x4a87, 0xa5c0, 0x8312, 0xb295, 0x27b4, 0x0, 0x1);
        gbc.writeMem(0x78c8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x4a87);
        EXPECT(gbc.pc(), 0x78ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01BA
        gbc.setState(0xb275, 0x8da0, 0xd860, 0xc9e0, 0x504a, 0x64a1, 0x0, 0x1);
        gbc.writeMem(0xb275, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x8da0);
        EXPECT(gbc.pc(), 0xb277);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb275), 0xcb);
        EXPECT(gbc.readMem(0xb276), 0x6b);
        // CB 6B 01BB
        gbc.setState(0x9364, 0xa5fa, 0x7490, 0x1fe8, 0x7297, 0x50b4, 0x1, 0x1);
        gbc.writeMem(0x9364, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xa5fa);
        EXPECT(gbc.pc(), 0x9366);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9364), 0xcb);
        EXPECT(gbc.readMem(0x9365), 0x6b);
        // CB 6B 01BC
        gbc.setState(0xe9e4, 0x4ec6, 0x1250, 0x7c18, 0x4829, 0xbd0e, 0x1, 0x1);
        gbc.writeMem(0xe9e4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x4ec6);
        EXPECT(gbc.pc(), 0xe9e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9e4), 0xcb);
        EXPECT(gbc.readMem(0xe9e5), 0x6b);
        // CB 6B 01BD
        gbc.setState(0x5f28, 0x4e06, 0xe1d0, 0x5410, 0x162f, 0xdc4a, 0x0, 0x0);
        gbc.writeMem(0x5f28, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x4e06);
        EXPECT(gbc.pc(), 0x5f2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 01BE
        gbc.setState(0xef19, 0x75, 0xe50, 0x18bc, 0xdf0f, 0x1bb7, 0x0, 0x0);
        gbc.writeMem(0xef19, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x75);
        EXPECT(gbc.pc(), 0xef1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef19), 0xcb);
        EXPECT(gbc.readMem(0xef1a), 0x6b);
        // CB 6B 01C0
        gbc.setState(0xc41, 0x6038, 0xc060, 0xcaa8, 0xdbf, 0xee19, 0x0, 0x0);
        gbc.writeMem(0xc41, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x6038);
        EXPECT(gbc.pc(), 0xc43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01C1
        gbc.setState(0x400, 0x4be3, 0x4710, 0x2fb5, 0xb790, 0x3fea, 0x0, 0x1);
        gbc.writeMem(0x400, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x4be3);
        EXPECT(gbc.pc(), 0x402);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 01C2
        gbc.setState(0x85a9, 0x459, 0x5e50, 0xc5d1, 0xf70c, 0x2025, 0x0, 0x1);
        gbc.writeMem(0x85a9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x459);
        EXPECT(gbc.pc(), 0x85ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85a9), 0xcb);
        EXPECT(gbc.readMem(0x85aa), 0x6b);
        // CB 6B 01C3
        gbc.setState(0xb3f2, 0xfa28, 0x84d0, 0xd702, 0xf827, 0xe885, 0x1, 0x0);
        gbc.writeMem(0xb3f2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xfa28);
        EXPECT(gbc.pc(), 0xb3f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3f2), 0xcb);
        EXPECT(gbc.readMem(0xb3f3), 0x6b);
        // CB 6B 01C4
        gbc.setState(0x83e9, 0x23fa, 0xece0, 0xa9c9, 0xf016, 0xcfbf, 0x0, 0x0);
        gbc.writeMem(0x83e9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x23fa);
        EXPECT(gbc.pc(), 0x83eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83e9), 0xcb);
        EXPECT(gbc.readMem(0x83ea), 0x6b);
        // CB 6B 01C5
        gbc.setState(0xbd9c, 0xc993, 0xd030, 0x983d, 0x1d39, 0x3c9, 0x1, 0x1);
        gbc.writeMem(0xbd9c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xc993);
        EXPECT(gbc.pc(), 0xbd9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd9c), 0xcb);
        EXPECT(gbc.readMem(0xbd9d), 0x6b);
        // CB 6B 01C6
        gbc.setState(0xc7de, 0xd3d4, 0xcd50, 0xe269, 0x4cb1, 0x935f, 0x1, 0x1);
        gbc.writeMem(0xc7de, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xd3d4);
        EXPECT(gbc.pc(), 0xc7e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7de), 0xcb);
        EXPECT(gbc.readMem(0xc7df), 0x6b);
        // CB 6B 01C7
        gbc.setState(0x8b82, 0xc758, 0x8310, 0x46f, 0xd94d, 0xe3d4, 0x0, 0x1);
        gbc.writeMem(0x8b82, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xc758);
        EXPECT(gbc.pc(), 0x8b84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b82), 0xcb);
        EXPECT(gbc.readMem(0x8b83), 0x6b);
        // CB 6B 01C8
        gbc.setState(0x7f3c, 0x20c3, 0xfa40, 0x3d2d, 0x9644, 0x466c, 0x0, 0x0);
        gbc.writeMem(0x7f3c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x20c3);
        EXPECT(gbc.pc(), 0x7f3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01C9
        gbc.setState(0x5136, 0x46c, 0x7530, 0x5c21, 0x45d2, 0xd246, 0x1, 0x0);
        gbc.writeMem(0x5136, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x46c);
        EXPECT(gbc.pc(), 0x5138);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 01CA
        gbc.setState(0xc6ec, 0xa26c, 0xde30, 0xde1c, 0xd88a, 0x1de0, 0x0, 0x1);
        gbc.writeMem(0xc6ec, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xa26c);
        EXPECT(gbc.pc(), 0xc6ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6ec), 0xcb);
        EXPECT(gbc.readMem(0xc6ed), 0x6b);
        // CB 6B 01CB
        gbc.setState(0xc732, 0xe608, 0x1140, 0x4abb, 0x600e, 0x81e0, 0x1, 0x1);
        gbc.writeMem(0xc732, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xe608);
        EXPECT(gbc.pc(), 0xc734);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc732), 0xcb);
        EXPECT(gbc.readMem(0xc733), 0x6b);
        // CB 6B 01CC
        gbc.setState(0x3089, 0x4e2e, 0x7940, 0xa74d, 0x9c28, 0x99c5, 0x1, 0x1);
        gbc.writeMem(0x3089, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x4e2e);
        EXPECT(gbc.pc(), 0x308b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01CD
        gbc.setState(0x2b23, 0xb9ed, 0x2dc0, 0x58bb, 0xe987, 0x3cd7, 0x1, 0x0);
        gbc.writeMem(0x2b23, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xb9ed);
        EXPECT(gbc.pc(), 0x2b25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01CE
        gbc.setState(0x6b86, 0xfd52, 0x9800, 0x152c, 0xfab1, 0x7581, 0x0, 0x0);
        gbc.writeMem(0x6b86, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xfd52);
        EXPECT(gbc.pc(), 0x6b88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01CF
        gbc.setState(0xb146, 0xbd25, 0x1e90, 0x47f3, 0x981, 0x8e6b, 0x1, 0x1);
        gbc.writeMem(0xb146, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xbd25);
        EXPECT(gbc.pc(), 0xb148);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb146), 0xcb);
        EXPECT(gbc.readMem(0xb147), 0x6b);
        // CB 6B 01D0
        gbc.setState(0x5607, 0xf1, 0xebd0, 0x90bc, 0x9027, 0x7acf, 0x1, 0x0);
        gbc.writeMem(0x5607, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xf1);
        EXPECT(gbc.pc(), 0x5609);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 01D1
        gbc.setState(0x91e7, 0xf269, 0x21b0, 0x2f3f, 0xff39, 0xb07, 0x1, 0x1);
        gbc.writeMem(0x91e7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xf269);
        EXPECT(gbc.pc(), 0x91e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91e7), 0xcb);
        EXPECT(gbc.readMem(0x91e8), 0x6b);
        // CB 6B 01D2
        gbc.setState(0x6729, 0x858a, 0x1410, 0xa0ed, 0x2af2, 0xef8, 0x0, 0x1);
        gbc.writeMem(0x6729, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x858a);
        EXPECT(gbc.pc(), 0x672b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 01D3
        gbc.setState(0xe6d5, 0x9f17, 0xa60, 0xe4fc, 0xc56c, 0x6409, 0x1, 0x1);
        gbc.writeMem(0xe6d5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x9f17);
        EXPECT(gbc.pc(), 0xe6d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6d5), 0xcb);
        EXPECT(gbc.readMem(0xe6d6), 0x6b);
        // CB 6B 01D4
        gbc.setState(0xd9f6, 0x4d8f, 0x3b90, 0x52b1, 0x813, 0xca33, 0x0, 0x1);
        gbc.writeMem(0xd9f6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x4d8f);
        EXPECT(gbc.pc(), 0xd9f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9f6), 0xcb);
        EXPECT(gbc.readMem(0xd9f7), 0x6b);
        // CB 6B 01D5
        gbc.setState(0x276b, 0x9cd5, 0x3080, 0xab01, 0x780d, 0x69cd, 0x0, 0x0);
        gbc.writeMem(0x276b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x9cd5);
        EXPECT(gbc.pc(), 0x276d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01D6
        gbc.setState(0x278d, 0xf863, 0x37f0, 0x5be0, 0xd9b1, 0x57eb, 0x0, 0x0);
        gbc.writeMem(0x278d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xf863);
        EXPECT(gbc.pc(), 0x278f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 01D7
        gbc.setState(0x55a1, 0xe371, 0x9100, 0xbe4, 0xcee8, 0x1ff1, 0x1, 0x1);
        gbc.writeMem(0x55a1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xe371);
        EXPECT(gbc.pc(), 0x55a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01D8
        gbc.setState(0x3af3, 0x5475, 0x29a0, 0x5a6, 0xd397, 0xb6b6, 0x1, 0x0);
        gbc.writeMem(0x3af3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x5475);
        EXPECT(gbc.pc(), 0x3af5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01D9
        gbc.setState(0x1b4a, 0x2a0, 0x58d0, 0x8acc, 0x488e, 0xaf99, 0x1, 0x1);
        gbc.writeMem(0x1b4a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x2a0);
        EXPECT(gbc.pc(), 0x1b4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 01DA
        gbc.setState(0x23bc, 0x946a, 0xa650, 0x81d6, 0x7d4c, 0x531b, 0x0, 0x0);
        gbc.writeMem(0x23bc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x946a);
        EXPECT(gbc.pc(), 0x23be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 01DB
        gbc.setState(0x592d, 0x441, 0xb270, 0x3ae7, 0xcfea, 0x3cf8, 0x1, 0x0);
        gbc.writeMem(0x592d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x441);
        EXPECT(gbc.pc(), 0x592f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 01DC
        gbc.setState(0x8341, 0x66aa, 0x7500, 0xaecd, 0x2743, 0x6339, 0x0, 0x0);
        gbc.writeMem(0x8341, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x66aa);
        EXPECT(gbc.pc(), 0x8343);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8341), 0xcb);
        EXPECT(gbc.readMem(0x8342), 0x6b);
        // CB 6B 01DD
        gbc.setState(0x191f, 0x9c37, 0x26f0, 0xa210, 0x22, 0x8516, 0x1, 0x0);
        gbc.writeMem(0x191f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x9c37);
        EXPECT(gbc.pc(), 0x1921);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 01DE
        gbc.setState(0x884c, 0xbf3, 0x1d80, 0x102a, 0xa34, 0x9010, 0x1, 0x1);
        gbc.writeMem(0x884c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xbf3);
        EXPECT(gbc.pc(), 0x884e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x884c), 0xcb);
        EXPECT(gbc.readMem(0x884d), 0x6b);
        // CB 6B 01E0
        gbc.setState(0x3fec, 0x1894, 0xfea0, 0xe30d, 0xc47, 0xc70e, 0x0, 0x0);
        gbc.writeMem(0x3fec, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x1894);
        EXPECT(gbc.pc(), 0x3fee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01E1
        gbc.setState(0xe92b, 0xeacc, 0x4b00, 0xd196, 0x3301, 0xbbaf, 0x1, 0x0);
        gbc.writeMem(0xe92b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xeacc);
        EXPECT(gbc.pc(), 0xe92d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe92b), 0xcb);
        EXPECT(gbc.readMem(0xe92c), 0x6b);
        // CB 6B 01E2
        gbc.setState(0x4160, 0xde89, 0x2430, 0x6a21, 0x249d, 0x3654, 0x0, 0x1);
        gbc.writeMem(0x4160, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xde89);
        EXPECT(gbc.pc(), 0x4162);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 01E3
        gbc.setState(0x3512, 0x5d6d, 0x3990, 0xaa3d, 0x32ae, 0xf831, 0x0, 0x0);
        gbc.writeMem(0x3512, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x5d6d);
        EXPECT(gbc.pc(), 0x3514);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 01E4
        gbc.setState(0x80aa, 0x5430, 0x630, 0xb992, 0x5f31, 0x6569, 0x0, 0x0);
        gbc.writeMem(0x80aa, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x5430);
        EXPECT(gbc.pc(), 0x80ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80aa), 0xcb);
        EXPECT(gbc.readMem(0x80ab), 0x6b);
        // CB 6B 01E5
        gbc.setState(0xc088, 0xec23, 0x4930, 0x8a0a, 0x1feb, 0xf425, 0x0, 0x1);
        gbc.writeMem(0xc088, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xec23);
        EXPECT(gbc.pc(), 0xc08a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc088), 0xcb);
        EXPECT(gbc.readMem(0xc089), 0x6b);
        // CB 6B 01E6
        gbc.setState(0x4988, 0xca2, 0x5f70, 0x216d, 0x9a58, 0xf5f2, 0x1, 0x1);
        gbc.writeMem(0x4988, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xca2);
        EXPECT(gbc.pc(), 0x498a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 01E7
        gbc.setState(0x7aa3, 0x84df, 0x1a60, 0xee24, 0xa03f, 0xac67, 0x1, 0x1);
        gbc.writeMem(0x7aa3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x84df);
        EXPECT(gbc.pc(), 0x7aa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01E8
        gbc.setState(0xdb08, 0xec20, 0xde40, 0xae98, 0x1afb, 0x5387, 0x1, 0x1);
        gbc.writeMem(0xdb08, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xec20);
        EXPECT(gbc.pc(), 0xdb0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb08), 0xcb);
        EXPECT(gbc.readMem(0xdb09), 0x6b);
        // CB 6B 01E9
        gbc.setState(0x430a, 0x3783, 0xeae0, 0xf086, 0x264b, 0xa18c, 0x0, 0x0);
        gbc.writeMem(0x430a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x3783);
        EXPECT(gbc.pc(), 0x430c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01EA
        gbc.setState(0xce10, 0x2e95, 0xbd50, 0xab00, 0xef47, 0x8da8, 0x1, 0x1);
        gbc.writeMem(0xce10, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x2e95);
        EXPECT(gbc.pc(), 0xce12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce10), 0xcb);
        EXPECT(gbc.readMem(0xce11), 0x6b);
        // CB 6B 01EB
        gbc.setState(0x842f, 0xacda, 0x1770, 0x13fe, 0x90c9, 0x5282, 0x0, 0x0);
        gbc.writeMem(0x842f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xacda);
        EXPECT(gbc.pc(), 0x8431);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x842f), 0xcb);
        EXPECT(gbc.readMem(0x8430), 0x6b);
        // CB 6B 01EC
        gbc.setState(0x77dd, 0x1d42, 0x1f20, 0x6d92, 0xde30, 0x29a6, 0x0, 0x1);
        gbc.writeMem(0x77dd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x1d42);
        EXPECT(gbc.pc(), 0x77df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01ED
        gbc.setState(0x4386, 0xc8b6, 0x9ac0, 0x8f64, 0x6637, 0x7a6d, 0x1, 0x1);
        gbc.writeMem(0x4386, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xc8b6);
        EXPECT(gbc.pc(), 0x4388);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01EE
        gbc.setState(0x6ced, 0x33e9, 0xc460, 0x8f92, 0x2316, 0xe3de, 0x0, 0x1);
        gbc.writeMem(0x6ced, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x33e9);
        EXPECT(gbc.pc(), 0x6cef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01EF
        gbc.setState(0x574b, 0xd673, 0x5b00, 0x8ace, 0x52b8, 0xde91, 0x1, 0x0);
        gbc.writeMem(0x574b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xd673);
        EXPECT(gbc.pc(), 0x574d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01F1
        gbc.setState(0x730b, 0x3618, 0x9060, 0xcb86, 0x7261, 0xe4ee, 0x0, 0x1);
        gbc.writeMem(0x730b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x3618);
        EXPECT(gbc.pc(), 0x730d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01F2
        gbc.setState(0xec4d, 0x5ba9, 0x4830, 0x14fe, 0xcce0, 0xa963, 0x1, 0x0);
        gbc.writeMem(0xec4d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x5ba9);
        EXPECT(gbc.pc(), 0xec4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec4d), 0xcb);
        EXPECT(gbc.readMem(0xec4e), 0x6b);
        // CB 6B 01F3
        gbc.setState(0x8e4, 0x81c7, 0xffc0, 0xa911, 0x3414, 0xfe2d, 0x0, 0x0);
        gbc.writeMem(0x8e4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x81c7);
        EXPECT(gbc.pc(), 0x8e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01F4
        gbc.setState(0xdc1d, 0xdeff, 0x8480, 0xd970, 0x55e4, 0xb948, 0x0, 0x1);
        gbc.writeMem(0xdc1d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xdeff);
        EXPECT(gbc.pc(), 0xdc1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc1d), 0xcb);
        EXPECT(gbc.readMem(0xdc1e), 0x6b);
        // CB 6B 01F5
        gbc.setState(0x76aa, 0xdcd, 0xe930, 0xbef1, 0x679f, 0xf8de, 0x0, 0x1);
        gbc.writeMem(0x76aa, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xdcd);
        EXPECT(gbc.pc(), 0x76ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 01F6
        gbc.setState(0x4504, 0xa8cd, 0xaf90, 0xaa16, 0xd37c, 0x4375, 0x0, 0x1);
        gbc.writeMem(0x4504, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xa8cd);
        EXPECT(gbc.pc(), 0x4506);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 01F7
        gbc.setState(0x57ff, 0x5343, 0xc480, 0xfff1, 0x7581, 0xf74, 0x0, 0x0);
        gbc.writeMem(0x57ff, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x5343);
        EXPECT(gbc.pc(), 0x5801);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 01F8
        gbc.setState(0xb88d, 0x9a03, 0xb8f0, 0x1070, 0xc84, 0xecdf, 0x0, 0x0);
        gbc.writeMem(0xb88d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x9a03);
        EXPECT(gbc.pc(), 0xb88f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb88d), 0xcb);
        EXPECT(gbc.readMem(0xb88e), 0x6b);
        // CB 6B 01F9
        gbc.setState(0xd4fa, 0x83ee, 0xda70, 0xc6af, 0x2907, 0xd476, 0x1, 0x0);
        gbc.writeMem(0xd4fa, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x83ee);
        EXPECT(gbc.pc(), 0xd4fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4fa), 0xcb);
        EXPECT(gbc.readMem(0xd4fb), 0x6b);
        // CB 6B 01FA
        gbc.setState(0xdc85, 0x3b90, 0xce10, 0xeae5, 0xc117, 0xfbeb, 0x0, 0x1);
        gbc.writeMem(0xdc85, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x3b90);
        EXPECT(gbc.pc(), 0xdc87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc85), 0xcb);
        EXPECT(gbc.readMem(0xdc86), 0x6b);
        // CB 6B 01FB
        gbc.setState(0xdcb4, 0x9628, 0x7410, 0x62af, 0xfd8c, 0x7fa7, 0x1, 0x0);
        gbc.writeMem(0xdcb4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x9628);
        EXPECT(gbc.pc(), 0xdcb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcb4), 0xcb);
        EXPECT(gbc.readMem(0xdcb5), 0x6b);
        // CB 6B 01FC
        gbc.setState(0xa492, 0xce77, 0xb810, 0xd5f1, 0x616, 0x6b3c, 0x0, 0x1);
        gbc.writeMem(0xa492, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xce77);
        EXPECT(gbc.pc(), 0xa494);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa492), 0xcb);
        EXPECT(gbc.readMem(0xa493), 0x6b);
        // CB 6B 01FD
        gbc.setState(0x7e98, 0x570d, 0xfb90, 0x7031, 0x573c, 0x7408, 0x0, 0x1);
        gbc.writeMem(0x7e98, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x570d);
        EXPECT(gbc.pc(), 0x7e9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 01FE
        gbc.setState(0x60cc, 0xcc91, 0x2750, 0x63b2, 0xfa2f, 0x5ef6, 0x0, 0x0);
        gbc.writeMem(0x60cc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xcc91);
        EXPECT(gbc.pc(), 0x60ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 01FF
        gbc.setState(0xa17, 0x1d3d, 0xabf0, 0xfd0e, 0x1158, 0xb1e1, 0x1, 0x1);
        gbc.writeMem(0xa17, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x1d3d);
        EXPECT(gbc.pc(), 0xa19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0201
        gbc.setState(0xc34c, 0xcd3, 0x8ec0, 0x3b1d, 0xe914, 0x8104, 0x0, 0x1);
        gbc.writeMem(0xc34c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xcd3);
        EXPECT(gbc.pc(), 0xc34e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc34c), 0xcb);
        EXPECT(gbc.readMem(0xc34d), 0x6b);
        // CB 6B 0202
        gbc.setState(0xe9c1, 0xdafe, 0xa000, 0xb749, 0x39b9, 0x5c2a, 0x0, 0x0);
        gbc.writeMem(0xe9c1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xdafe);
        EXPECT(gbc.pc(), 0xe9c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9c1), 0xcb);
        EXPECT(gbc.readMem(0xe9c2), 0x6b);
        // CB 6B 0203
        gbc.setState(0x50ee, 0x80a5, 0x2f70, 0xed8a, 0x2b63, 0xe0d3, 0x0, 0x0);
        gbc.writeMem(0x50ee, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x80a5);
        EXPECT(gbc.pc(), 0x50f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0204
        gbc.setState(0x787c, 0xfec0, 0x4620, 0x6439, 0xa85f, 0x736d, 0x1, 0x1);
        gbc.writeMem(0x787c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xfec0);
        EXPECT(gbc.pc(), 0x787e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0205
        gbc.setState(0xbfa7, 0xdbed, 0x4570, 0xed1, 0xb071, 0x95b0, 0x1, 0x1);
        gbc.writeMem(0xbfa7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xdbed);
        EXPECT(gbc.pc(), 0xbfa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfa7), 0xcb);
        EXPECT(gbc.readMem(0xbfa8), 0x6b);
        // CB 6B 0206
        gbc.setState(0x8901, 0xdb7d, 0x48a0, 0xdf0d, 0xb803, 0xe3da, 0x1, 0x0);
        gbc.writeMem(0x8901, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xdb7d);
        EXPECT(gbc.pc(), 0x8903);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8901), 0xcb);
        EXPECT(gbc.readMem(0x8902), 0x6b);
        // CB 6B 0207
        gbc.setState(0xe2af, 0x29d6, 0x99a0, 0x1bc9, 0x6574, 0x6ad9, 0x0, 0x1);
        gbc.writeMem(0xe2af, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x29d6);
        EXPECT(gbc.pc(), 0xe2b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2af), 0xcb);
        EXPECT(gbc.readMem(0xe2b0), 0x6b);
        // CB 6B 0208
        gbc.setState(0x8c6b, 0x85c0, 0xa1a0, 0x3ff7, 0xfb4f, 0xbcca, 0x0, 0x0);
        gbc.writeMem(0x8c6b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x85c0);
        EXPECT(gbc.pc(), 0x8c6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c6b), 0xcb);
        EXPECT(gbc.readMem(0x8c6c), 0x6b);
        // CB 6B 0209
        gbc.setState(0xc968, 0x5f0b, 0xb680, 0x4caf, 0xde99, 0x61dd, 0x1, 0x1);
        gbc.writeMem(0xc968, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x5f0b);
        EXPECT(gbc.pc(), 0xc96a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc968), 0xcb);
        EXPECT(gbc.readMem(0xc969), 0x6b);
        // CB 6B 020A
        gbc.setState(0xd570, 0x6ab0, 0x9650, 0xa262, 0xb30a, 0xc630, 0x1, 0x1);
        gbc.writeMem(0xd570, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x6ab0);
        EXPECT(gbc.pc(), 0xd572);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd570), 0xcb);
        EXPECT(gbc.readMem(0xd571), 0x6b);
        // CB 6B 020B
        gbc.setState(0xc866, 0x494b, 0x3d60, 0xae38, 0xfcdd, 0xf4b1, 0x1, 0x0);
        gbc.writeMem(0xc866, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x494b);
        EXPECT(gbc.pc(), 0xc868);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc866), 0xcb);
        EXPECT(gbc.readMem(0xc867), 0x6b);
        // CB 6B 020C
        gbc.setState(0x5023, 0xfe5a, 0xcf60, 0xc82, 0x1879, 0x165e, 0x0, 0x1);
        gbc.writeMem(0x5023, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xfe5a);
        EXPECT(gbc.pc(), 0x5025);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 020D
        gbc.setState(0xd02f, 0x280b, 0x9b20, 0x5040, 0x1ea7, 0x4498, 0x0, 0x1);
        gbc.writeMem(0xd02f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x280b);
        EXPECT(gbc.pc(), 0xd031);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd02f), 0xcb);
        EXPECT(gbc.readMem(0xd030), 0x6b);
        // CB 6B 020E
        gbc.setState(0xcf7e, 0xc7ff, 0x2900, 0x7d13, 0xd789, 0x74a2, 0x1, 0x1);
        gbc.writeMem(0xcf7e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xc7ff);
        EXPECT(gbc.pc(), 0xcf80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf7e), 0xcb);
        EXPECT(gbc.readMem(0xcf7f), 0x6b);
        // CB 6B 020F
        gbc.setState(0x5301, 0xe71, 0xb30, 0xf7e5, 0xf4fe, 0x144a, 0x0, 0x1);
        gbc.writeMem(0x5301, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xe71);
        EXPECT(gbc.pc(), 0x5303);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0210
        gbc.setState(0x7239, 0xf3c0, 0x4150, 0xccc0, 0xb93b, 0x99aa, 0x0, 0x1);
        gbc.writeMem(0x7239, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xf3c0);
        EXPECT(gbc.pc(), 0x723b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0211
        gbc.setState(0xdf98, 0xa956, 0x5360, 0x659a, 0x9081, 0x7737, 0x1, 0x0);
        gbc.writeMem(0xdf98, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xa956);
        EXPECT(gbc.pc(), 0xdf9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf98), 0xcb);
        EXPECT(gbc.readMem(0xdf99), 0x6b);
        // CB 6B 0212
        gbc.setState(0x78dd, 0x2794, 0x6ef0, 0xc950, 0x7b62, 0x2e47, 0x1, 0x1);
        gbc.writeMem(0x78dd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x2794);
        EXPECT(gbc.pc(), 0x78df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0213
        gbc.setState(0x24c7, 0xfdf2, 0x1a90, 0xadff, 0x11d3, 0x3719, 0x1, 0x1);
        gbc.writeMem(0x24c7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xfdf2);
        EXPECT(gbc.pc(), 0x24c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0215
        gbc.setState(0xcbcf, 0x12b5, 0x830, 0xa297, 0xbd3f, 0x7ed8, 0x1, 0x1);
        gbc.writeMem(0xcbcf, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x12b5);
        EXPECT(gbc.pc(), 0xcbd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbcf), 0xcb);
        EXPECT(gbc.readMem(0xcbd0), 0x6b);
        // CB 6B 0216
        gbc.setState(0xc826, 0x9c59, 0xe440, 0x8f8c, 0x8338, 0x6318, 0x0, 0x0);
        gbc.writeMem(0xc826, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x9c59);
        EXPECT(gbc.pc(), 0xc828);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc826), 0xcb);
        EXPECT(gbc.readMem(0xc827), 0x6b);
        // CB 6B 0218
        gbc.setState(0x3a49, 0xf3e9, 0x1460, 0xaed4, 0x5cfd, 0xb621, 0x1, 0x0);
        gbc.writeMem(0x3a49, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xf3e9);
        EXPECT(gbc.pc(), 0x3a4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0219
        gbc.setState(0x27d5, 0x49bd, 0x4d00, 0x6a33, 0xc96c, 0xe99, 0x1, 0x1);
        gbc.writeMem(0x27d5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x49bd);
        EXPECT(gbc.pc(), 0x27d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 021A
        gbc.setState(0xb5a5, 0xecf3, 0x4dc0, 0x52bd, 0xcd79, 0x5ab4, 0x0, 0x1);
        gbc.writeMem(0xb5a5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xecf3);
        EXPECT(gbc.pc(), 0xb5a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5a5), 0xcb);
        EXPECT(gbc.readMem(0xb5a6), 0x6b);
        // CB 6B 021B
        gbc.setState(0x984f, 0x7688, 0x20a0, 0xae1a, 0x4a48, 0xbaf6, 0x1, 0x0);
        gbc.writeMem(0x984f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x7688);
        EXPECT(gbc.pc(), 0x9851);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x984f), 0xcb);
        EXPECT(gbc.readMem(0x9850), 0x6b);
        // CB 6B 021C
        gbc.setState(0x9ce6, 0x903, 0x3c10, 0x3b76, 0xdbef, 0x61a2, 0x0, 0x0);
        gbc.writeMem(0x9ce6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x903);
        EXPECT(gbc.pc(), 0x9ce8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ce6), 0xcb);
        EXPECT(gbc.readMem(0x9ce7), 0x6b);
        // CB 6B 021D
        gbc.setState(0x543a, 0xcb58, 0xcec0, 0xa15d, 0xee1b, 0x634a, 0x1, 0x1);
        gbc.writeMem(0x543a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xcb58);
        EXPECT(gbc.pc(), 0x543c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 021E
        gbc.setState(0xdbcb, 0x8e11, 0x1d50, 0xacd5, 0x5742, 0x45c6, 0x1, 0x0);
        gbc.writeMem(0xdbcb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x8e11);
        EXPECT(gbc.pc(), 0xdbcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbcb), 0xcb);
        EXPECT(gbc.readMem(0xdbcc), 0x6b);
        // CB 6B 021F
        gbc.setState(0x1b0, 0xa85e, 0xc7c0, 0xd005, 0x5a56, 0xb2db, 0x0, 0x0);
        gbc.writeMem(0x1b0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xa85e);
        EXPECT(gbc.pc(), 0x1b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0220
        gbc.setState(0xbd, 0xe9a, 0x38d0, 0x28dc, 0xcf5f, 0x27d0, 0x1, 0x0);
        gbc.writeMem(0xbd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xe9a);
        EXPECT(gbc.pc(), 0xbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0221
        gbc.setState(0xc66a, 0xbd8c, 0xe2e0, 0xd7a0, 0x940f, 0xc45, 0x0, 0x0);
        gbc.writeMem(0xc66a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xbd8c);
        EXPECT(gbc.pc(), 0xc66c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc66a), 0xcb);
        EXPECT(gbc.readMem(0xc66b), 0x6b);
        // CB 6B 0222
        gbc.setState(0xda7, 0xe18, 0x3f40, 0xf319, 0x7303, 0xc769, 0x1, 0x0);
        gbc.writeMem(0xda7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe18);
        EXPECT(gbc.pc(), 0xda9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0223
        gbc.setState(0x3d85, 0xbf0, 0xfe90, 0xfc95, 0xd40e, 0x60e2, 0x0, 0x1);
        gbc.writeMem(0x3d85, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xbf0);
        EXPECT(gbc.pc(), 0x3d87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0224
        gbc.setState(0x8be5, 0x59e1, 0x3530, 0x65fa, 0x44fd, 0x1609, 0x0, 0x0);
        gbc.writeMem(0x8be5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x59e1);
        EXPECT(gbc.pc(), 0x8be7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8be5), 0xcb);
        EXPECT(gbc.readMem(0x8be6), 0x6b);
        // CB 6B 0225
        gbc.setState(0x8b30, 0x28c, 0xd350, 0xb4d9, 0xeeeb, 0xd090, 0x0, 0x1);
        gbc.writeMem(0x8b30, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x28c);
        EXPECT(gbc.pc(), 0x8b32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b30), 0xcb);
        EXPECT(gbc.readMem(0x8b31), 0x6b);
        // CB 6B 0226
        gbc.setState(0xe1e0, 0x9a03, 0xd640, 0xfb36, 0x121b, 0x1ee1, 0x0, 0x0);
        gbc.writeMem(0xe1e0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x9a03);
        EXPECT(gbc.pc(), 0xe1e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1e0), 0xcb);
        EXPECT(gbc.readMem(0xe1e1), 0x6b);
        // CB 6B 0227
        gbc.setState(0x291a, 0xc22e, 0x78b0, 0x31d1, 0x66bc, 0x2e18, 0x1, 0x0);
        gbc.writeMem(0x291a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xc22e);
        EXPECT(gbc.pc(), 0x291c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0229
        gbc.setState(0x4125, 0xd7ac, 0x2420, 0xdb8e, 0xf83a, 0xdebd, 0x1, 0x1);
        gbc.writeMem(0x4125, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd7ac);
        EXPECT(gbc.pc(), 0x4127);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 022B
        gbc.setState(0x7577, 0x3656, 0xd8a0, 0xed64, 0x10c, 0x2f49, 0x0, 0x0);
        gbc.writeMem(0x7577, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x3656);
        EXPECT(gbc.pc(), 0x7579);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 022C
        gbc.setState(0x8012, 0x2e63, 0x8910, 0x495c, 0xc9ea, 0x6e4f, 0x0, 0x0);
        gbc.writeMem(0x8012, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x2e63);
        EXPECT(gbc.pc(), 0x8014);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8012), 0xcb);
        EXPECT(gbc.readMem(0x8013), 0x6b);
        // CB 6B 022D
        gbc.setState(0x5b22, 0x4989, 0x7380, 0x6d55, 0x23f2, 0x9f8d, 0x1, 0x1);
        gbc.writeMem(0x5b22, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x4989);
        EXPECT(gbc.pc(), 0x5b24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 022E
        gbc.setState(0xbc6f, 0x8ecb, 0xce0, 0xdc60, 0x3670, 0x2137, 0x0, 0x0);
        gbc.writeMem(0xbc6f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x8ecb);
        EXPECT(gbc.pc(), 0xbc71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc6f), 0xcb);
        EXPECT(gbc.readMem(0xbc70), 0x6b);
        // CB 6B 022F
        gbc.setState(0xa028, 0x91f6, 0x3970, 0x9c65, 0xec30, 0x4798, 0x0, 0x1);
        gbc.writeMem(0xa028, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x91f6);
        EXPECT(gbc.pc(), 0xa02a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa028), 0xcb);
        EXPECT(gbc.readMem(0xa029), 0x6b);
        // CB 6B 0230
        gbc.setState(0xb303, 0x5df2, 0x7ca0, 0x43ee, 0x7de, 0x1116, 0x0, 0x1);
        gbc.writeMem(0xb303, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x5df2);
        EXPECT(gbc.pc(), 0xb305);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb303), 0xcb);
        EXPECT(gbc.readMem(0xb304), 0x6b);
        // CB 6B 0231
        gbc.setState(0xa334, 0x8835, 0x800, 0xbd75, 0xdf8c, 0x8090, 0x0, 0x0);
        gbc.writeMem(0xa334, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x8835);
        EXPECT(gbc.pc(), 0xa336);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa334), 0xcb);
        EXPECT(gbc.readMem(0xa335), 0x6b);
        // CB 6B 0233
        gbc.setState(0x6402, 0xba2, 0xb7d0, 0x1ef1, 0xe5b4, 0x33a4, 0x0, 0x1);
        gbc.writeMem(0x6402, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xba2);
        EXPECT(gbc.pc(), 0x6404);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0234
        gbc.setState(0x3903, 0x4434, 0x5430, 0x167f, 0x8577, 0xb0ac, 0x1, 0x0);
        gbc.writeMem(0x3903, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x4434);
        EXPECT(gbc.pc(), 0x3905);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0235
        gbc.setState(0x15c2, 0xfd8b, 0x7040, 0x95f7, 0xadb1, 0x3250, 0x1, 0x0);
        gbc.writeMem(0x15c2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xfd8b);
        EXPECT(gbc.pc(), 0x15c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0236
        gbc.setState(0x775e, 0xb805, 0x8f50, 0x80ca, 0x45c, 0x94e6, 0x1, 0x0);
        gbc.writeMem(0x775e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xb805);
        EXPECT(gbc.pc(), 0x7760);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0237
        gbc.setState(0x3cae, 0x7f4c, 0x90a0, 0xcc3d, 0xc2ee, 0x459b, 0x0, 0x1);
        gbc.writeMem(0x3cae, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x7f4c);
        EXPECT(gbc.pc(), 0x3cb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0238
        gbc.setState(0x2537, 0xfccc, 0xf880, 0xbf2, 0x99ce, 0x3d96, 0x1, 0x0);
        gbc.writeMem(0x2537, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xfccc);
        EXPECT(gbc.pc(), 0x2539);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0239
        gbc.setState(0x1bdb, 0x65d6, 0x3360, 0xbf13, 0x6957, 0xbb4a, 0x1, 0x0);
        gbc.writeMem(0x1bdb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x65d6);
        EXPECT(gbc.pc(), 0x1bdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 023A
        gbc.setState(0xca46, 0xdf11, 0x9580, 0x8667, 0x357b, 0x60df, 0x0, 0x1);
        gbc.writeMem(0xca46, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xdf11);
        EXPECT(gbc.pc(), 0xca48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca46), 0xcb);
        EXPECT(gbc.readMem(0xca47), 0x6b);
        // CB 6B 023B
        gbc.setState(0xc510, 0x6a4e, 0x4360, 0xa13c, 0x3e36, 0xad2b, 0x0, 0x0);
        gbc.writeMem(0xc510, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x6a4e);
        EXPECT(gbc.pc(), 0xc512);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc510), 0xcb);
        EXPECT(gbc.readMem(0xc511), 0x6b);
        // CB 6B 023D
        gbc.setState(0xd3d4, 0x482b, 0x7500, 0x4870, 0xd9d8, 0xe5fe, 0x1, 0x1);
        gbc.writeMem(0xd3d4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x482b);
        EXPECT(gbc.pc(), 0xd3d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3d4), 0xcb);
        EXPECT(gbc.readMem(0xd3d5), 0x6b);
        // CB 6B 023E
        gbc.setState(0x4d3d, 0x5246, 0x2bb0, 0x6ac9, 0x73a8, 0x5cd4, 0x0, 0x1);
        gbc.writeMem(0x4d3d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x5246);
        EXPECT(gbc.pc(), 0x4d3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 023F
        gbc.setState(0xda0e, 0xd8ad, 0xa490, 0x8f25, 0xb4a0, 0x3f60, 0x1, 0x0);
        gbc.writeMem(0xda0e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xd8ad);
        EXPECT(gbc.pc(), 0xda10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda0e), 0xcb);
        EXPECT(gbc.readMem(0xda0f), 0x6b);
        // CB 6B 0240
        gbc.setState(0xa1a5, 0xfcc9, 0xe350, 0xe43b, 0xccad, 0xa2b1, 0x1, 0x1);
        gbc.writeMem(0xa1a5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xfcc9);
        EXPECT(gbc.pc(), 0xa1a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1a5), 0xcb);
        EXPECT(gbc.readMem(0xa1a6), 0x6b);
        // CB 6B 0241
        gbc.setState(0x6cdc, 0xcc7e, 0x1810, 0x7d48, 0x1780, 0xad2c, 0x1, 0x1);
        gbc.writeMem(0x6cdc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xcc7e);
        EXPECT(gbc.pc(), 0x6cde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0242
        gbc.setState(0x320, 0x2ca7, 0x9360, 0xad13, 0xe99c, 0x66b0, 0x1, 0x1);
        gbc.writeMem(0x320, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x2ca7);
        EXPECT(gbc.pc(), 0x322);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0243
        gbc.setState(0xb4a7, 0xffb4, 0x8b10, 0x9f1a, 0xca62, 0x84ee, 0x0, 0x0);
        gbc.writeMem(0xb4a7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xffb4);
        EXPECT(gbc.pc(), 0xb4a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4a7), 0xcb);
        EXPECT(gbc.readMem(0xb4a8), 0x6b);
        // CB 6B 0244
        gbc.setState(0x8cb, 0xc1ad, 0xe500, 0x3941, 0xda24, 0xc872, 0x1, 0x0);
        gbc.writeMem(0x8cb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xc1ad);
        EXPECT(gbc.pc(), 0x8cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0245
        gbc.setState(0x6929, 0x4914, 0x95e0, 0xae59, 0xa033, 0x8590, 0x0, 0x0);
        gbc.writeMem(0x6929, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x4914);
        EXPECT(gbc.pc(), 0x692b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0246
        gbc.setState(0xa56d, 0xf62a, 0xfc0, 0xad69, 0xf708, 0xdbc3, 0x1, 0x1);
        gbc.writeMem(0xa56d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xf62a);
        EXPECT(gbc.pc(), 0xa56f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa56d), 0xcb);
        EXPECT(gbc.readMem(0xa56e), 0x6b);
        // CB 6B 0248
        gbc.setState(0x62fe, 0x1bd8, 0x6960, 0x943b, 0x8235, 0x9d7e, 0x1, 0x0);
        gbc.writeMem(0x62fe, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x1bd8);
        EXPECT(gbc.pc(), 0x6300);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0249
        gbc.setState(0x8bcc, 0x9334, 0x3d60, 0x9a9b, 0xb026, 0xdd81, 0x0, 0x1);
        gbc.writeMem(0x8bcc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x9334);
        EXPECT(gbc.pc(), 0x8bce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bcc), 0xcb);
        EXPECT(gbc.readMem(0x8bcd), 0x6b);
        // CB 6B 024A
        gbc.setState(0x8dd7, 0xbb68, 0xaf30, 0x4a60, 0xe920, 0xcb2f, 0x1, 0x0);
        gbc.writeMem(0x8dd7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xbb68);
        EXPECT(gbc.pc(), 0x8dd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dd7), 0xcb);
        EXPECT(gbc.readMem(0x8dd8), 0x6b);
        // CB 6B 024B
        gbc.setState(0x533b, 0x74ef, 0xf340, 0x3761, 0x28e2, 0x79d9, 0x0, 0x1);
        gbc.writeMem(0x533b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x74ef);
        EXPECT(gbc.pc(), 0x533d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 024C
        gbc.setState(0xab31, 0xd54e, 0xf1a0, 0xb0a7, 0xd865, 0xc44, 0x0, 0x1);
        gbc.writeMem(0xab31, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xd54e);
        EXPECT(gbc.pc(), 0xab33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab31), 0xcb);
        EXPECT(gbc.readMem(0xab32), 0x6b);
        // CB 6B 024D
        gbc.setState(0xb1eb, 0x5efc, 0x8510, 0x2ff7, 0xf6ff, 0x78a4, 0x0, 0x0);
        gbc.writeMem(0xb1eb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x5efc);
        EXPECT(gbc.pc(), 0xb1ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1eb), 0xcb);
        EXPECT(gbc.readMem(0xb1ec), 0x6b);
        // CB 6B 024E
        gbc.setState(0x8c3a, 0x9354, 0xc430, 0x8228, 0x6e88, 0x2152, 0x0, 0x0);
        gbc.writeMem(0x8c3a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x9354);
        EXPECT(gbc.pc(), 0x8c3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c3a), 0xcb);
        EXPECT(gbc.readMem(0x8c3b), 0x6b);
        // CB 6B 0252
        gbc.setState(0x6011, 0x5ef0, 0x260, 0xda5b, 0x82bd, 0x1818, 0x0, 0x0);
        gbc.writeMem(0x6011, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x5ef0);
        EXPECT(gbc.pc(), 0x6013);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0253
        gbc.setState(0xf2a, 0x8c92, 0x56d0, 0x76d1, 0x4a4, 0x2a06, 0x0, 0x1);
        gbc.writeMem(0xf2a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x8c92);
        EXPECT(gbc.pc(), 0xf2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0254
        gbc.setState(0xee4a, 0xb2a0, 0x9bb0, 0x4a8e, 0x52be, 0x4591, 0x1, 0x1);
        gbc.writeMem(0xee4a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xb2a0);
        EXPECT(gbc.pc(), 0xee4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee4a), 0xcb);
        EXPECT(gbc.readMem(0xee4b), 0x6b);
        // CB 6B 0255
        gbc.setState(0x7b9e, 0x3834, 0xac10, 0x1590, 0xcdc5, 0x2b, 0x0, 0x1);
        gbc.writeMem(0x7b9e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x3834);
        EXPECT(gbc.pc(), 0x7ba0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0256
        gbc.setState(0xa71e, 0x9fb6, 0x84c0, 0x8df8, 0xee64, 0x6d6a, 0x1, 0x0);
        gbc.writeMem(0xa71e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x9fb6);
        EXPECT(gbc.pc(), 0xa720);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa71e), 0xcb);
        EXPECT(gbc.readMem(0xa71f), 0x6b);
        // CB 6B 0257
        gbc.setState(0x2a1e, 0x5efd, 0xd560, 0xeb77, 0x7a6, 0x7c1, 0x1, 0x0);
        gbc.writeMem(0x2a1e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x5efd);
        EXPECT(gbc.pc(), 0x2a20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0258
        gbc.setState(0xc016, 0x80a9, 0xb450, 0x3206, 0xb7ff, 0xe074, 0x0, 0x1);
        gbc.writeMem(0xc016, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x80a9);
        EXPECT(gbc.pc(), 0xc018);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc016), 0xcb);
        EXPECT(gbc.readMem(0xc017), 0x6b);
        // CB 6B 0259
        gbc.setState(0x361, 0x35dd, 0xeee0, 0x1037, 0xc7cf, 0x6503, 0x1, 0x1);
        gbc.writeMem(0x361, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x35dd);
        EXPECT(gbc.pc(), 0x363);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 025A
        gbc.setState(0x7c0a, 0xf4c, 0x46b0, 0xcdac, 0x7663, 0x532e, 0x1, 0x0);
        gbc.writeMem(0x7c0a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xf4c);
        EXPECT(gbc.pc(), 0x7c0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 025B
        gbc.setState(0x4383, 0xff88, 0xf330, 0xf8d0, 0x41b2, 0x940, 0x1, 0x1);
        gbc.writeMem(0x4383, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xff88);
        EXPECT(gbc.pc(), 0x4385);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 025C
        gbc.setState(0x7895, 0xde96, 0x4720, 0x22c3, 0x4313, 0xcfb6, 0x1, 0x0);
        gbc.writeMem(0x7895, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xde96);
        EXPECT(gbc.pc(), 0x7897);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 025D
        gbc.setState(0xa6d7, 0x430b, 0x58e0, 0x7b4f, 0xbfd7, 0xf38a, 0x1, 0x1);
        gbc.writeMem(0xa6d7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x430b);
        EXPECT(gbc.pc(), 0xa6d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6d7), 0xcb);
        EXPECT(gbc.readMem(0xa6d8), 0x6b);
        // CB 6B 025E
        gbc.setState(0xc10a, 0xcacc, 0xefb0, 0xa502, 0xb14c, 0x43c2, 0x0, 0x1);
        gbc.writeMem(0xc10a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xcacc);
        EXPECT(gbc.pc(), 0xc10c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc10a), 0xcb);
        EXPECT(gbc.readMem(0xc10b), 0x6b);
        // CB 6B 0260
        gbc.setState(0xfe0, 0x6c71, 0x7630, 0x77fe, 0xe802, 0xb6e, 0x0, 0x0);
        gbc.writeMem(0xfe0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x6c71);
        EXPECT(gbc.pc(), 0xfe2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0261
        gbc.setState(0x9ccb, 0xdea1, 0xd630, 0xb121, 0xaade, 0x18a, 0x0, 0x0);
        gbc.writeMem(0x9ccb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xdea1);
        EXPECT(gbc.pc(), 0x9ccd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ccb), 0xcb);
        EXPECT(gbc.readMem(0x9ccc), 0x6b);
        // CB 6B 0262
        gbc.setState(0xb2a, 0x733b, 0x1320, 0x202e, 0x1c44, 0xb878, 0x0, 0x1);
        gbc.writeMem(0xb2a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x733b);
        EXPECT(gbc.pc(), 0xb2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0263
        gbc.setState(0x10a2, 0x532f, 0xf4f0, 0xb8f0, 0xf0ca, 0xba68, 0x0, 0x0);
        gbc.writeMem(0x10a2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x532f);
        EXPECT(gbc.pc(), 0x10a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0264
        gbc.setState(0xb83d, 0x65d9, 0xd440, 0xb34d, 0xaddc, 0x5a7d, 0x1, 0x1);
        gbc.writeMem(0xb83d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x65d9);
        EXPECT(gbc.pc(), 0xb83f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb83d), 0xcb);
        EXPECT(gbc.readMem(0xb83e), 0x6b);
        // CB 6B 0265
        gbc.setState(0x5c4, 0x5346, 0xbdf0, 0xa741, 0x439d, 0xd8cc, 0x1, 0x0);
        gbc.writeMem(0x5c4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x5346);
        EXPECT(gbc.pc(), 0x5c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0266
        gbc.setState(0x79e3, 0x3e73, 0xf6d0, 0xbf42, 0x4f08, 0x9b6c, 0x0, 0x0);
        gbc.writeMem(0x79e3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x3e73);
        EXPECT(gbc.pc(), 0x79e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0267
        gbc.setState(0x7f21, 0xab7e, 0x7050, 0x2509, 0xe763, 0x662e, 0x0, 0x0);
        gbc.writeMem(0x7f21, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xab7e);
        EXPECT(gbc.pc(), 0x7f23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0268
        gbc.setState(0x6f27, 0x7da, 0x2d50, 0xcc, 0xf33a, 0xae71, 0x1, 0x1);
        gbc.writeMem(0x6f27, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x7da);
        EXPECT(gbc.pc(), 0x6f29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0269
        gbc.setState(0x77c7, 0x3746, 0x430, 0x8c35, 0x940e, 0x4c7, 0x0, 0x1);
        gbc.writeMem(0x77c7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x3746);
        EXPECT(gbc.pc(), 0x77c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 026A
        gbc.setState(0xd33a, 0xfd55, 0x5380, 0xdfff, 0xc825, 0xe59, 0x0, 0x0);
        gbc.writeMem(0xd33a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xfd55);
        EXPECT(gbc.pc(), 0xd33c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd33a), 0xcb);
        EXPECT(gbc.readMem(0xd33b), 0x6b);
        // CB 6B 026B
        gbc.setState(0x3b10, 0xf838, 0xa2c0, 0x2216, 0xd620, 0xf7d2, 0x0, 0x1);
        gbc.writeMem(0x3b10, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xf838);
        EXPECT(gbc.pc(), 0x3b12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 026D
        gbc.setState(0x29f7, 0x269a, 0x1180, 0xc3f3, 0x8f4a, 0x4558, 0x1, 0x1);
        gbc.writeMem(0x29f7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x269a);
        EXPECT(gbc.pc(), 0x29f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 026E
        gbc.setState(0x7529, 0x5b49, 0x2450, 0xf088, 0x9a92, 0xaeb1, 0x1, 0x1);
        gbc.writeMem(0x7529, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x5b49);
        EXPECT(gbc.pc(), 0x752b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 026F
        gbc.setState(0x91bb, 0x67f5, 0xdfa0, 0xf12a, 0x22ec, 0xbb11, 0x1, 0x1);
        gbc.writeMem(0x91bb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x67f5);
        EXPECT(gbc.pc(), 0x91bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91bb), 0xcb);
        EXPECT(gbc.readMem(0x91bc), 0x6b);
        // CB 6B 0270
        gbc.setState(0x8033, 0x5d57, 0x1730, 0xeac5, 0x14f1, 0xaa51, 0x1, 0x1);
        gbc.writeMem(0x8033, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x5d57);
        EXPECT(gbc.pc(), 0x8035);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8033), 0xcb);
        EXPECT(gbc.readMem(0x8034), 0x6b);
        // CB 6B 0271
        gbc.setState(0x19c3, 0x1322, 0x9f0, 0xeec2, 0x2ebb, 0x2694, 0x0, 0x1);
        gbc.writeMem(0x19c3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1322);
        EXPECT(gbc.pc(), 0x19c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0272
        gbc.setState(0x7f33, 0x5eb2, 0xbda0, 0x229d, 0xf4a5, 0x95b3, 0x1, 0x0);
        gbc.writeMem(0x7f33, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x5eb2);
        EXPECT(gbc.pc(), 0x7f35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0273
        gbc.setState(0x264, 0x456f, 0xeac0, 0x20c, 0x192e, 0xe983, 0x1, 0x0);
        gbc.writeMem(0x264, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x456f);
        EXPECT(gbc.pc(), 0x266);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0275
        gbc.setState(0xb5e7, 0x41a1, 0xdd70, 0x4748, 0xeeac, 0x8e00, 0x0, 0x0);
        gbc.writeMem(0xb5e7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x41a1);
        EXPECT(gbc.pc(), 0xb5e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5e7), 0xcb);
        EXPECT(gbc.readMem(0xb5e8), 0x6b);
        // CB 6B 0276
        gbc.setState(0x8269, 0x77e0, 0x2080, 0xfe49, 0xe0c5, 0x6955, 0x0, 0x0);
        gbc.writeMem(0x8269, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x77e0);
        EXPECT(gbc.pc(), 0x826b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8269), 0xcb);
        EXPECT(gbc.readMem(0x826a), 0x6b);
        // CB 6B 0277
        gbc.setState(0x31e3, 0xd84b, 0xfb30, 0x2aad, 0x70b5, 0x96bc, 0x0, 0x1);
        gbc.writeMem(0x31e3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xd84b);
        EXPECT(gbc.pc(), 0x31e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0278
        gbc.setState(0x43ba, 0xdb84, 0xa450, 0x779, 0x9073, 0x13ac, 0x0, 0x1);
        gbc.writeMem(0x43ba, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xdb84);
        EXPECT(gbc.pc(), 0x43bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0279
        gbc.setState(0x91a, 0x9f71, 0xbc0, 0x78eb, 0x1b5e, 0xcb7, 0x1, 0x1);
        gbc.writeMem(0x91a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x9f71);
        EXPECT(gbc.pc(), 0x91c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 027A
        gbc.setState(0x38aa, 0xbbcf, 0x2480, 0x824e, 0x8537, 0x7d35, 0x1, 0x0);
        gbc.writeMem(0x38aa, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xbbcf);
        EXPECT(gbc.pc(), 0x38ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 027B
        gbc.setState(0xe341, 0xe76f, 0x6010, 0x5719, 0x9fd, 0xbb26, 0x1, 0x0);
        gbc.writeMem(0xe341, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xe76f);
        EXPECT(gbc.pc(), 0xe343);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe341), 0xcb);
        EXPECT(gbc.readMem(0xe342), 0x6b);
        // CB 6B 027C
        gbc.setState(0x8a8d, 0x90a7, 0x66f0, 0x541c, 0xea82, 0xe57d, 0x0, 0x1);
        gbc.writeMem(0x8a8d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x90a7);
        EXPECT(gbc.pc(), 0x8a8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a8d), 0xcb);
        EXPECT(gbc.readMem(0x8a8e), 0x6b);
        // CB 6B 027D
        gbc.setState(0xbfbb, 0x754b, 0xc4b0, 0xeeaf, 0x832, 0x78f3, 0x0, 0x1);
        gbc.writeMem(0xbfbb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x754b);
        EXPECT(gbc.pc(), 0xbfbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfbb), 0xcb);
        EXPECT(gbc.readMem(0xbfbc), 0x6b);
        // CB 6B 027E
        gbc.setState(0x192a, 0x7482, 0x2640, 0x115d, 0x404c, 0x3906, 0x1, 0x1);
        gbc.writeMem(0x192a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x7482);
        EXPECT(gbc.pc(), 0x192c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 027F
        gbc.setState(0xbeeb, 0xf337, 0xd000, 0x1dda, 0xaee, 0x9349, 0x0, 0x1);
        gbc.writeMem(0xbeeb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xf337);
        EXPECT(gbc.pc(), 0xbeed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeeb), 0xcb);
        EXPECT(gbc.readMem(0xbeec), 0x6b);
        // CB 6B 0280
        gbc.setState(0x9710, 0x3492, 0xb090, 0xd231, 0x8ae0, 0x856d, 0x1, 0x0);
        gbc.writeMem(0x9710, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x3492);
        EXPECT(gbc.pc(), 0x9712);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9710), 0xcb);
        EXPECT(gbc.readMem(0x9711), 0x6b);
        // CB 6B 0281
        gbc.setState(0xc744, 0xa32b, 0x5a90, 0x5095, 0x6432, 0x7116, 0x1, 0x0);
        gbc.writeMem(0xc744, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xa32b);
        EXPECT(gbc.pc(), 0xc746);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc744), 0xcb);
        EXPECT(gbc.readMem(0xc745), 0x6b);
        // CB 6B 0282
        gbc.setState(0x8049, 0x1656, 0x7480, 0x65b5, 0x6243, 0x3f33, 0x1, 0x0);
        gbc.writeMem(0x8049, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x1656);
        EXPECT(gbc.pc(), 0x804b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8049), 0xcb);
        EXPECT(gbc.readMem(0x804a), 0x6b);
        // CB 6B 0283
        gbc.setState(0xe704, 0x5aa9, 0xbaa0, 0xca0b, 0xedd5, 0x8347, 0x0, 0x0);
        gbc.writeMem(0xe704, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x5aa9);
        EXPECT(gbc.pc(), 0xe706);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe704), 0xcb);
        EXPECT(gbc.readMem(0xe705), 0x6b);
        // CB 6B 0284
        gbc.setState(0xeaf1, 0x2c71, 0xa590, 0xc418, 0x88e0, 0xba05, 0x0, 0x1);
        gbc.writeMem(0xeaf1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x2c71);
        EXPECT(gbc.pc(), 0xeaf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeaf1), 0xcb);
        EXPECT(gbc.readMem(0xeaf2), 0x6b);
        // CB 6B 0285
        gbc.setState(0x1843, 0x94db, 0xda90, 0xbca1, 0x4cdc, 0x5fff, 0x0, 0x0);
        gbc.writeMem(0x1843, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x94db);
        EXPECT(gbc.pc(), 0x1845);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0286
        gbc.setState(0x521a, 0xbdbd, 0x4660, 0xd634, 0xce5c, 0x23fa, 0x0, 0x1);
        gbc.writeMem(0x521a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xbdbd);
        EXPECT(gbc.pc(), 0x521c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0287
        gbc.setState(0x58a6, 0xc6b7, 0x820, 0x3dec, 0x504b, 0x47f, 0x1, 0x1);
        gbc.writeMem(0x58a6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xc6b7);
        EXPECT(gbc.pc(), 0x58a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0288
        gbc.setState(0x2f1a, 0x8dc7, 0x2f70, 0xacfc, 0x2204, 0x3da3, 0x0, 0x1);
        gbc.writeMem(0x2f1a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x8dc7);
        EXPECT(gbc.pc(), 0x2f1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0289
        gbc.setState(0x8461, 0x5b4b, 0xe3f0, 0x1fbf, 0x910a, 0xa20f, 0x1, 0x1);
        gbc.writeMem(0x8461, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x5b4b);
        EXPECT(gbc.pc(), 0x8463);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8461), 0xcb);
        EXPECT(gbc.readMem(0x8462), 0x6b);
        // CB 6B 028A
        gbc.setState(0x18c6, 0x61ef, 0x17e0, 0x58d1, 0x5f2a, 0x7bce, 0x0, 0x1);
        gbc.writeMem(0x18c6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x61ef);
        EXPECT(gbc.pc(), 0x18c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 028B
        gbc.setState(0xddcc, 0xfc88, 0xa6a0, 0x68ed, 0x4bb1, 0xbdc1, 0x1, 0x1);
        gbc.writeMem(0xddcc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xfc88);
        EXPECT(gbc.pc(), 0xddce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddcc), 0xcb);
        EXPECT(gbc.readMem(0xddcd), 0x6b);
        // CB 6B 028C
        gbc.setState(0xbdc9, 0x6ed0, 0x2460, 0x6e85, 0x4e28, 0x2456, 0x1, 0x0);
        gbc.writeMem(0xbdc9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x6ed0);
        EXPECT(gbc.pc(), 0xbdcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdc9), 0xcb);
        EXPECT(gbc.readMem(0xbdca), 0x6b);
        // CB 6B 028D
        gbc.setState(0x5b03, 0xf6a0, 0x8330, 0x2729, 0x9ff6, 0x14c, 0x1, 0x1);
        gbc.writeMem(0x5b03, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xf6a0);
        EXPECT(gbc.pc(), 0x5b05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 028E
        gbc.setState(0xbd06, 0x4863, 0xcaa0, 0xd659, 0x99cf, 0xfe78, 0x0, 0x1);
        gbc.writeMem(0xbd06, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x4863);
        EXPECT(gbc.pc(), 0xbd08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd06), 0xcb);
        EXPECT(gbc.readMem(0xbd07), 0x6b);
        // CB 6B 028F
        gbc.setState(0x5afe, 0x592a, 0xf220, 0x651d, 0x5c1b, 0x1d9d, 0x1, 0x1);
        gbc.writeMem(0x5afe, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x592a);
        EXPECT(gbc.pc(), 0x5b00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0290
        gbc.setState(0x4bf6, 0xa83c, 0x4920, 0x6a1f, 0x1942, 0x5c75, 0x0, 0x0);
        gbc.writeMem(0x4bf6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xa83c);
        EXPECT(gbc.pc(), 0x4bf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0291
        gbc.setState(0x4bcf, 0x2d33, 0xeb00, 0x8b73, 0xb2e9, 0x6a0b, 0x0, 0x0);
        gbc.writeMem(0x4bcf, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x2d33);
        EXPECT(gbc.pc(), 0x4bd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0292
        gbc.setState(0x997c, 0x26b6, 0x9b70, 0xf052, 0x72da, 0x27e4, 0x0, 0x0);
        gbc.writeMem(0x997c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x26b6);
        EXPECT(gbc.pc(), 0x997e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x997c), 0xcb);
        EXPECT(gbc.readMem(0x997d), 0x6b);
        // CB 6B 0293
        gbc.setState(0xdb5, 0xb58c, 0x9f80, 0x5230, 0x48a, 0x4e2e, 0x0, 0x0);
        gbc.writeMem(0xdb5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xb58c);
        EXPECT(gbc.pc(), 0xdb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0294
        gbc.setState(0xb324, 0x31e7, 0x7c20, 0xf1ac, 0x5e4e, 0x7668, 0x1, 0x0);
        gbc.writeMem(0xb324, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x31e7);
        EXPECT(gbc.pc(), 0xb326);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb324), 0xcb);
        EXPECT(gbc.readMem(0xb325), 0x6b);
        // CB 6B 0295
        gbc.setState(0xb62d, 0x2035, 0x1460, 0xae5e, 0x5445, 0x538d, 0x1, 0x0);
        gbc.writeMem(0xb62d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x2035);
        EXPECT(gbc.pc(), 0xb62f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb62d), 0xcb);
        EXPECT(gbc.readMem(0xb62e), 0x6b);
        // CB 6B 0296
        gbc.setState(0xc6b5, 0xaf4c, 0x7ed0, 0xe55, 0xd976, 0x9568, 0x0, 0x0);
        gbc.writeMem(0xc6b5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xaf4c);
        EXPECT(gbc.pc(), 0xc6b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6b5), 0xcb);
        EXPECT(gbc.readMem(0xc6b6), 0x6b);
        // CB 6B 0297
        gbc.setState(0x245b, 0xfa18, 0xde80, 0x969b, 0x49c6, 0x7a8a, 0x1, 0x0);
        gbc.writeMem(0x245b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xfa18);
        EXPECT(gbc.pc(), 0x245d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0298
        gbc.setState(0x7267, 0x4d06, 0xb380, 0x64c2, 0x9e4a, 0x52f, 0x1, 0x0);
        gbc.writeMem(0x7267, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x4d06);
        EXPECT(gbc.pc(), 0x7269);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0299
        gbc.setState(0x80bb, 0x9bea, 0xc1f0, 0x856b, 0x6a02, 0x967, 0x1, 0x0);
        gbc.writeMem(0x80bb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x9bea);
        EXPECT(gbc.pc(), 0x80bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80bb), 0xcb);
        EXPECT(gbc.readMem(0x80bc), 0x6b);
        // CB 6B 029A
        gbc.setState(0x3134, 0x6f9b, 0xc200, 0xbfef, 0xfa9f, 0xcb70, 0x0, 0x0);
        gbc.writeMem(0x3134, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x6f9b);
        EXPECT(gbc.pc(), 0x3136);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 029B
        gbc.setState(0x6a9, 0x109e, 0xf2f0, 0xf665, 0x95f4, 0x36f8, 0x1, 0x0);
        gbc.writeMem(0x6a9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x109e);
        EXPECT(gbc.pc(), 0x6ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 029C
        gbc.setState(0x5fdb, 0x7d92, 0x1510, 0xb760, 0x7ba, 0x75f5, 0x0, 0x0);
        gbc.writeMem(0x5fdb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x7d92);
        EXPECT(gbc.pc(), 0x5fdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 029D
        gbc.setState(0x99b1, 0x93ae, 0xa210, 0xdfc0, 0x5b63, 0x3c90, 0x1, 0x1);
        gbc.writeMem(0x99b1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x93ae);
        EXPECT(gbc.pc(), 0x99b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99b1), 0xcb);
        EXPECT(gbc.readMem(0x99b2), 0x6b);
        // CB 6B 029E
        gbc.setState(0xcf0, 0x337d, 0xb540, 0xeae6, 0x63fe, 0xbe9c, 0x0, 0x0);
        gbc.writeMem(0xcf0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x337d);
        EXPECT(gbc.pc(), 0xcf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 029F
        gbc.setState(0xcd57, 0x875a, 0xb460, 0x4070, 0xee06, 0xfdbf, 0x0, 0x1);
        gbc.writeMem(0xcd57, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x875a);
        EXPECT(gbc.pc(), 0xcd59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd57), 0xcb);
        EXPECT(gbc.readMem(0xcd58), 0x6b);
        // CB 6B 02A0
        gbc.setState(0x852c, 0xec0b, 0x5460, 0x8c05, 0x1347, 0x61fc, 0x1, 0x0);
        gbc.writeMem(0x852c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xec0b);
        EXPECT(gbc.pc(), 0x852e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x852c), 0xcb);
        EXPECT(gbc.readMem(0x852d), 0x6b);
        // CB 6B 02A1
        gbc.setState(0xb9c1, 0x2484, 0xff40, 0x16f, 0xec48, 0x10e9, 0x0, 0x1);
        gbc.writeMem(0xb9c1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x2484);
        EXPECT(gbc.pc(), 0xb9c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9c1), 0xcb);
        EXPECT(gbc.readMem(0xb9c2), 0x6b);
        // CB 6B 02A2
        gbc.setState(0x7036, 0x227f, 0x4b0, 0x2066, 0x4db0, 0x7ba5, 0x1, 0x1);
        gbc.writeMem(0x7036, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x227f);
        EXPECT(gbc.pc(), 0x7038);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02A3
        gbc.setState(0x917e, 0x7e7e, 0xe4a0, 0x7206, 0xf723, 0x5e3c, 0x1, 0x0);
        gbc.writeMem(0x917e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x7e7e);
        EXPECT(gbc.pc(), 0x9180);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x917e), 0xcb);
        EXPECT(gbc.readMem(0x917f), 0x6b);
        // CB 6B 02A4
        gbc.setState(0xea5c, 0x7a1, 0xe600, 0x2544, 0x527, 0xe1d3, 0x0, 0x0);
        gbc.writeMem(0xea5c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x7a1);
        EXPECT(gbc.pc(), 0xea5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea5c), 0xcb);
        EXPECT(gbc.readMem(0xea5d), 0x6b);
        // CB 6B 02A5
        gbc.setState(0xc015, 0x2ee0, 0x1360, 0xadce, 0xd383, 0x5d69, 0x1, 0x1);
        gbc.writeMem(0xc015, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x2ee0);
        EXPECT(gbc.pc(), 0xc017);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc015), 0xcb);
        EXPECT(gbc.readMem(0xc016), 0x6b);
        // CB 6B 02A6
        gbc.setState(0x173a, 0xa8ae, 0xfba0, 0x75d1, 0x566, 0xfbfa, 0x1, 0x1);
        gbc.writeMem(0x173a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xa8ae);
        EXPECT(gbc.pc(), 0x173c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02A7
        gbc.setState(0x3362, 0x6835, 0x1c50, 0x2014, 0xab36, 0x755e, 0x1, 0x0);
        gbc.writeMem(0x3362, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x6835);
        EXPECT(gbc.pc(), 0x3364);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02A8
        gbc.setState(0xce10, 0x9f9e, 0xb820, 0x4fb4, 0x44c8, 0xfaf8, 0x1, 0x1);
        gbc.writeMem(0xce10, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x9f9e);
        EXPECT(gbc.pc(), 0xce12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce10), 0xcb);
        EXPECT(gbc.readMem(0xce11), 0x6b);
        // CB 6B 02A9
        gbc.setState(0x5074, 0x40ce, 0x7e60, 0xf522, 0xbaf5, 0x3cbd, 0x0, 0x1);
        gbc.writeMem(0x5074, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x40ce);
        EXPECT(gbc.pc(), 0x5076);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02AA
        gbc.setState(0xb2f7, 0x49f6, 0x56f0, 0x88e5, 0x2821, 0x45eb, 0x0, 0x1);
        gbc.writeMem(0xb2f7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x49f6);
        EXPECT(gbc.pc(), 0xb2f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2f7), 0xcb);
        EXPECT(gbc.readMem(0xb2f8), 0x6b);
        // CB 6B 02AB
        gbc.setState(0x8a72, 0x86e4, 0xfd00, 0xfbed, 0xb336, 0xa47c, 0x1, 0x0);
        gbc.writeMem(0x8a72, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x86e4);
        EXPECT(gbc.pc(), 0x8a74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a72), 0xcb);
        EXPECT(gbc.readMem(0x8a73), 0x6b);
        // CB 6B 02AC
        gbc.setState(0x4aaa, 0x615a, 0xf880, 0xd794, 0x38a6, 0xb94a, 0x1, 0x0);
        gbc.writeMem(0x4aaa, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x615a);
        EXPECT(gbc.pc(), 0x4aac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02AD
        gbc.setState(0xa224, 0x8e1, 0xcef0, 0xafb2, 0xafa8, 0x3b53, 0x0, 0x0);
        gbc.writeMem(0xa224, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x8e1);
        EXPECT(gbc.pc(), 0xa226);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa224), 0xcb);
        EXPECT(gbc.readMem(0xa225), 0x6b);
        // CB 6B 02AE
        gbc.setState(0x613a, 0x7551, 0x8920, 0x8ed1, 0x14cd, 0x4f01, 0x1, 0x0);
        gbc.writeMem(0x613a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x7551);
        EXPECT(gbc.pc(), 0x613c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02AF
        gbc.setState(0xd42, 0x75c9, 0xcbd0, 0xbad, 0x603a, 0x77a0, 0x0, 0x1);
        gbc.writeMem(0xd42, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x75c9);
        EXPECT(gbc.pc(), 0xd44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02B0
        gbc.setState(0x1d8b, 0xcad1, 0x2800, 0x33f9, 0xf97f, 0xbc33, 0x1, 0x1);
        gbc.writeMem(0x1d8b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xcad1);
        EXPECT(gbc.pc(), 0x1d8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02B1
        gbc.setState(0x4ac3, 0x12fb, 0xaa20, 0x623b, 0x39c1, 0x1d16, 0x0, 0x1);
        gbc.writeMem(0x4ac3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x12fb);
        EXPECT(gbc.pc(), 0x4ac5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02B2
        gbc.setState(0x9b8c, 0xca1, 0x5940, 0xcb56, 0xb5b1, 0xa117, 0x0, 0x0);
        gbc.writeMem(0x9b8c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xca1);
        EXPECT(gbc.pc(), 0x9b8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b8c), 0xcb);
        EXPECT(gbc.readMem(0x9b8d), 0x6b);
        // CB 6B 02B3
        gbc.setState(0x3711, 0x1210, 0xcb0, 0xbc16, 0x10cc, 0x5615, 0x0, 0x0);
        gbc.writeMem(0x3711, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x1210);
        EXPECT(gbc.pc(), 0x3713);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02B4
        gbc.setState(0xb3d8, 0x67d9, 0xc640, 0xfbf2, 0x5ad2, 0x1e05, 0x1, 0x0);
        gbc.writeMem(0xb3d8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x67d9);
        EXPECT(gbc.pc(), 0xb3da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3d8), 0xcb);
        EXPECT(gbc.readMem(0xb3d9), 0x6b);
        // CB 6B 02B5
        gbc.setState(0x18ce, 0xfeaa, 0xcbe0, 0xa749, 0x51fa, 0x2ffa, 0x1, 0x0);
        gbc.writeMem(0x18ce, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xfeaa);
        EXPECT(gbc.pc(), 0x18d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02B6
        gbc.setState(0x5fc5, 0x6c90, 0x7470, 0x3fc2, 0x9dff, 0x486d, 0x1, 0x0);
        gbc.writeMem(0x5fc5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x6c90);
        EXPECT(gbc.pc(), 0x5fc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02B7
        gbc.setState(0x57fc, 0x46e7, 0xca60, 0xcfcd, 0xab5b, 0xc412, 0x0, 0x1);
        gbc.writeMem(0x57fc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x46e7);
        EXPECT(gbc.pc(), 0x57fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02B8
        gbc.setState(0x37cb, 0x3aa5, 0x9310, 0xef79, 0x4faa, 0xfa84, 0x1, 0x1);
        gbc.writeMem(0x37cb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x3aa5);
        EXPECT(gbc.pc(), 0x37cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02B9
        gbc.setState(0xac88, 0x21d9, 0xb410, 0xdb71, 0xcd88, 0x3a33, 0x0, 0x1);
        gbc.writeMem(0xac88, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x21d9);
        EXPECT(gbc.pc(), 0xac8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac88), 0xcb);
        EXPECT(gbc.readMem(0xac89), 0x6b);
        // CB 6B 02BA
        gbc.setState(0x1b7d, 0xf596, 0xb820, 0xb601, 0xc730, 0x3af2, 0x0, 0x0);
        gbc.writeMem(0x1b7d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xf596);
        EXPECT(gbc.pc(), 0x1b7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02BB
        gbc.setState(0x4db4, 0xb926, 0x6b60, 0x696f, 0x346b, 0x2b51, 0x1, 0x1);
        gbc.writeMem(0x4db4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xb926);
        EXPECT(gbc.pc(), 0x4db6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02BC
        gbc.setState(0x8d1e, 0x389f, 0xd390, 0xc026, 0xe0af, 0xedcc, 0x0, 0x1);
        gbc.writeMem(0x8d1e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x389f);
        EXPECT(gbc.pc(), 0x8d20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d1e), 0xcb);
        EXPECT(gbc.readMem(0x8d1f), 0x6b);
        // CB 6B 02BD
        gbc.setState(0x5fe4, 0xd5ac, 0x3240, 0x314, 0xb469, 0xdcfe, 0x0, 0x1);
        gbc.writeMem(0x5fe4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xd5ac);
        EXPECT(gbc.pc(), 0x5fe6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02BE
        gbc.setState(0xaf8f, 0x71f5, 0x2550, 0x309d, 0xa97d, 0xd7e, 0x0, 0x0);
        gbc.writeMem(0xaf8f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x71f5);
        EXPECT(gbc.pc(), 0xaf91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf8f), 0xcb);
        EXPECT(gbc.readMem(0xaf90), 0x6b);
        // CB 6B 02BF
        gbc.setState(0x3cf6, 0xaeee, 0xb290, 0x7b23, 0xe7b5, 0xfde9, 0x1, 0x1);
        gbc.writeMem(0x3cf6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xaeee);
        EXPECT(gbc.pc(), 0x3cf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02C0
        gbc.setState(0xc89d, 0xf4f3, 0x2450, 0x6e9e, 0xd502, 0x4947, 0x0, 0x1);
        gbc.writeMem(0xc89d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xf4f3);
        EXPECT(gbc.pc(), 0xc89f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc89d), 0xcb);
        EXPECT(gbc.readMem(0xc89e), 0x6b);
        // CB 6B 02C1
        gbc.setState(0xe7a5, 0x3d7a, 0x6df0, 0x7130, 0x982e, 0x2234, 0x0, 0x1);
        gbc.writeMem(0xe7a5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x3d7a);
        EXPECT(gbc.pc(), 0xe7a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7a5), 0xcb);
        EXPECT(gbc.readMem(0xe7a6), 0x6b);
        // CB 6B 02C2
        gbc.setState(0x1e23, 0xada4, 0xd840, 0xc862, 0xa50b, 0x2298, 0x1, 0x0);
        gbc.writeMem(0x1e23, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xada4);
        EXPECT(gbc.pc(), 0x1e25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02C3
        gbc.setState(0x40a3, 0x7d66, 0xe980, 0xf8a2, 0xdddc, 0x991d, 0x0, 0x1);
        gbc.writeMem(0x40a3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x7d66);
        EXPECT(gbc.pc(), 0x40a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02C4
        gbc.setState(0xc1ea, 0x4457, 0xb190, 0x1144, 0xe516, 0x95c2, 0x1, 0x0);
        gbc.writeMem(0xc1ea, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x4457);
        EXPECT(gbc.pc(), 0xc1ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1ea), 0xcb);
        EXPECT(gbc.readMem(0xc1eb), 0x6b);
        // CB 6B 02C5
        gbc.setState(0x1353, 0x594b, 0x7e50, 0x653b, 0x6766, 0x949e, 0x1, 0x0);
        gbc.writeMem(0x1353, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x594b);
        EXPECT(gbc.pc(), 0x1355);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02C6
        gbc.setState(0x7552, 0x21c7, 0xa990, 0x9cc2, 0xbb05, 0x2c6c, 0x1, 0x1);
        gbc.writeMem(0x7552, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x21c7);
        EXPECT(gbc.pc(), 0x7554);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02C7
        gbc.setState(0x7576, 0xe207, 0x72b0, 0x3fcf, 0x493e, 0x6562, 0x1, 0x1);
        gbc.writeMem(0x7576, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xe207);
        EXPECT(gbc.pc(), 0x7578);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02C8
        gbc.setState(0x84e9, 0x4aae, 0x9710, 0xc769, 0x89ee, 0x1292, 0x0, 0x1);
        gbc.writeMem(0x84e9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4aae);
        EXPECT(gbc.pc(), 0x84eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84e9), 0xcb);
        EXPECT(gbc.readMem(0x84ea), 0x6b);
        // CB 6B 02C9
        gbc.setState(0x2edc, 0x1c08, 0x85f0, 0xe488, 0xcb28, 0xd9c8, 0x0, 0x1);
        gbc.writeMem(0x2edc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x1c08);
        EXPECT(gbc.pc(), 0x2ede);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02CA
        gbc.setState(0xbc74, 0x9ba3, 0x3d90, 0x228e, 0x5f60, 0xf83f, 0x0, 0x1);
        gbc.writeMem(0xbc74, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x9ba3);
        EXPECT(gbc.pc(), 0xbc76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc74), 0xcb);
        EXPECT(gbc.readMem(0xbc75), 0x6b);
        // CB 6B 02CB
        gbc.setState(0xee72, 0x4bb3, 0x4e80, 0x4a63, 0x9520, 0x4876, 0x1, 0x0);
        gbc.writeMem(0xee72, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x4bb3);
        EXPECT(gbc.pc(), 0xee74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee72), 0xcb);
        EXPECT(gbc.readMem(0xee73), 0x6b);
        // CB 6B 02CC
        gbc.setState(0xcb93, 0xc685, 0x2500, 0x12, 0xd866, 0x4bbf, 0x1, 0x1);
        gbc.writeMem(0xcb93, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xc685);
        EXPECT(gbc.pc(), 0xcb95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb93), 0xcb);
        EXPECT(gbc.readMem(0xcb94), 0x6b);
        // CB 6B 02CD
        gbc.setState(0x2036, 0x5275, 0xb30, 0x35de, 0xeac, 0xaf6c, 0x0, 0x0);
        gbc.writeMem(0x2036, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5275);
        EXPECT(gbc.pc(), 0x2038);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02CE
        gbc.setState(0xaca0, 0x802f, 0x5140, 0xe405, 0xedf6, 0x27ff, 0x1, 0x1);
        gbc.writeMem(0xaca0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x802f);
        EXPECT(gbc.pc(), 0xaca2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaca0), 0xcb);
        EXPECT(gbc.readMem(0xaca1), 0x6b);
        // CB 6B 02CF
        gbc.setState(0xd8af, 0xa626, 0xf820, 0x222e, 0x607f, 0x74ae, 0x0, 0x1);
        gbc.writeMem(0xd8af, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa626);
        EXPECT(gbc.pc(), 0xd8b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8af), 0xcb);
        EXPECT(gbc.readMem(0xd8b0), 0x6b);
        // CB 6B 02D0
        gbc.setState(0xb845, 0xd1ca, 0x65e0, 0x7e11, 0xc28d, 0x73fa, 0x1, 0x1);
        gbc.writeMem(0xb845, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xd1ca);
        EXPECT(gbc.pc(), 0xb847);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb845), 0xcb);
        EXPECT(gbc.readMem(0xb846), 0x6b);
        // CB 6B 02D1
        gbc.setState(0xacce, 0xb57c, 0xd870, 0xec4e, 0x6d65, 0xbf3f, 0x1, 0x1);
        gbc.writeMem(0xacce, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xb57c);
        EXPECT(gbc.pc(), 0xacd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacce), 0xcb);
        EXPECT(gbc.readMem(0xaccf), 0x6b);
        // CB 6B 02D2
        gbc.setState(0x575, 0x1afc, 0x2930, 0xe4f9, 0x1893, 0xd8c3, 0x0, 0x0);
        gbc.writeMem(0x575, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x1afc);
        EXPECT(gbc.pc(), 0x577);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02D3
        gbc.setState(0x5355, 0x9ca, 0xd820, 0xd727, 0x2523, 0x32cc, 0x0, 0x1);
        gbc.writeMem(0x5355, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x9ca);
        EXPECT(gbc.pc(), 0x5357);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02D5
        gbc.setState(0x68c3, 0x8172, 0xc180, 0x6b1e, 0xa4ce, 0x4028, 0x1, 0x0);
        gbc.writeMem(0x68c3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x8172);
        EXPECT(gbc.pc(), 0x68c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02D6
        gbc.setState(0xde18, 0x9c21, 0x6e70, 0x989f, 0xfbf6, 0xc515, 0x1, 0x0);
        gbc.writeMem(0xde18, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x9c21);
        EXPECT(gbc.pc(), 0xde1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde18), 0xcb);
        EXPECT(gbc.readMem(0xde19), 0x6b);
        // CB 6B 02D7
        gbc.setState(0xee85, 0x78cc, 0xa540, 0x54d0, 0x2d34, 0xb780, 0x1, 0x1);
        gbc.writeMem(0xee85, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x78cc);
        EXPECT(gbc.pc(), 0xee87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee85), 0xcb);
        EXPECT(gbc.readMem(0xee86), 0x6b);
        // CB 6B 02D8
        gbc.setState(0x2d52, 0x875a, 0x8130, 0xac77, 0xb88e, 0x5fe2, 0x0, 0x1);
        gbc.writeMem(0x2d52, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x875a);
        EXPECT(gbc.pc(), 0x2d54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02D9
        gbc.setState(0xb22, 0x6a81, 0x9c10, 0xc929, 0xf624, 0x246f, 0x0, 0x0);
        gbc.writeMem(0xb22, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x6a81);
        EXPECT(gbc.pc(), 0xb24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02DB
        gbc.setState(0x8de4, 0xe08a, 0xb860, 0xa4aa, 0x9823, 0x86a6, 0x1, 0x1);
        gbc.writeMem(0x8de4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xe08a);
        EXPECT(gbc.pc(), 0x8de6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8de4), 0xcb);
        EXPECT(gbc.readMem(0x8de5), 0x6b);
        // CB 6B 02DC
        gbc.setState(0x2870, 0xe112, 0x56c0, 0xa042, 0xc460, 0x1a53, 0x1, 0x1);
        gbc.writeMem(0x2870, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xe112);
        EXPECT(gbc.pc(), 0x2872);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02DD
        gbc.setState(0x74ac, 0xaa8f, 0xb170, 0x5251, 0xe371, 0x51b9, 0x0, 0x0);
        gbc.writeMem(0x74ac, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xaa8f);
        EXPECT(gbc.pc(), 0x74ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02DE
        gbc.setState(0x6437, 0x49c9, 0xd0a0, 0x2bbc, 0x11a1, 0xbd04, 0x0, 0x1);
        gbc.writeMem(0x6437, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x49c9);
        EXPECT(gbc.pc(), 0x6439);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02DF
        gbc.setState(0x7c0e, 0x4c51, 0x4a60, 0x5c34, 0x2bf8, 0xc60b, 0x0, 0x1);
        gbc.writeMem(0x7c0e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x4c51);
        EXPECT(gbc.pc(), 0x7c10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02E0
        gbc.setState(0xafe3, 0x298b, 0x78c0, 0xe003, 0xb002, 0x9456, 0x1, 0x0);
        gbc.writeMem(0xafe3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x298b);
        EXPECT(gbc.pc(), 0xafe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafe3), 0xcb);
        EXPECT(gbc.readMem(0xafe4), 0x6b);
        // CB 6B 02E1
        gbc.setState(0xb9bf, 0x667b, 0x1860, 0xedd0, 0x2e21, 0x2ce8, 0x1, 0x1);
        gbc.writeMem(0xb9bf, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x667b);
        EXPECT(gbc.pc(), 0xb9c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9bf), 0xcb);
        EXPECT(gbc.readMem(0xb9c0), 0x6b);
        // CB 6B 02E2
        gbc.setState(0x3142, 0x70cc, 0xa430, 0xa45e, 0x832e, 0xee7d, 0x1, 0x0);
        gbc.writeMem(0x3142, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x70cc);
        EXPECT(gbc.pc(), 0x3144);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02E3
        gbc.setState(0xc1ba, 0x4ae4, 0xd20, 0xd6ce, 0x1795, 0xa73, 0x1, 0x1);
        gbc.writeMem(0xc1ba, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4ae4);
        EXPECT(gbc.pc(), 0xc1bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1ba), 0xcb);
        EXPECT(gbc.readMem(0xc1bb), 0x6b);
        // CB 6B 02E4
        gbc.setState(0x5f29, 0xe3cb, 0x5180, 0x3150, 0xc292, 0x6621, 0x0, 0x1);
        gbc.writeMem(0x5f29, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe3cb);
        EXPECT(gbc.pc(), 0x5f2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02E5
        gbc.setState(0xb9de, 0x5954, 0x42c0, 0x1ebd, 0xbb4c, 0x2e63, 0x1, 0x0);
        gbc.writeMem(0xb9de, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x5954);
        EXPECT(gbc.pc(), 0xb9e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9de), 0xcb);
        EXPECT(gbc.readMem(0xb9df), 0x6b);
        // CB 6B 02E6
        gbc.setState(0x84d9, 0x314b, 0x1290, 0x8549, 0x94ab, 0x3ee9, 0x1, 0x0);
        gbc.writeMem(0x84d9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x314b);
        EXPECT(gbc.pc(), 0x84db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84d9), 0xcb);
        EXPECT(gbc.readMem(0x84da), 0x6b);
        // CB 6B 02E7
        gbc.setState(0x1d0e, 0x873f, 0x77d0, 0x531c, 0xf132, 0xc452, 0x0, 0x0);
        gbc.writeMem(0x1d0e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x873f);
        EXPECT(gbc.pc(), 0x1d10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02E9
        gbc.setState(0xc461, 0x3bfc, 0x1190, 0xc0bb, 0x8ec6, 0xed60, 0x0, 0x0);
        gbc.writeMem(0xc461, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x3bfc);
        EXPECT(gbc.pc(), 0xc463);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc461), 0xcb);
        EXPECT(gbc.readMem(0xc462), 0x6b);
        // CB 6B 02EA
        gbc.setState(0x2852, 0xe38e, 0xad50, 0x429f, 0x7ba0, 0x141c, 0x1, 0x1);
        gbc.writeMem(0x2852, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xe38e);
        EXPECT(gbc.pc(), 0x2854);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02EC
        gbc.setState(0x3fef, 0xd0f2, 0xe620, 0xf7ec, 0x110, 0xc615, 0x1, 0x0);
        gbc.writeMem(0x3fef, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xd0f2);
        EXPECT(gbc.pc(), 0x3ff1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02ED
        gbc.setState(0x1cb5, 0x924b, 0x7b70, 0xa229, 0x9667, 0x537f, 0x1, 0x1);
        gbc.writeMem(0x1cb5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x924b);
        EXPECT(gbc.pc(), 0x1cb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02EE
        gbc.setState(0x97ea, 0x85e6, 0x7830, 0x2cb7, 0xdf35, 0xde60, 0x1, 0x1);
        gbc.writeMem(0x97ea, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x85e6);
        EXPECT(gbc.pc(), 0x97ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97ea), 0xcb);
        EXPECT(gbc.readMem(0x97eb), 0x6b);
        // CB 6B 02EF
        gbc.setState(0x204, 0x73e0, 0x7c90, 0xc87d, 0x5ec4, 0x1d85, 0x1, 0x0);
        gbc.writeMem(0x204, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x73e0);
        EXPECT(gbc.pc(), 0x206);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02F0
        gbc.setState(0xab42, 0x9359, 0x92b0, 0xbcd2, 0xb865, 0xfa90, 0x1, 0x1);
        gbc.writeMem(0xab42, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x9359);
        EXPECT(gbc.pc(), 0xab44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab42), 0xcb);
        EXPECT(gbc.readMem(0xab43), 0x6b);
        // CB 6B 02F1
        gbc.setState(0x350e, 0x441f, 0x50f0, 0x7ac7, 0x1672, 0xcbaf, 0x1, 0x0);
        gbc.writeMem(0x350e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x441f);
        EXPECT(gbc.pc(), 0x3510);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02F2
        gbc.setState(0xa279, 0xa22e, 0xe870, 0x6f35, 0xa4fc, 0x90ea, 0x0, 0x0);
        gbc.writeMem(0xa279, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xa22e);
        EXPECT(gbc.pc(), 0xa27b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa279), 0xcb);
        EXPECT(gbc.readMem(0xa27a), 0x6b);
        // CB 6B 02F3
        gbc.setState(0xccc, 0xb172, 0x8760, 0x6e78, 0xf877, 0xacc5, 0x0, 0x0);
        gbc.writeMem(0xccc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xb172);
        EXPECT(gbc.pc(), 0xcce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02F4
        gbc.setState(0xd8cf, 0x7469, 0xbe30, 0xe33b, 0xf4dd, 0xbb11, 0x1, 0x1);
        gbc.writeMem(0xd8cf, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x7469);
        EXPECT(gbc.pc(), 0xd8d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8cf), 0xcb);
        EXPECT(gbc.readMem(0xd8d0), 0x6b);
        // CB 6B 02F5
        gbc.setState(0xa6b7, 0x68ad, 0x7190, 0x2d8b, 0xf11f, 0x27d0, 0x1, 0x1);
        gbc.writeMem(0xa6b7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x68ad);
        EXPECT(gbc.pc(), 0xa6b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6b7), 0xcb);
        EXPECT(gbc.readMem(0xa6b8), 0x6b);
        // CB 6B 02F6
        gbc.setState(0x8533, 0x469c, 0x59f0, 0x8f60, 0x6f22, 0x2094, 0x1, 0x0);
        gbc.writeMem(0x8533, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x469c);
        EXPECT(gbc.pc(), 0x8535);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8533), 0xcb);
        EXPECT(gbc.readMem(0x8534), 0x6b);
        // CB 6B 02F8
        gbc.setState(0xa6f8, 0xb5e9, 0x99a0, 0x9e9b, 0xad7b, 0x6039, 0x1, 0x0);
        gbc.writeMem(0xa6f8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xb5e9);
        EXPECT(gbc.pc(), 0xa6fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6f8), 0xcb);
        EXPECT(gbc.readMem(0xa6f9), 0x6b);
        // CB 6B 02F9
        gbc.setState(0x2b57, 0x3815, 0xf240, 0x32cf, 0x14c8, 0x348e, 0x1, 0x1);
        gbc.writeMem(0x2b57, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x3815);
        EXPECT(gbc.pc(), 0x2b59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02FA
        gbc.setState(0x71de, 0x119, 0xf850, 0x607f, 0x480f, 0x27f1, 0x0, 0x1);
        gbc.writeMem(0x71de, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x119);
        EXPECT(gbc.pc(), 0x71e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02FB
        gbc.setState(0x5261, 0x4b43, 0xeab0, 0x90dd, 0x9987, 0x7bd8, 0x0, 0x1);
        gbc.writeMem(0x5261, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x4b43);
        EXPECT(gbc.pc(), 0x5263);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 02FC
        gbc.setState(0x66f7, 0xc68d, 0xc640, 0x8003, 0x6e7a, 0x9db3, 0x1, 0x1);
        gbc.writeMem(0x66f7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc68d);
        EXPECT(gbc.pc(), 0x66f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 02FD
        gbc.setState(0x9ce2, 0xc691, 0x5730, 0x99d5, 0x997f, 0x6f65, 0x0, 0x0);
        gbc.writeMem(0x9ce2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc691);
        EXPECT(gbc.pc(), 0x9ce4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ce2), 0xcb);
        EXPECT(gbc.readMem(0x9ce3), 0x6b);
        // CB 6B 02FE
        gbc.setState(0x8245, 0xed0, 0x5ee0, 0x5778, 0xa2d, 0xff7e, 0x0, 0x1);
        gbc.writeMem(0x8245, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xed0);
        EXPECT(gbc.pc(), 0x8247);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8245), 0xcb);
        EXPECT(gbc.readMem(0x8246), 0x6b);
        // CB 6B 02FF
        gbc.setState(0x5296, 0xf8ed, 0x3230, 0x4110, 0x9ace, 0xc339, 0x1, 0x0);
        gbc.writeMem(0x5296, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xf8ed);
        EXPECT(gbc.pc(), 0x5298);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0300
        gbc.setState(0xe382, 0xb647, 0xa7d0, 0x99c7, 0x84b4, 0x972e, 0x1, 0x1);
        gbc.writeMem(0xe382, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xb647);
        EXPECT(gbc.pc(), 0xe384);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe382), 0xcb);
        EXPECT(gbc.readMem(0xe383), 0x6b);
        // CB 6B 0301
        gbc.setState(0x1345, 0xc433, 0x73a0, 0x9940, 0x632b, 0x2bcf, 0x1, 0x1);
        gbc.writeMem(0x1345, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xc433);
        EXPECT(gbc.pc(), 0x1347);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0302
        gbc.setState(0xafc5, 0x207e, 0x99e0, 0x8f7e, 0x8d73, 0xc03a, 0x0, 0x1);
        gbc.writeMem(0xafc5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x207e);
        EXPECT(gbc.pc(), 0xafc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafc5), 0xcb);
        EXPECT(gbc.readMem(0xafc6), 0x6b);
        // CB 6B 0303
        gbc.setState(0x626a, 0x8816, 0xd870, 0x4e9c, 0x9f27, 0xceff, 0x1, 0x0);
        gbc.writeMem(0x626a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x8816);
        EXPECT(gbc.pc(), 0x626c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0304
        gbc.setState(0x7ba0, 0xd6c8, 0x1900, 0x6703, 0x21be, 0xb862, 0x0, 0x0);
        gbc.writeMem(0x7ba0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xd6c8);
        EXPECT(gbc.pc(), 0x7ba2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0305
        gbc.setState(0x79f8, 0xdd6a, 0x10b0, 0xeec5, 0xdc63, 0xaf98, 0x1, 0x0);
        gbc.writeMem(0x79f8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xdd6a);
        EXPECT(gbc.pc(), 0x79fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0306
        gbc.setState(0xe540, 0xac18, 0x6060, 0xd828, 0x9517, 0xe100, 0x0, 0x1);
        gbc.writeMem(0xe540, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xac18);
        EXPECT(gbc.pc(), 0xe542);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe540), 0xcb);
        EXPECT(gbc.readMem(0xe541), 0x6b);
        // CB 6B 0307
        gbc.setState(0xf64, 0x32d8, 0x1450, 0x1d1e, 0x5632, 0x344a, 0x1, 0x1);
        gbc.writeMem(0xf64, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x32d8);
        EXPECT(gbc.pc(), 0xf66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0308
        gbc.setState(0x5a09, 0x7b6, 0x23b0, 0x4e04, 0xae01, 0xc57a, 0x0, 0x1);
        gbc.writeMem(0x5a09, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x7b6);
        EXPECT(gbc.pc(), 0x5a0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0309
        gbc.setState(0x6749, 0x3d61, 0xf5e0, 0x9fbf, 0xe66, 0x268, 0x1, 0x1);
        gbc.writeMem(0x6749, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x3d61);
        EXPECT(gbc.pc(), 0x674b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 030A
        gbc.setState(0xa917, 0x9283, 0x8480, 0xde34, 0x65fa, 0x9cbf, 0x0, 0x0);
        gbc.writeMem(0xa917, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x9283);
        EXPECT(gbc.pc(), 0xa919);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa917), 0xcb);
        EXPECT(gbc.readMem(0xa918), 0x6b);
        // CB 6B 030B
        gbc.setState(0x1d37, 0xc166, 0xfe60, 0x6e66, 0xa414, 0x18d3, 0x1, 0x1);
        gbc.writeMem(0x1d37, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xc166);
        EXPECT(gbc.pc(), 0x1d39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 030C
        gbc.setState(0xd9cd, 0xf674, 0x20d0, 0x32ab, 0x3b88, 0x33cc, 0x0, 0x0);
        gbc.writeMem(0xd9cd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xf674);
        EXPECT(gbc.pc(), 0xd9cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9cd), 0xcb);
        EXPECT(gbc.readMem(0xd9ce), 0x6b);
        // CB 6B 030D
        gbc.setState(0xdae3, 0x69c8, 0x89a0, 0xc011, 0x8a4a, 0x180c, 0x0, 0x1);
        gbc.writeMem(0xdae3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x69c8);
        EXPECT(gbc.pc(), 0xdae5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdae3), 0xcb);
        EXPECT(gbc.readMem(0xdae4), 0x6b);
        // CB 6B 030E
        gbc.setState(0xa127, 0x2206, 0xf360, 0xaca9, 0xa7ea, 0x8d3a, 0x1, 0x0);
        gbc.writeMem(0xa127, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x2206);
        EXPECT(gbc.pc(), 0xa129);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa127), 0xcb);
        EXPECT(gbc.readMem(0xa128), 0x6b);
        // CB 6B 030F
        gbc.setState(0x7ba3, 0x1602, 0xc7c0, 0x101, 0xce28, 0x9919, 0x1, 0x1);
        gbc.writeMem(0x7ba3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x1602);
        EXPECT(gbc.pc(), 0x7ba5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0311
        gbc.setState(0x33dc, 0xa979, 0x54d0, 0xadd3, 0x4d3b, 0x6077, 0x0, 0x1);
        gbc.writeMem(0x33dc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xa979);
        EXPECT(gbc.pc(), 0x33de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0312
        gbc.setState(0xce27, 0x790, 0xe0a0, 0x92a4, 0xda47, 0xa0d2, 0x1, 0x1);
        gbc.writeMem(0xce27, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x790);
        EXPECT(gbc.pc(), 0xce29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce27), 0xcb);
        EXPECT(gbc.readMem(0xce28), 0x6b);
        // CB 6B 0313
        gbc.setState(0xcc25, 0xe364, 0x9f50, 0x1f1, 0xb95f, 0x5ac1, 0x1, 0x1);
        gbc.writeMem(0xcc25, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xe364);
        EXPECT(gbc.pc(), 0xcc27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc25), 0xcb);
        EXPECT(gbc.readMem(0xcc26), 0x6b);
        // CB 6B 0314
        gbc.setState(0x4eb0, 0xb7b8, 0xb900, 0x9469, 0x586f, 0x958e, 0x1, 0x0);
        gbc.writeMem(0x4eb0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xb7b8);
        EXPECT(gbc.pc(), 0x4eb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0315
        gbc.setState(0x8e56, 0xc996, 0x3d80, 0x9ba5, 0xe14c, 0x8c74, 0x1, 0x1);
        gbc.writeMem(0x8e56, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xc996);
        EXPECT(gbc.pc(), 0x8e58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e56), 0xcb);
        EXPECT(gbc.readMem(0x8e57), 0x6b);
        // CB 6B 0316
        gbc.setState(0x4715, 0xb9c8, 0x84e0, 0xa993, 0x3da5, 0xe98e, 0x0, 0x0);
        gbc.writeMem(0x4715, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xb9c8);
        EXPECT(gbc.pc(), 0x4717);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0318
        gbc.setState(0xb85c, 0xffc3, 0xabb0, 0xfb61, 0xca20, 0xfe06, 0x0, 0x1);
        gbc.writeMem(0xb85c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xffc3);
        EXPECT(gbc.pc(), 0xb85e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb85c), 0xcb);
        EXPECT(gbc.readMem(0xb85d), 0x6b);
        // CB 6B 0319
        gbc.setState(0x20c1, 0x3f49, 0xb550, 0x760b, 0x64af, 0xc3dd, 0x1, 0x1);
        gbc.writeMem(0x20c1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x3f49);
        EXPECT(gbc.pc(), 0x20c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 031A
        gbc.setState(0x5645, 0xef96, 0x3e60, 0x61e5, 0x1400, 0xa9bb, 0x1, 0x0);
        gbc.writeMem(0x5645, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xef96);
        EXPECT(gbc.pc(), 0x5647);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 031B
        gbc.setState(0x2e3, 0x3889, 0x4700, 0x956b, 0xe9ab, 0x8abd, 0x0, 0x0);
        gbc.writeMem(0x2e3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x3889);
        EXPECT(gbc.pc(), 0x2e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 031C
        gbc.setState(0x685c, 0x3c42, 0xd390, 0xd6f0, 0x50b6, 0x5921, 0x0, 0x0);
        gbc.writeMem(0x685c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x3c42);
        EXPECT(gbc.pc(), 0x685e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 031D
        gbc.setState(0xa88, 0x8cfb, 0xf3d0, 0x2f51, 0xbcc5, 0x59c9, 0x0, 0x0);
        gbc.writeMem(0xa88, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x8cfb);
        EXPECT(gbc.pc(), 0xa8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 031E
        gbc.setState(0x4b6d, 0x99c5, 0x5b80, 0x588b, 0xd098, 0x1b4c, 0x1, 0x0);
        gbc.writeMem(0x4b6d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x99c5);
        EXPECT(gbc.pc(), 0x4b6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 031F
        gbc.setState(0xddc3, 0xfc43, 0x7a00, 0x3b15, 0x6cb1, 0x1eee, 0x1, 0x0);
        gbc.writeMem(0xddc3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xfc43);
        EXPECT(gbc.pc(), 0xddc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddc3), 0xcb);
        EXPECT(gbc.readMem(0xddc4), 0x6b);
        // CB 6B 0320
        gbc.setState(0x1226, 0x7638, 0x93b0, 0x6d50, 0x974d, 0xa119, 0x0, 0x1);
        gbc.writeMem(0x1226, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x7638);
        EXPECT(gbc.pc(), 0x1228);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0321
        gbc.setState(0x2497, 0x7c92, 0x8db0, 0x6581, 0x370c, 0x68c2, 0x0, 0x0);
        gbc.writeMem(0x2497, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x7c92);
        EXPECT(gbc.pc(), 0x2499);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0322
        gbc.setState(0x7f48, 0xf628, 0x85a0, 0xbacf, 0xbae4, 0xdf37, 0x1, 0x0);
        gbc.writeMem(0x7f48, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xf628);
        EXPECT(gbc.pc(), 0x7f4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0323
        gbc.setState(0xd131, 0xf37f, 0xc920, 0x389e, 0x2133, 0xe73d, 0x1, 0x0);
        gbc.writeMem(0xd131, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xf37f);
        EXPECT(gbc.pc(), 0xd133);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd131), 0xcb);
        EXPECT(gbc.readMem(0xd132), 0x6b);
        // CB 6B 0324
        gbc.setState(0x42e2, 0x4627, 0x4c50, 0x3c51, 0x683b, 0xca55, 0x1, 0x1);
        gbc.writeMem(0x42e2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x4627);
        EXPECT(gbc.pc(), 0x42e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0325
        gbc.setState(0x2f6d, 0xcd44, 0x3610, 0x316b, 0x8936, 0xcb27, 0x0, 0x0);
        gbc.writeMem(0x2f6d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xcd44);
        EXPECT(gbc.pc(), 0x2f6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0326
        gbc.setState(0x5389, 0x66bc, 0xe00, 0x35bb, 0xdb6c, 0x73fc, 0x1, 0x0);
        gbc.writeMem(0x5389, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x66bc);
        EXPECT(gbc.pc(), 0x538b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0328
        gbc.setState(0x95a0, 0xdcbe, 0x4760, 0x64bf, 0x1c58, 0xe0d8, 0x0, 0x0);
        gbc.writeMem(0x95a0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xdcbe);
        EXPECT(gbc.pc(), 0x95a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95a0), 0xcb);
        EXPECT(gbc.readMem(0x95a1), 0x6b);
        // CB 6B 0329
        gbc.setState(0xd05a, 0x7d09, 0x40e0, 0x3792, 0x1122, 0x6c1c, 0x0, 0x0);
        gbc.writeMem(0xd05a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x7d09);
        EXPECT(gbc.pc(), 0xd05c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd05a), 0xcb);
        EXPECT(gbc.readMem(0xd05b), 0x6b);
        // CB 6B 032A
        gbc.setState(0xde76, 0x7949, 0xdf00, 0x43fe, 0x9d25, 0xddf8, 0x1, 0x1);
        gbc.writeMem(0xde76, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x7949);
        EXPECT(gbc.pc(), 0xde78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde76), 0xcb);
        EXPECT(gbc.readMem(0xde77), 0x6b);
        // CB 6B 032B
        gbc.setState(0xb9a3, 0x29a7, 0xc1d0, 0x3d03, 0xe9b1, 0xa4d9, 0x1, 0x0);
        gbc.writeMem(0xb9a3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x29a7);
        EXPECT(gbc.pc(), 0xb9a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9a3), 0xcb);
        EXPECT(gbc.readMem(0xb9a4), 0x6b);
        // CB 6B 032C
        gbc.setState(0xeff2, 0xbc95, 0xa300, 0x7c7d, 0x963f, 0xbf23, 0x0, 0x0);
        gbc.writeMem(0xeff2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xbc95);
        EXPECT(gbc.pc(), 0xeff4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeff2), 0xcb);
        EXPECT(gbc.readMem(0xeff3), 0x6b);
        // CB 6B 032D
        gbc.setState(0x318, 0xc512, 0x4da0, 0x9716, 0x7ce5, 0x8a9e, 0x0, 0x1);
        gbc.writeMem(0x318, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xc512);
        EXPECT(gbc.pc(), 0x31a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 032E
        gbc.setState(0x3b6e, 0x698f, 0xd7d0, 0x6201, 0x1c21, 0x265d, 0x0, 0x0);
        gbc.writeMem(0x3b6e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x698f);
        EXPECT(gbc.pc(), 0x3b70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 032F
        gbc.setState(0xdc1b, 0x197d, 0xd780, 0xa108, 0x6a5a, 0xa287, 0x1, 0x1);
        gbc.writeMem(0xdc1b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x197d);
        EXPECT(gbc.pc(), 0xdc1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc1b), 0xcb);
        EXPECT(gbc.readMem(0xdc1c), 0x6b);
        // CB 6B 0330
        gbc.setState(0xa29f, 0x902f, 0x8190, 0xcfbe, 0x3152, 0x54d4, 0x1, 0x1);
        gbc.writeMem(0xa29f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x902f);
        EXPECT(gbc.pc(), 0xa2a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa29f), 0xcb);
        EXPECT(gbc.readMem(0xa2a0), 0x6b);
        // CB 6B 0331
        gbc.setState(0x7409, 0xfba5, 0xe720, 0x7622, 0x3a1b, 0x59f3, 0x0, 0x1);
        gbc.writeMem(0x7409, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xfba5);
        EXPECT(gbc.pc(), 0x740b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0332
        gbc.setState(0xe2fc, 0x4c49, 0xb0a0, 0x7028, 0x4efa, 0x6c29, 0x1, 0x1);
        gbc.writeMem(0xe2fc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x4c49);
        EXPECT(gbc.pc(), 0xe2fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2fc), 0xcb);
        EXPECT(gbc.readMem(0xe2fd), 0x6b);
        // CB 6B 0333
        gbc.setState(0xaff5, 0x61c2, 0x62a0, 0x1d84, 0x1601, 0xf4ce, 0x1, 0x1);
        gbc.writeMem(0xaff5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x61c2);
        EXPECT(gbc.pc(), 0xaff7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaff5), 0xcb);
        EXPECT(gbc.readMem(0xaff6), 0x6b);
        // CB 6B 0334
        gbc.setState(0x8d02, 0x8cb5, 0x3810, 0x6755, 0x6f34, 0x872, 0x1, 0x0);
        gbc.writeMem(0x8d02, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x8cb5);
        EXPECT(gbc.pc(), 0x8d04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d02), 0xcb);
        EXPECT(gbc.readMem(0x8d03), 0x6b);
        // CB 6B 0335
        gbc.setState(0x9a6b, 0xabc7, 0x1890, 0xaa8b, 0x783c, 0xbeef, 0x1, 0x1);
        gbc.writeMem(0x9a6b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xabc7);
        EXPECT(gbc.pc(), 0x9a6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a6b), 0xcb);
        EXPECT(gbc.readMem(0x9a6c), 0x6b);
        // CB 6B 0336
        gbc.setState(0x6bc3, 0xbbdf, 0x6370, 0x985b, 0x887a, 0xdc84, 0x1, 0x0);
        gbc.writeMem(0x6bc3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xbbdf);
        EXPECT(gbc.pc(), 0x6bc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0337
        gbc.setState(0x9418, 0x328a, 0x8d00, 0x9ef6, 0x2721, 0x6acc, 0x0, 0x1);
        gbc.writeMem(0x9418, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x328a);
        EXPECT(gbc.pc(), 0x941a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9418), 0xcb);
        EXPECT(gbc.readMem(0x9419), 0x6b);
        // CB 6B 0338
        gbc.setState(0x2e9e, 0x6524, 0x3e0, 0x7114, 0x1a7, 0xee4b, 0x0, 0x1);
        gbc.writeMem(0x2e9e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x6524);
        EXPECT(gbc.pc(), 0x2ea0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0339
        gbc.setState(0x26b6, 0x9278, 0xf610, 0xd6c7, 0x7acb, 0x55ab, 0x0, 0x0);
        gbc.writeMem(0x26b6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x9278);
        EXPECT(gbc.pc(), 0x26b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 033A
        gbc.setState(0xc43a, 0x2b7a, 0x2030, 0xff54, 0xc185, 0xcdfd, 0x1, 0x0);
        gbc.writeMem(0xc43a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x2b7a);
        EXPECT(gbc.pc(), 0xc43c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc43a), 0xcb);
        EXPECT(gbc.readMem(0xc43b), 0x6b);
        // CB 6B 033B
        gbc.setState(0x7e29, 0xe707, 0x1d80, 0x3254, 0x716f, 0x811d, 0x1, 0x1);
        gbc.writeMem(0x7e29, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xe707);
        EXPECT(gbc.pc(), 0x7e2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 033C
        gbc.setState(0x6b15, 0xc5fc, 0xdca0, 0x2221, 0xeadd, 0x3fce, 0x1, 0x0);
        gbc.writeMem(0x6b15, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xc5fc);
        EXPECT(gbc.pc(), 0x6b17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 033D
        gbc.setState(0xd38e, 0xaa43, 0x8d40, 0xcb76, 0x5f1b, 0xed65, 0x1, 0x0);
        gbc.writeMem(0xd38e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xaa43);
        EXPECT(gbc.pc(), 0xd390);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd38e), 0xcb);
        EXPECT(gbc.readMem(0xd38f), 0x6b);
        // CB 6B 033E
        gbc.setState(0x2ad5, 0xe1cd, 0x2a90, 0x3915, 0x3f9d, 0xdec0, 0x1, 0x1);
        gbc.writeMem(0x2ad5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xe1cd);
        EXPECT(gbc.pc(), 0x2ad7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 033F
        gbc.setState(0x86d, 0xbfb3, 0x8560, 0x860a, 0x6bbf, 0xdb1b, 0x0, 0x1);
        gbc.writeMem(0x86d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xbfb3);
        EXPECT(gbc.pc(), 0x86f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0340
        gbc.setState(0xea39, 0xc2ca, 0xd340, 0x20a1, 0xbf25, 0x6485, 0x0, 0x1);
        gbc.writeMem(0xea39, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc2ca);
        EXPECT(gbc.pc(), 0xea3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea39), 0xcb);
        EXPECT(gbc.readMem(0xea3a), 0x6b);
        // CB 6B 0341
        gbc.setState(0x3075, 0xaee3, 0xc520, 0x77f8, 0x22bb, 0x95c, 0x0, 0x0);
        gbc.writeMem(0x3075, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xaee3);
        EXPECT(gbc.pc(), 0x3077);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0343
        gbc.setState(0x4ddc, 0x767f, 0x82a0, 0xf7c1, 0x2abf, 0x65c0, 0x0, 0x1);
        gbc.writeMem(0x4ddc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x767f);
        EXPECT(gbc.pc(), 0x4dde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0345
        gbc.setState(0x3130, 0xa909, 0xca60, 0x3311, 0xbc11, 0x3790, 0x1, 0x1);
        gbc.writeMem(0x3130, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xa909);
        EXPECT(gbc.pc(), 0x3132);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0347
        gbc.setState(0x738c, 0xbaa7, 0xb020, 0x6365, 0x933b, 0x41ff, 0x1, 0x1);
        gbc.writeMem(0x738c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xbaa7);
        EXPECT(gbc.pc(), 0x738e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0348
        gbc.setState(0xd0be, 0x7a8a, 0xea0, 0xcdc5, 0x157, 0xe12a, 0x0, 0x0);
        gbc.writeMem(0xd0be, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x7a8a);
        EXPECT(gbc.pc(), 0xd0c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0be), 0xcb);
        EXPECT(gbc.readMem(0xd0bf), 0x6b);
        // CB 6B 0349
        gbc.setState(0x8207, 0x3f11, 0x7b40, 0x968f, 0xe5bd, 0x5e6f, 0x0, 0x1);
        gbc.writeMem(0x8207, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x3f11);
        EXPECT(gbc.pc(), 0x8209);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8207), 0xcb);
        EXPECT(gbc.readMem(0x8208), 0x6b);
        // CB 6B 034A
        gbc.setState(0xd3e5, 0x4015, 0x1e00, 0x2448, 0x3e6b, 0x5c93, 0x1, 0x0);
        gbc.writeMem(0xd3e5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x4015);
        EXPECT(gbc.pc(), 0xd3e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3e5), 0xcb);
        EXPECT(gbc.readMem(0xd3e6), 0x6b);
        // CB 6B 034B
        gbc.setState(0x8fc4, 0x8c7b, 0x6e60, 0xaac4, 0x953f, 0x2d92, 0x0, 0x0);
        gbc.writeMem(0x8fc4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x8c7b);
        EXPECT(gbc.pc(), 0x8fc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fc4), 0xcb);
        EXPECT(gbc.readMem(0x8fc5), 0x6b);
        // CB 6B 034C
        gbc.setState(0x9caa, 0xe154, 0x81f0, 0x2133, 0xb09e, 0x3e52, 0x1, 0x1);
        gbc.writeMem(0x9caa, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xe154);
        EXPECT(gbc.pc(), 0x9cac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9caa), 0xcb);
        EXPECT(gbc.readMem(0x9cab), 0x6b);
        // CB 6B 034D
        gbc.setState(0x17ea, 0x97a7, 0x7ac0, 0xc36d, 0x35f3, 0x41cc, 0x0, 0x0);
        gbc.writeMem(0x17ea, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x97a7);
        EXPECT(gbc.pc(), 0x17ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 034E
        gbc.setState(0x7674, 0x49ff, 0x13d0, 0x95a3, 0x73c2, 0xdaeb, 0x1, 0x1);
        gbc.writeMem(0x7674, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x49ff);
        EXPECT(gbc.pc(), 0x7676);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 034F
        gbc.setState(0xaa59, 0xa10a, 0x95c0, 0xae6e, 0x9f96, 0xa6b4, 0x1, 0x0);
        gbc.writeMem(0xaa59, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xa10a);
        EXPECT(gbc.pc(), 0xaa5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa59), 0xcb);
        EXPECT(gbc.readMem(0xaa5a), 0x6b);
        // CB 6B 0350
        gbc.setState(0x60c4, 0x7c8a, 0x170, 0x4126, 0x112b, 0xd457, 0x1, 0x1);
        gbc.writeMem(0x60c4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x7c8a);
        EXPECT(gbc.pc(), 0x60c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0351
        gbc.setState(0x3a24, 0x5d32, 0x740, 0xc4d9, 0x13ac, 0x95e5, 0x0, 0x0);
        gbc.writeMem(0x3a24, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x5d32);
        EXPECT(gbc.pc(), 0x3a26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0352
        gbc.setState(0xccc, 0xbc32, 0x2a50, 0x3542, 0x5f63, 0x6ef3, 0x0, 0x1);
        gbc.writeMem(0xccc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xbc32);
        EXPECT(gbc.pc(), 0xcce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0353
        gbc.setState(0x6fd5, 0x9b55, 0x2ed0, 0x7216, 0xdffa, 0x94c7, 0x1, 0x0);
        gbc.writeMem(0x6fd5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x9b55);
        EXPECT(gbc.pc(), 0x6fd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0354
        gbc.setState(0xbb30, 0xa954, 0x6380, 0x405c, 0x16c5, 0xa85a, 0x1, 0x0);
        gbc.writeMem(0xbb30, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xa954);
        EXPECT(gbc.pc(), 0xbb32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb30), 0xcb);
        EXPECT(gbc.readMem(0xbb31), 0x6b);
        // CB 6B 0355
        gbc.setState(0x4fd0, 0xf632, 0xf5d0, 0x15d3, 0xcfd1, 0x1975, 0x0, 0x1);
        gbc.writeMem(0x4fd0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xf632);
        EXPECT(gbc.pc(), 0x4fd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0356
        gbc.setState(0x7f87, 0x48ef, 0xb940, 0xbf91, 0xfea, 0x9cf4, 0x0, 0x1);
        gbc.writeMem(0x7f87, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x48ef);
        EXPECT(gbc.pc(), 0x7f89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0357
        gbc.setState(0x212, 0x58c8, 0xe1a0, 0x290d, 0xc2be, 0x947c, 0x0, 0x0);
        gbc.writeMem(0x212, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x58c8);
        EXPECT(gbc.pc(), 0x214);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0358
        gbc.setState(0xd449, 0xa251, 0x9ff0, 0xbaf7, 0x1566, 0xb219, 0x0, 0x0);
        gbc.writeMem(0xd449, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xa251);
        EXPECT(gbc.pc(), 0xd44b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd449), 0xcb);
        EXPECT(gbc.readMem(0xd44a), 0x6b);
        // CB 6B 0359
        gbc.setState(0x1607, 0xaaaf, 0x3f10, 0xd4ed, 0x1588, 0xb79c, 0x1, 0x0);
        gbc.writeMem(0x1607, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xaaaf);
        EXPECT(gbc.pc(), 0x1609);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 035A
        gbc.setState(0xbc85, 0xa964, 0xc90, 0x9ac7, 0xcdae, 0x99ae, 0x0, 0x0);
        gbc.writeMem(0xbc85, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa964);
        EXPECT(gbc.pc(), 0xbc87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc85), 0xcb);
        EXPECT(gbc.readMem(0xbc86), 0x6b);
        // CB 6B 035B
        gbc.setState(0xbd80, 0xd122, 0xa2c0, 0x13db, 0x7ca9, 0x3974, 0x1, 0x1);
        gbc.writeMem(0xbd80, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xd122);
        EXPECT(gbc.pc(), 0xbd82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd80), 0xcb);
        EXPECT(gbc.readMem(0xbd81), 0x6b);
        // CB 6B 035C
        gbc.setState(0xbb35, 0x6ce8, 0x1b50, 0x80d0, 0x7bb7, 0x7b03, 0x1, 0x0);
        gbc.writeMem(0xbb35, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x6ce8);
        EXPECT(gbc.pc(), 0xbb37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb35), 0xcb);
        EXPECT(gbc.readMem(0xbb36), 0x6b);
        // CB 6B 035D
        gbc.setState(0xe484, 0x3111, 0x2310, 0x9e01, 0xf25c, 0x9284, 0x0, 0x1);
        gbc.writeMem(0xe484, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x3111);
        EXPECT(gbc.pc(), 0xe486);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe484), 0xcb);
        EXPECT(gbc.readMem(0xe485), 0x6b);
        // CB 6B 035E
        gbc.setState(0x3bbe, 0x35bb, 0xb6a0, 0x8a20, 0x797a, 0xd0b9, 0x1, 0x0);
        gbc.writeMem(0x3bbe, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x35bb);
        EXPECT(gbc.pc(), 0x3bc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 035F
        gbc.setState(0xd91d, 0x353c, 0x7430, 0x6ebb, 0x1b5a, 0xca80, 0x0, 0x1);
        gbc.writeMem(0xd91d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x353c);
        EXPECT(gbc.pc(), 0xd91f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd91d), 0xcb);
        EXPECT(gbc.readMem(0xd91e), 0x6b);
        // CB 6B 0360
        gbc.setState(0x6c0, 0xa184, 0xecb0, 0xfb5a, 0x5b34, 0xdc18, 0x0, 0x1);
        gbc.writeMem(0x6c0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xa184);
        EXPECT(gbc.pc(), 0x6c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0361
        gbc.setState(0xd970, 0x2405, 0xdfe0, 0xea00, 0xf13b, 0x9090, 0x1, 0x0);
        gbc.writeMem(0xd970, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x2405);
        EXPECT(gbc.pc(), 0xd972);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd970), 0xcb);
        EXPECT(gbc.readMem(0xd971), 0x6b);
        // CB 6B 0362
        gbc.setState(0x2e91, 0x9981, 0x32c0, 0x1ab0, 0x19c3, 0xd497, 0x0, 0x1);
        gbc.writeMem(0x2e91, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x9981);
        EXPECT(gbc.pc(), 0x2e93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0363
        gbc.setState(0xef76, 0x1d70, 0x45d0, 0x6456, 0xf236, 0xb43f, 0x0, 0x1);
        gbc.writeMem(0xef76, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x1d70);
        EXPECT(gbc.pc(), 0xef78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef76), 0xcb);
        EXPECT(gbc.readMem(0xef77), 0x6b);
        // CB 6B 0364
        gbc.setState(0x7dec, 0x4566, 0xa700, 0x2cee, 0x2d10, 0xca2d, 0x1, 0x0);
        gbc.writeMem(0x7dec, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x4566);
        EXPECT(gbc.pc(), 0x7dee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0365
        gbc.setState(0x4a65, 0x2228, 0x1110, 0xf85a, 0xc73a, 0x3517, 0x0, 0x1);
        gbc.writeMem(0x4a65, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x2228);
        EXPECT(gbc.pc(), 0x4a67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0366
        gbc.setState(0xb194, 0xf0d0, 0xadc0, 0xf54d, 0x8c3b, 0xb49c, 0x0, 0x1);
        gbc.writeMem(0xb194, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xf0d0);
        EXPECT(gbc.pc(), 0xb196);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb194), 0xcb);
        EXPECT(gbc.readMem(0xb195), 0x6b);
        // CB 6B 0367
        gbc.setState(0x349b, 0x3ec6, 0x3b50, 0xfc79, 0x5bb1, 0xa7c7, 0x1, 0x1);
        gbc.writeMem(0x349b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x3ec6);
        EXPECT(gbc.pc(), 0x349d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0368
        gbc.setState(0x5d2b, 0x3929, 0x86b0, 0x3a2a, 0x8d54, 0x89aa, 0x1, 0x0);
        gbc.writeMem(0x5d2b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x3929);
        EXPECT(gbc.pc(), 0x5d2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0369
        gbc.setState(0x957c, 0xbf6f, 0x6da0, 0x8c82, 0xcf45, 0x318d, 0x0, 0x1);
        gbc.writeMem(0x957c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xbf6f);
        EXPECT(gbc.pc(), 0x957e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x957c), 0xcb);
        EXPECT(gbc.readMem(0x957d), 0x6b);
        // CB 6B 036A
        gbc.setState(0x9e0, 0x4a59, 0xe630, 0xbd9c, 0x9bdb, 0x6d3e, 0x1, 0x0);
        gbc.writeMem(0x9e0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x4a59);
        EXPECT(gbc.pc(), 0x9e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 036B
        gbc.setState(0x9010, 0x2206, 0x7de0, 0x5a13, 0xb089, 0x5f9b, 0x1, 0x1);
        gbc.writeMem(0x9010, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x2206);
        EXPECT(gbc.pc(), 0x9012);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9010), 0xcb);
        EXPECT(gbc.readMem(0x9011), 0x6b);
        // CB 6B 036C
        gbc.setState(0xefc7, 0x52e8, 0x7500, 0x27ef, 0x3951, 0x4a66, 0x1, 0x1);
        gbc.writeMem(0xefc7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x52e8);
        EXPECT(gbc.pc(), 0xefc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefc7), 0xcb);
        EXPECT(gbc.readMem(0xefc8), 0x6b);
        // CB 6B 036D
        gbc.setState(0xaf12, 0x129d, 0x2a20, 0xf237, 0xaaee, 0x7b87, 0x0, 0x1);
        gbc.writeMem(0xaf12, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x129d);
        EXPECT(gbc.pc(), 0xaf14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf12), 0xcb);
        EXPECT(gbc.readMem(0xaf13), 0x6b);
        // CB 6B 036E
        gbc.setState(0x62d1, 0xf07f, 0x8e20, 0xa2aa, 0xab1d, 0x6c4b, 0x1, 0x1);
        gbc.writeMem(0x62d1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xf07f);
        EXPECT(gbc.pc(), 0x62d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 036F
        gbc.setState(0x3306, 0xc2be, 0xb660, 0xae86, 0xd9af, 0xf1a4, 0x1, 0x0);
        gbc.writeMem(0x3306, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xc2be);
        EXPECT(gbc.pc(), 0x3308);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0370
        gbc.setState(0x173, 0xaa0e, 0xaed0, 0xdfb5, 0x3865, 0x6d31, 0x0, 0x1);
        gbc.writeMem(0x173, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xaa0e);
        EXPECT(gbc.pc(), 0x175);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0371
        gbc.setState(0x1a32, 0x20a4, 0x2180, 0x1a77, 0xe9d1, 0x4ecc, 0x0, 0x1);
        gbc.writeMem(0x1a32, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x20a4);
        EXPECT(gbc.pc(), 0x1a34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0372
        gbc.setState(0x3bf0, 0x8a5a, 0xfd30, 0x5c9e, 0x4359, 0xaf6c, 0x0, 0x1);
        gbc.writeMem(0x3bf0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x8a5a);
        EXPECT(gbc.pc(), 0x3bf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0373
        gbc.setState(0xa376, 0x3185, 0xc380, 0xd349, 0xc867, 0xafa8, 0x0, 0x1);
        gbc.writeMem(0xa376, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x3185);
        EXPECT(gbc.pc(), 0xa378);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa376), 0xcb);
        EXPECT(gbc.readMem(0xa377), 0x6b);
        // CB 6B 0374
        gbc.setState(0x5d94, 0x10e, 0x54c0, 0x615f, 0x306a, 0x932, 0x1, 0x1);
        gbc.writeMem(0x5d94, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x10e);
        EXPECT(gbc.pc(), 0x5d96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0375
        gbc.setState(0x5264, 0x9466, 0xdac0, 0x7062, 0xd19, 0x5c05, 0x0, 0x0);
        gbc.writeMem(0x5264, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x9466);
        EXPECT(gbc.pc(), 0x5266);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0376
        gbc.setState(0x909d, 0xaac0, 0x2700, 0x5723, 0xee2e, 0x9c78, 0x0, 0x1);
        gbc.writeMem(0x909d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xaac0);
        EXPECT(gbc.pc(), 0x909f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x909d), 0xcb);
        EXPECT(gbc.readMem(0x909e), 0x6b);
        // CB 6B 0377
        gbc.setState(0xc1c2, 0xf761, 0x5600, 0x4ec7, 0x4426, 0x6659, 0x0, 0x1);
        gbc.writeMem(0xc1c2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xf761);
        EXPECT(gbc.pc(), 0xc1c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1c2), 0xcb);
        EXPECT(gbc.readMem(0xc1c3), 0x6b);
        // CB 6B 0378
        gbc.setState(0x4892, 0xc40f, 0x4590, 0x10f4, 0x836a, 0xa501, 0x1, 0x1);
        gbc.writeMem(0x4892, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xc40f);
        EXPECT(gbc.pc(), 0x4894);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0379
        gbc.setState(0x68da, 0xe5e7, 0x2a90, 0xa80d, 0xc548, 0x4c73, 0x1, 0x0);
        gbc.writeMem(0x68da, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xe5e7);
        EXPECT(gbc.pc(), 0x68dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 037A
        gbc.setState(0x945f, 0x1bf1, 0x1b90, 0x79ab, 0xf709, 0x46cd, 0x0, 0x0);
        gbc.writeMem(0x945f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x1bf1);
        EXPECT(gbc.pc(), 0x9461);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x945f), 0xcb);
        EXPECT(gbc.readMem(0x9460), 0x6b);
        // CB 6B 037B
        gbc.setState(0x5dc9, 0x9fab, 0x1aa0, 0x4381, 0xf71f, 0x5695, 0x1, 0x1);
        gbc.writeMem(0x5dc9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x9fab);
        EXPECT(gbc.pc(), 0x5dcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 037C
        gbc.setState(0xc254, 0xc4b3, 0x4a00, 0x865b, 0x9baf, 0xcf52, 0x0, 0x0);
        gbc.writeMem(0xc254, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xc4b3);
        EXPECT(gbc.pc(), 0xc256);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc254), 0xcb);
        EXPECT(gbc.readMem(0xc255), 0x6b);
        // CB 6B 037D
        gbc.setState(0x7f3f, 0xd7b6, 0xffd0, 0x6d55, 0x22a1, 0x2b1a, 0x0, 0x0);
        gbc.writeMem(0x7f3f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xd7b6);
        EXPECT(gbc.pc(), 0x7f41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 037E
        gbc.setState(0x1128, 0xc6c5, 0xde50, 0x57ef, 0x9eee, 0x1ea4, 0x0, 0x0);
        gbc.writeMem(0x1128, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xc6c5);
        EXPECT(gbc.pc(), 0x112a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 037F
        gbc.setState(0xc743, 0x75c9, 0x230, 0xf0e7, 0xc795, 0x23f7, 0x0, 0x0);
        gbc.writeMem(0xc743, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x75c9);
        EXPECT(gbc.pc(), 0xc745);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc743), 0xcb);
        EXPECT(gbc.readMem(0xc744), 0x6b);
        // CB 6B 0380
        gbc.setState(0x98e4, 0x76b4, 0xbf70, 0x297f, 0xa2f9, 0x126e, 0x0, 0x1);
        gbc.writeMem(0x98e4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x76b4);
        EXPECT(gbc.pc(), 0x98e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98e4), 0xcb);
        EXPECT(gbc.readMem(0x98e5), 0x6b);
        // CB 6B 0382
        gbc.setState(0x4b9c, 0x8cc2, 0xcfb0, 0x4db, 0x2ea0, 0x727, 0x0, 0x1);
        gbc.writeMem(0x4b9c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x8cc2);
        EXPECT(gbc.pc(), 0x4b9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0383
        gbc.setState(0x968, 0xcd55, 0xd9a0, 0xdf52, 0x3d43, 0xf405, 0x0, 0x0);
        gbc.writeMem(0x968, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xcd55);
        EXPECT(gbc.pc(), 0x96a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0384
        gbc.setState(0xeabd, 0x73be, 0xe560, 0x337b, 0x830b, 0x2ba7, 0x1, 0x0);
        gbc.writeMem(0xeabd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x73be);
        EXPECT(gbc.pc(), 0xeabf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeabd), 0xcb);
        EXPECT(gbc.readMem(0xeabe), 0x6b);
        // CB 6B 0385
        gbc.setState(0x8533, 0xf34a, 0x4230, 0xa5f6, 0x9f76, 0x1e41, 0x0, 0x1);
        gbc.writeMem(0x8533, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xf34a);
        EXPECT(gbc.pc(), 0x8535);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8533), 0xcb);
        EXPECT(gbc.readMem(0x8534), 0x6b);
        // CB 6B 0386
        gbc.setState(0x3eac, 0x5567, 0x5be0, 0xae70, 0x7dcd, 0xf92c, 0x0, 0x1);
        gbc.writeMem(0x3eac, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x5567);
        EXPECT(gbc.pc(), 0x3eae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0387
        gbc.setState(0x323, 0xd946, 0x74f0, 0xaa31, 0x338b, 0xb2ec, 0x1, 0x0);
        gbc.writeMem(0x323, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xd946);
        EXPECT(gbc.pc(), 0x325);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0388
        gbc.setState(0xd7ae, 0x86ed, 0xe330, 0xdd4f, 0x4f60, 0x30b8, 0x0, 0x0);
        gbc.writeMem(0xd7ae, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x86ed);
        EXPECT(gbc.pc(), 0xd7b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7ae), 0xcb);
        EXPECT(gbc.readMem(0xd7af), 0x6b);
        // CB 6B 038A
        gbc.setState(0x16b4, 0x48cc, 0x2430, 0x8054, 0x7f2f, 0xe841, 0x0, 0x0);
        gbc.writeMem(0x16b4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x48cc);
        EXPECT(gbc.pc(), 0x16b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 038B
        gbc.setState(0x75c0, 0xe0e, 0xd0f0, 0x96b7, 0x6da0, 0x6f9d, 0x0, 0x1);
        gbc.writeMem(0x75c0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xe0e);
        EXPECT(gbc.pc(), 0x75c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 038C
        gbc.setState(0x47c, 0xd46f, 0x9930, 0x5a63, 0xfa07, 0x7070, 0x1, 0x1);
        gbc.writeMem(0x47c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xd46f);
        EXPECT(gbc.pc(), 0x47e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 038E
        gbc.setState(0x5958, 0x5a70, 0x59a0, 0x4ff1, 0xc046, 0xc4c9, 0x0, 0x0);
        gbc.writeMem(0x5958, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x5a70);
        EXPECT(gbc.pc(), 0x595a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 038F
        gbc.setState(0x33f7, 0x7bf2, 0x22d0, 0xe656, 0x70c9, 0xe5b1, 0x1, 0x1);
        gbc.writeMem(0x33f7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x7bf2);
        EXPECT(gbc.pc(), 0x33f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0390
        gbc.setState(0x610d, 0x3de8, 0xdb10, 0xef5d, 0x55ba, 0xc30d, 0x1, 0x1);
        gbc.writeMem(0x610d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x3de8);
        EXPECT(gbc.pc(), 0x610f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0391
        gbc.setState(0x75a1, 0xc3c7, 0xab30, 0x5f73, 0x148c, 0xec01, 0x0, 0x0);
        gbc.writeMem(0x75a1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xc3c7);
        EXPECT(gbc.pc(), 0x75a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0392
        gbc.setState(0x389, 0x3ef2, 0x6c0, 0x8c1b, 0xf308, 0x23df, 0x1, 0x1);
        gbc.writeMem(0x389, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x3ef2);
        EXPECT(gbc.pc(), 0x38b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0393
        gbc.setState(0xd68f, 0x5cf0, 0x1e90, 0x58cf, 0x9300, 0xc7d5, 0x0, 0x1);
        gbc.writeMem(0xd68f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x5cf0);
        EXPECT(gbc.pc(), 0xd691);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd68f), 0xcb);
        EXPECT(gbc.readMem(0xd690), 0x6b);
        // CB 6B 0394
        gbc.setState(0x6713, 0x6367, 0xd310, 0x5057, 0x80cb, 0xa6ae, 0x1, 0x0);
        gbc.writeMem(0x6713, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x6367);
        EXPECT(gbc.pc(), 0x6715);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 0395
        gbc.setState(0xe5b, 0x8fe2, 0x4b00, 0xf14d, 0x44aa, 0x42e, 0x1, 0x0);
        gbc.writeMem(0xe5b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x8fe2);
        EXPECT(gbc.pc(), 0xe5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0396
        gbc.setState(0xcb24, 0xf706, 0x4aa0, 0x5e7a, 0x5f28, 0xe2b6, 0x0, 0x1);
        gbc.writeMem(0xcb24, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xf706);
        EXPECT(gbc.pc(), 0xcb26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb24), 0xcb);
        EXPECT(gbc.readMem(0xcb25), 0x6b);
        // CB 6B 0397
        gbc.setState(0xe6ab, 0xb485, 0x46e0, 0x850c, 0x663e, 0x99c4, 0x1, 0x0);
        gbc.writeMem(0xe6ab, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xb485);
        EXPECT(gbc.pc(), 0xe6ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6ab), 0xcb);
        EXPECT(gbc.readMem(0xe6ac), 0x6b);
        // CB 6B 0398
        gbc.setState(0x625c, 0x162a, 0x1460, 0xdeaf, 0xa0f0, 0xd7, 0x0, 0x0);
        gbc.writeMem(0x625c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x162a);
        EXPECT(gbc.pc(), 0x625e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 0399
        gbc.setState(0xd143, 0xdd14, 0xce80, 0xced2, 0x89aa, 0xe9d, 0x1, 0x0);
        gbc.writeMem(0xd143, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xdd14);
        EXPECT(gbc.pc(), 0xd145);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd143), 0xcb);
        EXPECT(gbc.readMem(0xd144), 0x6b);
        // CB 6B 039A
        gbc.setState(0x7e8f, 0x59f, 0xee40, 0x63ef, 0x793e, 0x5d49, 0x0, 0x1);
        gbc.writeMem(0x7e8f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x59f);
        EXPECT(gbc.pc(), 0x7e91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 039B
        gbc.setState(0xa671, 0x9595, 0x16b0, 0xaf69, 0xf7ca, 0xa30c, 0x0, 0x1);
        gbc.writeMem(0xa671, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x9595);
        EXPECT(gbc.pc(), 0xa673);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa671), 0xcb);
        EXPECT(gbc.readMem(0xa672), 0x6b);
        // CB 6B 039C
        gbc.setState(0x4049, 0x85a3, 0x9480, 0xcc65, 0xa588, 0xf2f3, 0x0, 0x1);
        gbc.writeMem(0x4049, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x85a3);
        EXPECT(gbc.pc(), 0x404b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 039D
        gbc.setState(0xc433, 0x99d4, 0xec70, 0xdbf0, 0x7c77, 0xd69b, 0x1, 0x1);
        gbc.writeMem(0xc433, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x99d4);
        EXPECT(gbc.pc(), 0xc435);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc433), 0xcb);
        EXPECT(gbc.readMem(0xc434), 0x6b);
        // CB 6B 039E
        gbc.setState(0xc29a, 0xbcc9, 0xf000, 0xf775, 0xa99f, 0x1211, 0x1, 0x0);
        gbc.writeMem(0xc29a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xbcc9);
        EXPECT(gbc.pc(), 0xc29c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc29a), 0xcb);
        EXPECT(gbc.readMem(0xc29b), 0x6b);
        // CB 6B 039F
        gbc.setState(0x108, 0xc499, 0x3a00, 0x1f21, 0xc31, 0xa386, 0x0, 0x1);
        gbc.writeMem(0x108, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xc499);
        EXPECT(gbc.pc(), 0x10a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 03A0
        gbc.setState(0xaef7, 0x8128, 0xdd00, 0x1fd9, 0x2911, 0xbb32, 0x1, 0x0);
        gbc.writeMem(0xaef7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x8128);
        EXPECT(gbc.pc(), 0xaef9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaef7), 0xcb);
        EXPECT(gbc.readMem(0xaef8), 0x6b);
        // CB 6B 03A1
        gbc.setState(0xbc51, 0x1890, 0x6790, 0x59cf, 0x28b, 0xfb0d, 0x1, 0x1);
        gbc.writeMem(0xbc51, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x1890);
        EXPECT(gbc.pc(), 0xbc53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc51), 0xcb);
        EXPECT(gbc.readMem(0xbc52), 0x6b);
        // CB 6B 03A2
        gbc.setState(0x83f3, 0xd03f, 0xbb70, 0x15ea, 0xcf17, 0x3d0f, 0x1, 0x0);
        gbc.writeMem(0x83f3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xd03f);
        EXPECT(gbc.pc(), 0x83f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83f3), 0xcb);
        EXPECT(gbc.readMem(0x83f4), 0x6b);
        // CB 6B 03A3
        gbc.setState(0x4d86, 0x2b58, 0x79c0, 0xcf2c, 0x1e8b, 0xfd95, 0x0, 0x0);
        gbc.writeMem(0x4d86, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x2b58);
        EXPECT(gbc.pc(), 0x4d88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 03A5
        gbc.setState(0x9c1, 0x66bd, 0x5f30, 0xbd01, 0x9ee1, 0x8b9, 0x0, 0x0);
        gbc.writeMem(0x9c1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x66bd);
        EXPECT(gbc.pc(), 0x9c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03A7
        gbc.setState(0xe39, 0x807d, 0xc710, 0x9a2d, 0x3a60, 0xf209, 0x0, 0x1);
        gbc.writeMem(0xe39, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x807d);
        EXPECT(gbc.pc(), 0xe3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03A8
        gbc.setState(0xbb51, 0xaebe, 0xd1f0, 0xb26e, 0x5953, 0x52aa, 0x0, 0x0);
        gbc.writeMem(0xbb51, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xaebe);
        EXPECT(gbc.pc(), 0xbb53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb51), 0xcb);
        EXPECT(gbc.readMem(0xbb52), 0x6b);
        // CB 6B 03A9
        gbc.setState(0x7b47, 0x3da9, 0x4410, 0x7ba3, 0x44a9, 0xaadb, 0x0, 0x1);
        gbc.writeMem(0x7b47, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x3da9);
        EXPECT(gbc.pc(), 0x7b49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03AA
        gbc.setState(0xaa81, 0xfb58, 0x3f40, 0xa072, 0x2472, 0x8c1b, 0x1, 0x1);
        gbc.writeMem(0xaa81, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xfb58);
        EXPECT(gbc.pc(), 0xaa83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa81), 0xcb);
        EXPECT(gbc.readMem(0xaa82), 0x6b);
        // CB 6B 03AB
        gbc.setState(0xea42, 0xa466, 0x16b0, 0x39e6, 0x548d, 0x6659, 0x1, 0x1);
        gbc.writeMem(0xea42, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xa466);
        EXPECT(gbc.pc(), 0xea44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea42), 0xcb);
        EXPECT(gbc.readMem(0xea43), 0x6b);
        // CB 6B 03AC
        gbc.setState(0xdf87, 0xe8e7, 0xecc0, 0xdea1, 0x869b, 0xcfe0, 0x0, 0x1);
        gbc.writeMem(0xdf87, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xe8e7);
        EXPECT(gbc.pc(), 0xdf89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf87), 0xcb);
        EXPECT(gbc.readMem(0xdf88), 0x6b);
        // CB 6B 03AD
        gbc.setState(0x7a35, 0xa4bb, 0x9cd0, 0x2940, 0x65a4, 0x2947, 0x0, 0x0);
        gbc.writeMem(0x7a35, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xa4bb);
        EXPECT(gbc.pc(), 0x7a37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03AE
        gbc.setState(0xa7e8, 0x2f63, 0xb130, 0xefed, 0xb630, 0xbfe5, 0x0, 0x1);
        gbc.writeMem(0xa7e8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x2f63);
        EXPECT(gbc.pc(), 0xa7ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7e8), 0xcb);
        EXPECT(gbc.readMem(0xa7e9), 0x6b);
        // CB 6B 03AF
        gbc.setState(0x75cb, 0x256d, 0x1570, 0xaa8, 0xc16d, 0x48ce, 0x1, 0x1);
        gbc.writeMem(0x75cb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x256d);
        EXPECT(gbc.pc(), 0x75cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03B0
        gbc.setState(0x54f2, 0xa110, 0x2c00, 0xf865, 0x5523, 0x158a, 0x1, 0x1);
        gbc.writeMem(0x54f2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xa110);
        EXPECT(gbc.pc(), 0x54f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 03B1
        gbc.setState(0x473d, 0xd3f0, 0x57a0, 0xb980, 0x4b, 0x8f3c, 0x1, 0x1);
        gbc.writeMem(0x473d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xd3f0);
        EXPECT(gbc.pc(), 0x473f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 03B2
        gbc.setState(0xc8d0, 0xb832, 0x2ac0, 0x577b, 0x797c, 0xd28c, 0x1, 0x1);
        gbc.writeMem(0xc8d0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xb832);
        EXPECT(gbc.pc(), 0xc8d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8d0), 0xcb);
        EXPECT(gbc.readMem(0xc8d1), 0x6b);
        // CB 6B 03B3
        gbc.setState(0x2cf2, 0xcfc6, 0x6800, 0xb679, 0xdbcb, 0x81d4, 0x1, 0x1);
        gbc.writeMem(0x2cf2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xcfc6);
        EXPECT(gbc.pc(), 0x2cf4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 03B4
        gbc.setState(0x286c, 0xa70c, 0x8230, 0xa32c, 0x1cb8, 0x4ad6, 0x0, 0x1);
        gbc.writeMem(0x286c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xa70c);
        EXPECT(gbc.pc(), 0x286e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03B5
        gbc.setState(0x5209, 0xbfbf, 0xf1b0, 0xc36f, 0x49ed, 0xd341, 0x1, 0x1);
        gbc.writeMem(0x5209, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xbfbf);
        EXPECT(gbc.pc(), 0x520b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03B7
        gbc.setState(0x287e, 0xb474, 0xa030, 0xc46d, 0x6381, 0x522d, 0x1, 0x0);
        gbc.writeMem(0x287e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xb474);
        EXPECT(gbc.pc(), 0x2880);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03B8
        gbc.setState(0xde31, 0xe812, 0xf930, 0xc4d7, 0xdf4f, 0x3c73, 0x1, 0x1);
        gbc.writeMem(0xde31, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xe812);
        EXPECT(gbc.pc(), 0xde33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde31), 0xcb);
        EXPECT(gbc.readMem(0xde32), 0x6b);
        // CB 6B 03B9
        gbc.setState(0x13f, 0xefab, 0xd630, 0xa5ee, 0x1345, 0xdf22, 0x1, 0x0);
        gbc.writeMem(0x13f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xefab);
        EXPECT(gbc.pc(), 0x141);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03BA
        gbc.setState(0x3fdd, 0x2b67, 0xb5b0, 0x7af8, 0x3d, 0x36c6, 0x1, 0x1);
        gbc.writeMem(0x3fdd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x2b67);
        EXPECT(gbc.pc(), 0x3fdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03BB
        gbc.setState(0xaa49, 0x301f, 0x5410, 0xa684, 0xfa2f, 0x3e3a, 0x1, 0x1);
        gbc.writeMem(0xaa49, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x301f);
        EXPECT(gbc.pc(), 0xaa4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa49), 0xcb);
        EXPECT(gbc.readMem(0xaa4a), 0x6b);
        // CB 6B 03BD
        gbc.setState(0xe869, 0x1aa0, 0x71b0, 0x60f0, 0x6794, 0x8207, 0x0, 0x1);
        gbc.writeMem(0xe869, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x1aa0);
        EXPECT(gbc.pc(), 0xe86b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe869), 0xcb);
        EXPECT(gbc.readMem(0xe86a), 0x6b);
        // CB 6B 03BE
        gbc.setState(0x5feb, 0x20b, 0xfed0, 0xbec9, 0xe493, 0xd7b3, 0x1, 0x0);
        gbc.writeMem(0x5feb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x20b);
        EXPECT(gbc.pc(), 0x5fed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03BF
        gbc.setState(0x9aa3, 0xbcb4, 0xfcf0, 0x9478, 0xf5cd, 0x713f, 0x1, 0x0);
        gbc.writeMem(0x9aa3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xbcb4);
        EXPECT(gbc.pc(), 0x9aa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9aa3), 0xcb);
        EXPECT(gbc.readMem(0x9aa4), 0x6b);
        // CB 6B 03C0
        gbc.setState(0x2fda, 0x7692, 0x30, 0x64ec, 0x7664, 0xb9e9, 0x0, 0x0);
        gbc.writeMem(0x2fda, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x7692);
        EXPECT(gbc.pc(), 0x2fdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03C1
        gbc.setState(0x2545, 0xe725, 0xbd00, 0x2df9, 0xc289, 0xdc45, 0x1, 0x1);
        gbc.writeMem(0x2545, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xe725);
        EXPECT(gbc.pc(), 0x2547);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 03C2
        gbc.setState(0x66a0, 0x300b, 0x8fe0, 0x6f6, 0x8218, 0x4eac, 0x1, 0x0);
        gbc.writeMem(0x66a0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x300b);
        EXPECT(gbc.pc(), 0x66a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 03C3
        gbc.setState(0x5239, 0xca66, 0xcda0, 0x200d, 0xf1c9, 0xdd65, 0x1, 0x0);
        gbc.writeMem(0x5239, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xca66);
        EXPECT(gbc.pc(), 0x523b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 03C4
        gbc.setState(0x8818, 0xcad7, 0xb8e0, 0x671e, 0x724f, 0x13ed, 0x0, 0x0);
        gbc.writeMem(0x8818, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xcad7);
        EXPECT(gbc.pc(), 0x881a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8818), 0xcb);
        EXPECT(gbc.readMem(0x8819), 0x6b);
        // CB 6B 03C5
        gbc.setState(0xdc4a, 0xd052, 0xea40, 0xb979, 0xa07, 0x658d, 0x1, 0x1);
        gbc.writeMem(0xdc4a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xd052);
        EXPECT(gbc.pc(), 0xdc4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc4a), 0xcb);
        EXPECT(gbc.readMem(0xdc4b), 0x6b);
        // CB 6B 03C6
        gbc.setState(0xe0d5, 0xfcd, 0x89d0, 0x1f13, 0xd92f, 0x4543, 0x0, 0x0);
        gbc.writeMem(0xe0d5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xfcd);
        EXPECT(gbc.pc(), 0xe0d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0d5), 0xcb);
        EXPECT(gbc.readMem(0xe0d6), 0x6b);
        // CB 6B 03C7
        gbc.setState(0x733e, 0x6781, 0x7b10, 0xf942, 0x4f23, 0xe0d, 0x0, 0x0);
        gbc.writeMem(0x733e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x6781);
        EXPECT(gbc.pc(), 0x7340);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03C8
        gbc.setState(0x30a1, 0x511a, 0xc090, 0x475c, 0x726d, 0xdcaf, 0x0, 0x0);
        gbc.writeMem(0x30a1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x511a);
        EXPECT(gbc.pc(), 0x30a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03C9
        gbc.setState(0x23ea, 0x9c4, 0xd060, 0xccd2, 0xd2aa, 0x431b, 0x1, 0x1);
        gbc.writeMem(0x23ea, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x9c4);
        EXPECT(gbc.pc(), 0x23ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 03CA
        gbc.setState(0x2c5d, 0x8a09, 0xa8f0, 0xbf14, 0x7ce4, 0xa8e9, 0x0, 0x1);
        gbc.writeMem(0x2c5d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8a09);
        EXPECT(gbc.pc(), 0x2c5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03CB
        gbc.setState(0x3d32, 0xdf24, 0x2760, 0x988a, 0x6783, 0x941c, 0x0, 0x0);
        gbc.writeMem(0x3d32, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xdf24);
        EXPECT(gbc.pc(), 0x3d34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 03CC
        gbc.setState(0xdc7, 0x1354, 0x9a0, 0xe234, 0xe7f6, 0x72b7, 0x1, 0x1);
        gbc.writeMem(0xdc7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x1354);
        EXPECT(gbc.pc(), 0xdc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 03CD
        gbc.setState(0x8f0a, 0x20df, 0x34b0, 0xc848, 0x74db, 0x992d, 0x0, 0x1);
        gbc.writeMem(0x8f0a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x20df);
        EXPECT(gbc.pc(), 0x8f0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f0a), 0xcb);
        EXPECT(gbc.readMem(0x8f0b), 0x6b);
        // CB 6B 03CE
        gbc.setState(0x82bf, 0xd28a, 0xefe0, 0x4f17, 0x9f8c, 0x80ac, 0x0, 0x0);
        gbc.writeMem(0x82bf, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xd28a);
        EXPECT(gbc.pc(), 0x82c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82bf), 0xcb);
        EXPECT(gbc.readMem(0x82c0), 0x6b);
        // CB 6B 03CF
        gbc.setState(0x9a01, 0x37a4, 0xe9c0, 0x9e0c, 0x9679, 0x1729, 0x0, 0x0);
        gbc.writeMem(0x9a01, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x37a4);
        EXPECT(gbc.pc(), 0x9a03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a01), 0xcb);
        EXPECT(gbc.readMem(0x9a02), 0x6b);
        // CB 6B 03D0
        gbc.setState(0x784c, 0x308a, 0xaf10, 0x468e, 0xa4a1, 0x7e5c, 0x0, 0x1);
        gbc.writeMem(0x784c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x308a);
        EXPECT(gbc.pc(), 0x784e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03D1
        gbc.setState(0xbf48, 0x2030, 0xddd0, 0x6e95, 0x26f9, 0x3aeb, 0x1, 0x1);
        gbc.writeMem(0xbf48, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2030);
        EXPECT(gbc.pc(), 0xbf4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf48), 0xcb);
        EXPECT(gbc.readMem(0xbf49), 0x6b);
        // CB 6B 03D2
        gbc.setState(0x52ad, 0xe5ae, 0x7420, 0xa8e0, 0xec34, 0x171b, 0x0, 0x1);
        gbc.writeMem(0x52ad, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xe5ae);
        EXPECT(gbc.pc(), 0x52af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 03D3
        gbc.setState(0xe627, 0xfff6, 0x2fe0, 0x9fc9, 0x2921, 0x2ff9, 0x0, 0x1);
        gbc.writeMem(0xe627, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xfff6);
        EXPECT(gbc.pc(), 0xe629);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe627), 0xcb);
        EXPECT(gbc.readMem(0xe628), 0x6b);
        // CB 6B 03D4
        gbc.setState(0x97ca, 0xb57f, 0xa240, 0xa823, 0xc45, 0x21bc, 0x1, 0x1);
        gbc.writeMem(0x97ca, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xb57f);
        EXPECT(gbc.pc(), 0x97cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97ca), 0xcb);
        EXPECT(gbc.readMem(0x97cb), 0x6b);
        // CB 6B 03D5
        gbc.setState(0x4faa, 0x4582, 0x6530, 0x15b7, 0xfc27, 0xb474, 0x1, 0x1);
        gbc.writeMem(0x4faa, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x4582);
        EXPECT(gbc.pc(), 0x4fac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03D6
        gbc.setState(0x309f, 0x7a2, 0xc210, 0x833e, 0xa6da, 0x8579, 0x1, 0x1);
        gbc.writeMem(0x309f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x7a2);
        EXPECT(gbc.pc(), 0x30a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03D7
        gbc.setState(0x402b, 0xef02, 0x3c40, 0x3d77, 0xf032, 0x1a2d, 0x0, 0x0);
        gbc.writeMem(0x402b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xef02);
        EXPECT(gbc.pc(), 0x402d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 03D8
        gbc.setState(0x71ab, 0xd493, 0x3b00, 0x7588, 0xd669, 0x155b, 0x1, 0x1);
        gbc.writeMem(0x71ab, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xd493);
        EXPECT(gbc.pc(), 0x71ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 03D9
        gbc.setState(0x9acb, 0xb92e, 0xf270, 0x9bf5, 0xec39, 0x4f9c, 0x1, 0x0);
        gbc.writeMem(0x9acb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xb92e);
        EXPECT(gbc.pc(), 0x9acd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9acb), 0xcb);
        EXPECT(gbc.readMem(0x9acc), 0x6b);
        // CB 6B 03DA
        gbc.setState(0x6328, 0x461c, 0x2fa0, 0x7b40, 0x3901, 0x4b43, 0x1, 0x0);
        gbc.writeMem(0x6328, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x461c);
        EXPECT(gbc.pc(), 0x632a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 03DB
        gbc.setState(0xc34e, 0x5c7f, 0x82b0, 0xca17, 0x4564, 0x8cec, 0x1, 0x1);
        gbc.writeMem(0xc34e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x5c7f);
        EXPECT(gbc.pc(), 0xc350);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc34e), 0xcb);
        EXPECT(gbc.readMem(0xc34f), 0x6b);
        // CB 6B 03DC
        gbc.setState(0x4bcb, 0x46b2, 0x65f0, 0x733a, 0x8da0, 0xd6b3, 0x1, 0x1);
        gbc.writeMem(0x4bcb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x46b2);
        EXPECT(gbc.pc(), 0x4bcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03DD
        gbc.setState(0x54fb, 0x2e40, 0xc970, 0xc40b, 0xd4a9, 0x98ad, 0x0, 0x0);
        gbc.writeMem(0x54fb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x2e40);
        EXPECT(gbc.pc(), 0x54fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03DE
        gbc.setState(0xdd1e, 0x654c, 0x4fc0, 0x9656, 0xf9eb, 0x5140, 0x0, 0x0);
        gbc.writeMem(0xdd1e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x654c);
        EXPECT(gbc.pc(), 0xdd20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd1e), 0xcb);
        EXPECT(gbc.readMem(0xdd1f), 0x6b);
        // CB 6B 03DF
        gbc.setState(0x64ea, 0x7320, 0x2990, 0x59f7, 0x9ba6, 0xb883, 0x0, 0x0);
        gbc.writeMem(0x64ea, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x7320);
        EXPECT(gbc.pc(), 0x64ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03E0
        gbc.setState(0x1a87, 0xedda, 0xcfb0, 0x9916, 0xb0b, 0xd489, 0x1, 0x1);
        gbc.writeMem(0x1a87, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xedda);
        EXPECT(gbc.pc(), 0x1a89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03E1
        gbc.setState(0x6d94, 0xa0b9, 0x47a0, 0x58c7, 0x46cd, 0x2f13, 0x0, 0x1);
        gbc.writeMem(0x6d94, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xa0b9);
        EXPECT(gbc.pc(), 0x6d96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6B 03E2
        gbc.setState(0x428d, 0x7fb3, 0xe630, 0x37bd, 0xc477, 0x8221, 0x1, 0x1);
        gbc.writeMem(0x428d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x7fb3);
        EXPECT(gbc.pc(), 0x428f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03E3
        gbc.setState(0xa9f2, 0x7577, 0x1870, 0xa7ef, 0x1f5d, 0x6ffb, 0x1, 0x0);
        gbc.writeMem(0xa9f2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x7577);
        EXPECT(gbc.pc(), 0xa9f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9f2), 0xcb);
        EXPECT(gbc.readMem(0xa9f3), 0x6b);
        // CB 6B 03E4
        gbc.setState(0x74d8, 0x8fc8, 0xf6f0, 0x18f2, 0xc1e6, 0x6ae6, 0x0, 0x1);
        gbc.writeMem(0x74d8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x8fc8);
        EXPECT(gbc.pc(), 0x74da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03E5
        gbc.setState(0xc321, 0x1d3f, 0xffc0, 0x82be, 0x54ab, 0x6495, 0x1, 0x1);
        gbc.writeMem(0xc321, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x1d3f);
        EXPECT(gbc.pc(), 0xc323);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc321), 0xcb);
        EXPECT(gbc.readMem(0xc322), 0x6b);
        // CB 6B 03E6
        gbc.setState(0x4a92, 0x6578, 0x51b0, 0x5397, 0x6016, 0x6db0, 0x1, 0x1);
        gbc.writeMem(0x4a92, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x6578);
        EXPECT(gbc.pc(), 0x4a94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6B 03E7
        gbc.setState(0xdf70, 0xfe88, 0x9a60, 0x8ec6, 0x84df, 0x9507, 0x0, 0x0);
        gbc.writeMem(0xdf70, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xfe88);
        EXPECT(gbc.pc(), 0xdf72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf70), 0xcb);
        EXPECT(gbc.readMem(0xdf71), 0x6b);
    }
