    TEST(gbcemu, opcode_cb_6b) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 6B 0000
        gbc.setState(0xb2c2, 0xb3e7, 0x1aa0, 0x83d4, 0x85a2, 0xe1cd, 0x0, 0x0);
        gbc.writeMem(0xb2c2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0xb3e7, gbc.sp());
        EXPECT(0xb2c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb2c2));
        EXPECT(0x6b, gbc.readMem(0xb2c3));
        // CB 6B 0001
        gbc.setState(0x3e4d, 0x6c31, 0xe130, 0x63aa, 0xa34e, 0xd708, 0x1, 0x1);
        gbc.writeMem(0x3e4d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x6c31, gbc.sp());
        EXPECT(0x3e4f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0002
        gbc.setState(0x74a4, 0xb854, 0xf090, 0xc0ca, 0x2eff, 0x35c9, 0x1, 0x1);
        gbc.writeMem(0x74a4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xb854, gbc.sp());
        EXPECT(0x74a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0003
        gbc.setState(0x6235, 0x7d3a, 0xc40, 0x53e3, 0xc2d5, 0xd84b, 0x0, 0x1);
        gbc.writeMem(0x6235, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x7d3a, gbc.sp());
        EXPECT(0x6237, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0004
        gbc.setState(0x34af, 0xe49e, 0x4e00, 0xe38e, 0x386, 0x47ed, 0x1, 0x1);
        gbc.writeMem(0x34af, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xe49e, gbc.sp());
        EXPECT(0x34b1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0005
        gbc.setState(0x6c5a, 0xabaf, 0x91e0, 0x393f, 0xc727, 0x7873, 0x1, 0x1);
        gbc.writeMem(0x6c5a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0xabaf, gbc.sp());
        EXPECT(0x6c5c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0006
        gbc.setState(0x20cd, 0xefdd, 0xe70, 0xd8b2, 0x76fd, 0x4283, 0x0, 0x0);
        gbc.writeMem(0x20cd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0xefdd, gbc.sp());
        EXPECT(0x20cf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0007
        gbc.setState(0x792b, 0x3248, 0xe770, 0x4569, 0x130f, 0xf6e8, 0x0, 0x0);
        gbc.writeMem(0x792b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x3248, gbc.sp());
        EXPECT(0x792d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0008
        gbc.setState(0x4fdc, 0x934, 0xe20, 0xa994, 0xf31, 0xc134, 0x0, 0x0);
        gbc.writeMem(0x4fdc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x934, gbc.sp());
        EXPECT(0x4fde, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0009
        gbc.setState(0x4a2f, 0x2f7f, 0xf220, 0xa666, 0x239a, 0x92b8, 0x1, 0x1);
        gbc.writeMem(0x4a2f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x2f7f, gbc.sp());
        EXPECT(0x4a31, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 000A
        gbc.setState(0x6297, 0xf863, 0x62e0, 0x19ee, 0xc90c, 0xee95, 0x0, 0x0);
        gbc.writeMem(0x6297, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xf863, gbc.sp());
        EXPECT(0x6299, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 000B
        gbc.setState(0x9d5d, 0x53a9, 0xd320, 0x734c, 0x416, 0xebc8, 0x1, 0x0);
        gbc.writeMem(0x9d5d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x53a9, gbc.sp());
        EXPECT(0x9d5f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d5d));
        EXPECT(0x6b, gbc.readMem(0x9d5e));
        // CB 6B 000C
        gbc.setState(0xd7fe, 0x4851, 0x66b0, 0x141e, 0xa655, 0x28bb, 0x0, 0x0);
        gbc.writeMem(0xd7fe, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x4851, gbc.sp());
        EXPECT(0xd800, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd7fe));
        EXPECT(0x6b, gbc.readMem(0xd7ff));
        // CB 6B 000D
        gbc.setState(0xace5, 0x8955, 0x6d0, 0xd6af, 0x6761, 0xad0e, 0x0, 0x1);
        gbc.writeMem(0xace5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x8955, gbc.sp());
        EXPECT(0xace7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xace5));
        EXPECT(0x6b, gbc.readMem(0xace6));
        // CB 6B 000E
        gbc.setState(0x6c15, 0x621b, 0x130, 0xe22b, 0xfd82, 0x7717, 0x0, 0x1);
        gbc.writeMem(0x6c15, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x621b, gbc.sp());
        EXPECT(0x6c17, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 000F
        gbc.setState(0x8f0b, 0x4b67, 0x500, 0x5b5b, 0x8022, 0x53c6, 0x0, 0x1);
        gbc.writeMem(0x8f0b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x4b67, gbc.sp());
        EXPECT(0x8f0d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f0b));
        EXPECT(0x6b, gbc.readMem(0x8f0c));
        // CB 6B 0010
        gbc.setState(0xa394, 0x766c, 0x93c0, 0x689, 0xa223, 0xc536, 0x1, 0x0);
        gbc.writeMem(0xa394, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x766c, gbc.sp());
        EXPECT(0xa396, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa394));
        EXPECT(0x6b, gbc.readMem(0xa395));
        // CB 6B 0011
        gbc.setState(0x22dd, 0x21eb, 0x1190, 0xa37, 0xf533, 0x1493, 0x1, 0x0);
        gbc.writeMem(0x22dd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x21eb, gbc.sp());
        EXPECT(0x22df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0012
        gbc.setState(0x521c, 0x14bf, 0xaa00, 0x3457, 0x499a, 0x6cf, 0x1, 0x1);
        gbc.writeMem(0x521c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x14bf, gbc.sp());
        EXPECT(0x521e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0013
        gbc.setState(0xafed, 0x3389, 0xdd20, 0x825f, 0x64fc, 0x8766, 0x0, 0x0);
        gbc.writeMem(0xafed, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x3389, gbc.sp());
        EXPECT(0xafef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xafed));
        EXPECT(0x6b, gbc.readMem(0xafee));
        // CB 6B 0014
        gbc.setState(0x7e87, 0x5096, 0x4450, 0x30da, 0xcf36, 0xbc91, 0x1, 0x0);
        gbc.writeMem(0x7e87, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x5096, gbc.sp());
        EXPECT(0x7e89, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0015
        gbc.setState(0x9237, 0x6b2b, 0xe8c0, 0x9494, 0x21d, 0x4ff, 0x1, 0x0);
        gbc.writeMem(0x9237, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x6b2b, gbc.sp());
        EXPECT(0x9239, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9237));
        EXPECT(0x6b, gbc.readMem(0x9238));
        // CB 6B 0016
        gbc.setState(0xbbb0, 0xa761, 0x37a0, 0xfe75, 0x5299, 0xe7e3, 0x0, 0x0);
        gbc.writeMem(0xbbb0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xa761, gbc.sp());
        EXPECT(0xbbb2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbbb0));
        EXPECT(0x6b, gbc.readMem(0xbbb1));
        // CB 6B 0018
        gbc.setState(0x363f, 0x97bf, 0xe8b0, 0x2f7b, 0x7409, 0x123, 0x1, 0x1);
        gbc.writeMem(0x363f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x97bf, gbc.sp());
        EXPECT(0x3641, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0019
        gbc.setState(0x7e7c, 0xddd7, 0xe8c0, 0xcfa0, 0xee8c, 0xd047, 0x1, 0x0);
        gbc.writeMem(0x7e7c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0xddd7, gbc.sp());
        EXPECT(0x7e7e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 001A
        gbc.setState(0x4782, 0xccd9, 0xede0, 0x1675, 0x4498, 0xa871, 0x1, 0x1);
        gbc.writeMem(0x4782, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xccd9, gbc.sp());
        EXPECT(0x4784, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 001B
        gbc.setState(0x9d1d, 0xddfb, 0xdcc0, 0xb5e3, 0xdb0f, 0xeafb, 0x1, 0x1);
        gbc.writeMem(0x9d1d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xddfb, gbc.sp());
        EXPECT(0x9d1f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d1d));
        EXPECT(0x6b, gbc.readMem(0x9d1e));
        // CB 6B 001C
        gbc.setState(0xdd54, 0x6635, 0x95e0, 0x761a, 0xb03c, 0x88fd, 0x1, 0x0);
        gbc.writeMem(0xdd54, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x6635, gbc.sp());
        EXPECT(0xdd56, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd54));
        EXPECT(0x6b, gbc.readMem(0xdd55));
        // CB 6B 001D
        gbc.setState(0xb24f, 0xdb15, 0x8750, 0xe181, 0x97aa, 0x5d6d, 0x1, 0x0);
        gbc.writeMem(0xb24f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xdb15, gbc.sp());
        EXPECT(0xb251, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb24f));
        EXPECT(0x6b, gbc.readMem(0xb250));
        // CB 6B 001E
        gbc.setState(0xe414, 0x4f7b, 0xc30, 0xa475, 0xa1ca, 0x5a07, 0x0, 0x1);
        gbc.writeMem(0xe414, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x4f7b, gbc.sp());
        EXPECT(0xe416, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe414));
        EXPECT(0x6b, gbc.readMem(0xe415));
        // CB 6B 001F
        gbc.setState(0x1997, 0x99f7, 0x9b60, 0x1976, 0x2741, 0x2b5f, 0x0, 0x0);
        gbc.writeMem(0x1997, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x99f7, gbc.sp());
        EXPECT(0x1999, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0020
        gbc.setState(0x1059, 0x269f, 0xf950, 0x4849, 0x6763, 0xef3, 0x0, 0x0);
        gbc.writeMem(0x1059, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x269f, gbc.sp());
        EXPECT(0x105b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0021
        gbc.setState(0xd90d, 0xb0d0, 0x6700, 0xa21c, 0xd3d6, 0x8e19, 0x0, 0x0);
        gbc.writeMem(0xd90d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xb0d0, gbc.sp());
        EXPECT(0xd90f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd90d));
        EXPECT(0x6b, gbc.readMem(0xd90e));
        // CB 6B 0022
        gbc.setState(0x666f, 0x8cc5, 0x1e20, 0x3f32, 0x7f61, 0x1122, 0x0, 0x0);
        gbc.writeMem(0x666f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x8cc5, gbc.sp());
        EXPECT(0x6671, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0023
        gbc.setState(0xee8a, 0x6728, 0x3bf0, 0xa763, 0x7c19, 0x2e21, 0x0, 0x0);
        gbc.writeMem(0xee8a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x6728, gbc.sp());
        EXPECT(0xee8c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee8a));
        EXPECT(0x6b, gbc.readMem(0xee8b));
        // CB 6B 0024
        gbc.setState(0x8ad9, 0x8af0, 0x8900, 0x8148, 0xa048, 0xf3a3, 0x0, 0x0);
        gbc.writeMem(0x8ad9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x8af0, gbc.sp());
        EXPECT(0x8adb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ad9));
        EXPECT(0x6b, gbc.readMem(0x8ada));
        // CB 6B 0025
        gbc.setState(0x330e, 0xb4b3, 0x8bb0, 0xf390, 0x1788, 0xcd1a, 0x1, 0x0);
        gbc.writeMem(0x330e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xb4b3, gbc.sp());
        EXPECT(0x3310, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0026
        gbc.setState(0x3244, 0xe335, 0x54e0, 0x338a, 0x2a95, 0x476e, 0x0, 0x1);
        gbc.writeMem(0x3244, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xe335, gbc.sp());
        EXPECT(0x3246, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0027
        gbc.setState(0x396, 0x3995, 0xa430, 0x1593, 0xc3ec, 0xb711, 0x1, 0x1);
        gbc.writeMem(0x396, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x3995, gbc.sp());
        EXPECT(0x398, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0028
        gbc.setState(0xe5f2, 0x22bf, 0x35a0, 0x2353, 0x4da9, 0x81bb, 0x0, 0x1);
        gbc.writeMem(0xe5f2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x22bf, gbc.sp());
        EXPECT(0xe5f4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe5f2));
        EXPECT(0x6b, gbc.readMem(0xe5f3));
        // CB 6B 0029
        gbc.setState(0xb6c5, 0x57db, 0x9b80, 0xfa57, 0xea4c, 0x9654, 0x0, 0x1);
        gbc.writeMem(0xb6c5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x57db, gbc.sp());
        EXPECT(0xb6c7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb6c5));
        EXPECT(0x6b, gbc.readMem(0xb6c6));
        // CB 6B 002A
        gbc.setState(0xd7bd, 0x2d01, 0x7870, 0x478, 0x5022, 0x945b, 0x1, 0x0);
        gbc.writeMem(0xd7bd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x2d01, gbc.sp());
        EXPECT(0xd7bf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd7bd));
        EXPECT(0x6b, gbc.readMem(0xd7be));
        // CB 6B 002B
        gbc.setState(0x98b5, 0x37ce, 0x320, 0x5f31, 0x64bd, 0x86d6, 0x1, 0x1);
        gbc.writeMem(0x98b5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x37ce, gbc.sp());
        EXPECT(0x98b7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x98b5));
        EXPECT(0x6b, gbc.readMem(0x98b6));
        // CB 6B 002C
        gbc.setState(0xef09, 0x4252, 0x89d0, 0x417d, 0x1fa9, 0xac41, 0x0, 0x1);
        gbc.writeMem(0xef09, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x4252, gbc.sp());
        EXPECT(0xef0b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef09));
        EXPECT(0x6b, gbc.readMem(0xef0a));
        // CB 6B 002D
        gbc.setState(0x9071, 0x95b4, 0xefa0, 0x4bbc, 0x228d, 0x5ae0, 0x1, 0x0);
        gbc.writeMem(0x9071, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x95b4, gbc.sp());
        EXPECT(0x9073, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9071));
        EXPECT(0x6b, gbc.readMem(0x9072));
        // CB 6B 002E
        gbc.setState(0x11b2, 0x2b0a, 0xc070, 0xd7b1, 0x24d3, 0x965d, 0x1, 0x0);
        gbc.writeMem(0x11b2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x2b0a, gbc.sp());
        EXPECT(0x11b4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 002F
        gbc.setState(0xd77, 0x54a4, 0xd760, 0x7381, 0x593c, 0xfe8, 0x0, 0x0);
        gbc.writeMem(0xd77, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x54a4, gbc.sp());
        EXPECT(0xd79, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0030
        gbc.setState(0x532b, 0x3a4, 0x6300, 0xf5b, 0x194c, 0x11d7, 0x1, 0x1);
        gbc.writeMem(0x532b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x3a4, gbc.sp());
        EXPECT(0x532d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0031
        gbc.setState(0x8585, 0x7245, 0xefa0, 0x5492, 0x55ea, 0x7895, 0x1, 0x1);
        gbc.writeMem(0x8585, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x7245, gbc.sp());
        EXPECT(0x8587, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8585));
        EXPECT(0x6b, gbc.readMem(0x8586));
        // CB 6B 0032
        gbc.setState(0xc265, 0xf9d7, 0xa20, 0xa5b, 0x39cb, 0xb94f, 0x1, 0x0);
        gbc.writeMem(0xc265, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0xf9d7, gbc.sp());
        EXPECT(0xc267, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc265));
        EXPECT(0x6b, gbc.readMem(0xc266));
        // CB 6B 0033
        gbc.setState(0x1356, 0x3493, 0x7500, 0xb2ad, 0x9a2b, 0xedbb, 0x1, 0x0);
        gbc.writeMem(0x1356, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x3493, gbc.sp());
        EXPECT(0x1358, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0034
        gbc.setState(0xe12f, 0xcec8, 0x1c20, 0xd02, 0xc2f1, 0x1734, 0x1, 0x1);
        gbc.writeMem(0xe12f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0xcec8, gbc.sp());
        EXPECT(0xe131, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe12f));
        EXPECT(0x6b, gbc.readMem(0xe130));
        // CB 6B 0035
        gbc.setState(0x39da, 0x2d, 0xe7d0, 0xe80b, 0x1ef9, 0xd1a4, 0x0, 0x0);
        gbc.writeMem(0x39da, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x2d, gbc.sp());
        EXPECT(0x39dc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0036
        gbc.setState(0xd925, 0x9b14, 0x4d40, 0xa69b, 0x166, 0xd9fd, 0x1, 0x0);
        gbc.writeMem(0xd925, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x9b14, gbc.sp());
        EXPECT(0xd927, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd925));
        EXPECT(0x6b, gbc.readMem(0xd926));
        // CB 6B 0037
        gbc.setState(0xce29, 0x70ff, 0xeaa0, 0xd3df, 0x664f, 0x5314, 0x0, 0x0);
        gbc.writeMem(0xce29, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x70ff, gbc.sp());
        EXPECT(0xce2b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce29));
        EXPECT(0x6b, gbc.readMem(0xce2a));
        // CB 6B 0038
        gbc.setState(0xc3cb, 0x1e73, 0x36f0, 0xd4f5, 0x637d, 0x3ab0, 0x1, 0x1);
        gbc.writeMem(0xc3cb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x1e73, gbc.sp());
        EXPECT(0xc3cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc3cb));
        EXPECT(0x6b, gbc.readMem(0xc3cc));
        // CB 6B 0039
        gbc.setState(0x9e98, 0x9f50, 0xb780, 0x486e, 0x99db, 0xfe4a, 0x1, 0x1);
        gbc.writeMem(0x9e98, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x9f50, gbc.sp());
        EXPECT(0x9e9a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e98));
        EXPECT(0x6b, gbc.readMem(0x9e99));
        // CB 6B 003A
        gbc.setState(0x7ecf, 0xb21, 0x1b20, 0x7030, 0x1151, 0x1543, 0x1, 0x1);
        gbc.writeMem(0x7ecf, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xb21, gbc.sp());
        EXPECT(0x7ed1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 003B
        gbc.setState(0x9c1c, 0xcb35, 0x9d0, 0xa006, 0x7fb, 0xa610, 0x0, 0x1);
        gbc.writeMem(0x9c1c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xcb35, gbc.sp());
        EXPECT(0x9c1e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c1c));
        EXPECT(0x6b, gbc.readMem(0x9c1d));
        // CB 6B 003C
        gbc.setState(0x7405, 0x7403, 0xdd30, 0x7a38, 0x84c1, 0x857a, 0x0, 0x0);
        gbc.writeMem(0x7405, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x7403, gbc.sp());
        EXPECT(0x7407, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 003D
        gbc.setState(0xe65d, 0x953b, 0x3bd0, 0x9ff, 0x3b7b, 0x6f9b, 0x1, 0x1);
        gbc.writeMem(0xe65d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x953b, gbc.sp());
        EXPECT(0xe65f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe65d));
        EXPECT(0x6b, gbc.readMem(0xe65e));
        // CB 6B 003F
        gbc.setState(0xd5f6, 0x4012, 0x9910, 0xcb70, 0xafe, 0x5589, 0x1, 0x1);
        gbc.writeMem(0xd5f6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x4012, gbc.sp());
        EXPECT(0xd5f8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd5f6));
        EXPECT(0x6b, gbc.readMem(0xd5f7));
        // CB 6B 0040
        gbc.setState(0x1eca, 0xf7b4, 0xc210, 0x90ee, 0x27b6, 0x22a6, 0x0, 0x0);
        gbc.writeMem(0x1eca, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xf7b4, gbc.sp());
        EXPECT(0x1ecc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0041
        gbc.setState(0x6e68, 0x6a41, 0x4af0, 0xf9eb, 0x4490, 0x8333, 0x0, 0x0);
        gbc.writeMem(0x6e68, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x6a41, gbc.sp());
        EXPECT(0x6e6a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0042
        gbc.setState(0x9e07, 0xf10f, 0x51f0, 0x6e72, 0x320a, 0xf139, 0x1, 0x1);
        gbc.writeMem(0x9e07, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xf10f, gbc.sp());
        EXPECT(0x9e09, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e07));
        EXPECT(0x6b, gbc.readMem(0x9e08));
        // CB 6B 0043
        gbc.setState(0xd478, 0xb086, 0x73e0, 0xed48, 0xbb07, 0x780a, 0x0, 0x0);
        gbc.writeMem(0xd478, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xb086, gbc.sp());
        EXPECT(0xd47a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd478));
        EXPECT(0x6b, gbc.readMem(0xd479));
        // CB 6B 0045
        gbc.setState(0x4896, 0xf7aa, 0x1370, 0x9c52, 0x9e58, 0x43d0, 0x1, 0x0);
        gbc.writeMem(0x4896, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xf7aa, gbc.sp());
        EXPECT(0x4898, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0046
        gbc.setState(0xa65d, 0x9475, 0x2550, 0x35f, 0xb8a4, 0x4e2c, 0x1, 0x1);
        gbc.writeMem(0xa65d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x9475, gbc.sp());
        EXPECT(0xa65f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa65d));
        EXPECT(0x6b, gbc.readMem(0xa65e));
        // CB 6B 0047
        gbc.setState(0x316c, 0xe552, 0x20a0, 0x4aa5, 0x727c, 0xbf89, 0x1, 0x1);
        gbc.writeMem(0x316c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xe552, gbc.sp());
        EXPECT(0x316e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0048
        gbc.setState(0x4783, 0x7016, 0xb570, 0x8984, 0x2cad, 0x84bc, 0x0, 0x1);
        gbc.writeMem(0x4783, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x7016, gbc.sp());
        EXPECT(0x4785, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0049
        gbc.setState(0x8df2, 0x33b0, 0x8fb0, 0x245f, 0x750a, 0xb9c5, 0x1, 0x1);
        gbc.writeMem(0x8df2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x33b0, gbc.sp());
        EXPECT(0x8df4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8df2));
        EXPECT(0x6b, gbc.readMem(0x8df3));
        // CB 6B 004A
        gbc.setState(0xdf13, 0x7ba3, 0xc220, 0x6cb, 0x73ff, 0x1357, 0x0, 0x0);
        gbc.writeMem(0xdf13, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x7ba3, gbc.sp());
        EXPECT(0xdf15, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf13));
        EXPECT(0x6b, gbc.readMem(0xdf14));
        // CB 6B 004B
        gbc.setState(0xa945, 0x7ed5, 0x1e40, 0x649e, 0xac1c, 0x73bb, 0x0, 0x0);
        gbc.writeMem(0xa945, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x7ed5, gbc.sp());
        EXPECT(0xa947, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa945));
        EXPECT(0x6b, gbc.readMem(0xa946));
        // CB 6B 004C
        gbc.setState(0xa53a, 0xfa9, 0x60d0, 0x226a, 0x5a71, 0x13f0, 0x1, 0x0);
        gbc.writeMem(0xa53a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xfa9, gbc.sp());
        EXPECT(0xa53c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa53a));
        EXPECT(0x6b, gbc.readMem(0xa53b));
        // CB 6B 004D
        gbc.setState(0x64da, 0xeca6, 0xdda0, 0xc4c0, 0x7dc4, 0x1257, 0x1, 0x0);
        gbc.writeMem(0x64da, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xeca6, gbc.sp());
        EXPECT(0x64dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 004E
        gbc.setState(0x65aa, 0x12fe, 0xaf90, 0xfd1c, 0x442, 0xfaa2, 0x0, 0x0);
        gbc.writeMem(0x65aa, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x12fe, gbc.sp());
        EXPECT(0x65ac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 004F
        gbc.setState(0x66a, 0x6ca0, 0xff70, 0x728b, 0x8c80, 0xdcf4, 0x1, 0x1);
        gbc.writeMem(0x66a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x6ca0, gbc.sp());
        EXPECT(0x66c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0050
        gbc.setState(0x1c21, 0x1141, 0x65e0, 0x1da9, 0x66b3, 0xc142, 0x1, 0x0);
        gbc.writeMem(0x1c21, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x1141, gbc.sp());
        EXPECT(0x1c23, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0051
        gbc.setState(0xc34c, 0xf5df, 0xf270, 0xf04c, 0x1c73, 0xc05a, 0x1, 0x1);
        gbc.writeMem(0xc34c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0xf5df, gbc.sp());
        EXPECT(0xc34e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc34c));
        EXPECT(0x6b, gbc.readMem(0xc34d));
        // CB 6B 0052
        gbc.setState(0x11d8, 0xedd6, 0x45f0, 0x383c, 0xfe77, 0x47da, 0x1, 0x0);
        gbc.writeMem(0x11d8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xedd6, gbc.sp());
        EXPECT(0x11da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0053
        gbc.setState(0xc9a7, 0x71f9, 0xda10, 0x824c, 0xd73c, 0x8919, 0x1, 0x1);
        gbc.writeMem(0xc9a7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x71f9, gbc.sp());
        EXPECT(0xc9a9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9a7));
        EXPECT(0x6b, gbc.readMem(0xc9a8));
        // CB 6B 0054
        gbc.setState(0x1295, 0xa912, 0xe2e0, 0xc2f3, 0x4f7c, 0x4901, 0x1, 0x0);
        gbc.writeMem(0x1295, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xa912, gbc.sp());
        EXPECT(0x1297, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0055
        gbc.setState(0xb3dc, 0xb33b, 0x8c10, 0x3476, 0xfc33, 0x1c61, 0x0, 0x1);
        gbc.writeMem(0xb3dc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xb33b, gbc.sp());
        EXPECT(0xb3de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3dc));
        EXPECT(0x6b, gbc.readMem(0xb3dd));
        // CB 6B 0056
        gbc.setState(0xb43d, 0x42e1, 0xcfa0, 0x7677, 0x40fe, 0xf783, 0x0, 0x0);
        gbc.writeMem(0xb43d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x42e1, gbc.sp());
        EXPECT(0xb43f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb43d));
        EXPECT(0x6b, gbc.readMem(0xb43e));
        // CB 6B 0057
        gbc.setState(0x47ac, 0xd382, 0x3080, 0x7ec0, 0x4d10, 0xc55d, 0x0, 0x1);
        gbc.writeMem(0x47ac, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xd382, gbc.sp());
        EXPECT(0x47ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0059
        gbc.setState(0x223c, 0x2eb9, 0xd9e0, 0xb426, 0x8275, 0x8aa5, 0x0, 0x0);
        gbc.writeMem(0x223c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x2eb9, gbc.sp());
        EXPECT(0x223e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 005A
        gbc.setState(0x5086, 0x26fd, 0x8b00, 0x176a, 0xef77, 0xa98b, 0x1, 0x0);
        gbc.writeMem(0x5086, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x26fd, gbc.sp());
        EXPECT(0x5088, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 005B
        gbc.setState(0x6b46, 0x520, 0x8220, 0xc2eb, 0x268d, 0x69c2, 0x1, 0x0);
        gbc.writeMem(0x6b46, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x520, gbc.sp());
        EXPECT(0x6b48, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 005C
        gbc.setState(0xd1b3, 0x312b, 0xc1b0, 0xc075, 0xf025, 0xc052, 0x0, 0x0);
        gbc.writeMem(0xd1b3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x312b, gbc.sp());
        EXPECT(0xd1b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd1b3));
        EXPECT(0x6b, gbc.readMem(0xd1b4));
        // CB 6B 005D
        gbc.setState(0x5213, 0x9542, 0x33d0, 0x5243, 0xe5b5, 0xcc84, 0x0, 0x1);
        gbc.writeMem(0x5213, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x9542, gbc.sp());
        EXPECT(0x5215, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 005E
        gbc.setState(0x3f85, 0xf30f, 0x79c0, 0x3b17, 0xbf93, 0x9e16, 0x0, 0x0);
        gbc.writeMem(0x3f85, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0xf30f, gbc.sp());
        EXPECT(0x3f87, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 005F
        gbc.setState(0xbe50, 0x163d, 0xe20, 0x871c, 0x1fe2, 0x93a8, 0x0, 0x0);
        gbc.writeMem(0xbe50, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x163d, gbc.sp());
        EXPECT(0xbe52, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe50));
        EXPECT(0x6b, gbc.readMem(0xbe51));
        // CB 6B 0060
        gbc.setState(0x89dd, 0xcb78, 0x75d0, 0x89cd, 0x50b0, 0xab7d, 0x1, 0x1);
        gbc.writeMem(0x89dd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xcb78, gbc.sp());
        EXPECT(0x89df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x89dd));
        EXPECT(0x6b, gbc.readMem(0x89de));
        // CB 6B 0061
        gbc.setState(0xdb41, 0x4de2, 0x6950, 0x741e, 0xe209, 0xe3af, 0x1, 0x0);
        gbc.writeMem(0xdb41, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x4de2, gbc.sp());
        EXPECT(0xdb43, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb41));
        EXPECT(0x6b, gbc.readMem(0xdb42));
        // CB 6B 0063
        gbc.setState(0x5bbd, 0xc7c5, 0x55d0, 0xb93a, 0x17a6, 0xd126, 0x0, 0x0);
        gbc.writeMem(0x5bbd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xc7c5, gbc.sp());
        EXPECT(0x5bbf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0064
        gbc.setState(0x2136, 0x4332, 0x4ce0, 0x1075, 0xfa6a, 0x1e58, 0x0, 0x0);
        gbc.writeMem(0x2136, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x4332, gbc.sp());
        EXPECT(0x2138, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0065
        gbc.setState(0x57aa, 0x7799, 0x9c10, 0xb862, 0xe8c3, 0x300b, 0x1, 0x0);
        gbc.writeMem(0x57aa, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x7799, gbc.sp());
        EXPECT(0x57ac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0066
        gbc.setState(0x2d21, 0xffee, 0xfb10, 0x74f6, 0x3e5e, 0x409e, 0x0, 0x1);
        gbc.writeMem(0x2d21, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xffee, gbc.sp());
        EXPECT(0x2d23, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0067
        gbc.setState(0x4c78, 0x7f65, 0x4900, 0x8f22, 0xc70c, 0x3652, 0x1, 0x1);
        gbc.writeMem(0x4c78, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x7f65, gbc.sp());
        EXPECT(0x4c7a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0068
        gbc.setState(0xec57, 0x4a1e, 0x1290, 0x2195, 0xee92, 0x950a, 0x0, 0x1);
        gbc.writeMem(0xec57, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x4a1e, gbc.sp());
        EXPECT(0xec59, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec57));
        EXPECT(0x6b, gbc.readMem(0xec58));
        // CB 6B 0069
        gbc.setState(0xec19, 0x444e, 0xcff0, 0x923, 0xb7f5, 0x1de3, 0x1, 0x0);
        gbc.writeMem(0xec19, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x444e, gbc.sp());
        EXPECT(0xec1b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec19));
        EXPECT(0x6b, gbc.readMem(0xec1a));
        // CB 6B 006A
        gbc.setState(0x4c0e, 0xdd37, 0x9350, 0x6803, 0x6c3c, 0xd7fe, 0x0, 0x1);
        gbc.writeMem(0x4c0e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xdd37, gbc.sp());
        EXPECT(0x4c10, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 006B
        gbc.setState(0x1455, 0xc33d, 0xccf0, 0xc2cc, 0x41f, 0x2569, 0x0, 0x0);
        gbc.writeMem(0x1455, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xc33d, gbc.sp());
        EXPECT(0x1457, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 006C
        gbc.setState(0x6bb2, 0x331f, 0x3840, 0x9330, 0x7740, 0x6653, 0x1, 0x0);
        gbc.writeMem(0x6bb2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x331f, gbc.sp());
        EXPECT(0x6bb4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 006D
        gbc.setState(0x827, 0x46e, 0xf050, 0xb2b0, 0x72a8, 0x4441, 0x1, 0x0);
        gbc.writeMem(0x827, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x46e, gbc.sp());
        EXPECT(0x829, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 006E
        gbc.setState(0x7e92, 0xaf9, 0x8830, 0xbbec, 0x14c8, 0x350b, 0x0, 0x0);
        gbc.writeMem(0x7e92, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xaf9, gbc.sp());
        EXPECT(0x7e94, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 006F
        gbc.setState(0x7892, 0xee7a, 0x7d50, 0x1a9b, 0x9073, 0xb0fc, 0x0, 0x0);
        gbc.writeMem(0x7892, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xee7a, gbc.sp());
        EXPECT(0x7894, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0071
        gbc.setState(0x5c7c, 0xfaed, 0x25b0, 0x5218, 0x3bc0, 0x61f2, 0x0, 0x0);
        gbc.writeMem(0x5c7c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xfaed, gbc.sp());
        EXPECT(0x5c7e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0072
        gbc.setState(0xddb8, 0xe482, 0xd0f0, 0xad4d, 0xda79, 0xe, 0x1, 0x0);
        gbc.writeMem(0xddb8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0xe482, gbc.sp());
        EXPECT(0xddba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xddb8));
        EXPECT(0x6b, gbc.readMem(0xddb9));
        // CB 6B 0073
        gbc.setState(0xcaa7, 0xfaed, 0xcf0, 0x14a0, 0x5a2b, 0x5b4c, 0x1, 0x0);
        gbc.writeMem(0xcaa7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xfaed, gbc.sp());
        EXPECT(0xcaa9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcaa7));
        EXPECT(0x6b, gbc.readMem(0xcaa8));
        // CB 6B 0074
        gbc.setState(0x5699, 0x81bd, 0x6560, 0x918e, 0x831f, 0x6dd7, 0x1, 0x0);
        gbc.writeMem(0x5699, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x81bd, gbc.sp());
        EXPECT(0x569b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0075
        gbc.setState(0x4a34, 0x6024, 0x12e0, 0xccf, 0x4364, 0xddef, 0x0, 0x1);
        gbc.writeMem(0x4a34, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x6024, gbc.sp());
        EXPECT(0x4a36, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0076
        gbc.setState(0x95df, 0x1f5b, 0x70c0, 0x9cf1, 0x21bc, 0xa3e4, 0x1, 0x1);
        gbc.writeMem(0x95df, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x1f5b, gbc.sp());
        EXPECT(0x95e1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x95df));
        EXPECT(0x6b, gbc.readMem(0x95e0));
        // CB 6B 0077
        gbc.setState(0xb88, 0xd734, 0x2310, 0x54c8, 0x45f0, 0xced0, 0x1, 0x0);
        gbc.writeMem(0xb88, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xd734, gbc.sp());
        EXPECT(0xb8a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0078
        gbc.setState(0xdb4d, 0xb77b, 0x49b0, 0x7b2, 0xcceb, 0xe7e4, 0x0, 0x1);
        gbc.writeMem(0xdb4d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xb77b, gbc.sp());
        EXPECT(0xdb4f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb4d));
        EXPECT(0x6b, gbc.readMem(0xdb4e));
        // CB 6B 0079
        gbc.setState(0xc16d, 0x1db3, 0x5720, 0x2e6d, 0x71c7, 0x17da, 0x0, 0x0);
        gbc.writeMem(0xc16d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x1db3, gbc.sp());
        EXPECT(0xc16f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc16d));
        EXPECT(0x6b, gbc.readMem(0xc16e));
        // CB 6B 007A
        gbc.setState(0xe948, 0x6aa6, 0x56e0, 0xb566, 0xc389, 0xef84, 0x1, 0x0);
        gbc.writeMem(0xe948, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x6aa6, gbc.sp());
        EXPECT(0xe94a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe948));
        EXPECT(0x6b, gbc.readMem(0xe949));
        // CB 6B 007B
        gbc.setState(0x9252, 0x2e52, 0xe860, 0xf237, 0x62d4, 0xa63e, 0x0, 0x1);
        gbc.writeMem(0x9252, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x2e52, gbc.sp());
        EXPECT(0x9254, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9252));
        EXPECT(0x6b, gbc.readMem(0x9253));
        // CB 6B 007C
        gbc.setState(0xc81e, 0x3567, 0xcde0, 0x55d3, 0xfcd3, 0x22e8, 0x0, 0x1);
        gbc.writeMem(0xc81e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x3567, gbc.sp());
        EXPECT(0xc820, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc81e));
        EXPECT(0x6b, gbc.readMem(0xc81f));
        // CB 6B 007D
        gbc.setState(0xe271, 0x9c4e, 0x80d0, 0x1fe7, 0x4ec7, 0x6cd8, 0x1, 0x1);
        gbc.writeMem(0xe271, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x9c4e, gbc.sp());
        EXPECT(0xe273, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe271));
        EXPECT(0x6b, gbc.readMem(0xe272));
        // CB 6B 007E
        gbc.setState(0x7f21, 0x39df, 0xfd60, 0x5fc8, 0xd7e1, 0xce27, 0x1, 0x1);
        gbc.writeMem(0x7f21, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x39df, gbc.sp());
        EXPECT(0x7f23, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 007F
        gbc.setState(0x91c3, 0xb989, 0xd700, 0xc319, 0xc882, 0x98b7, 0x1, 0x1);
        gbc.writeMem(0x91c3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xb989, gbc.sp());
        EXPECT(0x91c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x91c3));
        EXPECT(0x6b, gbc.readMem(0x91c4));
        // CB 6B 0080
        gbc.setState(0x7885, 0x2c99, 0x8710, 0xa056, 0x9f49, 0x2a91, 0x0, 0x0);
        gbc.writeMem(0x7885, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x2c99, gbc.sp());
        EXPECT(0x7887, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0081
        gbc.setState(0x5e82, 0xa9d6, 0x4440, 0x6522, 0x610f, 0x62de, 0x0, 0x1);
        gbc.writeMem(0x5e82, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xa9d6, gbc.sp());
        EXPECT(0x5e84, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0082
        gbc.setState(0x893e, 0x4bee, 0xf5b0, 0x6f1, 0xd414, 0x3566, 0x1, 0x1);
        gbc.writeMem(0x893e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x4bee, gbc.sp());
        EXPECT(0x8940, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x893e));
        EXPECT(0x6b, gbc.readMem(0x893f));
        // CB 6B 0083
        gbc.setState(0x5355, 0x647a, 0x6620, 0x98d5, 0x28d6, 0x890c, 0x1, 0x1);
        gbc.writeMem(0x5355, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x647a, gbc.sp());
        EXPECT(0x5357, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0084
        gbc.setState(0x70e, 0xa177, 0xa790, 0x59c5, 0xb3f4, 0x4261, 0x0, 0x1);
        gbc.writeMem(0x70e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xa177, gbc.sp());
        EXPECT(0x710, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0085
        gbc.setState(0x392d, 0x2ccd, 0x1dd0, 0xea0f, 0xc1c3, 0xd575, 0x1, 0x0);
        gbc.writeMem(0x392d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x2ccd, gbc.sp());
        EXPECT(0x392f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0086
        gbc.setState(0x9154, 0x49b6, 0x1940, 0xad01, 0x11e2, 0x1421, 0x0, 0x1);
        gbc.writeMem(0x9154, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x49b6, gbc.sp());
        EXPECT(0x9156, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9154));
        EXPECT(0x6b, gbc.readMem(0x9155));
        // CB 6B 0087
        gbc.setState(0xdb95, 0x4021, 0xccf0, 0x3330, 0x2a29, 0x87dd, 0x1, 0x0);
        gbc.writeMem(0xdb95, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x4021, gbc.sp());
        EXPECT(0xdb97, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb95));
        EXPECT(0x6b, gbc.readMem(0xdb96));
        // CB 6B 0088
        gbc.setState(0x3ad3, 0xc965, 0xf9c0, 0xfe18, 0x5691, 0xa0f8, 0x1, 0x0);
        gbc.writeMem(0x3ad3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xc965, gbc.sp());
        EXPECT(0x3ad5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0089
        gbc.setState(0x5155, 0x1662, 0xf5c0, 0x3c7, 0x8d24, 0xc3eb, 0x1, 0x1);
        gbc.writeMem(0x5155, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x1662, gbc.sp());
        EXPECT(0x5157, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 008A
        gbc.setState(0xa975, 0x174, 0x7900, 0x462d, 0x40fd, 0xa189, 0x1, 0x0);
        gbc.writeMem(0xa975, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x174, gbc.sp());
        EXPECT(0xa977, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa975));
        EXPECT(0x6b, gbc.readMem(0xa976));
        // CB 6B 008C
        gbc.setState(0xf0, 0x8217, 0x8ad0, 0x1f5a, 0x8f0, 0xbfbf, 0x1, 0x0);
        gbc.writeMem(0xf0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x8217, gbc.sp());
        EXPECT(0xf2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 008D
        gbc.setState(0x1ab7, 0xc3e2, 0x4ef0, 0x1c5, 0xf4b2, 0x677f, 0x1, 0x1);
        gbc.writeMem(0x1ab7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xc3e2, gbc.sp());
        EXPECT(0x1ab9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 008E
        gbc.setState(0x69dd, 0x4885, 0x4a10, 0xf62, 0x4261, 0x3647, 0x0, 0x0);
        gbc.writeMem(0x69dd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x4885, gbc.sp());
        EXPECT(0x69df, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 008F
        gbc.setState(0x2615, 0xe9c9, 0xaaf0, 0x9a, 0x3560, 0xfab7, 0x0, 0x1);
        gbc.writeMem(0x2615, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xe9c9, gbc.sp());
        EXPECT(0x2617, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0090
        gbc.setState(0x53ce, 0x353e, 0x61b0, 0xf91e, 0x7595, 0x6ec1, 0x0, 0x1);
        gbc.writeMem(0x53ce, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x353e, gbc.sp());
        EXPECT(0x53d0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0091
        gbc.setState(0xecd9, 0x6e3c, 0xb000, 0x9766, 0x9e2e, 0xcbfc, 0x0, 0x0);
        gbc.writeMem(0xecd9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x6e3c, gbc.sp());
        EXPECT(0xecdb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xecd9));
        EXPECT(0x6b, gbc.readMem(0xecda));
        // CB 6B 0092
        gbc.setState(0x118d, 0xf880, 0x9be0, 0x7ba1, 0x340b, 0xa31e, 0x0, 0x1);
        gbc.writeMem(0x118d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xf880, gbc.sp());
        EXPECT(0x118f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0093
        gbc.setState(0x3704, 0x78af, 0xd300, 0x1e8f, 0x1723, 0x6fd8, 0x1, 0x0);
        gbc.writeMem(0x3704, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x78af, gbc.sp());
        EXPECT(0x3706, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0094
        gbc.setState(0x5da5, 0x512c, 0x6970, 0x8426, 0x1e5d, 0x5cf1, 0x1, 0x1);
        gbc.writeMem(0x5da5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x512c, gbc.sp());
        EXPECT(0x5da7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0095
        gbc.setState(0x7abe, 0x8694, 0xf400, 0x8d2a, 0x8a80, 0xb24, 0x1, 0x0);
        gbc.writeMem(0x7abe, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x8694, gbc.sp());
        EXPECT(0x7ac0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0096
        gbc.setState(0xc139, 0x19bf, 0xe3d0, 0xafcc, 0x1726, 0x7184, 0x0, 0x0);
        gbc.writeMem(0xc139, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x19bf, gbc.sp());
        EXPECT(0xc13b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc139));
        EXPECT(0x6b, gbc.readMem(0xc13a));
        // CB 6B 0097
        gbc.setState(0x17ed, 0xc104, 0x3510, 0xa406, 0x1994, 0x736b, 0x0, 0x1);
        gbc.writeMem(0x17ed, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xc104, gbc.sp());
        EXPECT(0x17ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0098
        gbc.setState(0xe91c, 0xcbad, 0x3730, 0x6136, 0xcdb4, 0xb357, 0x0, 0x1);
        gbc.writeMem(0xe91c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xcbad, gbc.sp());
        EXPECT(0xe91e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe91c));
        EXPECT(0x6b, gbc.readMem(0xe91d));
        // CB 6B 0099
        gbc.setState(0x3d66, 0xd9c6, 0xfc00, 0xecdd, 0x763d, 0x582d, 0x1, 0x1);
        gbc.writeMem(0x3d66, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xd9c6, gbc.sp());
        EXPECT(0x3d68, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 009A
        gbc.setState(0x6a0, 0x63f, 0x1a90, 0xa9db, 0xc4f0, 0x14ba, 0x1, 0x1);
        gbc.writeMem(0x6a0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x63f, gbc.sp());
        EXPECT(0x6a2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 009C
        gbc.setState(0x87f, 0x7af2, 0xd070, 0x44e1, 0x1aee, 0x6c5d, 0x0, 0x1);
        gbc.writeMem(0x87f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x7af2, gbc.sp());
        EXPECT(0x881, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 009D
        gbc.setState(0xc20d, 0x119a, 0x4270, 0xc5ff, 0x32fc, 0xba43, 0x0, 0x0);
        gbc.writeMem(0xc20d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x119a, gbc.sp());
        EXPECT(0xc20f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc20d));
        EXPECT(0x6b, gbc.readMem(0xc20e));
        // CB 6B 009E
        gbc.setState(0xb3b4, 0x388e, 0x45c0, 0x93a3, 0x858a, 0x31d7, 0x1, 0x0);
        gbc.writeMem(0xb3b4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x388e, gbc.sp());
        EXPECT(0xb3b6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3b4));
        EXPECT(0x6b, gbc.readMem(0xb3b5));
        // CB 6B 009F
        gbc.setState(0x9b40, 0x9168, 0x63e0, 0xebe6, 0x5480, 0x59d8, 0x0, 0x1);
        gbc.writeMem(0x9b40, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x9168, gbc.sp());
        EXPECT(0x9b42, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b40));
        EXPECT(0x6b, gbc.readMem(0x9b41));
        // CB 6B 00A0
        gbc.setState(0x5dcd, 0xd9d7, 0x4850, 0xbef8, 0xe0d1, 0x6a14, 0x1, 0x0);
        gbc.writeMem(0x5dcd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xd9d7, gbc.sp());
        EXPECT(0x5dcf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00A1
        gbc.setState(0x7950, 0x56d0, 0x94e0, 0xa835, 0xd9f, 0x9435, 0x1, 0x1);
        gbc.writeMem(0x7950, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x56d0, gbc.sp());
        EXPECT(0x7952, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00A2
        gbc.setState(0x5bdb, 0xf2d2, 0x2450, 0xd01f, 0x2168, 0xeb69, 0x0, 0x1);
        gbc.writeMem(0x5bdb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xf2d2, gbc.sp());
        EXPECT(0x5bdd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00A3
        gbc.setState(0x25da, 0x8d3f, 0x260, 0x94f8, 0x8555, 0xb91f, 0x1, 0x0);
        gbc.writeMem(0x25da, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x8d3f, gbc.sp());
        EXPECT(0x25dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00A4
        gbc.setState(0x399c, 0xd6eb, 0x5ca0, 0x412c, 0xdcad, 0x12ab, 0x1, 0x0);
        gbc.writeMem(0x399c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xd6eb, gbc.sp());
        EXPECT(0x399e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00A5
        gbc.setState(0x687d, 0x74f0, 0xaaf0, 0x3f1, 0x25ef, 0x8cf9, 0x1, 0x0);
        gbc.writeMem(0x687d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x74f0, gbc.sp());
        EXPECT(0x687f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00A6
        gbc.setState(0xbb4c, 0x5147, 0x7680, 0xdc91, 0x7253, 0x2b2b, 0x0, 0x1);
        gbc.writeMem(0xbb4c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x5147, gbc.sp());
        EXPECT(0xbb4e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb4c));
        EXPECT(0x6b, gbc.readMem(0xbb4d));
        // CB 6B 00A7
        gbc.setState(0x3799, 0xee9a, 0x8a10, 0x95c7, 0x6617, 0xfd9d, 0x1, 0x0);
        gbc.writeMem(0x3799, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xee9a, gbc.sp());
        EXPECT(0x379b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00A8
        gbc.setState(0xb024, 0x8db0, 0xcc50, 0xe2f3, 0x68f6, 0xab3, 0x0, 0x1);
        gbc.writeMem(0xb024, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x8db0, gbc.sp());
        EXPECT(0xb026, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb024));
        EXPECT(0x6b, gbc.readMem(0xb025));
        // CB 6B 00A9
        gbc.setState(0x5688, 0x1efc, 0x76a0, 0x41b0, 0x3818, 0xce0a, 0x0, 0x1);
        gbc.writeMem(0x5688, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x1efc, gbc.sp());
        EXPECT(0x568a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00AA
        gbc.setState(0x601b, 0x244, 0x4500, 0x6bfc, 0xfd8c, 0xdc49, 0x0, 0x0);
        gbc.writeMem(0x601b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x244, gbc.sp());
        EXPECT(0x601d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00AB
        gbc.setState(0x5dd6, 0x8679, 0xdba0, 0x5ce2, 0xf938, 0x8062, 0x0, 0x1);
        gbc.writeMem(0x5dd6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x8679, gbc.sp());
        EXPECT(0x5dd8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00AC
        gbc.setState(0x50af, 0xedf, 0xc270, 0x7819, 0x8643, 0x1086, 0x1, 0x1);
        gbc.writeMem(0x50af, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xedf, gbc.sp());
        EXPECT(0x50b1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00AD
        gbc.setState(0x9da9, 0x5a4d, 0x78e0, 0xe990, 0x5bcc, 0x1e26, 0x1, 0x1);
        gbc.writeMem(0x9da9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x5a4d, gbc.sp());
        EXPECT(0x9dab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9da9));
        EXPECT(0x6b, gbc.readMem(0x9daa));
        // CB 6B 00AE
        gbc.setState(0x23f1, 0xe18e, 0xe230, 0xb51, 0x94fe, 0x459c, 0x0, 0x1);
        gbc.writeMem(0x23f1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xe18e, gbc.sp());
        EXPECT(0x23f3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00AF
        gbc.setState(0x40bf, 0x2523, 0xb640, 0x5a4, 0xfd78, 0xe7d5, 0x1, 0x1);
        gbc.writeMem(0x40bf, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x2523, gbc.sp());
        EXPECT(0x40c1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00B0
        gbc.setState(0x7a78, 0x8e4a, 0x4460, 0x6e7d, 0x86c2, 0xc300, 0x1, 0x1);
        gbc.writeMem(0x7a78, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x8e4a, gbc.sp());
        EXPECT(0x7a7a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00B1
        gbc.setState(0xdcf4, 0x46ab, 0x9b00, 0x773d, 0x3c05, 0x5470, 0x1, 0x1);
        gbc.writeMem(0xdcf4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x46ab, gbc.sp());
        EXPECT(0xdcf6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdcf4));
        EXPECT(0x6b, gbc.readMem(0xdcf5));
        // CB 6B 00B2
        gbc.setState(0x6696, 0x5399, 0xfb80, 0x59bd, 0xabea, 0x51d4, 0x1, 0x1);
        gbc.writeMem(0x6696, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x5399, gbc.sp());
        EXPECT(0x6698, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00B3
        gbc.setState(0xdb92, 0xe04, 0xb070, 0x1597, 0x416f, 0x43f6, 0x0, 0x0);
        gbc.writeMem(0xdb92, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xe04, gbc.sp());
        EXPECT(0xdb94, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb92));
        EXPECT(0x6b, gbc.readMem(0xdb93));
        // CB 6B 00B4
        gbc.setState(0x7b23, 0xdfbc, 0x3250, 0x3cc2, 0x443e, 0x8d69, 0x1, 0x1);
        gbc.writeMem(0x7b23, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xdfbc, gbc.sp());
        EXPECT(0x7b25, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00B5
        gbc.setState(0xaa6, 0xb731, 0x8b50, 0x1196, 0x67b2, 0xfc0, 0x0, 0x0);
        gbc.writeMem(0xaa6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xb731, gbc.sp());
        EXPECT(0xaa8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00B6
        gbc.setState(0x86f, 0xbe6a, 0xb80, 0x3d98, 0x56f8, 0xa7c3, 0x1, 0x1);
        gbc.writeMem(0x86f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xbe6a, gbc.sp());
        EXPECT(0x871, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00B7
        gbc.setState(0x309a, 0x9f43, 0xce70, 0xd504, 0x4cfe, 0xaff3, 0x1, 0x0);
        gbc.writeMem(0x309a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x9f43, gbc.sp());
        EXPECT(0x309c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00B8
        gbc.setState(0xd122, 0x170d, 0x18f0, 0x2767, 0x7f3f, 0x22d, 0x0, 0x0);
        gbc.writeMem(0xd122, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x170d, gbc.sp());
        EXPECT(0xd124, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd122));
        EXPECT(0x6b, gbc.readMem(0xd123));
        // CB 6B 00B9
        gbc.setState(0x2b4, 0xbd6d, 0xd400, 0x8bf, 0x331f, 0xdeb4, 0x0, 0x1);
        gbc.writeMem(0x2b4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xbd6d, gbc.sp());
        EXPECT(0x2b6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00BA
        gbc.setState(0x9d61, 0x5003, 0x470, 0xc6a4, 0xd6c, 0x7090, 0x0, 0x1);
        gbc.writeMem(0x9d61, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x5003, gbc.sp());
        EXPECT(0x9d63, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d61));
        EXPECT(0x6b, gbc.readMem(0x9d62));
        // CB 6B 00BB
        gbc.setState(0x1375, 0x8e57, 0x8120, 0x8481, 0x932a, 0x2c58, 0x1, 0x0);
        gbc.writeMem(0x1375, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x8e57, gbc.sp());
        EXPECT(0x1377, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00BC
        gbc.setState(0xa438, 0xf90b, 0x64a0, 0x3c32, 0x6d8c, 0x977, 0x1, 0x0);
        gbc.writeMem(0xa438, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xf90b, gbc.sp());
        EXPECT(0xa43a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa438));
        EXPECT(0x6b, gbc.readMem(0xa439));
        // CB 6B 00BD
        gbc.setState(0xc254, 0x6812, 0x870, 0xa09e, 0x4eee, 0x6671, 0x0, 0x0);
        gbc.writeMem(0xc254, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x6812, gbc.sp());
        EXPECT(0xc256, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc254));
        EXPECT(0x6b, gbc.readMem(0xc255));
        // CB 6B 00BE
        gbc.setState(0xa397, 0xd0b0, 0x8910, 0x210b, 0xd16d, 0x9066, 0x1, 0x0);
        gbc.writeMem(0xa397, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0xd0b0, gbc.sp());
        EXPECT(0xa399, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa397));
        EXPECT(0x6b, gbc.readMem(0xa398));
        // CB 6B 00C0
        gbc.setState(0xd73f, 0xf3d4, 0x1e20, 0x7f4a, 0xdb3c, 0x37a5, 0x1, 0x1);
        gbc.writeMem(0xd73f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xf3d4, gbc.sp());
        EXPECT(0xd741, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd73f));
        EXPECT(0x6b, gbc.readMem(0xd740));
        // CB 6B 00C1
        gbc.setState(0x7a2e, 0xb950, 0x7590, 0xa67d, 0xa936, 0xc637, 0x0, 0x0);
        gbc.writeMem(0x7a2e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0xb950, gbc.sp());
        EXPECT(0x7a30, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00C2
        gbc.setState(0x875, 0xcf94, 0x4960, 0x7923, 0xf176, 0x52e2, 0x1, 0x0);
        gbc.writeMem(0x875, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xcf94, gbc.sp());
        EXPECT(0x877, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00C3
        gbc.setState(0x1278, 0x70cd, 0x3520, 0x3968, 0xb09e, 0xa9d4, 0x1, 0x0);
        gbc.writeMem(0x1278, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x70cd, gbc.sp());
        EXPECT(0x127a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00C4
        gbc.setState(0xe8d2, 0x8eb7, 0x5b80, 0xdf24, 0xf13d, 0xf1e9, 0x0, 0x1);
        gbc.writeMem(0xe8d2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x8eb7, gbc.sp());
        EXPECT(0xe8d4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe8d2));
        EXPECT(0x6b, gbc.readMem(0xe8d3));
        // CB 6B 00C5
        gbc.setState(0x1780, 0x1d55, 0xf1b0, 0xb628, 0xb295, 0x9d9f, 0x1, 0x0);
        gbc.writeMem(0x1780, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x1d55, gbc.sp());
        EXPECT(0x1782, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00C6
        gbc.setState(0x3941, 0x672d, 0x8270, 0x394d, 0xb664, 0xa, 0x1, 0x0);
        gbc.writeMem(0x3941, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x672d, gbc.sp());
        EXPECT(0x3943, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00C7
        gbc.setState(0xa91, 0xe48d, 0x4110, 0xb4d6, 0x3d78, 0xa479, 0x0, 0x0);
        gbc.writeMem(0xa91, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0xe48d, gbc.sp());
        EXPECT(0xa93, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00C8
        gbc.setState(0xbc38, 0x405b, 0x8160, 0x3ad, 0x249a, 0x47d4, 0x1, 0x0);
        gbc.writeMem(0xbc38, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x405b, gbc.sp());
        EXPECT(0xbc3a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc38));
        EXPECT(0x6b, gbc.readMem(0xbc39));
        // CB 6B 00C9
        gbc.setState(0x2ea8, 0x2bb2, 0xf4c0, 0xf165, 0x2ad4, 0x596d, 0x1, 0x1);
        gbc.writeMem(0x2ea8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x2bb2, gbc.sp());
        EXPECT(0x2eaa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00CA
        gbc.setState(0x63bb, 0x6d14, 0xf400, 0x436c, 0xe429, 0x6d33, 0x0, 0x0);
        gbc.writeMem(0x63bb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x6d14, gbc.sp());
        EXPECT(0x63bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00CB
        gbc.setState(0x7657, 0xb3f, 0x5890, 0xd970, 0x77f3, 0xbaa1, 0x1, 0x1);
        gbc.writeMem(0x7657, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xb3f, gbc.sp());
        EXPECT(0x7659, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00CC
        gbc.setState(0x4e69, 0x5142, 0x580, 0xa8ae, 0x8b07, 0xc136, 0x0, 0x1);
        gbc.writeMem(0x4e69, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x5142, gbc.sp());
        EXPECT(0x4e6b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00CD
        gbc.setState(0x8951, 0xa3d5, 0xbaf0, 0xe1b1, 0x1b9b, 0x8c78, 0x1, 0x1);
        gbc.writeMem(0x8951, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0xa3d5, gbc.sp());
        EXPECT(0x8953, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8951));
        EXPECT(0x6b, gbc.readMem(0x8952));
        // CB 6B 00CF
        gbc.setState(0x4fb5, 0x8910, 0x4180, 0x9d8b, 0x5c6a, 0xaa6b, 0x0, 0x0);
        gbc.writeMem(0x4fb5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x8910, gbc.sp());
        EXPECT(0x4fb7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00D0
        gbc.setState(0x7b94, 0x6a63, 0x4d20, 0x16ef, 0xf58b, 0xfe83, 0x0, 0x0);
        gbc.writeMem(0x7b94, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x6a63, gbc.sp());
        EXPECT(0x7b96, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00D1
        gbc.setState(0xe88e, 0x4e21, 0x6610, 0xea30, 0x1ac2, 0xff19, 0x1, 0x1);
        gbc.writeMem(0xe88e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x4e21, gbc.sp());
        EXPECT(0xe890, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe88e));
        EXPECT(0x6b, gbc.readMem(0xe88f));
        // CB 6B 00D2
        gbc.setState(0x1c24, 0xe36b, 0x7a0, 0x42ae, 0xc1ec, 0x4cc2, 0x1, 0x1);
        gbc.writeMem(0x1c24, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xe36b, gbc.sp());
        EXPECT(0x1c26, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00D3
        gbc.setState(0x1b5c, 0x8d8c, 0xe190, 0x4eef, 0x2fb8, 0xef58, 0x1, 0x0);
        gbc.writeMem(0x1b5c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x8d8c, gbc.sp());
        EXPECT(0x1b5e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00D5
        gbc.setState(0xe534, 0x43ed, 0x3780, 0x4801, 0xe0b9, 0x6930, 0x0, 0x1);
        gbc.writeMem(0xe534, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x43ed, gbc.sp());
        EXPECT(0xe536, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe534));
        EXPECT(0x6b, gbc.readMem(0xe535));
        // CB 6B 00D6
        gbc.setState(0xabd6, 0xc496, 0xcd90, 0xe2f6, 0x5247, 0xc9ea, 0x0, 0x0);
        gbc.writeMem(0xabd6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xc496, gbc.sp());
        EXPECT(0xabd8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xabd6));
        EXPECT(0x6b, gbc.readMem(0xabd7));
        // CB 6B 00D8
        gbc.setState(0x8b7e, 0xfb2e, 0xedc0, 0xb59c, 0x4799, 0x272d, 0x1, 0x1);
        gbc.writeMem(0x8b7e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xfb2e, gbc.sp());
        EXPECT(0x8b80, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b7e));
        EXPECT(0x6b, gbc.readMem(0x8b7f));
        // CB 6B 00D9
        gbc.setState(0xb7a2, 0x1350, 0xf2c0, 0xf316, 0xde51, 0xd7fa, 0x1, 0x1);
        gbc.writeMem(0xb7a2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x1350, gbc.sp());
        EXPECT(0xb7a4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb7a2));
        EXPECT(0x6b, gbc.readMem(0xb7a3));
        // CB 6B 00DA
        gbc.setState(0xb183, 0x58f0, 0xd2f0, 0x8db8, 0x99db, 0xb467, 0x1, 0x1);
        gbc.writeMem(0xb183, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x58f0, gbc.sp());
        EXPECT(0xb185, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb183));
        EXPECT(0x6b, gbc.readMem(0xb184));
        // CB 6B 00DB
        gbc.setState(0x6b06, 0x3082, 0x9500, 0x2943, 0xcf8e, 0x3783, 0x1, 0x1);
        gbc.writeMem(0x6b06, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x3082, gbc.sp());
        EXPECT(0x6b08, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00DC
        gbc.setState(0xa36e, 0x2682, 0xd080, 0xb5fe, 0x9460, 0x372d, 0x0, 0x1);
        gbc.writeMem(0xa36e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x2682, gbc.sp());
        EXPECT(0xa370, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa36e));
        EXPECT(0x6b, gbc.readMem(0xa36f));
        // CB 6B 00DD
        gbc.setState(0x25d8, 0x568c, 0x8470, 0x137a, 0xe351, 0x44b7, 0x1, 0x1);
        gbc.writeMem(0x25d8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x568c, gbc.sp());
        EXPECT(0x25da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00DE
        gbc.setState(0x585e, 0x627, 0xa400, 0x1487, 0x45ee, 0x7134, 0x0, 0x0);
        gbc.writeMem(0x585e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x627, gbc.sp());
        EXPECT(0x5860, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00E0
        gbc.setState(0x5f56, 0x39de, 0x8dc0, 0xb619, 0x649f, 0x7d06, 0x1, 0x0);
        gbc.writeMem(0x5f56, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x39de, gbc.sp());
        EXPECT(0x5f58, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00E1
        gbc.setState(0xa465, 0x5d24, 0xd60, 0xe391, 0x662f, 0xb173, 0x1, 0x1);
        gbc.writeMem(0xa465, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x5d24, gbc.sp());
        EXPECT(0xa467, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa465));
        EXPECT(0x6b, gbc.readMem(0xa466));
        // CB 6B 00E2
        gbc.setState(0x8ddb, 0xe248, 0x4610, 0x3589, 0x7ee9, 0x8f75, 0x1, 0x0);
        gbc.writeMem(0x8ddb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xe248, gbc.sp());
        EXPECT(0x8ddd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ddb));
        EXPECT(0x6b, gbc.readMem(0x8ddc));
        // CB 6B 00E3
        gbc.setState(0x7790, 0x876, 0xa570, 0x35aa, 0x3a1f, 0xd6ce, 0x1, 0x1);
        gbc.writeMem(0x7790, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x876, gbc.sp());
        EXPECT(0x7792, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00E4
        gbc.setState(0xefa0, 0x46b0, 0xc520, 0x2b2f, 0x1c7f, 0x45e6, 0x1, 0x1);
        gbc.writeMem(0xefa0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x46b0, gbc.sp());
        EXPECT(0xefa2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xefa0));
        EXPECT(0x6b, gbc.readMem(0xefa1));
        // CB 6B 00E5
        gbc.setState(0x1532, 0x318, 0x4e90, 0xdaae, 0xdd6f, 0x4485, 0x0, 0x1);
        gbc.writeMem(0x1532, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x318, gbc.sp());
        EXPECT(0x1534, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00E6
        gbc.setState(0x5d2a, 0x2706, 0xcee0, 0x4675, 0xf334, 0x8142, 0x0, 0x1);
        gbc.writeMem(0x5d2a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x2706, gbc.sp());
        EXPECT(0x5d2c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00E9
        gbc.setState(0x1ed0, 0x23b2, 0x8910, 0xc146, 0x92ad, 0xf7db, 0x0, 0x0);
        gbc.writeMem(0x1ed0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x23b2, gbc.sp());
        EXPECT(0x1ed2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00EA
        gbc.setState(0x7dbe, 0x62d6, 0xfc30, 0xe158, 0x637b, 0x80a9, 0x0, 0x0);
        gbc.writeMem(0x7dbe, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x62d6, gbc.sp());
        EXPECT(0x7dc0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00EB
        gbc.setState(0xac41, 0x4711, 0xcf70, 0x2a4, 0x5275, 0x4064, 0x0, 0x0);
        gbc.writeMem(0xac41, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0x4711, gbc.sp());
        EXPECT(0xac43, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac41));
        EXPECT(0x6b, gbc.readMem(0xac42));
        // CB 6B 00EC
        gbc.setState(0x7106, 0x56a3, 0x4350, 0xccaf, 0xeec8, 0x522d, 0x0, 0x0);
        gbc.writeMem(0x7106, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x56a3, gbc.sp());
        EXPECT(0x7108, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00ED
        gbc.setState(0x9b7, 0x8da2, 0xf940, 0x4648, 0x8aec, 0xd29f, 0x1, 0x1);
        gbc.writeMem(0x9b7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x8da2, gbc.sp());
        EXPECT(0x9b9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00EE
        gbc.setState(0xa490, 0xa7a6, 0x78c0, 0x8739, 0xa59b, 0x71f1, 0x0, 0x0);
        gbc.writeMem(0xa490, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0xa7a6, gbc.sp());
        EXPECT(0xa492, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa490));
        EXPECT(0x6b, gbc.readMem(0xa491));
        // CB 6B 00EF
        gbc.setState(0xc175, 0xa453, 0xe330, 0x759e, 0x3955, 0xabb2, 0x0, 0x1);
        gbc.writeMem(0xc175, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xa453, gbc.sp());
        EXPECT(0xc177, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc175));
        EXPECT(0x6b, gbc.readMem(0xc176));
        // CB 6B 00F0
        gbc.setState(0xa699, 0x4b9b, 0x6080, 0x12cf, 0x122e, 0x15e2, 0x1, 0x0);
        gbc.writeMem(0xa699, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x4b9b, gbc.sp());
        EXPECT(0xa69b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa699));
        EXPECT(0x6b, gbc.readMem(0xa69a));
        // CB 6B 00F1
        gbc.setState(0x6e80, 0xfe5d, 0xbfe0, 0xaf5, 0x546, 0xea2e, 0x0, 0x1);
        gbc.writeMem(0x6e80, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xfe5d, gbc.sp());
        EXPECT(0x6e82, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 00F2
        gbc.setState(0x9795, 0x5cd0, 0x48f0, 0x8195, 0xeff9, 0xd3f5, 0x0, 0x0);
        gbc.writeMem(0x9795, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x5cd0, gbc.sp());
        EXPECT(0x9797, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9795));
        EXPECT(0x6b, gbc.readMem(0x9796));
        // CB 6B 00F3
        gbc.setState(0xd625, 0x4959, 0x5e60, 0xffff, 0x36e6, 0x78f3, 0x0, 0x0);
        gbc.writeMem(0xd625, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x4959, gbc.sp());
        EXPECT(0xd627, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd625));
        EXPECT(0x6b, gbc.readMem(0xd626));
        // CB 6B 00F4
        gbc.setState(0xc160, 0x525b, 0x9880, 0xcf82, 0xe468, 0xe081, 0x1, 0x0);
        gbc.writeMem(0xc160, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x525b, gbc.sp());
        EXPECT(0xc162, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc160));
        EXPECT(0x6b, gbc.readMem(0xc161));
        // CB 6B 00F5
        gbc.setState(0xbad0, 0x6ef8, 0xf0c0, 0xa545, 0xd275, 0x5918, 0x1, 0x1);
        gbc.writeMem(0xbad0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x6ef8, gbc.sp());
        EXPECT(0xbad2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbad0));
        EXPECT(0x6b, gbc.readMem(0xbad1));
        // CB 6B 00F6
        gbc.setState(0xe49c, 0xbdc, 0xa3a0, 0xfcc5, 0x93de, 0xc46c, 0x0, 0x1);
        gbc.writeMem(0xe49c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xbdc, gbc.sp());
        EXPECT(0xe49e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe49c));
        EXPECT(0x6b, gbc.readMem(0xe49d));
        // CB 6B 00F8
        gbc.setState(0x4e13, 0x2b79, 0xf630, 0xbdb5, 0x172f, 0x303d, 0x1, 0x1);
        gbc.writeMem(0x4e13, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x2b79, gbc.sp());
        EXPECT(0x4e15, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00F9
        gbc.setState(0xe6c4, 0xa05a, 0x6520, 0x7c8e, 0xc959, 0xeb3c, 0x0, 0x1);
        gbc.writeMem(0xe6c4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xa05a, gbc.sp());
        EXPECT(0xe6c6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe6c4));
        EXPECT(0x6b, gbc.readMem(0xe6c5));
        // CB 6B 00FA
        gbc.setState(0xe9a1, 0x653e, 0xfad0, 0x39b6, 0xcb03, 0xa676, 0x0, 0x0);
        gbc.writeMem(0xe9a1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x653e, gbc.sp());
        EXPECT(0xe9a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe9a1));
        EXPECT(0x6b, gbc.readMem(0xe9a2));
        // CB 6B 00FB
        gbc.setState(0x7899, 0x5143, 0x4f10, 0xd8f7, 0x711, 0x7f24, 0x1, 0x1);
        gbc.writeMem(0x7899, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x5143, gbc.sp());
        EXPECT(0x789b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00FC
        gbc.setState(0x5ef8, 0x86be, 0xf090, 0xa24d, 0xbd1c, 0x7265, 0x1, 0x1);
        gbc.writeMem(0x5ef8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x86be, gbc.sp());
        EXPECT(0x5efa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00FD
        gbc.setState(0xbe35, 0xf7c1, 0xf040, 0xc702, 0x8abb, 0xfa48, 0x1, 0x0);
        gbc.writeMem(0xbe35, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xf7c1, gbc.sp());
        EXPECT(0xbe37, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe35));
        EXPECT(0x6b, gbc.readMem(0xbe36));
        // CB 6B 00FE
        gbc.setState(0x5dd3, 0xe676, 0xe150, 0x726c, 0x3c52, 0x817f, 0x1, 0x1);
        gbc.writeMem(0x5dd3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xe676, gbc.sp());
        EXPECT(0x5dd5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 00FF
        gbc.setState(0xb428, 0x9a06, 0x1040, 0x4db1, 0x9039, 0x4757, 0x0, 0x1);
        gbc.writeMem(0xb428, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x9a06, gbc.sp());
        EXPECT(0xb42a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb428));
        EXPECT(0x6b, gbc.readMem(0xb429));
        // CB 6B 0100
        gbc.setState(0x6601, 0xbeff, 0x6470, 0xea3a, 0x8592, 0x4ce1, 0x1, 0x0);
        gbc.writeMem(0x6601, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xbeff, gbc.sp());
        EXPECT(0x6603, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0101
        gbc.setState(0x407f, 0xd962, 0x1250, 0x596a, 0x633c, 0x57a6, 0x0, 0x1);
        gbc.writeMem(0x407f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xd962, gbc.sp());
        EXPECT(0x4081, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0102
        gbc.setState(0x5130, 0x5fe5, 0xf240, 0x1889, 0x488e, 0x660c, 0x0, 0x1);
        gbc.writeMem(0x5130, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x5fe5, gbc.sp());
        EXPECT(0x5132, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0104
        gbc.setState(0xa69b, 0x2bb7, 0x520, 0x943a, 0xcfa0, 0x81b7, 0x1, 0x1);
        gbc.writeMem(0xa69b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x2bb7, gbc.sp());
        EXPECT(0xa69d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa69b));
        EXPECT(0x6b, gbc.readMem(0xa69c));
        // CB 6B 0105
        gbc.setState(0x5ae5, 0x9e7a, 0x9e10, 0x4720, 0xa84b, 0xed80, 0x1, 0x1);
        gbc.writeMem(0x5ae5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x9e7a, gbc.sp());
        EXPECT(0x5ae7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0106
        gbc.setState(0xebf5, 0xbfd6, 0x40a0, 0x7aab, 0xb6e1, 0x3c5e, 0x0, 0x0);
        gbc.writeMem(0xebf5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xbfd6, gbc.sp());
        EXPECT(0xebf7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xebf5));
        EXPECT(0x6b, gbc.readMem(0xebf6));
        // CB 6B 0107
        gbc.setState(0x3d4, 0x1a5a, 0x7910, 0xeaa2, 0x2d2d, 0xbc8a, 0x0, 0x0);
        gbc.writeMem(0x3d4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x1a5a, gbc.sp());
        EXPECT(0x3d6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0108
        gbc.setState(0xd10d, 0x25ed, 0x84e0, 0xf6a5, 0xcf4a, 0xfa5, 0x0, 0x0);
        gbc.writeMem(0xd10d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x25ed, gbc.sp());
        EXPECT(0xd10f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd10d));
        EXPECT(0x6b, gbc.readMem(0xd10e));
        // CB 6B 0109
        gbc.setState(0xda32, 0x8cd7, 0xd450, 0x2408, 0x3f4e, 0x8c8e, 0x0, 0x1);
        gbc.writeMem(0xda32, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x8cd7, gbc.sp());
        EXPECT(0xda34, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xda32));
        EXPECT(0x6b, gbc.readMem(0xda33));
        // CB 6B 010A
        gbc.setState(0xc1b6, 0xfd3e, 0x9980, 0x30a3, 0x5de8, 0xe2a8, 0x1, 0x0);
        gbc.writeMem(0xc1b6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xfd3e, gbc.sp());
        EXPECT(0xc1b8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc1b6));
        EXPECT(0x6b, gbc.readMem(0xc1b7));
        // CB 6B 010B
        gbc.setState(0x1cb4, 0x78fc, 0x750, 0x3bc0, 0xfad3, 0x7f0f, 0x1, 0x0);
        gbc.writeMem(0x1cb4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x78fc, gbc.sp());
        EXPECT(0x1cb6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 010C
        gbc.setState(0x718e, 0x78d3, 0xa400, 0xc5aa, 0xa9bd, 0x7803, 0x0, 0x1);
        gbc.writeMem(0x718e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x78d3, gbc.sp());
        EXPECT(0x7190, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 010D
        gbc.setState(0x3841, 0xe64, 0x97f0, 0x5d3, 0x1313, 0xe4ca, 0x0, 0x1);
        gbc.writeMem(0x3841, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0xe64, gbc.sp());
        EXPECT(0x3843, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 010E
        gbc.setState(0x613f, 0xf785, 0xfb30, 0x8a1a, 0x5b, 0xc0d0, 0x0, 0x1);
        gbc.writeMem(0x613f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xf785, gbc.sp());
        EXPECT(0x6141, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 010F
        gbc.setState(0x9f32, 0x81e2, 0xf420, 0xc2bc, 0x7691, 0xec25, 0x1, 0x0);
        gbc.writeMem(0x9f32, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x81e2, gbc.sp());
        EXPECT(0x9f34, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f32));
        EXPECT(0x6b, gbc.readMem(0x9f33));
        // CB 6B 0110
        gbc.setState(0x591, 0xc08f, 0x7c30, 0x1299, 0x1874, 0xedbd, 0x1, 0x1);
        gbc.writeMem(0x591, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xc08f, gbc.sp());
        EXPECT(0x593, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0111
        gbc.setState(0x3039, 0x372e, 0x9390, 0x9d8e, 0x4830, 0xd2e3, 0x0, 0x1);
        gbc.writeMem(0x3039, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x372e, gbc.sp());
        EXPECT(0x303b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0112
        gbc.setState(0xdcd3, 0xf228, 0xa910, 0x2486, 0xf95e, 0xc005, 0x1, 0x0);
        gbc.writeMem(0xdcd3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xf228, gbc.sp());
        EXPECT(0xdcd5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdcd3));
        EXPECT(0x6b, gbc.readMem(0xdcd4));
        // CB 6B 0113
        gbc.setState(0xccab, 0xdb6a, 0xd530, 0xa987, 0x2875, 0x2356, 0x1, 0x0);
        gbc.writeMem(0xccab, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xdb6a, gbc.sp());
        EXPECT(0xccad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xccab));
        EXPECT(0x6b, gbc.readMem(0xccac));
        // CB 6B 0114
        gbc.setState(0x76e2, 0x9e80, 0x96d0, 0x2d20, 0x69b7, 0x440c, 0x0, 0x1);
        gbc.writeMem(0x76e2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x9e80, gbc.sp());
        EXPECT(0x76e4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0115
        gbc.setState(0x973e, 0x821e, 0xd960, 0xcee9, 0x4729, 0x4c97, 0x1, 0x1);
        gbc.writeMem(0x973e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x821e, gbc.sp());
        EXPECT(0x9740, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x973e));
        EXPECT(0x6b, gbc.readMem(0x973f));
        // CB 6B 0117
        gbc.setState(0xddd0, 0x872c, 0x7e50, 0xa340, 0xde22, 0xa47c, 0x1, 0x1);
        gbc.writeMem(0xddd0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x872c, gbc.sp());
        EXPECT(0xddd2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xddd0));
        EXPECT(0x6b, gbc.readMem(0xddd1));
        // CB 6B 0118
        gbc.setState(0xd35a, 0xa840, 0xfcc0, 0x718d, 0x4284, 0x6c39, 0x1, 0x0);
        gbc.writeMem(0xd35a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xa840, gbc.sp());
        EXPECT(0xd35c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd35a));
        EXPECT(0x6b, gbc.readMem(0xd35b));
        // CB 6B 0119
        gbc.setState(0x8f79, 0x7c61, 0x1730, 0x5b6, 0xbf64, 0x7489, 0x1, 0x1);
        gbc.writeMem(0x8f79, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x7c61, gbc.sp());
        EXPECT(0x8f7b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f79));
        EXPECT(0x6b, gbc.readMem(0x8f7a));
        // CB 6B 011B
        gbc.setState(0x1771, 0x7fd6, 0xd820, 0x9567, 0x2426, 0x527, 0x1, 0x1);
        gbc.writeMem(0x1771, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x7fd6, gbc.sp());
        EXPECT(0x1773, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 011C
        gbc.setState(0xc202, 0x5f75, 0x4ec0, 0xdde8, 0x8d3b, 0x568b, 0x1, 0x0);
        gbc.writeMem(0xc202, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x5f75, gbc.sp());
        EXPECT(0xc204, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc202));
        EXPECT(0x6b, gbc.readMem(0xc203));
        // CB 6B 011D
        gbc.setState(0x368b, 0x8a6b, 0x2a70, 0xb0bd, 0xa8eb, 0x9417, 0x0, 0x0);
        gbc.writeMem(0x368b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x8a6b, gbc.sp());
        EXPECT(0x368d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 011E
        gbc.setState(0xd12f, 0x11e7, 0xf5c0, 0xd0f5, 0x6e2, 0x1806, 0x1, 0x0);
        gbc.writeMem(0xd12f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x11e7, gbc.sp());
        EXPECT(0xd131, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd12f));
        EXPECT(0x6b, gbc.readMem(0xd130));
        // CB 6B 011F
        gbc.setState(0x6214, 0xbd3b, 0x6c30, 0x5795, 0x7717, 0x7c16, 0x1, 0x1);
        gbc.writeMem(0x6214, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0xbd3b, gbc.sp());
        EXPECT(0x6216, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0120
        gbc.setState(0x63fa, 0xe55b, 0x6760, 0xbd49, 0x26e4, 0x80ff, 0x1, 0x0);
        gbc.writeMem(0x63fa, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0xe55b, gbc.sp());
        EXPECT(0x63fc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0122
        gbc.setState(0x9b0b, 0x1e1c, 0xdc80, 0x9682, 0xe9bc, 0x1c4d, 0x1, 0x1);
        gbc.writeMem(0x9b0b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x1e1c, gbc.sp());
        EXPECT(0x9b0d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b0b));
        EXPECT(0x6b, gbc.readMem(0x9b0c));
        // CB 6B 0123
        gbc.setState(0x4fee, 0x239, 0x38b0, 0xc345, 0xe176, 0xc65c, 0x1, 0x1);
        gbc.writeMem(0x4fee, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x239, gbc.sp());
        EXPECT(0x4ff0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0124
        gbc.setState(0x4e71, 0xcec5, 0x82a0, 0x4e07, 0x391, 0xa2f5, 0x1, 0x0);
        gbc.writeMem(0x4e71, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xcec5, gbc.sp());
        EXPECT(0x4e73, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0125
        gbc.setState(0x8b5, 0x225b, 0x9710, 0xcdd4, 0xdb81, 0xc877, 0x1, 0x0);
        gbc.writeMem(0x8b5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x225b, gbc.sp());
        EXPECT(0x8b7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0126
        gbc.setState(0x1c43, 0x6f59, 0x7790, 0xa72f, 0xccb8, 0xddb1, 0x0, 0x0);
        gbc.writeMem(0x1c43, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x6f59, gbc.sp());
        EXPECT(0x1c45, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0127
        gbc.setState(0xc205, 0xe4dc, 0x8910, 0x5870, 0x847a, 0xf32b, 0x1, 0x0);
        gbc.writeMem(0xc205, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xe4dc, gbc.sp());
        EXPECT(0xc207, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc205));
        EXPECT(0x6b, gbc.readMem(0xc206));
        // CB 6B 0129
        gbc.setState(0xab9d, 0xa87a, 0x55d0, 0x8ab3, 0xa2c4, 0xa8f7, 0x0, 0x1);
        gbc.writeMem(0xab9d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xa87a, gbc.sp());
        EXPECT(0xab9f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab9d));
        EXPECT(0x6b, gbc.readMem(0xab9e));
        // CB 6B 012A
        gbc.setState(0x24e, 0x4d4a, 0x7ae0, 0x6a4a, 0xd370, 0x4e6a, 0x0, 0x0);
        gbc.writeMem(0x24e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0x4d4a, gbc.sp());
        EXPECT(0x250, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 012B
        gbc.setState(0x9a99, 0x19e0, 0x9190, 0x6172, 0xcc0e, 0xddcb, 0x0, 0x1);
        gbc.writeMem(0x9a99, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x19e0, gbc.sp());
        EXPECT(0x9a9b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a99));
        EXPECT(0x6b, gbc.readMem(0x9a9a));
        // CB 6B 012C
        gbc.setState(0xac1, 0x5eb, 0xa200, 0x5f80, 0x467c, 0x8d3d, 0x1, 0x1);
        gbc.writeMem(0xac1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x5eb, gbc.sp());
        EXPECT(0xac3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 012D
        gbc.setState(0xd90, 0xd7de, 0xb240, 0x8ed6, 0x1360, 0x928d, 0x1, 0x1);
        gbc.writeMem(0xd90, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xd7de, gbc.sp());
        EXPECT(0xd92, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 012E
        gbc.setState(0x6611, 0x3181, 0x8570, 0xa45, 0xbf65, 0x957f, 0x0, 0x1);
        gbc.writeMem(0x6611, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x3181, gbc.sp());
        EXPECT(0x6613, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 012F
        gbc.setState(0xc9f9, 0x1477, 0x53f0, 0x205e, 0x4feb, 0x2b58, 0x0, 0x1);
        gbc.writeMem(0xc9f9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x1477, gbc.sp());
        EXPECT(0xc9fb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9f9));
        EXPECT(0x6b, gbc.readMem(0xc9fa));
        // CB 6B 0130
        gbc.setState(0x970b, 0xe4c8, 0x4210, 0xd193, 0xedb, 0x8aaa, 0x1, 0x0);
        gbc.writeMem(0x970b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xe4c8, gbc.sp());
        EXPECT(0x970d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x970b));
        EXPECT(0x6b, gbc.readMem(0x970c));
        // CB 6B 0131
        gbc.setState(0xca2c, 0x7267, 0x5dd0, 0x2839, 0xea6d, 0x57b4, 0x0, 0x1);
        gbc.writeMem(0xca2c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x7267, gbc.sp());
        EXPECT(0xca2e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xca2c));
        EXPECT(0x6b, gbc.readMem(0xca2d));
        // CB 6B 0132
        gbc.setState(0x1e5d, 0xa548, 0x5d50, 0x3206, 0x93b4, 0x5a66, 0x0, 0x0);
        gbc.writeMem(0x1e5d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0xa548, gbc.sp());
        EXPECT(0x1e5f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0133
        gbc.setState(0x664, 0x9251, 0x78c0, 0x6bc0, 0xea2a, 0xfd34, 0x0, 0x0);
        gbc.writeMem(0x664, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x9251, gbc.sp());
        EXPECT(0x666, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0134
        gbc.setState(0xe659, 0xa5, 0x4340, 0x9ab2, 0x3830, 0x197d, 0x0, 0x1);
        gbc.writeMem(0xe659, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xa5, gbc.sp());
        EXPECT(0xe65b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe659));
        EXPECT(0x6b, gbc.readMem(0xe65a));
        // CB 6B 0135
        gbc.setState(0xf87, 0x6b97, 0xd1a0, 0x9591, 0xe88b, 0xdfed, 0x0, 0x0);
        gbc.writeMem(0xf87, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x6b97, gbc.sp());
        EXPECT(0xf89, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0136
        gbc.setState(0xa7d1, 0xe87a, 0x8050, 0x24f7, 0x720f, 0x7d57, 0x0, 0x1);
        gbc.writeMem(0xa7d1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xe87a, gbc.sp());
        EXPECT(0xa7d3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa7d1));
        EXPECT(0x6b, gbc.readMem(0xa7d2));
        // CB 6B 0138
        gbc.setState(0x80e8, 0xec66, 0x7ae0, 0x7c2f, 0x5594, 0xdda4, 0x1, 0x0);
        gbc.writeMem(0x80e8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xec66, gbc.sp());
        EXPECT(0x80ea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80e8));
        EXPECT(0x6b, gbc.readMem(0x80e9));
        // CB 6B 0139
        gbc.setState(0xa007, 0x28ec, 0xb0a0, 0xd6d6, 0x530, 0xece6, 0x1, 0x1);
        gbc.writeMem(0xa007, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x28ec, gbc.sp());
        EXPECT(0xa009, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa007));
        EXPECT(0x6b, gbc.readMem(0xa008));
        // CB 6B 013A
        gbc.setState(0x50ef, 0x6b65, 0x3b70, 0xd312, 0x57f, 0x5c4, 0x0, 0x0);
        gbc.writeMem(0x50ef, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x6b65, gbc.sp());
        EXPECT(0x50f1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 013C
        gbc.setState(0x12c8, 0xbf58, 0xb290, 0xd250, 0xd64d, 0xeb0, 0x0, 0x1);
        gbc.writeMem(0x12c8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xbf58, gbc.sp());
        EXPECT(0x12ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 013D
        gbc.setState(0xabb7, 0xa3a3, 0xf90, 0x2f64, 0x9d57, 0x2da4, 0x1, 0x0);
        gbc.writeMem(0xabb7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xa3a3, gbc.sp());
        EXPECT(0xabb9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xabb7));
        EXPECT(0x6b, gbc.readMem(0xabb8));
        // CB 6B 013E
        gbc.setState(0x4b70, 0x16e7, 0x5940, 0xda35, 0x2a31, 0xd208, 0x0, 0x0);
        gbc.writeMem(0x4b70, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x16e7, gbc.sp());
        EXPECT(0x4b72, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 013F
        gbc.setState(0x88c4, 0x1758, 0x51e0, 0xa392, 0x7479, 0xe480, 0x1, 0x1);
        gbc.writeMem(0x88c4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x1758, gbc.sp());
        EXPECT(0x88c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x88c4));
        EXPECT(0x6b, gbc.readMem(0x88c5));
        // CB 6B 0140
        gbc.setState(0xd022, 0x4378, 0xb60, 0xd94, 0xd653, 0x2bf, 0x0, 0x1);
        gbc.writeMem(0xd022, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x4378, gbc.sp());
        EXPECT(0xd024, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd022));
        EXPECT(0x6b, gbc.readMem(0xd023));
        // CB 6B 0141
        gbc.setState(0x22b0, 0xcfad, 0xbcd0, 0x689, 0x3a61, 0xb721, 0x1, 0x0);
        gbc.writeMem(0x22b0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xcfad, gbc.sp());
        EXPECT(0x22b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0142
        gbc.setState(0xa02c, 0x1e53, 0x8c40, 0x7805, 0x9181, 0x3990, 0x0, 0x1);
        gbc.writeMem(0xa02c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x1e53, gbc.sp());
        EXPECT(0xa02e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa02c));
        EXPECT(0x6b, gbc.readMem(0xa02d));
        // CB 6B 0143
        gbc.setState(0x9b1e, 0xb293, 0x3370, 0xa8c0, 0xf51f, 0xa2f5, 0x0, 0x0);
        gbc.writeMem(0x9b1e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xb293, gbc.sp());
        EXPECT(0x9b20, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b1e));
        EXPECT(0x6b, gbc.readMem(0x9b1f));
        // CB 6B 0144
        gbc.setState(0x299d, 0x9ed2, 0xd7b0, 0x9ae9, 0xba95, 0x1f73, 0x0, 0x1);
        gbc.writeMem(0x299d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x9ed2, gbc.sp());
        EXPECT(0x299f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0147
        gbc.setState(0x7a91, 0xd5e7, 0xc3c0, 0x7443, 0x9657, 0x3ce, 0x1, 0x1);
        gbc.writeMem(0x7a91, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xd5e7, gbc.sp());
        EXPECT(0x7a93, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0148
        gbc.setState(0x59d1, 0x6832, 0x5330, 0xf061, 0x402f, 0xb007, 0x1, 0x1);
        gbc.writeMem(0x59d1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x6832, gbc.sp());
        EXPECT(0x59d3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0149
        gbc.setState(0x1bf5, 0x280, 0xae0, 0x40a5, 0xc785, 0x8393, 0x1, 0x0);
        gbc.writeMem(0x1bf5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x280, gbc.sp());
        EXPECT(0x1bf7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 014A
        gbc.setState(0x3dc8, 0x2649, 0xdd10, 0x8645, 0x477, 0x98d6, 0x0, 0x0);
        gbc.writeMem(0x3dc8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x2649, gbc.sp());
        EXPECT(0x3dca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 014B
        gbc.setState(0x7e85, 0x5c5a, 0x2040, 0xb78e, 0xf625, 0xea32, 0x0, 0x0);
        gbc.writeMem(0x7e85, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x5c5a, gbc.sp());
        EXPECT(0x7e87, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 014C
        gbc.setState(0xb4a5, 0xeb7f, 0x4d60, 0x7c08, 0x561f, 0x6fe2, 0x0, 0x0);
        gbc.writeMem(0xb4a5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xeb7f, gbc.sp());
        EXPECT(0xb4a7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb4a5));
        EXPECT(0x6b, gbc.readMem(0xb4a6));
        // CB 6B 014D
        gbc.setState(0x2f2a, 0x7d86, 0x7ae0, 0x594, 0x6619, 0x44e1, 0x1, 0x1);
        gbc.writeMem(0x2f2a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x7d86, gbc.sp());
        EXPECT(0x2f2c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 014E
        gbc.setState(0xde7d, 0xced1, 0xafb0, 0x1aed, 0xe48a, 0x73fa, 0x0, 0x1);
        gbc.writeMem(0xde7d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xced1, gbc.sp());
        EXPECT(0xde7f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde7d));
        EXPECT(0x6b, gbc.readMem(0xde7e));
        // CB 6B 014F
        gbc.setState(0x52e3, 0xb92a, 0x4ef0, 0xe0f2, 0x62f2, 0x18a9, 0x0, 0x0);
        gbc.writeMem(0x52e3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xb92a, gbc.sp());
        EXPECT(0x52e5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0150
        gbc.setState(0x15e0, 0x7721, 0x7000, 0xe9dd, 0xdac8, 0x9ac5, 0x1, 0x0);
        gbc.writeMem(0x15e0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x7721, gbc.sp());
        EXPECT(0x15e2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0151
        gbc.setState(0x8095, 0xe2e8, 0xbda0, 0xfc44, 0x39e9, 0x72f7, 0x1, 0x1);
        gbc.writeMem(0x8095, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xe2e8, gbc.sp());
        EXPECT(0x8097, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8095));
        EXPECT(0x6b, gbc.readMem(0x8096));
        // CB 6B 0152
        gbc.setState(0x1ddf, 0x55f0, 0x3fa0, 0xc4c9, 0xc0ca, 0x6140, 0x1, 0x1);
        gbc.writeMem(0x1ddf, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x55f0, gbc.sp());
        EXPECT(0x1de1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0153
        gbc.setState(0x933e, 0x3884, 0xa060, 0x6b09, 0xf8bc, 0xd523, 0x1, 0x1);
        gbc.writeMem(0x933e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x3884, gbc.sp());
        EXPECT(0x9340, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x933e));
        EXPECT(0x6b, gbc.readMem(0x933f));
        // CB 6B 0154
        gbc.setState(0xc72c, 0xdbe8, 0x7150, 0xb03a, 0x5b6a, 0x5392, 0x0, 0x1);
        gbc.writeMem(0xc72c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xdbe8, gbc.sp());
        EXPECT(0xc72e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc72c));
        EXPECT(0x6b, gbc.readMem(0xc72d));
        // CB 6B 0155
        gbc.setState(0xa30c, 0x7961, 0xb350, 0x7b89, 0x6496, 0xaed2, 0x1, 0x0);
        gbc.writeMem(0xa30c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x7961, gbc.sp());
        EXPECT(0xa30e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa30c));
        EXPECT(0x6b, gbc.readMem(0xa30d));
        // CB 6B 0156
        gbc.setState(0x8714, 0x720b, 0x62d0, 0x41b4, 0x5de4, 0x19ee, 0x1, 0x1);
        gbc.writeMem(0x8714, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x720b, gbc.sp());
        EXPECT(0x8716, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8714));
        EXPECT(0x6b, gbc.readMem(0x8715));
        // CB 6B 0157
        gbc.setState(0xed4b, 0x476e, 0x55f0, 0xf559, 0xad20, 0xa4b3, 0x1, 0x0);
        gbc.writeMem(0xed4b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x476e, gbc.sp());
        EXPECT(0xed4d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed4b));
        EXPECT(0x6b, gbc.readMem(0xed4c));
        // CB 6B 0158
        gbc.setState(0xe7d6, 0xfae3, 0x2540, 0xdc72, 0xcf1e, 0xb0b5, 0x0, 0x0);
        gbc.writeMem(0xe7d6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xfae3, gbc.sp());
        EXPECT(0xe7d8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe7d6));
        EXPECT(0x6b, gbc.readMem(0xe7d7));
        // CB 6B 0159
        gbc.setState(0x9ba5, 0xf9a8, 0xa550, 0x8cac, 0x126, 0x23fd, 0x0, 0x0);
        gbc.writeMem(0x9ba5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xf9a8, gbc.sp());
        EXPECT(0x9ba7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ba5));
        EXPECT(0x6b, gbc.readMem(0x9ba6));
        // CB 6B 015A
        gbc.setState(0xba5, 0x3865, 0x8610, 0x820b, 0x1014, 0xd6be, 0x1, 0x0);
        gbc.writeMem(0xba5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x3865, gbc.sp());
        EXPECT(0xba7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 015B
        gbc.setState(0xe233, 0x90f9, 0x49d0, 0xee91, 0x481c, 0xec08, 0x0, 0x0);
        gbc.writeMem(0xe233, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x90f9, gbc.sp());
        EXPECT(0xe235, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe233));
        EXPECT(0x6b, gbc.readMem(0xe234));
        // CB 6B 015C
        gbc.setState(0xa164, 0xfd6f, 0x67e0, 0x7253, 0x4b9b, 0xeb9c, 0x0, 0x1);
        gbc.writeMem(0xa164, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xfd6f, gbc.sp());
        EXPECT(0xa166, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa164));
        EXPECT(0x6b, gbc.readMem(0xa165));
        // CB 6B 015D
        gbc.setState(0x97c3, 0x9440, 0xfb00, 0x2514, 0x82, 0x62c3, 0x1, 0x1);
        gbc.writeMem(0x97c3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x9440, gbc.sp());
        EXPECT(0x97c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x97c3));
        EXPECT(0x6b, gbc.readMem(0x97c4));
        // CB 6B 015E
        gbc.setState(0xcb06, 0xa8f, 0x87c0, 0x1535, 0x6093, 0x1d5f, 0x0, 0x1);
        gbc.writeMem(0xcb06, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xa8f, gbc.sp());
        EXPECT(0xcb08, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb06));
        EXPECT(0x6b, gbc.readMem(0xcb07));
        // CB 6B 015F
        gbc.setState(0xcd13, 0xa9f3, 0x6f90, 0xbcc7, 0xd298, 0xd190, 0x1, 0x0);
        gbc.writeMem(0xcd13, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0xa9f3, gbc.sp());
        EXPECT(0xcd15, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd13));
        EXPECT(0x6b, gbc.readMem(0xcd14));
        // CB 6B 0160
        gbc.setState(0x9e3b, 0x50fc, 0x3740, 0x57fe, 0xda21, 0x97dd, 0x1, 0x1);
        gbc.writeMem(0x9e3b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x50fc, gbc.sp());
        EXPECT(0x9e3d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e3b));
        EXPECT(0x6b, gbc.readMem(0x9e3c));
        // CB 6B 0161
        gbc.setState(0x9611, 0xb4a1, 0x3f70, 0x8c, 0xf43d, 0x7739, 0x0, 0x1);
        gbc.writeMem(0x9611, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xb4a1, gbc.sp());
        EXPECT(0x9613, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9611));
        EXPECT(0x6b, gbc.readMem(0x9612));
        // CB 6B 0162
        gbc.setState(0x2c75, 0x4c30, 0x9070, 0xb71, 0x2d61, 0xed23, 0x0, 0x0);
        gbc.writeMem(0x2c75, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x4c30, gbc.sp());
        EXPECT(0x2c77, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0164
        gbc.setState(0x63b1, 0x7412, 0xd290, 0xdc22, 0x5a57, 0x8b68, 0x1, 0x0);
        gbc.writeMem(0x63b1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x7412, gbc.sp());
        EXPECT(0x63b3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0165
        gbc.setState(0x2a64, 0x3b40, 0x4d40, 0xaf58, 0x483b, 0x6344, 0x1, 0x1);
        gbc.writeMem(0x2a64, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x3b40, gbc.sp());
        EXPECT(0x2a66, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0166
        gbc.setState(0x19bc, 0xa6b5, 0x3710, 0x8ef8, 0xfc02, 0x990, 0x0, 0x0);
        gbc.writeMem(0x19bc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0xa6b5, gbc.sp());
        EXPECT(0x19be, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0167
        gbc.setState(0x3fb3, 0x3963, 0x5cd0, 0x1602, 0xc455, 0xc66f, 0x0, 0x1);
        gbc.writeMem(0x3fb3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x3963, gbc.sp());
        EXPECT(0x3fb5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0168
        gbc.setState(0x16d6, 0x8a8b, 0xe120, 0x9400, 0x69b7, 0x4ccd, 0x1, 0x0);
        gbc.writeMem(0x16d6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x8a8b, gbc.sp());
        EXPECT(0x16d8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0169
        gbc.setState(0x8cde, 0xea86, 0x4d50, 0xf249, 0x9cf, 0x4b2f, 0x0, 0x0);
        gbc.writeMem(0x8cde, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xea86, gbc.sp());
        EXPECT(0x8ce0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8cde));
        EXPECT(0x6b, gbc.readMem(0x8cdf));
        // CB 6B 016A
        gbc.setState(0xbe2d, 0xa147, 0x50b0, 0x7f48, 0xfc0c, 0x1ef8, 0x0, 0x0);
        gbc.writeMem(0xbe2d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xa147, gbc.sp());
        EXPECT(0xbe2f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe2d));
        EXPECT(0x6b, gbc.readMem(0xbe2e));
        // CB 6B 016B
        gbc.setState(0xd97e, 0xcb49, 0xa240, 0x5d96, 0x8c1, 0x9fa1, 0x0, 0x0);
        gbc.writeMem(0xd97e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xcb49, gbc.sp());
        EXPECT(0xd980, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd97e));
        EXPECT(0x6b, gbc.readMem(0xd97f));
        // CB 6B 016C
        gbc.setState(0x3c41, 0x10f3, 0x4520, 0x5559, 0x121a, 0x734d, 0x0, 0x1);
        gbc.writeMem(0x3c41, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x10f3, gbc.sp());
        EXPECT(0x3c43, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 016E
        gbc.setState(0x8636, 0xcc21, 0x1c30, 0x28f3, 0xc169, 0xa14, 0x1, 0x0);
        gbc.writeMem(0x8636, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xcc21, gbc.sp());
        EXPECT(0x8638, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8636));
        EXPECT(0x6b, gbc.readMem(0x8637));
        // CB 6B 016F
        gbc.setState(0xae56, 0xadd5, 0x2920, 0x458d, 0x313b, 0x1a8, 0x1, 0x0);
        gbc.writeMem(0xae56, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xadd5, gbc.sp());
        EXPECT(0xae58, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae56));
        EXPECT(0x6b, gbc.readMem(0xae57));
        // CB 6B 0170
        gbc.setState(0xca96, 0xb42a, 0xbb00, 0xb5b6, 0xff94, 0x11, 0x1, 0x1);
        gbc.writeMem(0xca96, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0xb42a, gbc.sp());
        EXPECT(0xca98, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xca96));
        EXPECT(0x6b, gbc.readMem(0xca97));
        // CB 6B 0171
        gbc.setState(0x8d3b, 0x424c, 0xcf10, 0xd256, 0x991c, 0x2898, 0x0, 0x0);
        gbc.writeMem(0x8d3b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x424c, gbc.sp());
        EXPECT(0x8d3d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d3b));
        EXPECT(0x6b, gbc.readMem(0x8d3c));
        // CB 6B 0172
        gbc.setState(0x3b57, 0xc94b, 0xdb00, 0x8c33, 0x2fb2, 0xbc74, 0x0, 0x1);
        gbc.writeMem(0x3b57, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xc94b, gbc.sp());
        EXPECT(0x3b59, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0173
        gbc.setState(0xdd39, 0x6b90, 0x1de0, 0xd5a7, 0x29c5, 0x7326, 0x1, 0x1);
        gbc.writeMem(0xdd39, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x6b90, gbc.sp());
        EXPECT(0xdd3b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd39));
        EXPECT(0x6b, gbc.readMem(0xdd3a));
        // CB 6B 0174
        gbc.setState(0x5bae, 0x35b1, 0x5610, 0x41b6, 0x3cb1, 0x7d46, 0x0, 0x1);
        gbc.writeMem(0x5bae, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x35b1, gbc.sp());
        EXPECT(0x5bb0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0175
        gbc.setState(0x8935, 0xb142, 0x2510, 0xadf8, 0x5447, 0x536b, 0x0, 0x0);
        gbc.writeMem(0x8935, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xb142, gbc.sp());
        EXPECT(0x8937, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8935));
        EXPECT(0x6b, gbc.readMem(0x8936));
        // CB 6B 0177
        gbc.setState(0x4be2, 0x9419, 0x7c0, 0xe68b, 0x3566, 0xdebb, 0x1, 0x0);
        gbc.writeMem(0x4be2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x9419, gbc.sp());
        EXPECT(0x4be4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0178
        gbc.setState(0xe452, 0x727a, 0x41e0, 0xbc21, 0xdd80, 0xcb3, 0x0, 0x1);
        gbc.writeMem(0xe452, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x727a, gbc.sp());
        EXPECT(0xe454, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe452));
        EXPECT(0x6b, gbc.readMem(0xe453));
        // CB 6B 0179
        gbc.setState(0x547b, 0x375b, 0x7060, 0x7aa0, 0xaac8, 0x3044, 0x0, 0x1);
        gbc.writeMem(0x547b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x375b, gbc.sp());
        EXPECT(0x547d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 017A
        gbc.setState(0x6c71, 0x2f74, 0xc4d0, 0xe53e, 0x2cfb, 0x999d, 0x1, 0x0);
        gbc.writeMem(0x6c71, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x2f74, gbc.sp());
        EXPECT(0x6c73, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 017B
        gbc.setState(0x6aa5, 0x4553, 0x32c0, 0xf99e, 0x66d6, 0xf2f3, 0x0, 0x0);
        gbc.writeMem(0x6aa5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x4553, gbc.sp());
        EXPECT(0x6aa7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 017C
        gbc.setState(0xa4e5, 0x8a58, 0x8360, 0xb940, 0x2c03, 0xa9e6, 0x0, 0x1);
        gbc.writeMem(0xa4e5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x8a58, gbc.sp());
        EXPECT(0xa4e7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa4e5));
        EXPECT(0x6b, gbc.readMem(0xa4e6));
        // CB 6B 017D
        gbc.setState(0x654e, 0x4ad3, 0xb70, 0x9727, 0xe2bc, 0xa9ef, 0x0, 0x0);
        gbc.writeMem(0x654e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x4ad3, gbc.sp());
        EXPECT(0x6550, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 017E
        gbc.setState(0x5e0c, 0x7993, 0xa380, 0xea41, 0x1883, 0x9408, 0x1, 0x0);
        gbc.writeMem(0x5e0c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x7993, gbc.sp());
        EXPECT(0x5e0e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 017F
        gbc.setState(0xb5cc, 0x371c, 0xa000, 0x33b, 0x2169, 0xca50, 0x1, 0x0);
        gbc.writeMem(0xb5cc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x371c, gbc.sp());
        EXPECT(0xb5ce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb5cc));
        EXPECT(0x6b, gbc.readMem(0xb5cd));
        // CB 6B 0181
        gbc.setState(0x9a63, 0x784a, 0x6880, 0x1e3d, 0x695b, 0xc373, 0x1, 0x0);
        gbc.writeMem(0x9a63, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x784a, gbc.sp());
        EXPECT(0x9a65, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a63));
        EXPECT(0x6b, gbc.readMem(0x9a64));
        // CB 6B 0182
        gbc.setState(0xce08, 0xbda, 0x6080, 0x81df, 0xb932, 0xb29e, 0x0, 0x0);
        gbc.writeMem(0xce08, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xbda, gbc.sp());
        EXPECT(0xce0a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce08));
        EXPECT(0x6b, gbc.readMem(0xce09));
        // CB 6B 0184
        gbc.setState(0x8e19, 0xd814, 0x5e40, 0x7cec, 0x7ca9, 0x66d1, 0x1, 0x1);
        gbc.writeMem(0x8e19, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xd814, gbc.sp());
        EXPECT(0x8e1b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e19));
        EXPECT(0x6b, gbc.readMem(0x8e1a));
        // CB 6B 0185
        gbc.setState(0x3ef, 0x96ac, 0x1190, 0xbfe8, 0x5a8e, 0xc4bc, 0x1, 0x1);
        gbc.writeMem(0x3ef, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x96ac, gbc.sp());
        EXPECT(0x3f1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0186
        gbc.setState(0x6ceb, 0xc164, 0xf90, 0x872c, 0x6561, 0x12e4, 0x0, 0x1);
        gbc.writeMem(0x6ceb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xc164, gbc.sp());
        EXPECT(0x6ced, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0187
        gbc.setState(0x9b57, 0x6afa, 0x52a0, 0xb646, 0x7c8b, 0x2cb, 0x1, 0x0);
        gbc.writeMem(0x9b57, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x6afa, gbc.sp());
        EXPECT(0x9b59, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b57));
        EXPECT(0x6b, gbc.readMem(0x9b58));
        // CB 6B 0188
        gbc.setState(0x990d, 0x657d, 0x3510, 0x731a, 0x7d70, 0x4805, 0x0, 0x0);
        gbc.writeMem(0x990d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x657d, gbc.sp());
        EXPECT(0x990f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x990d));
        EXPECT(0x6b, gbc.readMem(0x990e));
        // CB 6B 0189
        gbc.setState(0x19ca, 0x3f86, 0x8430, 0xf213, 0x3a8d, 0xafd4, 0x1, 0x1);
        gbc.writeMem(0x19ca, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x3f86, gbc.sp());
        EXPECT(0x19cc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 018A
        gbc.setState(0x6d72, 0xc015, 0x2a60, 0x96a, 0x5272, 0xbfb3, 0x1, 0x0);
        gbc.writeMem(0x6d72, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xc015, gbc.sp());
        EXPECT(0x6d74, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 018B
        gbc.setState(0x7317, 0x119a, 0x5bb0, 0xb03d, 0xaee2, 0x74a, 0x0, 0x0);
        gbc.writeMem(0x7317, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x119a, gbc.sp());
        EXPECT(0x7319, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 018C
        gbc.setState(0x524b, 0x8f58, 0x2e90, 0x63a1, 0xfcb3, 0x92c, 0x1, 0x0);
        gbc.writeMem(0x524b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x8f58, gbc.sp());
        EXPECT(0x524d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 018D
        gbc.setState(0xa774, 0x1b68, 0x74c0, 0x70f2, 0xbc3e, 0x6a7b, 0x1, 0x1);
        gbc.writeMem(0xa774, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x1b68, gbc.sp());
        EXPECT(0xa776, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa774));
        EXPECT(0x6b, gbc.readMem(0xa775));
        // CB 6B 018E
        gbc.setState(0x5f50, 0x8a16, 0x5a00, 0x7a59, 0x7f36, 0x63b8, 0x0, 0x1);
        gbc.writeMem(0x5f50, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x8a16, gbc.sp());
        EXPECT(0x5f52, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 018F
        gbc.setState(0x44f9, 0x7e1e, 0xb8d0, 0x23a, 0x69fb, 0xcda6, 0x0, 0x1);
        gbc.writeMem(0x44f9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x7e1e, gbc.sp());
        EXPECT(0x44fb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0190
        gbc.setState(0x33b2, 0x2020, 0x9520, 0x8688, 0x817d, 0x6366, 0x0, 0x0);
        gbc.writeMem(0x33b2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x2020, gbc.sp());
        EXPECT(0x33b4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0191
        gbc.setState(0x1a9b, 0x5ee3, 0xc2b0, 0xfc2d, 0xb7e3, 0x2ee0, 0x1, 0x0);
        gbc.writeMem(0x1a9b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x5ee3, gbc.sp());
        EXPECT(0x1a9d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0192
        gbc.setState(0x760a, 0x59f, 0xd8b0, 0x5910, 0xc347, 0xf089, 0x0, 0x1);
        gbc.writeMem(0x760a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x59f, gbc.sp());
        EXPECT(0x760c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0193
        gbc.setState(0xd806, 0x6497, 0x28a0, 0x1164, 0xa9b2, 0x5092, 0x0, 0x0);
        gbc.writeMem(0xd806, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x6497, gbc.sp());
        EXPECT(0xd808, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd806));
        EXPECT(0x6b, gbc.readMem(0xd807));
        // CB 6B 0194
        gbc.setState(0xc025, 0x76d, 0xd8d0, 0xf78b, 0xb7b8, 0xe728, 0x0, 0x1);
        gbc.writeMem(0xc025, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x76d, gbc.sp());
        EXPECT(0xc027, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc025));
        EXPECT(0x6b, gbc.readMem(0xc026));
        // CB 6B 0195
        gbc.setState(0x4f74, 0xb630, 0xa810, 0x7b69, 0xc2ef, 0x9949, 0x1, 0x0);
        gbc.writeMem(0x4f74, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xb630, gbc.sp());
        EXPECT(0x4f76, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0197
        gbc.setState(0x6b3c, 0xdd52, 0x8940, 0xf400, 0x6e01, 0x100a, 0x1, 0x1);
        gbc.writeMem(0x6b3c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xdd52, gbc.sp());
        EXPECT(0x6b3e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0198
        gbc.setState(0x1c23, 0x3f8, 0xbe40, 0xe7b3, 0x7d06, 0x4c65, 0x0, 0x1);
        gbc.writeMem(0x1c23, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x3f8, gbc.sp());
        EXPECT(0x1c25, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 019A
        gbc.setState(0xe833, 0x3306, 0x1d10, 0xd3e4, 0x8358, 0xaeaa, 0x0, 0x1);
        gbc.writeMem(0xe833, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x3306, gbc.sp());
        EXPECT(0xe835, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe833));
        EXPECT(0x6b, gbc.readMem(0xe834));
        // CB 6B 019B
        gbc.setState(0x4a2, 0xa8d0, 0x6390, 0xdc1a, 0x4b4d, 0xcc3f, 0x1, 0x0);
        gbc.writeMem(0x4a2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xa8d0, gbc.sp());
        EXPECT(0x4a4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 019C
        gbc.setState(0x225f, 0x7dd, 0xea50, 0xd4d9, 0x9225, 0x214e, 0x1, 0x1);
        gbc.writeMem(0x225f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x7dd, gbc.sp());
        EXPECT(0x2261, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 019D
        gbc.setState(0xe526, 0xd8b7, 0x5160, 0x8c07, 0xd29, 0x2304, 0x1, 0x0);
        gbc.writeMem(0xe526, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xd8b7, gbc.sp());
        EXPECT(0xe528, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe526));
        EXPECT(0x6b, gbc.readMem(0xe527));
        // CB 6B 019E
        gbc.setState(0x23a4, 0xb95f, 0xd600, 0x5f7a, 0x2283, 0x91b, 0x0, 0x0);
        gbc.writeMem(0x23a4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xb95f, gbc.sp());
        EXPECT(0x23a6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 019F
        gbc.setState(0xebf9, 0xed46, 0x6640, 0x1c67, 0x4bd7, 0x84d5, 0x0, 0x0);
        gbc.writeMem(0xebf9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xed46, gbc.sp());
        EXPECT(0xebfb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xebf9));
        EXPECT(0x6b, gbc.readMem(0xebfa));
        // CB 6B 01A0
        gbc.setState(0xefdb, 0xb77a, 0x5360, 0x2f2b, 0x65d7, 0x665d, 0x1, 0x0);
        gbc.writeMem(0xefdb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xb77a, gbc.sp());
        EXPECT(0xefdd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xefdb));
        EXPECT(0x6b, gbc.readMem(0xefdc));
        // CB 6B 01A1
        gbc.setState(0xbc8a, 0x319a, 0x5300, 0x7497, 0xe914, 0x16d3, 0x1, 0x1);
        gbc.writeMem(0xbc8a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x319a, gbc.sp());
        EXPECT(0xbc8c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc8a));
        EXPECT(0x6b, gbc.readMem(0xbc8b));
        // CB 6B 01A2
        gbc.setState(0xb094, 0x8140, 0xec10, 0xa968, 0x8236, 0x3b51, 0x0, 0x1);
        gbc.writeMem(0xb094, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x8140, gbc.sp());
        EXPECT(0xb096, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb094));
        EXPECT(0x6b, gbc.readMem(0xb095));
        // CB 6B 01A3
        gbc.setState(0xd168, 0x8ac5, 0xbbf0, 0xd0df, 0xc51, 0x7b2a, 0x0, 0x1);
        gbc.writeMem(0xd168, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x8ac5, gbc.sp());
        EXPECT(0xd16a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd168));
        EXPECT(0x6b, gbc.readMem(0xd169));
        // CB 6B 01A4
        gbc.setState(0x32da, 0x6c03, 0x2e50, 0xc5d7, 0x8018, 0x530c, 0x1, 0x1);
        gbc.writeMem(0x32da, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x6c03, gbc.sp());
        EXPECT(0x32dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 01A5
        gbc.setState(0xb0fe, 0xc610, 0xef0, 0x7c14, 0x291b, 0x6c7d, 0x1, 0x1);
        gbc.writeMem(0xb0fe, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xc610, gbc.sp());
        EXPECT(0xb100, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb0fe));
        EXPECT(0x6b, gbc.readMem(0xb0ff));
        // CB 6B 01A6
        gbc.setState(0x3e2c, 0xf598, 0x2880, 0xe0cb, 0x65c6, 0x8663, 0x0, 0x0);
        gbc.writeMem(0x3e2c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xf598, gbc.sp());
        EXPECT(0x3e2e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01A9
        gbc.setState(0xbed4, 0x631c, 0x8fb0, 0xf729, 0x9187, 0x1408, 0x1, 0x0);
        gbc.writeMem(0xbed4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x631c, gbc.sp());
        EXPECT(0xbed6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbed4));
        EXPECT(0x6b, gbc.readMem(0xbed5));
        // CB 6B 01AA
        gbc.setState(0xa4c2, 0xc7cf, 0xe950, 0x767b, 0x33b5, 0xa2d6, 0x1, 0x1);
        gbc.writeMem(0xa4c2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xc7cf, gbc.sp());
        EXPECT(0xa4c4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa4c2));
        EXPECT(0x6b, gbc.readMem(0xa4c3));
        // CB 6B 01AB
        gbc.setState(0x6aac, 0xfa09, 0x9b40, 0x6cf6, 0x6677, 0x5366, 0x1, 0x0);
        gbc.writeMem(0x6aac, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0xfa09, gbc.sp());
        EXPECT(0x6aae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01AC
        gbc.setState(0x59e7, 0x5e4, 0xb040, 0x69c2, 0xfc7f, 0x27b2, 0x0, 0x0);
        gbc.writeMem(0x59e7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x5e4, gbc.sp());
        EXPECT(0x59e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01AD
        gbc.setState(0x7bbf, 0xb711, 0x5f40, 0x288e, 0x6fd5, 0x994c, 0x0, 0x0);
        gbc.writeMem(0x7bbf, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xb711, gbc.sp());
        EXPECT(0x7bc1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01AE
        gbc.setState(0x7f8b, 0x1124, 0x7880, 0x6090, 0x916d, 0x95eb, 0x1, 0x1);
        gbc.writeMem(0x7f8b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x1124, gbc.sp());
        EXPECT(0x7f8d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01AF
        gbc.setState(0xac12, 0x7bf6, 0x3c20, 0x3e83, 0xd367, 0x1df, 0x0, 0x0);
        gbc.writeMem(0xac12, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x7bf6, gbc.sp());
        EXPECT(0xac14, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac12));
        EXPECT(0x6b, gbc.readMem(0xac13));
        // CB 6B 01B0
        gbc.setState(0x847e, 0x65e0, 0x62e0, 0xab74, 0xc028, 0x5804, 0x0, 0x0);
        gbc.writeMem(0x847e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x65e0, gbc.sp());
        EXPECT(0x8480, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x847e));
        EXPECT(0x6b, gbc.readMem(0x847f));
        // CB 6B 01B1
        gbc.setState(0x809b, 0xceb8, 0x31b0, 0x2f20, 0x22ec, 0x5c6b, 0x0, 0x0);
        gbc.writeMem(0x809b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xceb8, gbc.sp());
        EXPECT(0x809d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x809b));
        EXPECT(0x6b, gbc.readMem(0x809c));
        // CB 6B 01B2
        gbc.setState(0x4400, 0x13b2, 0xc150, 0x7f40, 0x428a, 0x683b, 0x1, 0x1);
        gbc.writeMem(0x4400, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x13b2, gbc.sp());
        EXPECT(0x4402, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 01B3
        gbc.setState(0x95c4, 0x711b, 0x6dd0, 0x8142, 0x4d9f, 0x72fc, 0x1, 0x0);
        gbc.writeMem(0x95c4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x711b, gbc.sp());
        EXPECT(0x95c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x95c4));
        EXPECT(0x6b, gbc.readMem(0x95c5));
        // CB 6B 01B4
        gbc.setState(0xaa24, 0xd4bd, 0x6d40, 0xb94e, 0x5556, 0xae44, 0x1, 0x0);
        gbc.writeMem(0xaa24, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xd4bd, gbc.sp());
        EXPECT(0xaa26, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa24));
        EXPECT(0x6b, gbc.readMem(0xaa25));
        // CB 6B 01B5
        gbc.setState(0xe992, 0xdaa9, 0x6560, 0x3b36, 0x5169, 0xc0eb, 0x1, 0x1);
        gbc.writeMem(0xe992, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xdaa9, gbc.sp());
        EXPECT(0xe994, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe992));
        EXPECT(0x6b, gbc.readMem(0xe993));
        // CB 6B 01B6
        gbc.setState(0x4ce9, 0x2b46, 0xa950, 0x5cc5, 0xb58c, 0x7fab, 0x1, 0x0);
        gbc.writeMem(0x4ce9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x2b46, gbc.sp());
        EXPECT(0x4ceb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 01B7
        gbc.setState(0x5538, 0xdadd, 0x8fa0, 0x85ea, 0x3673, 0x9cbe, 0x0, 0x0);
        gbc.writeMem(0x5538, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xdadd, gbc.sp());
        EXPECT(0x553a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01B8
        gbc.setState(0x326b, 0xec74, 0x27b0, 0xa26b, 0xd156, 0x4333, 0x1, 0x1);
        gbc.writeMem(0x326b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0xec74, gbc.sp());
        EXPECT(0x326d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 01B9
        gbc.setState(0x78c8, 0x4a87, 0xa5c0, 0x8312, 0xb295, 0x27b4, 0x0, 0x1);
        gbc.writeMem(0x78c8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x4a87, gbc.sp());
        EXPECT(0x78ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01BA
        gbc.setState(0xb275, 0x8da0, 0xd860, 0xc9e0, 0x504a, 0x64a1, 0x0, 0x1);
        gbc.writeMem(0xb275, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x8da0, gbc.sp());
        EXPECT(0xb277, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb275));
        EXPECT(0x6b, gbc.readMem(0xb276));
        // CB 6B 01BB
        gbc.setState(0x9364, 0xa5fa, 0x7490, 0x1fe8, 0x7297, 0x50b4, 0x1, 0x1);
        gbc.writeMem(0x9364, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xa5fa, gbc.sp());
        EXPECT(0x9366, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9364));
        EXPECT(0x6b, gbc.readMem(0x9365));
        // CB 6B 01BC
        gbc.setState(0xe9e4, 0x4ec6, 0x1250, 0x7c18, 0x4829, 0xbd0e, 0x1, 0x1);
        gbc.writeMem(0xe9e4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x4ec6, gbc.sp());
        EXPECT(0xe9e6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe9e4));
        EXPECT(0x6b, gbc.readMem(0xe9e5));
        // CB 6B 01BD
        gbc.setState(0x5f28, 0x4e06, 0xe1d0, 0x5410, 0x162f, 0xdc4a, 0x0, 0x0);
        gbc.writeMem(0x5f28, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x4e06, gbc.sp());
        EXPECT(0x5f2a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 01BE
        gbc.setState(0xef19, 0x75, 0xe50, 0x18bc, 0xdf0f, 0x1bb7, 0x0, 0x0);
        gbc.writeMem(0xef19, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x75, gbc.sp());
        EXPECT(0xef1b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef19));
        EXPECT(0x6b, gbc.readMem(0xef1a));
        // CB 6B 01C0
        gbc.setState(0xc41, 0x6038, 0xc060, 0xcaa8, 0xdbf, 0xee19, 0x0, 0x0);
        gbc.writeMem(0xc41, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x6038, gbc.sp());
        EXPECT(0xc43, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01C1
        gbc.setState(0x400, 0x4be3, 0x4710, 0x2fb5, 0xb790, 0x3fea, 0x0, 0x1);
        gbc.writeMem(0x400, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x4be3, gbc.sp());
        EXPECT(0x402, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 01C2
        gbc.setState(0x85a9, 0x459, 0x5e50, 0xc5d1, 0xf70c, 0x2025, 0x0, 0x1);
        gbc.writeMem(0x85a9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x459, gbc.sp());
        EXPECT(0x85ab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x85a9));
        EXPECT(0x6b, gbc.readMem(0x85aa));
        // CB 6B 01C3
        gbc.setState(0xb3f2, 0xfa28, 0x84d0, 0xd702, 0xf827, 0xe885, 0x1, 0x0);
        gbc.writeMem(0xb3f2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xfa28, gbc.sp());
        EXPECT(0xb3f4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3f2));
        EXPECT(0x6b, gbc.readMem(0xb3f3));
        // CB 6B 01C4
        gbc.setState(0x83e9, 0x23fa, 0xece0, 0xa9c9, 0xf016, 0xcfbf, 0x0, 0x0);
        gbc.writeMem(0x83e9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x23fa, gbc.sp());
        EXPECT(0x83eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x83e9));
        EXPECT(0x6b, gbc.readMem(0x83ea));
        // CB 6B 01C5
        gbc.setState(0xbd9c, 0xc993, 0xd030, 0x983d, 0x1d39, 0x3c9, 0x1, 0x1);
        gbc.writeMem(0xbd9c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xc993, gbc.sp());
        EXPECT(0xbd9e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd9c));
        EXPECT(0x6b, gbc.readMem(0xbd9d));
        // CB 6B 01C6
        gbc.setState(0xc7de, 0xd3d4, 0xcd50, 0xe269, 0x4cb1, 0x935f, 0x1, 0x1);
        gbc.writeMem(0xc7de, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xd3d4, gbc.sp());
        EXPECT(0xc7e0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc7de));
        EXPECT(0x6b, gbc.readMem(0xc7df));
        // CB 6B 01C7
        gbc.setState(0x8b82, 0xc758, 0x8310, 0x46f, 0xd94d, 0xe3d4, 0x0, 0x1);
        gbc.writeMem(0x8b82, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0xc758, gbc.sp());
        EXPECT(0x8b84, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b82));
        EXPECT(0x6b, gbc.readMem(0x8b83));
        // CB 6B 01C8
        gbc.setState(0x7f3c, 0x20c3, 0xfa40, 0x3d2d, 0x9644, 0x466c, 0x0, 0x0);
        gbc.writeMem(0x7f3c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x20c3, gbc.sp());
        EXPECT(0x7f3e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01C9
        gbc.setState(0x5136, 0x46c, 0x7530, 0x5c21, 0x45d2, 0xd246, 0x1, 0x0);
        gbc.writeMem(0x5136, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x46c, gbc.sp());
        EXPECT(0x5138, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 01CA
        gbc.setState(0xc6ec, 0xa26c, 0xde30, 0xde1c, 0xd88a, 0x1de0, 0x0, 0x1);
        gbc.writeMem(0xc6ec, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xa26c, gbc.sp());
        EXPECT(0xc6ee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc6ec));
        EXPECT(0x6b, gbc.readMem(0xc6ed));
        // CB 6B 01CB
        gbc.setState(0xc732, 0xe608, 0x1140, 0x4abb, 0x600e, 0x81e0, 0x1, 0x1);
        gbc.writeMem(0xc732, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xe608, gbc.sp());
        EXPECT(0xc734, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc732));
        EXPECT(0x6b, gbc.readMem(0xc733));
        // CB 6B 01CC
        gbc.setState(0x3089, 0x4e2e, 0x7940, 0xa74d, 0x9c28, 0x99c5, 0x1, 0x1);
        gbc.writeMem(0x3089, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x4e2e, gbc.sp());
        EXPECT(0x308b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01CD
        gbc.setState(0x2b23, 0xb9ed, 0x2dc0, 0x58bb, 0xe987, 0x3cd7, 0x1, 0x0);
        gbc.writeMem(0x2b23, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xb9ed, gbc.sp());
        EXPECT(0x2b25, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01CE
        gbc.setState(0x6b86, 0xfd52, 0x9800, 0x152c, 0xfab1, 0x7581, 0x0, 0x0);
        gbc.writeMem(0x6b86, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xfd52, gbc.sp());
        EXPECT(0x6b88, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01CF
        gbc.setState(0xb146, 0xbd25, 0x1e90, 0x47f3, 0x981, 0x8e6b, 0x1, 0x1);
        gbc.writeMem(0xb146, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xbd25, gbc.sp());
        EXPECT(0xb148, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb146));
        EXPECT(0x6b, gbc.readMem(0xb147));
        // CB 6B 01D0
        gbc.setState(0x5607, 0xf1, 0xebd0, 0x90bc, 0x9027, 0x7acf, 0x1, 0x0);
        gbc.writeMem(0x5607, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xf1, gbc.sp());
        EXPECT(0x5609, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 01D1
        gbc.setState(0x91e7, 0xf269, 0x21b0, 0x2f3f, 0xff39, 0xb07, 0x1, 0x1);
        gbc.writeMem(0x91e7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xf269, gbc.sp());
        EXPECT(0x91e9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x91e7));
        EXPECT(0x6b, gbc.readMem(0x91e8));
        // CB 6B 01D2
        gbc.setState(0x6729, 0x858a, 0x1410, 0xa0ed, 0x2af2, 0xef8, 0x0, 0x1);
        gbc.writeMem(0x6729, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x858a, gbc.sp());
        EXPECT(0x672b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 01D3
        gbc.setState(0xe6d5, 0x9f17, 0xa60, 0xe4fc, 0xc56c, 0x6409, 0x1, 0x1);
        gbc.writeMem(0xe6d5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0x9f17, gbc.sp());
        EXPECT(0xe6d7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe6d5));
        EXPECT(0x6b, gbc.readMem(0xe6d6));
        // CB 6B 01D4
        gbc.setState(0xd9f6, 0x4d8f, 0x3b90, 0x52b1, 0x813, 0xca33, 0x0, 0x1);
        gbc.writeMem(0xd9f6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x4d8f, gbc.sp());
        EXPECT(0xd9f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd9f6));
        EXPECT(0x6b, gbc.readMem(0xd9f7));
        // CB 6B 01D5
        gbc.setState(0x276b, 0x9cd5, 0x3080, 0xab01, 0x780d, 0x69cd, 0x0, 0x0);
        gbc.writeMem(0x276b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x9cd5, gbc.sp());
        EXPECT(0x276d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01D6
        gbc.setState(0x278d, 0xf863, 0x37f0, 0x5be0, 0xd9b1, 0x57eb, 0x0, 0x0);
        gbc.writeMem(0x278d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xf863, gbc.sp());
        EXPECT(0x278f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 01D7
        gbc.setState(0x55a1, 0xe371, 0x9100, 0xbe4, 0xcee8, 0x1ff1, 0x1, 0x1);
        gbc.writeMem(0x55a1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0xe371, gbc.sp());
        EXPECT(0x55a3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01D8
        gbc.setState(0x3af3, 0x5475, 0x29a0, 0x5a6, 0xd397, 0xb6b6, 0x1, 0x0);
        gbc.writeMem(0x3af3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x5475, gbc.sp());
        EXPECT(0x3af5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01D9
        gbc.setState(0x1b4a, 0x2a0, 0x58d0, 0x8acc, 0x488e, 0xaf99, 0x1, 0x1);
        gbc.writeMem(0x1b4a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x2a0, gbc.sp());
        EXPECT(0x1b4c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 01DA
        gbc.setState(0x23bc, 0x946a, 0xa650, 0x81d6, 0x7d4c, 0x531b, 0x0, 0x0);
        gbc.writeMem(0x23bc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x946a, gbc.sp());
        EXPECT(0x23be, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 01DB
        gbc.setState(0x592d, 0x441, 0xb270, 0x3ae7, 0xcfea, 0x3cf8, 0x1, 0x0);
        gbc.writeMem(0x592d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x441, gbc.sp());
        EXPECT(0x592f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 01DC
        gbc.setState(0x8341, 0x66aa, 0x7500, 0xaecd, 0x2743, 0x6339, 0x0, 0x0);
        gbc.writeMem(0x8341, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x66aa, gbc.sp());
        EXPECT(0x8343, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8341));
        EXPECT(0x6b, gbc.readMem(0x8342));
        // CB 6B 01DD
        gbc.setState(0x191f, 0x9c37, 0x26f0, 0xa210, 0x22, 0x8516, 0x1, 0x0);
        gbc.writeMem(0x191f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x9c37, gbc.sp());
        EXPECT(0x1921, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 01DE
        gbc.setState(0x884c, 0xbf3, 0x1d80, 0x102a, 0xa34, 0x9010, 0x1, 0x1);
        gbc.writeMem(0x884c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xbf3, gbc.sp());
        EXPECT(0x884e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x884c));
        EXPECT(0x6b, gbc.readMem(0x884d));
        // CB 6B 01E0
        gbc.setState(0x3fec, 0x1894, 0xfea0, 0xe30d, 0xc47, 0xc70e, 0x0, 0x0);
        gbc.writeMem(0x3fec, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x1894, gbc.sp());
        EXPECT(0x3fee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01E1
        gbc.setState(0xe92b, 0xeacc, 0x4b00, 0xd196, 0x3301, 0xbbaf, 0x1, 0x0);
        gbc.writeMem(0xe92b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xeacc, gbc.sp());
        EXPECT(0xe92d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe92b));
        EXPECT(0x6b, gbc.readMem(0xe92c));
        // CB 6B 01E2
        gbc.setState(0x4160, 0xde89, 0x2430, 0x6a21, 0x249d, 0x3654, 0x0, 0x1);
        gbc.writeMem(0x4160, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xde89, gbc.sp());
        EXPECT(0x4162, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 01E3
        gbc.setState(0x3512, 0x5d6d, 0x3990, 0xaa3d, 0x32ae, 0xf831, 0x0, 0x0);
        gbc.writeMem(0x3512, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x5d6d, gbc.sp());
        EXPECT(0x3514, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 01E4
        gbc.setState(0x80aa, 0x5430, 0x630, 0xb992, 0x5f31, 0x6569, 0x0, 0x0);
        gbc.writeMem(0x80aa, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x5430, gbc.sp());
        EXPECT(0x80ac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80aa));
        EXPECT(0x6b, gbc.readMem(0x80ab));
        // CB 6B 01E5
        gbc.setState(0xc088, 0xec23, 0x4930, 0x8a0a, 0x1feb, 0xf425, 0x0, 0x1);
        gbc.writeMem(0xc088, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xec23, gbc.sp());
        EXPECT(0xc08a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc088));
        EXPECT(0x6b, gbc.readMem(0xc089));
        // CB 6B 01E6
        gbc.setState(0x4988, 0xca2, 0x5f70, 0x216d, 0x9a58, 0xf5f2, 0x1, 0x1);
        gbc.writeMem(0x4988, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xca2, gbc.sp());
        EXPECT(0x498a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 01E7
        gbc.setState(0x7aa3, 0x84df, 0x1a60, 0xee24, 0xa03f, 0xac67, 0x1, 0x1);
        gbc.writeMem(0x7aa3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x84df, gbc.sp());
        EXPECT(0x7aa5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01E8
        gbc.setState(0xdb08, 0xec20, 0xde40, 0xae98, 0x1afb, 0x5387, 0x1, 0x1);
        gbc.writeMem(0xdb08, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xec20, gbc.sp());
        EXPECT(0xdb0a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb08));
        EXPECT(0x6b, gbc.readMem(0xdb09));
        // CB 6B 01E9
        gbc.setState(0x430a, 0x3783, 0xeae0, 0xf086, 0x264b, 0xa18c, 0x0, 0x0);
        gbc.writeMem(0x430a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x3783, gbc.sp());
        EXPECT(0x430c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01EA
        gbc.setState(0xce10, 0x2e95, 0xbd50, 0xab00, 0xef47, 0x8da8, 0x1, 0x1);
        gbc.writeMem(0xce10, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x2e95, gbc.sp());
        EXPECT(0xce12, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce10));
        EXPECT(0x6b, gbc.readMem(0xce11));
        // CB 6B 01EB
        gbc.setState(0x842f, 0xacda, 0x1770, 0x13fe, 0x90c9, 0x5282, 0x0, 0x0);
        gbc.writeMem(0x842f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xacda, gbc.sp());
        EXPECT(0x8431, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x842f));
        EXPECT(0x6b, gbc.readMem(0x8430));
        // CB 6B 01EC
        gbc.setState(0x77dd, 0x1d42, 0x1f20, 0x6d92, 0xde30, 0x29a6, 0x0, 0x1);
        gbc.writeMem(0x77dd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x1d42, gbc.sp());
        EXPECT(0x77df, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01ED
        gbc.setState(0x4386, 0xc8b6, 0x9ac0, 0x8f64, 0x6637, 0x7a6d, 0x1, 0x1);
        gbc.writeMem(0x4386, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xc8b6, gbc.sp());
        EXPECT(0x4388, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01EE
        gbc.setState(0x6ced, 0x33e9, 0xc460, 0x8f92, 0x2316, 0xe3de, 0x0, 0x1);
        gbc.writeMem(0x6ced, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x33e9, gbc.sp());
        EXPECT(0x6cef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01EF
        gbc.setState(0x574b, 0xd673, 0x5b00, 0x8ace, 0x52b8, 0xde91, 0x1, 0x0);
        gbc.writeMem(0x574b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xd673, gbc.sp());
        EXPECT(0x574d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01F1
        gbc.setState(0x730b, 0x3618, 0x9060, 0xcb86, 0x7261, 0xe4ee, 0x0, 0x1);
        gbc.writeMem(0x730b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x3618, gbc.sp());
        EXPECT(0x730d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01F2
        gbc.setState(0xec4d, 0x5ba9, 0x4830, 0x14fe, 0xcce0, 0xa963, 0x1, 0x0);
        gbc.writeMem(0xec4d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x5ba9, gbc.sp());
        EXPECT(0xec4f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec4d));
        EXPECT(0x6b, gbc.readMem(0xec4e));
        // CB 6B 01F3
        gbc.setState(0x8e4, 0x81c7, 0xffc0, 0xa911, 0x3414, 0xfe2d, 0x0, 0x0);
        gbc.writeMem(0x8e4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x81c7, gbc.sp());
        EXPECT(0x8e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01F4
        gbc.setState(0xdc1d, 0xdeff, 0x8480, 0xd970, 0x55e4, 0xb948, 0x0, 0x1);
        gbc.writeMem(0xdc1d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xdeff, gbc.sp());
        EXPECT(0xdc1f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc1d));
        EXPECT(0x6b, gbc.readMem(0xdc1e));
        // CB 6B 01F5
        gbc.setState(0x76aa, 0xdcd, 0xe930, 0xbef1, 0x679f, 0xf8de, 0x0, 0x1);
        gbc.writeMem(0x76aa, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xdcd, gbc.sp());
        EXPECT(0x76ac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 01F6
        gbc.setState(0x4504, 0xa8cd, 0xaf90, 0xaa16, 0xd37c, 0x4375, 0x0, 0x1);
        gbc.writeMem(0x4504, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xa8cd, gbc.sp());
        EXPECT(0x4506, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 01F7
        gbc.setState(0x57ff, 0x5343, 0xc480, 0xfff1, 0x7581, 0xf74, 0x0, 0x0);
        gbc.writeMem(0x57ff, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x5343, gbc.sp());
        EXPECT(0x5801, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 01F8
        gbc.setState(0xb88d, 0x9a03, 0xb8f0, 0x1070, 0xc84, 0xecdf, 0x0, 0x0);
        gbc.writeMem(0xb88d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x9a03, gbc.sp());
        EXPECT(0xb88f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb88d));
        EXPECT(0x6b, gbc.readMem(0xb88e));
        // CB 6B 01F9
        gbc.setState(0xd4fa, 0x83ee, 0xda70, 0xc6af, 0x2907, 0xd476, 0x1, 0x0);
        gbc.writeMem(0xd4fa, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x83ee, gbc.sp());
        EXPECT(0xd4fc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd4fa));
        EXPECT(0x6b, gbc.readMem(0xd4fb));
        // CB 6B 01FA
        gbc.setState(0xdc85, 0x3b90, 0xce10, 0xeae5, 0xc117, 0xfbeb, 0x0, 0x1);
        gbc.writeMem(0xdc85, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x3b90, gbc.sp());
        EXPECT(0xdc87, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc85));
        EXPECT(0x6b, gbc.readMem(0xdc86));
        // CB 6B 01FB
        gbc.setState(0xdcb4, 0x9628, 0x7410, 0x62af, 0xfd8c, 0x7fa7, 0x1, 0x0);
        gbc.writeMem(0xdcb4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x9628, gbc.sp());
        EXPECT(0xdcb6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdcb4));
        EXPECT(0x6b, gbc.readMem(0xdcb5));
        // CB 6B 01FC
        gbc.setState(0xa492, 0xce77, 0xb810, 0xd5f1, 0x616, 0x6b3c, 0x0, 0x1);
        gbc.writeMem(0xa492, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xce77, gbc.sp());
        EXPECT(0xa494, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa492));
        EXPECT(0x6b, gbc.readMem(0xa493));
        // CB 6B 01FD
        gbc.setState(0x7e98, 0x570d, 0xfb90, 0x7031, 0x573c, 0x7408, 0x0, 0x1);
        gbc.writeMem(0x7e98, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x570d, gbc.sp());
        EXPECT(0x7e9a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 01FE
        gbc.setState(0x60cc, 0xcc91, 0x2750, 0x63b2, 0xfa2f, 0x5ef6, 0x0, 0x0);
        gbc.writeMem(0x60cc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xcc91, gbc.sp());
        EXPECT(0x60ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 01FF
        gbc.setState(0xa17, 0x1d3d, 0xabf0, 0xfd0e, 0x1158, 0xb1e1, 0x1, 0x1);
        gbc.writeMem(0xa17, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x1d3d, gbc.sp());
        EXPECT(0xa19, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0201
        gbc.setState(0xc34c, 0xcd3, 0x8ec0, 0x3b1d, 0xe914, 0x8104, 0x0, 0x1);
        gbc.writeMem(0xc34c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xcd3, gbc.sp());
        EXPECT(0xc34e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc34c));
        EXPECT(0x6b, gbc.readMem(0xc34d));
        // CB 6B 0202
        gbc.setState(0xe9c1, 0xdafe, 0xa000, 0xb749, 0x39b9, 0x5c2a, 0x0, 0x0);
        gbc.writeMem(0xe9c1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0xdafe, gbc.sp());
        EXPECT(0xe9c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe9c1));
        EXPECT(0x6b, gbc.readMem(0xe9c2));
        // CB 6B 0203
        gbc.setState(0x50ee, 0x80a5, 0x2f70, 0xed8a, 0x2b63, 0xe0d3, 0x0, 0x0);
        gbc.writeMem(0x50ee, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x80a5, gbc.sp());
        EXPECT(0x50f0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0204
        gbc.setState(0x787c, 0xfec0, 0x4620, 0x6439, 0xa85f, 0x736d, 0x1, 0x1);
        gbc.writeMem(0x787c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xfec0, gbc.sp());
        EXPECT(0x787e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0205
        gbc.setState(0xbfa7, 0xdbed, 0x4570, 0xed1, 0xb071, 0x95b0, 0x1, 0x1);
        gbc.writeMem(0xbfa7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xdbed, gbc.sp());
        EXPECT(0xbfa9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbfa7));
        EXPECT(0x6b, gbc.readMem(0xbfa8));
        // CB 6B 0206
        gbc.setState(0x8901, 0xdb7d, 0x48a0, 0xdf0d, 0xb803, 0xe3da, 0x1, 0x0);
        gbc.writeMem(0x8901, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xdb7d, gbc.sp());
        EXPECT(0x8903, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8901));
        EXPECT(0x6b, gbc.readMem(0x8902));
        // CB 6B 0207
        gbc.setState(0xe2af, 0x29d6, 0x99a0, 0x1bc9, 0x6574, 0x6ad9, 0x0, 0x1);
        gbc.writeMem(0xe2af, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x29d6, gbc.sp());
        EXPECT(0xe2b1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe2af));
        EXPECT(0x6b, gbc.readMem(0xe2b0));
        // CB 6B 0208
        gbc.setState(0x8c6b, 0x85c0, 0xa1a0, 0x3ff7, 0xfb4f, 0xbcca, 0x0, 0x0);
        gbc.writeMem(0x8c6b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x85c0, gbc.sp());
        EXPECT(0x8c6d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c6b));
        EXPECT(0x6b, gbc.readMem(0x8c6c));
        // CB 6B 0209
        gbc.setState(0xc968, 0x5f0b, 0xb680, 0x4caf, 0xde99, 0x61dd, 0x1, 0x1);
        gbc.writeMem(0xc968, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x5f0b, gbc.sp());
        EXPECT(0xc96a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc968));
        EXPECT(0x6b, gbc.readMem(0xc969));
        // CB 6B 020A
        gbc.setState(0xd570, 0x6ab0, 0x9650, 0xa262, 0xb30a, 0xc630, 0x1, 0x1);
        gbc.writeMem(0xd570, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x6ab0, gbc.sp());
        EXPECT(0xd572, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd570));
        EXPECT(0x6b, gbc.readMem(0xd571));
        // CB 6B 020B
        gbc.setState(0xc866, 0x494b, 0x3d60, 0xae38, 0xfcdd, 0xf4b1, 0x1, 0x0);
        gbc.writeMem(0xc866, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x494b, gbc.sp());
        EXPECT(0xc868, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc866));
        EXPECT(0x6b, gbc.readMem(0xc867));
        // CB 6B 020C
        gbc.setState(0x5023, 0xfe5a, 0xcf60, 0xc82, 0x1879, 0x165e, 0x0, 0x1);
        gbc.writeMem(0x5023, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xfe5a, gbc.sp());
        EXPECT(0x5025, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 020D
        gbc.setState(0xd02f, 0x280b, 0x9b20, 0x5040, 0x1ea7, 0x4498, 0x0, 0x1);
        gbc.writeMem(0xd02f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x280b, gbc.sp());
        EXPECT(0xd031, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd02f));
        EXPECT(0x6b, gbc.readMem(0xd030));
        // CB 6B 020E
        gbc.setState(0xcf7e, 0xc7ff, 0x2900, 0x7d13, 0xd789, 0x74a2, 0x1, 0x1);
        gbc.writeMem(0xcf7e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xc7ff, gbc.sp());
        EXPECT(0xcf80, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf7e));
        EXPECT(0x6b, gbc.readMem(0xcf7f));
        // CB 6B 020F
        gbc.setState(0x5301, 0xe71, 0xb30, 0xf7e5, 0xf4fe, 0x144a, 0x0, 0x1);
        gbc.writeMem(0x5301, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xe71, gbc.sp());
        EXPECT(0x5303, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0210
        gbc.setState(0x7239, 0xf3c0, 0x4150, 0xccc0, 0xb93b, 0x99aa, 0x0, 0x1);
        gbc.writeMem(0x7239, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xf3c0, gbc.sp());
        EXPECT(0x723b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0211
        gbc.setState(0xdf98, 0xa956, 0x5360, 0x659a, 0x9081, 0x7737, 0x1, 0x0);
        gbc.writeMem(0xdf98, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0xa956, gbc.sp());
        EXPECT(0xdf9a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf98));
        EXPECT(0x6b, gbc.readMem(0xdf99));
        // CB 6B 0212
        gbc.setState(0x78dd, 0x2794, 0x6ef0, 0xc950, 0x7b62, 0x2e47, 0x1, 0x1);
        gbc.writeMem(0x78dd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x2794, gbc.sp());
        EXPECT(0x78df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0213
        gbc.setState(0x24c7, 0xfdf2, 0x1a90, 0xadff, 0x11d3, 0x3719, 0x1, 0x1);
        gbc.writeMem(0x24c7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xfdf2, gbc.sp());
        EXPECT(0x24c9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0215
        gbc.setState(0xcbcf, 0x12b5, 0x830, 0xa297, 0xbd3f, 0x7ed8, 0x1, 0x1);
        gbc.writeMem(0xcbcf, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x12b5, gbc.sp());
        EXPECT(0xcbd1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcbcf));
        EXPECT(0x6b, gbc.readMem(0xcbd0));
        // CB 6B 0216
        gbc.setState(0xc826, 0x9c59, 0xe440, 0x8f8c, 0x8338, 0x6318, 0x0, 0x0);
        gbc.writeMem(0xc826, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x9c59, gbc.sp());
        EXPECT(0xc828, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc826));
        EXPECT(0x6b, gbc.readMem(0xc827));
        // CB 6B 0218
        gbc.setState(0x3a49, 0xf3e9, 0x1460, 0xaed4, 0x5cfd, 0xb621, 0x1, 0x0);
        gbc.writeMem(0x3a49, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xf3e9, gbc.sp());
        EXPECT(0x3a4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0219
        gbc.setState(0x27d5, 0x49bd, 0x4d00, 0x6a33, 0xc96c, 0xe99, 0x1, 0x1);
        gbc.writeMem(0x27d5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x49bd, gbc.sp());
        EXPECT(0x27d7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 021A
        gbc.setState(0xb5a5, 0xecf3, 0x4dc0, 0x52bd, 0xcd79, 0x5ab4, 0x0, 0x1);
        gbc.writeMem(0xb5a5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xecf3, gbc.sp());
        EXPECT(0xb5a7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb5a5));
        EXPECT(0x6b, gbc.readMem(0xb5a6));
        // CB 6B 021B
        gbc.setState(0x984f, 0x7688, 0x20a0, 0xae1a, 0x4a48, 0xbaf6, 0x1, 0x0);
        gbc.writeMem(0x984f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x7688, gbc.sp());
        EXPECT(0x9851, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x984f));
        EXPECT(0x6b, gbc.readMem(0x9850));
        // CB 6B 021C
        gbc.setState(0x9ce6, 0x903, 0x3c10, 0x3b76, 0xdbef, 0x61a2, 0x0, 0x0);
        gbc.writeMem(0x9ce6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x903, gbc.sp());
        EXPECT(0x9ce8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ce6));
        EXPECT(0x6b, gbc.readMem(0x9ce7));
        // CB 6B 021D
        gbc.setState(0x543a, 0xcb58, 0xcec0, 0xa15d, 0xee1b, 0x634a, 0x1, 0x1);
        gbc.writeMem(0x543a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xcb58, gbc.sp());
        EXPECT(0x543c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 021E
        gbc.setState(0xdbcb, 0x8e11, 0x1d50, 0xacd5, 0x5742, 0x45c6, 0x1, 0x0);
        gbc.writeMem(0xdbcb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x8e11, gbc.sp());
        EXPECT(0xdbcd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdbcb));
        EXPECT(0x6b, gbc.readMem(0xdbcc));
        // CB 6B 021F
        gbc.setState(0x1b0, 0xa85e, 0xc7c0, 0xd005, 0x5a56, 0xb2db, 0x0, 0x0);
        gbc.writeMem(0x1b0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xa85e, gbc.sp());
        EXPECT(0x1b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0220
        gbc.setState(0xbd, 0xe9a, 0x38d0, 0x28dc, 0xcf5f, 0x27d0, 0x1, 0x0);
        gbc.writeMem(0xbd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xe9a, gbc.sp());
        EXPECT(0xbf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0221
        gbc.setState(0xc66a, 0xbd8c, 0xe2e0, 0xd7a0, 0x940f, 0xc45, 0x0, 0x0);
        gbc.writeMem(0xc66a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xbd8c, gbc.sp());
        EXPECT(0xc66c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc66a));
        EXPECT(0x6b, gbc.readMem(0xc66b));
        // CB 6B 0222
        gbc.setState(0xda7, 0xe18, 0x3f40, 0xf319, 0x7303, 0xc769, 0x1, 0x0);
        gbc.writeMem(0xda7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xe18, gbc.sp());
        EXPECT(0xda9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0223
        gbc.setState(0x3d85, 0xbf0, 0xfe90, 0xfc95, 0xd40e, 0x60e2, 0x0, 0x1);
        gbc.writeMem(0x3d85, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xbf0, gbc.sp());
        EXPECT(0x3d87, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0224
        gbc.setState(0x8be5, 0x59e1, 0x3530, 0x65fa, 0x44fd, 0x1609, 0x0, 0x0);
        gbc.writeMem(0x8be5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0x59e1, gbc.sp());
        EXPECT(0x8be7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8be5));
        EXPECT(0x6b, gbc.readMem(0x8be6));
        // CB 6B 0225
        gbc.setState(0x8b30, 0x28c, 0xd350, 0xb4d9, 0xeeeb, 0xd090, 0x0, 0x1);
        gbc.writeMem(0x8b30, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x28c, gbc.sp());
        EXPECT(0x8b32, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b30));
        EXPECT(0x6b, gbc.readMem(0x8b31));
        // CB 6B 0226
        gbc.setState(0xe1e0, 0x9a03, 0xd640, 0xfb36, 0x121b, 0x1ee1, 0x0, 0x0);
        gbc.writeMem(0xe1e0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x9a03, gbc.sp());
        EXPECT(0xe1e2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe1e0));
        EXPECT(0x6b, gbc.readMem(0xe1e1));
        // CB 6B 0227
        gbc.setState(0x291a, 0xc22e, 0x78b0, 0x31d1, 0x66bc, 0x2e18, 0x1, 0x0);
        gbc.writeMem(0x291a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xc22e, gbc.sp());
        EXPECT(0x291c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0229
        gbc.setState(0x4125, 0xd7ac, 0x2420, 0xdb8e, 0xf83a, 0xdebd, 0x1, 0x1);
        gbc.writeMem(0x4125, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xd7ac, gbc.sp());
        EXPECT(0x4127, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 022B
        gbc.setState(0x7577, 0x3656, 0xd8a0, 0xed64, 0x10c, 0x2f49, 0x0, 0x0);
        gbc.writeMem(0x7577, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x3656, gbc.sp());
        EXPECT(0x7579, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 022C
        gbc.setState(0x8012, 0x2e63, 0x8910, 0x495c, 0xc9ea, 0x6e4f, 0x0, 0x0);
        gbc.writeMem(0x8012, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x2e63, gbc.sp());
        EXPECT(0x8014, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8012));
        EXPECT(0x6b, gbc.readMem(0x8013));
        // CB 6B 022D
        gbc.setState(0x5b22, 0x4989, 0x7380, 0x6d55, 0x23f2, 0x9f8d, 0x1, 0x1);
        gbc.writeMem(0x5b22, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x4989, gbc.sp());
        EXPECT(0x5b24, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 022E
        gbc.setState(0xbc6f, 0x8ecb, 0xce0, 0xdc60, 0x3670, 0x2137, 0x0, 0x0);
        gbc.writeMem(0xbc6f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x8ecb, gbc.sp());
        EXPECT(0xbc71, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc6f));
        EXPECT(0x6b, gbc.readMem(0xbc70));
        // CB 6B 022F
        gbc.setState(0xa028, 0x91f6, 0x3970, 0x9c65, 0xec30, 0x4798, 0x0, 0x1);
        gbc.writeMem(0xa028, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x91f6, gbc.sp());
        EXPECT(0xa02a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa028));
        EXPECT(0x6b, gbc.readMem(0xa029));
        // CB 6B 0230
        gbc.setState(0xb303, 0x5df2, 0x7ca0, 0x43ee, 0x7de, 0x1116, 0x0, 0x1);
        gbc.writeMem(0xb303, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x5df2, gbc.sp());
        EXPECT(0xb305, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb303));
        EXPECT(0x6b, gbc.readMem(0xb304));
        // CB 6B 0231
        gbc.setState(0xa334, 0x8835, 0x800, 0xbd75, 0xdf8c, 0x8090, 0x0, 0x0);
        gbc.writeMem(0xa334, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x8835, gbc.sp());
        EXPECT(0xa336, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa334));
        EXPECT(0x6b, gbc.readMem(0xa335));
        // CB 6B 0233
        gbc.setState(0x6402, 0xba2, 0xb7d0, 0x1ef1, 0xe5b4, 0x33a4, 0x0, 0x1);
        gbc.writeMem(0x6402, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xba2, gbc.sp());
        EXPECT(0x6404, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0234
        gbc.setState(0x3903, 0x4434, 0x5430, 0x167f, 0x8577, 0xb0ac, 0x1, 0x0);
        gbc.writeMem(0x3903, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x4434, gbc.sp());
        EXPECT(0x3905, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0235
        gbc.setState(0x15c2, 0xfd8b, 0x7040, 0x95f7, 0xadb1, 0x3250, 0x1, 0x0);
        gbc.writeMem(0x15c2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xfd8b, gbc.sp());
        EXPECT(0x15c4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0236
        gbc.setState(0x775e, 0xb805, 0x8f50, 0x80ca, 0x45c, 0x94e6, 0x1, 0x0);
        gbc.writeMem(0x775e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xb805, gbc.sp());
        EXPECT(0x7760, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0237
        gbc.setState(0x3cae, 0x7f4c, 0x90a0, 0xcc3d, 0xc2ee, 0x459b, 0x0, 0x1);
        gbc.writeMem(0x3cae, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x7f4c, gbc.sp());
        EXPECT(0x3cb0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0238
        gbc.setState(0x2537, 0xfccc, 0xf880, 0xbf2, 0x99ce, 0x3d96, 0x1, 0x0);
        gbc.writeMem(0x2537, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xfccc, gbc.sp());
        EXPECT(0x2539, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0239
        gbc.setState(0x1bdb, 0x65d6, 0x3360, 0xbf13, 0x6957, 0xbb4a, 0x1, 0x0);
        gbc.writeMem(0x1bdb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x65d6, gbc.sp());
        EXPECT(0x1bdd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 023A
        gbc.setState(0xca46, 0xdf11, 0x9580, 0x8667, 0x357b, 0x60df, 0x0, 0x1);
        gbc.writeMem(0xca46, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xdf11, gbc.sp());
        EXPECT(0xca48, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xca46));
        EXPECT(0x6b, gbc.readMem(0xca47));
        // CB 6B 023B
        gbc.setState(0xc510, 0x6a4e, 0x4360, 0xa13c, 0x3e36, 0xad2b, 0x0, 0x0);
        gbc.writeMem(0xc510, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x6a4e, gbc.sp());
        EXPECT(0xc512, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc510));
        EXPECT(0x6b, gbc.readMem(0xc511));
        // CB 6B 023D
        gbc.setState(0xd3d4, 0x482b, 0x7500, 0x4870, 0xd9d8, 0xe5fe, 0x1, 0x1);
        gbc.writeMem(0xd3d4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x482b, gbc.sp());
        EXPECT(0xd3d6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3d4));
        EXPECT(0x6b, gbc.readMem(0xd3d5));
        // CB 6B 023E
        gbc.setState(0x4d3d, 0x5246, 0x2bb0, 0x6ac9, 0x73a8, 0x5cd4, 0x0, 0x1);
        gbc.writeMem(0x4d3d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x5246, gbc.sp());
        EXPECT(0x4d3f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 023F
        gbc.setState(0xda0e, 0xd8ad, 0xa490, 0x8f25, 0xb4a0, 0x3f60, 0x1, 0x0);
        gbc.writeMem(0xda0e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0xd8ad, gbc.sp());
        EXPECT(0xda10, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xda0e));
        EXPECT(0x6b, gbc.readMem(0xda0f));
        // CB 6B 0240
        gbc.setState(0xa1a5, 0xfcc9, 0xe350, 0xe43b, 0xccad, 0xa2b1, 0x1, 0x1);
        gbc.writeMem(0xa1a5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xfcc9, gbc.sp());
        EXPECT(0xa1a7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa1a5));
        EXPECT(0x6b, gbc.readMem(0xa1a6));
        // CB 6B 0241
        gbc.setState(0x6cdc, 0xcc7e, 0x1810, 0x7d48, 0x1780, 0xad2c, 0x1, 0x1);
        gbc.writeMem(0x6cdc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xcc7e, gbc.sp());
        EXPECT(0x6cde, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0242
        gbc.setState(0x320, 0x2ca7, 0x9360, 0xad13, 0xe99c, 0x66b0, 0x1, 0x1);
        gbc.writeMem(0x320, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x2ca7, gbc.sp());
        EXPECT(0x322, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0243
        gbc.setState(0xb4a7, 0xffb4, 0x8b10, 0x9f1a, 0xca62, 0x84ee, 0x0, 0x0);
        gbc.writeMem(0xb4a7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xffb4, gbc.sp());
        EXPECT(0xb4a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb4a7));
        EXPECT(0x6b, gbc.readMem(0xb4a8));
        // CB 6B 0244
        gbc.setState(0x8cb, 0xc1ad, 0xe500, 0x3941, 0xda24, 0xc872, 0x1, 0x0);
        gbc.writeMem(0x8cb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xc1ad, gbc.sp());
        EXPECT(0x8cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0245
        gbc.setState(0x6929, 0x4914, 0x95e0, 0xae59, 0xa033, 0x8590, 0x0, 0x0);
        gbc.writeMem(0x6929, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x4914, gbc.sp());
        EXPECT(0x692b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0246
        gbc.setState(0xa56d, 0xf62a, 0xfc0, 0xad69, 0xf708, 0xdbc3, 0x1, 0x1);
        gbc.writeMem(0xa56d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xf62a, gbc.sp());
        EXPECT(0xa56f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa56d));
        EXPECT(0x6b, gbc.readMem(0xa56e));
        // CB 6B 0248
        gbc.setState(0x62fe, 0x1bd8, 0x6960, 0x943b, 0x8235, 0x9d7e, 0x1, 0x0);
        gbc.writeMem(0x62fe, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x1bd8, gbc.sp());
        EXPECT(0x6300, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0249
        gbc.setState(0x8bcc, 0x9334, 0x3d60, 0x9a9b, 0xb026, 0xdd81, 0x0, 0x1);
        gbc.writeMem(0x8bcc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x9334, gbc.sp());
        EXPECT(0x8bce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8bcc));
        EXPECT(0x6b, gbc.readMem(0x8bcd));
        // CB 6B 024A
        gbc.setState(0x8dd7, 0xbb68, 0xaf30, 0x4a60, 0xe920, 0xcb2f, 0x1, 0x0);
        gbc.writeMem(0x8dd7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xbb68, gbc.sp());
        EXPECT(0x8dd9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8dd7));
        EXPECT(0x6b, gbc.readMem(0x8dd8));
        // CB 6B 024B
        gbc.setState(0x533b, 0x74ef, 0xf340, 0x3761, 0x28e2, 0x79d9, 0x0, 0x1);
        gbc.writeMem(0x533b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x74ef, gbc.sp());
        EXPECT(0x533d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 024C
        gbc.setState(0xab31, 0xd54e, 0xf1a0, 0xb0a7, 0xd865, 0xc44, 0x0, 0x1);
        gbc.writeMem(0xab31, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xd54e, gbc.sp());
        EXPECT(0xab33, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab31));
        EXPECT(0x6b, gbc.readMem(0xab32));
        // CB 6B 024D
        gbc.setState(0xb1eb, 0x5efc, 0x8510, 0x2ff7, 0xf6ff, 0x78a4, 0x0, 0x0);
        gbc.writeMem(0xb1eb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x5efc, gbc.sp());
        EXPECT(0xb1ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb1eb));
        EXPECT(0x6b, gbc.readMem(0xb1ec));
        // CB 6B 024E
        gbc.setState(0x8c3a, 0x9354, 0xc430, 0x8228, 0x6e88, 0x2152, 0x0, 0x0);
        gbc.writeMem(0x8c3a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x9354, gbc.sp());
        EXPECT(0x8c3c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c3a));
        EXPECT(0x6b, gbc.readMem(0x8c3b));
        // CB 6B 0252
        gbc.setState(0x6011, 0x5ef0, 0x260, 0xda5b, 0x82bd, 0x1818, 0x0, 0x0);
        gbc.writeMem(0x6011, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x5ef0, gbc.sp());
        EXPECT(0x6013, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0253
        gbc.setState(0xf2a, 0x8c92, 0x56d0, 0x76d1, 0x4a4, 0x2a06, 0x0, 0x1);
        gbc.writeMem(0xf2a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x8c92, gbc.sp());
        EXPECT(0xf2c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0254
        gbc.setState(0xee4a, 0xb2a0, 0x9bb0, 0x4a8e, 0x52be, 0x4591, 0x1, 0x1);
        gbc.writeMem(0xee4a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xb2a0, gbc.sp());
        EXPECT(0xee4c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee4a));
        EXPECT(0x6b, gbc.readMem(0xee4b));
        // CB 6B 0255
        gbc.setState(0x7b9e, 0x3834, 0xac10, 0x1590, 0xcdc5, 0x2b, 0x0, 0x1);
        gbc.writeMem(0x7b9e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x3834, gbc.sp());
        EXPECT(0x7ba0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0256
        gbc.setState(0xa71e, 0x9fb6, 0x84c0, 0x8df8, 0xee64, 0x6d6a, 0x1, 0x0);
        gbc.writeMem(0xa71e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0x9fb6, gbc.sp());
        EXPECT(0xa720, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa71e));
        EXPECT(0x6b, gbc.readMem(0xa71f));
        // CB 6B 0257
        gbc.setState(0x2a1e, 0x5efd, 0xd560, 0xeb77, 0x7a6, 0x7c1, 0x1, 0x0);
        gbc.writeMem(0x2a1e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x5efd, gbc.sp());
        EXPECT(0x2a20, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0258
        gbc.setState(0xc016, 0x80a9, 0xb450, 0x3206, 0xb7ff, 0xe074, 0x0, 0x1);
        gbc.writeMem(0xc016, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x80a9, gbc.sp());
        EXPECT(0xc018, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc016));
        EXPECT(0x6b, gbc.readMem(0xc017));
        // CB 6B 0259
        gbc.setState(0x361, 0x35dd, 0xeee0, 0x1037, 0xc7cf, 0x6503, 0x1, 0x1);
        gbc.writeMem(0x361, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x35dd, gbc.sp());
        EXPECT(0x363, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 025A
        gbc.setState(0x7c0a, 0xf4c, 0x46b0, 0xcdac, 0x7663, 0x532e, 0x1, 0x0);
        gbc.writeMem(0x7c0a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xf4c, gbc.sp());
        EXPECT(0x7c0c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 025B
        gbc.setState(0x4383, 0xff88, 0xf330, 0xf8d0, 0x41b2, 0x940, 0x1, 0x1);
        gbc.writeMem(0x4383, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0xff88, gbc.sp());
        EXPECT(0x4385, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 025C
        gbc.setState(0x7895, 0xde96, 0x4720, 0x22c3, 0x4313, 0xcfb6, 0x1, 0x0);
        gbc.writeMem(0x7895, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xde96, gbc.sp());
        EXPECT(0x7897, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 025D
        gbc.setState(0xa6d7, 0x430b, 0x58e0, 0x7b4f, 0xbfd7, 0xf38a, 0x1, 0x1);
        gbc.writeMem(0xa6d7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x430b, gbc.sp());
        EXPECT(0xa6d9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6d7));
        EXPECT(0x6b, gbc.readMem(0xa6d8));
        // CB 6B 025E
        gbc.setState(0xc10a, 0xcacc, 0xefb0, 0xa502, 0xb14c, 0x43c2, 0x0, 0x1);
        gbc.writeMem(0xc10a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xcacc, gbc.sp());
        EXPECT(0xc10c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc10a));
        EXPECT(0x6b, gbc.readMem(0xc10b));
        // CB 6B 0260
        gbc.setState(0xfe0, 0x6c71, 0x7630, 0x77fe, 0xe802, 0xb6e, 0x0, 0x0);
        gbc.writeMem(0xfe0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x6c71, gbc.sp());
        EXPECT(0xfe2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0261
        gbc.setState(0x9ccb, 0xdea1, 0xd630, 0xb121, 0xaade, 0x18a, 0x0, 0x0);
        gbc.writeMem(0x9ccb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0xdea1, gbc.sp());
        EXPECT(0x9ccd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ccb));
        EXPECT(0x6b, gbc.readMem(0x9ccc));
        // CB 6B 0262
        gbc.setState(0xb2a, 0x733b, 0x1320, 0x202e, 0x1c44, 0xb878, 0x0, 0x1);
        gbc.writeMem(0xb2a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x733b, gbc.sp());
        EXPECT(0xb2c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0263
        gbc.setState(0x10a2, 0x532f, 0xf4f0, 0xb8f0, 0xf0ca, 0xba68, 0x0, 0x0);
        gbc.writeMem(0x10a2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x532f, gbc.sp());
        EXPECT(0x10a4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0264
        gbc.setState(0xb83d, 0x65d9, 0xd440, 0xb34d, 0xaddc, 0x5a7d, 0x1, 0x1);
        gbc.writeMem(0xb83d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x65d9, gbc.sp());
        EXPECT(0xb83f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb83d));
        EXPECT(0x6b, gbc.readMem(0xb83e));
        // CB 6B 0265
        gbc.setState(0x5c4, 0x5346, 0xbdf0, 0xa741, 0x439d, 0xd8cc, 0x1, 0x0);
        gbc.writeMem(0x5c4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x5346, gbc.sp());
        EXPECT(0x5c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0266
        gbc.setState(0x79e3, 0x3e73, 0xf6d0, 0xbf42, 0x4f08, 0x9b6c, 0x0, 0x0);
        gbc.writeMem(0x79e3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x3e73, gbc.sp());
        EXPECT(0x79e5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0267
        gbc.setState(0x7f21, 0xab7e, 0x7050, 0x2509, 0xe763, 0x662e, 0x0, 0x0);
        gbc.writeMem(0x7f21, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xab7e, gbc.sp());
        EXPECT(0x7f23, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0268
        gbc.setState(0x6f27, 0x7da, 0x2d50, 0xcc, 0xf33a, 0xae71, 0x1, 0x1);
        gbc.writeMem(0x6f27, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x7da, gbc.sp());
        EXPECT(0x6f29, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0269
        gbc.setState(0x77c7, 0x3746, 0x430, 0x8c35, 0x940e, 0x4c7, 0x0, 0x1);
        gbc.writeMem(0x77c7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x3746, gbc.sp());
        EXPECT(0x77c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 026A
        gbc.setState(0xd33a, 0xfd55, 0x5380, 0xdfff, 0xc825, 0xe59, 0x0, 0x0);
        gbc.writeMem(0xd33a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xfd55, gbc.sp());
        EXPECT(0xd33c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd33a));
        EXPECT(0x6b, gbc.readMem(0xd33b));
        // CB 6B 026B
        gbc.setState(0x3b10, 0xf838, 0xa2c0, 0x2216, 0xd620, 0xf7d2, 0x0, 0x1);
        gbc.writeMem(0x3b10, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xf838, gbc.sp());
        EXPECT(0x3b12, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 026D
        gbc.setState(0x29f7, 0x269a, 0x1180, 0xc3f3, 0x8f4a, 0x4558, 0x1, 0x1);
        gbc.writeMem(0x29f7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x269a, gbc.sp());
        EXPECT(0x29f9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 026E
        gbc.setState(0x7529, 0x5b49, 0x2450, 0xf088, 0x9a92, 0xaeb1, 0x1, 0x1);
        gbc.writeMem(0x7529, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x5b49, gbc.sp());
        EXPECT(0x752b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 026F
        gbc.setState(0x91bb, 0x67f5, 0xdfa0, 0xf12a, 0x22ec, 0xbb11, 0x1, 0x1);
        gbc.writeMem(0x91bb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x67f5, gbc.sp());
        EXPECT(0x91bd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x91bb));
        EXPECT(0x6b, gbc.readMem(0x91bc));
        // CB 6B 0270
        gbc.setState(0x8033, 0x5d57, 0x1730, 0xeac5, 0x14f1, 0xaa51, 0x1, 0x1);
        gbc.writeMem(0x8033, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x5d57, gbc.sp());
        EXPECT(0x8035, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8033));
        EXPECT(0x6b, gbc.readMem(0x8034));
        // CB 6B 0271
        gbc.setState(0x19c3, 0x1322, 0x9f0, 0xeec2, 0x2ebb, 0x2694, 0x0, 0x1);
        gbc.writeMem(0x19c3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x1322, gbc.sp());
        EXPECT(0x19c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0272
        gbc.setState(0x7f33, 0x5eb2, 0xbda0, 0x229d, 0xf4a5, 0x95b3, 0x1, 0x0);
        gbc.writeMem(0x7f33, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x5eb2, gbc.sp());
        EXPECT(0x7f35, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0273
        gbc.setState(0x264, 0x456f, 0xeac0, 0x20c, 0x192e, 0xe983, 0x1, 0x0);
        gbc.writeMem(0x264, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x456f, gbc.sp());
        EXPECT(0x266, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0275
        gbc.setState(0xb5e7, 0x41a1, 0xdd70, 0x4748, 0xeeac, 0x8e00, 0x0, 0x0);
        gbc.writeMem(0xb5e7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x41a1, gbc.sp());
        EXPECT(0xb5e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb5e7));
        EXPECT(0x6b, gbc.readMem(0xb5e8));
        // CB 6B 0276
        gbc.setState(0x8269, 0x77e0, 0x2080, 0xfe49, 0xe0c5, 0x6955, 0x0, 0x0);
        gbc.writeMem(0x8269, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x77e0, gbc.sp());
        EXPECT(0x826b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8269));
        EXPECT(0x6b, gbc.readMem(0x826a));
        // CB 6B 0277
        gbc.setState(0x31e3, 0xd84b, 0xfb30, 0x2aad, 0x70b5, 0x96bc, 0x0, 0x1);
        gbc.writeMem(0x31e3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0xd84b, gbc.sp());
        EXPECT(0x31e5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0278
        gbc.setState(0x43ba, 0xdb84, 0xa450, 0x779, 0x9073, 0x13ac, 0x0, 0x1);
        gbc.writeMem(0x43ba, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xdb84, gbc.sp());
        EXPECT(0x43bc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0279
        gbc.setState(0x91a, 0x9f71, 0xbc0, 0x78eb, 0x1b5e, 0xcb7, 0x1, 0x1);
        gbc.writeMem(0x91a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x9f71, gbc.sp());
        EXPECT(0x91c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 027A
        gbc.setState(0x38aa, 0xbbcf, 0x2480, 0x824e, 0x8537, 0x7d35, 0x1, 0x0);
        gbc.writeMem(0x38aa, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xbbcf, gbc.sp());
        EXPECT(0x38ac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 027B
        gbc.setState(0xe341, 0xe76f, 0x6010, 0x5719, 0x9fd, 0xbb26, 0x1, 0x0);
        gbc.writeMem(0xe341, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xe76f, gbc.sp());
        EXPECT(0xe343, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe341));
        EXPECT(0x6b, gbc.readMem(0xe342));
        // CB 6B 027C
        gbc.setState(0x8a8d, 0x90a7, 0x66f0, 0x541c, 0xea82, 0xe57d, 0x0, 0x1);
        gbc.writeMem(0x8a8d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x90a7, gbc.sp());
        EXPECT(0x8a8f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a8d));
        EXPECT(0x6b, gbc.readMem(0x8a8e));
        // CB 6B 027D
        gbc.setState(0xbfbb, 0x754b, 0xc4b0, 0xeeaf, 0x832, 0x78f3, 0x0, 0x1);
        gbc.writeMem(0xbfbb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x754b, gbc.sp());
        EXPECT(0xbfbd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbfbb));
        EXPECT(0x6b, gbc.readMem(0xbfbc));
        // CB 6B 027E
        gbc.setState(0x192a, 0x7482, 0x2640, 0x115d, 0x404c, 0x3906, 0x1, 0x1);
        gbc.writeMem(0x192a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x7482, gbc.sp());
        EXPECT(0x192c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 027F
        gbc.setState(0xbeeb, 0xf337, 0xd000, 0x1dda, 0xaee, 0x9349, 0x0, 0x1);
        gbc.writeMem(0xbeeb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xf337, gbc.sp());
        EXPECT(0xbeed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbeeb));
        EXPECT(0x6b, gbc.readMem(0xbeec));
        // CB 6B 0280
        gbc.setState(0x9710, 0x3492, 0xb090, 0xd231, 0x8ae0, 0x856d, 0x1, 0x0);
        gbc.writeMem(0x9710, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x3492, gbc.sp());
        EXPECT(0x9712, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9710));
        EXPECT(0x6b, gbc.readMem(0x9711));
        // CB 6B 0281
        gbc.setState(0xc744, 0xa32b, 0x5a90, 0x5095, 0x6432, 0x7116, 0x1, 0x0);
        gbc.writeMem(0xc744, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0xa32b, gbc.sp());
        EXPECT(0xc746, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc744));
        EXPECT(0x6b, gbc.readMem(0xc745));
        // CB 6B 0282
        gbc.setState(0x8049, 0x1656, 0x7480, 0x65b5, 0x6243, 0x3f33, 0x1, 0x0);
        gbc.writeMem(0x8049, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x1656, gbc.sp());
        EXPECT(0x804b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8049));
        EXPECT(0x6b, gbc.readMem(0x804a));
        // CB 6B 0283
        gbc.setState(0xe704, 0x5aa9, 0xbaa0, 0xca0b, 0xedd5, 0x8347, 0x0, 0x0);
        gbc.writeMem(0xe704, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x5aa9, gbc.sp());
        EXPECT(0xe706, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe704));
        EXPECT(0x6b, gbc.readMem(0xe705));
        // CB 6B 0284
        gbc.setState(0xeaf1, 0x2c71, 0xa590, 0xc418, 0x88e0, 0xba05, 0x0, 0x1);
        gbc.writeMem(0xeaf1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x2c71, gbc.sp());
        EXPECT(0xeaf3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeaf1));
        EXPECT(0x6b, gbc.readMem(0xeaf2));
        // CB 6B 0285
        gbc.setState(0x1843, 0x94db, 0xda90, 0xbca1, 0x4cdc, 0x5fff, 0x0, 0x0);
        gbc.writeMem(0x1843, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x94db, gbc.sp());
        EXPECT(0x1845, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0286
        gbc.setState(0x521a, 0xbdbd, 0x4660, 0xd634, 0xce5c, 0x23fa, 0x0, 0x1);
        gbc.writeMem(0x521a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xbdbd, gbc.sp());
        EXPECT(0x521c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0287
        gbc.setState(0x58a6, 0xc6b7, 0x820, 0x3dec, 0x504b, 0x47f, 0x1, 0x1);
        gbc.writeMem(0x58a6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xc6b7, gbc.sp());
        EXPECT(0x58a8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0288
        gbc.setState(0x2f1a, 0x8dc7, 0x2f70, 0xacfc, 0x2204, 0x3da3, 0x0, 0x1);
        gbc.writeMem(0x2f1a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x8dc7, gbc.sp());
        EXPECT(0x2f1c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0289
        gbc.setState(0x8461, 0x5b4b, 0xe3f0, 0x1fbf, 0x910a, 0xa20f, 0x1, 0x1);
        gbc.writeMem(0x8461, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x5b4b, gbc.sp());
        EXPECT(0x8463, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8461));
        EXPECT(0x6b, gbc.readMem(0x8462));
        // CB 6B 028A
        gbc.setState(0x18c6, 0x61ef, 0x17e0, 0x58d1, 0x5f2a, 0x7bce, 0x0, 0x1);
        gbc.writeMem(0x18c6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x61ef, gbc.sp());
        EXPECT(0x18c8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 028B
        gbc.setState(0xddcc, 0xfc88, 0xa6a0, 0x68ed, 0x4bb1, 0xbdc1, 0x1, 0x1);
        gbc.writeMem(0xddcc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xfc88, gbc.sp());
        EXPECT(0xddce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xddcc));
        EXPECT(0x6b, gbc.readMem(0xddcd));
        // CB 6B 028C
        gbc.setState(0xbdc9, 0x6ed0, 0x2460, 0x6e85, 0x4e28, 0x2456, 0x1, 0x0);
        gbc.writeMem(0xbdc9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x6ed0, gbc.sp());
        EXPECT(0xbdcb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbdc9));
        EXPECT(0x6b, gbc.readMem(0xbdca));
        // CB 6B 028D
        gbc.setState(0x5b03, 0xf6a0, 0x8330, 0x2729, 0x9ff6, 0x14c, 0x1, 0x1);
        gbc.writeMem(0x5b03, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xf6a0, gbc.sp());
        EXPECT(0x5b05, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 028E
        gbc.setState(0xbd06, 0x4863, 0xcaa0, 0xd659, 0x99cf, 0xfe78, 0x0, 0x1);
        gbc.writeMem(0xbd06, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x4863, gbc.sp());
        EXPECT(0xbd08, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd06));
        EXPECT(0x6b, gbc.readMem(0xbd07));
        // CB 6B 028F
        gbc.setState(0x5afe, 0x592a, 0xf220, 0x651d, 0x5c1b, 0x1d9d, 0x1, 0x1);
        gbc.writeMem(0x5afe, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x592a, gbc.sp());
        EXPECT(0x5b00, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0290
        gbc.setState(0x4bf6, 0xa83c, 0x4920, 0x6a1f, 0x1942, 0x5c75, 0x0, 0x0);
        gbc.writeMem(0x4bf6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xa83c, gbc.sp());
        EXPECT(0x4bf8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0291
        gbc.setState(0x4bcf, 0x2d33, 0xeb00, 0x8b73, 0xb2e9, 0x6a0b, 0x0, 0x0);
        gbc.writeMem(0x4bcf, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x2d33, gbc.sp());
        EXPECT(0x4bd1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0292
        gbc.setState(0x997c, 0x26b6, 0x9b70, 0xf052, 0x72da, 0x27e4, 0x0, 0x0);
        gbc.writeMem(0x997c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x26b6, gbc.sp());
        EXPECT(0x997e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x997c));
        EXPECT(0x6b, gbc.readMem(0x997d));
        // CB 6B 0293
        gbc.setState(0xdb5, 0xb58c, 0x9f80, 0x5230, 0x48a, 0x4e2e, 0x0, 0x0);
        gbc.writeMem(0xdb5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xb58c, gbc.sp());
        EXPECT(0xdb7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0294
        gbc.setState(0xb324, 0x31e7, 0x7c20, 0xf1ac, 0x5e4e, 0x7668, 0x1, 0x0);
        gbc.writeMem(0xb324, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x31e7, gbc.sp());
        EXPECT(0xb326, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb324));
        EXPECT(0x6b, gbc.readMem(0xb325));
        // CB 6B 0295
        gbc.setState(0xb62d, 0x2035, 0x1460, 0xae5e, 0x5445, 0x538d, 0x1, 0x0);
        gbc.writeMem(0xb62d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x2035, gbc.sp());
        EXPECT(0xb62f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb62d));
        EXPECT(0x6b, gbc.readMem(0xb62e));
        // CB 6B 0296
        gbc.setState(0xc6b5, 0xaf4c, 0x7ed0, 0xe55, 0xd976, 0x9568, 0x0, 0x0);
        gbc.writeMem(0xc6b5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0xaf4c, gbc.sp());
        EXPECT(0xc6b7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc6b5));
        EXPECT(0x6b, gbc.readMem(0xc6b6));
        // CB 6B 0297
        gbc.setState(0x245b, 0xfa18, 0xde80, 0x969b, 0x49c6, 0x7a8a, 0x1, 0x0);
        gbc.writeMem(0x245b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0xfa18, gbc.sp());
        EXPECT(0x245d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0298
        gbc.setState(0x7267, 0x4d06, 0xb380, 0x64c2, 0x9e4a, 0x52f, 0x1, 0x0);
        gbc.writeMem(0x7267, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x4d06, gbc.sp());
        EXPECT(0x7269, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0299
        gbc.setState(0x80bb, 0x9bea, 0xc1f0, 0x856b, 0x6a02, 0x967, 0x1, 0x0);
        gbc.writeMem(0x80bb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x9bea, gbc.sp());
        EXPECT(0x80bd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x80bb));
        EXPECT(0x6b, gbc.readMem(0x80bc));
        // CB 6B 029A
        gbc.setState(0x3134, 0x6f9b, 0xc200, 0xbfef, 0xfa9f, 0xcb70, 0x0, 0x0);
        gbc.writeMem(0x3134, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x6f9b, gbc.sp());
        EXPECT(0x3136, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 029B
        gbc.setState(0x6a9, 0x109e, 0xf2f0, 0xf665, 0x95f4, 0x36f8, 0x1, 0x0);
        gbc.writeMem(0x6a9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x109e, gbc.sp());
        EXPECT(0x6ab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 029C
        gbc.setState(0x5fdb, 0x7d92, 0x1510, 0xb760, 0x7ba, 0x75f5, 0x0, 0x0);
        gbc.writeMem(0x5fdb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x7d92, gbc.sp());
        EXPECT(0x5fdd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 029D
        gbc.setState(0x99b1, 0x93ae, 0xa210, 0xdfc0, 0x5b63, 0x3c90, 0x1, 0x1);
        gbc.writeMem(0x99b1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x93ae, gbc.sp());
        EXPECT(0x99b3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x99b1));
        EXPECT(0x6b, gbc.readMem(0x99b2));
        // CB 6B 029E
        gbc.setState(0xcf0, 0x337d, 0xb540, 0xeae6, 0x63fe, 0xbe9c, 0x0, 0x0);
        gbc.writeMem(0xcf0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x337d, gbc.sp());
        EXPECT(0xcf2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 029F
        gbc.setState(0xcd57, 0x875a, 0xb460, 0x4070, 0xee06, 0xfdbf, 0x0, 0x1);
        gbc.writeMem(0xcd57, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x875a, gbc.sp());
        EXPECT(0xcd59, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd57));
        EXPECT(0x6b, gbc.readMem(0xcd58));
        // CB 6B 02A0
        gbc.setState(0x852c, 0xec0b, 0x5460, 0x8c05, 0x1347, 0x61fc, 0x1, 0x0);
        gbc.writeMem(0x852c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xec0b, gbc.sp());
        EXPECT(0x852e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x852c));
        EXPECT(0x6b, gbc.readMem(0x852d));
        // CB 6B 02A1
        gbc.setState(0xb9c1, 0x2484, 0xff40, 0x16f, 0xec48, 0x10e9, 0x0, 0x1);
        gbc.writeMem(0xb9c1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x2484, gbc.sp());
        EXPECT(0xb9c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb9c1));
        EXPECT(0x6b, gbc.readMem(0xb9c2));
        // CB 6B 02A2
        gbc.setState(0x7036, 0x227f, 0x4b0, 0x2066, 0x4db0, 0x7ba5, 0x1, 0x1);
        gbc.writeMem(0x7036, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x227f, gbc.sp());
        EXPECT(0x7038, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02A3
        gbc.setState(0x917e, 0x7e7e, 0xe4a0, 0x7206, 0xf723, 0x5e3c, 0x1, 0x0);
        gbc.writeMem(0x917e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x7e7e, gbc.sp());
        EXPECT(0x9180, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x917e));
        EXPECT(0x6b, gbc.readMem(0x917f));
        // CB 6B 02A4
        gbc.setState(0xea5c, 0x7a1, 0xe600, 0x2544, 0x527, 0xe1d3, 0x0, 0x0);
        gbc.writeMem(0xea5c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x7a1, gbc.sp());
        EXPECT(0xea5e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xea5c));
        EXPECT(0x6b, gbc.readMem(0xea5d));
        // CB 6B 02A5
        gbc.setState(0xc015, 0x2ee0, 0x1360, 0xadce, 0xd383, 0x5d69, 0x1, 0x1);
        gbc.writeMem(0xc015, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x2ee0, gbc.sp());
        EXPECT(0xc017, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc015));
        EXPECT(0x6b, gbc.readMem(0xc016));
        // CB 6B 02A6
        gbc.setState(0x173a, 0xa8ae, 0xfba0, 0x75d1, 0x566, 0xfbfa, 0x1, 0x1);
        gbc.writeMem(0x173a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xa8ae, gbc.sp());
        EXPECT(0x173c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02A7
        gbc.setState(0x3362, 0x6835, 0x1c50, 0x2014, 0xab36, 0x755e, 0x1, 0x0);
        gbc.writeMem(0x3362, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x6835, gbc.sp());
        EXPECT(0x3364, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02A8
        gbc.setState(0xce10, 0x9f9e, 0xb820, 0x4fb4, 0x44c8, 0xfaf8, 0x1, 0x1);
        gbc.writeMem(0xce10, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x9f9e, gbc.sp());
        EXPECT(0xce12, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce10));
        EXPECT(0x6b, gbc.readMem(0xce11));
        // CB 6B 02A9
        gbc.setState(0x5074, 0x40ce, 0x7e60, 0xf522, 0xbaf5, 0x3cbd, 0x0, 0x1);
        gbc.writeMem(0x5074, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x40ce, gbc.sp());
        EXPECT(0x5076, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02AA
        gbc.setState(0xb2f7, 0x49f6, 0x56f0, 0x88e5, 0x2821, 0x45eb, 0x0, 0x1);
        gbc.writeMem(0xb2f7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x49f6, gbc.sp());
        EXPECT(0xb2f9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb2f7));
        EXPECT(0x6b, gbc.readMem(0xb2f8));
        // CB 6B 02AB
        gbc.setState(0x8a72, 0x86e4, 0xfd00, 0xfbed, 0xb336, 0xa47c, 0x1, 0x0);
        gbc.writeMem(0x8a72, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x86e4, gbc.sp());
        EXPECT(0x8a74, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a72));
        EXPECT(0x6b, gbc.readMem(0x8a73));
        // CB 6B 02AC
        gbc.setState(0x4aaa, 0x615a, 0xf880, 0xd794, 0x38a6, 0xb94a, 0x1, 0x0);
        gbc.writeMem(0x4aaa, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x615a, gbc.sp());
        EXPECT(0x4aac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02AD
        gbc.setState(0xa224, 0x8e1, 0xcef0, 0xafb2, 0xafa8, 0x3b53, 0x0, 0x0);
        gbc.writeMem(0xa224, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x8e1, gbc.sp());
        EXPECT(0xa226, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa224));
        EXPECT(0x6b, gbc.readMem(0xa225));
        // CB 6B 02AE
        gbc.setState(0x613a, 0x7551, 0x8920, 0x8ed1, 0x14cd, 0x4f01, 0x1, 0x0);
        gbc.writeMem(0x613a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x7551, gbc.sp());
        EXPECT(0x613c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02AF
        gbc.setState(0xd42, 0x75c9, 0xcbd0, 0xbad, 0x603a, 0x77a0, 0x0, 0x1);
        gbc.writeMem(0xd42, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x75c9, gbc.sp());
        EXPECT(0xd44, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02B0
        gbc.setState(0x1d8b, 0xcad1, 0x2800, 0x33f9, 0xf97f, 0xbc33, 0x1, 0x1);
        gbc.writeMem(0x1d8b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0xcad1, gbc.sp());
        EXPECT(0x1d8d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02B1
        gbc.setState(0x4ac3, 0x12fb, 0xaa20, 0x623b, 0x39c1, 0x1d16, 0x0, 0x1);
        gbc.writeMem(0x4ac3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x12fb, gbc.sp());
        EXPECT(0x4ac5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02B2
        gbc.setState(0x9b8c, 0xca1, 0x5940, 0xcb56, 0xb5b1, 0xa117, 0x0, 0x0);
        gbc.writeMem(0x9b8c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xca1, gbc.sp());
        EXPECT(0x9b8e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b8c));
        EXPECT(0x6b, gbc.readMem(0x9b8d));
        // CB 6B 02B3
        gbc.setState(0x3711, 0x1210, 0xcb0, 0xbc16, 0x10cc, 0x5615, 0x0, 0x0);
        gbc.writeMem(0x3711, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x1210, gbc.sp());
        EXPECT(0x3713, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02B4
        gbc.setState(0xb3d8, 0x67d9, 0xc640, 0xfbf2, 0x5ad2, 0x1e05, 0x1, 0x0);
        gbc.writeMem(0xb3d8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x67d9, gbc.sp());
        EXPECT(0xb3da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3d8));
        EXPECT(0x6b, gbc.readMem(0xb3d9));
        // CB 6B 02B5
        gbc.setState(0x18ce, 0xfeaa, 0xcbe0, 0xa749, 0x51fa, 0x2ffa, 0x1, 0x0);
        gbc.writeMem(0x18ce, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xfeaa, gbc.sp());
        EXPECT(0x18d0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02B6
        gbc.setState(0x5fc5, 0x6c90, 0x7470, 0x3fc2, 0x9dff, 0x486d, 0x1, 0x0);
        gbc.writeMem(0x5fc5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x6c90, gbc.sp());
        EXPECT(0x5fc7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02B7
        gbc.setState(0x57fc, 0x46e7, 0xca60, 0xcfcd, 0xab5b, 0xc412, 0x0, 0x1);
        gbc.writeMem(0x57fc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x46e7, gbc.sp());
        EXPECT(0x57fe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02B8
        gbc.setState(0x37cb, 0x3aa5, 0x9310, 0xef79, 0x4faa, 0xfa84, 0x1, 0x1);
        gbc.writeMem(0x37cb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x3aa5, gbc.sp());
        EXPECT(0x37cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02B9
        gbc.setState(0xac88, 0x21d9, 0xb410, 0xdb71, 0xcd88, 0x3a33, 0x0, 0x1);
        gbc.writeMem(0xac88, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x21d9, gbc.sp());
        EXPECT(0xac8a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac88));
        EXPECT(0x6b, gbc.readMem(0xac89));
        // CB 6B 02BA
        gbc.setState(0x1b7d, 0xf596, 0xb820, 0xb601, 0xc730, 0x3af2, 0x0, 0x0);
        gbc.writeMem(0x1b7d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xf596, gbc.sp());
        EXPECT(0x1b7f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02BB
        gbc.setState(0x4db4, 0xb926, 0x6b60, 0x696f, 0x346b, 0x2b51, 0x1, 0x1);
        gbc.writeMem(0x4db4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xb926, gbc.sp());
        EXPECT(0x4db6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02BC
        gbc.setState(0x8d1e, 0x389f, 0xd390, 0xc026, 0xe0af, 0xedcc, 0x0, 0x1);
        gbc.writeMem(0x8d1e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x389f, gbc.sp());
        EXPECT(0x8d20, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d1e));
        EXPECT(0x6b, gbc.readMem(0x8d1f));
        // CB 6B 02BD
        gbc.setState(0x5fe4, 0xd5ac, 0x3240, 0x314, 0xb469, 0xdcfe, 0x0, 0x1);
        gbc.writeMem(0x5fe4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xd5ac, gbc.sp());
        EXPECT(0x5fe6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02BE
        gbc.setState(0xaf8f, 0x71f5, 0x2550, 0x309d, 0xa97d, 0xd7e, 0x0, 0x0);
        gbc.writeMem(0xaf8f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x71f5, gbc.sp());
        EXPECT(0xaf91, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaf8f));
        EXPECT(0x6b, gbc.readMem(0xaf90));
        // CB 6B 02BF
        gbc.setState(0x3cf6, 0xaeee, 0xb290, 0x7b23, 0xe7b5, 0xfde9, 0x1, 0x1);
        gbc.writeMem(0x3cf6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xaeee, gbc.sp());
        EXPECT(0x3cf8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02C0
        gbc.setState(0xc89d, 0xf4f3, 0x2450, 0x6e9e, 0xd502, 0x4947, 0x0, 0x1);
        gbc.writeMem(0xc89d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0xf4f3, gbc.sp());
        EXPECT(0xc89f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc89d));
        EXPECT(0x6b, gbc.readMem(0xc89e));
        // CB 6B 02C1
        gbc.setState(0xe7a5, 0x3d7a, 0x6df0, 0x7130, 0x982e, 0x2234, 0x0, 0x1);
        gbc.writeMem(0xe7a5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x3d7a, gbc.sp());
        EXPECT(0xe7a7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe7a5));
        EXPECT(0x6b, gbc.readMem(0xe7a6));
        // CB 6B 02C2
        gbc.setState(0x1e23, 0xada4, 0xd840, 0xc862, 0xa50b, 0x2298, 0x1, 0x0);
        gbc.writeMem(0x1e23, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xada4, gbc.sp());
        EXPECT(0x1e25, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02C3
        gbc.setState(0x40a3, 0x7d66, 0xe980, 0xf8a2, 0xdddc, 0x991d, 0x0, 0x1);
        gbc.writeMem(0x40a3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x7d66, gbc.sp());
        EXPECT(0x40a5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02C4
        gbc.setState(0xc1ea, 0x4457, 0xb190, 0x1144, 0xe516, 0x95c2, 0x1, 0x0);
        gbc.writeMem(0xc1ea, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x4457, gbc.sp());
        EXPECT(0xc1ec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc1ea));
        EXPECT(0x6b, gbc.readMem(0xc1eb));
        // CB 6B 02C5
        gbc.setState(0x1353, 0x594b, 0x7e50, 0x653b, 0x6766, 0x949e, 0x1, 0x0);
        gbc.writeMem(0x1353, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x594b, gbc.sp());
        EXPECT(0x1355, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02C6
        gbc.setState(0x7552, 0x21c7, 0xa990, 0x9cc2, 0xbb05, 0x2c6c, 0x1, 0x1);
        gbc.writeMem(0x7552, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x21c7, gbc.sp());
        EXPECT(0x7554, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02C7
        gbc.setState(0x7576, 0xe207, 0x72b0, 0x3fcf, 0x493e, 0x6562, 0x1, 0x1);
        gbc.writeMem(0x7576, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xe207, gbc.sp());
        EXPECT(0x7578, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02C8
        gbc.setState(0x84e9, 0x4aae, 0x9710, 0xc769, 0x89ee, 0x1292, 0x0, 0x1);
        gbc.writeMem(0x84e9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x4aae, gbc.sp());
        EXPECT(0x84eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84e9));
        EXPECT(0x6b, gbc.readMem(0x84ea));
        // CB 6B 02C9
        gbc.setState(0x2edc, 0x1c08, 0x85f0, 0xe488, 0xcb28, 0xd9c8, 0x0, 0x1);
        gbc.writeMem(0x2edc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x1c08, gbc.sp());
        EXPECT(0x2ede, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02CA
        gbc.setState(0xbc74, 0x9ba3, 0x3d90, 0x228e, 0x5f60, 0xf83f, 0x0, 0x1);
        gbc.writeMem(0xbc74, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x9ba3, gbc.sp());
        EXPECT(0xbc76, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc74));
        EXPECT(0x6b, gbc.readMem(0xbc75));
        // CB 6B 02CB
        gbc.setState(0xee72, 0x4bb3, 0x4e80, 0x4a63, 0x9520, 0x4876, 0x1, 0x0);
        gbc.writeMem(0xee72, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x4bb3, gbc.sp());
        EXPECT(0xee74, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee72));
        EXPECT(0x6b, gbc.readMem(0xee73));
        // CB 6B 02CC
        gbc.setState(0xcb93, 0xc685, 0x2500, 0x12, 0xd866, 0x4bbf, 0x1, 0x1);
        gbc.writeMem(0xcb93, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xc685, gbc.sp());
        EXPECT(0xcb95, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb93));
        EXPECT(0x6b, gbc.readMem(0xcb94));
        // CB 6B 02CD
        gbc.setState(0x2036, 0x5275, 0xb30, 0x35de, 0xeac, 0xaf6c, 0x0, 0x0);
        gbc.writeMem(0x2036, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x5275, gbc.sp());
        EXPECT(0x2038, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02CE
        gbc.setState(0xaca0, 0x802f, 0x5140, 0xe405, 0xedf6, 0x27ff, 0x1, 0x1);
        gbc.writeMem(0xaca0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x802f, gbc.sp());
        EXPECT(0xaca2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaca0));
        EXPECT(0x6b, gbc.readMem(0xaca1));
        // CB 6B 02CF
        gbc.setState(0xd8af, 0xa626, 0xf820, 0x222e, 0x607f, 0x74ae, 0x0, 0x1);
        gbc.writeMem(0xd8af, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xa626, gbc.sp());
        EXPECT(0xd8b1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd8af));
        EXPECT(0x6b, gbc.readMem(0xd8b0));
        // CB 6B 02D0
        gbc.setState(0xb845, 0xd1ca, 0x65e0, 0x7e11, 0xc28d, 0x73fa, 0x1, 0x1);
        gbc.writeMem(0xb845, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xd1ca, gbc.sp());
        EXPECT(0xb847, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb845));
        EXPECT(0x6b, gbc.readMem(0xb846));
        // CB 6B 02D1
        gbc.setState(0xacce, 0xb57c, 0xd870, 0xec4e, 0x6d65, 0xbf3f, 0x1, 0x1);
        gbc.writeMem(0xacce, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xb57c, gbc.sp());
        EXPECT(0xacd0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xacce));
        EXPECT(0x6b, gbc.readMem(0xaccf));
        // CB 6B 02D2
        gbc.setState(0x575, 0x1afc, 0x2930, 0xe4f9, 0x1893, 0xd8c3, 0x0, 0x0);
        gbc.writeMem(0x575, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x1afc, gbc.sp());
        EXPECT(0x577, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02D3
        gbc.setState(0x5355, 0x9ca, 0xd820, 0xd727, 0x2523, 0x32cc, 0x0, 0x1);
        gbc.writeMem(0x5355, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x9ca, gbc.sp());
        EXPECT(0x5357, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02D5
        gbc.setState(0x68c3, 0x8172, 0xc180, 0x6b1e, 0xa4ce, 0x4028, 0x1, 0x0);
        gbc.writeMem(0x68c3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x8172, gbc.sp());
        EXPECT(0x68c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02D6
        gbc.setState(0xde18, 0x9c21, 0x6e70, 0x989f, 0xfbf6, 0xc515, 0x1, 0x0);
        gbc.writeMem(0xde18, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x9c21, gbc.sp());
        EXPECT(0xde1a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde18));
        EXPECT(0x6b, gbc.readMem(0xde19));
        // CB 6B 02D7
        gbc.setState(0xee85, 0x78cc, 0xa540, 0x54d0, 0x2d34, 0xb780, 0x1, 0x1);
        gbc.writeMem(0xee85, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x78cc, gbc.sp());
        EXPECT(0xee87, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee85));
        EXPECT(0x6b, gbc.readMem(0xee86));
        // CB 6B 02D8
        gbc.setState(0x2d52, 0x875a, 0x8130, 0xac77, 0xb88e, 0x5fe2, 0x0, 0x1);
        gbc.writeMem(0x2d52, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x875a, gbc.sp());
        EXPECT(0x2d54, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02D9
        gbc.setState(0xb22, 0x6a81, 0x9c10, 0xc929, 0xf624, 0x246f, 0x0, 0x0);
        gbc.writeMem(0xb22, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x6a81, gbc.sp());
        EXPECT(0xb24, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02DB
        gbc.setState(0x8de4, 0xe08a, 0xb860, 0xa4aa, 0x9823, 0x86a6, 0x1, 0x1);
        gbc.writeMem(0x8de4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xe08a, gbc.sp());
        EXPECT(0x8de6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8de4));
        EXPECT(0x6b, gbc.readMem(0x8de5));
        // CB 6B 02DC
        gbc.setState(0x2870, 0xe112, 0x56c0, 0xa042, 0xc460, 0x1a53, 0x1, 0x1);
        gbc.writeMem(0x2870, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xe112, gbc.sp());
        EXPECT(0x2872, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02DD
        gbc.setState(0x74ac, 0xaa8f, 0xb170, 0x5251, 0xe371, 0x51b9, 0x0, 0x0);
        gbc.writeMem(0x74ac, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xaa8f, gbc.sp());
        EXPECT(0x74ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02DE
        gbc.setState(0x6437, 0x49c9, 0xd0a0, 0x2bbc, 0x11a1, 0xbd04, 0x0, 0x1);
        gbc.writeMem(0x6437, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x49c9, gbc.sp());
        EXPECT(0x6439, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02DF
        gbc.setState(0x7c0e, 0x4c51, 0x4a60, 0x5c34, 0x2bf8, 0xc60b, 0x0, 0x1);
        gbc.writeMem(0x7c0e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x4c51, gbc.sp());
        EXPECT(0x7c10, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02E0
        gbc.setState(0xafe3, 0x298b, 0x78c0, 0xe003, 0xb002, 0x9456, 0x1, 0x0);
        gbc.writeMem(0xafe3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x298b, gbc.sp());
        EXPECT(0xafe5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xafe3));
        EXPECT(0x6b, gbc.readMem(0xafe4));
        // CB 6B 02E1
        gbc.setState(0xb9bf, 0x667b, 0x1860, 0xedd0, 0x2e21, 0x2ce8, 0x1, 0x1);
        gbc.writeMem(0xb9bf, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x667b, gbc.sp());
        EXPECT(0xb9c1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb9bf));
        EXPECT(0x6b, gbc.readMem(0xb9c0));
        // CB 6B 02E2
        gbc.setState(0x3142, 0x70cc, 0xa430, 0xa45e, 0x832e, 0xee7d, 0x1, 0x0);
        gbc.writeMem(0x3142, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x70cc, gbc.sp());
        EXPECT(0x3144, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02E3
        gbc.setState(0xc1ba, 0x4ae4, 0xd20, 0xd6ce, 0x1795, 0xa73, 0x1, 0x1);
        gbc.writeMem(0xc1ba, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x4ae4, gbc.sp());
        EXPECT(0xc1bc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc1ba));
        EXPECT(0x6b, gbc.readMem(0xc1bb));
        // CB 6B 02E4
        gbc.setState(0x5f29, 0xe3cb, 0x5180, 0x3150, 0xc292, 0x6621, 0x0, 0x1);
        gbc.writeMem(0x5f29, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xe3cb, gbc.sp());
        EXPECT(0x5f2b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02E5
        gbc.setState(0xb9de, 0x5954, 0x42c0, 0x1ebd, 0xbb4c, 0x2e63, 0x1, 0x0);
        gbc.writeMem(0xb9de, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x5954, gbc.sp());
        EXPECT(0xb9e0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb9de));
        EXPECT(0x6b, gbc.readMem(0xb9df));
        // CB 6B 02E6
        gbc.setState(0x84d9, 0x314b, 0x1290, 0x8549, 0x94ab, 0x3ee9, 0x1, 0x0);
        gbc.writeMem(0x84d9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x314b, gbc.sp());
        EXPECT(0x84db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84d9));
        EXPECT(0x6b, gbc.readMem(0x84da));
        // CB 6B 02E7
        gbc.setState(0x1d0e, 0x873f, 0x77d0, 0x531c, 0xf132, 0xc452, 0x0, 0x0);
        gbc.writeMem(0x1d0e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x873f, gbc.sp());
        EXPECT(0x1d10, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02E9
        gbc.setState(0xc461, 0x3bfc, 0x1190, 0xc0bb, 0x8ec6, 0xed60, 0x0, 0x0);
        gbc.writeMem(0xc461, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x3bfc, gbc.sp());
        EXPECT(0xc463, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc461));
        EXPECT(0x6b, gbc.readMem(0xc462));
        // CB 6B 02EA
        gbc.setState(0x2852, 0xe38e, 0xad50, 0x429f, 0x7ba0, 0x141c, 0x1, 0x1);
        gbc.writeMem(0x2852, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xe38e, gbc.sp());
        EXPECT(0x2854, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02EC
        gbc.setState(0x3fef, 0xd0f2, 0xe620, 0xf7ec, 0x110, 0xc615, 0x1, 0x0);
        gbc.writeMem(0x3fef, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xd0f2, gbc.sp());
        EXPECT(0x3ff1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02ED
        gbc.setState(0x1cb5, 0x924b, 0x7b70, 0xa229, 0x9667, 0x537f, 0x1, 0x1);
        gbc.writeMem(0x1cb5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x924b, gbc.sp());
        EXPECT(0x1cb7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02EE
        gbc.setState(0x97ea, 0x85e6, 0x7830, 0x2cb7, 0xdf35, 0xde60, 0x1, 0x1);
        gbc.writeMem(0x97ea, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x85e6, gbc.sp());
        EXPECT(0x97ec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x97ea));
        EXPECT(0x6b, gbc.readMem(0x97eb));
        // CB 6B 02EF
        gbc.setState(0x204, 0x73e0, 0x7c90, 0xc87d, 0x5ec4, 0x1d85, 0x1, 0x0);
        gbc.writeMem(0x204, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x73e0, gbc.sp());
        EXPECT(0x206, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02F0
        gbc.setState(0xab42, 0x9359, 0x92b0, 0xbcd2, 0xb865, 0xfa90, 0x1, 0x1);
        gbc.writeMem(0xab42, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x9359, gbc.sp());
        EXPECT(0xab44, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab42));
        EXPECT(0x6b, gbc.readMem(0xab43));
        // CB 6B 02F1
        gbc.setState(0x350e, 0x441f, 0x50f0, 0x7ac7, 0x1672, 0xcbaf, 0x1, 0x0);
        gbc.writeMem(0x350e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x441f, gbc.sp());
        EXPECT(0x3510, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02F2
        gbc.setState(0xa279, 0xa22e, 0xe870, 0x6f35, 0xa4fc, 0x90ea, 0x0, 0x0);
        gbc.writeMem(0xa279, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xa22e, gbc.sp());
        EXPECT(0xa27b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa279));
        EXPECT(0x6b, gbc.readMem(0xa27a));
        // CB 6B 02F3
        gbc.setState(0xccc, 0xb172, 0x8760, 0x6e78, 0xf877, 0xacc5, 0x0, 0x0);
        gbc.writeMem(0xccc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xb172, gbc.sp());
        EXPECT(0xcce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02F4
        gbc.setState(0xd8cf, 0x7469, 0xbe30, 0xe33b, 0xf4dd, 0xbb11, 0x1, 0x1);
        gbc.writeMem(0xd8cf, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x7469, gbc.sp());
        EXPECT(0xd8d1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd8cf));
        EXPECT(0x6b, gbc.readMem(0xd8d0));
        // CB 6B 02F5
        gbc.setState(0xa6b7, 0x68ad, 0x7190, 0x2d8b, 0xf11f, 0x27d0, 0x1, 0x1);
        gbc.writeMem(0xa6b7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x68ad, gbc.sp());
        EXPECT(0xa6b9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6b7));
        EXPECT(0x6b, gbc.readMem(0xa6b8));
        // CB 6B 02F6
        gbc.setState(0x8533, 0x469c, 0x59f0, 0x8f60, 0x6f22, 0x2094, 0x1, 0x0);
        gbc.writeMem(0x8533, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x469c, gbc.sp());
        EXPECT(0x8535, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8533));
        EXPECT(0x6b, gbc.readMem(0x8534));
        // CB 6B 02F8
        gbc.setState(0xa6f8, 0xb5e9, 0x99a0, 0x9e9b, 0xad7b, 0x6039, 0x1, 0x0);
        gbc.writeMem(0xa6f8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xb5e9, gbc.sp());
        EXPECT(0xa6fa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6f8));
        EXPECT(0x6b, gbc.readMem(0xa6f9));
        // CB 6B 02F9
        gbc.setState(0x2b57, 0x3815, 0xf240, 0x32cf, 0x14c8, 0x348e, 0x1, 0x1);
        gbc.writeMem(0x2b57, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x3815, gbc.sp());
        EXPECT(0x2b59, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02FA
        gbc.setState(0x71de, 0x119, 0xf850, 0x607f, 0x480f, 0x27f1, 0x0, 0x1);
        gbc.writeMem(0x71de, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x119, gbc.sp());
        EXPECT(0x71e0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02FB
        gbc.setState(0x5261, 0x4b43, 0xeab0, 0x90dd, 0x9987, 0x7bd8, 0x0, 0x1);
        gbc.writeMem(0x5261, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x4b43, gbc.sp());
        EXPECT(0x5263, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 02FC
        gbc.setState(0x66f7, 0xc68d, 0xc640, 0x8003, 0x6e7a, 0x9db3, 0x1, 0x1);
        gbc.writeMem(0x66f7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xc68d, gbc.sp());
        EXPECT(0x66f9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 02FD
        gbc.setState(0x9ce2, 0xc691, 0x5730, 0x99d5, 0x997f, 0x6f65, 0x0, 0x0);
        gbc.writeMem(0x9ce2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0xc691, gbc.sp());
        EXPECT(0x9ce4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ce2));
        EXPECT(0x6b, gbc.readMem(0x9ce3));
        // CB 6B 02FE
        gbc.setState(0x8245, 0xed0, 0x5ee0, 0x5778, 0xa2d, 0xff7e, 0x0, 0x1);
        gbc.writeMem(0x8245, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0xed0, gbc.sp());
        EXPECT(0x8247, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8245));
        EXPECT(0x6b, gbc.readMem(0x8246));
        // CB 6B 02FF
        gbc.setState(0x5296, 0xf8ed, 0x3230, 0x4110, 0x9ace, 0xc339, 0x1, 0x0);
        gbc.writeMem(0x5296, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xf8ed, gbc.sp());
        EXPECT(0x5298, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0300
        gbc.setState(0xe382, 0xb647, 0xa7d0, 0x99c7, 0x84b4, 0x972e, 0x1, 0x1);
        gbc.writeMem(0xe382, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xb647, gbc.sp());
        EXPECT(0xe384, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe382));
        EXPECT(0x6b, gbc.readMem(0xe383));
        // CB 6B 0301
        gbc.setState(0x1345, 0xc433, 0x73a0, 0x9940, 0x632b, 0x2bcf, 0x1, 0x1);
        gbc.writeMem(0x1345, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xc433, gbc.sp());
        EXPECT(0x1347, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0302
        gbc.setState(0xafc5, 0x207e, 0x99e0, 0x8f7e, 0x8d73, 0xc03a, 0x0, 0x1);
        gbc.writeMem(0xafc5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x207e, gbc.sp());
        EXPECT(0xafc7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xafc5));
        EXPECT(0x6b, gbc.readMem(0xafc6));
        // CB 6B 0303
        gbc.setState(0x626a, 0x8816, 0xd870, 0x4e9c, 0x9f27, 0xceff, 0x1, 0x0);
        gbc.writeMem(0x626a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x8816, gbc.sp());
        EXPECT(0x626c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0304
        gbc.setState(0x7ba0, 0xd6c8, 0x1900, 0x6703, 0x21be, 0xb862, 0x0, 0x0);
        gbc.writeMem(0x7ba0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xd6c8, gbc.sp());
        EXPECT(0x7ba2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0305
        gbc.setState(0x79f8, 0xdd6a, 0x10b0, 0xeec5, 0xdc63, 0xaf98, 0x1, 0x0);
        gbc.writeMem(0x79f8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xdd6a, gbc.sp());
        EXPECT(0x79fa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0306
        gbc.setState(0xe540, 0xac18, 0x6060, 0xd828, 0x9517, 0xe100, 0x0, 0x1);
        gbc.writeMem(0xe540, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xac18, gbc.sp());
        EXPECT(0xe542, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe540));
        EXPECT(0x6b, gbc.readMem(0xe541));
        // CB 6B 0307
        gbc.setState(0xf64, 0x32d8, 0x1450, 0x1d1e, 0x5632, 0x344a, 0x1, 0x1);
        gbc.writeMem(0xf64, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x32d8, gbc.sp());
        EXPECT(0xf66, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0308
        gbc.setState(0x5a09, 0x7b6, 0x23b0, 0x4e04, 0xae01, 0xc57a, 0x0, 0x1);
        gbc.writeMem(0x5a09, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x7b6, gbc.sp());
        EXPECT(0x5a0b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0309
        gbc.setState(0x6749, 0x3d61, 0xf5e0, 0x9fbf, 0xe66, 0x268, 0x1, 0x1);
        gbc.writeMem(0x6749, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x3d61, gbc.sp());
        EXPECT(0x674b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 030A
        gbc.setState(0xa917, 0x9283, 0x8480, 0xde34, 0x65fa, 0x9cbf, 0x0, 0x0);
        gbc.writeMem(0xa917, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x9283, gbc.sp());
        EXPECT(0xa919, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa917));
        EXPECT(0x6b, gbc.readMem(0xa918));
        // CB 6B 030B
        gbc.setState(0x1d37, 0xc166, 0xfe60, 0x6e66, 0xa414, 0x18d3, 0x1, 0x1);
        gbc.writeMem(0x1d37, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0xc166, gbc.sp());
        EXPECT(0x1d39, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 030C
        gbc.setState(0xd9cd, 0xf674, 0x20d0, 0x32ab, 0x3b88, 0x33cc, 0x0, 0x0);
        gbc.writeMem(0xd9cd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xf674, gbc.sp());
        EXPECT(0xd9cf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd9cd));
        EXPECT(0x6b, gbc.readMem(0xd9ce));
        // CB 6B 030D
        gbc.setState(0xdae3, 0x69c8, 0x89a0, 0xc011, 0x8a4a, 0x180c, 0x0, 0x1);
        gbc.writeMem(0xdae3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x69c8, gbc.sp());
        EXPECT(0xdae5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdae3));
        EXPECT(0x6b, gbc.readMem(0xdae4));
        // CB 6B 030E
        gbc.setState(0xa127, 0x2206, 0xf360, 0xaca9, 0xa7ea, 0x8d3a, 0x1, 0x0);
        gbc.writeMem(0xa127, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x2206, gbc.sp());
        EXPECT(0xa129, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa127));
        EXPECT(0x6b, gbc.readMem(0xa128));
        // CB 6B 030F
        gbc.setState(0x7ba3, 0x1602, 0xc7c0, 0x101, 0xce28, 0x9919, 0x1, 0x1);
        gbc.writeMem(0x7ba3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x1602, gbc.sp());
        EXPECT(0x7ba5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0311
        gbc.setState(0x33dc, 0xa979, 0x54d0, 0xadd3, 0x4d3b, 0x6077, 0x0, 0x1);
        gbc.writeMem(0x33dc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xa979, gbc.sp());
        EXPECT(0x33de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0312
        gbc.setState(0xce27, 0x790, 0xe0a0, 0x92a4, 0xda47, 0xa0d2, 0x1, 0x1);
        gbc.writeMem(0xce27, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x790, gbc.sp());
        EXPECT(0xce29, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce27));
        EXPECT(0x6b, gbc.readMem(0xce28));
        // CB 6B 0313
        gbc.setState(0xcc25, 0xe364, 0x9f50, 0x1f1, 0xb95f, 0x5ac1, 0x1, 0x1);
        gbc.writeMem(0xcc25, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xe364, gbc.sp());
        EXPECT(0xcc27, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc25));
        EXPECT(0x6b, gbc.readMem(0xcc26));
        // CB 6B 0314
        gbc.setState(0x4eb0, 0xb7b8, 0xb900, 0x9469, 0x586f, 0x958e, 0x1, 0x0);
        gbc.writeMem(0x4eb0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xb7b8, gbc.sp());
        EXPECT(0x4eb2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0315
        gbc.setState(0x8e56, 0xc996, 0x3d80, 0x9ba5, 0xe14c, 0x8c74, 0x1, 0x1);
        gbc.writeMem(0x8e56, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xc996, gbc.sp());
        EXPECT(0x8e58, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e56));
        EXPECT(0x6b, gbc.readMem(0x8e57));
        // CB 6B 0316
        gbc.setState(0x4715, 0xb9c8, 0x84e0, 0xa993, 0x3da5, 0xe98e, 0x0, 0x0);
        gbc.writeMem(0x4715, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xb9c8, gbc.sp());
        EXPECT(0x4717, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0318
        gbc.setState(0xb85c, 0xffc3, 0xabb0, 0xfb61, 0xca20, 0xfe06, 0x0, 0x1);
        gbc.writeMem(0xb85c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0xffc3, gbc.sp());
        EXPECT(0xb85e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb85c));
        EXPECT(0x6b, gbc.readMem(0xb85d));
        // CB 6B 0319
        gbc.setState(0x20c1, 0x3f49, 0xb550, 0x760b, 0x64af, 0xc3dd, 0x1, 0x1);
        gbc.writeMem(0x20c1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x3f49, gbc.sp());
        EXPECT(0x20c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 031A
        gbc.setState(0x5645, 0xef96, 0x3e60, 0x61e5, 0x1400, 0xa9bb, 0x1, 0x0);
        gbc.writeMem(0x5645, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xef96, gbc.sp());
        EXPECT(0x5647, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 031B
        gbc.setState(0x2e3, 0x3889, 0x4700, 0x956b, 0xe9ab, 0x8abd, 0x0, 0x0);
        gbc.writeMem(0x2e3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x3889, gbc.sp());
        EXPECT(0x2e5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 031C
        gbc.setState(0x685c, 0x3c42, 0xd390, 0xd6f0, 0x50b6, 0x5921, 0x0, 0x0);
        gbc.writeMem(0x685c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x3c42, gbc.sp());
        EXPECT(0x685e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 031D
        gbc.setState(0xa88, 0x8cfb, 0xf3d0, 0x2f51, 0xbcc5, 0x59c9, 0x0, 0x0);
        gbc.writeMem(0xa88, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x8cfb, gbc.sp());
        EXPECT(0xa8a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 031E
        gbc.setState(0x4b6d, 0x99c5, 0x5b80, 0x588b, 0xd098, 0x1b4c, 0x1, 0x0);
        gbc.writeMem(0x4b6d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x99c5, gbc.sp());
        EXPECT(0x4b6f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 031F
        gbc.setState(0xddc3, 0xfc43, 0x7a00, 0x3b15, 0x6cb1, 0x1eee, 0x1, 0x0);
        gbc.writeMem(0xddc3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xfc43, gbc.sp());
        EXPECT(0xddc5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xddc3));
        EXPECT(0x6b, gbc.readMem(0xddc4));
        // CB 6B 0320
        gbc.setState(0x1226, 0x7638, 0x93b0, 0x6d50, 0x974d, 0xa119, 0x0, 0x1);
        gbc.writeMem(0x1226, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x7638, gbc.sp());
        EXPECT(0x1228, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0321
        gbc.setState(0x2497, 0x7c92, 0x8db0, 0x6581, 0x370c, 0x68c2, 0x0, 0x0);
        gbc.writeMem(0x2497, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x7c92, gbc.sp());
        EXPECT(0x2499, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0322
        gbc.setState(0x7f48, 0xf628, 0x85a0, 0xbacf, 0xbae4, 0xdf37, 0x1, 0x0);
        gbc.writeMem(0x7f48, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0xf628, gbc.sp());
        EXPECT(0x7f4a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0323
        gbc.setState(0xd131, 0xf37f, 0xc920, 0x389e, 0x2133, 0xe73d, 0x1, 0x0);
        gbc.writeMem(0xd131, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xf37f, gbc.sp());
        EXPECT(0xd133, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd131));
        EXPECT(0x6b, gbc.readMem(0xd132));
        // CB 6B 0324
        gbc.setState(0x42e2, 0x4627, 0x4c50, 0x3c51, 0x683b, 0xca55, 0x1, 0x1);
        gbc.writeMem(0x42e2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x4627, gbc.sp());
        EXPECT(0x42e4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0325
        gbc.setState(0x2f6d, 0xcd44, 0x3610, 0x316b, 0x8936, 0xcb27, 0x0, 0x0);
        gbc.writeMem(0x2f6d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xcd44, gbc.sp());
        EXPECT(0x2f6f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0326
        gbc.setState(0x5389, 0x66bc, 0xe00, 0x35bb, 0xdb6c, 0x73fc, 0x1, 0x0);
        gbc.writeMem(0x5389, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x66bc, gbc.sp());
        EXPECT(0x538b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0328
        gbc.setState(0x95a0, 0xdcbe, 0x4760, 0x64bf, 0x1c58, 0xe0d8, 0x0, 0x0);
        gbc.writeMem(0x95a0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xdcbe, gbc.sp());
        EXPECT(0x95a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x95a0));
        EXPECT(0x6b, gbc.readMem(0x95a1));
        // CB 6B 0329
        gbc.setState(0xd05a, 0x7d09, 0x40e0, 0x3792, 0x1122, 0x6c1c, 0x0, 0x0);
        gbc.writeMem(0xd05a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x7d09, gbc.sp());
        EXPECT(0xd05c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd05a));
        EXPECT(0x6b, gbc.readMem(0xd05b));
        // CB 6B 032A
        gbc.setState(0xde76, 0x7949, 0xdf00, 0x43fe, 0x9d25, 0xddf8, 0x1, 0x1);
        gbc.writeMem(0xde76, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x7949, gbc.sp());
        EXPECT(0xde78, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde76));
        EXPECT(0x6b, gbc.readMem(0xde77));
        // CB 6B 032B
        gbc.setState(0xb9a3, 0x29a7, 0xc1d0, 0x3d03, 0xe9b1, 0xa4d9, 0x1, 0x0);
        gbc.writeMem(0xb9a3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x29a7, gbc.sp());
        EXPECT(0xb9a5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb9a3));
        EXPECT(0x6b, gbc.readMem(0xb9a4));
        // CB 6B 032C
        gbc.setState(0xeff2, 0xbc95, 0xa300, 0x7c7d, 0x963f, 0xbf23, 0x0, 0x0);
        gbc.writeMem(0xeff2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xbc95, gbc.sp());
        EXPECT(0xeff4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeff2));
        EXPECT(0x6b, gbc.readMem(0xeff3));
        // CB 6B 032D
        gbc.setState(0x318, 0xc512, 0x4da0, 0x9716, 0x7ce5, 0x8a9e, 0x0, 0x1);
        gbc.writeMem(0x318, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xc512, gbc.sp());
        EXPECT(0x31a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 032E
        gbc.setState(0x3b6e, 0x698f, 0xd7d0, 0x6201, 0x1c21, 0x265d, 0x0, 0x0);
        gbc.writeMem(0x3b6e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x698f, gbc.sp());
        EXPECT(0x3b70, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 032F
        gbc.setState(0xdc1b, 0x197d, 0xd780, 0xa108, 0x6a5a, 0xa287, 0x1, 0x1);
        gbc.writeMem(0xdc1b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x197d, gbc.sp());
        EXPECT(0xdc1d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc1b));
        EXPECT(0x6b, gbc.readMem(0xdc1c));
        // CB 6B 0330
        gbc.setState(0xa29f, 0x902f, 0x8190, 0xcfbe, 0x3152, 0x54d4, 0x1, 0x1);
        gbc.writeMem(0xa29f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x902f, gbc.sp());
        EXPECT(0xa2a1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa29f));
        EXPECT(0x6b, gbc.readMem(0xa2a0));
        // CB 6B 0331
        gbc.setState(0x7409, 0xfba5, 0xe720, 0x7622, 0x3a1b, 0x59f3, 0x0, 0x1);
        gbc.writeMem(0x7409, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xfba5, gbc.sp());
        EXPECT(0x740b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0332
        gbc.setState(0xe2fc, 0x4c49, 0xb0a0, 0x7028, 0x4efa, 0x6c29, 0x1, 0x1);
        gbc.writeMem(0xe2fc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x4c49, gbc.sp());
        EXPECT(0xe2fe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe2fc));
        EXPECT(0x6b, gbc.readMem(0xe2fd));
        // CB 6B 0333
        gbc.setState(0xaff5, 0x61c2, 0x62a0, 0x1d84, 0x1601, 0xf4ce, 0x1, 0x1);
        gbc.writeMem(0xaff5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x61c2, gbc.sp());
        EXPECT(0xaff7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaff5));
        EXPECT(0x6b, gbc.readMem(0xaff6));
        // CB 6B 0334
        gbc.setState(0x8d02, 0x8cb5, 0x3810, 0x6755, 0x6f34, 0x872, 0x1, 0x0);
        gbc.writeMem(0x8d02, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x8cb5, gbc.sp());
        EXPECT(0x8d04, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d02));
        EXPECT(0x6b, gbc.readMem(0x8d03));
        // CB 6B 0335
        gbc.setState(0x9a6b, 0xabc7, 0x1890, 0xaa8b, 0x783c, 0xbeef, 0x1, 0x1);
        gbc.writeMem(0x9a6b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xabc7, gbc.sp());
        EXPECT(0x9a6d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a6b));
        EXPECT(0x6b, gbc.readMem(0x9a6c));
        // CB 6B 0336
        gbc.setState(0x6bc3, 0xbbdf, 0x6370, 0x985b, 0x887a, 0xdc84, 0x1, 0x0);
        gbc.writeMem(0x6bc3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xbbdf, gbc.sp());
        EXPECT(0x6bc5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0337
        gbc.setState(0x9418, 0x328a, 0x8d00, 0x9ef6, 0x2721, 0x6acc, 0x0, 0x1);
        gbc.writeMem(0x9418, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x328a, gbc.sp());
        EXPECT(0x941a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9418));
        EXPECT(0x6b, gbc.readMem(0x9419));
        // CB 6B 0338
        gbc.setState(0x2e9e, 0x6524, 0x3e0, 0x7114, 0x1a7, 0xee4b, 0x0, 0x1);
        gbc.writeMem(0x2e9e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x6524, gbc.sp());
        EXPECT(0x2ea0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0339
        gbc.setState(0x26b6, 0x9278, 0xf610, 0xd6c7, 0x7acb, 0x55ab, 0x0, 0x0);
        gbc.writeMem(0x26b6, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x9278, gbc.sp());
        EXPECT(0x26b8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 033A
        gbc.setState(0xc43a, 0x2b7a, 0x2030, 0xff54, 0xc185, 0xcdfd, 0x1, 0x0);
        gbc.writeMem(0xc43a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x2b7a, gbc.sp());
        EXPECT(0xc43c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc43a));
        EXPECT(0x6b, gbc.readMem(0xc43b));
        // CB 6B 033B
        gbc.setState(0x7e29, 0xe707, 0x1d80, 0x3254, 0x716f, 0x811d, 0x1, 0x1);
        gbc.writeMem(0x7e29, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xe707, gbc.sp());
        EXPECT(0x7e2b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 033C
        gbc.setState(0x6b15, 0xc5fc, 0xdca0, 0x2221, 0xeadd, 0x3fce, 0x1, 0x0);
        gbc.writeMem(0x6b15, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xc5fc, gbc.sp());
        EXPECT(0x6b17, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 033D
        gbc.setState(0xd38e, 0xaa43, 0x8d40, 0xcb76, 0x5f1b, 0xed65, 0x1, 0x0);
        gbc.writeMem(0xd38e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0xaa43, gbc.sp());
        EXPECT(0xd390, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd38e));
        EXPECT(0x6b, gbc.readMem(0xd38f));
        // CB 6B 033E
        gbc.setState(0x2ad5, 0xe1cd, 0x2a90, 0x3915, 0x3f9d, 0xdec0, 0x1, 0x1);
        gbc.writeMem(0x2ad5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xe1cd, gbc.sp());
        EXPECT(0x2ad7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 033F
        gbc.setState(0x86d, 0xbfb3, 0x8560, 0x860a, 0x6bbf, 0xdb1b, 0x0, 0x1);
        gbc.writeMem(0x86d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xbfb3, gbc.sp());
        EXPECT(0x86f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0340
        gbc.setState(0xea39, 0xc2ca, 0xd340, 0x20a1, 0xbf25, 0x6485, 0x0, 0x1);
        gbc.writeMem(0xea39, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xc2ca, gbc.sp());
        EXPECT(0xea3b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xea39));
        EXPECT(0x6b, gbc.readMem(0xea3a));
        // CB 6B 0341
        gbc.setState(0x3075, 0xaee3, 0xc520, 0x77f8, 0x22bb, 0x95c, 0x0, 0x0);
        gbc.writeMem(0x3075, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0xaee3, gbc.sp());
        EXPECT(0x3077, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0343
        gbc.setState(0x4ddc, 0x767f, 0x82a0, 0xf7c1, 0x2abf, 0x65c0, 0x0, 0x1);
        gbc.writeMem(0x4ddc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x767f, gbc.sp());
        EXPECT(0x4dde, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0345
        gbc.setState(0x3130, 0xa909, 0xca60, 0x3311, 0xbc11, 0x3790, 0x1, 0x1);
        gbc.writeMem(0x3130, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0xa909, gbc.sp());
        EXPECT(0x3132, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0347
        gbc.setState(0x738c, 0xbaa7, 0xb020, 0x6365, 0x933b, 0x41ff, 0x1, 0x1);
        gbc.writeMem(0x738c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0xbaa7, gbc.sp());
        EXPECT(0x738e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0348
        gbc.setState(0xd0be, 0x7a8a, 0xea0, 0xcdc5, 0x157, 0xe12a, 0x0, 0x0);
        gbc.writeMem(0xd0be, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x7a8a, gbc.sp());
        EXPECT(0xd0c0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd0be));
        EXPECT(0x6b, gbc.readMem(0xd0bf));
        // CB 6B 0349
        gbc.setState(0x8207, 0x3f11, 0x7b40, 0x968f, 0xe5bd, 0x5e6f, 0x0, 0x1);
        gbc.writeMem(0x8207, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x3f11, gbc.sp());
        EXPECT(0x8209, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8207));
        EXPECT(0x6b, gbc.readMem(0x8208));
        // CB 6B 034A
        gbc.setState(0xd3e5, 0x4015, 0x1e00, 0x2448, 0x3e6b, 0x5c93, 0x1, 0x0);
        gbc.writeMem(0xd3e5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x4015, gbc.sp());
        EXPECT(0xd3e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3e5));
        EXPECT(0x6b, gbc.readMem(0xd3e6));
        // CB 6B 034B
        gbc.setState(0x8fc4, 0x8c7b, 0x6e60, 0xaac4, 0x953f, 0x2d92, 0x0, 0x0);
        gbc.writeMem(0x8fc4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x8c7b, gbc.sp());
        EXPECT(0x8fc6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8fc4));
        EXPECT(0x6b, gbc.readMem(0x8fc5));
        // CB 6B 034C
        gbc.setState(0x9caa, 0xe154, 0x81f0, 0x2133, 0xb09e, 0x3e52, 0x1, 0x1);
        gbc.writeMem(0x9caa, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xe154, gbc.sp());
        EXPECT(0x9cac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9caa));
        EXPECT(0x6b, gbc.readMem(0x9cab));
        // CB 6B 034D
        gbc.setState(0x17ea, 0x97a7, 0x7ac0, 0xc36d, 0x35f3, 0x41cc, 0x0, 0x0);
        gbc.writeMem(0x17ea, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x97a7, gbc.sp());
        EXPECT(0x17ec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 034E
        gbc.setState(0x7674, 0x49ff, 0x13d0, 0x95a3, 0x73c2, 0xdaeb, 0x1, 0x1);
        gbc.writeMem(0x7674, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x49ff, gbc.sp());
        EXPECT(0x7676, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 034F
        gbc.setState(0xaa59, 0xa10a, 0x95c0, 0xae6e, 0x9f96, 0xa6b4, 0x1, 0x0);
        gbc.writeMem(0xaa59, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xa10a, gbc.sp());
        EXPECT(0xaa5b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa59));
        EXPECT(0x6b, gbc.readMem(0xaa5a));
        // CB 6B 0350
        gbc.setState(0x60c4, 0x7c8a, 0x170, 0x4126, 0x112b, 0xd457, 0x1, 0x1);
        gbc.writeMem(0x60c4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x7c8a, gbc.sp());
        EXPECT(0x60c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0351
        gbc.setState(0x3a24, 0x5d32, 0x740, 0xc4d9, 0x13ac, 0x95e5, 0x0, 0x0);
        gbc.writeMem(0x3a24, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x5d32, gbc.sp());
        EXPECT(0x3a26, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0352
        gbc.setState(0xccc, 0xbc32, 0x2a50, 0x3542, 0x5f63, 0x6ef3, 0x0, 0x1);
        gbc.writeMem(0xccc, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xbc32, gbc.sp());
        EXPECT(0xcce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0353
        gbc.setState(0x6fd5, 0x9b55, 0x2ed0, 0x7216, 0xdffa, 0x94c7, 0x1, 0x0);
        gbc.writeMem(0x6fd5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x9b55, gbc.sp());
        EXPECT(0x6fd7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0354
        gbc.setState(0xbb30, 0xa954, 0x6380, 0x405c, 0x16c5, 0xa85a, 0x1, 0x0);
        gbc.writeMem(0xbb30, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0xa954, gbc.sp());
        EXPECT(0xbb32, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb30));
        EXPECT(0x6b, gbc.readMem(0xbb31));
        // CB 6B 0355
        gbc.setState(0x4fd0, 0xf632, 0xf5d0, 0x15d3, 0xcfd1, 0x1975, 0x0, 0x1);
        gbc.writeMem(0x4fd0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xf632, gbc.sp());
        EXPECT(0x4fd2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0356
        gbc.setState(0x7f87, 0x48ef, 0xb940, 0xbf91, 0xfea, 0x9cf4, 0x0, 0x1);
        gbc.writeMem(0x7f87, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x48ef, gbc.sp());
        EXPECT(0x7f89, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0357
        gbc.setState(0x212, 0x58c8, 0xe1a0, 0x290d, 0xc2be, 0x947c, 0x0, 0x0);
        gbc.writeMem(0x212, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x58c8, gbc.sp());
        EXPECT(0x214, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0358
        gbc.setState(0xd449, 0xa251, 0x9ff0, 0xbaf7, 0x1566, 0xb219, 0x0, 0x0);
        gbc.writeMem(0xd449, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xa251, gbc.sp());
        EXPECT(0xd44b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd449));
        EXPECT(0x6b, gbc.readMem(0xd44a));
        // CB 6B 0359
        gbc.setState(0x1607, 0xaaaf, 0x3f10, 0xd4ed, 0x1588, 0xb79c, 0x1, 0x0);
        gbc.writeMem(0x1607, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xaaaf, gbc.sp());
        EXPECT(0x1609, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 035A
        gbc.setState(0xbc85, 0xa964, 0xc90, 0x9ac7, 0xcdae, 0x99ae, 0x0, 0x0);
        gbc.writeMem(0xbc85, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xa964, gbc.sp());
        EXPECT(0xbc87, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc85));
        EXPECT(0x6b, gbc.readMem(0xbc86));
        // CB 6B 035B
        gbc.setState(0xbd80, 0xd122, 0xa2c0, 0x13db, 0x7ca9, 0x3974, 0x1, 0x1);
        gbc.writeMem(0xbd80, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xd122, gbc.sp());
        EXPECT(0xbd82, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd80));
        EXPECT(0x6b, gbc.readMem(0xbd81));
        // CB 6B 035C
        gbc.setState(0xbb35, 0x6ce8, 0x1b50, 0x80d0, 0x7bb7, 0x7b03, 0x1, 0x0);
        gbc.writeMem(0xbb35, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x6ce8, gbc.sp());
        EXPECT(0xbb37, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb35));
        EXPECT(0x6b, gbc.readMem(0xbb36));
        // CB 6B 035D
        gbc.setState(0xe484, 0x3111, 0x2310, 0x9e01, 0xf25c, 0x9284, 0x0, 0x1);
        gbc.writeMem(0xe484, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x3111, gbc.sp());
        EXPECT(0xe486, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe484));
        EXPECT(0x6b, gbc.readMem(0xe485));
        // CB 6B 035E
        gbc.setState(0x3bbe, 0x35bb, 0xb6a0, 0x8a20, 0x797a, 0xd0b9, 0x1, 0x0);
        gbc.writeMem(0x3bbe, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x35bb, gbc.sp());
        EXPECT(0x3bc0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 035F
        gbc.setState(0xd91d, 0x353c, 0x7430, 0x6ebb, 0x1b5a, 0xca80, 0x0, 0x1);
        gbc.writeMem(0xd91d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x353c, gbc.sp());
        EXPECT(0xd91f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd91d));
        EXPECT(0x6b, gbc.readMem(0xd91e));
        // CB 6B 0360
        gbc.setState(0x6c0, 0xa184, 0xecb0, 0xfb5a, 0x5b34, 0xdc18, 0x0, 0x1);
        gbc.writeMem(0x6c0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xa184, gbc.sp());
        EXPECT(0x6c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0361
        gbc.setState(0xd970, 0x2405, 0xdfe0, 0xea00, 0xf13b, 0x9090, 0x1, 0x0);
        gbc.writeMem(0xd970, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x2405, gbc.sp());
        EXPECT(0xd972, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd970));
        EXPECT(0x6b, gbc.readMem(0xd971));
        // CB 6B 0362
        gbc.setState(0x2e91, 0x9981, 0x32c0, 0x1ab0, 0x19c3, 0xd497, 0x0, 0x1);
        gbc.writeMem(0x2e91, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x9981, gbc.sp());
        EXPECT(0x2e93, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0363
        gbc.setState(0xef76, 0x1d70, 0x45d0, 0x6456, 0xf236, 0xb43f, 0x0, 0x1);
        gbc.writeMem(0xef76, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x1d70, gbc.sp());
        EXPECT(0xef78, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef76));
        EXPECT(0x6b, gbc.readMem(0xef77));
        // CB 6B 0364
        gbc.setState(0x7dec, 0x4566, 0xa700, 0x2cee, 0x2d10, 0xca2d, 0x1, 0x0);
        gbc.writeMem(0x7dec, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x4566, gbc.sp());
        EXPECT(0x7dee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0365
        gbc.setState(0x4a65, 0x2228, 0x1110, 0xf85a, 0xc73a, 0x3517, 0x0, 0x1);
        gbc.writeMem(0x4a65, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x2228, gbc.sp());
        EXPECT(0x4a67, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0366
        gbc.setState(0xb194, 0xf0d0, 0xadc0, 0xf54d, 0x8c3b, 0xb49c, 0x0, 0x1);
        gbc.writeMem(0xb194, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xf0d0, gbc.sp());
        EXPECT(0xb196, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb194));
        EXPECT(0x6b, gbc.readMem(0xb195));
        // CB 6B 0367
        gbc.setState(0x349b, 0x3ec6, 0x3b50, 0xfc79, 0x5bb1, 0xa7c7, 0x1, 0x1);
        gbc.writeMem(0x349b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x3ec6, gbc.sp());
        EXPECT(0x349d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0368
        gbc.setState(0x5d2b, 0x3929, 0x86b0, 0x3a2a, 0x8d54, 0x89aa, 0x1, 0x0);
        gbc.writeMem(0x5d2b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x3929, gbc.sp());
        EXPECT(0x5d2d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0369
        gbc.setState(0x957c, 0xbf6f, 0x6da0, 0x8c82, 0xcf45, 0x318d, 0x0, 0x1);
        gbc.writeMem(0x957c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xbf6f, gbc.sp());
        EXPECT(0x957e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x957c));
        EXPECT(0x6b, gbc.readMem(0x957d));
        // CB 6B 036A
        gbc.setState(0x9e0, 0x4a59, 0xe630, 0xbd9c, 0x9bdb, 0x6d3e, 0x1, 0x0);
        gbc.writeMem(0x9e0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x4a59, gbc.sp());
        EXPECT(0x9e2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 036B
        gbc.setState(0x9010, 0x2206, 0x7de0, 0x5a13, 0xb089, 0x5f9b, 0x1, 0x1);
        gbc.writeMem(0x9010, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x2206, gbc.sp());
        EXPECT(0x9012, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9010));
        EXPECT(0x6b, gbc.readMem(0x9011));
        // CB 6B 036C
        gbc.setState(0xefc7, 0x52e8, 0x7500, 0x27ef, 0x3951, 0x4a66, 0x1, 0x1);
        gbc.writeMem(0xefc7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x52e8, gbc.sp());
        EXPECT(0xefc9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xefc7));
        EXPECT(0x6b, gbc.readMem(0xefc8));
        // CB 6B 036D
        gbc.setState(0xaf12, 0x129d, 0x2a20, 0xf237, 0xaaee, 0x7b87, 0x0, 0x1);
        gbc.writeMem(0xaf12, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x129d, gbc.sp());
        EXPECT(0xaf14, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaf12));
        EXPECT(0x6b, gbc.readMem(0xaf13));
        // CB 6B 036E
        gbc.setState(0x62d1, 0xf07f, 0x8e20, 0xa2aa, 0xab1d, 0x6c4b, 0x1, 0x1);
        gbc.writeMem(0x62d1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xf07f, gbc.sp());
        EXPECT(0x62d3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 036F
        gbc.setState(0x3306, 0xc2be, 0xb660, 0xae86, 0xd9af, 0xf1a4, 0x1, 0x0);
        gbc.writeMem(0x3306, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xc2be, gbc.sp());
        EXPECT(0x3308, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0370
        gbc.setState(0x173, 0xaa0e, 0xaed0, 0xdfb5, 0x3865, 0x6d31, 0x0, 0x1);
        gbc.writeMem(0x173, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0xaa0e, gbc.sp());
        EXPECT(0x175, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0371
        gbc.setState(0x1a32, 0x20a4, 0x2180, 0x1a77, 0xe9d1, 0x4ecc, 0x0, 0x1);
        gbc.writeMem(0x1a32, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x20a4, gbc.sp());
        EXPECT(0x1a34, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0372
        gbc.setState(0x3bf0, 0x8a5a, 0xfd30, 0x5c9e, 0x4359, 0xaf6c, 0x0, 0x1);
        gbc.writeMem(0x3bf0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x8a5a, gbc.sp());
        EXPECT(0x3bf2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0373
        gbc.setState(0xa376, 0x3185, 0xc380, 0xd349, 0xc867, 0xafa8, 0x0, 0x1);
        gbc.writeMem(0xa376, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x3185, gbc.sp());
        EXPECT(0xa378, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa376));
        EXPECT(0x6b, gbc.readMem(0xa377));
        // CB 6B 0374
        gbc.setState(0x5d94, 0x10e, 0x54c0, 0x615f, 0x306a, 0x932, 0x1, 0x1);
        gbc.writeMem(0x5d94, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x10e, gbc.sp());
        EXPECT(0x5d96, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0375
        gbc.setState(0x5264, 0x9466, 0xdac0, 0x7062, 0xd19, 0x5c05, 0x0, 0x0);
        gbc.writeMem(0x5264, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x9466, gbc.sp());
        EXPECT(0x5266, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0376
        gbc.setState(0x909d, 0xaac0, 0x2700, 0x5723, 0xee2e, 0x9c78, 0x0, 0x1);
        gbc.writeMem(0x909d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0xaac0, gbc.sp());
        EXPECT(0x909f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x909d));
        EXPECT(0x6b, gbc.readMem(0x909e));
        // CB 6B 0377
        gbc.setState(0xc1c2, 0xf761, 0x5600, 0x4ec7, 0x4426, 0x6659, 0x0, 0x1);
        gbc.writeMem(0xc1c2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xf761, gbc.sp());
        EXPECT(0xc1c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc1c2));
        EXPECT(0x6b, gbc.readMem(0xc1c3));
        // CB 6B 0378
        gbc.setState(0x4892, 0xc40f, 0x4590, 0x10f4, 0x836a, 0xa501, 0x1, 0x1);
        gbc.writeMem(0x4892, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xc40f, gbc.sp());
        EXPECT(0x4894, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0379
        gbc.setState(0x68da, 0xe5e7, 0x2a90, 0xa80d, 0xc548, 0x4c73, 0x1, 0x0);
        gbc.writeMem(0x68da, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0xe5e7, gbc.sp());
        EXPECT(0x68dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 037A
        gbc.setState(0x945f, 0x1bf1, 0x1b90, 0x79ab, 0xf709, 0x46cd, 0x0, 0x0);
        gbc.writeMem(0x945f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x1bf1, gbc.sp());
        EXPECT(0x9461, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x945f));
        EXPECT(0x6b, gbc.readMem(0x9460));
        // CB 6B 037B
        gbc.setState(0x5dc9, 0x9fab, 0x1aa0, 0x4381, 0xf71f, 0x5695, 0x1, 0x1);
        gbc.writeMem(0x5dc9, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x9fab, gbc.sp());
        EXPECT(0x5dcb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 037C
        gbc.setState(0xc254, 0xc4b3, 0x4a00, 0x865b, 0x9baf, 0xcf52, 0x0, 0x0);
        gbc.writeMem(0xc254, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xc4b3, gbc.sp());
        EXPECT(0xc256, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc254));
        EXPECT(0x6b, gbc.readMem(0xc255));
        // CB 6B 037D
        gbc.setState(0x7f3f, 0xd7b6, 0xffd0, 0x6d55, 0x22a1, 0x2b1a, 0x0, 0x0);
        gbc.writeMem(0x7f3f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xd7b6, gbc.sp());
        EXPECT(0x7f41, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 037E
        gbc.setState(0x1128, 0xc6c5, 0xde50, 0x57ef, 0x9eee, 0x1ea4, 0x0, 0x0);
        gbc.writeMem(0x1128, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xc6c5, gbc.sp());
        EXPECT(0x112a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 037F
        gbc.setState(0xc743, 0x75c9, 0x230, 0xf0e7, 0xc795, 0x23f7, 0x0, 0x0);
        gbc.writeMem(0xc743, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x75c9, gbc.sp());
        EXPECT(0xc745, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc743));
        EXPECT(0x6b, gbc.readMem(0xc744));
        // CB 6B 0380
        gbc.setState(0x98e4, 0x76b4, 0xbf70, 0x297f, 0xa2f9, 0x126e, 0x0, 0x1);
        gbc.writeMem(0x98e4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x76b4, gbc.sp());
        EXPECT(0x98e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x98e4));
        EXPECT(0x6b, gbc.readMem(0x98e5));
        // CB 6B 0382
        gbc.setState(0x4b9c, 0x8cc2, 0xcfb0, 0x4db, 0x2ea0, 0x727, 0x0, 0x1);
        gbc.writeMem(0x4b9c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x8cc2, gbc.sp());
        EXPECT(0x4b9e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0383
        gbc.setState(0x968, 0xcd55, 0xd9a0, 0xdf52, 0x3d43, 0xf405, 0x0, 0x0);
        gbc.writeMem(0x968, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xcd55, gbc.sp());
        EXPECT(0x96a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0384
        gbc.setState(0xeabd, 0x73be, 0xe560, 0x337b, 0x830b, 0x2ba7, 0x1, 0x0);
        gbc.writeMem(0xeabd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x73be, gbc.sp());
        EXPECT(0xeabf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeabd));
        EXPECT(0x6b, gbc.readMem(0xeabe));
        // CB 6B 0385
        gbc.setState(0x8533, 0xf34a, 0x4230, 0xa5f6, 0x9f76, 0x1e41, 0x0, 0x1);
        gbc.writeMem(0x8533, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0xf34a, gbc.sp());
        EXPECT(0x8535, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8533));
        EXPECT(0x6b, gbc.readMem(0x8534));
        // CB 6B 0386
        gbc.setState(0x3eac, 0x5567, 0x5be0, 0xae70, 0x7dcd, 0xf92c, 0x0, 0x1);
        gbc.writeMem(0x3eac, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x5567, gbc.sp());
        EXPECT(0x3eae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0387
        gbc.setState(0x323, 0xd946, 0x74f0, 0xaa31, 0x338b, 0xb2ec, 0x1, 0x0);
        gbc.writeMem(0x323, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xd946, gbc.sp());
        EXPECT(0x325, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0388
        gbc.setState(0xd7ae, 0x86ed, 0xe330, 0xdd4f, 0x4f60, 0x30b8, 0x0, 0x0);
        gbc.writeMem(0xd7ae, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x86ed, gbc.sp());
        EXPECT(0xd7b0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd7ae));
        EXPECT(0x6b, gbc.readMem(0xd7af));
        // CB 6B 038A
        gbc.setState(0x16b4, 0x48cc, 0x2430, 0x8054, 0x7f2f, 0xe841, 0x0, 0x0);
        gbc.writeMem(0x16b4, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x48cc, gbc.sp());
        EXPECT(0x16b6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 038B
        gbc.setState(0x75c0, 0xe0e, 0xd0f0, 0x96b7, 0x6da0, 0x6f9d, 0x0, 0x1);
        gbc.writeMem(0x75c0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xe0e, gbc.sp());
        EXPECT(0x75c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 038C
        gbc.setState(0x47c, 0xd46f, 0x9930, 0x5a63, 0xfa07, 0x7070, 0x1, 0x1);
        gbc.writeMem(0x47c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xd46f, gbc.sp());
        EXPECT(0x47e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 038E
        gbc.setState(0x5958, 0x5a70, 0x59a0, 0x4ff1, 0xc046, 0xc4c9, 0x0, 0x0);
        gbc.writeMem(0x5958, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x5a70, gbc.sp());
        EXPECT(0x595a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 038F
        gbc.setState(0x33f7, 0x7bf2, 0x22d0, 0xe656, 0x70c9, 0xe5b1, 0x1, 0x1);
        gbc.writeMem(0x33f7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x7bf2, gbc.sp());
        EXPECT(0x33f9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0390
        gbc.setState(0x610d, 0x3de8, 0xdb10, 0xef5d, 0x55ba, 0xc30d, 0x1, 0x1);
        gbc.writeMem(0x610d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x3de8, gbc.sp());
        EXPECT(0x610f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0391
        gbc.setState(0x75a1, 0xc3c7, 0xab30, 0x5f73, 0x148c, 0xec01, 0x0, 0x0);
        gbc.writeMem(0x75a1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xc3c7, gbc.sp());
        EXPECT(0x75a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0392
        gbc.setState(0x389, 0x3ef2, 0x6c0, 0x8c1b, 0xf308, 0x23df, 0x1, 0x1);
        gbc.writeMem(0x389, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x3ef2, gbc.sp());
        EXPECT(0x38b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0393
        gbc.setState(0xd68f, 0x5cf0, 0x1e90, 0x58cf, 0x9300, 0xc7d5, 0x0, 0x1);
        gbc.writeMem(0xd68f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x5cf0, gbc.sp());
        EXPECT(0xd691, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd68f));
        EXPECT(0x6b, gbc.readMem(0xd690));
        // CB 6B 0394
        gbc.setState(0x6713, 0x6367, 0xd310, 0x5057, 0x80cb, 0xa6ae, 0x1, 0x0);
        gbc.writeMem(0x6713, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x6367, gbc.sp());
        EXPECT(0x6715, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 0395
        gbc.setState(0xe5b, 0x8fe2, 0x4b00, 0xf14d, 0x44aa, 0x42e, 0x1, 0x0);
        gbc.writeMem(0xe5b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x8fe2, gbc.sp());
        EXPECT(0xe5d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0396
        gbc.setState(0xcb24, 0xf706, 0x4aa0, 0x5e7a, 0x5f28, 0xe2b6, 0x0, 0x1);
        gbc.writeMem(0xcb24, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xf706, gbc.sp());
        EXPECT(0xcb26, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcb24));
        EXPECT(0x6b, gbc.readMem(0xcb25));
        // CB 6B 0397
        gbc.setState(0xe6ab, 0xb485, 0x46e0, 0x850c, 0x663e, 0x99c4, 0x1, 0x0);
        gbc.writeMem(0xe6ab, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xb485, gbc.sp());
        EXPECT(0xe6ad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe6ab));
        EXPECT(0x6b, gbc.readMem(0xe6ac));
        // CB 6B 0398
        gbc.setState(0x625c, 0x162a, 0x1460, 0xdeaf, 0xa0f0, 0xd7, 0x0, 0x0);
        gbc.writeMem(0x625c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x162a, gbc.sp());
        EXPECT(0x625e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 0399
        gbc.setState(0xd143, 0xdd14, 0xce80, 0xced2, 0x89aa, 0xe9d, 0x1, 0x0);
        gbc.writeMem(0xd143, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xdd14, gbc.sp());
        EXPECT(0xd145, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd143));
        EXPECT(0x6b, gbc.readMem(0xd144));
        // CB 6B 039A
        gbc.setState(0x7e8f, 0x59f, 0xee40, 0x63ef, 0x793e, 0x5d49, 0x0, 0x1);
        gbc.writeMem(0x7e8f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x59f, gbc.sp());
        EXPECT(0x7e91, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 039B
        gbc.setState(0xa671, 0x9595, 0x16b0, 0xaf69, 0xf7ca, 0xa30c, 0x0, 0x1);
        gbc.writeMem(0xa671, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x9595, gbc.sp());
        EXPECT(0xa673, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa671));
        EXPECT(0x6b, gbc.readMem(0xa672));
        // CB 6B 039C
        gbc.setState(0x4049, 0x85a3, 0x9480, 0xcc65, 0xa588, 0xf2f3, 0x0, 0x1);
        gbc.writeMem(0x4049, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x85a3, gbc.sp());
        EXPECT(0x404b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 039D
        gbc.setState(0xc433, 0x99d4, 0xec70, 0xdbf0, 0x7c77, 0xd69b, 0x1, 0x1);
        gbc.writeMem(0xc433, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x99d4, gbc.sp());
        EXPECT(0xc435, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc433));
        EXPECT(0x6b, gbc.readMem(0xc434));
        // CB 6B 039E
        gbc.setState(0xc29a, 0xbcc9, 0xf000, 0xf775, 0xa99f, 0x1211, 0x1, 0x0);
        gbc.writeMem(0xc29a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0xbcc9, gbc.sp());
        EXPECT(0xc29c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc29a));
        EXPECT(0x6b, gbc.readMem(0xc29b));
        // CB 6B 039F
        gbc.setState(0x108, 0xc499, 0x3a00, 0x1f21, 0xc31, 0xa386, 0x0, 0x1);
        gbc.writeMem(0x108, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xc499, gbc.sp());
        EXPECT(0x10a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 03A0
        gbc.setState(0xaef7, 0x8128, 0xdd00, 0x1fd9, 0x2911, 0xbb32, 0x1, 0x0);
        gbc.writeMem(0xaef7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x8128, gbc.sp());
        EXPECT(0xaef9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaef7));
        EXPECT(0x6b, gbc.readMem(0xaef8));
        // CB 6B 03A1
        gbc.setState(0xbc51, 0x1890, 0x6790, 0x59cf, 0x28b, 0xfb0d, 0x1, 0x1);
        gbc.writeMem(0xbc51, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x1890, gbc.sp());
        EXPECT(0xbc53, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc51));
        EXPECT(0x6b, gbc.readMem(0xbc52));
        // CB 6B 03A2
        gbc.setState(0x83f3, 0xd03f, 0xbb70, 0x15ea, 0xcf17, 0x3d0f, 0x1, 0x0);
        gbc.writeMem(0x83f3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0xd03f, gbc.sp());
        EXPECT(0x83f5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x83f3));
        EXPECT(0x6b, gbc.readMem(0x83f4));
        // CB 6B 03A3
        gbc.setState(0x4d86, 0x2b58, 0x79c0, 0xcf2c, 0x1e8b, 0xfd95, 0x0, 0x0);
        gbc.writeMem(0x4d86, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x2b58, gbc.sp());
        EXPECT(0x4d88, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 03A5
        gbc.setState(0x9c1, 0x66bd, 0x5f30, 0xbd01, 0x9ee1, 0x8b9, 0x0, 0x0);
        gbc.writeMem(0x9c1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x66bd, gbc.sp());
        EXPECT(0x9c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03A7
        gbc.setState(0xe39, 0x807d, 0xc710, 0x9a2d, 0x3a60, 0xf209, 0x0, 0x1);
        gbc.writeMem(0xe39, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0x807d, gbc.sp());
        EXPECT(0xe3b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03A8
        gbc.setState(0xbb51, 0xaebe, 0xd1f0, 0xb26e, 0x5953, 0x52aa, 0x0, 0x0);
        gbc.writeMem(0xbb51, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xaebe, gbc.sp());
        EXPECT(0xbb53, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb51));
        EXPECT(0x6b, gbc.readMem(0xbb52));
        // CB 6B 03A9
        gbc.setState(0x7b47, 0x3da9, 0x4410, 0x7ba3, 0x44a9, 0xaadb, 0x0, 0x1);
        gbc.writeMem(0x7b47, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x3da9, gbc.sp());
        EXPECT(0x7b49, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03AA
        gbc.setState(0xaa81, 0xfb58, 0x3f40, 0xa072, 0x2472, 0x8c1b, 0x1, 0x1);
        gbc.writeMem(0xaa81, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xfb58, gbc.sp());
        EXPECT(0xaa83, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa81));
        EXPECT(0x6b, gbc.readMem(0xaa82));
        // CB 6B 03AB
        gbc.setState(0xea42, 0xa466, 0x16b0, 0x39e6, 0x548d, 0x6659, 0x1, 0x1);
        gbc.writeMem(0xea42, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xa466, gbc.sp());
        EXPECT(0xea44, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xea42));
        EXPECT(0x6b, gbc.readMem(0xea43));
        // CB 6B 03AC
        gbc.setState(0xdf87, 0xe8e7, 0xecc0, 0xdea1, 0x869b, 0xcfe0, 0x0, 0x1);
        gbc.writeMem(0xdf87, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xe8e7, gbc.sp());
        EXPECT(0xdf89, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf87));
        EXPECT(0x6b, gbc.readMem(0xdf88));
        // CB 6B 03AD
        gbc.setState(0x7a35, 0xa4bb, 0x9cd0, 0x2940, 0x65a4, 0x2947, 0x0, 0x0);
        gbc.writeMem(0x7a35, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0xa4bb, gbc.sp());
        EXPECT(0x7a37, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03AE
        gbc.setState(0xa7e8, 0x2f63, 0xb130, 0xefed, 0xb630, 0xbfe5, 0x0, 0x1);
        gbc.writeMem(0xa7e8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x2f63, gbc.sp());
        EXPECT(0xa7ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa7e8));
        EXPECT(0x6b, gbc.readMem(0xa7e9));
        // CB 6B 03AF
        gbc.setState(0x75cb, 0x256d, 0x1570, 0xaa8, 0xc16d, 0x48ce, 0x1, 0x1);
        gbc.writeMem(0x75cb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x256d, gbc.sp());
        EXPECT(0x75cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03B0
        gbc.setState(0x54f2, 0xa110, 0x2c00, 0xf865, 0x5523, 0x158a, 0x1, 0x1);
        gbc.writeMem(0x54f2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0xa110, gbc.sp());
        EXPECT(0x54f4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 03B1
        gbc.setState(0x473d, 0xd3f0, 0x57a0, 0xb980, 0x4b, 0x8f3c, 0x1, 0x1);
        gbc.writeMem(0x473d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xd3f0, gbc.sp());
        EXPECT(0x473f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 03B2
        gbc.setState(0xc8d0, 0xb832, 0x2ac0, 0x577b, 0x797c, 0xd28c, 0x1, 0x1);
        gbc.writeMem(0xc8d0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xb832, gbc.sp());
        EXPECT(0xc8d2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8d0));
        EXPECT(0x6b, gbc.readMem(0xc8d1));
        // CB 6B 03B3
        gbc.setState(0x2cf2, 0xcfc6, 0x6800, 0xb679, 0xdbcb, 0x81d4, 0x1, 0x1);
        gbc.writeMem(0x2cf2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0xcfc6, gbc.sp());
        EXPECT(0x2cf4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 03B4
        gbc.setState(0x286c, 0xa70c, 0x8230, 0xa32c, 0x1cb8, 0x4ad6, 0x0, 0x1);
        gbc.writeMem(0x286c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xa70c, gbc.sp());
        EXPECT(0x286e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03B5
        gbc.setState(0x5209, 0xbfbf, 0xf1b0, 0xc36f, 0x49ed, 0xd341, 0x1, 0x1);
        gbc.writeMem(0x5209, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0xbfbf, gbc.sp());
        EXPECT(0x520b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03B7
        gbc.setState(0x287e, 0xb474, 0xa030, 0xc46d, 0x6381, 0x522d, 0x1, 0x0);
        gbc.writeMem(0x287e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xb474, gbc.sp());
        EXPECT(0x2880, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03B8
        gbc.setState(0xde31, 0xe812, 0xf930, 0xc4d7, 0xdf4f, 0x3c73, 0x1, 0x1);
        gbc.writeMem(0xde31, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0xe812, gbc.sp());
        EXPECT(0xde33, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde31));
        EXPECT(0x6b, gbc.readMem(0xde32));
        // CB 6B 03B9
        gbc.setState(0x13f, 0xefab, 0xd630, 0xa5ee, 0x1345, 0xdf22, 0x1, 0x0);
        gbc.writeMem(0x13f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xefab, gbc.sp());
        EXPECT(0x141, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03BA
        gbc.setState(0x3fdd, 0x2b67, 0xb5b0, 0x7af8, 0x3d, 0x36c6, 0x1, 0x1);
        gbc.writeMem(0x3fdd, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x2b67, gbc.sp());
        EXPECT(0x3fdf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03BB
        gbc.setState(0xaa49, 0x301f, 0x5410, 0xa684, 0xfa2f, 0x3e3a, 0x1, 0x1);
        gbc.writeMem(0xaa49, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x301f, gbc.sp());
        EXPECT(0xaa4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa49));
        EXPECT(0x6b, gbc.readMem(0xaa4a));
        // CB 6B 03BD
        gbc.setState(0xe869, 0x1aa0, 0x71b0, 0x60f0, 0x6794, 0x8207, 0x0, 0x1);
        gbc.writeMem(0xe869, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x1aa0, gbc.sp());
        EXPECT(0xe86b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe869));
        EXPECT(0x6b, gbc.readMem(0xe86a));
        // CB 6B 03BE
        gbc.setState(0x5feb, 0x20b, 0xfed0, 0xbec9, 0xe493, 0xd7b3, 0x1, 0x0);
        gbc.writeMem(0x5feb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x20b, gbc.sp());
        EXPECT(0x5fed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03BF
        gbc.setState(0x9aa3, 0xbcb4, 0xfcf0, 0x9478, 0xf5cd, 0x713f, 0x1, 0x0);
        gbc.writeMem(0x9aa3, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xbcb4, gbc.sp());
        EXPECT(0x9aa5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9aa3));
        EXPECT(0x6b, gbc.readMem(0x9aa4));
        // CB 6B 03C0
        gbc.setState(0x2fda, 0x7692, 0x30, 0x64ec, 0x7664, 0xb9e9, 0x0, 0x0);
        gbc.writeMem(0x2fda, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x7692, gbc.sp());
        EXPECT(0x2fdc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03C1
        gbc.setState(0x2545, 0xe725, 0xbd00, 0x2df9, 0xc289, 0xdc45, 0x1, 0x1);
        gbc.writeMem(0x2545, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xe725, gbc.sp());
        EXPECT(0x2547, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 03C2
        gbc.setState(0x66a0, 0x300b, 0x8fe0, 0x6f6, 0x8218, 0x4eac, 0x1, 0x0);
        gbc.writeMem(0x66a0, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x300b, gbc.sp());
        EXPECT(0x66a2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 03C3
        gbc.setState(0x5239, 0xca66, 0xcda0, 0x200d, 0xf1c9, 0xdd65, 0x1, 0x0);
        gbc.writeMem(0x5239, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0xca66, gbc.sp());
        EXPECT(0x523b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 03C4
        gbc.setState(0x8818, 0xcad7, 0xb8e0, 0x671e, 0x724f, 0x13ed, 0x0, 0x0);
        gbc.writeMem(0x8818, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xcad7, gbc.sp());
        EXPECT(0x881a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8818));
        EXPECT(0x6b, gbc.readMem(0x8819));
        // CB 6B 03C5
        gbc.setState(0xdc4a, 0xd052, 0xea40, 0xb979, 0xa07, 0x658d, 0x1, 0x1);
        gbc.writeMem(0xdc4a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xd052, gbc.sp());
        EXPECT(0xdc4c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc4a));
        EXPECT(0x6b, gbc.readMem(0xdc4b));
        // CB 6B 03C6
        gbc.setState(0xe0d5, 0xfcd, 0x89d0, 0x1f13, 0xd92f, 0x4543, 0x0, 0x0);
        gbc.writeMem(0xe0d5, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xfcd, gbc.sp());
        EXPECT(0xe0d7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe0d5));
        EXPECT(0x6b, gbc.readMem(0xe0d6));
        // CB 6B 03C7
        gbc.setState(0x733e, 0x6781, 0x7b10, 0xf942, 0x4f23, 0xe0d, 0x0, 0x0);
        gbc.writeMem(0x733e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x6781, gbc.sp());
        EXPECT(0x7340, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03C8
        gbc.setState(0x30a1, 0x511a, 0xc090, 0x475c, 0x726d, 0xdcaf, 0x0, 0x0);
        gbc.writeMem(0x30a1, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x511a, gbc.sp());
        EXPECT(0x30a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03C9
        gbc.setState(0x23ea, 0x9c4, 0xd060, 0xccd2, 0xd2aa, 0x431b, 0x1, 0x1);
        gbc.writeMem(0x23ea, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x9c4, gbc.sp());
        EXPECT(0x23ec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 03CA
        gbc.setState(0x2c5d, 0x8a09, 0xa8f0, 0xbf14, 0x7ce4, 0xa8e9, 0x0, 0x1);
        gbc.writeMem(0x2c5d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x8a09, gbc.sp());
        EXPECT(0x2c5f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03CB
        gbc.setState(0x3d32, 0xdf24, 0x2760, 0x988a, 0x6783, 0x941c, 0x0, 0x0);
        gbc.writeMem(0x3d32, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xdf24, gbc.sp());
        EXPECT(0x3d34, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 03CC
        gbc.setState(0xdc7, 0x1354, 0x9a0, 0xe234, 0xe7f6, 0x72b7, 0x1, 0x1);
        gbc.writeMem(0xdc7, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x1354, gbc.sp());
        EXPECT(0xdc9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 03CD
        gbc.setState(0x8f0a, 0x20df, 0x34b0, 0xc848, 0x74db, 0x992d, 0x0, 0x1);
        gbc.writeMem(0x8f0a, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x20df, gbc.sp());
        EXPECT(0x8f0c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f0a));
        EXPECT(0x6b, gbc.readMem(0x8f0b));
        // CB 6B 03CE
        gbc.setState(0x82bf, 0xd28a, 0xefe0, 0x4f17, 0x9f8c, 0x80ac, 0x0, 0x0);
        gbc.writeMem(0x82bf, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xd28a, gbc.sp());
        EXPECT(0x82c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x82bf));
        EXPECT(0x6b, gbc.readMem(0x82c0));
        // CB 6B 03CF
        gbc.setState(0x9a01, 0x37a4, 0xe9c0, 0x9e0c, 0x9679, 0x1729, 0x0, 0x0);
        gbc.writeMem(0x9a01, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x37a4, gbc.sp());
        EXPECT(0x9a03, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a01));
        EXPECT(0x6b, gbc.readMem(0x9a02));
        // CB 6B 03D0
        gbc.setState(0x784c, 0x308a, 0xaf10, 0x468e, 0xa4a1, 0x7e5c, 0x0, 0x1);
        gbc.writeMem(0x784c, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x308a, gbc.sp());
        EXPECT(0x784e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03D1
        gbc.setState(0xbf48, 0x2030, 0xddd0, 0x6e95, 0x26f9, 0x3aeb, 0x1, 0x1);
        gbc.writeMem(0xbf48, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x2030, gbc.sp());
        EXPECT(0xbf4a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf48));
        EXPECT(0x6b, gbc.readMem(0xbf49));
        // CB 6B 03D2
        gbc.setState(0x52ad, 0xe5ae, 0x7420, 0xa8e0, 0xec34, 0x171b, 0x0, 0x1);
        gbc.writeMem(0x52ad, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xe5ae, gbc.sp());
        EXPECT(0x52af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 03D3
        gbc.setState(0xe627, 0xfff6, 0x2fe0, 0x9fc9, 0x2921, 0x2ff9, 0x0, 0x1);
        gbc.writeMem(0xe627, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xfff6, gbc.sp());
        EXPECT(0xe629, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe627));
        EXPECT(0x6b, gbc.readMem(0xe628));
        // CB 6B 03D4
        gbc.setState(0x97ca, 0xb57f, 0xa240, 0xa823, 0xc45, 0x21bc, 0x1, 0x1);
        gbc.writeMem(0x97ca, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0xb57f, gbc.sp());
        EXPECT(0x97cc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x97ca));
        EXPECT(0x6b, gbc.readMem(0x97cb));
        // CB 6B 03D5
        gbc.setState(0x4faa, 0x4582, 0x6530, 0x15b7, 0xfc27, 0xb474, 0x1, 0x1);
        gbc.writeMem(0x4faa, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x4582, gbc.sp());
        EXPECT(0x4fac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03D6
        gbc.setState(0x309f, 0x7a2, 0xc210, 0x833e, 0xa6da, 0x8579, 0x1, 0x1);
        gbc.writeMem(0x309f, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x7a2, gbc.sp());
        EXPECT(0x30a1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03D7
        gbc.setState(0x402b, 0xef02, 0x3c40, 0x3d77, 0xf032, 0x1a2d, 0x0, 0x0);
        gbc.writeMem(0x402b, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xef02, gbc.sp());
        EXPECT(0x402d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 03D8
        gbc.setState(0x71ab, 0xd493, 0x3b00, 0x7588, 0xd669, 0x155b, 0x1, 0x1);
        gbc.writeMem(0x71ab, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0xd493, gbc.sp());
        EXPECT(0x71ad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 03D9
        gbc.setState(0x9acb, 0xb92e, 0xf270, 0x9bf5, 0xec39, 0x4f9c, 0x1, 0x0);
        gbc.writeMem(0x9acb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xb92e, gbc.sp());
        EXPECT(0x9acd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9acb));
        EXPECT(0x6b, gbc.readMem(0x9acc));
        // CB 6B 03DA
        gbc.setState(0x6328, 0x461c, 0x2fa0, 0x7b40, 0x3901, 0x4b43, 0x1, 0x0);
        gbc.writeMem(0x6328, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x461c, gbc.sp());
        EXPECT(0x632a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 03DB
        gbc.setState(0xc34e, 0x5c7f, 0x82b0, 0xca17, 0x4564, 0x8cec, 0x1, 0x1);
        gbc.writeMem(0xc34e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x5c7f, gbc.sp());
        EXPECT(0xc350, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc34e));
        EXPECT(0x6b, gbc.readMem(0xc34f));
        // CB 6B 03DC
        gbc.setState(0x4bcb, 0x46b2, 0x65f0, 0x733a, 0x8da0, 0xd6b3, 0x1, 0x1);
        gbc.writeMem(0x4bcb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x46b2, gbc.sp());
        EXPECT(0x4bcd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03DD
        gbc.setState(0x54fb, 0x2e40, 0xc970, 0xc40b, 0xd4a9, 0x98ad, 0x0, 0x0);
        gbc.writeMem(0x54fb, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x2e40, gbc.sp());
        EXPECT(0x54fd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03DE
        gbc.setState(0xdd1e, 0x654c, 0x4fc0, 0x9656, 0xf9eb, 0x5140, 0x0, 0x0);
        gbc.writeMem(0xdd1e, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x654c, gbc.sp());
        EXPECT(0xdd20, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd1e));
        EXPECT(0x6b, gbc.readMem(0xdd1f));
        // CB 6B 03DF
        gbc.setState(0x64ea, 0x7320, 0x2990, 0x59f7, 0x9ba6, 0xb883, 0x0, 0x0);
        gbc.writeMem(0x64ea, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x7320, gbc.sp());
        EXPECT(0x64ec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03E0
        gbc.setState(0x1a87, 0xedda, 0xcfb0, 0x9916, 0xb0b, 0xd489, 0x1, 0x1);
        gbc.writeMem(0x1a87, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xedda, gbc.sp());
        EXPECT(0x1a89, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03E1
        gbc.setState(0x6d94, 0xa0b9, 0x47a0, 0x58c7, 0x46cd, 0x2f13, 0x0, 0x1);
        gbc.writeMem(0x6d94, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0xa0b9, gbc.sp());
        EXPECT(0x6d96, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 6B 03E2
        gbc.setState(0x428d, 0x7fb3, 0xe630, 0x37bd, 0xc477, 0x8221, 0x1, 0x1);
        gbc.writeMem(0x428d, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x7fb3, gbc.sp());
        EXPECT(0x428f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03E3
        gbc.setState(0xa9f2, 0x7577, 0x1870, 0xa7ef, 0x1f5d, 0x6ffb, 0x1, 0x0);
        gbc.writeMem(0xa9f2, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x7577, gbc.sp());
        EXPECT(0xa9f4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa9f2));
        EXPECT(0x6b, gbc.readMem(0xa9f3));
        // CB 6B 03E4
        gbc.setState(0x74d8, 0x8fc8, 0xf6f0, 0x18f2, 0xc1e6, 0x6ae6, 0x0, 0x1);
        gbc.writeMem(0x74d8, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x8fc8, gbc.sp());
        EXPECT(0x74da, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03E5
        gbc.setState(0xc321, 0x1d3f, 0xffc0, 0x82be, 0x54ab, 0x6495, 0x1, 0x1);
        gbc.writeMem(0xc321, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x1d3f, gbc.sp());
        EXPECT(0xc323, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc321));
        EXPECT(0x6b, gbc.readMem(0xc322));
        // CB 6B 03E6
        gbc.setState(0x4a92, 0x6578, 0x51b0, 0x5397, 0x6016, 0x6db0, 0x1, 0x1);
        gbc.writeMem(0x4a92, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x6578, gbc.sp());
        EXPECT(0x4a94, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 6B 03E7
        gbc.setState(0xdf70, 0xfe88, 0x9a60, 0x8ec6, 0x84df, 0x9507, 0x0, 0x0);
        gbc.writeMem(0xdf70, { 0xcb, 0x6b });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xfe88, gbc.sp());
        EXPECT(0xdf72, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf70));
        EXPECT(0x6b, gbc.readMem(0xdf71));
    }
