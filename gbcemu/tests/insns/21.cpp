#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_21)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_21) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 21 0000
        gbc.setState(0x1f5f, 0x6be5, 0xcf00, 0x4d34, 0x5620, 0xd925, 0x1, 0x1);
        gbc.writeMem(0x1f5f, { 0x21, 0x37, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x6be5);
        EXPECT(gbc.pc(), 0x1f62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0001
        gbc.setState(0xb089, 0xc591, 0x37c0, 0x1472, 0xcc4d, 0x4218, 0x0, 0x1);
        gbc.writeMem(0xb089, { 0x21, 0xad, 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xc591);
        EXPECT(gbc.pc(), 0xb08c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb089), 0x21);
        EXPECT(gbc.readMem(0xb08a), 0xad);
        EXPECT(gbc.readMem(0xb08b), 0xcc);
        // 21 0002
        gbc.setState(0xdb7, 0xed54, 0xdb20, 0x9c, 0xe7df, 0x1d22, 0x0, 0x1);
        gbc.writeMem(0xdb7, { 0x21, 0x21, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xed54);
        EXPECT(gbc.pc(), 0xdba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0003
        gbc.setState(0x7dd2, 0xb97e, 0x5140, 0xc0b4, 0xc673, 0x12f5, 0x1, 0x0);
        gbc.writeMem(0x7dd2, { 0x21, 0x51, 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xb97e);
        EXPECT(gbc.pc(), 0x7dd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0004
        gbc.setState(0x7fc0, 0xbbc0, 0x27a0, 0x9f56, 0xbfbb, 0x9690, 0x1, 0x1);
        gbc.writeMem(0x7fc0, { 0x21, 0x80, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xbbc0);
        EXPECT(gbc.pc(), 0x7fc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0005
        gbc.setState(0x51db, 0x17e9, 0xb8d0, 0x6c5c, 0xe076, 0x9471, 0x1, 0x0);
        gbc.writeMem(0x51db, { 0x21, 0xcb, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x17e9);
        EXPECT(gbc.pc(), 0x51de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0006
        gbc.setState(0x7a2a, 0x3a0a, 0xc550, 0x4aaa, 0x46d3, 0x26a2, 0x0, 0x1);
        gbc.writeMem(0x7a2a, { 0x21, 0x59, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x3a0a);
        EXPECT(gbc.pc(), 0x7a2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0007
        gbc.setState(0xafdb, 0xa5c, 0x9d50, 0x60c7, 0x940c, 0x740a, 0x0, 0x1);
        gbc.writeMem(0xafdb, { 0x21, 0xd2, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa5c);
        EXPECT(gbc.pc(), 0xafde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafdb), 0x21);
        EXPECT(gbc.readMem(0xafdc), 0xd2);
        EXPECT(gbc.readMem(0xafdd), 0xd3);
        // 21 0008
        gbc.setState(0x5e0d, 0x9c3b, 0xd2e0, 0x1adc, 0xfc6, 0xd599, 0x0, 0x0);
        gbc.writeMem(0x5e0d, { 0x21, 0x1, 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x9c3b);
        EXPECT(gbc.pc(), 0x5e10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0009
        gbc.setState(0x9c2e, 0x2e32, 0x3130, 0x89c5, 0x9353, 0x89f2, 0x1, 0x0);
        gbc.writeMem(0x9c2e, { 0x21, 0xd, 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x2e32);
        EXPECT(gbc.pc(), 0x9c31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c2e), 0x21);
        EXPECT(gbc.readMem(0x9c2f), 0xd);
        EXPECT(gbc.readMem(0x9c30), 0x77);
        // 21 000A
        gbc.setState(0x714e, 0xf287, 0x1770, 0x8d1, 0xb29b, 0x2e06, 0x1, 0x1);
        gbc.writeMem(0x714e, { 0x21, 0xb1, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xf287);
        EXPECT(gbc.pc(), 0x7151);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 000B
        gbc.setState(0xab98, 0xf09a, 0x5d40, 0x3a79, 0xe149, 0xdc61, 0x1, 0x0);
        gbc.writeMem(0xab98, { 0x21, 0x4, 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xf09a);
        EXPECT(gbc.pc(), 0xab9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab98), 0x21);
        EXPECT(gbc.readMem(0xab99), 0x4);
        EXPECT(gbc.readMem(0xab9a), 0x7b);
        // 21 000C
        gbc.setState(0x9809, 0xc528, 0x3730, 0xba09, 0xd3cb, 0x5637, 0x0, 0x0);
        gbc.writeMem(0x9809, { 0x21, 0x49, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xc528);
        EXPECT(gbc.pc(), 0x980c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9809), 0x21);
        EXPECT(gbc.readMem(0x980a), 0x49);
        EXPECT(gbc.readMem(0x980b), 0xc1);
        // 21 000D
        gbc.setState(0x9eba, 0x1c55, 0xb3d0, 0x87da, 0x3b26, 0xd92d, 0x1, 0x0);
        gbc.writeMem(0x9eba, { 0x21, 0xc6, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x1c55);
        EXPECT(gbc.pc(), 0x9ebd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9eba), 0x21);
        EXPECT(gbc.readMem(0x9ebb), 0xc6);
        EXPECT(gbc.readMem(0x9ebc), 0x6d);
        // 21 000E
        gbc.setState(0xdf7c, 0xe189, 0x1830, 0xc90, 0xc365, 0xb081, 0x1, 0x1);
        gbc.writeMem(0xdf7c, { 0x21, 0xc7, 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xe189);
        EXPECT(gbc.pc(), 0xdf7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf7c), 0x21);
        EXPECT(gbc.readMem(0xdf7d), 0xc7);
        EXPECT(gbc.readMem(0xdf7e), 0x5c);
        // 21 000F
        gbc.setState(0x2f7c, 0x8822, 0xbbc0, 0x3f1a, 0xfe67, 0x379d, 0x1, 0x1);
        gbc.writeMem(0x2f7c, { 0x21, 0x4e, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x8822);
        EXPECT(gbc.pc(), 0x2f7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0011
        gbc.setState(0xe253, 0x5aa7, 0xb9d0, 0x571a, 0xde35, 0x8298, 0x1, 0x0);
        gbc.writeMem(0xe253, { 0x21, 0x7f, 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x5aa7);
        EXPECT(gbc.pc(), 0xe256);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe253), 0x21);
        EXPECT(gbc.readMem(0xe254), 0x7f);
        EXPECT(gbc.readMem(0xe255), 0x6e);
        // 21 0012
        gbc.setState(0x3d0e, 0x95a1, 0x6f60, 0x4122, 0x481f, 0xf9cf, 0x1, 0x0);
        gbc.writeMem(0x3d0e, { 0x21, 0xf9, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x95a1);
        EXPECT(gbc.pc(), 0x3d11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0013
        gbc.setState(0xbe74, 0xf826, 0x6230, 0x5bc3, 0x4b8d, 0xb65e, 0x0, 0x0);
        gbc.writeMem(0xbe74, { 0x21, 0xfb, 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xf826);
        EXPECT(gbc.pc(), 0xbe77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe74), 0x21);
        EXPECT(gbc.readMem(0xbe75), 0xfb);
        EXPECT(gbc.readMem(0xbe76), 0x4d);
        // 21 0014
        gbc.setState(0x46a1, 0x4962, 0xfa30, 0x638b, 0xcba4, 0x7de2, 0x0, 0x1);
        gbc.writeMem(0x46a1, { 0x21, 0x50, 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x4962);
        EXPECT(gbc.pc(), 0x46a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0015
        gbc.setState(0xa3c5, 0x4bab, 0xef80, 0xb62a, 0xcf36, 0x1fa6, 0x1, 0x0);
        gbc.writeMem(0xa3c5, { 0x21, 0xb6, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x4bab);
        EXPECT(gbc.pc(), 0xa3c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3c5), 0x21);
        EXPECT(gbc.readMem(0xa3c6), 0xb6);
        EXPECT(gbc.readMem(0xa3c7), 0x43);
        // 21 0016
        gbc.setState(0x9667, 0x11e1, 0xc600, 0xbd7b, 0x65b9, 0xe67d, 0x1, 0x0);
        gbc.writeMem(0x9667, { 0x21, 0x77, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x11e1);
        EXPECT(gbc.pc(), 0x966a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9667), 0x21);
        EXPECT(gbc.readMem(0x9668), 0x77);
        EXPECT(gbc.readMem(0x9669), 0x4c);
        // 21 0017
        gbc.setState(0x9e4a, 0x3763, 0xf150, 0x57f8, 0xab2f, 0x4be1, 0x0, 0x0);
        gbc.writeMem(0x9e4a, { 0x21, 0x5f, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x3763);
        EXPECT(gbc.pc(), 0x9e4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e4a), 0x21);
        EXPECT(gbc.readMem(0x9e4b), 0x5f);
        EXPECT(gbc.readMem(0x9e4c), 0x36);
        // 21 0018
        gbc.setState(0xb83f, 0x860b, 0xc440, 0x14d6, 0x89ee, 0x1fd5, 0x1, 0x0);
        gbc.writeMem(0xb83f, { 0x21, 0xd4, 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x860b);
        EXPECT(gbc.pc(), 0xb842);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb83f), 0x21);
        EXPECT(gbc.readMem(0xb840), 0xd4);
        EXPECT(gbc.readMem(0xb841), 0x41);
        // 21 0019
        gbc.setState(0x2f59, 0x6c3c, 0x4560, 0x51e3, 0xa80f, 0x30ad, 0x0, 0x1);
        gbc.writeMem(0x2f59, { 0x21, 0x5e, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x6c3c);
        EXPECT(gbc.pc(), 0x2f5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 001A
        gbc.setState(0xd4bf, 0x11cc, 0x2470, 0x8907, 0x6cb6, 0x33a, 0x1, 0x1);
        gbc.writeMem(0xd4bf, { 0x21, 0xca, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x11cc);
        EXPECT(gbc.pc(), 0xd4c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4bf), 0x21);
        EXPECT(gbc.readMem(0xd4c0), 0xca);
        EXPECT(gbc.readMem(0xd4c1), 0xae);
        // 21 001B
        gbc.setState(0xad2e, 0x17dc, 0xf9c0, 0x7aa6, 0xa8cd, 0x17ad, 0x1, 0x1);
        gbc.writeMem(0xad2e, { 0x21, 0x8, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x17dc);
        EXPECT(gbc.pc(), 0xad31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad2e), 0x21);
        EXPECT(gbc.readMem(0xad2f), 0x8);
        EXPECT(gbc.readMem(0xad30), 0x8b);
        // 21 001C
        gbc.setState(0x5cb, 0x638d, 0xda20, 0x9316, 0x4340, 0x3d23, 0x1, 0x1);
        gbc.writeMem(0x5cb, { 0x21, 0xa3, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x638d);
        EXPECT(gbc.pc(), 0x5ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 001D
        gbc.setState(0x1b2, 0x7d87, 0x3130, 0x5c8f, 0xc129, 0x5dcf, 0x1, 0x0);
        gbc.writeMem(0x1b2, { 0x21, 0xc2, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x7d87);
        EXPECT(gbc.pc(), 0x1b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 001E
        gbc.setState(0xd885, 0xa3e7, 0x5260, 0xe620, 0x648f, 0x6a9, 0x0, 0x0);
        gbc.writeMem(0xd885, { 0x21, 0xf5, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xa3e7);
        EXPECT(gbc.pc(), 0xd888);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd885), 0x21);
        EXPECT(gbc.readMem(0xd886), 0xf5);
        EXPECT(gbc.readMem(0xd887), 0x48);
        // 21 001F
        gbc.setState(0x72f6, 0x7ca6, 0xc5a0, 0x64d2, 0xe439, 0x6c80, 0x0, 0x1);
        gbc.writeMem(0x72f6, { 0x21, 0xd9, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x7ca6);
        EXPECT(gbc.pc(), 0x72f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0020
        gbc.setState(0xa89c, 0x71bc, 0xcbb0, 0x6b2a, 0x5f49, 0xff4, 0x0, 0x1);
        gbc.writeMem(0xa89c, { 0x21, 0x2c, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x71bc);
        EXPECT(gbc.pc(), 0xa89f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa89c), 0x21);
        EXPECT(gbc.readMem(0xa89d), 0x2c);
        EXPECT(gbc.readMem(0xa89e), 0x82);
        // 21 0021
        gbc.setState(0x5833, 0xee8e, 0x1400, 0x8f38, 0xf094, 0x58c9, 0x1, 0x0);
        gbc.writeMem(0x5833, { 0x21, 0x6e, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xee8e);
        EXPECT(gbc.pc(), 0x5836);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0022
        gbc.setState(0xd83f, 0xe6a3, 0x3a10, 0x2b9d, 0x32fb, 0xdf8, 0x1, 0x1);
        gbc.writeMem(0xd83f, { 0x21, 0x1c, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xe6a3);
        EXPECT(gbc.pc(), 0xd842);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd83f), 0x21);
        EXPECT(gbc.readMem(0xd840), 0x1c);
        EXPECT(gbc.readMem(0xd841), 0xc1);
        // 21 0023
        gbc.setState(0xceba, 0xaa08, 0xf460, 0xfa9d, 0x5fa7, 0xd590, 0x1, 0x1);
        gbc.writeMem(0xceba, { 0x21, 0x7f, 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xaa08);
        EXPECT(gbc.pc(), 0xcebd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xceba), 0x21);
        EXPECT(gbc.readMem(0xcebb), 0x7f);
        EXPECT(gbc.readMem(0xcebc), 0x8f);
        // 21 0024
        gbc.setState(0x7cdb, 0x502b, 0xa370, 0xca06, 0xe078, 0x6703, 0x0, 0x0);
        gbc.writeMem(0x7cdb, { 0x21, 0x35, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x502b);
        EXPECT(gbc.pc(), 0x7cde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0025
        gbc.setState(0xb764, 0x7285, 0x24a0, 0x2562, 0x874b, 0x5043, 0x0, 0x1);
        gbc.writeMem(0xb764, { 0x21, 0x90, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x7285);
        EXPECT(gbc.pc(), 0xb767);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb764), 0x21);
        EXPECT(gbc.readMem(0xb765), 0x90);
        EXPECT(gbc.readMem(0xb766), 0xad);
        // 21 0027
        gbc.setState(0x1e3e, 0xf7a2, 0x7e00, 0xfbe, 0xc958, 0x297c, 0x0, 0x1);
        gbc.writeMem(0x1e3e, { 0x21, 0xc9, 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xf7a2);
        EXPECT(gbc.pc(), 0x1e41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0028
        gbc.setState(0xb9c0, 0xdce0, 0x5ab0, 0x2f18, 0xd0d, 0x36b2, 0x1, 0x1);
        gbc.writeMem(0xb9c0, { 0x21, 0xf9, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xdce0);
        EXPECT(gbc.pc(), 0xb9c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9c0), 0x21);
        EXPECT(gbc.readMem(0xb9c1), 0xf9);
        EXPECT(gbc.readMem(0xb9c2), 0x2);
        // 21 0029
        gbc.setState(0xa6ba, 0x7900, 0x38c0, 0xbaea, 0x4d83, 0xb61b, 0x0, 0x0);
        gbc.writeMem(0xa6ba, { 0x21, 0xc7, 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x7900);
        EXPECT(gbc.pc(), 0xa6bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6ba), 0x21);
        EXPECT(gbc.readMem(0xa6bb), 0xc7);
        EXPECT(gbc.readMem(0xa6bc), 0x6c);
        // 21 002A
        gbc.setState(0xd372, 0x5908, 0x3e70, 0x7cba, 0x95c8, 0x9838, 0x1, 0x1);
        gbc.writeMem(0xd372, { 0x21, 0xf4, 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x5908);
        EXPECT(gbc.pc(), 0xd375);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd372), 0x21);
        EXPECT(gbc.readMem(0xd373), 0xf4);
        EXPECT(gbc.readMem(0xd374), 0xc6);
        // 21 002B
        gbc.setState(0x7221, 0x9a2, 0x80e0, 0xa5bc, 0xcd5d, 0x4469, 0x0, 0x1);
        gbc.writeMem(0x7221, { 0x21, 0x15, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x9a2);
        EXPECT(gbc.pc(), 0x7224);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 002C
        gbc.setState(0x248e, 0xc4f9, 0xa0c0, 0xa193, 0xc673, 0x1db0, 0x1, 0x1);
        gbc.writeMem(0x248e, { 0x21, 0x0, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xc4f9);
        EXPECT(gbc.pc(), 0x2491);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 002D
        gbc.setState(0x7948, 0xd98e, 0xcd30, 0x8e35, 0x1197, 0x666b, 0x0, 0x1);
        gbc.writeMem(0x7948, { 0x21, 0x80, 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xd98e);
        EXPECT(gbc.pc(), 0x794b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 002E
        gbc.setState(0x2224, 0x33a9, 0x83e0, 0x514f, 0x99a9, 0x5430, 0x1, 0x0);
        gbc.writeMem(0x2224, { 0x21, 0x84, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x33a9);
        EXPECT(gbc.pc(), 0x2227);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 002F
        gbc.setState(0xcddb, 0xff0e, 0xcaa0, 0x9390, 0x27a3, 0x82f6, 0x1, 0x1);
        gbc.writeMem(0xcddb, { 0x21, 0x20, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xff0e);
        EXPECT(gbc.pc(), 0xcdde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcddb), 0x21);
        EXPECT(gbc.readMem(0xcddc), 0x20);
        EXPECT(gbc.readMem(0xcddd), 0xd6);
        // 21 0030
        gbc.setState(0x771d, 0xf5ab, 0xa4b0, 0xcd0c, 0x542d, 0x3849, 0x1, 0x1);
        gbc.writeMem(0x771d, { 0x21, 0x6c, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xf5ab);
        EXPECT(gbc.pc(), 0x7720);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0031
        gbc.setState(0x80cd, 0xf031, 0xbd90, 0xf0f9, 0x91f1, 0x4a46, 0x1, 0x0);
        gbc.writeMem(0x80cd, { 0x21, 0xc2, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xf031);
        EXPECT(gbc.pc(), 0x80d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80cd), 0x21);
        EXPECT(gbc.readMem(0x80ce), 0xc2);
        EXPECT(gbc.readMem(0x80cf), 0x3a);
        // 21 0032
        gbc.setState(0x1967, 0xb214, 0xf310, 0x93b9, 0x6f5d, 0x642, 0x0, 0x1);
        gbc.writeMem(0x1967, { 0x21, 0xec, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xb214);
        EXPECT(gbc.pc(), 0x196a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0033
        gbc.setState(0xcd8a, 0x51bc, 0x8950, 0xbb87, 0xca9d, 0xecf, 0x0, 0x0);
        gbc.writeMem(0xcd8a, { 0x21, 0x72, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x51bc);
        EXPECT(gbc.pc(), 0xcd8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd8a), 0x21);
        EXPECT(gbc.readMem(0xcd8b), 0x72);
        EXPECT(gbc.readMem(0xcd8c), 0xc3);
        // 21 0036
        gbc.setState(0x825f, 0x3c97, 0xa660, 0x431c, 0xda4e, 0xafd7, 0x0, 0x0);
        gbc.writeMem(0x825f, { 0x21, 0x9, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x3c97);
        EXPECT(gbc.pc(), 0x8262);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x825f), 0x21);
        EXPECT(gbc.readMem(0x8260), 0x9);
        EXPECT(gbc.readMem(0x8261), 0xad);
        // 21 0037
        gbc.setState(0xbb12, 0xbfbb, 0xad30, 0xe323, 0xa8a7, 0xe022, 0x0, 0x1);
        gbc.writeMem(0xbb12, { 0x21, 0xbd, 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xbfbb);
        EXPECT(gbc.pc(), 0xbb15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb12), 0x21);
        EXPECT(gbc.readMem(0xbb13), 0xbd);
        EXPECT(gbc.readMem(0xbb14), 0x11);
        // 21 0038
        gbc.setState(0x7d74, 0x9ba2, 0xbd70, 0x8b30, 0xc2da, 0x331e, 0x0, 0x1);
        gbc.writeMem(0x7d74, { 0x21, 0xf, 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x9ba2);
        EXPECT(gbc.pc(), 0x7d77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0039
        gbc.setState(0x9c8b, 0xaa5b, 0xd8a0, 0xd384, 0xc4ef, 0x730b, 0x0, 0x1);
        gbc.writeMem(0x9c8b, { 0x21, 0xd5, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xaa5b);
        EXPECT(gbc.pc(), 0x9c8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c8b), 0x21);
        EXPECT(gbc.readMem(0x9c8c), 0xd5);
        EXPECT(gbc.readMem(0x9c8d), 0xd0);
        // 21 003A
        gbc.setState(0xd1ff, 0x1e7c, 0x2390, 0x3984, 0x6340, 0x6754, 0x0, 0x1);
        gbc.writeMem(0xd1ff, { 0x21, 0xf3, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x1e7c);
        EXPECT(gbc.pc(), 0xd202);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1ff), 0x21);
        EXPECT(gbc.readMem(0xd200), 0xf3);
        EXPECT(gbc.readMem(0xd201), 0x6a);
        // 21 003B
        gbc.setState(0xf60, 0x94c7, 0x7e80, 0xff90, 0xcea, 0x6bff, 0x1, 0x1);
        gbc.writeMem(0xf60, { 0x21, 0xe, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x94c7);
        EXPECT(gbc.pc(), 0xf63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 003C
        gbc.setState(0x87da, 0x4f41, 0xaa60, 0xf1f0, 0xb3fb, 0xc0b7, 0x1, 0x1);
        gbc.writeMem(0x87da, { 0x21, 0xd0, 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x4f41);
        EXPECT(gbc.pc(), 0x87dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87da), 0x21);
        EXPECT(gbc.readMem(0x87db), 0xd0);
        EXPECT(gbc.readMem(0x87dc), 0x45);
        // 21 003D
        gbc.setState(0x57fd, 0x261d, 0xe160, 0x19a1, 0xa348, 0x9cf2, 0x1, 0x0);
        gbc.writeMem(0x57fd, { 0x21, 0xc5, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x261d);
        EXPECT(gbc.pc(), 0x5800);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 003E
        gbc.setState(0x5131, 0xf395, 0xd470, 0xe589, 0x68c, 0xecca, 0x0, 0x0);
        gbc.writeMem(0x5131, { 0x21, 0x9b, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xf395);
        EXPECT(gbc.pc(), 0x5134);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 003F
        gbc.setState(0x371b, 0xe954, 0xe210, 0x3ac9, 0x7771, 0x658a, 0x0, 0x0);
        gbc.writeMem(0x371b, { 0x21, 0xf5, 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xe954);
        EXPECT(gbc.pc(), 0x371e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0040
        gbc.setState(0xb3d1, 0xfdc4, 0x5ff0, 0xd5ff, 0xfe92, 0x68b, 0x1, 0x1);
        gbc.writeMem(0xb3d1, { 0x21, 0xc9, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xfdc4);
        EXPECT(gbc.pc(), 0xb3d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3d1), 0x21);
        EXPECT(gbc.readMem(0xb3d2), 0xc9);
        EXPECT(gbc.readMem(0xb3d3), 0x51);
        // 21 0041
        gbc.setState(0x145c, 0x3e1f, 0x76a0, 0xe90e, 0x58db, 0x25df, 0x1, 0x0);
        gbc.writeMem(0x145c, { 0x21, 0x45, 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x3e1f);
        EXPECT(gbc.pc(), 0x145f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0042
        gbc.setState(0xa3c9, 0x34fa, 0x7a60, 0x7bec, 0xeb3c, 0xa28e, 0x1, 0x1);
        gbc.writeMem(0xa3c9, { 0x21, 0xd5, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x34fa);
        EXPECT(gbc.pc(), 0xa3cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3c9), 0x21);
        EXPECT(gbc.readMem(0xa3ca), 0xd5);
        EXPECT(gbc.readMem(0xa3cb), 0x6b);
        // 21 0043
        gbc.setState(0xd75c, 0xc239, 0xcd20, 0x60ce, 0x51a7, 0x96b0, 0x0, 0x0);
        gbc.writeMem(0xd75c, { 0x21, 0xc5, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xc239);
        EXPECT(gbc.pc(), 0xd75f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd75c), 0x21);
        EXPECT(gbc.readMem(0xd75d), 0xc5);
        EXPECT(gbc.readMem(0xd75e), 0xee);
        // 21 0044
        gbc.setState(0xe83b, 0xb7c5, 0xb500, 0xcd31, 0xc2dd, 0xd61a, 0x1, 0x1);
        gbc.writeMem(0xe83b, { 0x21, 0xf8, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xb7c5);
        EXPECT(gbc.pc(), 0xe83e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe83b), 0x21);
        EXPECT(gbc.readMem(0xe83c), 0xf8);
        EXPECT(gbc.readMem(0xe83d), 0xf0);
        // 21 0045
        gbc.setState(0xaf4f, 0xb213, 0x5830, 0xea87, 0x39cc, 0x5cdc, 0x1, 0x0);
        gbc.writeMem(0xaf4f, { 0x21, 0xd7, 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xb213);
        EXPECT(gbc.pc(), 0xaf52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf4f), 0x21);
        EXPECT(gbc.readMem(0xaf50), 0xd7);
        EXPECT(gbc.readMem(0xaf51), 0xff);
        // 21 0046
        gbc.setState(0x5afa, 0x8f00, 0xd2f0, 0x2f3, 0xaaaa, 0xa10f, 0x1, 0x1);
        gbc.writeMem(0x5afa, { 0x21, 0x96, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x8f00);
        EXPECT(gbc.pc(), 0x5afd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0047
        gbc.setState(0x8381, 0x83f8, 0xc9f0, 0x23d8, 0x6164, 0x9262, 0x1, 0x1);
        gbc.writeMem(0x8381, { 0x21, 0xd1, 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x83f8);
        EXPECT(gbc.pc(), 0x8384);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8381), 0x21);
        EXPECT(gbc.readMem(0x8382), 0xd1);
        EXPECT(gbc.readMem(0x8383), 0xbf);
        // 21 0048
        gbc.setState(0x3f78, 0x1129, 0x5b0, 0x30b7, 0x1413, 0x1363, 0x0, 0x1);
        gbc.writeMem(0x3f78, { 0x21, 0x96, 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x1129);
        EXPECT(gbc.pc(), 0x3f7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0049
        gbc.setState(0x917c, 0x6a1f, 0x4080, 0x512, 0x6d3b, 0x9706, 0x0, 0x1);
        gbc.writeMem(0x917c, { 0x21, 0xe8, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x6a1f);
        EXPECT(gbc.pc(), 0x917f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x917c), 0x21);
        EXPECT(gbc.readMem(0x917d), 0xe8);
        EXPECT(gbc.readMem(0x917e), 0x48);
        // 21 004A
        gbc.setState(0x8d71, 0xb34b, 0x9220, 0xa6a0, 0xf184, 0x6f4b, 0x1, 0x1);
        gbc.writeMem(0x8d71, { 0x21, 0x4, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xb34b);
        EXPECT(gbc.pc(), 0x8d74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d71), 0x21);
        EXPECT(gbc.readMem(0x8d72), 0x4);
        EXPECT(gbc.readMem(0x8d73), 0x4);
        // 21 004B
        gbc.setState(0xd479, 0x28db, 0x7000, 0x1871, 0x4c82, 0xb294, 0x0, 0x0);
        gbc.writeMem(0xd479, { 0x21, 0xf1, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x28db);
        EXPECT(gbc.pc(), 0xd47c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd479), 0x21);
        EXPECT(gbc.readMem(0xd47a), 0xf1);
        EXPECT(gbc.readMem(0xd47b), 0x13);
        // 21 004C
        gbc.setState(0x859c, 0x7292, 0xe230, 0x7319, 0x4535, 0x1ada, 0x0, 0x1);
        gbc.writeMem(0x859c, { 0x21, 0x10, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x7292);
        EXPECT(gbc.pc(), 0x859f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x859c), 0x21);
        EXPECT(gbc.readMem(0x859d), 0x10);
        EXPECT(gbc.readMem(0x859e), 0x53);
        // 21 004D
        gbc.setState(0xbf58, 0xc1f9, 0xb680, 0x6915, 0x2daa, 0xfa51, 0x0, 0x0);
        gbc.writeMem(0xbf58, { 0x21, 0x53, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xc1f9);
        EXPECT(gbc.pc(), 0xbf5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf58), 0x21);
        EXPECT(gbc.readMem(0xbf59), 0x53);
        EXPECT(gbc.readMem(0xbf5a), 0x2e);
        // 21 004E
        gbc.setState(0x66db, 0xd674, 0x9480, 0xcf52, 0x5541, 0x5aed, 0x0, 0x1);
        gbc.writeMem(0x66db, { 0x21, 0x6c, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xd674);
        EXPECT(gbc.pc(), 0x66de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 004F
        gbc.setState(0xbc89, 0x1bcb, 0xcea0, 0x163, 0x863f, 0x26b7, 0x1, 0x1);
        gbc.writeMem(0xbc89, { 0x21, 0xd2, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x1bcb);
        EXPECT(gbc.pc(), 0xbc8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc89), 0x21);
        EXPECT(gbc.readMem(0xbc8a), 0xd2);
        EXPECT(gbc.readMem(0xbc8b), 0xf);
        // 21 0050
        gbc.setState(0x4923, 0xf694, 0xf150, 0xcc50, 0x1b33, 0xf9c6, 0x0, 0x1);
        gbc.writeMem(0x4923, { 0x21, 0xda, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xf694);
        EXPECT(gbc.pc(), 0x4926);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0051
        gbc.setState(0x7826, 0x19b2, 0x5440, 0x8839, 0xcd8f, 0xd93f, 0x0, 0x0);
        gbc.writeMem(0x7826, { 0x21, 0x22, 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x19b2);
        EXPECT(gbc.pc(), 0x7829);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0052
        gbc.setState(0x91a6, 0x2f0b, 0x4dc0, 0x7ebb, 0xe800, 0xde39, 0x0, 0x0);
        gbc.writeMem(0x91a6, { 0x21, 0x34, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x2f0b);
        EXPECT(gbc.pc(), 0x91a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91a6), 0x21);
        EXPECT(gbc.readMem(0x91a7), 0x34);
        EXPECT(gbc.readMem(0x91a8), 0x8b);
        // 21 0053
        gbc.setState(0xc0d6, 0x4f6e, 0x7cb0, 0x41d6, 0x6a55, 0xbb29, 0x1, 0x0);
        gbc.writeMem(0xc0d6, { 0x21, 0xee, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x4f6e);
        EXPECT(gbc.pc(), 0xc0d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0d6), 0x21);
        EXPECT(gbc.readMem(0xc0d7), 0xee);
        EXPECT(gbc.readMem(0xc0d8), 0x38);
        // 21 0054
        gbc.setState(0x9073, 0xcae8, 0x3540, 0x8e0d, 0xad79, 0xf530, 0x1, 0x0);
        gbc.writeMem(0x9073, { 0x21, 0x99, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xcae8);
        EXPECT(gbc.pc(), 0x9076);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9073), 0x21);
        EXPECT(gbc.readMem(0x9074), 0x99);
        EXPECT(gbc.readMem(0x9075), 0x46);
        // 21 0055
        gbc.setState(0xba65, 0xb76, 0x3750, 0xeb9d, 0x7710, 0x6e65, 0x0, 0x1);
        gbc.writeMem(0xba65, { 0x21, 0x5d, 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xb76);
        EXPECT(gbc.pc(), 0xba68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba65), 0x21);
        EXPECT(gbc.readMem(0xba66), 0x5d);
        EXPECT(gbc.readMem(0xba67), 0xc8);
        // 21 0056
        gbc.setState(0x20c1, 0x7258, 0x770, 0xe23, 0xad, 0xf0f6, 0x0, 0x1);
        gbc.writeMem(0x20c1, { 0x21, 0x4, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x7258);
        EXPECT(gbc.pc(), 0x20c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0058
        gbc.setState(0x7ff4, 0xe455, 0x5470, 0x2b61, 0x8cd3, 0x7e52, 0x0, 0x1);
        gbc.writeMem(0x7ff4, { 0x21, 0x6a, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xe455);
        EXPECT(gbc.pc(), 0x7ff7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0059
        gbc.setState(0xc233, 0x447e, 0x67b0, 0xfd8f, 0xfb05, 0x1641, 0x0, 0x1);
        gbc.writeMem(0xc233, { 0x21, 0x18, 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x447e);
        EXPECT(gbc.pc(), 0xc236);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc233), 0x21);
        EXPECT(gbc.readMem(0xc234), 0x18);
        EXPECT(gbc.readMem(0xc235), 0xa);
        // 21 005A
        gbc.setState(0xe1f7, 0x25d, 0xd7f0, 0x377f, 0x2e7d, 0x351e, 0x0, 0x1);
        gbc.writeMem(0xe1f7, { 0x21, 0x5e, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x25d);
        EXPECT(gbc.pc(), 0xe1fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1f7), 0x21);
        EXPECT(gbc.readMem(0xe1f8), 0x5e);
        EXPECT(gbc.readMem(0xe1f9), 0x1a);
        // 21 005B
        gbc.setState(0x8899, 0x47e0, 0x9ee0, 0x2b0c, 0xa93c, 0x2319, 0x1, 0x1);
        gbc.writeMem(0x8899, { 0x21, 0xa2, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x47e0);
        EXPECT(gbc.pc(), 0x889c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8899), 0x21);
        EXPECT(gbc.readMem(0x889a), 0xa2);
        EXPECT(gbc.readMem(0x889b), 0x30);
        // 21 005C
        gbc.setState(0xaea7, 0x7fbf, 0x2320, 0xc330, 0x8f03, 0x2f1e, 0x1, 0x1);
        gbc.writeMem(0xaea7, { 0x21, 0x95, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x7fbf);
        EXPECT(gbc.pc(), 0xaeaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaea7), 0x21);
        EXPECT(gbc.readMem(0xaea8), 0x95);
        EXPECT(gbc.readMem(0xaea9), 0xe6);
        // 21 005D
        gbc.setState(0x2606, 0x9a41, 0x6d70, 0x2c6b, 0x1194, 0x5241, 0x0, 0x1);
        gbc.writeMem(0x2606, { 0x21, 0x5d, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x9a41);
        EXPECT(gbc.pc(), 0x2609);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 005E
        gbc.setState(0xdd99, 0x2c8c, 0x88b0, 0x1c1a, 0x9741, 0x3b14, 0x0, 0x1);
        gbc.writeMem(0xdd99, { 0x21, 0x9c, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x2c8c);
        EXPECT(gbc.pc(), 0xdd9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd99), 0x21);
        EXPECT(gbc.readMem(0xdd9a), 0x9c);
        EXPECT(gbc.readMem(0xdd9b), 0x53);
        // 21 005F
        gbc.setState(0xb6b, 0x52ac, 0x3c30, 0x6c4d, 0x38e1, 0xbb02, 0x1, 0x1);
        gbc.writeMem(0xb6b, { 0x21, 0x22, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x52ac);
        EXPECT(gbc.pc(), 0xb6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0060
        gbc.setState(0x8086, 0x4a08, 0x5420, 0x79b, 0x9fd7, 0x8697, 0x0, 0x0);
        gbc.writeMem(0x8086, { 0x21, 0xdf, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x4a08);
        EXPECT(gbc.pc(), 0x8089);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8086), 0x21);
        EXPECT(gbc.readMem(0x8087), 0xdf);
        EXPECT(gbc.readMem(0x8088), 0x64);
        // 21 0061
        gbc.setState(0x37d8, 0xbb3, 0xb320, 0xac69, 0x5ef1, 0x8220, 0x0, 0x1);
        gbc.writeMem(0x37d8, { 0x21, 0x59, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xbb3);
        EXPECT(gbc.pc(), 0x37db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0063
        gbc.setState(0xe4f6, 0x2a5f, 0xf900, 0x9cb, 0x525d, 0x31b5, 0x0, 0x1);
        gbc.writeMem(0xe4f6, { 0x21, 0x3f, 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x2a5f);
        EXPECT(gbc.pc(), 0xe4f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4f6), 0x21);
        EXPECT(gbc.readMem(0xe4f7), 0x3f);
        EXPECT(gbc.readMem(0xe4f8), 0x65);
        // 21 0064
        gbc.setState(0xc07a, 0xdf18, 0x8880, 0xec62, 0x5393, 0x6d66, 0x0, 0x1);
        gbc.writeMem(0xc07a, { 0x21, 0xda, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xdf18);
        EXPECT(gbc.pc(), 0xc07d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc07a), 0x21);
        EXPECT(gbc.readMem(0xc07b), 0xda);
        EXPECT(gbc.readMem(0xc07c), 0xb9);
        // 21 0065
        gbc.setState(0x33c2, 0x468a, 0x52b0, 0xb32a, 0x9923, 0x2dc4, 0x1, 0x0);
        gbc.writeMem(0x33c2, { 0x21, 0x79, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x468a);
        EXPECT(gbc.pc(), 0x33c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0066
        gbc.setState(0xabf2, 0x7f04, 0x4970, 0x4f25, 0x5249, 0x427e, 0x1, 0x0);
        gbc.writeMem(0xabf2, { 0x21, 0x45, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x7f04);
        EXPECT(gbc.pc(), 0xabf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabf2), 0x21);
        EXPECT(gbc.readMem(0xabf3), 0x45);
        EXPECT(gbc.readMem(0xabf4), 0x3);
        // 21 0067
        gbc.setState(0xdb56, 0xbf50, 0xdc20, 0xc7d0, 0x2f05, 0xb69b, 0x0, 0x0);
        gbc.writeMem(0xdb56, { 0x21, 0x40, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xbf50);
        EXPECT(gbc.pc(), 0xdb59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb56), 0x21);
        EXPECT(gbc.readMem(0xdb57), 0x40);
        EXPECT(gbc.readMem(0xdb58), 0xea);
        // 21 006A
        gbc.setState(0x4583, 0x4af, 0x5910, 0x37c2, 0xc38, 0x315d, 0x1, 0x1);
        gbc.writeMem(0x4583, { 0x21, 0xe9, 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x4af);
        EXPECT(gbc.pc(), 0x4586);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 006B
        gbc.setState(0x15f, 0x32af, 0x77f0, 0x7c0, 0xebc7, 0x7d35, 0x0, 0x0);
        gbc.writeMem(0x15f, { 0x21, 0x42, 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x32af);
        EXPECT(gbc.pc(), 0x162);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 006C
        gbc.setState(0xe924, 0x6481, 0xf100, 0xc261, 0x892b, 0xa318, 0x0, 0x1);
        gbc.writeMem(0xe924, { 0x21, 0xb0, 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x6481);
        EXPECT(gbc.pc(), 0xe927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe924), 0x21);
        EXPECT(gbc.readMem(0xe925), 0xb0);
        EXPECT(gbc.readMem(0xe926), 0x12);
        // 21 006D
        gbc.setState(0x7744, 0x83b3, 0x4d40, 0xd029, 0x64a7, 0xa654, 0x1, 0x1);
        gbc.writeMem(0x7744, { 0x21, 0xd5, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x83b3);
        EXPECT(gbc.pc(), 0x7747);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 006E
        gbc.setState(0xaee6, 0xea8, 0x9120, 0x3586, 0xa3ac, 0xc99d, 0x1, 0x1);
        gbc.writeMem(0xaee6, { 0x21, 0x36, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xea8);
        EXPECT(gbc.pc(), 0xaee9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaee6), 0x21);
        EXPECT(gbc.readMem(0xaee7), 0x36);
        EXPECT(gbc.readMem(0xaee8), 0x8b);
        // 21 006F
        gbc.setState(0x3c8d, 0xbc, 0xc120, 0xf206, 0x736d, 0x43c2, 0x1, 0x0);
        gbc.writeMem(0x3c8d, { 0x21, 0xc9, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xbc);
        EXPECT(gbc.pc(), 0x3c90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0070
        gbc.setState(0x52c6, 0x74f1, 0xd750, 0x2aa7, 0xf063, 0xdfe5, 0x0, 0x0);
        gbc.writeMem(0x52c6, { 0x21, 0x44, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x74f1);
        EXPECT(gbc.pc(), 0x52c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0072
        gbc.setState(0xcf3f, 0xd3f5, 0x35f0, 0xa7f2, 0xc9ad, 0x3fb9, 0x0, 0x1);
        gbc.writeMem(0xcf3f, { 0x21, 0x6f, 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xd3f5);
        EXPECT(gbc.pc(), 0xcf42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf3f), 0x21);
        EXPECT(gbc.readMem(0xcf40), 0x6f);
        EXPECT(gbc.readMem(0xcf41), 0x85);
        // 21 0073
        gbc.setState(0xa3a6, 0xb777, 0x9000, 0x6951, 0x3ea0, 0x378b, 0x0, 0x0);
        gbc.writeMem(0xa3a6, { 0x21, 0x6b, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xb777);
        EXPECT(gbc.pc(), 0xa3a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3a6), 0x21);
        EXPECT(gbc.readMem(0xa3a7), 0x6b);
        EXPECT(gbc.readMem(0xa3a8), 0xc3);
        // 21 0074
        gbc.setState(0x91e6, 0xf69f, 0xb320, 0xb494, 0x8b51, 0xb8e4, 0x0, 0x1);
        gbc.writeMem(0x91e6, { 0x21, 0x64, 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xf69f);
        EXPECT(gbc.pc(), 0x91e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91e6), 0x21);
        EXPECT(gbc.readMem(0x91e7), 0x64);
        EXPECT(gbc.readMem(0x91e8), 0x1);
        // 21 0075
        gbc.setState(0x80fb, 0x88e2, 0xbbb0, 0x5a42, 0x21cf, 0x9597, 0x0, 0x0);
        gbc.writeMem(0x80fb, { 0x21, 0xbf, 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x88e2);
        EXPECT(gbc.pc(), 0x80fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80fb), 0x21);
        EXPECT(gbc.readMem(0x80fc), 0xbf);
        EXPECT(gbc.readMem(0x80fd), 0x7f);
        // 21 0076
        gbc.setState(0xba91, 0x962b, 0xadf0, 0xb6e2, 0x7ca4, 0xb450, 0x1, 0x0);
        gbc.writeMem(0xba91, { 0x21, 0xbc, 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x962b);
        EXPECT(gbc.pc(), 0xba94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba91), 0x21);
        EXPECT(gbc.readMem(0xba92), 0xbc);
        EXPECT(gbc.readMem(0xba93), 0x87);
        // 21 0077
        gbc.setState(0xd5d, 0xf520, 0x2090, 0xbe6a, 0x2caa, 0x730, 0x0, 0x1);
        gbc.writeMem(0xd5d, { 0x21, 0x6d, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xf520);
        EXPECT(gbc.pc(), 0xd60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0078
        gbc.setState(0x25c1, 0xfdf5, 0xa990, 0x2abe, 0x31b, 0xc82d, 0x0, 0x0);
        gbc.writeMem(0x25c1, { 0x21, 0x8a, 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xfdf5);
        EXPECT(gbc.pc(), 0x25c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0079
        gbc.setState(0x86d5, 0x2f29, 0xdaa0, 0x1a7c, 0xbf15, 0x9a2e, 0x1, 0x0);
        gbc.writeMem(0x86d5, { 0x21, 0x1f, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x2f29);
        EXPECT(gbc.pc(), 0x86d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86d5), 0x21);
        EXPECT(gbc.readMem(0x86d6), 0x1f);
        EXPECT(gbc.readMem(0x86d7), 0xfe);
        // 21 007A
        gbc.setState(0x1953, 0xdb42, 0xc9f0, 0xf73c, 0x620d, 0xee80, 0x0, 0x0);
        gbc.writeMem(0x1953, { 0x21, 0x8c, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xdb42);
        EXPECT(gbc.pc(), 0x1956);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 007B
        gbc.setState(0x52f1, 0x2df5, 0x8ba0, 0xc70a, 0xc8a3, 0xc3ec, 0x0, 0x1);
        gbc.writeMem(0x52f1, { 0x21, 0x96, 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2df5);
        EXPECT(gbc.pc(), 0x52f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 007C
        gbc.setState(0x7197, 0xc577, 0x5b50, 0x82ba, 0x379c, 0x1375, 0x1, 0x0);
        gbc.writeMem(0x7197, { 0x21, 0xd2, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xc577);
        EXPECT(gbc.pc(), 0x719a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 007D
        gbc.setState(0x475c, 0x4ab1, 0xe200, 0x400, 0x6452, 0x7516, 0x0, 0x0);
        gbc.writeMem(0x475c, { 0x21, 0xdb, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x4ab1);
        EXPECT(gbc.pc(), 0x475f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 007E
        gbc.setState(0x9ff, 0x41f3, 0x1030, 0x1cf, 0x5c6a, 0xdae5, 0x1, 0x1);
        gbc.writeMem(0x9ff, { 0x21, 0xeb, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x41f3);
        EXPECT(gbc.pc(), 0xa02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 007F
        gbc.setState(0x5ce7, 0x230d, 0xa7a0, 0x2bdc, 0xf712, 0xacd, 0x0, 0x0);
        gbc.writeMem(0x5ce7, { 0x21, 0xd3, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x230d);
        EXPECT(gbc.pc(), 0x5cea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0080
        gbc.setState(0xaec4, 0xd74b, 0x6620, 0x9575, 0x1c25, 0xa85e, 0x0, 0x1);
        gbc.writeMem(0xaec4, { 0x21, 0x7, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xd74b);
        EXPECT(gbc.pc(), 0xaec7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaec4), 0x21);
        EXPECT(gbc.readMem(0xaec5), 0x7);
        EXPECT(gbc.readMem(0xaec6), 0x59);
        // 21 0081
        gbc.setState(0x4f44, 0x3f0e, 0xaae0, 0x8790, 0x8442, 0xc756, 0x1, 0x0);
        gbc.writeMem(0x4f44, { 0x21, 0xe2, 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x3f0e);
        EXPECT(gbc.pc(), 0x4f47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0082
        gbc.setState(0x834c, 0xb91b, 0x91b0, 0xc9c8, 0x86c7, 0x5f40, 0x0, 0x0);
        gbc.writeMem(0x834c, { 0x21, 0x7c, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xb91b);
        EXPECT(gbc.pc(), 0x834f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x834c), 0x21);
        EXPECT(gbc.readMem(0x834d), 0x7c);
        EXPECT(gbc.readMem(0x834e), 0x76);
        // 21 0083
        gbc.setState(0x941, 0x5b12, 0xe2e0, 0x9e2, 0xda8c, 0xc309, 0x1, 0x1);
        gbc.writeMem(0x941, { 0x21, 0x4d, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x5b12);
        EXPECT(gbc.pc(), 0x944);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0084
        gbc.setState(0x68dd, 0x43d, 0xcdf0, 0x9711, 0x624d, 0x4f16, 0x0, 0x0);
        gbc.writeMem(0x68dd, { 0x21, 0x6c, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x43d);
        EXPECT(gbc.pc(), 0x68e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0085
        gbc.setState(0xea1, 0x916b, 0x52c0, 0xda66, 0xbbce, 0xc937, 0x0, 0x0);
        gbc.writeMem(0xea1, { 0x21, 0x4f, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x916b);
        EXPECT(gbc.pc(), 0xea4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0086
        gbc.setState(0xd2b8, 0xa02a, 0x96d0, 0xc9df, 0x9e76, 0x5c67, 0x1, 0x0);
        gbc.writeMem(0xd2b8, { 0x21, 0xa, 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xa02a);
        EXPECT(gbc.pc(), 0xd2bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2b8), 0x21);
        EXPECT(gbc.readMem(0xd2b9), 0xa);
        EXPECT(gbc.readMem(0xd2ba), 0xd1);
        // 21 0087
        gbc.setState(0x62ca, 0xa91e, 0xdc10, 0x2fca, 0x3bd9, 0xcf4d, 0x0, 0x0);
        gbc.writeMem(0x62ca, { 0x21, 0x1, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xa91e);
        EXPECT(gbc.pc(), 0x62cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0088
        gbc.setState(0x2c51, 0xecc0, 0xc250, 0x9f4a, 0xeefa, 0x70a7, 0x0, 0x0);
        gbc.writeMem(0x2c51, { 0x21, 0xe1, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xecc0);
        EXPECT(gbc.pc(), 0x2c54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0089
        gbc.setState(0x17a8, 0x3643, 0x9fd0, 0xe7cd, 0xf228, 0xfe11, 0x1, 0x0);
        gbc.writeMem(0x17a8, { 0x21, 0xd, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x3643);
        EXPECT(gbc.pc(), 0x17ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 008B
        gbc.setState(0xdfdd, 0x8f74, 0x4fc0, 0x3f4, 0xe99b, 0x2ff9, 0x1, 0x1);
        gbc.writeMem(0xdfdd, { 0x21, 0xb8, 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x8f74);
        EXPECT(gbc.pc(), 0xdfe0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfdd), 0x21);
        EXPECT(gbc.readMem(0xdfde), 0xb8);
        EXPECT(gbc.readMem(0xdfdf), 0x2d);
        // 21 008C
        gbc.setState(0x6, 0x6bfd, 0xbde0, 0xdbf, 0xcbb4, 0x5515, 0x1, 0x0);
        gbc.writeMem(0x6, { 0x21, 0x6c, 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x6bfd);
        EXPECT(gbc.pc(), 0x9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 008D
        gbc.setState(0x379d, 0x52b4, 0x2820, 0x9866, 0x6a90, 0x510b, 0x0, 0x1);
        gbc.writeMem(0x379d, { 0x21, 0x85, 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x52b4);
        EXPECT(gbc.pc(), 0x37a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 008E
        gbc.setState(0xd198, 0x5fd3, 0x9580, 0x7f99, 0x93df, 0xfbac, 0x0, 0x0);
        gbc.writeMem(0xd198, { 0x21, 0x84, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x5fd3);
        EXPECT(gbc.pc(), 0xd19b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd198), 0x21);
        EXPECT(gbc.readMem(0xd199), 0x84);
        EXPECT(gbc.readMem(0xd19a), 0x86);
        // 21 008F
        gbc.setState(0xa0ef, 0xc9de, 0x160, 0xa1e7, 0x4a84, 0x92fa, 0x1, 0x0);
        gbc.writeMem(0xa0ef, { 0x21, 0x1c, 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xc9de);
        EXPECT(gbc.pc(), 0xa0f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0ef), 0x21);
        EXPECT(gbc.readMem(0xa0f0), 0x1c);
        EXPECT(gbc.readMem(0xa0f1), 0x40);
        // 21 0090
        gbc.setState(0x6a89, 0x9b96, 0xc4f0, 0xd582, 0x346b, 0x520c, 0x0, 0x1);
        gbc.writeMem(0x6a89, { 0x21, 0x4, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x9b96);
        EXPECT(gbc.pc(), 0x6a8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0091
        gbc.setState(0xb915, 0x431a, 0x6700, 0x3120, 0xbdf4, 0x78e4, 0x0, 0x1);
        gbc.writeMem(0xb915, { 0x21, 0xeb, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x431a);
        EXPECT(gbc.pc(), 0xb918);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb915), 0x21);
        EXPECT(gbc.readMem(0xb916), 0xeb);
        EXPECT(gbc.readMem(0xb917), 0xf9);
        // 21 0092
        gbc.setState(0x4737, 0x3212, 0xac00, 0xf6fb, 0xfb47, 0x7b08, 0x1, 0x0);
        gbc.writeMem(0x4737, { 0x21, 0xd6, 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x3212);
        EXPECT(gbc.pc(), 0x473a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0093
        gbc.setState(0xbc58, 0xdacb, 0xce0, 0x9bd5, 0x344d, 0x84c2, 0x0, 0x0);
        gbc.writeMem(0xbc58, { 0x21, 0x8c, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xdacb);
        EXPECT(gbc.pc(), 0xbc5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc58), 0x21);
        EXPECT(gbc.readMem(0xbc59), 0x8c);
        EXPECT(gbc.readMem(0xbc5a), 0x6);
        // 21 0094
        gbc.setState(0x5310, 0x26b2, 0x76d0, 0xbd4b, 0xf64d, 0x32c7, 0x0, 0x0);
        gbc.writeMem(0x5310, { 0x21, 0xdd, 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x26b2);
        EXPECT(gbc.pc(), 0x5313);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0095
        gbc.setState(0x290b, 0xc53c, 0x11e0, 0xec86, 0x9a3d, 0x6f77, 0x1, 0x0);
        gbc.writeMem(0x290b, { 0x21, 0x11, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xc53c);
        EXPECT(gbc.pc(), 0x290e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0096
        gbc.setState(0xe4fd, 0xd44, 0x5b10, 0xaafe, 0x63c7, 0xee35, 0x0, 0x0);
        gbc.writeMem(0xe4fd, { 0x21, 0x4c, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd44);
        EXPECT(gbc.pc(), 0xe500);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4fd), 0x21);
        EXPECT(gbc.readMem(0xe4fe), 0x4c);
        EXPECT(gbc.readMem(0xe4ff), 0x89);
        // 21 0097
        gbc.setState(0xcd77, 0xd6b1, 0x3250, 0x20bf, 0xf9a, 0xf5bb, 0x0, 0x0);
        gbc.writeMem(0xcd77, { 0x21, 0x6d, 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xd6b1);
        EXPECT(gbc.pc(), 0xcd7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd77), 0x21);
        EXPECT(gbc.readMem(0xcd78), 0x6d);
        EXPECT(gbc.readMem(0xcd79), 0xb2);
        // 21 0098
        gbc.setState(0x4d75, 0x8417, 0x81a0, 0x361, 0x1167, 0x6f92, 0x1, 0x0);
        gbc.writeMem(0x4d75, { 0x21, 0x42, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x8417);
        EXPECT(gbc.pc(), 0x4d78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0099
        gbc.setState(0x6c6c, 0x4c22, 0x9050, 0x20ea, 0x4553, 0x9109, 0x0, 0x0);
        gbc.writeMem(0x6c6c, { 0x21, 0x56, 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x4c22);
        EXPECT(gbc.pc(), 0x6c6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 009A
        gbc.setState(0x2ee9, 0xab46, 0x1f90, 0x68b5, 0xbdfe, 0x9f23, 0x1, 0x0);
        gbc.writeMem(0x2ee9, { 0x21, 0x70, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xab46);
        EXPECT(gbc.pc(), 0x2eec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 009B
        gbc.setState(0xcc71, 0x19e, 0xf230, 0x9d9a, 0x54e8, 0x6223, 0x0, 0x1);
        gbc.writeMem(0xcc71, { 0x21, 0xa2, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x19e);
        EXPECT(gbc.pc(), 0xcc74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc71), 0x21);
        EXPECT(gbc.readMem(0xcc72), 0xa2);
        EXPECT(gbc.readMem(0xcc73), 0xf4);
        // 21 009C
        gbc.setState(0x7945, 0xfde, 0x9070, 0xd557, 0xda48, 0xec90, 0x0, 0x0);
        gbc.writeMem(0x7945, { 0x21, 0xfb, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xfde);
        EXPECT(gbc.pc(), 0x7948);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 009E
        gbc.setState(0x4b3d, 0x7a04, 0xbf90, 0xef76, 0x1173, 0x3648, 0x1, 0x1);
        gbc.writeMem(0x4b3d, { 0x21, 0x7a, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x7a04);
        EXPECT(gbc.pc(), 0x4b40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 009F
        gbc.setState(0x1a41, 0xf218, 0xebe0, 0x8cbf, 0x1f6d, 0xbda0, 0x0, 0x1);
        gbc.writeMem(0x1a41, { 0x21, 0x6b, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xf218);
        EXPECT(gbc.pc(), 0x1a44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 00A0
        gbc.setState(0x8e57, 0xf105, 0x9390, 0x2bd5, 0x5e2c, 0x939b, 0x1, 0x0);
        gbc.writeMem(0x8e57, { 0x21, 0x10, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xf105);
        EXPECT(gbc.pc(), 0x8e5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e57), 0x21);
        EXPECT(gbc.readMem(0x8e58), 0x10);
        EXPECT(gbc.readMem(0x8e59), 0x75);
        // 21 00A1
        gbc.setState(0xc084, 0x3814, 0x2110, 0xa3c2, 0xfb37, 0xcd1, 0x1, 0x0);
        gbc.writeMem(0xc084, { 0x21, 0x43, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x3814);
        EXPECT(gbc.pc(), 0xc087);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc084), 0x21);
        EXPECT(gbc.readMem(0xc085), 0x43);
        EXPECT(gbc.readMem(0xc086), 0x5e);
        // 21 00A3
        gbc.setState(0x75e3, 0xb3a1, 0x9310, 0x6d3f, 0x1fc1, 0x476f, 0x1, 0x1);
        gbc.writeMem(0x75e3, { 0x21, 0x50, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xb3a1);
        EXPECT(gbc.pc(), 0x75e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 00A4
        gbc.setState(0x5cac, 0xaf5a, 0xee60, 0x1846, 0xbe6b, 0x4d85, 0x0, 0x1);
        gbc.writeMem(0x5cac, { 0x21, 0x81, 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xaf5a);
        EXPECT(gbc.pc(), 0x5caf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 00A5
        gbc.setState(0xd853, 0x5b6d, 0xb570, 0x515e, 0x93ca, 0x292a, 0x1, 0x0);
        gbc.writeMem(0xd853, { 0x21, 0xe7, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x5b6d);
        EXPECT(gbc.pc(), 0xd856);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd853), 0x21);
        EXPECT(gbc.readMem(0xd854), 0xe7);
        EXPECT(gbc.readMem(0xd855), 0x83);
        // 21 00A6
        gbc.setState(0x4df1, 0xf606, 0x9ce0, 0xe89e, 0x2617, 0xfe8c, 0x0, 0x1);
        gbc.writeMem(0x4df1, { 0x21, 0xce, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xf606);
        EXPECT(gbc.pc(), 0x4df4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 00A7
        gbc.setState(0x1329, 0x5c90, 0x7670, 0x8668, 0xa65, 0x36e9, 0x1, 0x0);
        gbc.writeMem(0x1329, { 0x21, 0x54, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x5c90);
        EXPECT(gbc.pc(), 0x132c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 00A8
        gbc.setState(0xa2ec, 0xba50, 0x6250, 0x4e5e, 0x969b, 0xd4de, 0x1, 0x0);
        gbc.writeMem(0xa2ec, { 0x21, 0x5a, 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xba50);
        EXPECT(gbc.pc(), 0xa2ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2ec), 0x21);
        EXPECT(gbc.readMem(0xa2ed), 0x5a);
        EXPECT(gbc.readMem(0xa2ee), 0x8a);
        // 21 00A9
        gbc.setState(0x8607, 0x585a, 0xed70, 0xc571, 0x345b, 0x8451, 0x1, 0x0);
        gbc.writeMem(0x8607, { 0x21, 0xf1, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x585a);
        EXPECT(gbc.pc(), 0x860a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8607), 0x21);
        EXPECT(gbc.readMem(0x8608), 0xf1);
        EXPECT(gbc.readMem(0x8609), 0x51);
        // 21 00AA
        gbc.setState(0x7102, 0xff80, 0xb1e0, 0xc194, 0xac9c, 0xa0d3, 0x0, 0x1);
        gbc.writeMem(0x7102, { 0x21, 0xe0, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xff80);
        EXPECT(gbc.pc(), 0x7105);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 00AB
        gbc.setState(0xe656, 0x4b7f, 0x1a10, 0x1835, 0x19d1, 0x312b, 0x0, 0x0);
        gbc.writeMem(0xe656, { 0x21, 0x3c, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x4b7f);
        EXPECT(gbc.pc(), 0xe659);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe656), 0x21);
        EXPECT(gbc.readMem(0xe657), 0x3c);
        EXPECT(gbc.readMem(0xe658), 0xad);
        // 21 00AC
        gbc.setState(0x8f71, 0x55c3, 0x7e20, 0xac3f, 0x6acc, 0x5d30, 0x1, 0x0);
        gbc.writeMem(0x8f71, { 0x21, 0x47, 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x55c3);
        EXPECT(gbc.pc(), 0x8f74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f71), 0x21);
        EXPECT(gbc.readMem(0x8f72), 0x47);
        EXPECT(gbc.readMem(0x8f73), 0xdd);
        // 21 00AD
        gbc.setState(0xbabd, 0x6cce, 0x7ab0, 0xb21, 0xafdb, 0x7df7, 0x0, 0x1);
        gbc.writeMem(0xbabd, { 0x21, 0x39, 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x6cce);
        EXPECT(gbc.pc(), 0xbac0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbabd), 0x21);
        EXPECT(gbc.readMem(0xbabe), 0x39);
        EXPECT(gbc.readMem(0xbabf), 0xe2);
        // 21 00AE
        gbc.setState(0x62b8, 0x3c0a, 0x8dd0, 0xe476, 0x9ec8, 0x2a56, 0x0, 0x0);
        gbc.writeMem(0x62b8, { 0x21, 0x10, 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x3c0a);
        EXPECT(gbc.pc(), 0x62bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 00AF
        gbc.setState(0x53eb, 0x55cd, 0xdfb0, 0x9932, 0x8e96, 0x69f9, 0x1, 0x0);
        gbc.writeMem(0x53eb, { 0x21, 0xbf, 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x55cd);
        EXPECT(gbc.pc(), 0x53ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 00B0
        gbc.setState(0xd041, 0xc659, 0x20a0, 0x9c37, 0xeb65, 0xc3b6, 0x1, 0x0);
        gbc.writeMem(0xd041, { 0x21, 0x34, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc659);
        EXPECT(gbc.pc(), 0xd044);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd041), 0x21);
        EXPECT(gbc.readMem(0xd042), 0x34);
        EXPECT(gbc.readMem(0xd043), 0x3e);
        // 21 00B1
        gbc.setState(0xc728, 0xe1ea, 0x2fc0, 0x8fdf, 0x51d4, 0x6263, 0x0, 0x0);
        gbc.writeMem(0xc728, { 0x21, 0xbb, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xe1ea);
        EXPECT(gbc.pc(), 0xc72b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc728), 0x21);
        EXPECT(gbc.readMem(0xc729), 0xbb);
        EXPECT(gbc.readMem(0xc72a), 0x86);
        // 21 00B2
        gbc.setState(0xb3fd, 0x2fa, 0x2180, 0x1a63, 0x7bd4, 0xb15f, 0x1, 0x0);
        gbc.writeMem(0xb3fd, { 0x21, 0xd1, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x2fa);
        EXPECT(gbc.pc(), 0xb400);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3fd), 0x21);
        EXPECT(gbc.readMem(0xb3fe), 0xd1);
        EXPECT(gbc.readMem(0xb3ff), 0x31);
        // 21 00B3
        gbc.setState(0x469, 0x1fdb, 0xaf0, 0xe087, 0x4873, 0x379d, 0x0, 0x1);
        gbc.writeMem(0x469, { 0x21, 0xf, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x1fdb);
        EXPECT(gbc.pc(), 0x46c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 00B4
        gbc.setState(0xd89c, 0x4643, 0x9e70, 0x85e2, 0x3202, 0xac3c, 0x1, 0x1);
        gbc.writeMem(0xd89c, { 0x21, 0x58, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4643);
        EXPECT(gbc.pc(), 0xd89f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd89c), 0x21);
        EXPECT(gbc.readMem(0xd89d), 0x58);
        EXPECT(gbc.readMem(0xd89e), 0x8d);
        // 21 00B5
        gbc.setState(0xb6c3, 0x4683, 0xd100, 0xf6d5, 0x189d, 0xcff8, 0x1, 0x1);
        gbc.writeMem(0xb6c3, { 0x21, 0xd9, 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x4683);
        EXPECT(gbc.pc(), 0xb6c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6c3), 0x21);
        EXPECT(gbc.readMem(0xb6c4), 0xd9);
        EXPECT(gbc.readMem(0xb6c5), 0x55);
        // 21 00B6
        gbc.setState(0xc1f8, 0xe5b7, 0x9180, 0x9627, 0x329c, 0x87ec, 0x1, 0x1);
        gbc.writeMem(0xc1f8, { 0x21, 0x38, 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xe5b7);
        EXPECT(gbc.pc(), 0xc1fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1f8), 0x21);
        EXPECT(gbc.readMem(0xc1f9), 0x38);
        EXPECT(gbc.readMem(0xc1fa), 0x8a);
        // 21 00B7
        gbc.setState(0x4354, 0x9821, 0xf60, 0x439b, 0xb21d, 0x10b, 0x0, 0x0);
        gbc.writeMem(0x4354, { 0x21, 0xfa, 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x9821);
        EXPECT(gbc.pc(), 0x4357);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 00B8
        gbc.setState(0xafa, 0xa468, 0x1e10, 0xc01a, 0x2305, 0x661b, 0x0, 0x0);
        gbc.writeMem(0xafa, { 0x21, 0x5b, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xa468);
        EXPECT(gbc.pc(), 0xafd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 00B9
        gbc.setState(0xb0fb, 0x4916, 0xa390, 0x3b19, 0x20c1, 0x37f5, 0x1, 0x0);
        gbc.writeMem(0xb0fb, { 0x21, 0xaf, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x4916);
        EXPECT(gbc.pc(), 0xb0fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0fb), 0x21);
        EXPECT(gbc.readMem(0xb0fc), 0xaf);
        EXPECT(gbc.readMem(0xb0fd), 0xe6);
        // 21 00BA
        gbc.setState(0x97b2, 0xc8be, 0xda00, 0x8bf1, 0xff6d, 0x880b, 0x0, 0x1);
        gbc.writeMem(0x97b2, { 0x21, 0xf3, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xc8be);
        EXPECT(gbc.pc(), 0x97b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97b2), 0x21);
        EXPECT(gbc.readMem(0x97b3), 0xf3);
        EXPECT(gbc.readMem(0x97b4), 0x3b);
        // 21 00BB
        gbc.setState(0x950a, 0x9c12, 0x9f00, 0xd648, 0x9fcf, 0xd450, 0x1, 0x1);
        gbc.writeMem(0x950a, { 0x21, 0x61, 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x9c12);
        EXPECT(gbc.pc(), 0x950d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x950a), 0x21);
        EXPECT(gbc.readMem(0x950b), 0x61);
        EXPECT(gbc.readMem(0x950c), 0x9f);
        // 21 00BC
        gbc.setState(0x6ce9, 0xb7e4, 0xd800, 0x9c45, 0x6a59, 0xf1b3, 0x1, 0x1);
        gbc.writeMem(0x6ce9, { 0x21, 0xbd, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xb7e4);
        EXPECT(gbc.pc(), 0x6cec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 00BD
        gbc.setState(0x1d23, 0x3d3f, 0xf850, 0x7114, 0x4714, 0xc3c3, 0x0, 0x0);
        gbc.writeMem(0x1d23, { 0x21, 0x77, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x3d3f);
        EXPECT(gbc.pc(), 0x1d26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 00BE
        gbc.setState(0x4010, 0xc724, 0x230, 0x630a, 0x1e5e, 0xabb5, 0x0, 0x1);
        gbc.writeMem(0x4010, { 0x21, 0x12, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xc724);
        EXPECT(gbc.pc(), 0x4013);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 00BF
        gbc.setState(0xdef0, 0x49e9, 0x50f0, 0xbe6, 0xbf74, 0xf86d, 0x0, 0x0);
        gbc.writeMem(0xdef0, { 0x21, 0xe7, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x49e9);
        EXPECT(gbc.pc(), 0xdef3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdef0), 0x21);
        EXPECT(gbc.readMem(0xdef1), 0xe7);
        EXPECT(gbc.readMem(0xdef2), 0x3e);
        // 21 00C0
        gbc.setState(0xcc13, 0xbc99, 0xdcf0, 0x5321, 0x6270, 0x3027, 0x0, 0x1);
        gbc.writeMem(0xcc13, { 0x21, 0xc9, 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xbc99);
        EXPECT(gbc.pc(), 0xcc16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc13), 0x21);
        EXPECT(gbc.readMem(0xcc14), 0xc9);
        EXPECT(gbc.readMem(0xcc15), 0x67);
        // 21 00C1
        gbc.setState(0xd0fd, 0x913, 0xc060, 0x9636, 0x1da1, 0x20f, 0x0, 0x0);
        gbc.writeMem(0xd0fd, { 0x21, 0xde, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x913);
        EXPECT(gbc.pc(), 0xd100);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0fd), 0x21);
        EXPECT(gbc.readMem(0xd0fe), 0xde);
        EXPECT(gbc.readMem(0xd0ff), 0x9);
        // 21 00C2
        gbc.setState(0x6156, 0xd0bb, 0x1830, 0x36df, 0xf674, 0x5081, 0x0, 0x1);
        gbc.writeMem(0x6156, { 0x21, 0x14, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd0bb);
        EXPECT(gbc.pc(), 0x6159);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 00C3
        gbc.setState(0xcd94, 0xd03, 0x45d0, 0xcfc2, 0x5883, 0x8ad2, 0x1, 0x1);
        gbc.writeMem(0xcd94, { 0x21, 0x58, 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xd03);
        EXPECT(gbc.pc(), 0xcd97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd94), 0x21);
        EXPECT(gbc.readMem(0xcd95), 0x58);
        EXPECT(gbc.readMem(0xcd96), 0x63);
        // 21 00C4
        gbc.setState(0x937, 0x91bf, 0x9230, 0x1a56, 0xcb39, 0xd9ad, 0x0, 0x1);
        gbc.writeMem(0x937, { 0x21, 0xbd, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x91bf);
        EXPECT(gbc.pc(), 0x93a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 00C5
        gbc.setState(0x9200, 0xdc48, 0x3dd0, 0xf949, 0x32a8, 0xe1ba, 0x0, 0x1);
        gbc.writeMem(0x9200, { 0x21, 0x16, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xdc48);
        EXPECT(gbc.pc(), 0x9203);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9200), 0x21);
        EXPECT(gbc.readMem(0x9201), 0x16);
        EXPECT(gbc.readMem(0x9202), 0xb9);
        // 21 00C6
        gbc.setState(0x7ae, 0x9479, 0xecd0, 0x288c, 0x5db3, 0x6b9e, 0x1, 0x0);
        gbc.writeMem(0x7ae, { 0x21, 0x1c, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x9479);
        EXPECT(gbc.pc(), 0x7b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 00C7
        gbc.setState(0x363d, 0xc7fa, 0x10d0, 0x55bb, 0x9b52, 0x5fbc, 0x1, 0x1);
        gbc.writeMem(0x363d, { 0x21, 0xd, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xc7fa);
        EXPECT(gbc.pc(), 0x3640);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 00C8
        gbc.setState(0xf88, 0xbe11, 0x63d0, 0xa446, 0xa92a, 0x68b9, 0x0, 0x0);
        gbc.writeMem(0xf88, { 0x21, 0x99, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xbe11);
        EXPECT(gbc.pc(), 0xf8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 00C9
        gbc.setState(0xa1c9, 0x1fb9, 0x3c60, 0x8404, 0x69, 0x6c1e, 0x1, 0x0);
        gbc.writeMem(0xa1c9, { 0x21, 0x87, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x1fb9);
        EXPECT(gbc.pc(), 0xa1cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1c9), 0x21);
        EXPECT(gbc.readMem(0xa1ca), 0x87);
        EXPECT(gbc.readMem(0xa1cb), 0x8c);
        // 21 00CA
        gbc.setState(0x8f38, 0x3e7c, 0x3bd0, 0x90e3, 0x3d0d, 0xd641, 0x1, 0x1);
        gbc.writeMem(0x8f38, { 0x21, 0xf, 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x3e7c);
        EXPECT(gbc.pc(), 0x8f3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f38), 0x21);
        EXPECT(gbc.readMem(0x8f39), 0xf);
        EXPECT(gbc.readMem(0x8f3a), 0xef);
        // 21 00CB
        gbc.setState(0x36d, 0x92ca, 0xcd40, 0xa8b0, 0xf85e, 0xda3a, 0x1, 0x0);
        gbc.writeMem(0x36d, { 0x21, 0xaf, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x92ca);
        EXPECT(gbc.pc(), 0x370);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 00CC
        gbc.setState(0x7949, 0xaa27, 0x2be0, 0x94cd, 0x3dbb, 0xbf45, 0x0, 0x1);
        gbc.writeMem(0x7949, { 0x21, 0xe, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xaa27);
        EXPECT(gbc.pc(), 0x794c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 00CD
        gbc.setState(0x6bf2, 0x99d, 0xe430, 0x6b27, 0x699d, 0xea4a, 0x0, 0x0);
        gbc.writeMem(0x6bf2, { 0x21, 0x47, 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x99d);
        EXPECT(gbc.pc(), 0x6bf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 00CE
        gbc.setState(0x3bdc, 0xbb72, 0xcee0, 0xb115, 0xf21c, 0x208a, 0x0, 0x1);
        gbc.writeMem(0x3bdc, { 0x21, 0x26, 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xbb72);
        EXPECT(gbc.pc(), 0x3bdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 00CF
        gbc.setState(0x1a6, 0x7da8, 0xcca0, 0x9023, 0x6722, 0xd37b, 0x1, 0x1);
        gbc.writeMem(0x1a6, { 0x21, 0x5, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x7da8);
        EXPECT(gbc.pc(), 0x1a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 00D0
        gbc.setState(0x233b, 0xc903, 0xa3e0, 0xfa09, 0x408b, 0xd792, 0x0, 0x0);
        gbc.writeMem(0x233b, { 0x21, 0xcd, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xc903);
        EXPECT(gbc.pc(), 0x233e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 00D1
        gbc.setState(0x20ea, 0x6de3, 0x6230, 0x4bd4, 0xe68d, 0x198e, 0x1, 0x0);
        gbc.writeMem(0x20ea, { 0x21, 0x69, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x6de3);
        EXPECT(gbc.pc(), 0x20ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 00D2
        gbc.setState(0x59b6, 0x10ea, 0xa850, 0x2dc, 0x1996, 0x1a67, 0x0, 0x1);
        gbc.writeMem(0x59b6, { 0x21, 0xd0, 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x10ea);
        EXPECT(gbc.pc(), 0x59b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 00D3
        gbc.setState(0xc78d, 0x461a, 0xa0f0, 0xcf0b, 0x5b19, 0x2233, 0x1, 0x0);
        gbc.writeMem(0xc78d, { 0x21, 0xb8, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x461a);
        EXPECT(gbc.pc(), 0xc790);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc78d), 0x21);
        EXPECT(gbc.readMem(0xc78e), 0xb8);
        EXPECT(gbc.readMem(0xc78f), 0xd3);
        // 21 00D4
        gbc.setState(0x4790, 0x5a2f, 0x4330, 0x3de5, 0xe69b, 0x776f, 0x0, 0x0);
        gbc.writeMem(0x4790, { 0x21, 0x7e, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x5a2f);
        EXPECT(gbc.pc(), 0x4793);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 00D5
        gbc.setState(0xded6, 0x9991, 0x81c0, 0xb284, 0x721c, 0x3b85, 0x0, 0x0);
        gbc.writeMem(0xded6, { 0x21, 0x4e, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x9991);
        EXPECT(gbc.pc(), 0xded9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xded6), 0x21);
        EXPECT(gbc.readMem(0xded7), 0x4e);
        EXPECT(gbc.readMem(0xded8), 0xb0);
        // 21 00D6
        gbc.setState(0x66c8, 0xa951, 0x2220, 0x5722, 0xccab, 0x7f11, 0x1, 0x0);
        gbc.writeMem(0x66c8, { 0x21, 0xb7, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xa951);
        EXPECT(gbc.pc(), 0x66cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 00D7
        gbc.setState(0xa24c, 0x6b57, 0x5710, 0x3a0a, 0xe5c6, 0xa82d, 0x1, 0x0);
        gbc.writeMem(0xa24c, { 0x21, 0x3a, 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x6b57);
        EXPECT(gbc.pc(), 0xa24f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa24c), 0x21);
        EXPECT(gbc.readMem(0xa24d), 0x3a);
        EXPECT(gbc.readMem(0xa24e), 0x22);
        // 21 00D8
        gbc.setState(0x8151, 0x3b4b, 0x28d0, 0x5025, 0x6ee0, 0x75d1, 0x0, 0x1);
        gbc.writeMem(0x8151, { 0x21, 0x10, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x3b4b);
        EXPECT(gbc.pc(), 0x8154);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8151), 0x21);
        EXPECT(gbc.readMem(0x8152), 0x10);
        EXPECT(gbc.readMem(0x8153), 0x2f);
        // 21 00D9
        gbc.setState(0x21a9, 0x2336, 0x5700, 0x9923, 0x28f5, 0x299d, 0x0, 0x0);
        gbc.writeMem(0x21a9, { 0x21, 0x84, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x2336);
        EXPECT(gbc.pc(), 0x21ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 00DA
        gbc.setState(0x2f82, 0xa652, 0xa1e0, 0xe8b0, 0x7f62, 0x3839, 0x0, 0x0);
        gbc.writeMem(0x2f82, { 0x21, 0x24, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xa652);
        EXPECT(gbc.pc(), 0x2f85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 00DB
        gbc.setState(0x984b, 0x2f6b, 0xc8d0, 0xc376, 0xa412, 0x319a, 0x1, 0x0);
        gbc.writeMem(0x984b, { 0x21, 0xe0, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x2f6b);
        EXPECT(gbc.pc(), 0x984e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x984b), 0x21);
        EXPECT(gbc.readMem(0x984c), 0xe0);
        EXPECT(gbc.readMem(0x984d), 0xf9);
        // 21 00DD
        gbc.setState(0xbeb6, 0x49e5, 0xd900, 0x675e, 0x1ffa, 0x1aa4, 0x0, 0x1);
        gbc.writeMem(0xbeb6, { 0x21, 0xd5, 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x49e5);
        EXPECT(gbc.pc(), 0xbeb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeb6), 0x21);
        EXPECT(gbc.readMem(0xbeb7), 0xd5);
        EXPECT(gbc.readMem(0xbeb8), 0x65);
        // 21 00DE
        gbc.setState(0xed63, 0x1c88, 0x35a0, 0xea71, 0x56b6, 0x533e, 0x1, 0x0);
        gbc.writeMem(0xed63, { 0x21, 0xbb, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x1c88);
        EXPECT(gbc.pc(), 0xed66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed63), 0x21);
        EXPECT(gbc.readMem(0xed64), 0xbb);
        EXPECT(gbc.readMem(0xed65), 0xe1);
        // 21 00DF
        gbc.setState(0x8848, 0xe5df, 0xb400, 0xa22, 0xf73e, 0xe437, 0x1, 0x1);
        gbc.writeMem(0x8848, { 0x21, 0x5e, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xe5df);
        EXPECT(gbc.pc(), 0x884b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8848), 0x21);
        EXPECT(gbc.readMem(0x8849), 0x5e);
        EXPECT(gbc.readMem(0x884a), 0xd0);
        // 21 00E0
        gbc.setState(0xc08a, 0x27fc, 0x95b0, 0x428c, 0x2f08, 0x275d, 0x1, 0x0);
        gbc.writeMem(0xc08a, { 0x21, 0x64, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x27fc);
        EXPECT(gbc.pc(), 0xc08d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc08a), 0x21);
        EXPECT(gbc.readMem(0xc08b), 0x64);
        EXPECT(gbc.readMem(0xc08c), 0x86);
        // 21 00E1
        gbc.setState(0x84e5, 0x5c89, 0x8dd0, 0x15d7, 0xb70b, 0x11f2, 0x1, 0x0);
        gbc.writeMem(0x84e5, { 0x21, 0xc9, 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x5c89);
        EXPECT(gbc.pc(), 0x84e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84e5), 0x21);
        EXPECT(gbc.readMem(0x84e6), 0xc9);
        EXPECT(gbc.readMem(0x84e7), 0x5d);
        // 21 00E2
        gbc.setState(0xa35f, 0x221a, 0x2f50, 0xf907, 0xf882, 0x402, 0x1, 0x0);
        gbc.writeMem(0xa35f, { 0x21, 0x2d, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x221a);
        EXPECT(gbc.pc(), 0xa362);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa35f), 0x21);
        EXPECT(gbc.readMem(0xa360), 0x2d);
        EXPECT(gbc.readMem(0xa361), 0x8c);
        // 21 00E3
        gbc.setState(0xd2ce, 0x7fd3, 0x8c50, 0xf01, 0xe0, 0xfa01, 0x1, 0x0);
        gbc.writeMem(0xd2ce, { 0x21, 0x5b, 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7fd3);
        EXPECT(gbc.pc(), 0xd2d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2ce), 0x21);
        EXPECT(gbc.readMem(0xd2cf), 0x5b);
        EXPECT(gbc.readMem(0xd2d0), 0x1);
        // 21 00E4
        gbc.setState(0x92e2, 0x1b7a, 0x8640, 0x50eb, 0x8cfc, 0x7c22, 0x0, 0x1);
        gbc.writeMem(0x92e2, { 0x21, 0x52, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x1b7a);
        EXPECT(gbc.pc(), 0x92e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92e2), 0x21);
        EXPECT(gbc.readMem(0x92e3), 0x52);
        EXPECT(gbc.readMem(0x92e4), 0xd);
        // 21 00E5
        gbc.setState(0xb154, 0xdce8, 0x340, 0x8b77, 0xd9ee, 0xf366, 0x0, 0x0);
        gbc.writeMem(0xb154, { 0x21, 0x8a, 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xdce8);
        EXPECT(gbc.pc(), 0xb157);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb154), 0x21);
        EXPECT(gbc.readMem(0xb155), 0x8a);
        EXPECT(gbc.readMem(0xb156), 0xdd);
        // 21 00E6
        gbc.setState(0xda67, 0xe927, 0x64f0, 0x9b22, 0xf4a9, 0xa21d, 0x0, 0x0);
        gbc.writeMem(0xda67, { 0x21, 0x15, 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xe927);
        EXPECT(gbc.pc(), 0xda6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda67), 0x21);
        EXPECT(gbc.readMem(0xda68), 0x15);
        EXPECT(gbc.readMem(0xda69), 0x71);
        // 21 00E7
        gbc.setState(0x557f, 0xe634, 0xcd30, 0x3997, 0xa2d, 0x82b7, 0x0, 0x0);
        gbc.writeMem(0x557f, { 0x21, 0x1f, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xe634);
        EXPECT(gbc.pc(), 0x5582);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 00E8
        gbc.setState(0x563c, 0xad64, 0x3720, 0xf536, 0x6f86, 0xb5e0, 0x1, 0x1);
        gbc.writeMem(0x563c, { 0x21, 0xf7, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xad64);
        EXPECT(gbc.pc(), 0x563f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 00E9
        gbc.setState(0x37cb, 0xc678, 0x4380, 0xc92e, 0x99cb, 0xdbd7, 0x0, 0x1);
        gbc.writeMem(0x37cb, { 0x21, 0x7e, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xc678);
        EXPECT(gbc.pc(), 0x37ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 00EA
        gbc.setState(0xc876, 0xc1a0, 0x2b0, 0x3d29, 0xe5c4, 0x1763, 0x0, 0x1);
        gbc.writeMem(0xc876, { 0x21, 0x1b, 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xc1a0);
        EXPECT(gbc.pc(), 0xc879);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc876), 0x21);
        EXPECT(gbc.readMem(0xc877), 0x1b);
        EXPECT(gbc.readMem(0xc878), 0x7f);
        // 21 00EB
        gbc.setState(0x2048, 0xffb6, 0x2ec0, 0xa167, 0xf479, 0x4c9d, 0x1, 0x1);
        gbc.writeMem(0x2048, { 0x21, 0xa7, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xffb6);
        EXPECT(gbc.pc(), 0x204b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 00EC
        gbc.setState(0xd4ac, 0xba60, 0xd30, 0xb9c6, 0x7ce1, 0xe2ca, 0x0, 0x0);
        gbc.writeMem(0xd4ac, { 0x21, 0x2f, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xba60);
        EXPECT(gbc.pc(), 0xd4af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4ac), 0x21);
        EXPECT(gbc.readMem(0xd4ad), 0x2f);
        EXPECT(gbc.readMem(0xd4ae), 0x0);
        // 21 00ED
        gbc.setState(0xe5fc, 0x3ee2, 0x20a0, 0xc7e3, 0x9028, 0x8b94, 0x1, 0x0);
        gbc.writeMem(0xe5fc, { 0x21, 0x17, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x3ee2);
        EXPECT(gbc.pc(), 0xe5ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5fc), 0x21);
        EXPECT(gbc.readMem(0xe5fd), 0x17);
        EXPECT(gbc.readMem(0xe5fe), 0xe1);
        // 21 00EE
        gbc.setState(0xc6c, 0xf272, 0x5d50, 0xb306, 0xfbcc, 0x63ec, 0x1, 0x0);
        gbc.writeMem(0xc6c, { 0x21, 0x9a, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xf272);
        EXPECT(gbc.pc(), 0xc6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 00EF
        gbc.setState(0x9533, 0x1802, 0x2770, 0x83e9, 0x13d1, 0x1b0c, 0x0, 0x1);
        gbc.writeMem(0x9533, { 0x21, 0xe, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x1802);
        EXPECT(gbc.pc(), 0x9536);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9533), 0x21);
        EXPECT(gbc.readMem(0x9534), 0xe);
        EXPECT(gbc.readMem(0x9535), 0x98);
        // 21 00F0
        gbc.setState(0x2d5e, 0x4dc7, 0xb6b0, 0x3418, 0xece, 0x5b2f, 0x0, 0x0);
        gbc.writeMem(0x2d5e, { 0x21, 0xad, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x4dc7);
        EXPECT(gbc.pc(), 0x2d61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 00F1
        gbc.setState(0x78c1, 0x11b2, 0xa880, 0x236c, 0x42d4, 0x7690, 0x1, 0x1);
        gbc.writeMem(0x78c1, { 0x21, 0x7, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x11b2);
        EXPECT(gbc.pc(), 0x78c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 00F2
        gbc.setState(0xe3d5, 0x9bb6, 0xa50, 0x8bb4, 0x7033, 0xa1fc, 0x1, 0x1);
        gbc.writeMem(0xe3d5, { 0x21, 0xb4, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x9bb6);
        EXPECT(gbc.pc(), 0xe3d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3d5), 0x21);
        EXPECT(gbc.readMem(0xe3d6), 0xb4);
        EXPECT(gbc.readMem(0xe3d7), 0xd8);
        // 21 00F3
        gbc.setState(0x6efc, 0x5183, 0x8900, 0xfbea, 0xf626, 0x2acb, 0x1, 0x1);
        gbc.writeMem(0x6efc, { 0x21, 0xa0, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x5183);
        EXPECT(gbc.pc(), 0x6eff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 00F4
        gbc.setState(0xecde, 0x2db3, 0x8110, 0xf6ac, 0x6ead, 0x27f5, 0x1, 0x0);
        gbc.writeMem(0xecde, { 0x21, 0x84, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x2db3);
        EXPECT(gbc.pc(), 0xece1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecde), 0x21);
        EXPECT(gbc.readMem(0xecdf), 0x84);
        EXPECT(gbc.readMem(0xece0), 0x2e);
        // 21 00F5
        gbc.setState(0x1a6c, 0xa2f5, 0x8560, 0xd16b, 0x52d1, 0x9363, 0x0, 0x0);
        gbc.writeMem(0x1a6c, { 0x21, 0xc, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xa2f5);
        EXPECT(gbc.pc(), 0x1a6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 00F6
        gbc.setState(0x4d23, 0xae85, 0xa5f0, 0x5864, 0x5c15, 0xbf50, 0x0, 0x0);
        gbc.writeMem(0x4d23, { 0x21, 0xb, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xae85);
        EXPECT(gbc.pc(), 0x4d26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 00F7
        gbc.setState(0xb79c, 0x886f, 0x7ab0, 0xbce3, 0x3f62, 0xcd37, 0x1, 0x0);
        gbc.writeMem(0xb79c, { 0x21, 0xcf, 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x886f);
        EXPECT(gbc.pc(), 0xb79f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb79c), 0x21);
        EXPECT(gbc.readMem(0xb79d), 0xcf);
        EXPECT(gbc.readMem(0xb79e), 0xd1);
        // 21 00F8
        gbc.setState(0x6f22, 0xbd47, 0x63b0, 0xe00c, 0x2cd, 0x633a, 0x1, 0x0);
        gbc.writeMem(0x6f22, { 0x21, 0xad, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xbd47);
        EXPECT(gbc.pc(), 0x6f25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 00F9
        gbc.setState(0xd5cc, 0x7bd0, 0xda60, 0x1556, 0x88fe, 0x9d5e, 0x1, 0x0);
        gbc.writeMem(0xd5cc, { 0x21, 0x9c, 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x7bd0);
        EXPECT(gbc.pc(), 0xd5cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5cc), 0x21);
        EXPECT(gbc.readMem(0xd5cd), 0x9c);
        EXPECT(gbc.readMem(0xd5ce), 0xeb);
        // 21 00FA
        gbc.setState(0x2228, 0x6cbf, 0x4fb0, 0x995f, 0xb2f7, 0xabbd, 0x1, 0x1);
        gbc.writeMem(0x2228, { 0x21, 0xba, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x6cbf);
        EXPECT(gbc.pc(), 0x222b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 00FB
        gbc.setState(0x64ec, 0xb7e6, 0xc2b0, 0xe006, 0x7cea, 0x65eb, 0x0, 0x1);
        gbc.writeMem(0x64ec, { 0x21, 0x25, 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xb7e6);
        EXPECT(gbc.pc(), 0x64ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 00FC
        gbc.setState(0xe311, 0x23e7, 0xb0b0, 0xe789, 0x402e, 0x8dc, 0x0, 0x0);
        gbc.writeMem(0xe311, { 0x21, 0x33, 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x23e7);
        EXPECT(gbc.pc(), 0xe314);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe311), 0x21);
        EXPECT(gbc.readMem(0xe312), 0x33);
        EXPECT(gbc.readMem(0xe313), 0xc2);
        // 21 00FD
        gbc.setState(0x6b28, 0xaae3, 0x7f60, 0x25d2, 0x286e, 0x665b, 0x0, 0x1);
        gbc.writeMem(0x6b28, { 0x21, 0xbf, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xaae3);
        EXPECT(gbc.pc(), 0x6b2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 00FE
        gbc.setState(0xcbc0, 0x512f, 0x5210, 0xea11, 0x42d9, 0x3a4a, 0x0, 0x0);
        gbc.writeMem(0xcbc0, { 0x21, 0xf4, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x512f);
        EXPECT(gbc.pc(), 0xcbc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbc0), 0x21);
        EXPECT(gbc.readMem(0xcbc1), 0xf4);
        EXPECT(gbc.readMem(0xcbc2), 0x31);
        // 21 00FF
        gbc.setState(0xa644, 0x935d, 0x2ac0, 0xe3a5, 0xac5b, 0xcc31, 0x1, 0x1);
        gbc.writeMem(0xa644, { 0x21, 0xe6, 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x935d);
        EXPECT(gbc.pc(), 0xa647);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa644), 0x21);
        EXPECT(gbc.readMem(0xa645), 0xe6);
        EXPECT(gbc.readMem(0xa646), 0xa);
        // 21 0100
        gbc.setState(0x2075, 0x73d1, 0x1550, 0xba70, 0x31e1, 0xabd3, 0x1, 0x0);
        gbc.writeMem(0x2075, { 0x21, 0x24, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x73d1);
        EXPECT(gbc.pc(), 0x2078);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0101
        gbc.setState(0x42ae, 0x8264, 0x8870, 0xe236, 0x90cb, 0x6b1b, 0x0, 0x0);
        gbc.writeMem(0x42ae, { 0x21, 0xf0, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x8264);
        EXPECT(gbc.pc(), 0x42b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0102
        gbc.setState(0x26e0, 0x60ce, 0x3370, 0x620a, 0x135f, 0x4df9, 0x1, 0x1);
        gbc.writeMem(0x26e0, { 0x21, 0xaf, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x60ce);
        EXPECT(gbc.pc(), 0x26e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0103
        gbc.setState(0xe665, 0x3d87, 0x5560, 0xe808, 0x6305, 0xc3e0, 0x1, 0x1);
        gbc.writeMem(0xe665, { 0x21, 0xe7, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x3d87);
        EXPECT(gbc.pc(), 0xe668);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe665), 0x21);
        EXPECT(gbc.readMem(0xe666), 0xe7);
        EXPECT(gbc.readMem(0xe667), 0xa6);
        // 21 0104
        gbc.setState(0xb28e, 0x75b8, 0xf620, 0xc708, 0xa95f, 0x7cf9, 0x0, 0x1);
        gbc.writeMem(0xb28e, { 0x21, 0x10, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x75b8);
        EXPECT(gbc.pc(), 0xb291);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb28e), 0x21);
        EXPECT(gbc.readMem(0xb28f), 0x10);
        EXPECT(gbc.readMem(0xb290), 0x27);
        // 21 0105
        gbc.setState(0xee09, 0xed07, 0xcf40, 0x581a, 0x6ddd, 0xa52f, 0x0, 0x1);
        gbc.writeMem(0xee09, { 0x21, 0xd2, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xed07);
        EXPECT(gbc.pc(), 0xee0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee09), 0x21);
        EXPECT(gbc.readMem(0xee0a), 0xd2);
        EXPECT(gbc.readMem(0xee0b), 0x2a);
        // 21 0106
        gbc.setState(0xcfcd, 0xe052, 0x57d0, 0x749f, 0x8af3, 0x9091, 0x1, 0x1);
        gbc.writeMem(0xcfcd, { 0x21, 0x68, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xe052);
        EXPECT(gbc.pc(), 0xcfd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfcd), 0x21);
        EXPECT(gbc.readMem(0xcfce), 0x68);
        EXPECT(gbc.readMem(0xcfcf), 0x23);
        // 21 0107
        gbc.setState(0x902c, 0x9fae, 0x18c0, 0xaba2, 0x1aaf, 0x6801, 0x0, 0x1);
        gbc.writeMem(0x902c, { 0x21, 0xf1, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x9fae);
        EXPECT(gbc.pc(), 0x902f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x902c), 0x21);
        EXPECT(gbc.readMem(0x902d), 0xf1);
        EXPECT(gbc.readMem(0x902e), 0x6);
        // 21 0108
        gbc.setState(0x95ed, 0xe435, 0x3d10, 0xd624, 0x2b0f, 0xb4c4, 0x0, 0x0);
        gbc.writeMem(0x95ed, { 0x21, 0x26, 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xe435);
        EXPECT(gbc.pc(), 0x95f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95ed), 0x21);
        EXPECT(gbc.readMem(0x95ee), 0x26);
        EXPECT(gbc.readMem(0x95ef), 0xef);
        // 21 0109
        gbc.setState(0x2f9d, 0xc84e, 0x29f0, 0x7ea5, 0x8a56, 0x806d, 0x1, 0x0);
        gbc.writeMem(0x2f9d, { 0x21, 0xfc, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xc84e);
        EXPECT(gbc.pc(), 0x2fa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 010A
        gbc.setState(0x350e, 0x22d7, 0x6a70, 0x4a93, 0xf9d2, 0x1067, 0x1, 0x0);
        gbc.writeMem(0x350e, { 0x21, 0x0, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x22d7);
        EXPECT(gbc.pc(), 0x3511);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 010B
        gbc.setState(0xad3c, 0x989e, 0x2370, 0xc8bc, 0x1837, 0x2d22, 0x0, 0x0);
        gbc.writeMem(0xad3c, { 0x21, 0xf3, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x989e);
        EXPECT(gbc.pc(), 0xad3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad3c), 0x21);
        EXPECT(gbc.readMem(0xad3d), 0xf3);
        EXPECT(gbc.readMem(0xad3e), 0x5a);
        // 21 010C
        gbc.setState(0x3f94, 0xf470, 0xb780, 0xb3a0, 0xe758, 0xfeb2, 0x0, 0x1);
        gbc.writeMem(0x3f94, { 0x21, 0x84, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xf470);
        EXPECT(gbc.pc(), 0x3f97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 010D
        gbc.setState(0x3c3d, 0x4ff2, 0x2d10, 0x5701, 0x23e0, 0x6063, 0x0, 0x1);
        gbc.writeMem(0x3c3d, { 0x21, 0x78, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x4ff2);
        EXPECT(gbc.pc(), 0x3c40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 010E
        gbc.setState(0xcc3b, 0x5fc2, 0x6d60, 0x8e4f, 0x5210, 0xfae0, 0x0, 0x1);
        gbc.writeMem(0xcc3b, { 0x21, 0x27, 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x5fc2);
        EXPECT(gbc.pc(), 0xcc3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc3b), 0x21);
        EXPECT(gbc.readMem(0xcc3c), 0x27);
        EXPECT(gbc.readMem(0xcc3d), 0x6f);
        // 21 010F
        gbc.setState(0x49b9, 0x4c31, 0xae90, 0x6042, 0x3fb2, 0x4750, 0x1, 0x0);
        gbc.writeMem(0x49b9, { 0x21, 0xb8, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x4c31);
        EXPECT(gbc.pc(), 0x49bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0110
        gbc.setState(0xb2cf, 0xf0e3, 0x1b40, 0xfe47, 0xef93, 0xebe0, 0x1, 0x0);
        gbc.writeMem(0xb2cf, { 0x21, 0x26, 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xf0e3);
        EXPECT(gbc.pc(), 0xb2d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2cf), 0x21);
        EXPECT(gbc.readMem(0xb2d0), 0x26);
        EXPECT(gbc.readMem(0xb2d1), 0x45);
        // 21 0111
        gbc.setState(0x1430, 0x3ed2, 0x8c20, 0xb63e, 0xca27, 0x7a19, 0x0, 0x1);
        gbc.writeMem(0x1430, { 0x21, 0x39, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x3ed2);
        EXPECT(gbc.pc(), 0x1433);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0112
        gbc.setState(0xc7b, 0x194e, 0x5090, 0x81a7, 0xd719, 0x2083, 0x1, 0x1);
        gbc.writeMem(0xc7b, { 0x21, 0xa5, 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x194e);
        EXPECT(gbc.pc(), 0xc7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0113
        gbc.setState(0x5fe3, 0xbd22, 0x65d0, 0x995, 0x263e, 0x96aa, 0x0, 0x1);
        gbc.writeMem(0x5fe3, { 0x21, 0x48, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xbd22);
        EXPECT(gbc.pc(), 0x5fe6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0114
        gbc.setState(0x9509, 0x5fd2, 0x7e00, 0xbe26, 0x8fdb, 0x72aa, 0x1, 0x1);
        gbc.writeMem(0x9509, { 0x21, 0x86, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x5fd2);
        EXPECT(gbc.pc(), 0x950c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9509), 0x21);
        EXPECT(gbc.readMem(0x950a), 0x86);
        EXPECT(gbc.readMem(0x950b), 0x61);
        // 21 0115
        gbc.setState(0x6093, 0xe1db, 0x90c0, 0x656c, 0xd2f2, 0xd8b2, 0x0, 0x1);
        gbc.writeMem(0x6093, { 0x21, 0x21, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe1db);
        EXPECT(gbc.pc(), 0x6096);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0116
        gbc.setState(0x519f, 0x8b83, 0xbe40, 0xa491, 0x3852, 0x3d6e, 0x1, 0x0);
        gbc.writeMem(0x519f, { 0x21, 0xbd, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x8b83);
        EXPECT(gbc.pc(), 0x51a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0117
        gbc.setState(0x141c, 0xe22d, 0x9350, 0x79f6, 0xa1a4, 0xaca0, 0x1, 0x1);
        gbc.writeMem(0x141c, { 0x21, 0x25, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xe22d);
        EXPECT(gbc.pc(), 0x141f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0118
        gbc.setState(0x5cb9, 0x946a, 0xaf90, 0xd118, 0xad38, 0xaa78, 0x0, 0x1);
        gbc.writeMem(0x5cb9, { 0x21, 0xd3, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x946a);
        EXPECT(gbc.pc(), 0x5cbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0119
        gbc.setState(0xce35, 0xe9ba, 0x8660, 0xd55c, 0x4b85, 0x1b75, 0x0, 0x1);
        gbc.writeMem(0xce35, { 0x21, 0xd6, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xe9ba);
        EXPECT(gbc.pc(), 0xce38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce35), 0x21);
        EXPECT(gbc.readMem(0xce36), 0xd6);
        EXPECT(gbc.readMem(0xce37), 0xc);
        // 21 011A
        gbc.setState(0xa1ab, 0x7d52, 0x9780, 0x120f, 0x1a3a, 0x8223, 0x0, 0x0);
        gbc.writeMem(0xa1ab, { 0x21, 0x2f, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x7d52);
        EXPECT(gbc.pc(), 0xa1ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1ab), 0x21);
        EXPECT(gbc.readMem(0xa1ac), 0x2f);
        EXPECT(gbc.readMem(0xa1ad), 0x31);
        // 21 011B
        gbc.setState(0x7331, 0xec6, 0x4140, 0x3ec8, 0xecbe, 0x860b, 0x1, 0x0);
        gbc.writeMem(0x7331, { 0x21, 0x34, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xec6);
        EXPECT(gbc.pc(), 0x7334);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 011C
        gbc.setState(0x94f4, 0x33b8, 0x2ba0, 0x9a38, 0xb492, 0xff39, 0x0, 0x0);
        gbc.writeMem(0x94f4, { 0x21, 0x92, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x33b8);
        EXPECT(gbc.pc(), 0x94f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94f4), 0x21);
        EXPECT(gbc.readMem(0x94f5), 0x92);
        EXPECT(gbc.readMem(0x94f6), 0x51);
        // 21 011D
        gbc.setState(0x90b1, 0xed11, 0x4a80, 0x7d9f, 0x388f, 0x75fb, 0x0, 0x0);
        gbc.writeMem(0x90b1, { 0x21, 0x16, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xed11);
        EXPECT(gbc.pc(), 0x90b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90b1), 0x21);
        EXPECT(gbc.readMem(0x90b2), 0x16);
        EXPECT(gbc.readMem(0x90b3), 0x8e);
        // 21 011E
        gbc.setState(0x82f9, 0xe728, 0x9760, 0x8f0d, 0xef7a, 0x959f, 0x1, 0x0);
        gbc.writeMem(0x82f9, { 0x21, 0x3, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xe728);
        EXPECT(gbc.pc(), 0x82fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82f9), 0x21);
        EXPECT(gbc.readMem(0x82fa), 0x3);
        EXPECT(gbc.readMem(0x82fb), 0xe1);
        // 21 011F
        gbc.setState(0xc0be, 0x2805, 0xbfa0, 0x4afc, 0xd875, 0x9f, 0x1, 0x1);
        gbc.writeMem(0xc0be, { 0x21, 0x4e, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x2805);
        EXPECT(gbc.pc(), 0xc0c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0be), 0x21);
        EXPECT(gbc.readMem(0xc0bf), 0x4e);
        EXPECT(gbc.readMem(0xc0c0), 0xbd);
        // 21 0120
        gbc.setState(0x9e92, 0x241d, 0xca20, 0x2a7a, 0x1bc, 0x875b, 0x1, 0x1);
        gbc.writeMem(0x9e92, { 0x21, 0xa3, 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x241d);
        EXPECT(gbc.pc(), 0x9e95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e92), 0x21);
        EXPECT(gbc.readMem(0x9e93), 0xa3);
        EXPECT(gbc.readMem(0x9e94), 0xdb);
        // 21 0121
        gbc.setState(0x75ba, 0xb2df, 0xe760, 0x50c9, 0x9db, 0x316e, 0x1, 0x1);
        gbc.writeMem(0x75ba, { 0x21, 0xaa, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xb2df);
        EXPECT(gbc.pc(), 0x75bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0122
        gbc.setState(0x83c4, 0x9a56, 0x8860, 0x3d5b, 0xaf52, 0xaf51, 0x1, 0x1);
        gbc.writeMem(0x83c4, { 0x21, 0x4, 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x9a56);
        EXPECT(gbc.pc(), 0x83c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83c4), 0x21);
        EXPECT(gbc.readMem(0x83c5), 0x4);
        EXPECT(gbc.readMem(0x83c6), 0x20);
        // 21 0123
        gbc.setState(0xb254, 0xa9c7, 0x2740, 0x656c, 0xd5e3, 0xbb8c, 0x0, 0x0);
        gbc.writeMem(0xb254, { 0x21, 0x1e, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xa9c7);
        EXPECT(gbc.pc(), 0xb257);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb254), 0x21);
        EXPECT(gbc.readMem(0xb255), 0x1e);
        EXPECT(gbc.readMem(0xb256), 0x43);
        // 21 0124
        gbc.setState(0xc166, 0x8637, 0x4e30, 0x25bc, 0x566c, 0xf681, 0x1, 0x1);
        gbc.writeMem(0xc166, { 0x21, 0xa4, 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x8637);
        EXPECT(gbc.pc(), 0xc169);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc166), 0x21);
        EXPECT(gbc.readMem(0xc167), 0xa4);
        EXPECT(gbc.readMem(0xc168), 0x7c);
        // 21 0125
        gbc.setState(0x668d, 0xb135, 0x10e0, 0xef15, 0xcf5d, 0x6d07, 0x0, 0x1);
        gbc.writeMem(0x668d, { 0x21, 0xe6, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xb135);
        EXPECT(gbc.pc(), 0x6690);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0126
        gbc.setState(0x98f2, 0x2fbf, 0x8a00, 0xebc2, 0xcfa1, 0x464b, 0x0, 0x1);
        gbc.writeMem(0x98f2, { 0x21, 0xa3, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x2fbf);
        EXPECT(gbc.pc(), 0x98f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98f2), 0x21);
        EXPECT(gbc.readMem(0x98f3), 0xa3);
        EXPECT(gbc.readMem(0x98f4), 0xa3);
        // 21 0127
        gbc.setState(0x608c, 0x64ca, 0x6870, 0xdc66, 0xb12c, 0x5c4b, 0x1, 0x0);
        gbc.writeMem(0x608c, { 0x21, 0x7e, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x64ca);
        EXPECT(gbc.pc(), 0x608f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0128
        gbc.setState(0xe56f, 0x5f4b, 0xa900, 0x399a, 0x65ae, 0x256, 0x1, 0x0);
        gbc.writeMem(0xe56f, { 0x21, 0x4c, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x5f4b);
        EXPECT(gbc.pc(), 0xe572);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe56f), 0x21);
        EXPECT(gbc.readMem(0xe570), 0x4c);
        EXPECT(gbc.readMem(0xe571), 0x46);
        // 21 0129
        gbc.setState(0xc4ae, 0xfc4, 0x2f00, 0x454d, 0x4d4, 0xc3c4, 0x0, 0x0);
        gbc.writeMem(0xc4ae, { 0x21, 0x1, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xfc4);
        EXPECT(gbc.pc(), 0xc4b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4ae), 0x21);
        EXPECT(gbc.readMem(0xc4af), 0x1);
        EXPECT(gbc.readMem(0xc4b0), 0xa6);
        // 21 012A
        gbc.setState(0xdbfc, 0x3f78, 0xd600, 0xf3ae, 0x704, 0x2f4c, 0x0, 0x0);
        gbc.writeMem(0xdbfc, { 0x21, 0x64, 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x3f78);
        EXPECT(gbc.pc(), 0xdbff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbfc), 0x21);
        EXPECT(gbc.readMem(0xdbfd), 0x64);
        EXPECT(gbc.readMem(0xdbfe), 0xff);
        // 21 012B
        gbc.setState(0xa072, 0xecbe, 0x28b0, 0xf565, 0x5a78, 0xa18f, 0x0, 0x0);
        gbc.writeMem(0xa072, { 0x21, 0x60, 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xecbe);
        EXPECT(gbc.pc(), 0xa075);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa072), 0x21);
        EXPECT(gbc.readMem(0xa073), 0x60);
        EXPECT(gbc.readMem(0xa074), 0x6c);
        // 21 012C
        gbc.setState(0x95e7, 0x5ed5, 0xccd0, 0x34a, 0x2da3, 0x4622, 0x1, 0x0);
        gbc.writeMem(0x95e7, { 0x21, 0xe9, 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x5ed5);
        EXPECT(gbc.pc(), 0x95ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95e7), 0x21);
        EXPECT(gbc.readMem(0x95e8), 0xe9);
        EXPECT(gbc.readMem(0x95e9), 0x28);
        // 21 012D
        gbc.setState(0xcc0c, 0xbc55, 0x9100, 0x26d1, 0xee36, 0xe95f, 0x0, 0x0);
        gbc.writeMem(0xcc0c, { 0x21, 0x29, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xbc55);
        EXPECT(gbc.pc(), 0xcc0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc0c), 0x21);
        EXPECT(gbc.readMem(0xcc0d), 0x29);
        EXPECT(gbc.readMem(0xcc0e), 0xb6);
        // 21 012E
        gbc.setState(0x9738, 0xb8c0, 0xce30, 0x4c3d, 0x5884, 0x178a, 0x1, 0x0);
        gbc.writeMem(0x9738, { 0x21, 0xcb, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xb8c0);
        EXPECT(gbc.pc(), 0x973b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9738), 0x21);
        EXPECT(gbc.readMem(0x9739), 0xcb);
        EXPECT(gbc.readMem(0x973a), 0xf1);
        // 21 0130
        gbc.setState(0xd654, 0xc621, 0x8100, 0xd29b, 0x4b41, 0x7488, 0x1, 0x1);
        gbc.writeMem(0xd654, { 0x21, 0x5e, 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xc621);
        EXPECT(gbc.pc(), 0xd657);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd654), 0x21);
        EXPECT(gbc.readMem(0xd655), 0x5e);
        EXPECT(gbc.readMem(0xd656), 0x24);
        // 21 0131
        gbc.setState(0x83e2, 0xe972, 0xf4d0, 0xc419, 0x8dff, 0xaa9b, 0x1, 0x0);
        gbc.writeMem(0x83e2, { 0x21, 0x6, 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xe972);
        EXPECT(gbc.pc(), 0x83e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83e2), 0x21);
        EXPECT(gbc.readMem(0x83e3), 0x6);
        EXPECT(gbc.readMem(0x83e4), 0x22);
        // 21 0133
        gbc.setState(0x3cd, 0xb676, 0x8790, 0x4f1f, 0xb58a, 0xeff6, 0x1, 0x1);
        gbc.writeMem(0x3cd, { 0x21, 0x31, 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb676);
        EXPECT(gbc.pc(), 0x3d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0134
        gbc.setState(0x66ad, 0xf9d5, 0x2db0, 0xe6ed, 0x8f8b, 0x8d96, 0x1, 0x1);
        gbc.writeMem(0x66ad, { 0x21, 0x44, 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xf9d5);
        EXPECT(gbc.pc(), 0x66b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0135
        gbc.setState(0x49c4, 0x4cf3, 0x5970, 0xaa48, 0xa521, 0xb454, 0x1, 0x0);
        gbc.writeMem(0x49c4, { 0x21, 0x74, 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x4cf3);
        EXPECT(gbc.pc(), 0x49c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0136
        gbc.setState(0x5310, 0x8ca7, 0xe240, 0x8642, 0x7a51, 0x304d, 0x1, 0x0);
        gbc.writeMem(0x5310, { 0x21, 0xdd, 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x8ca7);
        EXPECT(gbc.pc(), 0x5313);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0137
        gbc.setState(0x9c80, 0xf712, 0xdb50, 0x8b22, 0x6b7f, 0x5be0, 0x1, 0x1);
        gbc.writeMem(0x9c80, { 0x21, 0x74, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xf712);
        EXPECT(gbc.pc(), 0x9c83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c80), 0x21);
        EXPECT(gbc.readMem(0x9c81), 0x74);
        EXPECT(gbc.readMem(0x9c82), 0x6b);
        // 21 0138
        gbc.setState(0x5ca7, 0x7ed2, 0x2010, 0xa8ae, 0x9d66, 0xabf0, 0x0, 0x0);
        gbc.writeMem(0x5ca7, { 0x21, 0x3e, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x7ed2);
        EXPECT(gbc.pc(), 0x5caa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0139
        gbc.setState(0x2e76, 0x909a, 0x2350, 0xf37, 0x57ef, 0x8cf9, 0x0, 0x1);
        gbc.writeMem(0x2e76, { 0x21, 0x43, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x909a);
        EXPECT(gbc.pc(), 0x2e79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 013A
        gbc.setState(0x19ee, 0xf3b1, 0x2f70, 0x4cb5, 0x3efc, 0x5c2, 0x1, 0x1);
        gbc.writeMem(0x19ee, { 0x21, 0x62, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xf3b1);
        EXPECT(gbc.pc(), 0x19f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 013B
        gbc.setState(0x8fd3, 0xffb5, 0xe1a0, 0xca5e, 0x38f7, 0x6aeb, 0x0, 0x0);
        gbc.writeMem(0x8fd3, { 0x21, 0xb, 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xffb5);
        EXPECT(gbc.pc(), 0x8fd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fd3), 0x21);
        EXPECT(gbc.readMem(0x8fd4), 0xb);
        EXPECT(gbc.readMem(0x8fd5), 0x4d);
        // 21 013C
        gbc.setState(0x1f0f, 0x9eb, 0x26d0, 0xbef0, 0xb318, 0x16b9, 0x1, 0x0);
        gbc.writeMem(0x1f0f, { 0x21, 0x6c, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x9eb);
        EXPECT(gbc.pc(), 0x1f12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 013E
        gbc.setState(0x3b57, 0x4c1a, 0x7530, 0x5f52, 0x608a, 0x673d, 0x1, 0x1);
        gbc.writeMem(0x3b57, { 0x21, 0x73, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4c1a);
        EXPECT(gbc.pc(), 0x3b5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 013F
        gbc.setState(0xa50f, 0x9a9c, 0xb3a0, 0x7ef5, 0x7e63, 0x5823, 0x0, 0x0);
        gbc.writeMem(0xa50f, { 0x21, 0xed, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x9a9c);
        EXPECT(gbc.pc(), 0xa512);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa50f), 0x21);
        EXPECT(gbc.readMem(0xa510), 0xed);
        EXPECT(gbc.readMem(0xa511), 0x9e);
        // 21 0140
        gbc.setState(0x7919, 0x7e61, 0x78c0, 0x16c6, 0xcd6a, 0xcf5c, 0x0, 0x0);
        gbc.writeMem(0x7919, { 0x21, 0xfd, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x7e61);
        EXPECT(gbc.pc(), 0x791c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0141
        gbc.setState(0xd910, 0x74df, 0x2ce0, 0x876, 0x880c, 0x249c, 0x0, 0x0);
        gbc.writeMem(0xd910, { 0x21, 0x1f, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x74df);
        EXPECT(gbc.pc(), 0xd913);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd910), 0x21);
        EXPECT(gbc.readMem(0xd911), 0x1f);
        EXPECT(gbc.readMem(0xd912), 0x91);
        // 21 0142
        gbc.setState(0x6f0b, 0x4bfc, 0x21a0, 0xf0f1, 0x73db, 0x500f, 0x0, 0x0);
        gbc.writeMem(0x6f0b, { 0x21, 0x62, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x4bfc);
        EXPECT(gbc.pc(), 0x6f0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0143
        gbc.setState(0xeb35, 0x8a76, 0x1860, 0xb4b6, 0xc7e8, 0xdcef, 0x1, 0x0);
        gbc.writeMem(0xeb35, { 0x21, 0x38, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x8a76);
        EXPECT(gbc.pc(), 0xeb38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb35), 0x21);
        EXPECT(gbc.readMem(0xeb36), 0x38);
        EXPECT(gbc.readMem(0xeb37), 0xab);
        // 21 0144
        gbc.setState(0x6d20, 0x7cfc, 0x1090, 0xdda5, 0x5e07, 0x9880, 0x0, 0x0);
        gbc.writeMem(0x6d20, { 0x21, 0xfd, 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x7cfc);
        EXPECT(gbc.pc(), 0x6d23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0145
        gbc.setState(0x215a, 0x27b7, 0xc40, 0x2d94, 0xc034, 0x9774, 0x0, 0x1);
        gbc.writeMem(0x215a, { 0x21, 0xb2, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x27b7);
        EXPECT(gbc.pc(), 0x215d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0146
        gbc.setState(0x779c, 0x35c1, 0x41f0, 0x2a1a, 0xae88, 0xa11, 0x0, 0x0);
        gbc.writeMem(0x779c, { 0x21, 0x8c, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x35c1);
        EXPECT(gbc.pc(), 0x779f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0147
        gbc.setState(0x4e58, 0x7ea5, 0x6c00, 0xe1d9, 0xc302, 0x836f, 0x1, 0x1);
        gbc.writeMem(0x4e58, { 0x21, 0xb0, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x7ea5);
        EXPECT(gbc.pc(), 0x4e5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0148
        gbc.setState(0x9b1b, 0x2169, 0xce30, 0x93b2, 0x97da, 0x9179, 0x1, 0x1);
        gbc.writeMem(0x9b1b, { 0x21, 0x55, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x2169);
        EXPECT(gbc.pc(), 0x9b1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b1b), 0x21);
        EXPECT(gbc.readMem(0x9b1c), 0x55);
        EXPECT(gbc.readMem(0x9b1d), 0x39);
        // 21 0149
        gbc.setState(0x1506, 0xa30f, 0xa930, 0xba78, 0xdbce, 0xd8c, 0x1, 0x1);
        gbc.writeMem(0x1506, { 0x21, 0x2f, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xa30f);
        EXPECT(gbc.pc(), 0x1509);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 014A
        gbc.setState(0xe010, 0x4244, 0x4080, 0xa0ae, 0x727d, 0x7cbe, 0x0, 0x1);
        gbc.writeMem(0xe010, { 0x21, 0xda, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x4244);
        EXPECT(gbc.pc(), 0xe013);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe010), 0x21);
        EXPECT(gbc.readMem(0xe011), 0xda);
        EXPECT(gbc.readMem(0xe012), 0x1b);
        // 21 014B
        gbc.setState(0x79c, 0x6c3f, 0x9f20, 0x953a, 0x96c4, 0x3a57, 0x0, 0x0);
        gbc.writeMem(0x79c, { 0x21, 0x6b, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x6c3f);
        EXPECT(gbc.pc(), 0x79f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 014C
        gbc.setState(0xb30c, 0x65c2, 0x1170, 0xa17c, 0xc5a5, 0x5b38, 0x0, 0x1);
        gbc.writeMem(0xb30c, { 0x21, 0xc8, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x65c2);
        EXPECT(gbc.pc(), 0xb30f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb30c), 0x21);
        EXPECT(gbc.readMem(0xb30d), 0xc8);
        EXPECT(gbc.readMem(0xb30e), 0x9a);
        // 21 014D
        gbc.setState(0x46e, 0xbd55, 0x5a60, 0x3bb8, 0x130f, 0x4bbb, 0x1, 0x0);
        gbc.writeMem(0x46e, { 0x21, 0x8c, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xbd55);
        EXPECT(gbc.pc(), 0x471);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 014E
        gbc.setState(0x963, 0xccf9, 0xf300, 0x5f63, 0x5650, 0xf231, 0x1, 0x1);
        gbc.writeMem(0x963, { 0x21, 0x74, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xccf9);
        EXPECT(gbc.pc(), 0x966);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 014F
        gbc.setState(0x4eb3, 0xac19, 0x4830, 0xf256, 0x1f4c, 0x5b84, 0x1, 0x1);
        gbc.writeMem(0x4eb3, { 0x21, 0x4a, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xac19);
        EXPECT(gbc.pc(), 0x4eb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0150
        gbc.setState(0xd12c, 0x323f, 0x5b0, 0xf39b, 0x245b, 0xf4d8, 0x1, 0x1);
        gbc.writeMem(0xd12c, { 0x21, 0x7f, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x323f);
        EXPECT(gbc.pc(), 0xd12f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd12c), 0x21);
        EXPECT(gbc.readMem(0xd12d), 0x7f);
        EXPECT(gbc.readMem(0xd12e), 0xc);
        // 21 0151
        gbc.setState(0xde5c, 0x6ec4, 0x6930, 0x5069, 0xcb0d, 0xde9d, 0x0, 0x0);
        gbc.writeMem(0xde5c, { 0x21, 0x1a, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x6ec4);
        EXPECT(gbc.pc(), 0xde5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde5c), 0x21);
        EXPECT(gbc.readMem(0xde5d), 0x1a);
        EXPECT(gbc.readMem(0xde5e), 0x97);
        // 21 0152
        gbc.setState(0x7610, 0x1441, 0xe530, 0x7f3, 0xb1d1, 0xa3bd, 0x0, 0x1);
        gbc.writeMem(0x7610, { 0x21, 0xf0, 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x1441);
        EXPECT(gbc.pc(), 0x7613);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0153
        gbc.setState(0xdd21, 0x1d12, 0x1120, 0xf083, 0x813f, 0x2af3, 0x1, 0x0);
        gbc.writeMem(0xdd21, { 0x21, 0x4f, 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x1d12);
        EXPECT(gbc.pc(), 0xdd24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd21), 0x21);
        EXPECT(gbc.readMem(0xdd22), 0x4f);
        EXPECT(gbc.readMem(0xdd23), 0x93);
        // 21 0154
        gbc.setState(0x119f, 0xccbb, 0x5fa0, 0xb3df, 0xfc1e, 0x4fc8, 0x0, 0x0);
        gbc.writeMem(0x119f, { 0x21, 0xf8, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xccbb);
        EXPECT(gbc.pc(), 0x11a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0156
        gbc.setState(0x73bd, 0xf29d, 0xe100, 0x70d2, 0xfedd, 0x66da, 0x0, 0x1);
        gbc.writeMem(0x73bd, { 0x21, 0x74, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xf29d);
        EXPECT(gbc.pc(), 0x73c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0157
        gbc.setState(0xd2ee, 0xef80, 0x7a60, 0x9196, 0x91e8, 0xedef, 0x0, 0x1);
        gbc.writeMem(0xd2ee, { 0x21, 0xbd, 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xef80);
        EXPECT(gbc.pc(), 0xd2f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2ee), 0x21);
        EXPECT(gbc.readMem(0xd2ef), 0xbd);
        EXPECT(gbc.readMem(0xd2f0), 0xc9);
        // 21 0158
        gbc.setState(0x4be7, 0xbf2a, 0x6e40, 0x20e9, 0x7247, 0x719, 0x1, 0x1);
        gbc.writeMem(0x4be7, { 0x21, 0xb2, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xbf2a);
        EXPECT(gbc.pc(), 0x4bea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 015A
        gbc.setState(0xc0be, 0x2cae, 0x9230, 0xc34a, 0xfb4c, 0x5584, 0x0, 0x0);
        gbc.writeMem(0xc0be, { 0x21, 0x4e, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x2cae);
        EXPECT(gbc.pc(), 0xc0c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0be), 0x21);
        EXPECT(gbc.readMem(0xc0bf), 0x4e);
        EXPECT(gbc.readMem(0xc0c0), 0xbd);
        // 21 015B
        gbc.setState(0xc9be, 0x4e9e, 0x75c0, 0xba06, 0x6f54, 0x1a48, 0x1, 0x0);
        gbc.writeMem(0xc9be, { 0x21, 0xdc, 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x4e9e);
        EXPECT(gbc.pc(), 0xc9c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9be), 0x21);
        EXPECT(gbc.readMem(0xc9bf), 0xdc);
        EXPECT(gbc.readMem(0xc9c0), 0xff);
        // 21 015C
        gbc.setState(0x85a4, 0xbfd, 0xc900, 0x4d0e, 0x5dc, 0x9c15, 0x0, 0x1);
        gbc.writeMem(0x85a4, { 0x21, 0xf5, 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xbfd);
        EXPECT(gbc.pc(), 0x85a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85a4), 0x21);
        EXPECT(gbc.readMem(0x85a5), 0xf5);
        EXPECT(gbc.readMem(0x85a6), 0xb);
        // 21 015D
        gbc.setState(0xccce, 0x3b69, 0xc850, 0x8051, 0xe7a6, 0xa5ea, 0x0, 0x0);
        gbc.writeMem(0xccce, { 0x21, 0x4e, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x3b69);
        EXPECT(gbc.pc(), 0xccd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccce), 0x21);
        EXPECT(gbc.readMem(0xcccf), 0x4e);
        EXPECT(gbc.readMem(0xccd0), 0xa8);
        // 21 015E
        gbc.setState(0x1813, 0x4965, 0x4440, 0x9043, 0x321e, 0x3f7c, 0x0, 0x1);
        gbc.writeMem(0x1813, { 0x21, 0x9b, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x4965);
        EXPECT(gbc.pc(), 0x1816);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 015F
        gbc.setState(0xc17, 0x60a6, 0xd1a0, 0xd943, 0x454f, 0x518b, 0x0, 0x0);
        gbc.writeMem(0xc17, { 0x21, 0xe9, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x60a6);
        EXPECT(gbc.pc(), 0xc1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0160
        gbc.setState(0x81b1, 0xa047, 0xeaa0, 0xb561, 0xb8e9, 0xd08, 0x1, 0x1);
        gbc.writeMem(0x81b1, { 0x21, 0x3b, 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xa047);
        EXPECT(gbc.pc(), 0x81b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81b1), 0x21);
        EXPECT(gbc.readMem(0x81b2), 0x3b);
        EXPECT(gbc.readMem(0x81b3), 0x96);
        // 21 0161
        gbc.setState(0xeb0b, 0x8dab, 0xec0, 0xf7f9, 0xa747, 0x186f, 0x1, 0x1);
        gbc.writeMem(0xeb0b, { 0x21, 0x10, 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x8dab);
        EXPECT(gbc.pc(), 0xeb0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb0b), 0x21);
        EXPECT(gbc.readMem(0xeb0c), 0x10);
        EXPECT(gbc.readMem(0xeb0d), 0x1);
        // 21 0162
        gbc.setState(0x3f2a, 0x455, 0x4e80, 0x3f9d, 0x8fed, 0x11f3, 0x0, 0x0);
        gbc.writeMem(0x3f2a, { 0x21, 0x34, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x455);
        EXPECT(gbc.pc(), 0x3f2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0163
        gbc.setState(0x9542, 0x952d, 0xb8d0, 0x4bbc, 0xe4, 0xc9b9, 0x1, 0x0);
        gbc.writeMem(0x9542, { 0x21, 0xed, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x952d);
        EXPECT(gbc.pc(), 0x9545);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9542), 0x21);
        EXPECT(gbc.readMem(0x9543), 0xed);
        EXPECT(gbc.readMem(0x9544), 0x64);
        // 21 0164
        gbc.setState(0x2260, 0x3958, 0x6850, 0x21b, 0x75fb, 0x9be, 0x0, 0x1);
        gbc.writeMem(0x2260, { 0x21, 0xe3, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x3958);
        EXPECT(gbc.pc(), 0x2263);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0165
        gbc.setState(0x2931, 0x906a, 0x2f10, 0xd911, 0x60fe, 0xa277, 0x1, 0x0);
        gbc.writeMem(0x2931, { 0x21, 0xfb, 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x906a);
        EXPECT(gbc.pc(), 0x2934);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0166
        gbc.setState(0x538a, 0xb1d5, 0xde30, 0xd387, 0xeda8, 0xd744, 0x0, 0x0);
        gbc.writeMem(0x538a, { 0x21, 0x6d, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xb1d5);
        EXPECT(gbc.pc(), 0x538d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0167
        gbc.setState(0x2fa6, 0x9d60, 0xab90, 0xd2b1, 0xaebd, 0x9136, 0x0, 0x1);
        gbc.writeMem(0x2fa6, { 0x21, 0x63, 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x9d60);
        EXPECT(gbc.pc(), 0x2fa9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0168
        gbc.setState(0x4e07, 0x233f, 0xf980, 0x7c5e, 0x89d8, 0x4797, 0x0, 0x0);
        gbc.writeMem(0x4e07, { 0x21, 0x6a, 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x233f);
        EXPECT(gbc.pc(), 0x4e0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 016A
        gbc.setState(0xe203, 0x41c6, 0x20f0, 0x92cd, 0x39e7, 0xabab, 0x1, 0x0);
        gbc.writeMem(0xe203, { 0x21, 0xda, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x41c6);
        EXPECT(gbc.pc(), 0xe206);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe203), 0x21);
        EXPECT(gbc.readMem(0xe204), 0xda);
        EXPECT(gbc.readMem(0xe205), 0xc);
        // 21 016B
        gbc.setState(0x4088, 0x2236, 0xeac0, 0x674e, 0xb3c6, 0xfff8, 0x1, 0x0);
        gbc.writeMem(0x4088, { 0x21, 0xb9, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x2236);
        EXPECT(gbc.pc(), 0x408b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 016C
        gbc.setState(0x2dea, 0xb57d, 0x8230, 0x8d14, 0x76bd, 0xc34b, 0x1, 0x1);
        gbc.writeMem(0x2dea, { 0x21, 0x38, 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xb57d);
        EXPECT(gbc.pc(), 0x2ded);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 016D
        gbc.setState(0xac6a, 0xf957, 0xd900, 0xc995, 0xac4, 0xd285, 0x0, 0x1);
        gbc.writeMem(0xac6a, { 0x21, 0x71, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xf957);
        EXPECT(gbc.pc(), 0xac6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac6a), 0x21);
        EXPECT(gbc.readMem(0xac6b), 0x71);
        EXPECT(gbc.readMem(0xac6c), 0x86);
        // 21 016E
        gbc.setState(0x98f8, 0xed12, 0x1650, 0x9284, 0x281, 0xa40a, 0x1, 0x1);
        gbc.writeMem(0x98f8, { 0x21, 0x4b, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xed12);
        EXPECT(gbc.pc(), 0x98fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98f8), 0x21);
        EXPECT(gbc.readMem(0x98f9), 0x4b);
        EXPECT(gbc.readMem(0x98fa), 0xf0);
        // 21 016F
        gbc.setState(0xa403, 0x1c11, 0x470, 0x7257, 0x93bc, 0xe9c6, 0x1, 0x1);
        gbc.writeMem(0xa403, { 0x21, 0x9d, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x1c11);
        EXPECT(gbc.pc(), 0xa406);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa403), 0x21);
        EXPECT(gbc.readMem(0xa404), 0x9d);
        EXPECT(gbc.readMem(0xa405), 0x56);
        // 21 0170
        gbc.setState(0x7586, 0xf2d1, 0x5d10, 0xd7fb, 0xa742, 0x9735, 0x1, 0x1);
        gbc.writeMem(0x7586, { 0x21, 0xb9, 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xf2d1);
        EXPECT(gbc.pc(), 0x7589);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0171
        gbc.setState(0xa966, 0xcd06, 0xc0f0, 0x53ba, 0x53ac, 0x4d87, 0x1, 0x0);
        gbc.writeMem(0xa966, { 0x21, 0x8, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xcd06);
        EXPECT(gbc.pc(), 0xa969);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa966), 0x21);
        EXPECT(gbc.readMem(0xa967), 0x8);
        EXPECT(gbc.readMem(0xa968), 0xd0);
        // 21 0172
        gbc.setState(0x5c5, 0xb7e6, 0x7e30, 0xbb34, 0x3b21, 0x7d01, 0x0, 0x0);
        gbc.writeMem(0x5c5, { 0x21, 0x5d, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xb7e6);
        EXPECT(gbc.pc(), 0x5c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0173
        gbc.setState(0x53c7, 0x5030, 0x4480, 0xbe8, 0x91b8, 0xda7c, 0x0, 0x1);
        gbc.writeMem(0x53c7, { 0x21, 0xda, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x5030);
        EXPECT(gbc.pc(), 0x53ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0174
        gbc.setState(0x7f8f, 0x97c0, 0x6320, 0x675d, 0x706c, 0xa033, 0x0, 0x1);
        gbc.writeMem(0x7f8f, { 0x21, 0x2e, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x97c0);
        EXPECT(gbc.pc(), 0x7f92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0175
        gbc.setState(0xea5f, 0x8d91, 0x4520, 0x80a5, 0x177d, 0x8a42, 0x1, 0x0);
        gbc.writeMem(0xea5f, { 0x21, 0x48, 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x8d91);
        EXPECT(gbc.pc(), 0xea62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea5f), 0x21);
        EXPECT(gbc.readMem(0xea60), 0x48);
        EXPECT(gbc.readMem(0xea61), 0x5b);
        // 21 0176
        gbc.setState(0x3c67, 0xc4fe, 0x2110, 0xcc71, 0xa388, 0x158f, 0x1, 0x1);
        gbc.writeMem(0x3c67, { 0x21, 0xbb, 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xc4fe);
        EXPECT(gbc.pc(), 0x3c6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0177
        gbc.setState(0x8850, 0x3098, 0xbd00, 0x303d, 0xc814, 0xe1e8, 0x0, 0x0);
        gbc.writeMem(0x8850, { 0x21, 0x6c, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x3098);
        EXPECT(gbc.pc(), 0x8853);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8850), 0x21);
        EXPECT(gbc.readMem(0x8851), 0x6c);
        EXPECT(gbc.readMem(0x8852), 0x14);
        // 21 0178
        gbc.setState(0xa0ee, 0x6030, 0xc850, 0x69d8, 0x32a6, 0x5843, 0x1, 0x0);
        gbc.writeMem(0xa0ee, { 0x21, 0x46, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x6030);
        EXPECT(gbc.pc(), 0xa0f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0ee), 0x21);
        EXPECT(gbc.readMem(0xa0ef), 0x46);
        EXPECT(gbc.readMem(0xa0f0), 0x1c);
        // 21 0179
        gbc.setState(0x8de7, 0xdf3b, 0xc160, 0xab25, 0xfe55, 0xc54f, 0x1, 0x1);
        gbc.writeMem(0x8de7, { 0x21, 0x56, 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xdf3b);
        EXPECT(gbc.pc(), 0x8dea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8de7), 0x21);
        EXPECT(gbc.readMem(0x8de8), 0x56);
        EXPECT(gbc.readMem(0x8de9), 0x19);
        // 21 017A
        gbc.setState(0x506, 0x620e, 0xe530, 0x180f, 0xf763, 0xc2c8, 0x1, 0x1);
        gbc.writeMem(0x506, { 0x21, 0xe1, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x620e);
        EXPECT(gbc.pc(), 0x509);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 017B
        gbc.setState(0xd25b, 0x2edb, 0x94f0, 0x7fb9, 0xd940, 0xa109, 0x0, 0x1);
        gbc.writeMem(0xd25b, { 0x21, 0xfa, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x2edb);
        EXPECT(gbc.pc(), 0xd25e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd25b), 0x21);
        EXPECT(gbc.readMem(0xd25c), 0xfa);
        EXPECT(gbc.readMem(0xd25d), 0xce);
        // 21 017C
        gbc.setState(0xc77e, 0xee23, 0xeb20, 0x9603, 0x1620, 0x3de1, 0x1, 0x1);
        gbc.writeMem(0xc77e, { 0x21, 0xb4, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xee23);
        EXPECT(gbc.pc(), 0xc781);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc77e), 0x21);
        EXPECT(gbc.readMem(0xc77f), 0xb4);
        EXPECT(gbc.readMem(0xc780), 0x80);
        // 21 017D
        gbc.setState(0xec05, 0x908a, 0x8290, 0xe724, 0xfa9e, 0x13d8, 0x1, 0x0);
        gbc.writeMem(0xec05, { 0x21, 0x8a, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x908a);
        EXPECT(gbc.pc(), 0xec08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec05), 0x21);
        EXPECT(gbc.readMem(0xec06), 0x8a);
        EXPECT(gbc.readMem(0xec07), 0x97);
        // 21 017E
        gbc.setState(0x80d9, 0x61f8, 0x7470, 0x143, 0xf4a2, 0xb4eb, 0x1, 0x1);
        gbc.writeMem(0x80d9, { 0x21, 0x19, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x61f8);
        EXPECT(gbc.pc(), 0x80dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80d9), 0x21);
        EXPECT(gbc.readMem(0x80da), 0x19);
        EXPECT(gbc.readMem(0x80db), 0xe8);
        // 21 017F
        gbc.setState(0x3043, 0x695c, 0x4110, 0x46d, 0xbfcd, 0xe2c5, 0x0, 0x0);
        gbc.writeMem(0x3043, { 0x21, 0x3e, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x695c);
        EXPECT(gbc.pc(), 0x3046);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0180
        gbc.setState(0x3e87, 0x8112, 0xfb10, 0xe667, 0x8ebc, 0x4ca0, 0x0, 0x1);
        gbc.writeMem(0x3e87, { 0x21, 0x1f, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x8112);
        EXPECT(gbc.pc(), 0x3e8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0181
        gbc.setState(0x14bb, 0x96f6, 0xe80, 0xa1f, 0x8dd, 0xe274, 0x1, 0x0);
        gbc.writeMem(0x14bb, { 0x21, 0x12, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x96f6);
        EXPECT(gbc.pc(), 0x14be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0182
        gbc.setState(0x11c3, 0x225d, 0x3300, 0xb357, 0xa964, 0xeb2a, 0x0, 0x0);
        gbc.writeMem(0x11c3, { 0x21, 0x73, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x225d);
        EXPECT(gbc.pc(), 0x11c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0183
        gbc.setState(0x8727, 0x9561, 0x8210, 0x894d, 0xa16, 0xe2e6, 0x0, 0x1);
        gbc.writeMem(0x8727, { 0x21, 0x58, 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x9561);
        EXPECT(gbc.pc(), 0x872a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8727), 0x21);
        EXPECT(gbc.readMem(0x8728), 0x58);
        EXPECT(gbc.readMem(0x8729), 0x45);
        // 21 0184
        gbc.setState(0x2c62, 0x468b, 0xcbf0, 0x76a4, 0xcb8, 0x48c5, 0x0, 0x0);
        gbc.writeMem(0x2c62, { 0x21, 0x45, 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x468b);
        EXPECT(gbc.pc(), 0x2c65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0185
        gbc.setState(0x4a60, 0xe861, 0x50, 0x3994, 0xb3cb, 0xa371, 0x0, 0x1);
        gbc.writeMem(0x4a60, { 0x21, 0x9, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xe861);
        EXPECT(gbc.pc(), 0x4a63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0186
        gbc.setState(0x77d3, 0x8426, 0xce10, 0x2a00, 0xc050, 0x743, 0x1, 0x0);
        gbc.writeMem(0x77d3, { 0x21, 0xcb, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x8426);
        EXPECT(gbc.pc(), 0x77d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0187
        gbc.setState(0xb52e, 0xe1be, 0x9380, 0x513a, 0x50e7, 0x2f87, 0x1, 0x0);
        gbc.writeMem(0xb52e, { 0x21, 0x77, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xe1be);
        EXPECT(gbc.pc(), 0xb531);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb52e), 0x21);
        EXPECT(gbc.readMem(0xb52f), 0x77);
        EXPECT(gbc.readMem(0xb530), 0x5f);
        // 21 0188
        gbc.setState(0xbc6, 0xe3ab, 0x4170, 0x5dad, 0xbb2, 0x8c04, 0x0, 0x0);
        gbc.writeMem(0xbc6, { 0x21, 0x5e, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xe3ab);
        EXPECT(gbc.pc(), 0xbc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0189
        gbc.setState(0xe2a7, 0x9d03, 0x72d0, 0x7719, 0xebec, 0xa95b, 0x0, 0x0);
        gbc.writeMem(0xe2a7, { 0x21, 0x2a, 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x9d03);
        EXPECT(gbc.pc(), 0xe2aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2a7), 0x21);
        EXPECT(gbc.readMem(0xe2a8), 0x2a);
        EXPECT(gbc.readMem(0xe2a9), 0xe2);
        // 21 018A
        gbc.setState(0x4b61, 0xb530, 0x6c00, 0x2b6c, 0x7074, 0x4332, 0x0, 0x0);
        gbc.writeMem(0x4b61, { 0x21, 0xba, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xb530);
        EXPECT(gbc.pc(), 0x4b64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 018C
        gbc.setState(0xb7bb, 0x65cb, 0xddb0, 0x1155, 0x998a, 0xa798, 0x0, 0x0);
        gbc.writeMem(0xb7bb, { 0x21, 0xb9, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x65cb);
        EXPECT(gbc.pc(), 0xb7be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7bb), 0x21);
        EXPECT(gbc.readMem(0xb7bc), 0xb9);
        EXPECT(gbc.readMem(0xb7bd), 0x69);
        // 21 018D
        gbc.setState(0x25e, 0x13ab, 0x8e60, 0xf795, 0x1b, 0x311c, 0x1, 0x1);
        gbc.writeMem(0x25e, { 0x21, 0xbe, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x13ab);
        EXPECT(gbc.pc(), 0x261);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 018E
        gbc.setState(0xa224, 0x4344, 0x2e50, 0xc5a8, 0x5c81, 0x6d13, 0x1, 0x1);
        gbc.writeMem(0xa224, { 0x21, 0xa6, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x4344);
        EXPECT(gbc.pc(), 0xa227);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa224), 0x21);
        EXPECT(gbc.readMem(0xa225), 0xa6);
        EXPECT(gbc.readMem(0xa226), 0xb8);
        // 21 018F
        gbc.setState(0x6520, 0x8aaf, 0xc3e0, 0xfde, 0x95ea, 0x809, 0x0, 0x0);
        gbc.writeMem(0x6520, { 0x21, 0x7, 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x8aaf);
        EXPECT(gbc.pc(), 0x6523);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0190
        gbc.setState(0x7ef1, 0x5b9d, 0xf3a0, 0xba34, 0x911e, 0xa74a, 0x1, 0x1);
        gbc.writeMem(0x7ef1, { 0x21, 0xa4, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x5b9d);
        EXPECT(gbc.pc(), 0x7ef4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0191
        gbc.setState(0x9f6b, 0x4632, 0x3f00, 0x9cae, 0xf9e0, 0x76ab, 0x0, 0x0);
        gbc.writeMem(0x9f6b, { 0x21, 0xb4, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x4632);
        EXPECT(gbc.pc(), 0x9f6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f6b), 0x21);
        EXPECT(gbc.readMem(0x9f6c), 0xb4);
        EXPECT(gbc.readMem(0x9f6d), 0x60);
        // 21 0192
        gbc.setState(0xe404, 0x29f3, 0x9850, 0x6ddb, 0xa2b3, 0x455d, 0x1, 0x1);
        gbc.writeMem(0xe404, { 0x21, 0x32, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x29f3);
        EXPECT(gbc.pc(), 0xe407);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe404), 0x21);
        EXPECT(gbc.readMem(0xe405), 0x32);
        EXPECT(gbc.readMem(0xe406), 0xf8);
        // 21 0193
        gbc.setState(0xec0f, 0x2284, 0x21b0, 0x8ad2, 0x510a, 0x2c87, 0x1, 0x1);
        gbc.writeMem(0xec0f, { 0x21, 0x2f, 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x2284);
        EXPECT(gbc.pc(), 0xec12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec0f), 0x21);
        EXPECT(gbc.readMem(0xec10), 0x2f);
        EXPECT(gbc.readMem(0xec11), 0x20);
        // 21 0194
        gbc.setState(0x372d, 0x95bc, 0x7490, 0xb07e, 0xecef, 0x372e, 0x0, 0x0);
        gbc.writeMem(0x372d, { 0x21, 0x74, 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x95bc);
        EXPECT(gbc.pc(), 0x3730);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0195
        gbc.setState(0xe3f2, 0x19fd, 0xbf70, 0x3365, 0xc5e5, 0x9b63, 0x0, 0x0);
        gbc.writeMem(0xe3f2, { 0x21, 0x2, 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x19fd);
        EXPECT(gbc.pc(), 0xe3f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3f2), 0x21);
        EXPECT(gbc.readMem(0xe3f3), 0x2);
        EXPECT(gbc.readMem(0xe3f4), 0x62);
        // 21 0196
        gbc.setState(0x7c73, 0xd87, 0xe320, 0x37d2, 0x1bf8, 0x7985, 0x0, 0x0);
        gbc.writeMem(0x7c73, { 0x21, 0xee, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xd87);
        EXPECT(gbc.pc(), 0x7c76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0197
        gbc.setState(0x86ac, 0xcc70, 0x2410, 0x4f2e, 0xb6aa, 0x62e0, 0x1, 0x0);
        gbc.writeMem(0x86ac, { 0x21, 0xbb, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xcc70);
        EXPECT(gbc.pc(), 0x86af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86ac), 0x21);
        EXPECT(gbc.readMem(0x86ad), 0xbb);
        EXPECT(gbc.readMem(0x86ae), 0x76);
        // 21 0198
        gbc.setState(0x11d3, 0x3287, 0xe550, 0x11cc, 0xedc4, 0xbacf, 0x1, 0x0);
        gbc.writeMem(0x11d3, { 0x21, 0x35, 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x3287);
        EXPECT(gbc.pc(), 0x11d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0199
        gbc.setState(0x9314, 0xc6e7, 0xb3e0, 0xcaf1, 0xb86b, 0xb88f, 0x0, 0x0);
        gbc.writeMem(0x9314, { 0x21, 0xce, 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xc6e7);
        EXPECT(gbc.pc(), 0x9317);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9314), 0x21);
        EXPECT(gbc.readMem(0x9315), 0xce);
        EXPECT(gbc.readMem(0x9316), 0x77);
        // 21 019A
        gbc.setState(0x5d77, 0xf89c, 0x5ab0, 0xe803, 0xb83d, 0x9166, 0x1, 0x0);
        gbc.writeMem(0x5d77, { 0x21, 0xb2, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xf89c);
        EXPECT(gbc.pc(), 0x5d7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 019B
        gbc.setState(0x3571, 0x201a, 0x2350, 0x22b7, 0xe972, 0xaf17, 0x1, 0x0);
        gbc.writeMem(0x3571, { 0x21, 0xe4, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x201a);
        EXPECT(gbc.pc(), 0x3574);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 019C
        gbc.setState(0xb91c, 0x59a4, 0xb860, 0x11b3, 0xffee, 0x29ae, 0x0, 0x1);
        gbc.writeMem(0xb91c, { 0x21, 0x29, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x59a4);
        EXPECT(gbc.pc(), 0xb91f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb91c), 0x21);
        EXPECT(gbc.readMem(0xb91d), 0x29);
        EXPECT(gbc.readMem(0xb91e), 0x97);
        // 21 019D
        gbc.setState(0x208c, 0x72c3, 0xacb0, 0xe60c, 0xde67, 0xf434, 0x0, 0x0);
        gbc.writeMem(0x208c, { 0x21, 0x24, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x72c3);
        EXPECT(gbc.pc(), 0x208f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 019E
        gbc.setState(0x6ab4, 0x76c7, 0x6980, 0x73b6, 0xe1d7, 0xc132, 0x0, 0x0);
        gbc.writeMem(0x6ab4, { 0x21, 0xc, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x76c7);
        EXPECT(gbc.pc(), 0x6ab7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 019F
        gbc.setState(0x7b44, 0xf053, 0xa870, 0xbde6, 0x2660, 0x525c, 0x1, 0x0);
        gbc.writeMem(0x7b44, { 0x21, 0x66, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xf053);
        EXPECT(gbc.pc(), 0x7b47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 01A0
        gbc.setState(0x6181, 0x7a36, 0x8920, 0xe006, 0xbae5, 0xf2c1, 0x0, 0x1);
        gbc.writeMem(0x6181, { 0x21, 0x3, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x7a36);
        EXPECT(gbc.pc(), 0x6184);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 01A1
        gbc.setState(0x471e, 0x9aca, 0xe7d0, 0x30b2, 0x330a, 0x3c0b, 0x1, 0x1);
        gbc.writeMem(0x471e, { 0x21, 0x4e, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x9aca);
        EXPECT(gbc.pc(), 0x4721);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 01A2
        gbc.setState(0x965f, 0xb6bb, 0x1be0, 0xa99c, 0xd756, 0x80cb, 0x1, 0x0);
        gbc.writeMem(0x965f, { 0x21, 0xda, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xb6bb);
        EXPECT(gbc.pc(), 0x9662);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x965f), 0x21);
        EXPECT(gbc.readMem(0x9660), 0xda);
        EXPECT(gbc.readMem(0x9661), 0xcb);
        // 21 01A3
        gbc.setState(0x9360, 0x328e, 0x7b50, 0xa6fc, 0xf55e, 0xc474, 0x0, 0x0);
        gbc.writeMem(0x9360, { 0x21, 0xa7, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x328e);
        EXPECT(gbc.pc(), 0x9363);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9360), 0x21);
        EXPECT(gbc.readMem(0x9361), 0xa7);
        EXPECT(gbc.readMem(0x9362), 0x89);
        // 21 01A4
        gbc.setState(0x1701, 0x1a70, 0x3080, 0xb781, 0x9dee, 0x8cab, 0x1, 0x1);
        gbc.writeMem(0x1701, { 0x21, 0x68, 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x1a70);
        EXPECT(gbc.pc(), 0x1704);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 01A5
        gbc.setState(0xacab, 0x2d41, 0x8b90, 0xf893, 0xe8b7, 0xf81, 0x0, 0x1);
        gbc.writeMem(0xacab, { 0x21, 0x68, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x2d41);
        EXPECT(gbc.pc(), 0xacae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacab), 0x21);
        EXPECT(gbc.readMem(0xacac), 0x68);
        EXPECT(gbc.readMem(0xacad), 0x3c);
        // 21 01A6
        gbc.setState(0xb891, 0x4f15, 0xf290, 0xe138, 0x1d7a, 0x4adc, 0x1, 0x0);
        gbc.writeMem(0xb891, { 0x21, 0x52, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x4f15);
        EXPECT(gbc.pc(), 0xb894);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb891), 0x21);
        EXPECT(gbc.readMem(0xb892), 0x52);
        EXPECT(gbc.readMem(0xb893), 0xa1);
        // 21 01A7
        gbc.setState(0xebd5, 0x331d, 0x1680, 0xfded, 0x4de2, 0x20eb, 0x0, 0x0);
        gbc.writeMem(0xebd5, { 0x21, 0x1a, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x331d);
        EXPECT(gbc.pc(), 0xebd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebd5), 0x21);
        EXPECT(gbc.readMem(0xebd6), 0x1a);
        EXPECT(gbc.readMem(0xebd7), 0xb5);
        // 21 01A8
        gbc.setState(0xa533, 0x557c, 0x1dd0, 0xda04, 0x74e3, 0xad6, 0x1, 0x0);
        gbc.writeMem(0xa533, { 0x21, 0x19, 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x557c);
        EXPECT(gbc.pc(), 0xa536);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa533), 0x21);
        EXPECT(gbc.readMem(0xa534), 0x19);
        EXPECT(gbc.readMem(0xa535), 0x5b);
        // 21 01A9
        gbc.setState(0x49a4, 0xe724, 0xee60, 0xa455, 0xad5a, 0x1aab, 0x0, 0x1);
        gbc.writeMem(0x49a4, { 0x21, 0x9, 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xe724);
        EXPECT(gbc.pc(), 0x49a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 01AA
        gbc.setState(0x4e43, 0xd866, 0x3670, 0xe000, 0x6065, 0xcbe0, 0x1, 0x1);
        gbc.writeMem(0x4e43, { 0x21, 0xd1, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xd866);
        EXPECT(gbc.pc(), 0x4e46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 01AB
        gbc.setState(0x6d1, 0x960a, 0x88c0, 0xe0ca, 0x160b, 0xea31, 0x0, 0x0);
        gbc.writeMem(0x6d1, { 0x21, 0xae, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x960a);
        EXPECT(gbc.pc(), 0x6d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 01AC
        gbc.setState(0x51dc, 0xd975, 0x85e0, 0xe355, 0x2ad2, 0x5638, 0x1, 0x1);
        gbc.writeMem(0x51dc, { 0x21, 0x21, 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xd975);
        EXPECT(gbc.pc(), 0x51df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 01AD
        gbc.setState(0xa94e, 0x7cb3, 0xcff0, 0x6184, 0x54ae, 0x5845, 0x1, 0x0);
        gbc.writeMem(0xa94e, { 0x21, 0xbb, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x7cb3);
        EXPECT(gbc.pc(), 0xa951);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa94e), 0x21);
        EXPECT(gbc.readMem(0xa94f), 0xbb);
        EXPECT(gbc.readMem(0xa950), 0x53);
        // 21 01AE
        gbc.setState(0xb75f, 0xfbf4, 0xc960, 0xda60, 0x515c, 0xdeca, 0x0, 0x1);
        gbc.writeMem(0xb75f, { 0x21, 0x77, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xfbf4);
        EXPECT(gbc.pc(), 0xb762);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb75f), 0x21);
        EXPECT(gbc.readMem(0xb760), 0x77);
        EXPECT(gbc.readMem(0xb761), 0xcb);
        // 21 01AF
        gbc.setState(0x5d34, 0x4e46, 0x8120, 0xfd3a, 0xc382, 0x84df, 0x1, 0x0);
        gbc.writeMem(0x5d34, { 0x21, 0x20, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x4e46);
        EXPECT(gbc.pc(), 0x5d37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 01B0
        gbc.setState(0x851, 0x1914, 0x3b80, 0x29b3, 0xa173, 0xf8a6, 0x1, 0x0);
        gbc.writeMem(0x851, { 0x21, 0x51, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x1914);
        EXPECT(gbc.pc(), 0x854);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 01B1
        gbc.setState(0xdae2, 0x6781, 0xc5f0, 0xf525, 0x31a9, 0xb25, 0x1, 0x1);
        gbc.writeMem(0xdae2, { 0x21, 0x32, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x6781);
        EXPECT(gbc.pc(), 0xdae5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdae2), 0x21);
        EXPECT(gbc.readMem(0xdae3), 0x32);
        EXPECT(gbc.readMem(0xdae4), 0xfe);
        // 21 01B2
        gbc.setState(0xcf84, 0x1be2, 0xd200, 0x5941, 0x3ccb, 0x470f, 0x0, 0x0);
        gbc.writeMem(0xcf84, { 0x21, 0x7b, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x1be2);
        EXPECT(gbc.pc(), 0xcf87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf84), 0x21);
        EXPECT(gbc.readMem(0xcf85), 0x7b);
        EXPECT(gbc.readMem(0xcf86), 0x2f);
        // 21 01B3
        gbc.setState(0x533b, 0x521c, 0xc040, 0xbf3, 0xa3fb, 0xe039, 0x1, 0x0);
        gbc.writeMem(0x533b, { 0x21, 0xa3, 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x521c);
        EXPECT(gbc.pc(), 0x533e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 01B4
        gbc.setState(0x1834, 0xf870, 0x1df0, 0x7ffd, 0x9902, 0x4f2d, 0x1, 0x1);
        gbc.writeMem(0x1834, { 0x21, 0x0, 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf870);
        EXPECT(gbc.pc(), 0x1837);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 01B5
        gbc.setState(0x4aeb, 0x4dbe, 0x8e40, 0xec2, 0x8d35, 0xca24, 0x0, 0x0);
        gbc.writeMem(0x4aeb, { 0x21, 0xcf, 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x4dbe);
        EXPECT(gbc.pc(), 0x4aee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 01B6
        gbc.setState(0x6e30, 0x51e6, 0x59d0, 0xbaa3, 0x6500, 0xb7ae, 0x1, 0x1);
        gbc.writeMem(0x6e30, { 0x21, 0xac, 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x51e6);
        EXPECT(gbc.pc(), 0x6e33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 01B7
        gbc.setState(0x7c7e, 0x7110, 0x98a0, 0xba42, 0x3ba, 0x3d0d, 0x1, 0x0);
        gbc.writeMem(0x7c7e, { 0x21, 0xb4, 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x7110);
        EXPECT(gbc.pc(), 0x7c81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 01B8
        gbc.setState(0xedb2, 0x6136, 0x67b0, 0xc875, 0x3c5f, 0x7ded, 0x1, 0x0);
        gbc.writeMem(0xedb2, { 0x21, 0x39, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x6136);
        EXPECT(gbc.pc(), 0xedb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedb2), 0x21);
        EXPECT(gbc.readMem(0xedb3), 0x39);
        EXPECT(gbc.readMem(0xedb4), 0x61);
        // 21 01B9
        gbc.setState(0xc880, 0x9b34, 0x74e0, 0x197, 0x535c, 0xa7a8, 0x1, 0x1);
        gbc.writeMem(0xc880, { 0x21, 0x1f, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x9b34);
        EXPECT(gbc.pc(), 0xc883);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc880), 0x21);
        EXPECT(gbc.readMem(0xc881), 0x1f);
        EXPECT(gbc.readMem(0xc882), 0x98);
        // 21 01BA
        gbc.setState(0xc98a, 0x5f7b, 0xfc40, 0x704c, 0xbdbb, 0x605f, 0x1, 0x0);
        gbc.writeMem(0xc98a, { 0x21, 0x8d, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x5f7b);
        EXPECT(gbc.pc(), 0xc98d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc98a), 0x21);
        EXPECT(gbc.readMem(0xc98b), 0x8d);
        EXPECT(gbc.readMem(0xc98c), 0xa3);
        // 21 01BC
        gbc.setState(0xb499, 0x92b, 0x41f0, 0xe614, 0x7b25, 0x35ae, 0x1, 0x0);
        gbc.writeMem(0xb499, { 0x21, 0xef, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x92b);
        EXPECT(gbc.pc(), 0xb49c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb499), 0x21);
        EXPECT(gbc.readMem(0xb49a), 0xef);
        EXPECT(gbc.readMem(0xb49b), 0x97);
        // 21 01BD
        gbc.setState(0x701e, 0xa90, 0xb120, 0x4a2c, 0x23b6, 0x8318, 0x1, 0x0);
        gbc.writeMem(0x701e, { 0x21, 0xc, 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xa90);
        EXPECT(gbc.pc(), 0x7021);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 01BE
        gbc.setState(0x391e, 0xba2f, 0xbfa0, 0xe793, 0xcd82, 0x272e, 0x1, 0x1);
        gbc.writeMem(0x391e, { 0x21, 0xe0, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xba2f);
        EXPECT(gbc.pc(), 0x3921);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 01BF
        gbc.setState(0x5466, 0xf3dd, 0xb4e0, 0x734f, 0x60ca, 0xf72a, 0x0, 0x1);
        gbc.writeMem(0x5466, { 0x21, 0x56, 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xf3dd);
        EXPECT(gbc.pc(), 0x5469);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 01C1
        gbc.setState(0x1a84, 0x6313, 0x3920, 0x474d, 0xd3dc, 0xadc8, 0x0, 0x1);
        gbc.writeMem(0x1a84, { 0x21, 0x2f, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x6313);
        EXPECT(gbc.pc(), 0x1a87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 01C2
        gbc.setState(0x835e, 0x67e5, 0x41e0, 0xd1df, 0xd115, 0x553, 0x0, 0x0);
        gbc.writeMem(0x835e, { 0x21, 0x27, 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x67e5);
        EXPECT(gbc.pc(), 0x8361);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x835e), 0x21);
        EXPECT(gbc.readMem(0x835f), 0x27);
        EXPECT(gbc.readMem(0x8360), 0x5b);
        // 21 01C3
        gbc.setState(0x85b8, 0x95ad, 0x7f90, 0x1ca2, 0x92c2, 0x423, 0x1, 0x0);
        gbc.writeMem(0x85b8, { 0x21, 0xba, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x95ad);
        EXPECT(gbc.pc(), 0x85bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85b8), 0x21);
        EXPECT(gbc.readMem(0x85b9), 0xba);
        EXPECT(gbc.readMem(0x85ba), 0xe1);
        // 21 01C4
        gbc.setState(0x6edc, 0x1acf, 0x4c40, 0xcce9, 0xec8c, 0x7bfb, 0x1, 0x1);
        gbc.writeMem(0x6edc, { 0x21, 0xd6, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x1acf);
        EXPECT(gbc.pc(), 0x6edf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 01C5
        gbc.setState(0xdb29, 0x4dd8, 0xc560, 0xf23d, 0xf5a7, 0x52d2, 0x1, 0x0);
        gbc.writeMem(0xdb29, { 0x21, 0xd, 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x4dd8);
        EXPECT(gbc.pc(), 0xdb2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb29), 0x21);
        EXPECT(gbc.readMem(0xdb2a), 0xd);
        EXPECT(gbc.readMem(0xdb2b), 0x6f);
        // 21 01C6
        gbc.setState(0xeef6, 0x54a1, 0x44b0, 0x167f, 0x5f58, 0xb095, 0x1, 0x1);
        gbc.writeMem(0xeef6, { 0x21, 0x5, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x54a1);
        EXPECT(gbc.pc(), 0xeef9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeef6), 0x21);
        EXPECT(gbc.readMem(0xeef7), 0x5);
        EXPECT(gbc.readMem(0xeef8), 0x99);
        // 21 01C7
        gbc.setState(0x65f8, 0x83fa, 0x70b0, 0xc350, 0xabeb, 0xc55c, 0x0, 0x0);
        gbc.writeMem(0x65f8, { 0x21, 0xcb, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x83fa);
        EXPECT(gbc.pc(), 0x65fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 01C8
        gbc.setState(0xd8ca, 0x555e, 0x6420, 0x10d4, 0xe129, 0xcc2, 0x0, 0x1);
        gbc.writeMem(0xd8ca, { 0x21, 0x8f, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x555e);
        EXPECT(gbc.pc(), 0xd8cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8ca), 0x21);
        EXPECT(gbc.readMem(0xd8cb), 0x8f);
        EXPECT(gbc.readMem(0xd8cc), 0xae);
        // 21 01C9
        gbc.setState(0xe95b, 0x6905, 0x1f20, 0x18d5, 0x4183, 0xc676, 0x1, 0x0);
        gbc.writeMem(0xe95b, { 0x21, 0xa, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x6905);
        EXPECT(gbc.pc(), 0xe95e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe95b), 0x21);
        EXPECT(gbc.readMem(0xe95c), 0xa);
        EXPECT(gbc.readMem(0xe95d), 0x56);
        // 21 01CA
        gbc.setState(0xa384, 0x925, 0x6e30, 0xd66a, 0x2912, 0xc2f1, 0x0, 0x0);
        gbc.writeMem(0xa384, { 0x21, 0x82, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x925);
        EXPECT(gbc.pc(), 0xa387);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa384), 0x21);
        EXPECT(gbc.readMem(0xa385), 0x82);
        EXPECT(gbc.readMem(0xa386), 0x8c);
        // 21 01CB
        gbc.setState(0x4922, 0x88be, 0x90d0, 0xec51, 0xe888, 0x5fef, 0x0, 0x0);
        gbc.writeMem(0x4922, { 0x21, 0xc8, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x88be);
        EXPECT(gbc.pc(), 0x4925);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 01CC
        gbc.setState(0x1873, 0xc902, 0x7930, 0xa002, 0x58e, 0xd651, 0x1, 0x1);
        gbc.writeMem(0x1873, { 0x21, 0x8c, 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xc902);
        EXPECT(gbc.pc(), 0x1876);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 01CD
        gbc.setState(0xb1f5, 0x280d, 0xd3b0, 0x5443, 0x376a, 0xfcc7, 0x0, 0x1);
        gbc.writeMem(0xb1f5, { 0x21, 0x52, 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x280d);
        EXPECT(gbc.pc(), 0xb1f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1f5), 0x21);
        EXPECT(gbc.readMem(0xb1f6), 0x52);
        EXPECT(gbc.readMem(0xb1f7), 0xdd);
        // 21 01CE
        gbc.setState(0x8cdd, 0xcbc1, 0x4d00, 0xfdc8, 0x73a3, 0x4aa6, 0x1, 0x1);
        gbc.writeMem(0x8cdd, { 0x21, 0x36, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xcbc1);
        EXPECT(gbc.pc(), 0x8ce0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cdd), 0x21);
        EXPECT(gbc.readMem(0x8cde), 0x36);
        EXPECT(gbc.readMem(0x8cdf), 0x56);
        // 21 01CF
        gbc.setState(0x455a, 0x402, 0xcae0, 0x217a, 0x29c6, 0x8250, 0x1, 0x0);
        gbc.writeMem(0x455a, { 0x21, 0x5, 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x402);
        EXPECT(gbc.pc(), 0x455d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 01D0
        gbc.setState(0x511d, 0xe381, 0xa730, 0xce1e, 0xb424, 0xb019, 0x1, 0x1);
        gbc.writeMem(0x511d, { 0x21, 0xfb, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xe381);
        EXPECT(gbc.pc(), 0x5120);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 01D1
        gbc.setState(0x4aa4, 0x2adb, 0x8fa0, 0xd6b2, 0xe4c7, 0x953, 0x1, 0x0);
        gbc.writeMem(0x4aa4, { 0x21, 0x5f, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x2adb);
        EXPECT(gbc.pc(), 0x4aa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 01D2
        gbc.setState(0x50b8, 0xf247, 0x5e10, 0xe735, 0x1d0b, 0xbc77, 0x0, 0x0);
        gbc.writeMem(0x50b8, { 0x21, 0x35, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xf247);
        EXPECT(gbc.pc(), 0x50bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 01D3
        gbc.setState(0x6046, 0xe9c5, 0x9f10, 0xd2dc, 0xd1d0, 0x3ab, 0x1, 0x1);
        gbc.writeMem(0x6046, { 0x21, 0xb8, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xe9c5);
        EXPECT(gbc.pc(), 0x6049);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 01D4
        gbc.setState(0xa339, 0x6073, 0x4050, 0x6ec1, 0x9a6f, 0x953d, 0x0, 0x0);
        gbc.writeMem(0xa339, { 0x21, 0x8b, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x6073);
        EXPECT(gbc.pc(), 0xa33c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa339), 0x21);
        EXPECT(gbc.readMem(0xa33a), 0x8b);
        EXPECT(gbc.readMem(0xa33b), 0xc5);
        // 21 01D5
        gbc.setState(0xa4f3, 0xa6d3, 0xe5e0, 0x72, 0x22f4, 0x8bf, 0x0, 0x1);
        gbc.writeMem(0xa4f3, { 0x21, 0xaf, 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xa6d3);
        EXPECT(gbc.pc(), 0xa4f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4f3), 0x21);
        EXPECT(gbc.readMem(0xa4f4), 0xaf);
        EXPECT(gbc.readMem(0xa4f5), 0x93);
        // 21 01D6
        gbc.setState(0x1fc6, 0xfd4f, 0x9e70, 0xc52e, 0xb062, 0x6268, 0x1, 0x0);
        gbc.writeMem(0x1fc6, { 0x21, 0x82, 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xfd4f);
        EXPECT(gbc.pc(), 0x1fc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 01D7
        gbc.setState(0xdf85, 0xaa96, 0x39d0, 0xac69, 0x3bc2, 0x71cf, 0x1, 0x1);
        gbc.writeMem(0xdf85, { 0x21, 0x8b, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xaa96);
        EXPECT(gbc.pc(), 0xdf88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf85), 0x21);
        EXPECT(gbc.readMem(0xdf86), 0x8b);
        EXPECT(gbc.readMem(0xdf87), 0x88);
        // 21 01D8
        gbc.setState(0x28ec, 0xcdaf, 0xd3b0, 0x4521, 0x4906, 0xd183, 0x1, 0x0);
        gbc.writeMem(0x28ec, { 0x21, 0x37, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xcdaf);
        EXPECT(gbc.pc(), 0x28ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 01D9
        gbc.setState(0x1382, 0x2c92, 0x4eb0, 0x185e, 0x7ee5, 0x5e59, 0x0, 0x0);
        gbc.writeMem(0x1382, { 0x21, 0x4c, 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x2c92);
        EXPECT(gbc.pc(), 0x1385);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 01DA
        gbc.setState(0x9631, 0x572, 0x7d0, 0x22d3, 0x139d, 0x4660, 0x1, 0x0);
        gbc.writeMem(0x9631, { 0x21, 0xff, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x572);
        EXPECT(gbc.pc(), 0x9634);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9631), 0x21);
        EXPECT(gbc.readMem(0x9632), 0xff);
        EXPECT(gbc.readMem(0x9633), 0x69);
        // 21 01DB
        gbc.setState(0x891f, 0xfb99, 0xc560, 0xba22, 0x70e3, 0x392f, 0x1, 0x0);
        gbc.writeMem(0x891f, { 0x21, 0xa5, 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xfb99);
        EXPECT(gbc.pc(), 0x8922);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x891f), 0x21);
        EXPECT(gbc.readMem(0x8920), 0xa5);
        EXPECT(gbc.readMem(0x8921), 0x74);
        // 21 01DC
        gbc.setState(0xcb90, 0xccc4, 0x3190, 0xddc9, 0x4142, 0xe7f, 0x0, 0x0);
        gbc.writeMem(0xcb90, { 0x21, 0x51, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xccc4);
        EXPECT(gbc.pc(), 0xcb93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb90), 0x21);
        EXPECT(gbc.readMem(0xcb91), 0x51);
        EXPECT(gbc.readMem(0xcb92), 0x9a);
        // 21 01DD
        gbc.setState(0x2d8e, 0xe459, 0x9120, 0x4a05, 0x2244, 0x40a2, 0x1, 0x1);
        gbc.writeMem(0x2d8e, { 0x21, 0xde, 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xe459);
        EXPECT(gbc.pc(), 0x2d91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 01DE
        gbc.setState(0x81ad, 0xdbe, 0x57c0, 0x8ccc, 0x6991, 0xabbd, 0x0, 0x1);
        gbc.writeMem(0x81ad, { 0x21, 0x3a, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xdbe);
        EXPECT(gbc.pc(), 0x81b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81ad), 0x21);
        EXPECT(gbc.readMem(0x81ae), 0x3a);
        EXPECT(gbc.readMem(0x81af), 0x2c);
        // 21 01DF
        gbc.setState(0xa837, 0x6f6f, 0x5ee0, 0x8658, 0x3e8d, 0xdc41, 0x1, 0x1);
        gbc.writeMem(0xa837, { 0x21, 0xcd, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x6f6f);
        EXPECT(gbc.pc(), 0xa83a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa837), 0x21);
        EXPECT(gbc.readMem(0xa838), 0xcd);
        EXPECT(gbc.readMem(0xa839), 0xe6);
        // 21 01E2
        gbc.setState(0xeabd, 0xf64e, 0x2f90, 0x902c, 0x9b3a, 0xb850, 0x0, 0x1);
        gbc.writeMem(0xeabd, { 0x21, 0x85, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xf64e);
        EXPECT(gbc.pc(), 0xeac0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeabd), 0x21);
        EXPECT(gbc.readMem(0xeabe), 0x85);
        EXPECT(gbc.readMem(0xeabf), 0x5e);
        // 21 01E3
        gbc.setState(0xc8f, 0x2a3b, 0xfb70, 0x523e, 0x3da2, 0x6d0c, 0x0, 0x0);
        gbc.writeMem(0xc8f, { 0x21, 0x8b, 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x2a3b);
        EXPECT(gbc.pc(), 0xc92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 01E4
        gbc.setState(0x225d, 0x6d55, 0x3d70, 0x521a, 0x583e, 0xfb57, 0x0, 0x1);
        gbc.writeMem(0x225d, { 0x21, 0x5b, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x6d55);
        EXPECT(gbc.pc(), 0x2260);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 01E5
        gbc.setState(0xec90, 0xbc74, 0x770, 0x830d, 0x546d, 0xf755, 0x0, 0x1);
        gbc.writeMem(0xec90, { 0x21, 0x73, 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xbc74);
        EXPECT(gbc.pc(), 0xec93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec90), 0x21);
        EXPECT(gbc.readMem(0xec91), 0x73);
        EXPECT(gbc.readMem(0xec92), 0x8f);
        // 21 01E6
        gbc.setState(0x621c, 0xec07, 0xeb30, 0x1492, 0xfed1, 0xabbb, 0x0, 0x0);
        gbc.writeMem(0x621c, { 0x21, 0x90, 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xec07);
        EXPECT(gbc.pc(), 0x621f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 01E7
        gbc.setState(0xba42, 0x41f1, 0x4250, 0x2539, 0xb298, 0xaa56, 0x1, 0x1);
        gbc.writeMem(0xba42, { 0x21, 0x4b, 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x41f1);
        EXPECT(gbc.pc(), 0xba45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba42), 0x21);
        EXPECT(gbc.readMem(0xba43), 0x4b);
        EXPECT(gbc.readMem(0xba44), 0x5);
        // 21 01E8
        gbc.setState(0xc963, 0x19e0, 0x5c00, 0x339c, 0xf3f1, 0x2423, 0x1, 0x1);
        gbc.writeMem(0xc963, { 0x21, 0x15, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x19e0);
        EXPECT(gbc.pc(), 0xc966);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc963), 0x21);
        EXPECT(gbc.readMem(0xc964), 0x15);
        EXPECT(gbc.readMem(0xc965), 0x80);
        // 21 01E9
        gbc.setState(0x16ad, 0x6ba7, 0xe3f0, 0xd291, 0x4971, 0xab3b, 0x1, 0x0);
        gbc.writeMem(0x16ad, { 0x21, 0xd2, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x6ba7);
        EXPECT(gbc.pc(), 0x16b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 01EB
        gbc.setState(0x472b, 0x5166, 0xe3d0, 0x789e, 0x129c, 0x19e0, 0x1, 0x0);
        gbc.writeMem(0x472b, { 0x21, 0xed, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x5166);
        EXPECT(gbc.pc(), 0x472e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 01EC
        gbc.setState(0x9de2, 0x1209, 0x5810, 0x400d, 0x20ec, 0xd0c2, 0x0, 0x1);
        gbc.writeMem(0x9de2, { 0x21, 0x92, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x1209);
        EXPECT(gbc.pc(), 0x9de5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9de2), 0x21);
        EXPECT(gbc.readMem(0x9de3), 0x92);
        EXPECT(gbc.readMem(0x9de4), 0xc);
        // 21 01ED
        gbc.setState(0xbf6b, 0xf562, 0x1e70, 0x7708, 0x3888, 0xb4af, 0x0, 0x0);
        gbc.writeMem(0xbf6b, { 0x21, 0x2d, 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xf562);
        EXPECT(gbc.pc(), 0xbf6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf6b), 0x21);
        EXPECT(gbc.readMem(0xbf6c), 0x2d);
        EXPECT(gbc.readMem(0xbf6d), 0xe9);
        // 21 01EE
        gbc.setState(0xc47b, 0x3c0, 0x74a0, 0x5c41, 0x82fe, 0x9434, 0x0, 0x0);
        gbc.writeMem(0xc47b, { 0x21, 0xcd, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x3c0);
        EXPECT(gbc.pc(), 0xc47e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc47b), 0x21);
        EXPECT(gbc.readMem(0xc47c), 0xcd);
        EXPECT(gbc.readMem(0xc47d), 0x90);
        // 21 01EF
        gbc.setState(0xca, 0x7a73, 0x4cf0, 0xd357, 0xcd48, 0x7db6, 0x1, 0x0);
        gbc.writeMem(0xca, { 0x21, 0xd, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x7a73);
        EXPECT(gbc.pc(), 0xcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 01F0
        gbc.setState(0x444b, 0x58f3, 0xa730, 0xfe97, 0xa966, 0x6ce8, 0x0, 0x0);
        gbc.writeMem(0x444b, { 0x21, 0x50, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x58f3);
        EXPECT(gbc.pc(), 0x444e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 01F2
        gbc.setState(0xa80b, 0x955e, 0x9f30, 0x6eff, 0xb62d, 0x1a18, 0x1, 0x0);
        gbc.writeMem(0xa80b, { 0x21, 0x8e, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x955e);
        EXPECT(gbc.pc(), 0xa80e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa80b), 0x21);
        EXPECT(gbc.readMem(0xa80c), 0x8e);
        EXPECT(gbc.readMem(0xa80d), 0x75);
        // 21 01F3
        gbc.setState(0x394e, 0x2c06, 0xc590, 0xf292, 0xe10c, 0xdd6f, 0x1, 0x1);
        gbc.writeMem(0x394e, { 0x21, 0xd7, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x2c06);
        EXPECT(gbc.pc(), 0x3951);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 01F4
        gbc.setState(0x5dcb, 0xd7d5, 0x7890, 0x5e23, 0xb9e, 0xe2ca, 0x0, 0x0);
        gbc.writeMem(0x5dcb, { 0x21, 0xe6, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xd7d5);
        EXPECT(gbc.pc(), 0x5dce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 01F5
        gbc.setState(0x3bc2, 0xabea, 0xf300, 0x1236, 0x92f4, 0x299, 0x1, 0x1);
        gbc.writeMem(0x3bc2, { 0x21, 0xb6, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xabea);
        EXPECT(gbc.pc(), 0x3bc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 01F6
        gbc.setState(0x7ceb, 0xbd21, 0xe0f0, 0xb1e3, 0xae74, 0x3ab7, 0x1, 0x0);
        gbc.writeMem(0x7ceb, { 0x21, 0x89, 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xbd21);
        EXPECT(gbc.pc(), 0x7cee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 01F7
        gbc.setState(0xcb3c, 0xecd9, 0xa2e0, 0xbb79, 0x920e, 0xf135, 0x0, 0x1);
        gbc.writeMem(0xcb3c, { 0x21, 0xee, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xecd9);
        EXPECT(gbc.pc(), 0xcb3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb3c), 0x21);
        EXPECT(gbc.readMem(0xcb3d), 0xee);
        EXPECT(gbc.readMem(0xcb3e), 0x51);
        // 21 01F8
        gbc.setState(0xa3c7, 0x4d84, 0x1740, 0xb1ab, 0xe776, 0x4d32, 0x0, 0x0);
        gbc.writeMem(0xa3c7, { 0x21, 0xd5, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x4d84);
        EXPECT(gbc.pc(), 0xa3ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3c7), 0x21);
        EXPECT(gbc.readMem(0xa3c8), 0xd5);
        EXPECT(gbc.readMem(0xa3c9), 0x10);
        // 21 01F9
        gbc.setState(0x9040, 0xa3fe, 0xab30, 0x5b06, 0x4ffb, 0xa8c5, 0x1, 0x0);
        gbc.writeMem(0x9040, { 0x21, 0xdf, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa3fe);
        EXPECT(gbc.pc(), 0x9043);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9040), 0x21);
        EXPECT(gbc.readMem(0x9041), 0xdf);
        EXPECT(gbc.readMem(0x9042), 0xa3);
        // 21 01FA
        gbc.setState(0x4684, 0x2207, 0x6740, 0x5ddd, 0xe2fb, 0x1588, 0x0, 0x0);
        gbc.writeMem(0x4684, { 0x21, 0x67, 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x2207);
        EXPECT(gbc.pc(), 0x4687);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 01FB
        gbc.setState(0x13c0, 0xa31f, 0xcff0, 0xb0d2, 0xc4d8, 0xe341, 0x1, 0x1);
        gbc.writeMem(0x13c0, { 0x21, 0xe9, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa31f);
        EXPECT(gbc.pc(), 0x13c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 01FC
        gbc.setState(0xdabf, 0x1b21, 0x7c20, 0x8e3b, 0x75ee, 0x55f3, 0x0, 0x0);
        gbc.writeMem(0xdabf, { 0x21, 0x2c, 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x1b21);
        EXPECT(gbc.pc(), 0xdac2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdabf), 0x21);
        EXPECT(gbc.readMem(0xdac0), 0x2c);
        EXPECT(gbc.readMem(0xdac1), 0x73);
        // 21 01FD
        gbc.setState(0x87e0, 0x9af, 0x6be0, 0x1ad8, 0xabc, 0xb394, 0x0, 0x0);
        gbc.writeMem(0x87e0, { 0x21, 0x4f, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x9af);
        EXPECT(gbc.pc(), 0x87e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87e0), 0x21);
        EXPECT(gbc.readMem(0x87e1), 0x4f);
        EXPECT(gbc.readMem(0x87e2), 0xda);
        // 21 01FE
        gbc.setState(0x28a8, 0xd8d6, 0x6c90, 0x213f, 0xabfe, 0x72bc, 0x0, 0x0);
        gbc.writeMem(0x28a8, { 0x21, 0x9a, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xd8d6);
        EXPECT(gbc.pc(), 0x28ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 01FF
        gbc.setState(0x6f2b, 0x5f20, 0x39e0, 0x8b02, 0x70a7, 0x1459, 0x1, 0x0);
        gbc.writeMem(0x6f2b, { 0x21, 0x1f, 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x5f20);
        EXPECT(gbc.pc(), 0x6f2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0200
        gbc.setState(0xd2d3, 0xdf35, 0xaa80, 0xa46d, 0xe626, 0x4b5a, 0x0, 0x1);
        gbc.writeMem(0xd2d3, { 0x21, 0xdf, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xdf35);
        EXPECT(gbc.pc(), 0xd2d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2d3), 0x21);
        EXPECT(gbc.readMem(0xd2d4), 0xdf);
        EXPECT(gbc.readMem(0xd2d5), 0x9);
        // 21 0203
        gbc.setState(0xcbcb, 0x40c4, 0xaee0, 0xd162, 0x9520, 0x1be4, 0x0, 0x0);
        gbc.writeMem(0xcbcb, { 0x21, 0x5e, 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x40c4);
        EXPECT(gbc.pc(), 0xcbce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbcb), 0x21);
        EXPECT(gbc.readMem(0xcbcc), 0x5e);
        EXPECT(gbc.readMem(0xcbcd), 0x35);
        // 21 0204
        gbc.setState(0x2876, 0x572, 0xc50, 0x491e, 0xf773, 0xd0e7, 0x1, 0x0);
        gbc.writeMem(0x2876, { 0x21, 0xbc, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x572);
        EXPECT(gbc.pc(), 0x2879);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0205
        gbc.setState(0x8fc7, 0x77f3, 0x9f70, 0x2d3b, 0x9d9d, 0x79c6, 0x1, 0x1);
        gbc.writeMem(0x8fc7, { 0x21, 0xfe, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x77f3);
        EXPECT(gbc.pc(), 0x8fca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fc7), 0x21);
        EXPECT(gbc.readMem(0x8fc8), 0xfe);
        EXPECT(gbc.readMem(0x8fc9), 0xf7);
        // 21 0206
        gbc.setState(0x3475, 0x5594, 0x470, 0xec20, 0xfe16, 0xd1bc, 0x1, 0x1);
        gbc.writeMem(0x3475, { 0x21, 0x8b, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x5594);
        EXPECT(gbc.pc(), 0x3478);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0207
        gbc.setState(0x5f91, 0x3d69, 0x4b20, 0xee24, 0xea0a, 0x6bd3, 0x0, 0x0);
        gbc.writeMem(0x5f91, { 0x21, 0x0, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x3d69);
        EXPECT(gbc.pc(), 0x5f94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0209
        gbc.setState(0x296, 0xd56, 0xe150, 0x7bd0, 0xc8c0, 0x58d3, 0x1, 0x0);
        gbc.writeMem(0x296, { 0x21, 0x57, 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xd56);
        EXPECT(gbc.pc(), 0x299);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 020A
        gbc.setState(0x4871, 0x8a2f, 0x8d40, 0xdfd0, 0xcb97, 0x171f, 0x1, 0x0);
        gbc.writeMem(0x4871, { 0x21, 0xb0, 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x8a2f);
        EXPECT(gbc.pc(), 0x4874);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 020B
        gbc.setState(0x72fd, 0xb8e8, 0x9690, 0xf0f, 0xbbbf, 0x7905, 0x0, 0x1);
        gbc.writeMem(0x72fd, { 0x21, 0x9d, 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xb8e8);
        EXPECT(gbc.pc(), 0x7300);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 020C
        gbc.setState(0x2b65, 0x8486, 0x1630, 0xe5eb, 0x5358, 0x7f7c, 0x1, 0x1);
        gbc.writeMem(0x2b65, { 0x21, 0x1b, 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x8486);
        EXPECT(gbc.pc(), 0x2b68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 020D
        gbc.setState(0x4f1, 0xc38d, 0xf410, 0x77a2, 0x55ef, 0x1c6b, 0x1, 0x0);
        gbc.writeMem(0x4f1, { 0x21, 0x9e, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xc38d);
        EXPECT(gbc.pc(), 0x4f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 020E
        gbc.setState(0x4a6, 0x231, 0xa7f0, 0x4b49, 0x6d5e, 0xf9dc, 0x0, 0x1);
        gbc.writeMem(0x4a6, { 0x21, 0x94, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x231);
        EXPECT(gbc.pc(), 0x4a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 020F
        gbc.setState(0xa761, 0xea9, 0x7ba0, 0x10a3, 0xcd87, 0x8ecc, 0x1, 0x1);
        gbc.writeMem(0xa761, { 0x21, 0xaf, 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xea9);
        EXPECT(gbc.pc(), 0xa764);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa761), 0x21);
        EXPECT(gbc.readMem(0xa762), 0xaf);
        EXPECT(gbc.readMem(0xa763), 0x1d);
        // 21 0210
        gbc.setState(0x3142, 0x65f3, 0x8dd0, 0x2a76, 0x164a, 0x594b, 0x0, 0x0);
        gbc.writeMem(0x3142, { 0x21, 0xaa, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x65f3);
        EXPECT(gbc.pc(), 0x3145);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0211
        gbc.setState(0x860b, 0xbabd, 0xaaf0, 0xc2c, 0x9aed, 0xb4c2, 0x1, 0x1);
        gbc.writeMem(0x860b, { 0x21, 0xf2, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xbabd);
        EXPECT(gbc.pc(), 0x860e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x860b), 0x21);
        EXPECT(gbc.readMem(0x860c), 0xf2);
        EXPECT(gbc.readMem(0x860d), 0x4e);
        // 21 0212
        gbc.setState(0x85cb, 0x88f, 0xef70, 0xe5d2, 0x14ee, 0xf34, 0x0, 0x1);
        gbc.writeMem(0x85cb, { 0x21, 0x27, 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x88f);
        EXPECT(gbc.pc(), 0x85ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85cb), 0x21);
        EXPECT(gbc.readMem(0x85cc), 0x27);
        EXPECT(gbc.readMem(0x85cd), 0x1);
        // 21 0213
        gbc.setState(0x78e, 0xf840, 0x55a0, 0x3583, 0xc3d3, 0x483e, 0x0, 0x0);
        gbc.writeMem(0x78e, { 0x21, 0x2e, 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xf840);
        EXPECT(gbc.pc(), 0x791);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0214
        gbc.setState(0x5e69, 0x32d4, 0xce80, 0xd03f, 0x4e5e, 0xc90e, 0x1, 0x1);
        gbc.writeMem(0x5e69, { 0x21, 0xaf, 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x32d4);
        EXPECT(gbc.pc(), 0x5e6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0215
        gbc.setState(0x60b7, 0x9b0d, 0x8af0, 0xd455, 0x3a1f, 0xd1f2, 0x0, 0x1);
        gbc.writeMem(0x60b7, { 0x21, 0x41, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x9b0d);
        EXPECT(gbc.pc(), 0x60ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0216
        gbc.setState(0x6e9f, 0x3f27, 0xe0b0, 0x917f, 0x80ca, 0xf997, 0x0, 0x1);
        gbc.writeMem(0x6e9f, { 0x21, 0x47, 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x3f27);
        EXPECT(gbc.pc(), 0x6ea2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0217
        gbc.setState(0xa599, 0xad15, 0xbb10, 0x471a, 0xf196, 0xe5d9, 0x1, 0x1);
        gbc.writeMem(0xa599, { 0x21, 0x4b, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xad15);
        EXPECT(gbc.pc(), 0xa59c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa599), 0x21);
        EXPECT(gbc.readMem(0xa59a), 0x4b);
        EXPECT(gbc.readMem(0xa59b), 0xd6);
        // 21 0218
        gbc.setState(0x3179, 0xd238, 0x8c40, 0x4822, 0x1b64, 0xcb22, 0x1, 0x1);
        gbc.writeMem(0x3179, { 0x21, 0x11, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xd238);
        EXPECT(gbc.pc(), 0x317c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0219
        gbc.setState(0xdf49, 0x44c8, 0xfe70, 0x4a41, 0xa16a, 0x9166, 0x0, 0x1);
        gbc.writeMem(0xdf49, { 0x21, 0x64, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x44c8);
        EXPECT(gbc.pc(), 0xdf4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf49), 0x21);
        EXPECT(gbc.readMem(0xdf4a), 0x64);
        EXPECT(gbc.readMem(0xdf4b), 0x61);
        // 21 021B
        gbc.setState(0x1808, 0x6e9, 0xa60, 0xf229, 0x7871, 0xfde8, 0x0, 0x1);
        gbc.writeMem(0x1808, { 0x21, 0xf0, 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x6e9);
        EXPECT(gbc.pc(), 0x180b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 021C
        gbc.setState(0x4daf, 0xfdfe, 0xb7e0, 0x16bc, 0x27e7, 0xb39d, 0x1, 0x1);
        gbc.writeMem(0x4daf, { 0x21, 0xcf, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xfdfe);
        EXPECT(gbc.pc(), 0x4db2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 021D
        gbc.setState(0xb755, 0x636, 0x6fb0, 0xb4, 0x1f15, 0x1062, 0x0, 0x0);
        gbc.writeMem(0xb755, { 0x21, 0x9, 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x636);
        EXPECT(gbc.pc(), 0xb758);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb755), 0x21);
        EXPECT(gbc.readMem(0xb756), 0x9);
        EXPECT(gbc.readMem(0xb757), 0xb4);
        // 21 021E
        gbc.setState(0xb306, 0xe799, 0x4a70, 0x62cb, 0x4225, 0x9f02, 0x1, 0x1);
        gbc.writeMem(0xb306, { 0x21, 0xe8, 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xe799);
        EXPECT(gbc.pc(), 0xb309);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb306), 0x21);
        EXPECT(gbc.readMem(0xb307), 0xe8);
        EXPECT(gbc.readMem(0xb308), 0xaa);
        // 21 021F
        gbc.setState(0xc91a, 0x2c83, 0xf0e0, 0x4f4c, 0x602f, 0x7d14, 0x1, 0x1);
        gbc.writeMem(0xc91a, { 0x21, 0x83, 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x2c83);
        EXPECT(gbc.pc(), 0xc91d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc91a), 0x21);
        EXPECT(gbc.readMem(0xc91b), 0x83);
        EXPECT(gbc.readMem(0xc91c), 0x40);
        // 21 0220
        gbc.setState(0x8987, 0x7d74, 0x4c50, 0xb7fb, 0x75, 0x66f3, 0x1, 0x0);
        gbc.writeMem(0x8987, { 0x21, 0xf0, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x7d74);
        EXPECT(gbc.pc(), 0x898a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8987), 0x21);
        EXPECT(gbc.readMem(0x8988), 0xf0);
        EXPECT(gbc.readMem(0x8989), 0x14);
        // 21 0221
        gbc.setState(0xe8a3, 0xa6f5, 0xd490, 0xcda7, 0xe3c9, 0x827a, 0x1, 0x1);
        gbc.writeMem(0xe8a3, { 0x21, 0x8c, 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xa6f5);
        EXPECT(gbc.pc(), 0xe8a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8a3), 0x21);
        EXPECT(gbc.readMem(0xe8a4), 0x8c);
        EXPECT(gbc.readMem(0xe8a5), 0x1);
        // 21 0222
        gbc.setState(0x8248, 0x9826, 0x1e90, 0xd938, 0x4a54, 0x4478, 0x0, 0x1);
        gbc.writeMem(0x8248, { 0x21, 0x9b, 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x9826);
        EXPECT(gbc.pc(), 0x824b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8248), 0x21);
        EXPECT(gbc.readMem(0x8249), 0x9b);
        EXPECT(gbc.readMem(0x824a), 0x7b);
        // 21 0223
        gbc.setState(0x7c93, 0xdd55, 0xcb60, 0x948d, 0x2110, 0x166d, 0x1, 0x1);
        gbc.writeMem(0x7c93, { 0x21, 0xff, 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xdd55);
        EXPECT(gbc.pc(), 0x7c96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0224
        gbc.setState(0xd619, 0x2a4b, 0x7a00, 0x5e17, 0x1143, 0xae2c, 0x1, 0x1);
        gbc.writeMem(0xd619, { 0x21, 0x7a, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x2a4b);
        EXPECT(gbc.pc(), 0xd61c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd619), 0x21);
        EXPECT(gbc.readMem(0xd61a), 0x7a);
        EXPECT(gbc.readMem(0xd61b), 0x2a);
        // 21 0225
        gbc.setState(0x3c94, 0x29b3, 0xd710, 0xc35f, 0x6511, 0x152b, 0x0, 0x0);
        gbc.writeMem(0x3c94, { 0x21, 0x15, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x29b3);
        EXPECT(gbc.pc(), 0x3c97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0226
        gbc.setState(0x8682, 0xb115, 0x5f20, 0x8bb6, 0xa325, 0xc397, 0x0, 0x0);
        gbc.writeMem(0x8682, { 0x21, 0x81, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xb115);
        EXPECT(gbc.pc(), 0x8685);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8682), 0x21);
        EXPECT(gbc.readMem(0x8683), 0x81);
        EXPECT(gbc.readMem(0x8684), 0xe5);
        // 21 0227
        gbc.setState(0xa7d7, 0x6796, 0x900, 0xb105, 0xbc78, 0xb06, 0x1, 0x0);
        gbc.writeMem(0xa7d7, { 0x21, 0xb5, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x6796);
        EXPECT(gbc.pc(), 0xa7da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7d7), 0x21);
        EXPECT(gbc.readMem(0xa7d8), 0xb5);
        EXPECT(gbc.readMem(0xa7d9), 0xf);
        // 21 0228
        gbc.setState(0xcce6, 0xb6fc, 0xe260, 0x55bf, 0x8297, 0x78f2, 0x0, 0x0);
        gbc.writeMem(0xcce6, { 0x21, 0x6c, 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xb6fc);
        EXPECT(gbc.pc(), 0xcce9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcce6), 0x21);
        EXPECT(gbc.readMem(0xcce7), 0x6c);
        EXPECT(gbc.readMem(0xcce8), 0x74);
        // 21 0229
        gbc.setState(0x5bb5, 0x5e48, 0x4020, 0xde87, 0x54a1, 0x5012, 0x0, 0x0);
        gbc.writeMem(0x5bb5, { 0x21, 0xaf, 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x5e48);
        EXPECT(gbc.pc(), 0x5bb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 022A
        gbc.setState(0xe649, 0xc4ef, 0x1b70, 0xa696, 0xa8ea, 0xac8d, 0x0, 0x0);
        gbc.writeMem(0xe649, { 0x21, 0xa4, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xc4ef);
        EXPECT(gbc.pc(), 0xe64c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe649), 0x21);
        EXPECT(gbc.readMem(0xe64a), 0xa4);
        EXPECT(gbc.readMem(0xe64b), 0x6d);
        // 21 022B
        gbc.setState(0x1eb1, 0xd794, 0x4f90, 0xbd02, 0x5d3e, 0xa854, 0x1, 0x0);
        gbc.writeMem(0x1eb1, { 0x21, 0xa0, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xd794);
        EXPECT(gbc.pc(), 0x1eb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 022C
        gbc.setState(0x88ce, 0x1b53, 0x3e60, 0x96c6, 0xa7fc, 0x8997, 0x1, 0x1);
        gbc.writeMem(0x88ce, { 0x21, 0xf1, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x1b53);
        EXPECT(gbc.pc(), 0x88d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ce), 0x21);
        EXPECT(gbc.readMem(0x88cf), 0xf1);
        EXPECT(gbc.readMem(0x88d0), 0x94);
        // 21 022D
        gbc.setState(0x2c7, 0xe273, 0x9690, 0x2127, 0x995d, 0xfeb3, 0x0, 0x1);
        gbc.writeMem(0x2c7, { 0x21, 0xcd, 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xe273);
        EXPECT(gbc.pc(), 0x2ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 022F
        gbc.setState(0x175d, 0xad19, 0x8a90, 0xe35a, 0xf3f1, 0x375e, 0x0, 0x1);
        gbc.writeMem(0x175d, { 0x21, 0x5e, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xad19);
        EXPECT(gbc.pc(), 0x1760);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0230
        gbc.setState(0xceb3, 0x55f9, 0xf1c0, 0xd789, 0x5d7e, 0xf1be, 0x1, 0x0);
        gbc.writeMem(0xceb3, { 0x21, 0x72, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x55f9);
        EXPECT(gbc.pc(), 0xceb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xceb3), 0x21);
        EXPECT(gbc.readMem(0xceb4), 0x72);
        EXPECT(gbc.readMem(0xceb5), 0x59);
        // 21 0231
        gbc.setState(0x2a0f, 0x34fb, 0x64e0, 0xf9dd, 0x3742, 0x3710, 0x0, 0x0);
        gbc.writeMem(0x2a0f, { 0x21, 0x56, 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x34fb);
        EXPECT(gbc.pc(), 0x2a12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0232
        gbc.setState(0x9cb7, 0xc6d9, 0xdc50, 0x79e8, 0x1584, 0xca3d, 0x0, 0x1);
        gbc.writeMem(0x9cb7, { 0x21, 0xd4, 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xc6d9);
        EXPECT(gbc.pc(), 0x9cba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cb7), 0x21);
        EXPECT(gbc.readMem(0x9cb8), 0xd4);
        EXPECT(gbc.readMem(0x9cb9), 0x18);
        // 21 0233
        gbc.setState(0x6ad8, 0x6708, 0x82b0, 0x9219, 0x949f, 0x7475, 0x0, 0x1);
        gbc.writeMem(0x6ad8, { 0x21, 0xf8, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x6708);
        EXPECT(gbc.pc(), 0x6adb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0234
        gbc.setState(0x79dd, 0x1828, 0x7480, 0x7fd9, 0x1c3a, 0xd5d9, 0x1, 0x0);
        gbc.writeMem(0x79dd, { 0x21, 0xac, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x1828);
        EXPECT(gbc.pc(), 0x79e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0235
        gbc.setState(0xd340, 0x6703, 0x1e50, 0x1a49, 0x6c81, 0xc781, 0x0, 0x0);
        gbc.writeMem(0xd340, { 0x21, 0x14, 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x6703);
        EXPECT(gbc.pc(), 0xd343);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd340), 0x21);
        EXPECT(gbc.readMem(0xd341), 0x14);
        EXPECT(gbc.readMem(0xd342), 0xf2);
        // 21 0236
        gbc.setState(0x4384, 0x37b6, 0x310, 0xb8bc, 0x5833, 0x7a03, 0x0, 0x0);
        gbc.writeMem(0x4384, { 0x21, 0x30, 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x37b6);
        EXPECT(gbc.pc(), 0x4387);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0237
        gbc.setState(0x2c4d, 0x5e0d, 0x1f60, 0x851e, 0x448f, 0x5eef, 0x1, 0x1);
        gbc.writeMem(0x2c4d, { 0x21, 0x2a, 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x5e0d);
        EXPECT(gbc.pc(), 0x2c50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0238
        gbc.setState(0x1559, 0x9c5c, 0x1fb0, 0x1d2, 0x1384, 0x2709, 0x0, 0x0);
        gbc.writeMem(0x1559, { 0x21, 0x41, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x9c5c);
        EXPECT(gbc.pc(), 0x155c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 023A
        gbc.setState(0x895d, 0x5ca4, 0xa650, 0xda0f, 0x9e25, 0x4377, 0x1, 0x1);
        gbc.writeMem(0x895d, { 0x21, 0xd2, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x5ca4);
        EXPECT(gbc.pc(), 0x8960);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x895d), 0x21);
        EXPECT(gbc.readMem(0x895e), 0xd2);
        EXPECT(gbc.readMem(0x895f), 0x78);
        // 21 023B
        gbc.setState(0x2851, 0x8cc1, 0xacb0, 0x69ec, 0x6c7f, 0x7026, 0x0, 0x1);
        gbc.writeMem(0x2851, { 0x21, 0x58, 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x8cc1);
        EXPECT(gbc.pc(), 0x2854);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 023C
        gbc.setState(0xc1c2, 0xeba4, 0xb9e0, 0xeed0, 0xf47a, 0x319d, 0x0, 0x1);
        gbc.writeMem(0xc1c2, { 0x21, 0xd1, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xeba4);
        EXPECT(gbc.pc(), 0xc1c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1c2), 0x21);
        EXPECT(gbc.readMem(0xc1c3), 0xd1);
        EXPECT(gbc.readMem(0xc1c4), 0x2);
        // 21 023D
        gbc.setState(0x6710, 0x5ee8, 0x760, 0x4bef, 0x4191, 0xa8, 0x0, 0x0);
        gbc.writeMem(0x6710, { 0x21, 0xa5, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x5ee8);
        EXPECT(gbc.pc(), 0x6713);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 023E
        gbc.setState(0x119a, 0xe67b, 0x34c0, 0x51ba, 0x744f, 0x147b, 0x1, 0x0);
        gbc.writeMem(0x119a, { 0x21, 0x3d, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xe67b);
        EXPECT(gbc.pc(), 0x119d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 023F
        gbc.setState(0xda55, 0x2a0b, 0x6f80, 0x7b56, 0x7064, 0xdaf6, 0x0, 0x0);
        gbc.writeMem(0xda55, { 0x21, 0xaa, 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x2a0b);
        EXPECT(gbc.pc(), 0xda58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda55), 0x21);
        EXPECT(gbc.readMem(0xda56), 0xaa);
        EXPECT(gbc.readMem(0xda57), 0xc2);
        // 21 0240
        gbc.setState(0xa287, 0x3c16, 0x8940, 0xdccc, 0x4ff9, 0x5b31, 0x0, 0x0);
        gbc.writeMem(0xa287, { 0x21, 0x25, 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x3c16);
        EXPECT(gbc.pc(), 0xa28a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa287), 0x21);
        EXPECT(gbc.readMem(0xa288), 0x25);
        EXPECT(gbc.readMem(0xa289), 0xf5);
        // 21 0241
        gbc.setState(0x1d3d, 0x33d7, 0xd580, 0xd051, 0x28c1, 0x8a2b, 0x1, 0x1);
        gbc.writeMem(0x1d3d, { 0x21, 0x85, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x33d7);
        EXPECT(gbc.pc(), 0x1d40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0242
        gbc.setState(0x9134, 0x8c2e, 0x1680, 0xb210, 0xff03, 0x398b, 0x0, 0x1);
        gbc.writeMem(0x9134, { 0x21, 0x35, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x8c2e);
        EXPECT(gbc.pc(), 0x9137);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9134), 0x21);
        EXPECT(gbc.readMem(0x9135), 0x35);
        EXPECT(gbc.readMem(0x9136), 0x78);
        // 21 0243
        gbc.setState(0xd3fc, 0xc409, 0xe3c0, 0xd750, 0xc056, 0xe6c9, 0x0, 0x1);
        gbc.writeMem(0xd3fc, { 0x21, 0x50, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xc409);
        EXPECT(gbc.pc(), 0xd3ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3fc), 0x21);
        EXPECT(gbc.readMem(0xd3fd), 0x50);
        EXPECT(gbc.readMem(0xd3fe), 0xd3);
        // 21 0244
        gbc.setState(0x441a, 0x1bd1, 0x66f0, 0xfe38, 0xac3c, 0x1500, 0x0, 0x0);
        gbc.writeMem(0x441a, { 0x21, 0xad, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1bd1);
        EXPECT(gbc.pc(), 0x441d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0245
        gbc.setState(0x2a9c, 0x945b, 0x6450, 0x7c96, 0xbfd8, 0x40d5, 0x1, 0x0);
        gbc.writeMem(0x2a9c, { 0x21, 0xdc, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x945b);
        EXPECT(gbc.pc(), 0x2a9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0246
        gbc.setState(0xab0b, 0x26a8, 0x9de0, 0xd8, 0x2c40, 0xd8c4, 0x1, 0x0);
        gbc.writeMem(0xab0b, { 0x21, 0xf8, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x26a8);
        EXPECT(gbc.pc(), 0xab0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab0b), 0x21);
        EXPECT(gbc.readMem(0xab0c), 0xf8);
        EXPECT(gbc.readMem(0xab0d), 0x99);
        // 21 0247
        gbc.setState(0x5603, 0x32de, 0x5720, 0xd0c5, 0xaf03, 0x381, 0x1, 0x1);
        gbc.writeMem(0x5603, { 0x21, 0x2a, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x32de);
        EXPECT(gbc.pc(), 0x5606);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0248
        gbc.setState(0xed63, 0xa421, 0xe4c0, 0xf2d3, 0xe271, 0xc4cf, 0x1, 0x0);
        gbc.writeMem(0xed63, { 0x21, 0xbb, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xa421);
        EXPECT(gbc.pc(), 0xed66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed63), 0x21);
        EXPECT(gbc.readMem(0xed64), 0xbb);
        EXPECT(gbc.readMem(0xed65), 0xe1);
        // 21 024A
        gbc.setState(0xbcdb, 0x6d67, 0x18b0, 0x38e0, 0x9a18, 0x7734, 0x1, 0x1);
        gbc.writeMem(0xbcdb, { 0x21, 0x63, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x6d67);
        EXPECT(gbc.pc(), 0xbcde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcdb), 0x21);
        EXPECT(gbc.readMem(0xbcdc), 0x63);
        EXPECT(gbc.readMem(0xbcdd), 0xa4);
        // 21 024B
        gbc.setState(0x634f, 0x3209, 0xe0b0, 0x397c, 0x7647, 0x3809, 0x1, 0x0);
        gbc.writeMem(0x634f, { 0x21, 0x2c, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x3209);
        EXPECT(gbc.pc(), 0x6352);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 024C
        gbc.setState(0x3756, 0xce40, 0xab20, 0x8996, 0x7f7d, 0x3d29, 0x0, 0x0);
        gbc.writeMem(0x3756, { 0x21, 0xfb, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xce40);
        EXPECT(gbc.pc(), 0x3759);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 024D
        gbc.setState(0x8525, 0x4cd7, 0x2f40, 0x8af5, 0x1f59, 0xb601, 0x1, 0x1);
        gbc.writeMem(0x8525, { 0x21, 0x44, 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x4cd7);
        EXPECT(gbc.pc(), 0x8528);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8525), 0x21);
        EXPECT(gbc.readMem(0x8526), 0x44);
        EXPECT(gbc.readMem(0x8527), 0xdf);
        // 21 024E
        gbc.setState(0x8280, 0xc69d, 0xebb0, 0xa4b9, 0x6ec7, 0xee29, 0x1, 0x1);
        gbc.writeMem(0x8280, { 0x21, 0xb8, 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc69d);
        EXPECT(gbc.pc(), 0x8283);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8280), 0x21);
        EXPECT(gbc.readMem(0x8281), 0xb8);
        EXPECT(gbc.readMem(0x8282), 0xa2);
        // 21 024F
        gbc.setState(0xed98, 0x3d05, 0x6610, 0xd28d, 0xba83, 0x1526, 0x1, 0x0);
        gbc.writeMem(0xed98, { 0x21, 0x83, 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x3d05);
        EXPECT(gbc.pc(), 0xed9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed98), 0x21);
        EXPECT(gbc.readMem(0xed99), 0x83);
        EXPECT(gbc.readMem(0xed9a), 0x6c);
        // 21 0250
        gbc.setState(0x7bec, 0x3665, 0xd60, 0x2fe8, 0xad3a, 0xd872, 0x0, 0x0);
        gbc.writeMem(0x7bec, { 0x21, 0xc5, 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x3665);
        EXPECT(gbc.pc(), 0x7bef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0251
        gbc.setState(0x5e27, 0x3601, 0x8970, 0xaf6d, 0x922c, 0x1113, 0x1, 0x1);
        gbc.writeMem(0x5e27, { 0x21, 0xf0, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x3601);
        EXPECT(gbc.pc(), 0x5e2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0252
        gbc.setState(0x3f73, 0xb361, 0x4550, 0xcf79, 0x20c5, 0x2495, 0x0, 0x1);
        gbc.writeMem(0x3f73, { 0x21, 0xbd, 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xb361);
        EXPECT(gbc.pc(), 0x3f76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0253
        gbc.setState(0x39b4, 0xf81, 0xb920, 0x48b0, 0x2e39, 0x3538, 0x0, 0x1);
        gbc.writeMem(0x39b4, { 0x21, 0x97, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xf81);
        EXPECT(gbc.pc(), 0x39b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0254
        gbc.setState(0x9ac0, 0x1eea, 0xeb0, 0x9767, 0x1ba, 0x85c8, 0x1, 0x1);
        gbc.writeMem(0x9ac0, { 0x21, 0x79, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x1eea);
        EXPECT(gbc.pc(), 0x9ac3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ac0), 0x21);
        EXPECT(gbc.readMem(0x9ac1), 0x79);
        EXPECT(gbc.readMem(0x9ac2), 0x53);
        // 21 0255
        gbc.setState(0x8833, 0x6122, 0xfdd0, 0x4ac5, 0xebbb, 0x8f81, 0x1, 0x1);
        gbc.writeMem(0x8833, { 0x21, 0x17, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x6122);
        EXPECT(gbc.pc(), 0x8836);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8833), 0x21);
        EXPECT(gbc.readMem(0x8834), 0x17);
        EXPECT(gbc.readMem(0x8835), 0xc3);
        // 21 0256
        gbc.setState(0x7f9c, 0x620b, 0x110, 0x2096, 0x91c4, 0xfa69, 0x1, 0x0);
        gbc.writeMem(0x7f9c, { 0x21, 0xf0, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x620b);
        EXPECT(gbc.pc(), 0x7f9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0257
        gbc.setState(0x7e, 0x9081, 0x6210, 0xb9cf, 0xe2bb, 0xc39f, 0x0, 0x0);
        gbc.writeMem(0x7e, { 0x21, 0x95, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x9081);
        EXPECT(gbc.pc(), 0x81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0258
        gbc.setState(0x39ea, 0x7bf, 0xd180, 0x3570, 0xb215, 0x6137, 0x1, 0x0);
        gbc.writeMem(0x39ea, { 0x21, 0xa2, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x7bf);
        EXPECT(gbc.pc(), 0x39ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0259
        gbc.setState(0x5250, 0x18e7, 0x4bc0, 0x614f, 0xc87e, 0xcc38, 0x1, 0x0);
        gbc.writeMem(0x5250, { 0x21, 0xbc, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x18e7);
        EXPECT(gbc.pc(), 0x5253);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 025A
        gbc.setState(0x7338, 0xc523, 0x1730, 0x9323, 0xc53e, 0xe968, 0x1, 0x1);
        gbc.writeMem(0x7338, { 0x21, 0xbc, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xc523);
        EXPECT(gbc.pc(), 0x733b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 025B
        gbc.setState(0x4f57, 0xc440, 0x8520, 0x2292, 0xb5c8, 0x78d9, 0x1, 0x1);
        gbc.writeMem(0x4f57, { 0x21, 0x1c, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xc440);
        EXPECT(gbc.pc(), 0x4f5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 025C
        gbc.setState(0x61c0, 0xb178, 0xb260, 0x9f0e, 0xa28a, 0x89ac, 0x0, 0x1);
        gbc.writeMem(0x61c0, { 0x21, 0x3a, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xb178);
        EXPECT(gbc.pc(), 0x61c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 025D
        gbc.setState(0x2e8, 0x892e, 0x2c60, 0x211f, 0xe89b, 0x69f5, 0x1, 0x1);
        gbc.writeMem(0x2e8, { 0x21, 0xf0, 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x892e);
        EXPECT(gbc.pc(), 0x2eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 025E
        gbc.setState(0xe743, 0x7866, 0x9130, 0x4aea, 0x2f31, 0x5048, 0x0, 0x1);
        gbc.writeMem(0xe743, { 0x21, 0x3c, 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x7866);
        EXPECT(gbc.pc(), 0xe746);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe743), 0x21);
        EXPECT(gbc.readMem(0xe744), 0x3c);
        EXPECT(gbc.readMem(0xe745), 0x77);
        // 21 025F
        gbc.setState(0x16d2, 0xf9b2, 0x5d0, 0xb46a, 0x56e4, 0x37e3, 0x1, 0x1);
        gbc.writeMem(0x16d2, { 0x21, 0xee, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xf9b2);
        EXPECT(gbc.pc(), 0x16d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0260
        gbc.setState(0x6d34, 0x606d, 0x3060, 0x42fc, 0x48c7, 0xc4f3, 0x1, 0x1);
        gbc.writeMem(0x6d34, { 0x21, 0xce, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x606d);
        EXPECT(gbc.pc(), 0x6d37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0261
        gbc.setState(0x2cc3, 0xdea2, 0xb5c0, 0xc18, 0x1641, 0x2696, 0x1, 0x0);
        gbc.writeMem(0x2cc3, { 0x21, 0x13, 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xdea2);
        EXPECT(gbc.pc(), 0x2cc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0262
        gbc.setState(0xfd2, 0x58e2, 0xebb0, 0x2136, 0xad0e, 0xf195, 0x1, 0x0);
        gbc.writeMem(0xfd2, { 0x21, 0xb1, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x58e2);
        EXPECT(gbc.pc(), 0xfd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0263
        gbc.setState(0x80a3, 0xc648, 0x63c0, 0x6e17, 0xb84f, 0xb191, 0x0, 0x1);
        gbc.writeMem(0x80a3, { 0x21, 0xa8, 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc648);
        EXPECT(gbc.pc(), 0x80a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80a3), 0x21);
        EXPECT(gbc.readMem(0x80a4), 0xa8);
        EXPECT(gbc.readMem(0x80a5), 0x28);
        // 21 0265
        gbc.setState(0x12dd, 0xc950, 0x450, 0xcb7b, 0x264, 0x22fc, 0x0, 0x1);
        gbc.writeMem(0x12dd, { 0x21, 0xa8, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc950);
        EXPECT(gbc.pc(), 0x12e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0266
        gbc.setState(0x939c, 0x965b, 0xa00, 0xae4b, 0x6b63, 0x8d94, 0x0, 0x0);
        gbc.writeMem(0x939c, { 0x21, 0xba, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x965b);
        EXPECT(gbc.pc(), 0x939f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x939c), 0x21);
        EXPECT(gbc.readMem(0x939d), 0xba);
        EXPECT(gbc.readMem(0x939e), 0x92);
        // 21 0267
        gbc.setState(0xef1c, 0xc95f, 0x990, 0x2098, 0x5523, 0x8ff0, 0x0, 0x0);
        gbc.writeMem(0xef1c, { 0x21, 0xc7, 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xc95f);
        EXPECT(gbc.pc(), 0xef1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef1c), 0x21);
        EXPECT(gbc.readMem(0xef1d), 0xc7);
        EXPECT(gbc.readMem(0xef1e), 0xc2);
        // 21 0268
        gbc.setState(0xe5e0, 0xbd4f, 0xb8b0, 0xec9, 0x2334, 0x3fba, 0x0, 0x0);
        gbc.writeMem(0xe5e0, { 0x21, 0x29, 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xbd4f);
        EXPECT(gbc.pc(), 0xe5e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5e0), 0x21);
        EXPECT(gbc.readMem(0xe5e1), 0x29);
        EXPECT(gbc.readMem(0xe5e2), 0xc9);
        // 21 0269
        gbc.setState(0x9f3e, 0xf0f4, 0x7e40, 0x34d1, 0xe957, 0xaf0f, 0x0, 0x1);
        gbc.writeMem(0x9f3e, { 0x21, 0x2b, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xf0f4);
        EXPECT(gbc.pc(), 0x9f41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f3e), 0x21);
        EXPECT(gbc.readMem(0x9f3f), 0x2b);
        EXPECT(gbc.readMem(0x9f40), 0xab);
        // 21 026A
        gbc.setState(0x5309, 0x8a0f, 0x5070, 0x222f, 0xd627, 0xcd39, 0x1, 0x1);
        gbc.writeMem(0x5309, { 0x21, 0x44, 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x8a0f);
        EXPECT(gbc.pc(), 0x530c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 026B
        gbc.setState(0x4fc9, 0x5ac1, 0x2520, 0xcf8c, 0x79db, 0xd86e, 0x1, 0x1);
        gbc.writeMem(0x4fc9, { 0x21, 0x66, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x5ac1);
        EXPECT(gbc.pc(), 0x4fcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 026C
        gbc.setState(0x6162, 0x43b4, 0x78c0, 0xa666, 0x505a, 0x25c8, 0x1, 0x1);
        gbc.writeMem(0x6162, { 0x21, 0x8e, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x43b4);
        EXPECT(gbc.pc(), 0x6165);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 026D
        gbc.setState(0x3063, 0xa2af, 0xa7e0, 0xefd, 0x7295, 0xb5ad, 0x0, 0x1);
        gbc.writeMem(0x3063, { 0x21, 0xac, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xa2af);
        EXPECT(gbc.pc(), 0x3066);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 026E
        gbc.setState(0xd4d1, 0x427b, 0xf9c0, 0xb096, 0xec8b, 0xf322, 0x0, 0x1);
        gbc.writeMem(0xd4d1, { 0x21, 0xc1, 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x427b);
        EXPECT(gbc.pc(), 0xd4d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4d1), 0x21);
        EXPECT(gbc.readMem(0xd4d2), 0xc1);
        EXPECT(gbc.readMem(0xd4d3), 0xdb);
        // 21 026F
        gbc.setState(0xe4f8, 0xe216, 0xbd20, 0xaeee, 0x117b, 0xf901, 0x1, 0x0);
        gbc.writeMem(0xe4f8, { 0x21, 0x2, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xe216);
        EXPECT(gbc.pc(), 0xe4fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4f8), 0x21);
        EXPECT(gbc.readMem(0xe4f9), 0x2);
        EXPECT(gbc.readMem(0xe4fa), 0xdc);
        // 21 0270
        gbc.setState(0x1a19, 0xf3a5, 0xb6e0, 0xe4f8, 0xe39c, 0xa7ce, 0x0, 0x0);
        gbc.writeMem(0x1a19, { 0x21, 0x53, 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xf3a5);
        EXPECT(gbc.pc(), 0x1a1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0271
        gbc.setState(0xe943, 0xbc4c, 0x1b80, 0xb357, 0x4ab8, 0x9249, 0x0, 0x0);
        gbc.writeMem(0xe943, { 0x21, 0x19, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xbc4c);
        EXPECT(gbc.pc(), 0xe946);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe943), 0x21);
        EXPECT(gbc.readMem(0xe944), 0x19);
        EXPECT(gbc.readMem(0xe945), 0x5e);
        // 21 0272
        gbc.setState(0xdcb5, 0x55d1, 0x5b20, 0xad6, 0xc5be, 0xf42e, 0x1, 0x0);
        gbc.writeMem(0xdcb5, { 0x21, 0xc5, 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x55d1);
        EXPECT(gbc.pc(), 0xdcb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcb5), 0x21);
        EXPECT(gbc.readMem(0xdcb6), 0xc5);
        EXPECT(gbc.readMem(0xdcb7), 0x3d);
        // 21 0273
        gbc.setState(0xd2fb, 0xa26c, 0xcc10, 0x8a65, 0x774f, 0xe618, 0x1, 0x0);
        gbc.writeMem(0xd2fb, { 0x21, 0xe8, 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xa26c);
        EXPECT(gbc.pc(), 0xd2fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2fb), 0x21);
        EXPECT(gbc.readMem(0xd2fc), 0xe8);
        EXPECT(gbc.readMem(0xd2fd), 0x71);
        // 21 0274
        gbc.setState(0x44ac, 0xb38, 0x19e0, 0x4dac, 0x3950, 0x29e0, 0x0, 0x0);
        gbc.writeMem(0x44ac, { 0x21, 0x6, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xb38);
        EXPECT(gbc.pc(), 0x44af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0275
        gbc.setState(0x3091, 0xa504, 0x6790, 0x38cc, 0x3947, 0x54c6, 0x1, 0x1);
        gbc.writeMem(0x3091, { 0x21, 0xec, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xa504);
        EXPECT(gbc.pc(), 0x3094);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0276
        gbc.setState(0x7da0, 0xe3e1, 0x15a0, 0xb3d6, 0x34ba, 0x45ec, 0x0, 0x1);
        gbc.writeMem(0x7da0, { 0x21, 0x97, 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xe3e1);
        EXPECT(gbc.pc(), 0x7da3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0277
        gbc.setState(0x7e0e, 0x3944, 0x95f0, 0xe09f, 0xc291, 0x8e6, 0x0, 0x0);
        gbc.writeMem(0x7e0e, { 0x21, 0xc9, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x3944);
        EXPECT(gbc.pc(), 0x7e11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0278
        gbc.setState(0x1038, 0x2729, 0xd380, 0xdf4f, 0xe402, 0x5f37, 0x1, 0x1);
        gbc.writeMem(0x1038, { 0x21, 0x1e, 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x2729);
        EXPECT(gbc.pc(), 0x103b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0279
        gbc.setState(0xd4e1, 0xe542, 0x7fd0, 0x3c02, 0xaa38, 0x167a, 0x0, 0x1);
        gbc.writeMem(0xd4e1, { 0x21, 0xbe, 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xe542);
        EXPECT(gbc.pc(), 0xd4e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4e1), 0x21);
        EXPECT(gbc.readMem(0xd4e2), 0xbe);
        EXPECT(gbc.readMem(0xd4e3), 0x45);
        // 21 027A
        gbc.setState(0x99d1, 0xccfc, 0xd390, 0x5545, 0x1c05, 0xe17d, 0x0, 0x0);
        gbc.writeMem(0x99d1, { 0x21, 0x77, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xccfc);
        EXPECT(gbc.pc(), 0x99d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99d1), 0x21);
        EXPECT(gbc.readMem(0x99d2), 0x77);
        EXPECT(gbc.readMem(0x99d3), 0xb1);
        // 21 027B
        gbc.setState(0x7433, 0xcaaf, 0x8800, 0x70b6, 0xffbe, 0x4edb, 0x0, 0x1);
        gbc.writeMem(0x7433, { 0x21, 0x8b, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xcaaf);
        EXPECT(gbc.pc(), 0x7436);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 027C
        gbc.setState(0x4ade, 0x3a4f, 0x37a0, 0xd8f3, 0xd8d, 0xcd10, 0x0, 0x1);
        gbc.writeMem(0x4ade, { 0x21, 0x5f, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x3a4f);
        EXPECT(gbc.pc(), 0x4ae1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 027D
        gbc.setState(0x192e, 0xb52e, 0xe0e0, 0x17fe, 0x9d5d, 0xa4e2, 0x1, 0x0);
        gbc.writeMem(0x192e, { 0x21, 0xc6, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xb52e);
        EXPECT(gbc.pc(), 0x1931);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 027E
        gbc.setState(0xc863, 0xdf4e, 0x3270, 0x78d3, 0x31d2, 0x5c12, 0x1, 0x0);
        gbc.writeMem(0xc863, { 0x21, 0xbc, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xdf4e);
        EXPECT(gbc.pc(), 0xc866);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc863), 0x21);
        EXPECT(gbc.readMem(0xc864), 0xbc);
        EXPECT(gbc.readMem(0xc865), 0x82);
        // 21 027F
        gbc.setState(0xa44f, 0x8bd2, 0x5dd0, 0xb820, 0x8db3, 0x3d6c, 0x1, 0x0);
        gbc.writeMem(0xa44f, { 0x21, 0x67, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x8bd2);
        EXPECT(gbc.pc(), 0xa452);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa44f), 0x21);
        EXPECT(gbc.readMem(0xa450), 0x67);
        EXPECT(gbc.readMem(0xa451), 0x83);
        // 21 0280
        gbc.setState(0x5fb2, 0x659a, 0x9360, 0xe55a, 0x8d78, 0x6487, 0x0, 0x1);
        gbc.writeMem(0x5fb2, { 0x21, 0xfb, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x659a);
        EXPECT(gbc.pc(), 0x5fb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0281
        gbc.setState(0xa4f3, 0xf8, 0x35e0, 0x634e, 0xf937, 0x3550, 0x1, 0x1);
        gbc.writeMem(0xa4f3, { 0x21, 0xaf, 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xf8);
        EXPECT(gbc.pc(), 0xa4f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4f3), 0x21);
        EXPECT(gbc.readMem(0xa4f4), 0xaf);
        EXPECT(gbc.readMem(0xa4f5), 0x93);
        // 21 0282
        gbc.setState(0x1595, 0xaeff, 0x3920, 0x258b, 0xcb39, 0x3cb9, 0x1, 0x0);
        gbc.writeMem(0x1595, { 0x21, 0xdf, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xaeff);
        EXPECT(gbc.pc(), 0x1598);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0283
        gbc.setState(0xe4db, 0xfd3b, 0x7500, 0xa0bf, 0xbd56, 0x5389, 0x1, 0x0);
        gbc.writeMem(0xe4db, { 0x21, 0xe, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xfd3b);
        EXPECT(gbc.pc(), 0xe4de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4db), 0x21);
        EXPECT(gbc.readMem(0xe4dc), 0xe);
        EXPECT(gbc.readMem(0xe4dd), 0xaf);
        // 21 0284
        gbc.setState(0xc348, 0xa55a, 0x7b60, 0x46c5, 0x9504, 0x88e1, 0x0, 0x0);
        gbc.writeMem(0xc348, { 0x21, 0xe6, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xa55a);
        EXPECT(gbc.pc(), 0xc34b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc348), 0x21);
        EXPECT(gbc.readMem(0xc349), 0xe6);
        EXPECT(gbc.readMem(0xc34a), 0xfe);
        // 21 0285
        gbc.setState(0x136a, 0xf32a, 0x8550, 0xb36, 0xb4e5, 0x13d6, 0x0, 0x0);
        gbc.writeMem(0x136a, { 0x21, 0x85, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xf32a);
        EXPECT(gbc.pc(), 0x136d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0286
        gbc.setState(0x7984, 0x6d7d, 0x8050, 0x42d, 0x1aba, 0xd061, 0x0, 0x1);
        gbc.writeMem(0x7984, { 0x21, 0xb9, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x6d7d);
        EXPECT(gbc.pc(), 0x7987);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0287
        gbc.setState(0xab70, 0x6826, 0x3b70, 0x1f96, 0x1c3, 0x768d, 0x1, 0x1);
        gbc.writeMem(0xab70, { 0x21, 0xb2, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6826);
        EXPECT(gbc.pc(), 0xab73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab70), 0x21);
        EXPECT(gbc.readMem(0xab71), 0xb2);
        EXPECT(gbc.readMem(0xab72), 0x36);
        // 21 0288
        gbc.setState(0x565d, 0xa6ec, 0x19f0, 0x9116, 0x9146, 0x1957, 0x1, 0x1);
        gbc.writeMem(0x565d, { 0x21, 0x12, 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xa6ec);
        EXPECT(gbc.pc(), 0x5660);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0289
        gbc.setState(0xdf8f, 0x38a7, 0x530, 0x29a5, 0x5ae7, 0xcc82, 0x1, 0x0);
        gbc.writeMem(0xdf8f, { 0x21, 0x55, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x38a7);
        EXPECT(gbc.pc(), 0xdf92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf8f), 0x21);
        EXPECT(gbc.readMem(0xdf90), 0x55);
        EXPECT(gbc.readMem(0xdf91), 0xce);
        // 21 028A
        gbc.setState(0x2531, 0xfefe, 0xfd00, 0x2f19, 0xdc99, 0x6e25, 0x0, 0x1);
        gbc.writeMem(0x2531, { 0x21, 0x51, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xfefe);
        EXPECT(gbc.pc(), 0x2534);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 028B
        gbc.setState(0x533, 0x6242, 0x4d0, 0xd307, 0x8b75, 0xe745, 0x0, 0x1);
        gbc.writeMem(0x533, { 0x21, 0x71, 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x6242);
        EXPECT(gbc.pc(), 0x536);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 028C
        gbc.setState(0x2673, 0x7f3c, 0x9110, 0x7b32, 0xc864, 0x50ea, 0x1, 0x0);
        gbc.writeMem(0x2673, { 0x21, 0x58, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x7f3c);
        EXPECT(gbc.pc(), 0x2676);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 028D
        gbc.setState(0xde7f, 0x2b85, 0x8dd0, 0x496b, 0x8111, 0x50cc, 0x0, 0x1);
        gbc.writeMem(0xde7f, { 0x21, 0xf3, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x2b85);
        EXPECT(gbc.pc(), 0xde82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde7f), 0x21);
        EXPECT(gbc.readMem(0xde80), 0xf3);
        EXPECT(gbc.readMem(0xde81), 0x53);
        // 21 028E
        gbc.setState(0x31fc, 0xa149, 0xe000, 0x46cb, 0xe90, 0xfeae, 0x1, 0x0);
        gbc.writeMem(0x31fc, { 0x21, 0x56, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xa149);
        EXPECT(gbc.pc(), 0x31ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0290
        gbc.setState(0x2885, 0xd88b, 0xf500, 0xd7ae, 0x81e1, 0x5aa, 0x1, 0x0);
        gbc.writeMem(0x2885, { 0x21, 0x4c, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd88b);
        EXPECT(gbc.pc(), 0x2888);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0291
        gbc.setState(0x5c1c, 0x6520, 0xec90, 0x3624, 0xb34f, 0x48c0, 0x0, 0x0);
        gbc.writeMem(0x5c1c, { 0x21, 0xd3, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x6520);
        EXPECT(gbc.pc(), 0x5c1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0292
        gbc.setState(0x2c15, 0x5fc7, 0xb0c0, 0x59d2, 0x19c5, 0x673a, 0x0, 0x1);
        gbc.writeMem(0x2c15, { 0x21, 0xce, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x5fc7);
        EXPECT(gbc.pc(), 0x2c18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0293
        gbc.setState(0x2dab, 0xdd87, 0x4340, 0xa0c8, 0xb9d4, 0x3e97, 0x1, 0x1);
        gbc.writeMem(0x2dab, { 0x21, 0xfd, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xdd87);
        EXPECT(gbc.pc(), 0x2dae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0294
        gbc.setState(0x3de, 0xb0e7, 0xee90, 0x9702, 0x9a38, 0x9f96, 0x0, 0x0);
        gbc.writeMem(0x3de, { 0x21, 0x59, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xb0e7);
        EXPECT(gbc.pc(), 0x3e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0295
        gbc.setState(0x2ef9, 0x2d14, 0x12c0, 0x8edd, 0x7ead, 0xea9e, 0x0, 0x0);
        gbc.writeMem(0x2ef9, { 0x21, 0x62, 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x2d14);
        EXPECT(gbc.pc(), 0x2efc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0297
        gbc.setState(0x10f5, 0x39df, 0xfb30, 0xf8ad, 0xe605, 0x2d55, 0x0, 0x1);
        gbc.writeMem(0x10f5, { 0x21, 0x6, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x39df);
        EXPECT(gbc.pc(), 0x10f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0298
        gbc.setState(0xd2da, 0x8ae7, 0x8390, 0xc59d, 0x6d3b, 0x3764, 0x1, 0x0);
        gbc.writeMem(0xd2da, { 0x21, 0xfe, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x8ae7);
        EXPECT(gbc.pc(), 0xd2dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2da), 0x21);
        EXPECT(gbc.readMem(0xd2db), 0xfe);
        EXPECT(gbc.readMem(0xd2dc), 0xbb);
        // 21 0299
        gbc.setState(0x53fb, 0x62b3, 0x3580, 0xa7a4, 0xd544, 0x8d0, 0x1, 0x0);
        gbc.writeMem(0x53fb, { 0x21, 0x2d, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x62b3);
        EXPECT(gbc.pc(), 0x53fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 029A
        gbc.setState(0x1e37, 0xa8fe, 0x1e10, 0x78be, 0xd84c, 0x667a, 0x1, 0x0);
        gbc.writeMem(0x1e37, { 0x21, 0x88, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xa8fe);
        EXPECT(gbc.pc(), 0x1e3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 029B
        gbc.setState(0xde02, 0xc4df, 0xb1b0, 0x7057, 0xe520, 0x45fb, 0x1, 0x1);
        gbc.writeMem(0xde02, { 0x21, 0xe5, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xc4df);
        EXPECT(gbc.pc(), 0xde05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde02), 0x21);
        EXPECT(gbc.readMem(0xde03), 0xe5);
        EXPECT(gbc.readMem(0xde04), 0x1a);
        // 21 029C
        gbc.setState(0xac66, 0xda25, 0x76e0, 0x567b, 0xa03d, 0xac59, 0x0, 0x1);
        gbc.writeMem(0xac66, { 0x21, 0x66, 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xda25);
        EXPECT(gbc.pc(), 0xac69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac66), 0x21);
        EXPECT(gbc.readMem(0xac67), 0x66);
        EXPECT(gbc.readMem(0xac68), 0x63);
        // 21 029E
        gbc.setState(0xe1a0, 0xc764, 0x3490, 0xa1e6, 0xb1e3, 0x1fd5, 0x0, 0x0);
        gbc.writeMem(0xe1a0, { 0x21, 0xa8, 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc764);
        EXPECT(gbc.pc(), 0xe1a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1a0), 0x21);
        EXPECT(gbc.readMem(0xe1a1), 0xa8);
        EXPECT(gbc.readMem(0xe1a2), 0x5);
        // 21 029F
        gbc.setState(0x6c69, 0xb94d, 0x6dd0, 0xc3c3, 0x3488, 0xb22c, 0x1, 0x1);
        gbc.writeMem(0x6c69, { 0x21, 0x2b, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xb94d);
        EXPECT(gbc.pc(), 0x6c6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 02A0
        gbc.setState(0x911c, 0xaaf5, 0x8fb0, 0x5887, 0xbd98, 0xedcb, 0x1, 0x0);
        gbc.writeMem(0x911c, { 0x21, 0xdd, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xaaf5);
        EXPECT(gbc.pc(), 0x911f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x911c), 0x21);
        EXPECT(gbc.readMem(0x911d), 0xdd);
        EXPECT(gbc.readMem(0x911e), 0xa3);
        // 21 02A1
        gbc.setState(0xaf47, 0x5706, 0xde90, 0xb237, 0xecec, 0x7d77, 0x1, 0x1);
        gbc.writeMem(0xaf47, { 0x21, 0xa9, 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x5706);
        EXPECT(gbc.pc(), 0xaf4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf47), 0x21);
        EXPECT(gbc.readMem(0xaf48), 0xa9);
        EXPECT(gbc.readMem(0xaf49), 0x2d);
        // 21 02A2
        gbc.setState(0x2fa7, 0x1029, 0xab30, 0x1b7, 0x938f, 0x2e0, 0x0, 0x1);
        gbc.writeMem(0x2fa7, { 0x21, 0xa7, 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x1029);
        EXPECT(gbc.pc(), 0x2faa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 02A3
        gbc.setState(0xaaae, 0x917b, 0x16b0, 0x2a6d, 0x37b9, 0x1354, 0x0, 0x0);
        gbc.writeMem(0xaaae, { 0x21, 0x4b, 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x917b);
        EXPECT(gbc.pc(), 0xaab1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaae), 0x21);
        EXPECT(gbc.readMem(0xaaaf), 0x4b);
        EXPECT(gbc.readMem(0xaab0), 0x45);
        // 21 02A4
        gbc.setState(0x1a4e, 0xae54, 0x1c00, 0x9ebe, 0x8ae2, 0x4010, 0x1, 0x1);
        gbc.writeMem(0x1a4e, { 0x21, 0x12, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xae54);
        EXPECT(gbc.pc(), 0x1a51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 02A5
        gbc.setState(0xbfa8, 0x7a01, 0x4660, 0x855a, 0xa2c0, 0x6f9b, 0x0, 0x0);
        gbc.writeMem(0xbfa8, { 0x21, 0x77, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x7a01);
        EXPECT(gbc.pc(), 0xbfab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfa8), 0x21);
        EXPECT(gbc.readMem(0xbfa9), 0x77);
        EXPECT(gbc.readMem(0xbfaa), 0xa8);
        // 21 02A6
        gbc.setState(0x4f60, 0xdb92, 0x5830, 0xa34c, 0x1206, 0xb3f6, 0x1, 0x0);
        gbc.writeMem(0x4f60, { 0x21, 0xef, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xdb92);
        EXPECT(gbc.pc(), 0x4f63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 02A8
        gbc.setState(0x9ed, 0x90e8, 0xa1c0, 0xe6d, 0xcd7e, 0xe179, 0x1, 0x1);
        gbc.writeMem(0x9ed, { 0x21, 0x0, 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x90e8);
        EXPECT(gbc.pc(), 0x9f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 02A9
        gbc.setState(0x794a, 0x3f55, 0xb9e0, 0x8076, 0x468c, 0x6b0c, 0x0, 0x1);
        gbc.writeMem(0x794a, { 0x21, 0x4c, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x3f55);
        EXPECT(gbc.pc(), 0x794d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 02AA
        gbc.setState(0xc1c, 0x44bf, 0x81e0, 0xd73e, 0x265b, 0xd47c, 0x0, 0x0);
        gbc.writeMem(0xc1c, { 0x21, 0x66, 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x44bf);
        EXPECT(gbc.pc(), 0xc1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 02AB
        gbc.setState(0x2262, 0x57a4, 0xed40, 0x88b2, 0xffa7, 0xe211, 0x0, 0x0);
        gbc.writeMem(0x2262, { 0x21, 0xd7, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x57a4);
        EXPECT(gbc.pc(), 0x2265);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 02AC
        gbc.setState(0x1fca, 0x7e19, 0xba50, 0x5819, 0x781c, 0x296c, 0x0, 0x0);
        gbc.writeMem(0x1fca, { 0x21, 0x92, 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x7e19);
        EXPECT(gbc.pc(), 0x1fcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 02AD
        gbc.setState(0x53d, 0xaafe, 0x1db0, 0x7eb1, 0x40dd, 0xc903, 0x1, 0x0);
        gbc.writeMem(0x53d, { 0x21, 0x31, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xaafe);
        EXPECT(gbc.pc(), 0x540);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 02AE
        gbc.setState(0x4e00, 0x63c5, 0x9c90, 0xcada, 0xafb6, 0x38e3, 0x0, 0x1);
        gbc.writeMem(0x4e00, { 0x21, 0x8f, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x63c5);
        EXPECT(gbc.pc(), 0x4e03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 02AF
        gbc.setState(0xdb39, 0xdde5, 0xc0e0, 0x7ba7, 0x5452, 0x6286, 0x1, 0x0);
        gbc.writeMem(0xdb39, { 0x21, 0xa4, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xdde5);
        EXPECT(gbc.pc(), 0xdb3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb39), 0x21);
        EXPECT(gbc.readMem(0xdb3a), 0xa4);
        EXPECT(gbc.readMem(0xdb3b), 0xb0);
        // 21 02B0
        gbc.setState(0x7b1c, 0x6c08, 0x24c0, 0x5c14, 0x84a4, 0xc0c8, 0x1, 0x1);
        gbc.writeMem(0x7b1c, { 0x21, 0xb0, 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x6c08);
        EXPECT(gbc.pc(), 0x7b1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 02B1
        gbc.setState(0x629c, 0xa3ca, 0x5cb0, 0x545a, 0xc296, 0xf33d, 0x0, 0x1);
        gbc.writeMem(0x629c, { 0x21, 0xa3, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xa3ca);
        EXPECT(gbc.pc(), 0x629f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 02B2
        gbc.setState(0x44e4, 0x2d82, 0xc8a0, 0xf2e0, 0xd9d9, 0xc8eb, 0x0, 0x1);
        gbc.writeMem(0x44e4, { 0x21, 0x35, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x2d82);
        EXPECT(gbc.pc(), 0x44e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 02B3
        gbc.setState(0x344, 0xb0d3, 0x710, 0xc1ac, 0xaaea, 0x2d9d, 0x0, 0x1);
        gbc.writeMem(0x344, { 0x21, 0x71, 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xb0d3);
        EXPECT(gbc.pc(), 0x347);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 02B4
        gbc.setState(0xa941, 0xe59f, 0x48e0, 0x8d15, 0x16fb, 0xa50a, 0x0, 0x0);
        gbc.writeMem(0xa941, { 0x21, 0xf4, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xe59f);
        EXPECT(gbc.pc(), 0xa944);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa941), 0x21);
        EXPECT(gbc.readMem(0xa942), 0xf4);
        EXPECT(gbc.readMem(0xa943), 0x25);
        // 21 02B5
        gbc.setState(0x555e, 0xc5e2, 0xa5e0, 0xd577, 0x6173, 0x1a36, 0x1, 0x1);
        gbc.writeMem(0x555e, { 0x21, 0xed, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xc5e2);
        EXPECT(gbc.pc(), 0x5561);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 02B6
        gbc.setState(0x7cf4, 0x9d87, 0xb780, 0xd30f, 0xbf7e, 0x32f5, 0x1, 0x1);
        gbc.writeMem(0x7cf4, { 0x21, 0xa3, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9d87);
        EXPECT(gbc.pc(), 0x7cf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 02B7
        gbc.setState(0xcfb5, 0x7c4a, 0xd6f0, 0x8c3c, 0x2bbf, 0x7f05, 0x0, 0x1);
        gbc.writeMem(0xcfb5, { 0x21, 0x92, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x7c4a);
        EXPECT(gbc.pc(), 0xcfb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfb5), 0x21);
        EXPECT(gbc.readMem(0xcfb6), 0x92);
        EXPECT(gbc.readMem(0xcfb7), 0x4e);
        // 21 02B8
        gbc.setState(0xa10c, 0x5268, 0x51d0, 0x113e, 0x2051, 0xc62e, 0x0, 0x1);
        gbc.writeMem(0xa10c, { 0x21, 0x3, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x5268);
        EXPECT(gbc.pc(), 0xa10f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa10c), 0x21);
        EXPECT(gbc.readMem(0xa10d), 0x3);
        EXPECT(gbc.readMem(0xa10e), 0x59);
        // 21 02B9
        gbc.setState(0x81c6, 0xd338, 0x7850, 0x3cf0, 0x7107, 0xc1, 0x1, 0x1);
        gbc.writeMem(0x81c6, { 0x21, 0xf3, 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xd338);
        EXPECT(gbc.pc(), 0x81c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81c6), 0x21);
        EXPECT(gbc.readMem(0x81c7), 0xf3);
        EXPECT(gbc.readMem(0x81c8), 0xb4);
        // 21 02BA
        gbc.setState(0x2248, 0x3f01, 0x2c90, 0x28d0, 0x32ca, 0xb3b1, 0x1, 0x1);
        gbc.writeMem(0x2248, { 0x21, 0x3a, 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x3f01);
        EXPECT(gbc.pc(), 0x224b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 02BB
        gbc.setState(0x6266, 0x39fd, 0xa3e0, 0x4aef, 0x9f2d, 0x9915, 0x1, 0x1);
        gbc.writeMem(0x6266, { 0x21, 0xd2, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x39fd);
        EXPECT(gbc.pc(), 0x6269);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 02BC
        gbc.setState(0xebd, 0x9b1f, 0xf9f0, 0x62be, 0xe01a, 0xce8f, 0x0, 0x1);
        gbc.writeMem(0xebd, { 0x21, 0xdd, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x9b1f);
        EXPECT(gbc.pc(), 0xec0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 02BD
        gbc.setState(0x6185, 0x8e34, 0x2360, 0x4e7d, 0xf2fd, 0x6e3c, 0x1, 0x0);
        gbc.writeMem(0x6185, { 0x21, 0x6, 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x8e34);
        EXPECT(gbc.pc(), 0x6188);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 02BE
        gbc.setState(0x39c6, 0xc5d3, 0xbf80, 0x56a7, 0x298, 0x982f, 0x0, 0x0);
        gbc.writeMem(0x39c6, { 0x21, 0xa8, 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc5d3);
        EXPECT(gbc.pc(), 0x39c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 02BF
        gbc.setState(0x9da1, 0x214a, 0x4940, 0xc3fd, 0xb698, 0x832b, 0x0, 0x0);
        gbc.writeMem(0x9da1, { 0x21, 0x9, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x214a);
        EXPECT(gbc.pc(), 0x9da4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9da1), 0x21);
        EXPECT(gbc.readMem(0x9da2), 0x9);
        EXPECT(gbc.readMem(0x9da3), 0xd5);
        // 21 02C1
        gbc.setState(0x724d, 0xd6d9, 0x95c0, 0xc8ef, 0x73d1, 0x88df, 0x0, 0x0);
        gbc.writeMem(0x724d, { 0x21, 0xb1, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xd6d9);
        EXPECT(gbc.pc(), 0x7250);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 02C2
        gbc.setState(0x7963, 0x8f04, 0xef60, 0xeef8, 0xf715, 0x504e, 0x0, 0x0);
        gbc.writeMem(0x7963, { 0x21, 0xec, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x8f04);
        EXPECT(gbc.pc(), 0x7966);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 02C3
        gbc.setState(0x576d, 0xc2a4, 0xd6c0, 0x2b8f, 0x4fce, 0xa79b, 0x1, 0x0);
        gbc.writeMem(0x576d, { 0x21, 0xd9, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xc2a4);
        EXPECT(gbc.pc(), 0x5770);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 02C5
        gbc.setState(0xd36d, 0x1c39, 0x1610, 0x81b8, 0x6801, 0x7946, 0x0, 0x1);
        gbc.writeMem(0xd36d, { 0x21, 0xd9, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x1c39);
        EXPECT(gbc.pc(), 0xd370);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd36d), 0x21);
        EXPECT(gbc.readMem(0xd36e), 0xd9);
        EXPECT(gbc.readMem(0xd36f), 0x6);
        // 21 02C6
        gbc.setState(0x205e, 0x4032, 0xbcf0, 0xa6f3, 0xa020, 0x78e7, 0x0, 0x1);
        gbc.writeMem(0x205e, { 0x21, 0xa7, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x4032);
        EXPECT(gbc.pc(), 0x2061);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 02C7
        gbc.setState(0x972b, 0xe718, 0x4c40, 0xb05a, 0xd8d, 0xa671, 0x1, 0x0);
        gbc.writeMem(0x972b, { 0x21, 0x50, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xe718);
        EXPECT(gbc.pc(), 0x972e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x972b), 0x21);
        EXPECT(gbc.readMem(0x972c), 0x50);
        EXPECT(gbc.readMem(0x972d), 0xf3);
        // 21 02C8
        gbc.setState(0x1028, 0x1c3, 0x6b80, 0xd557, 0x9531, 0xdb9c, 0x1, 0x1);
        gbc.writeMem(0x1028, { 0x21, 0x74, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x1c3);
        EXPECT(gbc.pc(), 0x102b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 02CA
        gbc.setState(0xe425, 0x78eb, 0x1700, 0xd076, 0x6baf, 0x15bf, 0x1, 0x0);
        gbc.writeMem(0xe425, { 0x21, 0xb9, 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x78eb);
        EXPECT(gbc.pc(), 0xe428);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe425), 0x21);
        EXPECT(gbc.readMem(0xe426), 0xb9);
        EXPECT(gbc.readMem(0xe427), 0xe4);
        // 21 02CB
        gbc.setState(0xb2b0, 0xe9ac, 0x7260, 0xa379, 0x3797, 0x5902, 0x1, 0x0);
        gbc.writeMem(0xb2b0, { 0x21, 0xc7, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xe9ac);
        EXPECT(gbc.pc(), 0xb2b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2b0), 0x21);
        EXPECT(gbc.readMem(0xb2b1), 0xc7);
        EXPECT(gbc.readMem(0xb2b2), 0x43);
        // 21 02CC
        gbc.setState(0x65b6, 0xae72, 0x1810, 0x86f0, 0x85f9, 0xad8c, 0x1, 0x1);
        gbc.writeMem(0x65b6, { 0x21, 0xae, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xae72);
        EXPECT(gbc.pc(), 0x65b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 02CD
        gbc.setState(0x804c, 0x65e7, 0xc6d0, 0x72bf, 0x4b81, 0x9294, 0x1, 0x1);
        gbc.writeMem(0x804c, { 0x21, 0x69, 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x65e7);
        EXPECT(gbc.pc(), 0x804f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x804c), 0x21);
        EXPECT(gbc.readMem(0x804d), 0x69);
        EXPECT(gbc.readMem(0x804e), 0xc4);
        // 21 02CE
        gbc.setState(0x2ef5, 0x8db6, 0x6600, 0xa60, 0xb1f5, 0x4cdd, 0x0, 0x0);
        gbc.writeMem(0x2ef5, { 0x21, 0x54, 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x8db6);
        EXPECT(gbc.pc(), 0x2ef8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 02CF
        gbc.setState(0x393e, 0x1214, 0x1350, 0x1d00, 0xfdcc, 0x638f, 0x0, 0x0);
        gbc.writeMem(0x393e, { 0x21, 0x13, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x1214);
        EXPECT(gbc.pc(), 0x3941);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 02D0
        gbc.setState(0x6d05, 0xde3f, 0x22a0, 0xc1a9, 0x1e2e, 0xed36, 0x0, 0x1);
        gbc.writeMem(0x6d05, { 0x21, 0x15, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xde3f);
        EXPECT(gbc.pc(), 0x6d08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 02D1
        gbc.setState(0x5533, 0x4db8, 0xbb90, 0x1a25, 0xab15, 0x65bf, 0x0, 0x1);
        gbc.writeMem(0x5533, { 0x21, 0x89, 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x4db8);
        EXPECT(gbc.pc(), 0x5536);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 02D2
        gbc.setState(0x8b2, 0x29be, 0x380, 0x51a3, 0x60e1, 0xe606, 0x0, 0x1);
        gbc.writeMem(0x8b2, { 0x21, 0x66, 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x29be);
        EXPECT(gbc.pc(), 0x8b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 02D3
        gbc.setState(0x6ee5, 0x74a4, 0x50d0, 0x5d32, 0x5c70, 0x5821, 0x0, 0x0);
        gbc.writeMem(0x6ee5, { 0x21, 0x67, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x74a4);
        EXPECT(gbc.pc(), 0x6ee8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 02D4
        gbc.setState(0x9eee, 0x2ee5, 0xfcf0, 0xcc97, 0xfbb7, 0x4d32, 0x1, 0x0);
        gbc.writeMem(0x9eee, { 0x21, 0x4, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x2ee5);
        EXPECT(gbc.pc(), 0x9ef1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9eee), 0x21);
        EXPECT(gbc.readMem(0x9eef), 0x4);
        EXPECT(gbc.readMem(0x9ef0), 0xca);
        // 21 02D5
        gbc.setState(0x2359, 0x2c94, 0xd5e0, 0x3a37, 0x6ab2, 0x4e05, 0x1, 0x1);
        gbc.writeMem(0x2359, { 0x21, 0x46, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x2c94);
        EXPECT(gbc.pc(), 0x235c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 02D6
        gbc.setState(0xecec, 0xa6ef, 0x2b10, 0x2c68, 0x2bd3, 0xeeaa, 0x1, 0x0);
        gbc.writeMem(0xecec, { 0x21, 0xb, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xa6ef);
        EXPECT(gbc.pc(), 0xecef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecec), 0x21);
        EXPECT(gbc.readMem(0xeced), 0xb);
        EXPECT(gbc.readMem(0xecee), 0x4f);
        // 21 02D8
        gbc.setState(0x443f, 0x7d16, 0xbde0, 0xc49a, 0x951b, 0x111d, 0x1, 0x0);
        gbc.writeMem(0x443f, { 0x21, 0x50, 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x7d16);
        EXPECT(gbc.pc(), 0x4442);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 02D9
        gbc.setState(0x3652, 0xc98d, 0xe810, 0x6307, 0xda34, 0x5f98, 0x0, 0x1);
        gbc.writeMem(0x3652, { 0x21, 0x88, 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc98d);
        EXPECT(gbc.pc(), 0x3655);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 02DA
        gbc.setState(0x8740, 0xc69b, 0x1350, 0x7cd3, 0xba11, 0xee0d, 0x0, 0x1);
        gbc.writeMem(0x8740, { 0x21, 0xcb, 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc69b);
        EXPECT(gbc.pc(), 0x8743);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8740), 0x21);
        EXPECT(gbc.readMem(0x8741), 0xcb);
        EXPECT(gbc.readMem(0x8742), 0xe4);
        // 21 02DB
        gbc.setState(0x1015, 0xb20e, 0x2370, 0xdfef, 0xe292, 0x8449, 0x1, 0x0);
        gbc.writeMem(0x1015, { 0x21, 0x2d, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xb20e);
        EXPECT(gbc.pc(), 0x1018);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 02DC
        gbc.setState(0xc758, 0x6cc0, 0x430, 0x32d1, 0xd78f, 0xa2d5, 0x1, 0x0);
        gbc.writeMem(0xc758, { 0x21, 0xb5, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x6cc0);
        EXPECT(gbc.pc(), 0xc75b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc758), 0x21);
        EXPECT(gbc.readMem(0xc759), 0xb5);
        EXPECT(gbc.readMem(0xc75a), 0xb5);
        // 21 02DD
        gbc.setState(0x67cc, 0xde75, 0x6140, 0x5cc9, 0x5b7a, 0xf4f6, 0x0, 0x1);
        gbc.writeMem(0x67cc, { 0x21, 0x92, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xde75);
        EXPECT(gbc.pc(), 0x67cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 02DE
        gbc.setState(0xb38b, 0x2e22, 0x2f50, 0xe71b, 0x203f, 0x2966, 0x0, 0x1);
        gbc.writeMem(0xb38b, { 0x21, 0x97, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x2e22);
        EXPECT(gbc.pc(), 0xb38e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb38b), 0x21);
        EXPECT(gbc.readMem(0xb38c), 0x97);
        EXPECT(gbc.readMem(0xb38d), 0xd2);
        // 21 02DF
        gbc.setState(0x9fc7, 0x8941, 0xd0c0, 0xe8c5, 0x929b, 0xd352, 0x1, 0x0);
        gbc.writeMem(0x9fc7, { 0x21, 0xc1, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x8941);
        EXPECT(gbc.pc(), 0x9fca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fc7), 0x21);
        EXPECT(gbc.readMem(0x9fc8), 0xc1);
        EXPECT(gbc.readMem(0x9fc9), 0x17);
        // 21 02E0
        gbc.setState(0xabc1, 0xfd64, 0x58a0, 0x7e22, 0x3765, 0x8827, 0x1, 0x0);
        gbc.writeMem(0xabc1, { 0x21, 0xf8, 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xfd64);
        EXPECT(gbc.pc(), 0xabc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabc1), 0x21);
        EXPECT(gbc.readMem(0xabc2), 0xf8);
        EXPECT(gbc.readMem(0xabc3), 0x6f);
        // 21 02E1
        gbc.setState(0xa2f0, 0xb18, 0x2100, 0xc50c, 0x888c, 0xfc87, 0x0, 0x0);
        gbc.writeMem(0xa2f0, { 0x21, 0xd6, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xb18);
        EXPECT(gbc.pc(), 0xa2f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2f0), 0x21);
        EXPECT(gbc.readMem(0xa2f1), 0xd6);
        EXPECT(gbc.readMem(0xa2f2), 0x42);
        // 21 02E2
        gbc.setState(0xada6, 0xb134, 0xdb40, 0xcc44, 0xfd7d, 0x8b6e, 0x0, 0x1);
        gbc.writeMem(0xada6, { 0x21, 0x72, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xb134);
        EXPECT(gbc.pc(), 0xada9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xada6), 0x21);
        EXPECT(gbc.readMem(0xada7), 0x72);
        EXPECT(gbc.readMem(0xada8), 0xc7);
        // 21 02E3
        gbc.setState(0x749d, 0x6159, 0xba60, 0x76bf, 0xe4cd, 0x4154, 0x1, 0x0);
        gbc.writeMem(0x749d, { 0x21, 0xc7, 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x6159);
        EXPECT(gbc.pc(), 0x74a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 02E4
        gbc.setState(0x1116, 0xe448, 0x9900, 0x6279, 0x51f7, 0x4065, 0x1, 0x0);
        gbc.writeMem(0x1116, { 0x21, 0xea, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xe448);
        EXPECT(gbc.pc(), 0x1119);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 02E5
        gbc.setState(0xefd7, 0xc74c, 0xc9b0, 0x178d, 0xf1f3, 0x765b, 0x1, 0x0);
        gbc.writeMem(0xefd7, { 0x21, 0xb1, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xc74c);
        EXPECT(gbc.pc(), 0xefda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefd7), 0x21);
        EXPECT(gbc.readMem(0xefd8), 0xb1);
        EXPECT(gbc.readMem(0xefd9), 0xc0);
        // 21 02E7
        gbc.setState(0x3492, 0xae6d, 0x8ed0, 0x3917, 0xe720, 0xc784, 0x1, 0x0);
        gbc.writeMem(0x3492, { 0x21, 0xc0, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xae6d);
        EXPECT(gbc.pc(), 0x3495);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 02E8
        gbc.setState(0xa07f, 0x1699, 0x8d70, 0xe010, 0x5ece, 0x9eb0, 0x0, 0x0);
        gbc.writeMem(0xa07f, { 0x21, 0x3d, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x1699);
        EXPECT(gbc.pc(), 0xa082);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa07f), 0x21);
        EXPECT(gbc.readMem(0xa080), 0x3d);
        EXPECT(gbc.readMem(0xa081), 0xfa);
        // 21 02E9
        gbc.setState(0xebd, 0xa5c0, 0xb50, 0x35b9, 0xec00, 0xfb22, 0x1, 0x1);
        gbc.writeMem(0xebd, { 0x21, 0xdd, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xa5c0);
        EXPECT(gbc.pc(), 0xec0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 02EA
        gbc.setState(0x3aea, 0xcd12, 0xe100, 0xf4b6, 0x7162, 0xb4c2, 0x0, 0x1);
        gbc.writeMem(0x3aea, { 0x21, 0xde, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xcd12);
        EXPECT(gbc.pc(), 0x3aed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 02EB
        gbc.setState(0xc03d, 0xb101, 0x56f0, 0xe16, 0x3389, 0x8996, 0x1, 0x1);
        gbc.writeMem(0xc03d, { 0x21, 0x75, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xb101);
        EXPECT(gbc.pc(), 0xc040);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc03d), 0x21);
        EXPECT(gbc.readMem(0xc03e), 0x75);
        EXPECT(gbc.readMem(0xc03f), 0xbd);
        // 21 02EC
        gbc.setState(0xcf64, 0xd770, 0xf380, 0x67df, 0xf7cb, 0xa5ce, 0x1, 0x0);
        gbc.writeMem(0xcf64, { 0x21, 0xa6, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd770);
        EXPECT(gbc.pc(), 0xcf67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf64), 0x21);
        EXPECT(gbc.readMem(0xcf65), 0xa6);
        EXPECT(gbc.readMem(0xcf66), 0xfe);
        // 21 02ED
        gbc.setState(0x6129, 0x568e, 0x9a0, 0x35a6, 0x43d8, 0x14a9, 0x1, 0x1);
        gbc.writeMem(0x6129, { 0x21, 0xc8, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x568e);
        EXPECT(gbc.pc(), 0x612c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 02EF
        gbc.setState(0x31d6, 0x76a, 0x3b70, 0x9e7c, 0x227d, 0x8390, 0x1, 0x0);
        gbc.writeMem(0x31d6, { 0x21, 0x34, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x76a);
        EXPECT(gbc.pc(), 0x31d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 02F0
        gbc.setState(0x568c, 0xf50e, 0x9310, 0x609a, 0x3e56, 0xbe5b, 0x1, 0x0);
        gbc.writeMem(0x568c, { 0x21, 0x5f, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xf50e);
        EXPECT(gbc.pc(), 0x568f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 02F2
        gbc.setState(0x504a, 0x80a5, 0xb0b0, 0x5788, 0x9c17, 0xac60, 0x1, 0x0);
        gbc.writeMem(0x504a, { 0x21, 0xc4, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x80a5);
        EXPECT(gbc.pc(), 0x504d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 02F3
        gbc.setState(0x3828, 0xc5cf, 0xed10, 0xc33c, 0x48b3, 0x5502, 0x0, 0x1);
        gbc.writeMem(0x3828, { 0x21, 0xd9, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xc5cf);
        EXPECT(gbc.pc(), 0x382b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 02F4
        gbc.setState(0x43f4, 0xac87, 0x51e0, 0xa655, 0x4541, 0x123a, 0x0, 0x1);
        gbc.writeMem(0x43f4, { 0x21, 0x8e, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xac87);
        EXPECT(gbc.pc(), 0x43f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 02F5
        gbc.setState(0x7a1d, 0xfd83, 0x1dd0, 0x6282, 0xdf85, 0x97ae, 0x1, 0x0);
        gbc.writeMem(0x7a1d, { 0x21, 0x25, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xfd83);
        EXPECT(gbc.pc(), 0x7a20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 02F6
        gbc.setState(0xbaa4, 0x2614, 0xe720, 0x235d, 0x950e, 0xb955, 0x0, 0x0);
        gbc.writeMem(0xbaa4, { 0x21, 0x7d, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x2614);
        EXPECT(gbc.pc(), 0xbaa7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaa4), 0x21);
        EXPECT(gbc.readMem(0xbaa5), 0x7d);
        EXPECT(gbc.readMem(0xbaa6), 0xb6);
        // 21 02F7
        gbc.setState(0xa0e, 0xe2d8, 0xa8d0, 0xe828, 0xe2a, 0xf736, 0x1, 0x0);
        gbc.writeMem(0xa0e, { 0x21, 0x4a, 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xe2d8);
        EXPECT(gbc.pc(), 0xa11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 02F8
        gbc.setState(0x6592, 0xe120, 0x6400, 0xde49, 0x64ed, 0xea5f, 0x0, 0x0);
        gbc.writeMem(0x6592, { 0x21, 0x96, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xe120);
        EXPECT(gbc.pc(), 0x6595);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 02F9
        gbc.setState(0x664a, 0x51f6, 0xa9d0, 0xe786, 0xf5bb, 0x2d24, 0x1, 0x1);
        gbc.writeMem(0x664a, { 0x21, 0xc9, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x51f6);
        EXPECT(gbc.pc(), 0x664d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 02FA
        gbc.setState(0x6fb1, 0x4f12, 0x4380, 0x7043, 0x5bb5, 0x79f, 0x0, 0x1);
        gbc.writeMem(0x6fb1, { 0x21, 0x50, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x4f12);
        EXPECT(gbc.pc(), 0x6fb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 02FB
        gbc.setState(0x3375, 0x3f5, 0xeb50, 0xdeb4, 0x3eb7, 0x392a, 0x0, 0x1);
        gbc.writeMem(0x3375, { 0x21, 0xd, 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x3f5);
        EXPECT(gbc.pc(), 0x3378);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 02FC
        gbc.setState(0xd738, 0xc426, 0xbdf0, 0x8cf0, 0xdd9a, 0x9cc6, 0x0, 0x0);
        gbc.writeMem(0xd738, { 0x21, 0xd7, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xc426);
        EXPECT(gbc.pc(), 0xd73b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd738), 0x21);
        EXPECT(gbc.readMem(0xd739), 0xd7);
        EXPECT(gbc.readMem(0xd73a), 0x5a);
        // 21 02FD
        gbc.setState(0xa466, 0x2577, 0xbac0, 0x1255, 0xe8bd, 0xd30c, 0x0, 0x0);
        gbc.writeMem(0xa466, { 0x21, 0xef, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x2577);
        EXPECT(gbc.pc(), 0xa469);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa466), 0x21);
        EXPECT(gbc.readMem(0xa467), 0xef);
        EXPECT(gbc.readMem(0xa468), 0xf9);
        // 21 02FE
        gbc.setState(0x5a2c, 0xf61b, 0xe3d0, 0xc982, 0xd3af, 0x5266, 0x0, 0x1);
        gbc.writeMem(0x5a2c, { 0x21, 0x68, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xf61b);
        EXPECT(gbc.pc(), 0x5a2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 02FF
        gbc.setState(0xac1, 0xe645, 0x2e90, 0x8d63, 0xde7, 0x585b, 0x1, 0x1);
        gbc.writeMem(0xac1, { 0x21, 0xf1, 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xe645);
        EXPECT(gbc.pc(), 0xac4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0300
        gbc.setState(0xcc73, 0x856d, 0xae40, 0x6312, 0xd92b, 0x8909, 0x0, 0x0);
        gbc.writeMem(0xcc73, { 0x21, 0x28, 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x856d);
        EXPECT(gbc.pc(), 0xcc76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc73), 0x21);
        EXPECT(gbc.readMem(0xcc74), 0x28);
        EXPECT(gbc.readMem(0xcc75), 0x41);
        // 21 0301
        gbc.setState(0x9e13, 0x3cb8, 0x57e0, 0xf1f9, 0x253b, 0x797c, 0x1, 0x0);
        gbc.writeMem(0x9e13, { 0x21, 0xac, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x3cb8);
        EXPECT(gbc.pc(), 0x9e16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e13), 0x21);
        EXPECT(gbc.readMem(0x9e14), 0xac);
        EXPECT(gbc.readMem(0x9e15), 0x60);
        // 21 0302
        gbc.setState(0x7454, 0xaad3, 0x8510, 0x66a0, 0x8f3f, 0x4952, 0x1, 0x0);
        gbc.writeMem(0x7454, { 0x21, 0x19, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xaad3);
        EXPECT(gbc.pc(), 0x7457);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0304
        gbc.setState(0x2d22, 0x6e8b, 0x6d70, 0x99f5, 0x95a0, 0xa506, 0x1, 0x1);
        gbc.writeMem(0x2d22, { 0x21, 0xfb, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x6e8b);
        EXPECT(gbc.pc(), 0x2d25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0305
        gbc.setState(0x2846, 0xbe3b, 0x9b90, 0x9d50, 0x7488, 0x7b43, 0x0, 0x1);
        gbc.writeMem(0x2846, { 0x21, 0xe0, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xbe3b);
        EXPECT(gbc.pc(), 0x2849);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0306
        gbc.setState(0x7f63, 0x188d, 0x1d90, 0x5dbe, 0x7a79, 0xe830, 0x1, 0x0);
        gbc.writeMem(0x7f63, { 0x21, 0xd4, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x188d);
        EXPECT(gbc.pc(), 0x7f66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0307
        gbc.setState(0x5b24, 0xcf35, 0x8440, 0xb8f8, 0x6c18, 0x9ca3, 0x0, 0x0);
        gbc.writeMem(0x5b24, { 0x21, 0x74, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xcf35);
        EXPECT(gbc.pc(), 0x5b27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0308
        gbc.setState(0x19a1, 0x7771, 0xba90, 0x32bf, 0x7eee, 0x4516, 0x0, 0x0);
        gbc.writeMem(0x19a1, { 0x21, 0x71, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x7771);
        EXPECT(gbc.pc(), 0x19a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0309
        gbc.setState(0x59be, 0xf75a, 0x2d70, 0xcb98, 0x4b3b, 0x2159, 0x1, 0x0);
        gbc.writeMem(0x59be, { 0x21, 0x65, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xf75a);
        EXPECT(gbc.pc(), 0x59c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 030A
        gbc.setState(0x772f, 0x61f2, 0xaba0, 0x595e, 0xd0b9, 0x31e0, 0x1, 0x0);
        gbc.writeMem(0x772f, { 0x21, 0xec, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x61f2);
        EXPECT(gbc.pc(), 0x7732);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 030B
        gbc.setState(0xaa5d, 0x8552, 0x8960, 0x2072, 0x7dbb, 0x8c89, 0x0, 0x1);
        gbc.writeMem(0xaa5d, { 0x21, 0xd2, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x8552);
        EXPECT(gbc.pc(), 0xaa60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa5d), 0x21);
        EXPECT(gbc.readMem(0xaa5e), 0xd2);
        EXPECT(gbc.readMem(0xaa5f), 0x17);
        // 21 030C
        gbc.setState(0xd5a7, 0xbc13, 0x5860, 0xd998, 0x6975, 0xbc98, 0x0, 0x1);
        gbc.writeMem(0xd5a7, { 0x21, 0x30, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xbc13);
        EXPECT(gbc.pc(), 0xd5aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5a7), 0x21);
        EXPECT(gbc.readMem(0xd5a8), 0x30);
        EXPECT(gbc.readMem(0xd5a9), 0xf6);
        // 21 030D
        gbc.setState(0x46e, 0xad87, 0xe670, 0x5183, 0x5979, 0xd921, 0x0, 0x1);
        gbc.writeMem(0x46e, { 0x21, 0x8c, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xad87);
        EXPECT(gbc.pc(), 0x471);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 030E
        gbc.setState(0x65d9, 0xafc4, 0x98e0, 0xa4bf, 0x7c85, 0xea87, 0x1, 0x1);
        gbc.writeMem(0x65d9, { 0x21, 0x9, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xafc4);
        EXPECT(gbc.pc(), 0x65dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 030F
        gbc.setState(0x87eb, 0xd276, 0xb850, 0xce6a, 0x1b53, 0x6f6d, 0x1, 0x1);
        gbc.writeMem(0x87eb, { 0x21, 0x2e, 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xd276);
        EXPECT(gbc.pc(), 0x87ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87eb), 0x21);
        EXPECT(gbc.readMem(0x87ec), 0x2e);
        EXPECT(gbc.readMem(0x87ed), 0x8f);
        // 21 0310
        gbc.setState(0xc746, 0x990b, 0x20d0, 0x5df5, 0xa3dc, 0xacb4, 0x0, 0x1);
        gbc.writeMem(0xc746, { 0x21, 0x4f, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x990b);
        EXPECT(gbc.pc(), 0xc749);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc746), 0x21);
        EXPECT(gbc.readMem(0xc747), 0x4f);
        EXPECT(gbc.readMem(0xc748), 0x9b);
        // 21 0311
        gbc.setState(0xc143, 0xc706, 0x2eb0, 0x14e2, 0xf46d, 0x51a2, 0x1, 0x0);
        gbc.writeMem(0xc143, { 0x21, 0x20, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xc706);
        EXPECT(gbc.pc(), 0xc146);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc143), 0x21);
        EXPECT(gbc.readMem(0xc144), 0x20);
        EXPECT(gbc.readMem(0xc145), 0xad);
        // 21 0312
        gbc.setState(0x5b1, 0x8822, 0x2820, 0x439, 0xd6f, 0x259a, 0x1, 0x0);
        gbc.writeMem(0x5b1, { 0x21, 0xf2, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x8822);
        EXPECT(gbc.pc(), 0x5b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0313
        gbc.setState(0x9cab, 0xdb51, 0xb6d0, 0xb518, 0xd90c, 0x5447, 0x1, 0x0);
        gbc.writeMem(0x9cab, { 0x21, 0x21, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xdb51);
        EXPECT(gbc.pc(), 0x9cae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cab), 0x21);
        EXPECT(gbc.readMem(0x9cac), 0x21);
        EXPECT(gbc.readMem(0x9cad), 0xfe);
        // 21 0314
        gbc.setState(0x4b48, 0x84e9, 0x69e0, 0xa5fb, 0x835a, 0xeee9, 0x1, 0x0);
        gbc.writeMem(0x4b48, { 0x21, 0xde, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x84e9);
        EXPECT(gbc.pc(), 0x4b4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0315
        gbc.setState(0xb378, 0x145e, 0x9820, 0xd2c4, 0xd065, 0x4f65, 0x0, 0x0);
        gbc.writeMem(0xb378, { 0x21, 0x3f, 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x145e);
        EXPECT(gbc.pc(), 0xb37b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb378), 0x21);
        EXPECT(gbc.readMem(0xb379), 0x3f);
        EXPECT(gbc.readMem(0xb37a), 0xd1);
        // 21 0316
        gbc.setState(0x1b1c, 0xfa5f, 0x9a00, 0x461c, 0x84e5, 0xddd6, 0x0, 0x1);
        gbc.writeMem(0x1b1c, { 0x21, 0xe0, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xfa5f);
        EXPECT(gbc.pc(), 0x1b1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0317
        gbc.setState(0x3c76, 0x2c9b, 0x3370, 0x5839, 0x2700, 0x624f, 0x1, 0x1);
        gbc.writeMem(0x3c76, { 0x21, 0x6b, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x2c9b);
        EXPECT(gbc.pc(), 0x3c79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0318
        gbc.setState(0xa383, 0xb94a, 0xa220, 0x4438, 0x23fb, 0xd072, 0x1, 0x0);
        gbc.writeMem(0xa383, { 0x21, 0x10, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xb94a);
        EXPECT(gbc.pc(), 0xa386);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa383), 0x21);
        EXPECT(gbc.readMem(0xa384), 0x10);
        EXPECT(gbc.readMem(0xa385), 0x82);
        // 21 0319
        gbc.setState(0x55e7, 0xc8c2, 0xefd0, 0x92b2, 0x6128, 0x63bd, 0x0, 0x1);
        gbc.writeMem(0x55e7, { 0x21, 0x82, 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xc8c2);
        EXPECT(gbc.pc(), 0x55ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 031A
        gbc.setState(0xc0e9, 0x8e8, 0x11f0, 0x52a1, 0x9dbd, 0x3c36, 0x1, 0x0);
        gbc.writeMem(0xc0e9, { 0x21, 0xbe, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x8e8);
        EXPECT(gbc.pc(), 0xc0ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0e9), 0x21);
        EXPECT(gbc.readMem(0xc0ea), 0xbe);
        EXPECT(gbc.readMem(0xc0eb), 0xf8);
        // 21 031B
        gbc.setState(0x9870, 0x7701, 0x92d0, 0xbd06, 0x91d6, 0x47a0, 0x1, 0x1);
        gbc.writeMem(0x9870, { 0x21, 0x3e, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x7701);
        EXPECT(gbc.pc(), 0x9873);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9870), 0x21);
        EXPECT(gbc.readMem(0x9871), 0x3e);
        EXPECT(gbc.readMem(0x9872), 0xf1);
        // 21 031C
        gbc.setState(0x50c5, 0x1db2, 0x22b0, 0xb8a2, 0xfaa7, 0x4a6e, 0x1, 0x0);
        gbc.writeMem(0x50c5, { 0x21, 0x5, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x1db2);
        EXPECT(gbc.pc(), 0x50c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 031D
        gbc.setState(0xdba2, 0x6d67, 0x1660, 0x6b19, 0xe969, 0xc53a, 0x1, 0x1);
        gbc.writeMem(0xdba2, { 0x21, 0xdf, 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x6d67);
        EXPECT(gbc.pc(), 0xdba5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdba2), 0x21);
        EXPECT(gbc.readMem(0xdba3), 0xdf);
        EXPECT(gbc.readMem(0xdba4), 0xe9);
        // 21 031E
        gbc.setState(0x1d16, 0x33b6, 0x2a00, 0xfec6, 0x65de, 0xbf01, 0x1, 0x0);
        gbc.writeMem(0x1d16, { 0x21, 0xa3, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x33b6);
        EXPECT(gbc.pc(), 0x1d19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0321
        gbc.setState(0x194, 0x6f45, 0x52c0, 0xd46e, 0x1f22, 0xead7, 0x0, 0x1);
        gbc.writeMem(0x194, { 0x21, 0x4d, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x6f45);
        EXPECT(gbc.pc(), 0x197);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0322
        gbc.setState(0xcf4, 0xeb1d, 0x9a20, 0x970d, 0x3950, 0x3e52, 0x0, 0x0);
        gbc.writeMem(0xcf4, { 0x21, 0x97, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xeb1d);
        EXPECT(gbc.pc(), 0xcf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0323
        gbc.setState(0xc10a, 0xd657, 0xf380, 0x9c8, 0x35a7, 0x69b6, 0x1, 0x1);
        gbc.writeMem(0xc10a, { 0x21, 0x1e, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xd657);
        EXPECT(gbc.pc(), 0xc10d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc10a), 0x21);
        EXPECT(gbc.readMem(0xc10b), 0x1e);
        EXPECT(gbc.readMem(0xc10c), 0x8b);
        // 21 0324
        gbc.setState(0x378c, 0xb92, 0x210, 0x1705, 0x5e38, 0x9d4, 0x0, 0x0);
        gbc.writeMem(0x378c, { 0x21, 0x12, 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xb92);
        EXPECT(gbc.pc(), 0x378f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0326
        gbc.setState(0xeab5, 0x4c70, 0x8060, 0x9529, 0xe521, 0xc650, 0x1, 0x1);
        gbc.writeMem(0xeab5, { 0x21, 0x1b, 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x4c70);
        EXPECT(gbc.pc(), 0xeab8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeab5), 0x21);
        EXPECT(gbc.readMem(0xeab6), 0x1b);
        EXPECT(gbc.readMem(0xeab7), 0xb2);
        // 21 0327
        gbc.setState(0x6ed6, 0xee64, 0x3f50, 0x4c7c, 0x26df, 0x1266, 0x0, 0x0);
        gbc.writeMem(0x6ed6, { 0x21, 0x70, 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xee64);
        EXPECT(gbc.pc(), 0x6ed9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0328
        gbc.setState(0x6cb3, 0x4f28, 0xf400, 0xb869, 0xbc3d, 0x16e4, 0x1, 0x1);
        gbc.writeMem(0x6cb3, { 0x21, 0xe4, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x4f28);
        EXPECT(gbc.pc(), 0x6cb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0329
        gbc.setState(0xa630, 0xad38, 0x2ac0, 0x6b42, 0xeab4, 0x1b94, 0x0, 0x1);
        gbc.writeMem(0xa630, { 0x21, 0x39, 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xad38);
        EXPECT(gbc.pc(), 0xa633);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa630), 0x21);
        EXPECT(gbc.readMem(0xa631), 0x39);
        EXPECT(gbc.readMem(0xa632), 0x9d);
        // 21 032A
        gbc.setState(0x6462, 0x4033, 0xe660, 0xdffa, 0xabc7, 0x7228, 0x1, 0x1);
        gbc.writeMem(0x6462, { 0x21, 0xf0, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x4033);
        EXPECT(gbc.pc(), 0x6465);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 032B
        gbc.setState(0xd08f, 0x9e55, 0x7b40, 0x58ad, 0x8a4b, 0xbcf1, 0x0, 0x0);
        gbc.writeMem(0xd08f, { 0x21, 0x4, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x9e55);
        EXPECT(gbc.pc(), 0xd092);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd08f), 0x21);
        EXPECT(gbc.readMem(0xd090), 0x4);
        EXPECT(gbc.readMem(0xd091), 0x32);
        // 21 032C
        gbc.setState(0x91fa, 0xc15a, 0x1460, 0xf4e3, 0x72df, 0xb4af, 0x1, 0x0);
        gbc.writeMem(0x91fa, { 0x21, 0x4b, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xc15a);
        EXPECT(gbc.pc(), 0x91fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91fa), 0x21);
        EXPECT(gbc.readMem(0x91fb), 0x4b);
        EXPECT(gbc.readMem(0x91fc), 0x9b);
        // 21 032D
        gbc.setState(0xb7ce, 0x6543, 0x2400, 0xf592, 0x90eb, 0xceaf, 0x0, 0x1);
        gbc.writeMem(0xb7ce, { 0x21, 0xca, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x6543);
        EXPECT(gbc.pc(), 0xb7d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7ce), 0x21);
        EXPECT(gbc.readMem(0xb7cf), 0xca);
        EXPECT(gbc.readMem(0xb7d0), 0x38);
        // 21 032E
        gbc.setState(0xc69c, 0xfef8, 0xde60, 0x1be4, 0xaa00, 0x77f7, 0x1, 0x0);
        gbc.writeMem(0xc69c, { 0x21, 0x85, 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xfef8);
        EXPECT(gbc.pc(), 0xc69f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc69c), 0x21);
        EXPECT(gbc.readMem(0xc69d), 0x85);
        EXPECT(gbc.readMem(0xc69e), 0x35);
        // 21 032F
        gbc.setState(0x7a5e, 0x8782, 0x5140, 0x630d, 0x6226, 0x40fc, 0x1, 0x1);
        gbc.writeMem(0x7a5e, { 0x21, 0xa, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8782);
        EXPECT(gbc.pc(), 0x7a61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0330
        gbc.setState(0xa78d, 0xf775, 0xcfc0, 0xb452, 0x7c72, 0xb879, 0x0, 0x0);
        gbc.writeMem(0xa78d, { 0x21, 0xd9, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xf775);
        EXPECT(gbc.pc(), 0xa790);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa78d), 0x21);
        EXPECT(gbc.readMem(0xa78e), 0xd9);
        EXPECT(gbc.readMem(0xa78f), 0xb7);
        // 21 0331
        gbc.setState(0x384d, 0x8434, 0x5050, 0xbe90, 0x751f, 0xad05, 0x1, 0x0);
        gbc.writeMem(0x384d, { 0x21, 0xac, 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x8434);
        EXPECT(gbc.pc(), 0x3850);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0332
        gbc.setState(0xb565, 0xf48a, 0x81b0, 0xa3f8, 0x4feb, 0x14bf, 0x0, 0x0);
        gbc.writeMem(0xb565, { 0x21, 0xdf, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xf48a);
        EXPECT(gbc.pc(), 0xb568);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb565), 0x21);
        EXPECT(gbc.readMem(0xb566), 0xdf);
        EXPECT(gbc.readMem(0xb567), 0xfb);
        // 21 0334
        gbc.setState(0x8baf, 0x2910, 0xc90, 0x9994, 0x4fa8, 0xa079, 0x0, 0x1);
        gbc.writeMem(0x8baf, { 0x21, 0xe5, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x2910);
        EXPECT(gbc.pc(), 0x8bb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8baf), 0x21);
        EXPECT(gbc.readMem(0x8bb0), 0xe5);
        EXPECT(gbc.readMem(0x8bb1), 0x5e);
        // 21 0335
        gbc.setState(0x4463, 0x89ca, 0xfcf0, 0x3d91, 0x40b0, 0x8b10, 0x1, 0x1);
        gbc.writeMem(0x4463, { 0x21, 0x1, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x89ca);
        EXPECT(gbc.pc(), 0x4466);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0336
        gbc.setState(0x2cc4, 0xf91, 0x510, 0x2e26, 0x30f8, 0x13a0, 0x0, 0x0);
        gbc.writeMem(0x2cc4, { 0x21, 0x35, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xf91);
        EXPECT(gbc.pc(), 0x2cc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0337
        gbc.setState(0x223a, 0x9e70, 0xebb0, 0xcb8f, 0xbc02, 0x5ebd, 0x0, 0x1);
        gbc.writeMem(0x223a, { 0x21, 0x99, 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x9e70);
        EXPECT(gbc.pc(), 0x223d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0338
        gbc.setState(0xc8b8, 0x672a, 0xb830, 0xe30c, 0x967b, 0xea59, 0x0, 0x1);
        gbc.writeMem(0xc8b8, { 0x21, 0xd6, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x672a);
        EXPECT(gbc.pc(), 0xc8bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8b8), 0x21);
        EXPECT(gbc.readMem(0xc8b9), 0xd6);
        EXPECT(gbc.readMem(0xc8ba), 0xa1);
        // 21 0339
        gbc.setState(0x2eb7, 0x6a11, 0x1830, 0x83da, 0xdfaa, 0x5a99, 0x1, 0x0);
        gbc.writeMem(0x2eb7, { 0x21, 0x4a, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x6a11);
        EXPECT(gbc.pc(), 0x2eba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 033A
        gbc.setState(0xd5ce, 0xcb14, 0x8590, 0x9490, 0xd42d, 0xe618, 0x1, 0x1);
        gbc.writeMem(0xd5ce, { 0x21, 0xbf, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xcb14);
        EXPECT(gbc.pc(), 0xd5d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5ce), 0x21);
        EXPECT(gbc.readMem(0xd5cf), 0xbf);
        EXPECT(gbc.readMem(0xd5d0), 0x6b);
        // 21 033B
        gbc.setState(0x95f6, 0x7923, 0x3b70, 0xf290, 0xc2cb, 0xf220, 0x1, 0x0);
        gbc.writeMem(0x95f6, { 0x21, 0x6, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x7923);
        EXPECT(gbc.pc(), 0x95f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95f6), 0x21);
        EXPECT(gbc.readMem(0x95f7), 0x6);
        EXPECT(gbc.readMem(0x95f8), 0x8c);
        // 21 033D
        gbc.setState(0x2fa3, 0x414b, 0x3ea0, 0x817d, 0xbb8, 0x6e1, 0x0, 0x1);
        gbc.writeMem(0x2fa3, { 0x21, 0x83, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x414b);
        EXPECT(gbc.pc(), 0x2fa6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 033E
        gbc.setState(0x586, 0xeaaf, 0x1a70, 0x575d, 0x469a, 0x43ca, 0x1, 0x1);
        gbc.writeMem(0x586, { 0x21, 0x71, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xeaaf);
        EXPECT(gbc.pc(), 0x589);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 033F
        gbc.setState(0x28ea, 0x96f7, 0x9e60, 0xee82, 0x8584, 0x22b8, 0x1, 0x1);
        gbc.writeMem(0x28ea, { 0x21, 0x23, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x96f7);
        EXPECT(gbc.pc(), 0x28ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0340
        gbc.setState(0x5d51, 0xaacf, 0x6160, 0x4b7a, 0x725a, 0x25ac, 0x1, 0x1);
        gbc.writeMem(0x5d51, { 0x21, 0x22, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xaacf);
        EXPECT(gbc.pc(), 0x5d54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0341
        gbc.setState(0x79d4, 0xfc44, 0xaa0, 0x5d24, 0x52be, 0x6e9, 0x1, 0x1);
        gbc.writeMem(0x79d4, { 0x21, 0xdc, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xfc44);
        EXPECT(gbc.pc(), 0x79d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0343
        gbc.setState(0xa49a, 0x1f7f, 0xd650, 0x8415, 0xea16, 0x2db4, 0x0, 0x0);
        gbc.writeMem(0xa49a, { 0x21, 0x88, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x1f7f);
        EXPECT(gbc.pc(), 0xa49d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa49a), 0x21);
        EXPECT(gbc.readMem(0xa49b), 0x88);
        EXPECT(gbc.readMem(0xa49c), 0x39);
        // 21 0344
        gbc.setState(0xc85a, 0x3dcd, 0x3710, 0x2c0d, 0x65a, 0xaf49, 0x1, 0x1);
        gbc.writeMem(0xc85a, { 0x21, 0xf8, 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x3dcd);
        EXPECT(gbc.pc(), 0xc85d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc85a), 0x21);
        EXPECT(gbc.readMem(0xc85b), 0xf8);
        EXPECT(gbc.readMem(0xc85c), 0x50);
        // 21 0345
        gbc.setState(0x3adc, 0xc5fb, 0x94f0, 0x640d, 0x60ca, 0x7ba0, 0x1, 0x0);
        gbc.writeMem(0x3adc, { 0x21, 0xf2, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xc5fb);
        EXPECT(gbc.pc(), 0x3adf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0346
        gbc.setState(0xcabe, 0x30e8, 0x23f0, 0x6d3c, 0x70e7, 0xe052, 0x0, 0x0);
        gbc.writeMem(0xcabe, { 0x21, 0xfb, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x30e8);
        EXPECT(gbc.pc(), 0xcac1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcabe), 0x21);
        EXPECT(gbc.readMem(0xcabf), 0xfb);
        EXPECT(gbc.readMem(0xcac0), 0xac);
        // 21 0347
        gbc.setState(0xedd8, 0x4da3, 0x1100, 0x2911, 0x12fc, 0x6211, 0x0, 0x0);
        gbc.writeMem(0xedd8, { 0x21, 0x3f, 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x4da3);
        EXPECT(gbc.pc(), 0xeddb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedd8), 0x21);
        EXPECT(gbc.readMem(0xedd9), 0x3f);
        EXPECT(gbc.readMem(0xedda), 0x71);
        // 21 0348
        gbc.setState(0x1c4a, 0x5e80, 0xbd60, 0x7014, 0xe785, 0xadd1, 0x0, 0x0);
        gbc.writeMem(0x1c4a, { 0x21, 0x48, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x5e80);
        EXPECT(gbc.pc(), 0x1c4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0349
        gbc.setState(0xbd07, 0x110f, 0x6f20, 0xd4b2, 0xd871, 0xa4ca, 0x0, 0x0);
        gbc.writeMem(0xbd07, { 0x21, 0x5f, 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x110f);
        EXPECT(gbc.pc(), 0xbd0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd07), 0x21);
        EXPECT(gbc.readMem(0xbd08), 0x5f);
        EXPECT(gbc.readMem(0xbd09), 0x50);
        // 21 034A
        gbc.setState(0x8b6, 0x8009, 0x23e0, 0xc219, 0x1bfd, 0x8f5f, 0x1, 0x0);
        gbc.writeMem(0x8b6, { 0x21, 0xb7, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x8009);
        EXPECT(gbc.pc(), 0x8b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 034B
        gbc.setState(0x69dd, 0xbc74, 0xc740, 0x755a, 0x3f59, 0x5884, 0x0, 0x0);
        gbc.writeMem(0x69dd, { 0x21, 0x9e, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xbc74);
        EXPECT(gbc.pc(), 0x69e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 034C
        gbc.setState(0x57ee, 0xbf8a, 0x4ac0, 0x1310, 0x57c, 0xdbe5, 0x1, 0x0);
        gbc.writeMem(0x57ee, { 0x21, 0x4d, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xbf8a);
        EXPECT(gbc.pc(), 0x57f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 034E
        gbc.setState(0xe016, 0xf247, 0x1ed0, 0x7256, 0x653f, 0x6f38, 0x1, 0x0);
        gbc.writeMem(0xe016, { 0x21, 0xf8, 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xf247);
        EXPECT(gbc.pc(), 0xe019);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe016), 0x21);
        EXPECT(gbc.readMem(0xe017), 0xf8);
        EXPECT(gbc.readMem(0xe018), 0x35);
        // 21 034F
        gbc.setState(0xbe09, 0xbce9, 0x7490, 0xeb2d, 0x71a6, 0x75f6, 0x0, 0x1);
        gbc.writeMem(0xbe09, { 0x21, 0xd2, 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xbce9);
        EXPECT(gbc.pc(), 0xbe0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe09), 0x21);
        EXPECT(gbc.readMem(0xbe0a), 0xd2);
        EXPECT(gbc.readMem(0xbe0b), 0xef);
        // 21 0350
        gbc.setState(0xec57, 0x6115, 0xe1e0, 0xce5e, 0x6567, 0x1c74, 0x0, 0x1);
        gbc.writeMem(0xec57, { 0x21, 0x2a, 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x6115);
        EXPECT(gbc.pc(), 0xec5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec57), 0x21);
        EXPECT(gbc.readMem(0xec58), 0x2a);
        EXPECT(gbc.readMem(0xec59), 0x2d);
        // 21 0351
        gbc.setState(0x9094, 0xb73, 0x2240, 0x7524, 0xbcd5, 0xfdc5, 0x0, 0x1);
        gbc.writeMem(0x9094, { 0x21, 0x5c, 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xb73);
        EXPECT(gbc.pc(), 0x9097);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9094), 0x21);
        EXPECT(gbc.readMem(0x9095), 0x5c);
        EXPECT(gbc.readMem(0x9096), 0x35);
        // 21 0352
        gbc.setState(0x58a2, 0xd9aa, 0x2730, 0x6e76, 0x973c, 0xbb79, 0x1, 0x0);
        gbc.writeMem(0x58a2, { 0x21, 0xbc, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xd9aa);
        EXPECT(gbc.pc(), 0x58a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0353
        gbc.setState(0xb40, 0x3822, 0xde30, 0xa7ce, 0xbc09, 0x854c, 0x1, 0x1);
        gbc.writeMem(0xb40, { 0x21, 0x6, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x3822);
        EXPECT(gbc.pc(), 0xb43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0354
        gbc.setState(0xac8f, 0x313a, 0xf650, 0x91dd, 0xcdbd, 0x5e41, 0x1, 0x0);
        gbc.writeMem(0xac8f, { 0x21, 0x84, 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x313a);
        EXPECT(gbc.pc(), 0xac92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac8f), 0x21);
        EXPECT(gbc.readMem(0xac90), 0x84);
        EXPECT(gbc.readMem(0xac91), 0xb4);
        // 21 0355
        gbc.setState(0x2b7a, 0x96f, 0x3e30, 0x2e7f, 0x13e6, 0xe4c5, 0x1, 0x1);
        gbc.writeMem(0x2b7a, { 0x21, 0xc7, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x96f);
        EXPECT(gbc.pc(), 0x2b7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0356
        gbc.setState(0x124e, 0x75ac, 0xcb0, 0x5048, 0xdece, 0x5d9f, 0x1, 0x0);
        gbc.writeMem(0x124e, { 0x21, 0x4d, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x75ac);
        EXPECT(gbc.pc(), 0x1251);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0357
        gbc.setState(0x49b6, 0x2ef6, 0x65a0, 0xb9ea, 0x5de8, 0xfd10, 0x1, 0x0);
        gbc.writeMem(0x49b6, { 0x21, 0xdc, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x2ef6);
        EXPECT(gbc.pc(), 0x49b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0358
        gbc.setState(0x191e, 0x947b, 0x4b0, 0x3bbe, 0x8bea, 0x1c25, 0x1, 0x0);
        gbc.writeMem(0x191e, { 0x21, 0xdd, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x947b);
        EXPECT(gbc.pc(), 0x1921);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0359
        gbc.setState(0x5fb7, 0xdbf4, 0xafd0, 0xb92d, 0xaa7a, 0xdb8e, 0x1, 0x0);
        gbc.writeMem(0x5fb7, { 0x21, 0xac, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xdbf4);
        EXPECT(gbc.pc(), 0x5fba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 035A
        gbc.setState(0xefb8, 0x997c, 0xb3e0, 0x12dd, 0x68eb, 0x60bb, 0x1, 0x0);
        gbc.writeMem(0xefb8, { 0x21, 0x2b, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x997c);
        EXPECT(gbc.pc(), 0xefbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefb8), 0x21);
        EXPECT(gbc.readMem(0xefb9), 0x2b);
        EXPECT(gbc.readMem(0xefba), 0x2c);
        // 21 035C
        gbc.setState(0x4868, 0x9818, 0x8750, 0x1d0c, 0x9c44, 0x29b5, 0x0, 0x0);
        gbc.writeMem(0x4868, { 0x21, 0x95, 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x9818);
        EXPECT(gbc.pc(), 0x486b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 035D
        gbc.setState(0x5b64, 0xaf0f, 0x9580, 0x4ad7, 0xeab0, 0x9740, 0x1, 0x0);
        gbc.writeMem(0x5b64, { 0x21, 0xcb, 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xaf0f);
        EXPECT(gbc.pc(), 0x5b67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 035F
        gbc.setState(0x6ba, 0x17ea, 0x60c0, 0x1538, 0x4304, 0x72ca, 0x0, 0x1);
        gbc.writeMem(0x6ba, { 0x21, 0xc7, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x17ea);
        EXPECT(gbc.pc(), 0x6bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0360
        gbc.setState(0x6492, 0x5d06, 0xe8b0, 0x18b3, 0xae0b, 0xecff, 0x0, 0x1);
        gbc.writeMem(0x6492, { 0x21, 0x18, 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x5d06);
        EXPECT(gbc.pc(), 0x6495);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0362
        gbc.setState(0x6f8d, 0xe4ad, 0xa060, 0x75e3, 0xc36c, 0x6df3, 0x1, 0x0);
        gbc.writeMem(0x6f8d, { 0x21, 0x13, 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xe4ad);
        EXPECT(gbc.pc(), 0x6f90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0363
        gbc.setState(0x44c8, 0x2b2e, 0x34d0, 0xed2b, 0x6ce5, 0x4bbd, 0x0, 0x0);
        gbc.writeMem(0x44c8, { 0x21, 0xc6, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x2b2e);
        EXPECT(gbc.pc(), 0x44cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0364
        gbc.setState(0x3978, 0xa215, 0xae10, 0x2346, 0xea2, 0x9422, 0x0, 0x1);
        gbc.writeMem(0x3978, { 0x21, 0xe, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xa215);
        EXPECT(gbc.pc(), 0x397b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0365
        gbc.setState(0x2d30, 0xe7bc, 0x8360, 0xd004, 0xe205, 0x67d0, 0x1, 0x1);
        gbc.writeMem(0x2d30, { 0x21, 0x8a, 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xe7bc);
        EXPECT(gbc.pc(), 0x2d33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0366
        gbc.setState(0x4352, 0x78ef, 0x4bd0, 0xd8fb, 0x6596, 0x37a9, 0x1, 0x0);
        gbc.writeMem(0x4352, { 0x21, 0xb3, 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x78ef);
        EXPECT(gbc.pc(), 0x4355);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0368
        gbc.setState(0xaec5, 0x8be3, 0x8ef0, 0xbfc3, 0x7413, 0xc617, 0x0, 0x0);
        gbc.writeMem(0xaec5, { 0x21, 0x59, 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x8be3);
        EXPECT(gbc.pc(), 0xaec8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaec5), 0x21);
        EXPECT(gbc.readMem(0xaec6), 0x59);
        EXPECT(gbc.readMem(0xaec7), 0xba);
        // 21 0369
        gbc.setState(0x2c09, 0xcb57, 0x1360, 0x159b, 0x5acf, 0xd680, 0x1, 0x1);
        gbc.writeMem(0x2c09, { 0x21, 0x83, 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xcb57);
        EXPECT(gbc.pc(), 0x2c0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 036A
        gbc.setState(0x9edd, 0xa5f6, 0x12d0, 0x85b8, 0x1d29, 0x8d98, 0x1, 0x0);
        gbc.writeMem(0x9edd, { 0x21, 0x54, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xa5f6);
        EXPECT(gbc.pc(), 0x9ee0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9edd), 0x21);
        EXPECT(gbc.readMem(0x9ede), 0x54);
        EXPECT(gbc.readMem(0x9edf), 0x42);
        // 21 036B
        gbc.setState(0x718b, 0x1ae0, 0x8250, 0x5a26, 0x81e8, 0x5a27, 0x1, 0x0);
        gbc.writeMem(0x718b, { 0x21, 0x75, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x1ae0);
        EXPECT(gbc.pc(), 0x718e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 036C
        gbc.setState(0x2e0c, 0xa49e, 0xf870, 0x2607, 0x7ab, 0xb2b5, 0x1, 0x0);
        gbc.writeMem(0x2e0c, { 0x21, 0x5e, 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xa49e);
        EXPECT(gbc.pc(), 0x2e0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 036D
        gbc.setState(0xa3ed, 0xdd0d, 0xd690, 0xca42, 0x5d2c, 0xce6e, 0x1, 0x0);
        gbc.writeMem(0xa3ed, { 0x21, 0x5d, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xdd0d);
        EXPECT(gbc.pc(), 0xa3f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3ed), 0x21);
        EXPECT(gbc.readMem(0xa3ee), 0x5d);
        EXPECT(gbc.readMem(0xa3ef), 0x9b);
        // 21 036F
        gbc.setState(0x709c, 0x8caa, 0xada0, 0xd825, 0xd119, 0x6dde, 0x0, 0x1);
        gbc.writeMem(0x709c, { 0x21, 0x53, 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x8caa);
        EXPECT(gbc.pc(), 0x709f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0370
        gbc.setState(0xe2ae, 0x42a2, 0x7f20, 0x8dcc, 0xb960, 0xbcfb, 0x0, 0x1);
        gbc.writeMem(0xe2ae, { 0x21, 0x85, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x42a2);
        EXPECT(gbc.pc(), 0xe2b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2ae), 0x21);
        EXPECT(gbc.readMem(0xe2af), 0x85);
        EXPECT(gbc.readMem(0xe2b0), 0xf);
        // 21 0371
        gbc.setState(0xe4ac, 0xaaaf, 0x31f0, 0x3a47, 0xb06a, 0xa5c5, 0x1, 0x1);
        gbc.writeMem(0xe4ac, { 0x21, 0x68, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xaaaf);
        EXPECT(gbc.pc(), 0xe4af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4ac), 0x21);
        EXPECT(gbc.readMem(0xe4ad), 0x68);
        EXPECT(gbc.readMem(0xe4ae), 0x4c);
        // 21 0372
        gbc.setState(0xed14, 0x2d15, 0x9cf0, 0x9ff2, 0x1ace, 0x778e, 0x0, 0x1);
        gbc.writeMem(0xed14, { 0x21, 0x96, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2d15);
        EXPECT(gbc.pc(), 0xed17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed14), 0x21);
        EXPECT(gbc.readMem(0xed15), 0x96);
        EXPECT(gbc.readMem(0xed16), 0x54);
        // 21 0373
        gbc.setState(0x2995, 0x4b82, 0xd6a0, 0xf0d9, 0x3441, 0xe90b, 0x1, 0x0);
        gbc.writeMem(0x2995, { 0x21, 0x6c, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x4b82);
        EXPECT(gbc.pc(), 0x2998);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0374
        gbc.setState(0x2867, 0x5e53, 0x70e0, 0xdcc6, 0xd8b9, 0x50b6, 0x0, 0x1);
        gbc.writeMem(0x2867, { 0x21, 0xe8, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x5e53);
        EXPECT(gbc.pc(), 0x286a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0375
        gbc.setState(0x7ffd, 0xf501, 0xecf0, 0x89bc, 0x1183, 0x738a, 0x0, 0x1);
        gbc.writeMem(0x7ffd, { 0x21, 0x33, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xf501);
        EXPECT(gbc.pc(), 0x8000);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0376
        gbc.setState(0x604, 0x3a75, 0x6780, 0x690e, 0x6efe, 0x4c0, 0x0, 0x0);
        gbc.writeMem(0x604, { 0x21, 0xd2, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x3a75);
        EXPECT(gbc.pc(), 0x607);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0377
        gbc.setState(0x1db2, 0x38fd, 0x7670, 0xf8ec, 0xd1da, 0x30da, 0x1, 0x0);
        gbc.writeMem(0x1db2, { 0x21, 0xee, 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x38fd);
        EXPECT(gbc.pc(), 0x1db5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0378
        gbc.setState(0x5aa5, 0x5a8c, 0xf790, 0xba1c, 0xa9d9, 0x8292, 0x1, 0x1);
        gbc.writeMem(0x5aa5, { 0x21, 0x18, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x5a8c);
        EXPECT(gbc.pc(), 0x5aa8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0379
        gbc.setState(0x68a5, 0xc7d6, 0x6000, 0xfd3d, 0xefe6, 0x92a3, 0x1, 0x0);
        gbc.writeMem(0x68a5, { 0x21, 0x5f, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xc7d6);
        EXPECT(gbc.pc(), 0x68a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 037A
        gbc.setState(0xae1, 0x603c, 0xaf90, 0x1bfd, 0x7dfe, 0xb14a, 0x0, 0x1);
        gbc.writeMem(0xae1, { 0x21, 0x49, 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x603c);
        EXPECT(gbc.pc(), 0xae4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 037B
        gbc.setState(0x5796, 0xcf3d, 0xefa0, 0xe935, 0xd81, 0xf823, 0x1, 0x0);
        gbc.writeMem(0x5796, { 0x21, 0x63, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xcf3d);
        EXPECT(gbc.pc(), 0x5799);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 037C
        gbc.setState(0x500d, 0x8771, 0x23a0, 0xea54, 0x489c, 0xfde9, 0x1, 0x0);
        gbc.writeMem(0x500d, { 0x21, 0x72, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x8771);
        EXPECT(gbc.pc(), 0x5010);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 037D
        gbc.setState(0x1c4, 0x8c8a, 0x1e0, 0x3e13, 0xeb8e, 0xc8c0, 0x1, 0x1);
        gbc.writeMem(0x1c4, { 0x21, 0x77, 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x8c8a);
        EXPECT(gbc.pc(), 0x1c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 037E
        gbc.setState(0xc24a, 0x94fa, 0x56e0, 0x639b, 0x933e, 0x5525, 0x1, 0x1);
        gbc.writeMem(0xc24a, { 0x21, 0x6c, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x94fa);
        EXPECT(gbc.pc(), 0xc24d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc24a), 0x21);
        EXPECT(gbc.readMem(0xc24b), 0x6c);
        EXPECT(gbc.readMem(0xc24c), 0xe6);
        // 21 037F
        gbc.setState(0x4b13, 0x988b, 0xf7c0, 0xbc8b, 0xf44e, 0x54ab, 0x1, 0x0);
        gbc.writeMem(0x4b13, { 0x21, 0x19, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x988b);
        EXPECT(gbc.pc(), 0x4b16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0380
        gbc.setState(0xe3c7, 0xbb8f, 0x46b0, 0xfdb0, 0xb786, 0xcb64, 0x0, 0x0);
        gbc.writeMem(0xe3c7, { 0x21, 0xee, 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xbb8f);
        EXPECT(gbc.pc(), 0xe3ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3c7), 0x21);
        EXPECT(gbc.readMem(0xe3c8), 0xee);
        EXPECT(gbc.readMem(0xe3c9), 0x67);
        // 21 0381
        gbc.setState(0xe113, 0x9d9d, 0x6090, 0x3663, 0x297, 0xee8f, 0x0, 0x0);
        gbc.writeMem(0xe113, { 0x21, 0x3e, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x9d9d);
        EXPECT(gbc.pc(), 0xe116);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe113), 0x21);
        EXPECT(gbc.readMem(0xe114), 0x3e);
        EXPECT(gbc.readMem(0xe115), 0x86);
        // 21 0382
        gbc.setState(0x2631, 0x3252, 0x9440, 0x672d, 0xd5f7, 0xd896, 0x1, 0x1);
        gbc.writeMem(0x2631, { 0x21, 0x51, 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x3252);
        EXPECT(gbc.pc(), 0x2634);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 0383
        gbc.setState(0xe085, 0xd726, 0xbbf0, 0xc606, 0x473c, 0x4d01, 0x1, 0x0);
        gbc.writeMem(0xe085, { 0x21, 0x80, 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xd726);
        EXPECT(gbc.pc(), 0xe088);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe085), 0x21);
        EXPECT(gbc.readMem(0xe086), 0x80);
        EXPECT(gbc.readMem(0xe087), 0x96);
        // 21 0384
        gbc.setState(0x9bd9, 0x25ac, 0x8b20, 0x62db, 0xce53, 0x62e6, 0x1, 0x0);
        gbc.writeMem(0x9bd9, { 0x21, 0xba, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x25ac);
        EXPECT(gbc.pc(), 0x9bdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bd9), 0x21);
        EXPECT(gbc.readMem(0x9bda), 0xba);
        EXPECT(gbc.readMem(0x9bdb), 0x80);
        // 21 0386
        gbc.setState(0x186e, 0x528a, 0x5f90, 0x4d95, 0xbc25, 0x7529, 0x0, 0x1);
        gbc.writeMem(0x186e, { 0x21, 0x77, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x528a);
        EXPECT(gbc.pc(), 0x1871);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0387
        gbc.setState(0x2bcd, 0xdf8e, 0x1f50, 0xe290, 0xcd91, 0x9100, 0x1, 0x0);
        gbc.writeMem(0x2bcd, { 0x21, 0x22, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xdf8e);
        EXPECT(gbc.pc(), 0x2bd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 0388
        gbc.setState(0x3759, 0xae9b, 0x4360, 0x551c, 0x1548, 0x67e1, 0x1, 0x1);
        gbc.writeMem(0x3759, { 0x21, 0x4c, 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xae9b);
        EXPECT(gbc.pc(), 0x375c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0389
        gbc.setState(0x71ee, 0x7b72, 0x8750, 0x9546, 0x10db, 0x1559, 0x1, 0x1);
        gbc.writeMem(0x71ee, { 0x21, 0x37, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x7b72);
        EXPECT(gbc.pc(), 0x71f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 038A
        gbc.setState(0x18b7, 0x90e5, 0xec50, 0x2a05, 0xe0b0, 0x7db, 0x1, 0x1);
        gbc.writeMem(0x18b7, { 0x21, 0x51, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x90e5);
        EXPECT(gbc.pc(), 0x18ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 038B
        gbc.setState(0xc467, 0xc7fd, 0x7250, 0xbee8, 0xafad, 0xafa8, 0x1, 0x0);
        gbc.writeMem(0xc467, { 0x21, 0xc4, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xc7fd);
        EXPECT(gbc.pc(), 0xc46a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc467), 0x21);
        EXPECT(gbc.readMem(0xc468), 0xc4);
        EXPECT(gbc.readMem(0xc469), 0xfa);
        // 21 038C
        gbc.setState(0x14bf, 0x5a16, 0xc000, 0x3bc1, 0xdb18, 0xa895, 0x0, 0x0);
        gbc.writeMem(0x14bf, { 0x21, 0xde, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x5a16);
        EXPECT(gbc.pc(), 0x14c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 038D
        gbc.setState(0x269a, 0x2e47, 0xe410, 0xbbc2, 0x6ddd, 0x97ae, 0x1, 0x0);
        gbc.writeMem(0x269a, { 0x21, 0x2b, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x2e47);
        EXPECT(gbc.pc(), 0x269d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 038E
        gbc.setState(0x2f7, 0x140b, 0x67c0, 0x488e, 0xa41a, 0x2a5a, 0x0, 0x0);
        gbc.writeMem(0x2f7, { 0x21, 0x96, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x140b);
        EXPECT(gbc.pc(), 0x2fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 038F
        gbc.setState(0x2a51, 0xd979, 0x86e0, 0x420, 0xa705, 0x4a91, 0x0, 0x0);
        gbc.writeMem(0x2a51, { 0x21, 0x46, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xd979);
        EXPECT(gbc.pc(), 0x2a54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 0390
        gbc.setState(0xbd40, 0x48d5, 0x18d0, 0x1ec6, 0xe898, 0x561a, 0x1, 0x0);
        gbc.writeMem(0xbd40, { 0x21, 0x9e, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x48d5);
        EXPECT(gbc.pc(), 0xbd43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd40), 0x21);
        EXPECT(gbc.readMem(0xbd41), 0x9e);
        EXPECT(gbc.readMem(0xbd42), 0x56);
        // 21 0391
        gbc.setState(0xa499, 0x3a30, 0xb930, 0x7df, 0xce07, 0x71f0, 0x1, 0x0);
        gbc.writeMem(0xa499, { 0x21, 0x64, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x3a30);
        EXPECT(gbc.pc(), 0xa49c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa499), 0x21);
        EXPECT(gbc.readMem(0xa49a), 0x64);
        EXPECT(gbc.readMem(0xa49b), 0x88);
        // 21 0392
        gbc.setState(0xb45b, 0xdde8, 0xd620, 0x6881, 0xcf84, 0x21f0, 0x1, 0x0);
        gbc.writeMem(0xb45b, { 0x21, 0x7c, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xdde8);
        EXPECT(gbc.pc(), 0xb45e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb45b), 0x21);
        EXPECT(gbc.readMem(0xb45c), 0x7c);
        EXPECT(gbc.readMem(0xb45d), 0x3b);
        // 21 0393
        gbc.setState(0x86a1, 0x48d3, 0x6830, 0xf5dd, 0x7f71, 0x3e53, 0x1, 0x1);
        gbc.writeMem(0x86a1, { 0x21, 0xc1, 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x48d3);
        EXPECT(gbc.pc(), 0x86a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86a1), 0x21);
        EXPECT(gbc.readMem(0x86a2), 0xc1);
        EXPECT(gbc.readMem(0x86a3), 0x70);
        // 21 0394
        gbc.setState(0x52f1, 0xfab5, 0xc70, 0x1eea, 0x84fa, 0xb5c6, 0x1, 0x0);
        gbc.writeMem(0x52f1, { 0x21, 0x96, 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xfab5);
        EXPECT(gbc.pc(), 0x52f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 0395
        gbc.setState(0xbaaa, 0x8e37, 0xf210, 0x11c, 0x641d, 0x30f9, 0x0, 0x1);
        gbc.writeMem(0xbaaa, { 0x21, 0xeb, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x8e37);
        EXPECT(gbc.pc(), 0xbaad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaaa), 0x21);
        EXPECT(gbc.readMem(0xbaab), 0xeb);
        EXPECT(gbc.readMem(0xbaac), 0xb9);
        // 21 0396
        gbc.setState(0x8e3f, 0xa0f5, 0x51c0, 0xfc51, 0x24cf, 0xfdc7, 0x0, 0x1);
        gbc.writeMem(0x8e3f, { 0x21, 0xf, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xa0f5);
        EXPECT(gbc.pc(), 0x8e42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e3f), 0x21);
        EXPECT(gbc.readMem(0x8e40), 0xf);
        EXPECT(gbc.readMem(0x8e41), 0xd);
        // 21 0397
        gbc.setState(0xd97a, 0x48cb, 0xaaa0, 0xf319, 0xefbb, 0x855a, 0x0, 0x1);
        gbc.writeMem(0xd97a, { 0x21, 0xec, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x48cb);
        EXPECT(gbc.pc(), 0xd97d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd97a), 0x21);
        EXPECT(gbc.readMem(0xd97b), 0xec);
        EXPECT(gbc.readMem(0xd97c), 0x30);
        // 21 0398
        gbc.setState(0x97c9, 0xab94, 0xd320, 0x1760, 0xd2b4, 0xd1db, 0x1, 0x1);
        gbc.writeMem(0x97c9, { 0x21, 0xbe, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xab94);
        EXPECT(gbc.pc(), 0x97cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97c9), 0x21);
        EXPECT(gbc.readMem(0x97ca), 0xbe);
        EXPECT(gbc.readMem(0x97cb), 0x75);
        // 21 0399
        gbc.setState(0xc823, 0x6ba3, 0xfbd0, 0xd70e, 0xa49d, 0xbcf, 0x1, 0x1);
        gbc.writeMem(0xc823, { 0x21, 0xb6, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x6ba3);
        EXPECT(gbc.pc(), 0xc826);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc823), 0x21);
        EXPECT(gbc.readMem(0xc824), 0xb6);
        EXPECT(gbc.readMem(0xc825), 0x14);
        // 21 039A
        gbc.setState(0x9a0b, 0x2f1d, 0xacb0, 0xaf65, 0xe56b, 0x8f5c, 0x1, 0x0);
        gbc.writeMem(0x9a0b, { 0x21, 0xa2, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x2f1d);
        EXPECT(gbc.pc(), 0x9a0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a0b), 0x21);
        EXPECT(gbc.readMem(0x9a0c), 0xa2);
        EXPECT(gbc.readMem(0x9a0d), 0x6);
        // 21 039B
        gbc.setState(0x9237, 0x8563, 0x8270, 0x3404, 0x968e, 0x14ad, 0x1, 0x0);
        gbc.writeMem(0x9237, { 0x21, 0xfe, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x8563);
        EXPECT(gbc.pc(), 0x923a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9237), 0x21);
        EXPECT(gbc.readMem(0x9238), 0xfe);
        EXPECT(gbc.readMem(0x9239), 0x1f);
        // 21 039C
        gbc.setState(0x68a4, 0x19d0, 0x2190, 0x2d0d, 0x7436, 0x3ccf, 0x1, 0x0);
        gbc.writeMem(0x68a4, { 0x21, 0x90, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x19d0);
        EXPECT(gbc.pc(), 0x68a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 039D
        gbc.setState(0x582e, 0x53dd, 0x2d00, 0x4da5, 0x8ce1, 0xfd26, 0x0, 0x0);
        gbc.writeMem(0x582e, { 0x21, 0x5e, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x53dd);
        EXPECT(gbc.pc(), 0x5831);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 039F
        gbc.setState(0x6b8f, 0x5ec6, 0xd920, 0x9de, 0x3c2b, 0x6a83, 0x1, 0x1);
        gbc.writeMem(0x6b8f, { 0x21, 0x8, 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x5ec6);
        EXPECT(gbc.pc(), 0x6b92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 03A0
        gbc.setState(0x450f, 0xe1fc, 0x14c0, 0xcf10, 0x5579, 0x2c40, 0x0, 0x0);
        gbc.writeMem(0x450f, { 0x21, 0x80, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xe1fc);
        EXPECT(gbc.pc(), 0x4512);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 03A1
        gbc.setState(0xe59f, 0xb443, 0x9dd0, 0x832d, 0xd088, 0x5a03, 0x1, 0x0);
        gbc.writeMem(0xe59f, { 0x21, 0x84, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xb443);
        EXPECT(gbc.pc(), 0xe5a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe59f), 0x21);
        EXPECT(gbc.readMem(0xe5a0), 0x84);
        EXPECT(gbc.readMem(0xe5a1), 0x78);
        // 21 03A2
        gbc.setState(0x283a, 0x2a99, 0x1380, 0xce8, 0x6eb3, 0x6c05, 0x1, 0x0);
        gbc.writeMem(0x283a, { 0x21, 0xb7, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x2a99);
        EXPECT(gbc.pc(), 0x283d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 03A3
        gbc.setState(0x810f, 0x1941, 0xa3c0, 0x6301, 0xa221, 0x8822, 0x1, 0x1);
        gbc.writeMem(0x810f, { 0x21, 0x98, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x1941);
        EXPECT(gbc.pc(), 0x8112);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x810f), 0x21);
        EXPECT(gbc.readMem(0x8110), 0x98);
        EXPECT(gbc.readMem(0x8111), 0xb3);
        // 21 03A4
        gbc.setState(0x3ab, 0xf982, 0x6e40, 0x3a8a, 0xbf6, 0xe62a, 0x1, 0x0);
        gbc.writeMem(0x3ab, { 0x21, 0x7c, 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xf982);
        EXPECT(gbc.pc(), 0x3ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 03A5
        gbc.setState(0xc72e, 0xfc07, 0x5770, 0xe816, 0xc53c, 0x5d43, 0x1, 0x0);
        gbc.writeMem(0xc72e, { 0x21, 0xe1, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xfc07);
        EXPECT(gbc.pc(), 0xc731);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc72e), 0x21);
        EXPECT(gbc.readMem(0xc72f), 0xe1);
        EXPECT(gbc.readMem(0xc730), 0x30);
        // 21 03A6
        gbc.setState(0x798c, 0x6cee, 0x1aa0, 0x3201, 0xf32e, 0x22c5, 0x0, 0x0);
        gbc.writeMem(0x798c, { 0x21, 0x64, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x6cee);
        EXPECT(gbc.pc(), 0x798f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 03A7
        gbc.setState(0xe575, 0x4c0b, 0x9700, 0x4943, 0x7b68, 0xa0c9, 0x1, 0x1);
        gbc.writeMem(0xe575, { 0x21, 0x4f, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x4c0b);
        EXPECT(gbc.pc(), 0xe578);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe575), 0x21);
        EXPECT(gbc.readMem(0xe576), 0x4f);
        EXPECT(gbc.readMem(0xe577), 0x2a);
        // 21 03A8
        gbc.setState(0xd18e, 0x20c9, 0x1720, 0xb723, 0x3e1c, 0x5285, 0x1, 0x0);
        gbc.writeMem(0xd18e, { 0x21, 0x1d, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x20c9);
        EXPECT(gbc.pc(), 0xd191);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd18e), 0x21);
        EXPECT(gbc.readMem(0xd18f), 0x1d);
        EXPECT(gbc.readMem(0xd190), 0xc0);
        // 21 03A9
        gbc.setState(0xaaed, 0x4c63, 0xeb70, 0x7cc6, 0xce58, 0x1a88, 0x1, 0x0);
        gbc.writeMem(0xaaed, { 0x21, 0x1c, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x4c63);
        EXPECT(gbc.pc(), 0xaaf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaed), 0x21);
        EXPECT(gbc.readMem(0xaaee), 0x1c);
        EXPECT(gbc.readMem(0xaaef), 0xca);
        // 21 03AA
        gbc.setState(0x33ec, 0x81fc, 0x3e20, 0x1f3a, 0xd7d0, 0x84a7, 0x1, 0x0);
        gbc.writeMem(0x33ec, { 0x21, 0x4a, 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x81fc);
        EXPECT(gbc.pc(), 0x33ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 03AC
        gbc.setState(0x236, 0x2f0e, 0xa440, 0x970e, 0xbd2f, 0x8638, 0x0, 0x0);
        gbc.writeMem(0x236, { 0x21, 0x65, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x2f0e);
        EXPECT(gbc.pc(), 0x239);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 03AD
        gbc.setState(0xc2df, 0x4d1d, 0xbdd0, 0x1004, 0xfed1, 0xbb6f, 0x0, 0x0);
        gbc.writeMem(0xc2df, { 0x21, 0xdc, 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x4d1d);
        EXPECT(gbc.pc(), 0xc2e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2df), 0x21);
        EXPECT(gbc.readMem(0xc2e0), 0xdc);
        EXPECT(gbc.readMem(0xc2e1), 0x8);
        // 21 03AE
        gbc.setState(0xef19, 0xc4a1, 0x4560, 0x3ce1, 0x5811, 0xb686, 0x0, 0x0);
        gbc.writeMem(0xef19, { 0x21, 0x88, 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc4a1);
        EXPECT(gbc.pc(), 0xef1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef19), 0x21);
        EXPECT(gbc.readMem(0xef1a), 0x88);
        EXPECT(gbc.readMem(0xef1b), 0xc2);
        // 21 03AF
        gbc.setState(0x7b18, 0xc7a7, 0x51d0, 0xdfc5, 0xa990, 0x513d, 0x1, 0x0);
        gbc.writeMem(0x7b18, { 0x21, 0x60, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xc7a7);
        EXPECT(gbc.pc(), 0x7b1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 03B0
        gbc.setState(0x3962, 0x97b, 0xa520, 0xd6d5, 0x4d77, 0x898e, 0x1, 0x1);
        gbc.writeMem(0x3962, { 0x21, 0xd4, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x97b);
        EXPECT(gbc.pc(), 0x3965);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 03B1
        gbc.setState(0x91b8, 0x75e6, 0x7470, 0x8bf4, 0x62ef, 0x6ce3, 0x0, 0x1);
        gbc.writeMem(0x91b8, { 0x21, 0x20, 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x75e6);
        EXPECT(gbc.pc(), 0x91bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91b8), 0x21);
        EXPECT(gbc.readMem(0x91b9), 0x20);
        EXPECT(gbc.readMem(0x91ba), 0x50);
        // 21 03B2
        gbc.setState(0x63c7, 0x5d36, 0xfaa0, 0xabaa, 0xb80c, 0xe527, 0x0, 0x1);
        gbc.writeMem(0x63c7, { 0x21, 0xc6, 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x5d36);
        EXPECT(gbc.pc(), 0x63ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 03B3
        gbc.setState(0x3b87, 0xafbc, 0x85a0, 0x7c3c, 0x2ef6, 0xf022, 0x1, 0x1);
        gbc.writeMem(0x3b87, { 0x21, 0xae, 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xafbc);
        EXPECT(gbc.pc(), 0x3b8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 03B4
        gbc.setState(0x1253, 0x5a5, 0x38b0, 0x89c5, 0xaa14, 0x3bef, 0x1, 0x1);
        gbc.writeMem(0x1253, { 0x21, 0xe, 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x5a5);
        EXPECT(gbc.pc(), 0x1256);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 03B5
        gbc.setState(0x7abd, 0xca9c, 0x4450, 0xf955, 0x4def, 0xacc8, 0x1, 0x0);
        gbc.writeMem(0x7abd, { 0x21, 0xaf, 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xca9c);
        EXPECT(gbc.pc(), 0x7ac0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 03B6
        gbc.setState(0x6e0c, 0xbca8, 0xc7e0, 0x2236, 0xa497, 0xc90f, 0x0, 0x1);
        gbc.writeMem(0x6e0c, { 0x21, 0xa1, 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xbca8);
        EXPECT(gbc.pc(), 0x6e0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 03B7
        gbc.setState(0x9ada, 0xc396, 0x1c30, 0x33f6, 0x5081, 0xf2, 0x0, 0x0);
        gbc.writeMem(0x9ada, { 0x21, 0xef, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xc396);
        EXPECT(gbc.pc(), 0x9add);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ada), 0x21);
        EXPECT(gbc.readMem(0x9adb), 0xef);
        EXPECT(gbc.readMem(0x9adc), 0x9);
        // 21 03B8
        gbc.setState(0x5f5e, 0x616e, 0x2d10, 0x99bb, 0x7778, 0x563f, 0x0, 0x0);
        gbc.writeMem(0x5f5e, { 0x21, 0x5d, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x616e);
        EXPECT(gbc.pc(), 0x5f61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 03B9
        gbc.setState(0x78c8, 0xa664, 0x6000, 0xb8fa, 0xcc5e, 0x53f1, 0x0, 0x0);
        gbc.writeMem(0x78c8, { 0x21, 0x71, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xa664);
        EXPECT(gbc.pc(), 0x78cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 03BA
        gbc.setState(0x2499, 0x4ab3, 0x8050, 0x7e4e, 0x760f, 0x28e2, 0x0, 0x1);
        gbc.writeMem(0x2499, { 0x21, 0xad, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x4ab3);
        EXPECT(gbc.pc(), 0x249c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 03BB
        gbc.setState(0x19c1, 0x2adc, 0x4c80, 0x705, 0xb615, 0x3aad, 0x0, 0x1);
        gbc.writeMem(0x19c1, { 0x21, 0x85, 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x2adc);
        EXPECT(gbc.pc(), 0x19c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 03BC
        gbc.setState(0x2785, 0xe79f, 0x2c40, 0x9321, 0x9b0b, 0xf11c, 0x0, 0x0);
        gbc.writeMem(0x2785, { 0x21, 0x89, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xe79f);
        EXPECT(gbc.pc(), 0x2788);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 03BD
        gbc.setState(0x7a8b, 0xb7d7, 0xb670, 0x89d6, 0x92ac, 0x4a65, 0x0, 0x0);
        gbc.writeMem(0x7a8b, { 0x21, 0xf3, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xb7d7);
        EXPECT(gbc.pc(), 0x7a8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 03BE
        gbc.setState(0x109e, 0x61bc, 0x4b10, 0xfb1c, 0xb1d, 0x5b17, 0x0, 0x1);
        gbc.writeMem(0x109e, { 0x21, 0x0, 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x61bc);
        EXPECT(gbc.pc(), 0x10a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 03C0
        gbc.setState(0xa644, 0x1d57, 0xa9d0, 0x993a, 0x3e0e, 0xe95f, 0x0, 0x1);
        gbc.writeMem(0xa644, { 0x21, 0xe6, 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x1d57);
        EXPECT(gbc.pc(), 0xa647);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa644), 0x21);
        EXPECT(gbc.readMem(0xa645), 0xe6);
        EXPECT(gbc.readMem(0xa646), 0xa);
        // 21 03C1
        gbc.setState(0xe396, 0xd1fc, 0x83d0, 0x49b1, 0xc4aa, 0x7be4, 0x0, 0x1);
        gbc.writeMem(0xe396, { 0x21, 0x2e, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xd1fc);
        EXPECT(gbc.pc(), 0xe399);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe396), 0x21);
        EXPECT(gbc.readMem(0xe397), 0x2e);
        EXPECT(gbc.readMem(0xe398), 0x86);
        // 21 03C2
        gbc.setState(0x246e, 0x71fd, 0xb7f0, 0xd97e, 0x9913, 0xde94, 0x0, 0x0);
        gbc.writeMem(0x246e, { 0x21, 0xa2, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x71fd);
        EXPECT(gbc.pc(), 0x2471);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 03C3
        gbc.setState(0xc4a9, 0x30fc, 0x9980, 0x113, 0xf8a2, 0xb89c, 0x0, 0x1);
        gbc.writeMem(0xc4a9, { 0x21, 0x95, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x30fc);
        EXPECT(gbc.pc(), 0xc4ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4a9), 0x21);
        EXPECT(gbc.readMem(0xc4aa), 0x95);
        EXPECT(gbc.readMem(0xc4ab), 0x6d);
        // 21 03C4
        gbc.setState(0xda99, 0x2429, 0xf390, 0xafd0, 0x541, 0xe1e2, 0x0, 0x0);
        gbc.writeMem(0xda99, { 0x21, 0x29, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x2429);
        EXPECT(gbc.pc(), 0xda9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda99), 0x21);
        EXPECT(gbc.readMem(0xda9a), 0x29);
        EXPECT(gbc.readMem(0xda9b), 0x43);
        // 21 03C5
        gbc.setState(0x3af4, 0xbcbf, 0xaae0, 0xbf50, 0x32e, 0x187b, 0x0, 0x0);
        gbc.writeMem(0x3af4, { 0x21, 0x12, 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xbcbf);
        EXPECT(gbc.pc(), 0x3af7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 03C6
        gbc.setState(0xe8e3, 0x1c90, 0x82a0, 0x5048, 0x7035, 0xd67a, 0x0, 0x1);
        gbc.writeMem(0xe8e3, { 0x21, 0xdc, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x1c90);
        EXPECT(gbc.pc(), 0xe8e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8e3), 0x21);
        EXPECT(gbc.readMem(0xe8e4), 0xdc);
        EXPECT(gbc.readMem(0xe8e5), 0x48);
        // 21 03C7
        gbc.setState(0x4083, 0xafa6, 0x2a00, 0x3620, 0x63ee, 0xe414, 0x0, 0x1);
        gbc.writeMem(0x4083, { 0x21, 0x93, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xafa6);
        EXPECT(gbc.pc(), 0x4086);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 03C8
        gbc.setState(0x6b4, 0xde3a, 0x5dd0, 0xd01, 0x8c85, 0x8be2, 0x0, 0x0);
        gbc.writeMem(0x6b4, { 0x21, 0x16, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xde3a);
        EXPECT(gbc.pc(), 0x6b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 03C9
        gbc.setState(0x83a8, 0x3872, 0x23d0, 0x9e16, 0x80fe, 0xde9b, 0x0, 0x0);
        gbc.writeMem(0x83a8, { 0x21, 0x1f, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x3872);
        EXPECT(gbc.pc(), 0x83ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83a8), 0x21);
        EXPECT(gbc.readMem(0x83a9), 0x1f);
        EXPECT(gbc.readMem(0x83aa), 0xcd);
        // 21 03CA
        gbc.setState(0x884a, 0x4ae, 0x4ee0, 0x29e7, 0x6fc0, 0x25fc, 0x0, 0x0);
        gbc.writeMem(0x884a, { 0x21, 0xc3, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x4ae);
        EXPECT(gbc.pc(), 0x884d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x884a), 0x21);
        EXPECT(gbc.readMem(0x884b), 0xc3);
        EXPECT(gbc.readMem(0x884c), 0xcd);
        // 21 03CB
        gbc.setState(0xddb3, 0xf83f, 0x8050, 0xf089, 0x4a0c, 0xccbc, 0x1, 0x0);
        gbc.writeMem(0xddb3, { 0x21, 0x1b, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xf83f);
        EXPECT(gbc.pc(), 0xddb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddb3), 0x21);
        EXPECT(gbc.readMem(0xddb4), 0x1b);
        EXPECT(gbc.readMem(0xddb5), 0xf6);
        // 21 03CC
        gbc.setState(0x4c0f, 0x4d90, 0xc8a0, 0x82cd, 0xdb7e, 0xcd46, 0x1, 0x1);
        gbc.writeMem(0x4c0f, { 0x21, 0xf5, 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x4d90);
        EXPECT(gbc.pc(), 0x4c12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 03CD
        gbc.setState(0x397f, 0x64ca, 0x2e00, 0xf581, 0x3100, 0xb497, 0x1, 0x0);
        gbc.writeMem(0x397f, { 0x21, 0xe6, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x64ca);
        EXPECT(gbc.pc(), 0x3982);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 03CE
        gbc.setState(0xed7f, 0x30c8, 0xdb70, 0xa4bd, 0xec59, 0x9ccc, 0x0, 0x0);
        gbc.writeMem(0xed7f, { 0x21, 0x2b, 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x30c8);
        EXPECT(gbc.pc(), 0xed82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed7f), 0x21);
        EXPECT(gbc.readMem(0xed80), 0x2b);
        EXPECT(gbc.readMem(0xed81), 0xdd);
        // 21 03CF
        gbc.setState(0x90bb, 0x7e42, 0x77a0, 0x75af, 0x5a0b, 0xbf9d, 0x0, 0x1);
        gbc.writeMem(0x90bb, { 0x21, 0xb4, 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x7e42);
        EXPECT(gbc.pc(), 0x90be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90bb), 0x21);
        EXPECT(gbc.readMem(0x90bc), 0xb4);
        EXPECT(gbc.readMem(0x90bd), 0xa);
        // 21 03D0
        gbc.setState(0x74cc, 0xe50f, 0x8240, 0xde03, 0xd24b, 0x9630, 0x0, 0x1);
        gbc.writeMem(0x74cc, { 0x21, 0xef, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xe50f);
        EXPECT(gbc.pc(), 0x74cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 03D1
        gbc.setState(0x8652, 0x724a, 0xe4a0, 0x2395, 0xee4f, 0x61dd, 0x1, 0x0);
        gbc.writeMem(0x8652, { 0x21, 0xc6, 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x724a);
        EXPECT(gbc.pc(), 0x8655);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8652), 0x21);
        EXPECT(gbc.readMem(0x8653), 0xc6);
        EXPECT(gbc.readMem(0x8654), 0xa9);
        // 21 03D2
        gbc.setState(0xa61, 0xe5e5, 0x5a90, 0x6b21, 0x5841, 0xea96, 0x1, 0x1);
        gbc.writeMem(0xa61, { 0x21, 0xe6, 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xe5e5);
        EXPECT(gbc.pc(), 0xa64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 03D3
        gbc.setState(0x2980, 0xcdf2, 0x1140, 0xdbf3, 0x6957, 0x8148, 0x1, 0x0);
        gbc.writeMem(0x2980, { 0x21, 0xbd, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xcdf2);
        EXPECT(gbc.pc(), 0x2983);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 03D4
        gbc.setState(0xeef1, 0x6566, 0x9e30, 0x8bd0, 0x2995, 0x9d83, 0x0, 0x0);
        gbc.writeMem(0xeef1, { 0x21, 0x93, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x6566);
        EXPECT(gbc.pc(), 0xeef4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeef1), 0x21);
        EXPECT(gbc.readMem(0xeef2), 0x93);
        EXPECT(gbc.readMem(0xeef3), 0xfd);
        // 21 03D6
        gbc.setState(0x897a, 0xf14a, 0xd4b0, 0xaa6b, 0xac00, 0x6dc, 0x0, 0x0);
        gbc.writeMem(0x897a, { 0x21, 0x9e, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xf14a);
        EXPECT(gbc.pc(), 0x897d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x897a), 0x21);
        EXPECT(gbc.readMem(0x897b), 0x9e);
        EXPECT(gbc.readMem(0x897c), 0x56);
        // 21 03D8
        gbc.setState(0xccc7, 0x47bf, 0x6ce0, 0xfd83, 0xcbc, 0xbc19, 0x0, 0x0);
        gbc.writeMem(0xccc7, { 0x21, 0x75, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x47bf);
        EXPECT(gbc.pc(), 0xccca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccc7), 0x21);
        EXPECT(gbc.readMem(0xccc8), 0x75);
        EXPECT(gbc.readMem(0xccc9), 0x2);
        // 21 03D9
        gbc.setState(0x2a06, 0xa3a9, 0x54a0, 0xd1b7, 0xebce, 0x188c, 0x1, 0x1);
        gbc.writeMem(0x2a06, { 0x21, 0xac, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xa3a9);
        EXPECT(gbc.pc(), 0x2a09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 03DA
        gbc.setState(0x151c, 0x232a, 0x8220, 0x9cad, 0x683, 0x39aa, 0x1, 0x0);
        gbc.writeMem(0x151c, { 0x21, 0xde, 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x232a);
        EXPECT(gbc.pc(), 0x151f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 03DB
        gbc.setState(0x9d9d, 0x80a5, 0x6e80, 0xb7b, 0x2aae, 0x2cc3, 0x0, 0x0);
        gbc.writeMem(0x9d9d, { 0x21, 0x1, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x80a5);
        EXPECT(gbc.pc(), 0x9da0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d9d), 0x21);
        EXPECT(gbc.readMem(0x9d9e), 0x1);
        EXPECT(gbc.readMem(0x9d9f), 0xaf);
        // 21 03DC
        gbc.setState(0x549e, 0x26da, 0xf880, 0xfae, 0x559c, 0xfe3d, 0x1, 0x0);
        gbc.writeMem(0x549e, { 0x21, 0x77, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x26da);
        EXPECT(gbc.pc(), 0x54a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 03DD
        gbc.setState(0xb75f, 0x1f4f, 0x5d10, 0xe60b, 0x4d61, 0xa843, 0x1, 0x1);
        gbc.writeMem(0xb75f, { 0x21, 0x77, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x1f4f);
        EXPECT(gbc.pc(), 0xb762);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb75f), 0x21);
        EXPECT(gbc.readMem(0xb760), 0x77);
        EXPECT(gbc.readMem(0xb761), 0xcb);
        // 21 03DE
        gbc.setState(0x126a, 0x7384, 0xae0, 0xa33c, 0xa927, 0x312a, 0x1, 0x1);
        gbc.writeMem(0x126a, { 0x21, 0x52, 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x7384);
        EXPECT(gbc.pc(), 0x126d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 03DF
        gbc.setState(0x8c68, 0xb31f, 0xc5d0, 0x6640, 0xa34, 0xc542, 0x1, 0x0);
        gbc.writeMem(0x8c68, { 0x21, 0x3b, 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xb31f);
        EXPECT(gbc.pc(), 0x8c6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c68), 0x21);
        EXPECT(gbc.readMem(0x8c69), 0x3b);
        EXPECT(gbc.readMem(0x8c6a), 0x87);
        // 21 03E0
        gbc.setState(0x8936, 0xb92d, 0xbad0, 0x6c5f, 0xd055, 0xd505, 0x1, 0x0);
        gbc.writeMem(0x8936, { 0x21, 0xb1, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xb92d);
        EXPECT(gbc.pc(), 0x8939);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8936), 0x21);
        EXPECT(gbc.readMem(0x8937), 0xb1);
        EXPECT(gbc.readMem(0x8938), 0xa6);
        // 21 03E1
        gbc.setState(0xb9b3, 0x9d0f, 0x6210, 0xac9e, 0x194a, 0x14c0, 0x0, 0x0);
        gbc.writeMem(0xb9b3, { 0x21, 0x52, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x9d0f);
        EXPECT(gbc.pc(), 0xb9b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9b3), 0x21);
        EXPECT(gbc.readMem(0xb9b4), 0x52);
        EXPECT(gbc.readMem(0xb9b5), 0x9e);
        // 21 03E2
        gbc.setState(0x5173, 0x5d6d, 0x1c0, 0x1a38, 0x13c2, 0xdf42, 0x0, 0x0);
        gbc.writeMem(0x5173, { 0x21, 0x86, 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x5d6d);
        EXPECT(gbc.pc(), 0x5176);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 21 03E4
        gbc.setState(0x2d9f, 0x6c3f, 0x4630, 0xf263, 0x941c, 0x37e7, 0x0, 0x1);
        gbc.writeMem(0x2d9f, { 0x21, 0x0, 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x6c3f);
        EXPECT(gbc.pc(), 0x2da2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 21 03E5
        gbc.setState(0x1e50, 0xc823, 0xb420, 0xf9a6, 0x8bd4, 0x17c, 0x1, 0x1);
        gbc.writeMem(0x1e50, { 0x21, 0x9f, 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xc823);
        EXPECT(gbc.pc(), 0x1e53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 21 03E6
        gbc.setState(0x41f1, 0x6387, 0x6290, 0xe741, 0x9cce, 0xde3a, 0x1, 0x0);
        gbc.writeMem(0x41f1, { 0x21, 0xd9, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x6387);
        EXPECT(gbc.pc(), 0x41f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 21 03E7
        gbc.setState(0xe735, 0xe42a, 0xea00, 0x14dc, 0x4f4a, 0x7414, 0x1, 0x1);
        gbc.writeMem(0xe735, { 0x21, 0x44, 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xe42a);
        EXPECT(gbc.pc(), 0xe738);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe735), 0x21);
        EXPECT(gbc.readMem(0xe736), 0x44);
        EXPECT(gbc.readMem(0xe737), 0x44);
    }
}
#endif
