#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_0f)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_0f) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 0F 0000
        gbc.setState(0x84a, 0xc70, 0x8530, 0x5adc, 0x879c, 0x38f9, 0x0, 0x1);
        gbc.writeMem(0x84a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xc70);
        EXPECT(gbc.pc(), 0x84c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0002
        gbc.setState(0xeea5, 0x30b6, 0x51a0, 0x595b, 0xa9b6, 0xc50c, 0x0, 0x1);
        gbc.writeMem(0xeea5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x30b6);
        EXPECT(gbc.pc(), 0xeea7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeea5), 0xcb);
        EXPECT(gbc.readMem(0xeea6), 0xf);
        // CB 0F 0003
        gbc.setState(0x9397, 0x184, 0x2ec0, 0xef2b, 0x678f, 0xda47, 0x1, 0x0);
        gbc.writeMem(0x9397, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x184);
        EXPECT(gbc.pc(), 0x9399);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9397), 0xcb);
        EXPECT(gbc.readMem(0x9398), 0xf);
        // CB 0F 0004
        gbc.setState(0x1c03, 0x106b, 0xdcb0, 0x85ba, 0xb785, 0x9201, 0x0, 0x1);
        gbc.writeMem(0x1c03, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x106b);
        EXPECT(gbc.pc(), 0x1c05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0005
        gbc.setState(0xa708, 0xa2e7, 0xb20, 0x261b, 0xde0, 0xb4, 0x1, 0x0);
        gbc.writeMem(0xa708, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xa2e7);
        EXPECT(gbc.pc(), 0xa70a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa708), 0xcb);
        EXPECT(gbc.readMem(0xa709), 0xf);
        // CB 0F 0006
        gbc.setState(0xad70, 0x480b, 0x9780, 0x5e09, 0x1e10, 0x93e6, 0x1, 0x1);
        gbc.writeMem(0xad70, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x480b);
        EXPECT(gbc.pc(), 0xad72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad70), 0xcb);
        EXPECT(gbc.readMem(0xad71), 0xf);
        // CB 0F 0007
        gbc.setState(0x84c9, 0xc1a7, 0xd470, 0xd47e, 0x388, 0x1d12, 0x0, 0x1);
        gbc.writeMem(0x84c9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xc1a7);
        EXPECT(gbc.pc(), 0x84cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84c9), 0xcb);
        EXPECT(gbc.readMem(0x84ca), 0xf);
        // CB 0F 0008
        gbc.setState(0x6a32, 0x445d, 0xeac0, 0x3b46, 0x9773, 0x94af, 0x1, 0x1);
        gbc.writeMem(0x6a32, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x445d);
        EXPECT(gbc.pc(), 0x6a34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0009
        gbc.setState(0x9fc7, 0xdae3, 0xf560, 0xa558, 0x5c69, 0x750f, 0x0, 0x1);
        gbc.writeMem(0x9fc7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xdae3);
        EXPECT(gbc.pc(), 0x9fc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fc7), 0xcb);
        EXPECT(gbc.readMem(0x9fc8), 0xf);
        // CB 0F 000A
        gbc.setState(0x4f40, 0xf408, 0xbfa0, 0xc604, 0x2357, 0xfc2e, 0x1, 0x0);
        gbc.writeMem(0x4f40, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xf408);
        EXPECT(gbc.pc(), 0x4f42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 000B
        gbc.setState(0x73d, 0x3d82, 0x13c0, 0xb3c, 0x735a, 0x18d3, 0x1, 0x1);
        gbc.writeMem(0x73d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x3d82);
        EXPECT(gbc.pc(), 0x73f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 000C
        gbc.setState(0x88ef, 0x2f46, 0x5bc0, 0x5269, 0x1373, 0xd025, 0x0, 0x0);
        gbc.writeMem(0x88ef, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x2f46);
        EXPECT(gbc.pc(), 0x88f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88ef), 0xcb);
        EXPECT(gbc.readMem(0x88f0), 0xf);
        // CB 0F 000D
        gbc.setState(0x30cc, 0xbb7e, 0x2430, 0xf9c5, 0x8575, 0xc30c, 0x0, 0x1);
        gbc.writeMem(0x30cc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xbb7e);
        EXPECT(gbc.pc(), 0x30ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 000E
        gbc.setState(0x8d44, 0x7aa4, 0xd8f0, 0xf90b, 0xcce7, 0xc8ab, 0x0, 0x0);
        gbc.writeMem(0x8d44, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7aa4);
        EXPECT(gbc.pc(), 0x8d46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d44), 0xcb);
        EXPECT(gbc.readMem(0x8d45), 0xf);
        // CB 0F 000F
        gbc.setState(0x4da0, 0xa150, 0x5a30, 0x5a3, 0x3c99, 0xb19c, 0x1, 0x0);
        gbc.writeMem(0x4da0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xa150);
        EXPECT(gbc.pc(), 0x4da2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0010
        gbc.setState(0x7411, 0xbfff, 0x3150, 0xa9ba, 0x5330, 0x350a, 0x0, 0x0);
        gbc.writeMem(0x7411, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xbfff);
        EXPECT(gbc.pc(), 0x7413);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0011
        gbc.setState(0x6562, 0x34b6, 0x63e0, 0xd342, 0x2d8a, 0x4cbf, 0x1, 0x0);
        gbc.writeMem(0x6562, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x34b6);
        EXPECT(gbc.pc(), 0x6564);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0012
        gbc.setState(0xc8b8, 0xb88a, 0x7df0, 0xae2f, 0xbc59, 0xcd34, 0x0, 0x0);
        gbc.writeMem(0xc8b8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xb88a);
        EXPECT(gbc.pc(), 0xc8ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8b8), 0xcb);
        EXPECT(gbc.readMem(0xc8b9), 0xf);
        // CB 0F 0013
        gbc.setState(0xa88b, 0x3d6b, 0xeaf0, 0x1def, 0xe9c5, 0xfa73, 0x0, 0x1);
        gbc.writeMem(0xa88b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x3d6b);
        EXPECT(gbc.pc(), 0xa88d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa88b), 0xcb);
        EXPECT(gbc.readMem(0xa88c), 0xf);
        // CB 0F 0014
        gbc.setState(0x58d4, 0x3f42, 0x990, 0xafd3, 0x15a5, 0x3a31, 0x0, 0x1);
        gbc.writeMem(0x58d4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x3f42);
        EXPECT(gbc.pc(), 0x58d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0015
        gbc.setState(0x362e, 0xf0b7, 0x7b0, 0x250c, 0x323c, 0x173e, 0x1, 0x0);
        gbc.writeMem(0x362e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xf0b7);
        EXPECT(gbc.pc(), 0x3630);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0016
        gbc.setState(0x1530, 0xf57d, 0x3c30, 0xeb61, 0xbde0, 0xa216, 0x0, 0x1);
        gbc.writeMem(0x1530, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xf57d);
        EXPECT(gbc.pc(), 0x1532);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0017
        gbc.setState(0x8bf1, 0xca02, 0x8460, 0x2a9f, 0x8e5c, 0xfd73, 0x0, 0x1);
        gbc.writeMem(0x8bf1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xca02);
        EXPECT(gbc.pc(), 0x8bf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bf1), 0xcb);
        EXPECT(gbc.readMem(0x8bf2), 0xf);
        // CB 0F 0018
        gbc.setState(0xbd4a, 0x7293, 0xb310, 0x63dd, 0x4a20, 0x8488, 0x0, 0x1);
        gbc.writeMem(0xbd4a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x7293);
        EXPECT(gbc.pc(), 0xbd4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd4a), 0xcb);
        EXPECT(gbc.readMem(0xbd4b), 0xf);
        // CB 0F 001A
        gbc.setState(0x4d7d, 0x2d82, 0x2380, 0x55c4, 0x6bd2, 0x94f6, 0x1, 0x0);
        gbc.writeMem(0x4d7d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x2d82);
        EXPECT(gbc.pc(), 0x4d7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 001B
        gbc.setState(0x7846, 0x7c60, 0x230, 0xa81e, 0x8714, 0xca74, 0x0, 0x1);
        gbc.writeMem(0x7846, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x7c60);
        EXPECT(gbc.pc(), 0x7848);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 001C
        gbc.setState(0xb2f8, 0xa25b, 0xd5a0, 0xeb5e, 0x6419, 0x8c71, 0x0, 0x1);
        gbc.writeMem(0xb2f8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xa25b);
        EXPECT(gbc.pc(), 0xb2fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2f8), 0xcb);
        EXPECT(gbc.readMem(0xb2f9), 0xf);
        // CB 0F 001D
        gbc.setState(0xec81, 0x566e, 0x4740, 0x7b57, 0x107b, 0xe625, 0x1, 0x1);
        gbc.writeMem(0xec81, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x566e);
        EXPECT(gbc.pc(), 0xec83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec81), 0xcb);
        EXPECT(gbc.readMem(0xec82), 0xf);
        // CB 0F 001E
        gbc.setState(0x85a, 0xa1cd, 0x9310, 0x6fb8, 0xfc83, 0x7d96, 0x0, 0x0);
        gbc.writeMem(0x85a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xa1cd);
        EXPECT(gbc.pc(), 0x85c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 001F
        gbc.setState(0x6866, 0xfd24, 0x69b0, 0xdea9, 0xb073, 0xf60e, 0x1, 0x0);
        gbc.writeMem(0x6866, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xfd24);
        EXPECT(gbc.pc(), 0x6868);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0020
        gbc.setState(0xc782, 0xdfa2, 0x9660, 0x74b2, 0xc950, 0x2a54, 0x1, 0x0);
        gbc.writeMem(0xc782, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xdfa2);
        EXPECT(gbc.pc(), 0xc784);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc782), 0xcb);
        EXPECT(gbc.readMem(0xc783), 0xf);
        // CB 0F 0021
        gbc.setState(0x6966, 0x22d0, 0xb4e0, 0xd23c, 0xa832, 0xd631, 0x1, 0x1);
        gbc.writeMem(0x6966, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x22d0);
        EXPECT(gbc.pc(), 0x6968);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0023
        gbc.setState(0xa472, 0x1f71, 0x2e60, 0x326c, 0xecac, 0xcde7, 0x0, 0x1);
        gbc.writeMem(0xa472, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x1f71);
        EXPECT(gbc.pc(), 0xa474);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa472), 0xcb);
        EXPECT(gbc.readMem(0xa473), 0xf);
        // CB 0F 0024
        gbc.setState(0xe2f5, 0x90b8, 0x21c0, 0x518f, 0xd27d, 0xd4e9, 0x1, 0x0);
        gbc.writeMem(0xe2f5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x90b8);
        EXPECT(gbc.pc(), 0xe2f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2f5), 0xcb);
        EXPECT(gbc.readMem(0xe2f6), 0xf);
        // CB 0F 0025
        gbc.setState(0xc42e, 0xfc81, 0xb600, 0x122f, 0x717d, 0xf971, 0x1, 0x0);
        gbc.writeMem(0xc42e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xfc81);
        EXPECT(gbc.pc(), 0xc430);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc42e), 0xcb);
        EXPECT(gbc.readMem(0xc42f), 0xf);
        // CB 0F 0026
        gbc.setState(0x37d7, 0xd3f0, 0xeef0, 0xcc57, 0x7f16, 0xa06d, 0x1, 0x1);
        gbc.writeMem(0x37d7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xd3f0);
        EXPECT(gbc.pc(), 0x37d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0027
        gbc.setState(0xeb2f, 0xfefc, 0xc60, 0x3a0f, 0x8de5, 0xac0b, 0x0, 0x1);
        gbc.writeMem(0xeb2f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xfefc);
        EXPECT(gbc.pc(), 0xeb31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb2f), 0xcb);
        EXPECT(gbc.readMem(0xeb30), 0xf);
        // CB 0F 0028
        gbc.setState(0x8738, 0xcc23, 0x2590, 0xe0c9, 0x8f0a, 0xbe20, 0x0, 0x1);
        gbc.writeMem(0x8738, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xcc23);
        EXPECT(gbc.pc(), 0x873a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8738), 0xcb);
        EXPECT(gbc.readMem(0x8739), 0xf);
        // CB 0F 0029
        gbc.setState(0x9d0, 0x9f4b, 0xbf70, 0x6402, 0xe186, 0xf27a, 0x1, 0x1);
        gbc.writeMem(0x9d0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x9f4b);
        EXPECT(gbc.pc(), 0x9d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 002A
        gbc.setState(0xbfdd, 0x530b, 0xc010, 0x1716, 0x4d74, 0x2688, 0x1, 0x1);
        gbc.writeMem(0xbfdd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x530b);
        EXPECT(gbc.pc(), 0xbfdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfdd), 0xcb);
        EXPECT(gbc.readMem(0xbfde), 0xf);
        // CB 0F 002B
        gbc.setState(0x8573, 0xc16, 0xff60, 0x3d1f, 0xddc9, 0xf772, 0x1, 0x0);
        gbc.writeMem(0x8573, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xc16);
        EXPECT(gbc.pc(), 0x8575);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8573), 0xcb);
        EXPECT(gbc.readMem(0x8574), 0xf);
        // CB 0F 002C
        gbc.setState(0x8bf3, 0x9a8f, 0x8d60, 0x9dbd, 0x53fa, 0xf2db, 0x1, 0x1);
        gbc.writeMem(0x8bf3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x9a8f);
        EXPECT(gbc.pc(), 0x8bf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bf3), 0xcb);
        EXPECT(gbc.readMem(0x8bf4), 0xf);
        // CB 0F 002D
        gbc.setState(0xac82, 0xc018, 0xaee0, 0xfada, 0xc056, 0xef65, 0x1, 0x1);
        gbc.writeMem(0xac82, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc018);
        EXPECT(gbc.pc(), 0xac84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac82), 0xcb);
        EXPECT(gbc.readMem(0xac83), 0xf);
        // CB 0F 002F
        gbc.setState(0x547b, 0xb5c6, 0x9350, 0xe1be, 0x9b99, 0x2b44, 0x1, 0x0);
        gbc.writeMem(0x547b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xb5c6);
        EXPECT(gbc.pc(), 0x547d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0030
        gbc.setState(0x1386, 0x4c8a, 0x6c80, 0x293e, 0x12c1, 0x1455, 0x1, 0x0);
        gbc.writeMem(0x1386, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x4c8a);
        EXPECT(gbc.pc(), 0x1388);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0031
        gbc.setState(0x88aa, 0x6b49, 0x3860, 0xe979, 0x7495, 0x45db, 0x0, 0x0);
        gbc.writeMem(0x88aa, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x6b49);
        EXPECT(gbc.pc(), 0x88ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88aa), 0xcb);
        EXPECT(gbc.readMem(0x88ab), 0xf);
        // CB 0F 0032
        gbc.setState(0x9e05, 0x38ec, 0x5950, 0x35a1, 0xa6e2, 0x2488, 0x0, 0x0);
        gbc.writeMem(0x9e05, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x38ec);
        EXPECT(gbc.pc(), 0x9e07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e05), 0xcb);
        EXPECT(gbc.readMem(0x9e06), 0xf);
        // CB 0F 0033
        gbc.setState(0xbc9b, 0xcad, 0x83a0, 0xbe61, 0x1615, 0x5380, 0x0, 0x0);
        gbc.writeMem(0xbc9b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xcad);
        EXPECT(gbc.pc(), 0xbc9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc9b), 0xcb);
        EXPECT(gbc.readMem(0xbc9c), 0xf);
        // CB 0F 0034
        gbc.setState(0xd3f4, 0xd04f, 0x8b80, 0x3de3, 0x78c, 0xc26f, 0x0, 0x1);
        gbc.writeMem(0xd3f4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xd04f);
        EXPECT(gbc.pc(), 0xd3f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3f4), 0xcb);
        EXPECT(gbc.readMem(0xd3f5), 0xf);
        // CB 0F 0035
        gbc.setState(0xdfba, 0x895a, 0x1c10, 0x3f3c, 0x3652, 0x8757, 0x0, 0x0);
        gbc.writeMem(0xdfba, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x895a);
        EXPECT(gbc.pc(), 0xdfbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfba), 0xcb);
        EXPECT(gbc.readMem(0xdfbb), 0xf);
        // CB 0F 0036
        gbc.setState(0x76ee, 0x7e93, 0x9260, 0x1f82, 0xe7cd, 0x51a3, 0x1, 0x1);
        gbc.writeMem(0x76ee, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x7e93);
        EXPECT(gbc.pc(), 0x76f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0037
        gbc.setState(0x4d27, 0xfccd, 0xb9c0, 0x1ac2, 0x2b1b, 0xbe82, 0x1, 0x1);
        gbc.writeMem(0x4d27, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xfccd);
        EXPECT(gbc.pc(), 0x4d29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0038
        gbc.setState(0xd1e4, 0xe4eb, 0x22b0, 0xa741, 0xe5de, 0xe6c3, 0x0, 0x0);
        gbc.writeMem(0xd1e4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xe4eb);
        EXPECT(gbc.pc(), 0xd1e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1e4), 0xcb);
        EXPECT(gbc.readMem(0xd1e5), 0xf);
        // CB 0F 0039
        gbc.setState(0x3c26, 0xb269, 0x4430, 0xc08f, 0x5c41, 0x30a8, 0x0, 0x1);
        gbc.writeMem(0x3c26, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xb269);
        EXPECT(gbc.pc(), 0x3c28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 003A
        gbc.setState(0x81e0, 0xf4e6, 0x7c70, 0x4991, 0xe0c6, 0x4a1b, 0x1, 0x1);
        gbc.writeMem(0x81e0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xf4e6);
        EXPECT(gbc.pc(), 0x81e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81e0), 0xcb);
        EXPECT(gbc.readMem(0x81e1), 0xf);
        // CB 0F 003B
        gbc.setState(0xc872, 0x7667, 0x65c0, 0x2f78, 0xfdfa, 0xf1d8, 0x1, 0x0);
        gbc.writeMem(0xc872, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x7667);
        EXPECT(gbc.pc(), 0xc874);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc872), 0xcb);
        EXPECT(gbc.readMem(0xc873), 0xf);
        // CB 0F 003C
        gbc.setState(0x8281, 0xa7d4, 0x7ff0, 0x3843, 0x3241, 0x2d21, 0x1, 0x0);
        gbc.writeMem(0x8281, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xa7d4);
        EXPECT(gbc.pc(), 0x8283);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8281), 0xcb);
        EXPECT(gbc.readMem(0x8282), 0xf);
        // CB 0F 003D
        gbc.setState(0xa24e, 0xce79, 0xfb10, 0x682e, 0xd105, 0x22b8, 0x1, 0x0);
        gbc.writeMem(0xa24e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xce79);
        EXPECT(gbc.pc(), 0xa250);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa24e), 0xcb);
        EXPECT(gbc.readMem(0xa24f), 0xf);
        // CB 0F 003E
        gbc.setState(0xcb37, 0x1626, 0xdf40, 0x2160, 0x94a7, 0x1c64, 0x1, 0x1);
        gbc.writeMem(0xcb37, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x1626);
        EXPECT(gbc.pc(), 0xcb39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb37), 0xcb);
        EXPECT(gbc.readMem(0xcb38), 0xf);
        // CB 0F 003F
        gbc.setState(0x52f5, 0xd92c, 0x8e20, 0x7339, 0xca71, 0x538c, 0x0, 0x1);
        gbc.writeMem(0x52f5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xd92c);
        EXPECT(gbc.pc(), 0x52f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0040
        gbc.setState(0xa13f, 0x8de0, 0x7c10, 0xf818, 0xdf35, 0xf33f, 0x0, 0x0);
        gbc.writeMem(0xa13f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x8de0);
        EXPECT(gbc.pc(), 0xa141);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa13f), 0xcb);
        EXPECT(gbc.readMem(0xa140), 0xf);
        // CB 0F 0041
        gbc.setState(0x3d51, 0x5e66, 0xf420, 0x12bf, 0x874f, 0x230f, 0x1, 0x0);
        gbc.writeMem(0x3d51, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x5e66);
        EXPECT(gbc.pc(), 0x3d53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0042
        gbc.setState(0x8698, 0xab6a, 0x66f0, 0x40ee, 0xc63e, 0x331e, 0x0, 0x0);
        gbc.writeMem(0x8698, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xab6a);
        EXPECT(gbc.pc(), 0x869a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8698), 0xcb);
        EXPECT(gbc.readMem(0x8699), 0xf);
        // CB 0F 0043
        gbc.setState(0x80e2, 0x7aa8, 0x7c30, 0xff28, 0x2153, 0x7be5, 0x1, 0x0);
        gbc.writeMem(0x80e2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x7aa8);
        EXPECT(gbc.pc(), 0x80e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80e2), 0xcb);
        EXPECT(gbc.readMem(0x80e3), 0xf);
        // CB 0F 0044
        gbc.setState(0x6bb2, 0xc32f, 0x6b50, 0x3382, 0xed16, 0x34a8, 0x0, 0x1);
        gbc.writeMem(0x6bb2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc32f);
        EXPECT(gbc.pc(), 0x6bb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0045
        gbc.setState(0x5754, 0x2ccd, 0xa880, 0x2e77, 0x8ebe, 0x3d63, 0x1, 0x1);
        gbc.writeMem(0x5754, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x2ccd);
        EXPECT(gbc.pc(), 0x5756);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0046
        gbc.setState(0x98c8, 0xc3bd, 0xe840, 0xeb89, 0xe18b, 0xfb1c, 0x0, 0x1);
        gbc.writeMem(0x98c8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xc3bd);
        EXPECT(gbc.pc(), 0x98ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98c8), 0xcb);
        EXPECT(gbc.readMem(0x98c9), 0xf);
        // CB 0F 0047
        gbc.setState(0x440e, 0x1287, 0xf9f0, 0x6f21, 0x70fe, 0x927b, 0x1, 0x1);
        gbc.writeMem(0x440e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x1287);
        EXPECT(gbc.pc(), 0x4410);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0048
        gbc.setState(0xaccb, 0xb9dd, 0xe880, 0x612a, 0x9f1e, 0x5baf, 0x1, 0x1);
        gbc.writeMem(0xaccb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xb9dd);
        EXPECT(gbc.pc(), 0xaccd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaccb), 0xcb);
        EXPECT(gbc.readMem(0xaccc), 0xf);
        // CB 0F 0049
        gbc.setState(0x1bdc, 0xd275, 0xc470, 0x7357, 0x22e9, 0x8443, 0x0, 0x0);
        gbc.writeMem(0x1bdc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xd275);
        EXPECT(gbc.pc(), 0x1bde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 004A
        gbc.setState(0x4299, 0xbffc, 0xfed0, 0x4762, 0x60b2, 0xd90d, 0x0, 0x1);
        gbc.writeMem(0x4299, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xbffc);
        EXPECT(gbc.pc(), 0x429b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 004B
        gbc.setState(0xad08, 0x4e87, 0x4790, 0x7eda, 0x4b71, 0x2879, 0x0, 0x1);
        gbc.writeMem(0xad08, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x4e87);
        EXPECT(gbc.pc(), 0xad0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad08), 0xcb);
        EXPECT(gbc.readMem(0xad09), 0xf);
        // CB 0F 004C
        gbc.setState(0xa62b, 0xceee, 0xc7e0, 0x3b06, 0xe508, 0xb5fa, 0x0, 0x1);
        gbc.writeMem(0xa62b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xceee);
        EXPECT(gbc.pc(), 0xa62d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa62b), 0xcb);
        EXPECT(gbc.readMem(0xa62c), 0xf);
        // CB 0F 004D
        gbc.setState(0x4a62, 0xab48, 0x9120, 0x2305, 0x37b3, 0xa051, 0x1, 0x1);
        gbc.writeMem(0x4a62, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xab48);
        EXPECT(gbc.pc(), 0x4a64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 004E
        gbc.setState(0xa0f8, 0x9ed1, 0x2c20, 0xf44b, 0x7802, 0xcb8, 0x1, 0x1);
        gbc.writeMem(0xa0f8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x9ed1);
        EXPECT(gbc.pc(), 0xa0fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0f8), 0xcb);
        EXPECT(gbc.readMem(0xa0f9), 0xf);
        // CB 0F 004F
        gbc.setState(0x5f3d, 0x7a01, 0xded0, 0x34fd, 0xc810, 0xc66c, 0x1, 0x1);
        gbc.writeMem(0x5f3d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x7a01);
        EXPECT(gbc.pc(), 0x5f3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0050
        gbc.setState(0xdfad, 0x2117, 0xa880, 0x4124, 0x1767, 0xb53d, 0x1, 0x1);
        gbc.writeMem(0xdfad, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x2117);
        EXPECT(gbc.pc(), 0xdfaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfad), 0xcb);
        EXPECT(gbc.readMem(0xdfae), 0xf);
        // CB 0F 0051
        gbc.setState(0x5704, 0x611a, 0x69d0, 0x536a, 0x199b, 0x240e, 0x0, 0x1);
        gbc.writeMem(0x5704, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x611a);
        EXPECT(gbc.pc(), 0x5706);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0052
        gbc.setState(0x90a3, 0x7d1d, 0xcb0, 0x3121, 0x1a76, 0xe8e6, 0x1, 0x1);
        gbc.writeMem(0x90a3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x7d1d);
        EXPECT(gbc.pc(), 0x90a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90a3), 0xcb);
        EXPECT(gbc.readMem(0x90a4), 0xf);
        // CB 0F 0053
        gbc.setState(0x271d, 0x3648, 0xffa0, 0x1a7c, 0x2052, 0x2d6a, 0x0, 0x0);
        gbc.writeMem(0x271d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x3648);
        EXPECT(gbc.pc(), 0x271f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0054
        gbc.setState(0x8ea4, 0x7456, 0x8300, 0x513d, 0x96b, 0x5f7c, 0x1, 0x1);
        gbc.writeMem(0x8ea4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x7456);
        EXPECT(gbc.pc(), 0x8ea6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ea4), 0xcb);
        EXPECT(gbc.readMem(0x8ea5), 0xf);
        // CB 0F 0055
        gbc.setState(0xe97a, 0x4232, 0x3360, 0x53b2, 0xaa7d, 0x8798, 0x0, 0x1);
        gbc.writeMem(0xe97a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x4232);
        EXPECT(gbc.pc(), 0xe97c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe97a), 0xcb);
        EXPECT(gbc.readMem(0xe97b), 0xf);
        // CB 0F 0056
        gbc.setState(0x4404, 0x7320, 0xd610, 0x2d2f, 0xefdb, 0x8082, 0x1, 0x0);
        gbc.writeMem(0x4404, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x7320);
        EXPECT(gbc.pc(), 0x4406);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0057
        gbc.setState(0x137, 0x4af8, 0xb080, 0x74e5, 0x1819, 0x237c, 0x1, 0x1);
        gbc.writeMem(0x137, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x4af8);
        EXPECT(gbc.pc(), 0x139);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0058
        gbc.setState(0x4dbc, 0x1780, 0x970, 0xdf98, 0xe30, 0x3150, 0x0, 0x0);
        gbc.writeMem(0x4dbc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x1780);
        EXPECT(gbc.pc(), 0x4dbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0059
        gbc.setState(0x229d, 0x8f9a, 0x4ae0, 0xcde6, 0x9e55, 0xc952, 0x1, 0x0);
        gbc.writeMem(0x229d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x8f9a);
        EXPECT(gbc.pc(), 0x229f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 005A
        gbc.setState(0x3d5a, 0xdd00, 0x1ea0, 0x6fd4, 0x7479, 0x56f8, 0x0, 0x1);
        gbc.writeMem(0x3d5a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xdd00);
        EXPECT(gbc.pc(), 0x3d5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 005B
        gbc.setState(0x8996, 0x6dcd, 0xa670, 0x4b59, 0x8091, 0x83c5, 0x1, 0x0);
        gbc.writeMem(0x8996, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x6dcd);
        EXPECT(gbc.pc(), 0x8998);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8996), 0xcb);
        EXPECT(gbc.readMem(0x8997), 0xf);
        // CB 0F 005C
        gbc.setState(0x287a, 0x7e66, 0x4470, 0xcf3, 0xeb2f, 0x6914, 0x0, 0x0);
        gbc.writeMem(0x287a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x7e66);
        EXPECT(gbc.pc(), 0x287c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 005D
        gbc.setState(0xe03f, 0x22fd, 0x24f0, 0xeb06, 0x6ef3, 0x4ec9, 0x1, 0x1);
        gbc.writeMem(0xe03f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x22fd);
        EXPECT(gbc.pc(), 0xe041);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe03f), 0xcb);
        EXPECT(gbc.readMem(0xe040), 0xf);
        // CB 0F 005E
        gbc.setState(0x800d, 0xe45e, 0xd800, 0xa57b, 0x931d, 0x244a, 0x0, 0x0);
        gbc.writeMem(0x800d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xe45e);
        EXPECT(gbc.pc(), 0x800f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x800d), 0xcb);
        EXPECT(gbc.readMem(0x800e), 0xf);
        // CB 0F 0060
        gbc.setState(0x888e, 0x7c93, 0xd90, 0xd374, 0x42da, 0x9491, 0x0, 0x1);
        gbc.writeMem(0x888e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x7c93);
        EXPECT(gbc.pc(), 0x8890);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x888e), 0xcb);
        EXPECT(gbc.readMem(0x888f), 0xf);
        // CB 0F 0061
        gbc.setState(0x30a1, 0x14e1, 0xeb30, 0x3b75, 0x6ee0, 0x3ca1, 0x0, 0x1);
        gbc.writeMem(0x30a1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x14e1);
        EXPECT(gbc.pc(), 0x30a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0062
        gbc.setState(0xd6ab, 0x8332, 0x58f0, 0xf0fd, 0x823e, 0x17be, 0x1, 0x1);
        gbc.writeMem(0xd6ab, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x8332);
        EXPECT(gbc.pc(), 0xd6ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6ab), 0xcb);
        EXPECT(gbc.readMem(0xd6ac), 0xf);
        // CB 0F 0063
        gbc.setState(0x42ec, 0xc39e, 0x8640, 0x4713, 0x3395, 0x601f, 0x0, 0x1);
        gbc.writeMem(0x42ec, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xc39e);
        EXPECT(gbc.pc(), 0x42ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0064
        gbc.setState(0x9b34, 0x77cb, 0xabd0, 0x6d23, 0x7026, 0x58a7, 0x1, 0x1);
        gbc.writeMem(0x9b34, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x77cb);
        EXPECT(gbc.pc(), 0x9b36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b34), 0xcb);
        EXPECT(gbc.readMem(0x9b35), 0xf);
        // CB 0F 0065
        gbc.setState(0x9be7, 0x1a76, 0x2140, 0x5ee0, 0xc404, 0x46eb, 0x0, 0x1);
        gbc.writeMem(0x9be7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x1a76);
        EXPECT(gbc.pc(), 0x9be9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9be7), 0xcb);
        EXPECT(gbc.readMem(0x9be8), 0xf);
        // CB 0F 0066
        gbc.setState(0x2f66, 0x97d, 0x7330, 0x2158, 0x2e76, 0xec70, 0x0, 0x1);
        gbc.writeMem(0x2f66, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x97d);
        EXPECT(gbc.pc(), 0x2f68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0067
        gbc.setState(0xe02a, 0x50ff, 0xc270, 0xa9d3, 0xb217, 0x822a, 0x0, 0x1);
        gbc.writeMem(0xe02a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x50ff);
        EXPECT(gbc.pc(), 0xe02c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe02a), 0xcb);
        EXPECT(gbc.readMem(0xe02b), 0xf);
        // CB 0F 0068
        gbc.setState(0x5e8b, 0x46f9, 0x5ff0, 0xe163, 0xb177, 0x75ce, 0x1, 0x0);
        gbc.writeMem(0x5e8b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x46f9);
        EXPECT(gbc.pc(), 0x5e8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0069
        gbc.setState(0x80f2, 0x2c47, 0x7630, 0x66a5, 0xf74b, 0xf08f, 0x1, 0x1);
        gbc.writeMem(0x80f2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x2c47);
        EXPECT(gbc.pc(), 0x80f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80f2), 0xcb);
        EXPECT(gbc.readMem(0x80f3), 0xf);
        // CB 0F 006A
        gbc.setState(0x2d8e, 0xae76, 0x810, 0xa21b, 0x41f4, 0xc799, 0x0, 0x1);
        gbc.writeMem(0x2d8e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xae76);
        EXPECT(gbc.pc(), 0x2d90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 006B
        gbc.setState(0xd625, 0xbb93, 0xc00, 0xb9a8, 0xe648, 0xa31a, 0x0, 0x1);
        gbc.writeMem(0xd625, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xbb93);
        EXPECT(gbc.pc(), 0xd627);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd625), 0xcb);
        EXPECT(gbc.readMem(0xd626), 0xf);
        // CB 0F 006C
        gbc.setState(0x7d1c, 0x295, 0xe6e0, 0x639d, 0xd61a, 0xf846, 0x1, 0x0);
        gbc.writeMem(0x7d1c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x295);
        EXPECT(gbc.pc(), 0x7d1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 006D
        gbc.setState(0xcf0f, 0xc15a, 0x9680, 0xced1, 0xfda7, 0xf1f, 0x1, 0x1);
        gbc.writeMem(0xcf0f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xc15a);
        EXPECT(gbc.pc(), 0xcf11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf0f), 0xcb);
        EXPECT(gbc.readMem(0xcf10), 0xf);
        // CB 0F 006E
        gbc.setState(0xb95c, 0xaf0e, 0x6c20, 0x21ee, 0xc39a, 0xd1cb, 0x1, 0x1);
        gbc.writeMem(0xb95c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xaf0e);
        EXPECT(gbc.pc(), 0xb95e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb95c), 0xcb);
        EXPECT(gbc.readMem(0xb95d), 0xf);
        // CB 0F 006F
        gbc.setState(0x865e, 0xc48c, 0x1a80, 0x6acc, 0x2883, 0x961c, 0x1, 0x1);
        gbc.writeMem(0x865e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xc48c);
        EXPECT(gbc.pc(), 0x8660);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x865e), 0xcb);
        EXPECT(gbc.readMem(0x865f), 0xf);
        // CB 0F 0070
        gbc.setState(0x8aef, 0x89f3, 0xf510, 0xba01, 0xbc96, 0x8846, 0x1, 0x1);
        gbc.writeMem(0x8aef, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x89f3);
        EXPECT(gbc.pc(), 0x8af1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8aef), 0xcb);
        EXPECT(gbc.readMem(0x8af0), 0xf);
        // CB 0F 0071
        gbc.setState(0x94dd, 0x74f, 0x7cb0, 0xcf4d, 0xb3b, 0x9ba9, 0x0, 0x1);
        gbc.writeMem(0x94dd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x74f);
        EXPECT(gbc.pc(), 0x94df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94dd), 0xcb);
        EXPECT(gbc.readMem(0x94de), 0xf);
        // CB 0F 0072
        gbc.setState(0xb85f, 0xa7ee, 0x4e10, 0x185c, 0x51d0, 0x262, 0x1, 0x1);
        gbc.writeMem(0xb85f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xa7ee);
        EXPECT(gbc.pc(), 0xb861);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb85f), 0xcb);
        EXPECT(gbc.readMem(0xb860), 0xf);
        // CB 0F 0073
        gbc.setState(0x8d0b, 0x763c, 0x9b60, 0x10d7, 0x1475, 0xe73a, 0x0, 0x1);
        gbc.writeMem(0x8d0b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x763c);
        EXPECT(gbc.pc(), 0x8d0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d0b), 0xcb);
        EXPECT(gbc.readMem(0x8d0c), 0xf);
        // CB 0F 0075
        gbc.setState(0x3c2b, 0x9bac, 0x1140, 0x68fc, 0x6272, 0x233d, 0x0, 0x0);
        gbc.writeMem(0x3c2b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x9bac);
        EXPECT(gbc.pc(), 0x3c2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0076
        gbc.setState(0x9751, 0x6e68, 0xa910, 0x5139, 0x31ed, 0xad83, 0x1, 0x1);
        gbc.writeMem(0x9751, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x6e68);
        EXPECT(gbc.pc(), 0x9753);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9751), 0xcb);
        EXPECT(gbc.readMem(0x9752), 0xf);
        // CB 0F 0077
        gbc.setState(0x7653, 0xc3c3, 0x46f0, 0xa376, 0x4bf0, 0xf554, 0x1, 0x1);
        gbc.writeMem(0x7653, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xc3c3);
        EXPECT(gbc.pc(), 0x7655);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0079
        gbc.setState(0x742d, 0xdcbe, 0x4eb0, 0x572b, 0x82f9, 0xa6b8, 0x0, 0x1);
        gbc.writeMem(0x742d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xdcbe);
        EXPECT(gbc.pc(), 0x742f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 007A
        gbc.setState(0x7b44, 0xcb09, 0x6db0, 0x34b, 0x1008, 0x3905, 0x1, 0x1);
        gbc.writeMem(0x7b44, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xcb09);
        EXPECT(gbc.pc(), 0x7b46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 007C
        gbc.setState(0x1d26, 0x3b73, 0xac40, 0xdc57, 0x6dac, 0xbea8, 0x0, 0x1);
        gbc.writeMem(0x1d26, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x3b73);
        EXPECT(gbc.pc(), 0x1d28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 007D
        gbc.setState(0x9f3b, 0x9765, 0xc590, 0x571b, 0x7681, 0x39af, 0x1, 0x1);
        gbc.writeMem(0x9f3b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x9765);
        EXPECT(gbc.pc(), 0x9f3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f3b), 0xcb);
        EXPECT(gbc.readMem(0x9f3c), 0xf);
        // CB 0F 007E
        gbc.setState(0x76fa, 0xfccf, 0x1ee0, 0xa001, 0x4f41, 0xdcb2, 0x0, 0x1);
        gbc.writeMem(0x76fa, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xfccf);
        EXPECT(gbc.pc(), 0x76fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 007F
        gbc.setState(0x9461, 0xb17f, 0x35b0, 0xc256, 0x9f59, 0x7fb, 0x0, 0x1);
        gbc.writeMem(0x9461, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xb17f);
        EXPECT(gbc.pc(), 0x9463);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9461), 0xcb);
        EXPECT(gbc.readMem(0x9462), 0xf);
        // CB 0F 0080
        gbc.setState(0x6fdd, 0xeee6, 0xc340, 0x6621, 0x7697, 0xa39f, 0x0, 0x0);
        gbc.writeMem(0x6fdd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xeee6);
        EXPECT(gbc.pc(), 0x6fdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0081
        gbc.setState(0x8a34, 0xd0c3, 0xd340, 0x947c, 0xa0dd, 0x871, 0x0, 0x1);
        gbc.writeMem(0x8a34, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xd0c3);
        EXPECT(gbc.pc(), 0x8a36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a34), 0xcb);
        EXPECT(gbc.readMem(0x8a35), 0xf);
        // CB 0F 0082
        gbc.setState(0xb79f, 0xc53c, 0x1eb0, 0xe7ca, 0xb970, 0xadb7, 0x1, 0x1);
        gbc.writeMem(0xb79f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xc53c);
        EXPECT(gbc.pc(), 0xb7a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb79f), 0xcb);
        EXPECT(gbc.readMem(0xb7a0), 0xf);
        // CB 0F 0083
        gbc.setState(0xd4ed, 0x52c8, 0x3c90, 0xc2fd, 0xbad, 0x46f4, 0x0, 0x0);
        gbc.writeMem(0xd4ed, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x52c8);
        EXPECT(gbc.pc(), 0xd4ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4ed), 0xcb);
        EXPECT(gbc.readMem(0xd4ee), 0xf);
        // CB 0F 0086
        gbc.setState(0xb0db, 0x999b, 0x3f50, 0xbb29, 0x6560, 0x6afa, 0x1, 0x1);
        gbc.writeMem(0xb0db, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x999b);
        EXPECT(gbc.pc(), 0xb0dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0db), 0xcb);
        EXPECT(gbc.readMem(0xb0dc), 0xf);
        // CB 0F 0087
        gbc.setState(0xead8, 0x3739, 0x3bc0, 0x8f87, 0x6847, 0x91d4, 0x0, 0x1);
        gbc.writeMem(0xead8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x3739);
        EXPECT(gbc.pc(), 0xeada);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xead8), 0xcb);
        EXPECT(gbc.readMem(0xead9), 0xf);
        // CB 0F 0088
        gbc.setState(0x8735, 0xc03e, 0x3d30, 0xaedf, 0x88a5, 0x8ea9, 0x1, 0x1);
        gbc.writeMem(0x8735, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xc03e);
        EXPECT(gbc.pc(), 0x8737);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8735), 0xcb);
        EXPECT(gbc.readMem(0x8736), 0xf);
        // CB 0F 0089
        gbc.setState(0x42d0, 0xa13d, 0xc620, 0xc77d, 0x6efb, 0xf26, 0x1, 0x0);
        gbc.writeMem(0x42d0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xa13d);
        EXPECT(gbc.pc(), 0x42d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 008A
        gbc.setState(0x1a7b, 0xc81b, 0x53b0, 0xbc, 0xd30a, 0x5e0b, 0x0, 0x0);
        gbc.writeMem(0x1a7b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xc81b);
        EXPECT(gbc.pc(), 0x1a7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 008B
        gbc.setState(0x8c29, 0x8ada, 0x2d00, 0xa8, 0x2264, 0x3211, 0x0, 0x1);
        gbc.writeMem(0x8c29, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x8ada);
        EXPECT(gbc.pc(), 0x8c2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c29), 0xcb);
        EXPECT(gbc.readMem(0x8c2a), 0xf);
        // CB 0F 008C
        gbc.setState(0x8ce7, 0x5337, 0x5950, 0x3b71, 0x2120, 0x22d9, 0x1, 0x0);
        gbc.writeMem(0x8ce7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x5337);
        EXPECT(gbc.pc(), 0x8ce9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ce7), 0xcb);
        EXPECT(gbc.readMem(0x8ce8), 0xf);
        // CB 0F 008D
        gbc.setState(0x267a, 0x7ad2, 0x78b0, 0x7560, 0xb369, 0x27f7, 0x1, 0x0);
        gbc.writeMem(0x267a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x7ad2);
        EXPECT(gbc.pc(), 0x267c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 008E
        gbc.setState(0x32, 0xab50, 0x1420, 0xcfd5, 0xe856, 0x7e98, 0x0, 0x1);
        gbc.writeMem(0x32, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xab50);
        EXPECT(gbc.pc(), 0x34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 008F
        gbc.setState(0x950b, 0xef64, 0x6700, 0xb1a, 0x92dc, 0x294a, 0x0, 0x0);
        gbc.writeMem(0x950b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xef64);
        EXPECT(gbc.pc(), 0x950d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x950b), 0xcb);
        EXPECT(gbc.readMem(0x950c), 0xf);
        // CB 0F 0090
        gbc.setState(0x902c, 0x5622, 0x8330, 0x1b28, 0x7ebc, 0xbf7a, 0x0, 0x1);
        gbc.writeMem(0x902c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x5622);
        EXPECT(gbc.pc(), 0x902e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x902c), 0xcb);
        EXPECT(gbc.readMem(0x902d), 0xf);
        // CB 0F 0091
        gbc.setState(0x28a3, 0xc99a, 0x21e0, 0xbd82, 0xed4e, 0x8d89, 0x1, 0x0);
        gbc.writeMem(0x28a3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc99a);
        EXPECT(gbc.pc(), 0x28a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0093
        gbc.setState(0x22c9, 0x1c69, 0xf7d0, 0x22fe, 0x1861, 0x358e, 0x1, 0x1);
        gbc.writeMem(0x22c9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x1c69);
        EXPECT(gbc.pc(), 0x22cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0094
        gbc.setState(0xad72, 0xf9ec, 0x4a60, 0x9aae, 0x4987, 0x1527, 0x0, 0x1);
        gbc.writeMem(0xad72, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xf9ec);
        EXPECT(gbc.pc(), 0xad74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad72), 0xcb);
        EXPECT(gbc.readMem(0xad73), 0xf);
        // CB 0F 0095
        gbc.setState(0xe78b, 0xaf0f, 0xbae0, 0x3db6, 0xbb56, 0x3dbb, 0x1, 0x1);
        gbc.writeMem(0xe78b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xaf0f);
        EXPECT(gbc.pc(), 0xe78d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe78b), 0xcb);
        EXPECT(gbc.readMem(0xe78c), 0xf);
        // CB 0F 0096
        gbc.setState(0xbd40, 0x8f37, 0x79d0, 0xfd7e, 0x125b, 0xced0, 0x1, 0x1);
        gbc.writeMem(0xbd40, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x8f37);
        EXPECT(gbc.pc(), 0xbd42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd40), 0xcb);
        EXPECT(gbc.readMem(0xbd41), 0xf);
        // CB 0F 0097
        gbc.setState(0x1b3a, 0xa30d, 0x8ef0, 0x7a62, 0xd446, 0x8cac, 0x1, 0x0);
        gbc.writeMem(0x1b3a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xa30d);
        EXPECT(gbc.pc(), 0x1b3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0098
        gbc.setState(0x5fbc, 0xe470, 0xe1e0, 0xe6b, 0x316, 0x4b45, 0x1, 0x1);
        gbc.writeMem(0x5fbc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xe470);
        EXPECT(gbc.pc(), 0x5fbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0099
        gbc.setState(0xe37c, 0xaa01, 0x5950, 0x1215, 0x98f, 0xf445, 0x0, 0x0);
        gbc.writeMem(0xe37c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xaa01);
        EXPECT(gbc.pc(), 0xe37e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe37c), 0xcb);
        EXPECT(gbc.readMem(0xe37d), 0xf);
        // CB 0F 009A
        gbc.setState(0x58c5, 0xdd17, 0xaec0, 0xa484, 0x8c09, 0xb1be, 0x1, 0x1);
        gbc.writeMem(0x58c5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xdd17);
        EXPECT(gbc.pc(), 0x58c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 009B
        gbc.setState(0x71e0, 0xe996, 0x87e0, 0x8273, 0xa101, 0x33c4, 0x1, 0x0);
        gbc.writeMem(0x71e0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xe996);
        EXPECT(gbc.pc(), 0x71e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 009C
        gbc.setState(0x7da0, 0xad99, 0x4f50, 0xf51b, 0xcc4, 0xda77, 0x0, 0x0);
        gbc.writeMem(0x7da0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xad99);
        EXPECT(gbc.pc(), 0x7da2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 009D
        gbc.setState(0xb699, 0x46bf, 0xd1d0, 0x488b, 0x8833, 0xfdc, 0x1, 0x1);
        gbc.writeMem(0xb699, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x46bf);
        EXPECT(gbc.pc(), 0xb69b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb699), 0xcb);
        EXPECT(gbc.readMem(0xb69a), 0xf);
        // CB 0F 009E
        gbc.setState(0x6177, 0x1a2a, 0x9d10, 0xb6ad, 0x64ac, 0x12cb, 0x0, 0x1);
        gbc.writeMem(0x6177, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1a2a);
        EXPECT(gbc.pc(), 0x6179);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 009F
        gbc.setState(0x8fb3, 0x3e3d, 0xfd0, 0xa058, 0xe60c, 0x449b, 0x1, 0x0);
        gbc.writeMem(0x8fb3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x3e3d);
        EXPECT(gbc.pc(), 0x8fb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fb3), 0xcb);
        EXPECT(gbc.readMem(0x8fb4), 0xf);
        // CB 0F 00A0
        gbc.setState(0xb2bb, 0x56ad, 0x13e0, 0x2662, 0x43bf, 0xffa1, 0x0, 0x0);
        gbc.writeMem(0xb2bb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x56ad);
        EXPECT(gbc.pc(), 0xb2bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2bb), 0xcb);
        EXPECT(gbc.readMem(0xb2bc), 0xf);
        // CB 0F 00A1
        gbc.setState(0xa2c4, 0x2c8, 0xf350, 0x59a2, 0xb4ce, 0xea7c, 0x1, 0x1);
        gbc.writeMem(0xa2c4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x2c8);
        EXPECT(gbc.pc(), 0xa2c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2c4), 0xcb);
        EXPECT(gbc.readMem(0xa2c5), 0xf);
        // CB 0F 00A3
        gbc.setState(0x384b, 0xbbbc, 0x7b30, 0xedec, 0x9d02, 0xe419, 0x1, 0x1);
        gbc.writeMem(0x384b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xbbbc);
        EXPECT(gbc.pc(), 0x384d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00A4
        gbc.setState(0x31bf, 0x4698, 0x6e20, 0x79ea, 0xb03e, 0xb485, 0x1, 0x0);
        gbc.writeMem(0x31bf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x4698);
        EXPECT(gbc.pc(), 0x31c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00A5
        gbc.setState(0xe85e, 0x7a55, 0xbd70, 0xf2a2, 0x47f5, 0xe5f3, 0x0, 0x1);
        gbc.writeMem(0xe85e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x7a55);
        EXPECT(gbc.pc(), 0xe860);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe85e), 0xcb);
        EXPECT(gbc.readMem(0xe85f), 0xf);
        // CB 0F 00A6
        gbc.setState(0xdf91, 0x80ec, 0x4df0, 0x259f, 0x6c9d, 0x2501, 0x1, 0x0);
        gbc.writeMem(0xdf91, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x80ec);
        EXPECT(gbc.pc(), 0xdf93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf91), 0xcb);
        EXPECT(gbc.readMem(0xdf92), 0xf);
        // CB 0F 00A8
        gbc.setState(0x92a3, 0x7ef5, 0x5670, 0x3a1f, 0x6a7, 0xce39, 0x0, 0x1);
        gbc.writeMem(0x92a3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x7ef5);
        EXPECT(gbc.pc(), 0x92a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92a3), 0xcb);
        EXPECT(gbc.readMem(0x92a4), 0xf);
        // CB 0F 00A9
        gbc.setState(0x2668, 0x962d, 0xb250, 0xdc11, 0xbf90, 0x66e6, 0x0, 0x0);
        gbc.writeMem(0x2668, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x962d);
        EXPECT(gbc.pc(), 0x266a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00AA
        gbc.setState(0xb32, 0x124, 0x6910, 0x2fc3, 0x1a5e, 0x784, 0x1, 0x0);
        gbc.writeMem(0xb32, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x124);
        EXPECT(gbc.pc(), 0xb34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00AB
        gbc.setState(0x4b0, 0x5df6, 0xcf90, 0xe6d3, 0xd6df, 0x61e2, 0x1, 0x1);
        gbc.writeMem(0x4b0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x5df6);
        EXPECT(gbc.pc(), 0x4b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00AC
        gbc.setState(0x1421, 0x8fa4, 0xb830, 0x105d, 0xea6a, 0xe5d0, 0x0, 0x0);
        gbc.writeMem(0x1421, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x8fa4);
        EXPECT(gbc.pc(), 0x1423);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00AD
        gbc.setState(0x7826, 0xc65c, 0x9730, 0xf876, 0x43a1, 0xf759, 0x1, 0x1);
        gbc.writeMem(0x7826, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xc65c);
        EXPECT(gbc.pc(), 0x7828);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00AF
        gbc.setState(0x7658, 0x8e02, 0x3ec0, 0x6d71, 0xad9, 0x2da6, 0x1, 0x1);
        gbc.writeMem(0x7658, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x8e02);
        EXPECT(gbc.pc(), 0x765a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00B0
        gbc.setState(0x38da, 0xb7fb, 0x1c90, 0x93d4, 0x4fab, 0xb51b, 0x0, 0x1);
        gbc.writeMem(0x38da, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xb7fb);
        EXPECT(gbc.pc(), 0x38dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00B1
        gbc.setState(0x8156, 0x40e8, 0x3b00, 0xd8a, 0xaee7, 0xf628, 0x1, 0x0);
        gbc.writeMem(0x8156, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x40e8);
        EXPECT(gbc.pc(), 0x8158);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8156), 0xcb);
        EXPECT(gbc.readMem(0x8157), 0xf);
        // CB 0F 00B2
        gbc.setState(0xb046, 0x9fef, 0x7780, 0xd7a7, 0xd8c3, 0x94e7, 0x0, 0x0);
        gbc.writeMem(0xb046, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x9fef);
        EXPECT(gbc.pc(), 0xb048);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb046), 0xcb);
        EXPECT(gbc.readMem(0xb047), 0xf);
        // CB 0F 00B3
        gbc.setState(0xb6bf, 0xf00, 0x6690, 0x6244, 0xec91, 0xa54a, 0x0, 0x1);
        gbc.writeMem(0xb6bf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xf00);
        EXPECT(gbc.pc(), 0xb6c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6bf), 0xcb);
        EXPECT(gbc.readMem(0xb6c0), 0xf);
        // CB 0F 00B4
        gbc.setState(0xbb5, 0xe29a, 0x8740, 0x3b60, 0xa38f, 0x65f4, 0x0, 0x0);
        gbc.writeMem(0xbb5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xe29a);
        EXPECT(gbc.pc(), 0xbb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00B5
        gbc.setState(0xecff, 0x5309, 0xda20, 0x81c9, 0xb398, 0xd33c, 0x0, 0x1);
        gbc.writeMem(0xecff, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x5309);
        EXPECT(gbc.pc(), 0xed01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecff), 0xcb);
        EXPECT(gbc.readMem(0xed00), 0xf);
        // CB 0F 00B6
        gbc.setState(0x69e8, 0xab80, 0xe010, 0xcba8, 0x99aa, 0x7ee1, 0x1, 0x0);
        gbc.writeMem(0x69e8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xab80);
        EXPECT(gbc.pc(), 0x69ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00B7
        gbc.setState(0x3f41, 0x4053, 0x9500, 0x8fae, 0xd89, 0xddf2, 0x1, 0x1);
        gbc.writeMem(0x3f41, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x4053);
        EXPECT(gbc.pc(), 0x3f43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00B8
        gbc.setState(0x12bc, 0xfd27, 0x37b0, 0x84e8, 0x9a11, 0x3178, 0x0, 0x0);
        gbc.writeMem(0x12bc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xfd27);
        EXPECT(gbc.pc(), 0x12be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00B9
        gbc.setState(0x7077, 0x9e43, 0xde70, 0x2bf6, 0x902, 0x62c0, 0x0, 0x1);
        gbc.writeMem(0x7077, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x9e43);
        EXPECT(gbc.pc(), 0x7079);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00BA
        gbc.setState(0x9d90, 0x47e4, 0x8300, 0x715c, 0x30f3, 0x21d3, 0x1, 0x1);
        gbc.writeMem(0x9d90, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x47e4);
        EXPECT(gbc.pc(), 0x9d92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d90), 0xcb);
        EXPECT(gbc.readMem(0x9d91), 0xf);
        // CB 0F 00BB
        gbc.setState(0xc28b, 0xe5d8, 0xa1a0, 0xe4ac, 0x2848, 0x9f72, 0x0, 0x0);
        gbc.writeMem(0xc28b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xe5d8);
        EXPECT(gbc.pc(), 0xc28d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc28b), 0xcb);
        EXPECT(gbc.readMem(0xc28c), 0xf);
        // CB 0F 00BC
        gbc.setState(0xc267, 0x4465, 0x2540, 0x13d0, 0x4998, 0xf556, 0x1, 0x1);
        gbc.writeMem(0xc267, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x4465);
        EXPECT(gbc.pc(), 0xc269);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc267), 0xcb);
        EXPECT(gbc.readMem(0xc268), 0xf);
        // CB 0F 00BD
        gbc.setState(0x6c1a, 0xf26d, 0x58e0, 0xdbab, 0x56c3, 0x530f, 0x1, 0x1);
        gbc.writeMem(0x6c1a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xf26d);
        EXPECT(gbc.pc(), 0x6c1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00BE
        gbc.setState(0x944f, 0x639c, 0xfa30, 0xf1f6, 0x9567, 0xfc9b, 0x0, 0x1);
        gbc.writeMem(0x944f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x639c);
        EXPECT(gbc.pc(), 0x9451);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x944f), 0xcb);
        EXPECT(gbc.readMem(0x9450), 0xf);
        // CB 0F 00BF
        gbc.setState(0xefd8, 0x7add, 0xef0, 0x824e, 0xd490, 0xc1d9, 0x0, 0x1);
        gbc.writeMem(0xefd8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x7add);
        EXPECT(gbc.pc(), 0xefda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefd8), 0xcb);
        EXPECT(gbc.readMem(0xefd9), 0xf);
        // CB 0F 00C0
        gbc.setState(0x12df, 0x3755, 0x3650, 0xf28c, 0xe7a8, 0x9041, 0x1, 0x1);
        gbc.writeMem(0x12df, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x3755);
        EXPECT(gbc.pc(), 0x12e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00C1
        gbc.setState(0x5a10, 0x4982, 0x8d40, 0x1ea2, 0x38b7, 0xdc7f, 0x1, 0x0);
        gbc.writeMem(0x5a10, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x4982);
        EXPECT(gbc.pc(), 0x5a12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00C2
        gbc.setState(0x7acf, 0xffea, 0x3fa0, 0xe63, 0x5728, 0x75db, 0x1, 0x0);
        gbc.writeMem(0x7acf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xffea);
        EXPECT(gbc.pc(), 0x7ad1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00C3
        gbc.setState(0xcb52, 0x6cb8, 0x5270, 0x8ad, 0x3f27, 0xb432, 0x1, 0x0);
        gbc.writeMem(0xcb52, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x6cb8);
        EXPECT(gbc.pc(), 0xcb54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb52), 0xcb);
        EXPECT(gbc.readMem(0xcb53), 0xf);
        // CB 0F 00C4
        gbc.setState(0xcb3b, 0x32a4, 0x4400, 0x3746, 0xfd2a, 0x90c9, 0x0, 0x1);
        gbc.writeMem(0xcb3b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x32a4);
        EXPECT(gbc.pc(), 0xcb3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb3b), 0xcb);
        EXPECT(gbc.readMem(0xcb3c), 0xf);
        // CB 0F 00C5
        gbc.setState(0x69a1, 0x5f41, 0x9d70, 0x829b, 0x1600, 0x6601, 0x0, 0x1);
        gbc.writeMem(0x69a1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x5f41);
        EXPECT(gbc.pc(), 0x69a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00C6
        gbc.setState(0xab2c, 0xe329, 0xb020, 0x7178, 0x4b3f, 0xc46a, 0x1, 0x0);
        gbc.writeMem(0xab2c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xe329);
        EXPECT(gbc.pc(), 0xab2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab2c), 0xcb);
        EXPECT(gbc.readMem(0xab2d), 0xf);
        // CB 0F 00C7
        gbc.setState(0x5b62, 0xe703, 0xce50, 0x4a61, 0xda93, 0xff6b, 0x1, 0x1);
        gbc.writeMem(0x5b62, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xe703);
        EXPECT(gbc.pc(), 0x5b64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00C9
        gbc.setState(0x8a6, 0x9ce1, 0x4c60, 0x5665, 0x5360, 0x9dcd, 0x1, 0x0);
        gbc.writeMem(0x8a6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x9ce1);
        EXPECT(gbc.pc(), 0x8a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00CA
        gbc.setState(0x5542, 0xd46c, 0x5e50, 0x33dd, 0xdfb4, 0x92a, 0x0, 0x0);
        gbc.writeMem(0x5542, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xd46c);
        EXPECT(gbc.pc(), 0x5544);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00CB
        gbc.setState(0xce74, 0x5b90, 0x11d0, 0x15e4, 0xcc8, 0x41a5, 0x1, 0x1);
        gbc.writeMem(0xce74, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x5b90);
        EXPECT(gbc.pc(), 0xce76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce74), 0xcb);
        EXPECT(gbc.readMem(0xce75), 0xf);
        // CB 0F 00CC
        gbc.setState(0x7718, 0x16ab, 0x68b0, 0x4c95, 0x1775, 0x5e5e, 0x1, 0x0);
        gbc.writeMem(0x7718, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x16ab);
        EXPECT(gbc.pc(), 0x771a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00CD
        gbc.setState(0x6af, 0xac49, 0x2f60, 0x9477, 0x5972, 0xbbd0, 0x0, 0x1);
        gbc.writeMem(0x6af, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xac49);
        EXPECT(gbc.pc(), 0x6b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00CE
        gbc.setState(0x7485, 0x6311, 0x8e90, 0x103e, 0x6411, 0x5a66, 0x0, 0x1);
        gbc.writeMem(0x7485, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x6311);
        EXPECT(gbc.pc(), 0x7487);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00CF
        gbc.setState(0xfc8, 0x847e, 0x4020, 0xd6c6, 0x5844, 0xf58f, 0x0, 0x1);
        gbc.writeMem(0xfc8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x847e);
        EXPECT(gbc.pc(), 0xfca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00D0
        gbc.setState(0x2e41, 0xa63a, 0x7fa0, 0xe203, 0x16ec, 0xba76, 0x0, 0x0);
        gbc.writeMem(0x2e41, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xa63a);
        EXPECT(gbc.pc(), 0x2e43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00D1
        gbc.setState(0xb35e, 0x171d, 0x590, 0xa181, 0x8447, 0xd625, 0x0, 0x1);
        gbc.writeMem(0xb35e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x171d);
        EXPECT(gbc.pc(), 0xb360);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb35e), 0xcb);
        EXPECT(gbc.readMem(0xb35f), 0xf);
        // CB 0F 00D2
        gbc.setState(0xe82e, 0xb74a, 0x3c90, 0x46b2, 0x9eeb, 0x3b36, 0x0, 0x0);
        gbc.writeMem(0xe82e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xb74a);
        EXPECT(gbc.pc(), 0xe830);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe82e), 0xcb);
        EXPECT(gbc.readMem(0xe82f), 0xf);
        // CB 0F 00D3
        gbc.setState(0xb6e1, 0xdbc7, 0x8aa0, 0x2422, 0x475, 0x9d78, 0x0, 0x1);
        gbc.writeMem(0xb6e1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xdbc7);
        EXPECT(gbc.pc(), 0xb6e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6e1), 0xcb);
        EXPECT(gbc.readMem(0xb6e2), 0xf);
        // CB 0F 00D4
        gbc.setState(0xc9e3, 0x807c, 0x82c0, 0xe921, 0xab47, 0xd3e1, 0x0, 0x0);
        gbc.writeMem(0xc9e3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x807c);
        EXPECT(gbc.pc(), 0xc9e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9e3), 0xcb);
        EXPECT(gbc.readMem(0xc9e4), 0xf);
        // CB 0F 00D6
        gbc.setState(0x7933, 0x93d4, 0x5710, 0x20a1, 0x322a, 0x941, 0x1, 0x0);
        gbc.writeMem(0x7933, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x93d4);
        EXPECT(gbc.pc(), 0x7935);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00D7
        gbc.setState(0x6b86, 0x1dd, 0x42b0, 0x39f, 0x1efe, 0x78bf, 0x1, 0x0);
        gbc.writeMem(0x6b86, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x1dd);
        EXPECT(gbc.pc(), 0x6b88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00D8
        gbc.setState(0x1264, 0x87ee, 0x9340, 0x4098, 0xe31c, 0x8936, 0x0, 0x1);
        gbc.writeMem(0x1264, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x87ee);
        EXPECT(gbc.pc(), 0x1266);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00D9
        gbc.setState(0x5cce, 0x80d0, 0x7fe0, 0xe1fb, 0x581a, 0x169c, 0x1, 0x1);
        gbc.writeMem(0x5cce, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x80d0);
        EXPECT(gbc.pc(), 0x5cd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00DA
        gbc.setState(0x5087, 0x2824, 0xebf0, 0x48e4, 0x127d, 0xef59, 0x1, 0x0);
        gbc.writeMem(0x5087, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x2824);
        EXPECT(gbc.pc(), 0x5089);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00DB
        gbc.setState(0x71dd, 0x8743, 0xc540, 0xe990, 0xaad2, 0x488, 0x1, 0x1);
        gbc.writeMem(0x71dd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x8743);
        EXPECT(gbc.pc(), 0x71df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00DC
        gbc.setState(0x7d6, 0x9767, 0x4e00, 0x1bd3, 0xa514, 0x60dc, 0x0, 0x1);
        gbc.writeMem(0x7d6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x9767);
        EXPECT(gbc.pc(), 0x7d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00DD
        gbc.setState(0x3983, 0x3a0e, 0x1440, 0x94e, 0xe5a1, 0x2292, 0x0, 0x1);
        gbc.writeMem(0x3983, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x3a0e);
        EXPECT(gbc.pc(), 0x3985);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00DE
        gbc.setState(0x230f, 0x7588, 0x4e60, 0x4adc, 0x56cb, 0x8084, 0x0, 0x1);
        gbc.writeMem(0x230f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x7588);
        EXPECT(gbc.pc(), 0x2311);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00DF
        gbc.setState(0x3317, 0xc441, 0x74c0, 0xcd3f, 0x85a5, 0x5179, 0x0, 0x0);
        gbc.writeMem(0x3317, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xc441);
        EXPECT(gbc.pc(), 0x3319);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00E0
        gbc.setState(0xdcea, 0xe350, 0x5730, 0xde7e, 0x95a7, 0x8796, 0x1, 0x1);
        gbc.writeMem(0xdcea, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xe350);
        EXPECT(gbc.pc(), 0xdcec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcea), 0xcb);
        EXPECT(gbc.readMem(0xdceb), 0xf);
        // CB 0F 00E1
        gbc.setState(0xbf32, 0xf68, 0xbe70, 0x553a, 0x1437, 0xbfac, 0x1, 0x1);
        gbc.writeMem(0xbf32, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xf68);
        EXPECT(gbc.pc(), 0xbf34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf32), 0xcb);
        EXPECT(gbc.readMem(0xbf33), 0xf);
        // CB 0F 00E3
        gbc.setState(0x6e21, 0x3fe8, 0x6320, 0xe003, 0xd614, 0x9149, 0x1, 0x0);
        gbc.writeMem(0x6e21, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x3fe8);
        EXPECT(gbc.pc(), 0x6e23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00E4
        gbc.setState(0xebad, 0x8e6f, 0x5fb0, 0xf7cb, 0x77cf, 0xe705, 0x0, 0x0);
        gbc.writeMem(0xebad, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x8e6f);
        EXPECT(gbc.pc(), 0xebaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebad), 0xcb);
        EXPECT(gbc.readMem(0xebae), 0xf);
        // CB 0F 00E5
        gbc.setState(0x4c71, 0x5431, 0x7f00, 0x4d9f, 0x30a0, 0xe3e8, 0x0, 0x1);
        gbc.writeMem(0x4c71, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x5431);
        EXPECT(gbc.pc(), 0x4c73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00E6
        gbc.setState(0xb233, 0x1fd9, 0xa2f0, 0xaa7b, 0x5c6d, 0xc7a6, 0x1, 0x1);
        gbc.writeMem(0xb233, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x1fd9);
        EXPECT(gbc.pc(), 0xb235);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb233), 0xcb);
        EXPECT(gbc.readMem(0xb234), 0xf);
        // CB 0F 00E7
        gbc.setState(0x577e, 0x465e, 0x72d0, 0xea15, 0x2837, 0x2d8f, 0x1, 0x0);
        gbc.writeMem(0x577e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x465e);
        EXPECT(gbc.pc(), 0x5780);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00E8
        gbc.setState(0xd1cb, 0xf631, 0xac80, 0xb658, 0x57fe, 0x74a3, 0x0, 0x1);
        gbc.writeMem(0xd1cb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xf631);
        EXPECT(gbc.pc(), 0xd1cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1cb), 0xcb);
        EXPECT(gbc.readMem(0xd1cc), 0xf);
        // CB 0F 00E9
        gbc.setState(0xb503, 0xd74a, 0x2140, 0x4962, 0xcb98, 0xc081, 0x0, 0x1);
        gbc.writeMem(0xb503, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xd74a);
        EXPECT(gbc.pc(), 0xb505);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb503), 0xcb);
        EXPECT(gbc.readMem(0xb504), 0xf);
        // CB 0F 00EA
        gbc.setState(0xb7d7, 0x2c25, 0x17a0, 0x576f, 0x80e1, 0x5be9, 0x0, 0x0);
        gbc.writeMem(0xb7d7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x2c25);
        EXPECT(gbc.pc(), 0xb7d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7d7), 0xcb);
        EXPECT(gbc.readMem(0xb7d8), 0xf);
        // CB 0F 00EB
        gbc.setState(0x61, 0x8805, 0x3e30, 0x5b22, 0x5dea, 0xb66f, 0x0, 0x1);
        gbc.writeMem(0x61, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x8805);
        EXPECT(gbc.pc(), 0x63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00ED
        gbc.setState(0x9c08, 0xc399, 0x6d10, 0x68ec, 0x18a9, 0xda20, 0x1, 0x0);
        gbc.writeMem(0x9c08, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xc399);
        EXPECT(gbc.pc(), 0x9c0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c08), 0xcb);
        EXPECT(gbc.readMem(0x9c09), 0xf);
        // CB 0F 00EE
        gbc.setState(0x4f59, 0x9d0c, 0x1930, 0xf989, 0xc078, 0xe462, 0x1, 0x0);
        gbc.writeMem(0x4f59, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x9d0c);
        EXPECT(gbc.pc(), 0x4f5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00EF
        gbc.setState(0xd253, 0x6446, 0xd0f0, 0x76e5, 0xc2f0, 0x8d0c, 0x1, 0x1);
        gbc.writeMem(0xd253, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6446);
        EXPECT(gbc.pc(), 0xd255);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd253), 0xcb);
        EXPECT(gbc.readMem(0xd254), 0xf);
        // CB 0F 00F0
        gbc.setState(0xb00f, 0xdbe9, 0xd4c0, 0x5a83, 0x3f44, 0x94b0, 0x1, 0x1);
        gbc.writeMem(0xb00f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xdbe9);
        EXPECT(gbc.pc(), 0xb011);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb00f), 0xcb);
        EXPECT(gbc.readMem(0xb010), 0xf);
        // CB 0F 00F1
        gbc.setState(0x3719, 0xec70, 0x2750, 0x9cf6, 0x116a, 0xcd00, 0x0, 0x0);
        gbc.writeMem(0x3719, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xec70);
        EXPECT(gbc.pc(), 0x371b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00F2
        gbc.setState(0x1118, 0x7c, 0xffd0, 0x9a0b, 0xf58c, 0x5abf, 0x1, 0x1);
        gbc.writeMem(0x1118, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x7c);
        EXPECT(gbc.pc(), 0x111a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00F3
        gbc.setState(0x5ab9, 0xd6d8, 0x8b30, 0xb718, 0xaa0f, 0x3b3, 0x0, 0x1);
        gbc.writeMem(0x5ab9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xd6d8);
        EXPECT(gbc.pc(), 0x5abb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00F4
        gbc.setState(0x4cbf, 0xf175, 0x130, 0x5ba1, 0xef9, 0x885b, 0x0, 0x1);
        gbc.writeMem(0x4cbf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xf175);
        EXPECT(gbc.pc(), 0x4cc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00F5
        gbc.setState(0x307c, 0x33ef, 0xa300, 0x76ea, 0x93b, 0x41ea, 0x1, 0x1);
        gbc.writeMem(0x307c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x33ef);
        EXPECT(gbc.pc(), 0x307e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00F6
        gbc.setState(0x145a, 0x5f8e, 0x3430, 0xc408, 0xf93e, 0x823e, 0x0, 0x0);
        gbc.writeMem(0x145a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x5f8e);
        EXPECT(gbc.pc(), 0x145c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00F7
        gbc.setState(0x2cb6, 0x6d54, 0x1a90, 0x1c2, 0x9e49, 0x4299, 0x0, 0x0);
        gbc.writeMem(0x2cb6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x6d54);
        EXPECT(gbc.pc(), 0x2cb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00F8
        gbc.setState(0x19bd, 0x603d, 0x8590, 0x4a95, 0x1451, 0xa1fd, 0x1, 0x0);
        gbc.writeMem(0x19bd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x603d);
        EXPECT(gbc.pc(), 0x19bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 00F9
        gbc.setState(0x82c4, 0x15dc, 0x1cd0, 0xaf88, 0xe213, 0xf2f3, 0x0, 0x1);
        gbc.writeMem(0x82c4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x15dc);
        EXPECT(gbc.pc(), 0x82c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82c4), 0xcb);
        EXPECT(gbc.readMem(0x82c5), 0xf);
        // CB 0F 00FA
        gbc.setState(0xa5de, 0xd00f, 0xf430, 0xfd5c, 0xc148, 0xbdb5, 0x1, 0x1);
        gbc.writeMem(0xa5de, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xd00f);
        EXPECT(gbc.pc(), 0xa5e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5de), 0xcb);
        EXPECT(gbc.readMem(0xa5df), 0xf);
        // CB 0F 00FB
        gbc.setState(0x31ac, 0xf62f, 0x1e00, 0xe63, 0x7b65, 0x27d4, 0x1, 0x0);
        gbc.writeMem(0x31ac, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf62f);
        EXPECT(gbc.pc(), 0x31ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00FC
        gbc.setState(0x14ff, 0x2a82, 0xb400, 0xb5f5, 0x429b, 0xf8b4, 0x0, 0x0);
        gbc.writeMem(0x14ff, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x2a82);
        EXPECT(gbc.pc(), 0x1501);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00FE
        gbc.setState(0x7246, 0xb645, 0xba80, 0x9356, 0xbc75, 0xb2be, 0x1, 0x1);
        gbc.writeMem(0x7246, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xb645);
        EXPECT(gbc.pc(), 0x7248);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 00FF
        gbc.setState(0xf40, 0x5604, 0x17b0, 0xffed, 0x34fa, 0x6826, 0x1, 0x0);
        gbc.writeMem(0xf40, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x5604);
        EXPECT(gbc.pc(), 0xf42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0100
        gbc.setState(0x9748, 0xecbb, 0xc000, 0x687, 0x29d6, 0xaaa4, 0x0, 0x0);
        gbc.writeMem(0x9748, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xecbb);
        EXPECT(gbc.pc(), 0x974a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9748), 0xcb);
        EXPECT(gbc.readMem(0x9749), 0xf);
        // CB 0F 0101
        gbc.setState(0x367a, 0x2a12, 0x9460, 0xc03f, 0x9a81, 0x7009, 0x0, 0x1);
        gbc.writeMem(0x367a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x2a12);
        EXPECT(gbc.pc(), 0x367c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0102
        gbc.setState(0xa3b7, 0x738c, 0x6d0, 0x1191, 0x6266, 0x4668, 0x0, 0x1);
        gbc.writeMem(0xa3b7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x738c);
        EXPECT(gbc.pc(), 0xa3b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3b7), 0xcb);
        EXPECT(gbc.readMem(0xa3b8), 0xf);
        // CB 0F 0103
        gbc.setState(0x7b7d, 0xc1c3, 0x34d0, 0x9d90, 0xdc70, 0x69cb, 0x0, 0x1);
        gbc.writeMem(0x7b7d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc1c3);
        EXPECT(gbc.pc(), 0x7b7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0104
        gbc.setState(0x859c, 0x15e3, 0xdeb0, 0x9bce, 0x8bfd, 0x24c3, 0x1, 0x1);
        gbc.writeMem(0x859c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x15e3);
        EXPECT(gbc.pc(), 0x859e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x859c), 0xcb);
        EXPECT(gbc.readMem(0x859d), 0xf);
        // CB 0F 0105
        gbc.setState(0xad6e, 0x42c, 0x7a40, 0xac7c, 0x695a, 0xb952, 0x0, 0x1);
        gbc.writeMem(0xad6e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x42c);
        EXPECT(gbc.pc(), 0xad70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad6e), 0xcb);
        EXPECT(gbc.readMem(0xad6f), 0xf);
        // CB 0F 0106
        gbc.setState(0xa79e, 0x72cc, 0xa720, 0x7dc9, 0x6fd0, 0x8362, 0x0, 0x1);
        gbc.writeMem(0xa79e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x72cc);
        EXPECT(gbc.pc(), 0xa7a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa79e), 0xcb);
        EXPECT(gbc.readMem(0xa79f), 0xf);
        // CB 0F 0108
        gbc.setState(0xb5e, 0x7954, 0x1e80, 0xf200, 0x94f6, 0x2a59, 0x1, 0x1);
        gbc.writeMem(0xb5e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x7954);
        EXPECT(gbc.pc(), 0xb60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0109
        gbc.setState(0x50bf, 0xbd03, 0x2180, 0x3544, 0xf467, 0x1f3a, 0x1, 0x1);
        gbc.writeMem(0x50bf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xbd03);
        EXPECT(gbc.pc(), 0x50c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 010A
        gbc.setState(0xbefd, 0xb871, 0xed10, 0x91e7, 0xc90a, 0xf153, 0x0, 0x1);
        gbc.writeMem(0xbefd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xb871);
        EXPECT(gbc.pc(), 0xbeff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbefd), 0xcb);
        EXPECT(gbc.readMem(0xbefe), 0xf);
        // CB 0F 010B
        gbc.setState(0x1ce1, 0x5120, 0xa090, 0xb273, 0x6d69, 0xc427, 0x1, 0x1);
        gbc.writeMem(0x1ce1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x5120);
        EXPECT(gbc.pc(), 0x1ce3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 010C
        gbc.setState(0xa6e6, 0xfaf, 0x2f20, 0x84f, 0x4941, 0x5577, 0x1, 0x0);
        gbc.writeMem(0xa6e6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xfaf);
        EXPECT(gbc.pc(), 0xa6e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6e6), 0xcb);
        EXPECT(gbc.readMem(0xa6e7), 0xf);
        // CB 0F 010D
        gbc.setState(0xe443, 0xf565, 0x1450, 0xcc43, 0xea7a, 0xd985, 0x1, 0x0);
        gbc.writeMem(0xe443, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xf565);
        EXPECT(gbc.pc(), 0xe445);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe443), 0xcb);
        EXPECT(gbc.readMem(0xe444), 0xf);
        // CB 0F 010E
        gbc.setState(0xe728, 0xfed7, 0xb8f0, 0xb420, 0xe3c0, 0x4063, 0x1, 0x0);
        gbc.writeMem(0xe728, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xfed7);
        EXPECT(gbc.pc(), 0xe72a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe728), 0xcb);
        EXPECT(gbc.readMem(0xe729), 0xf);
        // CB 0F 010F
        gbc.setState(0x31ec, 0xa41b, 0xcc0, 0x4dec, 0x1d96, 0xb6f5, 0x0, 0x0);
        gbc.writeMem(0x31ec, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xa41b);
        EXPECT(gbc.pc(), 0x31ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0110
        gbc.setState(0xa1, 0x17fc, 0x4040, 0x4db2, 0x14db, 0x3d15, 0x1, 0x1);
        gbc.writeMem(0xa1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x17fc);
        EXPECT(gbc.pc(), 0xa3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0111
        gbc.setState(0x720e, 0xad60, 0xec50, 0x5046, 0x1a29, 0x265e, 0x0, 0x0);
        gbc.writeMem(0x720e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xad60);
        EXPECT(gbc.pc(), 0x7210);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0112
        gbc.setState(0x3d4, 0x955b, 0x1cb0, 0x3132, 0xe1a5, 0x40ba, 0x1, 0x1);
        gbc.writeMem(0x3d4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x955b);
        EXPECT(gbc.pc(), 0x3d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0113
        gbc.setState(0x31f, 0x9b2f, 0x95f0, 0x5ded, 0xb20f, 0x6aab, 0x0, 0x1);
        gbc.writeMem(0x31f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x9b2f);
        EXPECT(gbc.pc(), 0x321);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0114
        gbc.setState(0x5a27, 0xd704, 0xa520, 0xd9ed, 0xbe73, 0xcdfb, 0x1, 0x1);
        gbc.writeMem(0x5a27, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xd704);
        EXPECT(gbc.pc(), 0x5a29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0115
        gbc.setState(0x256a, 0xc4df, 0xa500, 0xa7a4, 0x81a1, 0xadc1, 0x0, 0x1);
        gbc.writeMem(0x256a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xc4df);
        EXPECT(gbc.pc(), 0x256c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0116
        gbc.setState(0x489c, 0x5ab4, 0x3ea0, 0xc850, 0x914d, 0xcbaf, 0x0, 0x0);
        gbc.writeMem(0x489c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x5ab4);
        EXPECT(gbc.pc(), 0x489e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0117
        gbc.setState(0xbbc5, 0x8595, 0xe3d0, 0xa5eb, 0x1a28, 0xb360, 0x0, 0x1);
        gbc.writeMem(0xbbc5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x8595);
        EXPECT(gbc.pc(), 0xbbc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbc5), 0xcb);
        EXPECT(gbc.readMem(0xbbc6), 0xf);
        // CB 0F 0118
        gbc.setState(0xb18f, 0xc87, 0x3e10, 0xcfc3, 0x68c1, 0x3c0b, 0x1, 0x0);
        gbc.writeMem(0xb18f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xc87);
        EXPECT(gbc.pc(), 0xb191);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb18f), 0xcb);
        EXPECT(gbc.readMem(0xb190), 0xf);
        // CB 0F 011A
        gbc.setState(0x6bc6, 0xa051, 0xa230, 0x6459, 0x7ade, 0xcff1, 0x1, 0x1);
        gbc.writeMem(0x6bc6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xa051);
        EXPECT(gbc.pc(), 0x6bc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 011B
        gbc.setState(0x3ff, 0x1a96, 0x41a0, 0xb2f8, 0x35a9, 0x8d54, 0x1, 0x0);
        gbc.writeMem(0x3ff, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x1a96);
        EXPECT(gbc.pc(), 0x401);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 011C
        gbc.setState(0xa730, 0x575c, 0x2470, 0x2b97, 0x1753, 0x6e2, 0x0, 0x0);
        gbc.writeMem(0xa730, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x575c);
        EXPECT(gbc.pc(), 0xa732);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa730), 0xcb);
        EXPECT(gbc.readMem(0xa731), 0xf);
        // CB 0F 011D
        gbc.setState(0x8210, 0x2eda, 0xff10, 0xa89b, 0xd970, 0x58b5, 0x0, 0x1);
        gbc.writeMem(0x8210, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x2eda);
        EXPECT(gbc.pc(), 0x8212);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8210), 0xcb);
        EXPECT(gbc.readMem(0x8211), 0xf);
        // CB 0F 011E
        gbc.setState(0x8b15, 0x9b8, 0x91c0, 0x5c15, 0xd7b9, 0xf94, 0x1, 0x1);
        gbc.writeMem(0x8b15, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x9b8);
        EXPECT(gbc.pc(), 0x8b17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b15), 0xcb);
        EXPECT(gbc.readMem(0x8b16), 0xf);
        // CB 0F 011F
        gbc.setState(0x67cb, 0x5326, 0xf050, 0xee52, 0xe747, 0x517f, 0x1, 0x0);
        gbc.writeMem(0x67cb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x5326);
        EXPECT(gbc.pc(), 0x67cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0120
        gbc.setState(0x2dbb, 0xf05d, 0x39c0, 0x69bc, 0xe8b0, 0x7946, 0x0, 0x0);
        gbc.writeMem(0x2dbb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xf05d);
        EXPECT(gbc.pc(), 0x2dbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0121
        gbc.setState(0x1b91, 0xf438, 0x10f0, 0x49f3, 0x928e, 0xcf6a, 0x1, 0x1);
        gbc.writeMem(0x1b91, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xf438);
        EXPECT(gbc.pc(), 0x1b93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0122
        gbc.setState(0xa3d7, 0x30ee, 0x1ca0, 0x9d3e, 0x5724, 0x5423, 0x1, 0x0);
        gbc.writeMem(0xa3d7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x30ee);
        EXPECT(gbc.pc(), 0xa3d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3d7), 0xcb);
        EXPECT(gbc.readMem(0xa3d8), 0xf);
        // CB 0F 0123
        gbc.setState(0xbb7c, 0xc967, 0xa670, 0x65e9, 0x3780, 0x4a39, 0x0, 0x0);
        gbc.writeMem(0xbb7c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xc967);
        EXPECT(gbc.pc(), 0xbb7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb7c), 0xcb);
        EXPECT(gbc.readMem(0xbb7d), 0xf);
        // CB 0F 0124
        gbc.setState(0x710c, 0x398b, 0x80d0, 0x7f5d, 0x6fa0, 0x3ca4, 0x1, 0x0);
        gbc.writeMem(0x710c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x398b);
        EXPECT(gbc.pc(), 0x710e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0125
        gbc.setState(0xcf35, 0x3d0a, 0x86e0, 0x3af5, 0x8a72, 0x2469, 0x1, 0x0);
        gbc.writeMem(0xcf35, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x3d0a);
        EXPECT(gbc.pc(), 0xcf37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf35), 0xcb);
        EXPECT(gbc.readMem(0xcf36), 0xf);
        // CB 0F 0126
        gbc.setState(0x196, 0xcdb3, 0xb1b0, 0x94ef, 0x8fdd, 0x394b, 0x0, 0x0);
        gbc.writeMem(0x196, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xcdb3);
        EXPECT(gbc.pc(), 0x198);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0128
        gbc.setState(0x18ca, 0xebb5, 0xe8c0, 0x2920, 0x4a91, 0x2820, 0x1, 0x0);
        gbc.writeMem(0x18ca, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xebb5);
        EXPECT(gbc.pc(), 0x18cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0129
        gbc.setState(0xc584, 0xbb2, 0x90e0, 0xa885, 0x317d, 0x768e, 0x1, 0x1);
        gbc.writeMem(0xc584, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xbb2);
        EXPECT(gbc.pc(), 0xc586);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc584), 0xcb);
        EXPECT(gbc.readMem(0xc585), 0xf);
        // CB 0F 012A
        gbc.setState(0x2588, 0x7bac, 0xf890, 0xab0e, 0x4df8, 0x9a8b, 0x1, 0x0);
        gbc.writeMem(0x2588, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x7bac);
        EXPECT(gbc.pc(), 0x258a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 012B
        gbc.setState(0xbe12, 0x9a95, 0x7000, 0x8709, 0x48e5, 0xb839, 0x1, 0x0);
        gbc.writeMem(0xbe12, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x9a95);
        EXPECT(gbc.pc(), 0xbe14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe12), 0xcb);
        EXPECT(gbc.readMem(0xbe13), 0xf);
        // CB 0F 012C
        gbc.setState(0x8dae, 0xccc8, 0x70a0, 0x4f43, 0x54ec, 0xf667, 0x0, 0x0);
        gbc.writeMem(0x8dae, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xccc8);
        EXPECT(gbc.pc(), 0x8db0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dae), 0xcb);
        EXPECT(gbc.readMem(0x8daf), 0xf);
        // CB 0F 012D
        gbc.setState(0x6cb, 0x481c, 0xde20, 0xb5c5, 0xb3b2, 0x3042, 0x1, 0x1);
        gbc.writeMem(0x6cb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x481c);
        EXPECT(gbc.pc(), 0x6cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 012E
        gbc.setState(0x35f8, 0xe384, 0x7c90, 0xf0ae, 0x8849, 0xa207, 0x1, 0x0);
        gbc.writeMem(0x35f8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xe384);
        EXPECT(gbc.pc(), 0x35fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 012F
        gbc.setState(0x4baf, 0x2837, 0xa660, 0xfb7f, 0x376e, 0xc0a, 0x0, 0x0);
        gbc.writeMem(0x4baf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x2837);
        EXPECT(gbc.pc(), 0x4bb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0130
        gbc.setState(0x407, 0xcb17, 0x64a0, 0x8, 0x9ccd, 0x6b77, 0x0, 0x1);
        gbc.writeMem(0x407, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xcb17);
        EXPECT(gbc.pc(), 0x409);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0131
        gbc.setState(0xc1a3, 0xcfc2, 0x8ad0, 0x8c8, 0x46c9, 0x2c29, 0x1, 0x0);
        gbc.writeMem(0xc1a3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xcfc2);
        EXPECT(gbc.pc(), 0xc1a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1a3), 0xcb);
        EXPECT(gbc.readMem(0xc1a4), 0xf);
        // CB 0F 0132
        gbc.setState(0x3b40, 0xedcc, 0xc730, 0x5403, 0x3e18, 0x735f, 0x0, 0x1);
        gbc.writeMem(0x3b40, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xedcc);
        EXPECT(gbc.pc(), 0x3b42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0133
        gbc.setState(0x7d3e, 0x8ff4, 0x3830, 0xb0a3, 0x39ee, 0x670b, 0x1, 0x0);
        gbc.writeMem(0x7d3e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x8ff4);
        EXPECT(gbc.pc(), 0x7d40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0134
        gbc.setState(0xc5fa, 0x70d4, 0x35e0, 0xa2c5, 0xd80d, 0x4db, 0x0, 0x0);
        gbc.writeMem(0xc5fa, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x70d4);
        EXPECT(gbc.pc(), 0xc5fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5fa), 0xcb);
        EXPECT(gbc.readMem(0xc5fb), 0xf);
        // CB 0F 0135
        gbc.setState(0xa690, 0x2827, 0xf670, 0xd586, 0x8e31, 0x82ea, 0x0, 0x1);
        gbc.writeMem(0xa690, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x2827);
        EXPECT(gbc.pc(), 0xa692);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa690), 0xcb);
        EXPECT(gbc.readMem(0xa691), 0xf);
        // CB 0F 0136
        gbc.setState(0xe487, 0xe255, 0xacb0, 0x670, 0x1fae, 0x2c3c, 0x1, 0x0);
        gbc.writeMem(0xe487, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xe255);
        EXPECT(gbc.pc(), 0xe489);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe487), 0xcb);
        EXPECT(gbc.readMem(0xe488), 0xf);
        // CB 0F 0137
        gbc.setState(0x5ac1, 0xc3e9, 0xa430, 0x7d6, 0x78b4, 0xf529, 0x1, 0x1);
        gbc.writeMem(0x5ac1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xc3e9);
        EXPECT(gbc.pc(), 0x5ac3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0138
        gbc.setState(0x2b72, 0x52db, 0xaa10, 0xd39f, 0x2f62, 0x66d2, 0x1, 0x0);
        gbc.writeMem(0x2b72, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x52db);
        EXPECT(gbc.pc(), 0x2b74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0139
        gbc.setState(0xa8ab, 0xeddd, 0xfb80, 0x9391, 0x9c4d, 0xac19, 0x0, 0x1);
        gbc.writeMem(0xa8ab, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xeddd);
        EXPECT(gbc.pc(), 0xa8ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8ab), 0xcb);
        EXPECT(gbc.readMem(0xa8ac), 0xf);
        // CB 0F 013A
        gbc.setState(0x24a8, 0x9abc, 0x9760, 0xb2a8, 0x4e15, 0xfdcc, 0x1, 0x1);
        gbc.writeMem(0x24a8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x9abc);
        EXPECT(gbc.pc(), 0x24aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 013C
        gbc.setState(0x9bd6, 0x381, 0x5950, 0x7944, 0x56b, 0x2480, 0x0, 0x1);
        gbc.writeMem(0x9bd6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x381);
        EXPECT(gbc.pc(), 0x9bd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bd6), 0xcb);
        EXPECT(gbc.readMem(0x9bd7), 0xf);
        // CB 0F 013D
        gbc.setState(0x2cd1, 0x23c9, 0xeca0, 0x8f4f, 0xb489, 0xd94f, 0x0, 0x1);
        gbc.writeMem(0x2cd1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x23c9);
        EXPECT(gbc.pc(), 0x2cd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 013E
        gbc.setState(0xd93f, 0xc055, 0x99b0, 0xa7d3, 0x8d38, 0x74b7, 0x1, 0x1);
        gbc.writeMem(0xd93f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xc055);
        EXPECT(gbc.pc(), 0xd941);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd93f), 0xcb);
        EXPECT(gbc.readMem(0xd940), 0xf);
        // CB 0F 013F
        gbc.setState(0x6842, 0x2ed3, 0xaa10, 0x867e, 0xfd47, 0x8fad, 0x0, 0x1);
        gbc.writeMem(0x6842, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x2ed3);
        EXPECT(gbc.pc(), 0x6844);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0140
        gbc.setState(0x84fd, 0x4b8, 0xf210, 0xba56, 0xf03b, 0x2611, 0x1, 0x1);
        gbc.writeMem(0x84fd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x4b8);
        EXPECT(gbc.pc(), 0x84ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84fd), 0xcb);
        EXPECT(gbc.readMem(0x84fe), 0xf);
        // CB 0F 0141
        gbc.setState(0x5a4a, 0xf030, 0xcd50, 0xf757, 0x8579, 0x1df0, 0x1, 0x0);
        gbc.writeMem(0x5a4a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xf030);
        EXPECT(gbc.pc(), 0x5a4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0142
        gbc.setState(0xdba2, 0xe21d, 0x90e0, 0xea65, 0xaebe, 0x788b, 0x0, 0x0);
        gbc.writeMem(0xdba2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xe21d);
        EXPECT(gbc.pc(), 0xdba4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdba2), 0xcb);
        EXPECT(gbc.readMem(0xdba3), 0xf);
        // CB 0F 0143
        gbc.setState(0x5f40, 0x6d8b, 0x5820, 0xe1d8, 0xcd6, 0xff00, 0x0, 0x1);
        gbc.writeMem(0x5f40, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x6d8b);
        EXPECT(gbc.pc(), 0x5f42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0144
        gbc.setState(0xcdc6, 0x7920, 0xb360, 0x5d8d, 0x251d, 0x78f2, 0x1, 0x0);
        gbc.writeMem(0xcdc6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x7920);
        EXPECT(gbc.pc(), 0xcdc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdc6), 0xcb);
        EXPECT(gbc.readMem(0xcdc7), 0xf);
        // CB 0F 0145
        gbc.setState(0xfc4, 0x6bd5, 0x8f80, 0x4d07, 0x2616, 0x4331, 0x1, 0x0);
        gbc.writeMem(0xfc4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x6bd5);
        EXPECT(gbc.pc(), 0xfc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0146
        gbc.setState(0x3a3f, 0x2d25, 0x3750, 0xb4c5, 0x24fd, 0x8bc8, 0x0, 0x0);
        gbc.writeMem(0x3a3f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x2d25);
        EXPECT(gbc.pc(), 0x3a41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0147
        gbc.setState(0x385c, 0xb72a, 0xe500, 0x323, 0x6fa2, 0x6040, 0x0, 0x0);
        gbc.writeMem(0x385c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xb72a);
        EXPECT(gbc.pc(), 0x385e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0148
        gbc.setState(0x5bb3, 0xecf9, 0xa9d0, 0x76c7, 0xa874, 0xd9a0, 0x1, 0x0);
        gbc.writeMem(0x5bb3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xecf9);
        EXPECT(gbc.pc(), 0x5bb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0149
        gbc.setState(0xb910, 0x2def, 0x9db0, 0xaf4c, 0xe659, 0x83e6, 0x0, 0x0);
        gbc.writeMem(0xb910, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x2def);
        EXPECT(gbc.pc(), 0xb912);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb910), 0xcb);
        EXPECT(gbc.readMem(0xb911), 0xf);
        // CB 0F 014A
        gbc.setState(0xe992, 0x7386, 0x7b90, 0xde40, 0xb534, 0xf5d1, 0x0, 0x0);
        gbc.writeMem(0xe992, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x7386);
        EXPECT(gbc.pc(), 0xe994);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe992), 0xcb);
        EXPECT(gbc.readMem(0xe993), 0xf);
        // CB 0F 014B
        gbc.setState(0xe146, 0x1ef5, 0x86c0, 0xda02, 0x3ed0, 0xa44, 0x1, 0x0);
        gbc.writeMem(0xe146, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x1ef5);
        EXPECT(gbc.pc(), 0xe148);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe146), 0xcb);
        EXPECT(gbc.readMem(0xe147), 0xf);
        // CB 0F 014C
        gbc.setState(0x265d, 0xc5c3, 0xde80, 0x1be5, 0xabd4, 0xa38e, 0x0, 0x0);
        gbc.writeMem(0x265d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xc5c3);
        EXPECT(gbc.pc(), 0x265f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 014D
        gbc.setState(0x60b2, 0x2d1d, 0xaf70, 0x60df, 0x2ec4, 0x77b4, 0x1, 0x0);
        gbc.writeMem(0x60b2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x2d1d);
        EXPECT(gbc.pc(), 0x60b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 014E
        gbc.setState(0x4dc8, 0x2f16, 0x5000, 0xbb0e, 0xf9df, 0xf904, 0x1, 0x0);
        gbc.writeMem(0x4dc8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x2f16);
        EXPECT(gbc.pc(), 0x4dca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 014F
        gbc.setState(0x6390, 0x6a6f, 0x8ff0, 0x4904, 0x2862, 0xe00e, 0x1, 0x1);
        gbc.writeMem(0x6390, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x6a6f);
        EXPECT(gbc.pc(), 0x6392);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0150
        gbc.setState(0x4d32, 0x4b4b, 0x2ff0, 0xea8, 0xecf7, 0xbc12, 0x0, 0x1);
        gbc.writeMem(0x4d32, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x4b4b);
        EXPECT(gbc.pc(), 0x4d34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0151
        gbc.setState(0x9551, 0xb596, 0x4060, 0xe3a9, 0x1af0, 0x2682, 0x1, 0x1);
        gbc.writeMem(0x9551, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xb596);
        EXPECT(gbc.pc(), 0x9553);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9551), 0xcb);
        EXPECT(gbc.readMem(0x9552), 0xf);
        // CB 0F 0152
        gbc.setState(0x5fe8, 0x36a6, 0x9800, 0xa55f, 0x4612, 0xdb2b, 0x0, 0x0);
        gbc.writeMem(0x5fe8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x36a6);
        EXPECT(gbc.pc(), 0x5fea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0153
        gbc.setState(0xa354, 0xa11, 0xebc0, 0xad8b, 0xbf2c, 0xcd36, 0x0, 0x0);
        gbc.writeMem(0xa354, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xa11);
        EXPECT(gbc.pc(), 0xa356);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa354), 0xcb);
        EXPECT(gbc.readMem(0xa355), 0xf);
        // CB 0F 0154
        gbc.setState(0x78f3, 0x416b, 0x3c70, 0x1f9d, 0x126b, 0x6b7c, 0x0, 0x1);
        gbc.writeMem(0x78f3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x416b);
        EXPECT(gbc.pc(), 0x78f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0155
        gbc.setState(0x5fd8, 0x729, 0x9b10, 0x33b1, 0xf922, 0xab01, 0x1, 0x0);
        gbc.writeMem(0x5fd8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x729);
        EXPECT(gbc.pc(), 0x5fda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0156
        gbc.setState(0x3056, 0x8bf9, 0x7550, 0x9247, 0xbd2e, 0xf75, 0x0, 0x0);
        gbc.writeMem(0x3056, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x8bf9);
        EXPECT(gbc.pc(), 0x3058);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0157
        gbc.setState(0x645, 0xdeea, 0x7d70, 0xf8f7, 0xf4d2, 0x2db3, 0x1, 0x1);
        gbc.writeMem(0x645, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xdeea);
        EXPECT(gbc.pc(), 0x647);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0158
        gbc.setState(0x557, 0xaf06, 0x2c70, 0x4442, 0x3a60, 0xad4c, 0x1, 0x1);
        gbc.writeMem(0x557, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xaf06);
        EXPECT(gbc.pc(), 0x559);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 015C
        gbc.setState(0xb948, 0xd7ed, 0xbc60, 0xf3cd, 0x3d7f, 0x54a4, 0x0, 0x1);
        gbc.writeMem(0xb948, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xd7ed);
        EXPECT(gbc.pc(), 0xb94a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb948), 0xcb);
        EXPECT(gbc.readMem(0xb949), 0xf);
        // CB 0F 015D
        gbc.setState(0x14c1, 0x8d82, 0x85f0, 0x6d5f, 0xd21e, 0xb234, 0x1, 0x1);
        gbc.writeMem(0x14c1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x8d82);
        EXPECT(gbc.pc(), 0x14c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 015E
        gbc.setState(0x9f19, 0x76a0, 0x26b0, 0x6691, 0x8d67, 0x2db3, 0x0, 0x0);
        gbc.writeMem(0x9f19, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x76a0);
        EXPECT(gbc.pc(), 0x9f1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f19), 0xcb);
        EXPECT(gbc.readMem(0x9f1a), 0xf);
        // CB 0F 015F
        gbc.setState(0x70a9, 0xbcf1, 0x2a70, 0x9e01, 0xb3f7, 0xe127, 0x1, 0x1);
        gbc.writeMem(0x70a9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xbcf1);
        EXPECT(gbc.pc(), 0x70ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0160
        gbc.setState(0x8ba7, 0xb421, 0x35c0, 0x891b, 0x1b0a, 0x9ffc, 0x1, 0x0);
        gbc.writeMem(0x8ba7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xb421);
        EXPECT(gbc.pc(), 0x8ba9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ba7), 0xcb);
        EXPECT(gbc.readMem(0x8ba8), 0xf);
        // CB 0F 0161
        gbc.setState(0xa923, 0x8c57, 0xb310, 0x7fa5, 0x1bb9, 0xc531, 0x0, 0x0);
        gbc.writeMem(0xa923, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x8c57);
        EXPECT(gbc.pc(), 0xa925);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa923), 0xcb);
        EXPECT(gbc.readMem(0xa924), 0xf);
        // CB 0F 0162
        gbc.setState(0x560e, 0xb197, 0xa730, 0x651d, 0xa186, 0xe928, 0x0, 0x0);
        gbc.writeMem(0x560e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xb197);
        EXPECT(gbc.pc(), 0x5610);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0163
        gbc.setState(0x8185, 0x5ce4, 0x61b0, 0x14ae, 0xab82, 0xaaf0, 0x0, 0x0);
        gbc.writeMem(0x8185, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x5ce4);
        EXPECT(gbc.pc(), 0x8187);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8185), 0xcb);
        EXPECT(gbc.readMem(0x8186), 0xf);
        // CB 0F 0164
        gbc.setState(0x783e, 0x17b2, 0xa9b0, 0xf4e, 0x9b08, 0x47f5, 0x0, 0x0);
        gbc.writeMem(0x783e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x17b2);
        EXPECT(gbc.pc(), 0x7840);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0165
        gbc.setState(0x795b, 0x9e5, 0x4e40, 0x6031, 0xc810, 0xf594, 0x1, 0x1);
        gbc.writeMem(0x795b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x9e5);
        EXPECT(gbc.pc(), 0x795d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0166
        gbc.setState(0x77f6, 0x4cc9, 0x3dc0, 0x83f3, 0xd05c, 0xc14a, 0x0, 0x0);
        gbc.writeMem(0x77f6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x4cc9);
        EXPECT(gbc.pc(), 0x77f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0167
        gbc.setState(0xbbe8, 0x49b0, 0x64c0, 0x5b59, 0x3c22, 0x445e, 0x0, 0x0);
        gbc.writeMem(0xbbe8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x49b0);
        EXPECT(gbc.pc(), 0xbbea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbe8), 0xcb);
        EXPECT(gbc.readMem(0xbbe9), 0xf);
        // CB 0F 0168
        gbc.setState(0x9e5e, 0x9d1a, 0x2f60, 0x92a1, 0x4961, 0x1665, 0x0, 0x1);
        gbc.writeMem(0x9e5e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x9d1a);
        EXPECT(gbc.pc(), 0x9e60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e5e), 0xcb);
        EXPECT(gbc.readMem(0x9e5f), 0xf);
        // CB 0F 0169
        gbc.setState(0xdc32, 0x4789, 0xe700, 0x7929, 0xb89e, 0x67bf, 0x1, 0x0);
        gbc.writeMem(0xdc32, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x4789);
        EXPECT(gbc.pc(), 0xdc34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc32), 0xcb);
        EXPECT(gbc.readMem(0xdc33), 0xf);
        // CB 0F 016A
        gbc.setState(0xcdd, 0x125d, 0x38b0, 0xbe7d, 0xf266, 0x21b7, 0x1, 0x1);
        gbc.writeMem(0xcdd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x125d);
        EXPECT(gbc.pc(), 0xcdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 016B
        gbc.setState(0x2978, 0x3311, 0xebe0, 0x2392, 0x8ca6, 0x6345, 0x0, 0x0);
        gbc.writeMem(0x2978, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x3311);
        EXPECT(gbc.pc(), 0x297a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 016C
        gbc.setState(0xc06c, 0xba68, 0x3f90, 0x877c, 0xdf43, 0x3fef, 0x1, 0x0);
        gbc.writeMem(0xc06c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xba68);
        EXPECT(gbc.pc(), 0xc06e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc06c), 0xcb);
        EXPECT(gbc.readMem(0xc06d), 0xf);
        // CB 0F 016D
        gbc.setState(0x4db2, 0xcc8a, 0xb0b0, 0x7e82, 0xbee1, 0x9433, 0x0, 0x0);
        gbc.writeMem(0x4db2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xcc8a);
        EXPECT(gbc.pc(), 0x4db4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 016E
        gbc.setState(0x177c, 0x66fc, 0xe5f0, 0xf5e9, 0x8f14, 0x65ca, 0x0, 0x1);
        gbc.writeMem(0x177c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x66fc);
        EXPECT(gbc.pc(), 0x177e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 016F
        gbc.setState(0xc472, 0xd258, 0x20d0, 0x13bc, 0x57e1, 0xe628, 0x1, 0x0);
        gbc.writeMem(0xc472, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xd258);
        EXPECT(gbc.pc(), 0xc474);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc472), 0xcb);
        EXPECT(gbc.readMem(0xc473), 0xf);
        // CB 0F 0170
        gbc.setState(0xa8db, 0x456, 0x64c0, 0x5948, 0x204e, 0xab4c, 0x1, 0x1);
        gbc.writeMem(0xa8db, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x456);
        EXPECT(gbc.pc(), 0xa8dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8db), 0xcb);
        EXPECT(gbc.readMem(0xa8dc), 0xf);
        // CB 0F 0171
        gbc.setState(0x5e17, 0xb79e, 0x6900, 0x19e8, 0xaf35, 0xe215, 0x0, 0x1);
        gbc.writeMem(0x5e17, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xb79e);
        EXPECT(gbc.pc(), 0x5e19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0172
        gbc.setState(0x1d72, 0xac64, 0xe460, 0x9d4f, 0xdbac, 0x98b5, 0x1, 0x0);
        gbc.writeMem(0x1d72, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xac64);
        EXPECT(gbc.pc(), 0x1d74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0173
        gbc.setState(0xe569, 0xd657, 0x4e60, 0xe11e, 0x3a0d, 0xb330, 0x1, 0x1);
        gbc.writeMem(0xe569, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xd657);
        EXPECT(gbc.pc(), 0xe56b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe569), 0xcb);
        EXPECT(gbc.readMem(0xe56a), 0xf);
        // CB 0F 0174
        gbc.setState(0xd212, 0xb064, 0x6cc0, 0x61fc, 0x85d3, 0xf890, 0x1, 0x1);
        gbc.writeMem(0xd212, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xb064);
        EXPECT(gbc.pc(), 0xd214);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd212), 0xcb);
        EXPECT(gbc.readMem(0xd213), 0xf);
        // CB 0F 0176
        gbc.setState(0xc7ae, 0x402f, 0x8510, 0x6b88, 0xfc42, 0x2999, 0x0, 0x0);
        gbc.writeMem(0xc7ae, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x402f);
        EXPECT(gbc.pc(), 0xc7b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7ae), 0xcb);
        EXPECT(gbc.readMem(0xc7af), 0xf);
        // CB 0F 0177
        gbc.setState(0x4848, 0x8163, 0x5250, 0xb2c7, 0xae1b, 0x8057, 0x0, 0x0);
        gbc.writeMem(0x4848, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8163);
        EXPECT(gbc.pc(), 0x484a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0178
        gbc.setState(0x7c8e, 0x9e21, 0xd3a0, 0x95fc, 0xca85, 0x80ee, 0x0, 0x0);
        gbc.writeMem(0x7c8e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x9e21);
        EXPECT(gbc.pc(), 0x7c90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0179
        gbc.setState(0x6b1a, 0xceb0, 0xda30, 0x82d3, 0x3d7f, 0x7423, 0x0, 0x0);
        gbc.writeMem(0x6b1a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xceb0);
        EXPECT(gbc.pc(), 0x6b1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 017A
        gbc.setState(0x957d, 0x77bc, 0x8600, 0xc214, 0x695, 0x6de4, 0x0, 0x0);
        gbc.writeMem(0x957d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x77bc);
        EXPECT(gbc.pc(), 0x957f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x957d), 0xcb);
        EXPECT(gbc.readMem(0x957e), 0xf);
        // CB 0F 017B
        gbc.setState(0x60c0, 0x5a12, 0xabe0, 0x8495, 0x9f3b, 0xf05d, 0x1, 0x0);
        gbc.writeMem(0x60c0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x5a12);
        EXPECT(gbc.pc(), 0x60c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 017C
        gbc.setState(0xba88, 0xbfb9, 0x6c40, 0x5840, 0x7ead, 0xb2cd, 0x0, 0x0);
        gbc.writeMem(0xba88, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xbfb9);
        EXPECT(gbc.pc(), 0xba8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba88), 0xcb);
        EXPECT(gbc.readMem(0xba89), 0xf);
        // CB 0F 017D
        gbc.setState(0xae83, 0x1089, 0x6260, 0x7e5f, 0xc026, 0xf137, 0x1, 0x0);
        gbc.writeMem(0xae83, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x1089);
        EXPECT(gbc.pc(), 0xae85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae83), 0xcb);
        EXPECT(gbc.readMem(0xae84), 0xf);
        // CB 0F 017E
        gbc.setState(0x3408, 0x59da, 0xd70, 0xf3da, 0x9c2a, 0xe426, 0x1, 0x0);
        gbc.writeMem(0x3408, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x59da);
        EXPECT(gbc.pc(), 0x340a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 017F
        gbc.setState(0xbce5, 0xd587, 0x2230, 0x991f, 0xc558, 0x2815, 0x1, 0x0);
        gbc.writeMem(0xbce5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xd587);
        EXPECT(gbc.pc(), 0xbce7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbce5), 0xcb);
        EXPECT(gbc.readMem(0xbce6), 0xf);
        // CB 0F 0180
        gbc.setState(0x498b, 0xf9df, 0xbd10, 0x7a57, 0x2b24, 0x47cb, 0x1, 0x0);
        gbc.writeMem(0x498b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xf9df);
        EXPECT(gbc.pc(), 0x498d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0181
        gbc.setState(0x2d05, 0x1566, 0xf5e0, 0x9966, 0xea62, 0x4910, 0x0, 0x0);
        gbc.writeMem(0x2d05, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x1566);
        EXPECT(gbc.pc(), 0x2d07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0182
        gbc.setState(0xe847, 0xcc03, 0xa250, 0x2917, 0x890a, 0x6ff7, 0x1, 0x1);
        gbc.writeMem(0xe847, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xcc03);
        EXPECT(gbc.pc(), 0xe849);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe847), 0xcb);
        EXPECT(gbc.readMem(0xe848), 0xf);
        // CB 0F 0183
        gbc.setState(0x162b, 0xd68d, 0xb940, 0xe72f, 0x61b2, 0x36a6, 0x0, 0x0);
        gbc.writeMem(0x162b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd68d);
        EXPECT(gbc.pc(), 0x162d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0184
        gbc.setState(0xbde4, 0x6e94, 0x2530, 0x1e6, 0x95a8, 0x695a, 0x1, 0x0);
        gbc.writeMem(0xbde4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x6e94);
        EXPECT(gbc.pc(), 0xbde6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbde4), 0xcb);
        EXPECT(gbc.readMem(0xbde5), 0xf);
        // CB 0F 0185
        gbc.setState(0x95a3, 0x37bc, 0x7b00, 0x115, 0x7fc, 0xa951, 0x1, 0x1);
        gbc.writeMem(0x95a3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x37bc);
        EXPECT(gbc.pc(), 0x95a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95a3), 0xcb);
        EXPECT(gbc.readMem(0x95a4), 0xf);
        // CB 0F 0186
        gbc.setState(0xc38b, 0x2be7, 0x3100, 0x346d, 0xa7f1, 0x7bd9, 0x0, 0x0);
        gbc.writeMem(0xc38b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x2be7);
        EXPECT(gbc.pc(), 0xc38d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc38b), 0xcb);
        EXPECT(gbc.readMem(0xc38c), 0xf);
        // CB 0F 0187
        gbc.setState(0x880, 0x2658, 0x44b0, 0xcb9b, 0xd98b, 0x9686, 0x1, 0x0);
        gbc.writeMem(0x880, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x2658);
        EXPECT(gbc.pc(), 0x882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0188
        gbc.setState(0x1421, 0x200f, 0x87e0, 0x3735, 0xda75, 0x8b0c, 0x1, 0x0);
        gbc.writeMem(0x1421, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x200f);
        EXPECT(gbc.pc(), 0x1423);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0189
        gbc.setState(0x3c87, 0xe5aa, 0x5ac0, 0xe3a5, 0xb374, 0xd12b, 0x1, 0x1);
        gbc.writeMem(0x3c87, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xe5aa);
        EXPECT(gbc.pc(), 0x3c89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 018A
        gbc.setState(0xd3f2, 0xcba3, 0xea50, 0x610f, 0x8647, 0x2556, 0x0, 0x1);
        gbc.writeMem(0xd3f2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xcba3);
        EXPECT(gbc.pc(), 0xd3f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3f2), 0xcb);
        EXPECT(gbc.readMem(0xd3f3), 0xf);
        // CB 0F 018B
        gbc.setState(0xe848, 0x3218, 0x3190, 0x284e, 0x22b2, 0xd48d, 0x0, 0x1);
        gbc.writeMem(0xe848, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x3218);
        EXPECT(gbc.pc(), 0xe84a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe848), 0xcb);
        EXPECT(gbc.readMem(0xe849), 0xf);
        // CB 0F 018C
        gbc.setState(0xb399, 0xf411, 0xe4e0, 0x5938, 0x5ab6, 0x5254, 0x1, 0x0);
        gbc.writeMem(0xb399, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xf411);
        EXPECT(gbc.pc(), 0xb39b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb399), 0xcb);
        EXPECT(gbc.readMem(0xb39a), 0xf);
        // CB 0F 018D
        gbc.setState(0xc70e, 0x4d48, 0x7c20, 0x1106, 0xc7d3, 0x64a0, 0x0, 0x0);
        gbc.writeMem(0xc70e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x4d48);
        EXPECT(gbc.pc(), 0xc710);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc70e), 0xcb);
        EXPECT(gbc.readMem(0xc70f), 0xf);
        // CB 0F 018E
        gbc.setState(0x1b95, 0xf2b1, 0xdbd0, 0xc712, 0x2c79, 0xcf85, 0x0, 0x1);
        gbc.writeMem(0x1b95, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xf2b1);
        EXPECT(gbc.pc(), 0x1b97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0190
        gbc.setState(0x18d0, 0xd0e8, 0x980, 0x3180, 0x25d8, 0x5f1d, 0x0, 0x0);
        gbc.writeMem(0x18d0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xd0e8);
        EXPECT(gbc.pc(), 0x18d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0191
        gbc.setState(0x5059, 0x9efc, 0xb260, 0xb215, 0x7ea3, 0xd738, 0x0, 0x1);
        gbc.writeMem(0x5059, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x9efc);
        EXPECT(gbc.pc(), 0x505b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0192
        gbc.setState(0xa9a4, 0xe03f, 0xa510, 0x9855, 0x3614, 0x2ceb, 0x0, 0x0);
        gbc.writeMem(0xa9a4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xe03f);
        EXPECT(gbc.pc(), 0xa9a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9a4), 0xcb);
        EXPECT(gbc.readMem(0xa9a5), 0xf);
        // CB 0F 0193
        gbc.setState(0x38f, 0x32a, 0x69d0, 0x54e8, 0x2574, 0x6f60, 0x0, 0x1);
        gbc.writeMem(0x38f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x32a);
        EXPECT(gbc.pc(), 0x391);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0194
        gbc.setState(0x670c, 0x814c, 0x56c0, 0xb85d, 0x956e, 0xcebc, 0x0, 0x1);
        gbc.writeMem(0x670c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x814c);
        EXPECT(gbc.pc(), 0x670e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0195
        gbc.setState(0x2b38, 0xf0bb, 0x56d0, 0x8ad8, 0x3f7a, 0xe16c, 0x1, 0x1);
        gbc.writeMem(0x2b38, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xf0bb);
        EXPECT(gbc.pc(), 0x2b3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0196
        gbc.setState(0xe4ec, 0xae69, 0xe2c0, 0xbbbf, 0x9f45, 0xf9ad, 0x1, 0x1);
        gbc.writeMem(0xe4ec, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xae69);
        EXPECT(gbc.pc(), 0xe4ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4ec), 0xcb);
        EXPECT(gbc.readMem(0xe4ed), 0xf);
        // CB 0F 0197
        gbc.setState(0xd807, 0xed36, 0x9b70, 0x318a, 0xc9e2, 0xbf77, 0x0, 0x0);
        gbc.writeMem(0xd807, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xed36);
        EXPECT(gbc.pc(), 0xd809);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd807), 0xcb);
        EXPECT(gbc.readMem(0xd808), 0xf);
        // CB 0F 0198
        gbc.setState(0x88aa, 0x56ec, 0xd9b0, 0x301b, 0xc2f7, 0x4df9, 0x0, 0x1);
        gbc.writeMem(0x88aa, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x56ec);
        EXPECT(gbc.pc(), 0x88ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88aa), 0xcb);
        EXPECT(gbc.readMem(0x88ab), 0xf);
        // CB 0F 0199
        gbc.setState(0x1fe8, 0x9e60, 0x8ff0, 0xbbcf, 0x16d, 0x51a1, 0x1, 0x1);
        gbc.writeMem(0x1fe8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x9e60);
        EXPECT(gbc.pc(), 0x1fea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 019A
        gbc.setState(0x36ad, 0x3fa6, 0xff90, 0x36b5, 0x6678, 0xc4fb, 0x0, 0x0);
        gbc.writeMem(0x36ad, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x3fa6);
        EXPECT(gbc.pc(), 0x36af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 019B
        gbc.setState(0x87b9, 0x411f, 0x3a30, 0xb3b8, 0xd53d, 0x5829, 0x1, 0x0);
        gbc.writeMem(0x87b9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x411f);
        EXPECT(gbc.pc(), 0x87bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87b9), 0xcb);
        EXPECT(gbc.readMem(0x87ba), 0xf);
        // CB 0F 019C
        gbc.setState(0xa708, 0x4fa5, 0x2360, 0x6baa, 0x8f88, 0x33d6, 0x1, 0x1);
        gbc.writeMem(0xa708, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x4fa5);
        EXPECT(gbc.pc(), 0xa70a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa708), 0xcb);
        EXPECT(gbc.readMem(0xa709), 0xf);
        // CB 0F 019D
        gbc.setState(0x2285, 0x3172, 0x7f40, 0xe04c, 0xfbd7, 0x6ce2, 0x0, 0x0);
        gbc.writeMem(0x2285, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x3172);
        EXPECT(gbc.pc(), 0x2287);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 019E
        gbc.setState(0x8814, 0x75f8, 0xacd0, 0x6d87, 0x76b0, 0x1053, 0x1, 0x1);
        gbc.writeMem(0x8814, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x75f8);
        EXPECT(gbc.pc(), 0x8816);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8814), 0xcb);
        EXPECT(gbc.readMem(0x8815), 0xf);
        // CB 0F 019F
        gbc.setState(0x279b, 0x9b4a, 0x8cf0, 0xc795, 0x442d, 0x4b77, 0x0, 0x1);
        gbc.writeMem(0x279b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x9b4a);
        EXPECT(gbc.pc(), 0x279d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01A0
        gbc.setState(0x2de1, 0xdbf5, 0x6d80, 0xe9e7, 0xcadf, 0xdc85, 0x0, 0x0);
        gbc.writeMem(0x2de1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xdbf5);
        EXPECT(gbc.pc(), 0x2de3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01A1
        gbc.setState(0x783e, 0x61fd, 0x7610, 0xf6d, 0xb9e8, 0xf269, 0x0, 0x1);
        gbc.writeMem(0x783e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x61fd);
        EXPECT(gbc.pc(), 0x7840);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01A2
        gbc.setState(0xa19b, 0x6bc0, 0x65f0, 0x2d92, 0x66b, 0x54a5, 0x0, 0x1);
        gbc.writeMem(0xa19b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x6bc0);
        EXPECT(gbc.pc(), 0xa19d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa19b), 0xcb);
        EXPECT(gbc.readMem(0xa19c), 0xf);
        // CB 0F 01A3
        gbc.setState(0x80bd, 0x5f3b, 0xc50, 0xb801, 0x7d8e, 0xfffb, 0x0, 0x1);
        gbc.writeMem(0x80bd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x5f3b);
        EXPECT(gbc.pc(), 0x80bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80bd), 0xcb);
        EXPECT(gbc.readMem(0x80be), 0xf);
        // CB 0F 01A4
        gbc.setState(0x149, 0x85c9, 0xcc30, 0xb66a, 0xfc5b, 0xa5b8, 0x0, 0x0);
        gbc.writeMem(0x149, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x85c9);
        EXPECT(gbc.pc(), 0x14b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01A5
        gbc.setState(0x6ae6, 0x3c34, 0xfaa0, 0xc357, 0xc7e7, 0xbc33, 0x1, 0x1);
        gbc.writeMem(0x6ae6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x3c34);
        EXPECT(gbc.pc(), 0x6ae8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01A6
        gbc.setState(0x97f0, 0x3c75, 0x96d0, 0xc2ac, 0xeca6, 0x5412, 0x0, 0x0);
        gbc.writeMem(0x97f0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x3c75);
        EXPECT(gbc.pc(), 0x97f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97f0), 0xcb);
        EXPECT(gbc.readMem(0x97f1), 0xf);
        // CB 0F 01A7
        gbc.setState(0xe092, 0x471f, 0xa420, 0x9de5, 0x693, 0x34a6, 0x0, 0x1);
        gbc.writeMem(0xe092, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x471f);
        EXPECT(gbc.pc(), 0xe094);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe092), 0xcb);
        EXPECT(gbc.readMem(0xe093), 0xf);
        // CB 0F 01A9
        gbc.setState(0x8041, 0xffeb, 0xfef0, 0x505d, 0x5e19, 0xb993, 0x0, 0x1);
        gbc.writeMem(0x8041, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xffeb);
        EXPECT(gbc.pc(), 0x8043);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8041), 0xcb);
        EXPECT(gbc.readMem(0x8042), 0xf);
        // CB 0F 01AA
        gbc.setState(0x7a27, 0x7e09, 0xc930, 0xb718, 0x7b98, 0xf8b7, 0x1, 0x0);
        gbc.writeMem(0x7a27, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x7e09);
        EXPECT(gbc.pc(), 0x7a29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01AB
        gbc.setState(0x9ee6, 0x1c41, 0xeed0, 0xbc39, 0x207d, 0xfcc9, 0x1, 0x0);
        gbc.writeMem(0x9ee6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x1c41);
        EXPECT(gbc.pc(), 0x9ee8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ee6), 0xcb);
        EXPECT(gbc.readMem(0x9ee7), 0xf);
        // CB 0F 01AC
        gbc.setState(0x841d, 0xb169, 0xe900, 0x965a, 0x29a7, 0xd42c, 0x0, 0x0);
        gbc.writeMem(0x841d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xb169);
        EXPECT(gbc.pc(), 0x841f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x841d), 0xcb);
        EXPECT(gbc.readMem(0x841e), 0xf);
        // CB 0F 01AD
        gbc.setState(0x418, 0x11fe, 0x44d0, 0x23e9, 0x6ed1, 0x26b4, 0x1, 0x1);
        gbc.writeMem(0x418, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x11fe);
        EXPECT(gbc.pc(), 0x41a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01AE
        gbc.setState(0x8af4, 0x5dcd, 0x5cb0, 0x44d5, 0x9f80, 0x83a0, 0x1, 0x1);
        gbc.writeMem(0x8af4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x5dcd);
        EXPECT(gbc.pc(), 0x8af6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8af4), 0xcb);
        EXPECT(gbc.readMem(0x8af5), 0xf);
        // CB 0F 01AF
        gbc.setState(0xec81, 0x8b4, 0x1b70, 0xfe63, 0x7386, 0x875a, 0x1, 0x1);
        gbc.writeMem(0xec81, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x8b4);
        EXPECT(gbc.pc(), 0xec83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec81), 0xcb);
        EXPECT(gbc.readMem(0xec82), 0xf);
        // CB 0F 01B0
        gbc.setState(0x6695, 0x4379, 0x9e20, 0x47cd, 0x5eb, 0xccb7, 0x1, 0x0);
        gbc.writeMem(0x6695, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x4379);
        EXPECT(gbc.pc(), 0x6697);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01B1
        gbc.setState(0x4e0f, 0x3aac, 0x5140, 0x4d2b, 0x169c, 0x88b8, 0x0, 0x1);
        gbc.writeMem(0x4e0f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x3aac);
        EXPECT(gbc.pc(), 0x4e11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01B2
        gbc.setState(0xcb6d, 0x8996, 0x5860, 0xa26f, 0x9fcb, 0x81a2, 0x1, 0x0);
        gbc.writeMem(0xcb6d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x8996);
        EXPECT(gbc.pc(), 0xcb6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb6d), 0xcb);
        EXPECT(gbc.readMem(0xcb6e), 0xf);
        // CB 0F 01B3
        gbc.setState(0x6f5d, 0x2480, 0x77f0, 0xd60c, 0xc2b3, 0xfbbb, 0x0, 0x0);
        gbc.writeMem(0x6f5d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x2480);
        EXPECT(gbc.pc(), 0x6f5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01B4
        gbc.setState(0x9a72, 0xa9a3, 0x14c0, 0x3209, 0xec53, 0xb71a, 0x1, 0x1);
        gbc.writeMem(0x9a72, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xa9a3);
        EXPECT(gbc.pc(), 0x9a74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a72), 0xcb);
        EXPECT(gbc.readMem(0x9a73), 0xf);
        // CB 0F 01B5
        gbc.setState(0xa436, 0x4a30, 0x3800, 0x2241, 0x59f8, 0xdf02, 0x0, 0x1);
        gbc.writeMem(0xa436, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x4a30);
        EXPECT(gbc.pc(), 0xa438);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa436), 0xcb);
        EXPECT(gbc.readMem(0xa437), 0xf);
        // CB 0F 01B6
        gbc.setState(0x9b05, 0x47b3, 0xc600, 0x3efc, 0xd79d, 0xe601, 0x1, 0x1);
        gbc.writeMem(0x9b05, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x47b3);
        EXPECT(gbc.pc(), 0x9b07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b05), 0xcb);
        EXPECT(gbc.readMem(0x9b06), 0xf);
        // CB 0F 01B7
        gbc.setState(0x9d15, 0xb305, 0x7b0, 0xd9e4, 0x3539, 0x6ab8, 0x0, 0x0);
        gbc.writeMem(0x9d15, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xb305);
        EXPECT(gbc.pc(), 0x9d17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d15), 0xcb);
        EXPECT(gbc.readMem(0x9d16), 0xf);
        // CB 0F 01B8
        gbc.setState(0xdf, 0x4782, 0x8360, 0xffdc, 0xf2, 0x18a9, 0x0, 0x1);
        gbc.writeMem(0xdf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x4782);
        EXPECT(gbc.pc(), 0xe1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01B9
        gbc.setState(0x2beb, 0x3ed0, 0x2b00, 0x4a33, 0x5b8a, 0xe1c7, 0x0, 0x1);
        gbc.writeMem(0x2beb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x3ed0);
        EXPECT(gbc.pc(), 0x2bed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01BA
        gbc.setState(0x6f48, 0xd08f, 0xb1a0, 0x3fb0, 0x486c, 0x9ffa, 0x1, 0x0);
        gbc.writeMem(0x6f48, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xd08f);
        EXPECT(gbc.pc(), 0x6f4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01BB
        gbc.setState(0x2c34, 0xe32d, 0x6f80, 0xa610, 0xa983, 0xabac, 0x0, 0x1);
        gbc.writeMem(0x2c34, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xe32d);
        EXPECT(gbc.pc(), 0x2c36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01BC
        gbc.setState(0x9b2b, 0xa6f4, 0xb8b0, 0xdc47, 0xf8a8, 0xdfe, 0x1, 0x1);
        gbc.writeMem(0x9b2b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xa6f4);
        EXPECT(gbc.pc(), 0x9b2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b2b), 0xcb);
        EXPECT(gbc.readMem(0x9b2c), 0xf);
        // CB 0F 01BD
        gbc.setState(0x7af8, 0x774, 0x23b0, 0x1bdb, 0xc9, 0x38ed, 0x0, 0x0);
        gbc.writeMem(0x7af8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x774);
        EXPECT(gbc.pc(), 0x7afa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01BE
        gbc.setState(0xdf2f, 0xd02c, 0xf1c0, 0x7d6a, 0xb5f8, 0x231c, 0x1, 0x0);
        gbc.writeMem(0xdf2f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xd02c);
        EXPECT(gbc.pc(), 0xdf31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf2f), 0xcb);
        EXPECT(gbc.readMem(0xdf30), 0xf);
        // CB 0F 01BF
        gbc.setState(0x15ff, 0xa1ca, 0x36d0, 0x894a, 0x71c5, 0xa8ad, 0x1, 0x1);
        gbc.writeMem(0x15ff, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xa1ca);
        EXPECT(gbc.pc(), 0x1601);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01C1
        gbc.setState(0xcf2c, 0xb5ca, 0xb7c0, 0xd2e8, 0xa247, 0x1f69, 0x0, 0x1);
        gbc.writeMem(0xcf2c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xb5ca);
        EXPECT(gbc.pc(), 0xcf2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf2c), 0xcb);
        EXPECT(gbc.readMem(0xcf2d), 0xf);
        // CB 0F 01C2
        gbc.setState(0x6ead, 0x570e, 0xfb10, 0xe0d7, 0x74f5, 0xff3a, 0x1, 0x1);
        gbc.writeMem(0x6ead, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x570e);
        EXPECT(gbc.pc(), 0x6eaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01C3
        gbc.setState(0x5b9b, 0x2763, 0x8620, 0x79ef, 0xe469, 0xfe84, 0x0, 0x0);
        gbc.writeMem(0x5b9b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x2763);
        EXPECT(gbc.pc(), 0x5b9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01C4
        gbc.setState(0x4b30, 0x5f8b, 0x2f0, 0x9c3d, 0x390c, 0x78d6, 0x1, 0x1);
        gbc.writeMem(0x4b30, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x5f8b);
        EXPECT(gbc.pc(), 0x4b32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01C5
        gbc.setState(0x79e9, 0x479f, 0x5bb0, 0x51fd, 0x267d, 0xb085, 0x0, 0x1);
        gbc.writeMem(0x79e9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x479f);
        EXPECT(gbc.pc(), 0x79eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01C7
        gbc.setState(0xede1, 0xd233, 0x6c90, 0x5070, 0xb1c7, 0xbbc5, 0x0, 0x1);
        gbc.writeMem(0xede1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xd233);
        EXPECT(gbc.pc(), 0xede3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xede1), 0xcb);
        EXPECT(gbc.readMem(0xede2), 0xf);
        // CB 0F 01C8
        gbc.setState(0xc21d, 0xca0, 0xec20, 0x6b02, 0xe4c0, 0xabb7, 0x0, 0x0);
        gbc.writeMem(0xc21d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xca0);
        EXPECT(gbc.pc(), 0xc21f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc21d), 0xcb);
        EXPECT(gbc.readMem(0xc21e), 0xf);
        // CB 0F 01C9
        gbc.setState(0x5629, 0x1c49, 0x7290, 0x123a, 0x931b, 0x6d92, 0x1, 0x0);
        gbc.writeMem(0x5629, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x1c49);
        EXPECT(gbc.pc(), 0x562b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01CA
        gbc.setState(0xc256, 0x618c, 0x7c00, 0x18a7, 0x99f7, 0x4998, 0x1, 0x0);
        gbc.writeMem(0xc256, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x618c);
        EXPECT(gbc.pc(), 0xc258);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc256), 0xcb);
        EXPECT(gbc.readMem(0xc257), 0xf);
        // CB 0F 01CB
        gbc.setState(0xd16a, 0x8e09, 0xeaf0, 0xab94, 0x10c9, 0x9b7c, 0x0, 0x0);
        gbc.writeMem(0xd16a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x8e09);
        EXPECT(gbc.pc(), 0xd16c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd16a), 0xcb);
        EXPECT(gbc.readMem(0xd16b), 0xf);
        // CB 0F 01CC
        gbc.setState(0xdbe0, 0xe7a6, 0x2c30, 0x203e, 0x1ae3, 0xffeb, 0x0, 0x0);
        gbc.writeMem(0xdbe0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xe7a6);
        EXPECT(gbc.pc(), 0xdbe2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbe0), 0xcb);
        EXPECT(gbc.readMem(0xdbe1), 0xf);
        // CB 0F 01CD
        gbc.setState(0x42dc, 0x277c, 0xb0e0, 0x7c7c, 0xae6c, 0xdafb, 0x0, 0x0);
        gbc.writeMem(0x42dc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x277c);
        EXPECT(gbc.pc(), 0x42de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01CE
        gbc.setState(0x1fd8, 0xc5a, 0xf780, 0x6388, 0xc386, 0xe250, 0x1, 0x1);
        gbc.writeMem(0x1fd8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xc5a);
        EXPECT(gbc.pc(), 0x1fda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01CF
        gbc.setState(0x7159, 0x6d1e, 0x7750, 0xcdd4, 0xe638, 0xcfcc, 0x1, 0x1);
        gbc.writeMem(0x7159, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x6d1e);
        EXPECT(gbc.pc(), 0x715b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01D0
        gbc.setState(0xcf8b, 0x7ced, 0xfde0, 0x515c, 0x50ce, 0x8cc1, 0x1, 0x0);
        gbc.writeMem(0xcf8b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x7ced);
        EXPECT(gbc.pc(), 0xcf8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf8b), 0xcb);
        EXPECT(gbc.readMem(0xcf8c), 0xf);
        // CB 0F 01D1
        gbc.setState(0xcbde, 0xde0b, 0x3540, 0x5191, 0x7aae, 0xce1d, 0x1, 0x1);
        gbc.writeMem(0xcbde, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xde0b);
        EXPECT(gbc.pc(), 0xcbe0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbde), 0xcb);
        EXPECT(gbc.readMem(0xcbdf), 0xf);
        // CB 0F 01D2
        gbc.setState(0x6e0e, 0xf008, 0xe9b0, 0x4758, 0x62e2, 0xa5de, 0x1, 0x1);
        gbc.writeMem(0x6e0e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xf008);
        EXPECT(gbc.pc(), 0x6e10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01D3
        gbc.setState(0xdd47, 0x7f02, 0xaec0, 0xdcfd, 0x692c, 0x863b, 0x0, 0x1);
        gbc.writeMem(0xdd47, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x7f02);
        EXPECT(gbc.pc(), 0xdd49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd47), 0xcb);
        EXPECT(gbc.readMem(0xdd48), 0xf);
        // CB 0F 01D4
        gbc.setState(0xb1ab, 0xd711, 0x2050, 0xec41, 0x3c3a, 0xe116, 0x0, 0x1);
        gbc.writeMem(0xb1ab, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xd711);
        EXPECT(gbc.pc(), 0xb1ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1ab), 0xcb);
        EXPECT(gbc.readMem(0xb1ac), 0xf);
        // CB 0F 01D5
        gbc.setState(0x973, 0x4813, 0xa820, 0x80a3, 0x3afd, 0x9145, 0x1, 0x1);
        gbc.writeMem(0x973, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x4813);
        EXPECT(gbc.pc(), 0x975);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01D6
        gbc.setState(0xb40c, 0x2abb, 0xf880, 0x19bd, 0x41f0, 0x1bb8, 0x1, 0x1);
        gbc.writeMem(0xb40c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x2abb);
        EXPECT(gbc.pc(), 0xb40e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb40c), 0xcb);
        EXPECT(gbc.readMem(0xb40d), 0xf);
        // CB 0F 01D7
        gbc.setState(0x4917, 0x57b9, 0x57b0, 0xb19e, 0x67d, 0x25a2, 0x1, 0x0);
        gbc.writeMem(0x4917, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x57b9);
        EXPECT(gbc.pc(), 0x4919);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01D8
        gbc.setState(0x35a9, 0xa503, 0x2530, 0x4e67, 0xc00b, 0x64d9, 0x0, 0x0);
        gbc.writeMem(0x35a9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xa503);
        EXPECT(gbc.pc(), 0x35ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01D9
        gbc.setState(0x6fbf, 0xaf8c, 0x5d60, 0xe103, 0xc38, 0x411b, 0x0, 0x0);
        gbc.writeMem(0x6fbf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xaf8c);
        EXPECT(gbc.pc(), 0x6fc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01DA
        gbc.setState(0x5ca2, 0x1588, 0xcb30, 0x726, 0x28a, 0xa8dc, 0x1, 0x1);
        gbc.writeMem(0x5ca2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x1588);
        EXPECT(gbc.pc(), 0x5ca4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01DB
        gbc.setState(0xa8e6, 0x7211, 0xc9b0, 0x39fa, 0x7636, 0x5f95, 0x0, 0x1);
        gbc.writeMem(0xa8e6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x7211);
        EXPECT(gbc.pc(), 0xa8e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8e6), 0xcb);
        EXPECT(gbc.readMem(0xa8e7), 0xf);
        // CB 0F 01DC
        gbc.setState(0x4b79, 0x726d, 0x4790, 0xac56, 0xa56e, 0x2acf, 0x1, 0x0);
        gbc.writeMem(0x4b79, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x726d);
        EXPECT(gbc.pc(), 0x4b7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01DD
        gbc.setState(0x1999, 0x709d, 0x350, 0x5b01, 0xf919, 0xa6d4, 0x0, 0x0);
        gbc.writeMem(0x1999, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x709d);
        EXPECT(gbc.pc(), 0x199b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01DE
        gbc.setState(0x8e69, 0x96a3, 0x8320, 0x9476, 0xb1e0, 0xeb46, 0x0, 0x0);
        gbc.writeMem(0x8e69, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x96a3);
        EXPECT(gbc.pc(), 0x8e6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e69), 0xcb);
        EXPECT(gbc.readMem(0x8e6a), 0xf);
        // CB 0F 01DF
        gbc.setState(0x4db3, 0xe8ae, 0x4920, 0x1ee9, 0x7838, 0x84c6, 0x0, 0x1);
        gbc.writeMem(0x4db3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xe8ae);
        EXPECT(gbc.pc(), 0x4db5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01E0
        gbc.setState(0x44a9, 0xa242, 0xcc80, 0xf77f, 0x8289, 0x1d72, 0x0, 0x0);
        gbc.writeMem(0x44a9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xa242);
        EXPECT(gbc.pc(), 0x44ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01E1
        gbc.setState(0x5d66, 0x6535, 0x2840, 0xa095, 0xdd29, 0xf58c, 0x0, 0x1);
        gbc.writeMem(0x5d66, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x6535);
        EXPECT(gbc.pc(), 0x5d68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01E2
        gbc.setState(0xde9f, 0x5d94, 0x6940, 0x6518, 0x211b, 0x1b1f, 0x1, 0x0);
        gbc.writeMem(0xde9f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x5d94);
        EXPECT(gbc.pc(), 0xdea1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde9f), 0xcb);
        EXPECT(gbc.readMem(0xdea0), 0xf);
        // CB 0F 01E3
        gbc.setState(0x1ee3, 0x7485, 0xc7f0, 0x1758, 0x3785, 0xbd05, 0x0, 0x1);
        gbc.writeMem(0x1ee3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x7485);
        EXPECT(gbc.pc(), 0x1ee5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01E4
        gbc.setState(0xa71b, 0x356d, 0x43f0, 0xe3a0, 0xcfa6, 0x5b0c, 0x0, 0x0);
        gbc.writeMem(0xa71b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x356d);
        EXPECT(gbc.pc(), 0xa71d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa71b), 0xcb);
        EXPECT(gbc.readMem(0xa71c), 0xf);
        // CB 0F 01E5
        gbc.setState(0x5347, 0x7d22, 0x9d0, 0x421f, 0xb79f, 0xd190, 0x1, 0x1);
        gbc.writeMem(0x5347, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x7d22);
        EXPECT(gbc.pc(), 0x5349);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01E6
        gbc.setState(0x2acd, 0x2a6f, 0xf6c0, 0x4756, 0xc7ba, 0x8676, 0x0, 0x1);
        gbc.writeMem(0x2acd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x2a6f);
        EXPECT(gbc.pc(), 0x2acf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01E7
        gbc.setState(0x9636, 0x1fa4, 0x4770, 0xaec, 0xb970, 0x6a63, 0x1, 0x1);
        gbc.writeMem(0x9636, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1fa4);
        EXPECT(gbc.pc(), 0x9638);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9636), 0xcb);
        EXPECT(gbc.readMem(0x9637), 0xf);
        // CB 0F 01E8
        gbc.setState(0x159b, 0x700a, 0x41e0, 0x2cbc, 0xf47a, 0xa9f1, 0x0, 0x0);
        gbc.writeMem(0x159b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x700a);
        EXPECT(gbc.pc(), 0x159d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01E9
        gbc.setState(0x1d23, 0x2e57, 0xdca0, 0x9afa, 0x6903, 0x45ea, 0x0, 0x1);
        gbc.writeMem(0x1d23, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x2e57);
        EXPECT(gbc.pc(), 0x1d25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01EC
        gbc.setState(0x471d, 0xe25d, 0xa820, 0x31be, 0x107b, 0xcd69, 0x0, 0x1);
        gbc.writeMem(0x471d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe25d);
        EXPECT(gbc.pc(), 0x471f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01EE
        gbc.setState(0x849e, 0x8bf4, 0xbda0, 0xc33e, 0x95ea, 0x511b, 0x0, 0x1);
        gbc.writeMem(0x849e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x8bf4);
        EXPECT(gbc.pc(), 0x84a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x849e), 0xcb);
        EXPECT(gbc.readMem(0x849f), 0xf);
        // CB 0F 01EF
        gbc.setState(0xcb5, 0x1038, 0x8c30, 0x6782, 0xfcd5, 0x65e0, 0x0, 0x1);
        gbc.writeMem(0xcb5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x1038);
        EXPECT(gbc.pc(), 0xcb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01F0
        gbc.setState(0xbd49, 0x661d, 0x3850, 0xcc7c, 0x866e, 0xfed0, 0x1, 0x0);
        gbc.writeMem(0xbd49, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x661d);
        EXPECT(gbc.pc(), 0xbd4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd49), 0xcb);
        EXPECT(gbc.readMem(0xbd4a), 0xf);
        // CB 0F 01F1
        gbc.setState(0x2602, 0xae6, 0x4030, 0x8858, 0xe7e8, 0x9254, 0x0, 0x0);
        gbc.writeMem(0x2602, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xae6);
        EXPECT(gbc.pc(), 0x2604);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01F2
        gbc.setState(0x937f, 0xe7f, 0x3ce0, 0x776e, 0xf760, 0x2943, 0x1, 0x1);
        gbc.writeMem(0x937f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xe7f);
        EXPECT(gbc.pc(), 0x9381);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x937f), 0xcb);
        EXPECT(gbc.readMem(0x9380), 0xf);
        // CB 0F 01F3
        gbc.setState(0xb86a, 0xdbb4, 0x6d90, 0x1ce7, 0x86da, 0xac41, 0x1, 0x0);
        gbc.writeMem(0xb86a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xdbb4);
        EXPECT(gbc.pc(), 0xb86c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb86a), 0xcb);
        EXPECT(gbc.readMem(0xb86b), 0xf);
        // CB 0F 01F4
        gbc.setState(0x7250, 0xce20, 0x2460, 0xfa0b, 0x1c63, 0xfce0, 0x0, 0x1);
        gbc.writeMem(0x7250, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xce20);
        EXPECT(gbc.pc(), 0x7252);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01F5
        gbc.setState(0xe951, 0xb57, 0x4000, 0x4c5f, 0x4249, 0x5474, 0x0, 0x1);
        gbc.writeMem(0xe951, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xb57);
        EXPECT(gbc.pc(), 0xe953);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe951), 0xcb);
        EXPECT(gbc.readMem(0xe952), 0xf);
        // CB 0F 01F6
        gbc.setState(0x3d4e, 0x56c8, 0xb630, 0x2ed, 0xf2d6, 0x8eed, 0x0, 0x0);
        gbc.writeMem(0x3d4e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x56c8);
        EXPECT(gbc.pc(), 0x3d50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01F7
        gbc.setState(0x8b0c, 0x84fe, 0x4630, 0xc52b, 0x3e85, 0x5c98, 0x1, 0x0);
        gbc.writeMem(0x8b0c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x84fe);
        EXPECT(gbc.pc(), 0x8b0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b0c), 0xcb);
        EXPECT(gbc.readMem(0x8b0d), 0xf);
        // CB 0F 01F8
        gbc.setState(0xa2d3, 0x8ff6, 0x9890, 0x73ab, 0x6d77, 0x96ae, 0x1, 0x1);
        gbc.writeMem(0xa2d3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x8ff6);
        EXPECT(gbc.pc(), 0xa2d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2d3), 0xcb);
        EXPECT(gbc.readMem(0xa2d4), 0xf);
        // CB 0F 01F9
        gbc.setState(0x5702, 0xffd8, 0xae10, 0xd, 0x80fd, 0xf96e, 0x0, 0x0);
        gbc.writeMem(0x5702, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xffd8);
        EXPECT(gbc.pc(), 0x5704);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01FA
        gbc.setState(0x86a9, 0x53dc, 0xda40, 0x4679, 0xfb49, 0x607a, 0x1, 0x1);
        gbc.writeMem(0x86a9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x53dc);
        EXPECT(gbc.pc(), 0x86ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86a9), 0xcb);
        EXPECT(gbc.readMem(0x86aa), 0xf);
        // CB 0F 01FB
        gbc.setState(0x60be, 0xda72, 0xd920, 0xaae9, 0x74d7, 0x9bfc, 0x1, 0x0);
        gbc.writeMem(0x60be, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xda72);
        EXPECT(gbc.pc(), 0x60c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 01FC
        gbc.setState(0x685, 0xb30a, 0x1a60, 0x95ba, 0x3168, 0x45ae, 0x1, 0x1);
        gbc.writeMem(0x685, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xb30a);
        EXPECT(gbc.pc(), 0x687);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 01FD
        gbc.setState(0x85b1, 0x5a2f, 0xe810, 0xfe79, 0x32c7, 0x696, 0x0, 0x0);
        gbc.writeMem(0x85b1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x5a2f);
        EXPECT(gbc.pc(), 0x85b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85b1), 0xcb);
        EXPECT(gbc.readMem(0x85b2), 0xf);
        // CB 0F 01FE
        gbc.setState(0x9709, 0xaf81, 0x9b40, 0x386c, 0x5e1, 0xd253, 0x0, 0x0);
        gbc.writeMem(0x9709, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xaf81);
        EXPECT(gbc.pc(), 0x970b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9709), 0xcb);
        EXPECT(gbc.readMem(0x970a), 0xf);
        // CB 0F 01FF
        gbc.setState(0xca44, 0x18ff, 0xefb0, 0x3286, 0xe2f8, 0xe7d9, 0x0, 0x0);
        gbc.writeMem(0xca44, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x18ff);
        EXPECT(gbc.pc(), 0xca46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca44), 0xcb);
        EXPECT(gbc.readMem(0xca45), 0xf);
        // CB 0F 0200
        gbc.setState(0x7ec4, 0x7922, 0x13d0, 0x14e1, 0xe625, 0x7b4f, 0x1, 0x1);
        gbc.writeMem(0x7ec4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x7922);
        EXPECT(gbc.pc(), 0x7ec6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0201
        gbc.setState(0xd0ce, 0x1911, 0x5b30, 0xba6b, 0x21cd, 0x265f, 0x0, 0x0);
        gbc.writeMem(0xd0ce, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x1911);
        EXPECT(gbc.pc(), 0xd0d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0ce), 0xcb);
        EXPECT(gbc.readMem(0xd0cf), 0xf);
        // CB 0F 0202
        gbc.setState(0x5606, 0x7130, 0xcc00, 0x28c3, 0x89d9, 0x6061, 0x1, 0x1);
        gbc.writeMem(0x5606, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x7130);
        EXPECT(gbc.pc(), 0x5608);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0203
        gbc.setState(0x9528, 0x9ce7, 0xc230, 0xa688, 0x607c, 0x82b, 0x1, 0x0);
        gbc.writeMem(0x9528, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x9ce7);
        EXPECT(gbc.pc(), 0x952a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9528), 0xcb);
        EXPECT(gbc.readMem(0x9529), 0xf);
        // CB 0F 0204
        gbc.setState(0x28ec, 0x3bdd, 0xad80, 0x7357, 0xdc72, 0xc007, 0x1, 0x0);
        gbc.writeMem(0x28ec, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x3bdd);
        EXPECT(gbc.pc(), 0x28ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0205
        gbc.setState(0x9025, 0xee57, 0xb20, 0x70f0, 0xdf39, 0x2fcc, 0x1, 0x1);
        gbc.writeMem(0x9025, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xee57);
        EXPECT(gbc.pc(), 0x9027);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9025), 0xcb);
        EXPECT(gbc.readMem(0x9026), 0xf);
        // CB 0F 0206
        gbc.setState(0x60d8, 0x81e9, 0xa130, 0x6c59, 0x6619, 0x1349, 0x1, 0x1);
        gbc.writeMem(0x60d8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x81e9);
        EXPECT(gbc.pc(), 0x60da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0207
        gbc.setState(0x70e0, 0xa2bc, 0x2410, 0x7006, 0x5f4d, 0x4f9c, 0x1, 0x0);
        gbc.writeMem(0x70e0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xa2bc);
        EXPECT(gbc.pc(), 0x70e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0209
        gbc.setState(0x4f37, 0xbfba, 0x2590, 0x4df5, 0xa7c8, 0xb7c, 0x1, 0x1);
        gbc.writeMem(0x4f37, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xbfba);
        EXPECT(gbc.pc(), 0x4f39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 020A
        gbc.setState(0x80a8, 0xb5e8, 0x310, 0xb74d, 0x8671, 0xe594, 0x0, 0x0);
        gbc.writeMem(0x80a8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xb5e8);
        EXPECT(gbc.pc(), 0x80aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80a8), 0xcb);
        EXPECT(gbc.readMem(0x80a9), 0xf);
        // CB 0F 020B
        gbc.setState(0x78e, 0x59cd, 0xabc0, 0xaace, 0x96e, 0xb10a, 0x0, 0x0);
        gbc.writeMem(0x78e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x59cd);
        EXPECT(gbc.pc(), 0x790);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 020C
        gbc.setState(0x65d, 0x3de2, 0xa900, 0x9315, 0xf077, 0x9d7c, 0x1, 0x1);
        gbc.writeMem(0x65d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x3de2);
        EXPECT(gbc.pc(), 0x65f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 020D
        gbc.setState(0x66, 0xa869, 0x8020, 0xd4f8, 0xd742, 0xef52, 0x1, 0x1);
        gbc.writeMem(0x66, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xa869);
        EXPECT(gbc.pc(), 0x68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 020E
        gbc.setState(0x273d, 0x5e51, 0xda30, 0xdf84, 0xd16e, 0xa575, 0x1, 0x0);
        gbc.writeMem(0x273d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x5e51);
        EXPECT(gbc.pc(), 0x273f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 020F
        gbc.setState(0x7e5c, 0x1fb1, 0x80f0, 0xd3a1, 0x20d6, 0x644b, 0x1, 0x0);
        gbc.writeMem(0x7e5c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x1fb1);
        EXPECT(gbc.pc(), 0x7e5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0210
        gbc.setState(0xc0b7, 0x8ed5, 0xd3b0, 0x972e, 0x9ef5, 0xe256, 0x1, 0x1);
        gbc.writeMem(0xc0b7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8ed5);
        EXPECT(gbc.pc(), 0xc0b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0b7), 0xcb);
        EXPECT(gbc.readMem(0xc0b8), 0xf);
        // CB 0F 0211
        gbc.setState(0x75a6, 0xd799, 0xe230, 0x7455, 0x1052, 0xc6c9, 0x1, 0x0);
        gbc.writeMem(0x75a6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xd799);
        EXPECT(gbc.pc(), 0x75a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0212
        gbc.setState(0x963f, 0xfe5a, 0xc450, 0xa43a, 0xb5b1, 0x8da3, 0x0, 0x1);
        gbc.writeMem(0x963f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xfe5a);
        EXPECT(gbc.pc(), 0x9641);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x963f), 0xcb);
        EXPECT(gbc.readMem(0x9640), 0xf);
        // CB 0F 0213
        gbc.setState(0x2d19, 0xfe5b, 0xfdc0, 0x4492, 0x6400, 0x4153, 0x1, 0x0);
        gbc.writeMem(0x2d19, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xfe5b);
        EXPECT(gbc.pc(), 0x2d1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0215
        gbc.setState(0x975b, 0x200f, 0x7610, 0xe504, 0x757a, 0x7a12, 0x0, 0x1);
        gbc.writeMem(0x975b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x200f);
        EXPECT(gbc.pc(), 0x975d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x975b), 0xcb);
        EXPECT(gbc.readMem(0x975c), 0xf);
        // CB 0F 0216
        gbc.setState(0x6159, 0x7740, 0xd330, 0xaa9d, 0x9bb7, 0xaef1, 0x0, 0x1);
        gbc.writeMem(0x6159, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x7740);
        EXPECT(gbc.pc(), 0x615b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0217
        gbc.setState(0x5781, 0x3070, 0x9940, 0x5577, 0x802d, 0x7200, 0x1, 0x1);
        gbc.writeMem(0x5781, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x3070);
        EXPECT(gbc.pc(), 0x5783);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0218
        gbc.setState(0x3e40, 0x2b93, 0xbce0, 0x2057, 0xd477, 0xfcf3, 0x0, 0x0);
        gbc.writeMem(0x3e40, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x2b93);
        EXPECT(gbc.pc(), 0x3e42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0219
        gbc.setState(0x1b33, 0x4fb9, 0xc540, 0xa369, 0xa9f6, 0xb6d0, 0x0, 0x1);
        gbc.writeMem(0x1b33, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x4fb9);
        EXPECT(gbc.pc(), 0x1b35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 021A
        gbc.setState(0x86b3, 0x9d08, 0xddf0, 0x49ff, 0x9f2a, 0x3e62, 0x1, 0x1);
        gbc.writeMem(0x86b3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x9d08);
        EXPECT(gbc.pc(), 0x86b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86b3), 0xcb);
        EXPECT(gbc.readMem(0x86b4), 0xf);
        // CB 0F 021B
        gbc.setState(0x91a1, 0xa93c, 0xc7d0, 0x1357, 0xad79, 0x5bf4, 0x1, 0x1);
        gbc.writeMem(0x91a1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xa93c);
        EXPECT(gbc.pc(), 0x91a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91a1), 0xcb);
        EXPECT(gbc.readMem(0x91a2), 0xf);
        // CB 0F 021C
        gbc.setState(0x8285, 0x6148, 0xdc10, 0xfea1, 0x36ad, 0xffdf, 0x0, 0x0);
        gbc.writeMem(0x8285, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x6148);
        EXPECT(gbc.pc(), 0x8287);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8285), 0xcb);
        EXPECT(gbc.readMem(0x8286), 0xf);
        // CB 0F 021D
        gbc.setState(0x1107, 0xe8da, 0x16d0, 0x3bdc, 0xff0b, 0x44a, 0x1, 0x0);
        gbc.writeMem(0x1107, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xe8da);
        EXPECT(gbc.pc(), 0x1109);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 021E
        gbc.setState(0x7b33, 0xb03, 0x1d50, 0x1007, 0x36b7, 0xbc59, 0x1, 0x1);
        gbc.writeMem(0x7b33, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xb03);
        EXPECT(gbc.pc(), 0x7b35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 021F
        gbc.setState(0x1df1, 0x3b4f, 0x80, 0x77dc, 0xa862, 0xca9b, 0x1, 0x0);
        gbc.writeMem(0x1df1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x3b4f);
        EXPECT(gbc.pc(), 0x1df3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0220
        gbc.setState(0xb6e0, 0x2ad, 0x900, 0xb93, 0x18b5, 0x7b32, 0x0, 0x0);
        gbc.writeMem(0xb6e0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x2ad);
        EXPECT(gbc.pc(), 0xb6e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6e0), 0xcb);
        EXPECT(gbc.readMem(0xb6e1), 0xf);
        // CB 0F 0221
        gbc.setState(0x2b45, 0x61a7, 0xcf10, 0x77e4, 0xb967, 0xe56f, 0x0, 0x0);
        gbc.writeMem(0x2b45, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x61a7);
        EXPECT(gbc.pc(), 0x2b47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0222
        gbc.setState(0x441c, 0x89bb, 0x5010, 0x41e0, 0x3485, 0x87f3, 0x0, 0x1);
        gbc.writeMem(0x441c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x89bb);
        EXPECT(gbc.pc(), 0x441e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0223
        gbc.setState(0x20fb, 0xc3d6, 0xeb20, 0x1f95, 0x76e3, 0x978, 0x1, 0x1);
        gbc.writeMem(0x20fb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xc3d6);
        EXPECT(gbc.pc(), 0x20fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0224
        gbc.setState(0xdb65, 0xde79, 0xd1b0, 0x3400, 0x6eb4, 0xc358, 0x0, 0x1);
        gbc.writeMem(0xdb65, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xde79);
        EXPECT(gbc.pc(), 0xdb67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb65), 0xcb);
        EXPECT(gbc.readMem(0xdb66), 0xf);
        // CB 0F 0225
        gbc.setState(0x9040, 0x62a3, 0x3aa0, 0xe479, 0x4056, 0x5d35, 0x0, 0x1);
        gbc.writeMem(0x9040, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x62a3);
        EXPECT(gbc.pc(), 0x9042);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9040), 0xcb);
        EXPECT(gbc.readMem(0x9041), 0xf);
        // CB 0F 0226
        gbc.setState(0x5c99, 0xfbe9, 0x5720, 0xf7fc, 0x136b, 0x7c69, 0x1, 0x0);
        gbc.writeMem(0x5c99, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xfbe9);
        EXPECT(gbc.pc(), 0x5c9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0227
        gbc.setState(0xa570, 0x3b93, 0xd430, 0xb935, 0xc837, 0xd768, 0x1, 0x1);
        gbc.writeMem(0xa570, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x3b93);
        EXPECT(gbc.pc(), 0xa572);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa570), 0xcb);
        EXPECT(gbc.readMem(0xa571), 0xf);
        // CB 0F 0228
        gbc.setState(0x368f, 0x3468, 0x780, 0xc5e4, 0x75f6, 0x734a, 0x1, 0x1);
        gbc.writeMem(0x368f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x3468);
        EXPECT(gbc.pc(), 0x3691);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0229
        gbc.setState(0xb833, 0xe3cd, 0x1220, 0xf0bd, 0x9da0, 0x8491, 0x0, 0x1);
        gbc.writeMem(0xb833, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xe3cd);
        EXPECT(gbc.pc(), 0xb835);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb833), 0xcb);
        EXPECT(gbc.readMem(0xb834), 0xf);
        // CB 0F 022A
        gbc.setState(0x4c10, 0x8167, 0x3640, 0x7dc7, 0x4271, 0xb7db, 0x0, 0x0);
        gbc.writeMem(0x4c10, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x8167);
        EXPECT(gbc.pc(), 0x4c12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 022B
        gbc.setState(0xb475, 0x60ca, 0xb680, 0x74ac, 0x2bf6, 0x7b1a, 0x0, 0x0);
        gbc.writeMem(0xb475, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x60ca);
        EXPECT(gbc.pc(), 0xb477);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb475), 0xcb);
        EXPECT(gbc.readMem(0xb476), 0xf);
        // CB 0F 022C
        gbc.setState(0xeca, 0x1cb, 0x3ce0, 0xef53, 0xb05c, 0xcf97, 0x1, 0x0);
        gbc.writeMem(0xeca, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x1cb);
        EXPECT(gbc.pc(), 0xecc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 022D
        gbc.setState(0x5596, 0x3e96, 0x2640, 0xacef, 0xf5b0, 0xde35, 0x0, 0x1);
        gbc.writeMem(0x5596, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x3e96);
        EXPECT(gbc.pc(), 0x5598);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 022F
        gbc.setState(0x8104, 0xaad9, 0xfbb0, 0x31f3, 0x3e70, 0x4d69, 0x0, 0x0);
        gbc.writeMem(0x8104, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xaad9);
        EXPECT(gbc.pc(), 0x8106);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8104), 0xcb);
        EXPECT(gbc.readMem(0x8105), 0xf);
        // CB 0F 0230
        gbc.setState(0xdda6, 0x6e05, 0x9830, 0xef8f, 0xc5f, 0xd00b, 0x1, 0x1);
        gbc.writeMem(0xdda6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x6e05);
        EXPECT(gbc.pc(), 0xdda8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdda6), 0xcb);
        EXPECT(gbc.readMem(0xdda7), 0xf);
        // CB 0F 0231
        gbc.setState(0x3b9c, 0x48df, 0xd9a0, 0x3964, 0xcaed, 0x6605, 0x0, 0x0);
        gbc.writeMem(0x3b9c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x48df);
        EXPECT(gbc.pc(), 0x3b9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0233
        gbc.setState(0x7e14, 0x3352, 0x5ba0, 0x2345, 0x8967, 0xf01e, 0x1, 0x1);
        gbc.writeMem(0x7e14, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x3352);
        EXPECT(gbc.pc(), 0x7e16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0234
        gbc.setState(0x2979, 0x41be, 0x4200, 0x521d, 0xac5f, 0x82c8, 0x1, 0x1);
        gbc.writeMem(0x2979, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x41be);
        EXPECT(gbc.pc(), 0x297b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0235
        gbc.setState(0x1ba0, 0x1606, 0x45a0, 0x2426, 0xd467, 0x259d, 0x0, 0x0);
        gbc.writeMem(0x1ba0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x1606);
        EXPECT(gbc.pc(), 0x1ba2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0236
        gbc.setState(0xebeb, 0xcab, 0xe60, 0xeece, 0x2095, 0x7fa5, 0x0, 0x1);
        gbc.writeMem(0xebeb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xcab);
        EXPECT(gbc.pc(), 0xebed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebeb), 0xcb);
        EXPECT(gbc.readMem(0xebec), 0xf);
        // CB 0F 0237
        gbc.setState(0xc173, 0x8cde, 0x7830, 0xba65, 0xc02e, 0x5150, 0x1, 0x0);
        gbc.writeMem(0xc173, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x8cde);
        EXPECT(gbc.pc(), 0xc175);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc173), 0xcb);
        EXPECT(gbc.readMem(0xc174), 0xf);
        // CB 0F 0238
        gbc.setState(0xecb4, 0x8d7d, 0x4a90, 0x5b98, 0x1617, 0xd673, 0x1, 0x0);
        gbc.writeMem(0xecb4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x8d7d);
        EXPECT(gbc.pc(), 0xecb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecb4), 0xcb);
        EXPECT(gbc.readMem(0xecb5), 0xf);
        // CB 0F 0239
        gbc.setState(0xdc0, 0xd9d4, 0xff00, 0x4d28, 0xa486, 0x7172, 0x1, 0x1);
        gbc.writeMem(0xdc0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xd9d4);
        EXPECT(gbc.pc(), 0xdc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 023A
        gbc.setState(0x5a70, 0x3a07, 0xa680, 0x42c, 0x9096, 0x8202, 0x1, 0x0);
        gbc.writeMem(0x5a70, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x3a07);
        EXPECT(gbc.pc(), 0x5a72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 023B
        gbc.setState(0x7af7, 0x1c97, 0x5f90, 0x5c3e, 0x16e2, 0x304f, 0x1, 0x1);
        gbc.writeMem(0x7af7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x1c97);
        EXPECT(gbc.pc(), 0x7af9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 023C
        gbc.setState(0x30a4, 0xaaff, 0x6ec0, 0x6dc5, 0x28f0, 0x1991, 0x1, 0x0);
        gbc.writeMem(0x30a4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xaaff);
        EXPECT(gbc.pc(), 0x30a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 023D
        gbc.setState(0x3f3e, 0xf626, 0x30e0, 0xb800, 0xf87d, 0xb816, 0x1, 0x0);
        gbc.writeMem(0x3f3e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xf626);
        EXPECT(gbc.pc(), 0x3f40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 023E
        gbc.setState(0x88cc, 0xf7f3, 0xebc0, 0xad90, 0x385a, 0x6198, 0x0, 0x1);
        gbc.writeMem(0x88cc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xf7f3);
        EXPECT(gbc.pc(), 0x88ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88cc), 0xcb);
        EXPECT(gbc.readMem(0x88cd), 0xf);
        // CB 0F 023F
        gbc.setState(0xc1a7, 0xc4ab, 0x130, 0xe666, 0xaff6, 0xfaa1, 0x0, 0x0);
        gbc.writeMem(0xc1a7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xc4ab);
        EXPECT(gbc.pc(), 0xc1a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1a7), 0xcb);
        EXPECT(gbc.readMem(0xc1a8), 0xf);
        // CB 0F 0240
        gbc.setState(0x1572, 0xf210, 0x3730, 0x2d1f, 0x45dd, 0xb714, 0x1, 0x0);
        gbc.writeMem(0x1572, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xf210);
        EXPECT(gbc.pc(), 0x1574);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0241
        gbc.setState(0x60, 0xec67, 0xb6c0, 0x363c, 0xfc4d, 0xd3ce, 0x1, 0x0);
        gbc.writeMem(0x60, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xec67);
        EXPECT(gbc.pc(), 0x62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0242
        gbc.setState(0x4f5e, 0x5e92, 0xa8e0, 0xa173, 0x64f7, 0x3de2, 0x0, 0x1);
        gbc.writeMem(0x4f5e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x5e92);
        EXPECT(gbc.pc(), 0x4f60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0243
        gbc.setState(0x10fd, 0x8c24, 0xe560, 0x543, 0x22e8, 0xad31, 0x1, 0x1);
        gbc.writeMem(0x10fd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x8c24);
        EXPECT(gbc.pc(), 0x10ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0244
        gbc.setState(0xc9c2, 0xd7c7, 0x7f0, 0x6df1, 0xe585, 0xdfcf, 0x1, 0x1);
        gbc.writeMem(0xc9c2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xd7c7);
        EXPECT(gbc.pc(), 0xc9c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9c2), 0xcb);
        EXPECT(gbc.readMem(0xc9c3), 0xf);
        // CB 0F 0245
        gbc.setState(0xa08, 0x3d49, 0x8890, 0xd664, 0x2ca1, 0x228e, 0x0, 0x1);
        gbc.writeMem(0xa08, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x3d49);
        EXPECT(gbc.pc(), 0xa0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0246
        gbc.setState(0x1254, 0x3e73, 0x9db0, 0xba24, 0x2b89, 0x9cf5, 0x0, 0x0);
        gbc.writeMem(0x1254, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x3e73);
        EXPECT(gbc.pc(), 0x1256);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0247
        gbc.setState(0xeec5, 0x5f8d, 0xe6e0, 0xda98, 0xe91d, 0xddd5, 0x1, 0x0);
        gbc.writeMem(0xeec5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x5f8d);
        EXPECT(gbc.pc(), 0xeec7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeec5), 0xcb);
        EXPECT(gbc.readMem(0xeec6), 0xf);
        // CB 0F 0248
        gbc.setState(0x96ca, 0x8200, 0x6ce0, 0xc454, 0xbe07, 0x1144, 0x0, 0x0);
        gbc.writeMem(0x96ca, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x8200);
        EXPECT(gbc.pc(), 0x96cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96ca), 0xcb);
        EXPECT(gbc.readMem(0x96cb), 0xf);
        // CB 0F 024A
        gbc.setState(0x3e3c, 0x37c3, 0xe150, 0x5457, 0x2d72, 0xd58, 0x0, 0x1);
        gbc.writeMem(0x3e3c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x37c3);
        EXPECT(gbc.pc(), 0x3e3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 024B
        gbc.setState(0x2d3d, 0x2df3, 0xe640, 0xc188, 0x96a8, 0xc79f, 0x0, 0x0);
        gbc.writeMem(0x2d3d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x2df3);
        EXPECT(gbc.pc(), 0x2d3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 024C
        gbc.setState(0x1a18, 0xc9f7, 0xc220, 0x8d, 0x279c, 0x8f20, 0x1, 0x1);
        gbc.writeMem(0x1a18, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xc9f7);
        EXPECT(gbc.pc(), 0x1a1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 024D
        gbc.setState(0x3473, 0x673d, 0x7360, 0xabb2, 0xab4e, 0x2db9, 0x0, 0x1);
        gbc.writeMem(0x3473, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x673d);
        EXPECT(gbc.pc(), 0x3475);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 024E
        gbc.setState(0xdae7, 0x86bc, 0xbe60, 0xc40b, 0xd081, 0x64fb, 0x1, 0x1);
        gbc.writeMem(0xdae7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x86bc);
        EXPECT(gbc.pc(), 0xdae9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdae7), 0xcb);
        EXPECT(gbc.readMem(0xdae8), 0xf);
        // CB 0F 024F
        gbc.setState(0xea3c, 0xfce6, 0x2920, 0x8df1, 0x9962, 0xc715, 0x1, 0x1);
        gbc.writeMem(0xea3c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xfce6);
        EXPECT(gbc.pc(), 0xea3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea3c), 0xcb);
        EXPECT(gbc.readMem(0xea3d), 0xf);
        // CB 0F 0250
        gbc.setState(0x7ac3, 0x137d, 0xd990, 0x54a4, 0xba39, 0xfda8, 0x0, 0x0);
        gbc.writeMem(0x7ac3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x137d);
        EXPECT(gbc.pc(), 0x7ac5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0251
        gbc.setState(0x79ee, 0xaec1, 0x3a60, 0x8ef2, 0x1db9, 0xd7e7, 0x1, 0x1);
        gbc.writeMem(0x79ee, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xaec1);
        EXPECT(gbc.pc(), 0x79f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0252
        gbc.setState(0xd142, 0x4888, 0xbc50, 0xf632, 0x5d1d, 0xb345, 0x1, 0x0);
        gbc.writeMem(0xd142, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x4888);
        EXPECT(gbc.pc(), 0xd144);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd142), 0xcb);
        EXPECT(gbc.readMem(0xd143), 0xf);
        // CB 0F 0253
        gbc.setState(0x7ffc, 0x2a45, 0xf740, 0x5ad3, 0xbcd4, 0xe291, 0x1, 0x1);
        gbc.writeMem(0x7ffc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x2a45);
        EXPECT(gbc.pc(), 0x7ffe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0254
        gbc.setState(0xf50, 0x3720, 0xdf00, 0x209f, 0xc2a3, 0x4bde, 0x0, 0x0);
        gbc.writeMem(0xf50, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x3720);
        EXPECT(gbc.pc(), 0xf52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0255
        gbc.setState(0x1edf, 0x494a, 0x2250, 0x8792, 0x7970, 0xf419, 0x0, 0x1);
        gbc.writeMem(0x1edf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x494a);
        EXPECT(gbc.pc(), 0x1ee1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0256
        gbc.setState(0x6c4d, 0x95a1, 0x7330, 0xb291, 0x318d, 0x5e, 0x1, 0x0);
        gbc.writeMem(0x6c4d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x95a1);
        EXPECT(gbc.pc(), 0x6c4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0257
        gbc.setState(0xeaf6, 0x663d, 0x4490, 0x8767, 0x9a7b, 0x174a, 0x0, 0x0);
        gbc.writeMem(0xeaf6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x663d);
        EXPECT(gbc.pc(), 0xeaf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaf6), 0xcb);
        EXPECT(gbc.readMem(0xeaf7), 0xf);
        // CB 0F 0259
        gbc.setState(0x351a, 0x5ec9, 0x9900, 0xa898, 0x3206, 0x6d45, 0x1, 0x1);
        gbc.writeMem(0x351a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x5ec9);
        EXPECT(gbc.pc(), 0x351c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 025A
        gbc.setState(0xb43, 0x696, 0xef60, 0x296b, 0x8b60, 0x8f75, 0x1, 0x0);
        gbc.writeMem(0xb43, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x696);
        EXPECT(gbc.pc(), 0xb45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 025B
        gbc.setState(0x229f, 0x6cde, 0x7da0, 0x45bd, 0xeac4, 0x4c72, 0x1, 0x0);
        gbc.writeMem(0x229f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x6cde);
        EXPECT(gbc.pc(), 0x22a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 025C
        gbc.setState(0x79b3, 0xfa2e, 0xae90, 0x4bd7, 0xc7d2, 0x3a5c, 0x1, 0x1);
        gbc.writeMem(0x79b3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xfa2e);
        EXPECT(gbc.pc(), 0x79b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 025D
        gbc.setState(0x6d5, 0xfce1, 0x1080, 0xedb2, 0xb2a4, 0x3de7, 0x1, 0x0);
        gbc.writeMem(0x6d5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xfce1);
        EXPECT(gbc.pc(), 0x6d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 025E
        gbc.setState(0x8a6, 0x4b0b, 0xc490, 0xd758, 0x8677, 0xb671, 0x1, 0x1);
        gbc.writeMem(0x8a6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x4b0b);
        EXPECT(gbc.pc(), 0x8a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 025F
        gbc.setState(0x4f7c, 0x6697, 0xe5f0, 0x7509, 0xbdaf, 0x4b3a, 0x0, 0x1);
        gbc.writeMem(0x4f7c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x6697);
        EXPECT(gbc.pc(), 0x4f7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0260
        gbc.setState(0x5f0, 0x8d09, 0x19e0, 0x7a9a, 0x9233, 0x2a43, 0x0, 0x1);
        gbc.writeMem(0x5f0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x8d09);
        EXPECT(gbc.pc(), 0x5f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0261
        gbc.setState(0x7a72, 0x5c9c, 0xa50, 0x74b1, 0x9edc, 0xef05, 0x0, 0x1);
        gbc.writeMem(0x7a72, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x5c9c);
        EXPECT(gbc.pc(), 0x7a74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0262
        gbc.setState(0xdc93, 0xab5f, 0xcf0, 0x7dcb, 0xf9c8, 0x4997, 0x1, 0x0);
        gbc.writeMem(0xdc93, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xab5f);
        EXPECT(gbc.pc(), 0xdc95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc93), 0xcb);
        EXPECT(gbc.readMem(0xdc94), 0xf);
        // CB 0F 0263
        gbc.setState(0x9d74, 0xa8d0, 0x6f70, 0x94ec, 0x9713, 0xa216, 0x0, 0x0);
        gbc.writeMem(0x9d74, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xa8d0);
        EXPECT(gbc.pc(), 0x9d76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d74), 0xcb);
        EXPECT(gbc.readMem(0x9d75), 0xf);
        // CB 0F 0264
        gbc.setState(0xb463, 0x99d1, 0xd0a0, 0x3f3d, 0xe793, 0xad0, 0x1, 0x0);
        gbc.writeMem(0xb463, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x99d1);
        EXPECT(gbc.pc(), 0xb465);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb463), 0xcb);
        EXPECT(gbc.readMem(0xb464), 0xf);
        // CB 0F 0265
        gbc.setState(0x2758, 0x278f, 0x45c0, 0xc026, 0x9a20, 0xdd1b, 0x0, 0x1);
        gbc.writeMem(0x2758, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x278f);
        EXPECT(gbc.pc(), 0x275a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0266
        gbc.setState(0x68a7, 0xd625, 0x41f0, 0xe64b, 0xb576, 0xc93, 0x1, 0x1);
        gbc.writeMem(0x68a7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xd625);
        EXPECT(gbc.pc(), 0x68a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0267
        gbc.setState(0x19df, 0xb4f5, 0x34e0, 0xa5d4, 0x7391, 0x2bfc, 0x0, 0x1);
        gbc.writeMem(0x19df, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xb4f5);
        EXPECT(gbc.pc(), 0x19e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0268
        gbc.setState(0xba12, 0x50a2, 0xbaa0, 0x4f0b, 0x6764, 0xa6e7, 0x0, 0x1);
        gbc.writeMem(0xba12, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x50a2);
        EXPECT(gbc.pc(), 0xba14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba12), 0xcb);
        EXPECT(gbc.readMem(0xba13), 0xf);
        // CB 0F 0269
        gbc.setState(0x740e, 0x9b2, 0xeae0, 0x2821, 0x5bf3, 0x8537, 0x0, 0x0);
        gbc.writeMem(0x740e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x9b2);
        EXPECT(gbc.pc(), 0x7410);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 026A
        gbc.setState(0x5e5a, 0x2f6d, 0x5fe0, 0x40ba, 0x262a, 0x51f8, 0x0, 0x0);
        gbc.writeMem(0x5e5a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x2f6d);
        EXPECT(gbc.pc(), 0x5e5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 026B
        gbc.setState(0x73b, 0xc4b8, 0xc380, 0x89a1, 0x78b1, 0x5b73, 0x1, 0x0);
        gbc.writeMem(0x73b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xc4b8);
        EXPECT(gbc.pc(), 0x73d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 026C
        gbc.setState(0x7a6d, 0x22ee, 0xcee0, 0xced0, 0xd85, 0xe8be, 0x1, 0x0);
        gbc.writeMem(0x7a6d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x22ee);
        EXPECT(gbc.pc(), 0x7a6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 026D
        gbc.setState(0x5563, 0xd071, 0xe400, 0x6dfe, 0x4262, 0x1804, 0x1, 0x0);
        gbc.writeMem(0x5563, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xd071);
        EXPECT(gbc.pc(), 0x5565);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 026E
        gbc.setState(0x683b, 0x8d46, 0x1b00, 0xf320, 0x3175, 0xf376, 0x1, 0x1);
        gbc.writeMem(0x683b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x8d46);
        EXPECT(gbc.pc(), 0x683d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 026F
        gbc.setState(0x74d, 0xfc6d, 0xba50, 0x89bd, 0x28ab, 0xcb0f, 0x1, 0x1);
        gbc.writeMem(0x74d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xfc6d);
        EXPECT(gbc.pc(), 0x74f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0270
        gbc.setState(0x9379, 0x5e48, 0x5ac0, 0x35e9, 0x7025, 0x2f55, 0x0, 0x1);
        gbc.writeMem(0x9379, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x5e48);
        EXPECT(gbc.pc(), 0x937b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9379), 0xcb);
        EXPECT(gbc.readMem(0x937a), 0xf);
        // CB 0F 0272
        gbc.setState(0x6096, 0x22f6, 0x760, 0xfddb, 0xa069, 0x95dd, 0x0, 0x1);
        gbc.writeMem(0x6096, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x22f6);
        EXPECT(gbc.pc(), 0x6098);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0273
        gbc.setState(0xb75f, 0xc38e, 0x1fa0, 0xe952, 0x69e8, 0xd74d, 0x1, 0x1);
        gbc.writeMem(0xb75f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xc38e);
        EXPECT(gbc.pc(), 0xb761);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb75f), 0xcb);
        EXPECT(gbc.readMem(0xb760), 0xf);
        // CB 0F 0274
        gbc.setState(0xed67, 0x648, 0xbe80, 0x2dde, 0xe04b, 0x61f4, 0x1, 0x0);
        gbc.writeMem(0xed67, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x648);
        EXPECT(gbc.pc(), 0xed69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed67), 0xcb);
        EXPECT(gbc.readMem(0xed68), 0xf);
        // CB 0F 0275
        gbc.setState(0xb06b, 0xd55a, 0x1c0, 0xd4a1, 0x8029, 0x6d3c, 0x0, 0x0);
        gbc.writeMem(0xb06b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xd55a);
        EXPECT(gbc.pc(), 0xb06d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb06b), 0xcb);
        EXPECT(gbc.readMem(0xb06c), 0xf);
        // CB 0F 0276
        gbc.setState(0xe994, 0xefca, 0x8700, 0x9656, 0xe49d, 0xc1e4, 0x1, 0x0);
        gbc.writeMem(0xe994, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xefca);
        EXPECT(gbc.pc(), 0xe996);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe994), 0xcb);
        EXPECT(gbc.readMem(0xe995), 0xf);
        // CB 0F 0277
        gbc.setState(0x3f56, 0x546b, 0x5180, 0x821, 0x8fd5, 0xf2d, 0x1, 0x0);
        gbc.writeMem(0x3f56, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x546b);
        EXPECT(gbc.pc(), 0x3f58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0278
        gbc.setState(0xd3bf, 0xadba, 0x1300, 0xb9c8, 0x8d4, 0x4c38, 0x0, 0x1);
        gbc.writeMem(0xd3bf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xadba);
        EXPECT(gbc.pc(), 0xd3c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3bf), 0xcb);
        EXPECT(gbc.readMem(0xd3c0), 0xf);
        // CB 0F 0279
        gbc.setState(0x2e78, 0xb2db, 0xa4d0, 0x3f9, 0xbf48, 0x7224, 0x1, 0x0);
        gbc.writeMem(0x2e78, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xb2db);
        EXPECT(gbc.pc(), 0x2e7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 027A
        gbc.setState(0xa495, 0x8bb2, 0x1d10, 0x94f4, 0xfc59, 0x4621, 0x1, 0x1);
        gbc.writeMem(0xa495, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x8bb2);
        EXPECT(gbc.pc(), 0xa497);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa495), 0xcb);
        EXPECT(gbc.readMem(0xa496), 0xf);
        // CB 0F 027B
        gbc.setState(0xb9ae, 0x89c0, 0xf080, 0x16b2, 0x4d96, 0xf47c, 0x1, 0x1);
        gbc.writeMem(0xb9ae, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x89c0);
        EXPECT(gbc.pc(), 0xb9b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9ae), 0xcb);
        EXPECT(gbc.readMem(0xb9af), 0xf);
        // CB 0F 027C
        gbc.setState(0x20a4, 0x3b7f, 0x9a20, 0x2ab1, 0x36bb, 0x842b, 0x0, 0x0);
        gbc.writeMem(0x20a4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x3b7f);
        EXPECT(gbc.pc(), 0x20a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 027D
        gbc.setState(0x35a3, 0xef30, 0xb380, 0x53fe, 0xa41f, 0x1cf0, 0x0, 0x1);
        gbc.writeMem(0x35a3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xef30);
        EXPECT(gbc.pc(), 0x35a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 027E
        gbc.setState(0x46ee, 0xd7f4, 0x6fa0, 0x8d21, 0x1c42, 0xe63, 0x0, 0x0);
        gbc.writeMem(0x46ee, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xd7f4);
        EXPECT(gbc.pc(), 0x46f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 027F
        gbc.setState(0x28a0, 0x44fd, 0x40b0, 0x1ff8, 0x7ab3, 0x804f, 0x0, 0x1);
        gbc.writeMem(0x28a0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x44fd);
        EXPECT(gbc.pc(), 0x28a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0281
        gbc.setState(0x204e, 0xa419, 0xb300, 0x7c16, 0xf3e4, 0xa47f, 0x0, 0x0);
        gbc.writeMem(0x204e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xa419);
        EXPECT(gbc.pc(), 0x2050);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0282
        gbc.setState(0xa881, 0x9ec1, 0xfae0, 0x776, 0x3d5f, 0x5ed6, 0x1, 0x0);
        gbc.writeMem(0xa881, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x9ec1);
        EXPECT(gbc.pc(), 0xa883);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa881), 0xcb);
        EXPECT(gbc.readMem(0xa882), 0xf);
        // CB 0F 0283
        gbc.setState(0xeab9, 0x511, 0xec50, 0x3da6, 0x5b35, 0x69db, 0x1, 0x1);
        gbc.writeMem(0xeab9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x511);
        EXPECT(gbc.pc(), 0xeabb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeab9), 0xcb);
        EXPECT(gbc.readMem(0xeaba), 0xf);
        // CB 0F 0284
        gbc.setState(0x8148, 0x30c8, 0x85c0, 0xe432, 0xe0cb, 0xfc75, 0x0, 0x1);
        gbc.writeMem(0x8148, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x30c8);
        EXPECT(gbc.pc(), 0x814a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8148), 0xcb);
        EXPECT(gbc.readMem(0x8149), 0xf);
        // CB 0F 0285
        gbc.setState(0x7a0e, 0xee77, 0xaec0, 0xaed9, 0xd028, 0xefb1, 0x0, 0x1);
        gbc.writeMem(0x7a0e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xee77);
        EXPECT(gbc.pc(), 0x7a10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0286
        gbc.setState(0xa443, 0x57a5, 0x91e0, 0x945a, 0x5b25, 0xbb2b, 0x0, 0x1);
        gbc.writeMem(0xa443, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x57a5);
        EXPECT(gbc.pc(), 0xa445);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa443), 0xcb);
        EXPECT(gbc.readMem(0xa444), 0xf);
        // CB 0F 0287
        gbc.setState(0x4ebb, 0xfd70, 0x57c0, 0x3bb4, 0xa5b7, 0xa591, 0x0, 0x1);
        gbc.writeMem(0x4ebb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xfd70);
        EXPECT(gbc.pc(), 0x4ebd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0288
        gbc.setState(0x8478, 0xd0b8, 0xf5a0, 0xd699, 0x8b21, 0x3be3, 0x1, 0x0);
        gbc.writeMem(0x8478, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xd0b8);
        EXPECT(gbc.pc(), 0x847a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8478), 0xcb);
        EXPECT(gbc.readMem(0x8479), 0xf);
        // CB 0F 0289
        gbc.setState(0x506b, 0x6016, 0x8620, 0xb6cd, 0x760a, 0xb9f4, 0x0, 0x0);
        gbc.writeMem(0x506b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x6016);
        EXPECT(gbc.pc(), 0x506d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 028A
        gbc.setState(0x58fa, 0xab75, 0xecd0, 0x24c1, 0x5f64, 0x397, 0x0, 0x1);
        gbc.writeMem(0x58fa, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xab75);
        EXPECT(gbc.pc(), 0x58fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 028B
        gbc.setState(0x8a71, 0x9427, 0x86a0, 0xe07f, 0xcaca, 0xb628, 0x1, 0x0);
        gbc.writeMem(0x8a71, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x9427);
        EXPECT(gbc.pc(), 0x8a73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a71), 0xcb);
        EXPECT(gbc.readMem(0x8a72), 0xf);
        // CB 0F 028C
        gbc.setState(0xbed9, 0x2ca, 0xd20, 0x449e, 0xbb37, 0xd81b, 0x0, 0x0);
        gbc.writeMem(0xbed9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x2ca);
        EXPECT(gbc.pc(), 0xbedb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbed9), 0xcb);
        EXPECT(gbc.readMem(0xbeda), 0xf);
        // CB 0F 028D
        gbc.setState(0xafd8, 0x3abd, 0xa690, 0xb94e, 0xa83c, 0x3527, 0x1, 0x0);
        gbc.writeMem(0xafd8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x3abd);
        EXPECT(gbc.pc(), 0xafda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafd8), 0xcb);
        EXPECT(gbc.readMem(0xafd9), 0xf);
        // CB 0F 028E
        gbc.setState(0xde10, 0x7be6, 0xb500, 0xc10, 0xef84, 0x5557, 0x0, 0x0);
        gbc.writeMem(0xde10, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x7be6);
        EXPECT(gbc.pc(), 0xde12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde10), 0xcb);
        EXPECT(gbc.readMem(0xde11), 0xf);
        // CB 0F 028F
        gbc.setState(0x577f, 0x62d3, 0x1560, 0x39b7, 0xfcf6, 0x8462, 0x1, 0x0);
        gbc.writeMem(0x577f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x62d3);
        EXPECT(gbc.pc(), 0x5781);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0290
        gbc.setState(0xeb8a, 0x542e, 0xc0, 0x57f8, 0x814c, 0xd514, 0x1, 0x1);
        gbc.writeMem(0xeb8a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x542e);
        EXPECT(gbc.pc(), 0xeb8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb8a), 0xcb);
        EXPECT(gbc.readMem(0xeb8b), 0xf);
        // CB 0F 0292
        gbc.setState(0x92ae, 0x97fb, 0x7400, 0xd3a3, 0x3b6d, 0x4488, 0x1, 0x0);
        gbc.writeMem(0x92ae, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x97fb);
        EXPECT(gbc.pc(), 0x92b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92ae), 0xcb);
        EXPECT(gbc.readMem(0x92af), 0xf);
        // CB 0F 0293
        gbc.setState(0x19fd, 0x2a64, 0xcba0, 0x14fd, 0x967b, 0xda83, 0x0, 0x1);
        gbc.writeMem(0x19fd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x2a64);
        EXPECT(gbc.pc(), 0x19ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0294
        gbc.setState(0xe946, 0xef6b, 0x1320, 0x916a, 0x2fd0, 0xe657, 0x0, 0x0);
        gbc.writeMem(0xe946, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xef6b);
        EXPECT(gbc.pc(), 0xe948);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe946), 0xcb);
        EXPECT(gbc.readMem(0xe947), 0xf);
        // CB 0F 0295
        gbc.setState(0x98dd, 0x2df, 0xebb0, 0x9809, 0x822d, 0x95e, 0x1, 0x0);
        gbc.writeMem(0x98dd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x2df);
        EXPECT(gbc.pc(), 0x98df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98dd), 0xcb);
        EXPECT(gbc.readMem(0x98de), 0xf);
        // CB 0F 0296
        gbc.setState(0xbfc6, 0x2101, 0x6d10, 0x7f94, 0xd74, 0x94d6, 0x1, 0x0);
        gbc.writeMem(0xbfc6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x2101);
        EXPECT(gbc.pc(), 0xbfc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfc6), 0xcb);
        EXPECT(gbc.readMem(0xbfc7), 0xf);
        // CB 0F 0297
        gbc.setState(0x38c9, 0xef2b, 0x1e30, 0x3687, 0xfb40, 0x71d3, 0x1, 0x1);
        gbc.writeMem(0x38c9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xef2b);
        EXPECT(gbc.pc(), 0x38cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0298
        gbc.setState(0xb4ea, 0x7778, 0x8d60, 0x1e59, 0xbf20, 0x8f3b, 0x1, 0x0);
        gbc.writeMem(0xb4ea, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x7778);
        EXPECT(gbc.pc(), 0xb4ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4ea), 0xcb);
        EXPECT(gbc.readMem(0xb4eb), 0xf);
        // CB 0F 0299
        gbc.setState(0x813, 0xe175, 0xec0, 0xaa21, 0x2a20, 0xc46c, 0x0, 0x1);
        gbc.writeMem(0x813, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xe175);
        EXPECT(gbc.pc(), 0x815);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 029A
        gbc.setState(0xa674, 0xdbb, 0xf940, 0x38ff, 0xff31, 0x41cd, 0x0, 0x1);
        gbc.writeMem(0xa674, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xdbb);
        EXPECT(gbc.pc(), 0xa676);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa674), 0xcb);
        EXPECT(gbc.readMem(0xa675), 0xf);
        // CB 0F 029B
        gbc.setState(0xc18e, 0x26fd, 0xfcf0, 0x14ca, 0x4dc2, 0x2091, 0x0, 0x0);
        gbc.writeMem(0xc18e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x26fd);
        EXPECT(gbc.pc(), 0xc190);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc18e), 0xcb);
        EXPECT(gbc.readMem(0xc18f), 0xf);
        // CB 0F 029C
        gbc.setState(0x24df, 0xb80, 0xc470, 0x5e8a, 0x6b5b, 0x5f51, 0x1, 0x0);
        gbc.writeMem(0x24df, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xb80);
        EXPECT(gbc.pc(), 0x24e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 029D
        gbc.setState(0x36fa, 0xe397, 0xdb0, 0xa82d, 0x27d9, 0x82d, 0x1, 0x0);
        gbc.writeMem(0x36fa, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xe397);
        EXPECT(gbc.pc(), 0x36fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 029E
        gbc.setState(0x8502, 0xd3e4, 0x4a10, 0xb479, 0xe408, 0xd35d, 0x0, 0x0);
        gbc.writeMem(0x8502, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xd3e4);
        EXPECT(gbc.pc(), 0x8504);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8502), 0xcb);
        EXPECT(gbc.readMem(0x8503), 0xf);
        // CB 0F 029F
        gbc.setState(0x3264, 0x388c, 0x6f60, 0x3592, 0x1868, 0x3cb3, 0x0, 0x0);
        gbc.writeMem(0x3264, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x388c);
        EXPECT(gbc.pc(), 0x3266);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02A0
        gbc.setState(0x2a46, 0xb61a, 0x1c50, 0x76f0, 0x86d5, 0x3e3, 0x1, 0x0);
        gbc.writeMem(0x2a46, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xb61a);
        EXPECT(gbc.pc(), 0x2a48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02A1
        gbc.setState(0x3299, 0x4802, 0x280, 0x9ce2, 0xa98b, 0xa2d2, 0x1, 0x1);
        gbc.writeMem(0x3299, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x4802);
        EXPECT(gbc.pc(), 0x329b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02A2
        gbc.setState(0x2c08, 0xaf, 0x25d0, 0x7bd, 0x6444, 0xae5e, 0x1, 0x0);
        gbc.writeMem(0x2c08, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xaf);
        EXPECT(gbc.pc(), 0x2c0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02A3
        gbc.setState(0xcee1, 0xa197, 0xa80, 0x13d4, 0x6615, 0xbfa9, 0x1, 0x1);
        gbc.writeMem(0xcee1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xa197);
        EXPECT(gbc.pc(), 0xcee3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcee1), 0xcb);
        EXPECT(gbc.readMem(0xcee2), 0xf);
        // CB 0F 02A4
        gbc.setState(0x2965, 0xc7ac, 0x85b0, 0x5d1b, 0x4b8c, 0x73b7, 0x1, 0x1);
        gbc.writeMem(0x2965, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xc7ac);
        EXPECT(gbc.pc(), 0x2967);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02A5
        gbc.setState(0x1d5c, 0x1cc, 0xe2a0, 0x4ffe, 0x9b8, 0x6afb, 0x0, 0x1);
        gbc.writeMem(0x1d5c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x1cc);
        EXPECT(gbc.pc(), 0x1d5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02A6
        gbc.setState(0x20ff, 0xd2e, 0x4fa0, 0xdb8b, 0x8038, 0xccc1, 0x0, 0x0);
        gbc.writeMem(0x20ff, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xd2e);
        EXPECT(gbc.pc(), 0x2101);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02A7
        gbc.setState(0xb02c, 0xa457, 0xca20, 0xc0d0, 0x5f55, 0x152d, 0x1, 0x1);
        gbc.writeMem(0xb02c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xa457);
        EXPECT(gbc.pc(), 0xb02e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb02c), 0xcb);
        EXPECT(gbc.readMem(0xb02d), 0xf);
        // CB 0F 02A8
        gbc.setState(0x23ea, 0x4f99, 0x1e50, 0xa2d, 0xe1d5, 0xc2ae, 0x1, 0x1);
        gbc.writeMem(0x23ea, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x4f99);
        EXPECT(gbc.pc(), 0x23ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02A9
        gbc.setState(0xe3a3, 0x82d0, 0x7c70, 0xc857, 0xfea8, 0xed6c, 0x0, 0x1);
        gbc.writeMem(0xe3a3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x82d0);
        EXPECT(gbc.pc(), 0xe3a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3a3), 0xcb);
        EXPECT(gbc.readMem(0xe3a4), 0xf);
        // CB 0F 02AA
        gbc.setState(0x69e8, 0xb8b9, 0x8120, 0xed93, 0x642, 0x28a, 0x0, 0x0);
        gbc.writeMem(0x69e8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xb8b9);
        EXPECT(gbc.pc(), 0x69ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02AB
        gbc.setState(0x1540, 0xb9fe, 0xccf0, 0xdc7d, 0x8358, 0x6e64, 0x0, 0x0);
        gbc.writeMem(0x1540, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xb9fe);
        EXPECT(gbc.pc(), 0x1542);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02AC
        gbc.setState(0x8106, 0x1fba, 0x7750, 0xfff9, 0x5b43, 0xd366, 0x1, 0x0);
        gbc.writeMem(0x8106, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x1fba);
        EXPECT(gbc.pc(), 0x8108);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8106), 0xcb);
        EXPECT(gbc.readMem(0x8107), 0xf);
        // CB 0F 02AD
        gbc.setState(0x719f, 0x23d9, 0xd2d0, 0x38e5, 0x2d67, 0xff0b, 0x0, 0x1);
        gbc.writeMem(0x719f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x23d9);
        EXPECT(gbc.pc(), 0x71a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02AE
        gbc.setState(0x4c4f, 0xd712, 0xc280, 0x1368, 0x1c07, 0xbc1a, 0x0, 0x1);
        gbc.writeMem(0x4c4f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xd712);
        EXPECT(gbc.pc(), 0x4c51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02AF
        gbc.setState(0x2adc, 0x470f, 0x5530, 0xd840, 0x2d1f, 0xfa3, 0x1, 0x1);
        gbc.writeMem(0x2adc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x470f);
        EXPECT(gbc.pc(), 0x2ade);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02B0
        gbc.setState(0x2fac, 0x8f6b, 0x3e70, 0xd511, 0x28ff, 0x2d4e, 0x0, 0x0);
        gbc.writeMem(0x2fac, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x8f6b);
        EXPECT(gbc.pc(), 0x2fae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02B1
        gbc.setState(0xbea2, 0xfd36, 0x70e0, 0x94d4, 0x5674, 0x81f9, 0x1, 0x0);
        gbc.writeMem(0xbea2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xfd36);
        EXPECT(gbc.pc(), 0xbea4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbea2), 0xcb);
        EXPECT(gbc.readMem(0xbea3), 0xf);
        // CB 0F 02B2
        gbc.setState(0xda7b, 0xe6f7, 0x9f40, 0x5ebf, 0xdaf7, 0x85aa, 0x0, 0x0);
        gbc.writeMem(0xda7b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xe6f7);
        EXPECT(gbc.pc(), 0xda7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda7b), 0xcb);
        EXPECT(gbc.readMem(0xda7c), 0xf);
        // CB 0F 02B3
        gbc.setState(0x85ff, 0xc79a, 0x1bd0, 0xbff2, 0xac08, 0x3650, 0x0, 0x0);
        gbc.writeMem(0x85ff, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xc79a);
        EXPECT(gbc.pc(), 0x8601);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85ff), 0xcb);
        EXPECT(gbc.readMem(0x8600), 0xf);
        // CB 0F 02B4
        gbc.setState(0x3334, 0x7656, 0xdb30, 0x5709, 0x1ad6, 0xb6c6, 0x0, 0x1);
        gbc.writeMem(0x3334, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x7656);
        EXPECT(gbc.pc(), 0x3336);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02B5
        gbc.setState(0xa369, 0x6902, 0x99d0, 0x3e29, 0xcf14, 0x428e, 0x0, 0x0);
        gbc.writeMem(0xa369, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x6902);
        EXPECT(gbc.pc(), 0xa36b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa369), 0xcb);
        EXPECT(gbc.readMem(0xa36a), 0xf);
        // CB 0F 02B6
        gbc.setState(0xe51c, 0xc75a, 0x9630, 0xf7fe, 0x365e, 0x5372, 0x0, 0x0);
        gbc.writeMem(0xe51c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xc75a);
        EXPECT(gbc.pc(), 0xe51e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe51c), 0xcb);
        EXPECT(gbc.readMem(0xe51d), 0xf);
        // CB 0F 02B7
        gbc.setState(0x351e, 0x1898, 0xc420, 0x1bd, 0x22c5, 0x5854, 0x0, 0x0);
        gbc.writeMem(0x351e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x1898);
        EXPECT(gbc.pc(), 0x3520);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02B8
        gbc.setState(0x2e28, 0x2b6c, 0x4da0, 0x859f, 0x7e67, 0x97da, 0x1, 0x1);
        gbc.writeMem(0x2e28, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x2b6c);
        EXPECT(gbc.pc(), 0x2e2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02B9
        gbc.setState(0xc2bd, 0x1a3, 0x9560, 0x3720, 0xfacf, 0x59b6, 0x0, 0x1);
        gbc.writeMem(0xc2bd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x1a3);
        EXPECT(gbc.pc(), 0xc2bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2bd), 0xcb);
        EXPECT(gbc.readMem(0xc2be), 0xf);
        // CB 0F 02BA
        gbc.setState(0x64e9, 0x29b, 0xc370, 0x8df1, 0xa9c, 0xb80d, 0x0, 0x1);
        gbc.writeMem(0x64e9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x29b);
        EXPECT(gbc.pc(), 0x64eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02BB
        gbc.setState(0xa15, 0xe940, 0x81f0, 0x7a85, 0x6cfb, 0xfd76, 0x1, 0x0);
        gbc.writeMem(0xa15, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xe940);
        EXPECT(gbc.pc(), 0xa17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02BC
        gbc.setState(0xcf3f, 0xff28, 0x3a70, 0x9880, 0xc6e1, 0x908e, 0x1, 0x1);
        gbc.writeMem(0xcf3f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xff28);
        EXPECT(gbc.pc(), 0xcf41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf3f), 0xcb);
        EXPECT(gbc.readMem(0xcf40), 0xf);
        // CB 0F 02BD
        gbc.setState(0x72f2, 0x45ba, 0x16e0, 0xa4e2, 0xcdc8, 0xd3c9, 0x0, 0x0);
        gbc.writeMem(0x72f2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x45ba);
        EXPECT(gbc.pc(), 0x72f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02BE
        gbc.setState(0xb0f6, 0xe2c, 0x4530, 0x3fab, 0x37c2, 0xf19d, 0x1, 0x0);
        gbc.writeMem(0xb0f6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xe2c);
        EXPECT(gbc.pc(), 0xb0f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0f6), 0xcb);
        EXPECT(gbc.readMem(0xb0f7), 0xf);
        // CB 0F 02BF
        gbc.setState(0x8b74, 0xdc3c, 0xc60, 0x6ab2, 0xe30e, 0x7e08, 0x1, 0x0);
        gbc.writeMem(0x8b74, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xdc3c);
        EXPECT(gbc.pc(), 0x8b76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b74), 0xcb);
        EXPECT(gbc.readMem(0x8b75), 0xf);
        // CB 0F 02C0
        gbc.setState(0x110d, 0xa5e3, 0x1ae0, 0xe4e9, 0x2b41, 0x563f, 0x1, 0x0);
        gbc.writeMem(0x110d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa5e3);
        EXPECT(gbc.pc(), 0x110f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02C1
        gbc.setState(0x5da2, 0xd55d, 0xa540, 0xbbf4, 0xace6, 0x5330, 0x1, 0x0);
        gbc.writeMem(0x5da2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xd55d);
        EXPECT(gbc.pc(), 0x5da4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02C3
        gbc.setState(0x963e, 0x5ec3, 0xe7e0, 0xfbd1, 0xaa47, 0x9035, 0x1, 0x1);
        gbc.writeMem(0x963e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x5ec3);
        EXPECT(gbc.pc(), 0x9640);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x963e), 0xcb);
        EXPECT(gbc.readMem(0x963f), 0xf);
        // CB 0F 02C4
        gbc.setState(0xb732, 0x500, 0x4410, 0x2b64, 0xb928, 0xcd80, 0x0, 0x0);
        gbc.writeMem(0xb732, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x500);
        EXPECT(gbc.pc(), 0xb734);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb732), 0xcb);
        EXPECT(gbc.readMem(0xb733), 0xf);
        // CB 0F 02C5
        gbc.setState(0x57d8, 0xf2fe, 0xfcf0, 0x3f2c, 0x8fdc, 0x66db, 0x1, 0x1);
        gbc.writeMem(0x57d8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xf2fe);
        EXPECT(gbc.pc(), 0x57da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02C6
        gbc.setState(0x4526, 0x1a23, 0xe290, 0xf3ed, 0xe23f, 0x6abc, 0x0, 0x0);
        gbc.writeMem(0x4526, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x1a23);
        EXPECT(gbc.pc(), 0x4528);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02C7
        gbc.setState(0x5b5a, 0xda4, 0x7ab0, 0xfbe2, 0x5b17, 0xb7e7, 0x0, 0x1);
        gbc.writeMem(0x5b5a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xda4);
        EXPECT(gbc.pc(), 0x5b5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02C9
        gbc.setState(0x7480, 0x3c5d, 0x3ff0, 0x2b20, 0xb0c, 0x6589, 0x1, 0x1);
        gbc.writeMem(0x7480, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x3c5d);
        EXPECT(gbc.pc(), 0x7482);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02CB
        gbc.setState(0x8e96, 0x5b, 0x3910, 0x7aac, 0xae76, 0x7b4e, 0x0, 0x1);
        gbc.writeMem(0x8e96, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x5b);
        EXPECT(gbc.pc(), 0x8e98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e96), 0xcb);
        EXPECT(gbc.readMem(0x8e97), 0xf);
        // CB 0F 02CC
        gbc.setState(0xa392, 0x577a, 0x5430, 0xa881, 0xf821, 0x1a1, 0x0, 0x1);
        gbc.writeMem(0xa392, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x577a);
        EXPECT(gbc.pc(), 0xa394);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa392), 0xcb);
        EXPECT(gbc.readMem(0xa393), 0xf);
        // CB 0F 02CD
        gbc.setState(0x3956, 0x4964, 0x5b90, 0xc182, 0xb2b, 0xeac5, 0x1, 0x1);
        gbc.writeMem(0x3956, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x4964);
        EXPECT(gbc.pc(), 0x3958);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02CE
        gbc.setState(0x433f, 0x1ac, 0x6650, 0xacf6, 0xf49d, 0xd572, 0x0, 0x0);
        gbc.writeMem(0x433f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x1ac);
        EXPECT(gbc.pc(), 0x4341);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02CF
        gbc.setState(0xdf4d, 0x13ad, 0x60e0, 0x61f, 0xb64, 0x3d70, 0x1, 0x0);
        gbc.writeMem(0xdf4d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x13ad);
        EXPECT(gbc.pc(), 0xdf4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf4d), 0xcb);
        EXPECT(gbc.readMem(0xdf4e), 0xf);
        // CB 0F 02D0
        gbc.setState(0x4f6d, 0xc3f8, 0x54c0, 0x44bd, 0x7d36, 0x2e40, 0x1, 0x1);
        gbc.writeMem(0x4f6d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xc3f8);
        EXPECT(gbc.pc(), 0x4f6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02D1
        gbc.setState(0xd6ad, 0x26da, 0x1950, 0x32dd, 0x747a, 0x8ee9, 0x1, 0x1);
        gbc.writeMem(0xd6ad, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x26da);
        EXPECT(gbc.pc(), 0xd6af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6ad), 0xcb);
        EXPECT(gbc.readMem(0xd6ae), 0xf);
        // CB 0F 02D2
        gbc.setState(0x72a2, 0xc180, 0xc750, 0x5638, 0x6ddb, 0x89a3, 0x0, 0x1);
        gbc.writeMem(0x72a2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xc180);
        EXPECT(gbc.pc(), 0x72a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02D3
        gbc.setState(0x712c, 0xecd8, 0x47e0, 0xdde7, 0xfd1a, 0x1edd, 0x0, 0x1);
        gbc.writeMem(0x712c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xecd8);
        EXPECT(gbc.pc(), 0x712e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02D5
        gbc.setState(0xdb06, 0xfcaf, 0x9420, 0x8033, 0x7803, 0xaff2, 0x1, 0x1);
        gbc.writeMem(0xdb06, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xfcaf);
        EXPECT(gbc.pc(), 0xdb08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb06), 0xcb);
        EXPECT(gbc.readMem(0xdb07), 0xf);
        // CB 0F 02D6
        gbc.setState(0x3178, 0xd83c, 0xb430, 0xd8d, 0x7fda, 0xfafa, 0x0, 0x0);
        gbc.writeMem(0x3178, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xd83c);
        EXPECT(gbc.pc(), 0x317a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02D7
        gbc.setState(0x8951, 0xe9c4, 0x2e90, 0xb1d1, 0x89b8, 0x9ebf, 0x0, 0x1);
        gbc.writeMem(0x8951, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xe9c4);
        EXPECT(gbc.pc(), 0x8953);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8951), 0xcb);
        EXPECT(gbc.readMem(0x8952), 0xf);
        // CB 0F 02D8
        gbc.setState(0x584d, 0xc0f8, 0x2600, 0x61a0, 0xbeb2, 0x5915, 0x0, 0x1);
        gbc.writeMem(0x584d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xc0f8);
        EXPECT(gbc.pc(), 0x584f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02D9
        gbc.setState(0x35a8, 0xe104, 0xfa00, 0x2bf8, 0x4407, 0x4ee3, 0x0, 0x1);
        gbc.writeMem(0x35a8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xe104);
        EXPECT(gbc.pc(), 0x35aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02DA
        gbc.setState(0x428b, 0xec52, 0xe5c0, 0xfa7, 0x665d, 0xfe0c, 0x1, 0x1);
        gbc.writeMem(0x428b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xec52);
        EXPECT(gbc.pc(), 0x428d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02DB
        gbc.setState(0xaf36, 0xcda8, 0x1a80, 0x9e04, 0x973c, 0xc883, 0x1, 0x1);
        gbc.writeMem(0xaf36, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xcda8);
        EXPECT(gbc.pc(), 0xaf38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf36), 0xcb);
        EXPECT(gbc.readMem(0xaf37), 0xf);
        // CB 0F 02DC
        gbc.setState(0xa304, 0x38ff, 0xa640, 0xe2d2, 0x5cc, 0xd707, 0x1, 0x0);
        gbc.writeMem(0xa304, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x38ff);
        EXPECT(gbc.pc(), 0xa306);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa304), 0xcb);
        EXPECT(gbc.readMem(0xa305), 0xf);
        // CB 0F 02DD
        gbc.setState(0xe7ff, 0x9d50, 0x9010, 0x1d8, 0x5941, 0x24f6, 0x0, 0x1);
        gbc.writeMem(0xe7ff, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x9d50);
        EXPECT(gbc.pc(), 0xe801);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7ff), 0xcb);
        EXPECT(gbc.readMem(0xe800), 0xf);
        // CB 0F 02DE
        gbc.setState(0x70e, 0x4661, 0x74a0, 0xb289, 0xb81e, 0x1dcc, 0x0, 0x1);
        gbc.writeMem(0x70e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x4661);
        EXPECT(gbc.pc(), 0x710);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02DF
        gbc.setState(0xa03a, 0x3a08, 0x8750, 0x63a0, 0xffdb, 0xcb61, 0x0, 0x0);
        gbc.writeMem(0xa03a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x3a08);
        EXPECT(gbc.pc(), 0xa03c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa03a), 0xcb);
        EXPECT(gbc.readMem(0xa03b), 0xf);
        // CB 0F 02E0
        gbc.setState(0xc436, 0x3cfb, 0x69b0, 0x538a, 0xf9ee, 0x3e98, 0x1, 0x0);
        gbc.writeMem(0xc436, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x3cfb);
        EXPECT(gbc.pc(), 0xc438);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc436), 0xcb);
        EXPECT(gbc.readMem(0xc437), 0xf);
        // CB 0F 02E1
        gbc.setState(0x73b9, 0x4e86, 0x5700, 0x7147, 0x5667, 0xb653, 0x1, 0x1);
        gbc.writeMem(0x73b9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x4e86);
        EXPECT(gbc.pc(), 0x73bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02E2
        gbc.setState(0x8ded, 0x8cfb, 0x2950, 0x38c, 0x4904, 0x7bb3, 0x1, 0x1);
        gbc.writeMem(0x8ded, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x8cfb);
        EXPECT(gbc.pc(), 0x8def);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ded), 0xcb);
        EXPECT(gbc.readMem(0x8dee), 0xf);
        // CB 0F 02E3
        gbc.setState(0x7928, 0xdee7, 0xe1d0, 0xa371, 0xc0e9, 0xe5f1, 0x0, 0x1);
        gbc.writeMem(0x7928, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xdee7);
        EXPECT(gbc.pc(), 0x792a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02E4
        gbc.setState(0x73dc, 0xa963, 0xaab0, 0x1c0a, 0x3684, 0xeadb, 0x0, 0x0);
        gbc.writeMem(0x73dc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xa963);
        EXPECT(gbc.pc(), 0x73de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02E5
        gbc.setState(0xdeb5, 0xe08b, 0xb4b0, 0xd055, 0x9739, 0x1ca3, 0x0, 0x1);
        gbc.writeMem(0xdeb5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xe08b);
        EXPECT(gbc.pc(), 0xdeb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeb5), 0xcb);
        EXPECT(gbc.readMem(0xdeb6), 0xf);
        // CB 0F 02E6
        gbc.setState(0x2603, 0x3c3b, 0x2940, 0xc64c, 0xbf94, 0x7c06, 0x0, 0x1);
        gbc.writeMem(0x2603, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x3c3b);
        EXPECT(gbc.pc(), 0x2605);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02E7
        gbc.setState(0x4fa6, 0xa2d7, 0x5460, 0x30cb, 0xf737, 0xcabc, 0x0, 0x1);
        gbc.writeMem(0x4fa6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xa2d7);
        EXPECT(gbc.pc(), 0x4fa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02E8
        gbc.setState(0x3dd0, 0x61c9, 0x94d0, 0x1219, 0x760, 0x539f, 0x0, 0x1);
        gbc.writeMem(0x3dd0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x61c9);
        EXPECT(gbc.pc(), 0x3dd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02E9
        gbc.setState(0xbd74, 0xd15, 0xc640, 0x8afa, 0xaa4, 0x52da, 0x1, 0x1);
        gbc.writeMem(0xbd74, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xd15);
        EXPECT(gbc.pc(), 0xbd76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd74), 0xcb);
        EXPECT(gbc.readMem(0xbd75), 0xf);
        // CB 0F 02EA
        gbc.setState(0xe37a, 0xbe3d, 0xe800, 0x53c8, 0x9ad7, 0x874f, 0x1, 0x0);
        gbc.writeMem(0xe37a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xbe3d);
        EXPECT(gbc.pc(), 0xe37c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe37a), 0xcb);
        EXPECT(gbc.readMem(0xe37b), 0xf);
        // CB 0F 02EB
        gbc.setState(0xdd08, 0x4ceb, 0x16a0, 0x955b, 0xd060, 0x3b48, 0x0, 0x1);
        gbc.writeMem(0xdd08, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x4ceb);
        EXPECT(gbc.pc(), 0xdd0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd08), 0xcb);
        EXPECT(gbc.readMem(0xdd09), 0xf);
        // CB 0F 02EC
        gbc.setState(0x1458, 0x32e8, 0x96d0, 0x6c2f, 0x40ca, 0x68b8, 0x1, 0x1);
        gbc.writeMem(0x1458, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x32e8);
        EXPECT(gbc.pc(), 0x145a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02ED
        gbc.setState(0x693e, 0xb665, 0x9e10, 0x328b, 0x1be7, 0x12ff, 0x0, 0x1);
        gbc.writeMem(0x693e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xb665);
        EXPECT(gbc.pc(), 0x6940);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02EE
        gbc.setState(0xa372, 0x1f85, 0xa340, 0x2877, 0x3b3b, 0xa50d, 0x0, 0x1);
        gbc.writeMem(0xa372, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x1f85);
        EXPECT(gbc.pc(), 0xa374);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa372), 0xcb);
        EXPECT(gbc.readMem(0xa373), 0xf);
        // CB 0F 02EF
        gbc.setState(0xb900, 0xca80, 0x9dd0, 0xebdf, 0x110e, 0x1078, 0x1, 0x1);
        gbc.writeMem(0xb900, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xca80);
        EXPECT(gbc.pc(), 0xb902);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb900), 0xcb);
        EXPECT(gbc.readMem(0xb901), 0xf);
        // CB 0F 02F0
        gbc.setState(0xb68, 0x2122, 0xf680, 0x4fdd, 0x5170, 0x63ec, 0x0, 0x0);
        gbc.writeMem(0xb68, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x2122);
        EXPECT(gbc.pc(), 0xb6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02F1
        gbc.setState(0xd20b, 0x5874, 0xecd0, 0x10a0, 0x2ea3, 0x3dcc, 0x1, 0x0);
        gbc.writeMem(0xd20b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x5874);
        EXPECT(gbc.pc(), 0xd20d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd20b), 0xcb);
        EXPECT(gbc.readMem(0xd20c), 0xf);
        // CB 0F 02F2
        gbc.setState(0x77d9, 0x44d9, 0x6b20, 0xae68, 0xbb85, 0xafd4, 0x0, 0x0);
        gbc.writeMem(0x77d9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x44d9);
        EXPECT(gbc.pc(), 0x77db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02F3
        gbc.setState(0x95eb, 0x926c, 0xd450, 0x6a2b, 0xfbac, 0xdede, 0x1, 0x0);
        gbc.writeMem(0x95eb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x926c);
        EXPECT(gbc.pc(), 0x95ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95eb), 0xcb);
        EXPECT(gbc.readMem(0x95ec), 0xf);
        // CB 0F 02F4
        gbc.setState(0xb397, 0xd6ae, 0x7fd0, 0xc8d1, 0xcd15, 0xa0a1, 0x0, 0x1);
        gbc.writeMem(0xb397, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xd6ae);
        EXPECT(gbc.pc(), 0xb399);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb397), 0xcb);
        EXPECT(gbc.readMem(0xb398), 0xf);
        // CB 0F 02F5
        gbc.setState(0x641e, 0x77d2, 0x9b70, 0x7235, 0xc5f5, 0x5e07, 0x0, 0x0);
        gbc.writeMem(0x641e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x77d2);
        EXPECT(gbc.pc(), 0x6420);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02F7
        gbc.setState(0xdb7c, 0xb13e, 0xf4d0, 0x9d34, 0x9aee, 0x1374, 0x1, 0x1);
        gbc.writeMem(0xdb7c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xb13e);
        EXPECT(gbc.pc(), 0xdb7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb7c), 0xcb);
        EXPECT(gbc.readMem(0xdb7d), 0xf);
        // CB 0F 02F8
        gbc.setState(0x773, 0xc2d1, 0xe600, 0x506c, 0x3179, 0xcc0f, 0x0, 0x0);
        gbc.writeMem(0x773, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xc2d1);
        EXPECT(gbc.pc(), 0x775);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02F9
        gbc.setState(0x1ad2, 0x81fa, 0xce0, 0x2c5, 0xe9db, 0xa1f1, 0x1, 0x1);
        gbc.writeMem(0x1ad2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x81fa);
        EXPECT(gbc.pc(), 0x1ad4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02FA
        gbc.setState(0xe565, 0xc8b8, 0xd960, 0x819a, 0xc4ac, 0x2703, 0x0, 0x1);
        gbc.writeMem(0xe565, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xc8b8);
        EXPECT(gbc.pc(), 0xe567);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe565), 0xcb);
        EXPECT(gbc.readMem(0xe566), 0xf);
        // CB 0F 02FB
        gbc.setState(0xbdf5, 0x240b, 0x5bd0, 0xbad5, 0xe70b, 0x4b64, 0x1, 0x1);
        gbc.writeMem(0xbdf5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x240b);
        EXPECT(gbc.pc(), 0xbdf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdf5), 0xcb);
        EXPECT(gbc.readMem(0xbdf6), 0xf);
        // CB 0F 02FC
        gbc.setState(0xe5c, 0x6b69, 0x1390, 0x12c, 0x25a2, 0xf008, 0x1, 0x0);
        gbc.writeMem(0xe5c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6b69);
        EXPECT(gbc.pc(), 0xe5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02FD
        gbc.setState(0xbd7, 0xbe17, 0xf890, 0x7d18, 0xf21e, 0x948b, 0x0, 0x0);
        gbc.writeMem(0xbd7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xbe17);
        EXPECT(gbc.pc(), 0xbd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 02FE
        gbc.setState(0x28e6, 0x6ccf, 0x1d0, 0x66e4, 0x3101, 0x9a22, 0x0, 0x1);
        gbc.writeMem(0x28e6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x6ccf);
        EXPECT(gbc.pc(), 0x28e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 02FF
        gbc.setState(0x188e, 0x9ad3, 0x3b20, 0xc90b, 0xc899, 0xc0a9, 0x0, 0x0);
        gbc.writeMem(0x188e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x9ad3);
        EXPECT(gbc.pc(), 0x1890);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0300
        gbc.setState(0x38f9, 0x9fa3, 0xd260, 0x4d3d, 0xd1e7, 0xb534, 0x1, 0x1);
        gbc.writeMem(0x38f9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x9fa3);
        EXPECT(gbc.pc(), 0x38fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0301
        gbc.setState(0x58de, 0x465, 0x1050, 0xc6d1, 0x8496, 0x17ac, 0x0, 0x1);
        gbc.writeMem(0x58de, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x465);
        EXPECT(gbc.pc(), 0x58e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0302
        gbc.setState(0x1c94, 0x7984, 0xfa50, 0x1485, 0x36c7, 0x39cd, 0x1, 0x0);
        gbc.writeMem(0x1c94, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x7984);
        EXPECT(gbc.pc(), 0x1c96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0303
        gbc.setState(0xa2b6, 0xb435, 0x7ed0, 0x31c2, 0x4cb1, 0x4454, 0x1, 0x1);
        gbc.writeMem(0xa2b6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xb435);
        EXPECT(gbc.pc(), 0xa2b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2b6), 0xcb);
        EXPECT(gbc.readMem(0xa2b7), 0xf);
        // CB 0F 0304
        gbc.setState(0x71da, 0x955b, 0x8d30, 0xb5e1, 0xab06, 0x24ea, 0x1, 0x1);
        gbc.writeMem(0x71da, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x955b);
        EXPECT(gbc.pc(), 0x71dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0305
        gbc.setState(0xb625, 0xb744, 0x86d0, 0x5f52, 0xaace, 0xcd8b, 0x0, 0x1);
        gbc.writeMem(0xb625, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xb744);
        EXPECT(gbc.pc(), 0xb627);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb625), 0xcb);
        EXPECT(gbc.readMem(0xb626), 0xf);
        // CB 0F 0306
        gbc.setState(0xbd0c, 0x98dc, 0x1510, 0xf51a, 0xf162, 0x77d1, 0x1, 0x1);
        gbc.writeMem(0xbd0c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x98dc);
        EXPECT(gbc.pc(), 0xbd0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd0c), 0xcb);
        EXPECT(gbc.readMem(0xbd0d), 0xf);
        // CB 0F 0307
        gbc.setState(0xae9d, 0xbd35, 0x1a00, 0x594a, 0xb69d, 0xe17a, 0x1, 0x1);
        gbc.writeMem(0xae9d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xbd35);
        EXPECT(gbc.pc(), 0xae9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae9d), 0xcb);
        EXPECT(gbc.readMem(0xae9e), 0xf);
        // CB 0F 0309
        gbc.setState(0xb18f, 0x3c87, 0xc430, 0xf2b6, 0xeea1, 0x59, 0x1, 0x0);
        gbc.writeMem(0xb18f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x3c87);
        EXPECT(gbc.pc(), 0xb191);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb18f), 0xcb);
        EXPECT(gbc.readMem(0xb190), 0xf);
        // CB 0F 030A
        gbc.setState(0x7c1d, 0x86c1, 0xc340, 0x993e, 0x1aee, 0x1438, 0x0, 0x1);
        gbc.writeMem(0x7c1d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x86c1);
        EXPECT(gbc.pc(), 0x7c1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 030B
        gbc.setState(0x9b56, 0xcde2, 0xb100, 0xac68, 0xbc8a, 0x3e0b, 0x1, 0x1);
        gbc.writeMem(0x9b56, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xcde2);
        EXPECT(gbc.pc(), 0x9b58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b56), 0xcb);
        EXPECT(gbc.readMem(0x9b57), 0xf);
        // CB 0F 030C
        gbc.setState(0x58d, 0x37e0, 0x98e0, 0xd30f, 0xfbb7, 0x4de5, 0x0, 0x1);
        gbc.writeMem(0x58d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x37e0);
        EXPECT(gbc.pc(), 0x58f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 030E
        gbc.setState(0x2f0f, 0x5381, 0xde70, 0x91c1, 0x5f17, 0xc132, 0x1, 0x1);
        gbc.writeMem(0x2f0f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x5381);
        EXPECT(gbc.pc(), 0x2f11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 030F
        gbc.setState(0x72bd, 0x2ef1, 0xbaf0, 0x28dd, 0x1e12, 0xf77d, 0x1, 0x0);
        gbc.writeMem(0x72bd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x2ef1);
        EXPECT(gbc.pc(), 0x72bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0310
        gbc.setState(0xd9db, 0xf648, 0x690, 0xaf7f, 0x90be, 0x5808, 0x0, 0x0);
        gbc.writeMem(0xd9db, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xf648);
        EXPECT(gbc.pc(), 0xd9dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9db), 0xcb);
        EXPECT(gbc.readMem(0xd9dc), 0xf);
        // CB 0F 0311
        gbc.setState(0xe5f7, 0xee57, 0x28f0, 0x2879, 0xd0ef, 0xccfb, 0x1, 0x1);
        gbc.writeMem(0xe5f7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xee57);
        EXPECT(gbc.pc(), 0xe5f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5f7), 0xcb);
        EXPECT(gbc.readMem(0xe5f8), 0xf);
        // CB 0F 0312
        gbc.setState(0x689b, 0xa3cb, 0x8b40, 0x3cbc, 0x309d, 0xa1f6, 0x1, 0x1);
        gbc.writeMem(0x689b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xa3cb);
        EXPECT(gbc.pc(), 0x689d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0313
        gbc.setState(0xeada, 0xc523, 0x1e0, 0x4831, 0x78d3, 0xe8f0, 0x0, 0x1);
        gbc.writeMem(0xeada, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xc523);
        EXPECT(gbc.pc(), 0xeadc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeada), 0xcb);
        EXPECT(gbc.readMem(0xeadb), 0xf);
        // CB 0F 0314
        gbc.setState(0x9722, 0x4d9e, 0x8960, 0x5874, 0x95d4, 0x7abb, 0x0, 0x1);
        gbc.writeMem(0x9722, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x4d9e);
        EXPECT(gbc.pc(), 0x9724);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9722), 0xcb);
        EXPECT(gbc.readMem(0x9723), 0xf);
        // CB 0F 0315
        gbc.setState(0xae0, 0xc487, 0x55b0, 0x88c9, 0x983e, 0x8eba, 0x1, 0x1);
        gbc.writeMem(0xae0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xc487);
        EXPECT(gbc.pc(), 0xae2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0316
        gbc.setState(0xcb64, 0xe96b, 0xfae0, 0x6eb6, 0x1567, 0xebdc, 0x0, 0x1);
        gbc.writeMem(0xcb64, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xe96b);
        EXPECT(gbc.pc(), 0xcb66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb64), 0xcb);
        EXPECT(gbc.readMem(0xcb65), 0xf);
        // CB 0F 0317
        gbc.setState(0x9883, 0x6d9, 0xd560, 0xdba2, 0x2d61, 0x2c1e, 0x1, 0x1);
        gbc.writeMem(0x9883, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x6d9);
        EXPECT(gbc.pc(), 0x9885);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9883), 0xcb);
        EXPECT(gbc.readMem(0x9884), 0xf);
        // CB 0F 0318
        gbc.setState(0x2485, 0xfca9, 0x1f60, 0xb184, 0xf820, 0x2c4c, 0x0, 0x1);
        gbc.writeMem(0x2485, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xfca9);
        EXPECT(gbc.pc(), 0x2487);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0319
        gbc.setState(0x3ec3, 0xf7ea, 0xd0b0, 0xa23e, 0x2219, 0xf6e1, 0x1, 0x1);
        gbc.writeMem(0x3ec3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xf7ea);
        EXPECT(gbc.pc(), 0x3ec5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 031A
        gbc.setState(0x8634, 0x66c5, 0x8c30, 0x9294, 0xf5ac, 0x1c68, 0x0, 0x1);
        gbc.writeMem(0x8634, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x66c5);
        EXPECT(gbc.pc(), 0x8636);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8634), 0xcb);
        EXPECT(gbc.readMem(0x8635), 0xf);
        // CB 0F 031B
        gbc.setState(0x3200, 0x8a96, 0x3140, 0xc3db, 0x2459, 0xc4e, 0x1, 0x0);
        gbc.writeMem(0x3200, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x8a96);
        EXPECT(gbc.pc(), 0x3202);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 031C
        gbc.setState(0x62b1, 0x7b00, 0x8d20, 0xcb7a, 0xd03d, 0xdf64, 0x0, 0x1);
        gbc.writeMem(0x62b1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x7b00);
        EXPECT(gbc.pc(), 0x62b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 031D
        gbc.setState(0x18e1, 0xe75b, 0x5760, 0x4e27, 0x36b7, 0x86ee, 0x1, 0x1);
        gbc.writeMem(0x18e1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xe75b);
        EXPECT(gbc.pc(), 0x18e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 031E
        gbc.setState(0x83d2, 0xb1e4, 0x5fd0, 0x302a, 0x7322, 0x1da6, 0x0, 0x1);
        gbc.writeMem(0x83d2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xb1e4);
        EXPECT(gbc.pc(), 0x83d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83d2), 0xcb);
        EXPECT(gbc.readMem(0x83d3), 0xf);
        // CB 0F 031F
        gbc.setState(0x3f31, 0x7d41, 0xff90, 0x4e1a, 0xe4b8, 0xa8df, 0x1, 0x1);
        gbc.writeMem(0x3f31, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x7d41);
        EXPECT(gbc.pc(), 0x3f33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0320
        gbc.setState(0xcf73, 0x57bd, 0xf270, 0x9e4e, 0x658c, 0xfb98, 0x0, 0x0);
        gbc.writeMem(0xcf73, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x57bd);
        EXPECT(gbc.pc(), 0xcf75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf73), 0xcb);
        EXPECT(gbc.readMem(0xcf74), 0xf);
        // CB 0F 0321
        gbc.setState(0x7da9, 0x6421, 0xb3c0, 0x5a3e, 0xd734, 0x3e75, 0x1, 0x1);
        gbc.writeMem(0x7da9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x6421);
        EXPECT(gbc.pc(), 0x7dab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0322
        gbc.setState(0xca8a, 0x55d, 0x5800, 0xc04d, 0x5198, 0xc6e5, 0x1, 0x0);
        gbc.writeMem(0xca8a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x55d);
        EXPECT(gbc.pc(), 0xca8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca8a), 0xcb);
        EXPECT(gbc.readMem(0xca8b), 0xf);
        // CB 0F 0323
        gbc.setState(0x340, 0x6524, 0x8ca0, 0x425d, 0xaef4, 0x43ba, 0x0, 0x0);
        gbc.writeMem(0x340, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x6524);
        EXPECT(gbc.pc(), 0x342);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0324
        gbc.setState(0xdac3, 0x7299, 0xc50, 0xd484, 0xea84, 0x6e80, 0x1, 0x0);
        gbc.writeMem(0xdac3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x7299);
        EXPECT(gbc.pc(), 0xdac5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdac3), 0xcb);
        EXPECT(gbc.readMem(0xdac4), 0xf);
        // CB 0F 0325
        gbc.setState(0xe854, 0xc128, 0xf030, 0xc242, 0x9495, 0xb4ab, 0x1, 0x1);
        gbc.writeMem(0xe854, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xc128);
        EXPECT(gbc.pc(), 0xe856);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe854), 0xcb);
        EXPECT(gbc.readMem(0xe855), 0xf);
        // CB 0F 0327
        gbc.setState(0x6061, 0xa6, 0x61f0, 0x8d61, 0xdbad, 0x4725, 0x1, 0x0);
        gbc.writeMem(0x6061, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xa6);
        EXPECT(gbc.pc(), 0x6063);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0328
        gbc.setState(0x1ab, 0xbdc9, 0x3960, 0xe12a, 0x252, 0xec7c, 0x1, 0x1);
        gbc.writeMem(0x1ab, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xbdc9);
        EXPECT(gbc.pc(), 0x1ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0329
        gbc.setState(0x8548, 0x47d1, 0x3d60, 0x4b02, 0xab19, 0x8b3c, 0x0, 0x0);
        gbc.writeMem(0x8548, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x47d1);
        EXPECT(gbc.pc(), 0x854a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8548), 0xcb);
        EXPECT(gbc.readMem(0x8549), 0xf);
        // CB 0F 032A
        gbc.setState(0xcaf7, 0x5106, 0xcc00, 0x7f97, 0xcdb2, 0x8929, 0x0, 0x0);
        gbc.writeMem(0xcaf7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x5106);
        EXPECT(gbc.pc(), 0xcaf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaf7), 0xcb);
        EXPECT(gbc.readMem(0xcaf8), 0xf);
        // CB 0F 032B
        gbc.setState(0xe0f8, 0x1bef, 0x7e10, 0xee3e, 0xe835, 0xad91, 0x0, 0x0);
        gbc.writeMem(0xe0f8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x1bef);
        EXPECT(gbc.pc(), 0xe0fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0f8), 0xcb);
        EXPECT(gbc.readMem(0xe0f9), 0xf);
        // CB 0F 032C
        gbc.setState(0xfea, 0x1637, 0xf1d0, 0x6e19, 0xda2, 0x5973, 0x1, 0x1);
        gbc.writeMem(0xfea, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x1637);
        EXPECT(gbc.pc(), 0xfec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 032D
        gbc.setState(0x2953, 0x1a96, 0x2810, 0xb10a, 0xd2fd, 0xab93, 0x1, 0x1);
        gbc.writeMem(0x2953, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x1a96);
        EXPECT(gbc.pc(), 0x2955);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 032E
        gbc.setState(0x77ae, 0x6fdf, 0xe3f0, 0x443f, 0x1c96, 0x4a31, 0x0, 0x0);
        gbc.writeMem(0x77ae, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x6fdf);
        EXPECT(gbc.pc(), 0x77b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 032F
        gbc.setState(0xe063, 0x2c90, 0x4f60, 0xa510, 0x1532, 0xd697, 0x0, 0x0);
        gbc.writeMem(0xe063, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x2c90);
        EXPECT(gbc.pc(), 0xe065);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe063), 0xcb);
        EXPECT(gbc.readMem(0xe064), 0xf);
        // CB 0F 0330
        gbc.setState(0x8985, 0x3833, 0x8c90, 0x2d7e, 0xc012, 0xed8b, 0x0, 0x0);
        gbc.writeMem(0x8985, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3833);
        EXPECT(gbc.pc(), 0x8987);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8985), 0xcb);
        EXPECT(gbc.readMem(0x8986), 0xf);
        // CB 0F 0331
        gbc.setState(0x2e24, 0x3921, 0xe6e0, 0x4337, 0x61ec, 0xb1e7, 0x0, 0x0);
        gbc.writeMem(0x2e24, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x3921);
        EXPECT(gbc.pc(), 0x2e26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0332
        gbc.setState(0x9e92, 0xcf7e, 0xd0c0, 0x6c50, 0x7074, 0xfdfa, 0x0, 0x0);
        gbc.writeMem(0x9e92, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xcf7e);
        EXPECT(gbc.pc(), 0x9e94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e92), 0xcb);
        EXPECT(gbc.readMem(0x9e93), 0xf);
        // CB 0F 0333
        gbc.setState(0x154e, 0x7a83, 0x4ce0, 0xa890, 0xb7e2, 0x119f, 0x0, 0x0);
        gbc.writeMem(0x154e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x7a83);
        EXPECT(gbc.pc(), 0x1550);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0334
        gbc.setState(0x84e0, 0x5378, 0xf730, 0x3d34, 0x49f0, 0xe9ab, 0x0, 0x0);
        gbc.writeMem(0x84e0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x5378);
        EXPECT(gbc.pc(), 0x84e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84e0), 0xcb);
        EXPECT(gbc.readMem(0x84e1), 0xf);
        // CB 0F 0335
        gbc.setState(0x9d4f, 0x2917, 0xae20, 0xb148, 0xe1db, 0x4756, 0x1, 0x1);
        gbc.writeMem(0x9d4f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x2917);
        EXPECT(gbc.pc(), 0x9d51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d4f), 0xcb);
        EXPECT(gbc.readMem(0x9d50), 0xf);
        // CB 0F 0336
        gbc.setState(0xced, 0xb256, 0x8f00, 0xf57c, 0x467c, 0xd6e9, 0x0, 0x1);
        gbc.writeMem(0xced, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xb256);
        EXPECT(gbc.pc(), 0xcef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0337
        gbc.setState(0x8cf9, 0xfef4, 0xd640, 0x25d3, 0xf615, 0xc40, 0x0, 0x1);
        gbc.writeMem(0x8cf9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xfef4);
        EXPECT(gbc.pc(), 0x8cfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cf9), 0xcb);
        EXPECT(gbc.readMem(0x8cfa), 0xf);
        // CB 0F 0338
        gbc.setState(0xe65a, 0xc06, 0x3f30, 0xf384, 0xac5d, 0xc2f3, 0x1, 0x0);
        gbc.writeMem(0xe65a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xc06);
        EXPECT(gbc.pc(), 0xe65c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe65a), 0xcb);
        EXPECT(gbc.readMem(0xe65b), 0xf);
        // CB 0F 0339
        gbc.setState(0x6248, 0x407b, 0x19d0, 0x7822, 0xbd4, 0x6b62, 0x1, 0x0);
        gbc.writeMem(0x6248, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x407b);
        EXPECT(gbc.pc(), 0x624a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 033A
        gbc.setState(0xb772, 0x1863, 0xa100, 0x6fd, 0xa7c6, 0x6698, 0x0, 0x1);
        gbc.writeMem(0xb772, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x1863);
        EXPECT(gbc.pc(), 0xb774);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb772), 0xcb);
        EXPECT(gbc.readMem(0xb773), 0xf);
        // CB 0F 033B
        gbc.setState(0x360, 0x450e, 0xc2f0, 0x2ab4, 0x5f73, 0x14f, 0x0, 0x0);
        gbc.writeMem(0x360, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x450e);
        EXPECT(gbc.pc(), 0x362);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 033C
        gbc.setState(0xd40d, 0xbb3, 0x6230, 0x85f3, 0x6a82, 0xdae9, 0x1, 0x1);
        gbc.writeMem(0xd40d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xbb3);
        EXPECT(gbc.pc(), 0xd40f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd40d), 0xcb);
        EXPECT(gbc.readMem(0xd40e), 0xf);
        // CB 0F 033D
        gbc.setState(0x8089, 0x301, 0xf830, 0xa45d, 0x8a25, 0x61eb, 0x1, 0x1);
        gbc.writeMem(0x8089, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x301);
        EXPECT(gbc.pc(), 0x808b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8089), 0xcb);
        EXPECT(gbc.readMem(0x808a), 0xf);
        // CB 0F 033E
        gbc.setState(0xbc46, 0x708d, 0x8a80, 0xfbc7, 0x6c25, 0x6293, 0x1, 0x0);
        gbc.writeMem(0xbc46, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x708d);
        EXPECT(gbc.pc(), 0xbc48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc46), 0xcb);
        EXPECT(gbc.readMem(0xbc47), 0xf);
        // CB 0F 033F
        gbc.setState(0x319d, 0x81b2, 0xa070, 0x1834, 0x126b, 0xc8e7, 0x1, 0x0);
        gbc.writeMem(0x319d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x81b2);
        EXPECT(gbc.pc(), 0x319f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0340
        gbc.setState(0x23a9, 0x4888, 0x9a00, 0x3c86, 0x1b3, 0x17bb, 0x0, 0x1);
        gbc.writeMem(0x23a9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x4888);
        EXPECT(gbc.pc(), 0x23ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0341
        gbc.setState(0x9849, 0xae42, 0x1c30, 0xc7a7, 0x6997, 0x4f4c, 0x1, 0x1);
        gbc.writeMem(0x9849, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xae42);
        EXPECT(gbc.pc(), 0x984b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9849), 0xcb);
        EXPECT(gbc.readMem(0x984a), 0xf);
        // CB 0F 0342
        gbc.setState(0x1046, 0x9940, 0xde30, 0xe16, 0x66e2, 0x34a6, 0x0, 0x1);
        gbc.writeMem(0x1046, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x9940);
        EXPECT(gbc.pc(), 0x1048);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0343
        gbc.setState(0xa62f, 0xfcf, 0x62f0, 0xfaa0, 0x1efe, 0x1c1b, 0x1, 0x0);
        gbc.writeMem(0xa62f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xfcf);
        EXPECT(gbc.pc(), 0xa631);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa62f), 0xcb);
        EXPECT(gbc.readMem(0xa630), 0xf);
        // CB 0F 0344
        gbc.setState(0x3e8f, 0xdb28, 0x8320, 0x951f, 0xc56f, 0x8b02, 0x1, 0x1);
        gbc.writeMem(0x3e8f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xdb28);
        EXPECT(gbc.pc(), 0x3e91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0345
        gbc.setState(0x5236, 0xf740, 0x3940, 0x3f0a, 0x3ded, 0xd58a, 0x0, 0x1);
        gbc.writeMem(0x5236, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xf740);
        EXPECT(gbc.pc(), 0x5238);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0346
        gbc.setState(0x7c1a, 0xb4dc, 0xd7f0, 0xb13b, 0x5682, 0x3d03, 0x1, 0x0);
        gbc.writeMem(0x7c1a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xb4dc);
        EXPECT(gbc.pc(), 0x7c1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0347
        gbc.setState(0x35c0, 0x2183, 0x75d0, 0x47cf, 0xd2a, 0xe21d, 0x0, 0x0);
        gbc.writeMem(0x35c0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2183);
        EXPECT(gbc.pc(), 0x35c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0348
        gbc.setState(0xb56c, 0x3b81, 0xc120, 0xfd14, 0x4671, 0x2abd, 0x1, 0x0);
        gbc.writeMem(0xb56c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x3b81);
        EXPECT(gbc.pc(), 0xb56e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb56c), 0xcb);
        EXPECT(gbc.readMem(0xb56d), 0xf);
        // CB 0F 0349
        gbc.setState(0xc635, 0x9848, 0xc20, 0xd1aa, 0x844d, 0x5e8d, 0x0, 0x0);
        gbc.writeMem(0xc635, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x9848);
        EXPECT(gbc.pc(), 0xc637);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc635), 0xcb);
        EXPECT(gbc.readMem(0xc636), 0xf);
        // CB 0F 034A
        gbc.setState(0xed5d, 0xaa51, 0x2770, 0x91fe, 0x4cde, 0x2d06, 0x0, 0x0);
        gbc.writeMem(0xed5d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xaa51);
        EXPECT(gbc.pc(), 0xed5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed5d), 0xcb);
        EXPECT(gbc.readMem(0xed5e), 0xf);
        // CB 0F 034B
        gbc.setState(0x1a9f, 0xeff7, 0x1130, 0xd473, 0x89dc, 0x309, 0x1, 0x1);
        gbc.writeMem(0x1a9f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xeff7);
        EXPECT(gbc.pc(), 0x1aa1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 034C
        gbc.setState(0x81f0, 0x9cab, 0x290, 0xd3dd, 0x97b, 0x37ff, 0x0, 0x1);
        gbc.writeMem(0x81f0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x9cab);
        EXPECT(gbc.pc(), 0x81f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81f0), 0xcb);
        EXPECT(gbc.readMem(0x81f1), 0xf);
        // CB 0F 034D
        gbc.setState(0xab61, 0x120c, 0xdea0, 0x28ed, 0x93af, 0x3207, 0x0, 0x1);
        gbc.writeMem(0xab61, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x120c);
        EXPECT(gbc.pc(), 0xab63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab61), 0xcb);
        EXPECT(gbc.readMem(0xab62), 0xf);
        // CB 0F 034E
        gbc.setState(0x5eea, 0x4429, 0xed40, 0x8caf, 0x74c, 0x20f0, 0x0, 0x1);
        gbc.writeMem(0x5eea, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x4429);
        EXPECT(gbc.pc(), 0x5eec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 034F
        gbc.setState(0x655d, 0xe9f5, 0x96f0, 0xfcee, 0xa25d, 0xd30, 0x1, 0x1);
        gbc.writeMem(0x655d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xe9f5);
        EXPECT(gbc.pc(), 0x655f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0350
        gbc.setState(0xdc49, 0xe02e, 0x4250, 0x899b, 0xfe97, 0x3631, 0x1, 0x0);
        gbc.writeMem(0xdc49, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xe02e);
        EXPECT(gbc.pc(), 0xdc4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc49), 0xcb);
        EXPECT(gbc.readMem(0xdc4a), 0xf);
        // CB 0F 0351
        gbc.setState(0x1bd2, 0x2a09, 0x2160, 0x809c, 0xce60, 0x19ba, 0x0, 0x0);
        gbc.writeMem(0x1bd2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x2a09);
        EXPECT(gbc.pc(), 0x1bd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0352
        gbc.setState(0x4af0, 0x635b, 0x3e30, 0x9d92, 0xc019, 0x2edd, 0x0, 0x1);
        gbc.writeMem(0x4af0, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x635b);
        EXPECT(gbc.pc(), 0x4af2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0353
        gbc.setState(0x4507, 0xb3a3, 0x2360, 0x223e, 0x25e8, 0x1f6, 0x0, 0x0);
        gbc.writeMem(0x4507, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xb3a3);
        EXPECT(gbc.pc(), 0x4509);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0354
        gbc.setState(0xcdcd, 0x278e, 0x3030, 0x4187, 0xf5dc, 0x508f, 0x1, 0x0);
        gbc.writeMem(0xcdcd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x278e);
        EXPECT(gbc.pc(), 0xcdcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdcd), 0xcb);
        EXPECT(gbc.readMem(0xcdce), 0xf);
        // CB 0F 0355
        gbc.setState(0x4140, 0x658a, 0xf930, 0x6d85, 0xa0e7, 0x5cdd, 0x0, 0x1);
        gbc.writeMem(0x4140, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x658a);
        EXPECT(gbc.pc(), 0x4142);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0356
        gbc.setState(0x8734, 0xaa1c, 0x1190, 0xd54d, 0xd77b, 0x60b1, 0x0, 0x0);
        gbc.writeMem(0x8734, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xaa1c);
        EXPECT(gbc.pc(), 0x8736);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8734), 0xcb);
        EXPECT(gbc.readMem(0x8735), 0xf);
        // CB 0F 0357
        gbc.setState(0x7ade, 0x19d0, 0x7840, 0x25fc, 0x554b, 0x580d, 0x0, 0x0);
        gbc.writeMem(0x7ade, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x19d0);
        EXPECT(gbc.pc(), 0x7ae0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0358
        gbc.setState(0xbdb4, 0xb181, 0xd7e0, 0xba13, 0x8c48, 0x355a, 0x0, 0x0);
        gbc.writeMem(0xbdb4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xb181);
        EXPECT(gbc.pc(), 0xbdb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdb4), 0xcb);
        EXPECT(gbc.readMem(0xbdb5), 0xf);
        // CB 0F 0359
        gbc.setState(0x4def, 0x992d, 0x1610, 0x1931, 0x630f, 0xfb5a, 0x1, 0x0);
        gbc.writeMem(0x4def, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x992d);
        EXPECT(gbc.pc(), 0x4df1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 035A
        gbc.setState(0x26d7, 0x5bce, 0x9900, 0x32d5, 0xa934, 0xa688, 0x1, 0x1);
        gbc.writeMem(0x26d7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x5bce);
        EXPECT(gbc.pc(), 0x26d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 035B
        gbc.setState(0x2822, 0x794, 0xc5b0, 0xcc6, 0xe1e5, 0xb8ea, 0x0, 0x1);
        gbc.writeMem(0x2822, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x794);
        EXPECT(gbc.pc(), 0x2824);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 035C
        gbc.setState(0x44ee, 0xe8e3, 0x7dc0, 0x2a6a, 0x9c16, 0xea4, 0x1, 0x1);
        gbc.writeMem(0x44ee, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xe8e3);
        EXPECT(gbc.pc(), 0x44f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 035D
        gbc.setState(0x3f03, 0x3983, 0xdd70, 0x147f, 0xf950, 0xd652, 0x0, 0x1);
        gbc.writeMem(0x3f03, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x3983);
        EXPECT(gbc.pc(), 0x3f05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 035E
        gbc.setState(0x5288, 0x27ea, 0xa440, 0xd75, 0x881c, 0x87d3, 0x0, 0x1);
        gbc.writeMem(0x5288, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x27ea);
        EXPECT(gbc.pc(), 0x528a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 035F
        gbc.setState(0x294a, 0x9770, 0x69e0, 0xa881, 0x235c, 0x68ce, 0x0, 0x1);
        gbc.writeMem(0x294a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x9770);
        EXPECT(gbc.pc(), 0x294c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0360
        gbc.setState(0x624f, 0x806, 0xcfb0, 0x2e20, 0xdef4, 0x4632, 0x0, 0x1);
        gbc.writeMem(0x624f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x806);
        EXPECT(gbc.pc(), 0x6251);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0361
        gbc.setState(0xd4bf, 0xf34b, 0x7240, 0x161e, 0xdca0, 0xf076, 0x1, 0x0);
        gbc.writeMem(0xd4bf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xf34b);
        EXPECT(gbc.pc(), 0xd4c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4bf), 0xcb);
        EXPECT(gbc.readMem(0xd4c0), 0xf);
        // CB 0F 0362
        gbc.setState(0xcb9d, 0x5434, 0xf2d0, 0xb772, 0xc35c, 0xfbe6, 0x0, 0x0);
        gbc.writeMem(0xcb9d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x5434);
        EXPECT(gbc.pc(), 0xcb9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb9d), 0xcb);
        EXPECT(gbc.readMem(0xcb9e), 0xf);
        // CB 0F 0363
        gbc.setState(0xa206, 0xcf48, 0xe1d0, 0x1aa6, 0x67e4, 0x88ef, 0x1, 0x1);
        gbc.writeMem(0xa206, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xcf48);
        EXPECT(gbc.pc(), 0xa208);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa206), 0xcb);
        EXPECT(gbc.readMem(0xa207), 0xf);
        // CB 0F 0364
        gbc.setState(0xa2c6, 0x9c59, 0xb2d0, 0x7110, 0x6be8, 0xe105, 0x0, 0x1);
        gbc.writeMem(0xa2c6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x9c59);
        EXPECT(gbc.pc(), 0xa2c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2c6), 0xcb);
        EXPECT(gbc.readMem(0xa2c7), 0xf);
        // CB 0F 0365
        gbc.setState(0x7fd5, 0xd1e0, 0xf470, 0xf66b, 0x9c50, 0xf4b, 0x1, 0x0);
        gbc.writeMem(0x7fd5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xd1e0);
        EXPECT(gbc.pc(), 0x7fd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0366
        gbc.setState(0x945a, 0x6e01, 0xcda0, 0x4133, 0x78ba, 0x8f9e, 0x0, 0x1);
        gbc.writeMem(0x945a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x6e01);
        EXPECT(gbc.pc(), 0x945c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x945a), 0xcb);
        EXPECT(gbc.readMem(0x945b), 0xf);
        // CB 0F 0367
        gbc.setState(0x1e9c, 0x4c87, 0xf960, 0x8592, 0x6ad6, 0x22d9, 0x1, 0x1);
        gbc.writeMem(0x1e9c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x4c87);
        EXPECT(gbc.pc(), 0x1e9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0368
        gbc.setState(0x9009, 0xb4c1, 0x9160, 0x7c4a, 0xb797, 0x771a, 0x0, 0x1);
        gbc.writeMem(0x9009, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xb4c1);
        EXPECT(gbc.pc(), 0x900b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9009), 0xcb);
        EXPECT(gbc.readMem(0x900a), 0xf);
        // CB 0F 0369
        gbc.setState(0xc55b, 0xde42, 0x9900, 0x6322, 0xd6c6, 0x13df, 0x0, 0x1);
        gbc.writeMem(0xc55b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xde42);
        EXPECT(gbc.pc(), 0xc55d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc55b), 0xcb);
        EXPECT(gbc.readMem(0xc55c), 0xf);
        // CB 0F 036A
        gbc.setState(0x4d76, 0x6777, 0xbf50, 0x4a18, 0x22f0, 0xf414, 0x1, 0x0);
        gbc.writeMem(0x4d76, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x6777);
        EXPECT(gbc.pc(), 0x4d78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 036B
        gbc.setState(0x3d89, 0x63d5, 0x8d20, 0x590, 0x93e8, 0x9d4f, 0x1, 0x0);
        gbc.writeMem(0x3d89, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x63d5);
        EXPECT(gbc.pc(), 0x3d8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 036C
        gbc.setState(0xa312, 0xb5d5, 0x49c0, 0x3b52, 0x76c8, 0x5c7b, 0x1, 0x0);
        gbc.writeMem(0xa312, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xb5d5);
        EXPECT(gbc.pc(), 0xa314);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa312), 0xcb);
        EXPECT(gbc.readMem(0xa313), 0xf);
        // CB 0F 036D
        gbc.setState(0x3dd8, 0xae49, 0xeab0, 0x1bbc, 0x5d39, 0x8cd8, 0x0, 0x0);
        gbc.writeMem(0x3dd8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xae49);
        EXPECT(gbc.pc(), 0x3dda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 036E
        gbc.setState(0x6f0c, 0x51b0, 0x4c10, 0x49b1, 0x4f4e, 0xd98b, 0x0, 0x0);
        gbc.writeMem(0x6f0c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x51b0);
        EXPECT(gbc.pc(), 0x6f0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 036F
        gbc.setState(0x699c, 0xf5e5, 0x2e20, 0x68ee, 0x3179, 0xe9e, 0x0, 0x1);
        gbc.writeMem(0x699c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xf5e5);
        EXPECT(gbc.pc(), 0x699e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0370
        gbc.setState(0xb95, 0x6be0, 0xd990, 0xc306, 0x7851, 0x2c53, 0x1, 0x1);
        gbc.writeMem(0xb95, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x6be0);
        EXPECT(gbc.pc(), 0xb97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0371
        gbc.setState(0x78c5, 0x819, 0x51f0, 0x2c73, 0xe166, 0x92a4, 0x1, 0x1);
        gbc.writeMem(0x78c5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x819);
        EXPECT(gbc.pc(), 0x78c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0372
        gbc.setState(0x784, 0x17b8, 0x280, 0xdaf1, 0x9eac, 0xc5fb, 0x0, 0x1);
        gbc.writeMem(0x784, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x17b8);
        EXPECT(gbc.pc(), 0x786);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0373
        gbc.setState(0x7eac, 0x47b1, 0xbc40, 0x9b9b, 0xf6b6, 0x21f5, 0x1, 0x1);
        gbc.writeMem(0x7eac, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x47b1);
        EXPECT(gbc.pc(), 0x7eae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0374
        gbc.setState(0x2acd, 0xe8a9, 0x4c30, 0xb9c2, 0x6365, 0x851d, 0x1, 0x0);
        gbc.writeMem(0x2acd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xe8a9);
        EXPECT(gbc.pc(), 0x2acf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0375
        gbc.setState(0x1ec6, 0x31bd, 0x2a80, 0xc97, 0xb7c8, 0xef50, 0x1, 0x0);
        gbc.writeMem(0x1ec6, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x31bd);
        EXPECT(gbc.pc(), 0x1ec8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0376
        gbc.setState(0x38ef, 0x3f4c, 0x50c0, 0xf0af, 0x435a, 0x4755, 0x1, 0x1);
        gbc.writeMem(0x38ef, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x3f4c);
        EXPECT(gbc.pc(), 0x38f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0377
        gbc.setState(0xe469, 0x3191, 0x1f40, 0x69c6, 0xc9ff, 0x16dc, 0x0, 0x1);
        gbc.writeMem(0xe469, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x3191);
        EXPECT(gbc.pc(), 0xe46b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe469), 0xcb);
        EXPECT(gbc.readMem(0xe46a), 0xf);
        // CB 0F 0378
        gbc.setState(0xed02, 0xd5fb, 0xe400, 0xc83, 0xc5ea, 0xd4b9, 0x1, 0x1);
        gbc.writeMem(0xed02, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xd5fb);
        EXPECT(gbc.pc(), 0xed04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed02), 0xcb);
        EXPECT(gbc.readMem(0xed03), 0xf);
        // CB 0F 0379
        gbc.setState(0x5193, 0xfcee, 0x3930, 0x6e52, 0x1538, 0x1d1a, 0x0, 0x0);
        gbc.writeMem(0x5193, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xfcee);
        EXPECT(gbc.pc(), 0x5195);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 037A
        gbc.setState(0xc9a9, 0x6fb, 0x6a0, 0x1ddf, 0x980c, 0xe00d, 0x1, 0x1);
        gbc.writeMem(0xc9a9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x6fb);
        EXPECT(gbc.pc(), 0xc9ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9a9), 0xcb);
        EXPECT(gbc.readMem(0xc9aa), 0xf);
        // CB 0F 037B
        gbc.setState(0xb1a, 0x5db0, 0xbc60, 0x86ad, 0x818f, 0x168, 0x1, 0x1);
        gbc.writeMem(0xb1a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x5db0);
        EXPECT(gbc.pc(), 0xb1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 037C
        gbc.setState(0xbd08, 0x2920, 0x17e0, 0xf91b, 0x213, 0x6df0, 0x0, 0x1);
        gbc.writeMem(0xbd08, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x2920);
        EXPECT(gbc.pc(), 0xbd0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd08), 0xcb);
        EXPECT(gbc.readMem(0xbd09), 0xf);
        // CB 0F 037D
        gbc.setState(0x84a7, 0x4979, 0x2d90, 0xca30, 0x1d50, 0x1350, 0x0, 0x0);
        gbc.writeMem(0x84a7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x4979);
        EXPECT(gbc.pc(), 0x84a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84a7), 0xcb);
        EXPECT(gbc.readMem(0x84a8), 0xf);
        // CB 0F 037E
        gbc.setState(0xac8c, 0xe5a5, 0x8cb0, 0x89ac, 0x249e, 0xa4c6, 0x0, 0x1);
        gbc.writeMem(0xac8c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xe5a5);
        EXPECT(gbc.pc(), 0xac8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac8c), 0xcb);
        EXPECT(gbc.readMem(0xac8d), 0xf);
        // CB 0F 037F
        gbc.setState(0x76ff, 0xd9b9, 0x4770, 0x167e, 0xb001, 0x647b, 0x1, 0x0);
        gbc.writeMem(0x76ff, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xd9b9);
        EXPECT(gbc.pc(), 0x7701);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0380
        gbc.setState(0x9b83, 0xeeef, 0xf690, 0x547f, 0x3d41, 0x686, 0x1, 0x0);
        gbc.writeMem(0x9b83, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xeeef);
        EXPECT(gbc.pc(), 0x9b85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b83), 0xcb);
        EXPECT(gbc.readMem(0x9b84), 0xf);
        // CB 0F 0381
        gbc.setState(0x7198, 0xe47d, 0x7120, 0x2343, 0x6c74, 0x6850, 0x1, 0x1);
        gbc.writeMem(0x7198, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xe47d);
        EXPECT(gbc.pc(), 0x719a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0382
        gbc.setState(0x2472, 0x161b, 0xe590, 0x2c09, 0xa753, 0xccb4, 0x1, 0x1);
        gbc.writeMem(0x2472, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x161b);
        EXPECT(gbc.pc(), 0x2474);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0383
        gbc.setState(0x8943, 0x8692, 0x9e20, 0x94a7, 0xd1e9, 0x4d5b, 0x0, 0x1);
        gbc.writeMem(0x8943, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x8692);
        EXPECT(gbc.pc(), 0x8945);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8943), 0xcb);
        EXPECT(gbc.readMem(0x8944), 0xf);
        // CB 0F 0384
        gbc.setState(0x8e10, 0xece4, 0x5ba0, 0xccc1, 0x2493, 0x3886, 0x0, 0x1);
        gbc.writeMem(0x8e10, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xece4);
        EXPECT(gbc.pc(), 0x8e12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e10), 0xcb);
        EXPECT(gbc.readMem(0x8e11), 0xf);
        // CB 0F 0385
        gbc.setState(0x4a32, 0x5da0, 0x4fe0, 0x7b7c, 0xea40, 0x5d35, 0x1, 0x0);
        gbc.writeMem(0x4a32, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x5da0);
        EXPECT(gbc.pc(), 0x4a34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0386
        gbc.setState(0x3d28, 0xa127, 0x2b0, 0xdb82, 0x3685, 0xf096, 0x0, 0x1);
        gbc.writeMem(0x3d28, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xa127);
        EXPECT(gbc.pc(), 0x3d2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0387
        gbc.setState(0x199b, 0xab50, 0xa3e0, 0xb56a, 0x784f, 0x7f5c, 0x0, 0x0);
        gbc.writeMem(0x199b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xab50);
        EXPECT(gbc.pc(), 0x199d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0388
        gbc.setState(0xd9b3, 0xed22, 0x1f30, 0x1f82, 0xe0dd, 0x527c, 0x1, 0x0);
        gbc.writeMem(0xd9b3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xed22);
        EXPECT(gbc.pc(), 0xd9b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9b3), 0xcb);
        EXPECT(gbc.readMem(0xd9b4), 0xf);
        // CB 0F 038A
        gbc.setState(0x6d7b, 0xdc97, 0x6b70, 0x6fd6, 0xbaa8, 0xfc82, 0x0, 0x0);
        gbc.writeMem(0x6d7b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xdc97);
        EXPECT(gbc.pc(), 0x6d7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 038B
        gbc.setState(0x6945, 0xacee, 0xc6a0, 0x3e91, 0x3ae3, 0xddd2, 0x1, 0x0);
        gbc.writeMem(0x6945, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xacee);
        EXPECT(gbc.pc(), 0x6947);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 038C
        gbc.setState(0x7334, 0x78b0, 0xbd80, 0x2c00, 0x748e, 0xdba9, 0x1, 0x1);
        gbc.writeMem(0x7334, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x78b0);
        EXPECT(gbc.pc(), 0x7336);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 038D
        gbc.setState(0x8dc8, 0x206b, 0x460, 0xc43d, 0xdb13, 0xfabc, 0x1, 0x1);
        gbc.writeMem(0x8dc8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x206b);
        EXPECT(gbc.pc(), 0x8dca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dc8), 0xcb);
        EXPECT(gbc.readMem(0x8dc9), 0xf);
        // CB 0F 038E
        gbc.setState(0x7513, 0xb873, 0xdb00, 0x2c9f, 0xbc3a, 0x194f, 0x1, 0x0);
        gbc.writeMem(0x7513, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xb873);
        EXPECT(gbc.pc(), 0x7515);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 038F
        gbc.setState(0xe27c, 0xd290, 0x8670, 0x4b85, 0x1546, 0xed, 0x0, 0x1);
        gbc.writeMem(0xe27c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xd290);
        EXPECT(gbc.pc(), 0xe27e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe27c), 0xcb);
        EXPECT(gbc.readMem(0xe27d), 0xf);
        // CB 0F 0390
        gbc.setState(0xa9f5, 0x1eda, 0x6ec0, 0x9596, 0xb031, 0x70d0, 0x1, 0x1);
        gbc.writeMem(0xa9f5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x1eda);
        EXPECT(gbc.pc(), 0xa9f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9f5), 0xcb);
        EXPECT(gbc.readMem(0xa9f6), 0xf);
        // CB 0F 0391
        gbc.setState(0x3bb1, 0x76e1, 0x1a40, 0xcc46, 0xff5c, 0xb7b3, 0x1, 0x1);
        gbc.writeMem(0x3bb1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x76e1);
        EXPECT(gbc.pc(), 0x3bb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0392
        gbc.setState(0x6547, 0xe35f, 0x6600, 0x24a3, 0x7825, 0x896d, 0x0, 0x0);
        gbc.writeMem(0x6547, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xe35f);
        EXPECT(gbc.pc(), 0x6549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0393
        gbc.setState(0x4a11, 0x8521, 0x1700, 0xee5d, 0x340a, 0xc73c, 0x1, 0x0);
        gbc.writeMem(0x4a11, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x8521);
        EXPECT(gbc.pc(), 0x4a13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0394
        gbc.setState(0x946e, 0xda50, 0x3180, 0xf2dd, 0x7929, 0xcd53, 0x0, 0x1);
        gbc.writeMem(0x946e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xda50);
        EXPECT(gbc.pc(), 0x9470);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x946e), 0xcb);
        EXPECT(gbc.readMem(0x946f), 0xf);
        // CB 0F 0395
        gbc.setState(0x206b, 0xcbf8, 0x27d0, 0xf9e9, 0xf23a, 0x1e41, 0x1, 0x1);
        gbc.writeMem(0x206b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xcbf8);
        EXPECT(gbc.pc(), 0x206d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0396
        gbc.setState(0x471, 0xb07f, 0x9630, 0x83c, 0x20f3, 0x7f5e, 0x0, 0x0);
        gbc.writeMem(0x471, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xb07f);
        EXPECT(gbc.pc(), 0x473);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0397
        gbc.setState(0x22f, 0x72c5, 0x4120, 0x8dcb, 0x2728, 0x58cf, 0x1, 0x1);
        gbc.writeMem(0x22f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x72c5);
        EXPECT(gbc.pc(), 0x231);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 0398
        gbc.setState(0x604d, 0xe037, 0xf6c0, 0xde48, 0xf1ba, 0x103d, 0x0, 0x1);
        gbc.writeMem(0x604d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xe037);
        EXPECT(gbc.pc(), 0x604f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 0399
        gbc.setState(0x5154, 0x54e5, 0xd710, 0x60ab, 0x29dd, 0xace5, 0x1, 0x1);
        gbc.writeMem(0x5154, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x54e5);
        EXPECT(gbc.pc(), 0x5156);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 039A
        gbc.setState(0x445f, 0xba65, 0x430, 0x3ecd, 0x9617, 0xc463, 0x1, 0x0);
        gbc.writeMem(0x445f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xba65);
        EXPECT(gbc.pc(), 0x4461);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 039B
        gbc.setState(0x6f78, 0x2b5d, 0xabc0, 0xd06b, 0x3187, 0xb0c5, 0x1, 0x1);
        gbc.writeMem(0x6f78, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x2b5d);
        EXPECT(gbc.pc(), 0x6f7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 039C
        gbc.setState(0x8578, 0xf9b3, 0x9a00, 0xed73, 0x970, 0xc4fd, 0x0, 0x1);
        gbc.writeMem(0x8578, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xf9b3);
        EXPECT(gbc.pc(), 0x857a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8578), 0xcb);
        EXPECT(gbc.readMem(0x8579), 0xf);
        // CB 0F 039D
        gbc.setState(0x9f01, 0x5526, 0x4d50, 0x3678, 0xf418, 0x4c8a, 0x1, 0x1);
        gbc.writeMem(0x9f01, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x5526);
        EXPECT(gbc.pc(), 0x9f03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f01), 0xcb);
        EXPECT(gbc.readMem(0x9f02), 0xf);
        // CB 0F 039E
        gbc.setState(0x90e1, 0x12b7, 0x2b20, 0x9af0, 0x6ca0, 0xe267, 0x0, 0x1);
        gbc.writeMem(0x90e1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x12b7);
        EXPECT(gbc.pc(), 0x90e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90e1), 0xcb);
        EXPECT(gbc.readMem(0x90e2), 0xf);
        // CB 0F 039F
        gbc.setState(0x241c, 0x99f4, 0x8700, 0xb59d, 0x7522, 0x1496, 0x0, 0x1);
        gbc.writeMem(0x241c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x99f4);
        EXPECT(gbc.pc(), 0x241e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03A0
        gbc.setState(0xcef1, 0x7ff, 0x28c0, 0x3cf6, 0xa4af, 0xe968, 0x0, 0x1);
        gbc.writeMem(0xcef1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x7ff);
        EXPECT(gbc.pc(), 0xcef3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcef1), 0xcb);
        EXPECT(gbc.readMem(0xcef2), 0xf);
        // CB 0F 03A1
        gbc.setState(0x52e7, 0x1b64, 0xb1b0, 0x89cf, 0x863a, 0x1032, 0x1, 0x1);
        gbc.writeMem(0x52e7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x1b64);
        EXPECT(gbc.pc(), 0x52e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03A2
        gbc.setState(0x99af, 0x20c, 0x22b0, 0xa672, 0x4102, 0xac3b, 0x1, 0x1);
        gbc.writeMem(0x99af, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x20c);
        EXPECT(gbc.pc(), 0x99b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99af), 0xcb);
        EXPECT(gbc.readMem(0x99b0), 0xf);
        // CB 0F 03A3
        gbc.setState(0x7ca8, 0xf6d7, 0xd9d0, 0xffab, 0x8f7f, 0x7b82, 0x0, 0x0);
        gbc.writeMem(0x7ca8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xf6d7);
        EXPECT(gbc.pc(), 0x7caa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03A4
        gbc.setState(0xcd97, 0xf3bb, 0xdf00, 0xeb33, 0x4e1c, 0xc127, 0x0, 0x1);
        gbc.writeMem(0xcd97, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xf3bb);
        EXPECT(gbc.pc(), 0xcd99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd97), 0xcb);
        EXPECT(gbc.readMem(0xcd98), 0xf);
        // CB 0F 03A5
        gbc.setState(0x3b7c, 0xaae6, 0xf7f0, 0x1adb, 0x6b59, 0x5b95, 0x0, 0x0);
        gbc.writeMem(0x3b7c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xaae6);
        EXPECT(gbc.pc(), 0x3b7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03A6
        gbc.setState(0x4037, 0x7ba3, 0xbe40, 0xdc90, 0x6c8c, 0x255a, 0x0, 0x1);
        gbc.writeMem(0x4037, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7ba3);
        EXPECT(gbc.pc(), 0x4039);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 03A7
        gbc.setState(0x1e4f, 0x16de, 0x1300, 0x5ad, 0x2ff9, 0x53e5, 0x1, 0x0);
        gbc.writeMem(0x1e4f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x16de);
        EXPECT(gbc.pc(), 0x1e51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03A8
        gbc.setState(0x8f9a, 0xf3b9, 0x1f50, 0x8d4f, 0x9718, 0x81bd, 0x1, 0x1);
        gbc.writeMem(0x8f9a, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xf3b9);
        EXPECT(gbc.pc(), 0x8f9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f9a), 0xcb);
        EXPECT(gbc.readMem(0x8f9b), 0xf);
        // CB 0F 03A9
        gbc.setState(0xdf61, 0x31d4, 0xfd20, 0xf257, 0x1ccb, 0x17a8, 0x1, 0x0);
        gbc.writeMem(0xdf61, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x31d4);
        EXPECT(gbc.pc(), 0xdf63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf61), 0xcb);
        EXPECT(gbc.readMem(0xdf62), 0xf);
        // CB 0F 03AA
        gbc.setState(0xa0b8, 0xfaf6, 0x34d0, 0x4615, 0x61ba, 0xa587, 0x0, 0x1);
        gbc.writeMem(0xa0b8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xfaf6);
        EXPECT(gbc.pc(), 0xa0ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0b8), 0xcb);
        EXPECT(gbc.readMem(0xa0b9), 0xf);
        // CB 0F 03AB
        gbc.setState(0x4ac8, 0x2364, 0x7160, 0xa1bd, 0xb682, 0x6934, 0x0, 0x0);
        gbc.writeMem(0x4ac8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x2364);
        EXPECT(gbc.pc(), 0x4aca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03AC
        gbc.setState(0xd53c, 0x34fe, 0x8480, 0x3267, 0xd4f4, 0xbac9, 0x0, 0x0);
        gbc.writeMem(0xd53c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x34fe);
        EXPECT(gbc.pc(), 0xd53e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd53c), 0xcb);
        EXPECT(gbc.readMem(0xd53d), 0xf);
        // CB 0F 03AD
        gbc.setState(0x8dca, 0xd838, 0xd8f0, 0xf6f8, 0x8072, 0x2764, 0x1, 0x0);
        gbc.writeMem(0x8dca, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xd838);
        EXPECT(gbc.pc(), 0x8dcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dca), 0xcb);
        EXPECT(gbc.readMem(0x8dcb), 0xf);
        // CB 0F 03AE
        gbc.setState(0x2d01, 0xff27, 0xb60, 0x1466, 0xe4e, 0x4fa8, 0x1, 0x0);
        gbc.writeMem(0x2d01, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xff27);
        EXPECT(gbc.pc(), 0x2d03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03AF
        gbc.setState(0x23ea, 0x56f9, 0xe3d0, 0x5d1c, 0xc61a, 0x1c6f, 0x1, 0x1);
        gbc.writeMem(0x23ea, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x56f9);
        EXPECT(gbc.pc(), 0x23ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03B0
        gbc.setState(0x8a87, 0xaf84, 0x34c0, 0xe16d, 0x46a5, 0xc541, 0x1, 0x1);
        gbc.writeMem(0x8a87, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xaf84);
        EXPECT(gbc.pc(), 0x8a89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a87), 0xcb);
        EXPECT(gbc.readMem(0x8a88), 0xf);
        // CB 0F 03B1
        gbc.setState(0x3bfa, 0x36c5, 0x67d0, 0x1c89, 0xbce7, 0x9b28, 0x0, 0x1);
        gbc.writeMem(0x3bfa, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x36c5);
        EXPECT(gbc.pc(), 0x3bfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03B2
        gbc.setState(0x5460, 0x11c3, 0x3520, 0x3040, 0xfaf7, 0x518b, 0x0, 0x1);
        gbc.writeMem(0x5460, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x11c3);
        EXPECT(gbc.pc(), 0x5462);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03B3
        gbc.setState(0xa0ef, 0x2f42, 0x200, 0x94b5, 0x5db7, 0x8171, 0x1, 0x1);
        gbc.writeMem(0xa0ef, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x2f42);
        EXPECT(gbc.pc(), 0xa0f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0ef), 0xcb);
        EXPECT(gbc.readMem(0xa0f0), 0xf);
        // CB 0F 03B4
        gbc.setState(0xd246, 0xc036, 0x69c0, 0xec73, 0x21d6, 0xd6e5, 0x0, 0x0);
        gbc.writeMem(0xd246, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xc036);
        EXPECT(gbc.pc(), 0xd248);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd246), 0xcb);
        EXPECT(gbc.readMem(0xd247), 0xf);
        // CB 0F 03B5
        gbc.setState(0x43e4, 0x1b05, 0xbb20, 0xa712, 0x22d9, 0xd981, 0x1, 0x1);
        gbc.writeMem(0x43e4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x1b05);
        EXPECT(gbc.pc(), 0x43e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03B6
        gbc.setState(0x970f, 0x6fa3, 0x63e0, 0xc927, 0x9c1e, 0x531, 0x0, 0x1);
        gbc.writeMem(0x970f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x6fa3);
        EXPECT(gbc.pc(), 0x9711);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x970f), 0xcb);
        EXPECT(gbc.readMem(0x9710), 0xf);
        // CB 0F 03B7
        gbc.setState(0xc883, 0x9f1, 0xe810, 0xaea6, 0xdb70, 0x8c35, 0x0, 0x0);
        gbc.writeMem(0xc883, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x9f1);
        EXPECT(gbc.pc(), 0xc885);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc883), 0xcb);
        EXPECT(gbc.readMem(0xc884), 0xf);
        // CB 0F 03B8
        gbc.setState(0xb18, 0x1185, 0xad20, 0x8e8a, 0x3d57, 0x2fde, 0x0, 0x1);
        gbc.writeMem(0xb18, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x1185);
        EXPECT(gbc.pc(), 0xb1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03B9
        gbc.setState(0x38cb, 0x6083, 0x99f0, 0x52d2, 0xe042, 0x2c6b, 0x1, 0x0);
        gbc.writeMem(0x38cb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x6083);
        EXPECT(gbc.pc(), 0x38cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03BA
        gbc.setState(0x98bf, 0x57ed, 0x4850, 0x6100, 0x7b79, 0xffb3, 0x1, 0x1);
        gbc.writeMem(0x98bf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x57ed);
        EXPECT(gbc.pc(), 0x98c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98bf), 0xcb);
        EXPECT(gbc.readMem(0x98c0), 0xf);
        // CB 0F 03BB
        gbc.setState(0xaf89, 0x990b, 0x8310, 0xee30, 0xee93, 0xf299, 0x0, 0x1);
        gbc.writeMem(0xaf89, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x990b);
        EXPECT(gbc.pc(), 0xaf8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf89), 0xcb);
        EXPECT(gbc.readMem(0xaf8a), 0xf);
        // CB 0F 03BC
        gbc.setState(0xd80c, 0x30b1, 0x5930, 0x3df2, 0x9559, 0x23b6, 0x0, 0x1);
        gbc.writeMem(0xd80c, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x30b1);
        EXPECT(gbc.pc(), 0xd80e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd80c), 0xcb);
        EXPECT(gbc.readMem(0xd80d), 0xf);
        // CB 0F 03BD
        gbc.setState(0xc5b2, 0x81c0, 0xfb80, 0xacd9, 0x385f, 0x402, 0x1, 0x1);
        gbc.writeMem(0xc5b2, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x81c0);
        EXPECT(gbc.pc(), 0xc5b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5b2), 0xcb);
        EXPECT(gbc.readMem(0xc5b3), 0xf);
        // CB 0F 03BE
        gbc.setState(0x4239, 0xcac5, 0xe870, 0x864d, 0xe9df, 0x430b, 0x0, 0x0);
        gbc.writeMem(0x4239, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xcac5);
        EXPECT(gbc.pc(), 0x423b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 03BF
        gbc.setState(0xd93e, 0x21b9, 0x81f0, 0x19a6, 0x35e5, 0x2316, 0x1, 0x1);
        gbc.writeMem(0xd93e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x21b9);
        EXPECT(gbc.pc(), 0xd940);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd93e), 0xcb);
        EXPECT(gbc.readMem(0xd93f), 0xf);
        // CB 0F 03C0
        gbc.setState(0x87eb, 0x46ec, 0xc6a0, 0xc5b9, 0xaa30, 0xcb18, 0x0, 0x1);
        gbc.writeMem(0x87eb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x46ec);
        EXPECT(gbc.pc(), 0x87ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87eb), 0xcb);
        EXPECT(gbc.readMem(0x87ec), 0xf);
        // CB 0F 03C2
        gbc.setState(0xb85e, 0x2e6, 0x7cc0, 0xe634, 0x209, 0x516, 0x1, 0x0);
        gbc.writeMem(0xb85e, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x2e6);
        EXPECT(gbc.pc(), 0xb860);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb85e), 0xcb);
        EXPECT(gbc.readMem(0xb85f), 0xf);
        // CB 0F 03C3
        gbc.setState(0xebc5, 0xfc24, 0x34f0, 0x11e4, 0xd03, 0x96b2, 0x0, 0x0);
        gbc.writeMem(0xebc5, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xfc24);
        EXPECT(gbc.pc(), 0xebc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebc5), 0xcb);
        EXPECT(gbc.readMem(0xebc6), 0xf);
        // CB 0F 03C4
        gbc.setState(0xbdf, 0x8f31, 0xc980, 0xb260, 0x6a03, 0xa329, 0x1, 0x1);
        gbc.writeMem(0xbdf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x8f31);
        EXPECT(gbc.pc(), 0xbe1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03C5
        gbc.setState(0xe268, 0xa529, 0x8fb0, 0x37b1, 0xed9b, 0x3045, 0x1, 0x0);
        gbc.writeMem(0xe268, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xa529);
        EXPECT(gbc.pc(), 0xe26a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe268), 0xcb);
        EXPECT(gbc.readMem(0xe269), 0xf);
        // CB 0F 03C6
        gbc.setState(0x601d, 0x5645, 0x5f80, 0x8edf, 0x8674, 0x777e, 0x1, 0x1);
        gbc.writeMem(0x601d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x5645);
        EXPECT(gbc.pc(), 0x601f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03C7
        gbc.setState(0x8415, 0xe82b, 0x30f0, 0x4aa3, 0x86e0, 0xfcd5, 0x0, 0x0);
        gbc.writeMem(0x8415, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xe82b);
        EXPECT(gbc.pc(), 0x8417);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8415), 0xcb);
        EXPECT(gbc.readMem(0x8416), 0xf);
        // CB 0F 03C8
        gbc.setState(0xcf13, 0x5696, 0xe5d0, 0x23f7, 0xd88d, 0xd20a, 0x1, 0x0);
        gbc.writeMem(0xcf13, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x5696);
        EXPECT(gbc.pc(), 0xcf15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf13), 0xcb);
        EXPECT(gbc.readMem(0xcf14), 0xf);
        // CB 0F 03C9
        gbc.setState(0x37b4, 0xcc5e, 0x8160, 0x3b50, 0xf8ac, 0xeaf2, 0x0, 0x0);
        gbc.writeMem(0x37b4, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xcc5e);
        EXPECT(gbc.pc(), 0x37b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03CA
        gbc.setState(0xbecf, 0xe80d, 0x9680, 0x7b19, 0xa58a, 0xed51, 0x0, 0x1);
        gbc.writeMem(0xbecf, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xe80d);
        EXPECT(gbc.pc(), 0xbed1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbecf), 0xcb);
        EXPECT(gbc.readMem(0xbed0), 0xf);
        // CB 0F 03CB
        gbc.setState(0x9112, 0x1db3, 0x5880, 0xb687, 0x4ec0, 0x53ad, 0x1, 0x1);
        gbc.writeMem(0x9112, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1db3);
        EXPECT(gbc.pc(), 0x9114);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9112), 0xcb);
        EXPECT(gbc.readMem(0x9113), 0xf);
        // CB 0F 03CC
        gbc.setState(0x2aeb, 0xfe65, 0x1080, 0xcb30, 0xc663, 0x89df, 0x0, 0x0);
        gbc.writeMem(0x2aeb, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xfe65);
        EXPECT(gbc.pc(), 0x2aed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 03CD
        gbc.setState(0x9217, 0x8880, 0xa0a0, 0xc090, 0xff12, 0x6221, 0x1, 0x0);
        gbc.writeMem(0x9217, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x8880);
        EXPECT(gbc.pc(), 0x9219);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9217), 0xcb);
        EXPECT(gbc.readMem(0x9218), 0xf);
        // CB 0F 03CF
        gbc.setState(0xbaae, 0xe5fa, 0xd750, 0xc727, 0x31e9, 0x8855, 0x1, 0x0);
        gbc.writeMem(0xbaae, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xe5fa);
        EXPECT(gbc.pc(), 0xbab0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaae), 0xcb);
        EXPECT(gbc.readMem(0xbaaf), 0xf);
        // CB 0F 03D0
        gbc.setState(0x56b1, 0x35d, 0x96f0, 0x2812, 0xe3fc, 0xfe52, 0x1, 0x0);
        gbc.writeMem(0x56b1, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x35d);
        EXPECT(gbc.pc(), 0x56b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 03D1
        gbc.setState(0x707b, 0xa9a2, 0x690, 0xd847, 0x7219, 0x26a5, 0x0, 0x0);
        gbc.writeMem(0x707b, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xa9a2);
        EXPECT(gbc.pc(), 0x707d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 03D2
        gbc.setState(0x3a65, 0xbeb5, 0xa180, 0x8c33, 0x56d0, 0xd24a, 0x0, 0x0);
        gbc.writeMem(0x3a65, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xbeb5);
        EXPECT(gbc.pc(), 0x3a67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03D3
        gbc.setState(0x5335, 0xa2fb, 0xb910, 0x8abb, 0xf02c, 0x7222, 0x1, 0x1);
        gbc.writeMem(0x5335, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xa2fb);
        EXPECT(gbc.pc(), 0x5337);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03D4
        gbc.setState(0xd184, 0x58ba, 0x670, 0xff37, 0xe82e, 0x7ac8, 0x1, 0x1);
        gbc.writeMem(0xd184, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x58ba);
        EXPECT(gbc.pc(), 0xd186);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd184), 0xcb);
        EXPECT(gbc.readMem(0xd185), 0xf);
        // CB 0F 03D6
        gbc.setState(0xe309, 0x24de, 0xdbf0, 0x6f01, 0x8782, 0xa2c, 0x1, 0x0);
        gbc.writeMem(0xe309, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x24de);
        EXPECT(gbc.pc(), 0xe30b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe309), 0xcb);
        EXPECT(gbc.readMem(0xe30a), 0xf);
        // CB 0F 03D7
        gbc.setState(0x3356, 0xb5c4, 0x230, 0x893a, 0x6bf2, 0xbe19, 0x1, 0x1);
        gbc.writeMem(0x3356, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xb5c4);
        EXPECT(gbc.pc(), 0x3358);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 03D8
        gbc.setState(0xa268, 0x507e, 0x5230, 0xff4d, 0x49c1, 0x92b1, 0x0, 0x1);
        gbc.writeMem(0xa268, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x507e);
        EXPECT(gbc.pc(), 0xa26a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa268), 0xcb);
        EXPECT(gbc.readMem(0xa269), 0xf);
        // CB 0F 03D9
        gbc.setState(0x5391, 0xedcf, 0xd730, 0x4936, 0xc9b8, 0xd0af, 0x0, 0x0);
        gbc.writeMem(0x5391, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xedcf);
        EXPECT(gbc.pc(), 0x5393);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03DA
        gbc.setState(0x3892, 0xba0b, 0x7fa0, 0x87a5, 0x3818, 0xb264, 0x0, 0x1);
        gbc.writeMem(0x3892, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xba0b);
        EXPECT(gbc.pc(), 0x3894);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03DB
        gbc.setState(0x6bdc, 0x1305, 0xcd70, 0x189d, 0x1d97, 0x4656, 0x1, 0x1);
        gbc.writeMem(0x6bdc, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x1305);
        EXPECT(gbc.pc(), 0x6bde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03DC
        gbc.setState(0x9388, 0x32e8, 0x3120, 0x3efa, 0xaaae, 0x6dca, 0x1, 0x1);
        gbc.writeMem(0x9388, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x32e8);
        EXPECT(gbc.pc(), 0x938a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9388), 0xcb);
        EXPECT(gbc.readMem(0x9389), 0xf);
        // CB 0F 03DD
        gbc.setState(0x8773, 0x3c51, 0x9c70, 0x4779, 0x9406, 0xd737, 0x0, 0x1);
        gbc.writeMem(0x8773, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x3c51);
        EXPECT(gbc.pc(), 0x8775);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8773), 0xcb);
        EXPECT(gbc.readMem(0x8774), 0xf);
        // CB 0F 03DE
        gbc.setState(0x7fdd, 0x7914, 0xf9a0, 0xe8ca, 0x647f, 0xc3a9, 0x1, 0x1);
        gbc.writeMem(0x7fdd, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x7914);
        EXPECT(gbc.pc(), 0x7fdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03DF
        gbc.setState(0xbff7, 0xa3ae, 0xc430, 0xbb22, 0xbb22, 0xc6e4, 0x0, 0x0);
        gbc.writeMem(0xbff7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xa3ae);
        EXPECT(gbc.pc(), 0xbff9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbff7), 0xcb);
        EXPECT(gbc.readMem(0xbff8), 0xf);
        // CB 0F 03E0
        gbc.setState(0x70e7, 0xcf96, 0x57d0, 0x196f, 0xd7c4, 0xb842, 0x0, 0x1);
        gbc.writeMem(0x70e7, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xcf96);
        EXPECT(gbc.pc(), 0x70e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03E1
        gbc.setState(0xa0b9, 0xa88f, 0xf1d0, 0x83c7, 0xec41, 0x87bf, 0x1, 0x0);
        gbc.writeMem(0xa0b9, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xa88f);
        EXPECT(gbc.pc(), 0xa0bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0b9), 0xcb);
        EXPECT(gbc.readMem(0xa0ba), 0xf);
        // CB 0F 03E2
        gbc.setState(0xe63d, 0x3bf8, 0x6b50, 0x718e, 0x533d, 0x23ca, 0x1, 0x1);
        gbc.writeMem(0xe63d, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x3bf8);
        EXPECT(gbc.pc(), 0xe63f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe63d), 0xcb);
        EXPECT(gbc.readMem(0xe63e), 0xf);
        // CB 0F 03E3
        gbc.setState(0x3f54, 0xd107, 0x1b80, 0x9eec, 0x6129, 0xd0eb, 0x1, 0x1);
        gbc.writeMem(0x3f54, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xd107);
        EXPECT(gbc.pc(), 0x3f56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 0F 03E4
        gbc.setState(0x19e8, 0x566, 0x4070, 0x628f, 0xcd8, 0xa489, 0x0, 0x1);
        gbc.writeMem(0x19e8, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x566);
        EXPECT(gbc.pc(), 0x19ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 03E5
        gbc.setState(0xe568, 0x89fc, 0x52d0, 0x375, 0xdfbb, 0x27f6, 0x0, 0x1);
        gbc.writeMem(0xe568, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x89fc);
        EXPECT(gbc.pc(), 0xe56a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe568), 0xcb);
        EXPECT(gbc.readMem(0xe569), 0xf);
        // CB 0F 03E6
        gbc.setState(0x2bd3, 0x1de0, 0x66c0, 0x3b2d, 0xbd8b, 0xa687, 0x0, 0x1);
        gbc.writeMem(0x2bd3, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x1de0);
        EXPECT(gbc.pc(), 0x2bd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 0F 03E7
        gbc.setState(0x79f, 0xfe55, 0xaa70, 0x3c50, 0x769b, 0x7b49, 0x0, 0x1);
        gbc.writeMem(0x79f, { 0xcb, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xfe55);
        EXPECT(gbc.pc(), 0x7a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
    }
}
#endif
