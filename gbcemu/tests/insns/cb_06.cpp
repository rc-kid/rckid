#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_06)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_06) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 06 0000
        gbc.setState(0xd792, 0x230f, 0x2060, 0xc5d6, 0x626a, 0x8c9b, 0x0, 0x1);
        gbc.writeMem(0x8c9b, { 0x3d });
        gbc.writeMem(0xd792, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x230f);
        EXPECT(gbc.pc(), 0xd794);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c9b), 0x7a);
        EXPECT(gbc.readMem(0xd792), 0xcb);
        EXPECT(gbc.readMem(0xd793), 0x6);
        // CB 06 0003
        gbc.setState(0x8d71, 0x3eba, 0x5a70, 0x6c5a, 0x2bf4, 0x9f49, 0x0, 0x0);
        gbc.writeMem(0x8d71, { 0xcb, 0x6 });
        gbc.writeMem(0x9f49, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x3eba);
        EXPECT(gbc.pc(), 0x8d73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d71), 0xcb);
        EXPECT(gbc.readMem(0x8d72), 0x6);
        EXPECT(gbc.readMem(0x9f49), 0x70);
        // CB 06 0007
        gbc.setState(0x3b16, 0x30c, 0xac70, 0x2f76, 0xdddf, 0xa741, 0x0, 0x0);
        gbc.writeMem(0x3b16, { 0xcb, 0x6 });
        gbc.writeMem(0xa741, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x30c);
        EXPECT(gbc.pc(), 0x3b18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa741), 0x97);
        // CB 06 0009
        gbc.setState(0x9909, 0x45d3, 0x4510, 0x8404, 0x8a10, 0xb72b, 0x1, 0x1);
        gbc.writeMem(0x9909, { 0xcb, 0x6 });
        gbc.writeMem(0xb72b, { 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x45d3);
        EXPECT(gbc.pc(), 0x990b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9909), 0xcb);
        EXPECT(gbc.readMem(0x990a), 0x6);
        EXPECT(gbc.readMem(0xb72b), 0x1f);
        // CB 06 000A
        gbc.setState(0x882a, 0x818d, 0xcdb0, 0x685c, 0x904a, 0xcfb1, 0x0, 0x0);
        gbc.writeMem(0x882a, { 0xcb, 0x6 });
        gbc.writeMem(0xcfb1, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x818d);
        EXPECT(gbc.pc(), 0x882c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x882a), 0xcb);
        EXPECT(gbc.readMem(0x882b), 0x6);
        EXPECT(gbc.readMem(0xcfb1), 0x60);
        // CB 06 000C
        gbc.setState(0xeeb6, 0x401f, 0xa990, 0xe6df, 0xd8b9, 0xbeca, 0x0, 0x0);
        gbc.writeMem(0xbeca, { 0x96 });
        gbc.writeMem(0xeeb6, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x401f);
        EXPECT(gbc.pc(), 0xeeb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbeca), 0x2d);
        EXPECT(gbc.readMem(0xeeb6), 0xcb);
        EXPECT(gbc.readMem(0xeeb7), 0x6);
        // CB 06 000F
        gbc.setState(0xa87c, 0xc99b, 0x960, 0x7e17, 0x1fbb, 0x95c3, 0x1, 0x0);
        gbc.writeMem(0x95c3, { 0x1e });
        gbc.writeMem(0xa87c, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xc99b);
        EXPECT(gbc.pc(), 0xa87e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95c3), 0x3c);
        EXPECT(gbc.readMem(0xa87c), 0xcb);
        EXPECT(gbc.readMem(0xa87d), 0x6);
        // CB 06 0011
        gbc.setState(0x8ac9, 0xcd4d, 0x70d0, 0xbf6c, 0xcf4e, 0x9af7, 0x1, 0x1);
        gbc.writeMem(0x8ac9, { 0xcb, 0x6 });
        gbc.writeMem(0x9af7, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xcd4d);
        EXPECT(gbc.pc(), 0x8acb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ac9), 0xcb);
        EXPECT(gbc.readMem(0x8aca), 0x6);
        EXPECT(gbc.readMem(0x9af7), 0x4e);
        // CB 06 0012
        gbc.setState(0x405d, 0xb51a, 0x2fd0, 0x9a2e, 0x59f9, 0xb135, 0x1, 0x0);
        gbc.writeMem(0x405d, { 0xcb, 0x6 });
        gbc.writeMem(0xb135, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xb51a);
        EXPECT(gbc.pc(), 0x405f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb135), 0xae);
        // CB 06 0013
        gbc.setState(0x4222, 0xd99b, 0xf550, 0xa51e, 0x7342, 0xb8b5, 0x1, 0x0);
        gbc.writeMem(0x4222, { 0xcb, 0x6 });
        gbc.writeMem(0xb8b5, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xd99b);
        EXPECT(gbc.pc(), 0x4224);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8b5), 0xa2);
        // CB 06 0017
        gbc.setState(0x98a2, 0x23ed, 0xe050, 0x4b8a, 0x30cd, 0x8f31, 0x1, 0x1);
        gbc.writeMem(0x8f31, { 0xcf });
        gbc.writeMem(0x98a2, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x23ed);
        EXPECT(gbc.pc(), 0x98a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f31), 0x9f);
        EXPECT(gbc.readMem(0x98a2), 0xcb);
        EXPECT(gbc.readMem(0x98a3), 0x6);
        // CB 06 001A
        gbc.setState(0x2342, 0x3295, 0x6f40, 0x3283, 0x5d7b, 0xbc53, 0x1, 0x1);
        gbc.writeMem(0x2342, { 0xcb, 0x6 });
        gbc.writeMem(0xbc53, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x3295);
        EXPECT(gbc.pc(), 0x2344);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc53), 0x66);
        // CB 06 001B
        gbc.setState(0x2cab, 0x66e5, 0xdf90, 0xfca0, 0xd8b0, 0xc484, 0x1, 0x1);
        gbc.writeMem(0x2cab, { 0xcb, 0x6 });
        gbc.writeMem(0xc484, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x66e5);
        EXPECT(gbc.pc(), 0x2cad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc484), 0x1b);
        // CB 06 001E
        gbc.setState(0x3c09, 0x5019, 0x2e80, 0x1111, 0x36b3, 0x8c36, 0x1, 0x0);
        gbc.writeMem(0x3c09, { 0xcb, 0x6 });
        gbc.writeMem(0x8c36, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x5019);
        EXPECT(gbc.pc(), 0x3c0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c36), 0xc9);
        // CB 06 001F
        gbc.setState(0x7dd, 0x7e80, 0x1300, 0x6a74, 0xeb50, 0xebe7, 0x0, 0x0);
        gbc.writeMem(0x7dd, { 0xcb, 0x6 });
        gbc.writeMem(0xebe7, { 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x7e80);
        EXPECT(gbc.pc(), 0x7df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebe7), 0x3);
        // CB 06 0020
        gbc.setState(0x344f, 0x50a0, 0x4c0, 0x8aeb, 0x6102, 0x81a3, 0x1, 0x0);
        gbc.writeMem(0x344f, { 0xcb, 0x6 });
        gbc.writeMem(0x81a3, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x50a0);
        EXPECT(gbc.pc(), 0x3451);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81a3), 0x4e);
        // CB 06 0022
        gbc.setState(0xbdb6, 0xbd04, 0xdec0, 0x999b, 0xbd09, 0xab7d, 0x0, 0x1);
        gbc.writeMem(0xab7d, { 0x7f });
        gbc.writeMem(0xbdb6, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xbd04);
        EXPECT(gbc.pc(), 0xbdb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab7d), 0xfe);
        EXPECT(gbc.readMem(0xbdb6), 0xcb);
        EXPECT(gbc.readMem(0xbdb7), 0x6);
        // CB 06 0029
        gbc.setState(0x14fe, 0xc446, 0x5e00, 0x1dfc, 0xa148, 0xf012, 0x0, 0x1);
        gbc.writeMem(0x14fe, { 0xcb, 0x6 });
        gbc.writeMem(0xf012, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xc446);
        EXPECT(gbc.pc(), 0x1500);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf012), 0xef);
        // CB 06 0030
        gbc.setState(0xc00b, 0xed8, 0x22a0, 0xfc58, 0x8e72, 0xec4e, 0x1, 0x1);
        gbc.writeMem(0xc00b, { 0xcb, 0x6 });
        gbc.writeMem(0xec4e, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xed8);
        EXPECT(gbc.pc(), 0xc00d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc00b), 0xcb);
        EXPECT(gbc.readMem(0xc00c), 0x6);
        EXPECT(gbc.readMem(0xec4e), 0xbf);
        // CB 06 0033
        gbc.setState(0x1fa8, 0x4d53, 0xd230, 0xe5dd, 0xbad4, 0xa7cc, 0x1, 0x1);
        gbc.writeMem(0x1fa8, { 0xcb, 0x6 });
        gbc.writeMem(0xa7cc, { 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x4d53);
        EXPECT(gbc.pc(), 0x1faa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7cc), 0x8d);
        // CB 06 0035
        gbc.setState(0xb986, 0xc11f, 0x9950, 0x9bbd, 0xfa74, 0xd57d, 0x1, 0x1);
        gbc.writeMem(0xb986, { 0xcb, 0x6 });
        gbc.writeMem(0xd57d, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc11f);
        EXPECT(gbc.pc(), 0xb988);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb986), 0xcb);
        EXPECT(gbc.readMem(0xb987), 0x6);
        EXPECT(gbc.readMem(0xd57d), 0x57);
        // CB 06 0036
        gbc.setState(0xa7c3, 0x5e88, 0xca30, 0x55ef, 0xe98e, 0x913b, 0x1, 0x0);
        gbc.writeMem(0x913b, { 0xee });
        gbc.writeMem(0xa7c3, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x5e88);
        EXPECT(gbc.pc(), 0xa7c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x913b), 0xdd);
        EXPECT(gbc.readMem(0xa7c3), 0xcb);
        EXPECT(gbc.readMem(0xa7c4), 0x6);
        // CB 06 0037
        gbc.setState(0x3b0f, 0x2089, 0x7120, 0xe24, 0xe56, 0xe048, 0x0, 0x0);
        gbc.writeMem(0x3b0f, { 0xcb, 0x6 });
        gbc.writeMem(0xe048, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x2089);
        EXPECT(gbc.pc(), 0x3b11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe048), 0x2c);
        // CB 06 003E
        gbc.setState(0x8a3c, 0x9cd9, 0xf7d0, 0x41c9, 0xc58c, 0xc914, 0x0, 0x0);
        gbc.writeMem(0x8a3c, { 0xcb, 0x6 });
        gbc.writeMem(0xc914, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x9cd9);
        EXPECT(gbc.pc(), 0x8a3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a3c), 0xcb);
        EXPECT(gbc.readMem(0x8a3d), 0x6);
        EXPECT(gbc.readMem(0xc914), 0xfc);
        // CB 06 003F
        gbc.setState(0x987e, 0x579e, 0x1f10, 0x7049, 0x43d, 0x8b0f, 0x1, 0x1);
        gbc.writeMem(0x8b0f, { 0xd2 });
        gbc.writeMem(0x987e, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x579e);
        EXPECT(gbc.pc(), 0x9880);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b0f), 0xa5);
        EXPECT(gbc.readMem(0x987e), 0xcb);
        EXPECT(gbc.readMem(0x987f), 0x6);
        // CB 06 0042
        gbc.setState(0x13f6, 0xa95a, 0xdfc0, 0x2ce9, 0xff85, 0xd9ae, 0x1, 0x1);
        gbc.writeMem(0x13f6, { 0xcb, 0x6 });
        gbc.writeMem(0xd9ae, { 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa95a);
        EXPECT(gbc.pc(), 0x13f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9ae), 0xfb);
        // CB 06 0044
        gbc.setState(0x105d, 0x341b, 0x8f30, 0x89ed, 0xfee5, 0xc476, 0x1, 0x0);
        gbc.writeMem(0x105d, { 0xcb, 0x6 });
        gbc.writeMem(0xc476, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x341b);
        EXPECT(gbc.pc(), 0x105f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc476), 0x81);
        // CB 06 0045
        gbc.setState(0x5dfc, 0x8704, 0x76d0, 0xdb62, 0xe8eb, 0xf8ff, 0x0, 0x0);
        gbc.writeMem(0x5dfc, { 0xcb, 0x6 });
        gbc.writeMem(0xf8ff, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x8704);
        EXPECT(gbc.pc(), 0x5dfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf8ff), 0x74);
        // CB 06 0047
        gbc.setState(0xa58b, 0xed04, 0x3340, 0x4114, 0xf5e0, 0xd49d, 0x0, 0x1);
        gbc.writeMem(0xa58b, { 0xcb, 0x6 });
        gbc.writeMem(0xd49d, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xed04);
        EXPECT(gbc.pc(), 0xa58d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa58b), 0xcb);
        EXPECT(gbc.readMem(0xa58c), 0x6);
        EXPECT(gbc.readMem(0xd49d), 0xdd);
        // CB 06 004A
        gbc.setState(0x71f3, 0xdb60, 0xd870, 0x23d, 0xc8e, 0xec40, 0x1, 0x0);
        gbc.writeMem(0x71f3, { 0xcb, 0x6 });
        gbc.writeMem(0xec40, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xdb60);
        EXPECT(gbc.pc(), 0x71f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec40), 0x46);
        // CB 06 004F
        gbc.setState(0xc253, 0x1e00, 0x9660, 0x684a, 0xcf83, 0xe827, 0x0, 0x1);
        gbc.writeMem(0xc253, { 0xcb, 0x6 });
        gbc.writeMem(0xe827, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x1e00);
        EXPECT(gbc.pc(), 0xc255);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc253), 0xcb);
        EXPECT(gbc.readMem(0xc254), 0x6);
        EXPECT(gbc.readMem(0xe827), 0x88);
        // CB 06 0054
        gbc.setState(0xb5f, 0x5c6d, 0xc800, 0x71eb, 0x72e2, 0xc921, 0x1, 0x1);
        gbc.writeMem(0xb5f, { 0xcb, 0x6 });
        gbc.writeMem(0xc921, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x5c6d);
        EXPECT(gbc.pc(), 0xb61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc921), 0xa4);
        // CB 06 0056
        gbc.setState(0x30b1, 0xd03e, 0xfc10, 0x9252, 0x1f14, 0xe649, 0x0, 0x0);
        gbc.writeMem(0x30b1, { 0xcb, 0x6 });
        gbc.writeMem(0xe649, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xd03e);
        EXPECT(gbc.pc(), 0x30b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe649), 0x31);
        // CB 06 005C
        gbc.setState(0x7236, 0x49d, 0xeed0, 0xe42d, 0x2fe2, 0xfd54, 0x0, 0x1);
        gbc.writeMem(0x7236, { 0xcb, 0x6 });
        gbc.writeMem(0xfd54, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x49d);
        EXPECT(gbc.pc(), 0x7238);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfd54), 0xa9);
        // CB 06 005F
        gbc.setState(0x4d46, 0x709e, 0x6fa0, 0xa130, 0x9d1b, 0x9604, 0x0, 0x0);
        gbc.writeMem(0x4d46, { 0xcb, 0x6 });
        gbc.writeMem(0x9604, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x709e);
        EXPECT(gbc.pc(), 0x4d48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9604), 0x92);
        // CB 06 0060
        gbc.setState(0xbcb1, 0x7797, 0x78b0, 0x6f39, 0x1f09, 0xb261, 0x1, 0x0);
        gbc.writeMem(0xb261, { 0xb6 });
        gbc.writeMem(0xbcb1, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x7797);
        EXPECT(gbc.pc(), 0xbcb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb261), 0x6d);
        EXPECT(gbc.readMem(0xbcb1), 0xcb);
        EXPECT(gbc.readMem(0xbcb2), 0x6);
        // CB 06 0061
        gbc.setState(0x5810, 0xdc04, 0x8b80, 0x59b7, 0x23c6, 0xfebc, 0x1, 0x1);
        gbc.writeMem(0x5810, { 0xcb, 0x6 });
        gbc.writeMem(0xfebc, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xdc04);
        EXPECT(gbc.pc(), 0x5812);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfebc), 0xda);
        // CB 06 0062
        gbc.setState(0xa4c9, 0xcc35, 0x4940, 0x841c, 0xfb49, 0xa121, 0x0, 0x1);
        gbc.writeMem(0xa121, { 0xde });
        gbc.writeMem(0xa4c9, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xcc35);
        EXPECT(gbc.pc(), 0xa4cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa121), 0xbd);
        EXPECT(gbc.readMem(0xa4c9), 0xcb);
        EXPECT(gbc.readMem(0xa4ca), 0x6);
        // CB 06 0063
        gbc.setState(0x5ea9, 0xebd6, 0x12a0, 0x3629, 0x2bb0, 0xe145, 0x0, 0x1);
        gbc.writeMem(0x5ea9, { 0xcb, 0x6 });
        gbc.writeMem(0xe145, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xebd6);
        EXPECT(gbc.pc(), 0x5eab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe145), 0xb5);
        // CB 06 0064
        gbc.setState(0x484a, 0xf79f, 0x780, 0x1cd1, 0xa913, 0xc0b2, 0x1, 0x0);
        gbc.writeMem(0x484a, { 0xcb, 0x6 });
        gbc.writeMem(0xc0b2, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xf79f);
        EXPECT(gbc.pc(), 0x484c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0b2), 0x83);
        // CB 06 0067
        gbc.setState(0x27d8, 0x5c43, 0x31d0, 0x1915, 0x2456, 0xdde1, 0x1, 0x1);
        gbc.writeMem(0x27d8, { 0xcb, 0x6 });
        gbc.writeMem(0xdde1, { 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5c43);
        EXPECT(gbc.pc(), 0x27da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdde1), 0x90);
        // CB 06 0068
        gbc.setState(0x7e31, 0x693e, 0x79b0, 0xb11e, 0x5610, 0xbfdf, 0x1, 0x1);
        gbc.writeMem(0x7e31, { 0xcb, 0x6 });
        gbc.writeMem(0xbfdf, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x693e);
        EXPECT(gbc.pc(), 0x7e33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfdf), 0xa4);
        // CB 06 006A
        gbc.setState(0x706a, 0x23fb, 0x6f60, 0x9168, 0x52f0, 0xa8fb, 0x1, 0x1);
        gbc.writeMem(0x706a, { 0xcb, 0x6 });
        gbc.writeMem(0xa8fb, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x23fb);
        EXPECT(gbc.pc(), 0x706c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8fb), 0xec);
        // CB 06 006C
        gbc.setState(0x5aa5, 0x9a30, 0xaf50, 0x3dc1, 0x825f, 0xedd5, 0x1, 0x0);
        gbc.writeMem(0x5aa5, { 0xcb, 0x6 });
        gbc.writeMem(0xedd5, { 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x9a30);
        EXPECT(gbc.pc(), 0x5aa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedd5), 0xd1);
        // CB 06 006D
        gbc.setState(0x5b18, 0xc0c7, 0xfa70, 0x95c2, 0xf3d9, 0x82fa, 0x0, 0x0);
        gbc.writeMem(0x5b18, { 0xcb, 0x6 });
        gbc.writeMem(0x82fa, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc0c7);
        EXPECT(gbc.pc(), 0x5b1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82fa), 0x6);
        // CB 06 006E
        gbc.setState(0x1fe1, 0x952a, 0x47c0, 0xcb4f, 0x8145, 0xc9e3, 0x1, 0x0);
        gbc.writeMem(0x1fe1, { 0xcb, 0x6 });
        gbc.writeMem(0xc9e3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x952a);
        EXPECT(gbc.pc(), 0x1fe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9e3), 0xa8);
        // CB 06 006F
        gbc.setState(0x7ec1, 0x5ca7, 0x8c0, 0x4fce, 0xaead, 0xe206, 0x0, 0x1);
        gbc.writeMem(0x7ec1, { 0xcb, 0x6 });
        gbc.writeMem(0xe206, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x5ca7);
        EXPECT(gbc.pc(), 0x7ec3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe206), 0xf9);
        // CB 06 0070
        gbc.setState(0x9247, 0x5895, 0xf390, 0x3e78, 0x2418, 0x8552, 0x1, 0x1);
        gbc.writeMem(0x8552, { 0xb4 });
        gbc.writeMem(0x9247, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x5895);
        EXPECT(gbc.pc(), 0x9249);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8552), 0x69);
        EXPECT(gbc.readMem(0x9247), 0xcb);
        EXPECT(gbc.readMem(0x9248), 0x6);
        // CB 06 0071
        gbc.setState(0x2ae9, 0xdbbf, 0xa250, 0x58e3, 0x42f6, 0xb76e, 0x0, 0x1);
        gbc.writeMem(0x2ae9, { 0xcb, 0x6 });
        gbc.writeMem(0xb76e, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xdbbf);
        EXPECT(gbc.pc(), 0x2aeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb76e), 0xf5);
        // CB 06 0075
        gbc.setState(0xb288, 0x8916, 0xb780, 0xb2ac, 0x1a4b, 0x8600, 0x1, 0x0);
        gbc.writeMem(0x8600, { 0xb3 });
        gbc.writeMem(0xb288, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8916);
        EXPECT(gbc.pc(), 0xb28a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8600), 0x67);
        EXPECT(gbc.readMem(0xb288), 0xcb);
        EXPECT(gbc.readMem(0xb289), 0x6);
        // CB 06 0077
        gbc.setState(0x77b6, 0xa9ee, 0xb510, 0x7f17, 0x8d59, 0xba3b, 0x1, 0x1);
        gbc.writeMem(0x77b6, { 0xcb, 0x6 });
        gbc.writeMem(0xba3b, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xa9ee);
        EXPECT(gbc.pc(), 0x77b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba3b), 0xf2);
        // CB 06 0078
        gbc.setState(0x4ae0, 0x8842, 0x6c40, 0x548a, 0xec1f, 0x81d0, 0x0, 0x1);
        gbc.writeMem(0x4ae0, { 0xcb, 0x6 });
        gbc.writeMem(0x81d0, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x8842);
        EXPECT(gbc.pc(), 0x4ae2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81d0), 0x3c);
        // CB 06 0079
        gbc.setState(0x9969, 0xe15f, 0xd750, 0xe6b6, 0xa480, 0xb078, 0x1, 0x1);
        gbc.writeMem(0x9969, { 0xcb, 0x6 });
        gbc.writeMem(0xb078, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xe15f);
        EXPECT(gbc.pc(), 0x996b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9969), 0xcb);
        EXPECT(gbc.readMem(0x996a), 0x6);
        EXPECT(gbc.readMem(0xb078), 0xaa);
        // CB 06 007A
        gbc.setState(0xd164, 0xdb91, 0x2dc0, 0x3b0, 0x479c, 0xfdf3, 0x0, 0x0);
        gbc.writeMem(0xd164, { 0xcb, 0x6 });
        gbc.writeMem(0xfdf3, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xdb91);
        EXPECT(gbc.pc(), 0xd166);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd164), 0xcb);
        EXPECT(gbc.readMem(0xd165), 0x6);
        EXPECT(gbc.readMem(0xfdf3), 0x4d);
        // CB 06 007C
        gbc.setState(0x7497, 0x72bf, 0x9e80, 0xf88a, 0x5116, 0x9b01, 0x1, 0x1);
        gbc.writeMem(0x7497, { 0xcb, 0x6 });
        gbc.writeMem(0x9b01, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x72bf);
        EXPECT(gbc.pc(), 0x7499);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b01), 0x7d);
        // CB 06 007D
        gbc.setState(0xab8, 0x5e3c, 0xba0, 0x4dad, 0xe83a, 0xbe83, 0x1, 0x1);
        gbc.writeMem(0xab8, { 0xcb, 0x6 });
        gbc.writeMem(0xbe83, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x5e3c);
        EXPECT(gbc.pc(), 0xaba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe83), 0x7d);
        // CB 06 0085
        gbc.setState(0x81a7, 0x95c1, 0x34c0, 0xa461, 0x640d, 0xe371, 0x1, 0x0);
        gbc.writeMem(0x81a7, { 0xcb, 0x6 });
        gbc.writeMem(0xe371, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x95c1);
        EXPECT(gbc.pc(), 0x81a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81a7), 0xcb);
        EXPECT(gbc.readMem(0x81a8), 0x6);
        EXPECT(gbc.readMem(0xe371), 0xa2);
        // CB 06 0087
        gbc.setState(0x81ae, 0x3206, 0x2190, 0x1530, 0x5dcc, 0xcefb, 0x0, 0x1);
        gbc.writeMem(0x81ae, { 0xcb, 0x6 });
        gbc.writeMem(0xcefb, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x3206);
        EXPECT(gbc.pc(), 0x81b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81ae), 0xcb);
        EXPECT(gbc.readMem(0x81af), 0x6);
        EXPECT(gbc.readMem(0xcefb), 0x74);
        // CB 06 0089
        gbc.setState(0x2c7c, 0x5b05, 0xed50, 0x5543, 0x59c, 0xe1a4, 0x0, 0x1);
        gbc.writeMem(0x2c7c, { 0xcb, 0x6 });
        gbc.writeMem(0xe1a4, { 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x5b05);
        EXPECT(gbc.pc(), 0x2c7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1a4), 0xdf);
        // CB 06 008B
        gbc.setState(0xbd32, 0x9e7c, 0x6340, 0xf0e2, 0xb5ea, 0xe3c4, 0x0, 0x0);
        gbc.writeMem(0xbd32, { 0xcb, 0x6 });
        gbc.writeMem(0xe3c4, { 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x9e7c);
        EXPECT(gbc.pc(), 0xbd34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd32), 0xcb);
        EXPECT(gbc.readMem(0xbd33), 0x6);
        EXPECT(gbc.readMem(0xe3c4), 0x25);
        // CB 06 008E
        gbc.setState(0xd78f, 0x8215, 0xc40, 0x7a35, 0x30e6, 0xb823, 0x1, 0x0);
        gbc.writeMem(0xb823, { 0x38 });
        gbc.writeMem(0xd78f, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x8215);
        EXPECT(gbc.pc(), 0xd791);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb823), 0x70);
        EXPECT(gbc.readMem(0xd78f), 0xcb);
        EXPECT(gbc.readMem(0xd790), 0x6);
        // CB 06 008F
        gbc.setState(0xb03e, 0x3516, 0xaf0, 0xff2a, 0xd559, 0x9dc5, 0x0, 0x1);
        gbc.writeMem(0x9dc5, { 0x0 });
        gbc.writeMem(0xb03e, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x3516);
        EXPECT(gbc.pc(), 0xb040);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dc5), 0x0);
        EXPECT(gbc.readMem(0xb03e), 0xcb);
        EXPECT(gbc.readMem(0xb03f), 0x6);
        // CB 06 0090
        gbc.setState(0xdb0a, 0xb8b6, 0xf7b0, 0x14d2, 0xf614, 0xc061, 0x1, 0x0);
        gbc.writeMem(0xc061, { 0x5a });
        gbc.writeMem(0xdb0a, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xb8b6);
        EXPECT(gbc.pc(), 0xdb0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc061), 0xb4);
        EXPECT(gbc.readMem(0xdb0a), 0xcb);
        EXPECT(gbc.readMem(0xdb0b), 0x6);
        // CB 06 0093
        gbc.setState(0x2870, 0xe589, 0x9510, 0xf70f, 0xd0e8, 0xafa4, 0x0, 0x1);
        gbc.writeMem(0x2870, { 0xcb, 0x6 });
        gbc.writeMem(0xafa4, { 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xe589);
        EXPECT(gbc.pc(), 0x2872);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafa4), 0x75);
        // CB 06 0095
        gbc.setState(0x4e9, 0x898c, 0xd680, 0x3de1, 0xf616, 0xf8b2, 0x1, 0x1);
        gbc.writeMem(0x4e9, { 0xcb, 0x6 });
        gbc.writeMem(0xf8b2, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x898c);
        EXPECT(gbc.pc(), 0x4eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf8b2), 0xcb);
        // CB 06 0097
        gbc.setState(0x3233, 0xdd11, 0x9c00, 0xcfd0, 0xc2a2, 0xab25, 0x1, 0x1);
        gbc.writeMem(0x3233, { 0xcb, 0x6 });
        gbc.writeMem(0xab25, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xdd11);
        EXPECT(gbc.pc(), 0x3235);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab25), 0x93);
        // CB 06 009B
        gbc.setState(0x30a, 0x3a55, 0xb740, 0xa955, 0x4347, 0xc265, 0x0, 0x1);
        gbc.writeMem(0x30a, { 0xcb, 0x6 });
        gbc.writeMem(0xc265, { 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x3a55);
        EXPECT(gbc.pc(), 0x30c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc265), 0x35);
        // CB 06 009C
        gbc.setState(0x1e33, 0xa243, 0x72a0, 0xabe9, 0x9564, 0xea5a, 0x0, 0x0);
        gbc.writeMem(0x1e33, { 0xcb, 0x6 });
        gbc.writeMem(0xea5a, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xa243);
        EXPECT(gbc.pc(), 0x1e35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea5a), 0x58);
        // CB 06 009F
        gbc.setState(0x31ac, 0x3085, 0xc390, 0x380c, 0xc164, 0x9783, 0x1, 0x0);
        gbc.writeMem(0x31ac, { 0xcb, 0x6 });
        gbc.writeMem(0x9783, { 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x3085);
        EXPECT(gbc.pc(), 0x31ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9783), 0x25);
        // CB 06 00A3
        gbc.setState(0x5ff0, 0xc508, 0x47e0, 0x3f50, 0xa0d6, 0x8673, 0x1, 0x1);
        gbc.writeMem(0x5ff0, { 0xcb, 0x6 });
        gbc.writeMem(0x8673, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xc508);
        EXPECT(gbc.pc(), 0x5ff2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8673), 0x4b);
        // CB 06 00A4
        gbc.setState(0xcaad, 0x452f, 0xca50, 0x46c2, 0x77cf, 0xf9f2, 0x1, 0x0);
        gbc.writeMem(0xcaad, { 0xcb, 0x6 });
        gbc.writeMem(0xf9f2, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x452f);
        EXPECT(gbc.pc(), 0xcaaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcaad), 0xcb);
        EXPECT(gbc.readMem(0xcaae), 0x6);
        EXPECT(gbc.readMem(0xf9f2), 0xa3);
        // CB 06 00A5
        gbc.setState(0x6143, 0xd495, 0x8470, 0xcf89, 0x3e88, 0xeef5, 0x1, 0x0);
        gbc.writeMem(0x6143, { 0xcb, 0x6 });
        gbc.writeMem(0xeef5, { 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd495);
        EXPECT(gbc.pc(), 0x6145);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeef5), 0xb3);
        // CB 06 00A6
        gbc.setState(0xb89b, 0x439, 0x9cf0, 0x35e, 0x99a7, 0xc86d, 0x1, 0x0);
        gbc.writeMem(0xb89b, { 0xcb, 0x6 });
        gbc.writeMem(0xc86d, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x439);
        EXPECT(gbc.pc(), 0xb89d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb89b), 0xcb);
        EXPECT(gbc.readMem(0xb89c), 0x6);
        EXPECT(gbc.readMem(0xc86d), 0x44);
        // CB 06 00AB
        gbc.setState(0x6197, 0x9d74, 0x5ae0, 0x6da3, 0x4b56, 0xab37, 0x0, 0x1);
        gbc.writeMem(0x6197, { 0xcb, 0x6 });
        gbc.writeMem(0xab37, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x9d74);
        EXPECT(gbc.pc(), 0x6199);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab37), 0xd);
        // CB 06 00AF
        gbc.setState(0x8270, 0x766a, 0xb810, 0xcb72, 0x65ee, 0x9538, 0x1, 0x1);
        gbc.writeMem(0x8270, { 0xcb, 0x6 });
        gbc.writeMem(0x9538, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x766a);
        EXPECT(gbc.pc(), 0x8272);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8270), 0xcb);
        EXPECT(gbc.readMem(0x8271), 0x6);
        EXPECT(gbc.readMem(0x9538), 0xa3);
        // CB 06 00B3
        gbc.setState(0x42bc, 0x7d0c, 0x8890, 0x82db, 0x9933, 0xbfd9, 0x1, 0x0);
        gbc.writeMem(0x42bc, { 0xcb, 0x6 });
        gbc.writeMem(0xbfd9, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x7d0c);
        EXPECT(gbc.pc(), 0x42be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfd9), 0x83);
        // CB 06 00B6
        gbc.setState(0x97d4, 0x2fda, 0xf9c0, 0x692d, 0x564f, 0xb868, 0x0, 0x0);
        gbc.writeMem(0x97d4, { 0xcb, 0x6 });
        gbc.writeMem(0xb868, { 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x2fda);
        EXPECT(gbc.pc(), 0x97d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97d4), 0xcb);
        EXPECT(gbc.readMem(0x97d5), 0x6);
        EXPECT(gbc.readMem(0xb868), 0xdc);
        // CB 06 00B7
        gbc.setState(0x59c5, 0xc630, 0xf220, 0xde8f, 0x7b81, 0x87f7, 0x1, 0x1);
        gbc.writeMem(0x59c5, { 0xcb, 0x6 });
        gbc.writeMem(0x87f7, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xc630);
        EXPECT(gbc.pc(), 0x59c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87f7), 0x8b);
        // CB 06 00B8
        gbc.setState(0xbf85, 0x59d0, 0x3380, 0xe27, 0xad34, 0xbed5, 0x1, 0x0);
        gbc.writeMem(0xbed5, { 0x6e });
        gbc.writeMem(0xbf85, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x59d0);
        EXPECT(gbc.pc(), 0xbf87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbed5), 0xdc);
        EXPECT(gbc.readMem(0xbf85), 0xcb);
        EXPECT(gbc.readMem(0xbf86), 0x6);
        // CB 06 00B9
        gbc.setState(0x234d, 0xdbc, 0x6760, 0xd234, 0xe074, 0x9933, 0x0, 0x1);
        gbc.writeMem(0x234d, { 0xcb, 0x6 });
        gbc.writeMem(0x9933, { 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xdbc);
        EXPECT(gbc.pc(), 0x234f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9933), 0xa7);
        // CB 06 00BC
        gbc.setState(0xb870, 0x1894, 0xf100, 0x69ce, 0x23dc, 0x8b77, 0x1, 0x0);
        gbc.writeMem(0x8b77, { 0xd9 });
        gbc.writeMem(0xb870, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x1894);
        EXPECT(gbc.pc(), 0xb872);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b77), 0xb3);
        EXPECT(gbc.readMem(0xb870), 0xcb);
        EXPECT(gbc.readMem(0xb871), 0x6);
        // CB 06 00BE
        gbc.setState(0xa068, 0xfca6, 0x63f0, 0xc9cb, 0x390a, 0x9d51, 0x0, 0x0);
        gbc.writeMem(0x9d51, { 0x1f });
        gbc.writeMem(0xa068, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xfca6);
        EXPECT(gbc.pc(), 0xa06a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d51), 0x3e);
        EXPECT(gbc.readMem(0xa068), 0xcb);
        EXPECT(gbc.readMem(0xa069), 0x6);
        // CB 06 00C3
        gbc.setState(0x259d, 0xafd8, 0x40f0, 0x1247, 0xef7f, 0xf5b0, 0x1, 0x1);
        gbc.writeMem(0x259d, { 0xcb, 0x6 });
        gbc.writeMem(0xf5b0, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xafd8);
        EXPECT(gbc.pc(), 0x259f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf5b0), 0x4e);
        // CB 06 00C4
        gbc.setState(0x28f6, 0x255e, 0x6660, 0xf737, 0xd63f, 0xca44, 0x0, 0x0);
        gbc.writeMem(0x28f6, { 0xcb, 0x6 });
        gbc.writeMem(0xca44, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x255e);
        EXPECT(gbc.pc(), 0x28f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca44), 0x4b);
        // CB 06 00CC
        gbc.setState(0x5fad, 0x34ad, 0x5fc0, 0x8b7a, 0x3a16, 0xadeb, 0x0, 0x1);
        gbc.writeMem(0x5fad, { 0xcb, 0x6 });
        gbc.writeMem(0xadeb, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x34ad);
        EXPECT(gbc.pc(), 0x5faf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadeb), 0x2f);
        // CB 06 00CD
        gbc.setState(0x7cbf, 0x5590, 0xdac0, 0x898a, 0xc555, 0xe25a, 0x1, 0x1);
        gbc.writeMem(0x7cbf, { 0xcb, 0x6 });
        gbc.writeMem(0xe25a, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x5590);
        EXPECT(gbc.pc(), 0x7cc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe25a), 0x9f);
        // CB 06 00CE
        gbc.setState(0x6c40, 0xc7f4, 0x94c0, 0x103a, 0xe70, 0xc67c, 0x1, 0x1);
        gbc.writeMem(0x6c40, { 0xcb, 0x6 });
        gbc.writeMem(0xc67c, { 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xc7f4);
        EXPECT(gbc.pc(), 0x6c42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc67c), 0xca);
        // CB 06 00D4
        gbc.setState(0x51f2, 0xeb3e, 0x45b0, 0xd136, 0x68fb, 0xcec8, 0x0, 0x0);
        gbc.writeMem(0x51f2, { 0xcb, 0x6 });
        gbc.writeMem(0xcec8, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xeb3e);
        EXPECT(gbc.pc(), 0x51f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcec8), 0xf9);
        // CB 06 00D6
        gbc.setState(0x6843, 0xdcfa, 0xfb70, 0x276d, 0xe664, 0xeceb, 0x1, 0x0);
        gbc.writeMem(0x6843, { 0xcb, 0x6 });
        gbc.writeMem(0xeceb, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xdcfa);
        EXPECT(gbc.pc(), 0x6845);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeceb), 0x43);
        // CB 06 00D7
        gbc.setState(0x3ce5, 0x8543, 0xb430, 0xce27, 0xf03e, 0xda76, 0x1, 0x1);
        gbc.writeMem(0x3ce5, { 0xcb, 0x6 });
        gbc.writeMem(0xda76, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x8543);
        EXPECT(gbc.pc(), 0x3ce7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda76), 0x24);
        // CB 06 00D8
        gbc.setState(0x5153, 0xbbdb, 0x1b70, 0x598d, 0x6410, 0xa5ba, 0x0, 0x1);
        gbc.writeMem(0x5153, { 0xcb, 0x6 });
        gbc.writeMem(0xa5ba, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xbbdb);
        EXPECT(gbc.pc(), 0x5155);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5ba), 0x46);
        // CB 06 00D9
        gbc.setState(0x8de4, 0xc70, 0x5090, 0x1e56, 0xca23, 0xb12e, 0x0, 0x0);
        gbc.writeMem(0x8de4, { 0xcb, 0x6 });
        gbc.writeMem(0xb12e, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xc70);
        EXPECT(gbc.pc(), 0x8de6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8de4), 0xcb);
        EXPECT(gbc.readMem(0x8de5), 0x6);
        EXPECT(gbc.readMem(0xb12e), 0x97);
        // CB 06 00DC
        gbc.setState(0x59aa, 0xb7d, 0x5a20, 0x1691, 0xadce, 0xb363, 0x1, 0x0);
        gbc.writeMem(0x59aa, { 0xcb, 0x6 });
        gbc.writeMem(0xb363, { 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xb7d);
        EXPECT(gbc.pc(), 0x59ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb363), 0xc5);
        // CB 06 00E1
        gbc.setState(0xa306, 0x9590, 0xddb0, 0x32e2, 0x271b, 0xd44b, 0x0, 0x1);
        gbc.writeMem(0xa306, { 0xcb, 0x6 });
        gbc.writeMem(0xd44b, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x9590);
        EXPECT(gbc.pc(), 0xa308);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa306), 0xcb);
        EXPECT(gbc.readMem(0xa307), 0x6);
        EXPECT(gbc.readMem(0xd44b), 0x46);
        // CB 06 00E4
        gbc.setState(0xb1e6, 0x38fb, 0x9400, 0x1b4e, 0xbe42, 0x8092, 0x1, 0x0);
        gbc.writeMem(0x8092, { 0x30 });
        gbc.writeMem(0xb1e6, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x38fb);
        EXPECT(gbc.pc(), 0xb1e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8092), 0x60);
        EXPECT(gbc.readMem(0xb1e6), 0xcb);
        EXPECT(gbc.readMem(0xb1e7), 0x6);
        // CB 06 00E8
        gbc.setState(0x5ce2, 0x3e1, 0x3030, 0x9887, 0xd479, 0x8ae3, 0x1, 0x1);
        gbc.writeMem(0x5ce2, { 0xcb, 0x6 });
        gbc.writeMem(0x8ae3, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x3e1);
        EXPECT(gbc.pc(), 0x5ce4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ae3), 0x17);
        // CB 06 00EE
        gbc.setState(0x2571, 0x3188, 0x7310, 0x1ac5, 0x57cc, 0xbbf5, 0x0, 0x1);
        gbc.writeMem(0x2571, { 0xcb, 0x6 });
        gbc.writeMem(0xbbf5, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x3188);
        EXPECT(gbc.pc(), 0x2573);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbf5), 0xb0);
        // CB 06 00F2
        gbc.setState(0x6e11, 0x1f34, 0xafa0, 0x9f34, 0xd4f0, 0x8163, 0x1, 0x0);
        gbc.writeMem(0x6e11, { 0xcb, 0x6 });
        gbc.writeMem(0x8163, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1f34);
        EXPECT(gbc.pc(), 0x6e13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8163), 0x84);
        // CB 06 00F3
        gbc.setState(0x58f0, 0x583, 0xf60, 0xf0a8, 0xc21b, 0xee6e, 0x1, 0x0);
        gbc.writeMem(0x58f0, { 0xcb, 0x6 });
        gbc.writeMem(0xee6e, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x583);
        EXPECT(gbc.pc(), 0x58f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee6e), 0xe);
        // CB 06 00F4
        gbc.setState(0x844, 0xe66a, 0xfc60, 0x6988, 0x7faf, 0xbfa3, 0x1, 0x0);
        gbc.writeMem(0x844, { 0xcb, 0x6 });
        gbc.writeMem(0xbfa3, { 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xe66a);
        EXPECT(gbc.pc(), 0x846);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfa3), 0x21);
        // CB 06 00F5
        gbc.setState(0xc164, 0xcb13, 0x6370, 0x8fa0, 0xbc61, 0xc294, 0x0, 0x0);
        gbc.writeMem(0xc164, { 0xcb, 0x6 });
        gbc.writeMem(0xc294, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xcb13);
        EXPECT(gbc.pc(), 0xc166);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc164), 0xcb);
        EXPECT(gbc.readMem(0xc165), 0x6);
        EXPECT(gbc.readMem(0xc294), 0xe1);
        // CB 06 00F8
        gbc.setState(0xa84e, 0xe32b, 0xa790, 0xd072, 0x3106, 0x896a, 0x1, 0x1);
        gbc.writeMem(0x896a, { 0x2e });
        gbc.writeMem(0xa84e, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xe32b);
        EXPECT(gbc.pc(), 0xa850);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x896a), 0x5c);
        EXPECT(gbc.readMem(0xa84e), 0xcb);
        EXPECT(gbc.readMem(0xa84f), 0x6);
        // CB 06 00FA
        gbc.setState(0x3a5a, 0xb0db, 0xa940, 0x1cf1, 0x6860, 0x988a, 0x0, 0x1);
        gbc.writeMem(0x3a5a, { 0xcb, 0x6 });
        gbc.writeMem(0x988a, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xb0db);
        EXPECT(gbc.pc(), 0x3a5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x988a), 0xc7);
        // CB 06 00FB
        gbc.setState(0x60b4, 0xad81, 0x4e20, 0xfca0, 0xb7ff, 0xdfad, 0x0, 0x0);
        gbc.writeMem(0x60b4, { 0xcb, 0x6 });
        gbc.writeMem(0xdfad, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xad81);
        EXPECT(gbc.pc(), 0x60b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfad), 0x92);
        // CB 06 00FD
        gbc.setState(0x9309, 0x8b6b, 0xdf80, 0x616f, 0x3e8a, 0x9da4, 0x1, 0x1);
        gbc.writeMem(0x9309, { 0xcb, 0x6 });
        gbc.writeMem(0x9da4, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x8b6b);
        EXPECT(gbc.pc(), 0x930b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9309), 0xcb);
        EXPECT(gbc.readMem(0x930a), 0x6);
        EXPECT(gbc.readMem(0x9da4), 0x76);
        // CB 06 00FE
        gbc.setState(0xde1b, 0x8661, 0xbf40, 0xec0b, 0x95bb, 0xdbb6, 0x1, 0x0);
        gbc.writeMem(0xdbb6, { 0x76 });
        gbc.writeMem(0xde1b, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x8661);
        EXPECT(gbc.pc(), 0xde1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbb6), 0xec);
        EXPECT(gbc.readMem(0xde1b), 0xcb);
        EXPECT(gbc.readMem(0xde1c), 0x6);
        // CB 06 00FF
        gbc.setState(0xe093, 0x6ed7, 0xb90, 0xafab, 0xd749, 0x966e, 0x1, 0x0);
        gbc.writeMem(0x966e, { 0x5b });
        gbc.writeMem(0xe093, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x6ed7);
        EXPECT(gbc.pc(), 0xe095);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x966e), 0xb6);
        EXPECT(gbc.readMem(0xe093), 0xcb);
        EXPECT(gbc.readMem(0xe094), 0x6);
        // CB 06 0100
        gbc.setState(0xa07, 0x5295, 0xf710, 0x846b, 0x5524, 0x8f89, 0x0, 0x0);
        gbc.writeMem(0xa07, { 0xcb, 0x6 });
        gbc.writeMem(0x8f89, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x5295);
        EXPECT(gbc.pc(), 0xa09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f89), 0x8a);
        // CB 06 0101
        gbc.setState(0x107, 0xbd7c, 0x81c0, 0x1e46, 0x9222, 0x8d49, 0x0, 0x1);
        gbc.writeMem(0x107, { 0xcb, 0x6 });
        gbc.writeMem(0x8d49, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xbd7c);
        EXPECT(gbc.pc(), 0x109);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d49), 0x8a);
        // CB 06 0104
        gbc.setState(0x71ed, 0x4864, 0x5160, 0xc0c6, 0xece0, 0xf801, 0x1, 0x0);
        gbc.writeMem(0x71ed, { 0xcb, 0x6 });
        gbc.writeMem(0xf801, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x4864);
        EXPECT(gbc.pc(), 0x71ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf801), 0x7e);
        // CB 06 0106
        gbc.setState(0xdc4f, 0x2d65, 0x2280, 0x9b31, 0x2dfb, 0x27fb, 0x0, 0x0);
        gbc.writeMem(0x27fb, { 0xff });
        gbc.writeMem(0xdc4f, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x2d65);
        EXPECT(gbc.pc(), 0xdc51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc4f), 0xcb);
        EXPECT(gbc.readMem(0xdc50), 0x6);
        // CB 06 0107
        gbc.setState(0x687, 0xdf22, 0x4050, 0xa5f6, 0xffdd, 0xacff, 0x1, 0x0);
        gbc.writeMem(0x687, { 0xcb, 0x6 });
        gbc.writeMem(0xacff, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xdf22);
        EXPECT(gbc.pc(), 0x689);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacff), 0xbc);
        // CB 06 0108
        gbc.setState(0x3520, 0x7d65, 0x7a70, 0xbcc1, 0x5a92, 0xd727, 0x0, 0x0);
        gbc.writeMem(0x3520, { 0xcb, 0x6 });
        gbc.writeMem(0xd727, { 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x7d65);
        EXPECT(gbc.pc(), 0x3522);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd727), 0x95);
        // CB 06 010A
        gbc.setState(0x761, 0x44b4, 0x7640, 0x446d, 0xd1b7, 0xa889, 0x0, 0x1);
        gbc.writeMem(0x761, { 0xcb, 0x6 });
        gbc.writeMem(0xa889, { 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x44b4);
        EXPECT(gbc.pc(), 0x763);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa889), 0x13);
        // CB 06 010C
        gbc.setState(0x99dd, 0x408c, 0x8f20, 0x871b, 0x50f, 0xb858, 0x0, 0x0);
        gbc.writeMem(0x99dd, { 0xcb, 0x6 });
        gbc.writeMem(0xb858, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x408c);
        EXPECT(gbc.pc(), 0x99df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99dd), 0xcb);
        EXPECT(gbc.readMem(0x99de), 0x6);
        EXPECT(gbc.readMem(0xb858), 0x0);
        // CB 06 0110
        gbc.setState(0x4aee, 0xc81a, 0x98b0, 0x57b2, 0xe8b3, 0x8c0f, 0x1, 0x0);
        gbc.writeMem(0x4aee, { 0xcb, 0x6 });
        gbc.writeMem(0x8c0f, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xc81a);
        EXPECT(gbc.pc(), 0x4af0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c0f), 0x8c);
        // CB 06 0111
        gbc.setState(0xca1a, 0x7335, 0xd240, 0x6b87, 0xb085, 0x95eb, 0x1, 0x1);
        gbc.writeMem(0x95eb, { 0x19 });
        gbc.writeMem(0xca1a, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x7335);
        EXPECT(gbc.pc(), 0xca1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95eb), 0x32);
        EXPECT(gbc.readMem(0xca1a), 0xcb);
        EXPECT(gbc.readMem(0xca1b), 0x6);
        // CB 06 0112
        gbc.setState(0x409, 0x110b, 0x9200, 0xd77d, 0x4683, 0xba84, 0x0, 0x0);
        gbc.writeMem(0x409, { 0xcb, 0x6 });
        gbc.writeMem(0xba84, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x110b);
        EXPECT(gbc.pc(), 0x40b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba84), 0x3b);
        // CB 06 0115
        gbc.setState(0xb014, 0xeda1, 0x8df0, 0xa82c, 0x2d9c, 0xc228, 0x1, 0x1);
        gbc.writeMem(0xb014, { 0xcb, 0x6 });
        gbc.writeMem(0xc228, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xeda1);
        EXPECT(gbc.pc(), 0xb016);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb014), 0xcb);
        EXPECT(gbc.readMem(0xb015), 0x6);
        EXPECT(gbc.readMem(0xc228), 0xbf);
        // CB 06 0117
        gbc.setState(0x1f39, 0xdc8b, 0x5c80, 0x5de7, 0xfd40, 0x929e, 0x0, 0x1);
        gbc.writeMem(0x1f39, { 0xcb, 0x6 });
        gbc.writeMem(0x929e, { 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xdc8b);
        EXPECT(gbc.pc(), 0x1f3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x929e), 0x99);
        // CB 06 011A
        gbc.setState(0x6605, 0xa315, 0xa140, 0x15a1, 0xc057, 0x8840, 0x0, 0x0);
        gbc.writeMem(0x6605, { 0xcb, 0x6 });
        gbc.writeMem(0x8840, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xa315);
        EXPECT(gbc.pc(), 0x6607);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8840), 0x4);
        // CB 06 011C
        gbc.setState(0xcb8b, 0xcd32, 0x4170, 0xabdc, 0xd261, 0xdfe1, 0x0, 0x1);
        gbc.writeMem(0xcb8b, { 0xcb, 0x6 });
        gbc.writeMem(0xdfe1, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xcd32);
        EXPECT(gbc.pc(), 0xcb8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb8b), 0xcb);
        EXPECT(gbc.readMem(0xcb8c), 0x6);
        EXPECT(gbc.readMem(0xdfe1), 0xf);
        // CB 06 011F
        gbc.setState(0x9b24, 0x331e, 0x72d0, 0xde8f, 0x7c1a, 0xc9ad, 0x1, 0x1);
        gbc.writeMem(0x9b24, { 0xcb, 0x6 });
        gbc.writeMem(0xc9ad, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x331e);
        EXPECT(gbc.pc(), 0x9b26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b24), 0xcb);
        EXPECT(gbc.readMem(0x9b25), 0x6);
        EXPECT(gbc.readMem(0xc9ad), 0x60);
        // CB 06 0121
        gbc.setState(0x2cf6, 0xdb6f, 0x8ba0, 0xe0e3, 0xfa0d, 0xd8ae, 0x0, 0x1);
        gbc.writeMem(0x2cf6, { 0xcb, 0x6 });
        gbc.writeMem(0xd8ae, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xdb6f);
        EXPECT(gbc.pc(), 0x2cf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8ae), 0xa4);
        // CB 06 0122
        gbc.setState(0x3217, 0xfeec, 0x4580, 0x8788, 0x8376, 0x9a28, 0x1, 0x0);
        gbc.writeMem(0x3217, { 0xcb, 0x6 });
        gbc.writeMem(0x9a28, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xfeec);
        EXPECT(gbc.pc(), 0x3219);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a28), 0x50);
        // CB 06 0123
        gbc.setState(0x957c, 0x27e2, 0x4640, 0x3867, 0xd2be, 0xca55, 0x1, 0x0);
        gbc.writeMem(0x957c, { 0xcb, 0x6 });
        gbc.writeMem(0xca55, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x27e2);
        EXPECT(gbc.pc(), 0x957e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x957c), 0xcb);
        EXPECT(gbc.readMem(0x957d), 0x6);
        EXPECT(gbc.readMem(0xca55), 0x22);
        // CB 06 0124
        gbc.setState(0x33e3, 0x8537, 0xc170, 0xc5ae, 0xfaad, 0x8501, 0x0, 0x0);
        gbc.writeMem(0x33e3, { 0xcb, 0x6 });
        gbc.writeMem(0x8501, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x8537);
        EXPECT(gbc.pc(), 0x33e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8501), 0xcd);
        // CB 06 0129
        gbc.setState(0xa53a, 0x7b76, 0x81e0, 0x1243, 0x42f2, 0xdc2b, 0x1, 0x1);
        gbc.writeMem(0xa53a, { 0xcb, 0x6 });
        gbc.writeMem(0xdc2b, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x7b76);
        EXPECT(gbc.pc(), 0xa53c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa53a), 0xcb);
        EXPECT(gbc.readMem(0xa53b), 0x6);
        EXPECT(gbc.readMem(0xdc2b), 0x2e);
        // CB 06 012A
        gbc.setState(0xd5c8, 0xf599, 0x12b0, 0x61a2, 0x96e2, 0x90db, 0x1, 0x1);
        gbc.writeMem(0x90db, { 0xcf });
        gbc.writeMem(0xd5c8, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xf599);
        EXPECT(gbc.pc(), 0xd5ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90db), 0x9f);
        EXPECT(gbc.readMem(0xd5c8), 0xcb);
        EXPECT(gbc.readMem(0xd5c9), 0x6);
        // CB 06 012C
        gbc.setState(0xab3b, 0xc7cf, 0x6500, 0xb836, 0x2a6d, 0xc095, 0x0, 0x1);
        gbc.writeMem(0xab3b, { 0xcb, 0x6 });
        gbc.writeMem(0xc095, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xc7cf);
        EXPECT(gbc.pc(), 0xab3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab3b), 0xcb);
        EXPECT(gbc.readMem(0xab3c), 0x6);
        EXPECT(gbc.readMem(0xc095), 0x94);
        // CB 06 012D
        gbc.setState(0xd739, 0x81c, 0x1d80, 0xca2c, 0xedb0, 0x91b9, 0x0, 0x0);
        gbc.writeMem(0x91b9, { 0x20 });
        gbc.writeMem(0xd739, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x81c);
        EXPECT(gbc.pc(), 0xd73b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91b9), 0x40);
        EXPECT(gbc.readMem(0xd739), 0xcb);
        EXPECT(gbc.readMem(0xd73a), 0x6);
        // CB 06 012F
        gbc.setState(0xb6f, 0xa195, 0x14e0, 0x1a7a, 0xd643, 0x8524, 0x1, 0x0);
        gbc.writeMem(0xb6f, { 0xcb, 0x6 });
        gbc.writeMem(0x8524, { 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xa195);
        EXPECT(gbc.pc(), 0xb71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8524), 0xfa);
        // CB 06 0130
        gbc.setState(0xcabe, 0x2b5a, 0x8c80, 0x47a7, 0xda83, 0xb036, 0x1, 0x1);
        gbc.writeMem(0xb036, { 0xc8 });
        gbc.writeMem(0xcabe, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x2b5a);
        EXPECT(gbc.pc(), 0xcac0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb036), 0x91);
        EXPECT(gbc.readMem(0xcabe), 0xcb);
        EXPECT(gbc.readMem(0xcabf), 0x6);
        // CB 06 0135
        gbc.setState(0x44a2, 0xb336, 0x3a50, 0x7616, 0xf009, 0xdac5, 0x0, 0x0);
        gbc.writeMem(0x44a2, { 0xcb, 0x6 });
        gbc.writeMem(0xdac5, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xb336);
        EXPECT(gbc.pc(), 0x44a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdac5), 0xda);
        // CB 06 0136
        gbc.setState(0xa7d7, 0xb16a, 0xe660, 0x17bd, 0xc835, 0xdb11, 0x1, 0x1);
        gbc.writeMem(0xa7d7, { 0xcb, 0x6 });
        gbc.writeMem(0xdb11, { 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xb16a);
        EXPECT(gbc.pc(), 0xa7d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7d7), 0xcb);
        EXPECT(gbc.readMem(0xa7d8), 0x6);
        EXPECT(gbc.readMem(0xdb11), 0x61);
        // CB 06 0137
        gbc.setState(0xb770, 0x34cb, 0x9c50, 0xe4f1, 0x80f1, 0xde96, 0x0, 0x0);
        gbc.writeMem(0xb770, { 0xcb, 0x6 });
        gbc.writeMem(0xde96, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x34cb);
        EXPECT(gbc.pc(), 0xb772);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb770), 0xcb);
        EXPECT(gbc.readMem(0xb771), 0x6);
        EXPECT(gbc.readMem(0xde96), 0x6d);
        // CB 06 013C
        gbc.setState(0x3ffb, 0x508d, 0x54a0, 0xdfc9, 0x1959, 0xa310, 0x1, 0x1);
        gbc.writeMem(0x3ffb, { 0xcb, 0x6 });
        gbc.writeMem(0xa310, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x508d);
        EXPECT(gbc.pc(), 0x3ffd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa310), 0xb5);
        // CB 06 013F
        gbc.setState(0xd797, 0xfe29, 0x6480, 0x234b, 0xa2ab, 0xe86c, 0x1, 0x0);
        gbc.writeMem(0xd797, { 0xcb, 0x6 });
        gbc.writeMem(0xe86c, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xfe29);
        EXPECT(gbc.pc(), 0xd799);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd797), 0xcb);
        EXPECT(gbc.readMem(0xd798), 0x6);
        EXPECT(gbc.readMem(0xe86c), 0x7f);
        // CB 06 0144
        gbc.setState(0x4a6a, 0xbd96, 0x20f0, 0xeb94, 0xea9c, 0xa312, 0x1, 0x1);
        gbc.writeMem(0x4a6a, { 0xcb, 0x6 });
        gbc.writeMem(0xa312, { 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xbd96);
        EXPECT(gbc.pc(), 0x4a6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa312), 0xbe);
        // CB 06 0147
        gbc.setState(0xb5af, 0xc617, 0xa80, 0x6ed7, 0xeac2, 0xe1d9, 0x1, 0x1);
        gbc.writeMem(0xb5af, { 0xcb, 0x6 });
        gbc.writeMem(0xe1d9, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xc617);
        EXPECT(gbc.pc(), 0xb5b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5af), 0xcb);
        EXPECT(gbc.readMem(0xb5b0), 0x6);
        EXPECT(gbc.readMem(0xe1d9), 0x6a);
        // CB 06 0148
        gbc.setState(0x4722, 0x36c8, 0x590, 0x962f, 0x1457, 0xf15c, 0x1, 0x0);
        gbc.writeMem(0x4722, { 0xcb, 0x6 });
        gbc.writeMem(0xf15c, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x36c8);
        EXPECT(gbc.pc(), 0x4724);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf15c), 0x47);
        // CB 06 014B
        gbc.setState(0x97c6, 0x895, 0x5d00, 0x9eef, 0x6a3f, 0xcc60, 0x0, 0x0);
        gbc.writeMem(0x97c6, { 0xcb, 0x6 });
        gbc.writeMem(0xcc60, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x895);
        EXPECT(gbc.pc(), 0x97c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97c6), 0xcb);
        EXPECT(gbc.readMem(0x97c7), 0x6);
        EXPECT(gbc.readMem(0xcc60), 0xf3);
        // CB 06 014E
        gbc.setState(0x1c95, 0xc39f, 0xe00, 0x6154, 0x2199, 0xf795, 0x1, 0x1);
        gbc.writeMem(0x1c95, { 0xcb, 0x6 });
        gbc.writeMem(0xf795, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xc39f);
        EXPECT(gbc.pc(), 0x1c97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf795), 0xcc);
        // CB 06 0150
        gbc.setState(0x386a, 0xefba, 0x40d0, 0xa2d8, 0xac23, 0xaa71, 0x0, 0x0);
        gbc.writeMem(0x386a, { 0xcb, 0x6 });
        gbc.writeMem(0xaa71, { 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xefba);
        EXPECT(gbc.pc(), 0x386c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa71), 0x61);
        // CB 06 0151
        gbc.setState(0x8052, 0x3260, 0x8fd0, 0xa27e, 0x8924, 0x964f, 0x0, 0x1);
        gbc.writeMem(0x8052, { 0xcb, 0x6 });
        gbc.writeMem(0x964f, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x3260);
        EXPECT(gbc.pc(), 0x8054);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8052), 0xcb);
        EXPECT(gbc.readMem(0x8053), 0x6);
        EXPECT(gbc.readMem(0x964f), 0xad);
        // CB 06 0155
        gbc.setState(0xd070, 0x96a3, 0x5bc0, 0x90fe, 0x5b54, 0xb731, 0x0, 0x1);
        gbc.writeMem(0xb731, { 0x56 });
        gbc.writeMem(0xd070, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x96a3);
        EXPECT(gbc.pc(), 0xd072);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb731), 0xac);
        EXPECT(gbc.readMem(0xd070), 0xcb);
        EXPECT(gbc.readMem(0xd071), 0x6);
        // CB 06 0158
        gbc.setState(0xc331, 0x68db, 0x4d30, 0xa2d5, 0xdaea, 0xeb66, 0x0, 0x1);
        gbc.writeMem(0xc331, { 0xcb, 0x6 });
        gbc.writeMem(0xeb66, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x68db);
        EXPECT(gbc.pc(), 0xc333);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc331), 0xcb);
        EXPECT(gbc.readMem(0xc332), 0x6);
        EXPECT(gbc.readMem(0xeb66), 0x18);
        // CB 06 0159
        gbc.setState(0x9ed1, 0xa362, 0x28e0, 0xd067, 0xe8ca, 0x995f, 0x0, 0x1);
        gbc.writeMem(0x995f, { 0xbc });
        gbc.writeMem(0x9ed1, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xa362);
        EXPECT(gbc.pc(), 0x9ed3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x995f), 0x79);
        EXPECT(gbc.readMem(0x9ed1), 0xcb);
        EXPECT(gbc.readMem(0x9ed2), 0x6);
        // CB 06 015B
        gbc.setState(0x178e, 0xfd88, 0xba40, 0xf60c, 0x2bda, 0x9006, 0x0, 0x0);
        gbc.writeMem(0x178e, { 0xcb, 0x6 });
        gbc.writeMem(0x9006, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xfd88);
        EXPECT(gbc.pc(), 0x1790);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9006), 0xdb);
        // CB 06 015C
        gbc.setState(0xd030, 0x8e57, 0xdd60, 0x772e, 0x9aaf, 0xd543, 0x0, 0x0);
        gbc.writeMem(0xd030, { 0xcb, 0x6 });
        gbc.writeMem(0xd543, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x8e57);
        EXPECT(gbc.pc(), 0xd032);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd030), 0xcb);
        EXPECT(gbc.readMem(0xd031), 0x6);
        EXPECT(gbc.readMem(0xd543), 0xec);
        // CB 06 015D
        gbc.setState(0x89f, 0x4fce, 0x5610, 0x5c88, 0xe812, 0x90b0, 0x0, 0x1);
        gbc.writeMem(0x89f, { 0xcb, 0x6 });
        gbc.writeMem(0x90b0, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x4fce);
        EXPECT(gbc.pc(), 0x8a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90b0), 0x8f);
        // CB 06 015E
        gbc.setState(0x258d, 0x5d51, 0x7c40, 0xcee5, 0x341a, 0x94a3, 0x0, 0x1);
        gbc.writeMem(0x258d, { 0xcb, 0x6 });
        gbc.writeMem(0x94a3, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x5d51);
        EXPECT(gbc.pc(), 0x258f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94a3), 0x9b);
        // CB 06 015F
        gbc.setState(0x9cb1, 0xcd67, 0x8e40, 0xd9c5, 0xb55f, 0xcb1c, 0x0, 0x1);
        gbc.writeMem(0x9cb1, { 0xcb, 0x6 });
        gbc.writeMem(0xcb1c, { 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xcd67);
        EXPECT(gbc.pc(), 0x9cb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cb1), 0xcb);
        EXPECT(gbc.readMem(0x9cb2), 0x6);
        EXPECT(gbc.readMem(0xcb1c), 0xe2);
        // CB 06 0162
        gbc.setState(0xef93, 0xbb83, 0x83b0, 0xbf7e, 0xb24c, 0x8e65, 0x1, 0x0);
        gbc.writeMem(0x8e65, { 0x99 });
        gbc.writeMem(0xef93, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xbb83);
        EXPECT(gbc.pc(), 0xef95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e65), 0x33);
        EXPECT(gbc.readMem(0xef93), 0xcb);
        EXPECT(gbc.readMem(0xef94), 0x6);
        // CB 06 0164
        gbc.setState(0x6dd9, 0xb1c1, 0x7940, 0xf9e7, 0xbe23, 0x92a6, 0x0, 0x1);
        gbc.writeMem(0x6dd9, { 0xcb, 0x6 });
        gbc.writeMem(0x92a6, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xb1c1);
        EXPECT(gbc.pc(), 0x6ddb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92a6), 0x7d);
        // CB 06 0167
        gbc.setState(0xaa25, 0x4a27, 0xa000, 0x823b, 0x2583, 0xe77c, 0x0, 0x1);
        gbc.writeMem(0xaa25, { 0xcb, 0x6 });
        gbc.writeMem(0xe77c, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x4a27);
        EXPECT(gbc.pc(), 0xaa27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa25), 0xcb);
        EXPECT(gbc.readMem(0xaa26), 0x6);
        EXPECT(gbc.readMem(0xe77c), 0x58);
        // CB 06 016B
        gbc.setState(0x9f1a, 0x5db3, 0x6320, 0x2a92, 0x5d78, 0xb23a, 0x0, 0x1);
        gbc.writeMem(0x9f1a, { 0xcb, 0x6 });
        gbc.writeMem(0xb23a, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x5db3);
        EXPECT(gbc.pc(), 0x9f1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f1a), 0xcb);
        EXPECT(gbc.readMem(0x9f1b), 0x6);
        EXPECT(gbc.readMem(0xb23a), 0x20);
        // CB 06 016D
        gbc.setState(0x1f6f, 0xdee3, 0x7b90, 0x9fb8, 0xefc4, 0xd84d, 0x1, 0x0);
        gbc.writeMem(0x1f6f, { 0xcb, 0x6 });
        gbc.writeMem(0xd84d, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xdee3);
        EXPECT(gbc.pc(), 0x1f71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd84d), 0x50);
        // CB 06 0171
        gbc.setState(0x1220, 0x64ef, 0xed0, 0x75a3, 0xf0a, 0xa191, 0x1, 0x1);
        gbc.writeMem(0x1220, { 0xcb, 0x6 });
        gbc.writeMem(0xa191, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x64ef);
        EXPECT(gbc.pc(), 0x1222);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa191), 0x7d);
        // CB 06 0173
        gbc.setState(0xe16b, 0x2f4c, 0x3310, 0xc9f0, 0x2e6e, 0x8b15, 0x1, 0x1);
        gbc.writeMem(0x8b15, { 0x25 });
        gbc.writeMem(0xe16b, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x2f4c);
        EXPECT(gbc.pc(), 0xe16d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b15), 0x4a);
        EXPECT(gbc.readMem(0xe16b), 0xcb);
        EXPECT(gbc.readMem(0xe16c), 0x6);
        // CB 06 0176
        gbc.setState(0xeacd, 0xc82, 0x4b20, 0xd227, 0x5387, 0xc39f, 0x1, 0x1);
        gbc.writeMem(0xc39f, { 0xd8 });
        gbc.writeMem(0xeacd, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xc82);
        EXPECT(gbc.pc(), 0xeacf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc39f), 0xb1);
        EXPECT(gbc.readMem(0xeacd), 0xcb);
        EXPECT(gbc.readMem(0xeace), 0x6);
        // CB 06 0179
        gbc.setState(0xe5ef, 0x3dfb, 0x2480, 0xf5a5, 0x6018, 0xba9f, 0x0, 0x0);
        gbc.writeMem(0xba9f, { 0xc5 });
        gbc.writeMem(0xe5ef, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x3dfb);
        EXPECT(gbc.pc(), 0xe5f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba9f), 0x8b);
        EXPECT(gbc.readMem(0xe5ef), 0xcb);
        EXPECT(gbc.readMem(0xe5f0), 0x6);
        // CB 06 017A
        gbc.setState(0x85ac, 0xb279, 0xb5d0, 0x3d97, 0x21db, 0xafaf, 0x1, 0x0);
        gbc.writeMem(0x85ac, { 0xcb, 0x6 });
        gbc.writeMem(0xafaf, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xb279);
        EXPECT(gbc.pc(), 0x85ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85ac), 0xcb);
        EXPECT(gbc.readMem(0x85ad), 0x6);
        EXPECT(gbc.readMem(0xafaf), 0x47);
        // CB 06 017C
        gbc.setState(0x80a9, 0x3f91, 0x5260, 0xa23e, 0x24d8, 0xd8d1, 0x1, 0x0);
        gbc.writeMem(0x80a9, { 0xcb, 0x6 });
        gbc.writeMem(0xd8d1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x3f91);
        EXPECT(gbc.pc(), 0x80ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80a9), 0xcb);
        EXPECT(gbc.readMem(0x80aa), 0x6);
        EXPECT(gbc.readMem(0xd8d1), 0x9a);
        // CB 06 017D
        gbc.setState(0x7dd6, 0x4979, 0x42e0, 0x8d03, 0xfe3d, 0xc663, 0x1, 0x1);
        gbc.writeMem(0x7dd6, { 0xcb, 0x6 });
        gbc.writeMem(0xc663, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x4979);
        EXPECT(gbc.pc(), 0x7dd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc663), 0x92);
        // CB 06 017F
        gbc.setState(0xbb62, 0x2432, 0xac60, 0x9067, 0x975b, 0xd6e4, 0x0, 0x0);
        gbc.writeMem(0xbb62, { 0xcb, 0x6 });
        gbc.writeMem(0xd6e4, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x2432);
        EXPECT(gbc.pc(), 0xbb64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb62), 0xcb);
        EXPECT(gbc.readMem(0xbb63), 0x6);
        EXPECT(gbc.readMem(0xd6e4), 0x98);
        // CB 06 0182
        gbc.setState(0xec0b, 0x7ac9, 0x3430, 0x1dac, 0x42ba, 0xf8ab, 0x1, 0x0);
        gbc.writeMem(0xec0b, { 0xcb, 0x6 });
        gbc.writeMem(0xf8ab, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7ac9);
        EXPECT(gbc.pc(), 0xec0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec0b), 0xcb);
        EXPECT(gbc.readMem(0xec0c), 0x6);
        EXPECT(gbc.readMem(0xf8ab), 0x9e);
        // CB 06 0183
        gbc.setState(0x5610, 0x51de, 0xefe0, 0xda24, 0xc6b9, 0xe090, 0x1, 0x1);
        gbc.writeMem(0x5610, { 0xcb, 0x6 });
        gbc.writeMem(0xe090, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x51de);
        EXPECT(gbc.pc(), 0x5612);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe090), 0x3c);
        // CB 06 0184
        gbc.setState(0x64af, 0xef35, 0xc430, 0xf4e9, 0xf6eb, 0xf30f, 0x1, 0x0);
        gbc.writeMem(0x64af, { 0xcb, 0x6 });
        gbc.writeMem(0xf30f, { 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xef35);
        EXPECT(gbc.pc(), 0x64b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf30f), 0x61);
        // CB 06 0185
        gbc.setState(0x6713, 0x7ad5, 0x63f0, 0xc097, 0x624b, 0xae55, 0x0, 0x0);
        gbc.writeMem(0x6713, { 0xcb, 0x6 });
        gbc.writeMem(0xae55, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x7ad5);
        EXPECT(gbc.pc(), 0x6715);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae55), 0x14);
        // CB 06 0187
        gbc.setState(0xccac, 0x86eb, 0x5ff0, 0x56c8, 0x76d, 0x8078, 0x1, 0x1);
        gbc.writeMem(0x8078, { 0xac });
        gbc.writeMem(0xccac, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x86eb);
        EXPECT(gbc.pc(), 0xccae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8078), 0x59);
        EXPECT(gbc.readMem(0xccac), 0xcb);
        EXPECT(gbc.readMem(0xccad), 0x6);
        // CB 06 0189
        gbc.setState(0x77a6, 0x580d, 0x3790, 0xd19f, 0x7332, 0x937d, 0x1, 0x1);
        gbc.writeMem(0x77a6, { 0xcb, 0x6 });
        gbc.writeMem(0x937d, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x580d);
        EXPECT(gbc.pc(), 0x77a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x937d), 0xd9);
        // CB 06 018B
        gbc.setState(0x5f15, 0x7619, 0xc390, 0x9a05, 0x101f, 0xf891, 0x0, 0x1);
        gbc.writeMem(0x5f15, { 0xcb, 0x6 });
        gbc.writeMem(0xf891, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x7619);
        EXPECT(gbc.pc(), 0x5f17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf891), 0xe9);
        // CB 06 018D
        gbc.setState(0x717f, 0x3eb0, 0x5420, 0x29f7, 0xf363, 0x8aea, 0x0, 0x0);
        gbc.writeMem(0x717f, { 0xcb, 0x6 });
        gbc.writeMem(0x8aea, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x3eb0);
        EXPECT(gbc.pc(), 0x7181);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aea), 0xd6);
        // CB 06 018E
        gbc.setState(0xf3, 0x7ac9, 0xe110, 0x9df8, 0xa4f3, 0xae14, 0x0, 0x1);
        gbc.writeMem(0xf3, { 0xcb, 0x6 });
        gbc.writeMem(0xae14, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x7ac9);
        EXPECT(gbc.pc(), 0xf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae14), 0x85);
        // CB 06 0191
        gbc.setState(0x3290, 0x55ba, 0x5450, 0x24cb, 0x24d6, 0xe35c, 0x1, 0x0);
        gbc.writeMem(0x3290, { 0xcb, 0x6 });
        gbc.writeMem(0xe35c, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x55ba);
        EXPECT(gbc.pc(), 0x3292);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe35c), 0x47);
        // CB 06 0195
        gbc.setState(0x822a, 0x28ce, 0xf00, 0xcf61, 0xc6bb, 0xf77d, 0x0, 0x0);
        gbc.writeMem(0x822a, { 0xcb, 0x6 });
        gbc.writeMem(0xf77d, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x28ce);
        EXPECT(gbc.pc(), 0x822c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x822a), 0xcb);
        EXPECT(gbc.readMem(0x822b), 0x6);
        EXPECT(gbc.readMem(0xf77d), 0xeb);
        // CB 06 0196
        gbc.setState(0x82b6, 0xd208, 0x9ed0, 0xc95c, 0x4263, 0xdfa9, 0x0, 0x0);
        gbc.writeMem(0x82b6, { 0xcb, 0x6 });
        gbc.writeMem(0xdfa9, { 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xd208);
        EXPECT(gbc.pc(), 0x82b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82b6), 0xcb);
        EXPECT(gbc.readMem(0x82b7), 0x6);
        EXPECT(gbc.readMem(0xdfa9), 0x75);
        // CB 06 0198
        gbc.setState(0x3eef, 0x5c47, 0xfe30, 0x90e3, 0x9b90, 0x8cb6, 0x1, 0x0);
        gbc.writeMem(0x3eef, { 0xcb, 0x6 });
        gbc.writeMem(0x8cb6, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x5c47);
        EXPECT(gbc.pc(), 0x3ef1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cb6), 0x56);
        // CB 06 0199
        gbc.setState(0x71fb, 0xd6b9, 0xf6f0, 0x7877, 0xb078, 0x9f6f, 0x1, 0x0);
        gbc.writeMem(0x71fb, { 0xcb, 0x6 });
        gbc.writeMem(0x9f6f, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xd6b9);
        EXPECT(gbc.pc(), 0x71fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f6f), 0x4f);
        // CB 06 019A
        gbc.setState(0xefd, 0x4179, 0x9f10, 0x4091, 0x9da3, 0xd045, 0x1, 0x1);
        gbc.writeMem(0xefd, { 0xcb, 0x6 });
        gbc.writeMem(0xd045, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x4179);
        EXPECT(gbc.pc(), 0xeff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd045), 0x50);
        // CB 06 019B
        gbc.setState(0x861f, 0xf141, 0xcdb0, 0x698, 0x4c26, 0xe3cf, 0x0, 0x1);
        gbc.writeMem(0x861f, { 0xcb, 0x6 });
        gbc.writeMem(0xe3cf, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xf141);
        EXPECT(gbc.pc(), 0x8621);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x861f), 0xcb);
        EXPECT(gbc.readMem(0x8620), 0x6);
        EXPECT(gbc.readMem(0xe3cf), 0x49);
        // CB 06 019C
        gbc.setState(0x2b68, 0x9b12, 0xc4a0, 0xc395, 0xb791, 0xf4ac, 0x0, 0x1);
        gbc.writeMem(0x2b68, { 0xcb, 0x6 });
        gbc.writeMem(0xf4ac, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x9b12);
        EXPECT(gbc.pc(), 0x2b6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf4ac), 0x63);
        // CB 06 019D
        gbc.setState(0x738d, 0x8e27, 0x4ec0, 0x46f5, 0x1e9d, 0xb2b2, 0x0, 0x0);
        gbc.writeMem(0x738d, { 0xcb, 0x6 });
        gbc.writeMem(0xb2b2, { 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x8e27);
        EXPECT(gbc.pc(), 0x738f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2b2), 0x86);
        // CB 06 019F
        gbc.setState(0x8722, 0x4c23, 0x9730, 0x7cec, 0xd99a, 0xbf22, 0x1, 0x1);
        gbc.writeMem(0x8722, { 0xcb, 0x6 });
        gbc.writeMem(0xbf22, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x4c23);
        EXPECT(gbc.pc(), 0x8724);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8722), 0xcb);
        EXPECT(gbc.readMem(0x8723), 0x6);
        EXPECT(gbc.readMem(0xbf22), 0xb6);
        // CB 06 01A1
        gbc.setState(0xbdc, 0x80b, 0xb3c0, 0x78cd, 0x8493, 0x9ccd, 0x1, 0x0);
        gbc.writeMem(0xbdc, { 0xcb, 0x6 });
        gbc.writeMem(0x9ccd, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x80b);
        EXPECT(gbc.pc(), 0xbde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ccd), 0xb1);
        // CB 06 01A2
        gbc.setState(0x3e86, 0xa93f, 0xac30, 0x625a, 0x6790, 0x9655, 0x1, 0x1);
        gbc.writeMem(0x3e86, { 0xcb, 0x6 });
        gbc.writeMem(0x9655, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xa93f);
        EXPECT(gbc.pc(), 0x3e88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9655), 0xbf);
        // CB 06 01A4
        gbc.setState(0xcf11, 0x4647, 0x4be0, 0xfe1b, 0xeab3, 0xe60b, 0x1, 0x1);
        gbc.writeMem(0xcf11, { 0xcb, 0x6 });
        gbc.writeMem(0xe60b, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x4647);
        EXPECT(gbc.pc(), 0xcf13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf11), 0xcb);
        EXPECT(gbc.readMem(0xcf12), 0x6);
        EXPECT(gbc.readMem(0xe60b), 0x24);
        // CB 06 01AA
        gbc.setState(0x2691, 0xc8a4, 0x3da0, 0x3664, 0xfdca, 0xf930, 0x0, 0x1);
        gbc.writeMem(0x2691, { 0xcb, 0x6 });
        gbc.writeMem(0xf930, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xc8a4);
        EXPECT(gbc.pc(), 0x2693);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf930), 0x20);
        // CB 06 01AC
        gbc.setState(0xd30f, 0xeae8, 0x93d0, 0x536a, 0x47f8, 0xadb6, 0x0, 0x1);
        gbc.writeMem(0xadb6, { 0x84 });
        gbc.writeMem(0xd30f, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xeae8);
        EXPECT(gbc.pc(), 0xd311);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadb6), 0x9);
        EXPECT(gbc.readMem(0xd30f), 0xcb);
        EXPECT(gbc.readMem(0xd310), 0x6);
        // CB 06 01AE
        gbc.setState(0x3b00, 0xb4b9, 0x4b10, 0xb80c, 0xe835, 0xa3f9, 0x1, 0x1);
        gbc.writeMem(0x3b00, { 0xcb, 0x6 });
        gbc.writeMem(0xa3f9, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xb4b9);
        EXPECT(gbc.pc(), 0x3b02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3f9), 0x77);
        // CB 06 01B2
        gbc.setState(0x6125, 0xe79d, 0x33a0, 0x8e06, 0xfb15, 0xa10e, 0x0, 0x0);
        gbc.writeMem(0x6125, { 0xcb, 0x6 });
        gbc.writeMem(0xa10e, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xe79d);
        EXPECT(gbc.pc(), 0x6127);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa10e), 0xb2);
        // CB 06 01B4
        gbc.setState(0xa88e, 0x9714, 0xbe60, 0x2a1, 0x42f0, 0xe57d, 0x1, 0x1);
        gbc.writeMem(0xa88e, { 0xcb, 0x6 });
        gbc.writeMem(0xe57d, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x9714);
        EXPECT(gbc.pc(), 0xa890);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa88e), 0xcb);
        EXPECT(gbc.readMem(0xa88f), 0x6);
        EXPECT(gbc.readMem(0xe57d), 0xe0);
        // CB 06 01B8
        gbc.setState(0xbd9, 0x3bb3, 0x5870, 0x847b, 0xdd4e, 0xab99, 0x0, 0x0);
        gbc.writeMem(0xbd9, { 0xcb, 0x6 });
        gbc.writeMem(0xab99, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x3bb3);
        EXPECT(gbc.pc(), 0xbdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab99), 0x8);
        // CB 06 01B9
        gbc.setState(0x559b, 0xd840, 0xeb80, 0x56a5, 0x8b39, 0xf186, 0x1, 0x1);
        gbc.writeMem(0x559b, { 0xcb, 0x6 });
        gbc.writeMem(0xf186, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xd840);
        EXPECT(gbc.pc(), 0x559d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf186), 0x6e);
        // CB 06 01BB
        gbc.setState(0xb01a, 0x40c2, 0x6da0, 0x55e9, 0xe8f0, 0xe76b, 0x1, 0x1);
        gbc.writeMem(0xb01a, { 0xcb, 0x6 });
        gbc.writeMem(0xe76b, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x40c2);
        EXPECT(gbc.pc(), 0xb01c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb01a), 0xcb);
        EXPECT(gbc.readMem(0xb01b), 0x6);
        EXPECT(gbc.readMem(0xe76b), 0x93);
        // CB 06 01BE
        gbc.setState(0x862b, 0x83b1, 0xeb20, 0x6b1, 0xebfe, 0xb7dd, 0x1, 0x0);
        gbc.writeMem(0x862b, { 0xcb, 0x6 });
        gbc.writeMem(0xb7dd, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x83b1);
        EXPECT(gbc.pc(), 0x862d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x862b), 0xcb);
        EXPECT(gbc.readMem(0x862c), 0x6);
        EXPECT(gbc.readMem(0xb7dd), 0x50);
        // CB 06 01C0
        gbc.setState(0x242a, 0xa1c, 0x4630, 0x775c, 0x9988, 0x8199, 0x1, 0x1);
        gbc.writeMem(0x242a, { 0xcb, 0x6 });
        gbc.writeMem(0x8199, { 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xa1c);
        EXPECT(gbc.pc(), 0x242c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8199), 0x91);
        // CB 06 01C5
        gbc.setState(0xda76, 0xd2da, 0x7790, 0x8648, 0x540, 0xc1ed, 0x0, 0x1);
        gbc.writeMem(0xc1ed, { 0xc5 });
        gbc.writeMem(0xda76, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xd2da);
        EXPECT(gbc.pc(), 0xda78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1ed), 0x8b);
        EXPECT(gbc.readMem(0xda76), 0xcb);
        EXPECT(gbc.readMem(0xda77), 0x6);
        // CB 06 01C8
        gbc.setState(0x9eb9, 0x4a24, 0xd9c0, 0x38f7, 0x92f4, 0xf8c0, 0x1, 0x0);
        gbc.writeMem(0x9eb9, { 0xcb, 0x6 });
        gbc.writeMem(0xf8c0, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x4a24);
        EXPECT(gbc.pc(), 0x9ebb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9eb9), 0xcb);
        EXPECT(gbc.readMem(0x9eba), 0x6);
        EXPECT(gbc.readMem(0xf8c0), 0xa5);
        // CB 06 01CA
        gbc.setState(0x5cd8, 0xfd54, 0xc150, 0x9efe, 0xf817, 0xd7ca, 0x1, 0x0);
        gbc.writeMem(0x5cd8, { 0xcb, 0x6 });
        gbc.writeMem(0xd7ca, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xfd54);
        EXPECT(gbc.pc(), 0x5cda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7ca), 0x9);
        // CB 06 01CB
        gbc.setState(0x2e66, 0x902f, 0x2cf0, 0x9d8c, 0xa6c0, 0xc6dd, 0x1, 0x1);
        gbc.writeMem(0x2e66, { 0xcb, 0x6 });
        gbc.writeMem(0xc6dd, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x902f);
        EXPECT(gbc.pc(), 0x2e68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6dd), 0x53);
        // CB 06 01D2
        gbc.setState(0xe00e, 0xf92, 0x6670, 0x961c, 0x9750, 0xc24e, 0x0, 0x1);
        gbc.writeMem(0xc24e, { 0x12 });
        gbc.writeMem(0xe00e, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xf92);
        EXPECT(gbc.pc(), 0xe010);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc24e), 0x24);
        EXPECT(gbc.readMem(0xe00e), 0xcb);
        EXPECT(gbc.readMem(0xe00f), 0x6);
        // CB 06 01D7
        gbc.setState(0x773e, 0x9bfa, 0x270, 0xcdcf, 0x50cf, 0xc266, 0x0, 0x0);
        gbc.writeMem(0x773e, { 0xcb, 0x6 });
        gbc.writeMem(0xc266, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x9bfa);
        EXPECT(gbc.pc(), 0x7740);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc266), 0x51);
        // CB 06 01DA
        gbc.setState(0x431a, 0x69f2, 0xac90, 0x3fd8, 0x1d04, 0xbeb0, 0x1, 0x0);
        gbc.writeMem(0x431a, { 0xcb, 0x6 });
        gbc.writeMem(0xbeb0, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x69f2);
        EXPECT(gbc.pc(), 0x431c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbeb0), 0x9);
        // CB 06 01DB
        gbc.setState(0xbe8c, 0x1705, 0x92a0, 0x2c65, 0x3bca, 0xd964, 0x0, 0x0);
        gbc.writeMem(0xbe8c, { 0xcb, 0x6 });
        gbc.writeMem(0xd964, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x1705);
        EXPECT(gbc.pc(), 0xbe8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe8c), 0xcb);
        EXPECT(gbc.readMem(0xbe8d), 0x6);
        EXPECT(gbc.readMem(0xd964), 0xd4);
        // CB 06 01DC
        gbc.setState(0x8e00, 0xbf14, 0x6b80, 0x10ae, 0x7864, 0x84ee, 0x1, 0x1);
        gbc.writeMem(0x84ee, { 0xd4 });
        gbc.writeMem(0x8e00, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xbf14);
        EXPECT(gbc.pc(), 0x8e02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84ee), 0xa9);
        EXPECT(gbc.readMem(0x8e00), 0xcb);
        EXPECT(gbc.readMem(0x8e01), 0x6);
        // CB 06 01E0
        gbc.setState(0xcef, 0xb29d, 0x2d70, 0x44cf, 0xf6e2, 0xe455, 0x0, 0x1);
        gbc.writeMem(0xcef, { 0xcb, 0x6 });
        gbc.writeMem(0xe455, { 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xb29d);
        EXPECT(gbc.pc(), 0xcf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe455), 0xce);
        // CB 06 01E2
        gbc.setState(0xda1f, 0xf2d8, 0x19e0, 0xe66f, 0xd37b, 0xe882, 0x1, 0x0);
        gbc.writeMem(0xda1f, { 0xcb, 0x6 });
        gbc.writeMem(0xe882, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xf2d8);
        EXPECT(gbc.pc(), 0xda21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda1f), 0xcb);
        EXPECT(gbc.readMem(0xda20), 0x6);
        EXPECT(gbc.readMem(0xe882), 0x87);
        // CB 06 01E4
        gbc.setState(0xd9a9, 0x599d, 0x9ff0, 0xf6f0, 0x27f3, 0xc8c4, 0x1, 0x0);
        gbc.writeMem(0xc8c4, { 0xf2 });
        gbc.writeMem(0xd9a9, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x599d);
        EXPECT(gbc.pc(), 0xd9ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8c4), 0xe5);
        EXPECT(gbc.readMem(0xd9a9), 0xcb);
        EXPECT(gbc.readMem(0xd9aa), 0x6);
        // CB 06 01E7
        gbc.setState(0x259c, 0xf5cd, 0x7fe0, 0xd03f, 0x4b94, 0xa081, 0x0, 0x0);
        gbc.writeMem(0x259c, { 0xcb, 0x6 });
        gbc.writeMem(0xa081, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xf5cd);
        EXPECT(gbc.pc(), 0x259e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa081), 0xf5);
        // CB 06 01E8
        gbc.setState(0x8f76, 0x5717, 0xc850, 0xba48, 0xdfe0, 0xf09c, 0x1, 0x0);
        gbc.writeMem(0x8f76, { 0xcb, 0x6 });
        gbc.writeMem(0xf09c, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x5717);
        EXPECT(gbc.pc(), 0x8f78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f76), 0xcb);
        EXPECT(gbc.readMem(0x8f77), 0x6);
        EXPECT(gbc.readMem(0xf09c), 0xe7);
        // CB 06 01EA
        gbc.setState(0x1b8a, 0x8188, 0x96d0, 0x8991, 0xe9d8, 0xc26d, 0x0, 0x0);
        gbc.writeMem(0x1b8a, { 0xcb, 0x6 });
        gbc.writeMem(0xc26d, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x8188);
        EXPECT(gbc.pc(), 0x1b8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc26d), 0xcb);
        // CB 06 01EB
        gbc.setState(0xb8a5, 0xdf0f, 0x9320, 0xed01, 0x5118, 0xbdee, 0x1, 0x0);
        gbc.writeMem(0xb8a5, { 0xcb, 0x6 });
        gbc.writeMem(0xbdee, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xdf0f);
        EXPECT(gbc.pc(), 0xb8a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8a5), 0xcb);
        EXPECT(gbc.readMem(0xb8a6), 0x6);
        EXPECT(gbc.readMem(0xbdee), 0xf9);
        // CB 06 01ED
        gbc.setState(0x372f, 0xd46b, 0x6460, 0xcb5f, 0x7308, 0xcc75, 0x0, 0x1);
        gbc.writeMem(0x372f, { 0xcb, 0x6 });
        gbc.writeMem(0xcc75, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xd46b);
        EXPECT(gbc.pc(), 0x3731);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc75), 0x82);
        // CB 06 01EE
        gbc.setState(0xdbd6, 0x9d29, 0x1cf0, 0x7acb, 0x725, 0xcb58, 0x1, 0x1);
        gbc.writeMem(0xcb58, { 0x4a });
        gbc.writeMem(0xdbd6, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x9d29);
        EXPECT(gbc.pc(), 0xdbd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb58), 0x94);
        EXPECT(gbc.readMem(0xdbd6), 0xcb);
        EXPECT(gbc.readMem(0xdbd7), 0x6);
        // CB 06 01EF
        gbc.setState(0x8f47, 0x1ece, 0xfff0, 0x2cc3, 0x45ef, 0xba47, 0x0, 0x0);
        gbc.writeMem(0x8f47, { 0xcb, 0x6 });
        gbc.writeMem(0xba47, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x1ece);
        EXPECT(gbc.pc(), 0x8f49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f47), 0xcb);
        EXPECT(gbc.readMem(0x8f48), 0x6);
        EXPECT(gbc.readMem(0xba47), 0xf3);
        // CB 06 01F1
        gbc.setState(0x5f39, 0xd18b, 0x5870, 0xb1eb, 0x4bb3, 0xe305, 0x1, 0x1);
        gbc.writeMem(0x5f39, { 0xcb, 0x6 });
        gbc.writeMem(0xe305, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xd18b);
        EXPECT(gbc.pc(), 0x5f3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe305), 0xc8);
        // CB 06 01F5
        gbc.setState(0x4541, 0xdb0c, 0x6730, 0x3221, 0xb3f8, 0x85be, 0x1, 0x0);
        gbc.writeMem(0x4541, { 0xcb, 0x6 });
        gbc.writeMem(0x85be, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xdb0c);
        EXPECT(gbc.pc(), 0x4543);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85be), 0x48);
        // CB 06 01F6
        gbc.setState(0xce46, 0xa2ae, 0x7880, 0x8623, 0x79a4, 0xb5bc, 0x0, 0x1);
        gbc.writeMem(0xb5bc, { 0x79 });
        gbc.writeMem(0xce46, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xa2ae);
        EXPECT(gbc.pc(), 0xce48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5bc), 0xf2);
        EXPECT(gbc.readMem(0xce46), 0xcb);
        EXPECT(gbc.readMem(0xce47), 0x6);
        // CB 06 01F7
        gbc.setState(0x8132, 0x5027, 0x1bf0, 0x26ba, 0x9250, 0x8bd0, 0x0, 0x1);
        gbc.writeMem(0x8132, { 0xcb, 0x6 });
        gbc.writeMem(0x8bd0, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x5027);
        EXPECT(gbc.pc(), 0x8134);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8132), 0xcb);
        EXPECT(gbc.readMem(0x8133), 0x6);
        EXPECT(gbc.readMem(0x8bd0), 0xf3);
        // CB 06 01F8
        gbc.setState(0x5c3, 0x581a, 0x3030, 0x2198, 0x58fc, 0xd888, 0x0, 0x1);
        gbc.writeMem(0x5c3, { 0xcb, 0x6 });
        gbc.writeMem(0xd888, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x581a);
        EXPECT(gbc.pc(), 0x5c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd888), 0xb7);
        // CB 06 01FC
        gbc.setState(0x54a, 0x1ab7, 0x66d0, 0x33e9, 0xc2d7, 0xd406, 0x1, 0x0);
        gbc.writeMem(0x54a, { 0xcb, 0x6 });
        gbc.writeMem(0xd406, { 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x1ab7);
        EXPECT(gbc.pc(), 0x54c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd406), 0x40);
        // CB 06 0201
        gbc.setState(0xcb58, 0x262e, 0x99a0, 0x688d, 0x2e29, 0xa6c2, 0x1, 0x1);
        gbc.writeMem(0xa6c2, { 0x5d });
        gbc.writeMem(0xcb58, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x262e);
        EXPECT(gbc.pc(), 0xcb5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6c2), 0xba);
        EXPECT(gbc.readMem(0xcb58), 0xcb);
        EXPECT(gbc.readMem(0xcb59), 0x6);
        // CB 06 0202
        gbc.setState(0xd709, 0xcf2f, 0xaa0, 0xc0f0, 0xb589, 0xe3f4, 0x0, 0x0);
        gbc.writeMem(0xd709, { 0xcb, 0x6 });
        gbc.writeMem(0xe3f4, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xcf2f);
        EXPECT(gbc.pc(), 0xd70b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd709), 0xcb);
        EXPECT(gbc.readMem(0xd70a), 0x6);
        EXPECT(gbc.readMem(0xe3f4), 0xc4);
        // CB 06 0205
        gbc.setState(0xb31f, 0x3b0c, 0xaa20, 0x4425, 0x54ef, 0xc22f, 0x1, 0x0);
        gbc.writeMem(0xb31f, { 0xcb, 0x6 });
        gbc.writeMem(0xc22f, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x3b0c);
        EXPECT(gbc.pc(), 0xb321);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb31f), 0xcb);
        EXPECT(gbc.readMem(0xb320), 0x6);
        EXPECT(gbc.readMem(0xc22f), 0x3e);
        // CB 06 0209
        gbc.setState(0xee00, 0x650, 0x2d40, 0xb7e5, 0x7c76, 0xc71a, 0x0, 0x1);
        gbc.writeMem(0xc71a, { 0x68 });
        gbc.writeMem(0xee00, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x650);
        EXPECT(gbc.pc(), 0xee02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc71a), 0xd0);
        EXPECT(gbc.readMem(0xee00), 0xcb);
        EXPECT(gbc.readMem(0xee01), 0x6);
        // CB 06 020A
        gbc.setState(0xc5a7, 0xe9e7, 0x3480, 0xa231, 0xf1b6, 0xb379, 0x0, 0x0);
        gbc.writeMem(0xb379, { 0x3f });
        gbc.writeMem(0xc5a7, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xe9e7);
        EXPECT(gbc.pc(), 0xc5a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb379), 0x7e);
        EXPECT(gbc.readMem(0xc5a7), 0xcb);
        EXPECT(gbc.readMem(0xc5a8), 0x6);
        // CB 06 020B
        gbc.setState(0x5755, 0xab8a, 0xc750, 0x3c7d, 0x4aa3, 0x86ea, 0x1, 0x0);
        gbc.writeMem(0x5755, { 0xcb, 0x6 });
        gbc.writeMem(0x86ea, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xab8a);
        EXPECT(gbc.pc(), 0x5757);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86ea), 0xc1);
        // CB 06 020D
        gbc.setState(0x7cbb, 0x7558, 0xaba0, 0xe973, 0xdffb, 0x9cfe, 0x0, 0x0);
        gbc.writeMem(0x7cbb, { 0xcb, 0x6 });
        gbc.writeMem(0x9cfe, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x7558);
        EXPECT(gbc.pc(), 0x7cbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cfe), 0xbc);
        // CB 06 020F
        gbc.setState(0x8591, 0x8d0b, 0x4a0, 0xe306, 0xf9e6, 0xdd25, 0x0, 0x1);
        gbc.writeMem(0x8591, { 0xcb, 0x6 });
        gbc.writeMem(0xdd25, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x8d0b);
        EXPECT(gbc.pc(), 0x8593);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8591), 0xcb);
        EXPECT(gbc.readMem(0x8592), 0x6);
        EXPECT(gbc.readMem(0xdd25), 0x9a);
        // CB 06 0210
        gbc.setState(0x283c, 0x8b82, 0x6550, 0xa401, 0x3480, 0xad56, 0x0, 0x1);
        gbc.writeMem(0x283c, { 0xcb, 0x6 });
        gbc.writeMem(0xad56, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8b82);
        EXPECT(gbc.pc(), 0x283e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad56), 0xec);
        // CB 06 0211
        gbc.setState(0x1116, 0x9e6d, 0x83d0, 0x3179, 0x67d3, 0xeb36, 0x1, 0x1);
        gbc.writeMem(0x1116, { 0xcb, 0x6 });
        gbc.writeMem(0xeb36, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x9e6d);
        EXPECT(gbc.pc(), 0x1118);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb36), 0x70);
        // CB 06 0216
        gbc.setState(0x230, 0x4c42, 0x1070, 0xce5, 0x92ff, 0xebb6, 0x0, 0x1);
        gbc.writeMem(0x230, { 0xcb, 0x6 });
        gbc.writeMem(0xebb6, { 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x4c42);
        EXPECT(gbc.pc(), 0x232);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebb6), 0x61);
        // CB 06 0218
        gbc.setState(0x7a00, 0x472a, 0xadc0, 0x9f77, 0x3d9e, 0x8fee, 0x0, 0x0);
        gbc.writeMem(0x7a00, { 0xcb, 0x6 });
        gbc.writeMem(0x8fee, { 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x472a);
        EXPECT(gbc.pc(), 0x7a02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fee), 0xe2);
        // CB 06 021A
        gbc.setState(0xcbbe, 0x4275, 0xf9d0, 0x91cf, 0xf9f9, 0xbeb7, 0x0, 0x1);
        gbc.writeMem(0xbeb7, { 0xd5 });
        gbc.writeMem(0xcbbe, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x4275);
        EXPECT(gbc.pc(), 0xcbc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbeb7), 0xab);
        EXPECT(gbc.readMem(0xcbbe), 0xcb);
        EXPECT(gbc.readMem(0xcbbf), 0x6);
        // CB 06 021F
        gbc.setState(0x715a, 0x198c, 0xcf90, 0x9876, 0xaacf, 0x9b07, 0x0, 0x1);
        gbc.writeMem(0x715a, { 0xcb, 0x6 });
        gbc.writeMem(0x9b07, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x198c);
        EXPECT(gbc.pc(), 0x715c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b07), 0xc7);
        // CB 06 0222
        gbc.setState(0xcff4, 0xc7e2, 0xb350, 0x61b5, 0x76e4, 0xba25, 0x1, 0x1);
        gbc.writeMem(0xba25, { 0xb8 });
        gbc.writeMem(0xcff4, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xc7e2);
        EXPECT(gbc.pc(), 0xcff6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba25), 0x71);
        EXPECT(gbc.readMem(0xcff4), 0xcb);
        EXPECT(gbc.readMem(0xcff5), 0x6);
        // CB 06 0223
        gbc.setState(0x6b78, 0x6d9b, 0x90f0, 0x554c, 0x9482, 0x9e6e, 0x0, 0x1);
        gbc.writeMem(0x6b78, { 0xcb, 0x6 });
        gbc.writeMem(0x9e6e, { 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x6d9b);
        EXPECT(gbc.pc(), 0x6b7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e6e), 0x4c);
        // CB 06 0227
        gbc.setState(0xc96f, 0x7060, 0xfc30, 0xce0e, 0xaff8, 0xd19a, 0x0, 0x1);
        gbc.writeMem(0xc96f, { 0xcb, 0x6 });
        gbc.writeMem(0xd19a, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x7060);
        EXPECT(gbc.pc(), 0xc971);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc96f), 0xcb);
        EXPECT(gbc.readMem(0xc970), 0x6);
        EXPECT(gbc.readMem(0xd19a), 0xd);
        // CB 06 0228
        gbc.setState(0x24d3, 0xf460, 0x48c0, 0x37e6, 0xb60b, 0x8a69, 0x1, 0x0);
        gbc.writeMem(0x24d3, { 0xcb, 0x6 });
        gbc.writeMem(0x8a69, { 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xf460);
        EXPECT(gbc.pc(), 0x24d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a69), 0x10);
        // CB 06 0229
        gbc.setState(0x4cc5, 0xa870, 0x3640, 0xcdc7, 0xe312, 0xe4a4, 0x1, 0x1);
        gbc.writeMem(0x4cc5, { 0xcb, 0x6 });
        gbc.writeMem(0xe4a4, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xa870);
        EXPECT(gbc.pc(), 0x4cc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4a4), 0xee);
        // CB 06 022A
        gbc.setState(0x7da2, 0x9d4c, 0x4940, 0x94d8, 0x82d4, 0xdf5d, 0x1, 0x0);
        gbc.writeMem(0x7da2, { 0xcb, 0x6 });
        gbc.writeMem(0xdf5d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x9d4c);
        EXPECT(gbc.pc(), 0x7da4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf5d), 0x8e);
        // CB 06 022C
        gbc.setState(0x4f5a, 0xff2, 0x9cc0, 0xa4fc, 0x23d3, 0xe88c, 0x0, 0x1);
        gbc.writeMem(0x4f5a, { 0xcb, 0x6 });
        gbc.writeMem(0xe88c, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xff2);
        EXPECT(gbc.pc(), 0x4f5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe88c), 0x49);
        // CB 06 0232
        gbc.setState(0x44a1, 0x954a, 0x8160, 0x8ad3, 0xdb, 0x8680, 0x0, 0x1);
        gbc.writeMem(0x44a1, { 0xcb, 0x6 });
        gbc.writeMem(0x8680, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x954a);
        EXPECT(gbc.pc(), 0x44a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8680), 0xef);
        // CB 06 0234
        gbc.setState(0x11e1, 0xab09, 0x7510, 0xcb43, 0xc46d, 0xb130, 0x0, 0x0);
        gbc.writeMem(0x11e1, { 0xcb, 0x6 });
        gbc.writeMem(0xb130, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xab09);
        EXPECT(gbc.pc(), 0x11e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb130), 0xd7);
        // CB 06 0237
        gbc.setState(0x715a, 0x414a, 0x6590, 0xa5e0, 0xe6e1, 0xfaa8, 0x0, 0x1);
        gbc.writeMem(0x715a, { 0xcb, 0x6 });
        gbc.writeMem(0xfaa8, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x414a);
        EXPECT(gbc.pc(), 0x715c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfaa8), 0xec);
        // CB 06 023A
        gbc.setState(0x11ac, 0x901a, 0xab00, 0xb9bc, 0xd6e9, 0x976d, 0x1, 0x0);
        gbc.writeMem(0x11ac, { 0xcb, 0x6 });
        gbc.writeMem(0x976d, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x901a);
        EXPECT(gbc.pc(), 0x11ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x976d), 0x6f);
        // CB 06 023B
        gbc.setState(0xa9d0, 0xb52e, 0xb500, 0xf363, 0xc9c6, 0xdd7a, 0x1, 0x0);
        gbc.writeMem(0xa9d0, { 0xcb, 0x6 });
        gbc.writeMem(0xdd7a, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xb52e);
        EXPECT(gbc.pc(), 0xa9d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9d0), 0xcb);
        EXPECT(gbc.readMem(0xa9d1), 0x6);
        EXPECT(gbc.readMem(0xdd7a), 0x1b);
        // CB 06 023E
        gbc.setState(0xef7a, 0x24e, 0x9b80, 0x24c7, 0xac52, 0xdce7, 0x1, 0x1);
        gbc.writeMem(0xdce7, { 0x61 });
        gbc.writeMem(0xef7a, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x24e);
        EXPECT(gbc.pc(), 0xef7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdce7), 0xc2);
        EXPECT(gbc.readMem(0xef7a), 0xcb);
        EXPECT(gbc.readMem(0xef7b), 0x6);
        // CB 06 0240
        gbc.setState(0x1ed4, 0x6d9d, 0x2be0, 0x219f, 0xcdd0, 0xda3b, 0x1, 0x0);
        gbc.writeMem(0x1ed4, { 0xcb, 0x6 });
        gbc.writeMem(0xda3b, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x6d9d);
        EXPECT(gbc.pc(), 0x1ed6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda3b), 0x20);
        // CB 06 0241
        gbc.setState(0x4fc7, 0xa37, 0x9830, 0x2b8e, 0x8a97, 0xc1a3, 0x0, 0x1);
        gbc.writeMem(0x4fc7, { 0xcb, 0x6 });
        gbc.writeMem(0xc1a3, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xa37);
        EXPECT(gbc.pc(), 0x4fc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1a3), 0xda);
        // CB 06 0242
        gbc.setState(0x19ce, 0xc392, 0xe620, 0x8f43, 0xf497, 0xc8eb, 0x0, 0x0);
        gbc.writeMem(0x19ce, { 0xcb, 0x6 });
        gbc.writeMem(0xc8eb, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xc392);
        EXPECT(gbc.pc(), 0x19d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8eb), 0xc6);
        // CB 06 0244
        gbc.setState(0xa052, 0xbaac, 0xdf20, 0x58b8, 0x7eed, 0x9bdc, 0x1, 0x0);
        gbc.writeMem(0x9bdc, { 0x43 });
        gbc.writeMem(0xa052, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xbaac);
        EXPECT(gbc.pc(), 0xa054);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bdc), 0x86);
        EXPECT(gbc.readMem(0xa052), 0xcb);
        EXPECT(gbc.readMem(0xa053), 0x6);
        // CB 06 0246
        gbc.setState(0xc05c, 0xcd23, 0x8090, 0x903a, 0x503d, 0xc763, 0x1, 0x1);
        gbc.writeMem(0xc05c, { 0xcb, 0x6 });
        gbc.writeMem(0xc763, { 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xcd23);
        EXPECT(gbc.pc(), 0xc05e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc05c), 0xcb);
        EXPECT(gbc.readMem(0xc05d), 0x6);
        EXPECT(gbc.readMem(0xc763), 0xfb);
        // CB 06 0247
        gbc.setState(0x63c2, 0x2e79, 0x4b90, 0xa629, 0xd387, 0xc56e, 0x0, 0x1);
        gbc.writeMem(0x63c2, { 0xcb, 0x6 });
        gbc.writeMem(0xc56e, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x2e79);
        EXPECT(gbc.pc(), 0x63c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc56e), 0xa3);
        // CB 06 024B
        gbc.setState(0xc384, 0x4652, 0x2c30, 0xa6bd, 0x3c15, 0xc5c8, 0x1, 0x0);
        gbc.writeMem(0xc384, { 0xcb, 0x6 });
        gbc.writeMem(0xc5c8, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x4652);
        EXPECT(gbc.pc(), 0xc386);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc384), 0xcb);
        EXPECT(gbc.readMem(0xc385), 0x6);
        EXPECT(gbc.readMem(0xc5c8), 0x1e);
        // CB 06 024D
        gbc.setState(0xed53, 0xac16, 0xc860, 0x3e97, 0xfaef, 0xba97, 0x0, 0x1);
        gbc.writeMem(0xba97, { 0xe5 });
        gbc.writeMem(0xed53, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xac16);
        EXPECT(gbc.pc(), 0xed55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba97), 0xcb);
        EXPECT(gbc.readMem(0xed53), 0xcb);
        EXPECT(gbc.readMem(0xed54), 0x6);
        // CB 06 024F
        gbc.setState(0x3135, 0x94ce, 0xc8b0, 0x22f7, 0x98ee, 0xcc27, 0x1, 0x0);
        gbc.writeMem(0x3135, { 0xcb, 0x6 });
        gbc.writeMem(0xcc27, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x94ce);
        EXPECT(gbc.pc(), 0x3137);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc27), 0xbf);
        // CB 06 0251
        gbc.setState(0xa60d, 0xf828, 0x7370, 0x5bd5, 0xcbae, 0x8dd9, 0x0, 0x1);
        gbc.writeMem(0x8dd9, { 0xe0 });
        gbc.writeMem(0xa60d, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xf828);
        EXPECT(gbc.pc(), 0xa60f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dd9), 0xc1);
        EXPECT(gbc.readMem(0xa60d), 0xcb);
        EXPECT(gbc.readMem(0xa60e), 0x6);
        // CB 06 0254
        gbc.setState(0x6611, 0xb993, 0x58f0, 0xbc0, 0xe3ec, 0x7afc, 0x0, 0x1);
        gbc.writeMem(0x6611, { 0xcb, 0x6 });
        gbc.writeMem(0x7afc, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xb993);
        EXPECT(gbc.pc(), 0x6613);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 06 0255
        gbc.setState(0x6c4b, 0xb1ba, 0x1300, 0x391e, 0xd448, 0xc32c, 0x0, 0x0);
        gbc.writeMem(0x6c4b, { 0xcb, 0x6 });
        gbc.writeMem(0xc32c, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xb1ba);
        EXPECT(gbc.pc(), 0x6c4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc32c), 0xae);
        // CB 06 0257
        gbc.setState(0x6033, 0x369f, 0xea30, 0x4f21, 0xfb16, 0x9082, 0x0, 0x1);
        gbc.writeMem(0x6033, { 0xcb, 0x6 });
        gbc.writeMem(0x9082, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x369f);
        EXPECT(gbc.pc(), 0x6035);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9082), 0x79);
        // CB 06 0259
        gbc.setState(0x6a17, 0x37b7, 0xc980, 0xab81, 0x1feb, 0x9694, 0x1, 0x1);
        gbc.writeMem(0x6a17, { 0xcb, 0x6 });
        gbc.writeMem(0x9694, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x37b7);
        EXPECT(gbc.pc(), 0x6a19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9694), 0x83);
        // CB 06 025A
        gbc.setState(0x397e, 0xee37, 0x6780, 0xb391, 0x9ad6, 0xec06, 0x1, 0x1);
        gbc.writeMem(0x397e, { 0xcb, 0x6 });
        gbc.writeMem(0xec06, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xee37);
        EXPECT(gbc.pc(), 0x3980);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec06), 0x15);
        // CB 06 025B
        gbc.setState(0x1d49, 0xa3ba, 0x3bf0, 0xe120, 0x4d93, 0xe56d, 0x1, 0x1);
        gbc.writeMem(0x1d49, { 0xcb, 0x6 });
        gbc.writeMem(0xe56d, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xa3ba);
        EXPECT(gbc.pc(), 0x1d4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe56d), 0xbc);
        // CB 06 025C
        gbc.setState(0x7762, 0xe44e, 0x8470, 0x66d0, 0x3ead, 0xa507, 0x0, 0x1);
        gbc.writeMem(0x7762, { 0xcb, 0x6 });
        gbc.writeMem(0xa507, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xe44e);
        EXPECT(gbc.pc(), 0x7764);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa507), 0xf9);
        // CB 06 025F
        gbc.setState(0x62d3, 0x46f, 0xfcb0, 0x2a07, 0x6283, 0xda7e, 0x1, 0x0);
        gbc.writeMem(0x62d3, { 0xcb, 0x6 });
        gbc.writeMem(0xda7e, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x46f);
        EXPECT(gbc.pc(), 0x62d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda7e), 0x22);
        // CB 06 0260
        gbc.setState(0xc9a1, 0xd39a, 0x9e0, 0xa159, 0x4cad, 0xedc9, 0x0, 0x0);
        gbc.writeMem(0xc9a1, { 0xcb, 0x6 });
        gbc.writeMem(0xedc9, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xd39a);
        EXPECT(gbc.pc(), 0xc9a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9a1), 0xcb);
        EXPECT(gbc.readMem(0xc9a2), 0x6);
        EXPECT(gbc.readMem(0xedc9), 0x46);
        // CB 06 0261
        gbc.setState(0x469, 0x7b8, 0x3720, 0x61b6, 0x973d, 0xa615, 0x1, 0x0);
        gbc.writeMem(0x469, { 0xcb, 0x6 });
        gbc.writeMem(0xa615, { 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x7b8);
        EXPECT(gbc.pc(), 0x46b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa615), 0x25);
        // CB 06 0263
        gbc.setState(0xc137, 0xadc8, 0xde60, 0x6c0e, 0x7bbf, 0x8986, 0x0, 0x1);
        gbc.writeMem(0x8986, { 0xea });
        gbc.writeMem(0xc137, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xadc8);
        EXPECT(gbc.pc(), 0xc139);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8986), 0xd5);
        EXPECT(gbc.readMem(0xc137), 0xcb);
        EXPECT(gbc.readMem(0xc138), 0x6);
        // CB 06 0265
        gbc.setState(0xe61a, 0xcfd4, 0x9250, 0x6622, 0xb5a7, 0xb7a4, 0x1, 0x1);
        gbc.writeMem(0xb7a4, { 0xf8 });
        gbc.writeMem(0xe61a, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xcfd4);
        EXPECT(gbc.pc(), 0xe61c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7a4), 0xf1);
        EXPECT(gbc.readMem(0xe61a), 0xcb);
        EXPECT(gbc.readMem(0xe61b), 0x6);
        // CB 06 0266
        gbc.setState(0x2285, 0xf914, 0xabc0, 0xd33b, 0x4c72, 0x8d8c, 0x1, 0x1);
        gbc.writeMem(0x2285, { 0xcb, 0x6 });
        gbc.writeMem(0x8d8c, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xf914);
        EXPECT(gbc.pc(), 0x2287);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d8c), 0xdd);
        // CB 06 0267
        gbc.setState(0x8ead, 0xc7ae, 0x58d0, 0x9625, 0xcb09, 0x921c, 0x1, 0x1);
        gbc.writeMem(0x8ead, { 0xcb, 0x6 });
        gbc.writeMem(0x921c, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xc7ae);
        EXPECT(gbc.pc(), 0x8eaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ead), 0xcb);
        EXPECT(gbc.readMem(0x8eae), 0x6);
        EXPECT(gbc.readMem(0x921c), 0x5b);
        // CB 06 0268
        gbc.setState(0xbf1c, 0xed92, 0x5430, 0x60e3, 0xd8d5, 0x9527, 0x0, 0x0);
        gbc.writeMem(0x9527, { 0x50 });
        gbc.writeMem(0xbf1c, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xed92);
        EXPECT(gbc.pc(), 0xbf1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9527), 0xa0);
        EXPECT(gbc.readMem(0xbf1c), 0xcb);
        EXPECT(gbc.readMem(0xbf1d), 0x6);
        // CB 06 0269
        gbc.setState(0xcc52, 0x9cb2, 0xba10, 0x5474, 0xdb7d, 0xf2e7, 0x1, 0x1);
        gbc.writeMem(0xcc52, { 0xcb, 0x6 });
        gbc.writeMem(0xf2e7, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x9cb2);
        EXPECT(gbc.pc(), 0xcc54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc52), 0xcb);
        EXPECT(gbc.readMem(0xcc53), 0x6);
        EXPECT(gbc.readMem(0xf2e7), 0xe8);
        // CB 06 026A
        gbc.setState(0x218, 0x7ae2, 0x4f70, 0xe9e9, 0xf548, 0xd707, 0x1, 0x1);
        gbc.writeMem(0x218, { 0xcb, 0x6 });
        gbc.writeMem(0xd707, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x7ae2);
        EXPECT(gbc.pc(), 0x21a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd707), 0xf4);
        // CB 06 026B
        gbc.setState(0x1fa3, 0x9ab, 0xdca0, 0x420d, 0x7bb7, 0xf07f, 0x0, 0x1);
        gbc.writeMem(0x1fa3, { 0xcb, 0x6 });
        gbc.writeMem(0xf07f, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x9ab);
        EXPECT(gbc.pc(), 0x1fa5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf07f), 0x92);
        // CB 06 0272
        gbc.setState(0x8879, 0x6905, 0x16d0, 0xd803, 0x6d91, 0xf6ff, 0x0, 0x1);
        gbc.writeMem(0x8879, { 0xcb, 0x6 });
        gbc.writeMem(0xf6ff, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x6905);
        EXPECT(gbc.pc(), 0x887b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8879), 0xcb);
        EXPECT(gbc.readMem(0x887a), 0x6);
        EXPECT(gbc.readMem(0xf6ff), 0xe4);
        // CB 06 0273
        gbc.setState(0x9b41, 0xc5c1, 0xc2e0, 0xd3ea, 0x23a8, 0xe38d, 0x1, 0x0);
        gbc.writeMem(0x9b41, { 0xcb, 0x6 });
        gbc.writeMem(0xe38d, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xc5c1);
        EXPECT(gbc.pc(), 0x9b43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b41), 0xcb);
        EXPECT(gbc.readMem(0x9b42), 0x6);
        EXPECT(gbc.readMem(0xe38d), 0xd4);
        // CB 06 0274
        gbc.setState(0x2f95, 0xeb1d, 0xe140, 0xcd88, 0x1b71, 0xb161, 0x1, 0x0);
        gbc.writeMem(0x2f95, { 0xcb, 0x6 });
        gbc.writeMem(0xb161, { 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xeb1d);
        EXPECT(gbc.pc(), 0x2f97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb161), 0xdf);
        // CB 06 0277
        gbc.setState(0xec3e, 0x817e, 0x57f0, 0x7364, 0xc551, 0x6063, 0x1, 0x0);
        gbc.writeMem(0x6063, { 0x0 });
        gbc.writeMem(0xec3e, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x817e);
        EXPECT(gbc.pc(), 0xec40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec3e), 0xcb);
        EXPECT(gbc.readMem(0xec3f), 0x6);
        // CB 06 0278
        gbc.setState(0x33dc, 0x4689, 0x4f60, 0x28a, 0x3a01, 0x9d13, 0x0, 0x1);
        gbc.writeMem(0x33dc, { 0xcb, 0x6 });
        gbc.writeMem(0x9d13, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x4689);
        EXPECT(gbc.pc(), 0x33de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d13), 0x30);
        // CB 06 0279
        gbc.setState(0x568f, 0xdf60, 0xa4f0, 0x70d6, 0x3faf, 0xfb7a, 0x0, 0x1);
        gbc.writeMem(0x568f, { 0xcb, 0x6 });
        gbc.writeMem(0xfb7a, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xdf60);
        EXPECT(gbc.pc(), 0x5691);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfb7a), 0x26);
        // CB 06 027F
        gbc.setState(0xd518, 0x2471, 0x8fa0, 0x72bb, 0x4cef, 0xffcd, 0x0, 0x1);
        gbc.writeMem(0xd518, { 0xcb, 0x6 });
        gbc.writeMem(0xffcd, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x2471);
        EXPECT(gbc.pc(), 0xd51a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd518), 0xcb);
        EXPECT(gbc.readMem(0xd519), 0x6);
        EXPECT(gbc.readMem(0xffcd), 0x20);
        // CB 06 0281
        gbc.setState(0x7b11, 0x536c, 0xe250, 0xb417, 0xc07, 0xd437, 0x0, 0x0);
        gbc.writeMem(0x7b11, { 0xcb, 0x6 });
        gbc.writeMem(0xd437, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x536c);
        EXPECT(gbc.pc(), 0x7b13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd437), 0x4);
        // CB 06 0282
        gbc.setState(0x5678, 0xd65d, 0x4550, 0xab99, 0xb244, 0xa887, 0x1, 0x1);
        gbc.writeMem(0x5678, { 0xcb, 0x6 });
        gbc.writeMem(0xa887, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xd65d);
        EXPECT(gbc.pc(), 0x567a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa887), 0x14);
        // CB 06 0285
        gbc.setState(0x470d, 0x1d3c, 0xab40, 0xe979, 0x8511, 0xade8, 0x1, 0x0);
        gbc.writeMem(0x470d, { 0xcb, 0x6 });
        gbc.writeMem(0xade8, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x1d3c);
        EXPECT(gbc.pc(), 0x470f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xade8), 0xad);
        // CB 06 0286
        gbc.setState(0x7682, 0x22a0, 0x81b0, 0xb109, 0xceb1, 0xd383, 0x0, 0x1);
        gbc.writeMem(0x7682, { 0xcb, 0x6 });
        gbc.writeMem(0xd383, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x22a0);
        EXPECT(gbc.pc(), 0x7684);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd383), 0x9e);
        // CB 06 0287
        gbc.setState(0x8c34, 0x82c1, 0x400, 0xeb08, 0x8eb7, 0xd069, 0x1, 0x0);
        gbc.writeMem(0x8c34, { 0xcb, 0x6 });
        gbc.writeMem(0xd069, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x82c1);
        EXPECT(gbc.pc(), 0x8c36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c34), 0xcb);
        EXPECT(gbc.readMem(0x8c35), 0x6);
        EXPECT(gbc.readMem(0xd069), 0x57);
        // CB 06 028B
        gbc.setState(0x7d5d, 0xf65f, 0xcfe0, 0x3f06, 0x1e9a, 0xf084, 0x1, 0x0);
        gbc.writeMem(0x7d5d, { 0xcb, 0x6 });
        gbc.writeMem(0xf084, { 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xf65f);
        EXPECT(gbc.pc(), 0x7d5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf084), 0xc0);
        // CB 06 028C
        gbc.setState(0x12b3, 0x416f, 0x95a0, 0x8e9a, 0x178a, 0xc203, 0x1, 0x0);
        gbc.writeMem(0x12b3, { 0xcb, 0x6 });
        gbc.writeMem(0xc203, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x416f);
        EXPECT(gbc.pc(), 0x12b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc203), 0x7f);
        // CB 06 028E
        gbc.setState(0x9f6b, 0x8b65, 0x5110, 0xf094, 0xe22c, 0xfea2, 0x0, 0x1);
        gbc.writeMem(0x9f6b, { 0xcb, 0x6 });
        gbc.writeMem(0xfea2, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x8b65);
        EXPECT(gbc.pc(), 0x9f6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f6b), 0xcb);
        EXPECT(gbc.readMem(0x9f6c), 0x6);
        EXPECT(gbc.readMem(0xfea2), 0x50);
        // CB 06 0290
        gbc.setState(0xd25, 0xf7e5, 0x6180, 0x18b1, 0x9e88, 0xb486, 0x1, 0x1);
        gbc.writeMem(0xd25, { 0xcb, 0x6 });
        gbc.writeMem(0xb486, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xf7e5);
        EXPECT(gbc.pc(), 0xd27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb486), 0x8e);
        // CB 06 0292
        gbc.setState(0xe6d9, 0x73d3, 0xa370, 0xdc44, 0x27e, 0xf3df, 0x1, 0x1);
        gbc.writeMem(0xe6d9, { 0xcb, 0x6 });
        gbc.writeMem(0xf3df, { 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x73d3);
        EXPECT(gbc.pc(), 0xe6db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6d9), 0xcb);
        EXPECT(gbc.readMem(0xe6da), 0x6);
        EXPECT(gbc.readMem(0xf3df), 0xf1);
        // CB 06 0293
        gbc.setState(0x5c0e, 0xfedf, 0xaad0, 0xa4c6, 0x1015, 0xc6c4, 0x1, 0x0);
        gbc.writeMem(0x5c0e, { 0xcb, 0x6 });
        gbc.writeMem(0xc6c4, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xfedf);
        EXPECT(gbc.pc(), 0x5c10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6c4), 0x9f);
        // CB 06 0297
        gbc.setState(0x6d00, 0x742f, 0x6ce0, 0x1fa5, 0xac82, 0xdd1c, 0x0, 0x0);
        gbc.writeMem(0x6d00, { 0xcb, 0x6 });
        gbc.writeMem(0xdd1c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x742f);
        EXPECT(gbc.pc(), 0x6d02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd1c), 0x45);
        // CB 06 0299
        gbc.setState(0x60a4, 0xf990, 0x8fc0, 0x19d9, 0x552, 0x81dc, 0x1, 0x0);
        gbc.writeMem(0x60a4, { 0xcb, 0x6 });
        gbc.writeMem(0x81dc, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xf990);
        EXPECT(gbc.pc(), 0x60a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81dc), 0x98);
        // CB 06 029A
        gbc.setState(0x9a33, 0x2699, 0x9770, 0x5e9b, 0xb0ac, 0xdb4a, 0x0, 0x1);
        gbc.writeMem(0x9a33, { 0xcb, 0x6 });
        gbc.writeMem(0xdb4a, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x2699);
        EXPECT(gbc.pc(), 0x9a35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a33), 0xcb);
        EXPECT(gbc.readMem(0x9a34), 0x6);
        EXPECT(gbc.readMem(0xdb4a), 0x2b);
        // CB 06 029B
        gbc.setState(0x43dd, 0xf537, 0x23d0, 0xe1f7, 0x7e0f, 0x9bf8, 0x1, 0x1);
        gbc.writeMem(0x43dd, { 0xcb, 0x6 });
        gbc.writeMem(0x9bf8, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xf537);
        EXPECT(gbc.pc(), 0x43df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bf8), 0x6f);
        // CB 06 029F
        gbc.setState(0xbda0, 0x6930, 0xb080, 0xd3e8, 0x7f52, 0x9a21, 0x0, 0x0);
        gbc.writeMem(0x9a21, { 0xa5 });
        gbc.writeMem(0xbda0, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x6930);
        EXPECT(gbc.pc(), 0xbda2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a21), 0x4b);
        EXPECT(gbc.readMem(0xbda0), 0xcb);
        EXPECT(gbc.readMem(0xbda1), 0x6);
        // CB 06 02A2
        gbc.setState(0x67d2, 0xd47e, 0x2d90, 0xe228, 0x9c18, 0x9f02, 0x1, 0x0);
        gbc.writeMem(0x67d2, { 0xcb, 0x6 });
        gbc.writeMem(0x9f02, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xd47e);
        EXPECT(gbc.pc(), 0x67d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f02), 0x59);
        // CB 06 02A3
        gbc.setState(0x1033, 0x8626, 0x2270, 0x4fff, 0xfc57, 0xd834, 0x1, 0x0);
        gbc.writeMem(0x1033, { 0xcb, 0x6 });
        gbc.writeMem(0xd834, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x8626);
        EXPECT(gbc.pc(), 0x1035);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd834), 0x8e);
        // CB 06 02A7
        gbc.setState(0x3020, 0x6be7, 0xebd0, 0xb119, 0xdc8f, 0xb1ef, 0x1, 0x1);
        gbc.writeMem(0x3020, { 0xcb, 0x6 });
        gbc.writeMem(0xb1ef, { 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x6be7);
        EXPECT(gbc.pc(), 0x3022);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1ef), 0xdc);
        // CB 06 02A8
        gbc.setState(0xd84e, 0x768e, 0x1430, 0xf171, 0x398d, 0xc5c5, 0x0, 0x1);
        gbc.writeMem(0xc5c5, { 0x26 });
        gbc.writeMem(0xd84e, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x768e);
        EXPECT(gbc.pc(), 0xd850);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5c5), 0x4c);
        EXPECT(gbc.readMem(0xd84e), 0xcb);
        EXPECT(gbc.readMem(0xd84f), 0x6);
        // CB 06 02A9
        gbc.setState(0xdb86, 0x93fb, 0xc6f0, 0x9c8a, 0x5f1d, 0x8f05, 0x1, 0x1);
        gbc.writeMem(0x8f05, { 0x96 });
        gbc.writeMem(0xdb86, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x93fb);
        EXPECT(gbc.pc(), 0xdb88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f05), 0x2d);
        EXPECT(gbc.readMem(0xdb86), 0xcb);
        EXPECT(gbc.readMem(0xdb87), 0x6);
        // CB 06 02AA
        gbc.setState(0xeaf3, 0xae9d, 0xd370, 0x1b06, 0x5a9e, 0xcbff, 0x1, 0x1);
        gbc.writeMem(0xcbff, { 0x65 });
        gbc.writeMem(0xeaf3, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xae9d);
        EXPECT(gbc.pc(), 0xeaf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbff), 0xca);
        EXPECT(gbc.readMem(0xeaf3), 0xcb);
        EXPECT(gbc.readMem(0xeaf4), 0x6);
        // CB 06 02AB
        gbc.setState(0x2031, 0xa3e0, 0x9f60, 0xc7ab, 0x9776, 0xd5a3, 0x1, 0x0);
        gbc.writeMem(0x2031, { 0xcb, 0x6 });
        gbc.writeMem(0xd5a3, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xa3e0);
        EXPECT(gbc.pc(), 0x2033);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5a3), 0x76);
        // CB 06 02AC
        gbc.setState(0x470e, 0x900, 0x9a0, 0x4f59, 0xacfa, 0xc34e, 0x0, 0x0);
        gbc.writeMem(0x470e, { 0xcb, 0x6 });
        gbc.writeMem(0xc34e, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x900);
        EXPECT(gbc.pc(), 0x4710);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc34e), 0xb9);
        // CB 06 02AD
        gbc.setState(0xe38a, 0xb58c, 0x9bb0, 0xe4dd, 0x6d28, 0x979b, 0x1, 0x0);
        gbc.writeMem(0x979b, { 0x87 });
        gbc.writeMem(0xe38a, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xb58c);
        EXPECT(gbc.pc(), 0xe38c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x979b), 0xf);
        EXPECT(gbc.readMem(0xe38a), 0xcb);
        EXPECT(gbc.readMem(0xe38b), 0x6);
        // CB 06 02AE
        gbc.setState(0xbcb7, 0xcec8, 0xc5c0, 0x3a29, 0x578, 0xf115, 0x0, 0x1);
        gbc.writeMem(0xbcb7, { 0xcb, 0x6 });
        gbc.writeMem(0xf115, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xcec8);
        EXPECT(gbc.pc(), 0xbcb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcb7), 0xcb);
        EXPECT(gbc.readMem(0xbcb8), 0x6);
        EXPECT(gbc.readMem(0xf115), 0xf8);
        // CB 06 02AF
        gbc.setState(0x1d5d, 0x65dd, 0xabc0, 0x4ad0, 0xc171, 0xd97d, 0x0, 0x0);
        gbc.writeMem(0x1d5d, { 0xcb, 0x6 });
        gbc.writeMem(0xd97d, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x65dd);
        EXPECT(gbc.pc(), 0x1d5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd97d), 0x15);
        // CB 06 02B1
        gbc.setState(0x1793, 0x3637, 0x1590, 0xd290, 0x965d, 0xe5d6, 0x0, 0x1);
        gbc.writeMem(0x1793, { 0xcb, 0x6 });
        gbc.writeMem(0xe5d6, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x3637);
        EXPECT(gbc.pc(), 0x1795);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5d6), 0x92);
        // CB 06 02B2
        gbc.setState(0x90c8, 0x2ee1, 0x8fa0, 0xb79, 0x47e1, 0xec51, 0x1, 0x1);
        gbc.writeMem(0x90c8, { 0xcb, 0x6 });
        gbc.writeMem(0xec51, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x2ee1);
        EXPECT(gbc.pc(), 0x90ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90c8), 0xcb);
        EXPECT(gbc.readMem(0x90c9), 0x6);
        EXPECT(gbc.readMem(0xec51), 0xa5);
        // CB 06 02B3
        gbc.setState(0x2621, 0xee15, 0xe220, 0x5cca, 0xa482, 0x9a26, 0x0, 0x0);
        gbc.writeMem(0x2621, { 0xcb, 0x6 });
        gbc.writeMem(0x9a26, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xee15);
        EXPECT(gbc.pc(), 0x2623);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a26), 0x1d);
        // CB 06 02B6
        gbc.setState(0xdae9, 0xa3d2, 0xa4c0, 0xfc60, 0xc07, 0xed01, 0x0, 0x0);
        gbc.writeMem(0xdae9, { 0xcb, 0x6 });
        gbc.writeMem(0xed01, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xa3d2);
        EXPECT(gbc.pc(), 0xdaeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdae9), 0xcb);
        EXPECT(gbc.readMem(0xdaea), 0x6);
        EXPECT(gbc.readMem(0xed01), 0x9);
        // CB 06 02B8
        gbc.setState(0xd172, 0xad72, 0xdc80, 0xd068, 0xc58c, 0xb65d, 0x0, 0x1);
        gbc.writeMem(0xb65d, { 0x4b });
        gbc.writeMem(0xd172, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xad72);
        EXPECT(gbc.pc(), 0xd174);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb65d), 0x96);
        EXPECT(gbc.readMem(0xd172), 0xcb);
        EXPECT(gbc.readMem(0xd173), 0x6);
        // CB 06 02B9
        gbc.setState(0xc8e7, 0x5c41, 0xe4a0, 0x2d72, 0x9ea3, 0xc367, 0x1, 0x1);
        gbc.writeMem(0xc367, { 0x85 });
        gbc.writeMem(0xc8e7, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x5c41);
        EXPECT(gbc.pc(), 0xc8e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc367), 0xb);
        EXPECT(gbc.readMem(0xc8e7), 0xcb);
        EXPECT(gbc.readMem(0xc8e8), 0x6);
        // CB 06 02BA
        gbc.setState(0xa8cc, 0x9940, 0xf080, 0x72ca, 0xe598, 0xefcf, 0x0, 0x0);
        gbc.writeMem(0xa8cc, { 0xcb, 0x6 });
        gbc.writeMem(0xefcf, { 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x9940);
        EXPECT(gbc.pc(), 0xa8ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8cc), 0xcb);
        EXPECT(gbc.readMem(0xa8cd), 0x6);
        EXPECT(gbc.readMem(0xefcf), 0x9c);
        // CB 06 02BD
        gbc.setState(0x58b3, 0x55fe, 0xbf50, 0x2d28, 0x8a0a, 0xf989, 0x0, 0x1);
        gbc.writeMem(0x58b3, { 0xcb, 0x6 });
        gbc.writeMem(0xf989, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x55fe);
        EXPECT(gbc.pc(), 0x58b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf989), 0xde);
        // CB 06 02C2
        gbc.setState(0x6cd6, 0x1f5, 0xa130, 0x1d84, 0xd60e, 0xa286, 0x1, 0x0);
        gbc.writeMem(0x6cd6, { 0xcb, 0x6 });
        gbc.writeMem(0xa286, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x1f5);
        EXPECT(gbc.pc(), 0x6cd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa286), 0xa2);
        // CB 06 02C3
        gbc.setState(0x5aef, 0xf3ec, 0x6960, 0x9e8c, 0x68b4, 0xef9f, 0x0, 0x0);
        gbc.writeMem(0x5aef, { 0xcb, 0x6 });
        gbc.writeMem(0xef9f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xf3ec);
        EXPECT(gbc.pc(), 0x5af1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef9f), 0x9e);
        // CB 06 02C5
        gbc.setState(0x8a85, 0x2b2b, 0x55a0, 0xc05a, 0xebbd, 0x995a, 0x1, 0x0);
        gbc.writeMem(0x8a85, { 0xcb, 0x6 });
        gbc.writeMem(0x995a, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x2b2b);
        EXPECT(gbc.pc(), 0x8a87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a85), 0xcb);
        EXPECT(gbc.readMem(0x8a86), 0x6);
        EXPECT(gbc.readMem(0x995a), 0x7d);
        // CB 06 02C8
        gbc.setState(0x267a, 0xfb4b, 0x7460, 0x529c, 0xf471, 0xb5dd, 0x0, 0x1);
        gbc.writeMem(0x267a, { 0xcb, 0x6 });
        gbc.writeMem(0xb5dd, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xfb4b);
        EXPECT(gbc.pc(), 0x267c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5dd), 0x19);
        // CB 06 02CA
        gbc.setState(0xe574, 0xfb59, 0x2f10, 0x1c83, 0x18b4, 0xe2e3, 0x0, 0x0);
        gbc.writeMem(0xe2e3, { 0xd9 });
        gbc.writeMem(0xe574, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xfb59);
        EXPECT(gbc.pc(), 0xe576);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2e3), 0xb3);
        EXPECT(gbc.readMem(0xe574), 0xcb);
        EXPECT(gbc.readMem(0xe575), 0x6);
        // CB 06 02CD
        gbc.setState(0x24a0, 0x5def, 0x90a0, 0x4b6f, 0x6b1a, 0xcd7a, 0x1, 0x0);
        gbc.writeMem(0x24a0, { 0xcb, 0x6 });
        gbc.writeMem(0xcd7a, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x5def);
        EXPECT(gbc.pc(), 0x24a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd7a), 0x4b);
        // CB 06 02CE
        gbc.setState(0x6f8b, 0xedc0, 0x6e0, 0xdb8a, 0x8d36, 0xbd43, 0x0, 0x0);
        gbc.writeMem(0x6f8b, { 0xcb, 0x6 });
        gbc.writeMem(0xbd43, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xedc0);
        EXPECT(gbc.pc(), 0x6f8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd43), 0xb7);
        // CB 06 02D1
        gbc.setState(0xd518, 0x302e, 0x47a0, 0x6f9c, 0x36e5, 0xeba1, 0x0, 0x1);
        gbc.writeMem(0xd518, { 0xcb, 0x6 });
        gbc.writeMem(0xeba1, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x302e);
        EXPECT(gbc.pc(), 0xd51a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd518), 0xcb);
        EXPECT(gbc.readMem(0xd519), 0x6);
        EXPECT(gbc.readMem(0xeba1), 0x15);
        // CB 06 02D2
        gbc.setState(0x1aa4, 0x32a1, 0x2580, 0x687c, 0xce14, 0xe031, 0x1, 0x0);
        gbc.writeMem(0x1aa4, { 0xcb, 0x6 });
        gbc.writeMem(0xe031, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x32a1);
        EXPECT(gbc.pc(), 0x1aa6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe031), 0x6);
        // CB 06 02D3
        gbc.setState(0xe43a, 0xbb44, 0xed0, 0xc96, 0x69e2, 0xbb91, 0x1, 0x1);
        gbc.writeMem(0xbb91, { 0x61 });
        gbc.writeMem(0xe43a, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xbb44);
        EXPECT(gbc.pc(), 0xe43c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb91), 0xc2);
        EXPECT(gbc.readMem(0xe43a), 0xcb);
        EXPECT(gbc.readMem(0xe43b), 0x6);
        // CB 06 02D4
        gbc.setState(0xcc, 0xf51c, 0x960, 0x61fc, 0xf3b0, 0xa4b0, 0x1, 0x0);
        gbc.writeMem(0xcc, { 0xcb, 0x6 });
        gbc.writeMem(0xa4b0, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xf51c);
        EXPECT(gbc.pc(), 0xce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4b0), 0xd6);
        // CB 06 02D8
        gbc.setState(0x98a8, 0x52d5, 0xd520, 0x17e7, 0x7866, 0x8d74, 0x0, 0x0);
        gbc.writeMem(0x8d74, { 0x67 });
        gbc.writeMem(0x98a8, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x52d5);
        EXPECT(gbc.pc(), 0x98aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d74), 0xce);
        EXPECT(gbc.readMem(0x98a8), 0xcb);
        EXPECT(gbc.readMem(0x98a9), 0x6);
        // CB 06 02D9
        gbc.setState(0x2f5, 0xea3, 0x1ed0, 0x1955, 0x454a, 0xa99f, 0x1, 0x0);
        gbc.writeMem(0x2f5, { 0xcb, 0x6 });
        gbc.writeMem(0xa99f, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xea3);
        EXPECT(gbc.pc(), 0x2f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa99f), 0xef);
        // CB 06 02DA
        gbc.setState(0x31b1, 0x80fc, 0x6f60, 0x1d70, 0x7f37, 0xe587, 0x1, 0x0);
        gbc.writeMem(0x31b1, { 0xcb, 0x6 });
        gbc.writeMem(0xe587, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x80fc);
        EXPECT(gbc.pc(), 0x31b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe587), 0x0);
        // CB 06 02DD
        gbc.setState(0xa783, 0xca6d, 0xa1c0, 0x6cb7, 0xa3cc, 0xcd89, 0x0, 0x0);
        gbc.writeMem(0xa783, { 0xcb, 0x6 });
        gbc.writeMem(0xcd89, { 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xca6d);
        EXPECT(gbc.pc(), 0xa785);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa783), 0xcb);
        EXPECT(gbc.readMem(0xa784), 0x6);
        EXPECT(gbc.readMem(0xcd89), 0x99);
        // CB 06 02E3
        gbc.setState(0x78af, 0x7a42, 0xec30, 0xf02b, 0xd98b, 0xed70, 0x1, 0x1);
        gbc.writeMem(0x78af, { 0xcb, 0x6 });
        gbc.writeMem(0xed70, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x7a42);
        EXPECT(gbc.pc(), 0x78b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed70), 0xa2);
        // CB 06 02E4
        gbc.setState(0x71bb, 0xadf4, 0x460, 0x571e, 0x5865, 0xd88d, 0x1, 0x1);
        gbc.writeMem(0x71bb, { 0xcb, 0x6 });
        gbc.writeMem(0xd88d, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xadf4);
        EXPECT(gbc.pc(), 0x71bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd88d), 0x20);
        // CB 06 02E5
        gbc.setState(0xb9d1, 0x26fd, 0xeb20, 0x85bf, 0xd515, 0xb2c2, 0x1, 0x0);
        gbc.writeMem(0xb2c2, { 0x32 });
        gbc.writeMem(0xb9d1, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x26fd);
        EXPECT(gbc.pc(), 0xb9d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2c2), 0x64);
        EXPECT(gbc.readMem(0xb9d1), 0xcb);
        EXPECT(gbc.readMem(0xb9d2), 0x6);
        // CB 06 02E6
        gbc.setState(0x7ce2, 0xe226, 0x5420, 0xbb5, 0x2d35, 0xec28, 0x0, 0x0);
        gbc.writeMem(0x7ce2, { 0xcb, 0x6 });
        gbc.writeMem(0xec28, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xe226);
        EXPECT(gbc.pc(), 0x7ce4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec28), 0xcc);
        // CB 06 02E7
        gbc.setState(0x9fb3, 0xd785, 0x1320, 0xf902, 0x66d2, 0xdbb3, 0x0, 0x1);
        gbc.writeMem(0x9fb3, { 0xcb, 0x6 });
        gbc.writeMem(0xdbb3, { 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xd785);
        EXPECT(gbc.pc(), 0x9fb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fb3), 0xcb);
        EXPECT(gbc.readMem(0x9fb4), 0x6);
        EXPECT(gbc.readMem(0xdbb3), 0xc5);
        // CB 06 02EB
        gbc.setState(0x4afe, 0xd7db, 0xa210, 0x4ba9, 0xeceb, 0xa165, 0x0, 0x0);
        gbc.writeMem(0x4afe, { 0xcb, 0x6 });
        gbc.writeMem(0xa165, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xd7db);
        EXPECT(gbc.pc(), 0x4b00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa165), 0xaa);
        // CB 06 02EC
        gbc.setState(0xeca6, 0x5813, 0x16f0, 0x4750, 0xae3a, 0xe6aa, 0x1, 0x1);
        gbc.writeMem(0xe6aa, { 0x97 });
        gbc.writeMem(0xeca6, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x5813);
        EXPECT(gbc.pc(), 0xeca8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6aa), 0x2f);
        EXPECT(gbc.readMem(0xeca6), 0xcb);
        EXPECT(gbc.readMem(0xeca7), 0x6);
        // CB 06 02EE
        gbc.setState(0x7580, 0x1969, 0x1110, 0x2e77, 0x61fe, 0xe331, 0x0, 0x0);
        gbc.writeMem(0x7580, { 0xcb, 0x6 });
        gbc.writeMem(0xe331, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x1969);
        EXPECT(gbc.pc(), 0x7582);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe331), 0x2b);
        // CB 06 02F3
        gbc.setState(0x6d72, 0xfeca, 0x80b0, 0x37f1, 0x872, 0xfab8, 0x1, 0x1);
        gbc.writeMem(0x6d72, { 0xcb, 0x6 });
        gbc.writeMem(0xfab8, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xfeca);
        EXPECT(gbc.pc(), 0x6d74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfab8), 0x6e);
        // CB 06 02F5
        gbc.setState(0xcaf1, 0x6457, 0x56e0, 0x16d4, 0x930b, 0xc7d1, 0x1, 0x1);
        gbc.writeMem(0xc7d1, { 0xe1 });
        gbc.writeMem(0xcaf1, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x6457);
        EXPECT(gbc.pc(), 0xcaf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7d1), 0xc3);
        EXPECT(gbc.readMem(0xcaf1), 0xcb);
        EXPECT(gbc.readMem(0xcaf2), 0x6);
        // CB 06 02F7
        gbc.setState(0xbe5, 0x5926, 0xad50, 0x11f1, 0x561a, 0xec17, 0x1, 0x0);
        gbc.writeMem(0xbe5, { 0xcb, 0x6 });
        gbc.writeMem(0xec17, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x5926);
        EXPECT(gbc.pc(), 0xbe7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec17), 0x1a);
        // CB 06 02F8
        gbc.setState(0xbdcb, 0xf22a, 0xd3e0, 0x3cf3, 0xae37, 0xe524, 0x0, 0x1);
        gbc.writeMem(0xbdcb, { 0xcb, 0x6 });
        gbc.writeMem(0xe524, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xf22a);
        EXPECT(gbc.pc(), 0xbdcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdcb), 0xcb);
        EXPECT(gbc.readMem(0xbdcc), 0x6);
        EXPECT(gbc.readMem(0xe524), 0xb6);
        // CB 06 02F9
        gbc.setState(0xb6c9, 0xb01, 0x1850, 0xa7c6, 0xc9bb, 0xbea0, 0x0, 0x1);
        gbc.writeMem(0xb6c9, { 0xcb, 0x6 });
        gbc.writeMem(0xbea0, { 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb01);
        EXPECT(gbc.pc(), 0xb6cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6c9), 0xcb);
        EXPECT(gbc.readMem(0xb6ca), 0x6);
        EXPECT(gbc.readMem(0xbea0), 0xd8);
        // CB 06 02FA
        gbc.setState(0xd09b, 0xb5cd, 0x5280, 0x333f, 0x1455, 0x86d0, 0x0, 0x0);
        gbc.writeMem(0x86d0, { 0x1e });
        gbc.writeMem(0xd09b, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xb5cd);
        EXPECT(gbc.pc(), 0xd09d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86d0), 0x3c);
        EXPECT(gbc.readMem(0xd09b), 0xcb);
        EXPECT(gbc.readMem(0xd09c), 0x6);
        // CB 06 02FC
        gbc.setState(0x43ae, 0xaf89, 0x7780, 0x1426, 0x549a, 0xf7f5, 0x1, 0x0);
        gbc.writeMem(0x43ae, { 0xcb, 0x6 });
        gbc.writeMem(0xf7f5, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xaf89);
        EXPECT(gbc.pc(), 0x43b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf7f5), 0xa2);
        // CB 06 02FD
        gbc.setState(0x5a80, 0xebaf, 0xf290, 0x2ab3, 0x53eb, 0xe9d7, 0x0, 0x1);
        gbc.writeMem(0x5a80, { 0xcb, 0x6 });
        gbc.writeMem(0xe9d7, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xebaf);
        EXPECT(gbc.pc(), 0x5a82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9d7), 0x5b);
        // CB 06 0305
        gbc.setState(0x8869, 0x84f0, 0x86d0, 0x8d0f, 0x8b60, 0x9951, 0x1, 0x1);
        gbc.writeMem(0x8869, { 0xcb, 0x6 });
        gbc.writeMem(0x9951, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x84f0);
        EXPECT(gbc.pc(), 0x886b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8869), 0xcb);
        EXPECT(gbc.readMem(0x886a), 0x6);
        EXPECT(gbc.readMem(0x9951), 0x34);
        // CB 06 0306
        gbc.setState(0x4a4e, 0x7a89, 0xfd0, 0x2638, 0xc280, 0xd04b, 0x0, 0x0);
        gbc.writeMem(0x4a4e, { 0xcb, 0x6 });
        gbc.writeMem(0xd04b, { 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x7a89);
        EXPECT(gbc.pc(), 0x4a50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd04b), 0xd8);
        // CB 06 0308
        gbc.setState(0x8816, 0xffb3, 0x1de0, 0x1dc6, 0x387c, 0xe395, 0x1, 0x1);
        gbc.writeMem(0x8816, { 0xcb, 0x6 });
        gbc.writeMem(0xe395, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xffb3);
        EXPECT(gbc.pc(), 0x8818);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8816), 0xcb);
        EXPECT(gbc.readMem(0x8817), 0x6);
        EXPECT(gbc.readMem(0xe395), 0xbc);
        // CB 06 030F
        gbc.setState(0x7e92, 0x5659, 0x1350, 0x3f5f, 0xaacc, 0x97a6, 0x0, 0x1);
        gbc.writeMem(0x7e92, { 0xcb, 0x6 });
        gbc.writeMem(0x97a6, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x5659);
        EXPECT(gbc.pc(), 0x7e94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97a6), 0x69);
        // CB 06 0310
        gbc.setState(0x4414, 0x1007, 0x1110, 0x3df3, 0x7860, 0xc82c, 0x1, 0x0);
        gbc.writeMem(0x4414, { 0xcb, 0x6 });
        gbc.writeMem(0xc82c, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x1007);
        EXPECT(gbc.pc(), 0x4416);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc82c), 0xab);
        // CB 06 0311
        gbc.setState(0xd412, 0x98b7, 0x17f0, 0xb6ef, 0xde4b, 0xb51d, 0x1, 0x1);
        gbc.writeMem(0xb51d, { 0x90 });
        gbc.writeMem(0xd412, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x98b7);
        EXPECT(gbc.pc(), 0xd414);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb51d), 0x21);
        EXPECT(gbc.readMem(0xd412), 0xcb);
        EXPECT(gbc.readMem(0xd413), 0x6);
        // CB 06 0312
        gbc.setState(0xcbde, 0xa910, 0x7590, 0xe4d6, 0x23f2, 0xf9a8, 0x0, 0x0);
        gbc.writeMem(0xcbde, { 0xcb, 0x6 });
        gbc.writeMem(0xf9a8, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xa910);
        EXPECT(gbc.pc(), 0xcbe0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbde), 0xcb);
        EXPECT(gbc.readMem(0xcbdf), 0x6);
        EXPECT(gbc.readMem(0xf9a8), 0x20);
        // CB 06 0313
        gbc.setState(0xc226, 0xf1fe, 0x5930, 0xfae1, 0xb39a, 0x8a92, 0x0, 0x0);
        gbc.writeMem(0x8a92, { 0xa8 });
        gbc.writeMem(0xc226, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xf1fe);
        EXPECT(gbc.pc(), 0xc228);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a92), 0x51);
        EXPECT(gbc.readMem(0xc226), 0xcb);
        EXPECT(gbc.readMem(0xc227), 0x6);
        // CB 06 0314
        gbc.setState(0x4503, 0xbab, 0x6a20, 0xd136, 0xba90, 0xfee1, 0x1, 0x0);
        gbc.writeMem(0x4503, { 0xcb, 0x6 });
        gbc.writeMem(0xfee1, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xbab);
        EXPECT(gbc.pc(), 0x4505);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfee1), 0x12);
        // CB 06 0315
        gbc.setState(0xd883, 0xded3, 0x2ab0, 0x11d0, 0xc21a, 0xabc1, 0x1, 0x1);
        gbc.writeMem(0xabc1, { 0x3e });
        gbc.writeMem(0xd883, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xded3);
        EXPECT(gbc.pc(), 0xd885);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabc1), 0x7c);
        EXPECT(gbc.readMem(0xd883), 0xcb);
        EXPECT(gbc.readMem(0xd884), 0x6);
        // CB 06 0317
        gbc.setState(0x3566, 0x633f, 0xce70, 0x6068, 0x9e96, 0xb340, 0x1, 0x1);
        gbc.writeMem(0x3566, { 0xcb, 0x6 });
        gbc.writeMem(0xb340, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x633f);
        EXPECT(gbc.pc(), 0x3568);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb340), 0xb2);
        // CB 06 0318
        gbc.setState(0x386c, 0x3b30, 0x6e30, 0xc775, 0xcbff, 0xdd94, 0x1, 0x0);
        gbc.writeMem(0x386c, { 0xcb, 0x6 });
        gbc.writeMem(0xdd94, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x3b30);
        EXPECT(gbc.pc(), 0x386e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd94), 0xa2);
        // CB 06 0319
        gbc.setState(0xb191, 0x805a, 0x1610, 0xdce6, 0xe917, 0xb622, 0x1, 0x1);
        gbc.writeMem(0xb191, { 0xcb, 0x6 });
        gbc.writeMem(0xb622, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x805a);
        EXPECT(gbc.pc(), 0xb193);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb191), 0xcb);
        EXPECT(gbc.readMem(0xb192), 0x6);
        EXPECT(gbc.readMem(0xb622), 0x7b);
        // CB 06 031F
        gbc.setState(0x3b1f, 0xf024, 0x74d0, 0xc5e8, 0xbc50, 0xea2a, 0x0, 0x0);
        gbc.writeMem(0x3b1f, { 0xcb, 0x6 });
        gbc.writeMem(0xea2a, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xf024);
        EXPECT(gbc.pc(), 0x3b21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea2a), 0x1b);
        // CB 06 0320
        gbc.setState(0xe37b, 0x1981, 0xf920, 0xfccb, 0x4fce, 0xe192, 0x1, 0x1);
        gbc.writeMem(0xe192, { 0x0 });
        gbc.writeMem(0xe37b, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x1981);
        EXPECT(gbc.pc(), 0xe37d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe192), 0x0);
        EXPECT(gbc.readMem(0xe37b), 0xcb);
        EXPECT(gbc.readMem(0xe37c), 0x6);
        // CB 06 0321
        gbc.setState(0x134f, 0xd709, 0xdb80, 0x9c83, 0xd08, 0xa8ed, 0x0, 0x1);
        gbc.writeMem(0x134f, { 0xcb, 0x6 });
        gbc.writeMem(0xa8ed, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xd709);
        EXPECT(gbc.pc(), 0x1351);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8ed), 0x18);
        // CB 06 0322
        gbc.setState(0x23b9, 0x73e4, 0xa260, 0x2283, 0xccea, 0xe798, 0x1, 0x0);
        gbc.writeMem(0x23b9, { 0xcb, 0x6 });
        gbc.writeMem(0xe798, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x73e4);
        EXPECT(gbc.pc(), 0x23bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe798), 0x46);
        // CB 06 0323
        gbc.setState(0xc2ae, 0xf3a4, 0xae80, 0xd53a, 0x6575, 0xd17e, 0x1, 0x0);
        gbc.writeMem(0xc2ae, { 0xcb, 0x6 });
        gbc.writeMem(0xd17e, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xf3a4);
        EXPECT(gbc.pc(), 0xc2b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2ae), 0xcb);
        EXPECT(gbc.readMem(0xc2af), 0x6);
        EXPECT(gbc.readMem(0xd17e), 0x6f);
        // CB 06 0325
        gbc.setState(0xc6d1, 0x45d6, 0x2d20, 0x1f1a, 0x4596, 0xee73, 0x1, 0x0);
        gbc.writeMem(0xc6d1, { 0xcb, 0x6 });
        gbc.writeMem(0xee73, { 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x45d6);
        EXPECT(gbc.pc(), 0xc6d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6d1), 0xcb);
        EXPECT(gbc.readMem(0xc6d2), 0x6);
        EXPECT(gbc.readMem(0xee73), 0x25);
        // CB 06 0326
        gbc.setState(0xdf05, 0x74ef, 0x3c60, 0xa607, 0x513b, 0xb5fb, 0x1, 0x1);
        gbc.writeMem(0xb5fb, { 0xd6 });
        gbc.writeMem(0xdf05, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x74ef);
        EXPECT(gbc.pc(), 0xdf07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5fb), 0xad);
        EXPECT(gbc.readMem(0xdf05), 0xcb);
        EXPECT(gbc.readMem(0xdf06), 0x6);
        // CB 06 0328
        gbc.setState(0x7999, 0xe2af, 0xd190, 0x3800, 0xf938, 0xc982, 0x0, 0x0);
        gbc.writeMem(0x7999, { 0xcb, 0x6 });
        gbc.writeMem(0xc982, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xe2af);
        EXPECT(gbc.pc(), 0x799b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc982), 0x30);
        // CB 06 032C
        gbc.setState(0x4f2d, 0x50ad, 0x15c0, 0xc61a, 0x58b8, 0xa8a5, 0x0, 0x0);
        gbc.writeMem(0x4f2d, { 0xcb, 0x6 });
        gbc.writeMem(0xa8a5, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x50ad);
        EXPECT(gbc.pc(), 0x4f2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8a5), 0x8f);
        // CB 06 032D
        gbc.setState(0x719d, 0xf542, 0xf500, 0xf4a0, 0x2a2a, 0xfc32, 0x0, 0x1);
        gbc.writeMem(0x719d, { 0xcb, 0x6 });
        gbc.writeMem(0xfc32, { 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xf542);
        EXPECT(gbc.pc(), 0x719f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfc32), 0xd8);
        // CB 06 0330
        gbc.setState(0x9279, 0xea06, 0x4960, 0xc3fb, 0x3fd8, 0x874b, 0x0, 0x0);
        gbc.writeMem(0x874b, { 0x7a });
        gbc.writeMem(0x9279, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xea06);
        EXPECT(gbc.pc(), 0x927b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x874b), 0xf4);
        EXPECT(gbc.readMem(0x9279), 0xcb);
        EXPECT(gbc.readMem(0x927a), 0x6);
        // CB 06 0331
        gbc.setState(0x1eed, 0x6170, 0xef20, 0x936a, 0x4fc1, 0xe402, 0x1, 0x0);
        gbc.writeMem(0x1eed, { 0xcb, 0x6 });
        gbc.writeMem(0xe402, { 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x6170);
        EXPECT(gbc.pc(), 0x1eef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe402), 0x13);
        // CB 06 0335
        gbc.setState(0x7fa7, 0x3c1a, 0x3c10, 0x354d, 0xec2, 0xc0b2, 0x0, 0x0);
        gbc.writeMem(0x7fa7, { 0xcb, 0x6 });
        gbc.writeMem(0xc0b2, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x3c1a);
        EXPECT(gbc.pc(), 0x7fa9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0b2), 0x83);
        // CB 06 0337
        gbc.setState(0x3951, 0xa3f6, 0x59b0, 0x486, 0x5c49, 0xbc8d, 0x0, 0x1);
        gbc.writeMem(0x3951, { 0xcb, 0x6 });
        gbc.writeMem(0xbc8d, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa3f6);
        EXPECT(gbc.pc(), 0x3953);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc8d), 0xe6);
        // CB 06 0338
        gbc.setState(0x6ea8, 0x3883, 0x44d0, 0x7d21, 0x2945, 0xb8eb, 0x0, 0x0);
        gbc.writeMem(0x6ea8, { 0xcb, 0x6 });
        gbc.writeMem(0xb8eb, { 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x3883);
        EXPECT(gbc.pc(), 0x6eaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8eb), 0x91);
        // CB 06 033B
        gbc.setState(0x9216, 0x21c7, 0x78a0, 0x4df8, 0xf1a2, 0xb056, 0x0, 0x0);
        gbc.writeMem(0x9216, { 0xcb, 0x6 });
        gbc.writeMem(0xb056, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x21c7);
        EXPECT(gbc.pc(), 0x9218);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9216), 0xcb);
        EXPECT(gbc.readMem(0x9217), 0x6);
        EXPECT(gbc.readMem(0xb056), 0xb9);
        // CB 06 033C
        gbc.setState(0xa583, 0x1e5b, 0x4c90, 0x5526, 0x1d32, 0xa712, 0x1, 0x0);
        gbc.writeMem(0xa583, { 0xcb, 0x6 });
        gbc.writeMem(0xa712, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x1e5b);
        EXPECT(gbc.pc(), 0xa585);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa583), 0xcb);
        EXPECT(gbc.readMem(0xa584), 0x6);
        EXPECT(gbc.readMem(0xa712), 0xa1);
        // CB 06 033D
        gbc.setState(0x296f, 0x7f40, 0x34e0, 0x78ca, 0x9e84, 0xc5e2, 0x0, 0x0);
        gbc.writeMem(0x296f, { 0xcb, 0x6 });
        gbc.writeMem(0xc5e2, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x7f40);
        EXPECT(gbc.pc(), 0x2971);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5e2), 0xf4);
        // CB 06 0340
        gbc.setState(0xea77, 0xd6d6, 0x79d0, 0x6d12, 0x43c3, 0xc820, 0x1, 0x1);
        gbc.writeMem(0xc820, { 0xec });
        gbc.writeMem(0xea77, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xd6d6);
        EXPECT(gbc.pc(), 0xea79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc820), 0xd9);
        EXPECT(gbc.readMem(0xea77), 0xcb);
        EXPECT(gbc.readMem(0xea78), 0x6);
        // CB 06 0341
        gbc.setState(0xe8e4, 0x84a2, 0xf110, 0x66b, 0x40f6, 0xe355, 0x1, 0x1);
        gbc.writeMem(0xe355, { 0xe9 });
        gbc.writeMem(0xe8e4, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x84a2);
        EXPECT(gbc.pc(), 0xe8e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe355), 0xd3);
        EXPECT(gbc.readMem(0xe8e4), 0xcb);
        EXPECT(gbc.readMem(0xe8e5), 0x6);
        // CB 06 0342
        gbc.setState(0xe49d, 0xee3d, 0xb290, 0x47af, 0x96c3, 0xd778, 0x1, 0x0);
        gbc.writeMem(0xd778, { 0x69 });
        gbc.writeMem(0xe49d, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xee3d);
        EXPECT(gbc.pc(), 0xe49f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd778), 0xd2);
        EXPECT(gbc.readMem(0xe49d), 0xcb);
        EXPECT(gbc.readMem(0xe49e), 0x6);
        // CB 06 0343
        gbc.setState(0xc419, 0x7d90, 0xb4e0, 0xfd92, 0x893f, 0xee2a, 0x0, 0x1);
        gbc.writeMem(0xc419, { 0xcb, 0x6 });
        gbc.writeMem(0xee2a, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x7d90);
        EXPECT(gbc.pc(), 0xc41b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc419), 0xcb);
        EXPECT(gbc.readMem(0xc41a), 0x6);
        EXPECT(gbc.readMem(0xee2a), 0xa4);
        // CB 06 0345
        gbc.setState(0x2900, 0x58af, 0x2e0, 0xd736, 0x5a7f, 0xd8ca, 0x0, 0x0);
        gbc.writeMem(0x2900, { 0xcb, 0x6 });
        gbc.writeMem(0xd8ca, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x58af);
        EXPECT(gbc.pc(), 0x2902);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8ca), 0xde);
        // CB 06 0348
        gbc.setState(0x44a1, 0xf3ba, 0x3f30, 0x52f1, 0xa2ea, 0xd654, 0x0, 0x0);
        gbc.writeMem(0x44a1, { 0xcb, 0x6 });
        gbc.writeMem(0xd654, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xf3ba);
        EXPECT(gbc.pc(), 0x44a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd654), 0xcc);
        // CB 06 0349
        gbc.setState(0xcb8a, 0x38db, 0x4690, 0xf81b, 0xf10e, 0x8bb4, 0x1, 0x0);
        gbc.writeMem(0x8bb4, { 0x81 });
        gbc.writeMem(0xcb8a, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x38db);
        EXPECT(gbc.pc(), 0xcb8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bb4), 0x3);
        EXPECT(gbc.readMem(0xcb8a), 0xcb);
        EXPECT(gbc.readMem(0xcb8b), 0x6);
        // CB 06 034B
        gbc.setState(0xd8c4, 0xea94, 0xb560, 0x9c70, 0x4543, 0xc861, 0x1, 0x1);
        gbc.writeMem(0xc861, { 0x99 });
        gbc.writeMem(0xd8c4, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xea94);
        EXPECT(gbc.pc(), 0xd8c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc861), 0x33);
        EXPECT(gbc.readMem(0xd8c4), 0xcb);
        EXPECT(gbc.readMem(0xd8c5), 0x6);
        // CB 06 034C
        gbc.setState(0xe052, 0xca68, 0xbdd0, 0x5fe7, 0xb909, 0xad9e, 0x1, 0x1);
        gbc.writeMem(0xad9e, { 0xd7 });
        gbc.writeMem(0xe052, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xca68);
        EXPECT(gbc.pc(), 0xe054);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad9e), 0xaf);
        EXPECT(gbc.readMem(0xe052), 0xcb);
        EXPECT(gbc.readMem(0xe053), 0x6);
        // CB 06 034D
        gbc.setState(0x4afe, 0x52dd, 0xf290, 0x63b1, 0xfd28, 0xd391, 0x0, 0x1);
        gbc.writeMem(0x4afe, { 0xcb, 0x6 });
        gbc.writeMem(0xd391, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x52dd);
        EXPECT(gbc.pc(), 0x4b00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd391), 0x1c);
        // CB 06 034E
        gbc.setState(0x1a11, 0x2de1, 0xe890, 0x7250, 0x6c5c, 0xb96c, 0x0, 0x0);
        gbc.writeMem(0x1a11, { 0xcb, 0x6 });
        gbc.writeMem(0xb96c, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x2de1);
        EXPECT(gbc.pc(), 0x1a13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb96c), 0x4b);
        // CB 06 034F
        gbc.setState(0x3917, 0xb7a1, 0xfd80, 0xd94f, 0x6041, 0xdf14, 0x1, 0x1);
        gbc.writeMem(0x3917, { 0xcb, 0x6 });
        gbc.writeMem(0xdf14, { 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xb7a1);
        EXPECT(gbc.pc(), 0x3919);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf14), 0xf6);
        // CB 06 0351
        gbc.setState(0x5ce7, 0x59e1, 0x33b0, 0x6166, 0xad07, 0x9836, 0x0, 0x1);
        gbc.writeMem(0x5ce7, { 0xcb, 0x6 });
        gbc.writeMem(0x9836, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x59e1);
        EXPECT(gbc.pc(), 0x5ce9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9836), 0xe3);
        // CB 06 0353
        gbc.setState(0x39f0, 0x38c1, 0xd8c0, 0xeafe, 0x7532, 0xc693, 0x1, 0x1);
        gbc.writeMem(0x39f0, { 0xcb, 0x6 });
        gbc.writeMem(0xc693, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x38c1);
        EXPECT(gbc.pc(), 0x39f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc693), 0xf7);
        // CB 06 0355
        gbc.setState(0xb844, 0x8ee6, 0xca40, 0x663c, 0x2999, 0xa3a2, 0x0, 0x1);
        gbc.writeMem(0xa3a2, { 0x33 });
        gbc.writeMem(0xb844, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x8ee6);
        EXPECT(gbc.pc(), 0xb846);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3a2), 0x66);
        EXPECT(gbc.readMem(0xb844), 0xcb);
        EXPECT(gbc.readMem(0xb845), 0x6);
        // CB 06 0357
        gbc.setState(0x241b, 0x7b7a, 0x7170, 0x821c, 0x3302, 0xac4c, 0x1, 0x0);
        gbc.writeMem(0x241b, { 0xcb, 0x6 });
        gbc.writeMem(0xac4c, { 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x7b7a);
        EXPECT(gbc.pc(), 0x241d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac4c), 0xf6);
        // CB 06 035C
        gbc.setState(0x7e50, 0x9f41, 0xf3b0, 0x5b5, 0xfbd0, 0x8032, 0x0, 0x1);
        gbc.writeMem(0x7e50, { 0xcb, 0x6 });
        gbc.writeMem(0x8032, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x9f41);
        EXPECT(gbc.pc(), 0x7e52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8032), 0xf3);
        // CB 06 035D
        gbc.setState(0x6724, 0xed46, 0xdf30, 0x1cea, 0x5b65, 0xcb47, 0x0, 0x0);
        gbc.writeMem(0x6724, { 0xcb, 0x6 });
        gbc.writeMem(0xcb47, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xed46);
        EXPECT(gbc.pc(), 0x6726);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb47), 0x2a);
        // CB 06 035E
        gbc.setState(0xcf6f, 0x601b, 0x8f40, 0x6df0, 0x3508, 0xe634, 0x0, 0x1);
        gbc.writeMem(0xcf6f, { 0xcb, 0x6 });
        gbc.writeMem(0xe634, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x601b);
        EXPECT(gbc.pc(), 0xcf71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf6f), 0xcb);
        EXPECT(gbc.readMem(0xcf70), 0x6);
        EXPECT(gbc.readMem(0xe634), 0xcc);
        // CB 06 0361
        gbc.setState(0xbcfe, 0x814b, 0xef50, 0xeacc, 0xedb2, 0xb61d, 0x0, 0x1);
        gbc.writeMem(0xb61d, { 0xbd });
        gbc.writeMem(0xbcfe, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x814b);
        EXPECT(gbc.pc(), 0xbd00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb61d), 0x7b);
        EXPECT(gbc.readMem(0xbcfe), 0xcb);
        EXPECT(gbc.readMem(0xbcff), 0x6);
        // CB 06 0363
        gbc.setState(0xa53f, 0x694a, 0xc280, 0x38dc, 0xfd6e, 0xd8af, 0x0, 0x1);
        gbc.writeMem(0xa53f, { 0xcb, 0x6 });
        gbc.writeMem(0xd8af, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x694a);
        EXPECT(gbc.pc(), 0xa541);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa53f), 0xcb);
        EXPECT(gbc.readMem(0xa540), 0x6);
        EXPECT(gbc.readMem(0xd8af), 0x8a);
        // CB 06 0364
        gbc.setState(0xd893, 0xcbb3, 0x24e0, 0x65cc, 0x6215, 0xd3f1, 0x0, 0x1);
        gbc.writeMem(0xd3f1, { 0x66 });
        gbc.writeMem(0xd893, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xcbb3);
        EXPECT(gbc.pc(), 0xd895);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3f1), 0xcc);
        EXPECT(gbc.readMem(0xd893), 0xcb);
        EXPECT(gbc.readMem(0xd894), 0x6);
        // CB 06 0365
        gbc.setState(0xbbd2, 0xabb3, 0xfce0, 0x119a, 0xe139, 0x9a96, 0x1, 0x1);
        gbc.writeMem(0x9a96, { 0x39 });
        gbc.writeMem(0xbbd2, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xabb3);
        EXPECT(gbc.pc(), 0xbbd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a96), 0x72);
        EXPECT(gbc.readMem(0xbbd2), 0xcb);
        EXPECT(gbc.readMem(0xbbd3), 0x6);
        // CB 06 0369
        gbc.setState(0xdd3a, 0xbadb, 0xa4e0, 0x2b6, 0x34dd, 0xdde9, 0x0, 0x1);
        gbc.writeMem(0xdd3a, { 0xcb, 0x6 });
        gbc.writeMem(0xdde9, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xbadb);
        EXPECT(gbc.pc(), 0xdd3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd3a), 0xcb);
        EXPECT(gbc.readMem(0xdd3b), 0x6);
        EXPECT(gbc.readMem(0xdde9), 0xe4);
        // CB 06 036C
        gbc.setState(0x67eb, 0xeeac, 0xdb60, 0x39e, 0x3ec0, 0x8c87, 0x0, 0x0);
        gbc.writeMem(0x67eb, { 0xcb, 0x6 });
        gbc.writeMem(0x8c87, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xeeac);
        EXPECT(gbc.pc(), 0x67ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c87), 0x9);
        // CB 06 036D
        gbc.setState(0x9633, 0xab70, 0x2e90, 0x573f, 0x978b, 0x8a76, 0x1, 0x0);
        gbc.writeMem(0x8a76, { 0xc2 });
        gbc.writeMem(0x9633, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xab70);
        EXPECT(gbc.pc(), 0x9635);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a76), 0x85);
        EXPECT(gbc.readMem(0x9633), 0xcb);
        EXPECT(gbc.readMem(0x9634), 0x6);
        // CB 06 036F
        gbc.setState(0x611b, 0xdf6f, 0xd020, 0x2c3f, 0x53c5, 0xa0e7, 0x1, 0x1);
        gbc.writeMem(0x611b, { 0xcb, 0x6 });
        gbc.writeMem(0xa0e7, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xdf6f);
        EXPECT(gbc.pc(), 0x611d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0e7), 0x7f);
        // CB 06 0370
        gbc.setState(0x4e10, 0xad12, 0xe0a0, 0x8748, 0xd611, 0xdfb6, 0x0, 0x0);
        gbc.writeMem(0x4e10, { 0xcb, 0x6 });
        gbc.writeMem(0xdfb6, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xad12);
        EXPECT(gbc.pc(), 0x4e12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfb6), 0x15);
        // CB 06 0377
        gbc.setState(0x44c9, 0x6c4c, 0x10a0, 0x2c1c, 0xd78b, 0xae8d, 0x0, 0x0);
        gbc.writeMem(0x44c9, { 0xcb, 0x6 });
        gbc.writeMem(0xae8d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x6c4c);
        EXPECT(gbc.pc(), 0x44cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae8d), 0x55);
        // CB 06 037B
        gbc.setState(0x5a67, 0x2127, 0xb770, 0xf787, 0xfd5f, 0xd69a, 0x0, 0x0);
        gbc.writeMem(0x5a67, { 0xcb, 0x6 });
        gbc.writeMem(0xd69a, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x2127);
        EXPECT(gbc.pc(), 0x5a69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd69a), 0x20);
        // CB 06 037C
        gbc.setState(0xc50f, 0xb504, 0xb410, 0x7cda, 0xaa5e, 0x9c30, 0x0, 0x1);
        gbc.writeMem(0x9c30, { 0x77 });
        gbc.writeMem(0xc50f, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xb504);
        EXPECT(gbc.pc(), 0xc511);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c30), 0xee);
        EXPECT(gbc.readMem(0xc50f), 0xcb);
        EXPECT(gbc.readMem(0xc510), 0x6);
        // CB 06 037D
        gbc.setState(0x3bdc, 0x101f, 0x80b0, 0x75e5, 0x3e73, 0x9cd0, 0x0, 0x1);
        gbc.writeMem(0x3bdc, { 0xcb, 0x6 });
        gbc.writeMem(0x9cd0, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x101f);
        EXPECT(gbc.pc(), 0x3bde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cd0), 0x7d);
        // CB 06 0381
        gbc.setState(0xd712, 0xa937, 0x29d0, 0x411b, 0xc1e8, 0xf2b3, 0x1, 0x1);
        gbc.writeMem(0xd712, { 0xcb, 0x6 });
        gbc.writeMem(0xf2b3, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xa937);
        EXPECT(gbc.pc(), 0xd714);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd712), 0xcb);
        EXPECT(gbc.readMem(0xd713), 0x6);
        EXPECT(gbc.readMem(0xf2b3), 0xf8);
        // CB 06 0382
        gbc.setState(0x4846, 0x49bb, 0xf600, 0x5bcf, 0xc385, 0xaf87, 0x0, 0x1);
        gbc.writeMem(0x4846, { 0xcb, 0x6 });
        gbc.writeMem(0xaf87, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x49bb);
        EXPECT(gbc.pc(), 0x4848);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf87), 0x55);
        // CB 06 0384
        gbc.setState(0xa470, 0x6af3, 0xc350, 0xf5aa, 0xb22b, 0xdd11, 0x0, 0x0);
        gbc.writeMem(0xa470, { 0xcb, 0x6 });
        gbc.writeMem(0xdd11, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x6af3);
        EXPECT(gbc.pc(), 0xa472);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa470), 0xcb);
        EXPECT(gbc.readMem(0xa471), 0x6);
        EXPECT(gbc.readMem(0xdd11), 0xee);
        // CB 06 0387
        gbc.setState(0x5874, 0x1720, 0x2b20, 0xaf2e, 0xc6fe, 0xe648, 0x1, 0x0);
        gbc.writeMem(0x5874, { 0xcb, 0x6 });
        gbc.writeMem(0xe648, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x1720);
        EXPECT(gbc.pc(), 0x5876);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe648), 0x20);
        // CB 06 0388
        gbc.setState(0x3e6b, 0xccb2, 0x47a0, 0xd256, 0x30fd, 0xd0ca, 0x1, 0x0);
        gbc.writeMem(0x3e6b, { 0xcb, 0x6 });
        gbc.writeMem(0xd0ca, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xccb2);
        EXPECT(gbc.pc(), 0x3e6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0ca), 0xe1);
        // CB 06 038A
        gbc.setState(0x29a0, 0xe157, 0x8080, 0x780e, 0xb7c4, 0x81c9, 0x0, 0x0);
        gbc.writeMem(0x29a0, { 0xcb, 0x6 });
        gbc.writeMem(0x81c9, { 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xe157);
        EXPECT(gbc.pc(), 0x29a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81c9), 0xbe);
        // CB 06 038C
        gbc.setState(0x3a92, 0xa859, 0x6650, 0x6fda, 0x6637, 0xe4f9, 0x0, 0x1);
        gbc.writeMem(0x3a92, { 0xcb, 0x6 });
        gbc.writeMem(0xe4f9, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xa859);
        EXPECT(gbc.pc(), 0x3a94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4f9), 0x4);
        // CB 06 038F
        gbc.setState(0xefba, 0x6d09, 0x6e10, 0xff82, 0x9bf6, 0xa6a2, 0x1, 0x1);
        gbc.writeMem(0xa6a2, { 0x5d });
        gbc.writeMem(0xefba, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x6d09);
        EXPECT(gbc.pc(), 0xefbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6a2), 0xba);
        EXPECT(gbc.readMem(0xefba), 0xcb);
        EXPECT(gbc.readMem(0xefbb), 0x6);
        // CB 06 0391
        gbc.setState(0x1ba5, 0x7151, 0xa3c0, 0x1d51, 0xee0c, 0xec7a, 0x0, 0x0);
        gbc.writeMem(0x1ba5, { 0xcb, 0x6 });
        gbc.writeMem(0xec7a, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x7151);
        EXPECT(gbc.pc(), 0x1ba7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec7a), 0x5b);
        // CB 06 0394
        gbc.setState(0x5ad0, 0xafeb, 0x1950, 0xfed5, 0x9a9c, 0xb212, 0x0, 0x1);
        gbc.writeMem(0x5ad0, { 0xcb, 0x6 });
        gbc.writeMem(0xb212, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xafeb);
        EXPECT(gbc.pc(), 0x5ad2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb212), 0xcd);
        // CB 06 0395
        gbc.setState(0x6215, 0xf1c5, 0x8fd0, 0x14fe, 0x3b2a, 0xbb86, 0x1, 0x0);
        gbc.writeMem(0x6215, { 0xcb, 0x6 });
        gbc.writeMem(0xbb86, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xf1c5);
        EXPECT(gbc.pc(), 0x6217);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb86), 0xff);
        // CB 06 0396
        gbc.setState(0x19b0, 0x2e4b, 0xa440, 0x5984, 0x9835, 0x896e, 0x1, 0x1);
        gbc.writeMem(0x19b0, { 0xcb, 0x6 });
        gbc.writeMem(0x896e, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x2e4b);
        EXPECT(gbc.pc(), 0x19b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x896e), 0x17);
        // CB 06 0397
        gbc.setState(0x7cd3, 0x79ef, 0x25d0, 0x2ae9, 0x85b6, 0xabc0, 0x0, 0x0);
        gbc.writeMem(0x7cd3, { 0xcb, 0x6 });
        gbc.writeMem(0xabc0, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x79ef);
        EXPECT(gbc.pc(), 0x7cd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabc0), 0x79);
        // CB 06 0398
        gbc.setState(0xd199, 0x36c0, 0x6520, 0x4d2f, 0xceb4, 0x8a6f, 0x1, 0x0);
        gbc.writeMem(0x8a6f, { 0x8b });
        gbc.writeMem(0xd199, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x36c0);
        EXPECT(gbc.pc(), 0xd19b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a6f), 0x17);
        EXPECT(gbc.readMem(0xd199), 0xcb);
        EXPECT(gbc.readMem(0xd19a), 0x6);
        // CB 06 039B
        gbc.setState(0x4468, 0x1ad2, 0x7b70, 0xdf1f, 0xeaa2, 0xd460, 0x1, 0x1);
        gbc.writeMem(0x4468, { 0xcb, 0x6 });
        gbc.writeMem(0xd460, { 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x1ad2);
        EXPECT(gbc.pc(), 0x446a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd460), 0x5c);
        // CB 06 039C
        gbc.setState(0x5a9a, 0x7843, 0xee20, 0x243c, 0xe44d, 0xf721, 0x0, 0x0);
        gbc.writeMem(0x5a9a, { 0xcb, 0x6 });
        gbc.writeMem(0xf721, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x7843);
        EXPECT(gbc.pc(), 0x5a9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf721), 0x60);
        // CB 06 03A1
        gbc.setState(0x8bcc, 0x6e07, 0x7570, 0x181f, 0x476b, 0x998d, 0x0, 0x1);
        gbc.writeMem(0x8bcc, { 0xcb, 0x6 });
        gbc.writeMem(0x998d, { 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x6e07);
        EXPECT(gbc.pc(), 0x8bce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bcc), 0xcb);
        EXPECT(gbc.readMem(0x8bcd), 0x6);
        EXPECT(gbc.readMem(0x998d), 0xba);
        // CB 06 03A3
        gbc.setState(0xed22, 0xb077, 0x1380, 0x5278, 0x5164, 0xdb10, 0x0, 0x0);
        gbc.writeMem(0xdb10, { 0xaa });
        gbc.writeMem(0xed22, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xb077);
        EXPECT(gbc.pc(), 0xed24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb10), 0x55);
        EXPECT(gbc.readMem(0xed22), 0xcb);
        EXPECT(gbc.readMem(0xed23), 0x6);
        // CB 06 03A9
        gbc.setState(0x3500, 0x47c6, 0xf710, 0x74bf, 0x3a3e, 0x8610, 0x1, 0x1);
        gbc.writeMem(0x3500, { 0xcb, 0x6 });
        gbc.writeMem(0x8610, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x47c6);
        EXPECT(gbc.pc(), 0x3502);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8610), 0x2b);
        // CB 06 03AD
        gbc.setState(0xc753, 0x8b04, 0xdfa0, 0x579a, 0x9e90, 0xfdd7, 0x1, 0x0);
        gbc.writeMem(0xc753, { 0xcb, 0x6 });
        gbc.writeMem(0xfdd7, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x8b04);
        EXPECT(gbc.pc(), 0xc755);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc753), 0xcb);
        EXPECT(gbc.readMem(0xc754), 0x6);
        EXPECT(gbc.readMem(0xfdd7), 0x49);
        // CB 06 03B0
        gbc.setState(0x480a, 0xe9f3, 0xf4f0, 0xfe52, 0xd860, 0x9c75, 0x1, 0x1);
        gbc.writeMem(0x480a, { 0xcb, 0x6 });
        gbc.writeMem(0x9c75, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xe9f3);
        EXPECT(gbc.pc(), 0x480c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c75), 0x9e);
        // CB 06 03B2
        gbc.setState(0x8d6, 0xebb2, 0xbf0, 0x291d, 0xa6d1, 0xa821, 0x0, 0x1);
        gbc.writeMem(0x8d6, { 0xcb, 0x6 });
        gbc.writeMem(0xa821, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xebb2);
        EXPECT(gbc.pc(), 0x8d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa821), 0xa2);
        // CB 06 03BA
        gbc.setState(0xa71b, 0xb882, 0x9bc0, 0x857f, 0x51ff, 0x8c6b, 0x0, 0x0);
        gbc.writeMem(0x8c6b, { 0x57 });
        gbc.writeMem(0xa71b, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xb882);
        EXPECT(gbc.pc(), 0xa71d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c6b), 0xae);
        EXPECT(gbc.readMem(0xa71b), 0xcb);
        EXPECT(gbc.readMem(0xa71c), 0x6);
        // CB 06 03BC
        gbc.setState(0x8f0f, 0xc02a, 0xa650, 0xd94f, 0xc3a5, 0x95b4, 0x0, 0x1);
        gbc.writeMem(0x8f0f, { 0xcb, 0x6 });
        gbc.writeMem(0x95b4, { 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xc02a);
        EXPECT(gbc.pc(), 0x8f11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f0f), 0xcb);
        EXPECT(gbc.readMem(0x8f10), 0x6);
        EXPECT(gbc.readMem(0x95b4), 0xfa);
        // CB 06 03C3
        gbc.setState(0x579c, 0x8f4c, 0x8680, 0x7341, 0x6634, 0xe395, 0x1, 0x1);
        gbc.writeMem(0x579c, { 0xcb, 0x6 });
        gbc.writeMem(0xe395, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x8f4c);
        EXPECT(gbc.pc(), 0x579e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe395), 0xbc);
        // CB 06 03C9
        gbc.setState(0xda38, 0xd01c, 0xd750, 0x2661, 0x21ba, 0xb013, 0x0, 0x0);
        gbc.writeMem(0xb013, { 0x8f });
        gbc.writeMem(0xda38, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xd01c);
        EXPECT(gbc.pc(), 0xda3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb013), 0x1f);
        EXPECT(gbc.readMem(0xda38), 0xcb);
        EXPECT(gbc.readMem(0xda39), 0x6);
        // CB 06 03CD
        gbc.setState(0xc71e, 0x6480, 0xd160, 0xd369, 0x9328, 0x81e8, 0x1, 0x1);
        gbc.writeMem(0x81e8, { 0x22 });
        gbc.writeMem(0xc71e, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x6480);
        EXPECT(gbc.pc(), 0xc720);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81e8), 0x44);
        EXPECT(gbc.readMem(0xc71e), 0xcb);
        EXPECT(gbc.readMem(0xc71f), 0x6);
        // CB 06 03CE
        gbc.setState(0xc4b1, 0x85e, 0x3890, 0xbd8f, 0x4679, 0x9638, 0x0, 0x0);
        gbc.writeMem(0x9638, { 0xe7 });
        gbc.writeMem(0xc4b1, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x85e);
        EXPECT(gbc.pc(), 0xc4b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9638), 0xcf);
        EXPECT(gbc.readMem(0xc4b1), 0xcb);
        EXPECT(gbc.readMem(0xc4b2), 0x6);
        // CB 06 03D1
        gbc.setState(0x5c13, 0xd109, 0xf7b0, 0x34dd, 0x8bd5, 0xaea2, 0x0, 0x0);
        gbc.writeMem(0x5c13, { 0xcb, 0x6 });
        gbc.writeMem(0xaea2, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xd109);
        EXPECT(gbc.pc(), 0x5c15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaea2), 0xf9);
        // CB 06 03D2
        gbc.setState(0x3294, 0xb56, 0xc0b0, 0x378e, 0xce36, 0x8814, 0x1, 0x0);
        gbc.writeMem(0x3294, { 0xcb, 0x6 });
        gbc.writeMem(0x8814, { 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xb56);
        EXPECT(gbc.pc(), 0x3296);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8814), 0x96);
        // CB 06 03D4
        gbc.setState(0x4f9d, 0x4559, 0xfa10, 0x58cf, 0xb0d1, 0x9c45, 0x1, 0x0);
        gbc.writeMem(0x4f9d, { 0xcb, 0x6 });
        gbc.writeMem(0x9c45, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x4559);
        EXPECT(gbc.pc(), 0x4f9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c45), 0xc);
        // CB 06 03D5
        gbc.setState(0x350c, 0x9257, 0x24f0, 0x958d, 0xa9d9, 0xf9ad, 0x0, 0x0);
        gbc.writeMem(0x350c, { 0xcb, 0x6 });
        gbc.writeMem(0xf9ad, { 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x9257);
        EXPECT(gbc.pc(), 0x350e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf9ad), 0xc0);
        // CB 06 03D6
        gbc.setState(0xcfb0, 0xfaad, 0x2c20, 0x2ad8, 0x31ae, 0xab19, 0x1, 0x1);
        gbc.writeMem(0xab19, { 0x95 });
        gbc.writeMem(0xcfb0, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xfaad);
        EXPECT(gbc.pc(), 0xcfb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab19), 0x2b);
        EXPECT(gbc.readMem(0xcfb0), 0xcb);
        EXPECT(gbc.readMem(0xcfb1), 0x6);
        // CB 06 03D7
        gbc.setState(0x1b0f, 0xadac, 0x8250, 0x6e98, 0xbc6d, 0x961c, 0x1, 0x1);
        gbc.writeMem(0x1b0f, { 0xcb, 0x6 });
        gbc.writeMem(0x961c, { 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xadac);
        EXPECT(gbc.pc(), 0x1b11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x961c), 0x64);
        // CB 06 03DB
        gbc.setState(0x924f, 0xd7d2, 0x9610, 0x5271, 0xf6cb, 0xda42, 0x1, 0x0);
        gbc.writeMem(0x924f, { 0xcb, 0x6 });
        gbc.writeMem(0xda42, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xd7d2);
        EXPECT(gbc.pc(), 0x9251);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x924f), 0xcb);
        EXPECT(gbc.readMem(0x9250), 0x6);
        EXPECT(gbc.readMem(0xda42), 0xee);
        // CB 06 03DF
        gbc.setState(0x3f30, 0xb0b9, 0xcf90, 0xee, 0x748b, 0x89eb, 0x0, 0x1);
        gbc.writeMem(0x3f30, { 0xcb, 0x6 });
        gbc.writeMem(0x89eb, { 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xb0b9);
        EXPECT(gbc.pc(), 0x3f32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89eb), 0x86);
        // CB 06 03E1
        gbc.setState(0x90d5, 0xae08, 0x41e0, 0x82b6, 0xe747, 0xcfcf, 0x1, 0x1);
        gbc.writeMem(0x90d5, { 0xcb, 0x6 });
        gbc.writeMem(0xcfcf, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xae08);
        EXPECT(gbc.pc(), 0x90d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90d5), 0xcb);
        EXPECT(gbc.readMem(0x90d6), 0x6);
        EXPECT(gbc.readMem(0xcfcf), 0x46);
        // CB 06 03E2
        gbc.setState(0x6cf8, 0xe319, 0xc620, 0x49a5, 0xea4, 0xe4be, 0x1, 0x0);
        gbc.writeMem(0x6cf8, { 0xcb, 0x6 });
        gbc.writeMem(0xe4be, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xe319);
        EXPECT(gbc.pc(), 0x6cfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4be), 0xab);
        // CB 06 03E6
        gbc.setState(0xab7d, 0x525b, 0x19c0, 0x9040, 0x9d22, 0xd914, 0x1, 0x1);
        gbc.writeMem(0xab7d, { 0xcb, 0x6 });
        gbc.writeMem(0xd914, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x525b);
        EXPECT(gbc.pc(), 0xab7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab7d), 0xcb);
        EXPECT(gbc.readMem(0xab7e), 0x6);
        EXPECT(gbc.readMem(0xd914), 0xd3);
        // CB 06 03E7
        gbc.setState(0xdff7, 0xb828, 0xa4b0, 0x9f0d, 0x98d1, 0xb54f, 0x0, 0x0);
        gbc.writeMem(0xb54f, { 0xbd });
        gbc.writeMem(0xdff7, { 0xcb, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xb828);
        EXPECT(gbc.pc(), 0xdff9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb54f), 0x7b);
        EXPECT(gbc.readMem(0xdff7), 0xcb);
        EXPECT(gbc.readMem(0xdff8), 0x6);
    }
}
#endif
