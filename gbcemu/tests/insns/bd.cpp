#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_bd)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_bd) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // BD 0000
        gbc.setState(0x3b6b, 0xa20d, 0x6390, 0xf56f, 0xc8dc, 0x674, 0x1, 0x0);
        gbc.writeMem(0x3b6b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xa20d);
        EXPECT(gbc.pc(), 0x3b6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0001
        gbc.setState(0x8ff6, 0x481e, 0x8640, 0x8cfa, 0x412b, 0x7f02, 0x0, 0x1);
        gbc.writeMem(0x8ff6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x481e);
        EXPECT(gbc.pc(), 0x8ff7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ff6), 0xbd);
        // BD 0002
        gbc.setState(0xe3c3, 0x96e8, 0xb8d0, 0x8767, 0x1f7b, 0x53ad, 0x1, 0x1);
        gbc.writeMem(0xe3c3, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x96e8);
        EXPECT(gbc.pc(), 0xe3c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3c3), 0xbd);
        // BD 0003
        gbc.setState(0xb65d, 0x4e80, 0x2fe0, 0x9119, 0x47dc, 0x770d, 0x1, 0x1);
        gbc.writeMem(0xb65d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x4e80);
        EXPECT(gbc.pc(), 0xb65e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb65d), 0xbd);
        // BD 0004
        gbc.setState(0xa87e, 0x5a74, 0xc480, 0xdd89, 0xb4f5, 0xc8f5, 0x1, 0x0);
        gbc.writeMem(0xa87e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x5a74);
        EXPECT(gbc.pc(), 0xa87f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa87e), 0xbd);
        // BD 0005
        gbc.setState(0xa103, 0x3258, 0x7360, 0x9961, 0xfc0d, 0xa021, 0x1, 0x1);
        gbc.writeMem(0xa103, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x3258);
        EXPECT(gbc.pc(), 0xa104);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa103), 0xbd);
        // BD 0006
        gbc.setState(0x3674, 0xc54e, 0xe9f0, 0x8198, 0xe8a4, 0xddc9, 0x1, 0x1);
        gbc.writeMem(0x3674, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xc54e);
        EXPECT(gbc.pc(), 0x3675);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0007
        gbc.setState(0x3b84, 0xf962, 0x5a80, 0xce89, 0x4bf4, 0x96fa, 0x1, 0x1);
        gbc.writeMem(0x3b84, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xf962);
        EXPECT(gbc.pc(), 0x3b85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0008
        gbc.setState(0xa46a, 0x946d, 0x18f0, 0xd304, 0xa491, 0xa043, 0x1, 0x0);
        gbc.writeMem(0xa46a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x946d);
        EXPECT(gbc.pc(), 0xa46b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa46a), 0xbd);
        // BD 0009
        gbc.setState(0xa119, 0xace4, 0x78f0, 0x215e, 0xeab0, 0x464e, 0x0, 0x0);
        gbc.writeMem(0xa119, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xace4);
        EXPECT(gbc.pc(), 0xa11a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa119), 0xbd);
        // BD 000B
        gbc.setState(0xca83, 0xaf08, 0xe400, 0x3be6, 0x67c8, 0xa7b3, 0x1, 0x0);
        gbc.writeMem(0xca83, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xaf08);
        EXPECT(gbc.pc(), 0xca84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca83), 0xbd);
        // BD 000C
        gbc.setState(0x5e42, 0x50df, 0x9ca0, 0xc422, 0xfc6f, 0xd548, 0x1, 0x0);
        gbc.writeMem(0x5e42, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x50df);
        EXPECT(gbc.pc(), 0x5e43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 000D
        gbc.setState(0xccad, 0x6a2, 0x3ca0, 0x7b1d, 0x60a9, 0x49b7, 0x1, 0x0);
        gbc.writeMem(0xccad, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x6a2);
        EXPECT(gbc.pc(), 0xccae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccad), 0xbd);
        // BD 000E
        gbc.setState(0xef68, 0x612b, 0x2ab0, 0xaad6, 0x9839, 0xce73, 0x0, 0x0);
        gbc.writeMem(0xef68, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x612b);
        EXPECT(gbc.pc(), 0xef69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef68), 0xbd);
        // BD 000F
        gbc.setState(0x6964, 0x9bcf, 0x6ef0, 0x345, 0x83f3, 0x8930, 0x1, 0x0);
        gbc.writeMem(0x6964, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x9bcf);
        EXPECT(gbc.pc(), 0x6965);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0010
        gbc.setState(0xeeba, 0xa3e3, 0x1f60, 0x9efa, 0xefcb, 0x106, 0x1, 0x0);
        gbc.writeMem(0xeeba, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xa3e3);
        EXPECT(gbc.pc(), 0xeebb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeeba), 0xbd);
        // BD 0011
        gbc.setState(0xb34d, 0xf2a, 0xfc80, 0x6d8, 0xdcf2, 0xa58c, 0x0, 0x1);
        gbc.writeMem(0xb34d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xf2a);
        EXPECT(gbc.pc(), 0xb34e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb34d), 0xbd);
        // BD 0013
        gbc.setState(0xa6d8, 0xcc73, 0x6800, 0x53ea, 0xe485, 0x7716, 0x0, 0x1);
        gbc.writeMem(0xa6d8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xcc73);
        EXPECT(gbc.pc(), 0xa6d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6d8), 0xbd);
        // BD 0014
        gbc.setState(0xb91, 0x9037, 0x5f0, 0xe949, 0xef99, 0x10c3, 0x1, 0x1);
        gbc.writeMem(0xb91, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x9037);
        EXPECT(gbc.pc(), 0xb92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0015
        gbc.setState(0x87fa, 0xf4df, 0xfa40, 0xad2, 0xe606, 0x1240, 0x1, 0x1);
        gbc.writeMem(0x87fa, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xf4df);
        EXPECT(gbc.pc(), 0x87fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87fa), 0xbd);
        // BD 0017
        gbc.setState(0x73e8, 0x34eb, 0x8e30, 0xaed7, 0x7e2a, 0xd34d, 0x1, 0x1);
        gbc.writeMem(0x73e8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x34eb);
        EXPECT(gbc.pc(), 0x73e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0018
        gbc.setState(0x569f, 0xe808, 0x1c20, 0xd4e8, 0x6b91, 0x9a7e, 0x1, 0x0);
        gbc.writeMem(0x569f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xe808);
        EXPECT(gbc.pc(), 0x56a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 001A
        gbc.setState(0x7367, 0x849e, 0xd880, 0xf40, 0xa0ce, 0x97da, 0x0, 0x1);
        gbc.writeMem(0x7367, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x849e);
        EXPECT(gbc.pc(), 0x7368);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 001B
        gbc.setState(0x2bc9, 0x4b3a, 0x12a0, 0xdc5e, 0xa25e, 0x4af4, 0x0, 0x0);
        gbc.writeMem(0x2bc9, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x4b3a);
        EXPECT(gbc.pc(), 0x2bca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 001C
        gbc.setState(0xe482, 0xfcf5, 0x8ff0, 0x37f6, 0x3232, 0xe45, 0x0, 0x0);
        gbc.writeMem(0xe482, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xfcf5);
        EXPECT(gbc.pc(), 0xe483);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe482), 0xbd);
        // BD 001D
        gbc.setState(0x5430, 0x2ce8, 0x2950, 0x61ba, 0x3e5, 0x8319, 0x1, 0x0);
        gbc.writeMem(0x5430, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x2ce8);
        EXPECT(gbc.pc(), 0x5431);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 001E
        gbc.setState(0x1f7d, 0x6e23, 0x13b0, 0x4180, 0x31ac, 0xec81, 0x1, 0x0);
        gbc.writeMem(0x1f7d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x6e23);
        EXPECT(gbc.pc(), 0x1f7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 001F
        gbc.setState(0xec2c, 0xe3cb, 0x8b40, 0xcf7e, 0xba83, 0xf530, 0x0, 0x1);
        gbc.writeMem(0xec2c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xe3cb);
        EXPECT(gbc.pc(), 0xec2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec2c), 0xbd);
        // BD 0021
        gbc.setState(0xeb27, 0xfcd4, 0xf230, 0xde7e, 0xeeeb, 0xf3a9, 0x1, 0x1);
        gbc.writeMem(0xeb27, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xfcd4);
        EXPECT(gbc.pc(), 0xeb28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb27), 0xbd);
        // BD 0022
        gbc.setState(0xc834, 0x353d, 0x7910, 0x7d02, 0xc275, 0x6e9b, 0x1, 0x0);
        gbc.writeMem(0xc834, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x353d);
        EXPECT(gbc.pc(), 0xc835);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc834), 0xbd);
        // BD 0023
        gbc.setState(0xdad4, 0x758d, 0x90a0, 0xcb1a, 0x19f6, 0xa289, 0x1, 0x1);
        gbc.writeMem(0xdad4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x758d);
        EXPECT(gbc.pc(), 0xdad5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdad4), 0xbd);
        // BD 0024
        gbc.setState(0xda42, 0xcd40, 0xb2a0, 0xe22a, 0x85e8, 0xf0fa, 0x1, 0x0);
        gbc.writeMem(0xda42, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xcd40);
        EXPECT(gbc.pc(), 0xda43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda42), 0xbd);
        // BD 0025
        gbc.setState(0xd723, 0x5589, 0xb4a0, 0x24d6, 0x4eb3, 0x1231, 0x1, 0x1);
        gbc.writeMem(0xd723, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x5589);
        EXPECT(gbc.pc(), 0xd724);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd723), 0xbd);
        // BD 0027
        gbc.setState(0xc6fb, 0xe742, 0xde30, 0xe40a, 0x1267, 0xbade, 0x0, 0x0);
        gbc.writeMem(0xc6fb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xe742);
        EXPECT(gbc.pc(), 0xc6fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6fb), 0xbd);
        // BD 0028
        gbc.setState(0xd74b, 0xf85c, 0xb7d0, 0xb497, 0xe9da, 0xfeab, 0x0, 0x1);
        gbc.writeMem(0xd74b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xf85c);
        EXPECT(gbc.pc(), 0xd74c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd74b), 0xbd);
        // BD 0029
        gbc.setState(0xe387, 0x5aa7, 0xf410, 0x74b0, 0xbef7, 0x64b9, 0x1, 0x0);
        gbc.writeMem(0xe387, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x5aa7);
        EXPECT(gbc.pc(), 0xe388);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe387), 0xbd);
        // BD 002A
        gbc.setState(0xe8ff, 0x8abf, 0xe900, 0x2264, 0xfb27, 0x33d, 0x1, 0x1);
        gbc.writeMem(0xe8ff, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x8abf);
        EXPECT(gbc.pc(), 0xe900);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8ff), 0xbd);
        // BD 002B
        gbc.setState(0x227d, 0xdcda, 0x2ce0, 0x935d, 0xb73a, 0x5950, 0x0, 0x1);
        gbc.writeMem(0x227d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xdcda);
        EXPECT(gbc.pc(), 0x227e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 002C
        gbc.setState(0xb6af, 0x150d, 0xa5a0, 0x4864, 0x595d, 0xe62b, 0x1, 0x1);
        gbc.writeMem(0xb6af, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x150d);
        EXPECT(gbc.pc(), 0xb6b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6af), 0xbd);
        // BD 002D
        gbc.setState(0x76eb, 0xe192, 0xcd00, 0x6ab9, 0x3596, 0x8861, 0x0, 0x0);
        gbc.writeMem(0x76eb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xe192);
        EXPECT(gbc.pc(), 0x76ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 002E
        gbc.setState(0x2fb1, 0x9f72, 0xa790, 0x8d5c, 0xd691, 0x68e9, 0x0, 0x1);
        gbc.writeMem(0x2fb1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x9f72);
        EXPECT(gbc.pc(), 0x2fb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 002F
        gbc.setState(0xd01b, 0xbe5f, 0x1fb0, 0x8b64, 0xc388, 0xc7eb, 0x1, 0x1);
        gbc.writeMem(0xd01b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xbe5f);
        EXPECT(gbc.pc(), 0xd01c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd01b), 0xbd);
        // BD 0030
        gbc.setState(0xaeb4, 0x47f6, 0xa960, 0x3799, 0x2699, 0x56ef, 0x0, 0x0);
        gbc.writeMem(0xaeb4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x47f6);
        EXPECT(gbc.pc(), 0xaeb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaeb4), 0xbd);
        // BD 0032
        gbc.setState(0xef78, 0xb811, 0x76d0, 0x4d6e, 0x763a, 0x9cb0, 0x0, 0x0);
        gbc.writeMem(0xef78, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xb811);
        EXPECT(gbc.pc(), 0xef79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef78), 0xbd);
        // BD 0033
        gbc.setState(0xa5e4, 0xdce5, 0x6cf0, 0xd1c8, 0x3250, 0x48a9, 0x0, 0x0);
        gbc.writeMem(0xa5e4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xdce5);
        EXPECT(gbc.pc(), 0xa5e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5e4), 0xbd);
        // BD 0034
        gbc.setState(0x7b78, 0x1102, 0x4db0, 0x78aa, 0x827d, 0x5996, 0x1, 0x1);
        gbc.writeMem(0x7b78, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x1102);
        EXPECT(gbc.pc(), 0x7b79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0035
        gbc.setState(0xb86f, 0xae5, 0x9cf0, 0xc3e6, 0x14c8, 0x1238, 0x1, 0x1);
        gbc.writeMem(0xb86f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xae5);
        EXPECT(gbc.pc(), 0xb870);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb86f), 0xbd);
        // BD 0036
        gbc.setState(0xbf47, 0x8b3a, 0xc4d0, 0x1e42, 0x4cf2, 0xb193, 0x1, 0x1);
        gbc.writeMem(0xbf47, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x8b3a);
        EXPECT(gbc.pc(), 0xbf48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf47), 0xbd);
        // BD 0037
        gbc.setState(0xacc8, 0xbcfe, 0x4910, 0xd373, 0x81f4, 0x18e7, 0x0, 0x0);
        gbc.writeMem(0xacc8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xbcfe);
        EXPECT(gbc.pc(), 0xacc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacc8), 0xbd);
        // BD 0038
        gbc.setState(0xa464, 0xbef1, 0xf540, 0xcac3, 0x5c38, 0x76c, 0x1, 0x0);
        gbc.writeMem(0xa464, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xbef1);
        EXPECT(gbc.pc(), 0xa465);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa464), 0xbd);
        // BD 0039
        gbc.setState(0x7c2c, 0xacd5, 0xb210, 0x2dd, 0x146f, 0xbf7e, 0x1, 0x1);
        gbc.writeMem(0x7c2c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xacd5);
        EXPECT(gbc.pc(), 0x7c2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 003A
        gbc.setState(0x5281, 0x5107, 0xa450, 0x4f4a, 0x8c28, 0xf2e1, 0x1, 0x0);
        gbc.writeMem(0x5281, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5107);
        EXPECT(gbc.pc(), 0x5282);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 003B
        gbc.setState(0xe27f, 0x7a25, 0xee0, 0xc289, 0xd658, 0xe001, 0x0, 0x0);
        gbc.writeMem(0xe27f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x7a25);
        EXPECT(gbc.pc(), 0xe280);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe27f), 0xbd);
        // BD 003C
        gbc.setState(0x25db, 0xc6db, 0x7b20, 0x3875, 0x7a35, 0xe66c, 0x1, 0x0);
        gbc.writeMem(0x25db, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xc6db);
        EXPECT(gbc.pc(), 0x25dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 003D
        gbc.setState(0x9dcf, 0x3715, 0x66e0, 0xdb8b, 0x6e37, 0x4280, 0x1, 0x0);
        gbc.writeMem(0x9dcf, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x3715);
        EXPECT(gbc.pc(), 0x9dd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dcf), 0xbd);
        // BD 003E
        gbc.setState(0x8fb4, 0xe10d, 0xebb0, 0x492, 0x6075, 0x464a, 0x0, 0x1);
        gbc.writeMem(0x8fb4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xe10d);
        EXPECT(gbc.pc(), 0x8fb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fb4), 0xbd);
        // BD 003F
        gbc.setState(0x634f, 0x190d, 0x6240, 0x379b, 0x1c2, 0xe631, 0x1, 0x1);
        gbc.writeMem(0x634f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x190d);
        EXPECT(gbc.pc(), 0x6350);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0040
        gbc.setState(0xc47, 0xb6c7, 0x7170, 0x55f7, 0xe460, 0x8611, 0x1, 0x1);
        gbc.writeMem(0xc47, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xb6c7);
        EXPECT(gbc.pc(), 0xc48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0041
        gbc.setState(0xa712, 0x2dcb, 0xd260, 0x5f57, 0xd856, 0x9409, 0x0, 0x1);
        gbc.writeMem(0xa712, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x2dcb);
        EXPECT(gbc.pc(), 0xa713);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa712), 0xbd);
        // BD 0043
        gbc.setState(0x52ed, 0x7e7d, 0x120, 0x1d41, 0x7dd2, 0x5b93, 0x1, 0x1);
        gbc.writeMem(0x52ed, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x7e7d);
        EXPECT(gbc.pc(), 0x52ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0044
        gbc.setState(0x5213, 0x103f, 0xc620, 0x473e, 0x7b3, 0xb79, 0x0, 0x0);
        gbc.writeMem(0x5213, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x103f);
        EXPECT(gbc.pc(), 0x5214);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0045
        gbc.setState(0x824e, 0x3e91, 0xbcc0, 0xd598, 0xa704, 0xc5e7, 0x0, 0x1);
        gbc.writeMem(0x824e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x3e91);
        EXPECT(gbc.pc(), 0x824f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x824e), 0xbd);
        // BD 0046
        gbc.setState(0x87de, 0x7bdb, 0x5ad0, 0xbf7d, 0x40c, 0xb8f1, 0x0, 0x0);
        gbc.writeMem(0x87de, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x7bdb);
        EXPECT(gbc.pc(), 0x87df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87de), 0xbd);
        // BD 0047
        gbc.setState(0xe568, 0x67d4, 0x7060, 0x8ba3, 0x690c, 0xcd15, 0x1, 0x0);
        gbc.writeMem(0xe568, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x67d4);
        EXPECT(gbc.pc(), 0xe569);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe568), 0xbd);
        // BD 0048
        gbc.setState(0xaaf0, 0x2f82, 0xc7b0, 0xd11e, 0x9985, 0x7a80, 0x1, 0x1);
        gbc.writeMem(0xaaf0, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x2f82);
        EXPECT(gbc.pc(), 0xaaf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaf0), 0xbd);
        // BD 0049
        gbc.setState(0xdcaf, 0x4b7b, 0xb00, 0xc45a, 0xe844, 0x26c1, 0x0, 0x0);
        gbc.writeMem(0xdcaf, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4b7b);
        EXPECT(gbc.pc(), 0xdcb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcaf), 0xbd);
        // BD 004B
        gbc.setState(0xa8cb, 0x4f85, 0x5100, 0x7b61, 0xd71d, 0x4b36, 0x0, 0x1);
        gbc.writeMem(0xa8cb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x4f85);
        EXPECT(gbc.pc(), 0xa8cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8cb), 0xbd);
        // BD 004C
        gbc.setState(0x61f0, 0xa1fd, 0x1dc0, 0x5f82, 0x74ce, 0x60de, 0x1, 0x1);
        gbc.writeMem(0x61f0, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xa1fd);
        EXPECT(gbc.pc(), 0x61f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 004D
        gbc.setState(0xb782, 0x67ae, 0xc260, 0x5423, 0x9c54, 0xc479, 0x0, 0x0);
        gbc.writeMem(0xb782, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x67ae);
        EXPECT(gbc.pc(), 0xb783);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb782), 0xbd);
        // BD 004E
        gbc.setState(0xe6d4, 0x2bd8, 0x1070, 0x574, 0x5a47, 0x6bfe, 0x0, 0x1);
        gbc.writeMem(0xe6d4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x2bd8);
        EXPECT(gbc.pc(), 0xe6d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6d4), 0xbd);
        // BD 004F
        gbc.setState(0xd68, 0x446d, 0x7ce0, 0xdd6b, 0x961f, 0x4636, 0x0, 0x1);
        gbc.writeMem(0xd68, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x446d);
        EXPECT(gbc.pc(), 0xd69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0051
        gbc.setState(0xceb2, 0xc2c2, 0xbc30, 0x63b5, 0x3a8d, 0x9fa3, 0x0, 0x1);
        gbc.writeMem(0xceb2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xc2c2);
        EXPECT(gbc.pc(), 0xceb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xceb2), 0xbd);
        // BD 0052
        gbc.setState(0x72bc, 0x4f8, 0xcd40, 0xc866, 0x314a, 0x150, 0x0, 0x1);
        gbc.writeMem(0x72bc, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x4f8);
        EXPECT(gbc.pc(), 0x72bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0053
        gbc.setState(0xe2b2, 0x4756, 0xb270, 0x237b, 0x2319, 0x8234, 0x0, 0x0);
        gbc.writeMem(0xe2b2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x4756);
        EXPECT(gbc.pc(), 0xe2b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2b2), 0xbd);
        // BD 0054
        gbc.setState(0xe479, 0x169a, 0x2470, 0x6131, 0xe85b, 0x2770, 0x1, 0x0);
        gbc.writeMem(0xe479, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x169a);
        EXPECT(gbc.pc(), 0xe47a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe479), 0xbd);
        // BD 0055
        gbc.setState(0xcad0, 0x3cce, 0x2ca0, 0xc272, 0x13b1, 0x2d9, 0x1, 0x0);
        gbc.writeMem(0xcad0, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x3cce);
        EXPECT(gbc.pc(), 0xcad1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcad0), 0xbd);
        // BD 0056
        gbc.setState(0x7739, 0x63c2, 0x3c40, 0xd623, 0xced0, 0x46a5, 0x0, 0x0);
        gbc.writeMem(0x7739, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x63c2);
        EXPECT(gbc.pc(), 0x773a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0057
        gbc.setState(0x7a8d, 0x9291, 0xf60, 0xb8af, 0xaac5, 0xe488, 0x0, 0x0);
        gbc.writeMem(0x7a8d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x9291);
        EXPECT(gbc.pc(), 0x7a8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0058
        gbc.setState(0x807d, 0xd14e, 0x4aa0, 0x123d, 0xc048, 0xdcc2, 0x1, 0x0);
        gbc.writeMem(0x807d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xd14e);
        EXPECT(gbc.pc(), 0x807e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x807d), 0xbd);
        // BD 0059
        gbc.setState(0x5ee3, 0xc1d1, 0xf8e0, 0x418, 0x4f23, 0x4d5e, 0x1, 0x0);
        gbc.writeMem(0x5ee3, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xc1d1);
        EXPECT(gbc.pc(), 0x5ee4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 005A
        gbc.setState(0xe852, 0x9779, 0x49d0, 0xf71e, 0x1958, 0x289b, 0x1, 0x1);
        gbc.writeMem(0xe852, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x9779);
        EXPECT(gbc.pc(), 0xe853);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe852), 0xbd);
        // BD 005B
        gbc.setState(0x8f7d, 0x6aa7, 0x3fe0, 0x225d, 0x1b5c, 0x4e2f, 0x1, 0x0);
        gbc.writeMem(0x8f7d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x6aa7);
        EXPECT(gbc.pc(), 0x8f7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f7d), 0xbd);
        // BD 005C
        gbc.setState(0xe421, 0x75a9, 0x8470, 0xd765, 0xf389, 0x7b80, 0x0, 0x1);
        gbc.writeMem(0xe421, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x75a9);
        EXPECT(gbc.pc(), 0xe422);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe421), 0xbd);
        // BD 005D
        gbc.setState(0x441d, 0x22b5, 0x23f0, 0x1315, 0xc86d, 0xbe8c, 0x0, 0x1);
        gbc.writeMem(0x441d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x22b5);
        EXPECT(gbc.pc(), 0x441e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 005E
        gbc.setState(0x3831, 0x4d7e, 0x1d20, 0xe2a3, 0x3ae3, 0xd96b, 0x1, 0x0);
        gbc.writeMem(0x3831, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x4d7e);
        EXPECT(gbc.pc(), 0x3832);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 005F
        gbc.setState(0xa310, 0x7b4a, 0xc3c0, 0x9195, 0xc086, 0x223f, 0x1, 0x0);
        gbc.writeMem(0xa310, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x7b4a);
        EXPECT(gbc.pc(), 0xa311);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa310), 0xbd);
        // BD 0060
        gbc.setState(0x505, 0x6854, 0x6bc0, 0x97ef, 0xf01, 0xc9de, 0x1, 0x0);
        gbc.writeMem(0x505, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x6854);
        EXPECT(gbc.pc(), 0x506);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0061
        gbc.setState(0x8006, 0x9538, 0xcd90, 0x9f1c, 0x4509, 0x2cc, 0x0, 0x0);
        gbc.writeMem(0x8006, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x9538);
        EXPECT(gbc.pc(), 0x8007);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8006), 0xbd);
        // BD 0062
        gbc.setState(0xd4d8, 0x69b6, 0x14c0, 0x1df9, 0xcd4d, 0xe18d, 0x1, 0x0);
        gbc.writeMem(0xd4d8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x69b6);
        EXPECT(gbc.pc(), 0xd4d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4d8), 0xbd);
        // BD 0064
        gbc.setState(0xde0e, 0xccf0, 0x1750, 0x2dc2, 0x1f39, 0x4b09, 0x0, 0x0);
        gbc.writeMem(0xde0e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xccf0);
        EXPECT(gbc.pc(), 0xde0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde0e), 0xbd);
        // BD 0065
        gbc.setState(0x2038, 0x8d0, 0x1910, 0xb597, 0x25cb, 0xf0ee, 0x0, 0x1);
        gbc.writeMem(0x2038, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x8d0);
        EXPECT(gbc.pc(), 0x2039);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0066
        gbc.setState(0xbb1c, 0xd79a, 0x5bf0, 0x633f, 0x7a31, 0xffc4, 0x1, 0x1);
        gbc.writeMem(0xbb1c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xd79a);
        EXPECT(gbc.pc(), 0xbb1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb1c), 0xbd);
        // BD 0067
        gbc.setState(0x8e41, 0xaa83, 0x8a60, 0xbcb9, 0xd86e, 0x7fa2, 0x1, 0x1);
        gbc.writeMem(0x8e41, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xaa83);
        EXPECT(gbc.pc(), 0x8e42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e41), 0xbd);
        // BD 0068
        gbc.setState(0xc053, 0xe9c0, 0x7100, 0xda8f, 0xe613, 0x1dd6, 0x0, 0x0);
        gbc.writeMem(0xc053, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xe9c0);
        EXPECT(gbc.pc(), 0xc054);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc053), 0xbd);
        // BD 0069
        gbc.setState(0x6c31, 0xa623, 0x1020, 0x1da9, 0xe4c2, 0x7eca, 0x1, 0x1);
        gbc.writeMem(0x6c31, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xa623);
        EXPECT(gbc.pc(), 0x6c32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 006A
        gbc.setState(0xe079, 0x5784, 0xea00, 0x5370, 0x2a6, 0xc7d8, 0x1, 0x0);
        gbc.writeMem(0xe079, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5784);
        EXPECT(gbc.pc(), 0xe07a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe079), 0xbd);
        // BD 006B
        gbc.setState(0xc9f4, 0x87c6, 0xf160, 0x1059, 0xc8d7, 0x2719, 0x0, 0x0);
        gbc.writeMem(0xc9f4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x87c6);
        EXPECT(gbc.pc(), 0xc9f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9f4), 0xbd);
        // BD 006C
        gbc.setState(0x5134, 0x38c3, 0x3e50, 0x9e5d, 0xae76, 0x29a2, 0x0, 0x1);
        gbc.writeMem(0x5134, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x38c3);
        EXPECT(gbc.pc(), 0x5135);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 006D
        gbc.setState(0x8830, 0xf0c8, 0xbb60, 0xd997, 0xdcca, 0x6553, 0x1, 0x1);
        gbc.writeMem(0x8830, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xf0c8);
        EXPECT(gbc.pc(), 0x8831);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8830), 0xbd);
        // BD 006E
        gbc.setState(0x1d9, 0xe771, 0x7c80, 0x7c89, 0xc5c9, 0x9f89, 0x1, 0x0);
        gbc.writeMem(0x1d9, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xe771);
        EXPECT(gbc.pc(), 0x1da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 006F
        gbc.setState(0x2e5, 0xd0b, 0x5060, 0x4ec0, 0x17ad, 0x9cc6, 0x0, 0x0);
        gbc.writeMem(0x2e5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xd0b);
        EXPECT(gbc.pc(), 0x2e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0070
        gbc.setState(0x5678, 0xa3ff, 0x5bf0, 0x38f1, 0xd717, 0x6c57, 0x1, 0x0);
        gbc.writeMem(0x5678, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xa3ff);
        EXPECT(gbc.pc(), 0x5679);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0071
        gbc.setState(0xaade, 0x1d78, 0x7c90, 0xf69f, 0xea91, 0x4c30, 0x1, 0x0);
        gbc.writeMem(0xaade, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x1d78);
        EXPECT(gbc.pc(), 0xaadf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaade), 0xbd);
        // BD 0072
        gbc.setState(0xc126, 0xaec9, 0x8720, 0x426, 0xfc9e, 0x6815, 0x0, 0x1);
        gbc.writeMem(0xc126, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xaec9);
        EXPECT(gbc.pc(), 0xc127);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc126), 0xbd);
        // BD 0073
        gbc.setState(0x71eb, 0x85bf, 0xf6f0, 0xa256, 0x7de6, 0xf443, 0x0, 0x1);
        gbc.writeMem(0x71eb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x85bf);
        EXPECT(gbc.pc(), 0x71ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0074
        gbc.setState(0x59f1, 0xae23, 0x72b0, 0x1dc3, 0x2d53, 0x1d8e, 0x1, 0x0);
        gbc.writeMem(0x59f1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xae23);
        EXPECT(gbc.pc(), 0x59f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0075
        gbc.setState(0xbbe2, 0xddf2, 0x6990, 0x4f5, 0xc9eb, 0x2135, 0x1, 0x1);
        gbc.writeMem(0xbbe2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xddf2);
        EXPECT(gbc.pc(), 0xbbe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbe2), 0xbd);
        // BD 0076
        gbc.setState(0xda12, 0x42c5, 0x9f10, 0xeb01, 0x323a, 0xa3ff, 0x1, 0x0);
        gbc.writeMem(0xda12, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x42c5);
        EXPECT(gbc.pc(), 0xda13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda12), 0xbd);
        // BD 0077
        gbc.setState(0x97fb, 0xac58, 0x1c50, 0x1101, 0x8c00, 0x152d, 0x1, 0x1);
        gbc.writeMem(0x97fb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xac58);
        EXPECT(gbc.pc(), 0x97fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97fb), 0xbd);
        // BD 0078
        gbc.setState(0xd0a5, 0xd186, 0x2850, 0x553d, 0xb611, 0x4956, 0x1, 0x0);
        gbc.writeMem(0xd0a5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xd186);
        EXPECT(gbc.pc(), 0xd0a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0a5), 0xbd);
        // BD 0079
        gbc.setState(0x5f72, 0x8fa4, 0xb4b0, 0x8ca1, 0x7d1f, 0x450, 0x0, 0x1);
        gbc.writeMem(0x5f72, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x8fa4);
        EXPECT(gbc.pc(), 0x5f73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 007A
        gbc.setState(0x68b2, 0xef6d, 0x22c0, 0x87c7, 0x66dc, 0x6548, 0x0, 0x0);
        gbc.writeMem(0x68b2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xef6d);
        EXPECT(gbc.pc(), 0x68b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 007B
        gbc.setState(0x379d, 0xf02d, 0x24f0, 0xa6af, 0x7df7, 0xea9e, 0x0, 0x0);
        gbc.writeMem(0x379d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xf02d);
        EXPECT(gbc.pc(), 0x379e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 007C
        gbc.setState(0xd3d6, 0x47fa, 0x2060, 0x71df, 0x37b4, 0x6ab8, 0x1, 0x0);
        gbc.writeMem(0xd3d6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x47fa);
        EXPECT(gbc.pc(), 0xd3d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3d6), 0xbd);
        // BD 007D
        gbc.setState(0x345, 0x31b4, 0x6570, 0x6ffa, 0x7d64, 0xc1a3, 0x1, 0x1);
        gbc.writeMem(0x345, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x31b4);
        EXPECT(gbc.pc(), 0x346);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 007E
        gbc.setState(0x83c4, 0x4759, 0x920, 0xb674, 0x6474, 0x7174, 0x1, 0x1);
        gbc.writeMem(0x83c4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x4759);
        EXPECT(gbc.pc(), 0x83c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83c4), 0xbd);
        // BD 007F
        gbc.setState(0x39f2, 0xd0f7, 0x54c0, 0x491d, 0x2f53, 0xac, 0x0, 0x0);
        gbc.writeMem(0x39f2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xd0f7);
        EXPECT(gbc.pc(), 0x39f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0080
        gbc.setState(0x6c51, 0x5a77, 0x3c70, 0xc6eb, 0xf16e, 0x41ce, 0x1, 0x0);
        gbc.writeMem(0x6c51, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x5a77);
        EXPECT(gbc.pc(), 0x6c52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0081
        gbc.setState(0x72f7, 0x8703, 0x34e0, 0xa2ca, 0x2d00, 0xd94b, 0x0, 0x0);
        gbc.writeMem(0x72f7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x8703);
        EXPECT(gbc.pc(), 0x72f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0083
        gbc.setState(0xee6d, 0x279, 0x1580, 0x6024, 0xf9f5, 0xc4c9, 0x0, 0x1);
        gbc.writeMem(0xee6d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x279);
        EXPECT(gbc.pc(), 0xee6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee6d), 0xbd);
        // BD 0084
        gbc.setState(0xe291, 0xe66, 0xe380, 0x8d05, 0x7953, 0xfabd, 0x0, 0x1);
        gbc.writeMem(0xe291, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xe66);
        EXPECT(gbc.pc(), 0xe292);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe291), 0xbd);
        // BD 0085
        gbc.setState(0xc918, 0x7226, 0x970, 0x7cb1, 0xd369, 0xbec4, 0x1, 0x0);
        gbc.writeMem(0xc918, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x7226);
        EXPECT(gbc.pc(), 0xc919);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc918), 0xbd);
        // BD 0086
        gbc.setState(0xc377, 0xf946, 0x86c0, 0xaecf, 0xb37d, 0x331f, 0x1, 0x1);
        gbc.writeMem(0xc377, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xf946);
        EXPECT(gbc.pc(), 0xc378);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc377), 0xbd);
        // BD 0087
        gbc.setState(0xa257, 0x39ad, 0x50, 0x2742, 0xdc0d, 0x4fba, 0x1, 0x1);
        gbc.writeMem(0xa257, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x39ad);
        EXPECT(gbc.pc(), 0xa258);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa257), 0xbd);
        // BD 0088
        gbc.setState(0x66c7, 0x2f3, 0xca0, 0xef20, 0xba3b, 0x6477, 0x1, 0x0);
        gbc.writeMem(0x66c7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x2f3);
        EXPECT(gbc.pc(), 0x66c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0089
        gbc.setState(0x4476, 0xe41f, 0x180, 0x4398, 0xb417, 0xbb33, 0x1, 0x0);
        gbc.writeMem(0x4476, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xe41f);
        EXPECT(gbc.pc(), 0x4477);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 008A
        gbc.setState(0xbaa1, 0x972c, 0xfcd0, 0xfd0b, 0xc73, 0x32f9, 0x1, 0x1);
        gbc.writeMem(0xbaa1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x972c);
        EXPECT(gbc.pc(), 0xbaa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaa1), 0xbd);
        // BD 008B
        gbc.setState(0x61b9, 0x6f4f, 0x9ab0, 0x19d6, 0x865e, 0x5cb1, 0x1, 0x1);
        gbc.writeMem(0x61b9, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x6f4f);
        EXPECT(gbc.pc(), 0x61ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 008C
        gbc.setState(0x941a, 0xe8ae, 0x7ae0, 0x7d93, 0x48bc, 0x273a, 0x1, 0x1);
        gbc.writeMem(0x941a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xe8ae);
        EXPECT(gbc.pc(), 0x941b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x941a), 0xbd);
        // BD 008D
        gbc.setState(0x634a, 0x246, 0xfd20, 0x9066, 0xce7b, 0xa63e, 0x1, 0x1);
        gbc.writeMem(0x634a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x246);
        EXPECT(gbc.pc(), 0x634b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 008E
        gbc.setState(0xd4d7, 0x6d87, 0xcd10, 0x474, 0x7081, 0xbe18, 0x0, 0x0);
        gbc.writeMem(0xd4d7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x6d87);
        EXPECT(gbc.pc(), 0xd4d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4d7), 0xbd);
        // BD 008F
        gbc.setState(0x6f6c, 0x796c, 0xeb00, 0xb5e8, 0xb589, 0x84a1, 0x0, 0x0);
        gbc.writeMem(0x6f6c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x796c);
        EXPECT(gbc.pc(), 0x6f6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0090
        gbc.setState(0x349a, 0xed9d, 0xa350, 0xb9e1, 0x2544, 0xc901, 0x1, 0x0);
        gbc.writeMem(0x349a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xed9d);
        EXPECT(gbc.pc(), 0x349b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0091
        gbc.setState(0x417c, 0x711f, 0xcbb0, 0x9158, 0xff1, 0x1aa6, 0x1, 0x0);
        gbc.writeMem(0x417c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x711f);
        EXPECT(gbc.pc(), 0x417d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0092
        gbc.setState(0xd427, 0x5598, 0x9830, 0xf5bf, 0x17c, 0x3737, 0x1, 0x0);
        gbc.writeMem(0xd427, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x5598);
        EXPECT(gbc.pc(), 0xd428);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd427), 0xbd);
        // BD 0093
        gbc.setState(0x9402, 0xeb56, 0xf4a0, 0xcf13, 0xabd3, 0xbdb2, 0x0, 0x0);
        gbc.writeMem(0x9402, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xeb56);
        EXPECT(gbc.pc(), 0x9403);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9402), 0xbd);
        // BD 0094
        gbc.setState(0x4993, 0xc3f1, 0xb8f0, 0xc492, 0xe8a0, 0xbcd, 0x0, 0x1);
        gbc.writeMem(0x4993, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xc3f1);
        EXPECT(gbc.pc(), 0x4994);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0095
        gbc.setState(0x116b, 0xccc8, 0x48b0, 0xc113, 0x5775, 0xe92, 0x1, 0x0);
        gbc.writeMem(0x116b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xccc8);
        EXPECT(gbc.pc(), 0x116c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0096
        gbc.setState(0x35bf, 0x9e7c, 0xa460, 0xc230, 0x9072, 0x20b1, 0x1, 0x1);
        gbc.writeMem(0x35bf, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x9e7c);
        EXPECT(gbc.pc(), 0x35c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0097
        gbc.setState(0xd337, 0xefd6, 0xcf40, 0x2a79, 0x80da, 0xfb85, 0x0, 0x0);
        gbc.writeMem(0xd337, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xefd6);
        EXPECT(gbc.pc(), 0xd338);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd337), 0xbd);
        // BD 0098
        gbc.setState(0x1b2e, 0x3ecf, 0x91c0, 0x1b36, 0x6868, 0x6622, 0x1, 0x0);
        gbc.writeMem(0x1b2e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x3ecf);
        EXPECT(gbc.pc(), 0x1b2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0099
        gbc.setState(0x6a08, 0x3366, 0xfc0, 0xe2e6, 0xddee, 0xc173, 0x0, 0x1);
        gbc.writeMem(0x6a08, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x3366);
        EXPECT(gbc.pc(), 0x6a09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 009A
        gbc.setState(0x7898, 0x925a, 0x9900, 0x42e1, 0x63fd, 0xb451, 0x1, 0x1);
        gbc.writeMem(0x7898, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x925a);
        EXPECT(gbc.pc(), 0x7899);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 009B
        gbc.setState(0x1d7a, 0x3078, 0x8d20, 0x887a, 0xbd8a, 0x657d, 0x0, 0x1);
        gbc.writeMem(0x1d7a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x3078);
        EXPECT(gbc.pc(), 0x1d7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 009C
        gbc.setState(0x7023, 0xc13b, 0xe9d0, 0xd350, 0x2ac3, 0x1792, 0x0, 0x0);
        gbc.writeMem(0x7023, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc13b);
        EXPECT(gbc.pc(), 0x7024);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 009D
        gbc.setState(0xbf27, 0xba21, 0xa620, 0x15cf, 0x6bdc, 0x634b, 0x0, 0x0);
        gbc.writeMem(0xbf27, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xba21);
        EXPECT(gbc.pc(), 0xbf28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf27), 0xbd);
        // BD 009E
        gbc.setState(0x28e6, 0x1477, 0xfe20, 0x83bf, 0xf08c, 0xc7ac, 0x1, 0x1);
        gbc.writeMem(0x28e6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x1477);
        EXPECT(gbc.pc(), 0x28e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 009F
        gbc.setState(0x78e0, 0xeec2, 0xc20, 0xb122, 0xb5e5, 0xda79, 0x0, 0x1);
        gbc.writeMem(0x78e0, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xeec2);
        EXPECT(gbc.pc(), 0x78e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 00A0
        gbc.setState(0x1280, 0xcd42, 0x41f0, 0x5ff, 0xe431, 0x8233, 0x1, 0x0);
        gbc.writeMem(0x1280, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xcd42);
        EXPECT(gbc.pc(), 0x1281);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 00A1
        gbc.setState(0x5dfd, 0xdef1, 0x4050, 0x5916, 0xf77c, 0x76ab, 0x1, 0x1);
        gbc.writeMem(0x5dfd, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xdef1);
        EXPECT(gbc.pc(), 0x5dfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 00A2
        gbc.setState(0xcb4e, 0xeb2, 0x27a0, 0x1cfb, 0x86e5, 0x12c2, 0x1, 0x1);
        gbc.writeMem(0xcb4e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xeb2);
        EXPECT(gbc.pc(), 0xcb4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb4e), 0xbd);
        // BD 00A3
        gbc.setState(0xc5ce, 0x975f, 0x4160, 0x8ffe, 0xf104, 0xa304, 0x1, 0x1);
        gbc.writeMem(0xc5ce, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x975f);
        EXPECT(gbc.pc(), 0xc5cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5ce), 0xbd);
        // BD 00A4
        gbc.setState(0xa27d, 0xc9c0, 0x5ad0, 0xa109, 0xa274, 0x26ca, 0x0, 0x0);
        gbc.writeMem(0xa27d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xc9c0);
        EXPECT(gbc.pc(), 0xa27e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa27d), 0xbd);
        // BD 00A5
        gbc.setState(0x55a9, 0xd593, 0xd360, 0x3011, 0x70af, 0x4f04, 0x0, 0x1);
        gbc.writeMem(0x55a9, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xd593);
        EXPECT(gbc.pc(), 0x55aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 00A6
        gbc.setState(0xbb54, 0x9c86, 0x5890, 0x8f28, 0xc8dc, 0x2843, 0x1, 0x1);
        gbc.writeMem(0xbb54, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9c86);
        EXPECT(gbc.pc(), 0xbb55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb54), 0xbd);
        // BD 00A7
        gbc.setState(0x115e, 0x6755, 0xc160, 0xffa5, 0x5d5f, 0xf4ac, 0x1, 0x1);
        gbc.writeMem(0x115e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x6755);
        EXPECT(gbc.pc(), 0x115f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 00A8
        gbc.setState(0x51db, 0x6fbd, 0x6380, 0x89e0, 0x77d2, 0x358c, 0x0, 0x0);
        gbc.writeMem(0x51db, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x6fbd);
        EXPECT(gbc.pc(), 0x51dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 00A9
        gbc.setState(0x2887, 0x29d9, 0x3500, 0x3845, 0x10b4, 0xcc99, 0x1, 0x1);
        gbc.writeMem(0x2887, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x29d9);
        EXPECT(gbc.pc(), 0x2888);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 00AA
        gbc.setState(0x817e, 0xe6da, 0x1840, 0x5b8f, 0x95b, 0xad4, 0x0, 0x0);
        gbc.writeMem(0x817e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xe6da);
        EXPECT(gbc.pc(), 0x817f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x817e), 0xbd);
        // BD 00AB
        gbc.setState(0x9225, 0x6e32, 0x85b0, 0xc57d, 0xfb98, 0x98ac, 0x1, 0x0);
        gbc.writeMem(0x9225, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x6e32);
        EXPECT(gbc.pc(), 0x9226);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9225), 0xbd);
        // BD 00AC
        gbc.setState(0x2c5f, 0xf233, 0xf6d0, 0x6360, 0x8fb5, 0x4d57, 0x0, 0x0);
        gbc.writeMem(0x2c5f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xf233);
        EXPECT(gbc.pc(), 0x2c60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 00AD
        gbc.setState(0x4cc2, 0xccc, 0xe870, 0x93dc, 0x742b, 0xddfa, 0x0, 0x1);
        gbc.writeMem(0x4cc2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xccc);
        EXPECT(gbc.pc(), 0x4cc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 00AE
        gbc.setState(0xd7a5, 0x3621, 0xe010, 0x4771, 0x202, 0xb858, 0x1, 0x0);
        gbc.writeMem(0xd7a5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x3621);
        EXPECT(gbc.pc(), 0xd7a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7a5), 0xbd);
        // BD 00AF
        gbc.setState(0xdee5, 0xe96b, 0xeb70, 0xe2fd, 0xe1bd, 0xafda, 0x0, 0x0);
        gbc.writeMem(0xdee5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xe96b);
        EXPECT(gbc.pc(), 0xdee6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdee5), 0xbd);
        // BD 00B0
        gbc.setState(0x6ab2, 0xa2e6, 0x2800, 0x32d4, 0x5262, 0xa066, 0x1, 0x1);
        gbc.writeMem(0x6ab2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xa2e6);
        EXPECT(gbc.pc(), 0x6ab3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 00B1
        gbc.setState(0x6486, 0x9c27, 0xd550, 0xa95f, 0x39f5, 0xad2f, 0x1, 0x1);
        gbc.writeMem(0x6486, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x9c27);
        EXPECT(gbc.pc(), 0x6487);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 00B2
        gbc.setState(0x6f31, 0xa6e1, 0x2730, 0x5c2b, 0x7420, 0x35d2, 0x0, 0x1);
        gbc.writeMem(0x6f31, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa6e1);
        EXPECT(gbc.pc(), 0x6f32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 00B3
        gbc.setState(0xa615, 0x17c2, 0x4f00, 0xa194, 0x98c5, 0x2b6a, 0x0, 0x0);
        gbc.writeMem(0xa615, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x17c2);
        EXPECT(gbc.pc(), 0xa616);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa615), 0xbd);
        // BD 00B4
        gbc.setState(0xab6d, 0x36e0, 0xde0, 0x9189, 0xa01, 0x95ea, 0x1, 0x0);
        gbc.writeMem(0xab6d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x36e0);
        EXPECT(gbc.pc(), 0xab6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab6d), 0xbd);
        // BD 00B5
        gbc.setState(0x9f8, 0x30f, 0xe8b0, 0x41aa, 0x6d4b, 0x661, 0x0, 0x0);
        gbc.writeMem(0x9f8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x30f);
        EXPECT(gbc.pc(), 0x9f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 00B6
        gbc.setState(0xde69, 0x8914, 0xa660, 0xd74c, 0x1336, 0x8af0, 0x0, 0x0);
        gbc.writeMem(0xde69, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x8914);
        EXPECT(gbc.pc(), 0xde6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde69), 0xbd);
        // BD 00B7
        gbc.setState(0x8ceb, 0xddd3, 0x95a0, 0x6f62, 0x7950, 0x190e, 0x0, 0x1);
        gbc.writeMem(0x8ceb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xddd3);
        EXPECT(gbc.pc(), 0x8cec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ceb), 0xbd);
        // BD 00B8
        gbc.setState(0xb18, 0x4084, 0x4e40, 0x68e8, 0x68c5, 0xdf62, 0x0, 0x0);
        gbc.writeMem(0xb18, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x4084);
        EXPECT(gbc.pc(), 0xb19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 00B9
        gbc.setState(0xb884, 0x4fff, 0xd980, 0xde5e, 0xd17f, 0x57b0, 0x1, 0x1);
        gbc.writeMem(0xb884, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x4fff);
        EXPECT(gbc.pc(), 0xb885);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb884), 0xbd);
        // BD 00BB
        gbc.setState(0xa744, 0xd269, 0xf840, 0xd739, 0xadcd, 0x5b64, 0x1, 0x0);
        gbc.writeMem(0xa744, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xd269);
        EXPECT(gbc.pc(), 0xa745);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa744), 0xbd);
        // BD 00BC
        gbc.setState(0x66ab, 0x7449, 0xcf0, 0x6724, 0x900b, 0x431e, 0x0, 0x1);
        gbc.writeMem(0x66ab, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x7449);
        EXPECT(gbc.pc(), 0x66ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 00BD
        gbc.setState(0xcdd6, 0x2713, 0x9eb0, 0x35a2, 0x74ee, 0x5969, 0x0, 0x0);
        gbc.writeMem(0xcdd6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x2713);
        EXPECT(gbc.pc(), 0xcdd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdd6), 0xbd);
        // BD 00BE
        gbc.setState(0xb0b9, 0x3def, 0xe0f0, 0x42a8, 0x6e44, 0x84d6, 0x0, 0x1);
        gbc.writeMem(0xb0b9, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x3def);
        EXPECT(gbc.pc(), 0xb0ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0b9), 0xbd);
        // BD 00BF
        gbc.setState(0x4f65, 0x420f, 0xc950, 0x825d, 0x6a83, 0x7a0f, 0x1, 0x0);
        gbc.writeMem(0x4f65, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x420f);
        EXPECT(gbc.pc(), 0x4f66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 00C0
        gbc.setState(0x9fcd, 0x145b, 0x9f0, 0x3597, 0xead0, 0xa902, 0x0, 0x1);
        gbc.writeMem(0x9fcd, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x145b);
        EXPECT(gbc.pc(), 0x9fce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fcd), 0xbd);
        // BD 00C1
        gbc.setState(0x902b, 0x3442, 0x8090, 0x17ce, 0x916d, 0xd45b, 0x1, 0x0);
        gbc.writeMem(0x902b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x3442);
        EXPECT(gbc.pc(), 0x902c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x902b), 0xbd);
        // BD 00C2
        gbc.setState(0x2914, 0xa5f5, 0x8eb0, 0x3b7f, 0x39a7, 0x75f0, 0x0, 0x0);
        gbc.writeMem(0x2914, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xa5f5);
        EXPECT(gbc.pc(), 0x2915);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 00C3
        gbc.setState(0xe079, 0xb358, 0xdbb0, 0xfd27, 0x28bb, 0x7930, 0x1, 0x1);
        gbc.writeMem(0xe079, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xb358);
        EXPECT(gbc.pc(), 0xe07a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe079), 0xbd);
        // BD 00C4
        gbc.setState(0xd837, 0x332b, 0xd040, 0xaedf, 0xf80f, 0xda30, 0x1, 0x0);
        gbc.writeMem(0xd837, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x332b);
        EXPECT(gbc.pc(), 0xd838);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd837), 0xbd);
        // BD 00C5
        gbc.setState(0x1f53, 0xd118, 0xd7a0, 0x9588, 0x6c15, 0x5641, 0x1, 0x1);
        gbc.writeMem(0x1f53, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xd118);
        EXPECT(gbc.pc(), 0x1f54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 00C6
        gbc.setState(0x96c7, 0xd446, 0xe070, 0x83df, 0x4c61, 0xc14f, 0x0, 0x1);
        gbc.writeMem(0x96c7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xd446);
        EXPECT(gbc.pc(), 0x96c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96c7), 0xbd);
        // BD 00C7
        gbc.setState(0x7c0, 0x888d, 0xb020, 0x36c5, 0xd399, 0x982d, 0x0, 0x0);
        gbc.writeMem(0x7c0, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x888d);
        EXPECT(gbc.pc(), 0x7c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 00C8
        gbc.setState(0x18a4, 0x71da, 0x3bd0, 0xe47, 0x1b3c, 0xa7e5, 0x1, 0x1);
        gbc.writeMem(0x18a4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x71da);
        EXPECT(gbc.pc(), 0x18a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 00C9
        gbc.setState(0x1db, 0xe7d3, 0xc080, 0x45b2, 0xcb58, 0xa3fb, 0x1, 0x1);
        gbc.writeMem(0x1db, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xe7d3);
        EXPECT(gbc.pc(), 0x1dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 00CA
        gbc.setState(0x182b, 0x857c, 0x7fc0, 0x3bc3, 0x685, 0x73d6, 0x1, 0x1);
        gbc.writeMem(0x182b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x857c);
        EXPECT(gbc.pc(), 0x182c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 00CC
        gbc.setState(0x82ec, 0x3cb1, 0xa190, 0xd665, 0x3371, 0x52ca, 0x0, 0x1);
        gbc.writeMem(0x82ec, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x3cb1);
        EXPECT(gbc.pc(), 0x82ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82ec), 0xbd);
        // BD 00CD
        gbc.setState(0x67f3, 0xdeeb, 0xacc0, 0x531f, 0x5691, 0x97d5, 0x0, 0x1);
        gbc.writeMem(0x67f3, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xdeeb);
        EXPECT(gbc.pc(), 0x67f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 00CE
        gbc.setState(0xd0ba, 0x23c7, 0xc0f0, 0x88a0, 0xb63b, 0xefdd, 0x1, 0x1);
        gbc.writeMem(0xd0ba, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x23c7);
        EXPECT(gbc.pc(), 0xd0bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0ba), 0xbd);
        // BD 00CF
        gbc.setState(0x286c, 0xd4ea, 0x8e00, 0xe2f1, 0x481a, 0x2c3c, 0x0, 0x1);
        gbc.writeMem(0x286c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xd4ea);
        EXPECT(gbc.pc(), 0x286d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 00D0
        gbc.setState(0xb0f, 0x9057, 0xb960, 0x2b34, 0x2a35, 0xb4e1, 0x0, 0x1);
        gbc.writeMem(0xb0f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x9057);
        EXPECT(gbc.pc(), 0xb10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 00D1
        gbc.setState(0x2014, 0x370b, 0x72a0, 0xcab3, 0x1252, 0x2cf8, 0x0, 0x0);
        gbc.writeMem(0x2014, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x370b);
        EXPECT(gbc.pc(), 0x2015);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 00D2
        gbc.setState(0x888, 0xb42d, 0x2d40, 0x53c3, 0x7b93, 0x9fdd, 0x1, 0x0);
        gbc.writeMem(0x888, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xb42d);
        EXPECT(gbc.pc(), 0x889);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 00D3
        gbc.setState(0xa1f6, 0xc1c1, 0x22a0, 0x4171, 0x7cc8, 0xd88f, 0x1, 0x1);
        gbc.writeMem(0xa1f6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xc1c1);
        EXPECT(gbc.pc(), 0xa1f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1f6), 0xbd);
        // BD 00D4
        gbc.setState(0x32a0, 0x537e, 0x8870, 0x71a6, 0x93c4, 0xb229, 0x1, 0x0);
        gbc.writeMem(0x32a0, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x537e);
        EXPECT(gbc.pc(), 0x32a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 00D5
        gbc.setState(0x5d22, 0x38fa, 0x8fb0, 0x80ff, 0xb40f, 0x9b03, 0x1, 0x0);
        gbc.writeMem(0x5d22, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x38fa);
        EXPECT(gbc.pc(), 0x5d23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 00D6
        gbc.setState(0x56cb, 0xe4fa, 0x6a70, 0x21f2, 0x6c7, 0x141d, 0x0, 0x1);
        gbc.writeMem(0x56cb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xe4fa);
        EXPECT(gbc.pc(), 0x56cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 00D7
        gbc.setState(0x32aa, 0xb7b, 0x9c30, 0x80a9, 0x6e8b, 0xec7c, 0x0, 0x1);
        gbc.writeMem(0x32aa, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xb7b);
        EXPECT(gbc.pc(), 0x32ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 00D8
        gbc.setState(0xed89, 0xb705, 0x4bc0, 0x8d01, 0x5fb, 0xdeee, 0x1, 0x1);
        gbc.writeMem(0xed89, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xb705);
        EXPECT(gbc.pc(), 0xed8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed89), 0xbd);
        // BD 00D9
        gbc.setState(0x3829, 0xbf1d, 0x8720, 0xbbdd, 0xe6fd, 0x7786, 0x1, 0x0);
        gbc.writeMem(0x3829, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xbf1d);
        EXPECT(gbc.pc(), 0x382a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 00DA
        gbc.setState(0x7b76, 0xcd12, 0x3d90, 0x31e7, 0x9c70, 0x5be4, 0x0, 0x0);
        gbc.writeMem(0x7b76, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xcd12);
        EXPECT(gbc.pc(), 0x7b77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 00DB
        gbc.setState(0xce85, 0x75c3, 0x2230, 0xecd2, 0x2748, 0x449, 0x1, 0x1);
        gbc.writeMem(0xce85, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x75c3);
        EXPECT(gbc.pc(), 0xce86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce85), 0xbd);
        // BD 00DC
        gbc.setState(0x84b5, 0x1a1a, 0x7070, 0x374, 0xd7cf, 0x87db, 0x1, 0x1);
        gbc.writeMem(0x84b5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x1a1a);
        EXPECT(gbc.pc(), 0x84b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84b5), 0xbd);
        // BD 00DD
        gbc.setState(0xb837, 0x430, 0x4210, 0x410e, 0xab0a, 0xf062, 0x0, 0x0);
        gbc.writeMem(0xb837, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x430);
        EXPECT(gbc.pc(), 0xb838);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb837), 0xbd);
        // BD 00DE
        gbc.setState(0xe39b, 0x9f24, 0x8080, 0x5b6e, 0x9b61, 0xb6bb, 0x1, 0x0);
        gbc.writeMem(0xe39b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x9f24);
        EXPECT(gbc.pc(), 0xe39c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe39b), 0xbd);
        // BD 00DF
        gbc.setState(0xb7d6, 0x2c94, 0x29c0, 0x3533, 0xef07, 0x8bc8, 0x0, 0x0);
        gbc.writeMem(0xb7d6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x2c94);
        EXPECT(gbc.pc(), 0xb7d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7d6), 0xbd);
        // BD 00E0
        gbc.setState(0xcad0, 0x6bd5, 0x1810, 0xed68, 0x327e, 0xb84b, 0x1, 0x0);
        gbc.writeMem(0xcad0, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x6bd5);
        EXPECT(gbc.pc(), 0xcad1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcad0), 0xbd);
        // BD 00E1
        gbc.setState(0xa369, 0x60a1, 0x4c50, 0xc25a, 0xcbb3, 0x19d8, 0x1, 0x1);
        gbc.writeMem(0xa369, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x60a1);
        EXPECT(gbc.pc(), 0xa36a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa369), 0xbd);
        // BD 00E2
        gbc.setState(0x29e5, 0xcd98, 0x5aa0, 0x605d, 0xeb34, 0x12e5, 0x1, 0x0);
        gbc.writeMem(0x29e5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xcd98);
        EXPECT(gbc.pc(), 0x29e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 00E3
        gbc.setState(0xeb32, 0x46a4, 0x33c0, 0x5a41, 0x8cc2, 0xe2d8, 0x0, 0x0);
        gbc.writeMem(0xeb32, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x46a4);
        EXPECT(gbc.pc(), 0xeb33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb32), 0xbd);
        // BD 00E4
        gbc.setState(0xb9c8, 0x66a9, 0xd420, 0x4790, 0x985b, 0xee9d, 0x1, 0x0);
        gbc.writeMem(0xb9c8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x66a9);
        EXPECT(gbc.pc(), 0xb9c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9c8), 0xbd);
        // BD 00E5
        gbc.setState(0xace8, 0xdcd8, 0xa030, 0xc652, 0x6f60, 0x97b5, 0x0, 0x0);
        gbc.writeMem(0xace8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xdcd8);
        EXPECT(gbc.pc(), 0xace9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xace8), 0xbd);
        // BD 00E6
        gbc.setState(0xbff1, 0xd403, 0xf030, 0x3c0c, 0x9e12, 0xdd2b, 0x0, 0x0);
        gbc.writeMem(0xbff1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xd403);
        EXPECT(gbc.pc(), 0xbff2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbff1), 0xbd);
        // BD 00E7
        gbc.setState(0x39, 0xac10, 0x9430, 0x3b5f, 0xc817, 0xf699, 0x0, 0x1);
        gbc.writeMem(0x39, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xac10);
        EXPECT(gbc.pc(), 0x3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 00E8
        gbc.setState(0x40c6, 0xe6a0, 0x65f0, 0xac9e, 0x40, 0x9aec, 0x0, 0x0);
        gbc.writeMem(0x40c6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xe6a0);
        EXPECT(gbc.pc(), 0x40c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 00E9
        gbc.setState(0x9d31, 0xd96f, 0xb430, 0x44e4, 0x8346, 0xf729, 0x1, 0x1);
        gbc.writeMem(0x9d31, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xd96f);
        EXPECT(gbc.pc(), 0x9d32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d31), 0xbd);
        // BD 00EA
        gbc.setState(0x3cc6, 0x9e8a, 0x1d60, 0x9e97, 0x8d78, 0xe7ec, 0x1, 0x0);
        gbc.writeMem(0x3cc6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x9e8a);
        EXPECT(gbc.pc(), 0x3cc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 00EB
        gbc.setState(0x8f07, 0x568a, 0x6780, 0x94ff, 0xd888, 0x937, 0x1, 0x0);
        gbc.writeMem(0x8f07, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x568a);
        EXPECT(gbc.pc(), 0x8f08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f07), 0xbd);
        // BD 00EC
        gbc.setState(0x816a, 0xa9e4, 0xe60, 0x8ef0, 0x70cd, 0x3ce3, 0x0, 0x0);
        gbc.writeMem(0x816a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xa9e4);
        EXPECT(gbc.pc(), 0x816b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x816a), 0xbd);
        // BD 00ED
        gbc.setState(0x3e4d, 0xd461, 0xd330, 0xa387, 0x9c8c, 0xc377, 0x0, 0x0);
        gbc.writeMem(0x3e4d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xd461);
        EXPECT(gbc.pc(), 0x3e4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 00EE
        gbc.setState(0x4367, 0x3151, 0xd370, 0xaedd, 0x50a4, 0x1da0, 0x0, 0x1);
        gbc.writeMem(0x4367, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x3151);
        EXPECT(gbc.pc(), 0x4368);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 00EF
        gbc.setState(0xdb51, 0x1f40, 0x4300, 0x7c1c, 0x4c91, 0x5c4d, 0x0, 0x1);
        gbc.writeMem(0xdb51, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1f40);
        EXPECT(gbc.pc(), 0xdb52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb51), 0xbd);
        // BD 00F0
        gbc.setState(0x9ee8, 0xcd6d, 0x3290, 0x5f07, 0x49a7, 0xd057, 0x1, 0x0);
        gbc.writeMem(0x9ee8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xcd6d);
        EXPECT(gbc.pc(), 0x9ee9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ee8), 0xbd);
        // BD 00F1
        gbc.setState(0x85f1, 0x5f7b, 0x30b0, 0x8955, 0xec5c, 0x9442, 0x1, 0x0);
        gbc.writeMem(0x85f1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x5f7b);
        EXPECT(gbc.pc(), 0x85f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85f1), 0xbd);
        // BD 00F2
        gbc.setState(0xd085, 0xf746, 0x7e20, 0x619f, 0x6bb0, 0xcf9e, 0x0, 0x0);
        gbc.writeMem(0xd085, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xf746);
        EXPECT(gbc.pc(), 0xd086);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd085), 0xbd);
        // BD 00F3
        gbc.setState(0x551e, 0xf173, 0x7f30, 0x2bd0, 0x50da, 0x6087, 0x1, 0x0);
        gbc.writeMem(0x551e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xf173);
        EXPECT(gbc.pc(), 0x551f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 00F4
        gbc.setState(0x992f, 0x8719, 0x3380, 0x6e38, 0x5936, 0xb19f, 0x1, 0x0);
        gbc.writeMem(0x992f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x8719);
        EXPECT(gbc.pc(), 0x9930);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x992f), 0xbd);
        // BD 00F5
        gbc.setState(0xa0a6, 0x7a79, 0xa6c0, 0x8476, 0xea89, 0xe836, 0x1, 0x1);
        gbc.writeMem(0xa0a6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x7a79);
        EXPECT(gbc.pc(), 0xa0a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0a6), 0xbd);
        // BD 00F6
        gbc.setState(0x80b8, 0x7851, 0x4a50, 0xdb8c, 0x68d3, 0xb46a, 0x1, 0x1);
        gbc.writeMem(0x80b8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x7851);
        EXPECT(gbc.pc(), 0x80b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80b8), 0xbd);
        // BD 00F7
        gbc.setState(0x6ed8, 0x726b, 0xc640, 0x6116, 0xe0a1, 0xe8ef, 0x0, 0x1);
        gbc.writeMem(0x6ed8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x726b);
        EXPECT(gbc.pc(), 0x6ed9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 00F8
        gbc.setState(0x922, 0x9b56, 0xb630, 0x5e05, 0x63e8, 0xaea0, 0x0, 0x1);
        gbc.writeMem(0x922, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x9b56);
        EXPECT(gbc.pc(), 0x923);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 00F9
        gbc.setState(0x311e, 0x325a, 0xa670, 0xd221, 0xddac, 0xcb0c, 0x1, 0x0);
        gbc.writeMem(0x311e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x325a);
        EXPECT(gbc.pc(), 0x311f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 00FA
        gbc.setState(0xf22, 0x1772, 0x4d30, 0x7ecf, 0x2670, 0xb669, 0x0, 0x1);
        gbc.writeMem(0xf22, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x1772);
        EXPECT(gbc.pc(), 0xf23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 00FB
        gbc.setState(0x7b1f, 0x9770, 0x2ac0, 0xd23f, 0x5310, 0x7584, 0x0, 0x0);
        gbc.writeMem(0x7b1f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x9770);
        EXPECT(gbc.pc(), 0x7b20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 00FC
        gbc.setState(0x122b, 0x1696, 0x8110, 0x40e6, 0x86e6, 0x9608, 0x0, 0x0);
        gbc.writeMem(0x122b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x1696);
        EXPECT(gbc.pc(), 0x122c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 00FD
        gbc.setState(0x1b18, 0x6b12, 0x6ca0, 0x61e7, 0x3ebc, 0x440c, 0x1, 0x0);
        gbc.writeMem(0x1b18, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6b12);
        EXPECT(gbc.pc(), 0x1b19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 00FE
        gbc.setState(0xe364, 0xfbe0, 0x60e0, 0xc20e, 0x1534, 0x91e0, 0x1, 0x0);
        gbc.writeMem(0xe364, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xfbe0);
        EXPECT(gbc.pc(), 0xe365);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe364), 0xbd);
        // BD 00FF
        gbc.setState(0x80c8, 0x9e6, 0xce0, 0xd337, 0x6ecc, 0x6ba3, 0x0, 0x1);
        gbc.writeMem(0x80c8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9e6);
        EXPECT(gbc.pc(), 0x80c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80c8), 0xbd);
        // BD 0100
        gbc.setState(0xae21, 0xa285, 0x3d20, 0x28b7, 0x4fe5, 0x6c17, 0x0, 0x1);
        gbc.writeMem(0xae21, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa285);
        EXPECT(gbc.pc(), 0xae22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae21), 0xbd);
        // BD 0101
        gbc.setState(0x73d4, 0x5b40, 0xe750, 0x56d2, 0x1ed9, 0x31bc, 0x0, 0x1);
        gbc.writeMem(0x73d4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x5b40);
        EXPECT(gbc.pc(), 0x73d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0102
        gbc.setState(0xede8, 0x387e, 0xf910, 0x9bf, 0xa04d, 0x4954, 0x0, 0x0);
        gbc.writeMem(0xede8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x387e);
        EXPECT(gbc.pc(), 0xede9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xede8), 0xbd);
        // BD 0103
        gbc.setState(0x8bb7, 0xc9e5, 0x7bd0, 0xccc5, 0xf33e, 0xc356, 0x0, 0x1);
        gbc.writeMem(0x8bb7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xc9e5);
        EXPECT(gbc.pc(), 0x8bb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bb7), 0xbd);
        // BD 0104
        gbc.setState(0x3af1, 0x52fb, 0x4870, 0x79fc, 0x103a, 0x5576, 0x1, 0x0);
        gbc.writeMem(0x3af1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x52fb);
        EXPECT(gbc.pc(), 0x3af2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0105
        gbc.setState(0x7af7, 0xab2e, 0x2b0, 0xf746, 0x91fe, 0xda8a, 0x0, 0x1);
        gbc.writeMem(0x7af7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xab2e);
        EXPECT(gbc.pc(), 0x7af8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0106
        gbc.setState(0xce68, 0x2fe6, 0x58d0, 0x8ad2, 0x1226, 0x5c9b, 0x0, 0x0);
        gbc.writeMem(0xce68, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x2fe6);
        EXPECT(gbc.pc(), 0xce69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce68), 0xbd);
        // BD 0107
        gbc.setState(0x2fcf, 0x1518, 0x4600, 0xbaf4, 0xb3e, 0x9f3d, 0x0, 0x0);
        gbc.writeMem(0x2fcf, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x1518);
        EXPECT(gbc.pc(), 0x2fd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0108
        gbc.setState(0x261, 0x2131, 0x74c0, 0xc013, 0x7ca4, 0xda9c, 0x0, 0x1);
        gbc.writeMem(0x261, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x2131);
        EXPECT(gbc.pc(), 0x262);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0109
        gbc.setState(0xd4b5, 0x72df, 0xeb70, 0x208, 0x6d23, 0xa612, 0x0, 0x1);
        gbc.writeMem(0xd4b5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x72df);
        EXPECT(gbc.pc(), 0xd4b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4b5), 0xbd);
        // BD 010A
        gbc.setState(0x6262, 0x603d, 0x6380, 0xf252, 0xa5a7, 0xab24, 0x1, 0x1);
        gbc.writeMem(0x6262, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x603d);
        EXPECT(gbc.pc(), 0x6263);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 010B
        gbc.setState(0xcfa4, 0xa341, 0x5860, 0x1a8d, 0x2152, 0x1811, 0x0, 0x1);
        gbc.writeMem(0xcfa4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xa341);
        EXPECT(gbc.pc(), 0xcfa5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfa4), 0xbd);
        // BD 010C
        gbc.setState(0x9287, 0x1abf, 0x5300, 0x2403, 0x3a35, 0x9fa1, 0x0, 0x1);
        gbc.writeMem(0x9287, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x1abf);
        EXPECT(gbc.pc(), 0x9288);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9287), 0xbd);
        // BD 010D
        gbc.setState(0x4de8, 0xb2de, 0x55e0, 0x2c5, 0x47b3, 0xa65a, 0x1, 0x0);
        gbc.writeMem(0x4de8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xb2de);
        EXPECT(gbc.pc(), 0x4de9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 010E
        gbc.setState(0x9b47, 0x3d12, 0xc390, 0x97cf, 0x194, 0x8f76, 0x1, 0x1);
        gbc.writeMem(0x9b47, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x3d12);
        EXPECT(gbc.pc(), 0x9b48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b47), 0xbd);
        // BD 010F
        gbc.setState(0x7e2c, 0xc10b, 0x67a0, 0xd45, 0xb433, 0xd8c1, 0x0, 0x1);
        gbc.writeMem(0x7e2c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xc10b);
        EXPECT(gbc.pc(), 0x7e2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0110
        gbc.setState(0xedc5, 0xcb06, 0xfd00, 0xc55c, 0xaf11, 0xac43, 0x1, 0x0);
        gbc.writeMem(0xedc5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xcb06);
        EXPECT(gbc.pc(), 0xedc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedc5), 0xbd);
        // BD 0111
        gbc.setState(0xe148, 0x3473, 0x32f0, 0xd8c3, 0x7b7c, 0x404c, 0x1, 0x0);
        gbc.writeMem(0xe148, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x3473);
        EXPECT(gbc.pc(), 0xe149);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe148), 0xbd);
        // BD 0112
        gbc.setState(0x2e11, 0x658b, 0x95e0, 0xd0b, 0x1a5, 0x6bc5, 0x0, 0x0);
        gbc.writeMem(0x2e11, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x658b);
        EXPECT(gbc.pc(), 0x2e12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0113
        gbc.setState(0xd294, 0xe013, 0xf7f0, 0x47c2, 0xa503, 0x5b3e, 0x1, 0x0);
        gbc.writeMem(0xd294, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xe013);
        EXPECT(gbc.pc(), 0xd295);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd294), 0xbd);
        // BD 0114
        gbc.setState(0x2575, 0x2fa2, 0x9070, 0x86af, 0x7cc8, 0x2e52, 0x0, 0x0);
        gbc.writeMem(0x2575, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x2fa2);
        EXPECT(gbc.pc(), 0x2576);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0115
        gbc.setState(0x4b97, 0xdc42, 0xcde0, 0x1e1b, 0xb71, 0xcf17, 0x0, 0x1);
        gbc.writeMem(0x4b97, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xdc42);
        EXPECT(gbc.pc(), 0x4b98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0116
        gbc.setState(0x8445, 0x1538, 0x60e0, 0x629c, 0xab05, 0xec26, 0x0, 0x0);
        gbc.writeMem(0x8445, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x1538);
        EXPECT(gbc.pc(), 0x8446);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8445), 0xbd);
        // BD 0117
        gbc.setState(0x6dfb, 0xf64d, 0x3d10, 0xb8e0, 0x8c0c, 0x2d73, 0x0, 0x0);
        gbc.writeMem(0x6dfb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xf64d);
        EXPECT(gbc.pc(), 0x6dfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0118
        gbc.setState(0xed86, 0xe22a, 0x4c70, 0xfd7f, 0x12a2, 0xc8bb, 0x0, 0x0);
        gbc.writeMem(0xed86, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xe22a);
        EXPECT(gbc.pc(), 0xed87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed86), 0xbd);
        // BD 0119
        gbc.setState(0x76e9, 0xa065, 0xe630, 0x8ed8, 0x8d9b, 0xa005, 0x0, 0x0);
        gbc.writeMem(0x76e9, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xa065);
        EXPECT(gbc.pc(), 0x76ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 011A
        gbc.setState(0xee9f, 0x89f9, 0x6e80, 0x446e, 0x3cb9, 0x4f05, 0x0, 0x0);
        gbc.writeMem(0xee9f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x89f9);
        EXPECT(gbc.pc(), 0xeea0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee9f), 0xbd);
        // BD 011B
        gbc.setState(0x3e28, 0x57c3, 0x3b60, 0x3852, 0x399d, 0x6957, 0x1, 0x0);
        gbc.writeMem(0x3e28, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x57c3);
        EXPECT(gbc.pc(), 0x3e29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 011C
        gbc.setState(0x8869, 0xa23, 0xc4a0, 0x205, 0xcdeb, 0xb13d, 0x1, 0x0);
        gbc.writeMem(0x8869, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xa23);
        EXPECT(gbc.pc(), 0x886a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8869), 0xbd);
        // BD 011D
        gbc.setState(0x51b6, 0x2f89, 0xbaa0, 0x2e1e, 0xed68, 0x35f0, 0x0, 0x1);
        gbc.writeMem(0x51b6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x2f89);
        EXPECT(gbc.pc(), 0x51b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 011E
        gbc.setState(0x43bc, 0xf424, 0x7720, 0xaa12, 0xff46, 0x4367, 0x0, 0x0);
        gbc.writeMem(0x43bc, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xf424);
        EXPECT(gbc.pc(), 0x43bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 011F
        gbc.setState(0x7078, 0x82e9, 0x1490, 0x1760, 0x50d9, 0xf911, 0x0, 0x1);
        gbc.writeMem(0x7078, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x82e9);
        EXPECT(gbc.pc(), 0x7079);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0120
        gbc.setState(0x336b, 0x6171, 0x5240, 0x9949, 0x3414, 0xf864, 0x1, 0x0);
        gbc.writeMem(0x336b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x6171);
        EXPECT(gbc.pc(), 0x336c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0121
        gbc.setState(0x7fb5, 0xd448, 0xe70, 0xd2ac, 0x986f, 0xce41, 0x0, 0x1);
        gbc.writeMem(0x7fb5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xd448);
        EXPECT(gbc.pc(), 0x7fb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0122
        gbc.setState(0xeec6, 0x43fa, 0x21b0, 0x5741, 0xe103, 0xcd40, 0x0, 0x0);
        gbc.writeMem(0xeec6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x43fa);
        EXPECT(gbc.pc(), 0xeec7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeec6), 0xbd);
        // BD 0123
        gbc.setState(0x6326, 0x4def, 0xf530, 0x400a, 0xe35e, 0x6d03, 0x1, 0x0);
        gbc.writeMem(0x6326, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x4def);
        EXPECT(gbc.pc(), 0x6327);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0124
        gbc.setState(0xaa0e, 0xfdae, 0xd230, 0xc0dc, 0x9bc4, 0xa407, 0x1, 0x1);
        gbc.writeMem(0xaa0e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xfdae);
        EXPECT(gbc.pc(), 0xaa0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa0e), 0xbd);
        // BD 0125
        gbc.setState(0x9410, 0x21a0, 0x5c0, 0x6096, 0x7254, 0x8004, 0x0, 0x0);
        gbc.writeMem(0x9410, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x21a0);
        EXPECT(gbc.pc(), 0x9411);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9410), 0xbd);
        // BD 0126
        gbc.setState(0xc709, 0x8ba1, 0x5750, 0x11d2, 0xac0f, 0x484d, 0x1, 0x0);
        gbc.writeMem(0xc709, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x8ba1);
        EXPECT(gbc.pc(), 0xc70a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc709), 0xbd);
        // BD 0127
        gbc.setState(0xea76, 0xc5c7, 0xf760, 0x5df8, 0xbf83, 0xecf6, 0x1, 0x1);
        gbc.writeMem(0xea76, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xc5c7);
        EXPECT(gbc.pc(), 0xea77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea76), 0xbd);
        // BD 0129
        gbc.setState(0x2027, 0xb62f, 0xcc50, 0x7993, 0xffef, 0x7fcd, 0x0, 0x1);
        gbc.writeMem(0x2027, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xb62f);
        EXPECT(gbc.pc(), 0x2028);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 012A
        gbc.setState(0x10f8, 0x3858, 0x7260, 0xbe66, 0xfcfe, 0x610f, 0x0, 0x0);
        gbc.writeMem(0x10f8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x3858);
        EXPECT(gbc.pc(), 0x10f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 012B
        gbc.setState(0x155e, 0x75de, 0x4e20, 0x1d04, 0xe51a, 0x5e12, 0x0, 0x0);
        gbc.writeMem(0x155e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x75de);
        EXPECT(gbc.pc(), 0x155f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 012C
        gbc.setState(0xaa79, 0x4d67, 0xc5e0, 0x38df, 0x57e9, 0x5571, 0x1, 0x0);
        gbc.writeMem(0xaa79, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x4d67);
        EXPECT(gbc.pc(), 0xaa7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa79), 0xbd);
        // BD 012D
        gbc.setState(0x3deb, 0x7a47, 0x29b0, 0x39b1, 0xb544, 0x11a9, 0x1, 0x1);
        gbc.writeMem(0x3deb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x7a47);
        EXPECT(gbc.pc(), 0x3dec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 012E
        gbc.setState(0xe5df, 0x8b01, 0xc460, 0xd3e, 0xda0d, 0x6efc, 0x1, 0x0);
        gbc.writeMem(0xe5df, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x8b01);
        EXPECT(gbc.pc(), 0xe5e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5df), 0xbd);
        // BD 012F
        gbc.setState(0xdb15, 0x1d1b, 0x4930, 0x4396, 0x7f2b, 0x5330, 0x0, 0x0);
        gbc.writeMem(0xdb15, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x1d1b);
        EXPECT(gbc.pc(), 0xdb16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb15), 0xbd);
        // BD 0130
        gbc.setState(0xdebf, 0x43f, 0x1e10, 0xc537, 0x306a, 0xc22e, 0x1, 0x1);
        gbc.writeMem(0xdebf, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x43f);
        EXPECT(gbc.pc(), 0xdec0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdebf), 0xbd);
        // BD 0131
        gbc.setState(0x40dd, 0xf329, 0x2230, 0xfb0d, 0x908b, 0x9774, 0x1, 0x0);
        gbc.writeMem(0x40dd, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xf329);
        EXPECT(gbc.pc(), 0x40de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0132
        gbc.setState(0x2936, 0x8376, 0x7af0, 0x651b, 0x5175, 0x3d0a, 0x1, 0x0);
        gbc.writeMem(0x2936, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8376);
        EXPECT(gbc.pc(), 0x2937);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0133
        gbc.setState(0xba1b, 0xc2a5, 0x2840, 0x9338, 0x39f4, 0xc4bb, 0x1, 0x0);
        gbc.writeMem(0xba1b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xc2a5);
        EXPECT(gbc.pc(), 0xba1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba1b), 0xbd);
        // BD 0134
        gbc.setState(0x52f0, 0xf7a4, 0xf3a0, 0xedd2, 0xd065, 0xf9e, 0x1, 0x1);
        gbc.writeMem(0x52f0, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xf7a4);
        EXPECT(gbc.pc(), 0x52f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0135
        gbc.setState(0xb6e0, 0x143f, 0x5270, 0x61b0, 0xbed4, 0xe5b6, 0x0, 0x0);
        gbc.writeMem(0xb6e0, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x143f);
        EXPECT(gbc.pc(), 0xb6e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6e0), 0xbd);
        // BD 0136
        gbc.setState(0x6508, 0xa542, 0x7c30, 0xa3d0, 0xe7df, 0xcff0, 0x0, 0x0);
        gbc.writeMem(0x6508, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xa542);
        EXPECT(gbc.pc(), 0x6509);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0137
        gbc.setState(0xbe32, 0xdf0d, 0xc590, 0x142e, 0x3b68, 0xcd69, 0x1, 0x1);
        gbc.writeMem(0xbe32, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xdf0d);
        EXPECT(gbc.pc(), 0xbe33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe32), 0xbd);
        // BD 0138
        gbc.setState(0x8207, 0xadd9, 0xcbe0, 0x3980, 0xa799, 0x41a0, 0x1, 0x0);
        gbc.writeMem(0x8207, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xadd9);
        EXPECT(gbc.pc(), 0x8208);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8207), 0xbd);
        // BD 013A
        gbc.setState(0xc6d, 0x6112, 0xc2c0, 0x519c, 0xc6bc, 0x36b5, 0x0, 0x0);
        gbc.writeMem(0xc6d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x6112);
        EXPECT(gbc.pc(), 0xc6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 013B
        gbc.setState(0xcb85, 0x2876, 0xcaa0, 0x9775, 0xaa5a, 0x5a6d, 0x1, 0x0);
        gbc.writeMem(0xcb85, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x2876);
        EXPECT(gbc.pc(), 0xcb86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb85), 0xbd);
        // BD 013C
        gbc.setState(0x2c14, 0x29ff, 0x81c0, 0x739e, 0x2165, 0x7d8e, 0x0, 0x0);
        gbc.writeMem(0x2c14, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x29ff);
        EXPECT(gbc.pc(), 0x2c15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 013D
        gbc.setState(0xe8c4, 0xd5df, 0xb5f0, 0x3ee7, 0xa064, 0x900, 0x1, 0x0);
        gbc.writeMem(0xe8c4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd5df);
        EXPECT(gbc.pc(), 0xe8c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8c4), 0xbd);
        // BD 013E
        gbc.setState(0xdbbf, 0x9f1d, 0x8d40, 0x7470, 0xfd57, 0x8885, 0x1, 0x0);
        gbc.writeMem(0xdbbf, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x9f1d);
        EXPECT(gbc.pc(), 0xdbc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbbf), 0xbd);
        // BD 013F
        gbc.setState(0x3235, 0xda48, 0x5c40, 0xaab2, 0x17af, 0x5a5, 0x1, 0x0);
        gbc.writeMem(0x3235, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xda48);
        EXPECT(gbc.pc(), 0x3236);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0140
        gbc.setState(0xb16a, 0xaf5, 0x2e80, 0x68fc, 0xf910, 0x3784, 0x1, 0x1);
        gbc.writeMem(0xb16a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xaf5);
        EXPECT(gbc.pc(), 0xb16b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb16a), 0xbd);
        // BD 0141
        gbc.setState(0xdd33, 0x8c2f, 0x3080, 0x5828, 0x714c, 0xffc6, 0x1, 0x1);
        gbc.writeMem(0xdd33, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x8c2f);
        EXPECT(gbc.pc(), 0xdd34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd33), 0xbd);
        // BD 0142
        gbc.setState(0x1370, 0x5559, 0x68a0, 0x4a31, 0xa952, 0xcd20, 0x1, 0x1);
        gbc.writeMem(0x1370, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x5559);
        EXPECT(gbc.pc(), 0x1371);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0143
        gbc.setState(0x3ccb, 0xe514, 0x31a0, 0x2343, 0x2426, 0x5a67, 0x0, 0x1);
        gbc.writeMem(0x3ccb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xe514);
        EXPECT(gbc.pc(), 0x3ccc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0144
        gbc.setState(0xbcad, 0x452, 0xb8d0, 0x1f6b, 0xdf37, 0x93e2, 0x1, 0x1);
        gbc.writeMem(0xbcad, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x452);
        EXPECT(gbc.pc(), 0xbcae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcad), 0xbd);
        // BD 0146
        gbc.setState(0x524e, 0xcf96, 0xf730, 0x92a, 0x2970, 0x15a8, 0x1, 0x0);
        gbc.writeMem(0x524e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xcf96);
        EXPECT(gbc.pc(), 0x524f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0147
        gbc.setState(0xd654, 0x90c8, 0xa270, 0xfbd7, 0x3d55, 0xc018, 0x0, 0x0);
        gbc.writeMem(0xd654, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x90c8);
        EXPECT(gbc.pc(), 0xd655);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd654), 0xbd);
        // BD 0148
        gbc.setState(0x93ef, 0x9012, 0x1a50, 0xe9c5, 0xe70e, 0xf3c9, 0x0, 0x1);
        gbc.writeMem(0x93ef, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x9012);
        EXPECT(gbc.pc(), 0x93f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93ef), 0xbd);
        // BD 0149
        gbc.setState(0x4b78, 0xc447, 0x5010, 0xc68c, 0x8ee8, 0x753c, 0x0, 0x0);
        gbc.writeMem(0x4b78, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xc447);
        EXPECT(gbc.pc(), 0x4b79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 014A
        gbc.setState(0x912a, 0x1334, 0x98e0, 0x723b, 0x8620, 0x3bc1, 0x1, 0x1);
        gbc.writeMem(0x912a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x1334);
        EXPECT(gbc.pc(), 0x912b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x912a), 0xbd);
        // BD 014B
        gbc.setState(0xd11b, 0x257f, 0x4460, 0xe422, 0xa1c, 0x3735, 0x0, 0x1);
        gbc.writeMem(0xd11b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x257f);
        EXPECT(gbc.pc(), 0xd11c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd11b), 0xbd);
        // BD 014C
        gbc.setState(0x81bc, 0x393e, 0x65d0, 0x16ad, 0x93bd, 0xb2d9, 0x0, 0x0);
        gbc.writeMem(0x81bc, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x393e);
        EXPECT(gbc.pc(), 0x81bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81bc), 0xbd);
        // BD 014D
        gbc.setState(0x20ea, 0xe3c, 0x6ff0, 0xda12, 0xd99c, 0x60cc, 0x1, 0x0);
        gbc.writeMem(0x20ea, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xe3c);
        EXPECT(gbc.pc(), 0x20eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 014E
        gbc.setState(0x87e5, 0xcbfb, 0xdd10, 0xd624, 0x12bb, 0xc3d6, 0x1, 0x1);
        gbc.writeMem(0x87e5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xcbfb);
        EXPECT(gbc.pc(), 0x87e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87e5), 0xbd);
        // BD 014F
        gbc.setState(0x2e84, 0x3e65, 0xb6a0, 0xccf0, 0x17cd, 0x1607, 0x0, 0x1);
        gbc.writeMem(0x2e84, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x3e65);
        EXPECT(gbc.pc(), 0x2e85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0151
        gbc.setState(0x79e7, 0x34b7, 0x7280, 0x9945, 0x8fb1, 0xfb1b, 0x1, 0x1);
        gbc.writeMem(0x79e7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x34b7);
        EXPECT(gbc.pc(), 0x79e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0152
        gbc.setState(0x7573, 0x396e, 0x3630, 0xf3e2, 0x2f85, 0x6ae9, 0x1, 0x1);
        gbc.writeMem(0x7573, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x396e);
        EXPECT(gbc.pc(), 0x7574);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0153
        gbc.setState(0x2b89, 0xe9ac, 0x4780, 0xf432, 0xb651, 0x3435, 0x1, 0x1);
        gbc.writeMem(0x2b89, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xe9ac);
        EXPECT(gbc.pc(), 0x2b8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0154
        gbc.setState(0x402, 0x1450, 0xbd40, 0x99d0, 0x11fd, 0xacc8, 0x0, 0x1);
        gbc.writeMem(0x402, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x1450);
        EXPECT(gbc.pc(), 0x403);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0155
        gbc.setState(0x587f, 0x2510, 0xc990, 0x1ba1, 0x85ab, 0x526a, 0x0, 0x1);
        gbc.writeMem(0x587f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x2510);
        EXPECT(gbc.pc(), 0x5880);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0156
        gbc.setState(0x304f, 0x8b45, 0xfef0, 0xb910, 0x59c, 0xf98f, 0x0, 0x1);
        gbc.writeMem(0x304f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x8b45);
        EXPECT(gbc.pc(), 0x3050);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0157
        gbc.setState(0xc22d, 0x2e69, 0xec00, 0x6331, 0x198d, 0x3c71, 0x0, 0x1);
        gbc.writeMem(0xc22d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x2e69);
        EXPECT(gbc.pc(), 0xc22e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc22d), 0xbd);
        // BD 0158
        gbc.setState(0x9b9, 0x1963, 0xd840, 0x5cb7, 0x5331, 0x66e, 0x0, 0x1);
        gbc.writeMem(0x9b9, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x1963);
        EXPECT(gbc.pc(), 0x9ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 015A
        gbc.setState(0x613a, 0x2828, 0xd7f0, 0x676c, 0xe405, 0xea55, 0x0, 0x0);
        gbc.writeMem(0x613a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x2828);
        EXPECT(gbc.pc(), 0x613b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 015B
        gbc.setState(0x6fab, 0x6ae4, 0xf450, 0x632b, 0xf396, 0x2da6, 0x1, 0x0);
        gbc.writeMem(0x6fab, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x6ae4);
        EXPECT(gbc.pc(), 0x6fac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 015C
        gbc.setState(0x967f, 0x8b3c, 0x6fd0, 0x4648, 0x85fc, 0xdafd, 0x0, 0x0);
        gbc.writeMem(0x967f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x8b3c);
        EXPECT(gbc.pc(), 0x9680);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x967f), 0xbd);
        // BD 015D
        gbc.setState(0x326a, 0x23e3, 0x8290, 0x2dbd, 0x2631, 0x21b2, 0x0, 0x0);
        gbc.writeMem(0x326a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x23e3);
        EXPECT(gbc.pc(), 0x326b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 015E
        gbc.setState(0xb6f4, 0x5846, 0xce50, 0x8ea7, 0x892b, 0x83a9, 0x0, 0x0);
        gbc.writeMem(0xb6f4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x5846);
        EXPECT(gbc.pc(), 0xb6f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6f4), 0xbd);
        // BD 015F
        gbc.setState(0x37dc, 0x3e86, 0x8da0, 0x2852, 0xafa8, 0x95a2, 0x1, 0x1);
        gbc.writeMem(0x37dc, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x3e86);
        EXPECT(gbc.pc(), 0x37dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0160
        gbc.setState(0x6434, 0x4f64, 0x7ae0, 0xda97, 0xd3cb, 0x34e5, 0x1, 0x1);
        gbc.writeMem(0x6434, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x4f64);
        EXPECT(gbc.pc(), 0x6435);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0161
        gbc.setState(0xd226, 0xfe5b, 0x88c0, 0x3ad4, 0x461a, 0xe18a, 0x0, 0x0);
        gbc.writeMem(0xd226, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xfe5b);
        EXPECT(gbc.pc(), 0xd227);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd226), 0xbd);
        // BD 0162
        gbc.setState(0xcc2c, 0xa631, 0x5860, 0x4691, 0xb615, 0x977e, 0x1, 0x0);
        gbc.writeMem(0xcc2c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xa631);
        EXPECT(gbc.pc(), 0xcc2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc2c), 0xbd);
        // BD 0163
        gbc.setState(0x6418, 0x5c5a, 0x6da0, 0x24f0, 0xa3b0, 0x22a7, 0x0, 0x1);
        gbc.writeMem(0x6418, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x5c5a);
        EXPECT(gbc.pc(), 0x6419);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0164
        gbc.setState(0x63a1, 0x112, 0x7bd0, 0x74bb, 0x3e10, 0xcd17, 0x0, 0x1);
        gbc.writeMem(0x63a1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x112);
        EXPECT(gbc.pc(), 0x63a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0165
        gbc.setState(0x2e7c, 0x882b, 0xae00, 0x238e, 0x4e9f, 0xdd24, 0x0, 0x1);
        gbc.writeMem(0x2e7c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x882b);
        EXPECT(gbc.pc(), 0x2e7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0166
        gbc.setState(0x70ec, 0xd481, 0xf640, 0x276d, 0x3230, 0x9020, 0x1, 0x1);
        gbc.writeMem(0x70ec, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xd481);
        EXPECT(gbc.pc(), 0x70ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0167
        gbc.setState(0x7436, 0x4798, 0x6320, 0xb0da, 0xc0e3, 0x9d00, 0x0, 0x0);
        gbc.writeMem(0x7436, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x4798);
        EXPECT(gbc.pc(), 0x7437);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0168
        gbc.setState(0x917a, 0x32ac, 0xf230, 0x2fae, 0x2eeb, 0x573d, 0x0, 0x0);
        gbc.writeMem(0x917a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x32ac);
        EXPECT(gbc.pc(), 0x917b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x917a), 0xbd);
        // BD 0169
        gbc.setState(0xd56d, 0xddd3, 0x5e70, 0x2912, 0x61f6, 0x7356, 0x1, 0x0);
        gbc.writeMem(0xd56d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xddd3);
        EXPECT(gbc.pc(), 0xd56e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd56d), 0xbd);
        // BD 016A
        gbc.setState(0x6594, 0xb46a, 0xf60, 0xeca, 0x82ea, 0x956a, 0x1, 0x1);
        gbc.writeMem(0x6594, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xb46a);
        EXPECT(gbc.pc(), 0x6595);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 016B
        gbc.setState(0x48f7, 0xb983, 0x1490, 0x46cb, 0xcb17, 0x6538, 0x1, 0x1);
        gbc.writeMem(0x48f7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xb983);
        EXPECT(gbc.pc(), 0x48f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 016C
        gbc.setState(0x65b, 0xb8e2, 0x1020, 0xd7da, 0xdf6d, 0xaaac, 0x1, 0x1);
        gbc.writeMem(0x65b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xb8e2);
        EXPECT(gbc.pc(), 0x65c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 016D
        gbc.setState(0xe573, 0xd91a, 0x32f0, 0x4d4e, 0x5ae7, 0xd9c6, 0x1, 0x1);
        gbc.writeMem(0xe573, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xd91a);
        EXPECT(gbc.pc(), 0xe574);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe573), 0xbd);
        // BD 016E
        gbc.setState(0x946a, 0x3e70, 0xd60, 0x7e90, 0x315, 0xe1ae, 0x0, 0x0);
        gbc.writeMem(0x946a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x3e70);
        EXPECT(gbc.pc(), 0x946b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x946a), 0xbd);
        // BD 016F
        gbc.setState(0x9df4, 0x2738, 0xb7d0, 0xbf69, 0x71f8, 0x47af, 0x0, 0x1);
        gbc.writeMem(0x9df4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x2738);
        EXPECT(gbc.pc(), 0x9df5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9df4), 0xbd);
        // BD 0170
        gbc.setState(0xe1f2, 0x77d8, 0x5e80, 0x4da4, 0x40ab, 0xcd1, 0x0, 0x0);
        gbc.writeMem(0xe1f2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x77d8);
        EXPECT(gbc.pc(), 0xe1f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1f2), 0xbd);
        // BD 0171
        gbc.setState(0xd15e, 0x67b0, 0xa910, 0x3e19, 0x1799, 0xb776, 0x1, 0x0);
        gbc.writeMem(0xd15e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x67b0);
        EXPECT(gbc.pc(), 0xd15f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd15e), 0xbd);
        // BD 0172
        gbc.setState(0x391d, 0x6a8e, 0xfbf0, 0x6e8c, 0xfb03, 0x8084, 0x0, 0x0);
        gbc.writeMem(0x391d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x6a8e);
        EXPECT(gbc.pc(), 0x391e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0173
        gbc.setState(0x10c9, 0x1acc, 0x9f50, 0x190a, 0x19ed, 0x817c, 0x1, 0x1);
        gbc.writeMem(0x10c9, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x1acc);
        EXPECT(gbc.pc(), 0x10ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0174
        gbc.setState(0xb03e, 0xf3f7, 0xdf20, 0x869e, 0xae4a, 0xfa88, 0x0, 0x0);
        gbc.writeMem(0xb03e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xf3f7);
        EXPECT(gbc.pc(), 0xb03f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb03e), 0xbd);
        // BD 0175
        gbc.setState(0xa85b, 0x13ba, 0x5190, 0x5cac, 0x1575, 0x39c5, 0x0, 0x0);
        gbc.writeMem(0xa85b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x13ba);
        EXPECT(gbc.pc(), 0xa85c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa85b), 0xbd);
        // BD 0176
        gbc.setState(0x318, 0xfc74, 0xd5b0, 0x8f3c, 0x15f6, 0xd519, 0x1, 0x0);
        gbc.writeMem(0x318, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xfc74);
        EXPECT(gbc.pc(), 0x319);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0178
        gbc.setState(0x18ea, 0x2986, 0xc20, 0x14e5, 0x27e, 0x309b, 0x0, 0x0);
        gbc.writeMem(0x18ea, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x2986);
        EXPECT(gbc.pc(), 0x18eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0179
        gbc.setState(0x9457, 0xef2, 0xdf90, 0x1789, 0x7ac0, 0xd6f3, 0x0, 0x0);
        gbc.writeMem(0x9457, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xef2);
        EXPECT(gbc.pc(), 0x9458);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9457), 0xbd);
        // BD 017A
        gbc.setState(0xd695, 0xc6f3, 0x74e0, 0x9726, 0xf06f, 0xe1bd, 0x0, 0x0);
        gbc.writeMem(0xd695, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xc6f3);
        EXPECT(gbc.pc(), 0xd696);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd695), 0xbd);
        // BD 017B
        gbc.setState(0x4e3d, 0x88f6, 0xe5b0, 0xff8a, 0x6e22, 0x7b8, 0x0, 0x0);
        gbc.writeMem(0x4e3d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x88f6);
        EXPECT(gbc.pc(), 0x4e3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 017D
        gbc.setState(0x7312, 0x2fdd, 0x5040, 0x4dd0, 0xb4f6, 0x268a, 0x1, 0x1);
        gbc.writeMem(0x7312, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x2fdd);
        EXPECT(gbc.pc(), 0x7313);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 017E
        gbc.setState(0xb757, 0x3ac5, 0xc2e0, 0x6975, 0xbeca, 0x6cd5, 0x1, 0x1);
        gbc.writeMem(0xb757, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x3ac5);
        EXPECT(gbc.pc(), 0xb758);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb757), 0xbd);
        // BD 017F
        gbc.setState(0x4ee2, 0x8fb, 0x7a90, 0xe216, 0x3957, 0x9495, 0x1, 0x1);
        gbc.writeMem(0x4ee2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x8fb);
        EXPECT(gbc.pc(), 0x4ee3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0180
        gbc.setState(0x6596, 0xeaf2, 0x6b0, 0x8455, 0xbdaa, 0x5718, 0x1, 0x1);
        gbc.writeMem(0x6596, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xeaf2);
        EXPECT(gbc.pc(), 0x6597);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0181
        gbc.setState(0x6c1c, 0x47ed, 0xf240, 0x8437, 0x7287, 0x9b8c, 0x0, 0x0);
        gbc.writeMem(0x6c1c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x47ed);
        EXPECT(gbc.pc(), 0x6c1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0182
        gbc.setState(0xb8c2, 0x931c, 0x7b10, 0x9578, 0x901d, 0x7458, 0x1, 0x1);
        gbc.writeMem(0xb8c2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x931c);
        EXPECT(gbc.pc(), 0xb8c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8c2), 0xbd);
        // BD 0183
        gbc.setState(0x251a, 0xa1e8, 0x1820, 0x3886, 0xb62c, 0xec61, 0x1, 0x1);
        gbc.writeMem(0x251a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xa1e8);
        EXPECT(gbc.pc(), 0x251b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0184
        gbc.setState(0x1995, 0x27b8, 0x7e80, 0xd969, 0x5f38, 0x4295, 0x1, 0x1);
        gbc.writeMem(0x1995, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x27b8);
        EXPECT(gbc.pc(), 0x1996);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0185
        gbc.setState(0xb430, 0x869b, 0xa10, 0x7968, 0xa629, 0x6e42, 0x1, 0x0);
        gbc.writeMem(0xb430, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x869b);
        EXPECT(gbc.pc(), 0xb431);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb430), 0xbd);
        // BD 0186
        gbc.setState(0xa7bf, 0xe78a, 0x8790, 0xb0fd, 0x575f, 0xf7f0, 0x1, 0x1);
        gbc.writeMem(0xa7bf, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xe78a);
        EXPECT(gbc.pc(), 0xa7c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7bf), 0xbd);
        // BD 0187
        gbc.setState(0xacbc, 0x6901, 0x4310, 0x7273, 0x4efb, 0xdbf6, 0x1, 0x1);
        gbc.writeMem(0xacbc, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x6901);
        EXPECT(gbc.pc(), 0xacbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacbc), 0xbd);
        // BD 0188
        gbc.setState(0xd4d4, 0xf29b, 0x73b0, 0xb4db, 0x47a7, 0x1daf, 0x0, 0x1);
        gbc.writeMem(0xd4d4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xf29b);
        EXPECT(gbc.pc(), 0xd4d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4d4), 0xbd);
        // BD 0189
        gbc.setState(0x75c8, 0x859e, 0xd1f0, 0x6ca6, 0x370f, 0x6580, 0x0, 0x1);
        gbc.writeMem(0x75c8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x859e);
        EXPECT(gbc.pc(), 0x75c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 018A
        gbc.setState(0xb3aa, 0x5d8a, 0xb6d0, 0x19bb, 0xab83, 0x8006, 0x0, 0x0);
        gbc.writeMem(0xb3aa, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x5d8a);
        EXPECT(gbc.pc(), 0xb3ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3aa), 0xbd);
        // BD 018B
        gbc.setState(0xe2f1, 0x46c3, 0xc820, 0x6c7f, 0xb910, 0xd6a6, 0x1, 0x0);
        gbc.writeMem(0xe2f1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x46c3);
        EXPECT(gbc.pc(), 0xe2f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2f1), 0xbd);
        // BD 018C
        gbc.setState(0xb115, 0x6b02, 0x4f70, 0x7074, 0xcdd3, 0xc9f2, 0x0, 0x0);
        gbc.writeMem(0xb115, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x6b02);
        EXPECT(gbc.pc(), 0xb116);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb115), 0xbd);
        // BD 018D
        gbc.setState(0xab52, 0x54b8, 0x68e0, 0x51bb, 0x69a5, 0xc5a0, 0x1, 0x1);
        gbc.writeMem(0xab52, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x54b8);
        EXPECT(gbc.pc(), 0xab53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab52), 0xbd);
        // BD 018E
        gbc.setState(0xc82a, 0x26c0, 0x5290, 0x73d1, 0x6097, 0x3b3e, 0x1, 0x1);
        gbc.writeMem(0xc82a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x26c0);
        EXPECT(gbc.pc(), 0xc82b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc82a), 0xbd);
        // BD 018F
        gbc.setState(0x3542, 0xa2ef, 0xdd00, 0xfd47, 0x6872, 0xcaf5, 0x0, 0x1);
        gbc.writeMem(0x3542, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xa2ef);
        EXPECT(gbc.pc(), 0x3543);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0190
        gbc.setState(0xd8bd, 0xe2b6, 0xbe20, 0xe6a1, 0xc132, 0x3600, 0x1, 0x1);
        gbc.writeMem(0xd8bd, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xe2b6);
        EXPECT(gbc.pc(), 0xd8be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8bd), 0xbd);
        // BD 0191
        gbc.setState(0xd64e, 0x7515, 0x8a00, 0x96db, 0xd286, 0xd443, 0x0, 0x0);
        gbc.writeMem(0xd64e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x7515);
        EXPECT(gbc.pc(), 0xd64f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd64e), 0xbd);
        // BD 0192
        gbc.setState(0x9e4a, 0xb1e3, 0xe760, 0x4846, 0xf0c7, 0xfa08, 0x1, 0x1);
        gbc.writeMem(0x9e4a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xb1e3);
        EXPECT(gbc.pc(), 0x9e4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e4a), 0xbd);
        // BD 0193
        gbc.setState(0xec33, 0xf2ea, 0x9730, 0xabfe, 0x1645, 0xbf28, 0x0, 0x1);
        gbc.writeMem(0xec33, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xf2ea);
        EXPECT(gbc.pc(), 0xec34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec33), 0xbd);
        // BD 0194
        gbc.setState(0x17d9, 0x28e0, 0x6590, 0xf71d, 0x4876, 0xd8ef, 0x0, 0x0);
        gbc.writeMem(0x17d9, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x28e0);
        EXPECT(gbc.pc(), 0x17da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0195
        gbc.setState(0x1d1e, 0xdfc6, 0x56e0, 0x3f98, 0x59d4, 0x69b, 0x0, 0x1);
        gbc.writeMem(0x1d1e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xdfc6);
        EXPECT(gbc.pc(), 0x1d1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0196
        gbc.setState(0x4c23, 0x45d0, 0x36f0, 0x9cd5, 0xd429, 0xead6, 0x0, 0x1);
        gbc.writeMem(0x4c23, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x45d0);
        EXPECT(gbc.pc(), 0x4c24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0197
        gbc.setState(0xd2, 0x109e, 0x7b40, 0x42c7, 0xcde8, 0x79f0, 0x0, 0x1);
        gbc.writeMem(0xd2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x109e);
        EXPECT(gbc.pc(), 0xd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0198
        gbc.setState(0xc3e4, 0x3b37, 0x5950, 0xed0, 0x4f98, 0xac1a, 0x0, 0x0);
        gbc.writeMem(0xc3e4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x3b37);
        EXPECT(gbc.pc(), 0xc3e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3e4), 0xbd);
        // BD 0199
        gbc.setState(0x901b, 0x7456, 0x6960, 0x8191, 0x7748, 0x64fe, 0x0, 0x1);
        gbc.writeMem(0x901b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x7456);
        EXPECT(gbc.pc(), 0x901c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x901b), 0xbd);
        // BD 019A
        gbc.setState(0x84a9, 0x11fa, 0x43a0, 0x73d6, 0xa231, 0x6cfc, 0x1, 0x0);
        gbc.writeMem(0x84a9, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x11fa);
        EXPECT(gbc.pc(), 0x84aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84a9), 0xbd);
        // BD 019B
        gbc.setState(0xe9fe, 0x7023, 0xdb10, 0xfea5, 0xa3d3, 0x7093, 0x0, 0x0);
        gbc.writeMem(0xe9fe, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x7023);
        EXPECT(gbc.pc(), 0xe9ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9fe), 0xbd);
        // BD 019C
        gbc.setState(0xc437, 0x28e1, 0x4380, 0xe96, 0x54fd, 0xa96, 0x1, 0x1);
        gbc.writeMem(0xc437, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x28e1);
        EXPECT(gbc.pc(), 0xc438);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc437), 0xbd);
        // BD 019D
        gbc.setState(0x409c, 0xaaa5, 0x2a10, 0xe727, 0x2bed, 0x1a16, 0x0, 0x1);
        gbc.writeMem(0x409c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xaaa5);
        EXPECT(gbc.pc(), 0x409d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 019E
        gbc.setState(0xe664, 0x1954, 0x1c50, 0xf635, 0x7c90, 0xd6c6, 0x1, 0x1);
        gbc.writeMem(0xe664, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x1954);
        EXPECT(gbc.pc(), 0xe665);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe664), 0xbd);
        // BD 019F
        gbc.setState(0x4729, 0x28c9, 0x2450, 0x258a, 0xe6b3, 0xbddd, 0x1, 0x1);
        gbc.writeMem(0x4729, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x28c9);
        EXPECT(gbc.pc(), 0x472a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 01A0
        gbc.setState(0x982e, 0x459d, 0x4cf0, 0xa0d5, 0xf0f4, 0x7b60, 0x1, 0x0);
        gbc.writeMem(0x982e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x459d);
        EXPECT(gbc.pc(), 0x982f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x982e), 0xbd);
        // BD 01A1
        gbc.setState(0x67e, 0x8d5d, 0xdd60, 0x6408, 0x17b8, 0x8c33, 0x1, 0x1);
        gbc.writeMem(0x67e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x8d5d);
        EXPECT(gbc.pc(), 0x67f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 01A2
        gbc.setState(0x6ec2, 0x50b6, 0x1680, 0x20a, 0xb561, 0x3bf7, 0x0, 0x1);
        gbc.writeMem(0x6ec2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x50b6);
        EXPECT(gbc.pc(), 0x6ec3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 01A3
        gbc.setState(0x4c7f, 0x1c98, 0x70c0, 0x90d3, 0x2643, 0xf08b, 0x1, 0x0);
        gbc.writeMem(0x4c7f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x1c98);
        EXPECT(gbc.pc(), 0x4c80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 01A4
        gbc.setState(0x25f, 0x90e9, 0x8e40, 0x92bb, 0xb698, 0xaabb, 0x1, 0x0);
        gbc.writeMem(0x25f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x90e9);
        EXPECT(gbc.pc(), 0x260);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 01A5
        gbc.setState(0xb006, 0xe3c2, 0x58c0, 0xe94f, 0x29b8, 0xcaae, 0x0, 0x1);
        gbc.writeMem(0xb006, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xe3c2);
        EXPECT(gbc.pc(), 0xb007);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb006), 0xbd);
        // BD 01A6
        gbc.setState(0xe1d3, 0xa903, 0x3100, 0x4f0f, 0x65c6, 0x21f7, 0x1, 0x0);
        gbc.writeMem(0xe1d3, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xa903);
        EXPECT(gbc.pc(), 0xe1d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1d3), 0xbd);
        // BD 01A7
        gbc.setState(0x3f6e, 0xb422, 0xec90, 0x57c8, 0xe4d1, 0x775f, 0x0, 0x1);
        gbc.writeMem(0x3f6e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xb422);
        EXPECT(gbc.pc(), 0x3f6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 01A8
        gbc.setState(0x3666, 0xddc7, 0x3e30, 0x20a5, 0xcef5, 0x7316, 0x1, 0x1);
        gbc.writeMem(0x3666, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xddc7);
        EXPECT(gbc.pc(), 0x3667);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 01A9
        gbc.setState(0xa8d2, 0x835f, 0x1600, 0x1f61, 0x65d9, 0x4bc, 0x0, 0x0);
        gbc.writeMem(0xa8d2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x835f);
        EXPECT(gbc.pc(), 0xa8d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8d2), 0xbd);
        // BD 01AA
        gbc.setState(0x3128, 0x8b72, 0xc430, 0xbec9, 0x7bb8, 0x183d, 0x1, 0x1);
        gbc.writeMem(0x3128, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x8b72);
        EXPECT(gbc.pc(), 0x3129);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 01AB
        gbc.setState(0x2dda, 0xb25f, 0x1470, 0xe965, 0xfce0, 0xeb3, 0x0, 0x1);
        gbc.writeMem(0x2dda, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xb25f);
        EXPECT(gbc.pc(), 0x2ddb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 01AC
        gbc.setState(0xc2c, 0xc738, 0x2e10, 0x6042, 0xcba3, 0x7b27, 0x0, 0x0);
        gbc.writeMem(0xc2c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xc738);
        EXPECT(gbc.pc(), 0xc2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 01AD
        gbc.setState(0x4d, 0xece9, 0x3570, 0xce3b, 0xaabc, 0x1739, 0x1, 0x1);
        gbc.writeMem(0x4d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xece9);
        EXPECT(gbc.pc(), 0x4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 01AE
        gbc.setState(0x73a0, 0x5825, 0xa190, 0xab2f, 0xcfba, 0x5511, 0x1, 0x1);
        gbc.writeMem(0x73a0, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x5825);
        EXPECT(gbc.pc(), 0x73a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 01AF
        gbc.setState(0x272, 0x43f, 0xe1e0, 0xcd1c, 0x10fe, 0x1d2c, 0x1, 0x0);
        gbc.writeMem(0x272, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x43f);
        EXPECT(gbc.pc(), 0x273);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 01B0
        gbc.setState(0xd702, 0xc112, 0x6e00, 0x80cb, 0x894c, 0xf4c9, 0x1, 0x1);
        gbc.writeMem(0xd702, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xc112);
        EXPECT(gbc.pc(), 0xd703);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd702), 0xbd);
        // BD 01B1
        gbc.setState(0x8636, 0x1f, 0x1cb0, 0x6d52, 0x6ebb, 0x7390, 0x0, 0x1);
        gbc.writeMem(0x8636, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x1f);
        EXPECT(gbc.pc(), 0x8637);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8636), 0xbd);
        // BD 01B2
        gbc.setState(0x2942, 0x221b, 0x9ae0, 0x75b2, 0xa116, 0x36fd, 0x1, 0x1);
        gbc.writeMem(0x2942, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x221b);
        EXPECT(gbc.pc(), 0x2943);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 01B3
        gbc.setState(0x8637, 0x725d, 0x7a30, 0x58c7, 0x371b, 0xc151, 0x1, 0x1);
        gbc.writeMem(0x8637, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x725d);
        EXPECT(gbc.pc(), 0x8638);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8637), 0xbd);
        // BD 01B4
        gbc.setState(0xb239, 0xe4b8, 0x5dc0, 0x7ebf, 0x4ad0, 0x80d7, 0x0, 0x0);
        gbc.writeMem(0xb239, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xe4b8);
        EXPECT(gbc.pc(), 0xb23a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb239), 0xbd);
        // BD 01B5
        gbc.setState(0x33, 0xaeb0, 0xd050, 0x6406, 0x9655, 0x5011, 0x0, 0x0);
        gbc.writeMem(0x33, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xaeb0);
        EXPECT(gbc.pc(), 0x34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 01B6
        gbc.setState(0x776d, 0x9d7, 0xd180, 0xfac9, 0xec81, 0xb26a, 0x1, 0x1);
        gbc.writeMem(0x776d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x9d7);
        EXPECT(gbc.pc(), 0x776e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 01B7
        gbc.setState(0x566d, 0xffea, 0xab0, 0x770b, 0x5e48, 0xaa5c, 0x0, 0x0);
        gbc.writeMem(0x566d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xffea);
        EXPECT(gbc.pc(), 0x566e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 01B8
        gbc.setState(0xb43, 0xd19e, 0x4420, 0xaac1, 0xf9e5, 0xe319, 0x0, 0x0);
        gbc.writeMem(0xb43, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xd19e);
        EXPECT(gbc.pc(), 0xb44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 01B9
        gbc.setState(0xe2f0, 0x65f0, 0x29e0, 0x8428, 0xc827, 0xe597, 0x0, 0x1);
        gbc.writeMem(0xe2f0, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x65f0);
        EXPECT(gbc.pc(), 0xe2f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2f0), 0xbd);
        // BD 01BA
        gbc.setState(0x1e88, 0xc0bc, 0x7780, 0xe3ba, 0x7314, 0x7597, 0x1, 0x0);
        gbc.writeMem(0x1e88, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xc0bc);
        EXPECT(gbc.pc(), 0x1e89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 01BC
        gbc.setState(0x8ea7, 0xfcb5, 0xe830, 0xee94, 0xbb94, 0xfc97, 0x0, 0x1);
        gbc.writeMem(0x8ea7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xfcb5);
        EXPECT(gbc.pc(), 0x8ea8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ea7), 0xbd);
        // BD 01BE
        gbc.setState(0xb7db, 0xb6cd, 0xc910, 0xeb5, 0xadd2, 0x11f0, 0x1, 0x0);
        gbc.writeMem(0xb7db, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xb6cd);
        EXPECT(gbc.pc(), 0xb7dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7db), 0xbd);
        // BD 01BF
        gbc.setState(0xb728, 0x9ddf, 0x7660, 0x84c3, 0xa4e0, 0xdac0, 0x0, 0x0);
        gbc.writeMem(0xb728, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x9ddf);
        EXPECT(gbc.pc(), 0xb729);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb728), 0xbd);
        // BD 01C0
        gbc.setState(0xd28e, 0x7c82, 0x1b40, 0xc1f7, 0xddf3, 0xf041, 0x0, 0x0);
        gbc.writeMem(0xd28e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x7c82);
        EXPECT(gbc.pc(), 0xd28f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd28e), 0xbd);
        // BD 01C1
        gbc.setState(0x19b9, 0x42e0, 0x8c20, 0xae8a, 0x55ca, 0x9bb1, 0x1, 0x1);
        gbc.writeMem(0x19b9, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x42e0);
        EXPECT(gbc.pc(), 0x19ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 01C2
        gbc.setState(0x7ba7, 0xd775, 0x8d50, 0x8fc0, 0x798e, 0xb544, 0x1, 0x0);
        gbc.writeMem(0x7ba7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xd775);
        EXPECT(gbc.pc(), 0x7ba8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 01C3
        gbc.setState(0x7f42, 0x4537, 0xc020, 0x1f4, 0xfbad, 0x8708, 0x0, 0x1);
        gbc.writeMem(0x7f42, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x4537);
        EXPECT(gbc.pc(), 0x7f43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 01C4
        gbc.setState(0xd96e, 0x8aa, 0x2fa0, 0x1e4d, 0x1d41, 0x2502, 0x1, 0x0);
        gbc.writeMem(0xd96e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x8aa);
        EXPECT(gbc.pc(), 0xd96f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd96e), 0xbd);
        // BD 01C5
        gbc.setState(0x435f, 0xe5d4, 0xafb0, 0x82ad, 0xb07c, 0xca26, 0x1, 0x1);
        gbc.writeMem(0x435f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xe5d4);
        EXPECT(gbc.pc(), 0x4360);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 01C6
        gbc.setState(0xe639, 0x72a5, 0xc9d0, 0xe4fb, 0x53dc, 0x975b, 0x1, 0x1);
        gbc.writeMem(0xe639, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x72a5);
        EXPECT(gbc.pc(), 0xe63a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe639), 0xbd);
        // BD 01C7
        gbc.setState(0x7e5d, 0x7724, 0x420, 0xaed, 0xf022, 0x1402, 0x1, 0x0);
        gbc.writeMem(0x7e5d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x7724);
        EXPECT(gbc.pc(), 0x7e5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 01C8
        gbc.setState(0xe545, 0x3c91, 0xa5c0, 0xde76, 0x24b, 0xad97, 0x1, 0x1);
        gbc.writeMem(0xe545, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x3c91);
        EXPECT(gbc.pc(), 0xe546);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe545), 0xbd);
        // BD 01C9
        gbc.setState(0x60cc, 0x8088, 0xf30, 0x61c9, 0xa77a, 0x1401, 0x1, 0x1);
        gbc.writeMem(0x60cc, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x8088);
        EXPECT(gbc.pc(), 0x60cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 01CA
        gbc.setState(0xc9cf, 0x35ea, 0x5160, 0xa7fd, 0xe61b, 0x1b87, 0x1, 0x1);
        gbc.writeMem(0xc9cf, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x35ea);
        EXPECT(gbc.pc(), 0xc9d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9cf), 0xbd);
        // BD 01CB
        gbc.setState(0x1daa, 0xeb3b, 0x2930, 0x635b, 0x6581, 0x16cb, 0x0, 0x0);
        gbc.writeMem(0x1daa, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xeb3b);
        EXPECT(gbc.pc(), 0x1dab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 01CC
        gbc.setState(0x4202, 0xd642, 0xd600, 0x83c9, 0x1386, 0xe532, 0x1, 0x1);
        gbc.writeMem(0x4202, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xd642);
        EXPECT(gbc.pc(), 0x4203);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 01CD
        gbc.setState(0xced9, 0xc4de, 0x60d0, 0xf4f3, 0x158d, 0x3ce0, 0x0, 0x1);
        gbc.writeMem(0xced9, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xc4de);
        EXPECT(gbc.pc(), 0xceda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xced9), 0xbd);
        // BD 01CE
        gbc.setState(0x6d60, 0x4828, 0x48b0, 0x2d8c, 0x2ec, 0x1586, 0x0, 0x1);
        gbc.writeMem(0x6d60, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4828);
        EXPECT(gbc.pc(), 0x6d61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 01CF
        gbc.setState(0x6ab1, 0x1c1c, 0x4550, 0xaf57, 0x8ab3, 0xce99, 0x0, 0x1);
        gbc.writeMem(0x6ab1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x1c1c);
        EXPECT(gbc.pc(), 0x6ab2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 01D1
        gbc.setState(0x80cd, 0xea49, 0x8a70, 0xdc77, 0xfebd, 0x33e9, 0x1, 0x0);
        gbc.writeMem(0x80cd, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xea49);
        EXPECT(gbc.pc(), 0x80ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80cd), 0xbd);
        // BD 01D2
        gbc.setState(0x8a2c, 0x3662, 0x3a20, 0x37bd, 0xc42b, 0x2324, 0x0, 0x0);
        gbc.writeMem(0x8a2c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x3662);
        EXPECT(gbc.pc(), 0x8a2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a2c), 0xbd);
        // BD 01D3
        gbc.setState(0xa0c, 0x1981, 0x8580, 0x9818, 0x43e1, 0x7407, 0x1, 0x1);
        gbc.writeMem(0xa0c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x1981);
        EXPECT(gbc.pc(), 0xa0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 01D4
        gbc.setState(0x3651, 0xf0a8, 0xf1e0, 0x52cb, 0xd0e8, 0xd3d, 0x1, 0x1);
        gbc.writeMem(0x3651, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xf0a8);
        EXPECT(gbc.pc(), 0x3652);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 01D5
        gbc.setState(0x7ea, 0xb200, 0x2510, 0x18f2, 0xa829, 0xffd3, 0x1, 0x1);
        gbc.writeMem(0x7ea, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xb200);
        EXPECT(gbc.pc(), 0x7eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 01D6
        gbc.setState(0xd2de, 0xc09f, 0x76c0, 0x3326, 0x4ee9, 0xc047, 0x1, 0x0);
        gbc.writeMem(0xd2de, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xc09f);
        EXPECT(gbc.pc(), 0xd2df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2de), 0xbd);
        // BD 01D7
        gbc.setState(0x10b8, 0x758d, 0x2230, 0x1b72, 0xbe5, 0xed42, 0x0, 0x1);
        gbc.writeMem(0x10b8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x758d);
        EXPECT(gbc.pc(), 0x10b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 01D8
        gbc.setState(0x5dac, 0x5d1d, 0xc8f0, 0x7d68, 0x3188, 0x8a9b, 0x0, 0x0);
        gbc.writeMem(0x5dac, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x5d1d);
        EXPECT(gbc.pc(), 0x5dad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 01D9
        gbc.setState(0xd102, 0x5d4f, 0x29e0, 0xceb2, 0xaca4, 0x9e52, 0x0, 0x1);
        gbc.writeMem(0xd102, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x5d4f);
        EXPECT(gbc.pc(), 0xd103);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd102), 0xbd);
        // BD 01DA
        gbc.setState(0x8c92, 0xae06, 0x5220, 0xbc1f, 0x2819, 0x7ca7, 0x0, 0x1);
        gbc.writeMem(0x8c92, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xae06);
        EXPECT(gbc.pc(), 0x8c93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c92), 0xbd);
        // BD 01DB
        gbc.setState(0xc4c1, 0x4722, 0x100, 0x5ac8, 0x3cc9, 0x435e, 0x0, 0x0);
        gbc.writeMem(0xc4c1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x4722);
        EXPECT(gbc.pc(), 0xc4c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4c1), 0xbd);
        // BD 01DE
        gbc.setState(0xd805, 0xa2ed, 0xc310, 0x8f85, 0x7a50, 0xcf04, 0x1, 0x0);
        gbc.writeMem(0xd805, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xa2ed);
        EXPECT(gbc.pc(), 0xd806);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd805), 0xbd);
        // BD 01DF
        gbc.setState(0x7c10, 0xefdc, 0x43b0, 0x731a, 0xd36c, 0x5d9e, 0x1, 0x1);
        gbc.writeMem(0x7c10, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xefdc);
        EXPECT(gbc.pc(), 0x7c11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 01E0
        gbc.setState(0x5e14, 0x132b, 0xc3a0, 0xffe8, 0x236d, 0x3136, 0x1, 0x1);
        gbc.writeMem(0x5e14, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x132b);
        EXPECT(gbc.pc(), 0x5e15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 01E1
        gbc.setState(0xdb2, 0x21c2, 0xe6c0, 0xf7ff, 0x1827, 0xdad5, 0x1, 0x1);
        gbc.writeMem(0xdb2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x21c2);
        EXPECT(gbc.pc(), 0xdb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 01E2
        gbc.setState(0x534b, 0x8ca3, 0x2c70, 0xa04f, 0xbed0, 0xbe9e, 0x1, 0x0);
        gbc.writeMem(0x534b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x8ca3);
        EXPECT(gbc.pc(), 0x534c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 01E3
        gbc.setState(0x54c4, 0xfb3c, 0x4870, 0x33d, 0x3a38, 0x5894, 0x0, 0x1);
        gbc.writeMem(0x54c4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xfb3c);
        EXPECT(gbc.pc(), 0x54c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 01E4
        gbc.setState(0x5695, 0x6cfc, 0xecd0, 0x9aaf, 0x42ee, 0xa388, 0x0, 0x0);
        gbc.writeMem(0x5695, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x6cfc);
        EXPECT(gbc.pc(), 0x5696);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 01E5
        gbc.setState(0x8603, 0x9535, 0x5bb0, 0xf075, 0xdeaf, 0xa724, 0x1, 0x0);
        gbc.writeMem(0x8603, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x9535);
        EXPECT(gbc.pc(), 0x8604);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8603), 0xbd);
        // BD 01E6
        gbc.setState(0xc082, 0xafb0, 0x6420, 0xc5f7, 0x1505, 0x545f, 0x1, 0x0);
        gbc.writeMem(0xc082, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xafb0);
        EXPECT(gbc.pc(), 0xc083);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc082), 0xbd);
        // BD 01E7
        gbc.setState(0xe68d, 0x4da9, 0xd910, 0xf53a, 0xc279, 0x9538, 0x0, 0x0);
        gbc.writeMem(0xe68d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x4da9);
        EXPECT(gbc.pc(), 0xe68e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe68d), 0xbd);
        // BD 01E8
        gbc.setState(0x2883, 0xe43f, 0xe3c0, 0x94c9, 0xd531, 0xfd87, 0x0, 0x0);
        gbc.writeMem(0x2883, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xe43f);
        EXPECT(gbc.pc(), 0x2884);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 01EA
        gbc.setState(0x77a, 0x3de9, 0xcdb0, 0xb8aa, 0x7b6d, 0xeb3e, 0x0, 0x0);
        gbc.writeMem(0x77a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x3de9);
        EXPECT(gbc.pc(), 0x77b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 01EC
        gbc.setState(0x996d, 0x7243, 0xd980, 0xa1f, 0x726a, 0xa13c, 0x0, 0x1);
        gbc.writeMem(0x996d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x7243);
        EXPECT(gbc.pc(), 0x996e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x996d), 0xbd);
        // BD 01ED
        gbc.setState(0x604, 0x78f6, 0xa1d0, 0xd09d, 0x40e5, 0xb1db, 0x0, 0x0);
        gbc.writeMem(0x604, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x78f6);
        EXPECT(gbc.pc(), 0x605);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 01EE
        gbc.setState(0x844e, 0xf77c, 0x95a0, 0x9317, 0xca2b, 0xc082, 0x0, 0x0);
        gbc.writeMem(0x844e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xf77c);
        EXPECT(gbc.pc(), 0x844f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x844e), 0xbd);
        // BD 01EF
        gbc.setState(0x5efb, 0x414c, 0x13a0, 0x3813, 0xb9b, 0x5916, 0x1, 0x0);
        gbc.writeMem(0x5efb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x414c);
        EXPECT(gbc.pc(), 0x5efc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 01F0
        gbc.setState(0xeaab, 0x35db, 0xdca0, 0xd880, 0x3f2d, 0x6014, 0x0, 0x0);
        gbc.writeMem(0xeaab, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x35db);
        EXPECT(gbc.pc(), 0xeaac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaab), 0xbd);
        // BD 01F1
        gbc.setState(0x931a, 0x3659, 0x7380, 0xe144, 0x61b1, 0xadc8, 0x0, 0x0);
        gbc.writeMem(0x931a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x3659);
        EXPECT(gbc.pc(), 0x931b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x931a), 0xbd);
        // BD 01F2
        gbc.setState(0x537c, 0xdf4, 0x72b0, 0x6140, 0xccfc, 0x57fb, 0x1, 0x0);
        gbc.writeMem(0x537c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xdf4);
        EXPECT(gbc.pc(), 0x537d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 01F3
        gbc.setState(0x8165, 0xb741, 0x9350, 0xf130, 0x506e, 0x6c47, 0x1, 0x0);
        gbc.writeMem(0x8165, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xb741);
        EXPECT(gbc.pc(), 0x8166);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8165), 0xbd);
        // BD 01F4
        gbc.setState(0x41fb, 0x9799, 0x1110, 0xa710, 0x40c0, 0x6682, 0x1, 0x1);
        gbc.writeMem(0x41fb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x9799);
        EXPECT(gbc.pc(), 0x41fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 01F5
        gbc.setState(0x2d55, 0x459b, 0x8b80, 0x612c, 0xe0ca, 0xb83a, 0x0, 0x1);
        gbc.writeMem(0x2d55, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x459b);
        EXPECT(gbc.pc(), 0x2d56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 01F6
        gbc.setState(0x9767, 0x134a, 0xb9e0, 0x99f2, 0x47f7, 0xad89, 0x1, 0x1);
        gbc.writeMem(0x9767, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x134a);
        EXPECT(gbc.pc(), 0x9768);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9767), 0xbd);
        // BD 01F7
        gbc.setState(0x50fa, 0x3d44, 0x260, 0x8e4e, 0xac1c, 0xdd6d, 0x1, 0x1);
        gbc.writeMem(0x50fa, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x3d44);
        EXPECT(gbc.pc(), 0x50fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 01F8
        gbc.setState(0x6b34, 0x2ec, 0xd5b0, 0x350f, 0xc219, 0xb1d, 0x0, 0x0);
        gbc.writeMem(0x6b34, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2ec);
        EXPECT(gbc.pc(), 0x6b35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 01F9
        gbc.setState(0xed40, 0x49d7, 0xf920, 0xe77, 0x2791, 0xed10, 0x1, 0x0);
        gbc.writeMem(0xed40, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x49d7);
        EXPECT(gbc.pc(), 0xed41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed40), 0xbd);
        // BD 01FA
        gbc.setState(0xe1a0, 0x2609, 0xc280, 0xd05b, 0x2faa, 0xd2e1, 0x0, 0x1);
        gbc.writeMem(0xe1a0, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x2609);
        EXPECT(gbc.pc(), 0xe1a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1a0), 0xbd);
        // BD 01FB
        gbc.setState(0xe5ca, 0x1cf4, 0x9930, 0x9142, 0x279a, 0x7053, 0x1, 0x1);
        gbc.writeMem(0xe5ca, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x1cf4);
        EXPECT(gbc.pc(), 0xe5cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5ca), 0xbd);
        // BD 01FC
        gbc.setState(0xb08c, 0x4009, 0x2680, 0xf7a, 0xaf1a, 0xda30, 0x0, 0x0);
        gbc.writeMem(0xb08c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x4009);
        EXPECT(gbc.pc(), 0xb08d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb08c), 0xbd);
        // BD 01FD
        gbc.setState(0x90a2, 0x2a66, 0xc890, 0x9134, 0x9744, 0x968b, 0x1, 0x1);
        gbc.writeMem(0x90a2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x2a66);
        EXPECT(gbc.pc(), 0x90a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90a2), 0xbd);
        // BD 01FE
        gbc.setState(0xa2bb, 0x133d, 0xc290, 0xb0cb, 0x713e, 0x9150, 0x0, 0x0);
        gbc.writeMem(0xa2bb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x133d);
        EXPECT(gbc.pc(), 0xa2bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2bb), 0xbd);
        // BD 01FF
        gbc.setState(0xd804, 0xb380, 0x6580, 0x1dc6, 0x9869, 0xfeb0, 0x0, 0x0);
        gbc.writeMem(0xd804, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xb380);
        EXPECT(gbc.pc(), 0xd805);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd804), 0xbd);
        // BD 0200
        gbc.setState(0x8f26, 0xb21f, 0x2600, 0x74ab, 0x7a72, 0xad56, 0x0, 0x0);
        gbc.writeMem(0x8f26, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xb21f);
        EXPECT(gbc.pc(), 0x8f27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f26), 0xbd);
        // BD 0201
        gbc.setState(0x9c78, 0xdab, 0xc260, 0xce6a, 0x44c2, 0x944, 0x0, 0x1);
        gbc.writeMem(0x9c78, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xdab);
        EXPECT(gbc.pc(), 0x9c79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c78), 0xbd);
        // BD 0202
        gbc.setState(0xc731, 0x4b93, 0x9060, 0xd827, 0x8e87, 0x6a13, 0x0, 0x0);
        gbc.writeMem(0xc731, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x4b93);
        EXPECT(gbc.pc(), 0xc732);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc731), 0xbd);
        // BD 0203
        gbc.setState(0x5304, 0xbbd9, 0x9220, 0x6cef, 0x6ef4, 0xf4a6, 0x1, 0x0);
        gbc.writeMem(0x5304, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xbbd9);
        EXPECT(gbc.pc(), 0x5305);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0204
        gbc.setState(0x1f6, 0x8812, 0x9920, 0xa377, 0x4f13, 0x83a0, 0x0, 0x1);
        gbc.writeMem(0x1f6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x8812);
        EXPECT(gbc.pc(), 0x1f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0205
        gbc.setState(0x9712, 0x6025, 0x4310, 0x6996, 0x4f92, 0x7348, 0x1, 0x0);
        gbc.writeMem(0x9712, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x6025);
        EXPECT(gbc.pc(), 0x9713);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9712), 0xbd);
        // BD 0206
        gbc.setState(0x6f95, 0x8259, 0xce50, 0xed, 0xe2fe, 0x3f12, 0x0, 0x0);
        gbc.writeMem(0x6f95, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x8259);
        EXPECT(gbc.pc(), 0x6f96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0207
        gbc.setState(0x3c5a, 0x787d, 0x90e0, 0x5ec1, 0xdc0b, 0x54b5, 0x0, 0x0);
        gbc.writeMem(0x3c5a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x787d);
        EXPECT(gbc.pc(), 0x3c5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0208
        gbc.setState(0x674c, 0x599, 0xa9f0, 0xfa12, 0x9037, 0xbeb0, 0x1, 0x0);
        gbc.writeMem(0x674c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x599);
        EXPECT(gbc.pc(), 0x674d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0209
        gbc.setState(0x892, 0xe475, 0x8240, 0xad0d, 0x36ec, 0x9105, 0x1, 0x0);
        gbc.writeMem(0x892, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xe475);
        EXPECT(gbc.pc(), 0x893);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 020A
        gbc.setState(0x9e37, 0x2dce, 0x3dd0, 0x3fc7, 0xd548, 0xbbba, 0x0, 0x0);
        gbc.writeMem(0x9e37, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x2dce);
        EXPECT(gbc.pc(), 0x9e38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e37), 0xbd);
        // BD 020B
        gbc.setState(0x6ff3, 0x40a5, 0x9b00, 0xc392, 0xeb75, 0xf71a, 0x1, 0x0);
        gbc.writeMem(0x6ff3, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x40a5);
        EXPECT(gbc.pc(), 0x6ff4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 020C
        gbc.setState(0x8665, 0xbc3b, 0xe8b0, 0x79a8, 0x1b25, 0x2d85, 0x0, 0x1);
        gbc.writeMem(0x8665, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xbc3b);
        EXPECT(gbc.pc(), 0x8666);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8665), 0xbd);
        // BD 020D
        gbc.setState(0xe0e5, 0x6bcd, 0xa330, 0x2e59, 0xe66f, 0xda21, 0x0, 0x1);
        gbc.writeMem(0xe0e5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x6bcd);
        EXPECT(gbc.pc(), 0xe0e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0e5), 0xbd);
        // BD 020E
        gbc.setState(0x6b79, 0x7076, 0x79d0, 0x7390, 0x8d4e, 0x5be, 0x1, 0x0);
        gbc.writeMem(0x6b79, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x7076);
        EXPECT(gbc.pc(), 0x6b7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 020F
        gbc.setState(0xa3fe, 0x223a, 0x790, 0xfbdb, 0x63af, 0x7678, 0x1, 0x1);
        gbc.writeMem(0xa3fe, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x223a);
        EXPECT(gbc.pc(), 0xa3ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3fe), 0xbd);
        // BD 0210
        gbc.setState(0x9c1f, 0xdb18, 0xba60, 0xbb2f, 0x6472, 0x60dc, 0x1, 0x1);
        gbc.writeMem(0x9c1f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xdb18);
        EXPECT(gbc.pc(), 0x9c20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c1f), 0xbd);
        // BD 0211
        gbc.setState(0x3a14, 0xb6c5, 0x2fb0, 0x553b, 0xb59, 0xe83e, 0x1, 0x1);
        gbc.writeMem(0x3a14, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xb6c5);
        EXPECT(gbc.pc(), 0x3a15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0212
        gbc.setState(0x6a1b, 0x992e, 0xc430, 0x4051, 0x9b65, 0xa788, 0x1, 0x1);
        gbc.writeMem(0x6a1b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x992e);
        EXPECT(gbc.pc(), 0x6a1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0213
        gbc.setState(0xa012, 0xffcc, 0x6fd0, 0xea5a, 0x5a54, 0x7a3, 0x0, 0x1);
        gbc.writeMem(0xa012, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xffcc);
        EXPECT(gbc.pc(), 0xa013);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa012), 0xbd);
        // BD 0214
        gbc.setState(0xce72, 0x590b, 0xe720, 0x2516, 0xc75f, 0x6348, 0x0, 0x0);
        gbc.writeMem(0xce72, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x590b);
        EXPECT(gbc.pc(), 0xce73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce72), 0xbd);
        // BD 0215
        gbc.setState(0xd3b0, 0x14b, 0xe8e0, 0xb87f, 0xd924, 0xa8b8, 0x0, 0x0);
        gbc.writeMem(0xd3b0, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x14b);
        EXPECT(gbc.pc(), 0xd3b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3b0), 0xbd);
        // BD 0216
        gbc.setState(0x4ad7, 0xd885, 0xf600, 0x1d3b, 0x5487, 0x4f44, 0x1, 0x0);
        gbc.writeMem(0x4ad7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xd885);
        EXPECT(gbc.pc(), 0x4ad8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0217
        gbc.setState(0x94db, 0xfb0b, 0x1d50, 0x8f73, 0x7174, 0xc002, 0x1, 0x0);
        gbc.writeMem(0x94db, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xfb0b);
        EXPECT(gbc.pc(), 0x94dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94db), 0xbd);
        // BD 0218
        gbc.setState(0x7410, 0x8ad5, 0x4f00, 0x6d6c, 0x9ea2, 0x4ed3, 0x0, 0x1);
        gbc.writeMem(0x7410, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x8ad5);
        EXPECT(gbc.pc(), 0x7411);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0219
        gbc.setState(0x284a, 0x7f54, 0x630, 0xdcd7, 0x843a, 0x69dc, 0x1, 0x1);
        gbc.writeMem(0x284a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x7f54);
        EXPECT(gbc.pc(), 0x284b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 021A
        gbc.setState(0xea12, 0xa6de, 0x30e0, 0x9933, 0xa1e9, 0x2dd8, 0x1, 0x0);
        gbc.writeMem(0xea12, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xa6de);
        EXPECT(gbc.pc(), 0xea13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea12), 0xbd);
        // BD 021B
        gbc.setState(0x503b, 0xe77, 0x4dd0, 0x517c, 0x3615, 0x79f8, 0x1, 0x0);
        gbc.writeMem(0x503b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xe77);
        EXPECT(gbc.pc(), 0x503c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 021C
        gbc.setState(0xc25d, 0x65a4, 0x7b20, 0x1afe, 0xa279, 0x782b, 0x0, 0x0);
        gbc.writeMem(0xc25d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x65a4);
        EXPECT(gbc.pc(), 0xc25e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc25d), 0xbd);
        // BD 021D
        gbc.setState(0x94e3, 0x60b3, 0x2220, 0x14dd, 0xced, 0x2d97, 0x1, 0x0);
        gbc.writeMem(0x94e3, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x60b3);
        EXPECT(gbc.pc(), 0x94e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94e3), 0xbd);
        // BD 021F
        gbc.setState(0x598, 0x527f, 0xe360, 0xb008, 0xbcf6, 0xccf6, 0x1, 0x1);
        gbc.writeMem(0x598, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x527f);
        EXPECT(gbc.pc(), 0x599);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0220
        gbc.setState(0xd787, 0x287c, 0x20e0, 0xb13f, 0xb9d8, 0xa8c1, 0x0, 0x1);
        gbc.writeMem(0xd787, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x287c);
        EXPECT(gbc.pc(), 0xd788);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd787), 0xbd);
        // BD 0221
        gbc.setState(0xc3f2, 0x4cb3, 0xe470, 0xd15f, 0x1601, 0x57d5, 0x1, 0x0);
        gbc.writeMem(0xc3f2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x4cb3);
        EXPECT(gbc.pc(), 0xc3f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3f2), 0xbd);
        // BD 0222
        gbc.setState(0x2761, 0x2d21, 0x2280, 0x7fd8, 0xafe8, 0x727a, 0x1, 0x1);
        gbc.writeMem(0x2761, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x2d21);
        EXPECT(gbc.pc(), 0x2762);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0223
        gbc.setState(0x6836, 0x31ac, 0x4e00, 0xd4bc, 0x88f0, 0xda52, 0x1, 0x1);
        gbc.writeMem(0x6836, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x31ac);
        EXPECT(gbc.pc(), 0x6837);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0224
        gbc.setState(0xde1, 0xd0b6, 0xf870, 0xd9b1, 0xcd70, 0x76c, 0x1, 0x0);
        gbc.writeMem(0xde1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xd0b6);
        EXPECT(gbc.pc(), 0xde2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0225
        gbc.setState(0xb414, 0x31e2, 0xcc70, 0x259d, 0x2028, 0xbf7a, 0x1, 0x1);
        gbc.writeMem(0xb414, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x31e2);
        EXPECT(gbc.pc(), 0xb415);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb414), 0xbd);
        // BD 0226
        gbc.setState(0x11e7, 0x98dd, 0xb7d0, 0x7ce1, 0xd89, 0xc265, 0x1, 0x0);
        gbc.writeMem(0x11e7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x98dd);
        EXPECT(gbc.pc(), 0x11e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0227
        gbc.setState(0x2c7, 0x970, 0x2940, 0x1437, 0xd149, 0x1947, 0x0, 0x1);
        gbc.writeMem(0x2c7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x970);
        EXPECT(gbc.pc(), 0x2c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0228
        gbc.setState(0x84cf, 0xab02, 0x2560, 0x1961, 0x3d66, 0x84fe, 0x0, 0x1);
        gbc.writeMem(0x84cf, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xab02);
        EXPECT(gbc.pc(), 0x84d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84cf), 0xbd);
        // BD 0229
        gbc.setState(0x15c4, 0x278f, 0x6580, 0x4ec5, 0x618f, 0x1206, 0x0, 0x0);
        gbc.writeMem(0x15c4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x278f);
        EXPECT(gbc.pc(), 0x15c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 022A
        gbc.setState(0x60e3, 0x77f0, 0x2e10, 0x64e8, 0xdc45, 0xdc4d, 0x1, 0x0);
        gbc.writeMem(0x60e3, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x77f0);
        EXPECT(gbc.pc(), 0x60e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 022B
        gbc.setState(0x2050, 0x9665, 0x88b0, 0x4877, 0xad25, 0x3e38, 0x1, 0x0);
        gbc.writeMem(0x2050, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x9665);
        EXPECT(gbc.pc(), 0x2051);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 022C
        gbc.setState(0x4b41, 0x673, 0xd240, 0x562d, 0xccbc, 0xecab, 0x0, 0x0);
        gbc.writeMem(0x4b41, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x673);
        EXPECT(gbc.pc(), 0x4b42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 022D
        gbc.setState(0x9d07, 0x5269, 0xac60, 0x8735, 0xd162, 0x6a7, 0x0, 0x1);
        gbc.writeMem(0x9d07, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x5269);
        EXPECT(gbc.pc(), 0x9d08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d07), 0xbd);
        // BD 022E
        gbc.setState(0x6669, 0xa611, 0x9e60, 0x8711, 0x2b77, 0x7a98, 0x1, 0x1);
        gbc.writeMem(0x6669, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xa611);
        EXPECT(gbc.pc(), 0x666a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 022F
        gbc.setState(0x9aab, 0x3c30, 0x2d50, 0xf1de, 0x1610, 0xd8e1, 0x0, 0x0);
        gbc.writeMem(0x9aab, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x3c30);
        EXPECT(gbc.pc(), 0x9aac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9aab), 0xbd);
        // BD 0230
        gbc.setState(0x22e3, 0x1013, 0x8d00, 0x2d93, 0x2404, 0xd968, 0x0, 0x1);
        gbc.writeMem(0x22e3, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x1013);
        EXPECT(gbc.pc(), 0x22e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0231
        gbc.setState(0x427b, 0xb5a, 0xfdf0, 0xca90, 0x5431, 0xfbb8, 0x1, 0x0);
        gbc.writeMem(0x427b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xb5a);
        EXPECT(gbc.pc(), 0x427c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0232
        gbc.setState(0x5c5e, 0x7b5d, 0xb5e0, 0x42a7, 0xe78e, 0x8521, 0x0, 0x1);
        gbc.writeMem(0x5c5e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x7b5d);
        EXPECT(gbc.pc(), 0x5c5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0233
        gbc.setState(0x6fa9, 0x95f5, 0x8d90, 0xafdf, 0x24ee, 0x5b38, 0x1, 0x1);
        gbc.writeMem(0x6fa9, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x95f5);
        EXPECT(gbc.pc(), 0x6faa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0234
        gbc.setState(0x1caa, 0xd76e, 0xab10, 0x95e7, 0x75ad, 0x4233, 0x0, 0x1);
        gbc.writeMem(0x1caa, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xd76e);
        EXPECT(gbc.pc(), 0x1cab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0235
        gbc.setState(0x6fec, 0x1273, 0x5d30, 0xeb15, 0x78a, 0x6b67, 0x0, 0x0);
        gbc.writeMem(0x6fec, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x1273);
        EXPECT(gbc.pc(), 0x6fed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0236
        gbc.setState(0x154, 0xba82, 0x1d60, 0xe65f, 0x9f6b, 0x53f8, 0x1, 0x0);
        gbc.writeMem(0x154, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xba82);
        EXPECT(gbc.pc(), 0x155);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0237
        gbc.setState(0x1cd, 0x14b3, 0x1300, 0x3721, 0xc44b, 0x5bcc, 0x0, 0x0);
        gbc.writeMem(0x1cd, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x14b3);
        EXPECT(gbc.pc(), 0x1ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0238
        gbc.setState(0x45f4, 0x1674, 0xc660, 0x64ed, 0x1aba, 0xfd90, 0x1, 0x1);
        gbc.writeMem(0x45f4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x1674);
        EXPECT(gbc.pc(), 0x45f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0239
        gbc.setState(0xaaf6, 0x2dec, 0x2400, 0x8db9, 0xea13, 0x499b, 0x1, 0x0);
        gbc.writeMem(0xaaf6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x2dec);
        EXPECT(gbc.pc(), 0xaaf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaf6), 0xbd);
        // BD 023A
        gbc.setState(0x66cd, 0x296, 0x53b0, 0xd202, 0xde9b, 0x7ba7, 0x1, 0x1);
        gbc.writeMem(0x66cd, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x296);
        EXPECT(gbc.pc(), 0x66ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 023B
        gbc.setState(0x8c60, 0x136, 0xcc00, 0x127c, 0x4acc, 0xd568, 0x0, 0x0);
        gbc.writeMem(0x8c60, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x136);
        EXPECT(gbc.pc(), 0x8c61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c60), 0xbd);
        // BD 023D
        gbc.setState(0xd215, 0xdf5f, 0x1720, 0xc31d, 0xc8eb, 0x7664, 0x0, 0x0);
        gbc.writeMem(0xd215, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xdf5f);
        EXPECT(gbc.pc(), 0xd216);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd215), 0xbd);
        // BD 023E
        gbc.setState(0xa391, 0x91c4, 0xbf70, 0xc745, 0x8c15, 0x4cb6, 0x1, 0x1);
        gbc.writeMem(0xa391, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x91c4);
        EXPECT(gbc.pc(), 0xa392);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa391), 0xbd);
        // BD 0240
        gbc.setState(0x189, 0x3ef2, 0x4010, 0x11d9, 0x6f2f, 0x172b, 0x0, 0x0);
        gbc.writeMem(0x189, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x3ef2);
        EXPECT(gbc.pc(), 0x18a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0241
        gbc.setState(0xda6b, 0xaf32, 0x6b80, 0x87ba, 0x3bf3, 0x8ff7, 0x1, 0x0);
        gbc.writeMem(0xda6b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xaf32);
        EXPECT(gbc.pc(), 0xda6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda6b), 0xbd);
        // BD 0242
        gbc.setState(0xa99e, 0xafc2, 0xa5d0, 0xb203, 0xad41, 0xacc2, 0x1, 0x1);
        gbc.writeMem(0xa99e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xafc2);
        EXPECT(gbc.pc(), 0xa99f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa99e), 0xbd);
        // BD 0243
        gbc.setState(0x699e, 0xbd1a, 0x31c0, 0x329, 0xabe2, 0xd5cd, 0x0, 0x1);
        gbc.writeMem(0x699e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xbd1a);
        EXPECT(gbc.pc(), 0x699f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0244
        gbc.setState(0x13b9, 0xc153, 0xe280, 0x76b6, 0x67dd, 0x1de7, 0x0, 0x1);
        gbc.writeMem(0x13b9, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xc153);
        EXPECT(gbc.pc(), 0x13ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0246
        gbc.setState(0xdaa3, 0xfbd4, 0x4a40, 0x80b4, 0x410e, 0x5632, 0x0, 0x0);
        gbc.writeMem(0xdaa3, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xfbd4);
        EXPECT(gbc.pc(), 0xdaa4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaa3), 0xbd);
        // BD 0247
        gbc.setState(0x1a0d, 0xee7d, 0x5100, 0x65f0, 0x54be, 0x450b, 0x0, 0x1);
        gbc.writeMem(0x1a0d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xee7d);
        EXPECT(gbc.pc(), 0x1a0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0248
        gbc.setState(0x7e54, 0x438e, 0x490, 0x1f8a, 0x198c, 0xcdba, 0x0, 0x1);
        gbc.writeMem(0x7e54, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x438e);
        EXPECT(gbc.pc(), 0x7e55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0249
        gbc.setState(0x8422, 0x6c1c, 0xa560, 0x6494, 0x1c45, 0x57dd, 0x0, 0x1);
        gbc.writeMem(0x8422, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x6c1c);
        EXPECT(gbc.pc(), 0x8423);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8422), 0xbd);
        // BD 024B
        gbc.setState(0x908a, 0x1f8a, 0xfcb0, 0xd092, 0xcba1, 0x6dd7, 0x0, 0x0);
        gbc.writeMem(0x908a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x1f8a);
        EXPECT(gbc.pc(), 0x908b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x908a), 0xbd);
        // BD 024C
        gbc.setState(0x6a17, 0x9422, 0x2eb0, 0x8426, 0x82e4, 0xb0e7, 0x0, 0x1);
        gbc.writeMem(0x6a17, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x9422);
        EXPECT(gbc.pc(), 0x6a18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 024D
        gbc.setState(0x47ec, 0xa043, 0x9230, 0xbd80, 0xc791, 0xff00, 0x1, 0x1);
        gbc.writeMem(0x47ec, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xa043);
        EXPECT(gbc.pc(), 0x47ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 024E
        gbc.setState(0x4012, 0xdc33, 0x3d40, 0xdf3a, 0x3d37, 0x685f, 0x1, 0x0);
        gbc.writeMem(0x4012, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xdc33);
        EXPECT(gbc.pc(), 0x4013);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 024F
        gbc.setState(0x2d2b, 0xce4b, 0x8580, 0x89a4, 0x7788, 0xc0f8, 0x1, 0x0);
        gbc.writeMem(0x2d2b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xce4b);
        EXPECT(gbc.pc(), 0x2d2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0250
        gbc.setState(0xe76d, 0xc853, 0x55e0, 0x5f76, 0x6e2b, 0xea01, 0x0, 0x1);
        gbc.writeMem(0xe76d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xc853);
        EXPECT(gbc.pc(), 0xe76e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe76d), 0xbd);
        // BD 0251
        gbc.setState(0xdbac, 0xa47f, 0x9180, 0x1437, 0xc951, 0xf2a6, 0x0, 0x1);
        gbc.writeMem(0xdbac, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xa47f);
        EXPECT(gbc.pc(), 0xdbad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbac), 0xbd);
        // BD 0252
        gbc.setState(0x4182, 0x97b9, 0xb530, 0xb7c3, 0x7d91, 0x3638, 0x1, 0x0);
        gbc.writeMem(0x4182, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x97b9);
        EXPECT(gbc.pc(), 0x4183);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0253
        gbc.setState(0x9546, 0xbaaa, 0x1b40, 0xf971, 0xa4dd, 0x11fd, 0x0, 0x1);
        gbc.writeMem(0x9546, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xbaaa);
        EXPECT(gbc.pc(), 0x9547);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9546), 0xbd);
        // BD 0255
        gbc.setState(0xdefc, 0x9b34, 0x3c60, 0x22c0, 0x3a63, 0xbcf3, 0x1, 0x0);
        gbc.writeMem(0xdefc, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x9b34);
        EXPECT(gbc.pc(), 0xdefd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdefc), 0xbd);
        // BD 0256
        gbc.setState(0x63b0, 0xd11f, 0xe90, 0x186, 0xeaf0, 0x477f, 0x1, 0x0);
        gbc.writeMem(0x63b0, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xd11f);
        EXPECT(gbc.pc(), 0x63b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0257
        gbc.setState(0x7295, 0xcc7e, 0xf3b0, 0x6437, 0xb815, 0x4ac0, 0x1, 0x0);
        gbc.writeMem(0x7295, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xcc7e);
        EXPECT(gbc.pc(), 0x7296);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0258
        gbc.setState(0x47ba, 0xf0fa, 0x9e50, 0x7942, 0xd0ab, 0x7630, 0x0, 0x1);
        gbc.writeMem(0x47ba, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xf0fa);
        EXPECT(gbc.pc(), 0x47bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0259
        gbc.setState(0x1939, 0x50d, 0x2950, 0xaaca, 0x1ee1, 0x491d, 0x1, 0x0);
        gbc.writeMem(0x1939, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x50d);
        EXPECT(gbc.pc(), 0x193a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 025A
        gbc.setState(0x677c, 0x1e0a, 0x9c40, 0x4c87, 0x3304, 0xe054, 0x1, 0x0);
        gbc.writeMem(0x677c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x1e0a);
        EXPECT(gbc.pc(), 0x677d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 025B
        gbc.setState(0xe8a0, 0x51c6, 0x2b30, 0x2c23, 0xe9a, 0x5952, 0x0, 0x0);
        gbc.writeMem(0xe8a0, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x51c6);
        EXPECT(gbc.pc(), 0xe8a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8a0), 0xbd);
        // BD 025C
        gbc.setState(0x387d, 0x7f04, 0xb970, 0x253b, 0x9c60, 0x6c1, 0x0, 0x1);
        gbc.writeMem(0x387d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x7f04);
        EXPECT(gbc.pc(), 0x387e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 025D
        gbc.setState(0xb2d6, 0x8fc7, 0xd280, 0xb8b, 0xcd71, 0x54ee, 0x1, 0x1);
        gbc.writeMem(0xb2d6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x8fc7);
        EXPECT(gbc.pc(), 0xb2d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2d6), 0xbd);
        // BD 025F
        gbc.setState(0xe6f8, 0x1026, 0x5060, 0x150e, 0x4d42, 0x57f2, 0x1, 0x1);
        gbc.writeMem(0xe6f8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x1026);
        EXPECT(gbc.pc(), 0xe6f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6f8), 0xbd);
        // BD 0260
        gbc.setState(0x86e6, 0xcc94, 0xd380, 0xed, 0x44c0, 0xe91f, 0x1, 0x1);
        gbc.writeMem(0x86e6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xcc94);
        EXPECT(gbc.pc(), 0x86e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86e6), 0xbd);
        // BD 0261
        gbc.setState(0x5d5, 0x242a, 0xb1d0, 0xeaf9, 0x1456, 0xa7fa, 0x1, 0x0);
        gbc.writeMem(0x5d5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x242a);
        EXPECT(gbc.pc(), 0x5d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0262
        gbc.setState(0xa05d, 0xfcc, 0x6420, 0xc465, 0xf1d4, 0xda20, 0x0, 0x0);
        gbc.writeMem(0xa05d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xfcc);
        EXPECT(gbc.pc(), 0xa05e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa05d), 0xbd);
        // BD 0263
        gbc.setState(0xc000, 0x4f4d, 0x3560, 0x2af4, 0x1be3, 0x2df, 0x0, 0x1);
        gbc.writeMem(0xc000, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x4f4d);
        EXPECT(gbc.pc(), 0xc001);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc000), 0xbd);
        // BD 0264
        gbc.setState(0x7d55, 0xa37d, 0xfb20, 0xe23c, 0xf104, 0x7c17, 0x0, 0x1);
        gbc.writeMem(0x7d55, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa37d);
        EXPECT(gbc.pc(), 0x7d56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0265
        gbc.setState(0xa014, 0x16ac, 0xf7e0, 0xeae2, 0x8baf, 0x2120, 0x0, 0x0);
        gbc.writeMem(0xa014, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x16ac);
        EXPECT(gbc.pc(), 0xa015);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa014), 0xbd);
        // BD 0266
        gbc.setState(0x2ca7, 0xfd89, 0x8190, 0x99b9, 0xc83e, 0xcfa5, 0x1, 0x0);
        gbc.writeMem(0x2ca7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xfd89);
        EXPECT(gbc.pc(), 0x2ca8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0267
        gbc.setState(0x8761, 0x7eff, 0x86a0, 0x3cb8, 0xb96, 0x68ca, 0x0, 0x0);
        gbc.writeMem(0x8761, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x7eff);
        EXPECT(gbc.pc(), 0x8762);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8761), 0xbd);
        // BD 0269
        gbc.setState(0xda21, 0x66ff, 0xefb0, 0x770f, 0x6f42, 0xd4a5, 0x1, 0x0);
        gbc.writeMem(0xda21, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x66ff);
        EXPECT(gbc.pc(), 0xda22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda21), 0xbd);
        // BD 026A
        gbc.setState(0xe1b7, 0x66f3, 0xc010, 0x3094, 0x4cc, 0x4d76, 0x0, 0x1);
        gbc.writeMem(0xe1b7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x66f3);
        EXPECT(gbc.pc(), 0xe1b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1b7), 0xbd);
        // BD 026C
        gbc.setState(0x5c9c, 0x72c9, 0x7350, 0xc274, 0x1c76, 0x45ef, 0x0, 0x1);
        gbc.writeMem(0x5c9c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x72c9);
        EXPECT(gbc.pc(), 0x5c9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 026D
        gbc.setState(0x706e, 0x7fcf, 0xa060, 0xa5f0, 0x586, 0xd632, 0x0, 0x0);
        gbc.writeMem(0x706e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x7fcf);
        EXPECT(gbc.pc(), 0x706f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 026E
        gbc.setState(0xefe2, 0x510e, 0xa5e0, 0x510d, 0xe510, 0x57fd, 0x1, 0x0);
        gbc.writeMem(0xefe2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x510e);
        EXPECT(gbc.pc(), 0xefe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefe2), 0xbd);
        // BD 026F
        gbc.setState(0x3980, 0x3814, 0xb590, 0x5c96, 0x5db8, 0x51b6, 0x0, 0x0);
        gbc.writeMem(0x3980, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x3814);
        EXPECT(gbc.pc(), 0x3981);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0270
        gbc.setState(0xc3e9, 0x8597, 0xd890, 0xc331, 0xbb96, 0x1bd, 0x0, 0x0);
        gbc.writeMem(0xc3e9, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x8597);
        EXPECT(gbc.pc(), 0xc3ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3e9), 0xbd);
        // BD 0271
        gbc.setState(0xb94a, 0x91b8, 0x2960, 0xa1d3, 0xf2b4, 0x37ac, 0x1, 0x1);
        gbc.writeMem(0xb94a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x91b8);
        EXPECT(gbc.pc(), 0xb94b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb94a), 0xbd);
        // BD 0272
        gbc.setState(0x4623, 0xb364, 0xb440, 0x1e2e, 0xdbcb, 0xab9e, 0x1, 0x0);
        gbc.writeMem(0x4623, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xb364);
        EXPECT(gbc.pc(), 0x4624);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0273
        gbc.setState(0xcc40, 0x77ba, 0x28f0, 0x63c1, 0xcb37, 0xa320, 0x0, 0x1);
        gbc.writeMem(0xcc40, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x77ba);
        EXPECT(gbc.pc(), 0xcc41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc40), 0xbd);
        // BD 0274
        gbc.setState(0xab09, 0x7b17, 0x5dd0, 0x36d3, 0x808c, 0xa87c, 0x0, 0x0);
        gbc.writeMem(0xab09, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x7b17);
        EXPECT(gbc.pc(), 0xab0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab09), 0xbd);
        // BD 0275
        gbc.setState(0x1f74, 0xfa53, 0x4f60, 0xf9d9, 0x995f, 0x3a87, 0x0, 0x1);
        gbc.writeMem(0x1f74, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xfa53);
        EXPECT(gbc.pc(), 0x1f75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0276
        gbc.setState(0xcb25, 0x74b0, 0xe9c0, 0xbae, 0x5ed6, 0x966a, 0x1, 0x0);
        gbc.writeMem(0xcb25, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x74b0);
        EXPECT(gbc.pc(), 0xcb26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb25), 0xbd);
        // BD 0277
        gbc.setState(0xb3c2, 0x8e34, 0x2be0, 0xaec8, 0xbca7, 0x97a8, 0x0, 0x0);
        gbc.writeMem(0xb3c2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x8e34);
        EXPECT(gbc.pc(), 0xb3c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3c2), 0xbd);
        // BD 0278
        gbc.setState(0x9abd, 0xab3d, 0xec00, 0xefe3, 0x3a04, 0xda70, 0x0, 0x0);
        gbc.writeMem(0x9abd, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xab3d);
        EXPECT(gbc.pc(), 0x9abe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9abd), 0xbd);
        // BD 0279
        gbc.setState(0xbd24, 0x34bc, 0x6f40, 0xeec, 0x8d5e, 0xf232, 0x0, 0x1);
        gbc.writeMem(0xbd24, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x34bc);
        EXPECT(gbc.pc(), 0xbd25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd24), 0xbd);
        // BD 027A
        gbc.setState(0xe57b, 0x4461, 0x7c80, 0xf908, 0x6a21, 0x5b6b, 0x1, 0x0);
        gbc.writeMem(0xe57b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x4461);
        EXPECT(gbc.pc(), 0xe57c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe57b), 0xbd);
        // BD 027B
        gbc.setState(0x75fe, 0xd3ab, 0xf0b0, 0x1a65, 0x23d1, 0x63ca, 0x1, 0x0);
        gbc.writeMem(0x75fe, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xd3ab);
        EXPECT(gbc.pc(), 0x75ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 027C
        gbc.setState(0x301c, 0xc2d7, 0xcd80, 0x75af, 0xeef9, 0xe47d, 0x1, 0x0);
        gbc.writeMem(0x301c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc2d7);
        EXPECT(gbc.pc(), 0x301d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 027D
        gbc.setState(0x7d5f, 0xacf7, 0xdf20, 0xc965, 0xb230, 0xd1a2, 0x0, 0x1);
        gbc.writeMem(0x7d5f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xacf7);
        EXPECT(gbc.pc(), 0x7d60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 027E
        gbc.setState(0x6df8, 0x1b0c, 0xa570, 0x99f7, 0x16bb, 0x84ff, 0x0, 0x1);
        gbc.writeMem(0x6df8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x1b0c);
        EXPECT(gbc.pc(), 0x6df9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 027F
        gbc.setState(0x97ed, 0xc09f, 0x6330, 0xcf4c, 0xf000, 0x6ec0, 0x1, 0x1);
        gbc.writeMem(0x97ed, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xc09f);
        EXPECT(gbc.pc(), 0x97ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97ed), 0xbd);
        // BD 0280
        gbc.setState(0xd4fc, 0xc54f, 0xb110, 0xe247, 0x7b60, 0x106c, 0x0, 0x0);
        gbc.writeMem(0xd4fc, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xc54f);
        EXPECT(gbc.pc(), 0xd4fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4fc), 0xbd);
        // BD 0281
        gbc.setState(0xccb4, 0xb86a, 0x3200, 0xed90, 0xcf3c, 0x8c1a, 0x0, 0x1);
        gbc.writeMem(0xccb4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xb86a);
        EXPECT(gbc.pc(), 0xccb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccb4), 0xbd);
        // BD 0282
        gbc.setState(0x8fc9, 0xaed7, 0x4230, 0xdc7a, 0x2714, 0x40e8, 0x0, 0x1);
        gbc.writeMem(0x8fc9, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xaed7);
        EXPECT(gbc.pc(), 0x8fca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fc9), 0xbd);
        // BD 0283
        gbc.setState(0x1fe3, 0x8160, 0xa5b0, 0x3b8d, 0x8a, 0x76a7, 0x0, 0x0);
        gbc.writeMem(0x1fe3, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x8160);
        EXPECT(gbc.pc(), 0x1fe4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0284
        gbc.setState(0x3e6c, 0x9d4, 0x6530, 0x501e, 0xe9dc, 0xd21d, 0x1, 0x1);
        gbc.writeMem(0x3e6c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x9d4);
        EXPECT(gbc.pc(), 0x3e6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0285
        gbc.setState(0xe26e, 0x376c, 0xf460, 0x1592, 0x2e30, 0x54cf, 0x1, 0x1);
        gbc.writeMem(0xe26e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x376c);
        EXPECT(gbc.pc(), 0xe26f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe26e), 0xbd);
        // BD 0286
        gbc.setState(0xc16, 0x8e28, 0x6550, 0x7ce8, 0x43c0, 0xca36, 0x0, 0x0);
        gbc.writeMem(0xc16, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x8e28);
        EXPECT(gbc.pc(), 0xc17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0287
        gbc.setState(0xea7f, 0xef87, 0xc1a0, 0x68de, 0x6287, 0x4911, 0x1, 0x0);
        gbc.writeMem(0xea7f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xef87);
        EXPECT(gbc.pc(), 0xea80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea7f), 0xbd);
        // BD 0288
        gbc.setState(0xc555, 0x6429, 0x1250, 0x919d, 0x72e4, 0x6f5, 0x0, 0x1);
        gbc.writeMem(0xc555, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x6429);
        EXPECT(gbc.pc(), 0xc556);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc555), 0xbd);
        // BD 0289
        gbc.setState(0x75c8, 0xd1ce, 0x6b70, 0x4b52, 0xc443, 0x3d31, 0x1, 0x0);
        gbc.writeMem(0x75c8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xd1ce);
        EXPECT(gbc.pc(), 0x75c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 028A
        gbc.setState(0xebe2, 0xfe78, 0x1140, 0x1b66, 0xb5f8, 0x5192, 0x0, 0x0);
        gbc.writeMem(0xebe2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xfe78);
        EXPECT(gbc.pc(), 0xebe3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebe2), 0xbd);
        // BD 028B
        gbc.setState(0xdff6, 0xaa1, 0xcf80, 0x2a42, 0xd443, 0x4895, 0x0, 0x0);
        gbc.writeMem(0xdff6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xaa1);
        EXPECT(gbc.pc(), 0xdff7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdff6), 0xbd);
        // BD 028C
        gbc.setState(0x5d3e, 0x6ccd, 0xd4f0, 0x2364, 0xabcf, 0x1a57, 0x0, 0x0);
        gbc.writeMem(0x5d3e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x6ccd);
        EXPECT(gbc.pc(), 0x5d3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 028D
        gbc.setState(0x43aa, 0x103b, 0xca0, 0xcb36, 0x7de8, 0x6af2, 0x0, 0x0);
        gbc.writeMem(0x43aa, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x103b);
        EXPECT(gbc.pc(), 0x43ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 028E
        gbc.setState(0x8d18, 0x7203, 0xd190, 0xbb45, 0xb5e1, 0xedff, 0x0, 0x0);
        gbc.writeMem(0x8d18, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x7203);
        EXPECT(gbc.pc(), 0x8d19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d18), 0xbd);
        // BD 028F
        gbc.setState(0x5beb, 0x2caf, 0x6c20, 0xdc28, 0xeeb0, 0x72d7, 0x1, 0x0);
        gbc.writeMem(0x5beb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x2caf);
        EXPECT(gbc.pc(), 0x5bec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0290
        gbc.setState(0xecbd, 0xa91f, 0x5320, 0xe5bd, 0xb511, 0xcd08, 0x1, 0x0);
        gbc.writeMem(0xecbd, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xa91f);
        EXPECT(gbc.pc(), 0xecbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecbd), 0xbd);
        // BD 0291
        gbc.setState(0xaf7a, 0x4187, 0xcb50, 0xbc2e, 0x7964, 0x9111, 0x0, 0x0);
        gbc.writeMem(0xaf7a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x4187);
        EXPECT(gbc.pc(), 0xaf7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf7a), 0xbd);
        // BD 0292
        gbc.setState(0xdde, 0x1a90, 0xcfa0, 0x7131, 0xdc4c, 0xa2f1, 0x1, 0x1);
        gbc.writeMem(0xdde, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x1a90);
        EXPECT(gbc.pc(), 0xddf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0293
        gbc.setState(0x477c, 0x8f9c, 0xb130, 0x3f9d, 0xf8b5, 0x9476, 0x0, 0x0);
        gbc.writeMem(0x477c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x8f9c);
        EXPECT(gbc.pc(), 0x477d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0294
        gbc.setState(0xa96e, 0x6073, 0x68d0, 0xc3ef, 0x5b41, 0xce1, 0x0, 0x1);
        gbc.writeMem(0xa96e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x6073);
        EXPECT(gbc.pc(), 0xa96f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa96e), 0xbd);
        // BD 0295
        gbc.setState(0x7121, 0xd804, 0x6e30, 0xb1b2, 0xf286, 0x562b, 0x1, 0x0);
        gbc.writeMem(0x7121, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xd804);
        EXPECT(gbc.pc(), 0x7122);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0296
        gbc.setState(0xa678, 0xe5a4, 0x3130, 0xb245, 0x2188, 0x7bbb, 0x0, 0x0);
        gbc.writeMem(0xa678, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xe5a4);
        EXPECT(gbc.pc(), 0xa679);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa678), 0xbd);
        // BD 0297
        gbc.setState(0x32e5, 0x44f9, 0x4f20, 0xe6fc, 0x23b3, 0xb156, 0x0, 0x0);
        gbc.writeMem(0x32e5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x44f9);
        EXPECT(gbc.pc(), 0x32e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0298
        gbc.setState(0x1da3, 0xbad2, 0xee00, 0xa552, 0xaf93, 0xc94c, 0x0, 0x1);
        gbc.writeMem(0x1da3, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xbad2);
        EXPECT(gbc.pc(), 0x1da4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0299
        gbc.setState(0x284f, 0x8eb3, 0x4590, 0xd8d9, 0x81c9, 0x8ce7, 0x0, 0x1);
        gbc.writeMem(0x284f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x8eb3);
        EXPECT(gbc.pc(), 0x2850);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 029A
        gbc.setState(0xc2ef, 0xfa91, 0x7650, 0xddab, 0x2ae8, 0x3129, 0x1, 0x0);
        gbc.writeMem(0xc2ef, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xfa91);
        EXPECT(gbc.pc(), 0xc2f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2ef), 0xbd);
        // BD 029B
        gbc.setState(0xb6c5, 0x7602, 0x6ed0, 0xaf3f, 0xec4a, 0x7132, 0x0, 0x0);
        gbc.writeMem(0xb6c5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x7602);
        EXPECT(gbc.pc(), 0xb6c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6c5), 0xbd);
        // BD 029C
        gbc.setState(0xa71c, 0xa432, 0x1280, 0x19a3, 0x179a, 0x28ae, 0x0, 0x1);
        gbc.writeMem(0xa71c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa432);
        EXPECT(gbc.pc(), 0xa71d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa71c), 0xbd);
        // BD 029D
        gbc.setState(0xce8d, 0x717d, 0xae60, 0x7bc, 0x17ee, 0xa978, 0x1, 0x0);
        gbc.writeMem(0xce8d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x717d);
        EXPECT(gbc.pc(), 0xce8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce8d), 0xbd);
        // BD 029E
        gbc.setState(0xa367, 0x991c, 0x7b90, 0x8ae4, 0x404, 0xaec2, 0x0, 0x0);
        gbc.writeMem(0xa367, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x991c);
        EXPECT(gbc.pc(), 0xa368);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa367), 0xbd);
        // BD 029F
        gbc.setState(0xdadb, 0xf409, 0xbe10, 0x6e89, 0xc6d3, 0xe04a, 0x0, 0x1);
        gbc.writeMem(0xdadb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xf409);
        EXPECT(gbc.pc(), 0xdadc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdadb), 0xbd);
        // BD 02A0
        gbc.setState(0x1b0b, 0xd692, 0x51a0, 0x25b6, 0x8862, 0x8a15, 0x0, 0x1);
        gbc.writeMem(0x1b0b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xd692);
        EXPECT(gbc.pc(), 0x1b0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 02A1
        gbc.setState(0xd1a, 0x92ee, 0xdea0, 0x8eba, 0xf6a8, 0xb5f7, 0x0, 0x1);
        gbc.writeMem(0xd1a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x92ee);
        EXPECT(gbc.pc(), 0xd1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 02A2
        gbc.setState(0x7be, 0xac32, 0x960, 0xbbc8, 0x6f7d, 0x6ed2, 0x1, 0x0);
        gbc.writeMem(0x7be, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xac32);
        EXPECT(gbc.pc(), 0x7bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 02A3
        gbc.setState(0x3ff, 0xd153, 0xa8e0, 0x2211, 0x493c, 0x3d4c, 0x1, 0x1);
        gbc.writeMem(0x3ff, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd153);
        EXPECT(gbc.pc(), 0x400);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 02A4
        gbc.setState(0x8c51, 0x8e1c, 0x90b0, 0xb5ab, 0xa1c6, 0xdef8, 0x0, 0x0);
        gbc.writeMem(0x8c51, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x8e1c);
        EXPECT(gbc.pc(), 0x8c52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c51), 0xbd);
        // BD 02A5
        gbc.setState(0x35ee, 0x325a, 0xfd80, 0xea86, 0xd2bb, 0xedb0, 0x0, 0x1);
        gbc.writeMem(0x35ee, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x325a);
        EXPECT(gbc.pc(), 0x35ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 02A7
        gbc.setState(0x5986, 0xfce0, 0xc940, 0x7643, 0x709c, 0x7e3e, 0x0, 0x1);
        gbc.writeMem(0x5986, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xfce0);
        EXPECT(gbc.pc(), 0x5987);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 02A8
        gbc.setState(0xd69e, 0x8c57, 0xd640, 0x6bc0, 0x74a8, 0x84a8, 0x0, 0x1);
        gbc.writeMem(0xd69e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x8c57);
        EXPECT(gbc.pc(), 0xd69f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd69e), 0xbd);
        // BD 02A9
        gbc.setState(0x2c68, 0x4baf, 0x89a0, 0xbd1e, 0x794c, 0xd450, 0x1, 0x0);
        gbc.writeMem(0x2c68, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x4baf);
        EXPECT(gbc.pc(), 0x2c69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 02AA
        gbc.setState(0xadd0, 0xbb58, 0x63a0, 0xa9e0, 0xa58d, 0x172a, 0x1, 0x1);
        gbc.writeMem(0xadd0, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xbb58);
        EXPECT(gbc.pc(), 0xadd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadd0), 0xbd);
        // BD 02AB
        gbc.setState(0x2848, 0x8b7b, 0x270, 0xcb9, 0x1be4, 0x9737, 0x0, 0x1);
        gbc.writeMem(0x2848, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x8b7b);
        EXPECT(gbc.pc(), 0x2849);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 02AC
        gbc.setState(0x4d5a, 0x3c5, 0xea0, 0xd55a, 0x6c69, 0xb045, 0x0, 0x1);
        gbc.writeMem(0x4d5a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x3c5);
        EXPECT(gbc.pc(), 0x4d5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 02AD
        gbc.setState(0xc40d, 0x73a3, 0x990, 0xd3e6, 0x8528, 0x2466, 0x1, 0x1);
        gbc.writeMem(0xc40d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x73a3);
        EXPECT(gbc.pc(), 0xc40e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc40d), 0xbd);
        // BD 02AE
        gbc.setState(0x10e5, 0x3160, 0x6b0, 0x2433, 0x3c54, 0x6841, 0x0, 0x0);
        gbc.writeMem(0x10e5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x3160);
        EXPECT(gbc.pc(), 0x10e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 02AF
        gbc.setState(0x7fce, 0x3c6f, 0x50, 0x2e26, 0xb7a4, 0xf459, 0x0, 0x0);
        gbc.writeMem(0x7fce, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x3c6f);
        EXPECT(gbc.pc(), 0x7fcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 02B0
        gbc.setState(0xd50b, 0xef5, 0x76e0, 0xf76, 0x2cb0, 0x403a, 0x0, 0x0);
        gbc.writeMem(0xd50b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xef5);
        EXPECT(gbc.pc(), 0xd50c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd50b), 0xbd);
        // BD 02B1
        gbc.setState(0x42a1, 0x9f84, 0x8ce0, 0x61e, 0x6fba, 0xab58, 0x0, 0x0);
        gbc.writeMem(0x42a1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x9f84);
        EXPECT(gbc.pc(), 0x42a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 02B2
        gbc.setState(0x1bcc, 0x45ec, 0x87e0, 0x5ab3, 0xfaea, 0x1785, 0x1, 0x0);
        gbc.writeMem(0x1bcc, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x45ec);
        EXPECT(gbc.pc(), 0x1bcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 02B3
        gbc.setState(0xe28a, 0x9f7e, 0x60c0, 0xfa45, 0x21c4, 0x8535, 0x0, 0x1);
        gbc.writeMem(0xe28a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x9f7e);
        EXPECT(gbc.pc(), 0xe28b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe28a), 0xbd);
        // BD 02B4
        gbc.setState(0x7282, 0x8b53, 0xd560, 0xecf9, 0x8855, 0xb976, 0x0, 0x1);
        gbc.writeMem(0x7282, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x8b53);
        EXPECT(gbc.pc(), 0x7283);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 02B5
        gbc.setState(0x31c7, 0x68a5, 0x7ea0, 0x4665, 0x8ce9, 0x67c1, 0x0, 0x1);
        gbc.writeMem(0x31c7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x68a5);
        EXPECT(gbc.pc(), 0x31c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 02B6
        gbc.setState(0x399b, 0x2aa1, 0x98a0, 0xa48, 0x2ab1, 0x7b59, 0x1, 0x1);
        gbc.writeMem(0x399b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x2aa1);
        EXPECT(gbc.pc(), 0x399c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 02B7
        gbc.setState(0x52a2, 0x41cf, 0xc100, 0x42a9, 0xec38, 0xbf33, 0x0, 0x1);
        gbc.writeMem(0x52a2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x41cf);
        EXPECT(gbc.pc(), 0x52a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 02B8
        gbc.setState(0x4f7e, 0x40f6, 0xd240, 0x41ed, 0x91b4, 0xcc, 0x0, 0x1);
        gbc.writeMem(0x4f7e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x40f6);
        EXPECT(gbc.pc(), 0x4f7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 02B9
        gbc.setState(0x5023, 0x259e, 0x4460, 0x5cf, 0x28fb, 0xba45, 0x1, 0x1);
        gbc.writeMem(0x5023, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x259e);
        EXPECT(gbc.pc(), 0x5024);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 02BA
        gbc.setState(0x6d02, 0x1e00, 0x63d0, 0xae3, 0x5d1f, 0x4224, 0x0, 0x0);
        gbc.writeMem(0x6d02, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x1e00);
        EXPECT(gbc.pc(), 0x6d03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 02BB
        gbc.setState(0x63eb, 0x6e58, 0x1510, 0xca07, 0x94eb, 0x1591, 0x0, 0x1);
        gbc.writeMem(0x63eb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x6e58);
        EXPECT(gbc.pc(), 0x63ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 02BC
        gbc.setState(0xe0f5, 0x3489, 0x90, 0x223, 0xbf87, 0xe1b5, 0x0, 0x0);
        gbc.writeMem(0xe0f5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x3489);
        EXPECT(gbc.pc(), 0xe0f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0f5), 0xbd);
        // BD 02BD
        gbc.setState(0x532c, 0x43a8, 0x8130, 0x268e, 0x1b09, 0x8fb8, 0x0, 0x1);
        gbc.writeMem(0x532c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x43a8);
        EXPECT(gbc.pc(), 0x532d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 02BE
        gbc.setState(0xaac7, 0x6d4e, 0x86e0, 0x6688, 0xd955, 0xc43, 0x1, 0x0);
        gbc.writeMem(0xaac7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x6d4e);
        EXPECT(gbc.pc(), 0xaac8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaac7), 0xbd);
        // BD 02BF
        gbc.setState(0x1826, 0x4e8c, 0xca40, 0x4fc1, 0x9e25, 0xee6a, 0x1, 0x1);
        gbc.writeMem(0x1826, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x4e8c);
        EXPECT(gbc.pc(), 0x1827);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 02C0
        gbc.setState(0x3c62, 0x3cd0, 0x3420, 0x75a6, 0x7de5, 0x498a, 0x1, 0x0);
        gbc.writeMem(0x3c62, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x3cd0);
        EXPECT(gbc.pc(), 0x3c63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 02C1
        gbc.setState(0xbeb1, 0x3fdf, 0xec70, 0x5465, 0x6c30, 0x87c7, 0x0, 0x0);
        gbc.writeMem(0xbeb1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x3fdf);
        EXPECT(gbc.pc(), 0xbeb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeb1), 0xbd);
        // BD 02C2
        gbc.setState(0xe7d2, 0x63db, 0x16f0, 0xf92, 0x10d2, 0xc811, 0x1, 0x0);
        gbc.writeMem(0xe7d2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x63db);
        EXPECT(gbc.pc(), 0xe7d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7d2), 0xbd);
        // BD 02C3
        gbc.setState(0xb6bb, 0xec7d, 0xfe30, 0x5ca5, 0x90c7, 0xd6b4, 0x0, 0x0);
        gbc.writeMem(0xb6bb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xec7d);
        EXPECT(gbc.pc(), 0xb6bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6bb), 0xbd);
        // BD 02C4
        gbc.setState(0xa1d1, 0x538, 0xa640, 0x7511, 0xa2d5, 0x9593, 0x1, 0x1);
        gbc.writeMem(0xa1d1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x538);
        EXPECT(gbc.pc(), 0xa1d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1d1), 0xbd);
        // BD 02C5
        gbc.setState(0x9d4d, 0xbdfc, 0xf2c0, 0x1829, 0x117c, 0x3ae9, 0x1, 0x1);
        gbc.writeMem(0x9d4d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xbdfc);
        EXPECT(gbc.pc(), 0x9d4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d4d), 0xbd);
        // BD 02C6
        gbc.setState(0x1265, 0xc074, 0x5a60, 0xce85, 0xd568, 0xa5be, 0x0, 0x0);
        gbc.writeMem(0x1265, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xc074);
        EXPECT(gbc.pc(), 0x1266);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 02C7
        gbc.setState(0x78d4, 0x69db, 0xa1d0, 0x42e4, 0x9b75, 0xf835, 0x1, 0x0);
        gbc.writeMem(0x78d4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x69db);
        EXPECT(gbc.pc(), 0x78d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 02C8
        gbc.setState(0xb8f2, 0x4c03, 0x180, 0x1eb3, 0x148e, 0x7034, 0x1, 0x0);
        gbc.writeMem(0xb8f2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x4c03);
        EXPECT(gbc.pc(), 0xb8f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8f2), 0xbd);
        // BD 02C9
        gbc.setState(0x590e, 0x2233, 0x26d0, 0xc4ea, 0x3afc, 0xa233, 0x1, 0x0);
        gbc.writeMem(0x590e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x2233);
        EXPECT(gbc.pc(), 0x590f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 02CA
        gbc.setState(0x47c2, 0x5adc, 0x2aa0, 0xf8e8, 0x45fa, 0xa23e, 0x1, 0x1);
        gbc.writeMem(0x47c2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x5adc);
        EXPECT(gbc.pc(), 0x47c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 02CB
        gbc.setState(0xd9b8, 0x6113, 0x4d90, 0x3e8b, 0x375e, 0xbbda, 0x1, 0x1);
        gbc.writeMem(0xd9b8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x6113);
        EXPECT(gbc.pc(), 0xd9b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9b8), 0xbd);
        // BD 02CC
        gbc.setState(0x1d1a, 0x4604, 0x7a50, 0x5c0d, 0x86fc, 0xe810, 0x0, 0x1);
        gbc.writeMem(0x1d1a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x4604);
        EXPECT(gbc.pc(), 0x1d1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 02CD
        gbc.setState(0x88c4, 0x765e, 0x2470, 0x7836, 0x3857, 0xcce8, 0x1, 0x1);
        gbc.writeMem(0x88c4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x765e);
        EXPECT(gbc.pc(), 0x88c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88c4), 0xbd);
        // BD 02CE
        gbc.setState(0xbed1, 0xe70b, 0xdf20, 0xfd3c, 0x3e2d, 0x8e17, 0x0, 0x1);
        gbc.writeMem(0xbed1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xe70b);
        EXPECT(gbc.pc(), 0xbed2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbed1), 0xbd);
        // BD 02CF
        gbc.setState(0x4bce, 0xeffe, 0x3660, 0x70fb, 0xb419, 0xe3c, 0x1, 0x0);
        gbc.writeMem(0x4bce, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xeffe);
        EXPECT(gbc.pc(), 0x4bcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 02D0
        gbc.setState(0xadfe, 0xbc4f, 0x9400, 0xa5a2, 0xe99a, 0x68f6, 0x1, 0x0);
        gbc.writeMem(0xadfe, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xbc4f);
        EXPECT(gbc.pc(), 0xadff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadfe), 0xbd);
        // BD 02D1
        gbc.setState(0x386f, 0x9ea, 0x71a0, 0xcaec, 0x41c0, 0x4f11, 0x1, 0x1);
        gbc.writeMem(0x386f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x9ea);
        EXPECT(gbc.pc(), 0x3870);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 02D2
        gbc.setState(0x5344, 0x6c48, 0x2c80, 0xa207, 0x50d7, 0x4b18, 0x0, 0x1);
        gbc.writeMem(0x5344, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x6c48);
        EXPECT(gbc.pc(), 0x5345);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 02D3
        gbc.setState(0xb90d, 0x1f04, 0x41a0, 0x800, 0xe2d4, 0x4969, 0x0, 0x1);
        gbc.writeMem(0xb90d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x1f04);
        EXPECT(gbc.pc(), 0xb90e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb90d), 0xbd);
        // BD 02D4
        gbc.setState(0x8350, 0x3f14, 0xbe70, 0xa01b, 0x4364, 0x6a76, 0x1, 0x1);
        gbc.writeMem(0x8350, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x3f14);
        EXPECT(gbc.pc(), 0x8351);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8350), 0xbd);
        // BD 02D5
        gbc.setState(0x5fb0, 0xd19b, 0x6960, 0x1c9c, 0x8af9, 0xa067, 0x1, 0x1);
        gbc.writeMem(0x5fb0, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xd19b);
        EXPECT(gbc.pc(), 0x5fb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 02D6
        gbc.setState(0x8844, 0xae73, 0xb820, 0x2cac, 0x7320, 0x4dc7, 0x1, 0x1);
        gbc.writeMem(0x8844, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xae73);
        EXPECT(gbc.pc(), 0x8845);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8844), 0xbd);
        // BD 02D7
        gbc.setState(0xda40, 0xf888, 0xbf50, 0x31a3, 0xc296, 0x4d9f, 0x1, 0x0);
        gbc.writeMem(0xda40, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xf888);
        EXPECT(gbc.pc(), 0xda41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda40), 0xbd);
        // BD 02D8
        gbc.setState(0x86d8, 0xa603, 0x32d0, 0x1724, 0x9297, 0xb90c, 0x0, 0x1);
        gbc.writeMem(0x86d8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xa603);
        EXPECT(gbc.pc(), 0x86d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86d8), 0xbd);
        // BD 02D9
        gbc.setState(0x4d3a, 0x9823, 0x5790, 0x9f2b, 0x570c, 0xb5f5, 0x0, 0x0);
        gbc.writeMem(0x4d3a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x9823);
        EXPECT(gbc.pc(), 0x4d3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 02DA
        gbc.setState(0x72c1, 0x47c2, 0xa520, 0x5afe, 0x175, 0x1b57, 0x0, 0x1);
        gbc.writeMem(0x72c1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x47c2);
        EXPECT(gbc.pc(), 0x72c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 02DB
        gbc.setState(0x794c, 0xc889, 0x49b0, 0xfbc9, 0xea8a, 0x162e, 0x0, 0x0);
        gbc.writeMem(0x794c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xc889);
        EXPECT(gbc.pc(), 0x794d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 02DC
        gbc.setState(0x2512, 0xf05f, 0x3350, 0x327d, 0x4a70, 0xc053, 0x1, 0x0);
        gbc.writeMem(0x2512, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xf05f);
        EXPECT(gbc.pc(), 0x2513);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 02DE
        gbc.setState(0xe237, 0xf1d9, 0x86d0, 0x4185, 0xdfd2, 0xa406, 0x0, 0x1);
        gbc.writeMem(0xe237, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xf1d9);
        EXPECT(gbc.pc(), 0xe238);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe237), 0xbd);
        // BD 02E0
        gbc.setState(0x7cc8, 0xe60a, 0x9880, 0x7119, 0x1210, 0xc937, 0x1, 0x0);
        gbc.writeMem(0x7cc8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xe60a);
        EXPECT(gbc.pc(), 0x7cc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 02E1
        gbc.setState(0xab6a, 0x200c, 0x32a0, 0xeaa6, 0x7ee6, 0xf5f0, 0x0, 0x0);
        gbc.writeMem(0xab6a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x200c);
        EXPECT(gbc.pc(), 0xab6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab6a), 0xbd);
        // BD 02E2
        gbc.setState(0xa4f7, 0xac37, 0xa030, 0xe7a0, 0x7d48, 0xa592, 0x0, 0x1);
        gbc.writeMem(0xa4f7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xac37);
        EXPECT(gbc.pc(), 0xa4f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4f7), 0xbd);
        // BD 02E3
        gbc.setState(0xb5fb, 0xba68, 0x36a0, 0xb7f7, 0x3d7e, 0xf888, 0x1, 0x1);
        gbc.writeMem(0xb5fb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xba68);
        EXPECT(gbc.pc(), 0xb5fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5fb), 0xbd);
        // BD 02E4
        gbc.setState(0x93a8, 0xe4a1, 0xb0, 0x4ecc, 0xba92, 0xe4a8, 0x0, 0x1);
        gbc.writeMem(0x93a8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xe4a1);
        EXPECT(gbc.pc(), 0x93a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93a8), 0xbd);
        // BD 02E5
        gbc.setState(0x6798, 0xfe2d, 0x7fb0, 0xccb5, 0x20c7, 0x7bbd, 0x0, 0x1);
        gbc.writeMem(0x6798, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xfe2d);
        EXPECT(gbc.pc(), 0x6799);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 02E6
        gbc.setState(0x2c39, 0x3648, 0x8c40, 0x5f97, 0xe11b, 0xa83e, 0x0, 0x1);
        gbc.writeMem(0x2c39, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x3648);
        EXPECT(gbc.pc(), 0x2c3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 02E7
        gbc.setState(0xe79b, 0xdfe2, 0x9cd0, 0xd8e8, 0x60bd, 0x71ce, 0x0, 0x1);
        gbc.writeMem(0xe79b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xdfe2);
        EXPECT(gbc.pc(), 0xe79c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe79b), 0xbd);
        // BD 02E8
        gbc.setState(0x88e5, 0xb314, 0x2330, 0x4b38, 0x7ad3, 0x1f87, 0x0, 0x1);
        gbc.writeMem(0x88e5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xb314);
        EXPECT(gbc.pc(), 0x88e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88e5), 0xbd);
        // BD 02E9
        gbc.setState(0x360c, 0xd698, 0x8df0, 0x6663, 0x3f0f, 0x1f22, 0x1, 0x1);
        gbc.writeMem(0x360c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xd698);
        EXPECT(gbc.pc(), 0x360d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 02EA
        gbc.setState(0xc911, 0x7ef2, 0x4270, 0x9e96, 0x19ef, 0x92e7, 0x0, 0x0);
        gbc.writeMem(0xc911, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x7ef2);
        EXPECT(gbc.pc(), 0xc912);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc911), 0xbd);
        // BD 02EB
        gbc.setState(0xa98e, 0xba51, 0x5880, 0x87e2, 0xe8c3, 0xa763, 0x0, 0x1);
        gbc.writeMem(0xa98e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xba51);
        EXPECT(gbc.pc(), 0xa98f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa98e), 0xbd);
        // BD 02EC
        gbc.setState(0x2eda, 0x2bec, 0x2b90, 0xd2b5, 0x5e7b, 0xd465, 0x1, 0x0);
        gbc.writeMem(0x2eda, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x2bec);
        EXPECT(gbc.pc(), 0x2edb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 02EE
        gbc.setState(0x2784, 0x345, 0x24e0, 0xc381, 0x19bf, 0xe26d, 0x1, 0x1);
        gbc.writeMem(0x2784, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x345);
        EXPECT(gbc.pc(), 0x2785);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 02EF
        gbc.setState(0x848c, 0x2b89, 0x7420, 0x58a, 0xe91, 0x6f89, 0x0, 0x1);
        gbc.writeMem(0x848c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x2b89);
        EXPECT(gbc.pc(), 0x848d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x848c), 0xbd);
        // BD 02F0
        gbc.setState(0x598f, 0xc702, 0xcac0, 0x8129, 0x23bc, 0xf57e, 0x1, 0x0);
        gbc.writeMem(0x598f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xc702);
        EXPECT(gbc.pc(), 0x5990);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 02F1
        gbc.setState(0x3139, 0xa25, 0x6e80, 0x9ef2, 0xba7c, 0xd163, 0x0, 0x0);
        gbc.writeMem(0x3139, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xa25);
        EXPECT(gbc.pc(), 0x313a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 02F2
        gbc.setState(0x1739, 0xfd01, 0x4eb0, 0xae2d, 0x4b02, 0x6742, 0x0, 0x0);
        gbc.writeMem(0x1739, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xfd01);
        EXPECT(gbc.pc(), 0x173a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 02F3
        gbc.setState(0xdf5a, 0x672d, 0x5060, 0xa972, 0xdf93, 0xff7a, 0x0, 0x0);
        gbc.writeMem(0xdf5a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x672d);
        EXPECT(gbc.pc(), 0xdf5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf5a), 0xbd);
        // BD 02F4
        gbc.setState(0x26d9, 0xad60, 0x4150, 0x30ed, 0xf93b, 0x8381, 0x0, 0x0);
        gbc.writeMem(0x26d9, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xad60);
        EXPECT(gbc.pc(), 0x26da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 02F5
        gbc.setState(0x1a0f, 0x9d4e, 0xcdc0, 0xd006, 0x836a, 0x4f14, 0x1, 0x0);
        gbc.writeMem(0x1a0f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x9d4e);
        EXPECT(gbc.pc(), 0x1a10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 02F6
        gbc.setState(0xa8f1, 0x1477, 0xd970, 0xb82e, 0xf211, 0xafb0, 0x1, 0x1);
        gbc.writeMem(0xa8f1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x1477);
        EXPECT(gbc.pc(), 0xa8f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8f1), 0xbd);
        // BD 02F7
        gbc.setState(0x7796, 0xbd49, 0xd190, 0x77f5, 0x4755, 0xfa36, 0x1, 0x0);
        gbc.writeMem(0x7796, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xbd49);
        EXPECT(gbc.pc(), 0x7797);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 02F8
        gbc.setState(0xe5d6, 0xfe8a, 0x3250, 0xf77a, 0x5fb9, 0xf77, 0x0, 0x0);
        gbc.writeMem(0xe5d6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xfe8a);
        EXPECT(gbc.pc(), 0xe5d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5d6), 0xbd);
        // BD 02F9
        gbc.setState(0xe15f, 0xbebc, 0x9e80, 0x4a1d, 0xbc14, 0x24a7, 0x0, 0x0);
        gbc.writeMem(0xe15f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xbebc);
        EXPECT(gbc.pc(), 0xe160);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe15f), 0xbd);
        // BD 02FA
        gbc.setState(0xd07f, 0x49f7, 0xf910, 0xd83f, 0x6604, 0x5afe, 0x0, 0x1);
        gbc.writeMem(0xd07f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x49f7);
        EXPECT(gbc.pc(), 0xd080);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd07f), 0xbd);
        // BD 02FB
        gbc.setState(0x4499, 0xe454, 0x6c20, 0xc716, 0x6c87, 0x54a6, 0x1, 0x1);
        gbc.writeMem(0x4499, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xe454);
        EXPECT(gbc.pc(), 0x449a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 02FC
        gbc.setState(0x8095, 0xd10a, 0x110, 0xfca4, 0xcb5b, 0xbc8c, 0x1, 0x0);
        gbc.writeMem(0x8095, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xd10a);
        EXPECT(gbc.pc(), 0x8096);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8095), 0xbd);
        // BD 02FD
        gbc.setState(0x9e59, 0x719, 0xc30, 0x9265, 0xb243, 0xc55a, 0x0, 0x1);
        gbc.writeMem(0x9e59, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x719);
        EXPECT(gbc.pc(), 0x9e5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e59), 0xbd);
        // BD 02FE
        gbc.setState(0xba9e, 0x2334, 0x99c0, 0x1da5, 0x7e5b, 0xad91, 0x1, 0x0);
        gbc.writeMem(0xba9e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x2334);
        EXPECT(gbc.pc(), 0xba9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba9e), 0xbd);
        // BD 02FF
        gbc.setState(0xa772, 0x757f, 0x5d60, 0x1aad, 0x9ed2, 0x5d47, 0x1, 0x0);
        gbc.writeMem(0xa772, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x757f);
        EXPECT(gbc.pc(), 0xa773);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa772), 0xbd);
        // BD 0300
        gbc.setState(0x69c1, 0xd951, 0xa170, 0x6263, 0x3e, 0xd798, 0x1, 0x0);
        gbc.writeMem(0x69c1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xd951);
        EXPECT(gbc.pc(), 0x69c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0301
        gbc.setState(0x62eb, 0x3a47, 0x31f0, 0xe5fa, 0xc642, 0x20a0, 0x0, 0x0);
        gbc.writeMem(0x62eb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x3a47);
        EXPECT(gbc.pc(), 0x62ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0302
        gbc.setState(0x4f3, 0x851e, 0x24b0, 0x4a00, 0x877e, 0x371, 0x0, 0x0);
        gbc.writeMem(0x4f3, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x851e);
        EXPECT(gbc.pc(), 0x4f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0303
        gbc.setState(0x2fcf, 0xd902, 0x9db0, 0x2ea9, 0xbddf, 0xbedd, 0x0, 0x0);
        gbc.writeMem(0x2fcf, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd902);
        EXPECT(gbc.pc(), 0x2fd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0305
        gbc.setState(0x348f, 0x2f59, 0x60d0, 0x6c99, 0xd03f, 0x1ba3, 0x0, 0x1);
        gbc.writeMem(0x348f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x2f59);
        EXPECT(gbc.pc(), 0x3490);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0306
        gbc.setState(0x8707, 0xf614, 0x5cf0, 0xc62, 0x5881, 0x3b65, 0x1, 0x1);
        gbc.writeMem(0x8707, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xf614);
        EXPECT(gbc.pc(), 0x8708);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8707), 0xbd);
        // BD 0307
        gbc.setState(0x17bd, 0x683c, 0xbed0, 0x929c, 0xf9ec, 0x5335, 0x1, 0x1);
        gbc.writeMem(0x17bd, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x683c);
        EXPECT(gbc.pc(), 0x17be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0308
        gbc.setState(0x769e, 0x4545, 0x4780, 0xee11, 0xec06, 0x4a2b, 0x1, 0x1);
        gbc.writeMem(0x769e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x4545);
        EXPECT(gbc.pc(), 0x769f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0309
        gbc.setState(0x5978, 0xbd22, 0x2b0, 0x2e48, 0x8a09, 0x968f, 0x1, 0x1);
        gbc.writeMem(0x5978, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xbd22);
        EXPECT(gbc.pc(), 0x5979);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 030A
        gbc.setState(0xab8b, 0x43b9, 0xea00, 0xdcd4, 0x3c60, 0xeea2, 0x1, 0x1);
        gbc.writeMem(0xab8b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x43b9);
        EXPECT(gbc.pc(), 0xab8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab8b), 0xbd);
        // BD 030B
        gbc.setState(0x6dbd, 0xe557, 0xe640, 0x5e41, 0x8495, 0x651b, 0x0, 0x0);
        gbc.writeMem(0x6dbd, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xe557);
        EXPECT(gbc.pc(), 0x6dbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 030C
        gbc.setState(0xa0e, 0x9563, 0x8410, 0x36fc, 0x1994, 0xded9, 0x1, 0x1);
        gbc.writeMem(0xa0e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x9563);
        EXPECT(gbc.pc(), 0xa0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 030D
        gbc.setState(0x5d27, 0x6ed5, 0xe840, 0x2872, 0x88f7, 0xb314, 0x0, 0x1);
        gbc.writeMem(0x5d27, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x6ed5);
        EXPECT(gbc.pc(), 0x5d28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 030E
        gbc.setState(0x9ccc, 0xc869, 0x3400, 0x828, 0x68a2, 0x96b7, 0x1, 0x0);
        gbc.writeMem(0x9ccc, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xc869);
        EXPECT(gbc.pc(), 0x9ccd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ccc), 0xbd);
        // BD 030F
        gbc.setState(0x15f6, 0xf176, 0x2870, 0xf688, 0xad1c, 0xac44, 0x0, 0x1);
        gbc.writeMem(0x15f6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xf176);
        EXPECT(gbc.pc(), 0x15f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0310
        gbc.setState(0x78ea, 0x523b, 0x1ef0, 0xb7c, 0xa6a5, 0xad3b, 0x1, 0x1);
        gbc.writeMem(0x78ea, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x523b);
        EXPECT(gbc.pc(), 0x78eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0311
        gbc.setState(0x26eb, 0xa26e, 0x81c0, 0x2957, 0xce28, 0x9e1d, 0x0, 0x1);
        gbc.writeMem(0x26eb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xa26e);
        EXPECT(gbc.pc(), 0x26ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0312
        gbc.setState(0x13e4, 0x1a47, 0x51d0, 0xf7ef, 0xd328, 0x8d15, 0x1, 0x0);
        gbc.writeMem(0x13e4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x1a47);
        EXPECT(gbc.pc(), 0x13e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0313
        gbc.setState(0x5fa6, 0xee23, 0x82a0, 0x59d6, 0x172, 0x1aff, 0x0, 0x0);
        gbc.writeMem(0x5fa6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xee23);
        EXPECT(gbc.pc(), 0x5fa7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0314
        gbc.setState(0xb4b8, 0x7d5c, 0x58a0, 0x64dc, 0x6d09, 0x685e, 0x1, 0x0);
        gbc.writeMem(0xb4b8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x7d5c);
        EXPECT(gbc.pc(), 0xb4b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4b8), 0xbd);
        // BD 0315
        gbc.setState(0x4d68, 0x6c21, 0x6cc0, 0xc413, 0xcf27, 0x41ae, 0x1, 0x1);
        gbc.writeMem(0x4d68, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x6c21);
        EXPECT(gbc.pc(), 0x4d69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0316
        gbc.setState(0x4256, 0xa89d, 0x7180, 0xcf52, 0xb1be, 0x903f, 0x0, 0x1);
        gbc.writeMem(0x4256, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa89d);
        EXPECT(gbc.pc(), 0x4257);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0317
        gbc.setState(0xb24e, 0x889, 0x430, 0xff06, 0x2a7a, 0x79e7, 0x0, 0x1);
        gbc.writeMem(0xb24e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x889);
        EXPECT(gbc.pc(), 0xb24f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb24e), 0xbd);
        // BD 0318
        gbc.setState(0x6c49, 0x4ddd, 0x4b10, 0xeee8, 0xd5ab, 0x2d08, 0x1, 0x1);
        gbc.writeMem(0x6c49, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x4ddd);
        EXPECT(gbc.pc(), 0x6c4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0319
        gbc.setState(0x972, 0x46be, 0x1460, 0x6fcd, 0x353e, 0xe36a, 0x0, 0x1);
        gbc.writeMem(0x972, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x46be);
        EXPECT(gbc.pc(), 0x973);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 031A
        gbc.setState(0xca31, 0xbe44, 0x6800, 0xb910, 0x962c, 0xea68, 0x0, 0x0);
        gbc.writeMem(0xca31, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xbe44);
        EXPECT(gbc.pc(), 0xca32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca31), 0xbd);
        // BD 031B
        gbc.setState(0x64ff, 0xe7ef, 0x4d70, 0x56c, 0x157a, 0x6eae, 0x1, 0x0);
        gbc.writeMem(0x64ff, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xe7ef);
        EXPECT(gbc.pc(), 0x6500);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 031D
        gbc.setState(0x7634, 0x6833, 0xc470, 0xcaf1, 0x1b89, 0x4da9, 0x0, 0x1);
        gbc.writeMem(0x7634, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x6833);
        EXPECT(gbc.pc(), 0x7635);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 031E
        gbc.setState(0x3ab5, 0x5318, 0xa00, 0x67a8, 0x64fb, 0x37fd, 0x0, 0x0);
        gbc.writeMem(0x3ab5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x5318);
        EXPECT(gbc.pc(), 0x3ab6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 031F
        gbc.setState(0x7036, 0x5763, 0x7030, 0x38e2, 0x591a, 0x1d1e, 0x0, 0x0);
        gbc.writeMem(0x7036, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x5763);
        EXPECT(gbc.pc(), 0x7037);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0320
        gbc.setState(0x5fc1, 0x39d0, 0x1210, 0x140a, 0xfb20, 0x7da8, 0x0, 0x1);
        gbc.writeMem(0x5fc1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x39d0);
        EXPECT(gbc.pc(), 0x5fc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0321
        gbc.setState(0x817b, 0x2e56, 0x5040, 0x8366, 0x86e3, 0x79f7, 0x0, 0x1);
        gbc.writeMem(0x817b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x2e56);
        EXPECT(gbc.pc(), 0x817c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x817b), 0xbd);
        // BD 0322
        gbc.setState(0x839c, 0xb101, 0x40, 0x787e, 0xb8f3, 0x7fe5, 0x0, 0x1);
        gbc.writeMem(0x839c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xb101);
        EXPECT(gbc.pc(), 0x839d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x839c), 0xbd);
        // BD 0323
        gbc.setState(0xc942, 0x7ed1, 0xf70, 0x270b, 0xd37f, 0xd02f, 0x0, 0x1);
        gbc.writeMem(0xc942, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x7ed1);
        EXPECT(gbc.pc(), 0xc943);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc942), 0xbd);
        // BD 0324
        gbc.setState(0xca5, 0xab09, 0x9d50, 0xc072, 0x8a7d, 0x2a13, 0x0, 0x1);
        gbc.writeMem(0xca5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xab09);
        EXPECT(gbc.pc(), 0xca6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0326
        gbc.setState(0x21ff, 0xc15f, 0x2070, 0x377e, 0xa4ae, 0x7385, 0x0, 0x0);
        gbc.writeMem(0x21ff, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc15f);
        EXPECT(gbc.pc(), 0x2200);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0327
        gbc.setState(0x6b0c, 0x72bc, 0x4830, 0x5654, 0xa5fd, 0x5764, 0x0, 0x0);
        gbc.writeMem(0x6b0c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x72bc);
        EXPECT(gbc.pc(), 0x6b0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0328
        gbc.setState(0x79ae, 0x1b8d, 0x5bf0, 0x287e, 0xc8aa, 0xdab0, 0x0, 0x0);
        gbc.writeMem(0x79ae, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x1b8d);
        EXPECT(gbc.pc(), 0x79af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0329
        gbc.setState(0x30d6, 0xb4d5, 0x6950, 0x9b2b, 0x79b3, 0x8721, 0x1, 0x1);
        gbc.writeMem(0x30d6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xb4d5);
        EXPECT(gbc.pc(), 0x30d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 032A
        gbc.setState(0xc9ee, 0x294, 0xeb50, 0xe6ec, 0x19e7, 0x9652, 0x0, 0x0);
        gbc.writeMem(0xc9ee, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x294);
        EXPECT(gbc.pc(), 0xc9ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9ee), 0xbd);
        // BD 032B
        gbc.setState(0x5b16, 0x7daf, 0x600, 0x188f, 0x3f10, 0xac97, 0x1, 0x1);
        gbc.writeMem(0x5b16, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x7daf);
        EXPECT(gbc.pc(), 0x5b17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 032C
        gbc.setState(0xbffe, 0x5e61, 0xb80, 0xed79, 0x9d74, 0x6802, 0x1, 0x0);
        gbc.writeMem(0xbffe, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x5e61);
        EXPECT(gbc.pc(), 0xbfff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbffe), 0xbd);
        // BD 032D
        gbc.setState(0x6af0, 0xcf85, 0xdca0, 0x37bd, 0xe633, 0xc133, 0x1, 0x0);
        gbc.writeMem(0x6af0, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xcf85);
        EXPECT(gbc.pc(), 0x6af1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 032E
        gbc.setState(0x9a5, 0xe8c4, 0x6710, 0x54d4, 0x34f9, 0xa1ca, 0x1, 0x1);
        gbc.writeMem(0x9a5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xe8c4);
        EXPECT(gbc.pc(), 0x9a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 032F
        gbc.setState(0x7f66, 0xd80a, 0x2440, 0x2d57, 0x3de0, 0xbfbc, 0x0, 0x1);
        gbc.writeMem(0x7f66, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xd80a);
        EXPECT(gbc.pc(), 0x7f67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0330
        gbc.setState(0x2621, 0xd59d, 0x3ba0, 0x8786, 0x65a9, 0xdc7e, 0x1, 0x1);
        gbc.writeMem(0x2621, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xd59d);
        EXPECT(gbc.pc(), 0x2622);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0331
        gbc.setState(0x7492, 0x4fb4, 0x6870, 0xfa8a, 0x6834, 0xcf2c, 0x1, 0x1);
        gbc.writeMem(0x7492, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x4fb4);
        EXPECT(gbc.pc(), 0x7493);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0332
        gbc.setState(0x5be, 0xbfc0, 0x5a10, 0x7043, 0xea24, 0x5096, 0x1, 0x0);
        gbc.writeMem(0x5be, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xbfc0);
        EXPECT(gbc.pc(), 0x5bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0333
        gbc.setState(0x66a2, 0xe766, 0xa0c0, 0x7808, 0x333b, 0x16a9, 0x1, 0x0);
        gbc.writeMem(0x66a2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xe766);
        EXPECT(gbc.pc(), 0x66a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0334
        gbc.setState(0xa5f9, 0xedac, 0xea40, 0x157a, 0x7cbf, 0x86bc, 0x1, 0x1);
        gbc.writeMem(0xa5f9, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xedac);
        EXPECT(gbc.pc(), 0xa5fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5f9), 0xbd);
        // BD 0335
        gbc.setState(0x36cf, 0x99b0, 0x4740, 0x6fd4, 0xccbd, 0xe717, 0x0, 0x0);
        gbc.writeMem(0x36cf, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x99b0);
        EXPECT(gbc.pc(), 0x36d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0336
        gbc.setState(0x7d8f, 0xa27d, 0xa020, 0xa4, 0xb541, 0xbca9, 0x0, 0x0);
        gbc.writeMem(0x7d8f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xa27d);
        EXPECT(gbc.pc(), 0x7d90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0337
        gbc.setState(0x6519, 0x116b, 0x8a0, 0x670d, 0x41f2, 0x19b6, 0x1, 0x0);
        gbc.writeMem(0x6519, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x116b);
        EXPECT(gbc.pc(), 0x651a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0338
        gbc.setState(0x65b5, 0x6e03, 0xe970, 0xa246, 0x9ad1, 0x3dc9, 0x1, 0x1);
        gbc.writeMem(0x65b5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x6e03);
        EXPECT(gbc.pc(), 0x65b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0339
        gbc.setState(0xc004, 0x12b4, 0xa720, 0xc191, 0xf136, 0xb1f4, 0x0, 0x0);
        gbc.writeMem(0xc004, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x12b4);
        EXPECT(gbc.pc(), 0xc005);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc004), 0xbd);
        // BD 033A
        gbc.setState(0x370, 0x62ac, 0x14d0, 0xeb64, 0xa7a8, 0x6c3c, 0x1, 0x0);
        gbc.writeMem(0x370, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x62ac);
        EXPECT(gbc.pc(), 0x371);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 033C
        gbc.setState(0xc16c, 0x6dbe, 0x6d70, 0xeeac, 0x300, 0x7d37, 0x1, 0x0);
        gbc.writeMem(0xc16c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x6dbe);
        EXPECT(gbc.pc(), 0xc16d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc16c), 0xbd);
        // BD 033D
        gbc.setState(0x37c8, 0x162c, 0x65f0, 0x113e, 0x99a7, 0xfe03, 0x1, 0x1);
        gbc.writeMem(0x37c8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x162c);
        EXPECT(gbc.pc(), 0x37c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 033E
        gbc.setState(0xb34b, 0x1b61, 0x6db0, 0x8b7a, 0xb80b, 0x7f8e, 0x0, 0x0);
        gbc.writeMem(0xb34b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x1b61);
        EXPECT(gbc.pc(), 0xb34c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb34b), 0xbd);
        // BD 033F
        gbc.setState(0x7d76, 0xb3d1, 0xd8f0, 0xb1c2, 0xd241, 0xa6ba, 0x0, 0x0);
        gbc.writeMem(0x7d76, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xb3d1);
        EXPECT(gbc.pc(), 0x7d77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0340
        gbc.setState(0xb6d4, 0x96f2, 0x57a0, 0x10a2, 0x3401, 0x2a5b, 0x0, 0x0);
        gbc.writeMem(0xb6d4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x96f2);
        EXPECT(gbc.pc(), 0xb6d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6d4), 0xbd);
        // BD 0341
        gbc.setState(0xc599, 0xf95, 0xb890, 0xb61f, 0x96e1, 0x32d3, 0x0, 0x1);
        gbc.writeMem(0xc599, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xf95);
        EXPECT(gbc.pc(), 0xc59a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc599), 0xbd);
        // BD 0342
        gbc.setState(0xdb76, 0x32cc, 0x1a90, 0xce2c, 0xb9df, 0xd0c9, 0x0, 0x0);
        gbc.writeMem(0xdb76, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x32cc);
        EXPECT(gbc.pc(), 0xdb77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb76), 0xbd);
        // BD 0343
        gbc.setState(0x5e7d, 0xd52, 0xdb70, 0xb13b, 0xbe8f, 0x6ebe, 0x0, 0x0);
        gbc.writeMem(0x5e7d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xd52);
        EXPECT(gbc.pc(), 0x5e7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0344
        gbc.setState(0x7508, 0x3d70, 0x39d0, 0x80bc, 0x7eda, 0xc205, 0x0, 0x1);
        gbc.writeMem(0x7508, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x3d70);
        EXPECT(gbc.pc(), 0x7509);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0345
        gbc.setState(0x4492, 0xa85, 0x6860, 0xbb69, 0xc8fb, 0xcbf, 0x1, 0x1);
        gbc.writeMem(0x4492, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xa85);
        EXPECT(gbc.pc(), 0x4493);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0346
        gbc.setState(0x68, 0x358e, 0x3480, 0xf01b, 0x653, 0x639e, 0x0, 0x0);
        gbc.writeMem(0x68, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x358e);
        EXPECT(gbc.pc(), 0x69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0347
        gbc.setState(0xe90, 0x2831, 0x4b30, 0xf9a1, 0xe9a, 0x5847, 0x1, 0x1);
        gbc.writeMem(0xe90, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x2831);
        EXPECT(gbc.pc(), 0xe91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0348
        gbc.setState(0x4da4, 0x9e56, 0x36f0, 0x4290, 0xe798, 0x34a9, 0x0, 0x1);
        gbc.writeMem(0x4da4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x9e56);
        EXPECT(gbc.pc(), 0x4da5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0349
        gbc.setState(0x4dc3, 0x9026, 0x8330, 0x341e, 0x23ac, 0x2163, 0x1, 0x0);
        gbc.writeMem(0x4dc3, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x9026);
        EXPECT(gbc.pc(), 0x4dc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 034A
        gbc.setState(0x196d, 0xd67c, 0x7b30, 0xd99f, 0x71ae, 0xa0f2, 0x1, 0x0);
        gbc.writeMem(0x196d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xd67c);
        EXPECT(gbc.pc(), 0x196e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 034B
        gbc.setState(0xb88, 0x795b, 0xf740, 0x62c5, 0x866c, 0xb0bb, 0x1, 0x1);
        gbc.writeMem(0xb88, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x795b);
        EXPECT(gbc.pc(), 0xb89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 034C
        gbc.setState(0x3269, 0x9300, 0xeae0, 0x47d5, 0xe3aa, 0x37ce, 0x1, 0x1);
        gbc.writeMem(0x3269, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x9300);
        EXPECT(gbc.pc(), 0x326a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 034D
        gbc.setState(0x85fd, 0x3314, 0xf390, 0x5d8e, 0xb916, 0xe533, 0x0, 0x0);
        gbc.writeMem(0x85fd, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x3314);
        EXPECT(gbc.pc(), 0x85fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85fd), 0xbd);
        // BD 034E
        gbc.setState(0xac5d, 0x8d7d, 0x9000, 0x328, 0x87a8, 0x4788, 0x1, 0x0);
        gbc.writeMem(0xac5d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x8d7d);
        EXPECT(gbc.pc(), 0xac5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac5d), 0xbd);
        // BD 034F
        gbc.setState(0x1462, 0x8da, 0x8750, 0x531, 0xa6b8, 0x70cb, 0x0, 0x1);
        gbc.writeMem(0x1462, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x8da);
        EXPECT(gbc.pc(), 0x1463);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0350
        gbc.setState(0xb6ee, 0xcbc6, 0xd20, 0x6735, 0x8825, 0x9150, 0x0, 0x0);
        gbc.writeMem(0xb6ee, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xcbc6);
        EXPECT(gbc.pc(), 0xb6ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6ee), 0xbd);
        // BD 0351
        gbc.setState(0x82a0, 0xe7a6, 0xa1d0, 0xb41c, 0x4758, 0xe4d, 0x1, 0x0);
        gbc.writeMem(0x82a0, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xe7a6);
        EXPECT(gbc.pc(), 0x82a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82a0), 0xbd);
        // BD 0352
        gbc.setState(0x4174, 0x825b, 0xf590, 0x19e5, 0xc03b, 0x10c2, 0x0, 0x0);
        gbc.writeMem(0x4174, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x825b);
        EXPECT(gbc.pc(), 0x4175);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0353
        gbc.setState(0x3c4d, 0x3800, 0x5da0, 0xc199, 0xae0d, 0x9394, 0x1, 0x0);
        gbc.writeMem(0x3c4d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x3800);
        EXPECT(gbc.pc(), 0x3c4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0354
        gbc.setState(0xc42f, 0x9ebf, 0x3540, 0xf9c8, 0xacda, 0x1a1c, 0x1, 0x1);
        gbc.writeMem(0xc42f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x9ebf);
        EXPECT(gbc.pc(), 0xc430);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc42f), 0xbd);
        // BD 0355
        gbc.setState(0xe350, 0xcc51, 0xff70, 0x1b11, 0x2af3, 0x113d, 0x0, 0x1);
        gbc.writeMem(0xe350, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xcc51);
        EXPECT(gbc.pc(), 0xe351);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe350), 0xbd);
        // BD 0356
        gbc.setState(0xd121, 0x1bed, 0xfa70, 0x79ac, 0xdf9f, 0x52cd, 0x0, 0x0);
        gbc.writeMem(0xd121, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x1bed);
        EXPECT(gbc.pc(), 0xd122);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd121), 0xbd);
        // BD 0357
        gbc.setState(0x2fdd, 0xb3fc, 0x90d0, 0x3dc8, 0x18a1, 0x56ac, 0x0, 0x0);
        gbc.writeMem(0x2fdd, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xb3fc);
        EXPECT(gbc.pc(), 0x2fde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0358
        gbc.setState(0x95a8, 0xa226, 0xd580, 0x6423, 0xe595, 0xc4cf, 0x1, 0x1);
        gbc.writeMem(0x95a8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xa226);
        EXPECT(gbc.pc(), 0x95a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95a8), 0xbd);
        // BD 0359
        gbc.setState(0x8667, 0xd561, 0x2620, 0x8e8f, 0x4ce8, 0x3ee6, 0x0, 0x1);
        gbc.writeMem(0x8667, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xd561);
        EXPECT(gbc.pc(), 0x8668);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8667), 0xbd);
        // BD 035A
        gbc.setState(0x4c62, 0xc829, 0x4300, 0xa732, 0x72fc, 0xae10, 0x0, 0x0);
        gbc.writeMem(0x4c62, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xc829);
        EXPECT(gbc.pc(), 0x4c63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 035B
        gbc.setState(0xa3d4, 0x5ac9, 0x9160, 0x75f3, 0xce91, 0x3079, 0x0, 0x1);
        gbc.writeMem(0xa3d4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x5ac9);
        EXPECT(gbc.pc(), 0xa3d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3d4), 0xbd);
        // BD 035C
        gbc.setState(0x440c, 0x3aff, 0xea10, 0xe38a, 0x3d65, 0xa580, 0x1, 0x0);
        gbc.writeMem(0x440c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x3aff);
        EXPECT(gbc.pc(), 0x440d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 035E
        gbc.setState(0xe3cf, 0x16ed, 0x1f70, 0x6ca6, 0xed03, 0xf043, 0x0, 0x0);
        gbc.writeMem(0xe3cf, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x16ed);
        EXPECT(gbc.pc(), 0xe3d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3cf), 0xbd);
        // BD 035F
        gbc.setState(0x699e, 0x4864, 0x1220, 0x8d02, 0x43cf, 0x626b, 0x0, 0x1);
        gbc.writeMem(0x699e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x4864);
        EXPECT(gbc.pc(), 0x699f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0360
        gbc.setState(0x318c, 0x7986, 0x4760, 0x21fb, 0x3a, 0xbb4c, 0x0, 0x0);
        gbc.writeMem(0x318c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x7986);
        EXPECT(gbc.pc(), 0x318d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0361
        gbc.setState(0x5660, 0x41b4, 0x10f0, 0x73, 0x4cb6, 0xadcf, 0x1, 0x0);
        gbc.writeMem(0x5660, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x41b4);
        EXPECT(gbc.pc(), 0x5661);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0362
        gbc.setState(0xcdea, 0xb6bc, 0x2ec0, 0xd57, 0xfe7a, 0xfd1e, 0x1, 0x1);
        gbc.writeMem(0xcdea, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xb6bc);
        EXPECT(gbc.pc(), 0xcdeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdea), 0xbd);
        // BD 0363
        gbc.setState(0x1369, 0x552a, 0x8580, 0x2ea3, 0xab5d, 0x1879, 0x0, 0x1);
        gbc.writeMem(0x1369, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x552a);
        EXPECT(gbc.pc(), 0x136a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 0364
        gbc.setState(0xbcda, 0x1d2d, 0x2e90, 0x159c, 0xd254, 0xdc16, 0x0, 0x1);
        gbc.writeMem(0xbcda, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x1d2d);
        EXPECT(gbc.pc(), 0xbcdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcda), 0xbd);
        // BD 0365
        gbc.setState(0xa73, 0x7ccb, 0xced0, 0x57f, 0x506, 0xbf03, 0x1, 0x1);
        gbc.writeMem(0xa73, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x7ccb);
        EXPECT(gbc.pc(), 0xa74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0366
        gbc.setState(0x672a, 0xfa8c, 0xbe0, 0x8795, 0xe89a, 0xc12c, 0x0, 0x0);
        gbc.writeMem(0x672a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xfa8c);
        EXPECT(gbc.pc(), 0x672b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0367
        gbc.setState(0x222a, 0xa5b4, 0xb40, 0xac17, 0x750a, 0xcf4a, 0x0, 0x1);
        gbc.writeMem(0x222a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xa5b4);
        EXPECT(gbc.pc(), 0x222b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0368
        gbc.setState(0x22a3, 0x76b5, 0x8510, 0x5819, 0x32b3, 0xfded, 0x1, 0x1);
        gbc.writeMem(0x22a3, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x76b5);
        EXPECT(gbc.pc(), 0x22a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0369
        gbc.setState(0xc88c, 0x8dd1, 0x4ce0, 0x68b0, 0xe62e, 0x5789, 0x0, 0x0);
        gbc.writeMem(0xc88c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x8dd1);
        EXPECT(gbc.pc(), 0xc88d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc88c), 0xbd);
        // BD 036A
        gbc.setState(0xe48d, 0xedf5, 0xbdb0, 0xed87, 0x574a, 0x5a12, 0x0, 0x1);
        gbc.writeMem(0xe48d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xedf5);
        EXPECT(gbc.pc(), 0xe48e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe48d), 0xbd);
        // BD 036B
        gbc.setState(0x2254, 0x4be4, 0xe980, 0x63e7, 0x1e83, 0xe436, 0x1, 0x1);
        gbc.writeMem(0x2254, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x4be4);
        EXPECT(gbc.pc(), 0x2255);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 036C
        gbc.setState(0xa771, 0x3299, 0x1ad0, 0xa576, 0x36c4, 0x5c3b, 0x1, 0x1);
        gbc.writeMem(0xa771, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x3299);
        EXPECT(gbc.pc(), 0xa772);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa771), 0xbd);
        // BD 036D
        gbc.setState(0xd655, 0xd040, 0xc530, 0x9f18, 0x28a3, 0xdc01, 0x1, 0x0);
        gbc.writeMem(0xd655, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xd040);
        EXPECT(gbc.pc(), 0xd656);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd655), 0xbd);
        // BD 036E
        gbc.setState(0x3d69, 0xc0a6, 0xca60, 0x1bbd, 0x5d6b, 0xd505, 0x1, 0x1);
        gbc.writeMem(0x3d69, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xc0a6);
        EXPECT(gbc.pc(), 0x3d6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 036F
        gbc.setState(0xef7e, 0x9b73, 0xfbc0, 0x7a7e, 0xb6a9, 0xed12, 0x1, 0x1);
        gbc.writeMem(0xef7e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x9b73);
        EXPECT(gbc.pc(), 0xef7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef7e), 0xbd);
        // BD 0370
        gbc.setState(0xdbba, 0xe8c2, 0xf630, 0xcb8f, 0x293c, 0xb169, 0x0, 0x0);
        gbc.writeMem(0xdbba, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe8c2);
        EXPECT(gbc.pc(), 0xdbbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbba), 0xbd);
        // BD 0371
        gbc.setState(0x8aa7, 0x12fb, 0x5f20, 0x4f04, 0xab89, 0x24fc, 0x1, 0x0);
        gbc.writeMem(0x8aa7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x12fb);
        EXPECT(gbc.pc(), 0x8aa8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8aa7), 0xbd);
        // BD 0372
        gbc.setState(0x56a3, 0xa9c7, 0x8cd0, 0x15ad, 0x985b, 0x32f7, 0x1, 0x1);
        gbc.writeMem(0x56a3, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xa9c7);
        EXPECT(gbc.pc(), 0x56a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0373
        gbc.setState(0xecee, 0xcf2, 0xc990, 0x570d, 0x482c, 0x336b, 0x1, 0x1);
        gbc.writeMem(0xecee, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xcf2);
        EXPECT(gbc.pc(), 0xecef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecee), 0xbd);
        // BD 0374
        gbc.setState(0xd570, 0xe7ed, 0x5970, 0x294, 0x1ec3, 0xa579, 0x0, 0x0);
        gbc.writeMem(0xd570, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xe7ed);
        EXPECT(gbc.pc(), 0xd571);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd570), 0xbd);
        // BD 0376
        gbc.setState(0x5832, 0xba10, 0xeba0, 0xbd5, 0xd23, 0x1128, 0x0, 0x0);
        gbc.writeMem(0x5832, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xba10);
        EXPECT(gbc.pc(), 0x5833);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0377
        gbc.setState(0x9dc6, 0xd353, 0x9c40, 0xe19e, 0x45cd, 0x8fee, 0x1, 0x1);
        gbc.writeMem(0x9dc6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xd353);
        EXPECT(gbc.pc(), 0x9dc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dc6), 0xbd);
        // BD 0378
        gbc.setState(0xc2ec, 0x5224, 0x4b60, 0x9007, 0x7290, 0x2981, 0x1, 0x0);
        gbc.writeMem(0xc2ec, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x5224);
        EXPECT(gbc.pc(), 0xc2ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2ec), 0xbd);
        // BD 0379
        gbc.setState(0x203b, 0x63f, 0x2480, 0x4d4a, 0xf3f9, 0x7577, 0x0, 0x0);
        gbc.writeMem(0x203b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x63f);
        EXPECT(gbc.pc(), 0x203c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 037A
        gbc.setState(0xd22b, 0x938, 0x5730, 0x57b9, 0x2f38, 0xda83, 0x1, 0x1);
        gbc.writeMem(0xd22b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x938);
        EXPECT(gbc.pc(), 0xd22c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd22b), 0xbd);
        // BD 037B
        gbc.setState(0x2ff, 0xac8a, 0x8890, 0xa558, 0x5db3, 0x5aa3, 0x0, 0x0);
        gbc.writeMem(0x2ff, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xac8a);
        EXPECT(gbc.pc(), 0x300);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 037C
        gbc.setState(0x4d42, 0x42e0, 0xfc30, 0xbcac, 0x6159, 0x5695, 0x1, 0x0);
        gbc.writeMem(0x4d42, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x42e0);
        EXPECT(gbc.pc(), 0x4d43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 037E
        gbc.setState(0x7c46, 0x82e9, 0xf6d0, 0x8ad7, 0x24aa, 0x6f4, 0x0, 0x1);
        gbc.writeMem(0x7c46, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x82e9);
        EXPECT(gbc.pc(), 0x7c47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 037F
        gbc.setState(0x210a, 0xe0f3, 0xeb30, 0xf4e8, 0xa0f6, 0x6511, 0x1, 0x1);
        gbc.writeMem(0x210a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xe0f3);
        EXPECT(gbc.pc(), 0x210b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0380
        gbc.setState(0x203f, 0xd22, 0x4950, 0xbcb7, 0x39d7, 0xd139, 0x1, 0x1);
        gbc.writeMem(0x203f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xd22);
        EXPECT(gbc.pc(), 0x2040);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0381
        gbc.setState(0x70a8, 0xae8b, 0x5320, 0x1e21, 0xa21e, 0x21b7, 0x1, 0x0);
        gbc.writeMem(0x70a8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xae8b);
        EXPECT(gbc.pc(), 0x70a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0382
        gbc.setState(0x8d7d, 0xa8cd, 0xe6c0, 0x91df, 0x1500, 0x122b, 0x0, 0x1);
        gbc.writeMem(0x8d7d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xa8cd);
        EXPECT(gbc.pc(), 0x8d7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d7d), 0xbd);
        // BD 0383
        gbc.setState(0x430a, 0x9528, 0x69f0, 0x9dac, 0x8b0e, 0x1625, 0x0, 0x0);
        gbc.writeMem(0x430a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x9528);
        EXPECT(gbc.pc(), 0x430b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0384
        gbc.setState(0x9cf8, 0x688b, 0x7d40, 0x92cb, 0xc4a5, 0x8429, 0x0, 0x1);
        gbc.writeMem(0x9cf8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x688b);
        EXPECT(gbc.pc(), 0x9cf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cf8), 0xbd);
        // BD 0386
        gbc.setState(0xdc47, 0xb3fe, 0xf610, 0x201b, 0x1c58, 0xd317, 0x1, 0x0);
        gbc.writeMem(0xdc47, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xb3fe);
        EXPECT(gbc.pc(), 0xdc48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc47), 0xbd);
        // BD 0387
        gbc.setState(0x4097, 0x3822, 0x2920, 0xf344, 0xb600, 0x51e2, 0x1, 0x1);
        gbc.writeMem(0x4097, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x3822);
        EXPECT(gbc.pc(), 0x4098);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 0388
        gbc.setState(0xd232, 0xac1c, 0x7170, 0xe099, 0x4084, 0xd7bd, 0x0, 0x0);
        gbc.writeMem(0xd232, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xac1c);
        EXPECT(gbc.pc(), 0xd233);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd232), 0xbd);
        // BD 0389
        gbc.setState(0x9ee4, 0x92a2, 0x6020, 0xc68f, 0xb9d3, 0x50bc, 0x0, 0x1);
        gbc.writeMem(0x9ee4, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x92a2);
        EXPECT(gbc.pc(), 0x9ee5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ee4), 0xbd);
        // BD 038B
        gbc.setState(0x4bee, 0xe84d, 0xb740, 0x6cd, 0x6012, 0x6ea3, 0x1, 0x1);
        gbc.writeMem(0x4bee, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xe84d);
        EXPECT(gbc.pc(), 0x4bef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 038C
        gbc.setState(0x3bea, 0x76e0, 0xd690, 0x6e8e, 0x6d51, 0xaf80, 0x1, 0x1);
        gbc.writeMem(0x3bea, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x76e0);
        EXPECT(gbc.pc(), 0x3beb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 038D
        gbc.setState(0x5d9f, 0x90a2, 0x36c0, 0x28d0, 0xa3d9, 0x6df7, 0x0, 0x1);
        gbc.writeMem(0x5d9f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x90a2);
        EXPECT(gbc.pc(), 0x5da0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 038E
        gbc.setState(0x48ad, 0xc619, 0xa0, 0x29ac, 0x87, 0xaf34, 0x1, 0x1);
        gbc.writeMem(0x48ad, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc619);
        EXPECT(gbc.pc(), 0x48ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0390
        gbc.setState(0xd16e, 0x76a, 0x33b0, 0x9834, 0xd445, 0x8ce5, 0x1, 0x1);
        gbc.writeMem(0xd16e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x76a);
        EXPECT(gbc.pc(), 0xd16f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd16e), 0xbd);
        // BD 0391
        gbc.setState(0x401b, 0x713, 0x9470, 0x9043, 0x178f, 0x90ad, 0x1, 0x1);
        gbc.writeMem(0x401b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x713);
        EXPECT(gbc.pc(), 0x401c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0392
        gbc.setState(0x3c45, 0x51a0, 0xf990, 0xcfd1, 0xf3b0, 0xef89, 0x1, 0x1);
        gbc.writeMem(0x3c45, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x51a0);
        EXPECT(gbc.pc(), 0x3c46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0393
        gbc.setState(0xd35, 0x5308, 0x4b20, 0xe2b6, 0xff3b, 0x3dc, 0x1, 0x1);
        gbc.writeMem(0xd35, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x5308);
        EXPECT(gbc.pc(), 0xd36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0394
        gbc.setState(0x7e3b, 0x8e27, 0x8c50, 0xa6a0, 0x2926, 0x1614, 0x1, 0x0);
        gbc.writeMem(0x7e3b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x8e27);
        EXPECT(gbc.pc(), 0x7e3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 0395
        gbc.setState(0x8b54, 0x4fdc, 0x3d60, 0xf161, 0x7681, 0x32a8, 0x1, 0x1);
        gbc.writeMem(0x8b54, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x4fdc);
        EXPECT(gbc.pc(), 0x8b55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b54), 0xbd);
        // BD 0396
        gbc.setState(0x254, 0xebdc, 0x3100, 0x4852, 0x100c, 0x3876, 0x1, 0x0);
        gbc.writeMem(0x254, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xebdc);
        EXPECT(gbc.pc(), 0x255);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 0397
        gbc.setState(0xc41e, 0x654b, 0xeb00, 0x4417, 0x5ecf, 0xfccf, 0x1, 0x0);
        gbc.writeMem(0xc41e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x654b);
        EXPECT(gbc.pc(), 0xc41f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc41e), 0xbd);
        // BD 0398
        gbc.setState(0x89e8, 0xa999, 0xf10, 0xa0d1, 0x167f, 0x1154, 0x0, 0x1);
        gbc.writeMem(0x89e8, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xa999);
        EXPECT(gbc.pc(), 0x89e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89e8), 0xbd);
        // BD 0399
        gbc.setState(0x232d, 0xc143, 0x50c0, 0xd1eb, 0xb316, 0xd76a, 0x0, 0x1);
        gbc.writeMem(0x232d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xc143);
        EXPECT(gbc.pc(), 0x232e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 039A
        gbc.setState(0x672b, 0x3ba9, 0xb0, 0x95c4, 0xc360, 0x266a, 0x1, 0x0);
        gbc.writeMem(0x672b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x3ba9);
        EXPECT(gbc.pc(), 0x672c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 039C
        gbc.setState(0x3d11, 0x6ffd, 0x83f0, 0x89af, 0x566c, 0x9e64, 0x1, 0x0);
        gbc.writeMem(0x3d11, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x6ffd);
        EXPECT(gbc.pc(), 0x3d12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 039D
        gbc.setState(0xa6d7, 0x96c1, 0xb3b0, 0x1b77, 0x3c1b, 0x792d, 0x0, 0x1);
        gbc.writeMem(0xa6d7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x96c1);
        EXPECT(gbc.pc(), 0xa6d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6d7), 0xbd);
        // BD 039E
        gbc.setState(0x27cd, 0x35f2, 0x2fd0, 0x5e40, 0x4d98, 0x4f66, 0x1, 0x1);
        gbc.writeMem(0x27cd, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x35f2);
        EXPECT(gbc.pc(), 0x27ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 03A0
        gbc.setState(0xe6d7, 0x3314, 0xd230, 0xd64e, 0xf759, 0xb795, 0x1, 0x1);
        gbc.writeMem(0xe6d7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x3314);
        EXPECT(gbc.pc(), 0xe6d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6d7), 0xbd);
        // BD 03A1
        gbc.setState(0x34b6, 0x1daf, 0x29c0, 0x69a3, 0x3ed1, 0xe472, 0x1, 0x0);
        gbc.writeMem(0x34b6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x1daf);
        EXPECT(gbc.pc(), 0x34b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 03A2
        gbc.setState(0x6f8b, 0x5803, 0x44c0, 0x8af2, 0x3ad1, 0x4e4f, 0x0, 0x0);
        gbc.writeMem(0x6f8b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x5803);
        EXPECT(gbc.pc(), 0x6f8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 03A3
        gbc.setState(0x23ed, 0x7916, 0xc820, 0x20f0, 0xe407, 0x546, 0x1, 0x1);
        gbc.writeMem(0x23ed, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x7916);
        EXPECT(gbc.pc(), 0x23ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 03A4
        gbc.setState(0x1151, 0xaa7e, 0xbd00, 0x9b17, 0x5d4b, 0xa678, 0x0, 0x0);
        gbc.writeMem(0x1151, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xaa7e);
        EXPECT(gbc.pc(), 0x1152);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 03A5
        gbc.setState(0x7e9c, 0x83de, 0x9140, 0x1525, 0x2137, 0x9811, 0x1, 0x0);
        gbc.writeMem(0x7e9c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x83de);
        EXPECT(gbc.pc(), 0x7e9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 03A6
        gbc.setState(0x6138, 0x47e4, 0x8d10, 0x1ee6, 0x8e86, 0xf35c, 0x0, 0x0);
        gbc.writeMem(0x6138, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x47e4);
        EXPECT(gbc.pc(), 0x6139);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 03A7
        gbc.setState(0x8e6, 0x526d, 0xa320, 0x1f36, 0x1c66, 0xb1f6, 0x0, 0x0);
        gbc.writeMem(0x8e6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x526d);
        EXPECT(gbc.pc(), 0x8e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 03A8
        gbc.setState(0x7a35, 0x602f, 0x7420, 0x1a20, 0xbff3, 0x1eaa, 0x0, 0x0);
        gbc.writeMem(0x7a35, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x602f);
        EXPECT(gbc.pc(), 0x7a36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 03A9
        gbc.setState(0x3606, 0x2222, 0x4eb0, 0x6a6c, 0x329d, 0x7c99, 0x1, 0x1);
        gbc.writeMem(0x3606, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x2222);
        EXPECT(gbc.pc(), 0x3607);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 03AA
        gbc.setState(0xdb9f, 0x5ffd, 0xd8b0, 0x2ea8, 0x7cef, 0xbacd, 0x0, 0x1);
        gbc.writeMem(0xdb9f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x5ffd);
        EXPECT(gbc.pc(), 0xdba0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb9f), 0xbd);
        // BD 03AB
        gbc.setState(0x6a41, 0xa753, 0x4c90, 0x57c2, 0x9152, 0xa6bf, 0x1, 0x1);
        gbc.writeMem(0x6a41, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xa753);
        EXPECT(gbc.pc(), 0x6a42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // BD 03AC
        gbc.setState(0x6569, 0xf9d4, 0xf460, 0x4472, 0x287d, 0x7706, 0x1, 0x0);
        gbc.writeMem(0x6569, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xf9d4);
        EXPECT(gbc.pc(), 0x656a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 03AD
        gbc.setState(0x9a8c, 0x161b, 0x77d0, 0x79e2, 0x537e, 0x5e6f, 0x1, 0x0);
        gbc.writeMem(0x9a8c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x161b);
        EXPECT(gbc.pc(), 0x9a8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a8c), 0xbd);
        // BD 03AE
        gbc.setState(0xdce7, 0x8a45, 0x30, 0x3c7c, 0x53d1, 0x463f, 0x1, 0x1);
        gbc.writeMem(0xdce7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x8a45);
        EXPECT(gbc.pc(), 0xdce8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdce7), 0xbd);
        // BD 03AF
        gbc.setState(0xcda5, 0x22e1, 0x5840, 0x4e16, 0x1ebb, 0x9985, 0x0, 0x1);
        gbc.writeMem(0xcda5, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x22e1);
        EXPECT(gbc.pc(), 0xcda6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcda5), 0xbd);
        // BD 03B0
        gbc.setState(0xc6eb, 0xc24b, 0x5dc0, 0x96cb, 0x26c1, 0x948d, 0x1, 0x1);
        gbc.writeMem(0xc6eb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xc24b);
        EXPECT(gbc.pc(), 0xc6ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6eb), 0xbd);
        // BD 03B1
        gbc.setState(0xa79a, 0x9d7c, 0xab50, 0xbf08, 0x6487, 0xf0c0, 0x0, 0x0);
        gbc.writeMem(0xa79a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x9d7c);
        EXPECT(gbc.pc(), 0xa79b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa79a), 0xbd);
        // BD 03B2
        gbc.setState(0x9d30, 0x69b1, 0x190, 0x8ad0, 0x5f1e, 0xd423, 0x1, 0x1);
        gbc.writeMem(0x9d30, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x69b1);
        EXPECT(gbc.pc(), 0x9d31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d30), 0xbd);
        // BD 03B3
        gbc.setState(0x850c, 0xfbbc, 0xe3a0, 0x503e, 0x2085, 0xfb0d, 0x1, 0x0);
        gbc.writeMem(0x850c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xfbbc);
        EXPECT(gbc.pc(), 0x850d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x850c), 0xbd);
        // BD 03B4
        gbc.setState(0x3718, 0x178e, 0xc8c0, 0xd6df, 0x9cd6, 0xe23a, 0x1, 0x0);
        gbc.writeMem(0x3718, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x178e);
        EXPECT(gbc.pc(), 0x3719);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 03B6
        gbc.setState(0x6360, 0x94e, 0x8220, 0xed74, 0xac97, 0xee12, 0x1, 0x1);
        gbc.writeMem(0x6360, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x94e);
        EXPECT(gbc.pc(), 0x6361);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 03B8
        gbc.setState(0x7c13, 0x590e, 0x4d40, 0x7d2e, 0x3d4f, 0xf177, 0x0, 0x0);
        gbc.writeMem(0x7c13, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x590e);
        EXPECT(gbc.pc(), 0x7c14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 03B9
        gbc.setState(0xafb1, 0xa4c0, 0x1c40, 0x29b, 0x6eff, 0xef86, 0x0, 0x1);
        gbc.writeMem(0xafb1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xa4c0);
        EXPECT(gbc.pc(), 0xafb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafb1), 0xbd);
        // BD 03BA
        gbc.setState(0x6d3b, 0xd29b, 0x7430, 0xdf0a, 0x8619, 0xab5d, 0x1, 0x0);
        gbc.writeMem(0x6d3b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xd29b);
        EXPECT(gbc.pc(), 0x6d3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 03BB
        gbc.setState(0x3404, 0xddb, 0x3a30, 0x68e5, 0x1ed8, 0x982e, 0x1, 0x0);
        gbc.writeMem(0x3404, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xddb);
        EXPECT(gbc.pc(), 0x3405);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 03BC
        gbc.setState(0x4e0c, 0x45f3, 0xcb60, 0xce79, 0x4452, 0xdff7, 0x0, 0x0);
        gbc.writeMem(0x4e0c, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x45f3);
        EXPECT(gbc.pc(), 0x4e0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 03BD
        gbc.setState(0x7df3, 0xc399, 0xe2f0, 0x8ad0, 0x461d, 0x3bb5, 0x0, 0x1);
        gbc.writeMem(0x7df3, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xc399);
        EXPECT(gbc.pc(), 0x7df4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 03BE
        gbc.setState(0xe046, 0x1936, 0xe360, 0xf1f6, 0xe310, 0x6934, 0x1, 0x0);
        gbc.writeMem(0xe046, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x1936);
        EXPECT(gbc.pc(), 0xe047);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe046), 0xbd);
        // BD 03C0
        gbc.setState(0x7982, 0xcd7b, 0xb330, 0x6635, 0xe26f, 0xd89e, 0x1, 0x1);
        gbc.writeMem(0x7982, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xcd7b);
        EXPECT(gbc.pc(), 0x7983);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 03C1
        gbc.setState(0x37ca, 0xa6b3, 0xc440, 0xe51, 0x51ef, 0x9639, 0x0, 0x0);
        gbc.writeMem(0x37ca, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xa6b3);
        EXPECT(gbc.pc(), 0x37cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 03C2
        gbc.setState(0xb86d, 0x3f32, 0xc610, 0xffef, 0x5a62, 0x1435, 0x0, 0x1);
        gbc.writeMem(0xb86d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x3f32);
        EXPECT(gbc.pc(), 0xb86e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb86d), 0xbd);
        // BD 03C3
        gbc.setState(0x9be3, 0xfdf6, 0xe080, 0xd03f, 0x234f, 0xc9b, 0x0, 0x0);
        gbc.writeMem(0x9be3, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xfdf6);
        EXPECT(gbc.pc(), 0x9be4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9be3), 0xbd);
        // BD 03C4
        gbc.setState(0xad33, 0x841b, 0xcb0, 0x416a, 0xadab, 0x9e31, 0x1, 0x1);
        gbc.writeMem(0xad33, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x841b);
        EXPECT(gbc.pc(), 0xad34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad33), 0xbd);
        // BD 03C5
        gbc.setState(0x966a, 0xc01e, 0xec90, 0xbd8a, 0x7f9d, 0x3459, 0x0, 0x0);
        gbc.writeMem(0x966a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xc01e);
        EXPECT(gbc.pc(), 0x966b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x966a), 0xbd);
        // BD 03C6
        gbc.setState(0x4089, 0x2088, 0x99a0, 0x49e3, 0x926c, 0x351a, 0x1, 0x1);
        gbc.writeMem(0x4089, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x2088);
        EXPECT(gbc.pc(), 0x408a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 03C7
        gbc.setState(0x99ce, 0xc082, 0x5900, 0x3d2b, 0x3267, 0x928d, 0x0, 0x1);
        gbc.writeMem(0x99ce, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xc082);
        EXPECT(gbc.pc(), 0x99cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99ce), 0xbd);
        // BD 03C8
        gbc.setState(0xc4e, 0xbc0f, 0x7790, 0x91d8, 0xbdaf, 0x5241, 0x1, 0x1);
        gbc.writeMem(0xc4e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xbc0f);
        EXPECT(gbc.pc(), 0xc4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 03C9
        gbc.setState(0x9ec0, 0x7021, 0x6c80, 0xb0c5, 0x98a9, 0xf814, 0x1, 0x1);
        gbc.writeMem(0x9ec0, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x7021);
        EXPECT(gbc.pc(), 0x9ec1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ec0), 0xbd);
        // BD 03CA
        gbc.setState(0x90b7, 0xa98e, 0x13e0, 0xbbdd, 0x5d89, 0xf543, 0x1, 0x1);
        gbc.writeMem(0x90b7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xa98e);
        EXPECT(gbc.pc(), 0x90b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90b7), 0xbd);
        // BD 03CB
        gbc.setState(0x25a7, 0xdbb7, 0xe1d0, 0x4b46, 0xa31e, 0x8cc5, 0x0, 0x1);
        gbc.writeMem(0x25a7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xdbb7);
        EXPECT(gbc.pc(), 0x25a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 03CC
        gbc.setState(0xf83, 0x2f45, 0xf930, 0x9720, 0xb4b0, 0x4c04, 0x0, 0x1);
        gbc.writeMem(0xf83, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x2f45);
        EXPECT(gbc.pc(), 0xf84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 03CD
        gbc.setState(0x3026, 0x5e94, 0x9270, 0xa26a, 0x6de5, 0x84d0, 0x0, 0x1);
        gbc.writeMem(0x3026, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x5e94);
        EXPECT(gbc.pc(), 0x3027);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 03CE
        gbc.setState(0x71c1, 0x196b, 0x8ac0, 0x8bf8, 0x5808, 0xa1d4, 0x0, 0x1);
        gbc.writeMem(0x71c1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x196b);
        EXPECT(gbc.pc(), 0x71c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 03D0
        gbc.setState(0x8cd6, 0x84f1, 0xa620, 0x860a, 0xf956, 0x33aa, 0x0, 0x1);
        gbc.writeMem(0x8cd6, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x84f1);
        EXPECT(gbc.pc(), 0x8cd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cd6), 0xbd);
        // BD 03D1
        gbc.setState(0x65a1, 0xab52, 0xafd0, 0xca9a, 0x2316, 0x90cc, 0x0, 0x0);
        gbc.writeMem(0x65a1, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xab52);
        EXPECT(gbc.pc(), 0x65a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 03D2
        gbc.setState(0xbcf2, 0x4e4d, 0xfe80, 0x8654, 0xf38d, 0x5401, 0x0, 0x1);
        gbc.writeMem(0xbcf2, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x4e4d);
        EXPECT(gbc.pc(), 0xbcf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcf2), 0xbd);
        // BD 03D3
        gbc.setState(0x7bea, 0xbb93, 0x61d0, 0x7790, 0xffd7, 0xb516, 0x1, 0x1);
        gbc.writeMem(0x7bea, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xbb93);
        EXPECT(gbc.pc(), 0x7beb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 03D4
        gbc.setState(0x2bbb, 0x1541, 0x9fd0, 0xb986, 0xb154, 0x4798, 0x0, 0x0);
        gbc.writeMem(0x2bbb, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x1541);
        EXPECT(gbc.pc(), 0x2bbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 03D5
        gbc.setState(0xc074, 0xe72b, 0x8b40, 0x9632, 0x8443, 0xfc1e, 0x0, 0x1);
        gbc.writeMem(0xc074, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xe72b);
        EXPECT(gbc.pc(), 0xc075);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc074), 0xbd);
        // BD 03D6
        gbc.setState(0xe86d, 0x93ad, 0x5e40, 0x9d5, 0xff58, 0xd515, 0x1, 0x0);
        gbc.writeMem(0xe86d, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x93ad);
        EXPECT(gbc.pc(), 0xe86e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe86d), 0xbd);
        // BD 03D7
        gbc.setState(0x4ad3, 0xea26, 0x3930, 0x8cbf, 0x27a5, 0xd8f0, 0x0, 0x0);
        gbc.writeMem(0x4ad3, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xea26);
        EXPECT(gbc.pc(), 0x4ad4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 03D9
        gbc.setState(0xde23, 0x50c3, 0x67b0, 0x661d, 0xb718, 0x1aea, 0x0, 0x1);
        gbc.writeMem(0xde23, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x50c3);
        EXPECT(gbc.pc(), 0xde24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde23), 0xbd);
        // BD 03DB
        gbc.setState(0xcb4a, 0xf403, 0x39c0, 0x41b2, 0x77f3, 0xbabb, 0x1, 0x1);
        gbc.writeMem(0xcb4a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xf403);
        EXPECT(gbc.pc(), 0xcb4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb4a), 0xbd);
        // BD 03DD
        gbc.setState(0x9edf, 0xac22, 0x5560, 0xb4c7, 0x6031, 0x367a, 0x0, 0x0);
        gbc.writeMem(0x9edf, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xac22);
        EXPECT(gbc.pc(), 0x9ee0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9edf), 0xbd);
        // BD 03DE
        gbc.setState(0xcd73, 0x7e1e, 0x5d30, 0x2a5, 0xd5f2, 0x8702, 0x1, 0x0);
        gbc.writeMem(0xcd73, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x7e1e);
        EXPECT(gbc.pc(), 0xcd74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd73), 0xbd);
        // BD 03DF
        gbc.setState(0xc5a, 0xfe45, 0x8b70, 0x1b5c, 0x64e7, 0x50a, 0x1, 0x1);
        gbc.writeMem(0xc5a, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xfe45);
        EXPECT(gbc.pc(), 0xc5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 03E0
        gbc.setState(0x653f, 0x7cee, 0xe6b0, 0x7531, 0x15cf, 0x8e47, 0x0, 0x0);
        gbc.writeMem(0x653f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x7cee);
        EXPECT(gbc.pc(), 0x6540);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // BD 03E1
        gbc.setState(0x72ce, 0xba89, 0x5780, 0x7f6, 0xcfcc, 0xeb87, 0x1, 0x1);
        gbc.writeMem(0x72ce, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xba89);
        EXPECT(gbc.pc(), 0x72cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // BD 03E3
        gbc.setState(0x9ab7, 0x37c2, 0x4f0, 0x5de6, 0x3c6a, 0x6a1c, 0x0, 0x1);
        gbc.writeMem(0x9ab7, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x37c2);
        EXPECT(gbc.pc(), 0x9ab8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ab7), 0xbd);
        // BD 03E5
        gbc.setState(0x419e, 0x4c8e, 0x9d50, 0x1992, 0xd9d3, 0x9b9b, 0x0, 0x0);
        gbc.writeMem(0x419e, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x4c8e);
        EXPECT(gbc.pc(), 0x419f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // BD 03E7
        gbc.setState(0x3b8b, 0x239e, 0xa820, 0x53b3, 0xab3d, 0x8253, 0x0, 0x0);
        gbc.writeMem(0x3b8b, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x239e);
        EXPECT(gbc.pc(), 0x3b8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
    }
}
#endif
