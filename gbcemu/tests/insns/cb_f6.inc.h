    TEST(gbcemu, opcode_cb_f6) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB F6 0000
        gbc.setState(0x793a, 0x6150, 0x4470, 0xbd37, 0x4002, 0x87a5, 0x1, 0x0);
        gbc.writeMem(0x793a, { 0xcb, 0xf6 });
        gbc.writeMem(0x87a5, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x6150);
        EXPECT(gbc.pc(), 0x793c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87a5), 0x62);
        // CB F6 0002
        gbc.setState(0x62cf, 0xf4d3, 0xee00, 0xf472, 0x471f, 0xa8d1, 0x0, 0x0);
        gbc.writeMem(0x62cf, { 0xcb, 0xf6 });
        gbc.writeMem(0xa8d1, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xf4d3);
        EXPECT(gbc.pc(), 0x62d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8d1), 0xc5);
        // CB F6 0003
        gbc.setState(0x64ec, 0xc3c7, 0x7ee0, 0x2b14, 0x6c78, 0xd134, 0x1, 0x0);
        gbc.writeMem(0x64ec, { 0xcb, 0xf6 });
        gbc.writeMem(0xd134, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc3c7);
        EXPECT(gbc.pc(), 0x64ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd134), 0x7c);
        // CB F6 0004
        gbc.setState(0x5fcd, 0x27e3, 0xe00, 0x36b9, 0x731, 0xbf9b, 0x1, 0x1);
        gbc.writeMem(0x5fcd, { 0xcb, 0xf6 });
        gbc.writeMem(0xbf9b, { 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x27e3);
        EXPECT(gbc.pc(), 0x5fcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf9b), 0xf6);
        // CB F6 0006
        gbc.setState(0x40b, 0xfe12, 0xda40, 0x1d2e, 0xf271, 0xc257, 0x0, 0x0);
        gbc.writeMem(0x40b, { 0xcb, 0xf6 });
        gbc.writeMem(0xc257, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xfe12);
        EXPECT(gbc.pc(), 0x40d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc257), 0x4f);
        // CB F6 0007
        gbc.setState(0xc692, 0x2316, 0xe2b0, 0x98c7, 0x7bc7, 0xf2c0, 0x0, 0x1);
        gbc.writeMem(0xc692, { 0xcb, 0xf6 });
        gbc.writeMem(0xf2c0, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x2316);
        EXPECT(gbc.pc(), 0xc694);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc692), 0xcb);
        EXPECT(gbc.readMem(0xc693), 0xf6);
        EXPECT(gbc.readMem(0xf2c0), 0xdf);
        // CB F6 0008
        gbc.setState(0x3177, 0xed0b, 0x13e0, 0x4f20, 0x7087, 0xfd40, 0x0, 0x1);
        gbc.writeMem(0x3177, { 0xcb, 0xf6 });
        gbc.writeMem(0xfd40, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xed0b);
        EXPECT(gbc.pc(), 0x3179);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfd40), 0xd6);
        // CB F6 000A
        gbc.setState(0x2ebe, 0xdbf3, 0x4af0, 0x521c, 0x2a46, 0xfaf1, 0x1, 0x0);
        gbc.writeMem(0x2ebe, { 0xcb, 0xf6 });
        gbc.writeMem(0xfaf1, { 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xdbf3);
        EXPECT(gbc.pc(), 0x2ec0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfaf1), 0xf6);
        // CB F6 000B
        gbc.setState(0xd7d9, 0xf854, 0xf90, 0xd682, 0xa2b0, 0x2bc8, 0x0, 0x1);
        gbc.writeMem(0x2bc8, { 0xe2 });
        gbc.writeMem(0xd7d9, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xf854);
        EXPECT(gbc.pc(), 0xd7db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7d9), 0xcb);
        EXPECT(gbc.readMem(0xd7da), 0xf6);
        // CB F6 000C
        gbc.setState(0x8a5, 0xaf6d, 0x98e0, 0x142f, 0xcf11, 0x417e, 0x0, 0x1);
        gbc.writeMem(0x8a5, { 0xcb, 0xf6 });
        gbc.writeMem(0x417e, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xaf6d);
        EXPECT(gbc.pc(), 0x8a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 000D
        gbc.setState(0xb4c3, 0x1f4a, 0x1a80, 0x81bc, 0x9f19, 0xdfc8, 0x0, 0x1);
        gbc.writeMem(0xb4c3, { 0xcb, 0xf6 });
        gbc.writeMem(0xdfc8, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x1f4a);
        EXPECT(gbc.pc(), 0xb4c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4c3), 0xcb);
        EXPECT(gbc.readMem(0xb4c4), 0xf6);
        EXPECT(gbc.readMem(0xdfc8), 0x72);
        // CB F6 000E
        gbc.setState(0x2bd, 0x4365, 0x5560, 0xf5aa, 0xe289, 0x23fb, 0x0, 0x0);
        gbc.writeMem(0x2bd, { 0xcb, 0xf6 });
        gbc.writeMem(0x23fb, { 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x4365);
        EXPECT(gbc.pc(), 0x2bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0010
        gbc.setState(0xa3eb, 0x1b5c, 0x8080, 0x2a38, 0xfe6a, 0xa61c, 0x0, 0x1);
        gbc.writeMem(0xa3eb, { 0xcb, 0xf6 });
        gbc.writeMem(0xa61c, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x1b5c);
        EXPECT(gbc.pc(), 0xa3ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3eb), 0xcb);
        EXPECT(gbc.readMem(0xa3ec), 0xf6);
        EXPECT(gbc.readMem(0xa61c), 0x40);
        // CB F6 0011
        gbc.setState(0x9dc1, 0x17ad, 0xb190, 0x1a4c, 0x4fd8, 0x722c, 0x1, 0x0);
        gbc.writeMem(0x722c, { 0x4e });
        gbc.writeMem(0x9dc1, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x17ad);
        EXPECT(gbc.pc(), 0x9dc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dc1), 0xcb);
        EXPECT(gbc.readMem(0x9dc2), 0xf6);
        // CB F6 0012
        gbc.setState(0xefa1, 0xa9fe, 0x7e10, 0x8ff1, 0x5eb2, 0x44e2, 0x0, 0x1);
        gbc.writeMem(0x44e2, { 0xcb });
        gbc.writeMem(0xefa1, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xa9fe);
        EXPECT(gbc.pc(), 0xefa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefa1), 0xcb);
        EXPECT(gbc.readMem(0xefa2), 0xf6);
        // CB F6 0014
        gbc.setState(0xa63d, 0x8b3c, 0x3040, 0xc7f0, 0xd350, 0xb407, 0x1, 0x0);
        gbc.writeMem(0xa63d, { 0xcb, 0xf6 });
        gbc.writeMem(0xb407, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x8b3c);
        EXPECT(gbc.pc(), 0xa63f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa63d), 0xcb);
        EXPECT(gbc.readMem(0xa63e), 0xf6);
        EXPECT(gbc.readMem(0xb407), 0xc3);
        // CB F6 0015
        gbc.setState(0x5940, 0x74e2, 0x9270, 0x114a, 0x69d8, 0xd22c, 0x0, 0x1);
        gbc.writeMem(0x5940, { 0xcb, 0xf6 });
        gbc.writeMem(0xd22c, { 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x74e2);
        EXPECT(gbc.pc(), 0x5942);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd22c), 0x48);
        // CB F6 0016
        gbc.setState(0xb2ee, 0x3d69, 0xbd30, 0x2f28, 0xf0ba, 0xd7ae, 0x1, 0x0);
        gbc.writeMem(0xb2ee, { 0xcb, 0xf6 });
        gbc.writeMem(0xd7ae, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x3d69);
        EXPECT(gbc.pc(), 0xb2f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2ee), 0xcb);
        EXPECT(gbc.readMem(0xb2ef), 0xf6);
        EXPECT(gbc.readMem(0xd7ae), 0xc0);
        // CB F6 0017
        gbc.setState(0xd7e8, 0x59b8, 0xa690, 0x2553, 0x79b9, 0x9980, 0x1, 0x0);
        gbc.writeMem(0x9980, { 0xf4 });
        gbc.writeMem(0xd7e8, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x59b8);
        EXPECT(gbc.pc(), 0xd7ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9980), 0xf4);
        EXPECT(gbc.readMem(0xd7e8), 0xcb);
        EXPECT(gbc.readMem(0xd7e9), 0xf6);
        // CB F6 0018
        gbc.setState(0x8c3d, 0xa5b8, 0x22f0, 0x12a3, 0xb866, 0x8f04, 0x0, 0x1);
        gbc.writeMem(0x8c3d, { 0xcb, 0xf6 });
        gbc.writeMem(0x8f04, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xa5b8);
        EXPECT(gbc.pc(), 0x8c3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c3d), 0xcb);
        EXPECT(gbc.readMem(0x8c3e), 0xf6);
        EXPECT(gbc.readMem(0x8f04), 0xeb);
        // CB F6 0019
        gbc.setState(0x103a, 0x8840, 0x510, 0x64f9, 0x67cd, 0x7883, 0x0, 0x1);
        gbc.writeMem(0x103a, { 0xcb, 0xf6 });
        gbc.writeMem(0x7883, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x8840);
        EXPECT(gbc.pc(), 0x103c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 001A
        gbc.setState(0x76f3, 0x7cef, 0x60a0, 0x17a9, 0xb7da, 0xb515, 0x0, 0x1);
        gbc.writeMem(0x76f3, { 0xcb, 0xf6 });
        gbc.writeMem(0xb515, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x7cef);
        EXPECT(gbc.pc(), 0x76f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb515), 0xdd);
        // CB F6 001B
        gbc.setState(0x6585, 0x576a, 0x5f20, 0x9e0c, 0x13e0, 0xfd, 0x0, 0x0);
        gbc.writeMem(0xfd, { 0x46 });
        gbc.writeMem(0x6585, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x576a);
        EXPECT(gbc.pc(), 0x6587);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 001D
        gbc.setState(0x446e, 0x417, 0xd890, 0x78d6, 0xffed, 0xeda1, 0x0, 0x0);
        gbc.writeMem(0x446e, { 0xcb, 0xf6 });
        gbc.writeMem(0xeda1, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x417);
        EXPECT(gbc.pc(), 0x4470);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeda1), 0x51);
        // CB F6 001F
        gbc.setState(0x71c, 0x10f0, 0xb300, 0x5bb6, 0x444d, 0xf3d5, 0x1, 0x0);
        gbc.writeMem(0x71c, { 0xcb, 0xf6 });
        gbc.writeMem(0xf3d5, { 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x10f0);
        EXPECT(gbc.pc(), 0x71e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf3d5), 0xfd);
        // CB F6 0021
        gbc.setState(0x7577, 0x4031, 0xa810, 0xdf43, 0x1c23, 0xdfab, 0x0, 0x1);
        gbc.writeMem(0x7577, { 0xcb, 0xf6 });
        gbc.writeMem(0xdfab, { 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x4031);
        EXPECT(gbc.pc(), 0x7579);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfab), 0x6c);
        // CB F6 0023
        gbc.setState(0x95b8, 0x9ef, 0xe580, 0xfe04, 0x4eb7, 0xe27b, 0x0, 0x1);
        gbc.writeMem(0x95b8, { 0xcb, 0xf6 });
        gbc.writeMem(0xe27b, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x9ef);
        EXPECT(gbc.pc(), 0x95ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95b8), 0xcb);
        EXPECT(gbc.readMem(0x95b9), 0xf6);
        EXPECT(gbc.readMem(0xe27b), 0xdc);
        // CB F6 0024
        gbc.setState(0xc64b, 0x7f2c, 0x6010, 0xa303, 0x5abe, 0xe280, 0x1, 0x1);
        gbc.writeMem(0xc64b, { 0xcb, 0xf6 });
        gbc.writeMem(0xe280, { 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x7f2c);
        EXPECT(gbc.pc(), 0xc64d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc64b), 0xcb);
        EXPECT(gbc.readMem(0xc64c), 0xf6);
        EXPECT(gbc.readMem(0xe280), 0xda);
        // CB F6 0026
        gbc.setState(0x3b16, 0xf95b, 0xc120, 0x4191, 0x3c9b, 0xf041, 0x0, 0x0);
        gbc.writeMem(0x3b16, { 0xcb, 0xf6 });
        gbc.writeMem(0xf041, { 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xf95b);
        EXPECT(gbc.pc(), 0x3b18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf041), 0xd2);
        // CB F6 0027
        gbc.setState(0x4b7d, 0x5ce5, 0x1470, 0xcdac, 0x9e44, 0x8c9d, 0x1, 0x0);
        gbc.writeMem(0x4b7d, { 0xcb, 0xf6 });
        gbc.writeMem(0x8c9d, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x5ce5);
        EXPECT(gbc.pc(), 0x4b7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c9d), 0xc9);
        // CB F6 0028
        gbc.setState(0x8c91, 0x4178, 0xb4a0, 0x9d81, 0x4bed, 0xf83a, 0x0, 0x0);
        gbc.writeMem(0x8c91, { 0xcb, 0xf6 });
        gbc.writeMem(0xf83a, { 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x4178);
        EXPECT(gbc.pc(), 0x8c93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c91), 0xcb);
        EXPECT(gbc.readMem(0x8c92), 0xf6);
        EXPECT(gbc.readMem(0xf83a), 0xc3);
        // CB F6 0029
        gbc.setState(0x57f6, 0x4a0b, 0x4c60, 0xb281, 0xb6b5, 0xa998, 0x0, 0x0);
        gbc.writeMem(0x57f6, { 0xcb, 0xf6 });
        gbc.writeMem(0xa998, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x4a0b);
        EXPECT(gbc.pc(), 0x57f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa998), 0x5e);
        // CB F6 002A
        gbc.setState(0xb65e, 0xf76e, 0xb6e0, 0xafb5, 0x6a6f, 0xe000, 0x0, 0x0);
        gbc.writeMem(0xb65e, { 0xcb, 0xf6 });
        gbc.writeMem(0xe000, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf76e);
        EXPECT(gbc.pc(), 0xb660);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb65e), 0xcb);
        EXPECT(gbc.readMem(0xb65f), 0xf6);
        EXPECT(gbc.readMem(0xe000), 0x57);
        // CB F6 002B
        gbc.setState(0x2ee2, 0x5593, 0x97e0, 0x7ce5, 0x9c55, 0xa5ba, 0x0, 0x1);
        gbc.writeMem(0x2ee2, { 0xcb, 0xf6 });
        gbc.writeMem(0xa5ba, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x5593);
        EXPECT(gbc.pc(), 0x2ee4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5ba), 0x63);
        // CB F6 002C
        gbc.setState(0x43d8, 0x8344, 0xa7f0, 0xbaca, 0x720f, 0x5821, 0x1, 0x0);
        gbc.writeMem(0x43d8, { 0xcb, 0xf6 });
        gbc.writeMem(0x5821, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x8344);
        EXPECT(gbc.pc(), 0x43da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 002D
        gbc.setState(0x77b2, 0x3a31, 0xb460, 0x532, 0x1a7d, 0x2b92, 0x0, 0x1);
        gbc.writeMem(0x2b92, { 0x4a });
        gbc.writeMem(0x77b2, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x3a31);
        EXPECT(gbc.pc(), 0x77b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0030
        gbc.setState(0x9fca, 0xa3f5, 0x5010, 0x597b, 0x9484, 0x48ab, 0x0, 0x0);
        gbc.writeMem(0x48ab, { 0xe2 });
        gbc.writeMem(0x9fca, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xa3f5);
        EXPECT(gbc.pc(), 0x9fcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fca), 0xcb);
        EXPECT(gbc.readMem(0x9fcb), 0xf6);
        // CB F6 0034
        gbc.setState(0x9c90, 0x780e, 0x46e0, 0x1e5f, 0x973c, 0xb05f, 0x1, 0x1);
        gbc.writeMem(0x9c90, { 0xcb, 0xf6 });
        gbc.writeMem(0xb05f, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x780e);
        EXPECT(gbc.pc(), 0x9c92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c90), 0xcb);
        EXPECT(gbc.readMem(0x9c91), 0xf6);
        EXPECT(gbc.readMem(0xb05f), 0xfa);
        // CB F6 0035
        gbc.setState(0x8d26, 0x3acd, 0x2de0, 0x4a2c, 0xb05e, 0xfb2a, 0x0, 0x0);
        gbc.writeMem(0x8d26, { 0xcb, 0xf6 });
        gbc.writeMem(0xfb2a, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x3acd);
        EXPECT(gbc.pc(), 0x8d28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d26), 0xcb);
        EXPECT(gbc.readMem(0x8d27), 0xf6);
        EXPECT(gbc.readMem(0xfb2a), 0xf5);
        // CB F6 0036
        gbc.setState(0x3450, 0xdebc, 0xa790, 0xa9d4, 0xf4b8, 0x9505, 0x1, 0x1);
        gbc.writeMem(0x3450, { 0xcb, 0xf6 });
        gbc.writeMem(0x9505, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xdebc);
        EXPECT(gbc.pc(), 0x3452);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9505), 0xc7);
        // CB F6 0038
        gbc.setState(0x1780, 0xd2c4, 0x8f90, 0xbcfe, 0x9d33, 0xd5ae, 0x0, 0x0);
        gbc.writeMem(0x1780, { 0xcb, 0xf6 });
        gbc.writeMem(0xd5ae, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xd2c4);
        EXPECT(gbc.pc(), 0x1782);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5ae), 0xf1);
        // CB F6 0039
        gbc.setState(0xeb6e, 0x9de1, 0xb9d0, 0xeb37, 0xfd87, 0x9c67, 0x1, 0x1);
        gbc.writeMem(0x9c67, { 0x94 });
        gbc.writeMem(0xeb6e, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x9de1);
        EXPECT(gbc.pc(), 0xeb70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c67), 0xd4);
        EXPECT(gbc.readMem(0xeb6e), 0xcb);
        EXPECT(gbc.readMem(0xeb6f), 0xf6);
        // CB F6 003B
        gbc.setState(0x952, 0x20f5, 0xc3c0, 0x1279, 0xda41, 0x9ec5, 0x0, 0x1);
        gbc.writeMem(0x952, { 0xcb, 0xf6 });
        gbc.writeMem(0x9ec5, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x20f5);
        EXPECT(gbc.pc(), 0x954);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ec5), 0xf8);
        // CB F6 003C
        gbc.setState(0x7e3b, 0x3883, 0x1380, 0xcb78, 0x1995, 0x2aef, 0x1, 0x1);
        gbc.writeMem(0x2aef, { 0x41 });
        gbc.writeMem(0x7e3b, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x3883);
        EXPECT(gbc.pc(), 0x7e3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 003E
        gbc.setState(0xc746, 0x4f2, 0xe60, 0xbd9b, 0xf4be, 0x1205, 0x0, 0x1);
        gbc.writeMem(0x1205, { 0x69 });
        gbc.writeMem(0xc746, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x4f2);
        EXPECT(gbc.pc(), 0xc748);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc746), 0xcb);
        EXPECT(gbc.readMem(0xc747), 0xf6);
        // CB F6 003F
        gbc.setState(0x4efa, 0xa81b, 0x5af0, 0x5918, 0x2143, 0xf2b1, 0x0, 0x0);
        gbc.writeMem(0x4efa, { 0xcb, 0xf6 });
        gbc.writeMem(0xf2b1, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xa81b);
        EXPECT(gbc.pc(), 0x4efc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf2b1), 0xec);
        // CB F6 0040
        gbc.setState(0x115, 0xdb83, 0xe170, 0x44fb, 0xa498, 0x113a, 0x1, 0x1);
        gbc.writeMem(0x115, { 0xcb, 0xf6 });
        gbc.writeMem(0x113a, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xdb83);
        EXPECT(gbc.pc(), 0x117);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 0043
        gbc.setState(0x75a6, 0xb73a, 0xf170, 0x51bb, 0x5b82, 0x9288, 0x0, 0x0);
        gbc.writeMem(0x75a6, { 0xcb, 0xf6 });
        gbc.writeMem(0x9288, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xb73a);
        EXPECT(gbc.pc(), 0x75a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9288), 0x5a);
        // CB F6 0044
        gbc.setState(0x1fc3, 0x2d30, 0xddc0, 0xc73e, 0xcb82, 0x8a9f, 0x1, 0x1);
        gbc.writeMem(0x1fc3, { 0xcb, 0xf6 });
        gbc.writeMem(0x8a9f, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x2d30);
        EXPECT(gbc.pc(), 0x1fc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a9f), 0xcd);
        // CB F6 0045
        gbc.setState(0xcf01, 0x3a9e, 0xf90, 0x4d2d, 0x4a5e, 0x6977, 0x0, 0x1);
        gbc.writeMem(0x6977, { 0x4c });
        gbc.writeMem(0xcf01, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x3a9e);
        EXPECT(gbc.pc(), 0xcf03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf01), 0xcb);
        EXPECT(gbc.readMem(0xcf02), 0xf6);
        // CB F6 0046
        gbc.setState(0x97a8, 0x798b, 0xfda0, 0xf567, 0xf167, 0x5b4f, 0x1, 0x1);
        gbc.writeMem(0x5b4f, { 0xd3 });
        gbc.writeMem(0x97a8, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x798b);
        EXPECT(gbc.pc(), 0x97aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97a8), 0xcb);
        EXPECT(gbc.readMem(0x97a9), 0xf6);
        // CB F6 0047
        gbc.setState(0x3f43, 0x9a92, 0xb9f0, 0x40d1, 0x8a6e, 0x9ba9, 0x1, 0x0);
        gbc.writeMem(0x3f43, { 0xcb, 0xf6 });
        gbc.writeMem(0x9ba9, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x9a92);
        EXPECT(gbc.pc(), 0x3f45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ba9), 0xeb);
        // CB F6 0048
        gbc.setState(0x74df, 0x8169, 0xc5d0, 0x94d6, 0xa337, 0xb983, 0x0, 0x1);
        gbc.writeMem(0x74df, { 0xcb, 0xf6 });
        gbc.writeMem(0xb983, { 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x8169);
        EXPECT(gbc.pc(), 0x74e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb983), 0xf9);
        // CB F6 0049
        gbc.setState(0x95c3, 0x383d, 0xf8e0, 0x457f, 0x3694, 0xcb9f, 0x0, 0x0);
        gbc.writeMem(0x95c3, { 0xcb, 0xf6 });
        gbc.writeMem(0xcb9f, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x383d);
        EXPECT(gbc.pc(), 0x95c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95c3), 0xcb);
        EXPECT(gbc.readMem(0x95c4), 0xf6);
        EXPECT(gbc.readMem(0xcb9f), 0xc9);
        // CB F6 004E
        gbc.setState(0x5eff, 0x646f, 0x3110, 0x7071, 0xe6db, 0xac70, 0x0, 0x1);
        gbc.writeMem(0x5eff, { 0xcb, 0xf6 });
        gbc.writeMem(0xac70, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x646f);
        EXPECT(gbc.pc(), 0x5f01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac70), 0xfd);
        // CB F6 004F
        gbc.setState(0xb9f8, 0x2aee, 0x1410, 0x3a79, 0xdf34, 0xa119, 0x1, 0x0);
        gbc.writeMem(0xa119, { 0x3c });
        gbc.writeMem(0xb9f8, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x2aee);
        EXPECT(gbc.pc(), 0xb9fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa119), 0x7c);
        EXPECT(gbc.readMem(0xb9f8), 0xcb);
        EXPECT(gbc.readMem(0xb9f9), 0xf6);
        // CB F6 0050
        gbc.setState(0x1517, 0x4ab0, 0xc470, 0x8641, 0xac33, 0xa16c, 0x1, 0x0);
        gbc.writeMem(0x1517, { 0xcb, 0xf6 });
        gbc.writeMem(0xa16c, { 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x4ab0);
        EXPECT(gbc.pc(), 0x1519);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa16c), 0xf0);
        // CB F6 0051
        gbc.setState(0x5908, 0x8790, 0xbe70, 0x7b49, 0xdd5f, 0xad28, 0x0, 0x1);
        gbc.writeMem(0x5908, { 0xcb, 0xf6 });
        gbc.writeMem(0xad28, { 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x8790);
        EXPECT(gbc.pc(), 0x590a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad28), 0xef);
        // CB F6 0052
        gbc.setState(0x8c4e, 0xe0d4, 0x28c0, 0x37c3, 0x7349, 0x72d5, 0x0, 0x1);
        gbc.writeMem(0x72d5, { 0x4b });
        gbc.writeMem(0x8c4e, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xe0d4);
        EXPECT(gbc.pc(), 0x8c50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c4e), 0xcb);
        EXPECT(gbc.readMem(0x8c4f), 0xf6);
        // CB F6 0054
        gbc.setState(0x2e66, 0x6f94, 0x5750, 0x80b8, 0xbad3, 0xc2c9, 0x0, 0x0);
        gbc.writeMem(0x2e66, { 0xcb, 0xf6 });
        gbc.writeMem(0xc2c9, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x6f94);
        EXPECT(gbc.pc(), 0x2e68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2c9), 0xf3);
        // CB F6 0055
        gbc.setState(0x3323, 0x66a2, 0xb5f0, 0x8097, 0xf5bd, 0xcc26, 0x0, 0x0);
        gbc.writeMem(0x3323, { 0xcb, 0xf6 });
        gbc.writeMem(0xcc26, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x66a2);
        EXPECT(gbc.pc(), 0x3325);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc26), 0x4c);
        // CB F6 0056
        gbc.setState(0x5d68, 0x4f5a, 0xe010, 0x671, 0x6120, 0x6a5, 0x0, 0x1);
        gbc.writeMem(0x6a5, { 0xc1 });
        gbc.writeMem(0x5d68, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x4f5a);
        EXPECT(gbc.pc(), 0x5d6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 0057
        gbc.setState(0x2c7b, 0xfdf, 0xada0, 0x5232, 0x69f, 0x8a8c, 0x0, 0x1);
        gbc.writeMem(0x2c7b, { 0xcb, 0xf6 });
        gbc.writeMem(0x8a8c, { 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xfdf);
        EXPECT(gbc.pc(), 0x2c7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a8c), 0xf2);
        // CB F6 0058
        gbc.setState(0x6221, 0xfb66, 0xcb00, 0x8003, 0xc4ed, 0xbe12, 0x0, 0x1);
        gbc.writeMem(0x6221, { 0xcb, 0xf6 });
        gbc.writeMem(0xbe12, { 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xfb66);
        EXPECT(gbc.pc(), 0x6223);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe12), 0x71);
        // CB F6 0059
        gbc.setState(0xcd9d, 0x68e9, 0xec70, 0x7282, 0x94d5, 0x1125, 0x0, 0x1);
        gbc.writeMem(0x1125, { 0xde });
        gbc.writeMem(0xcd9d, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x68e9);
        EXPECT(gbc.pc(), 0xcd9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd9d), 0xcb);
        EXPECT(gbc.readMem(0xcd9e), 0xf6);
        // CB F6 005B
        gbc.setState(0xebf1, 0x516b, 0xac20, 0x5469, 0xacd8, 0xf42e, 0x1, 0x1);
        gbc.writeMem(0xebf1, { 0xcb, 0xf6 });
        gbc.writeMem(0xf42e, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x516b);
        EXPECT(gbc.pc(), 0xebf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebf1), 0xcb);
        EXPECT(gbc.readMem(0xebf2), 0xf6);
        EXPECT(gbc.readMem(0xf42e), 0x61);
        // CB F6 005C
        gbc.setState(0x8a85, 0x5d21, 0x9c80, 0x6dfc, 0x912c, 0x82be, 0x0, 0x1);
        gbc.writeMem(0x82be, { 0xac });
        gbc.writeMem(0x8a85, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x5d21);
        EXPECT(gbc.pc(), 0x8a87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82be), 0xec);
        EXPECT(gbc.readMem(0x8a85), 0xcb);
        EXPECT(gbc.readMem(0x8a86), 0xf6);
        // CB F6 005D
        gbc.setState(0x53e9, 0x303f, 0x8490, 0x9627, 0xd736, 0xa9a9, 0x1, 0x0);
        gbc.writeMem(0x53e9, { 0xcb, 0xf6 });
        gbc.writeMem(0xa9a9, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x303f);
        EXPECT(gbc.pc(), 0x53eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9a9), 0xff);
        // CB F6 005E
        gbc.setState(0x7252, 0x332, 0x5250, 0xb413, 0x577f, 0x4096, 0x0, 0x0);
        gbc.writeMem(0x4096, { 0x67 });
        gbc.writeMem(0x7252, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x332);
        EXPECT(gbc.pc(), 0x7254);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 005F
        gbc.setState(0xdb66, 0x81cc, 0x8df0, 0xa623, 0x677, 0x31ba, 0x0, 0x1);
        gbc.writeMem(0x31ba, { 0x57 });
        gbc.writeMem(0xdb66, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x81cc);
        EXPECT(gbc.pc(), 0xdb68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb66), 0xcb);
        EXPECT(gbc.readMem(0xdb67), 0xf6);
        // CB F6 0061
        gbc.setState(0xde16, 0x1108, 0xe230, 0x480e, 0x5a4e, 0x39ed, 0x1, 0x1);
        gbc.writeMem(0x39ed, { 0xfe });
        gbc.writeMem(0xde16, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x1108);
        EXPECT(gbc.pc(), 0xde18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde16), 0xcb);
        EXPECT(gbc.readMem(0xde17), 0xf6);
        // CB F6 0063
        gbc.setState(0x5360, 0x7dd, 0x1360, 0x2604, 0xbda4, 0x4c4e, 0x1, 0x0);
        gbc.writeMem(0x4c4e, { 0xcc });
        gbc.writeMem(0x5360, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x7dd);
        EXPECT(gbc.pc(), 0x5362);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0064
        gbc.setState(0x9978, 0x33fb, 0x3e10, 0xf591, 0xfd5, 0xc4f6, 0x0, 0x1);
        gbc.writeMem(0x9978, { 0xcb, 0xf6 });
        gbc.writeMem(0xc4f6, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x33fb);
        EXPECT(gbc.pc(), 0x997a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9978), 0xcb);
        EXPECT(gbc.readMem(0x9979), 0xf6);
        EXPECT(gbc.readMem(0xc4f6), 0x4e);
        // CB F6 0065
        gbc.setState(0xc696, 0xd40a, 0xa2c0, 0x6144, 0xf8b9, 0xd11b, 0x0, 0x1);
        gbc.writeMem(0xc696, { 0xcb, 0xf6 });
        gbc.writeMem(0xd11b, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xd40a);
        EXPECT(gbc.pc(), 0xc698);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc696), 0xcb);
        EXPECT(gbc.readMem(0xc697), 0xf6);
        EXPECT(gbc.readMem(0xd11b), 0xf7);
        // CB F6 0066
        gbc.setState(0xea9e, 0xedff, 0x76e0, 0xd557, 0x51dc, 0x832b, 0x0, 0x1);
        gbc.writeMem(0x832b, { 0x5f });
        gbc.writeMem(0xea9e, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xedff);
        EXPECT(gbc.pc(), 0xeaa0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x832b), 0x5f);
        EXPECT(gbc.readMem(0xea9e), 0xcb);
        EXPECT(gbc.readMem(0xea9f), 0xf6);
        // CB F6 0067
        gbc.setState(0x8ebd, 0xbcb1, 0x48d0, 0x7af2, 0xd084, 0x4b0e, 0x0, 0x1);
        gbc.writeMem(0x4b0e, { 0xd8 });
        gbc.writeMem(0x8ebd, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xbcb1);
        EXPECT(gbc.pc(), 0x8ebf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ebd), 0xcb);
        EXPECT(gbc.readMem(0x8ebe), 0xf6);
        // CB F6 0068
        gbc.setState(0xb497, 0x30a2, 0x9940, 0x78fa, 0x64c7, 0xe8df, 0x0, 0x0);
        gbc.writeMem(0xb497, { 0xcb, 0xf6 });
        gbc.writeMem(0xe8df, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x30a2);
        EXPECT(gbc.pc(), 0xb499);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb497), 0xcb);
        EXPECT(gbc.readMem(0xb498), 0xf6);
        EXPECT(gbc.readMem(0xe8df), 0x45);
        // CB F6 0069
        gbc.setState(0x1d0f, 0x1091, 0x8140, 0xb998, 0x6260, 0xa7c2, 0x1, 0x0);
        gbc.writeMem(0x1d0f, { 0xcb, 0xf6 });
        gbc.writeMem(0xa7c2, { 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x1091);
        EXPECT(gbc.pc(), 0x1d11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7c2), 0x60);
        // CB F6 006B
        gbc.setState(0xa21e, 0x7b20, 0x3de0, 0xfef6, 0x3ff9, 0x8228, 0x1, 0x1);
        gbc.writeMem(0x8228, { 0x3 });
        gbc.writeMem(0xa21e, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x7b20);
        EXPECT(gbc.pc(), 0xa220);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8228), 0x43);
        EXPECT(gbc.readMem(0xa21e), 0xcb);
        EXPECT(gbc.readMem(0xa21f), 0xf6);
        // CB F6 006D
        gbc.setState(0xec5a, 0x6ec2, 0xe500, 0x26e8, 0x27bc, 0x8bf7, 0x0, 0x1);
        gbc.writeMem(0x8bf7, { 0x12 });
        gbc.writeMem(0xec5a, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x6ec2);
        EXPECT(gbc.pc(), 0xec5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bf7), 0x52);
        EXPECT(gbc.readMem(0xec5a), 0xcb);
        EXPECT(gbc.readMem(0xec5b), 0xf6);
        // CB F6 006F
        gbc.setState(0xac54, 0xa7d8, 0xdea0, 0xef53, 0x3774, 0xec1c, 0x1, 0x1);
        gbc.writeMem(0xac54, { 0xcb, 0xf6 });
        gbc.writeMem(0xec1c, { 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xa7d8);
        EXPECT(gbc.pc(), 0xac56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac54), 0xcb);
        EXPECT(gbc.readMem(0xac55), 0xf6);
        EXPECT(gbc.readMem(0xec1c), 0xef);
        // CB F6 0070
        gbc.setState(0xdee5, 0x9a2d, 0xc880, 0x9def, 0x255, 0x8ec0, 0x0, 0x0);
        gbc.writeMem(0x8ec0, { 0xda });
        gbc.writeMem(0xdee5, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x9a2d);
        EXPECT(gbc.pc(), 0xdee7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ec0), 0xda);
        EXPECT(gbc.readMem(0xdee5), 0xcb);
        EXPECT(gbc.readMem(0xdee6), 0xf6);
        // CB F6 0072
        gbc.setState(0x450, 0x4a04, 0xa430, 0x594d, 0x6bc1, 0xc53f, 0x0, 0x0);
        gbc.writeMem(0x450, { 0xcb, 0xf6 });
        gbc.writeMem(0xc53f, { 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x4a04);
        EXPECT(gbc.pc(), 0x452);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc53f), 0xf6);
        // CB F6 0073
        gbc.setState(0x8573, 0xfa98, 0x7a50, 0xd66b, 0xc17f, 0x7d3a, 0x0, 0x0);
        gbc.writeMem(0x7d3a, { 0x58 });
        gbc.writeMem(0x8573, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xfa98);
        EXPECT(gbc.pc(), 0x8575);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8573), 0xcb);
        EXPECT(gbc.readMem(0x8574), 0xf6);
        // CB F6 0076
        gbc.setState(0xb2e9, 0xb711, 0xf240, 0x87ee, 0x9bae, 0x9d0, 0x1, 0x0);
        gbc.writeMem(0x9d0, { 0xc6 });
        gbc.writeMem(0xb2e9, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xb711);
        EXPECT(gbc.pc(), 0xb2eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2e9), 0xcb);
        EXPECT(gbc.readMem(0xb2ea), 0xf6);
        // CB F6 0077
        gbc.setState(0x5857, 0xaf9f, 0xb060, 0x9003, 0xa266, 0xc5ea, 0x1, 0x1);
        gbc.writeMem(0x5857, { 0xcb, 0xf6 });
        gbc.writeMem(0xc5ea, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xaf9f);
        EXPECT(gbc.pc(), 0x5859);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5ea), 0xee);
        // CB F6 0078
        gbc.setState(0x9cbb, 0x90a4, 0xf310, 0x5d79, 0x4da6, 0x634c, 0x1, 0x0);
        gbc.writeMem(0x634c, { 0x46 });
        gbc.writeMem(0x9cbb, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x90a4);
        EXPECT(gbc.pc(), 0x9cbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cbb), 0xcb);
        EXPECT(gbc.readMem(0x9cbc), 0xf6);
        // CB F6 0079
        gbc.setState(0xa176, 0x2331, 0xbe0, 0xa560, 0x6317, 0xe5f9, 0x0, 0x0);
        gbc.writeMem(0xa176, { 0xcb, 0xf6 });
        gbc.writeMem(0xe5f9, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x2331);
        EXPECT(gbc.pc(), 0xa178);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa176), 0xcb);
        EXPECT(gbc.readMem(0xa177), 0xf6);
        EXPECT(gbc.readMem(0xe5f9), 0xfc);
        // CB F6 007A
        gbc.setState(0xb625, 0x5398, 0xd790, 0x1179, 0x9e57, 0xedec, 0x1, 0x1);
        gbc.writeMem(0xb625, { 0xcb, 0xf6 });
        gbc.writeMem(0xedec, { 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x5398);
        EXPECT(gbc.pc(), 0xb627);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb625), 0xcb);
        EXPECT(gbc.readMem(0xb626), 0xf6);
        EXPECT(gbc.readMem(0xedec), 0xe8);
        // CB F6 007C
        gbc.setState(0xd083, 0x2e18, 0xfcb0, 0x2d6d, 0x6c5e, 0xcba1, 0x1, 0x1);
        gbc.writeMem(0xcba1, { 0x51 });
        gbc.writeMem(0xd083, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x2e18);
        EXPECT(gbc.pc(), 0xd085);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcba1), 0x51);
        EXPECT(gbc.readMem(0xd083), 0xcb);
        EXPECT(gbc.readMem(0xd084), 0xf6);
        // CB F6 007D
        gbc.setState(0x5bf1, 0x2142, 0xca50, 0x9b91, 0x520e, 0x9826, 0x1, 0x0);
        gbc.writeMem(0x5bf1, { 0xcb, 0xf6 });
        gbc.writeMem(0x9826, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x2142);
        EXPECT(gbc.pc(), 0x5bf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9826), 0x49);
        // CB F6 007E
        gbc.setState(0x165b, 0xec82, 0xbbf0, 0xcdb3, 0x5e17, 0x5693, 0x1, 0x0);
        gbc.writeMem(0x165b, { 0xcb, 0xf6 });
        gbc.writeMem(0x5693, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xec82);
        EXPECT(gbc.pc(), 0x165d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 007F
        gbc.setState(0x957, 0xf2d1, 0x9020, 0x9d, 0xf2f6, 0xade3, 0x1, 0x0);
        gbc.writeMem(0x957, { 0xcb, 0xf6 });
        gbc.writeMem(0xade3, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xf2d1);
        EXPECT(gbc.pc(), 0x959);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xade3), 0xe6);
        // CB F6 0080
        gbc.setState(0x950d, 0xcb54, 0x4490, 0x5772, 0xabdd, 0x31f9, 0x0, 0x1);
        gbc.writeMem(0x31f9, { 0xf0 });
        gbc.writeMem(0x950d, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xcb54);
        EXPECT(gbc.pc(), 0x950f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x950d), 0xcb);
        EXPECT(gbc.readMem(0x950e), 0xf6);
        // CB F6 0082
        gbc.setState(0x732e, 0xf6e5, 0xe770, 0xa4b2, 0xf684, 0xd037, 0x1, 0x1);
        gbc.writeMem(0x732e, { 0xcb, 0xf6 });
        gbc.writeMem(0xd037, { 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xf6e5);
        EXPECT(gbc.pc(), 0x7330);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd037), 0xc1);
        // CB F6 0083
        gbc.setState(0xb81f, 0x314f, 0xe5b0, 0xfa1c, 0x2a5e, 0x3eb0, 0x0, 0x1);
        gbc.writeMem(0x3eb0, { 0x4f });
        gbc.writeMem(0xb81f, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x314f);
        EXPECT(gbc.pc(), 0xb821);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb81f), 0xcb);
        EXPECT(gbc.readMem(0xb820), 0xf6);
        // CB F6 0084
        gbc.setState(0xa351, 0x9b6, 0xf9e0, 0xb425, 0xf735, 0xf86e, 0x0, 0x1);
        gbc.writeMem(0xa351, { 0xcb, 0xf6 });
        gbc.writeMem(0xf86e, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x9b6);
        EXPECT(gbc.pc(), 0xa353);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa351), 0xcb);
        EXPECT(gbc.readMem(0xa352), 0xf6);
        EXPECT(gbc.readMem(0xf86e), 0x7f);
        // CB F6 0085
        gbc.setState(0xc2fd, 0xfdee, 0x5150, 0xa2f4, 0x1dff, 0xcb0a, 0x1, 0x1);
        gbc.writeMem(0xc2fd, { 0xcb, 0xf6 });
        gbc.writeMem(0xcb0a, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xfdee);
        EXPECT(gbc.pc(), 0xc2ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2fd), 0xcb);
        EXPECT(gbc.readMem(0xc2fe), 0xf6);
        EXPECT(gbc.readMem(0xcb0a), 0x5b);
        // CB F6 0086
        gbc.setState(0x900c, 0xda94, 0x4400, 0x5d87, 0x1670, 0xd8b4, 0x0, 0x1);
        gbc.writeMem(0x900c, { 0xcb, 0xf6 });
        gbc.writeMem(0xd8b4, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xda94);
        EXPECT(gbc.pc(), 0x900e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x900c), 0xcb);
        EXPECT(gbc.readMem(0x900d), 0xf6);
        EXPECT(gbc.readMem(0xd8b4), 0x7f);
        // CB F6 0087
        gbc.setState(0x144, 0x1469, 0x20c0, 0x22c0, 0x6f61, 0x9a4d, 0x1, 0x0);
        gbc.writeMem(0x144, { 0xcb, 0xf6 });
        gbc.writeMem(0x9a4d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1469);
        EXPECT(gbc.pc(), 0x146);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a4d), 0x5a);
        // CB F6 0089
        gbc.setState(0x88a4, 0xfaae, 0x7d60, 0x8328, 0x3288, 0xcf71, 0x0, 0x0);
        gbc.writeMem(0x88a4, { 0xcb, 0xf6 });
        gbc.writeMem(0xcf71, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xfaae);
        EXPECT(gbc.pc(), 0x88a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88a4), 0xcb);
        EXPECT(gbc.readMem(0x88a5), 0xf6);
        EXPECT(gbc.readMem(0xcf71), 0xe8);
        // CB F6 008A
        gbc.setState(0x26d5, 0x539e, 0xdce0, 0xab4c, 0x1e52, 0xdac6, 0x0, 0x1);
        gbc.writeMem(0x26d5, { 0xcb, 0xf6 });
        gbc.writeMem(0xdac6, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x539e);
        EXPECT(gbc.pc(), 0x26d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdac6), 0xe6);
        // CB F6 008B
        gbc.setState(0x2598, 0x656e, 0x8310, 0x5a14, 0x2c12, 0xe407, 0x1, 0x0);
        gbc.writeMem(0x2598, { 0xcb, 0xf6 });
        gbc.writeMem(0xe407, { 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x656e);
        EXPECT(gbc.pc(), 0x259a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe407), 0xda);
        // CB F6 008D
        gbc.setState(0x5da9, 0xd82e, 0x8e50, 0xc320, 0xc589, 0xb9ee, 0x0, 0x1);
        gbc.writeMem(0x5da9, { 0xcb, 0xf6 });
        gbc.writeMem(0xb9ee, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xd82e);
        EXPECT(gbc.pc(), 0x5dab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9ee), 0xff);
        // CB F6 008E
        gbc.setState(0x39c, 0xe967, 0xa6b0, 0x8a9c, 0xa57c, 0xe4e3, 0x1, 0x1);
        gbc.writeMem(0x39c, { 0xcb, 0xf6 });
        gbc.writeMem(0xe4e3, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xe967);
        EXPECT(gbc.pc(), 0x39e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4e3), 0x61);
        // CB F6 008F
        gbc.setState(0x59d5, 0xc2cb, 0x4e70, 0xf310, 0x5fb4, 0xdb81, 0x1, 0x1);
        gbc.writeMem(0x59d5, { 0xcb, 0xf6 });
        gbc.writeMem(0xdb81, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xc2cb);
        EXPECT(gbc.pc(), 0x59d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb81), 0x5e);
        // CB F6 0090
        gbc.setState(0xa25c, 0xd0be, 0xdae0, 0xface, 0x221, 0x9600, 0x0, 0x1);
        gbc.writeMem(0x9600, { 0x5d });
        gbc.writeMem(0xa25c, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd0be);
        EXPECT(gbc.pc(), 0xa25e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9600), 0x5d);
        EXPECT(gbc.readMem(0xa25c), 0xcb);
        EXPECT(gbc.readMem(0xa25d), 0xf6);
        // CB F6 0091
        gbc.setState(0x7979, 0x1033, 0x40c0, 0x588b, 0x56d, 0xc88b, 0x1, 0x1);
        gbc.writeMem(0x7979, { 0xcb, 0xf6 });
        gbc.writeMem(0xc88b, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x1033);
        EXPECT(gbc.pc(), 0x797b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc88b), 0x62);
        // CB F6 0093
        gbc.setState(0x6675, 0xde25, 0xf400, 0x53cb, 0xa039, 0x5a19, 0x0, 0x1);
        gbc.writeMem(0x5a19, { 0x61 });
        gbc.writeMem(0x6675, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xde25);
        EXPECT(gbc.pc(), 0x6677);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0094
        gbc.setState(0x85ce, 0x462e, 0xa3a0, 0x7ab9, 0x2ae9, 0xfd95, 0x1, 0x1);
        gbc.writeMem(0x85ce, { 0xcb, 0xf6 });
        gbc.writeMem(0xfd95, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x462e);
        EXPECT(gbc.pc(), 0x85d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85ce), 0xcb);
        EXPECT(gbc.readMem(0x85cf), 0xf6);
        EXPECT(gbc.readMem(0xfd95), 0xdc);
        // CB F6 0095
        gbc.setState(0xa929, 0xc415, 0x3170, 0x8678, 0x834c, 0xcdcc, 0x0, 0x1);
        gbc.writeMem(0xa929, { 0xcb, 0xf6 });
        gbc.writeMem(0xcdcc, { 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xc415);
        EXPECT(gbc.pc(), 0xa92b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa929), 0xcb);
        EXPECT(gbc.readMem(0xa92a), 0xf6);
        EXPECT(gbc.readMem(0xcdcc), 0x5b);
        // CB F6 0096
        gbc.setState(0xda23, 0x604f, 0xcf60, 0xb68d, 0xf411, 0x98b7, 0x0, 0x0);
        gbc.writeMem(0x98b7, { 0x3b });
        gbc.writeMem(0xda23, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x604f);
        EXPECT(gbc.pc(), 0xda25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98b7), 0x7b);
        EXPECT(gbc.readMem(0xda23), 0xcb);
        EXPECT(gbc.readMem(0xda24), 0xf6);
        // CB F6 0097
        gbc.setState(0xb886, 0x3030, 0x1330, 0xe885, 0x770f, 0x56bd, 0x1, 0x0);
        gbc.writeMem(0x56bd, { 0x49 });
        gbc.writeMem(0xb886, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x3030);
        EXPECT(gbc.pc(), 0xb888);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb886), 0xcb);
        EXPECT(gbc.readMem(0xb887), 0xf6);
        // CB F6 0098
        gbc.setState(0x92b, 0xdb26, 0x22a0, 0x1d, 0xaa84, 0x1fe1, 0x0, 0x0);
        gbc.writeMem(0x92b, { 0xcb, 0xf6 });
        gbc.writeMem(0x1fe1, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xdb26);
        EXPECT(gbc.pc(), 0x92d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0099
        gbc.setState(0x3218, 0xc114, 0x2a50, 0x4343, 0xc848, 0xcafe, 0x1, 0x1);
        gbc.writeMem(0x3218, { 0xcb, 0xf6 });
        gbc.writeMem(0xcafe, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xc114);
        EXPECT(gbc.pc(), 0x321a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcafe), 0xdf);
        // CB F6 009A
        gbc.setState(0x1835, 0x4f48, 0x3870, 0x8da1, 0x4c58, 0xff18, 0x0, 0x1);
        gbc.writeMem(0x1835, { 0xcb, 0xf6 });
        gbc.writeMem(0xff18, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x4f48);
        EXPECT(gbc.pc(), 0x1837);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff18), 0x42);
        // CB F6 009E
        gbc.setState(0x89db, 0xa1b5, 0x300, 0xf4f7, 0x37e8, 0x440e, 0x0, 0x0);
        gbc.writeMem(0x440e, { 0x74 });
        gbc.writeMem(0x89db, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xa1b5);
        EXPECT(gbc.pc(), 0x89dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89db), 0xcb);
        EXPECT(gbc.readMem(0x89dc), 0xf6);
        // CB F6 009F
        gbc.setState(0xaf3, 0x425b, 0xf3b0, 0xff57, 0x1a92, 0xbb6, 0x1, 0x1);
        gbc.writeMem(0xaf3, { 0xcb, 0xf6 });
        gbc.writeMem(0xbb6, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x425b);
        EXPECT(gbc.pc(), 0xaf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 00A0
        gbc.setState(0x89fa, 0x2b11, 0xb30, 0x9a83, 0xd261, 0x6bcd, 0x0, 0x1);
        gbc.writeMem(0x6bcd, { 0x54 });
        gbc.writeMem(0x89fa, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x2b11);
        EXPECT(gbc.pc(), 0x89fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89fa), 0xcb);
        EXPECT(gbc.readMem(0x89fb), 0xf6);
        // CB F6 00A1
        gbc.setState(0xdc2, 0xfd87, 0x5e50, 0x4219, 0x3cb6, 0x4fa2, 0x1, 0x1);
        gbc.writeMem(0xdc2, { 0xcb, 0xf6 });
        gbc.writeMem(0x4fa2, { 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xfd87);
        EXPECT(gbc.pc(), 0xdc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 00A2
        gbc.setState(0x7def, 0x20d8, 0xf990, 0xabf0, 0xdaa7, 0xc044, 0x0, 0x0);
        gbc.writeMem(0x7def, { 0xcb, 0xf6 });
        gbc.writeMem(0xc044, { 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x20d8);
        EXPECT(gbc.pc(), 0x7df1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc044), 0x5c);
        // CB F6 00A5
        gbc.setState(0x656b, 0x614f, 0x11e0, 0xda82, 0x506f, 0x772b, 0x1, 0x0);
        gbc.writeMem(0x656b, { 0xcb, 0xf6 });
        gbc.writeMem(0x772b, { 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x614f);
        EXPECT(gbc.pc(), 0x656d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 00A6
        gbc.setState(0x3abf, 0x4018, 0xc340, 0xaa1e, 0xb64f, 0xf4a9, 0x0, 0x0);
        gbc.writeMem(0x3abf, { 0xcb, 0xf6 });
        gbc.writeMem(0xf4a9, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x4018);
        EXPECT(gbc.pc(), 0x3ac1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf4a9), 0xd4);
        // CB F6 00A8
        gbc.setState(0x2991, 0x82b0, 0x5e50, 0xe860, 0x28d2, 0xb499, 0x1, 0x1);
        gbc.writeMem(0x2991, { 0xcb, 0xf6 });
        gbc.writeMem(0xb499, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x82b0);
        EXPECT(gbc.pc(), 0x2993);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb499), 0xdc);
        // CB F6 00A9
        gbc.setState(0xba4b, 0x9551, 0x4110, 0xfb45, 0x3777, 0xcc65, 0x0, 0x1);
        gbc.writeMem(0xba4b, { 0xcb, 0xf6 });
        gbc.writeMem(0xcc65, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x9551);
        EXPECT(gbc.pc(), 0xba4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba4b), 0xcb);
        EXPECT(gbc.readMem(0xba4c), 0xf6);
        EXPECT(gbc.readMem(0xcc65), 0xc2);
        // CB F6 00AA
        gbc.setState(0x2644, 0x57f2, 0x8250, 0x519e, 0x2d4d, 0x92f7, 0x0, 0x0);
        gbc.writeMem(0x2644, { 0xcb, 0xf6 });
        gbc.writeMem(0x92f7, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x57f2);
        EXPECT(gbc.pc(), 0x2646);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92f7), 0x59);
        // CB F6 00AC
        gbc.setState(0x5f06, 0x10d2, 0xf070, 0x8cfa, 0x26b1, 0xdd75, 0x0, 0x0);
        gbc.writeMem(0x5f06, { 0xcb, 0xf6 });
        gbc.writeMem(0xdd75, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x10d2);
        EXPECT(gbc.pc(), 0x5f08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd75), 0x6a);
        // CB F6 00AE
        gbc.setState(0x2aa5, 0xa8a2, 0x1ae0, 0xcb0c, 0x5249, 0x9d3f, 0x0, 0x1);
        gbc.writeMem(0x2aa5, { 0xcb, 0xf6 });
        gbc.writeMem(0x9d3f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa8a2);
        EXPECT(gbc.pc(), 0x2aa7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d3f), 0xf1);
        // CB F6 00B0
        gbc.setState(0x14b0, 0xf94, 0xb8b0, 0x84d7, 0xe6d4, 0xb900, 0x1, 0x0);
        gbc.writeMem(0x14b0, { 0xcb, 0xf6 });
        gbc.writeMem(0xb900, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf94);
        EXPECT(gbc.pc(), 0x14b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb900), 0xf7);
        // CB F6 00B2
        gbc.setState(0xbdb7, 0x47ff, 0x58f0, 0x5666, 0x30d, 0xb529, 0x0, 0x0);
        gbc.writeMem(0xb529, { 0xf4 });
        gbc.writeMem(0xbdb7, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x47ff);
        EXPECT(gbc.pc(), 0xbdb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb529), 0xf4);
        EXPECT(gbc.readMem(0xbdb7), 0xcb);
        EXPECT(gbc.readMem(0xbdb8), 0xf6);
        // CB F6 00B3
        gbc.setState(0x15da, 0x1dae, 0x76a0, 0x1e7e, 0xec20, 0xa614, 0x1, 0x0);
        gbc.writeMem(0x15da, { 0xcb, 0xf6 });
        gbc.writeMem(0xa614, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x1dae);
        EXPECT(gbc.pc(), 0x15dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa614), 0x71);
        // CB F6 00B5
        gbc.setState(0xa551, 0xee56, 0xbaa0, 0x4449, 0x3ae7, 0xa816, 0x1, 0x1);
        gbc.writeMem(0xa551, { 0xcb, 0xf6 });
        gbc.writeMem(0xa816, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xee56);
        EXPECT(gbc.pc(), 0xa553);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa551), 0xcb);
        EXPECT(gbc.readMem(0xa552), 0xf6);
        EXPECT(gbc.readMem(0xa816), 0x5e);
        // CB F6 00B6
        gbc.setState(0xed28, 0x1641, 0x7c10, 0x71f5, 0xf0b3, 0xe5b6, 0x1, 0x0);
        gbc.writeMem(0xe5b6, { 0xac });
        gbc.writeMem(0xed28, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x1641);
        EXPECT(gbc.pc(), 0xed2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5b6), 0xec);
        EXPECT(gbc.readMem(0xed28), 0xcb);
        EXPECT(gbc.readMem(0xed29), 0xf6);
        // CB F6 00B7
        gbc.setState(0x3e0e, 0x8e70, 0x3500, 0xc4d6, 0x986c, 0xd366, 0x1, 0x1);
        gbc.writeMem(0x3e0e, { 0xcb, 0xf6 });
        gbc.writeMem(0xd366, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x8e70);
        EXPECT(gbc.pc(), 0x3e10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd366), 0xe8);
        // CB F6 00B9
        gbc.setState(0x3447, 0x3017, 0xca10, 0x9860, 0x8982, 0x7a77, 0x1, 0x1);
        gbc.writeMem(0x3447, { 0xcb, 0xf6 });
        gbc.writeMem(0x7a77, { 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x3017);
        EXPECT(gbc.pc(), 0x3449);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 00BA
        gbc.setState(0x1396, 0x6933, 0x60e0, 0xd6f3, 0x7b58, 0x8230, 0x1, 0x1);
        gbc.writeMem(0x1396, { 0xcb, 0xf6 });
        gbc.writeMem(0x8230, { 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x6933);
        EXPECT(gbc.pc(), 0x1398);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8230), 0xe2);
        // CB F6 00BB
        gbc.setState(0xd7e1, 0x81c7, 0xf300, 0x2a68, 0x77b0, 0x7f71, 0x1, 0x1);
        gbc.writeMem(0x7f71, { 0xc7 });
        gbc.writeMem(0xd7e1, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x81c7);
        EXPECT(gbc.pc(), 0xd7e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7e1), 0xcb);
        EXPECT(gbc.readMem(0xd7e2), 0xf6);
        // CB F6 00BC
        gbc.setState(0x892c, 0x6c80, 0xf740, 0x18a8, 0xea3e, 0x9548, 0x0, 0x1);
        gbc.writeMem(0x892c, { 0xcb, 0xf6 });
        gbc.writeMem(0x9548, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x6c80);
        EXPECT(gbc.pc(), 0x892e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x892c), 0xcb);
        EXPECT(gbc.readMem(0x892d), 0xf6);
        EXPECT(gbc.readMem(0x9548), 0xe0);
        // CB F6 00BD
        gbc.setState(0x4ce4, 0xff65, 0x1020, 0x39bb, 0xd8ff, 0x7cd3, 0x1, 0x1);
        gbc.writeMem(0x4ce4, { 0xcb, 0xf6 });
        gbc.writeMem(0x7cd3, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xff65);
        EXPECT(gbc.pc(), 0x4ce6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 00BE
        gbc.setState(0xbc03, 0xea30, 0xb500, 0x6de0, 0xf7e1, 0x8771, 0x1, 0x0);
        gbc.writeMem(0x8771, { 0xf5 });
        gbc.writeMem(0xbc03, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xea30);
        EXPECT(gbc.pc(), 0xbc05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8771), 0xf5);
        EXPECT(gbc.readMem(0xbc03), 0xcb);
        EXPECT(gbc.readMem(0xbc04), 0xf6);
        // CB F6 00BF
        gbc.setState(0x994f, 0xb256, 0xb150, 0xb15c, 0xd9e8, 0xf485, 0x0, 0x1);
        gbc.writeMem(0x994f, { 0xcb, 0xf6 });
        gbc.writeMem(0xf485, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb256);
        EXPECT(gbc.pc(), 0x9951);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x994f), 0xcb);
        EXPECT(gbc.readMem(0x9950), 0xf6);
        EXPECT(gbc.readMem(0xf485), 0x40);
        // CB F6 00C0
        gbc.setState(0x1d61, 0x3524, 0x2a50, 0x2527, 0xb65d, 0xd0a9, 0x0, 0x0);
        gbc.writeMem(0x1d61, { 0xcb, 0xf6 });
        gbc.writeMem(0xd0a9, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x3524);
        EXPECT(gbc.pc(), 0x1d63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0a9), 0xcb);
        // CB F6 00C2
        gbc.setState(0x74bc, 0xb2ff, 0x3760, 0x6e56, 0x6440, 0xa1e0, 0x0, 0x0);
        gbc.writeMem(0x74bc, { 0xcb, 0xf6 });
        gbc.writeMem(0xa1e0, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xb2ff);
        EXPECT(gbc.pc(), 0x74be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1e0), 0xed);
        // CB F6 00C3
        gbc.setState(0x6432, 0xfb2c, 0x7f80, 0x5cdb, 0x18dd, 0xd32a, 0x0, 0x0);
        gbc.writeMem(0x6432, { 0xcb, 0xf6 });
        gbc.writeMem(0xd32a, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xfb2c);
        EXPECT(gbc.pc(), 0x6434);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd32a), 0xce);
        // CB F6 00C4
        gbc.setState(0xbc5a, 0xc67e, 0x4cc0, 0x3878, 0x6ff1, 0x4f07, 0x0, 0x1);
        gbc.writeMem(0x4f07, { 0xc6 });
        gbc.writeMem(0xbc5a, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xc67e);
        EXPECT(gbc.pc(), 0xbc5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc5a), 0xcb);
        EXPECT(gbc.readMem(0xbc5b), 0xf6);
        // CB F6 00C6
        gbc.setState(0xa068, 0x98a5, 0x8840, 0x4a9f, 0x7fd1, 0xe8ea, 0x0, 0x1);
        gbc.writeMem(0xa068, { 0xcb, 0xf6 });
        gbc.writeMem(0xe8ea, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x98a5);
        EXPECT(gbc.pc(), 0xa06a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa068), 0xcb);
        EXPECT(gbc.readMem(0xa069), 0xf6);
        EXPECT(gbc.readMem(0xe8ea), 0x6f);
        // CB F6 00C8
        gbc.setState(0xe4e9, 0xef5, 0x4b50, 0xa7d4, 0xeff6, 0x9b68, 0x0, 0x1);
        gbc.writeMem(0x9b68, { 0xe });
        gbc.writeMem(0xe4e9, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xef5);
        EXPECT(gbc.pc(), 0xe4eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b68), 0x4e);
        EXPECT(gbc.readMem(0xe4e9), 0xcb);
        EXPECT(gbc.readMem(0xe4ea), 0xf6);
        // CB F6 00C9
        gbc.setState(0x28d7, 0x5660, 0xdfc0, 0xb224, 0xfb6e, 0xa523, 0x0, 0x1);
        gbc.writeMem(0x28d7, { 0xcb, 0xf6 });
        gbc.writeMem(0xa523, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x5660);
        EXPECT(gbc.pc(), 0x28d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa523), 0xda);
        // CB F6 00CA
        gbc.setState(0x759a, 0x1acb, 0x8a30, 0x9b08, 0x758b, 0x7a65, 0x0, 0x1);
        gbc.writeMem(0x759a, { 0xcb, 0xf6 });
        gbc.writeMem(0x7a65, { 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x1acb);
        EXPECT(gbc.pc(), 0x759c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 00CB
        gbc.setState(0x3e96, 0x4317, 0x8bb0, 0x8cfc, 0xd4a2, 0xf873, 0x1, 0x0);
        gbc.writeMem(0x3e96, { 0xcb, 0xf6 });
        gbc.writeMem(0xf873, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4317);
        EXPECT(gbc.pc(), 0x3e98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf873), 0xec);
        // CB F6 00CD
        gbc.setState(0x9057, 0xde36, 0xc080, 0xa683, 0x1614, 0x79cd, 0x1, 0x1);
        gbc.writeMem(0x79cd, { 0x42 });
        gbc.writeMem(0x9057, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xde36);
        EXPECT(gbc.pc(), 0x9059);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9057), 0xcb);
        EXPECT(gbc.readMem(0x9058), 0xf6);
        // CB F6 00CF
        gbc.setState(0x798b, 0xebda, 0xe840, 0x6a37, 0x8bf, 0x3a9c, 0x0, 0x0);
        gbc.writeMem(0x3a9c, { 0xff });
        gbc.writeMem(0x798b, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xebda);
        EXPECT(gbc.pc(), 0x798d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 00D0
        gbc.setState(0x1ccb, 0xea7e, 0x8a70, 0x1521, 0x38eb, 0xf15d, 0x0, 0x1);
        gbc.writeMem(0x1ccb, { 0xcb, 0xf6 });
        gbc.writeMem(0xf15d, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xea7e);
        EXPECT(gbc.pc(), 0x1ccd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf15d), 0xe9);
        // CB F6 00D1
        gbc.setState(0xcc4d, 0x2a27, 0xe690, 0x127, 0x7adb, 0x51c5, 0x1, 0x1);
        gbc.writeMem(0x51c5, { 0xd5 });
        gbc.writeMem(0xcc4d, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x2a27);
        EXPECT(gbc.pc(), 0xcc4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc4d), 0xcb);
        EXPECT(gbc.readMem(0xcc4e), 0xf6);
        // CB F6 00D2
        gbc.setState(0x69bf, 0xaf3, 0x220, 0xdcf9, 0x1099, 0xd282, 0x1, 0x1);
        gbc.writeMem(0x69bf, { 0xcb, 0xf6 });
        gbc.writeMem(0xd282, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xaf3);
        EXPECT(gbc.pc(), 0x69c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd282), 0x68);
        // CB F6 00D4
        gbc.setState(0xaa79, 0x77c2, 0xb500, 0x27dc, 0x1497, 0x8095, 0x1, 0x1);
        gbc.writeMem(0x8095, { 0x8f });
        gbc.writeMem(0xaa79, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x77c2);
        EXPECT(gbc.pc(), 0xaa7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8095), 0xcf);
        EXPECT(gbc.readMem(0xaa79), 0xcb);
        EXPECT(gbc.readMem(0xaa7a), 0xf6);
        // CB F6 00D6
        gbc.setState(0x8656, 0x5d52, 0x1dc0, 0xc161, 0x96fd, 0xaf27, 0x1, 0x1);
        gbc.writeMem(0x8656, { 0xcb, 0xf6 });
        gbc.writeMem(0xaf27, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x5d52);
        EXPECT(gbc.pc(), 0x8658);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8656), 0xcb);
        EXPECT(gbc.readMem(0x8657), 0xf6);
        EXPECT(gbc.readMem(0xaf27), 0xc4);
        // CB F6 00D7
        gbc.setState(0xed42, 0x163c, 0x11d0, 0xe17c, 0xeec, 0xbbe6, 0x1, 0x0);
        gbc.writeMem(0xbbe6, { 0x1b });
        gbc.writeMem(0xed42, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x163c);
        EXPECT(gbc.pc(), 0xed44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbe6), 0x5b);
        EXPECT(gbc.readMem(0xed42), 0xcb);
        EXPECT(gbc.readMem(0xed43), 0xf6);
        // CB F6 00D8
        gbc.setState(0x18c9, 0x8fe4, 0xbbf0, 0xf13, 0x5413, 0xc9db, 0x1, 0x0);
        gbc.writeMem(0x18c9, { 0xcb, 0xf6 });
        gbc.writeMem(0xc9db, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x8fe4);
        EXPECT(gbc.pc(), 0x18cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9db), 0x5f);
        // CB F6 00D9
        gbc.setState(0x29b3, 0xc983, 0x990, 0x2e15, 0x5915, 0x9565, 0x0, 0x1);
        gbc.writeMem(0x29b3, { 0xcb, 0xf6 });
        gbc.writeMem(0x9565, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc983);
        EXPECT(gbc.pc(), 0x29b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9565), 0x7b);
        // CB F6 00DA
        gbc.setState(0x7fe, 0x70ed, 0x59b0, 0xc71b, 0x1690, 0x6f93, 0x0, 0x0);
        gbc.writeMem(0x7fe, { 0xcb, 0xf6 });
        gbc.writeMem(0x6f93, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x70ed);
        EXPECT(gbc.pc(), 0x800);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 00DB
        gbc.setState(0xd068, 0x1606, 0x2730, 0xa8a, 0x7f1e, 0xe7d4, 0x0, 0x1);
        gbc.writeMem(0xd068, { 0xcb, 0xf6 });
        gbc.writeMem(0xe7d4, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x1606);
        EXPECT(gbc.pc(), 0xd06a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd068), 0xcb);
        EXPECT(gbc.readMem(0xd069), 0xf6);
        EXPECT(gbc.readMem(0xe7d4), 0xd0);
        // CB F6 00DC
        gbc.setState(0x1511, 0xc385, 0x9fb0, 0xd6f9, 0x266f, 0x9594, 0x1, 0x0);
        gbc.writeMem(0x1511, { 0xcb, 0xf6 });
        gbc.writeMem(0x9594, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xc385);
        EXPECT(gbc.pc(), 0x1513);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9594), 0xdc);
        // CB F6 00DD
        gbc.setState(0x5700, 0x8bfd, 0x7220, 0xb44d, 0xb724, 0x8412, 0x1, 0x1);
        gbc.writeMem(0x5700, { 0xcb, 0xf6 });
        gbc.writeMem(0x8412, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x8bfd);
        EXPECT(gbc.pc(), 0x5702);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8412), 0x4f);
        // CB F6 00DE
        gbc.setState(0x85c0, 0xc8d7, 0xdd10, 0x6cf9, 0x6514, 0x7b9d, 0x1, 0x1);
        gbc.writeMem(0x7b9d, { 0xf6 });
        gbc.writeMem(0x85c0, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xc8d7);
        EXPECT(gbc.pc(), 0x85c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85c0), 0xcb);
        EXPECT(gbc.readMem(0x85c1), 0xf6);
        // CB F6 00DF
        gbc.setState(0xd555, 0xdff9, 0xd60, 0xccb4, 0x7c7c, 0xc2c8, 0x1, 0x0);
        gbc.writeMem(0xc2c8, { 0x3a });
        gbc.writeMem(0xd555, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xdff9);
        EXPECT(gbc.pc(), 0xd557);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2c8), 0x7a);
        EXPECT(gbc.readMem(0xd555), 0xcb);
        EXPECT(gbc.readMem(0xd556), 0xf6);
        // CB F6 00E1
        gbc.setState(0x1f2b, 0xed5c, 0xf8b0, 0xca6e, 0xcff6, 0x70, 0x0, 0x1);
        gbc.writeMem(0x70, { 0x4b });
        gbc.writeMem(0x1f2b, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xed5c);
        EXPECT(gbc.pc(), 0x1f2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 00E3
        gbc.setState(0x9ddb, 0x8899, 0xaf0, 0x79a2, 0x7fe2, 0x9dd2, 0x0, 0x0);
        gbc.writeMem(0x9dd2, { 0xe1 });
        gbc.writeMem(0x9ddb, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x8899);
        EXPECT(gbc.pc(), 0x9ddd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dd2), 0xe1);
        EXPECT(gbc.readMem(0x9ddb), 0xcb);
        EXPECT(gbc.readMem(0x9ddc), 0xf6);
        // CB F6 00E4
        gbc.setState(0x22aa, 0xe0df, 0x2bd0, 0x59aa, 0x6167, 0x978f, 0x0, 0x1);
        gbc.writeMem(0x22aa, { 0xcb, 0xf6 });
        gbc.writeMem(0x978f, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xe0df);
        EXPECT(gbc.pc(), 0x22ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x978f), 0x7d);
        // CB F6 00E6
        gbc.setState(0x513, 0x6b7e, 0x2820, 0x9a6, 0x3308, 0xaca7, 0x0, 0x0);
        gbc.writeMem(0x513, { 0xcb, 0xf6 });
        gbc.writeMem(0xaca7, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x6b7e);
        EXPECT(gbc.pc(), 0x515);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaca7), 0xd8);
        // CB F6 00E7
        gbc.setState(0x6a34, 0x4320, 0x8360, 0x2d68, 0x4cd9, 0xff6b, 0x0, 0x1);
        gbc.writeMem(0x6a34, { 0xcb, 0xf6 });
        gbc.writeMem(0xff6b, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x4320);
        EXPECT(gbc.pc(), 0x6a36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff6b), 0xc6);
        // CB F6 00E8
        gbc.setState(0x92da, 0xe32e, 0xf5d0, 0x44ed, 0xfee4, 0x5ec5, 0x1, 0x1);
        gbc.writeMem(0x5ec5, { 0xd7 });
        gbc.writeMem(0x92da, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xe32e);
        EXPECT(gbc.pc(), 0x92dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92da), 0xcb);
        EXPECT(gbc.readMem(0x92db), 0xf6);
        // CB F6 00E9
        gbc.setState(0x6c4, 0xbfac, 0x43c0, 0xf673, 0x9e26, 0x663b, 0x1, 0x0);
        gbc.writeMem(0x6c4, { 0xcb, 0xf6 });
        gbc.writeMem(0x663b, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xbfac);
        EXPECT(gbc.pc(), 0x6c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 00EA
        gbc.setState(0xc784, 0x35b9, 0xab0, 0x9b0f, 0xdaba, 0xe2c5, 0x0, 0x0);
        gbc.writeMem(0xc784, { 0xcb, 0xf6 });
        gbc.writeMem(0xe2c5, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x35b9);
        EXPECT(gbc.pc(), 0xc786);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc784), 0xcb);
        EXPECT(gbc.readMem(0xc785), 0xf6);
        EXPECT(gbc.readMem(0xe2c5), 0xed);
        // CB F6 00EB
        gbc.setState(0xc45b, 0x77c, 0xdae0, 0xdf15, 0x8233, 0x40c5, 0x1, 0x0);
        gbc.writeMem(0x40c5, { 0xf8 });
        gbc.writeMem(0xc45b, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x77c);
        EXPECT(gbc.pc(), 0xc45d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc45b), 0xcb);
        EXPECT(gbc.readMem(0xc45c), 0xf6);
        // CB F6 00EC
        gbc.setState(0x7cc7, 0x875a, 0xb630, 0xbfea, 0xe983, 0x5393, 0x1, 0x1);
        gbc.writeMem(0x5393, { 0xf6 });
        gbc.writeMem(0x7cc7, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x875a);
        EXPECT(gbc.pc(), 0x7cc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 00ED
        gbc.setState(0x34c7, 0xe4de, 0x6560, 0x91e7, 0x5f8d, 0x8b8b, 0x0, 0x0);
        gbc.writeMem(0x34c7, { 0xcb, 0xf6 });
        gbc.writeMem(0x8b8b, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xe4de);
        EXPECT(gbc.pc(), 0x34c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b8b), 0xd7);
        // CB F6 00EE
        gbc.setState(0x5067, 0x5ed4, 0x7e50, 0xa727, 0xc2ae, 0xdc23, 0x1, 0x0);
        gbc.writeMem(0x5067, { 0xcb, 0xf6 });
        gbc.writeMem(0xdc23, { 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x5ed4);
        EXPECT(gbc.pc(), 0x5069);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc23), 0x74);
        // CB F6 00F0
        gbc.setState(0x2b82, 0x2830, 0x8fc0, 0xa33c, 0xf5de, 0x34fc, 0x0, 0x1);
        gbc.writeMem(0x2b82, { 0xcb, 0xf6 });
        gbc.writeMem(0x34fc, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x2830);
        EXPECT(gbc.pc(), 0x2b84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 00F2
        gbc.setState(0x1537, 0x3fe2, 0x2790, 0x6234, 0x3b4b, 0xc8cd, 0x0, 0x0);
        gbc.writeMem(0x1537, { 0xcb, 0xf6 });
        gbc.writeMem(0xc8cd, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x3fe2);
        EXPECT(gbc.pc(), 0x1539);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8cd), 0x64);
        // CB F6 00F3
        gbc.setState(0x6dd8, 0xb249, 0xd1e0, 0xbf9, 0x5738, 0xfa91, 0x1, 0x1);
        gbc.writeMem(0x6dd8, { 0xcb, 0xf6 });
        gbc.writeMem(0xfa91, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xb249);
        EXPECT(gbc.pc(), 0x6dda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa91), 0x66);
        // CB F6 00F4
        gbc.setState(0xe0cb, 0x34c0, 0x3fd0, 0xa8a5, 0xdb3b, 0xb2f1, 0x1, 0x1);
        gbc.writeMem(0xb2f1, { 0x18 });
        gbc.writeMem(0xe0cb, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x34c0);
        EXPECT(gbc.pc(), 0xe0cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2f1), 0x58);
        EXPECT(gbc.readMem(0xe0cb), 0xcb);
        EXPECT(gbc.readMem(0xe0cc), 0xf6);
        // CB F6 00F5
        gbc.setState(0xe695, 0xb38a, 0xba40, 0x64be, 0x5d5a, 0x637a, 0x1, 0x1);
        gbc.writeMem(0x637a, { 0xcf });
        gbc.writeMem(0xe695, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xb38a);
        EXPECT(gbc.pc(), 0xe697);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe695), 0xcb);
        EXPECT(gbc.readMem(0xe696), 0xf6);
        // CB F6 00F6
        gbc.setState(0xace, 0xc5b0, 0xff60, 0x901d, 0x2aed, 0xd259, 0x1, 0x1);
        gbc.writeMem(0xace, { 0xcb, 0xf6 });
        gbc.writeMem(0xd259, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xc5b0);
        EXPECT(gbc.pc(), 0xad0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd259), 0xf2);
        // CB F6 00F7
        gbc.setState(0x206d, 0x20b9, 0xaa50, 0x2af0, 0x7ea3, 0xfa73, 0x1, 0x1);
        gbc.writeMem(0x206d, { 0xcb, 0xf6 });
        gbc.writeMem(0xfa73, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x20b9);
        EXPECT(gbc.pc(), 0x206f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfa73), 0x58);
        // CB F6 00F8
        gbc.setState(0xbb96, 0x8003, 0x5a0, 0x9a8b, 0xca92, 0x9363, 0x0, 0x0);
        gbc.writeMem(0x9363, { 0xab });
        gbc.writeMem(0xbb96, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x8003);
        EXPECT(gbc.pc(), 0xbb98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9363), 0xeb);
        EXPECT(gbc.readMem(0xbb96), 0xcb);
        EXPECT(gbc.readMem(0xbb97), 0xf6);
        // CB F6 00F9
        gbc.setState(0xd983, 0x6c87, 0x91b0, 0xb6a0, 0x6bc9, 0xec6, 0x0, 0x0);
        gbc.writeMem(0xec6, { 0x69 });
        gbc.writeMem(0xd983, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x6c87);
        EXPECT(gbc.pc(), 0xd985);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd983), 0xcb);
        EXPECT(gbc.readMem(0xd984), 0xf6);
        // CB F6 00FA
        gbc.setState(0x5947, 0x4459, 0x4bc0, 0x6620, 0x925, 0x9f9a, 0x1, 0x0);
        gbc.writeMem(0x5947, { 0xcb, 0xf6 });
        gbc.writeMem(0x9f9a, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x4459);
        EXPECT(gbc.pc(), 0x5949);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f9a), 0xe5);
        // CB F6 00FC
        gbc.setState(0x7102, 0xf465, 0xf510, 0x36cb, 0x1065, 0xb4d6, 0x1, 0x0);
        gbc.writeMem(0x7102, { 0xcb, 0xf6 });
        gbc.writeMem(0xb4d6, { 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xf465);
        EXPECT(gbc.pc(), 0x7104);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4d6), 0x6e);
        // CB F6 00FD
        gbc.setState(0x49da, 0x2a34, 0xae20, 0x829d, 0x7938, 0x90fd, 0x1, 0x0);
        gbc.writeMem(0x49da, { 0xcb, 0xf6 });
        gbc.writeMem(0x90fd, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x2a34);
        EXPECT(gbc.pc(), 0x49dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90fd), 0x6c);
        // CB F6 00FE
        gbc.setState(0x8593, 0x9111, 0x97f0, 0xaa09, 0xf24e, 0xc35f, 0x1, 0x0);
        gbc.writeMem(0x8593, { 0xcb, 0xf6 });
        gbc.writeMem(0xc35f, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x9111);
        EXPECT(gbc.pc(), 0x8595);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8593), 0xcb);
        EXPECT(gbc.readMem(0x8594), 0xf6);
        EXPECT(gbc.readMem(0xc35f), 0x57);
        // CB F6 00FF
        gbc.setState(0x5790, 0x94c4, 0xd5f0, 0x3154, 0x3ac0, 0x530d, 0x1, 0x0);
        gbc.writeMem(0x530d, { 0x6c });
        gbc.writeMem(0x5790, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x94c4);
        EXPECT(gbc.pc(), 0x5792);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 0100
        gbc.setState(0x60e2, 0xe9fd, 0xc710, 0x3736, 0x3da3, 0x92e4, 0x0, 0x0);
        gbc.writeMem(0x60e2, { 0xcb, 0xf6 });
        gbc.writeMem(0x92e4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xe9fd);
        EXPECT(gbc.pc(), 0x60e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92e4), 0x4d);
        // CB F6 0101
        gbc.setState(0x8c47, 0xac03, 0x7c80, 0x965d, 0x9dc6, 0x86d8, 0x0, 0x0);
        gbc.writeMem(0x86d8, { 0x9b });
        gbc.writeMem(0x8c47, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xac03);
        EXPECT(gbc.pc(), 0x8c49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86d8), 0xdb);
        EXPECT(gbc.readMem(0x8c47), 0xcb);
        EXPECT(gbc.readMem(0x8c48), 0xf6);
        // CB F6 0102
        gbc.setState(0xb6a1, 0xb878, 0x70c0, 0x1062, 0xa03f, 0x8020, 0x1, 0x0);
        gbc.writeMem(0x8020, { 0x68 });
        gbc.writeMem(0xb6a1, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xb878);
        EXPECT(gbc.pc(), 0xb6a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8020), 0x68);
        EXPECT(gbc.readMem(0xb6a1), 0xcb);
        EXPECT(gbc.readMem(0xb6a2), 0xf6);
        // CB F6 0103
        gbc.setState(0xb79b, 0xff0d, 0x9880, 0x4489, 0x1de6, 0x6ca5, 0x1, 0x1);
        gbc.writeMem(0x6ca5, { 0x7b });
        gbc.writeMem(0xb79b, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xff0d);
        EXPECT(gbc.pc(), 0xb79d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb79b), 0xcb);
        EXPECT(gbc.readMem(0xb79c), 0xf6);
        // CB F6 0104
        gbc.setState(0x72ff, 0x326c, 0x5280, 0x5af, 0x5519, 0xf652, 0x1, 0x1);
        gbc.writeMem(0x72ff, { 0xcb, 0xf6 });
        gbc.writeMem(0xf652, { 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x326c);
        EXPECT(gbc.pc(), 0x7301);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf652), 0x6c);
        // CB F6 0105
        gbc.setState(0x963c, 0xba72, 0xa440, 0xa5bc, 0x6729, 0x9523, 0x1, 0x1);
        gbc.writeMem(0x9523, { 0xac });
        gbc.writeMem(0x963c, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xba72);
        EXPECT(gbc.pc(), 0x963e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9523), 0xec);
        EXPECT(gbc.readMem(0x963c), 0xcb);
        EXPECT(gbc.readMem(0x963d), 0xf6);
        // CB F6 0107
        gbc.setState(0xaa91, 0x5aa1, 0x6f20, 0x5b50, 0x62cd, 0x2f6e, 0x1, 0x1);
        gbc.writeMem(0x2f6e, { 0xcf });
        gbc.writeMem(0xaa91, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x5aa1);
        EXPECT(gbc.pc(), 0xaa93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa91), 0xcb);
        EXPECT(gbc.readMem(0xaa92), 0xf6);
        // CB F6 0108
        gbc.setState(0xbd1e, 0x53de, 0x3390, 0x3c63, 0xdb1, 0x4b44, 0x0, 0x1);
        gbc.writeMem(0x4b44, { 0x72 });
        gbc.writeMem(0xbd1e, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x53de);
        EXPECT(gbc.pc(), 0xbd20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd1e), 0xcb);
        EXPECT(gbc.readMem(0xbd1f), 0xf6);
        // CB F6 010A
        gbc.setState(0xac54, 0x7bb8, 0xbb80, 0x1141, 0x12c, 0xb52c, 0x1, 0x1);
        gbc.writeMem(0xac54, { 0xcb, 0xf6 });
        gbc.writeMem(0xb52c, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x7bb8);
        EXPECT(gbc.pc(), 0xac56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac54), 0xcb);
        EXPECT(gbc.readMem(0xac55), 0xf6);
        EXPECT(gbc.readMem(0xb52c), 0x63);
        // CB F6 010B
        gbc.setState(0x5c0f, 0x7306, 0xc040, 0x400d, 0xe56a, 0x2061, 0x0, 0x1);
        gbc.writeMem(0x2061, { 0x4a });
        gbc.writeMem(0x5c0f, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x7306);
        EXPECT(gbc.pc(), 0x5c11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 010C
        gbc.setState(0x7df, 0x1b2, 0xa6b0, 0x15a, 0x70dd, 0xeee2, 0x1, 0x0);
        gbc.writeMem(0x7df, { 0xcb, 0xf6 });
        gbc.writeMem(0xeee2, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x1b2);
        EXPECT(gbc.pc(), 0x7e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeee2), 0x7d);
        // CB F6 010D
        gbc.setState(0x4d47, 0xfad9, 0x3fa0, 0x3a50, 0x5b45, 0xf2ac, 0x0, 0x1);
        gbc.writeMem(0x4d47, { 0xcb, 0xf6 });
        gbc.writeMem(0xf2ac, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xfad9);
        EXPECT(gbc.pc(), 0x4d49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf2ac), 0x6a);
        // CB F6 010F
        gbc.setState(0x1c1f, 0x4ae0, 0x8e60, 0xc60f, 0xe99, 0xd2e5, 0x1, 0x0);
        gbc.writeMem(0x1c1f, { 0xcb, 0xf6 });
        gbc.writeMem(0xd2e5, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x4ae0);
        EXPECT(gbc.pc(), 0x1c21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2e5), 0x6b);
        // CB F6 0110
        gbc.setState(0xb1de, 0x246f, 0x4f40, 0x8baa, 0x7e77, 0xefca, 0x0, 0x1);
        gbc.writeMem(0xb1de, { 0xcb, 0xf6 });
        gbc.writeMem(0xefca, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x246f);
        EXPECT(gbc.pc(), 0xb1e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1de), 0xcb);
        EXPECT(gbc.readMem(0xb1df), 0xf6);
        EXPECT(gbc.readMem(0xefca), 0x4e);
        // CB F6 0111
        gbc.setState(0x8084, 0xca53, 0xb310, 0xc2fb, 0x69f8, 0x9673, 0x1, 0x1);
        gbc.writeMem(0x8084, { 0xcb, 0xf6 });
        gbc.writeMem(0x9673, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xca53);
        EXPECT(gbc.pc(), 0x8086);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8084), 0xcb);
        EXPECT(gbc.readMem(0x8085), 0xf6);
        EXPECT(gbc.readMem(0x9673), 0xfb);
        // CB F6 0112
        gbc.setState(0x303e, 0x1f06, 0x7040, 0x4b20, 0xe7f2, 0x92c9, 0x0, 0x1);
        gbc.writeMem(0x303e, { 0xcb, 0xf6 });
        gbc.writeMem(0x92c9, { 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x1f06);
        EXPECT(gbc.pc(), 0x3040);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92c9), 0x45);
        // CB F6 0113
        gbc.setState(0x1e42, 0xbf37, 0x1530, 0x2bf9, 0x2ce0, 0xdd01, 0x0, 0x1);
        gbc.writeMem(0x1e42, { 0xcb, 0xf6 });
        gbc.writeMem(0xdd01, { 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xbf37);
        EXPECT(gbc.pc(), 0x1e44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd01), 0xf9);
        // CB F6 0114
        gbc.setState(0x604b, 0x8877, 0x8570, 0xf16b, 0x68b0, 0xae23, 0x0, 0x1);
        gbc.writeMem(0x604b, { 0xcb, 0xf6 });
        gbc.writeMem(0xae23, { 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x8877);
        EXPECT(gbc.pc(), 0x604d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae23), 0xc2);
        // CB F6 0116
        gbc.setState(0x490c, 0x3d9f, 0x1150, 0xa1a, 0xa08a, 0xc996, 0x1, 0x1);
        gbc.writeMem(0x490c, { 0xcb, 0xf6 });
        gbc.writeMem(0xc996, { 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x3d9f);
        EXPECT(gbc.pc(), 0x490e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc996), 0x5c);
        // CB F6 0117
        gbc.setState(0xa421, 0xcff0, 0x4720, 0xce34, 0x106b, 0xb3de, 0x0, 0x0);
        gbc.writeMem(0xa421, { 0xcb, 0xf6 });
        gbc.writeMem(0xb3de, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xcff0);
        EXPECT(gbc.pc(), 0xa423);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa421), 0xcb);
        EXPECT(gbc.readMem(0xa422), 0xf6);
        EXPECT(gbc.readMem(0xb3de), 0xfe);
        // CB F6 0119
        gbc.setState(0xc203, 0xbc4b, 0xffc0, 0xb38a, 0x543b, 0xcea3, 0x0, 0x0);
        gbc.writeMem(0xc203, { 0xcb, 0xf6 });
        gbc.writeMem(0xcea3, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xbc4b);
        EXPECT(gbc.pc(), 0xc205);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc203), 0xcb);
        EXPECT(gbc.readMem(0xc204), 0xf6);
        EXPECT(gbc.readMem(0xcea3), 0xfc);
        // CB F6 011A
        gbc.setState(0x40cd, 0xddc4, 0x2d40, 0x6163, 0xc294, 0x61ba, 0x0, 0x1);
        gbc.writeMem(0x40cd, { 0xcb, 0xf6 });
        gbc.writeMem(0x61ba, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xddc4);
        EXPECT(gbc.pc(), 0x40cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 011D
        gbc.setState(0xc6c3, 0x3efd, 0xbbc0, 0xcdae, 0xf574, 0xef57, 0x0, 0x1);
        gbc.writeMem(0xc6c3, { 0xcb, 0xf6 });
        gbc.writeMem(0xef57, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x3efd);
        EXPECT(gbc.pc(), 0xc6c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6c3), 0xcb);
        EXPECT(gbc.readMem(0xc6c4), 0xf6);
        EXPECT(gbc.readMem(0xef57), 0xdc);
        // CB F6 011E
        gbc.setState(0x8603, 0xe6ce, 0xe350, 0x8833, 0x8727, 0xb28b, 0x1, 0x0);
        gbc.writeMem(0x8603, { 0xcb, 0xf6 });
        gbc.writeMem(0xb28b, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xe6ce);
        EXPECT(gbc.pc(), 0x8605);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8603), 0xcb);
        EXPECT(gbc.readMem(0x8604), 0xf6);
        EXPECT(gbc.readMem(0xb28b), 0x76);
        // CB F6 011F
        gbc.setState(0x869a, 0x5e99, 0x8ed0, 0x454, 0x9630, 0x73f6, 0x1, 0x1);
        gbc.writeMem(0x73f6, { 0x7d });
        gbc.writeMem(0x869a, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x5e99);
        EXPECT(gbc.pc(), 0x869c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x869a), 0xcb);
        EXPECT(gbc.readMem(0x869b), 0xf6);
        // CB F6 0121
        gbc.setState(0x6c2, 0x4aa4, 0x9a80, 0x8868, 0x97ed, 0xe041, 0x0, 0x0);
        gbc.writeMem(0x6c2, { 0xcb, 0xf6 });
        gbc.writeMem(0xe041, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x4aa4);
        EXPECT(gbc.pc(), 0x6c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe041), 0xd1);
        // CB F6 0122
        gbc.setState(0xcdb9, 0x4a61, 0xbce0, 0x527e, 0x69ae, 0x89cc, 0x0, 0x1);
        gbc.writeMem(0x89cc, { 0xff });
        gbc.writeMem(0xcdb9, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x4a61);
        EXPECT(gbc.pc(), 0xcdbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89cc), 0xff);
        EXPECT(gbc.readMem(0xcdb9), 0xcb);
        EXPECT(gbc.readMem(0xcdba), 0xf6);
        // CB F6 0123
        gbc.setState(0xafd9, 0xb985, 0xb130, 0x16f7, 0xd4ab, 0xe679, 0x1, 0x0);
        gbc.writeMem(0xafd9, { 0xcb, 0xf6 });
        gbc.writeMem(0xe679, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xb985);
        EXPECT(gbc.pc(), 0xafdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafd9), 0xcb);
        EXPECT(gbc.readMem(0xafda), 0xf6);
        EXPECT(gbc.readMem(0xe679), 0xf2);
        // CB F6 0124
        gbc.setState(0xc14, 0x325b, 0x37d0, 0x6990, 0xc359, 0x261a, 0x0, 0x0);
        gbc.writeMem(0xc14, { 0xcb, 0xf6 });
        gbc.writeMem(0x261a, { 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x325b);
        EXPECT(gbc.pc(), 0xc16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 0125
        gbc.setState(0xa3fe, 0x266, 0xf250, 0x7152, 0x9126, 0x878c, 0x0, 0x1);
        gbc.writeMem(0x878c, { 0xc2 });
        gbc.writeMem(0xa3fe, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x266);
        EXPECT(gbc.pc(), 0xa400);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x878c), 0xc2);
        EXPECT(gbc.readMem(0xa3fe), 0xcb);
        EXPECT(gbc.readMem(0xa3ff), 0xf6);
        // CB F6 0126
        gbc.setState(0x345a, 0xf61c, 0x2190, 0x6a5c, 0x18c5, 0x9ee0, 0x1, 0x0);
        gbc.writeMem(0x345a, { 0xcb, 0xf6 });
        gbc.writeMem(0x9ee0, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xf61c);
        EXPECT(gbc.pc(), 0x345c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ee0), 0xf5);
        // CB F6 0127
        gbc.setState(0x530b, 0xa56a, 0xb770, 0x835f, 0xf179, 0x7431, 0x1, 0x1);
        gbc.writeMem(0x530b, { 0xcb, 0xf6 });
        gbc.writeMem(0x7431, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xa56a);
        EXPECT(gbc.pc(), 0x530d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 0128
        gbc.setState(0xeb6e, 0xa5c4, 0xfe40, 0xd7e7, 0x602d, 0x9f34, 0x0, 0x1);
        gbc.writeMem(0x9f34, { 0x2 });
        gbc.writeMem(0xeb6e, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xa5c4);
        EXPECT(gbc.pc(), 0xeb70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f34), 0x42);
        EXPECT(gbc.readMem(0xeb6e), 0xcb);
        EXPECT(gbc.readMem(0xeb6f), 0xf6);
        // CB F6 0129
        gbc.setState(0x6512, 0x4ab4, 0x6480, 0x99ec, 0xff8b, 0x67f8, 0x0, 0x0);
        gbc.writeMem(0x6512, { 0xcb, 0xf6 });
        gbc.writeMem(0x67f8, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x4ab4);
        EXPECT(gbc.pc(), 0x6514);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 012A
        gbc.setState(0xc582, 0xc463, 0x6b10, 0x10bd, 0xefad, 0xcbc5, 0x0, 0x0);
        gbc.writeMem(0xc582, { 0xcb, 0xf6 });
        gbc.writeMem(0xcbc5, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xc463);
        EXPECT(gbc.pc(), 0xc584);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc582), 0xcb);
        EXPECT(gbc.readMem(0xc583), 0xf6);
        EXPECT(gbc.readMem(0xcbc5), 0x62);
        // CB F6 012B
        gbc.setState(0xc5ae, 0x23f3, 0xb810, 0x185f, 0xb825, 0xb302, 0x1, 0x0);
        gbc.writeMem(0xb302, { 0x1c });
        gbc.writeMem(0xc5ae, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x23f3);
        EXPECT(gbc.pc(), 0xc5b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb302), 0x5c);
        EXPECT(gbc.readMem(0xc5ae), 0xcb);
        EXPECT(gbc.readMem(0xc5af), 0xf6);
        // CB F6 012D
        gbc.setState(0x9242, 0x69bf, 0x5360, 0x77fd, 0x2ee9, 0x54c3, 0x0, 0x1);
        gbc.writeMem(0x54c3, { 0xf7 });
        gbc.writeMem(0x9242, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x69bf);
        EXPECT(gbc.pc(), 0x9244);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9242), 0xcb);
        EXPECT(gbc.readMem(0x9243), 0xf6);
        // CB F6 012E
        gbc.setState(0x4299, 0x4c50, 0x92b0, 0x9dbe, 0x421b, 0x8be3, 0x1, 0x0);
        gbc.writeMem(0x4299, { 0xcb, 0xf6 });
        gbc.writeMem(0x8be3, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x4c50);
        EXPECT(gbc.pc(), 0x429b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8be3), 0xdc);
        // CB F6 012F
        gbc.setState(0xf15, 0x39d4, 0x9580, 0xdbde, 0x6694, 0x7410, 0x1, 0x0);
        gbc.writeMem(0xf15, { 0xcb, 0xf6 });
        gbc.writeMem(0x7410, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x39d4);
        EXPECT(gbc.pc(), 0xf17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0132
        gbc.setState(0xca2e, 0xa223, 0x6130, 0xb46e, 0xa7e6, 0xdc1e, 0x1, 0x0);
        gbc.writeMem(0xca2e, { 0xcb, 0xf6 });
        gbc.writeMem(0xdc1e, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xa223);
        EXPECT(gbc.pc(), 0xca30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca2e), 0xcb);
        EXPECT(gbc.readMem(0xca2f), 0xf6);
        EXPECT(gbc.readMem(0xdc1e), 0x71);
        // CB F6 0133
        gbc.setState(0x1989, 0x73b4, 0xeb40, 0xae59, 0x7332, 0x3bc, 0x1, 0x0);
        gbc.writeMem(0x3bc, { 0xca });
        gbc.writeMem(0x1989, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x73b4);
        EXPECT(gbc.pc(), 0x198b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0134
        gbc.setState(0xca9c, 0x3f0d, 0x3360, 0x2342, 0xd6cf, 0x5466, 0x1, 0x1);
        gbc.writeMem(0x5466, { 0xfd });
        gbc.writeMem(0xca9c, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x3f0d);
        EXPECT(gbc.pc(), 0xca9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca9c), 0xcb);
        EXPECT(gbc.readMem(0xca9d), 0xf6);
        // CB F6 0135
        gbc.setState(0x8397, 0x90, 0x8780, 0xd0e7, 0xbed1, 0x4b61, 0x0, 0x1);
        gbc.writeMem(0x4b61, { 0xee });
        gbc.writeMem(0x8397, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x90);
        EXPECT(gbc.pc(), 0x8399);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8397), 0xcb);
        EXPECT(gbc.readMem(0x8398), 0xf6);
        // CB F6 0137
        gbc.setState(0x23d4, 0x2422, 0x24c0, 0xc202, 0xf691, 0xd927, 0x0, 0x1);
        gbc.writeMem(0x23d4, { 0xcb, 0xf6 });
        gbc.writeMem(0xd927, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x2422);
        EXPECT(gbc.pc(), 0x23d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd927), 0x6f);
        // CB F6 0138
        gbc.setState(0xbc01, 0xa65, 0x1930, 0xa95a, 0x4f74, 0x2603, 0x1, 0x0);
        gbc.writeMem(0x2603, { 0xdb });
        gbc.writeMem(0xbc01, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xa65);
        EXPECT(gbc.pc(), 0xbc03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc01), 0xcb);
        EXPECT(gbc.readMem(0xbc02), 0xf6);
        // CB F6 0139
        gbc.setState(0x8188, 0xcf20, 0x6f50, 0x15dc, 0x50fd, 0x6bd5, 0x0, 0x1);
        gbc.writeMem(0x6bd5, { 0xf4 });
        gbc.writeMem(0x8188, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xcf20);
        EXPECT(gbc.pc(), 0x818a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8188), 0xcb);
        EXPECT(gbc.readMem(0x8189), 0xf6);
        // CB F6 013A
        gbc.setState(0xc08, 0x20ad, 0x9a60, 0xc327, 0x3a6d, 0xfa04, 0x0, 0x0);
        gbc.writeMem(0xc08, { 0xcb, 0xf6 });
        gbc.writeMem(0xfa04, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x20ad);
        EXPECT(gbc.pc(), 0xc0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa04), 0x4f);
        // CB F6 013B
        gbc.setState(0xd2fc, 0xad5b, 0x1520, 0x9bca, 0x46e7, 0xd26e, 0x1, 0x0);
        gbc.writeMem(0xd26e, { 0x9c });
        gbc.writeMem(0xd2fc, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xad5b);
        EXPECT(gbc.pc(), 0xd2fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd26e), 0xdc);
        EXPECT(gbc.readMem(0xd2fc), 0xcb);
        EXPECT(gbc.readMem(0xd2fd), 0xf6);
        // CB F6 013C
        gbc.setState(0x659b, 0xc544, 0x54d0, 0x4e2b, 0xa557, 0x6302, 0x0, 0x0);
        gbc.writeMem(0x6302, { 0xdd });
        gbc.writeMem(0x659b, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xc544);
        EXPECT(gbc.pc(), 0x659d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 013D
        gbc.setState(0x49e5, 0xaa34, 0xe6d0, 0x3451, 0x6cc1, 0x5166, 0x1, 0x1);
        gbc.writeMem(0x49e5, { 0xcb, 0xf6 });
        gbc.writeMem(0x5166, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xaa34);
        EXPECT(gbc.pc(), 0x49e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 013E
        gbc.setState(0x782, 0x9181, 0x7330, 0xcb46, 0xb22e, 0x34c0, 0x1, 0x1);
        gbc.writeMem(0x782, { 0xcb, 0xf6 });
        gbc.writeMem(0x34c0, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x9181);
        EXPECT(gbc.pc(), 0x784);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 0141
        gbc.setState(0x3ec3, 0x5dd0, 0x8d80, 0xe416, 0xb833, 0x1b5f, 0x0, 0x1);
        gbc.writeMem(0x1b5f, { 0xf1 });
        gbc.writeMem(0x3ec3, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x5dd0);
        EXPECT(gbc.pc(), 0x3ec5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0142
        gbc.setState(0x7024, 0x54e6, 0x3040, 0xd697, 0x1cfc, 0xda0b, 0x1, 0x1);
        gbc.writeMem(0x7024, { 0xcb, 0xf6 });
        gbc.writeMem(0xda0b, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x54e6);
        EXPECT(gbc.pc(), 0x7026);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda0b), 0x78);
        // CB F6 0143
        gbc.setState(0xabdc, 0x8634, 0x5380, 0x80aa, 0xaead, 0xc5ab, 0x1, 0x1);
        gbc.writeMem(0xabdc, { 0xcb, 0xf6 });
        gbc.writeMem(0xc5ab, { 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x8634);
        EXPECT(gbc.pc(), 0xabde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabdc), 0xcb);
        EXPECT(gbc.readMem(0xabdd), 0xf6);
        EXPECT(gbc.readMem(0xc5ab), 0xc6);
        // CB F6 0144
        gbc.setState(0x4130, 0x3f23, 0xa3a0, 0x4226, 0xba1f, 0xb604, 0x0, 0x1);
        gbc.writeMem(0x4130, { 0xcb, 0xf6 });
        gbc.writeMem(0xb604, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x3f23);
        EXPECT(gbc.pc(), 0x4132);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb604), 0x5b);
        // CB F6 0145
        gbc.setState(0x67eb, 0xc4a0, 0xb540, 0xa138, 0x259c, 0xb623, 0x0, 0x0);
        gbc.writeMem(0x67eb, { 0xcb, 0xf6 });
        gbc.writeMem(0xb623, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xc4a0);
        EXPECT(gbc.pc(), 0x67ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb623), 0xec);
        // CB F6 0146
        gbc.setState(0x5ffd, 0x7e4a, 0x38f0, 0xd4d3, 0xc6c, 0x8e23, 0x1, 0x0);
        gbc.writeMem(0x5ffd, { 0xcb, 0xf6 });
        gbc.writeMem(0x8e23, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x7e4a);
        EXPECT(gbc.pc(), 0x5fff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e23), 0xe6);
        // CB F6 0147
        gbc.setState(0x72d6, 0x41d1, 0x9de0, 0x5099, 0xa955, 0xa476, 0x1, 0x0);
        gbc.writeMem(0x72d6, { 0xcb, 0xf6 });
        gbc.writeMem(0xa476, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x41d1);
        EXPECT(gbc.pc(), 0x72d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa476), 0x59);
        // CB F6 0148
        gbc.setState(0xe217, 0xbc4b, 0xb0, 0xa778, 0x4b5, 0x8160, 0x0, 0x1);
        gbc.writeMem(0x8160, { 0xb });
        gbc.writeMem(0xe217, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xbc4b);
        EXPECT(gbc.pc(), 0xe219);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8160), 0x4b);
        EXPECT(gbc.readMem(0xe217), 0xcb);
        EXPECT(gbc.readMem(0xe218), 0xf6);
        // CB F6 0149
        gbc.setState(0x9755, 0xaf5c, 0x4c80, 0xe2e0, 0xf289, 0x6c36, 0x1, 0x0);
        gbc.writeMem(0x6c36, { 0x45 });
        gbc.writeMem(0x9755, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xaf5c);
        EXPECT(gbc.pc(), 0x9757);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9755), 0xcb);
        EXPECT(gbc.readMem(0x9756), 0xf6);
        // CB F6 014A
        gbc.setState(0xb8a7, 0x2fef, 0xcfd0, 0x99b7, 0x297d, 0x8057, 0x0, 0x0);
        gbc.writeMem(0x8057, { 0x7e });
        gbc.writeMem(0xb8a7, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x2fef);
        EXPECT(gbc.pc(), 0xb8a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8057), 0x7e);
        EXPECT(gbc.readMem(0xb8a7), 0xcb);
        EXPECT(gbc.readMem(0xb8a8), 0xf6);
        // CB F6 014C
        gbc.setState(0x7d9f, 0x1b3b, 0xfdf0, 0x94ff, 0xffb3, 0x2b1d, 0x0, 0x0);
        gbc.writeMem(0x2b1d, { 0x5e });
        gbc.writeMem(0x7d9f, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x1b3b);
        EXPECT(gbc.pc(), 0x7da1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 014D
        gbc.setState(0x4412, 0xf095, 0x6d50, 0xb6df, 0xaded, 0xf91e, 0x1, 0x0);
        gbc.writeMem(0x4412, { 0xcb, 0xf6 });
        gbc.writeMem(0xf91e, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xf095);
        EXPECT(gbc.pc(), 0x4414);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf91e), 0x4c);
        // CB F6 014E
        gbc.setState(0x21c1, 0x6c69, 0x1710, 0x3283, 0xbdf5, 0xd06f, 0x0, 0x0);
        gbc.writeMem(0x21c1, { 0xcb, 0xf6 });
        gbc.writeMem(0xd06f, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x6c69);
        EXPECT(gbc.pc(), 0x21c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd06f), 0xdd);
        // CB F6 0150
        gbc.setState(0x5ec6, 0x920f, 0xa940, 0xce94, 0xad0f, 0x1542, 0x0, 0x0);
        gbc.writeMem(0x1542, { 0x4a });
        gbc.writeMem(0x5ec6, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x920f);
        EXPECT(gbc.pc(), 0x5ec8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0153
        gbc.setState(0x303e, 0x9c26, 0xc8e0, 0x39a9, 0x3d92, 0xd1e8, 0x0, 0x1);
        gbc.writeMem(0x303e, { 0xcb, 0xf6 });
        gbc.writeMem(0xd1e8, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x9c26);
        EXPECT(gbc.pc(), 0x3040);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1e8), 0x77);
        // CB F6 0154
        gbc.setState(0x62a4, 0x9d38, 0xa720, 0xc527, 0x4a82, 0xf537, 0x1, 0x1);
        gbc.writeMem(0x62a4, { 0xcb, 0xf6 });
        gbc.writeMem(0xf537, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x9d38);
        EXPECT(gbc.pc(), 0x62a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf537), 0xdc);
        // CB F6 0155
        gbc.setState(0xa8f2, 0xfe99, 0x7100, 0x883e, 0x4bf1, 0xe43d, 0x0, 0x0);
        gbc.writeMem(0xa8f2, { 0xcb, 0xf6 });
        gbc.writeMem(0xe43d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xfe99);
        EXPECT(gbc.pc(), 0xa8f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8f2), 0xcb);
        EXPECT(gbc.readMem(0xa8f3), 0xf6);
        EXPECT(gbc.readMem(0xe43d), 0xcb);
        // CB F6 0156
        gbc.setState(0x8e2b, 0x147d, 0x98c0, 0x363c, 0xbfd, 0xeb86, 0x0, 0x0);
        gbc.writeMem(0x8e2b, { 0xcb, 0xf6 });
        gbc.writeMem(0xeb86, { 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x147d);
        EXPECT(gbc.pc(), 0x8e2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e2b), 0xcb);
        EXPECT(gbc.readMem(0x8e2c), 0xf6);
        EXPECT(gbc.readMem(0xeb86), 0x71);
        // CB F6 0157
        gbc.setState(0x73ef, 0x1c63, 0x20d0, 0x8430, 0xf754, 0x8aaf, 0x0, 0x0);
        gbc.writeMem(0x73ef, { 0xcb, 0xf6 });
        gbc.writeMem(0x8aaf, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x1c63);
        EXPECT(gbc.pc(), 0x73f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8aaf), 0xf1);
        // CB F6 0159
        gbc.setState(0xcd19, 0xbda, 0x64f0, 0x9267, 0xf42e, 0xea4, 0x0, 0x0);
        gbc.writeMem(0xea4, { 0xe9 });
        gbc.writeMem(0xcd19, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xbda);
        EXPECT(gbc.pc(), 0xcd1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd19), 0xcb);
        EXPECT(gbc.readMem(0xcd1a), 0xf6);
        // CB F6 015A
        gbc.setState(0xd672, 0xb1c0, 0xa5a0, 0x7748, 0x4ce4, 0xb014, 0x1, 0x0);
        gbc.writeMem(0xb014, { 0x80 });
        gbc.writeMem(0xd672, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xb1c0);
        EXPECT(gbc.pc(), 0xd674);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb014), 0xc0);
        EXPECT(gbc.readMem(0xd672), 0xcb);
        EXPECT(gbc.readMem(0xd673), 0xf6);
        // CB F6 015B
        gbc.setState(0xa236, 0xa8f0, 0x1070, 0xb6f9, 0x9fc9, 0x5815, 0x0, 0x1);
        gbc.writeMem(0x5815, { 0x5b });
        gbc.writeMem(0xa236, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xa8f0);
        EXPECT(gbc.pc(), 0xa238);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa236), 0xcb);
        EXPECT(gbc.readMem(0xa237), 0xf6);
        // CB F6 015D
        gbc.setState(0xc103, 0x2676, 0xe3b0, 0x3ec, 0x29ce, 0xc6ec, 0x1, 0x0);
        gbc.writeMem(0xc103, { 0xcb, 0xf6 });
        gbc.writeMem(0xc6ec, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x2676);
        EXPECT(gbc.pc(), 0xc105);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc103), 0xcb);
        EXPECT(gbc.readMem(0xc104), 0xf6);
        EXPECT(gbc.readMem(0xc6ec), 0x69);
        // CB F6 0160
        gbc.setState(0x3e51, 0xcaf4, 0xd780, 0x1d44, 0x5181, 0x9fe5, 0x1, 0x1);
        gbc.writeMem(0x3e51, { 0xcb, 0xf6 });
        gbc.writeMem(0x9fe5, { 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xcaf4);
        EXPECT(gbc.pc(), 0x3e53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fe5), 0xfd);
        // CB F6 0163
        gbc.setState(0x55d6, 0x3f28, 0x6f30, 0xd444, 0xa07, 0x407a, 0x0, 0x1);
        gbc.writeMem(0x407a, { 0xf5 });
        gbc.writeMem(0x55d6, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x3f28);
        EXPECT(gbc.pc(), 0x55d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 0164
        gbc.setState(0x9c69, 0x1e38, 0x8110, 0xf2ff, 0x3a22, 0x3ff4, 0x1, 0x0);
        gbc.writeMem(0x3ff4, { 0x72 });
        gbc.writeMem(0x9c69, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x1e38);
        EXPECT(gbc.pc(), 0x9c6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c69), 0xcb);
        EXPECT(gbc.readMem(0x9c6a), 0xf6);
        // CB F6 0166
        gbc.setState(0xf43, 0xd7e8, 0xdba0, 0xda47, 0xf6fa, 0xcc87, 0x0, 0x1);
        gbc.writeMem(0xf43, { 0xcb, 0xf6 });
        gbc.writeMem(0xcc87, { 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xd7e8);
        EXPECT(gbc.pc(), 0xf45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc87), 0x4e);
        // CB F6 0167
        gbc.setState(0x333c, 0xc3ea, 0x92a0, 0x8b8c, 0xed7e, 0xc8d0, 0x1, 0x1);
        gbc.writeMem(0x333c, { 0xcb, 0xf6 });
        gbc.writeMem(0xc8d0, { 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xc3ea);
        EXPECT(gbc.pc(), 0x333e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8d0), 0x66);
        // CB F6 0168
        gbc.setState(0x89c1, 0xe6e8, 0x3370, 0xbce6, 0x7d18, 0x1a7a, 0x0, 0x0);
        gbc.writeMem(0x1a7a, { 0x52 });
        gbc.writeMem(0x89c1, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe6e8);
        EXPECT(gbc.pc(), 0x89c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89c1), 0xcb);
        EXPECT(gbc.readMem(0x89c2), 0xf6);
        // CB F6 016A
        gbc.setState(0x47c2, 0x782, 0x3da0, 0x3bed, 0x18e, 0xae49, 0x0, 0x0);
        gbc.writeMem(0x47c2, { 0xcb, 0xf6 });
        gbc.writeMem(0xae49, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x782);
        EXPECT(gbc.pc(), 0x47c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae49), 0xd8);
        // CB F6 016C
        gbc.setState(0x61b, 0x9fe4, 0xf470, 0x37fb, 0xfb8c, 0xa28c, 0x1, 0x0);
        gbc.writeMem(0x61b, { 0xcb, 0xf6 });
        gbc.writeMem(0xa28c, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x9fe4);
        EXPECT(gbc.pc(), 0x61d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa28c), 0x76);
        // CB F6 016D
        gbc.setState(0x795d, 0x93c, 0xaa00, 0xbdf4, 0x8bf5, 0x89ab, 0x0, 0x0);
        gbc.writeMem(0x795d, { 0xcb, 0xf6 });
        gbc.writeMem(0x89ab, { 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x93c);
        EXPECT(gbc.pc(), 0x795f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89ab), 0xd6);
        // CB F6 016F
        gbc.setState(0x88f2, 0x3988, 0x4420, 0x4e82, 0xa5d3, 0xc1c0, 0x1, 0x0);
        gbc.writeMem(0x88f2, { 0xcb, 0xf6 });
        gbc.writeMem(0xc1c0, { 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x3988);
        EXPECT(gbc.pc(), 0x88f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88f2), 0xcb);
        EXPECT(gbc.readMem(0x88f3), 0xf6);
        EXPECT(gbc.readMem(0xc1c0), 0x67);
        // CB F6 0170
        gbc.setState(0xd030, 0x2bfe, 0x8820, 0x1556, 0x8a5f, 0x21ff, 0x1, 0x0);
        gbc.writeMem(0x21ff, { 0x65 });
        gbc.writeMem(0xd030, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x2bfe);
        EXPECT(gbc.pc(), 0xd032);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd030), 0xcb);
        EXPECT(gbc.readMem(0xd031), 0xf6);
        // CB F6 0172
        gbc.setState(0xd4c3, 0x8c85, 0xb0e0, 0xa9c4, 0x9f52, 0xf06b, 0x0, 0x1);
        gbc.writeMem(0xd4c3, { 0xcb, 0xf6 });
        gbc.writeMem(0xf06b, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x8c85);
        EXPECT(gbc.pc(), 0xd4c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4c3), 0xcb);
        EXPECT(gbc.readMem(0xd4c4), 0xf6);
        EXPECT(gbc.readMem(0xf06b), 0x59);
        // CB F6 0174
        gbc.setState(0xc06c, 0x2ed4, 0x8f10, 0x7773, 0x764c, 0xe7fa, 0x0, 0x1);
        gbc.writeMem(0xc06c, { 0xcb, 0xf6 });
        gbc.writeMem(0xe7fa, { 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x2ed4);
        EXPECT(gbc.pc(), 0xc06e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc06c), 0xcb);
        EXPECT(gbc.readMem(0xc06d), 0xf6);
        EXPECT(gbc.readMem(0xe7fa), 0x60);
        // CB F6 0176
        gbc.setState(0x50ff, 0x9360, 0xbc00, 0xfdf6, 0xe2e7, 0x649d, 0x1, 0x0);
        gbc.writeMem(0x50ff, { 0xcb, 0xf6 });
        gbc.writeMem(0x649d, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x9360);
        EXPECT(gbc.pc(), 0x5101);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0177
        gbc.setState(0x8aab, 0x9002, 0xf830, 0xe2cc, 0x9403, 0x227e, 0x1, 0x0);
        gbc.writeMem(0x227e, { 0xd3 });
        gbc.writeMem(0x8aab, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x9002);
        EXPECT(gbc.pc(), 0x8aad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8aab), 0xcb);
        EXPECT(gbc.readMem(0x8aac), 0xf6);
        // CB F6 0178
        gbc.setState(0xda61, 0x62ea, 0x7670, 0x9e6c, 0xbbe0, 0x3e58, 0x1, 0x0);
        gbc.writeMem(0x3e58, { 0xc3 });
        gbc.writeMem(0xda61, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x62ea);
        EXPECT(gbc.pc(), 0xda63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda61), 0xcb);
        EXPECT(gbc.readMem(0xda62), 0xf6);
        // CB F6 0179
        gbc.setState(0xb924, 0xef56, 0x340, 0xf782, 0xeab3, 0xb314, 0x0, 0x1);
        gbc.writeMem(0xb314, { 0xc9 });
        gbc.writeMem(0xb924, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xef56);
        EXPECT(gbc.pc(), 0xb926);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb314), 0xc9);
        EXPECT(gbc.readMem(0xb924), 0xcb);
        EXPECT(gbc.readMem(0xb925), 0xf6);
        // CB F6 017B
        gbc.setState(0x8960, 0x65f2, 0x3cb0, 0x995c, 0x2a3b, 0xe66e, 0x1, 0x1);
        gbc.writeMem(0x8960, { 0xcb, 0xf6 });
        gbc.writeMem(0xe66e, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x65f2);
        EXPECT(gbc.pc(), 0x8962);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8960), 0xcb);
        EXPECT(gbc.readMem(0x8961), 0xf6);
        EXPECT(gbc.readMem(0xe66e), 0x40);
        // CB F6 017C
        gbc.setState(0xabf0, 0x9844, 0xd440, 0x829a, 0xd9ac, 0xc22a, 0x0, 0x0);
        gbc.writeMem(0xabf0, { 0xcb, 0xf6 });
        gbc.writeMem(0xc22a, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x9844);
        EXPECT(gbc.pc(), 0xabf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabf0), 0xcb);
        EXPECT(gbc.readMem(0xabf1), 0xf6);
        EXPECT(gbc.readMem(0xc22a), 0xc5);
        // CB F6 017D
        gbc.setState(0xcf87, 0x7929, 0xded0, 0x69ec, 0x9283, 0xba73, 0x0, 0x1);
        gbc.writeMem(0xba73, { 0x77 });
        gbc.writeMem(0xcf87, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x7929);
        EXPECT(gbc.pc(), 0xcf89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba73), 0x77);
        EXPECT(gbc.readMem(0xcf87), 0xcb);
        EXPECT(gbc.readMem(0xcf88), 0xf6);
        // CB F6 017F
        gbc.setState(0xcee8, 0xfd07, 0x56c0, 0x4b91, 0x8ba1, 0xbfcc, 0x0, 0x0);
        gbc.writeMem(0xbfcc, { 0x47 });
        gbc.writeMem(0xcee8, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xfd07);
        EXPECT(gbc.pc(), 0xceea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfcc), 0x47);
        EXPECT(gbc.readMem(0xcee8), 0xcb);
        EXPECT(gbc.readMem(0xcee9), 0xf6);
        // CB F6 0181
        gbc.setState(0xaa03, 0x5d07, 0xe950, 0xe4cc, 0x9411, 0x77ce, 0x0, 0x1);
        gbc.writeMem(0x77ce, { 0xf7 });
        gbc.writeMem(0xaa03, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x5d07);
        EXPECT(gbc.pc(), 0xaa05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa03), 0xcb);
        EXPECT(gbc.readMem(0xaa04), 0xf6);
        // CB F6 0182
        gbc.setState(0xa05f, 0x5e58, 0x6470, 0xfda, 0x7fc6, 0x3fc4, 0x0, 0x0);
        gbc.writeMem(0x3fc4, { 0xd7 });
        gbc.writeMem(0xa05f, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x5e58);
        EXPECT(gbc.pc(), 0xa061);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa05f), 0xcb);
        EXPECT(gbc.readMem(0xa060), 0xf6);
        // CB F6 0183
        gbc.setState(0x4966, 0x1e9a, 0xd010, 0xbab8, 0x98e4, 0xcfcf, 0x1, 0x1);
        gbc.writeMem(0x4966, { 0xcb, 0xf6 });
        gbc.writeMem(0xcfcf, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x1e9a);
        EXPECT(gbc.pc(), 0x4968);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfcf), 0x63);
        // CB F6 0185
        gbc.setState(0x423b, 0x5e6, 0xdc60, 0x6d80, 0x922c, 0x33e7, 0x1, 0x0);
        gbc.writeMem(0x33e7, { 0x58 });
        gbc.writeMem(0x423b, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x5e6);
        EXPECT(gbc.pc(), 0x423d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0186
        gbc.setState(0x3417, 0x6083, 0x4c80, 0xf1d9, 0xb449, 0xd4e2, 0x1, 0x0);
        gbc.writeMem(0x3417, { 0xcb, 0xf6 });
        gbc.writeMem(0xd4e2, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x6083);
        EXPECT(gbc.pc(), 0x3419);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4e2), 0xfe);
        // CB F6 0187
        gbc.setState(0xbdce, 0xb79, 0xf8c0, 0x4ef6, 0x9d29, 0xd663, 0x0, 0x1);
        gbc.writeMem(0xbdce, { 0xcb, 0xf6 });
        gbc.writeMem(0xd663, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xb79);
        EXPECT(gbc.pc(), 0xbdd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdce), 0xcb);
        EXPECT(gbc.readMem(0xbdcf), 0xf6);
        EXPECT(gbc.readMem(0xd663), 0xcf);
        // CB F6 0188
        gbc.setState(0xeb26, 0xd69f, 0xeeb0, 0x1c05, 0x98c9, 0x2b, 0x1, 0x1);
        gbc.writeMem(0x2b, { 0x5c });
        gbc.writeMem(0xeb26, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xd69f);
        EXPECT(gbc.pc(), 0xeb28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb26), 0xcb);
        EXPECT(gbc.readMem(0xeb27), 0xf6);
        // CB F6 0189
        gbc.setState(0x5a8a, 0x4bf2, 0x87c0, 0xa0ca, 0xeccc, 0x6620, 0x0, 0x0);
        gbc.writeMem(0x5a8a, { 0xcb, 0xf6 });
        gbc.writeMem(0x6620, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x4bf2);
        EXPECT(gbc.pc(), 0x5a8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 018A
        gbc.setState(0x8257, 0x13bb, 0x2810, 0xd88, 0x43b3, 0x480d, 0x1, 0x0);
        gbc.writeMem(0x480d, { 0x49 });
        gbc.writeMem(0x8257, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x13bb);
        EXPECT(gbc.pc(), 0x8259);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8257), 0xcb);
        EXPECT(gbc.readMem(0x8258), 0xf6);
        // CB F6 018C
        gbc.setState(0x8f82, 0xa357, 0xd8d0, 0x1201, 0xd7c6, 0x45ca, 0x0, 0x1);
        gbc.writeMem(0x45ca, { 0xfd });
        gbc.writeMem(0x8f82, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xa357);
        EXPECT(gbc.pc(), 0x8f84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f82), 0xcb);
        EXPECT(gbc.readMem(0x8f83), 0xf6);
        // CB F6 018D
        gbc.setState(0x96ce, 0xae04, 0x2180, 0xf7dc, 0x1911, 0xb378, 0x1, 0x1);
        gbc.writeMem(0x96ce, { 0xcb, 0xf6 });
        gbc.writeMem(0xb378, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xae04);
        EXPECT(gbc.pc(), 0x96d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96ce), 0xcb);
        EXPECT(gbc.readMem(0x96cf), 0xf6);
        EXPECT(gbc.readMem(0xb378), 0x6f);
        // CB F6 018E
        gbc.setState(0x74c6, 0x776, 0x72b0, 0x4d97, 0x46b0, 0xd064, 0x1, 0x1);
        gbc.writeMem(0x74c6, { 0xcb, 0xf6 });
        gbc.writeMem(0xd064, { 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x776);
        EXPECT(gbc.pc(), 0x74c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd064), 0x4e);
        // CB F6 0190
        gbc.setState(0x6c57, 0x6ac0, 0xdb80, 0x4d49, 0x15ab, 0xb6bc, 0x1, 0x1);
        gbc.writeMem(0x6c57, { 0xcb, 0xf6 });
        gbc.writeMem(0xb6bc, { 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x6ac0);
        EXPECT(gbc.pc(), 0x6c59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6bc), 0x60);
        // CB F6 0191
        gbc.setState(0x2f20, 0x4c57, 0x1a80, 0xd4a1, 0x1fcd, 0x166e, 0x1, 0x1);
        gbc.writeMem(0x166e, { 0x7b });
        gbc.writeMem(0x2f20, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x4c57);
        EXPECT(gbc.pc(), 0x2f22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0192
        gbc.setState(0xe045, 0xce76, 0xd820, 0xb1a5, 0xe964, 0x5a3c, 0x0, 0x0);
        gbc.writeMem(0x5a3c, { 0x6c });
        gbc.writeMem(0xe045, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xce76);
        EXPECT(gbc.pc(), 0xe047);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe045), 0xcb);
        EXPECT(gbc.readMem(0xe046), 0xf6);
        // CB F6 0196
        gbc.setState(0xe65b, 0x45d9, 0x2a30, 0xfec9, 0xd6ca, 0xa831, 0x1, 0x0);
        gbc.writeMem(0xa831, { 0xd8 });
        gbc.writeMem(0xe65b, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x45d9);
        EXPECT(gbc.pc(), 0xe65d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa831), 0xd8);
        EXPECT(gbc.readMem(0xe65b), 0xcb);
        EXPECT(gbc.readMem(0xe65c), 0xf6);
        // CB F6 0198
        gbc.setState(0xabb4, 0x7161, 0xf140, 0xe99f, 0xa8dd, 0x4abf, 0x1, 0x1);
        gbc.writeMem(0x4abf, { 0xd0 });
        gbc.writeMem(0xabb4, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x7161);
        EXPECT(gbc.pc(), 0xabb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabb4), 0xcb);
        EXPECT(gbc.readMem(0xabb5), 0xf6);
        // CB F6 0199
        gbc.setState(0xe326, 0x1fea, 0x83f0, 0x5c23, 0x723f, 0xda7e, 0x1, 0x1);
        gbc.writeMem(0xda7e, { 0x11 });
        gbc.writeMem(0xe326, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x1fea);
        EXPECT(gbc.pc(), 0xe328);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda7e), 0x51);
        EXPECT(gbc.readMem(0xe326), 0xcb);
        EXPECT(gbc.readMem(0xe327), 0xf6);
        // CB F6 019A
        gbc.setState(0xcdd7, 0x4385, 0x4d90, 0x697, 0x38e4, 0x20d3, 0x1, 0x1);
        gbc.writeMem(0x20d3, { 0x70 });
        gbc.writeMem(0xcdd7, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x4385);
        EXPECT(gbc.pc(), 0xcdd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdd7), 0xcb);
        EXPECT(gbc.readMem(0xcdd8), 0xf6);
        // CB F6 019C
        gbc.setState(0x6d15, 0xa9eb, 0xa130, 0x12b8, 0x6a90, 0xef37, 0x1, 0x0);
        gbc.writeMem(0x6d15, { 0xcb, 0xf6 });
        gbc.writeMem(0xef37, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xa9eb);
        EXPECT(gbc.pc(), 0x6d17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef37), 0xf6);
        // CB F6 019D
        gbc.setState(0x7a1c, 0x61e0, 0xcd10, 0x1b25, 0x95a3, 0xec41, 0x0, 0x0);
        gbc.writeMem(0x7a1c, { 0xcb, 0xf6 });
        gbc.writeMem(0xec41, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x61e0);
        EXPECT(gbc.pc(), 0x7a1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec41), 0x77);
        // CB F6 019E
        gbc.setState(0x7f4f, 0x4954, 0x8f0, 0x4cf, 0xa040, 0x1316, 0x0, 0x1);
        gbc.writeMem(0x1316, { 0xf0 });
        gbc.writeMem(0x7f4f, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x4954);
        EXPECT(gbc.pc(), 0x7f51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 019F
        gbc.setState(0x1bac, 0x6d59, 0xbf20, 0x9d46, 0x181c, 0x30e2, 0x0, 0x1);
        gbc.writeMem(0x1bac, { 0xcb, 0xf6 });
        gbc.writeMem(0x30e2, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x6d59);
        EXPECT(gbc.pc(), 0x1bae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 01A2
        gbc.setState(0xcec0, 0x3f8d, 0xb380, 0xe6a2, 0xf742, 0x889d, 0x1, 0x1);
        gbc.writeMem(0x889d, { 0x0 });
        gbc.writeMem(0xcec0, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x3f8d);
        EXPECT(gbc.pc(), 0xcec2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x889d), 0x40);
        EXPECT(gbc.readMem(0xcec0), 0xcb);
        EXPECT(gbc.readMem(0xcec1), 0xf6);
        // CB F6 01A3
        gbc.setState(0xa3ee, 0x608b, 0xec90, 0xebbb, 0x9920, 0x343b, 0x1, 0x0);
        gbc.writeMem(0x343b, { 0x67 });
        gbc.writeMem(0xa3ee, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x608b);
        EXPECT(gbc.pc(), 0xa3f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3ee), 0xcb);
        EXPECT(gbc.readMem(0xa3ef), 0xf6);
        // CB F6 01A4
        gbc.setState(0x5b97, 0xb677, 0xc5a0, 0x63c9, 0xec26, 0x2729, 0x1, 0x1);
        gbc.writeMem(0x2729, { 0xc2 });
        gbc.writeMem(0x5b97, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xb677);
        EXPECT(gbc.pc(), 0x5b99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 01A5
        gbc.setState(0xe2c, 0xbfb8, 0x70e0, 0xe4ec, 0xcf3b, 0x6be6, 0x0, 0x1);
        gbc.writeMem(0xe2c, { 0xcb, 0xf6 });
        gbc.writeMem(0x6be6, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xbfb8);
        EXPECT(gbc.pc(), 0xe2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 01A6
        gbc.setState(0xddd4, 0x2079, 0xd8c0, 0x6e15, 0x6ebb, 0x5305, 0x1, 0x0);
        gbc.writeMem(0x5305, { 0x51 });
        gbc.writeMem(0xddd4, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x2079);
        EXPECT(gbc.pc(), 0xddd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddd4), 0xcb);
        EXPECT(gbc.readMem(0xddd5), 0xf6);
        // CB F6 01A8
        gbc.setState(0xe35e, 0x3dcf, 0xd2c0, 0x2baa, 0x85f2, 0x352d, 0x1, 0x0);
        gbc.writeMem(0x352d, { 0x43 });
        gbc.writeMem(0xe35e, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x3dcf);
        EXPECT(gbc.pc(), 0xe360);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe35e), 0xcb);
        EXPECT(gbc.readMem(0xe35f), 0xf6);
        // CB F6 01A9
        gbc.setState(0x24f2, 0x15ee, 0x9a50, 0xd2e6, 0x56ca, 0xe859, 0x1, 0x1);
        gbc.writeMem(0x24f2, { 0xcb, 0xf6 });
        gbc.writeMem(0xe859, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x15ee);
        EXPECT(gbc.pc(), 0x24f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe859), 0x7c);
        // CB F6 01AB
        gbc.setState(0x23a1, 0xc16, 0x7450, 0x6ca1, 0xf78c, 0x2e28, 0x1, 0x1);
        gbc.writeMem(0x23a1, { 0xcb, 0xf6 });
        gbc.writeMem(0x2e28, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xc16);
        EXPECT(gbc.pc(), 0x23a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 01AC
        gbc.setState(0x73bf, 0x3637, 0x8c80, 0x8724, 0xd0f3, 0x6268, 0x1, 0x0);
        gbc.writeMem(0x6268, { 0xda });
        gbc.writeMem(0x73bf, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x3637);
        EXPECT(gbc.pc(), 0x73c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 01AD
        gbc.setState(0xadc3, 0x492e, 0x6ac0, 0x8573, 0x4b01, 0x2401, 0x0, 0x0);
        gbc.writeMem(0x2401, { 0xed });
        gbc.writeMem(0xadc3, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x492e);
        EXPECT(gbc.pc(), 0xadc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadc3), 0xcb);
        EXPECT(gbc.readMem(0xadc4), 0xf6);
        // CB F6 01AE
        gbc.setState(0xc2c6, 0x854a, 0xad70, 0x6c53, 0xbad8, 0x3d1c, 0x0, 0x1);
        gbc.writeMem(0x3d1c, { 0xc1 });
        gbc.writeMem(0xc2c6, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x854a);
        EXPECT(gbc.pc(), 0xc2c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2c6), 0xcb);
        EXPECT(gbc.readMem(0xc2c7), 0xf6);
        // CB F6 01B0
        gbc.setState(0x46f6, 0x5c3d, 0xd9f0, 0x5b0c, 0x6fdc, 0x6d38, 0x1, 0x0);
        gbc.writeMem(0x46f6, { 0xcb, 0xf6 });
        gbc.writeMem(0x6d38, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x5c3d);
        EXPECT(gbc.pc(), 0x46f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 01B1
        gbc.setState(0x9a97, 0x78bb, 0x8310, 0x3448, 0xecf4, 0xb7f6, 0x1, 0x0);
        gbc.writeMem(0x9a97, { 0xcb, 0xf6 });
        gbc.writeMem(0xb7f6, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x78bb);
        EXPECT(gbc.pc(), 0x9a99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a97), 0xcb);
        EXPECT(gbc.readMem(0x9a98), 0xf6);
        EXPECT(gbc.readMem(0xb7f6), 0xed);
        // CB F6 01B3
        gbc.setState(0x14f8, 0xa0a, 0x6450, 0x4598, 0xa89b, 0xd49, 0x1, 0x1);
        gbc.writeMem(0xd49, { 0x7d });
        gbc.writeMem(0x14f8, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xa0a);
        EXPECT(gbc.pc(), 0x14fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 01B7
        gbc.setState(0x8a4a, 0x6a9b, 0xea80, 0x26aa, 0x44de, 0x7a44, 0x1, 0x1);
        gbc.writeMem(0x7a44, { 0x60 });
        gbc.writeMem(0x8a4a, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x6a9b);
        EXPECT(gbc.pc(), 0x8a4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a4a), 0xcb);
        EXPECT(gbc.readMem(0x8a4b), 0xf6);
        // CB F6 01B9
        gbc.setState(0x76b, 0x48d8, 0xeb10, 0xbeae, 0x94f6, 0xaf23, 0x0, 0x1);
        gbc.writeMem(0x76b, { 0xcb, 0xf6 });
        gbc.writeMem(0xaf23, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x48d8);
        EXPECT(gbc.pc(), 0x76d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf23), 0xcd);
        // CB F6 01BA
        gbc.setState(0xea21, 0xd99b, 0xf9d0, 0xfdc9, 0x9c62, 0xabf7, 0x1, 0x0);
        gbc.writeMem(0xabf7, { 0xf3 });
        gbc.writeMem(0xea21, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xd99b);
        EXPECT(gbc.pc(), 0xea23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabf7), 0xf3);
        EXPECT(gbc.readMem(0xea21), 0xcb);
        EXPECT(gbc.readMem(0xea22), 0xf6);
        // CB F6 01BB
        gbc.setState(0xac2a, 0x91b8, 0x70c0, 0x1c3f, 0x442c, 0x1018, 0x1, 0x0);
        gbc.writeMem(0x1018, { 0xfe });
        gbc.writeMem(0xac2a, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x91b8);
        EXPECT(gbc.pc(), 0xac2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac2a), 0xcb);
        EXPECT(gbc.readMem(0xac2b), 0xf6);
        // CB F6 01BD
        gbc.setState(0x45ed, 0x96db, 0xfa80, 0x2db2, 0xe6b4, 0xb01e, 0x0, 0x0);
        gbc.writeMem(0x45ed, { 0xcb, 0xf6 });
        gbc.writeMem(0xb01e, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x96db);
        EXPECT(gbc.pc(), 0x45ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb01e), 0xdc);
        // CB F6 01BF
        gbc.setState(0x6038, 0xa06c, 0x46c0, 0xcb22, 0x1230, 0x7946, 0x0, 0x1);
        gbc.writeMem(0x6038, { 0xcb, 0xf6 });
        gbc.writeMem(0x7946, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xa06c);
        EXPECT(gbc.pc(), 0x603a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 01C1
        gbc.setState(0x360a, 0xa2c2, 0xee10, 0xe819, 0xf1ef, 0xe902, 0x1, 0x1);
        gbc.writeMem(0x360a, { 0xcb, 0xf6 });
        gbc.writeMem(0xe902, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xa2c2);
        EXPECT(gbc.pc(), 0x360c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe902), 0xf7);
        // CB F6 01C2
        gbc.setState(0xadba, 0x6841, 0xc9a0, 0x5c13, 0x7730, 0xd079, 0x0, 0x1);
        gbc.writeMem(0xadba, { 0xcb, 0xf6 });
        gbc.writeMem(0xd079, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x6841);
        EXPECT(gbc.pc(), 0xadbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadba), 0xcb);
        EXPECT(gbc.readMem(0xadbb), 0xf6);
        EXPECT(gbc.readMem(0xd079), 0x7b);
        // CB F6 01C3
        gbc.setState(0x9eae, 0x7907, 0x4210, 0xd873, 0x5735, 0xd2d8, 0x1, 0x1);
        gbc.writeMem(0x9eae, { 0xcb, 0xf6 });
        gbc.writeMem(0xd2d8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x7907);
        EXPECT(gbc.pc(), 0x9eb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9eae), 0xcb);
        EXPECT(gbc.readMem(0x9eaf), 0xf6);
        EXPECT(gbc.readMem(0xd2d8), 0x43);
        // CB F6 01C4
        gbc.setState(0xddec, 0x27a9, 0xc140, 0x675e, 0x18a6, 0xc374, 0x1, 0x0);
        gbc.writeMem(0xc374, { 0x70 });
        gbc.writeMem(0xddec, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x27a9);
        EXPECT(gbc.pc(), 0xddee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc374), 0x70);
        EXPECT(gbc.readMem(0xddec), 0xcb);
        EXPECT(gbc.readMem(0xdded), 0xf6);
        // CB F6 01C5
        gbc.setState(0x20ba, 0x7c2a, 0xbc90, 0xa59c, 0xf874, 0x875b, 0x1, 0x0);
        gbc.writeMem(0x20ba, { 0xcb, 0xf6 });
        gbc.writeMem(0x875b, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7c2a);
        EXPECT(gbc.pc(), 0x20bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x875b), 0xc7);
        // CB F6 01C6
        gbc.setState(0x23aa, 0x4e3e, 0xd40, 0xa8e, 0x33f, 0xf549, 0x0, 0x1);
        gbc.writeMem(0x23aa, { 0xcb, 0xf6 });
        gbc.writeMem(0xf549, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x4e3e);
        EXPECT(gbc.pc(), 0x23ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf549), 0x6b);
        // CB F6 01C7
        gbc.setState(0xb03e, 0xb315, 0xe500, 0x2dd6, 0xc6ec, 0xf40d, 0x0, 0x1);
        gbc.writeMem(0xb03e, { 0xcb, 0xf6 });
        gbc.writeMem(0xf40d, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xb315);
        EXPECT(gbc.pc(), 0xb040);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb03e), 0xcb);
        EXPECT(gbc.readMem(0xb03f), 0xf6);
        EXPECT(gbc.readMem(0xf40d), 0x46);
        // CB F6 01C8
        gbc.setState(0x4e1f, 0x3b31, 0xe370, 0x62c2, 0x1416, 0x672c, 0x1, 0x1);
        gbc.writeMem(0x4e1f, { 0xcb, 0xf6 });
        gbc.writeMem(0x672c, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x3b31);
        EXPECT(gbc.pc(), 0x4e21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 01C9
        gbc.setState(0x4429, 0xbdee, 0xd8e0, 0x5a9c, 0x41d1, 0xbe25, 0x1, 0x0);
        gbc.writeMem(0x4429, { 0xcb, 0xf6 });
        gbc.writeMem(0xbe25, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xbdee);
        EXPECT(gbc.pc(), 0x442b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe25), 0xcb);
        // CB F6 01CB
        gbc.setState(0x56d6, 0xf925, 0xc110, 0xd79f, 0x58ff, 0xaaf6, 0x1, 0x1);
        gbc.writeMem(0x56d6, { 0xcb, 0xf6 });
        gbc.writeMem(0xaaf6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xf925);
        EXPECT(gbc.pc(), 0x56d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaf6), 0x4c);
        // CB F6 01CD
        gbc.setState(0x57a5, 0x5a00, 0x1390, 0x2f6d, 0xa10d, 0xc365, 0x1, 0x1);
        gbc.writeMem(0x57a5, { 0xcb, 0xf6 });
        gbc.writeMem(0xc365, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x5a00);
        EXPECT(gbc.pc(), 0x57a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc365), 0x78);
        // CB F6 01CE
        gbc.setState(0xa9fa, 0x7d35, 0x75b0, 0x339b, 0xe1f1, 0x656d, 0x1, 0x1);
        gbc.writeMem(0x656d, { 0x68 });
        gbc.writeMem(0xa9fa, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x7d35);
        EXPECT(gbc.pc(), 0xa9fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9fa), 0xcb);
        EXPECT(gbc.readMem(0xa9fb), 0xf6);
        // CB F6 01CF
        gbc.setState(0x4da8, 0x5891, 0x2060, 0x358f, 0x5c7a, 0xbf91, 0x1, 0x1);
        gbc.writeMem(0x4da8, { 0xcb, 0xf6 });
        gbc.writeMem(0xbf91, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x5891);
        EXPECT(gbc.pc(), 0x4daa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf91), 0xe6);
        // CB F6 01D0
        gbc.setState(0x17d8, 0x3222, 0x65a0, 0x30f5, 0x4a9f, 0xb668, 0x0, 0x1);
        gbc.writeMem(0x17d8, { 0xcb, 0xf6 });
        gbc.writeMem(0xb668, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x3222);
        EXPECT(gbc.pc(), 0x17da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb668), 0xfa);
        // CB F6 01D1
        gbc.setState(0x3a7b, 0x2ec3, 0xac10, 0x3a78, 0x6c3b, 0x10f7, 0x1, 0x0);
        gbc.writeMem(0x10f7, { 0x42 });
        gbc.writeMem(0x3a7b, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x2ec3);
        EXPECT(gbc.pc(), 0x3a7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 01D3
        gbc.setState(0xab31, 0xf06c, 0x8620, 0xf21e, 0xea7d, 0xb9f, 0x1, 0x0);
        gbc.writeMem(0xb9f, { 0x71 });
        gbc.writeMem(0xab31, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xf06c);
        EXPECT(gbc.pc(), 0xab33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab31), 0xcb);
        EXPECT(gbc.readMem(0xab32), 0xf6);
        // CB F6 01D4
        gbc.setState(0x1e26, 0x6899, 0x8c90, 0xab55, 0xd0c7, 0xe74e, 0x1, 0x0);
        gbc.writeMem(0x1e26, { 0xcb, 0xf6 });
        gbc.writeMem(0xe74e, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x6899);
        EXPECT(gbc.pc(), 0x1e28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe74e), 0x51);
        // CB F6 01D6
        gbc.setState(0xe7b8, 0x1b18, 0xee20, 0x1921, 0xb24a, 0xfe87, 0x0, 0x0);
        gbc.writeMem(0xe7b8, { 0xcb, 0xf6 });
        gbc.writeMem(0xfe87, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x1b18);
        EXPECT(gbc.pc(), 0xe7ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7b8), 0xcb);
        EXPECT(gbc.readMem(0xe7b9), 0xf6);
        EXPECT(gbc.readMem(0xfe87), 0xe5);
        // CB F6 01DB
        gbc.setState(0xc742, 0xc93e, 0xfb50, 0x5e86, 0x5419, 0xec0c, 0x0, 0x0);
        gbc.writeMem(0xc742, { 0xcb, 0xf6 });
        gbc.writeMem(0xec0c, { 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xc93e);
        EXPECT(gbc.pc(), 0xc744);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc742), 0xcb);
        EXPECT(gbc.readMem(0xc743), 0xf6);
        EXPECT(gbc.readMem(0xec0c), 0x69);
        // CB F6 01DC
        gbc.setState(0x7593, 0xbac7, 0x5430, 0xf0a2, 0x8d98, 0x90d0, 0x1, 0x1);
        gbc.writeMem(0x7593, { 0xcb, 0xf6 });
        gbc.writeMem(0x90d0, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xbac7);
        EXPECT(gbc.pc(), 0x7595);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90d0), 0x61);
        // CB F6 01DE
        gbc.setState(0x96b9, 0xdf05, 0x8bc0, 0x64b6, 0x999c, 0x834b, 0x0, 0x1);
        gbc.writeMem(0x834b, { 0x74 });
        gbc.writeMem(0x96b9, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xdf05);
        EXPECT(gbc.pc(), 0x96bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x834b), 0x74);
        EXPECT(gbc.readMem(0x96b9), 0xcb);
        EXPECT(gbc.readMem(0x96ba), 0xf6);
        // CB F6 01DF
        gbc.setState(0x1081, 0x654e, 0x4230, 0xd5, 0x9b9d, 0xe165, 0x0, 0x0);
        gbc.writeMem(0x1081, { 0xcb, 0xf6 });
        gbc.writeMem(0xe165, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x654e);
        EXPECT(gbc.pc(), 0x1083);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe165), 0xf7);
        // CB F6 01E1
        gbc.setState(0xdff7, 0x3fce, 0x3350, 0xc72b, 0x2dca, 0x8869, 0x0, 0x1);
        gbc.writeMem(0x8869, { 0x79 });
        gbc.writeMem(0xdff7, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x3fce);
        EXPECT(gbc.pc(), 0xdff9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8869), 0x79);
        EXPECT(gbc.readMem(0xdff7), 0xcb);
        EXPECT(gbc.readMem(0xdff8), 0xf6);
        // CB F6 01E3
        gbc.setState(0xa008, 0xd041, 0x4620, 0x9fb2, 0xf10, 0xf883, 0x0, 0x0);
        gbc.writeMem(0xa008, { 0xcb, 0xf6 });
        gbc.writeMem(0xf883, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xd041);
        EXPECT(gbc.pc(), 0xa00a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa008), 0xcb);
        EXPECT(gbc.readMem(0xa009), 0xf6);
        EXPECT(gbc.readMem(0xf883), 0x44);
        // CB F6 01E4
        gbc.setState(0x433, 0xc10b, 0x6810, 0xb6b9, 0x6061, 0xb525, 0x1, 0x1);
        gbc.writeMem(0x433, { 0xcb, 0xf6 });
        gbc.writeMem(0xb525, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xc10b);
        EXPECT(gbc.pc(), 0x435);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb525), 0x62);
        // CB F6 01E8
        gbc.setState(0x6546, 0xb298, 0x9970, 0xad09, 0x6deb, 0x5171, 0x1, 0x1);
        gbc.writeMem(0x5171, { 0xdf });
        gbc.writeMem(0x6546, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xb298);
        EXPECT(gbc.pc(), 0x6548);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 01E9
        gbc.setState(0xc7ab, 0xe29d, 0xc800, 0x22a0, 0x811, 0xfff7, 0x0, 0x0);
        gbc.writeMem(0xc7ab, { 0xcb, 0xf6 });
        gbc.writeMem(0xfff7, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xe29d);
        EXPECT(gbc.pc(), 0xc7ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7ab), 0xcb);
        EXPECT(gbc.readMem(0xc7ac), 0xf6);
        EXPECT(gbc.readMem(0xfff7), 0x6a);
        // CB F6 01ED
        gbc.setState(0x1807, 0x9e5, 0x4750, 0x59c, 0x55d0, 0xcec2, 0x0, 0x0);
        gbc.writeMem(0x1807, { 0xcb, 0xf6 });
        gbc.writeMem(0xcec2, { 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x9e5);
        EXPECT(gbc.pc(), 0x1809);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcec2), 0x60);
        // CB F6 01EE
        gbc.setState(0x884, 0x85d7, 0xfae0, 0x7986, 0xae5c, 0xfc91, 0x1, 0x1);
        gbc.writeMem(0x884, { 0xcb, 0xf6 });
        gbc.writeMem(0xfc91, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x85d7);
        EXPECT(gbc.pc(), 0x886);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfc91), 0x66);
        // CB F6 01EF
        gbc.setState(0x324c, 0x2079, 0x82f0, 0x86c, 0x97af, 0x3fe2, 0x0, 0x0);
        gbc.writeMem(0x324c, { 0xcb, 0xf6 });
        gbc.writeMem(0x3fe2, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x2079);
        EXPECT(gbc.pc(), 0x324e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 01F0
        gbc.setState(0x1561, 0x5754, 0xce0, 0x4421, 0x1801, 0x276f, 0x1, 0x1);
        gbc.writeMem(0x1561, { 0xcb, 0xf6 });
        gbc.writeMem(0x276f, { 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x5754);
        EXPECT(gbc.pc(), 0x1563);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 01F1
        gbc.setState(0xc326, 0x2384, 0x61b0, 0xe164, 0x23c5, 0xe956, 0x1, 0x0);
        gbc.writeMem(0xc326, { 0xcb, 0xf6 });
        gbc.writeMem(0xe956, { 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x2384);
        EXPECT(gbc.pc(), 0xc328);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc326), 0xcb);
        EXPECT(gbc.readMem(0xc327), 0xf6);
        EXPECT(gbc.readMem(0xe956), 0xc3);
        // CB F6 01F2
        gbc.setState(0xc140, 0xcbe4, 0xa8a0, 0xae7e, 0x143c, 0xa1bb, 0x0, 0x0);
        gbc.writeMem(0xa1bb, { 0x9 });
        gbc.writeMem(0xc140, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xcbe4);
        EXPECT(gbc.pc(), 0xc142);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1bb), 0x49);
        EXPECT(gbc.readMem(0xc140), 0xcb);
        EXPECT(gbc.readMem(0xc141), 0xf6);
        // CB F6 01F4
        gbc.setState(0x5a62, 0x7059, 0x37e0, 0x8733, 0x4617, 0x116c, 0x1, 0x1);
        gbc.writeMem(0x116c, { 0xe7 });
        gbc.writeMem(0x5a62, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x7059);
        EXPECT(gbc.pc(), 0x5a64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 01F5
        gbc.setState(0xa789, 0x1df7, 0x51d0, 0xda1f, 0xed36, 0xf595, 0x1, 0x1);
        gbc.writeMem(0xa789, { 0xcb, 0xf6 });
        gbc.writeMem(0xf595, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x1df7);
        EXPECT(gbc.pc(), 0xa78b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa789), 0xcb);
        EXPECT(gbc.readMem(0xa78a), 0xf6);
        EXPECT(gbc.readMem(0xf595), 0xf7);
        // CB F6 01F8
        gbc.setState(0x48d2, 0x6058, 0x77d0, 0x28e9, 0xb0ce, 0xce1a, 0x0, 0x1);
        gbc.writeMem(0x48d2, { 0xcb, 0xf6 });
        gbc.writeMem(0xce1a, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x6058);
        EXPECT(gbc.pc(), 0x48d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce1a), 0xf4);
        // CB F6 01F9
        gbc.setState(0x6b95, 0xc778, 0xfc40, 0x478b, 0x2f42, 0x77d5, 0x1, 0x1);
        gbc.writeMem(0x6b95, { 0xcb, 0xf6 });
        gbc.writeMem(0x77d5, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xc778);
        EXPECT(gbc.pc(), 0x6b97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 01FC
        gbc.setState(0x84c6, 0x80fa, 0x30a0, 0x53ab, 0xf04e, 0x72da, 0x1, 0x0);
        gbc.writeMem(0x72da, { 0xd8 });
        gbc.writeMem(0x84c6, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x80fa);
        EXPECT(gbc.pc(), 0x84c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84c6), 0xcb);
        EXPECT(gbc.readMem(0x84c7), 0xf6);
        // CB F6 01FD
        gbc.setState(0x9d14, 0x4f0d, 0x880, 0x9f3a, 0x6906, 0x808d, 0x1, 0x0);
        gbc.writeMem(0x808d, { 0x3f });
        gbc.writeMem(0x9d14, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x4f0d);
        EXPECT(gbc.pc(), 0x9d16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x808d), 0x7f);
        EXPECT(gbc.readMem(0x9d14), 0xcb);
        EXPECT(gbc.readMem(0x9d15), 0xf6);
        // CB F6 01FE
        gbc.setState(0xaacd, 0x1fc4, 0x5b00, 0xf0bc, 0xcd9c, 0xaf3d, 0x0, 0x0);
        gbc.writeMem(0xaacd, { 0xcb, 0xf6 });
        gbc.writeMem(0xaf3d, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x1fc4);
        EXPECT(gbc.pc(), 0xaacf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaacd), 0xcb);
        EXPECT(gbc.readMem(0xaace), 0xf6);
        EXPECT(gbc.readMem(0xaf3d), 0xf5);
        // CB F6 01FF
        gbc.setState(0xa9c5, 0xa8cf, 0x6010, 0xf865, 0xcf9f, 0xa48c, 0x0, 0x1);
        gbc.writeMem(0xa48c, { 0x45 });
        gbc.writeMem(0xa9c5, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xa8cf);
        EXPECT(gbc.pc(), 0xa9c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa48c), 0x45);
        EXPECT(gbc.readMem(0xa9c5), 0xcb);
        EXPECT(gbc.readMem(0xa9c6), 0xf6);
        // CB F6 0200
        gbc.setState(0x6baf, 0x8745, 0xa030, 0xcbea, 0x8619, 0xb9aa, 0x1, 0x0);
        gbc.writeMem(0x6baf, { 0xcb, 0xf6 });
        gbc.writeMem(0xb9aa, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x8745);
        EXPECT(gbc.pc(), 0x6bb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9aa), 0x44);
        // CB F6 0206
        gbc.setState(0xc0f6, 0x3175, 0x9d50, 0x5d0a, 0x2a00, 0x4d5, 0x0, 0x1);
        gbc.writeMem(0x4d5, { 0xf3 });
        gbc.writeMem(0xc0f6, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x3175);
        EXPECT(gbc.pc(), 0xc0f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0f6), 0xcb);
        EXPECT(gbc.readMem(0xc0f7), 0xf6);
        // CB F6 0207
        gbc.setState(0xdcbd, 0x8d56, 0x8320, 0xc8aa, 0xd566, 0xcad9, 0x1, 0x0);
        gbc.writeMem(0xcad9, { 0xf8 });
        gbc.writeMem(0xdcbd, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x8d56);
        EXPECT(gbc.pc(), 0xdcbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcad9), 0xf8);
        EXPECT(gbc.readMem(0xdcbd), 0xcb);
        EXPECT(gbc.readMem(0xdcbe), 0xf6);
        // CB F6 0209
        gbc.setState(0x512, 0xfef0, 0x1b70, 0x128e, 0x4917, 0x532e, 0x1, 0x1);
        gbc.writeMem(0x512, { 0xcb, 0xf6 });
        gbc.writeMem(0x532e, { 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xfef0);
        EXPECT(gbc.pc(), 0x514);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 020A
        gbc.setState(0xc390, 0x995, 0x3eb0, 0xfdf9, 0xdf03, 0xebe2, 0x0, 0x1);
        gbc.writeMem(0xc390, { 0xcb, 0xf6 });
        gbc.writeMem(0xebe2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x995);
        EXPECT(gbc.pc(), 0xc392);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc390), 0xcb);
        EXPECT(gbc.readMem(0xc391), 0xf6);
        EXPECT(gbc.readMem(0xebe2), 0x47);
        // CB F6 020C
        gbc.setState(0x2571, 0x65b2, 0xe9e0, 0x9c80, 0x9246, 0xb2eb, 0x1, 0x0);
        gbc.writeMem(0x2571, { 0xcb, 0xf6 });
        gbc.writeMem(0xb2eb, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x65b2);
        EXPECT(gbc.pc(), 0x2573);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2eb), 0xe9);
        // CB F6 020D
        gbc.setState(0xc335, 0x44b4, 0x2ba0, 0x7ab2, 0xad83, 0xac71, 0x0, 0x0);
        gbc.writeMem(0xac71, { 0x1f });
        gbc.writeMem(0xc335, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x44b4);
        EXPECT(gbc.pc(), 0xc337);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac71), 0x5f);
        EXPECT(gbc.readMem(0xc335), 0xcb);
        EXPECT(gbc.readMem(0xc336), 0xf6);
        // CB F6 020E
        gbc.setState(0x173, 0xdcd4, 0x8290, 0xc156, 0x3170, 0x13cc, 0x1, 0x0);
        gbc.writeMem(0x173, { 0xcb, 0xf6 });
        gbc.writeMem(0x13cc, { 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xdcd4);
        EXPECT(gbc.pc(), 0x175);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 0210
        gbc.setState(0x16ff, 0x6e4f, 0xbc80, 0x7de0, 0x1a5c, 0x3071, 0x1, 0x0);
        gbc.writeMem(0x16ff, { 0xcb, 0xf6 });
        gbc.writeMem(0x3071, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x6e4f);
        EXPECT(gbc.pc(), 0x1701);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0211
        gbc.setState(0xa141, 0xf018, 0x2e20, 0x49fa, 0x9a2f, 0x247e, 0x1, 0x0);
        gbc.writeMem(0x247e, { 0xfb });
        gbc.writeMem(0xa141, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xf018);
        EXPECT(gbc.pc(), 0xa143);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa141), 0xcb);
        EXPECT(gbc.readMem(0xa142), 0xf6);
        // CB F6 0214
        gbc.setState(0xd126, 0x8ab4, 0x66f0, 0xad9, 0xedee, 0xbb5e, 0x1, 0x0);
        gbc.writeMem(0xbb5e, { 0x5d });
        gbc.writeMem(0xd126, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x8ab4);
        EXPECT(gbc.pc(), 0xd128);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb5e), 0x5d);
        EXPECT(gbc.readMem(0xd126), 0xcb);
        EXPECT(gbc.readMem(0xd127), 0xf6);
        // CB F6 0215
        gbc.setState(0x7220, 0xef7d, 0xbff0, 0x3f9d, 0x3457, 0x13e9, 0x0, 0x1);
        gbc.writeMem(0x13e9, { 0x6c });
        gbc.writeMem(0x7220, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xef7d);
        EXPECT(gbc.pc(), 0x7222);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 0216
        gbc.setState(0x31fe, 0x7f4c, 0x6dc0, 0x3fc, 0xb184, 0xb12c, 0x1, 0x1);
        gbc.writeMem(0x31fe, { 0xcb, 0xf6 });
        gbc.writeMem(0xb12c, { 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x7f4c);
        EXPECT(gbc.pc(), 0x3200);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb12c), 0xd9);
        // CB F6 0218
        gbc.setState(0x6e19, 0x1d, 0xa280, 0x642e, 0xaf32, 0x3e1a, 0x1, 0x1);
        gbc.writeMem(0x3e1a, { 0xf0 });
        gbc.writeMem(0x6e19, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x1d);
        EXPECT(gbc.pc(), 0x6e1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0219
        gbc.setState(0x6763, 0x8e88, 0x90e0, 0x7adc, 0xc7fa, 0x2b54, 0x1, 0x1);
        gbc.writeMem(0x2b54, { 0xce });
        gbc.writeMem(0x6763, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x8e88);
        EXPECT(gbc.pc(), 0x6765);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 021A
        gbc.setState(0x6d9e, 0x4aa1, 0xab20, 0x141b, 0x28ed, 0x8d7c, 0x1, 0x1);
        gbc.writeMem(0x6d9e, { 0xcb, 0xf6 });
        gbc.writeMem(0x8d7c, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x4aa1);
        EXPECT(gbc.pc(), 0x6da0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d7c), 0xd5);
        // CB F6 021C
        gbc.setState(0xc86e, 0xb6dc, 0x6e80, 0xc5b6, 0xac83, 0x44b5, 0x1, 0x1);
        gbc.writeMem(0x44b5, { 0xf5 });
        gbc.writeMem(0xc86e, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xb6dc);
        EXPECT(gbc.pc(), 0xc870);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc86e), 0xcb);
        EXPECT(gbc.readMem(0xc86f), 0xf6);
        // CB F6 021D
        gbc.setState(0x4474, 0x4792, 0x1c60, 0x766d, 0x1c6e, 0xbe8f, 0x1, 0x1);
        gbc.writeMem(0x4474, { 0xcb, 0xf6 });
        gbc.writeMem(0xbe8f, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x4792);
        EXPECT(gbc.pc(), 0x4476);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe8f), 0x59);
        // CB F6 021E
        gbc.setState(0xb86, 0x27ee, 0xd9a0, 0xdb31, 0xe98d, 0xcf5c, 0x0, 0x1);
        gbc.writeMem(0xb86, { 0xcb, 0xf6 });
        gbc.writeMem(0xcf5c, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x27ee);
        EXPECT(gbc.pc(), 0xb88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf5c), 0xf1);
        // CB F6 021F
        gbc.setState(0x23fa, 0x98e7, 0xd710, 0xf873, 0xa49b, 0xb389, 0x0, 0x1);
        gbc.writeMem(0x23fa, { 0xcb, 0xf6 });
        gbc.writeMem(0xb389, { 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x98e7);
        EXPECT(gbc.pc(), 0x23fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb389), 0x5f);
        // CB F6 0221
        gbc.setState(0x4b4, 0x6dd7, 0xc8a0, 0x3d9f, 0xf0c0, 0xc74c, 0x1, 0x1);
        gbc.writeMem(0x4b4, { 0xcb, 0xf6 });
        gbc.writeMem(0xc74c, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x6dd7);
        EXPECT(gbc.pc(), 0x4b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc74c), 0xc6);
        // CB F6 0222
        gbc.setState(0x2b86, 0xcbfd, 0x4990, 0x4e19, 0xb952, 0x8156, 0x1, 0x0);
        gbc.writeMem(0x2b86, { 0xcb, 0xf6 });
        gbc.writeMem(0x8156, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xcbfd);
        EXPECT(gbc.pc(), 0x2b88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8156), 0x5e);
        // CB F6 0223
        gbc.setState(0x515b, 0x541c, 0xc720, 0xac7f, 0xc4e8, 0x7237, 0x1, 0x0);
        gbc.writeMem(0x515b, { 0xcb, 0xf6 });
        gbc.writeMem(0x7237, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x541c);
        EXPECT(gbc.pc(), 0x515d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0225
        gbc.setState(0x617d, 0x44d4, 0x3620, 0xb0d4, 0x3614, 0x945b, 0x0, 0x0);
        gbc.writeMem(0x617d, { 0xcb, 0xf6 });
        gbc.writeMem(0x945b, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x44d4);
        EXPECT(gbc.pc(), 0x617f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x945b), 0xed);
        // CB F6 0228
        gbc.setState(0x9e2e, 0x1cc4, 0xd180, 0x6f38, 0xf79f, 0x59e6, 0x0, 0x1);
        gbc.writeMem(0x59e6, { 0xd7 });
        gbc.writeMem(0x9e2e, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x1cc4);
        EXPECT(gbc.pc(), 0x9e30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e2e), 0xcb);
        EXPECT(gbc.readMem(0x9e2f), 0xf6);
        // CB F6 0229
        gbc.setState(0xb076, 0xa60e, 0xcc40, 0xa39a, 0xdabb, 0xec03, 0x0, 0x1);
        gbc.writeMem(0xb076, { 0xcb, 0xf6 });
        gbc.writeMem(0xec03, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xa60e);
        EXPECT(gbc.pc(), 0xb078);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb076), 0xcb);
        EXPECT(gbc.readMem(0xb077), 0xf6);
        EXPECT(gbc.readMem(0xec03), 0xc4);
        // CB F6 022A
        gbc.setState(0xb5a1, 0x7714, 0xaea0, 0x3d40, 0x90fa, 0xbd92, 0x1, 0x0);
        gbc.writeMem(0xb5a1, { 0xcb, 0xf6 });
        gbc.writeMem(0xbd92, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x7714);
        EXPECT(gbc.pc(), 0xb5a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5a1), 0xcb);
        EXPECT(gbc.readMem(0xb5a2), 0xf6);
        EXPECT(gbc.readMem(0xbd92), 0xe4);
        // CB F6 022B
        gbc.setState(0xbf1e, 0x177e, 0xc4f0, 0x7408, 0x6f51, 0xe0dd, 0x1, 0x1);
        gbc.writeMem(0xbf1e, { 0xcb, 0xf6 });
        gbc.writeMem(0xe0dd, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x177e);
        EXPECT(gbc.pc(), 0xbf20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf1e), 0xcb);
        EXPECT(gbc.readMem(0xbf1f), 0xf6);
        EXPECT(gbc.readMem(0xe0dd), 0xed);
        // CB F6 022C
        gbc.setState(0x7b34, 0x7c28, 0x7d50, 0xcc1c, 0x2b3f, 0x6ea2, 0x0, 0x0);
        gbc.writeMem(0x6ea2, { 0xeb });
        gbc.writeMem(0x7b34, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x7c28);
        EXPECT(gbc.pc(), 0x7b36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 022D
        gbc.setState(0x8c0a, 0xbb9a, 0xa8b0, 0x4672, 0xaf89, 0xd835, 0x0, 0x0);
        gbc.writeMem(0x8c0a, { 0xcb, 0xf6 });
        gbc.writeMem(0xd835, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xbb9a);
        EXPECT(gbc.pc(), 0x8c0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c0a), 0xcb);
        EXPECT(gbc.readMem(0x8c0b), 0xf6);
        EXPECT(gbc.readMem(0xd835), 0xea);
        // CB F6 022E
        gbc.setState(0x1ef4, 0x4c72, 0x5ba0, 0x920a, 0x45ea, 0xd15f, 0x0, 0x0);
        gbc.writeMem(0x1ef4, { 0xcb, 0xf6 });
        gbc.writeMem(0xd15f, { 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x4c72);
        EXPECT(gbc.pc(), 0x1ef6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd15f), 0x7b);
        // CB F6 022F
        gbc.setState(0x10e3, 0x13cd, 0x200, 0xc689, 0x4449, 0xe225, 0x1, 0x0);
        gbc.writeMem(0x10e3, { 0xcb, 0xf6 });
        gbc.writeMem(0xe225, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x13cd);
        EXPECT(gbc.pc(), 0x10e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe225), 0x5e);
        // CB F6 0230
        gbc.setState(0xcbb9, 0xd2fc, 0x9170, 0x1c37, 0xe202, 0x8d2a, 0x1, 0x1);
        gbc.writeMem(0x8d2a, { 0x58 });
        gbc.writeMem(0xcbb9, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xd2fc);
        EXPECT(gbc.pc(), 0xcbbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d2a), 0x58);
        EXPECT(gbc.readMem(0xcbb9), 0xcb);
        EXPECT(gbc.readMem(0xcbba), 0xf6);
        // CB F6 0231
        gbc.setState(0x3758, 0x4d28, 0xedc0, 0x5b71, 0xb7dc, 0x9f0a, 0x0, 0x1);
        gbc.writeMem(0x3758, { 0xcb, 0xf6 });
        gbc.writeMem(0x9f0a, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x4d28);
        EXPECT(gbc.pc(), 0x375a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f0a), 0xd5);
        // CB F6 0232
        gbc.setState(0x16ad, 0x6732, 0x7ba0, 0xf060, 0x2459, 0x30a8, 0x1, 0x1);
        gbc.writeMem(0x16ad, { 0xcb, 0xf6 });
        gbc.writeMem(0x30a8, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x6732);
        EXPECT(gbc.pc(), 0x16af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0233
        gbc.setState(0x864c, 0x347f, 0xc5d0, 0x81d1, 0xd92f, 0xb150, 0x1, 0x0);
        gbc.writeMem(0x864c, { 0xcb, 0xf6 });
        gbc.writeMem(0xb150, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x347f);
        EXPECT(gbc.pc(), 0x864e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x864c), 0xcb);
        EXPECT(gbc.readMem(0x864d), 0xf6);
        EXPECT(gbc.readMem(0xb150), 0xfe);
        // CB F6 0235
        gbc.setState(0xb006, 0xe529, 0xf430, 0xb2cf, 0xc4ce, 0xb8ab, 0x0, 0x0);
        gbc.writeMem(0xb006, { 0xcb, 0xf6 });
        gbc.writeMem(0xb8ab, { 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xe529);
        EXPECT(gbc.pc(), 0xb008);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb006), 0xcb);
        EXPECT(gbc.readMem(0xb007), 0xf6);
        EXPECT(gbc.readMem(0xb8ab), 0xef);
        // CB F6 0236
        gbc.setState(0xd381, 0x41e8, 0x5180, 0x2ac3, 0x9128, 0x83b7, 0x0, 0x0);
        gbc.writeMem(0x83b7, { 0x4d });
        gbc.writeMem(0xd381, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x41e8);
        EXPECT(gbc.pc(), 0xd383);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83b7), 0x4d);
        EXPECT(gbc.readMem(0xd381), 0xcb);
        EXPECT(gbc.readMem(0xd382), 0xf6);
        // CB F6 0237
        gbc.setState(0x82c6, 0x45df, 0x8b60, 0x9972, 0x5787, 0x6b39, 0x1, 0x0);
        gbc.writeMem(0x6b39, { 0x5e });
        gbc.writeMem(0x82c6, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x45df);
        EXPECT(gbc.pc(), 0x82c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82c6), 0xcb);
        EXPECT(gbc.readMem(0x82c7), 0xf6);
        // CB F6 0238
        gbc.setState(0xcd14, 0xef9c, 0xb220, 0xdf3a, 0xbc01, 0x9e3c, 0x1, 0x0);
        gbc.writeMem(0x9e3c, { 0x84 });
        gbc.writeMem(0xcd14, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xef9c);
        EXPECT(gbc.pc(), 0xcd16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e3c), 0xc4);
        EXPECT(gbc.readMem(0xcd14), 0xcb);
        EXPECT(gbc.readMem(0xcd15), 0xf6);
        // CB F6 0239
        gbc.setState(0x1965, 0xbea5, 0x69a0, 0xa128, 0x5e05, 0xe156, 0x0, 0x0);
        gbc.writeMem(0x1965, { 0xcb, 0xf6 });
        gbc.writeMem(0xe156, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xbea5);
        EXPECT(gbc.pc(), 0x1967);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe156), 0xd8);
        // CB F6 023B
        gbc.setState(0xe56a, 0x1271, 0x5040, 0xa748, 0x67db, 0xedcf, 0x1, 0x0);
        gbc.writeMem(0xe56a, { 0xcb, 0xf6 });
        gbc.writeMem(0xedcf, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x1271);
        EXPECT(gbc.pc(), 0xe56c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe56a), 0xcb);
        EXPECT(gbc.readMem(0xe56b), 0xf6);
        EXPECT(gbc.readMem(0xedcf), 0xfc);
        // CB F6 023C
        gbc.setState(0xc547, 0x137d, 0xb370, 0xb259, 0xd162, 0x2322, 0x0, 0x1);
        gbc.writeMem(0x2322, { 0x78 });
        gbc.writeMem(0xc547, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x137d);
        EXPECT(gbc.pc(), 0xc549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc547), 0xcb);
        EXPECT(gbc.readMem(0xc548), 0xf6);
        // CB F6 023D
        gbc.setState(0x9cde, 0x715d, 0xa110, 0x600f, 0x7e87, 0xcbec, 0x0, 0x1);
        gbc.writeMem(0x9cde, { 0xcb, 0xf6 });
        gbc.writeMem(0xcbec, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x715d);
        EXPECT(gbc.pc(), 0x9ce0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cde), 0xcb);
        EXPECT(gbc.readMem(0x9cdf), 0xf6);
        EXPECT(gbc.readMem(0xcbec), 0x54);
        // CB F6 023F
        gbc.setState(0x709, 0xc9cf, 0x3230, 0x9a96, 0x916c, 0x986f, 0x0, 0x1);
        gbc.writeMem(0x709, { 0xcb, 0xf6 });
        gbc.writeMem(0x986f, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xc9cf);
        EXPECT(gbc.pc(), 0x70b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x986f), 0x50);
        // CB F6 0240
        gbc.setState(0x1149, 0xdfa3, 0xfc50, 0x4d5f, 0x3a22, 0x8cd5, 0x1, 0x1);
        gbc.writeMem(0x1149, { 0xcb, 0xf6 });
        gbc.writeMem(0x8cd5, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xdfa3);
        EXPECT(gbc.pc(), 0x114b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cd5), 0x6a);
        // CB F6 0241
        gbc.setState(0xb43d, 0xf969, 0x56e0, 0xd321, 0xca8a, 0x55f4, 0x0, 0x1);
        gbc.writeMem(0x55f4, { 0xf2 });
        gbc.writeMem(0xb43d, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xf969);
        EXPECT(gbc.pc(), 0xb43f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb43d), 0xcb);
        EXPECT(gbc.readMem(0xb43e), 0xf6);
        // CB F6 0243
        gbc.setState(0x6f7c, 0xc10e, 0xfe0, 0x83e2, 0xc506, 0xfb74, 0x1, 0x0);
        gbc.writeMem(0x6f7c, { 0xcb, 0xf6 });
        gbc.writeMem(0xfb74, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xc10e);
        EXPECT(gbc.pc(), 0x6f7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfb74), 0x4f);
        // CB F6 0244
        gbc.setState(0x5342, 0xf0f0, 0x3340, 0xb823, 0x1068, 0x3374, 0x1, 0x0);
        gbc.writeMem(0x3374, { 0x53 });
        gbc.writeMem(0x5342, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xf0f0);
        EXPECT(gbc.pc(), 0x5344);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0246
        gbc.setState(0x331a, 0xa9bb, 0xaf10, 0xab37, 0xa56f, 0x8721, 0x0, 0x0);
        gbc.writeMem(0x331a, { 0xcb, 0xf6 });
        gbc.writeMem(0x8721, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xa9bb);
        EXPECT(gbc.pc(), 0x331c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8721), 0xdd);
        // CB F6 0247
        gbc.setState(0xad7d, 0x88c5, 0x7c0, 0x1ba5, 0xb0e2, 0xe557, 0x1, 0x0);
        gbc.writeMem(0xad7d, { 0xcb, 0xf6 });
        gbc.writeMem(0xe557, { 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x88c5);
        EXPECT(gbc.pc(), 0xad7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad7d), 0xcb);
        EXPECT(gbc.readMem(0xad7e), 0xf6);
        EXPECT(gbc.readMem(0xe557), 0xc3);
        // CB F6 0248
        gbc.setState(0x2247, 0x1eed, 0x6f10, 0x6ff5, 0x2fd9, 0xf8d0, 0x0, 0x0);
        gbc.writeMem(0x2247, { 0xcb, 0xf6 });
        gbc.writeMem(0xf8d0, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x1eed);
        EXPECT(gbc.pc(), 0x2249);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf8d0), 0xd4);
        // CB F6 024A
        gbc.setState(0x5807, 0x47f, 0xfa00, 0x1f8, 0xe5f2, 0x9a31, 0x1, 0x0);
        gbc.writeMem(0x5807, { 0xcb, 0xf6 });
        gbc.writeMem(0x9a31, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x47f);
        EXPECT(gbc.pc(), 0x5809);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a31), 0xfe);
        // CB F6 024D
        gbc.setState(0x24e, 0x3a50, 0xae30, 0x3906, 0x3c23, 0xb15a, 0x0, 0x0);
        gbc.writeMem(0x24e, { 0xcb, 0xf6 });
        gbc.writeMem(0xb15a, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x3a50);
        EXPECT(gbc.pc(), 0x250);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb15a), 0xcd);
        // CB F6 024E
        gbc.setState(0x9fa2, 0xef77, 0x9e00, 0xd7, 0x3e08, 0x6346, 0x0, 0x0);
        gbc.writeMem(0x6346, { 0x79 });
        gbc.writeMem(0x9fa2, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xef77);
        EXPECT(gbc.pc(), 0x9fa4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fa2), 0xcb);
        EXPECT(gbc.readMem(0x9fa3), 0xf6);
        // CB F6 024F
        gbc.setState(0xe36b, 0x9a3c, 0x37f0, 0xbc3a, 0x27ed, 0xba15, 0x1, 0x0);
        gbc.writeMem(0xba15, { 0x58 });
        gbc.writeMem(0xe36b, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x9a3c);
        EXPECT(gbc.pc(), 0xe36d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba15), 0x58);
        EXPECT(gbc.readMem(0xe36b), 0xcb);
        EXPECT(gbc.readMem(0xe36c), 0xf6);
        // CB F6 0250
        gbc.setState(0xc587, 0x1083, 0x920, 0x3a23, 0xf100, 0xe02f, 0x0, 0x1);
        gbc.writeMem(0xc587, { 0xcb, 0xf6 });
        gbc.writeMem(0xe02f, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x1083);
        EXPECT(gbc.pc(), 0xc589);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc587), 0xcb);
        EXPECT(gbc.readMem(0xc588), 0xf6);
        EXPECT(gbc.readMem(0xe02f), 0xd6);
        // CB F6 0252
        gbc.setState(0xd872, 0xf1bd, 0x39f0, 0xbfab, 0xcb1f, 0xc6b1, 0x0, 0x0);
        gbc.writeMem(0xc6b1, { 0xff });
        gbc.writeMem(0xd872, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xf1bd);
        EXPECT(gbc.pc(), 0xd874);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6b1), 0xff);
        EXPECT(gbc.readMem(0xd872), 0xcb);
        EXPECT(gbc.readMem(0xd873), 0xf6);
        // CB F6 0254
        gbc.setState(0x41b6, 0x9c57, 0xa2a0, 0x9027, 0x95be, 0x46c6, 0x0, 0x0);
        gbc.writeMem(0x41b6, { 0xcb, 0xf6 });
        gbc.writeMem(0x46c6, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x9c57);
        EXPECT(gbc.pc(), 0x41b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0255
        gbc.setState(0x614d, 0x9a14, 0xbc60, 0x9224, 0x3950, 0xc6be, 0x1, 0x1);
        gbc.writeMem(0x614d, { 0xcb, 0xf6 });
        gbc.writeMem(0xc6be, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x9a14);
        EXPECT(gbc.pc(), 0x614f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6be), 0x51);
        // CB F6 0256
        gbc.setState(0xba3b, 0x64a5, 0xb470, 0xf669, 0x459b, 0xafbc, 0x0, 0x0);
        gbc.writeMem(0xafbc, { 0xa6 });
        gbc.writeMem(0xba3b, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x64a5);
        EXPECT(gbc.pc(), 0xba3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafbc), 0xe6);
        EXPECT(gbc.readMem(0xba3b), 0xcb);
        EXPECT(gbc.readMem(0xba3c), 0xf6);
        // CB F6 0257
        gbc.setState(0x555b, 0x4531, 0x6a80, 0xffe0, 0xb910, 0x97ad, 0x1, 0x0);
        gbc.writeMem(0x555b, { 0xcb, 0xf6 });
        gbc.writeMem(0x97ad, { 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x4531);
        EXPECT(gbc.pc(), 0x555d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97ad), 0x4e);
        // CB F6 0258
        gbc.setState(0x3703, 0x5e37, 0x64a0, 0xca7, 0x558d, 0xa289, 0x1, 0x0);
        gbc.writeMem(0x3703, { 0xcb, 0xf6 });
        gbc.writeMem(0xa289, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x5e37);
        EXPECT(gbc.pc(), 0x3705);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa289), 0xf5);
        // CB F6 0259
        gbc.setState(0x34d8, 0x9dbc, 0x98b0, 0xf080, 0xc1f9, 0xe7f8, 0x1, 0x1);
        gbc.writeMem(0x34d8, { 0xcb, 0xf6 });
        gbc.writeMem(0xe7f8, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x9dbc);
        EXPECT(gbc.pc(), 0x34da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7f8), 0x75);
        // CB F6 025A
        gbc.setState(0x137b, 0x82d0, 0xab20, 0x6147, 0xa788, 0xe283, 0x1, 0x0);
        gbc.writeMem(0x137b, { 0xcb, 0xf6 });
        gbc.writeMem(0xe283, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x82d0);
        EXPECT(gbc.pc(), 0x137d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe283), 0x55);
        // CB F6 025C
        gbc.setState(0x12d7, 0xbe4f, 0xcc20, 0xba16, 0x72c8, 0xcdfb, 0x0, 0x1);
        gbc.writeMem(0x12d7, { 0xcb, 0xf6 });
        gbc.writeMem(0xcdfb, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xbe4f);
        EXPECT(gbc.pc(), 0x12d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdfb), 0x5a);
        // CB F6 025D
        gbc.setState(0x51b1, 0x801f, 0x1080, 0x13c7, 0x9fa1, 0xa416, 0x0, 0x0);
        gbc.writeMem(0x51b1, { 0xcb, 0xf6 });
        gbc.writeMem(0xa416, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x801f);
        EXPECT(gbc.pc(), 0x51b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa416), 0xfd);
        // CB F6 0260
        gbc.setState(0x9664, 0x76bf, 0x18a0, 0xf7f2, 0x2b69, 0x87b2, 0x1, 0x1);
        gbc.writeMem(0x87b2, { 0xc5 });
        gbc.writeMem(0x9664, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x76bf);
        EXPECT(gbc.pc(), 0x9666);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87b2), 0xc5);
        EXPECT(gbc.readMem(0x9664), 0xcb);
        EXPECT(gbc.readMem(0x9665), 0xf6);
        // CB F6 0262
        gbc.setState(0xaaff, 0x3011, 0x9f00, 0x9c38, 0x8da2, 0xfce, 0x1, 0x1);
        gbc.writeMem(0xfce, { 0xfc });
        gbc.writeMem(0xaaff, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x3011);
        EXPECT(gbc.pc(), 0xab01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaff), 0xcb);
        EXPECT(gbc.readMem(0xab00), 0xf6);
        // CB F6 0263
        gbc.setState(0x295, 0x661f, 0xb0f0, 0x97c0, 0x72c6, 0xd819, 0x0, 0x1);
        gbc.writeMem(0x295, { 0xcb, 0xf6 });
        gbc.writeMem(0xd819, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x661f);
        EXPECT(gbc.pc(), 0x297);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd819), 0x73);
        // CB F6 0264
        gbc.setState(0xbc11, 0xbe99, 0x9b0, 0x761c, 0x1c23, 0xa9ed, 0x0, 0x0);
        gbc.writeMem(0xa9ed, { 0xa3 });
        gbc.writeMem(0xbc11, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xbe99);
        EXPECT(gbc.pc(), 0xbc13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9ed), 0xe3);
        EXPECT(gbc.readMem(0xbc11), 0xcb);
        EXPECT(gbc.readMem(0xbc12), 0xf6);
        // CB F6 0265
        gbc.setState(0x7d67, 0x3504, 0x1fc0, 0xe610, 0x39bf, 0x5178, 0x0, 0x1);
        gbc.writeMem(0x5178, { 0x50 });
        gbc.writeMem(0x7d67, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x3504);
        EXPECT(gbc.pc(), 0x7d69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0266
        gbc.setState(0x5279, 0xcd, 0xf990, 0xc427, 0xa08a, 0x61c7, 0x0, 0x0);
        gbc.writeMem(0x5279, { 0xcb, 0xf6 });
        gbc.writeMem(0x61c7, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xcd);
        EXPECT(gbc.pc(), 0x527b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 0268
        gbc.setState(0xa066, 0xac7a, 0xe9e0, 0xa7ac, 0x792, 0xe81d, 0x1, 0x1);
        gbc.writeMem(0xa066, { 0xcb, 0xf6 });
        gbc.writeMem(0xe81d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xac7a);
        EXPECT(gbc.pc(), 0xa068);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa066), 0xcb);
        EXPECT(gbc.readMem(0xa067), 0xf6);
        EXPECT(gbc.readMem(0xe81d), 0xea);
        // CB F6 026B
        gbc.setState(0x6815, 0x3943, 0xaa80, 0xbf61, 0xa682, 0xf44, 0x1, 0x1);
        gbc.writeMem(0xf44, { 0xd8 });
        gbc.writeMem(0x6815, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x3943);
        EXPECT(gbc.pc(), 0x6817);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 026D
        gbc.setState(0x831f, 0xcccc, 0x10e0, 0x5165, 0x227f, 0xf322, 0x0, 0x1);
        gbc.writeMem(0x831f, { 0xcb, 0xf6 });
        gbc.writeMem(0xf322, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xcccc);
        EXPECT(gbc.pc(), 0x8321);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x831f), 0xcb);
        EXPECT(gbc.readMem(0x8320), 0xf6);
        EXPECT(gbc.readMem(0xf322), 0x4c);
        // CB F6 026E
        gbc.setState(0x2db0, 0x5ba7, 0xe580, 0xdf75, 0x9b24, 0xd27b, 0x1, 0x0);
        gbc.writeMem(0x2db0, { 0xcb, 0xf6 });
        gbc.writeMem(0xd27b, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x5ba7);
        EXPECT(gbc.pc(), 0x2db2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd27b), 0x5e);
        // CB F6 026F
        gbc.setState(0xbeb2, 0xafb2, 0xc50, 0xf102, 0xb87b, 0xe67d, 0x1, 0x0);
        gbc.writeMem(0xbeb2, { 0xcb, 0xf6 });
        gbc.writeMem(0xe67d, { 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xafb2);
        EXPECT(gbc.pc(), 0xbeb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbeb2), 0xcb);
        EXPECT(gbc.readMem(0xbeb3), 0xf6);
        EXPECT(gbc.readMem(0xe67d), 0x67);
        // CB F6 0271
        gbc.setState(0xeb94, 0xdfa1, 0xa370, 0x4e55, 0x648d, 0x58c6, 0x1, 0x0);
        gbc.writeMem(0x58c6, { 0x6d });
        gbc.writeMem(0xeb94, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xdfa1);
        EXPECT(gbc.pc(), 0xeb96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb94), 0xcb);
        EXPECT(gbc.readMem(0xeb95), 0xf6);
        // CB F6 0274
        gbc.setState(0x3473, 0xa5ca, 0x27f0, 0x3a98, 0xe6a6, 0xdd7e, 0x0, 0x1);
        gbc.writeMem(0x3473, { 0xcb, 0xf6 });
        gbc.writeMem(0xdd7e, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xa5ca);
        EXPECT(gbc.pc(), 0x3475);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd7e), 0xf1);
        // CB F6 0277
        gbc.setState(0xd619, 0x47b4, 0x14f0, 0xc66e, 0x596, 0x68d3, 0x0, 0x1);
        gbc.writeMem(0x68d3, { 0x55 });
        gbc.writeMem(0xd619, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x47b4);
        EXPECT(gbc.pc(), 0xd61b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd619), 0xcb);
        EXPECT(gbc.readMem(0xd61a), 0xf6);
        // CB F6 0278
        gbc.setState(0x8f71, 0x78f6, 0xff30, 0xb6c, 0xf19a, 0x2803, 0x0, 0x0);
        gbc.writeMem(0x2803, { 0x5f });
        gbc.writeMem(0x8f71, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x78f6);
        EXPECT(gbc.pc(), 0x8f73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f71), 0xcb);
        EXPECT(gbc.readMem(0x8f72), 0xf6);
        // CB F6 027A
        gbc.setState(0x19e, 0x44b6, 0xc0b0, 0x69f6, 0xa37a, 0x95b, 0x1, 0x1);
        gbc.writeMem(0x19e, { 0xcb, 0xf6 });
        gbc.writeMem(0x95b, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x44b6);
        EXPECT(gbc.pc(), 0x1a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 027C
        gbc.setState(0x849c, 0x2e68, 0x3c0, 0xfe94, 0xead8, 0x5724, 0x1, 0x0);
        gbc.writeMem(0x5724, { 0x7d });
        gbc.writeMem(0x849c, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x2e68);
        EXPECT(gbc.pc(), 0x849e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x849c), 0xcb);
        EXPECT(gbc.readMem(0x849d), 0xf6);
        // CB F6 027D
        gbc.setState(0x7b21, 0xc854, 0xa370, 0xbf7b, 0x23bd, 0x801f, 0x0, 0x0);
        gbc.writeMem(0x7b21, { 0xcb, 0xf6 });
        gbc.writeMem(0x801f, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xc854);
        EXPECT(gbc.pc(), 0x7b23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x801f), 0x44);
        // CB F6 027E
        gbc.setState(0xa769, 0xc0c3, 0x1160, 0xfa05, 0x6ae3, 0xdd3c, 0x0, 0x1);
        gbc.writeMem(0xa769, { 0xcb, 0xf6 });
        gbc.writeMem(0xdd3c, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xc0c3);
        EXPECT(gbc.pc(), 0xa76b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa769), 0xcb);
        EXPECT(gbc.readMem(0xa76a), 0xf6);
        EXPECT(gbc.readMem(0xdd3c), 0xd1);
        // CB F6 027F
        gbc.setState(0xe789, 0xde47, 0xa8f0, 0xc037, 0xe8d7, 0x2447, 0x1, 0x0);
        gbc.writeMem(0x2447, { 0xf5 });
        gbc.writeMem(0xe789, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xde47);
        EXPECT(gbc.pc(), 0xe78b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe789), 0xcb);
        EXPECT(gbc.readMem(0xe78a), 0xf6);
        // CB F6 0280
        gbc.setState(0xa312, 0xe826, 0xd130, 0x7de8, 0x1faa, 0xdd1e, 0x1, 0x0);
        gbc.writeMem(0xa312, { 0xcb, 0xf6 });
        gbc.writeMem(0xdd1e, { 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xe826);
        EXPECT(gbc.pc(), 0xa314);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa312), 0xcb);
        EXPECT(gbc.readMem(0xa313), 0xf6);
        EXPECT(gbc.readMem(0xdd1e), 0x4b);
        // CB F6 0281
        gbc.setState(0xabf7, 0x95aa, 0xac90, 0x7545, 0x87c0, 0x69f9, 0x1, 0x0);
        gbc.writeMem(0x69f9, { 0xc0 });
        gbc.writeMem(0xabf7, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x95aa);
        EXPECT(gbc.pc(), 0xabf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabf7), 0xcb);
        EXPECT(gbc.readMem(0xabf8), 0xf6);
        // CB F6 0284
        gbc.setState(0x35bc, 0xba72, 0xc000, 0x4c80, 0x419d, 0x9c5e, 0x0, 0x0);
        gbc.writeMem(0x35bc, { 0xcb, 0xf6 });
        gbc.writeMem(0x9c5e, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xba72);
        EXPECT(gbc.pc(), 0x35be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c5e), 0xeb);
        // CB F6 0285
        gbc.setState(0x308a, 0xde3, 0x8f80, 0xcbe8, 0xf426, 0x2c93, 0x1, 0x0);
        gbc.writeMem(0x2c93, { 0xf0 });
        gbc.writeMem(0x308a, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xde3);
        EXPECT(gbc.pc(), 0x308c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0286
        gbc.setState(0x6fd8, 0x9db9, 0xeca0, 0x8442, 0x9d9d, 0x2d10, 0x0, 0x1);
        gbc.writeMem(0x2d10, { 0xf0 });
        gbc.writeMem(0x6fd8, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x9db9);
        EXPECT(gbc.pc(), 0x6fda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0288
        gbc.setState(0xcbb2, 0x527c, 0x72a0, 0xc769, 0x7e0d, 0xe14a, 0x0, 0x1);
        gbc.writeMem(0xcbb2, { 0xcb, 0xf6 });
        gbc.writeMem(0xe14a, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x527c);
        EXPECT(gbc.pc(), 0xcbb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbb2), 0xcb);
        EXPECT(gbc.readMem(0xcbb3), 0xf6);
        EXPECT(gbc.readMem(0xe14a), 0x5e);
        // CB F6 028A
        gbc.setState(0x3094, 0xe269, 0x20, 0xc1ee, 0x5006, 0x82d5, 0x1, 0x0);
        gbc.writeMem(0x3094, { 0xcb, 0xf6 });
        gbc.writeMem(0x82d5, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xe269);
        EXPECT(gbc.pc(), 0x3096);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82d5), 0xcd);
        // CB F6 028B
        gbc.setState(0x7cbe, 0x9c30, 0x1350, 0xca69, 0xccb9, 0x63ca, 0x1, 0x1);
        gbc.writeMem(0x63ca, { 0xf8 });
        gbc.writeMem(0x7cbe, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x9c30);
        EXPECT(gbc.pc(), 0x7cc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 028C
        gbc.setState(0xb80e, 0x47df, 0x13b0, 0xdabe, 0xb2d, 0x8c1e, 0x1, 0x0);
        gbc.writeMem(0x8c1e, { 0x61 });
        gbc.writeMem(0xb80e, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x47df);
        EXPECT(gbc.pc(), 0xb810);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c1e), 0x61);
        EXPECT(gbc.readMem(0xb80e), 0xcb);
        EXPECT(gbc.readMem(0xb80f), 0xf6);
        // CB F6 028E
        gbc.setState(0xde4f, 0x9033, 0x4400, 0x8ed0, 0x361d, 0xe3f7, 0x1, 0x1);
        gbc.writeMem(0xde4f, { 0xcb, 0xf6 });
        gbc.writeMem(0xe3f7, { 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x9033);
        EXPECT(gbc.pc(), 0xde51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde4f), 0xcb);
        EXPECT(gbc.readMem(0xde50), 0xf6);
        EXPECT(gbc.readMem(0xe3f7), 0x60);
        // CB F6 028F
        gbc.setState(0x9d8f, 0x7f1a, 0xb470, 0x912, 0xb950, 0xa969, 0x0, 0x1);
        gbc.writeMem(0x9d8f, { 0xcb, 0xf6 });
        gbc.writeMem(0xa969, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x7f1a);
        EXPECT(gbc.pc(), 0x9d91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d8f), 0xcb);
        EXPECT(gbc.readMem(0x9d90), 0xf6);
        EXPECT(gbc.readMem(0xa969), 0x50);
        // CB F6 0290
        gbc.setState(0xac49, 0xc5b9, 0xaa00, 0x9ac9, 0x9fc6, 0xd485, 0x1, 0x0);
        gbc.writeMem(0xac49, { 0xcb, 0xf6 });
        gbc.writeMem(0xd485, { 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc5b9);
        EXPECT(gbc.pc(), 0xac4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac49), 0xcb);
        EXPECT(gbc.readMem(0xac4a), 0xf6);
        EXPECT(gbc.readMem(0xd485), 0xc9);
        // CB F6 0292
        gbc.setState(0x8085, 0x9f42, 0x7360, 0x59ff, 0x3cc4, 0x8f98, 0x0, 0x1);
        gbc.writeMem(0x8085, { 0xcb, 0xf6 });
        gbc.writeMem(0x8f98, { 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x9f42);
        EXPECT(gbc.pc(), 0x8087);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8085), 0xcb);
        EXPECT(gbc.readMem(0x8086), 0xf6);
        EXPECT(gbc.readMem(0x8f98), 0xfa);
        // CB F6 0294
        gbc.setState(0x93db, 0x962e, 0xda10, 0xe45e, 0x3419, 0xdacf, 0x0, 0x1);
        gbc.writeMem(0x93db, { 0xcb, 0xf6 });
        gbc.writeMem(0xdacf, { 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x962e);
        EXPECT(gbc.pc(), 0x93dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93db), 0xcb);
        EXPECT(gbc.readMem(0x93dc), 0xf6);
        EXPECT(gbc.readMem(0xdacf), 0x7c);
        // CB F6 0297
        gbc.setState(0x517a, 0x6ff4, 0xa7a0, 0xa8f, 0xbce1, 0xfbe7, 0x1, 0x1);
        gbc.writeMem(0x517a, { 0xcb, 0xf6 });
        gbc.writeMem(0xfbe7, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x6ff4);
        EXPECT(gbc.pc(), 0x517c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfbe7), 0xe5);
        // CB F6 0298
        gbc.setState(0x9d20, 0xdf6d, 0x9a50, 0xb1d1, 0x76fd, 0xdb46, 0x0, 0x1);
        gbc.writeMem(0x9d20, { 0xcb, 0xf6 });
        gbc.writeMem(0xdb46, { 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xdf6d);
        EXPECT(gbc.pc(), 0x9d22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d20), 0xcb);
        EXPECT(gbc.readMem(0x9d21), 0xf6);
        EXPECT(gbc.readMem(0xdb46), 0xc9);
        // CB F6 0299
        gbc.setState(0xc155, 0x6594, 0xe670, 0x487c, 0x9a84, 0xae33, 0x1, 0x1);
        gbc.writeMem(0xae33, { 0x13 });
        gbc.writeMem(0xc155, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x6594);
        EXPECT(gbc.pc(), 0xc157);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae33), 0x53);
        EXPECT(gbc.readMem(0xc155), 0xcb);
        EXPECT(gbc.readMem(0xc156), 0xf6);
        // CB F6 029A
        gbc.setState(0x5856, 0x2ef7, 0xff40, 0xc24, 0x5e0d, 0xd338, 0x0, 0x0);
        gbc.writeMem(0x5856, { 0xcb, 0xf6 });
        gbc.writeMem(0xd338, { 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x2ef7);
        EXPECT(gbc.pc(), 0x5858);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd338), 0x60);
        // CB F6 029B
        gbc.setState(0x5596, 0xbf9c, 0x1490, 0x8423, 0x6d0d, 0xf494, 0x0, 0x0);
        gbc.writeMem(0x5596, { 0xcb, 0xf6 });
        gbc.writeMem(0xf494, { 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xbf9c);
        EXPECT(gbc.pc(), 0x5598);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf494), 0xc1);
        // CB F6 029C
        gbc.setState(0x69cf, 0x23, 0x66b0, 0xefaa, 0x5004, 0xbdaf, 0x0, 0x0);
        gbc.writeMem(0x69cf, { 0xcb, 0xf6 });
        gbc.writeMem(0xbdaf, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x23);
        EXPECT(gbc.pc(), 0x69d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdaf), 0xda);
        // CB F6 029D
        gbc.setState(0x8400, 0xcff5, 0xd10, 0x86c1, 0xcad3, 0xe1c7, 0x1, 0x0);
        gbc.writeMem(0x8400, { 0xcb, 0xf6 });
        gbc.writeMem(0xe1c7, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xcff5);
        EXPECT(gbc.pc(), 0x8402);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8400), 0xcb);
        EXPECT(gbc.readMem(0x8401), 0xf6);
        EXPECT(gbc.readMem(0xe1c7), 0x6d);
        // CB F6 029E
        gbc.setState(0xb616, 0x3cce, 0x5f80, 0x8022, 0x44b6, 0xa2b3, 0x0, 0x1);
        gbc.writeMem(0xa2b3, { 0xbb });
        gbc.writeMem(0xb616, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x3cce);
        EXPECT(gbc.pc(), 0xb618);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2b3), 0xfb);
        EXPECT(gbc.readMem(0xb616), 0xcb);
        EXPECT(gbc.readMem(0xb617), 0xf6);
        // CB F6 02A1
        gbc.setState(0x4ca0, 0x836f, 0xd4d0, 0x990, 0x1f3a, 0x10ea, 0x0, 0x0);
        gbc.writeMem(0x10ea, { 0xdc });
        gbc.writeMem(0x4ca0, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x836f);
        EXPECT(gbc.pc(), 0x4ca2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 02A3
        gbc.setState(0x3cbd, 0x109a, 0xef00, 0xd7c2, 0xc0fa, 0x136c, 0x1, 0x0);
        gbc.writeMem(0x136c, { 0xce });
        gbc.writeMem(0x3cbd, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x109a);
        EXPECT(gbc.pc(), 0x3cbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 02A5
        gbc.setState(0x39af, 0x1f44, 0x7560, 0x5cc, 0xdc99, 0xa24d, 0x0, 0x0);
        gbc.writeMem(0x39af, { 0xcb, 0xf6 });
        gbc.writeMem(0xa24d, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1f44);
        EXPECT(gbc.pc(), 0x39b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa24d), 0x7a);
        // CB F6 02A6
        gbc.setState(0x14cb, 0x3667, 0xfcf0, 0x252c, 0xaeee, 0x7776, 0x0, 0x0);
        gbc.writeMem(0x14cb, { 0xcb, 0xf6 });
        gbc.writeMem(0x7776, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x3667);
        EXPECT(gbc.pc(), 0x14cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 02A7
        gbc.setState(0x7166, 0x8b0, 0x9640, 0x8856, 0x6489, 0xde57, 0x0, 0x0);
        gbc.writeMem(0x7166, { 0xcb, 0xf6 });
        gbc.writeMem(0xde57, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8b0);
        EXPECT(gbc.pc(), 0x7168);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde57), 0xe1);
        // CB F6 02A9
        gbc.setState(0x709e, 0xdf73, 0xd130, 0xadb3, 0x6c92, 0x14c1, 0x0, 0x1);
        gbc.writeMem(0x14c1, { 0xd8 });
        gbc.writeMem(0x709e, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xdf73);
        EXPECT(gbc.pc(), 0x70a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 02AA
        gbc.setState(0x54ac, 0x84cb, 0xefe0, 0xf895, 0x3988, 0x176e, 0x1, 0x0);
        gbc.writeMem(0x176e, { 0x52 });
        gbc.writeMem(0x54ac, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x84cb);
        EXPECT(gbc.pc(), 0x54ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 02AB
        gbc.setState(0xbb1, 0x196b, 0xe1d0, 0x4be8, 0xf6b0, 0xe1ef, 0x0, 0x1);
        gbc.writeMem(0xbb1, { 0xcb, 0xf6 });
        gbc.writeMem(0xe1ef, { 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x196b);
        EXPECT(gbc.pc(), 0xbb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1ef), 0xf0);
        // CB F6 02AE
        gbc.setState(0x9ae4, 0xa11f, 0x7150, 0x2433, 0xacfb, 0x3f68, 0x0, 0x1);
        gbc.writeMem(0x3f68, { 0x5a });
        gbc.writeMem(0x9ae4, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xa11f);
        EXPECT(gbc.pc(), 0x9ae6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ae4), 0xcb);
        EXPECT(gbc.readMem(0x9ae5), 0xf6);
        // CB F6 02AF
        gbc.setState(0x8bfc, 0x7ee7, 0x37c0, 0xa3bc, 0x4327, 0x1ea9, 0x0, 0x0);
        gbc.writeMem(0x1ea9, { 0xec });
        gbc.writeMem(0x8bfc, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x7ee7);
        EXPECT(gbc.pc(), 0x8bfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bfc), 0xcb);
        EXPECT(gbc.readMem(0x8bfd), 0xf6);
        // CB F6 02B0
        gbc.setState(0xd7f4, 0x4859, 0x3250, 0x4c2d, 0x11b4, 0xe56a, 0x1, 0x0);
        gbc.writeMem(0xd7f4, { 0xcb, 0xf6 });
        gbc.writeMem(0xe56a, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x4859);
        EXPECT(gbc.pc(), 0xd7f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7f4), 0xcb);
        EXPECT(gbc.readMem(0xd7f5), 0xf6);
        EXPECT(gbc.readMem(0xe56a), 0x72);
        // CB F6 02B1
        gbc.setState(0xbe3a, 0x69c8, 0xa470, 0x4227, 0x5b0c, 0x941e, 0x0, 0x1);
        gbc.writeMem(0x941e, { 0x39 });
        gbc.writeMem(0xbe3a, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x69c8);
        EXPECT(gbc.pc(), 0xbe3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x941e), 0x79);
        EXPECT(gbc.readMem(0xbe3a), 0xcb);
        EXPECT(gbc.readMem(0xbe3b), 0xf6);
        // CB F6 02B3
        gbc.setState(0x66dd, 0x369c, 0x81b0, 0xd4ec, 0x58cf, 0x8462, 0x0, 0x0);
        gbc.writeMem(0x66dd, { 0xcb, 0xf6 });
        gbc.writeMem(0x8462, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x369c);
        EXPECT(gbc.pc(), 0x66df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8462), 0xc6);
        // CB F6 02B4
        gbc.setState(0x9314, 0x6bb5, 0xbc90, 0x2f3c, 0x1673, 0x6cbb, 0x1, 0x1);
        gbc.writeMem(0x6cbb, { 0x42 });
        gbc.writeMem(0x9314, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x6bb5);
        EXPECT(gbc.pc(), 0x9316);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9314), 0xcb);
        EXPECT(gbc.readMem(0x9315), 0xf6);
        // CB F6 02B6
        gbc.setState(0x95c1, 0x7b54, 0xf5a0, 0x1e90, 0x4e1, 0xb5b9, 0x1, 0x1);
        gbc.writeMem(0x95c1, { 0xcb, 0xf6 });
        gbc.writeMem(0xb5b9, { 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x7b54);
        EXPECT(gbc.pc(), 0x95c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95c1), 0xcb);
        EXPECT(gbc.readMem(0x95c2), 0xf6);
        EXPECT(gbc.readMem(0xb5b9), 0x5c);
        // CB F6 02B7
        gbc.setState(0xedd9, 0xeb5f, 0x1d60, 0x4819, 0xb472, 0x49c8, 0x0, 0x1);
        gbc.writeMem(0x49c8, { 0x70 });
        gbc.writeMem(0xedd9, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xeb5f);
        EXPECT(gbc.pc(), 0xeddb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedd9), 0xcb);
        EXPECT(gbc.readMem(0xedda), 0xf6);
        // CB F6 02B8
        gbc.setState(0x5a8a, 0x8a94, 0x3d60, 0x11dd, 0xeeb5, 0xa331, 0x0, 0x1);
        gbc.writeMem(0x5a8a, { 0xcb, 0xf6 });
        gbc.writeMem(0xa331, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x8a94);
        EXPECT(gbc.pc(), 0x5a8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa331), 0x4c);
        // CB F6 02B9
        gbc.setState(0xd082, 0xe43f, 0x49f0, 0x27bf, 0x43f1, 0xf6a0, 0x0, 0x1);
        gbc.writeMem(0xd082, { 0xcb, 0xf6 });
        gbc.writeMem(0xf6a0, { 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xe43f);
        EXPECT(gbc.pc(), 0xd084);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd082), 0xcb);
        EXPECT(gbc.readMem(0xd083), 0xf6);
        EXPECT(gbc.readMem(0xf6a0), 0x53);
        // CB F6 02BA
        gbc.setState(0xc2a5, 0x1f8a, 0x4f50, 0x1c80, 0xae0, 0x24ad, 0x0, 0x0);
        gbc.writeMem(0x24ad, { 0xd5 });
        gbc.writeMem(0xc2a5, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1f8a);
        EXPECT(gbc.pc(), 0xc2a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2a5), 0xcb);
        EXPECT(gbc.readMem(0xc2a6), 0xf6);
        // CB F6 02BB
        gbc.setState(0x2657, 0x3773, 0xfb80, 0x5c50, 0x2ca6, 0x87a4, 0x1, 0x1);
        gbc.writeMem(0x2657, { 0xcb, 0xf6 });
        gbc.writeMem(0x87a4, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x3773);
        EXPECT(gbc.pc(), 0x2659);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87a4), 0xc6);
        // CB F6 02BC
        gbc.setState(0x58f, 0xcb4a, 0xf900, 0x356f, 0xfa8a, 0x96c6, 0x1, 0x0);
        gbc.writeMem(0x58f, { 0xcb, 0xf6 });
        gbc.writeMem(0x96c6, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xcb4a);
        EXPECT(gbc.pc(), 0x591);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96c6), 0x64);
        // CB F6 02BD
        gbc.setState(0xc9a2, 0xe0c8, 0x38f0, 0xcd00, 0x779e, 0xee07, 0x1, 0x0);
        gbc.writeMem(0xc9a2, { 0xcb, 0xf6 });
        gbc.writeMem(0xee07, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xe0c8);
        EXPECT(gbc.pc(), 0xc9a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9a2), 0xcb);
        EXPECT(gbc.readMem(0xc9a3), 0xf6);
        EXPECT(gbc.readMem(0xee07), 0xd1);
        // CB F6 02BE
        gbc.setState(0x60f0, 0xd6a3, 0x8ea0, 0xaa18, 0x83e8, 0xe2a0, 0x1, 0x1);
        gbc.writeMem(0x60f0, { 0xcb, 0xf6 });
        gbc.writeMem(0xe2a0, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xd6a3);
        EXPECT(gbc.pc(), 0x60f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2a0), 0x57);
        // CB F6 02C0
        gbc.setState(0x7a1e, 0xb3e3, 0x3ce0, 0x659f, 0xcb20, 0x717f, 0x1, 0x0);
        gbc.writeMem(0x717f, { 0x4d });
        gbc.writeMem(0x7a1e, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xb3e3);
        EXPECT(gbc.pc(), 0x7a20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 02C1
        gbc.setState(0x37e2, 0x3148, 0x5240, 0x8806, 0x98d, 0x8e7e, 0x0, 0x0);
        gbc.writeMem(0x37e2, { 0xcb, 0xf6 });
        gbc.writeMem(0x8e7e, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x3148);
        EXPECT(gbc.pc(), 0x37e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e7e), 0x6f);
        // CB F6 02C3
        gbc.setState(0xa8c9, 0x4ee1, 0x56d0, 0x6323, 0xabf2, 0x8ed1, 0x0, 0x1);
        gbc.writeMem(0x8ed1, { 0xb });
        gbc.writeMem(0xa8c9, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x4ee1);
        EXPECT(gbc.pc(), 0xa8cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ed1), 0x4b);
        EXPECT(gbc.readMem(0xa8c9), 0xcb);
        EXPECT(gbc.readMem(0xa8ca), 0xf6);
        // CB F6 02C4
        gbc.setState(0xb7e2, 0x8eed, 0x9a40, 0x4849, 0xb87a, 0xf181, 0x1, 0x0);
        gbc.writeMem(0xb7e2, { 0xcb, 0xf6 });
        gbc.writeMem(0xf181, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x8eed);
        EXPECT(gbc.pc(), 0xb7e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7e2), 0xcb);
        EXPECT(gbc.readMem(0xb7e3), 0xf6);
        EXPECT(gbc.readMem(0xf181), 0xe5);
        // CB F6 02C5
        gbc.setState(0xed3c, 0x633, 0xae60, 0x6c7, 0x65a9, 0x4be, 0x1, 0x1);
        gbc.writeMem(0x4be, { 0x5e });
        gbc.writeMem(0xed3c, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x633);
        EXPECT(gbc.pc(), 0xed3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed3c), 0xcb);
        EXPECT(gbc.readMem(0xed3d), 0xf6);
        // CB F6 02C6
        gbc.setState(0x8635, 0x1c74, 0xab50, 0x5123, 0x3ad2, 0xd52f, 0x1, 0x0);
        gbc.writeMem(0x8635, { 0xcb, 0xf6 });
        gbc.writeMem(0xd52f, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x1c74);
        EXPECT(gbc.pc(), 0x8637);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8635), 0xcb);
        EXPECT(gbc.readMem(0x8636), 0xf6);
        EXPECT(gbc.readMem(0xd52f), 0xfe);
        // CB F6 02C7
        gbc.setState(0x6db0, 0x2399, 0xaa90, 0x25e, 0x324e, 0xc400, 0x0, 0x1);
        gbc.writeMem(0x6db0, { 0xcb, 0xf6 });
        gbc.writeMem(0xc400, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x2399);
        EXPECT(gbc.pc(), 0x6db2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc400), 0xfe);
        // CB F6 02C8
        gbc.setState(0xefad, 0x664f, 0x7c00, 0xf1d2, 0x3600, 0xe276, 0x1, 0x0);
        gbc.writeMem(0xe276, { 0x1a });
        gbc.writeMem(0xefad, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x664f);
        EXPECT(gbc.pc(), 0xefaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe276), 0x5a);
        EXPECT(gbc.readMem(0xefad), 0xcb);
        EXPECT(gbc.readMem(0xefae), 0xf6);
        // CB F6 02C9
        gbc.setState(0xc272, 0xb00d, 0x650, 0x4312, 0xc2fa, 0xb9da, 0x0, 0x1);
        gbc.writeMem(0xb9da, { 0x29 });
        gbc.writeMem(0xc272, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xb00d);
        EXPECT(gbc.pc(), 0xc274);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9da), 0x69);
        EXPECT(gbc.readMem(0xc272), 0xcb);
        EXPECT(gbc.readMem(0xc273), 0xf6);
        // CB F6 02CA
        gbc.setState(0x8703, 0x6c9a, 0x5b00, 0x87e5, 0x5e0f, 0x6039, 0x1, 0x1);
        gbc.writeMem(0x6039, { 0xc8 });
        gbc.writeMem(0x8703, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x6c9a);
        EXPECT(gbc.pc(), 0x8705);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8703), 0xcb);
        EXPECT(gbc.readMem(0x8704), 0xf6);
        // CB F6 02CC
        gbc.setState(0x954c, 0x94e, 0x7e80, 0x4181, 0x7fb0, 0x6682, 0x1, 0x0);
        gbc.writeMem(0x6682, { 0x77 });
        gbc.writeMem(0x954c, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x94e);
        EXPECT(gbc.pc(), 0x954e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x954c), 0xcb);
        EXPECT(gbc.readMem(0x954d), 0xf6);
        // CB F6 02CD
        gbc.setState(0x722e, 0x167d, 0x6750, 0x881d, 0x48c6, 0x853a, 0x0, 0x0);
        gbc.writeMem(0x722e, { 0xcb, 0xf6 });
        gbc.writeMem(0x853a, { 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x167d);
        EXPECT(gbc.pc(), 0x7230);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x853a), 0x6c);
        // CB F6 02CE
        gbc.setState(0xada6, 0x8199, 0xa3f0, 0xbf45, 0x5a31, 0xd068, 0x0, 0x0);
        gbc.writeMem(0xada6, { 0xcb, 0xf6 });
        gbc.writeMem(0xd068, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x8199);
        EXPECT(gbc.pc(), 0xada8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xada6), 0xcb);
        EXPECT(gbc.readMem(0xada7), 0xf6);
        EXPECT(gbc.readMem(0xd068), 0xdc);
        // CB F6 02CF
        gbc.setState(0xa17b, 0xb4a4, 0xc4b0, 0xbaeb, 0x9d9b, 0x7fc9, 0x1, 0x0);
        gbc.writeMem(0x7fc9, { 0xc7 });
        gbc.writeMem(0xa17b, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xb4a4);
        EXPECT(gbc.pc(), 0xa17d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa17b), 0xcb);
        EXPECT(gbc.readMem(0xa17c), 0xf6);
        // CB F6 02D0
        gbc.setState(0xc7ea, 0x53fa, 0xb0e0, 0x318c, 0xac4b, 0xf8c0, 0x0, 0x0);
        gbc.writeMem(0xc7ea, { 0xcb, 0xf6 });
        gbc.writeMem(0xf8c0, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x53fa);
        EXPECT(gbc.pc(), 0xc7ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7ea), 0xcb);
        EXPECT(gbc.readMem(0xc7eb), 0xf6);
        EXPECT(gbc.readMem(0xf8c0), 0xd2);
        // CB F6 02D1
        gbc.setState(0xeb4f, 0x8727, 0xc4b0, 0x6ff7, 0x9710, 0x5436, 0x1, 0x0);
        gbc.writeMem(0x5436, { 0xfc });
        gbc.writeMem(0xeb4f, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x8727);
        EXPECT(gbc.pc(), 0xeb51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb4f), 0xcb);
        EXPECT(gbc.readMem(0xeb50), 0xf6);
        // CB F6 02D2
        gbc.setState(0x9c62, 0xb0f7, 0xd250, 0x3230, 0xe283, 0xb4e8, 0x1, 0x0);
        gbc.writeMem(0x9c62, { 0xcb, 0xf6 });
        gbc.writeMem(0xb4e8, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xb0f7);
        EXPECT(gbc.pc(), 0x9c64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c62), 0xcb);
        EXPECT(gbc.readMem(0x9c63), 0xf6);
        EXPECT(gbc.readMem(0xb4e8), 0xdc);
        // CB F6 02D3
        gbc.setState(0x29b8, 0xddf1, 0x5da0, 0xac4f, 0x7418, 0x84cd, 0x1, 0x1);
        gbc.writeMem(0x29b8, { 0xcb, 0xf6 });
        gbc.writeMem(0x84cd, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xddf1);
        EXPECT(gbc.pc(), 0x29ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84cd), 0x73);
        // CB F6 02D5
        gbc.setState(0x8094, 0xaf3b, 0xcb00, 0x2f42, 0xd569, 0xc00d, 0x1, 0x1);
        gbc.writeMem(0x8094, { 0xcb, 0xf6 });
        gbc.writeMem(0xc00d, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xaf3b);
        EXPECT(gbc.pc(), 0x8096);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8094), 0xcb);
        EXPECT(gbc.readMem(0x8095), 0xf6);
        EXPECT(gbc.readMem(0xc00d), 0xcf);
        // CB F6 02D6
        gbc.setState(0xe876, 0xc83, 0x2670, 0x9b19, 0x98a6, 0x88dc, 0x0, 0x0);
        gbc.writeMem(0x88dc, { 0x3b });
        gbc.writeMem(0xe876, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xc83);
        EXPECT(gbc.pc(), 0xe878);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88dc), 0x7b);
        EXPECT(gbc.readMem(0xe876), 0xcb);
        EXPECT(gbc.readMem(0xe877), 0xf6);
        // CB F6 02D7
        gbc.setState(0x5805, 0x160, 0x3f50, 0x10cb, 0xe9a9, 0x5700, 0x1, 0x0);
        gbc.writeMem(0x5700, { 0x53 });
        gbc.writeMem(0x5805, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x160);
        EXPECT(gbc.pc(), 0x5807);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 02D8
        gbc.setState(0xe687, 0x4ea8, 0x8260, 0xe51e, 0xb104, 0x9c2d, 0x1, 0x0);
        gbc.writeMem(0x9c2d, { 0x86 });
        gbc.writeMem(0xe687, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x4ea8);
        EXPECT(gbc.pc(), 0xe689);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c2d), 0xc6);
        EXPECT(gbc.readMem(0xe687), 0xcb);
        EXPECT(gbc.readMem(0xe688), 0xf6);
        // CB F6 02D9
        gbc.setState(0x19c1, 0x3f1, 0x1a80, 0xf10f, 0x670d, 0x2c43, 0x1, 0x1);
        gbc.writeMem(0x19c1, { 0xcb, 0xf6 });
        gbc.writeMem(0x2c43, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x3f1);
        EXPECT(gbc.pc(), 0x19c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 02DA
        gbc.setState(0xb5d8, 0x1f71, 0xa590, 0xd3e4, 0xc7d6, 0x210f, 0x0, 0x1);
        gbc.writeMem(0x210f, { 0xe5 });
        gbc.writeMem(0xb5d8, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x1f71);
        EXPECT(gbc.pc(), 0xb5da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5d8), 0xcb);
        EXPECT(gbc.readMem(0xb5d9), 0xf6);
        // CB F6 02DB
        gbc.setState(0xf3e, 0x9c8a, 0xec0, 0x60b5, 0x26f, 0x7c56, 0x0, 0x0);
        gbc.writeMem(0xf3e, { 0xcb, 0xf6 });
        gbc.writeMem(0x7c56, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x9c8a);
        EXPECT(gbc.pc(), 0xf40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 02DC
        gbc.setState(0x249b, 0xfd8, 0x1d00, 0xf2b5, 0xf2ea, 0xbe8b, 0x0, 0x0);
        gbc.writeMem(0x249b, { 0xcb, 0xf6 });
        gbc.writeMem(0xbe8b, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xfd8);
        EXPECT(gbc.pc(), 0x249d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe8b), 0xdf);
        // CB F6 02DD
        gbc.setState(0x14ad, 0x20b9, 0x3250, 0xb5e5, 0x63cf, 0xb3db, 0x1, 0x1);
        gbc.writeMem(0x14ad, { 0xcb, 0xf6 });
        gbc.writeMem(0xb3db, { 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x20b9);
        EXPECT(gbc.pc(), 0x14af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3db), 0x60);
        // CB F6 02DE
        gbc.setState(0x55d9, 0x8b4b, 0xcaa0, 0x503, 0xa507, 0xb796, 0x1, 0x1);
        gbc.writeMem(0x55d9, { 0xcb, 0xf6 });
        gbc.writeMem(0xb796, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x8b4b);
        EXPECT(gbc.pc(), 0x55db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb796), 0x53);
        // CB F6 02DF
        gbc.setState(0x29e5, 0xa41b, 0x6b10, 0x353d, 0xde42, 0x8b72, 0x1, 0x1);
        gbc.writeMem(0x29e5, { 0xcb, 0xf6 });
        gbc.writeMem(0x8b72, { 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xa41b);
        EXPECT(gbc.pc(), 0x29e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b72), 0xe2);
        // CB F6 02E0
        gbc.setState(0xd96, 0x46c7, 0x7750, 0x976f, 0xad3, 0x858b, 0x1, 0x1);
        gbc.writeMem(0xd96, { 0xcb, 0xf6 });
        gbc.writeMem(0x858b, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x46c7);
        EXPECT(gbc.pc(), 0xd98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x858b), 0x77);
        // CB F6 02E1
        gbc.setState(0x2a5b, 0x7c2d, 0x4000, 0x4ff7, 0x21cd, 0x1110, 0x0, 0x1);
        gbc.writeMem(0x1110, { 0xf9 });
        gbc.writeMem(0x2a5b, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x7c2d);
        EXPECT(gbc.pc(), 0x2a5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 02E2
        gbc.setState(0xd3f3, 0xb32c, 0xeda0, 0x30bc, 0xe50c, 0x1f0, 0x0, 0x1);
        gbc.writeMem(0x1f0, { 0x7f });
        gbc.writeMem(0xd3f3, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xb32c);
        EXPECT(gbc.pc(), 0xd3f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3f3), 0xcb);
        EXPECT(gbc.readMem(0xd3f4), 0xf6);
        // CB F6 02E3
        gbc.setState(0xbc2, 0x3b1e, 0x1590, 0x8e32, 0xf3dd, 0x180, 0x1, 0x1);
        gbc.writeMem(0x180, { 0x5e });
        gbc.writeMem(0xbc2, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x3b1e);
        EXPECT(gbc.pc(), 0xbc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 02E4
        gbc.setState(0x800a, 0x6a68, 0xa370, 0xd830, 0x271f, 0x6907, 0x0, 0x0);
        gbc.writeMem(0x6907, { 0x60 });
        gbc.writeMem(0x800a, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x6a68);
        EXPECT(gbc.pc(), 0x800c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x800a), 0xcb);
        EXPECT(gbc.readMem(0x800b), 0xf6);
        // CB F6 02E5
        gbc.setState(0x4d7d, 0x758c, 0xa180, 0x632e, 0xa799, 0x96e8, 0x1, 0x0);
        gbc.writeMem(0x4d7d, { 0xcb, 0xf6 });
        gbc.writeMem(0x96e8, { 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x758c);
        EXPECT(gbc.pc(), 0x4d7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96e8), 0xfd);
        // CB F6 02E7
        gbc.setState(0x24e8, 0xc8e1, 0x6b40, 0x834e, 0x40b8, 0x22c6, 0x0, 0x1);
        gbc.writeMem(0x22c6, { 0xef });
        gbc.writeMem(0x24e8, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xc8e1);
        EXPECT(gbc.pc(), 0x24ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 02E9
        gbc.setState(0x1fa3, 0x96b4, 0x46e0, 0x3b08, 0xda8a, 0xa1ff, 0x0, 0x0);
        gbc.writeMem(0x1fa3, { 0xcb, 0xf6 });
        gbc.writeMem(0xa1ff, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x96b4);
        EXPECT(gbc.pc(), 0x1fa5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1ff), 0x61);
        // CB F6 02EB
        gbc.setState(0x9c49, 0xab1d, 0x2be0, 0x9f72, 0x6bb8, 0xa43a, 0x1, 0x1);
        gbc.writeMem(0x9c49, { 0xcb, 0xf6 });
        gbc.writeMem(0xa43a, { 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xab1d);
        EXPECT(gbc.pc(), 0x9c4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c49), 0xcb);
        EXPECT(gbc.readMem(0x9c4a), 0xf6);
        EXPECT(gbc.readMem(0xa43a), 0x71);
        // CB F6 02EC
        gbc.setState(0x8c05, 0xbaf4, 0xd490, 0x39ee, 0xf826, 0x8db5, 0x0, 0x1);
        gbc.writeMem(0x8c05, { 0xcb, 0xf6 });
        gbc.writeMem(0x8db5, { 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xbaf4);
        EXPECT(gbc.pc(), 0x8c07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c05), 0xcb);
        EXPECT(gbc.readMem(0x8c06), 0xf6);
        EXPECT(gbc.readMem(0x8db5), 0x68);
        // CB F6 02ED
        gbc.setState(0x304e, 0xe536, 0xf7d0, 0xd19e, 0x264, 0x9cc5, 0x1, 0x0);
        gbc.writeMem(0x304e, { 0xcb, 0xf6 });
        gbc.writeMem(0x9cc5, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xe536);
        EXPECT(gbc.pc(), 0x3050);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cc5), 0x40);
        // CB F6 02EE
        gbc.setState(0x55e7, 0xf50c, 0x78a0, 0x165b, 0x631a, 0xd1ab, 0x1, 0x0);
        gbc.writeMem(0x55e7, { 0xcb, 0xf6 });
        gbc.writeMem(0xd1ab, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xf50c);
        EXPECT(gbc.pc(), 0x55e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1ab), 0xf5);
        // CB F6 02EF
        gbc.setState(0x7a9e, 0x1853, 0x4480, 0xca51, 0x285e, 0x8540, 0x1, 0x0);
        gbc.writeMem(0x7a9e, { 0xcb, 0xf6 });
        gbc.writeMem(0x8540, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x1853);
        EXPECT(gbc.pc(), 0x7aa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8540), 0x4c);
        // CB F6 02F0
        gbc.setState(0x2c8f, 0xeab5, 0xbe20, 0x47fa, 0x4f90, 0x1392, 0x0, 0x1);
        gbc.writeMem(0x1392, { 0x7a });
        gbc.writeMem(0x2c8f, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xeab5);
        EXPECT(gbc.pc(), 0x2c91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 02F1
        gbc.setState(0xb551, 0xcfb5, 0x8140, 0xc4bf, 0x2b16, 0xf238, 0x1, 0x0);
        gbc.writeMem(0xb551, { 0xcb, 0xf6 });
        gbc.writeMem(0xf238, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xcfb5);
        EXPECT(gbc.pc(), 0xb553);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb551), 0xcb);
        EXPECT(gbc.readMem(0xb552), 0xf6);
        EXPECT(gbc.readMem(0xf238), 0xf3);
        // CB F6 02F3
        gbc.setState(0xdd4c, 0x1d78, 0xf320, 0x25ac, 0xf9, 0x8a69, 0x0, 0x1);
        gbc.writeMem(0x8a69, { 0x8 });
        gbc.writeMem(0xdd4c, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x1d78);
        EXPECT(gbc.pc(), 0xdd4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a69), 0x48);
        EXPECT(gbc.readMem(0xdd4c), 0xcb);
        EXPECT(gbc.readMem(0xdd4d), 0xf6);
        // CB F6 02F4
        gbc.setState(0x4b3c, 0xc0e8, 0xbd60, 0xc4ad, 0xf0b9, 0xc408, 0x1, 0x1);
        gbc.writeMem(0x4b3c, { 0xcb, 0xf6 });
        gbc.writeMem(0xc408, { 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xc0e8);
        EXPECT(gbc.pc(), 0x4b3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc408), 0x65);
        // CB F6 02F5
        gbc.setState(0x7552, 0x1062, 0x9bc0, 0xd9fe, 0x239d, 0xc283, 0x1, 0x1);
        gbc.writeMem(0x7552, { 0xcb, 0xf6 });
        gbc.writeMem(0xc283, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x1062);
        EXPECT(gbc.pc(), 0x7554);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc283), 0xf2);
        // CB F6 02F9
        gbc.setState(0xa3f6, 0x9e50, 0x8e70, 0xa38a, 0x726d, 0xb872, 0x1, 0x0);
        gbc.writeMem(0xa3f6, { 0xcb, 0xf6 });
        gbc.writeMem(0xb872, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x9e50);
        EXPECT(gbc.pc(), 0xa3f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3f6), 0xcb);
        EXPECT(gbc.readMem(0xa3f7), 0xf6);
        EXPECT(gbc.readMem(0xb872), 0x56);
        // CB F6 02FA
        gbc.setState(0x46bf, 0x24dd, 0x1ff0, 0xcd68, 0x32fb, 0x80f9, 0x0, 0x1);
        gbc.writeMem(0x46bf, { 0xcb, 0xf6 });
        gbc.writeMem(0x80f9, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x24dd);
        EXPECT(gbc.pc(), 0x46c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80f9), 0x58);
        // CB F6 02FC
        gbc.setState(0x6904, 0xc66d, 0xe790, 0x8790, 0x35d6, 0xd46d, 0x0, 0x1);
        gbc.writeMem(0x6904, { 0xcb, 0xf6 });
        gbc.writeMem(0xd46d, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xc66d);
        EXPECT(gbc.pc(), 0x6906);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd46d), 0xfe);
        // CB F6 02FD
        gbc.setState(0xda8e, 0x56, 0xcc80, 0xdb59, 0x1464, 0xc82d, 0x1, 0x1);
        gbc.writeMem(0xc82d, { 0xf });
        gbc.writeMem(0xda8e, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x56);
        EXPECT(gbc.pc(), 0xda90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc82d), 0x4f);
        EXPECT(gbc.readMem(0xda8e), 0xcb);
        EXPECT(gbc.readMem(0xda8f), 0xf6);
        // CB F6 02FE
        gbc.setState(0x8bb3, 0x3b3b, 0x5ab0, 0x2bbb, 0xd2bd, 0x6fef, 0x0, 0x1);
        gbc.writeMem(0x6fef, { 0xfe });
        gbc.writeMem(0x8bb3, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x3b3b);
        EXPECT(gbc.pc(), 0x8bb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bb3), 0xcb);
        EXPECT(gbc.readMem(0x8bb4), 0xf6);
        // CB F6 02FF
        gbc.setState(0xbd44, 0xd541, 0x53d0, 0xb9f5, 0x3b54, 0xc329, 0x0, 0x1);
        gbc.writeMem(0xbd44, { 0xcb, 0xf6 });
        gbc.writeMem(0xc329, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xd541);
        EXPECT(gbc.pc(), 0xbd46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd44), 0xcb);
        EXPECT(gbc.readMem(0xbd45), 0xf6);
        EXPECT(gbc.readMem(0xc329), 0x50);
        // CB F6 0300
        gbc.setState(0x28c1, 0x7e1e, 0x8940, 0xf451, 0x13d3, 0xdefa, 0x0, 0x0);
        gbc.writeMem(0x28c1, { 0xcb, 0xf6 });
        gbc.writeMem(0xdefa, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x7e1e);
        EXPECT(gbc.pc(), 0x28c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdefa), 0x79);
        // CB F6 0301
        gbc.setState(0x1893, 0xd872, 0x3730, 0x6556, 0x93b3, 0xa7c0, 0x1, 0x1);
        gbc.writeMem(0x1893, { 0xcb, 0xf6 });
        gbc.writeMem(0xa7c0, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xd872);
        EXPECT(gbc.pc(), 0x1895);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7c0), 0x69);
        // CB F6 0304
        gbc.setState(0x57fd, 0xfb58, 0x9920, 0xdc01, 0x25a4, 0xb32d, 0x0, 0x1);
        gbc.writeMem(0x57fd, { 0xcb, 0xf6 });
        gbc.writeMem(0xb32d, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xfb58);
        EXPECT(gbc.pc(), 0x57ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb32d), 0xea);
        // CB F6 0305
        gbc.setState(0x1b67, 0xdcdf, 0xaab0, 0x18ee, 0xcd6e, 0x808e, 0x0, 0x0);
        gbc.writeMem(0x1b67, { 0xcb, 0xf6 });
        gbc.writeMem(0x808e, { 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xdcdf);
        EXPECT(gbc.pc(), 0x1b69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x808e), 0x5c);
        // CB F6 0306
        gbc.setState(0x67fe, 0x24a2, 0x3780, 0xbb53, 0xa5fd, 0xcbe1, 0x1, 0x0);
        gbc.writeMem(0x67fe, { 0xcb, 0xf6 });
        gbc.writeMem(0xcbe1, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x24a2);
        EXPECT(gbc.pc(), 0x6800);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbe1), 0xe5);
        // CB F6 030B
        gbc.setState(0x9ab5, 0x9e26, 0x93e0, 0x50f2, 0x5ea0, 0x321f, 0x0, 0x0);
        gbc.writeMem(0x321f, { 0xca });
        gbc.writeMem(0x9ab5, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x9e26);
        EXPECT(gbc.pc(), 0x9ab7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ab5), 0xcb);
        EXPECT(gbc.readMem(0x9ab6), 0xf6);
        // CB F6 030C
        gbc.setState(0xbb24, 0xaa6b, 0xe310, 0x4341, 0x24a3, 0xe75a, 0x0, 0x0);
        gbc.writeMem(0xbb24, { 0xcb, 0xf6 });
        gbc.writeMem(0xe75a, { 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xaa6b);
        EXPECT(gbc.pc(), 0xbb26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb24), 0xcb);
        EXPECT(gbc.readMem(0xbb25), 0xf6);
        EXPECT(gbc.readMem(0xe75a), 0x43);
        // CB F6 030E
        gbc.setState(0xe4dd, 0xf54f, 0x6db0, 0x195d, 0xae2, 0xafa9, 0x1, 0x0);
        gbc.writeMem(0xafa9, { 0xf9 });
        gbc.writeMem(0xe4dd, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xf54f);
        EXPECT(gbc.pc(), 0xe4df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafa9), 0xf9);
        EXPECT(gbc.readMem(0xe4dd), 0xcb);
        EXPECT(gbc.readMem(0xe4de), 0xf6);
        // CB F6 0311
        gbc.setState(0x9e02, 0x3ef6, 0xab80, 0xd5ba, 0x528f, 0xa01d, 0x0, 0x1);
        gbc.writeMem(0x9e02, { 0xcb, 0xf6 });
        gbc.writeMem(0xa01d, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x3ef6);
        EXPECT(gbc.pc(), 0x9e04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e02), 0xcb);
        EXPECT(gbc.readMem(0x9e03), 0xf6);
        EXPECT(gbc.readMem(0xa01d), 0xec);
        // CB F6 0314
        gbc.setState(0x62a4, 0xda7b, 0xc3f0, 0x47a2, 0x95b9, 0xe98c, 0x1, 0x0);
        gbc.writeMem(0x62a4, { 0xcb, 0xf6 });
        gbc.writeMem(0xe98c, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xda7b);
        EXPECT(gbc.pc(), 0x62a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe98c), 0x6f);
        // CB F6 0315
        gbc.setState(0xe818, 0xc6c1, 0xbff0, 0xcffa, 0x7c9, 0xc155, 0x0, 0x0);
        gbc.writeMem(0xc155, { 0x3f });
        gbc.writeMem(0xe818, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xc6c1);
        EXPECT(gbc.pc(), 0xe81a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc155), 0x7f);
        EXPECT(gbc.readMem(0xe818), 0xcb);
        EXPECT(gbc.readMem(0xe819), 0xf6);
        // CB F6 0317
        gbc.setState(0xc283, 0x14f3, 0xc9f0, 0xbfab, 0x5a16, 0xcf11, 0x1, 0x1);
        gbc.writeMem(0xc283, { 0xcb, 0xf6 });
        gbc.writeMem(0xcf11, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x14f3);
        EXPECT(gbc.pc(), 0xc285);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc283), 0xcb);
        EXPECT(gbc.readMem(0xc284), 0xf6);
        EXPECT(gbc.readMem(0xcf11), 0x47);
        // CB F6 0319
        gbc.setState(0x5d42, 0x3aa3, 0xb4a0, 0x4855, 0x777b, 0xed0a, 0x0, 0x1);
        gbc.writeMem(0x5d42, { 0xcb, 0xf6 });
        gbc.writeMem(0xed0a, { 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x3aa3);
        EXPECT(gbc.pc(), 0x5d44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed0a), 0x4e);
        // CB F6 031A
        gbc.setState(0x6940, 0x2267, 0x2980, 0x1261, 0xf044, 0xbdd4, 0x1, 0x0);
        gbc.writeMem(0x6940, { 0xcb, 0xf6 });
        gbc.writeMem(0xbdd4, { 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x2267);
        EXPECT(gbc.pc(), 0x6942);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdd4), 0x5c);
        // CB F6 031B
        gbc.setState(0x2a6c, 0xd07f, 0x4ec0, 0x62b2, 0xffe, 0xfbe, 0x0, 0x0);
        gbc.writeMem(0xfbe, { 0x58 });
        gbc.writeMem(0x2a6c, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xd07f);
        EXPECT(gbc.pc(), 0x2a6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 031C
        gbc.setState(0x84e9, 0x39ac, 0xdc50, 0x822, 0x5684, 0x583, 0x0, 0x1);
        gbc.writeMem(0x583, { 0xd9 });
        gbc.writeMem(0x84e9, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x39ac);
        EXPECT(gbc.pc(), 0x84eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84e9), 0xcb);
        EXPECT(gbc.readMem(0x84ea), 0xf6);
        // CB F6 031D
        gbc.setState(0xeff, 0xb471, 0xbbf0, 0xa7bc, 0xcd77, 0xe20b, 0x0, 0x1);
        gbc.writeMem(0xeff, { 0xcb, 0xf6 });
        gbc.writeMem(0xe20b, { 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xb471);
        EXPECT(gbc.pc(), 0xf01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe20b), 0xd6);
        // CB F6 031E
        gbc.setState(0x9dcf, 0xb603, 0xb870, 0xe5d0, 0xb5f2, 0xbada, 0x0, 0x0);
        gbc.writeMem(0x9dcf, { 0xcb, 0xf6 });
        gbc.writeMem(0xbada, { 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xb603);
        EXPECT(gbc.pc(), 0x9dd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dcf), 0xcb);
        EXPECT(gbc.readMem(0x9dd0), 0xf6);
        EXPECT(gbc.readMem(0xbada), 0x4e);
        // CB F6 0320
        gbc.setState(0xb79f, 0x4292, 0x25b0, 0x3613, 0x56f0, 0x5536, 0x0, 0x1);
        gbc.writeMem(0x5536, { 0x7a });
        gbc.writeMem(0xb79f, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x4292);
        EXPECT(gbc.pc(), 0xb7a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb79f), 0xcb);
        EXPECT(gbc.readMem(0xb7a0), 0xf6);
        // CB F6 0321
        gbc.setState(0xe8cf, 0x4346, 0x6880, 0xad37, 0x2740, 0xea9f, 0x1, 0x1);
        gbc.writeMem(0xe8cf, { 0xcb, 0xf6 });
        gbc.writeMem(0xea9f, { 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x4346);
        EXPECT(gbc.pc(), 0xe8d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8cf), 0xcb);
        EXPECT(gbc.readMem(0xe8d0), 0xf6);
        EXPECT(gbc.readMem(0xea9f), 0x5d);
        // CB F6 0323
        gbc.setState(0x66ee, 0xb463, 0xbae0, 0xa622, 0xb475, 0x244c, 0x1, 0x0);
        gbc.writeMem(0x244c, { 0x49 });
        gbc.writeMem(0x66ee, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xb463);
        EXPECT(gbc.pc(), 0x66f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0324
        gbc.setState(0x2438, 0x7bad, 0xa1f0, 0x4c08, 0xb536, 0x6f51, 0x1, 0x1);
        gbc.writeMem(0x2438, { 0xcb, 0xf6 });
        gbc.writeMem(0x6f51, { 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x7bad);
        EXPECT(gbc.pc(), 0x243a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 0329
        gbc.setState(0x81aa, 0xb001, 0x1450, 0x76b1, 0x4ad7, 0x8cea, 0x0, 0x0);
        gbc.writeMem(0x81aa, { 0xcb, 0xf6 });
        gbc.writeMem(0x8cea, { 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xb001);
        EXPECT(gbc.pc(), 0x81ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81aa), 0xcb);
        EXPECT(gbc.readMem(0x81ab), 0xf6);
        EXPECT(gbc.readMem(0x8cea), 0x4b);
        // CB F6 032A
        gbc.setState(0x43d7, 0x9dc5, 0xcee0, 0xb07a, 0x1553, 0xe19f, 0x0, 0x1);
        gbc.writeMem(0x43d7, { 0xcb, 0xf6 });
        gbc.writeMem(0xe19f, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x9dc5);
        EXPECT(gbc.pc(), 0x43d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe19f), 0xd6);
        // CB F6 032B
        gbc.setState(0xb34b, 0xf8f, 0x6520, 0xd7b2, 0x628, 0xb382, 0x0, 0x0);
        gbc.writeMem(0xb34b, { 0xcb, 0xf6 });
        gbc.writeMem(0xb382, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xf8f);
        EXPECT(gbc.pc(), 0xb34d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb34b), 0xcb);
        EXPECT(gbc.readMem(0xb34c), 0xf6);
        EXPECT(gbc.readMem(0xb382), 0x58);
        // CB F6 032C
        gbc.setState(0x69e6, 0x65ca, 0x3210, 0x284, 0x3f5d, 0xd0d5, 0x0, 0x1);
        gbc.writeMem(0x69e6, { 0xcb, 0xf6 });
        gbc.writeMem(0xd0d5, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x65ca);
        EXPECT(gbc.pc(), 0x69e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0d5), 0xf7);
        // CB F6 032D
        gbc.setState(0x6662, 0xbadf, 0x7590, 0x7834, 0xc14a, 0xf3d9, 0x0, 0x1);
        gbc.writeMem(0x6662, { 0xcb, 0xf6 });
        gbc.writeMem(0xf3d9, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xbadf);
        EXPECT(gbc.pc(), 0x6664);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf3d9), 0xf4);
        // CB F6 032E
        gbc.setState(0x39b3, 0xe2af, 0x5940, 0xc158, 0xae56, 0x4ea6, 0x0, 0x0);
        gbc.writeMem(0x39b3, { 0xcb, 0xf6 });
        gbc.writeMem(0x4ea6, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xe2af);
        EXPECT(gbc.pc(), 0x39b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0331
        gbc.setState(0xc4c3, 0xa32c, 0xf2b0, 0x22f0, 0x3c47, 0xd139, 0x1, 0x1);
        gbc.writeMem(0xc4c3, { 0xcb, 0xf6 });
        gbc.writeMem(0xd139, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xa32c);
        EXPECT(gbc.pc(), 0xc4c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4c3), 0xcb);
        EXPECT(gbc.readMem(0xc4c4), 0xf6);
        EXPECT(gbc.readMem(0xd139), 0xce);
        // CB F6 0332
        gbc.setState(0x5333, 0xb7b5, 0xeaa0, 0xdcff, 0x7426, 0x8c90, 0x0, 0x1);
        gbc.writeMem(0x5333, { 0xcb, 0xf6 });
        gbc.writeMem(0x8c90, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xb7b5);
        EXPECT(gbc.pc(), 0x5335);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c90), 0x6c);
        // CB F6 0335
        gbc.setState(0x6944, 0x7d52, 0xa450, 0xa4b, 0xd408, 0x63c, 0x1, 0x0);
        gbc.writeMem(0x63c, { 0xc4 });
        gbc.writeMem(0x6944, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x7d52);
        EXPECT(gbc.pc(), 0x6946);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 0336
        gbc.setState(0x773b, 0x196c, 0x1440, 0x4500, 0xe3de, 0xf327, 0x1, 0x1);
        gbc.writeMem(0x773b, { 0xcb, 0xf6 });
        gbc.writeMem(0xf327, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x196c);
        EXPECT(gbc.pc(), 0x773d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf327), 0xfb);
        // CB F6 0337
        gbc.setState(0xc896, 0x6ad0, 0xce50, 0xaf72, 0xdca6, 0x92b2, 0x0, 0x0);
        gbc.writeMem(0x92b2, { 0x62 });
        gbc.writeMem(0xc896, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6ad0);
        EXPECT(gbc.pc(), 0xc898);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92b2), 0x62);
        EXPECT(gbc.readMem(0xc896), 0xcb);
        EXPECT(gbc.readMem(0xc897), 0xf6);
        // CB F6 0338
        gbc.setState(0x93dd, 0x9d94, 0xeed0, 0x438e, 0x309c, 0x4db3, 0x0, 0x1);
        gbc.writeMem(0x4db3, { 0xf6 });
        gbc.writeMem(0x93dd, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x9d94);
        EXPECT(gbc.pc(), 0x93df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93dd), 0xcb);
        EXPECT(gbc.readMem(0x93de), 0xf6);
        // CB F6 033C
        gbc.setState(0x6879, 0x617b, 0xe120, 0x9d46, 0x2d0b, 0x992a, 0x1, 0x0);
        gbc.writeMem(0x6879, { 0xcb, 0xf6 });
        gbc.writeMem(0x992a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x617b);
        EXPECT(gbc.pc(), 0x687b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x992a), 0xfb);
        // CB F6 033D
        gbc.setState(0xd3f8, 0x484e, 0xff90, 0xc400, 0x15f5, 0xb9de, 0x1, 0x0);
        gbc.writeMem(0xb9de, { 0xf1 });
        gbc.writeMem(0xd3f8, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x484e);
        EXPECT(gbc.pc(), 0xd3fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9de), 0xf1);
        EXPECT(gbc.readMem(0xd3f8), 0xcb);
        EXPECT(gbc.readMem(0xd3f9), 0xf6);
        // CB F6 033E
        gbc.setState(0x56e4, 0x7288, 0xa730, 0x7280, 0x983d, 0xaa91, 0x1, 0x0);
        gbc.writeMem(0x56e4, { 0xcb, 0xf6 });
        gbc.writeMem(0xaa91, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x7288);
        EXPECT(gbc.pc(), 0x56e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa91), 0x61);
        // CB F6 033F
        gbc.setState(0xbd63, 0xc080, 0x2f00, 0x1933, 0xa0c1, 0xce76, 0x0, 0x1);
        gbc.writeMem(0xbd63, { 0xcb, 0xf6 });
        gbc.writeMem(0xce76, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xc080);
        EXPECT(gbc.pc(), 0xbd65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd63), 0xcb);
        EXPECT(gbc.readMem(0xbd64), 0xf6);
        EXPECT(gbc.readMem(0xce76), 0x6a);
        // CB F6 0341
        gbc.setState(0x63c6, 0x486f, 0xf210, 0xd892, 0x8a42, 0xf9fb, 0x1, 0x1);
        gbc.writeMem(0x63c6, { 0xcb, 0xf6 });
        gbc.writeMem(0xf9fb, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x486f);
        EXPECT(gbc.pc(), 0x63c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf9fb), 0xf4);
        // CB F6 0342
        gbc.setState(0xd60, 0x1783, 0x8810, 0x2428, 0x43c3, 0xb015, 0x0, 0x0);
        gbc.writeMem(0xd60, { 0xcb, 0xf6 });
        gbc.writeMem(0xb015, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x1783);
        EXPECT(gbc.pc(), 0xd62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb015), 0xf2);
        // CB F6 0343
        gbc.setState(0x995a, 0xf533, 0x1360, 0x9d26, 0x9a2c, 0xab21, 0x1, 0x0);
        gbc.writeMem(0x995a, { 0xcb, 0xf6 });
        gbc.writeMem(0xab21, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xf533);
        EXPECT(gbc.pc(), 0x995c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x995a), 0xcb);
        EXPECT(gbc.readMem(0x995b), 0xf6);
        EXPECT(gbc.readMem(0xab21), 0xf7);
        // CB F6 0344
        gbc.setState(0xeb7d, 0x5c53, 0x7a20, 0x7dbe, 0x9920, 0x1301, 0x1, 0x0);
        gbc.writeMem(0x1301, { 0x6e });
        gbc.writeMem(0xeb7d, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x5c53);
        EXPECT(gbc.pc(), 0xeb7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb7d), 0xcb);
        EXPECT(gbc.readMem(0xeb7e), 0xf6);
        // CB F6 0345
        gbc.setState(0x4527, 0x2a28, 0x16d0, 0x102d, 0xa20f, 0xf1c9, 0x0, 0x0);
        gbc.writeMem(0x4527, { 0xcb, 0xf6 });
        gbc.writeMem(0xf1c9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x2a28);
        EXPECT(gbc.pc(), 0x4529);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf1c9), 0x4f);
        // CB F6 0346
        gbc.setState(0xc9ea, 0x2a18, 0x8ee0, 0x7b89, 0xf24a, 0x2932, 0x0, 0x0);
        gbc.writeMem(0x2932, { 0xfb });
        gbc.writeMem(0xc9ea, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x2a18);
        EXPECT(gbc.pc(), 0xc9ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9ea), 0xcb);
        EXPECT(gbc.readMem(0xc9eb), 0xf6);
        // CB F6 0348
        gbc.setState(0x6d01, 0x387a, 0x33d0, 0xc324, 0xa1e8, 0xc450, 0x1, 0x1);
        gbc.writeMem(0x6d01, { 0xcb, 0xf6 });
        gbc.writeMem(0xc450, { 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x387a);
        EXPECT(gbc.pc(), 0x6d03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc450), 0x5c);
        // CB F6 0349
        gbc.setState(0xde51, 0x69d1, 0x4150, 0x6c03, 0x67ef, 0xbe18, 0x0, 0x1);
        gbc.writeMem(0xbe18, { 0xd1 });
        gbc.writeMem(0xde51, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x69d1);
        EXPECT(gbc.pc(), 0xde53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe18), 0xd1);
        EXPECT(gbc.readMem(0xde51), 0xcb);
        EXPECT(gbc.readMem(0xde52), 0xf6);
        // CB F6 034A
        gbc.setState(0x4c90, 0x940a, 0xfd70, 0x303c, 0x963e, 0xbc96, 0x1, 0x1);
        gbc.writeMem(0x4c90, { 0xcb, 0xf6 });
        gbc.writeMem(0xbc96, { 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x940a);
        EXPECT(gbc.pc(), 0x4c92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc96), 0x6e);
        // CB F6 034B
        gbc.setState(0xad2d, 0xea83, 0x1c60, 0xc67b, 0xdc15, 0xdd3, 0x1, 0x0);
        gbc.writeMem(0xdd3, { 0xcd });
        gbc.writeMem(0xad2d, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xea83);
        EXPECT(gbc.pc(), 0xad2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad2d), 0xcb);
        EXPECT(gbc.readMem(0xad2e), 0xf6);
        // CB F6 034D
        gbc.setState(0x8ee6, 0x2b62, 0xf5c0, 0x2de0, 0x646, 0x21df, 0x1, 0x1);
        gbc.writeMem(0x21df, { 0xc1 });
        gbc.writeMem(0x8ee6, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x2b62);
        EXPECT(gbc.pc(), 0x8ee8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ee6), 0xcb);
        EXPECT(gbc.readMem(0x8ee7), 0xf6);
        // CB F6 034E
        gbc.setState(0x5725, 0xba8c, 0xf8d0, 0xe36a, 0x1624, 0xca23, 0x1, 0x0);
        gbc.writeMem(0x5725, { 0xcb, 0xf6 });
        gbc.writeMem(0xca23, { 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xba8c);
        EXPECT(gbc.pc(), 0x5727);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca23), 0xe9);
        // CB F6 034F
        gbc.setState(0x46bf, 0xac28, 0x3230, 0xd2c5, 0xbbc4, 0xb679, 0x1, 0x0);
        gbc.writeMem(0x46bf, { 0xcb, 0xf6 });
        gbc.writeMem(0xb679, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xac28);
        EXPECT(gbc.pc(), 0x46c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb679), 0x6a);
        // CB F6 0350
        gbc.setState(0x3ca1, 0x3a41, 0xa580, 0x7c5e, 0x7dcb, 0x7bb1, 0x1, 0x0);
        gbc.writeMem(0x3ca1, { 0xcb, 0xf6 });
        gbc.writeMem(0x7bb1, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x3a41);
        EXPECT(gbc.pc(), 0x3ca3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0352
        gbc.setState(0x3510, 0x86aa, 0x33d0, 0xa8b0, 0x4deb, 0x27e2, 0x1, 0x1);
        gbc.writeMem(0x27e2, { 0x5e });
        gbc.writeMem(0x3510, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x86aa);
        EXPECT(gbc.pc(), 0x3512);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 0353
        gbc.setState(0x4273, 0xaec1, 0xdfe0, 0xf1c4, 0xd894, 0x51b2, 0x0, 0x1);
        gbc.writeMem(0x4273, { 0xcb, 0xf6 });
        gbc.writeMem(0x51b2, { 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xaec1);
        EXPECT(gbc.pc(), 0x4275);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0354
        gbc.setState(0xb19, 0x267e, 0x1780, 0xd9a0, 0x251f, 0xcce4, 0x1, 0x1);
        gbc.writeMem(0xb19, { 0xcb, 0xf6 });
        gbc.writeMem(0xcce4, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x267e);
        EXPECT(gbc.pc(), 0xb1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcce4), 0xc4);
        // CB F6 0355
        gbc.setState(0x9560, 0x1a89, 0x7df0, 0x5ab9, 0xc9d, 0x9e81, 0x1, 0x1);
        gbc.writeMem(0x9560, { 0xcb, 0xf6 });
        gbc.writeMem(0x9e81, { 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x1a89);
        EXPECT(gbc.pc(), 0x9562);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9560), 0xcb);
        EXPECT(gbc.readMem(0x9561), 0xf6);
        EXPECT(gbc.readMem(0x9e81), 0xd6);
        // CB F6 0357
        gbc.setState(0x8733, 0xde94, 0xc6b0, 0xd65e, 0x2331, 0x920e, 0x0, 0x0);
        gbc.writeMem(0x8733, { 0xcb, 0xf6 });
        gbc.writeMem(0x920e, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xde94);
        EXPECT(gbc.pc(), 0x8735);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8733), 0xcb);
        EXPECT(gbc.readMem(0x8734), 0xf6);
        EXPECT(gbc.readMem(0x920e), 0x46);
        // CB F6 0359
        gbc.setState(0x6348, 0x5d84, 0x44d0, 0xd854, 0x72d4, 0xc900, 0x0, 0x1);
        gbc.writeMem(0x6348, { 0xcb, 0xf6 });
        gbc.writeMem(0xc900, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x5d84);
        EXPECT(gbc.pc(), 0x634a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc900), 0xd5);
        // CB F6 035A
        gbc.setState(0xef60, 0x6a2a, 0xa6a0, 0xa2e, 0x9c6a, 0xbc, 0x0, 0x0);
        gbc.writeMem(0xbc, { 0xf3 });
        gbc.writeMem(0xef60, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x6a2a);
        EXPECT(gbc.pc(), 0xef62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef60), 0xcb);
        EXPECT(gbc.readMem(0xef61), 0xf6);
        // CB F6 035B
        gbc.setState(0x6569, 0xf694, 0x7470, 0x6f10, 0x6c9f, 0xa9af, 0x0, 0x0);
        gbc.writeMem(0x6569, { 0xcb, 0xf6 });
        gbc.writeMem(0xa9af, { 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xf694);
        EXPECT(gbc.pc(), 0x656b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9af), 0x5d);
        // CB F6 035D
        gbc.setState(0x4f35, 0xb2bf, 0xe700, 0x5def, 0xafab, 0x1227, 0x0, 0x1);
        gbc.writeMem(0x1227, { 0xf7 });
        gbc.writeMem(0x4f35, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xb2bf);
        EXPECT(gbc.pc(), 0x4f37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0362
        gbc.setState(0xbb9c, 0x4c62, 0xe340, 0xec33, 0x3850, 0x4f0d, 0x1, 0x0);
        gbc.writeMem(0x4f0d, { 0xcd });
        gbc.writeMem(0xbb9c, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x4c62);
        EXPECT(gbc.pc(), 0xbb9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb9c), 0xcb);
        EXPECT(gbc.readMem(0xbb9d), 0xf6);
        // CB F6 0363
        gbc.setState(0xa977, 0xded1, 0x96a0, 0xacd4, 0xc7df, 0xccd5, 0x0, 0x0);
        gbc.writeMem(0xa977, { 0xcb, 0xf6 });
        gbc.writeMem(0xccd5, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xded1);
        EXPECT(gbc.pc(), 0xa979);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa977), 0xcb);
        EXPECT(gbc.readMem(0xa978), 0xf6);
        EXPECT(gbc.readMem(0xccd5), 0xcd);
        // CB F6 0365
        gbc.setState(0x456d, 0x6676, 0x2e30, 0xbb71, 0x7189, 0xdd68, 0x0, 0x0);
        gbc.writeMem(0x456d, { 0xcb, 0xf6 });
        gbc.writeMem(0xdd68, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x6676);
        EXPECT(gbc.pc(), 0x456f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd68), 0x74);
        // CB F6 0366
        gbc.setState(0xc429, 0xca7d, 0xaee0, 0x7e85, 0x9022, 0x3be3, 0x1, 0x1);
        gbc.writeMem(0x3be3, { 0xc6 });
        gbc.writeMem(0xc429, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xca7d);
        EXPECT(gbc.pc(), 0xc42b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc429), 0xcb);
        EXPECT(gbc.readMem(0xc42a), 0xf6);
        // CB F6 0367
        gbc.setState(0x866e, 0xe2f3, 0xe180, 0xfb46, 0xde3e, 0x9b2e, 0x0, 0x1);
        gbc.writeMem(0x866e, { 0xcb, 0xf6 });
        gbc.writeMem(0x9b2e, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xe2f3);
        EXPECT(gbc.pc(), 0x8670);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x866e), 0xcb);
        EXPECT(gbc.readMem(0x866f), 0xf6);
        EXPECT(gbc.readMem(0x9b2e), 0xf4);
        // CB F6 0368
        gbc.setState(0xce57, 0xfa85, 0xb0, 0x2cc1, 0xc7ea, 0xba9f, 0x1, 0x1);
        gbc.writeMem(0xba9f, { 0xc5 });
        gbc.writeMem(0xce57, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xfa85);
        EXPECT(gbc.pc(), 0xce59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba9f), 0xc5);
        EXPECT(gbc.readMem(0xce57), 0xcb);
        EXPECT(gbc.readMem(0xce58), 0xf6);
        // CB F6 0369
        gbc.setState(0x43d8, 0xe38d, 0xc530, 0x873e, 0x511e, 0x80de, 0x0, 0x0);
        gbc.writeMem(0x43d8, { 0xcb, 0xf6 });
        gbc.writeMem(0x80de, { 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xe38d);
        EXPECT(gbc.pc(), 0x43da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80de), 0xe2);
        // CB F6 036A
        gbc.setState(0xb502, 0x106e, 0x2010, 0x586a, 0x38de, 0xa25c, 0x0, 0x1);
        gbc.writeMem(0xa25c, { 0xcf });
        gbc.writeMem(0xb502, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x106e);
        EXPECT(gbc.pc(), 0xb504);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa25c), 0xcf);
        EXPECT(gbc.readMem(0xb502), 0xcb);
        EXPECT(gbc.readMem(0xb503), 0xf6);
        // CB F6 036E
        gbc.setState(0x5d97, 0x6f4c, 0xdd10, 0xc7bb, 0xe311, 0xc37b, 0x1, 0x0);
        gbc.writeMem(0x5d97, { 0xcb, 0xf6 });
        gbc.writeMem(0xc37b, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x6f4c);
        EXPECT(gbc.pc(), 0x5d99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc37b), 0xf6);
        // CB F6 036F
        gbc.setState(0xa5d8, 0x67ad, 0xde0, 0x477a, 0x910a, 0xfd56, 0x0, 0x1);
        gbc.writeMem(0xa5d8, { 0xcb, 0xf6 });
        gbc.writeMem(0xfd56, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x67ad);
        EXPECT(gbc.pc(), 0xa5da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5d8), 0xcb);
        EXPECT(gbc.readMem(0xa5d9), 0xf6);
        EXPECT(gbc.readMem(0xfd56), 0x4d);
        // CB F6 0370
        gbc.setState(0x5f66, 0xfb51, 0xcf80, 0x54c7, 0xcd2a, 0xafe, 0x0, 0x1);
        gbc.writeMem(0xafe, { 0xf6 });
        gbc.writeMem(0x5f66, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xfb51);
        EXPECT(gbc.pc(), 0x5f68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0371
        gbc.setState(0xa0d8, 0xf8d5, 0x4840, 0x83bf, 0xf3e, 0x63a7, 0x0, 0x0);
        gbc.writeMem(0x63a7, { 0xcd });
        gbc.writeMem(0xa0d8, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xf8d5);
        EXPECT(gbc.pc(), 0xa0da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0d8), 0xcb);
        EXPECT(gbc.readMem(0xa0d9), 0xf6);
        // CB F6 0373
        gbc.setState(0x1ddf, 0x4c70, 0xa4c0, 0xd4b, 0x4531, 0xf5c5, 0x1, 0x0);
        gbc.writeMem(0x1ddf, { 0xcb, 0xf6 });
        gbc.writeMem(0xf5c5, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x4c70);
        EXPECT(gbc.pc(), 0x1de1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf5c5), 0x49);
        // CB F6 0376
        gbc.setState(0x6c96, 0xf900, 0xf060, 0x9c09, 0xafc8, 0x202e, 0x0, 0x0);
        gbc.writeMem(0x202e, { 0x71 });
        gbc.writeMem(0x6c96, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xf900);
        EXPECT(gbc.pc(), 0x6c98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 0377
        gbc.setState(0x9c93, 0x6d22, 0x29f0, 0x9964, 0x74c9, 0xa55b, 0x1, 0x0);
        gbc.writeMem(0x9c93, { 0xcb, 0xf6 });
        gbc.writeMem(0xa55b, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x6d22);
        EXPECT(gbc.pc(), 0x9c95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c93), 0xcb);
        EXPECT(gbc.readMem(0x9c94), 0xf6);
        EXPECT(gbc.readMem(0xa55b), 0x58);
        // CB F6 037A
        gbc.setState(0x7e1, 0xc2b, 0xa3a0, 0xdfc2, 0x4fb8, 0xd6dd, 0x1, 0x1);
        gbc.writeMem(0x7e1, { 0xcb, 0xf6 });
        gbc.writeMem(0xd6dd, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xc2b);
        EXPECT(gbc.pc(), 0x7e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6dd), 0xdb);
        // CB F6 037C
        gbc.setState(0xb343, 0x5351, 0xe580, 0x24dd, 0x3b7b, 0xe845, 0x0, 0x0);
        gbc.writeMem(0xb343, { 0xcb, 0xf6 });
        gbc.writeMem(0xe845, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x5351);
        EXPECT(gbc.pc(), 0xb345);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb343), 0xcb);
        EXPECT(gbc.readMem(0xb344), 0xf6);
        EXPECT(gbc.readMem(0xe845), 0xeb);
        // CB F6 037D
        gbc.setState(0x7939, 0x2997, 0xd7c0, 0x7bd0, 0x7e06, 0xde5a, 0x1, 0x0);
        gbc.writeMem(0x7939, { 0xcb, 0xf6 });
        gbc.writeMem(0xde5a, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x2997);
        EXPECT(gbc.pc(), 0x793b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde5a), 0xc1);
        // CB F6 037E
        gbc.setState(0x862f, 0x755c, 0x4300, 0x757d, 0xb3d1, 0x284b, 0x1, 0x1);
        gbc.writeMem(0x284b, { 0x75 });
        gbc.writeMem(0x862f, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x755c);
        EXPECT(gbc.pc(), 0x8631);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x862f), 0xcb);
        EXPECT(gbc.readMem(0x8630), 0xf6);
        // CB F6 0380
        gbc.setState(0xa694, 0x149b, 0x1040, 0x7475, 0xc429, 0xc395, 0x1, 0x1);
        gbc.writeMem(0xa694, { 0xcb, 0xf6 });
        gbc.writeMem(0xc395, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x149b);
        EXPECT(gbc.pc(), 0xa696);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa694), 0xcb);
        EXPECT(gbc.readMem(0xa695), 0xf6);
        EXPECT(gbc.readMem(0xc395), 0xea);
        // CB F6 0381
        gbc.setState(0x5fb1, 0x986f, 0xe1a0, 0x43a7, 0xfd77, 0xbe94, 0x0, 0x0);
        gbc.writeMem(0x5fb1, { 0xcb, 0xf6 });
        gbc.writeMem(0xbe94, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x986f);
        EXPECT(gbc.pc(), 0x5fb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe94), 0xc7);
        // CB F6 0382
        gbc.setState(0x6dbe, 0xbb1e, 0x8950, 0xf67e, 0x7bf9, 0x7986, 0x1, 0x0);
        gbc.writeMem(0x6dbe, { 0xcb, 0xf6 });
        gbc.writeMem(0x7986, { 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xbb1e);
        EXPECT(gbc.pc(), 0x6dc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 0384
        gbc.setState(0x45ee, 0x2a9a, 0x4b20, 0xfda9, 0x8c78, 0xe4a5, 0x0, 0x1);
        gbc.writeMem(0x45ee, { 0xcb, 0xf6 });
        gbc.writeMem(0xe4a5, { 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x2a9a);
        EXPECT(gbc.pc(), 0x45f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4a5), 0x5a);
        // CB F6 0387
        gbc.setState(0xbb0d, 0xeba2, 0x12a0, 0x8d46, 0xb421, 0xbffc, 0x0, 0x1);
        gbc.writeMem(0xbb0d, { 0xcb, 0xf6 });
        gbc.writeMem(0xbffc, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xeba2);
        EXPECT(gbc.pc(), 0xbb0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb0d), 0xcb);
        EXPECT(gbc.readMem(0xbb0e), 0xf6);
        EXPECT(gbc.readMem(0xbffc), 0x45);
        // CB F6 0388
        gbc.setState(0xcbde, 0x54cc, 0xb750, 0x2381, 0xc4a2, 0xd78f, 0x1, 0x0);
        gbc.writeMem(0xcbde, { 0xcb, 0xf6 });
        gbc.writeMem(0xd78f, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x54cc);
        EXPECT(gbc.pc(), 0xcbe0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbde), 0xcb);
        EXPECT(gbc.readMem(0xcbdf), 0xf6);
        EXPECT(gbc.readMem(0xd78f), 0x61);
        // CB F6 038A
        gbc.setState(0x591c, 0x7f6c, 0x3600, 0x6f7, 0x6bb9, 0x65b1, 0x0, 0x0);
        gbc.writeMem(0x591c, { 0xcb, 0xf6 });
        gbc.writeMem(0x65b1, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x7f6c);
        EXPECT(gbc.pc(), 0x591e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 038B
        gbc.setState(0xaee2, 0x6bd3, 0xe0, 0x80fb, 0xcecb, 0x9716, 0x0, 0x1);
        gbc.writeMem(0x9716, { 0xdd });
        gbc.writeMem(0xaee2, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x6bd3);
        EXPECT(gbc.pc(), 0xaee4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9716), 0xdd);
        EXPECT(gbc.readMem(0xaee2), 0xcb);
        EXPECT(gbc.readMem(0xaee3), 0xf6);
        // CB F6 038C
        gbc.setState(0x8192, 0x5575, 0xd4b0, 0x5f29, 0xeda8, 0xb77c, 0x0, 0x1);
        gbc.writeMem(0x8192, { 0xcb, 0xf6 });
        gbc.writeMem(0xb77c, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x5575);
        EXPECT(gbc.pc(), 0x8194);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8192), 0xcb);
        EXPECT(gbc.readMem(0x8193), 0xf6);
        EXPECT(gbc.readMem(0xb77c), 0x57);
        // CB F6 038D
        gbc.setState(0x971d, 0x2404, 0x9110, 0x6b5d, 0xfe31, 0x87fa, 0x0, 0x0);
        gbc.writeMem(0x87fa, { 0x4d });
        gbc.writeMem(0x971d, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x2404);
        EXPECT(gbc.pc(), 0x971f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87fa), 0x4d);
        EXPECT(gbc.readMem(0x971d), 0xcb);
        EXPECT(gbc.readMem(0x971e), 0xf6);
        // CB F6 038E
        gbc.setState(0x73ed, 0xf4e0, 0x3930, 0x5015, 0x9cae, 0x39f9, 0x1, 0x0);
        gbc.writeMem(0x39f9, { 0x7d });
        gbc.writeMem(0x73ed, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xf4e0);
        EXPECT(gbc.pc(), 0x73ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 0390
        gbc.setState(0x3a6c, 0xdad6, 0xe340, 0x89c0, 0x2740, 0xe6c3, 0x0, 0x1);
        gbc.writeMem(0x3a6c, { 0xcb, 0xf6 });
        gbc.writeMem(0xe6c3, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xdad6);
        EXPECT(gbc.pc(), 0x3a6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6c3), 0x73);
        // CB F6 0394
        gbc.setState(0x2172, 0x8aac, 0x63d0, 0xe2ca, 0xe89, 0xa41, 0x0, 0x1);
        gbc.writeMem(0xa41, { 0xf0 });
        gbc.writeMem(0x2172, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x8aac);
        EXPECT(gbc.pc(), 0x2174);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 0395
        gbc.setState(0x2889, 0xd2be, 0x5050, 0x670c, 0xdca6, 0xda9c, 0x1, 0x1);
        gbc.writeMem(0x2889, { 0xcb, 0xf6 });
        gbc.writeMem(0xda9c, { 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd2be);
        EXPECT(gbc.pc(), 0x288b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda9c), 0x4b);
        // CB F6 0398
        gbc.setState(0x90be, 0x7d34, 0xf730, 0x61dd, 0xb232, 0xcbf8, 0x0, 0x1);
        gbc.writeMem(0x90be, { 0xcb, 0xf6 });
        gbc.writeMem(0xcbf8, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x7d34);
        EXPECT(gbc.pc(), 0x90c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90be), 0xcb);
        EXPECT(gbc.readMem(0x90bf), 0xf6);
        EXPECT(gbc.readMem(0xcbf8), 0x42);
        // CB F6 0399
        gbc.setState(0x55d2, 0x1867, 0xdc60, 0x489c, 0xcb39, 0xde1b, 0x0, 0x0);
        gbc.writeMem(0x55d2, { 0xcb, 0xf6 });
        gbc.writeMem(0xde1b, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x1867);
        EXPECT(gbc.pc(), 0x55d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde1b), 0xf4);
        // CB F6 039A
        gbc.setState(0xb48e, 0xcd1b, 0x510, 0xb6d5, 0xc742, 0x9ee3, 0x1, 0x0);
        gbc.writeMem(0x9ee3, { 0x5c });
        gbc.writeMem(0xb48e, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xcd1b);
        EXPECT(gbc.pc(), 0xb490);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ee3), 0x5c);
        EXPECT(gbc.readMem(0xb48e), 0xcb);
        EXPECT(gbc.readMem(0xb48f), 0xf6);
        // CB F6 039C
        gbc.setState(0xbea1, 0x5bce, 0xca70, 0xd37d, 0x8d04, 0xa78c, 0x1, 0x1);
        gbc.writeMem(0xa78c, { 0xb });
        gbc.writeMem(0xbea1, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5bce);
        EXPECT(gbc.pc(), 0xbea3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa78c), 0x4b);
        EXPECT(gbc.readMem(0xbea1), 0xcb);
        EXPECT(gbc.readMem(0xbea2), 0xf6);
        // CB F6 039D
        gbc.setState(0x4b03, 0x2b10, 0xa580, 0x89ad, 0xf2b9, 0xcdc7, 0x0, 0x0);
        gbc.writeMem(0x4b03, { 0xcb, 0xf6 });
        gbc.writeMem(0xcdc7, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x2b10);
        EXPECT(gbc.pc(), 0x4b05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdc7), 0x57);
        // CB F6 039E
        gbc.setState(0x8b13, 0x538a, 0x5f00, 0xb8cd, 0x5d7e, 0x5cba, 0x1, 0x0);
        gbc.writeMem(0x5cba, { 0xd3 });
        gbc.writeMem(0x8b13, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x538a);
        EXPECT(gbc.pc(), 0x8b15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b13), 0xcb);
        EXPECT(gbc.readMem(0x8b14), 0xf6);
        // CB F6 039F
        gbc.setState(0x163f, 0x7fcc, 0x43b0, 0xa34e, 0xa36, 0x3e1c, 0x0, 0x1);
        gbc.writeMem(0x163f, { 0xcb, 0xf6 });
        gbc.writeMem(0x3e1c, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x7fcc);
        EXPECT(gbc.pc(), 0x1641);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 03A0
        gbc.setState(0xa6b8, 0xd411, 0xf890, 0xd972, 0x6032, 0xb814, 0x1, 0x0);
        gbc.writeMem(0xa6b8, { 0xcb, 0xf6 });
        gbc.writeMem(0xb814, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd411);
        EXPECT(gbc.pc(), 0xa6ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6b8), 0xcb);
        EXPECT(gbc.readMem(0xa6b9), 0xf6);
        EXPECT(gbc.readMem(0xb814), 0xcb);
        // CB F6 03A1
        gbc.setState(0xe5f7, 0x42a3, 0xfc20, 0x4f74, 0x7d99, 0x85af, 0x1, 0x1);
        gbc.writeMem(0x85af, { 0xd });
        gbc.writeMem(0xe5f7, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x42a3);
        EXPECT(gbc.pc(), 0xe5f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85af), 0x4d);
        EXPECT(gbc.readMem(0xe5f7), 0xcb);
        EXPECT(gbc.readMem(0xe5f8), 0xf6);
        // CB F6 03A2
        gbc.setState(0x5dca, 0x5637, 0x15f0, 0xbd11, 0x839b, 0x7fec, 0x1, 0x0);
        gbc.writeMem(0x5dca, { 0xcb, 0xf6 });
        gbc.writeMem(0x7fec, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x5637);
        EXPECT(gbc.pc(), 0x5dcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 03A3
        gbc.setState(0xc76c, 0x5434, 0x8ed0, 0x1014, 0xa20f, 0xa1d8, 0x0, 0x0);
        gbc.writeMem(0xa1d8, { 0x8c });
        gbc.writeMem(0xc76c, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5434);
        EXPECT(gbc.pc(), 0xc76e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1d8), 0xcc);
        EXPECT(gbc.readMem(0xc76c), 0xcb);
        EXPECT(gbc.readMem(0xc76d), 0xf6);
        // CB F6 03A7
        gbc.setState(0x31ed, 0xbc8e, 0xa40, 0x6df9, 0xdf35, 0x8632, 0x0, 0x1);
        gbc.writeMem(0x31ed, { 0xcb, 0xf6 });
        gbc.writeMem(0x8632, { 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xbc8e);
        EXPECT(gbc.pc(), 0x31ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8632), 0x74);
        // CB F6 03A8
        gbc.setState(0xed64, 0x9559, 0xb6c0, 0x1cad, 0xaea9, 0xf0cb, 0x0, 0x1);
        gbc.writeMem(0xed64, { 0xcb, 0xf6 });
        gbc.writeMem(0xf0cb, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x9559);
        EXPECT(gbc.pc(), 0xed66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed64), 0xcb);
        EXPECT(gbc.readMem(0xed65), 0xf6);
        EXPECT(gbc.readMem(0xf0cb), 0xdc);
        // CB F6 03A9
        gbc.setState(0x25ed, 0x13dd, 0x9880, 0x802c, 0x2ec6, 0x1e29, 0x1, 0x1);
        gbc.writeMem(0x1e29, { 0x6b });
        gbc.writeMem(0x25ed, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x13dd);
        EXPECT(gbc.pc(), 0x25ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 03AA
        gbc.setState(0x4e0, 0xe37c, 0x13d0, 0xdeb2, 0xfb8b, 0xb51e, 0x1, 0x0);
        gbc.writeMem(0x4e0, { 0xcb, 0xf6 });
        gbc.writeMem(0xb51e, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xe37c);
        EXPECT(gbc.pc(), 0x4e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb51e), 0xfa);
        // CB F6 03AB
        gbc.setState(0x9fd5, 0x710e, 0xb210, 0x2b83, 0x869, 0xa072, 0x1, 0x1);
        gbc.writeMem(0x9fd5, { 0xcb, 0xf6 });
        gbc.writeMem(0xa072, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x710e);
        EXPECT(gbc.pc(), 0x9fd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fd5), 0xcb);
        EXPECT(gbc.readMem(0x9fd6), 0xf6);
        EXPECT(gbc.readMem(0xa072), 0xc7);
        // CB F6 03AD
        gbc.setState(0x6aba, 0xc54f, 0xa4b0, 0xbcba, 0x73ad, 0xb265, 0x1, 0x1);
        gbc.writeMem(0x6aba, { 0xcb, 0xf6 });
        gbc.writeMem(0xb265, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc54f);
        EXPECT(gbc.pc(), 0x6abc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb265), 0x76);
        // CB F6 03AF
        gbc.setState(0x9e4c, 0xfd41, 0x8a10, 0x42b9, 0x1308, 0xbb1a, 0x1, 0x1);
        gbc.writeMem(0x9e4c, { 0xcb, 0xf6 });
        gbc.writeMem(0xbb1a, { 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xfd41);
        EXPECT(gbc.pc(), 0x9e4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e4c), 0xcb);
        EXPECT(gbc.readMem(0x9e4d), 0xf6);
        EXPECT(gbc.readMem(0xbb1a), 0xd0);
        // CB F6 03B0
        gbc.setState(0x7d30, 0x73c6, 0x32b0, 0x8e39, 0x2c61, 0xb67f, 0x1, 0x1);
        gbc.writeMem(0x7d30, { 0xcb, 0xf6 });
        gbc.writeMem(0xb67f, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x73c6);
        EXPECT(gbc.pc(), 0x7d32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb67f), 0x5e);
        // CB F6 03B2
        gbc.setState(0xed3c, 0xa2cb, 0xfcd0, 0x7e27, 0x6f40, 0x4456, 0x1, 0x0);
        gbc.writeMem(0x4456, { 0xf9 });
        gbc.writeMem(0xed3c, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xa2cb);
        EXPECT(gbc.pc(), 0xed3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed3c), 0xcb);
        EXPECT(gbc.readMem(0xed3d), 0xf6);
        // CB F6 03B5
        gbc.setState(0x5b06, 0xf379, 0x28a0, 0xe1d0, 0x2917, 0x7752, 0x1, 0x1);
        gbc.writeMem(0x5b06, { 0xcb, 0xf6 });
        gbc.writeMem(0x7752, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xf379);
        EXPECT(gbc.pc(), 0x5b08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB F6 03B6
        gbc.setState(0xa6d4, 0xa1d5, 0xf020, 0x74ac, 0x1ebe, 0xe64c, 0x0, 0x1);
        gbc.writeMem(0xa6d4, { 0xcb, 0xf6 });
        gbc.writeMem(0xe64c, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xa1d5);
        EXPECT(gbc.pc(), 0xa6d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6d4), 0xcb);
        EXPECT(gbc.readMem(0xa6d5), 0xf6);
        EXPECT(gbc.readMem(0xe64c), 0x58);
        // CB F6 03B7
        gbc.setState(0x3585, 0xd5e, 0xa180, 0xf126, 0xe5ee, 0x3d2c, 0x1, 0x1);
        gbc.writeMem(0x3585, { 0xcb, 0xf6 });
        gbc.writeMem(0x3d2c, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xd5e);
        EXPECT(gbc.pc(), 0x3587);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 03BA
        gbc.setState(0x906d, 0xa808, 0xc060, 0xdb4f, 0x401c, 0xcb15, 0x0, 0x1);
        gbc.writeMem(0x906d, { 0xcb, 0xf6 });
        gbc.writeMem(0xcb15, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xa808);
        EXPECT(gbc.pc(), 0x906f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x906d), 0xcb);
        EXPECT(gbc.readMem(0x906e), 0xf6);
        EXPECT(gbc.readMem(0xcb15), 0x53);
        // CB F6 03BB
        gbc.setState(0xe034, 0xbda8, 0x6c40, 0x662, 0x8b7f, 0xf233, 0x0, 0x1);
        gbc.writeMem(0xe034, { 0xcb, 0xf6 });
        gbc.writeMem(0xf233, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xbda8);
        EXPECT(gbc.pc(), 0xe036);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe034), 0xcb);
        EXPECT(gbc.readMem(0xe035), 0xf6);
        EXPECT(gbc.readMem(0xf233), 0xf2);
        // CB F6 03BC
        gbc.setState(0x15c2, 0xa9d8, 0x9ed0, 0x168d, 0x6313, 0xff5, 0x1, 0x1);
        gbc.writeMem(0xff5, { 0xf5 });
        gbc.writeMem(0x15c2, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xa9d8);
        EXPECT(gbc.pc(), 0x15c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 03BE
        gbc.setState(0x9706, 0x10e9, 0x7d60, 0x619f, 0x5b2, 0x334e, 0x1, 0x0);
        gbc.writeMem(0x334e, { 0x51 });
        gbc.writeMem(0x9706, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x10e9);
        EXPECT(gbc.pc(), 0x9708);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9706), 0xcb);
        EXPECT(gbc.readMem(0x9707), 0xf6);
        // CB F6 03C0
        gbc.setState(0xd599, 0xef40, 0x42d0, 0x13b0, 0xb48f, 0xba86, 0x0, 0x0);
        gbc.writeMem(0xba86, { 0xf1 });
        gbc.writeMem(0xd599, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xef40);
        EXPECT(gbc.pc(), 0xd59b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba86), 0xf1);
        EXPECT(gbc.readMem(0xd599), 0xcb);
        EXPECT(gbc.readMem(0xd59a), 0xf6);
        // CB F6 03C1
        gbc.setState(0x2b40, 0x65e, 0x8750, 0x99fa, 0x30c8, 0x1687, 0x0, 0x0);
        gbc.writeMem(0x1687, { 0x65 });
        gbc.writeMem(0x2b40, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x65e);
        EXPECT(gbc.pc(), 0x2b42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 03C3
        gbc.setState(0x7b0c, 0xfcc2, 0x89f0, 0xffa7, 0xf6bf, 0x1a5e, 0x1, 0x0);
        gbc.writeMem(0x1a5e, { 0xc2 });
        gbc.writeMem(0x7b0c, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xfcc2);
        EXPECT(gbc.pc(), 0x7b0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 03C5
        gbc.setState(0x182e, 0x4ccd, 0x6e70, 0x79df, 0xfe89, 0x747b, 0x1, 0x0);
        gbc.writeMem(0x182e, { 0xcb, 0xf6 });
        gbc.writeMem(0x747b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x4ccd);
        EXPECT(gbc.pc(), 0x1830);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB F6 03C6
        gbc.setState(0x33fe, 0x3eaa, 0xa440, 0xdc8b, 0x9ced, 0xd39, 0x0, 0x1);
        gbc.writeMem(0xd39, { 0x5e });
        gbc.writeMem(0x33fe, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x3eaa);
        EXPECT(gbc.pc(), 0x3400);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 03C7
        gbc.setState(0xe806, 0xd06, 0x5dc0, 0x17c3, 0x3047, 0xdb0b, 0x1, 0x1);
        gbc.writeMem(0xdb0b, { 0xa7 });
        gbc.writeMem(0xe806, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xd06);
        EXPECT(gbc.pc(), 0xe808);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb0b), 0xe7);
        EXPECT(gbc.readMem(0xe806), 0xcb);
        EXPECT(gbc.readMem(0xe807), 0xf6);
        // CB F6 03C9
        gbc.setState(0x1457, 0x6e0e, 0x7af0, 0xcf3e, 0x39fd, 0xd52d, 0x1, 0x1);
        gbc.writeMem(0x1457, { 0xcb, 0xf6 });
        gbc.writeMem(0xd52d, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x6e0e);
        EXPECT(gbc.pc(), 0x1459);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd52d), 0xe6);
        // CB F6 03CA
        gbc.setState(0x4ed0, 0x692e, 0x75d0, 0x3d05, 0x4ebc, 0x5b41, 0x0, 0x0);
        gbc.writeMem(0x4ed0, { 0xcb, 0xf6 });
        gbc.writeMem(0x5b41, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x692e);
        EXPECT(gbc.pc(), 0x4ed2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB F6 03CC
        gbc.setState(0x8e2e, 0x2fc6, 0xbf50, 0xc600, 0xecfb, 0x5ef7, 0x1, 0x1);
        gbc.writeMem(0x5ef7, { 0xdb });
        gbc.writeMem(0x8e2e, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x2fc6);
        EXPECT(gbc.pc(), 0x8e30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e2e), 0xcb);
        EXPECT(gbc.readMem(0x8e2f), 0xf6);
        // CB F6 03CD
        gbc.setState(0x8f0, 0x16ae, 0xe6e0, 0xa059, 0x7b59, 0xd37c, 0x0, 0x1);
        gbc.writeMem(0x8f0, { 0xcb, 0xf6 });
        gbc.writeMem(0xd37c, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x16ae);
        EXPECT(gbc.pc(), 0x8f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd37c), 0x62);
        // CB F6 03CE
        gbc.setState(0x1425, 0x8ea3, 0x5050, 0x4e28, 0xd111, 0xff1a, 0x1, 0x1);
        gbc.writeMem(0x1425, { 0xcb, 0xf6 });
        gbc.writeMem(0xff1a, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x8ea3);
        EXPECT(gbc.pc(), 0x1427);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff1a), 0x76);
        // CB F6 03D0
        gbc.setState(0xe33e, 0x433a, 0xdb90, 0x5484, 0xa75e, 0x52a6, 0x1, 0x0);
        gbc.writeMem(0x52a6, { 0x60 });
        gbc.writeMem(0xe33e, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x433a);
        EXPECT(gbc.pc(), 0xe340);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe33e), 0xcb);
        EXPECT(gbc.readMem(0xe33f), 0xf6);
        // CB F6 03D1
        gbc.setState(0x8ba9, 0xd344, 0x4600, 0xdddb, 0x2e5, 0xa97f, 0x1, 0x0);
        gbc.writeMem(0x8ba9, { 0xcb, 0xf6 });
        gbc.writeMem(0xa97f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xd344);
        EXPECT(gbc.pc(), 0x8bab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ba9), 0xcb);
        EXPECT(gbc.readMem(0x8baa), 0xf6);
        EXPECT(gbc.readMem(0xa97f), 0x4d);
        // CB F6 03D2
        gbc.setState(0xbea9, 0x7a12, 0x98e0, 0xa7c5, 0xd511, 0xd939, 0x1, 0x0);
        gbc.writeMem(0xbea9, { 0xcb, 0xf6 });
        gbc.writeMem(0xd939, { 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x7a12);
        EXPECT(gbc.pc(), 0xbeab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbea9), 0xcb);
        EXPECT(gbc.readMem(0xbeaa), 0xf6);
        EXPECT(gbc.readMem(0xd939), 0x5c);
        // CB F6 03D3
        gbc.setState(0x719a, 0xa81b, 0x2be0, 0x668c, 0x27a7, 0xf855, 0x0, 0x0);
        gbc.writeMem(0x719a, { 0xcb, 0xf6 });
        gbc.writeMem(0xf855, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xa81b);
        EXPECT(gbc.pc(), 0x719c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf855), 0xc2);
        // CB F6 03D6
        gbc.setState(0xaa13, 0x1f9e, 0xd6d0, 0x54c7, 0x6bb, 0xb17d, 0x1, 0x0);
        gbc.writeMem(0xaa13, { 0xcb, 0xf6 });
        gbc.writeMem(0xb17d, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x1f9e);
        EXPECT(gbc.pc(), 0xaa15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa13), 0xcb);
        EXPECT(gbc.readMem(0xaa14), 0xf6);
        EXPECT(gbc.readMem(0xb17d), 0x7a);
        // CB F6 03D7
        gbc.setState(0xada, 0xe29e, 0x5580, 0xddfa, 0xdaa1, 0x8ae1, 0x0, 0x1);
        gbc.writeMem(0xada, { 0xcb, 0xf6 });
        gbc.writeMem(0x8ae1, { 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xe29e);
        EXPECT(gbc.pc(), 0xadc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ae1), 0xc1);
        // CB F6 03D9
        gbc.setState(0x69f9, 0xd495, 0xf690, 0x328f, 0xe948, 0xb733, 0x0, 0x0);
        gbc.writeMem(0x69f9, { 0xcb, 0xf6 });
        gbc.writeMem(0xb733, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xd495);
        EXPECT(gbc.pc(), 0x69fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb733), 0xff);
        // CB F6 03DA
        gbc.setState(0xe3f2, 0x7faf, 0x4da0, 0x38e, 0xc16d, 0xc38c, 0x1, 0x1);
        gbc.writeMem(0xc38c, { 0x4a });
        gbc.writeMem(0xe3f2, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x7faf);
        EXPECT(gbc.pc(), 0xe3f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc38c), 0x4a);
        EXPECT(gbc.readMem(0xe3f2), 0xcb);
        EXPECT(gbc.readMem(0xe3f3), 0xf6);
        // CB F6 03DB
        gbc.setState(0xe522, 0x8fc8, 0x54a0, 0xdd48, 0xcf5d, 0xc2f8, 0x1, 0x1);
        gbc.writeMem(0xc2f8, { 0x5a });
        gbc.writeMem(0xe522, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x8fc8);
        EXPECT(gbc.pc(), 0xe524);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2f8), 0x5a);
        EXPECT(gbc.readMem(0xe522), 0xcb);
        EXPECT(gbc.readMem(0xe523), 0xf6);
        // CB F6 03DC
        gbc.setState(0x9280, 0x98fc, 0x71b0, 0xc549, 0xf32b, 0xa885, 0x1, 0x0);
        gbc.writeMem(0x9280, { 0xcb, 0xf6 });
        gbc.writeMem(0xa885, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x98fc);
        EXPECT(gbc.pc(), 0x9282);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9280), 0xcb);
        EXPECT(gbc.readMem(0x9281), 0xf6);
        EXPECT(gbc.readMem(0xa885), 0xe8);
        // CB F6 03DD
        gbc.setState(0x34fe, 0x9b3a, 0x39c0, 0x96b7, 0xbc8d, 0x3d22, 0x1, 0x1);
        gbc.writeMem(0x34fe, { 0xcb, 0xf6 });
        gbc.writeMem(0x3d22, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x9b3a);
        EXPECT(gbc.pc(), 0x3500);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB F6 03DF
        gbc.setState(0x90e3, 0xf8b0, 0x3650, 0x1029, 0xe20e, 0xdcf2, 0x1, 0x1);
        gbc.writeMem(0x90e3, { 0xcb, 0xf6 });
        gbc.writeMem(0xdcf2, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xf8b0);
        EXPECT(gbc.pc(), 0x90e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90e3), 0xcb);
        EXPECT(gbc.readMem(0x90e4), 0xf6);
        EXPECT(gbc.readMem(0xdcf2), 0x73);
        // CB F6 03E1
        gbc.setState(0xe1ab, 0x2efd, 0x2120, 0xb7ac, 0x417, 0xc1a0, 0x0, 0x1);
        gbc.writeMem(0xc1a0, { 0xb });
        gbc.writeMem(0xe1ab, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x2efd);
        EXPECT(gbc.pc(), 0xe1ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1a0), 0x4b);
        EXPECT(gbc.readMem(0xe1ab), 0xcb);
        EXPECT(gbc.readMem(0xe1ac), 0xf6);
        // CB F6 03E4
        gbc.setState(0x9957, 0x10cc, 0x6a40, 0x76c5, 0xdaa3, 0x1b29, 0x1, 0x1);
        gbc.writeMem(0x1b29, { 0xea });
        gbc.writeMem(0x9957, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x10cc);
        EXPECT(gbc.pc(), 0x9959);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9957), 0xcb);
        EXPECT(gbc.readMem(0x9958), 0xf6);
        // CB F6 03E5
        gbc.setState(0x54fb, 0x9d27, 0x1e00, 0xc58c, 0x72de, 0xdef8, 0x0, 0x1);
        gbc.writeMem(0x54fb, { 0xcb, 0xf6 });
        gbc.writeMem(0xdef8, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x9d27);
        EXPECT(gbc.pc(), 0x54fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdef8), 0x76);
        // CB F6 03E7
        gbc.setState(0x600e, 0x14c6, 0xb820, 0x6104, 0x33c4, 0x712, 0x1, 0x1);
        gbc.writeMem(0x712, { 0x4e });
        gbc.writeMem(0x600e, { 0xcb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x14c6);
        EXPECT(gbc.pc(), 0x6010);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
    }
