#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_6a)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_6a) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 6A 0000
        gbc.setState(0x4959, 0xe972, 0x8da0, 0xbc26, 0x4c27, 0xa937, 0x0, 0x0);
        gbc.writeMem(0x4959, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xe972);
        EXPECT(gbc.pc(), 0x495b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0001
        gbc.setState(0x8ed5, 0x2da7, 0x4980, 0x300c, 0x564a, 0x40fc, 0x0, 0x0);
        gbc.writeMem(0x8ed5, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x2da7);
        EXPECT(gbc.pc(), 0x8ed7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ed5), 0xcb);
        EXPECT(gbc.readMem(0x8ed6), 0x6a);
        // CB 6A 0002
        gbc.setState(0xb6cb, 0x55f1, 0x98e0, 0xf097, 0xe731, 0x1e4f, 0x1, 0x1);
        gbc.writeMem(0xb6cb, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x55f1);
        EXPECT(gbc.pc(), 0xb6cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6cb), 0xcb);
        EXPECT(gbc.readMem(0xb6cc), 0x6a);
        // CB 6A 0003
        gbc.setState(0x58fd, 0x27c1, 0x3e30, 0xa9ca, 0x9126, 0x2802, 0x1, 0x0);
        gbc.writeMem(0x58fd, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x27c1);
        EXPECT(gbc.pc(), 0x58ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0004
        gbc.setState(0xa811, 0xa1b, 0x51e0, 0x9d9f, 0x65bb, 0x1071, 0x1, 0x1);
        gbc.writeMem(0xa811, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xa1b);
        EXPECT(gbc.pc(), 0xa813);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa811), 0xcb);
        EXPECT(gbc.readMem(0xa812), 0x6a);
        // CB 6A 0005
        gbc.setState(0x1225, 0x3366, 0x7f80, 0x85eb, 0x8892, 0xf8d2, 0x1, 0x1);
        gbc.writeMem(0x1225, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x3366);
        EXPECT(gbc.pc(), 0x1227);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0006
        gbc.setState(0x7b93, 0xd015, 0x3620, 0x49a8, 0xe819, 0x5083, 0x1, 0x1);
        gbc.writeMem(0x7b93, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xd015);
        EXPECT(gbc.pc(), 0x7b95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0007
        gbc.setState(0xb14f, 0x1fde, 0x1970, 0xc11, 0x2f6c, 0x56e1, 0x0, 0x1);
        gbc.writeMem(0xb14f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x1fde);
        EXPECT(gbc.pc(), 0xb151);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb14f), 0xcb);
        EXPECT(gbc.readMem(0xb150), 0x6a);
        // CB 6A 0008
        gbc.setState(0xab95, 0xe48b, 0x4950, 0x7974, 0x6eb4, 0x4d0a, 0x1, 0x1);
        gbc.writeMem(0xab95, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xe48b);
        EXPECT(gbc.pc(), 0xab97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab95), 0xcb);
        EXPECT(gbc.readMem(0xab96), 0x6a);
        // CB 6A 0009
        gbc.setState(0x75c5, 0x479c, 0x5620, 0xf3c6, 0x72d9, 0xabab, 0x1, 0x1);
        gbc.writeMem(0x75c5, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x479c);
        EXPECT(gbc.pc(), 0x75c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 000A
        gbc.setState(0xa985, 0x2b16, 0x840, 0x3e84, 0xa5f6, 0x2395, 0x1, 0x1);
        gbc.writeMem(0xa985, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x2b16);
        EXPECT(gbc.pc(), 0xa987);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa985), 0xcb);
        EXPECT(gbc.readMem(0xa986), 0x6a);
        // CB 6A 000B
        gbc.setState(0xdbff, 0xb87c, 0x9e90, 0x374c, 0x2d04, 0xe298, 0x1, 0x0);
        gbc.writeMem(0xdbff, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xb87c);
        EXPECT(gbc.pc(), 0xdc01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbff), 0xcb);
        EXPECT(gbc.readMem(0xdc00), 0x6a);
        // CB 6A 000C
        gbc.setState(0x8901, 0x23ab, 0x990, 0xd409, 0x7d95, 0x2e1b, 0x1, 0x0);
        gbc.writeMem(0x8901, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x23ab);
        EXPECT(gbc.pc(), 0x8903);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8901), 0xcb);
        EXPECT(gbc.readMem(0x8902), 0x6a);
        // CB 6A 000D
        gbc.setState(0x26d1, 0x2cfd, 0x1fe0, 0x7b3d, 0x351f, 0x2ee3, 0x1, 0x0);
        gbc.writeMem(0x26d1, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x2cfd);
        EXPECT(gbc.pc(), 0x26d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 000E
        gbc.setState(0x1c97, 0x8bb0, 0xa400, 0x98d8, 0xc3b8, 0x6403, 0x0, 0x1);
        gbc.writeMem(0x1c97, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x8bb0);
        EXPECT(gbc.pc(), 0x1c99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 000F
        gbc.setState(0x372e, 0xd741, 0xcf40, 0x538c, 0x7e70, 0xca51, 0x0, 0x0);
        gbc.writeMem(0x372e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xd741);
        EXPECT(gbc.pc(), 0x3730);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0010
        gbc.setState(0x2e17, 0xbeb4, 0x940, 0x2c43, 0xf490, 0xbdf6, 0x1, 0x1);
        gbc.writeMem(0x2e17, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xbeb4);
        EXPECT(gbc.pc(), 0x2e19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0011
        gbc.setState(0x1ba8, 0xa15f, 0xb4c0, 0x5b8e, 0xab66, 0x4889, 0x0, 0x0);
        gbc.writeMem(0x1ba8, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xa15f);
        EXPECT(gbc.pc(), 0x1baa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0012
        gbc.setState(0x5aa6, 0xbd3e, 0x26b0, 0x3f8b, 0x6f7f, 0xa550, 0x0, 0x0);
        gbc.writeMem(0x5aa6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xbd3e);
        EXPECT(gbc.pc(), 0x5aa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0013
        gbc.setState(0xb9b7, 0x2468, 0x67a0, 0xfa26, 0xd9bd, 0x22cb, 0x0, 0x1);
        gbc.writeMem(0xb9b7, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x2468);
        EXPECT(gbc.pc(), 0xb9b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9b7), 0xcb);
        EXPECT(gbc.readMem(0xb9b8), 0x6a);
        // CB 6A 0014
        gbc.setState(0x8d5f, 0xc7db, 0x6810, 0x9d59, 0x4489, 0xe7e5, 0x1, 0x1);
        gbc.writeMem(0x8d5f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xc7db);
        EXPECT(gbc.pc(), 0x8d61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d5f), 0xcb);
        EXPECT(gbc.readMem(0x8d60), 0x6a);
        // CB 6A 0015
        gbc.setState(0x94ec, 0xb651, 0xbac0, 0x5e0e, 0x42e, 0x25eb, 0x0, 0x0);
        gbc.writeMem(0x94ec, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xb651);
        EXPECT(gbc.pc(), 0x94ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94ec), 0xcb);
        EXPECT(gbc.readMem(0x94ed), 0x6a);
        // CB 6A 0016
        gbc.setState(0x2b05, 0xe1e7, 0x69a0, 0x4089, 0x71fb, 0x585b, 0x0, 0x0);
        gbc.writeMem(0x2b05, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xe1e7);
        EXPECT(gbc.pc(), 0x2b07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0017
        gbc.setState(0x8f5, 0x74db, 0x6980, 0xf13c, 0x180b, 0xdbcc, 0x1, 0x0);
        gbc.writeMem(0x8f5, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x74db);
        EXPECT(gbc.pc(), 0x8f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0018
        gbc.setState(0x85c9, 0xf552, 0x2570, 0x80ed, 0x19f9, 0xd98f, 0x1, 0x1);
        gbc.writeMem(0x85c9, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xf552);
        EXPECT(gbc.pc(), 0x85cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85c9), 0xcb);
        EXPECT(gbc.readMem(0x85ca), 0x6a);
        // CB 6A 0019
        gbc.setState(0xdb55, 0xa99f, 0x3540, 0xd787, 0x9203, 0xab3d, 0x0, 0x0);
        gbc.writeMem(0xdb55, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xa99f);
        EXPECT(gbc.pc(), 0xdb57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb55), 0xcb);
        EXPECT(gbc.readMem(0xdb56), 0x6a);
        // CB 6A 001A
        gbc.setState(0xe6ad, 0x4fa9, 0x3d20, 0x80a6, 0x7278, 0xa4fa, 0x1, 0x0);
        gbc.writeMem(0xe6ad, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x4fa9);
        EXPECT(gbc.pc(), 0xe6af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6ad), 0xcb);
        EXPECT(gbc.readMem(0xe6ae), 0x6a);
        // CB 6A 001B
        gbc.setState(0xef3e, 0x258a, 0x9010, 0xb886, 0x3656, 0xbf0e, 0x0, 0x1);
        gbc.writeMem(0xef3e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x258a);
        EXPECT(gbc.pc(), 0xef40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef3e), 0xcb);
        EXPECT(gbc.readMem(0xef3f), 0x6a);
        // CB 6A 001C
        gbc.setState(0xc491, 0x7914, 0xc700, 0x4c0f, 0x1b31, 0xe25c, 0x0, 0x0);
        gbc.writeMem(0xc491, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x7914);
        EXPECT(gbc.pc(), 0xc493);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc491), 0xcb);
        EXPECT(gbc.readMem(0xc492), 0x6a);
        // CB 6A 001D
        gbc.setState(0x524e, 0xfe5e, 0x2c10, 0xd9b8, 0x873b, 0xe150, 0x1, 0x0);
        gbc.writeMem(0x524e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xfe5e);
        EXPECT(gbc.pc(), 0x5250);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 001E
        gbc.setState(0x259e, 0xf986, 0x3450, 0xdc55, 0x730, 0xc239, 0x1, 0x1);
        gbc.writeMem(0x259e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xf986);
        EXPECT(gbc.pc(), 0x25a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 001F
        gbc.setState(0xb678, 0x49e9, 0xd860, 0xb3d4, 0x89e2, 0x6381, 0x0, 0x0);
        gbc.writeMem(0xb678, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x49e9);
        EXPECT(gbc.pc(), 0xb67a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb678), 0xcb);
        EXPECT(gbc.readMem(0xb679), 0x6a);
        // CB 6A 0020
        gbc.setState(0x9591, 0x7815, 0xf260, 0x5710, 0x4260, 0x695a, 0x1, 0x1);
        gbc.writeMem(0x9591, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7815);
        EXPECT(gbc.pc(), 0x9593);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9591), 0xcb);
        EXPECT(gbc.readMem(0x9592), 0x6a);
        // CB 6A 0021
        gbc.setState(0x3137, 0xb8b5, 0xa7f0, 0x6f06, 0xd455, 0x56be, 0x0, 0x0);
        gbc.writeMem(0x3137, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xb8b5);
        EXPECT(gbc.pc(), 0x3139);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0022
        gbc.setState(0x6e17, 0xcdd7, 0xa1a0, 0x1bf5, 0x784d, 0xab0c, 0x1, 0x1);
        gbc.writeMem(0x6e17, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xcdd7);
        EXPECT(gbc.pc(), 0x6e19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0023
        gbc.setState(0x8def, 0x26f5, 0xfd60, 0xb1ef, 0xa67b, 0xb9a7, 0x1, 0x0);
        gbc.writeMem(0x8def, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x26f5);
        EXPECT(gbc.pc(), 0x8df1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8def), 0xcb);
        EXPECT(gbc.readMem(0x8df0), 0x6a);
        // CB 6A 0024
        gbc.setState(0x78b3, 0xcca4, 0xeb80, 0xa371, 0x7e2b, 0xa45c, 0x1, 0x0);
        gbc.writeMem(0x78b3, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xcca4);
        EXPECT(gbc.pc(), 0x78b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0025
        gbc.setState(0x6446, 0x5067, 0x7ba0, 0x7ca3, 0xb3ed, 0x890, 0x0, 0x0);
        gbc.writeMem(0x6446, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x5067);
        EXPECT(gbc.pc(), 0x6448);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0026
        gbc.setState(0x3bf0, 0xed9a, 0xe8f0, 0x7ba0, 0x2472, 0x8057, 0x0, 0x0);
        gbc.writeMem(0x3bf0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xed9a);
        EXPECT(gbc.pc(), 0x3bf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0027
        gbc.setState(0xc12c, 0x2182, 0xf5c0, 0x6b36, 0x4df8, 0x2f2, 0x0, 0x1);
        gbc.writeMem(0xc12c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x2182);
        EXPECT(gbc.pc(), 0xc12e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc12c), 0xcb);
        EXPECT(gbc.readMem(0xc12d), 0x6a);
        // CB 6A 0028
        gbc.setState(0x3050, 0xcf8b, 0xd420, 0x6f06, 0x114c, 0x248e, 0x0, 0x0);
        gbc.writeMem(0x3050, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xcf8b);
        EXPECT(gbc.pc(), 0x3052);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0029
        gbc.setState(0xcc73, 0x34aa, 0x2880, 0xf423, 0x5848, 0xbe98, 0x1, 0x1);
        gbc.writeMem(0xcc73, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x34aa);
        EXPECT(gbc.pc(), 0xcc75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc73), 0xcb);
        EXPECT(gbc.readMem(0xcc74), 0x6a);
        // CB 6A 002A
        gbc.setState(0xb013, 0x26d, 0xe400, 0xfc54, 0x4201, 0xc567, 0x0, 0x1);
        gbc.writeMem(0xb013, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x26d);
        EXPECT(gbc.pc(), 0xb015);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb013), 0xcb);
        EXPECT(gbc.readMem(0xb014), 0x6a);
        // CB 6A 002B
        gbc.setState(0x6a80, 0xae8c, 0x17c0, 0x32c5, 0xe1c8, 0xa5f9, 0x1, 0x1);
        gbc.writeMem(0x6a80, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xae8c);
        EXPECT(gbc.pc(), 0x6a82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 002C
        gbc.setState(0x1d96, 0xd5ab, 0x76c0, 0x841f, 0xb67f, 0x195, 0x0, 0x1);
        gbc.writeMem(0x1d96, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xd5ab);
        EXPECT(gbc.pc(), 0x1d98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 002D
        gbc.setState(0x1769, 0x8cfe, 0x1490, 0x740c, 0xf9e, 0x2f1b, 0x1, 0x0);
        gbc.writeMem(0x1769, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x8cfe);
        EXPECT(gbc.pc(), 0x176b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 002E
        gbc.setState(0xdd5, 0x4da5, 0xfef0, 0x9f8b, 0xb87f, 0x57e6, 0x1, 0x1);
        gbc.writeMem(0xdd5, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x4da5);
        EXPECT(gbc.pc(), 0xdd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 002F
        gbc.setState(0x345f, 0xc66f, 0xd950, 0xef5d, 0xc375, 0x67ca, 0x0, 0x1);
        gbc.writeMem(0x345f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xc66f);
        EXPECT(gbc.pc(), 0x3461);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0030
        gbc.setState(0x611d, 0x5c7b, 0xdae0, 0x5e60, 0x5768, 0xdd3d, 0x0, 0x0);
        gbc.writeMem(0x611d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x5c7b);
        EXPECT(gbc.pc(), 0x611f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0031
        gbc.setState(0x945f, 0xe398, 0xaf40, 0x3a34, 0x6dbb, 0xee5f, 0x1, 0x1);
        gbc.writeMem(0x945f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xe398);
        EXPECT(gbc.pc(), 0x9461);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x945f), 0xcb);
        EXPECT(gbc.readMem(0x9460), 0x6a);
        // CB 6A 0032
        gbc.setState(0xaeaa, 0x1e62, 0xb960, 0x3c3b, 0xd7b7, 0xa900, 0x1, 0x0);
        gbc.writeMem(0xaeaa, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x1e62);
        EXPECT(gbc.pc(), 0xaeac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaeaa), 0xcb);
        EXPECT(gbc.readMem(0xaeab), 0x6a);
        // CB 6A 0034
        gbc.setState(0xabe9, 0x7703, 0xe2c0, 0x9a53, 0x826b, 0xf158, 0x0, 0x0);
        gbc.writeMem(0xabe9, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x7703);
        EXPECT(gbc.pc(), 0xabeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabe9), 0xcb);
        EXPECT(gbc.readMem(0xabea), 0x6a);
        // CB 6A 0035
        gbc.setState(0x2081, 0xa328, 0x32c0, 0xbbff, 0x85, 0x98c4, 0x0, 0x1);
        gbc.writeMem(0x2081, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xa328);
        EXPECT(gbc.pc(), 0x2083);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0036
        gbc.setState(0x1c2a, 0x163b, 0x72f0, 0x7615, 0xc090, 0x16e5, 0x1, 0x0);
        gbc.writeMem(0x1c2a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x163b);
        EXPECT(gbc.pc(), 0x1c2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0037
        gbc.setState(0x75d4, 0x8afb, 0x1380, 0xc2cd, 0xb3a4, 0x1817, 0x1, 0x1);
        gbc.writeMem(0x75d4, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x8afb);
        EXPECT(gbc.pc(), 0x75d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0038
        gbc.setState(0x1585, 0xdfbc, 0xcd30, 0x749a, 0x989e, 0xfbe3, 0x0, 0x0);
        gbc.writeMem(0x1585, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xdfbc);
        EXPECT(gbc.pc(), 0x1587);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0039
        gbc.setState(0x20ac, 0x20ac, 0x44c0, 0x9730, 0x933a, 0x79bc, 0x0, 0x0);
        gbc.writeMem(0x20ac, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x20ac);
        EXPECT(gbc.pc(), 0x20ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 003C
        gbc.setState(0x8ee2, 0xa681, 0x28d0, 0x131a, 0x4442, 0x1aef, 0x0, 0x0);
        gbc.writeMem(0x8ee2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xa681);
        EXPECT(gbc.pc(), 0x8ee4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ee2), 0xcb);
        EXPECT(gbc.readMem(0x8ee3), 0x6a);
        // CB 6A 003D
        gbc.setState(0x41d6, 0xf07a, 0x55e0, 0x92fb, 0xace5, 0xc5bc, 0x0, 0x1);
        gbc.writeMem(0x41d6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xf07a);
        EXPECT(gbc.pc(), 0x41d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 003E
        gbc.setState(0xc3c2, 0x30cd, 0x1580, 0x254f, 0xe6ec, 0x5659, 0x0, 0x1);
        gbc.writeMem(0xc3c2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x30cd);
        EXPECT(gbc.pc(), 0xc3c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3c2), 0xcb);
        EXPECT(gbc.readMem(0xc3c3), 0x6a);
        // CB 6A 003F
        gbc.setState(0xd155, 0x3be3, 0xde60, 0x9b82, 0x7c90, 0xd9ad, 0x0, 0x1);
        gbc.writeMem(0xd155, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x3be3);
        EXPECT(gbc.pc(), 0xd157);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd155), 0xcb);
        EXPECT(gbc.readMem(0xd156), 0x6a);
        // CB 6A 0040
        gbc.setState(0x2c39, 0x9eba, 0x3b0, 0x87b3, 0x4734, 0xfbec, 0x1, 0x1);
        gbc.writeMem(0x2c39, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x9eba);
        EXPECT(gbc.pc(), 0x2c3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0042
        gbc.setState(0xa84f, 0xd92f, 0x1b20, 0xefe3, 0x3f26, 0xf58a, 0x0, 0x0);
        gbc.writeMem(0xa84f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xd92f);
        EXPECT(gbc.pc(), 0xa851);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa84f), 0xcb);
        EXPECT(gbc.readMem(0xa850), 0x6a);
        // CB 6A 0043
        gbc.setState(0x6d69, 0xad73, 0xeda0, 0x735e, 0x7655, 0x82b0, 0x1, 0x1);
        gbc.writeMem(0x6d69, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xad73);
        EXPECT(gbc.pc(), 0x6d6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0044
        gbc.setState(0xb2e4, 0x1561, 0x9c20, 0x38c0, 0x41b6, 0xc65e, 0x1, 0x0);
        gbc.writeMem(0xb2e4, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x1561);
        EXPECT(gbc.pc(), 0xb2e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2e4), 0xcb);
        EXPECT(gbc.readMem(0xb2e5), 0x6a);
        // CB 6A 0046
        gbc.setState(0x8184, 0x49af, 0x3360, 0x5763, 0xba84, 0x2f23, 0x0, 0x1);
        gbc.writeMem(0x8184, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x49af);
        EXPECT(gbc.pc(), 0x8186);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8184), 0xcb);
        EXPECT(gbc.readMem(0x8185), 0x6a);
        // CB 6A 0047
        gbc.setState(0x79e, 0x6866, 0x5b00, 0x211c, 0xff29, 0x6db9, 0x1, 0x0);
        gbc.writeMem(0x79e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x6866);
        EXPECT(gbc.pc(), 0x7a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0048
        gbc.setState(0x81b1, 0x6311, 0xf570, 0x8191, 0xd36e, 0xcde3, 0x1, 0x1);
        gbc.writeMem(0x81b1, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x6311);
        EXPECT(gbc.pc(), 0x81b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81b1), 0xcb);
        EXPECT(gbc.readMem(0x81b2), 0x6a);
        // CB 6A 0049
        gbc.setState(0x3c29, 0xb3bd, 0x9610, 0xdf28, 0x4fd, 0xfd4f, 0x1, 0x0);
        gbc.writeMem(0x3c29, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xb3bd);
        EXPECT(gbc.pc(), 0x3c2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 004A
        gbc.setState(0x6211, 0xcfff, 0xc930, 0x6e28, 0xbd91, 0xc044, 0x1, 0x1);
        gbc.writeMem(0x6211, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xcfff);
        EXPECT(gbc.pc(), 0x6213);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 004B
        gbc.setState(0x1601, 0xc617, 0xc40, 0x7d64, 0xb8cc, 0xd9a, 0x0, 0x0);
        gbc.writeMem(0x1601, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xc617);
        EXPECT(gbc.pc(), 0x1603);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 004C
        gbc.setState(0x6509, 0x22ef, 0xb450, 0x1899, 0x9d4a, 0x2ccb, 0x1, 0x1);
        gbc.writeMem(0x6509, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x22ef);
        EXPECT(gbc.pc(), 0x650b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 004D
        gbc.setState(0x3bdb, 0x10a7, 0x1b40, 0x1e02, 0xd768, 0x7b7f, 0x0, 0x1);
        gbc.writeMem(0x3bdb, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x10a7);
        EXPECT(gbc.pc(), 0x3bdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 004E
        gbc.setState(0xc0ac, 0x6b09, 0xeaf0, 0x806d, 0xae77, 0x9186, 0x0, 0x0);
        gbc.writeMem(0xc0ac, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x6b09);
        EXPECT(gbc.pc(), 0xc0ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0ac), 0xcb);
        EXPECT(gbc.readMem(0xc0ad), 0x6a);
        // CB 6A 004F
        gbc.setState(0xd899, 0x6719, 0x4d0, 0x7da3, 0xc80, 0xcb20, 0x0, 0x1);
        gbc.writeMem(0xd899, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x6719);
        EXPECT(gbc.pc(), 0xd89b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd899), 0xcb);
        EXPECT(gbc.readMem(0xd89a), 0x6a);
        // CB 6A 0050
        gbc.setState(0x4c8e, 0x46e7, 0x3400, 0x8d47, 0x7e85, 0x4163, 0x1, 0x0);
        gbc.writeMem(0x4c8e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x46e7);
        EXPECT(gbc.pc(), 0x4c90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0051
        gbc.setState(0x6dc8, 0x96e4, 0xf4a0, 0x60a9, 0x35c2, 0x2494, 0x1, 0x0);
        gbc.writeMem(0x6dc8, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x96e4);
        EXPECT(gbc.pc(), 0x6dca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0052
        gbc.setState(0x92e6, 0x2143, 0x33d0, 0x4902, 0x9b54, 0x9ae9, 0x0, 0x1);
        gbc.writeMem(0x92e6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x2143);
        EXPECT(gbc.pc(), 0x92e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92e6), 0xcb);
        EXPECT(gbc.readMem(0x92e7), 0x6a);
        // CB 6A 0053
        gbc.setState(0x3624, 0xdaf0, 0x4710, 0x5370, 0xebc5, 0xb8c2, 0x0, 0x0);
        gbc.writeMem(0x3624, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xdaf0);
        EXPECT(gbc.pc(), 0x3626);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0054
        gbc.setState(0xc767, 0xa108, 0x2730, 0x69cb, 0x69b8, 0x60fc, 0x1, 0x1);
        gbc.writeMem(0xc767, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xa108);
        EXPECT(gbc.pc(), 0xc769);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc767), 0xcb);
        EXPECT(gbc.readMem(0xc768), 0x6a);
        // CB 6A 0055
        gbc.setState(0x9e5b, 0x2139, 0x9f30, 0x11dd, 0x28a6, 0xcf72, 0x0, 0x1);
        gbc.writeMem(0x9e5b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x2139);
        EXPECT(gbc.pc(), 0x9e5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e5b), 0xcb);
        EXPECT(gbc.readMem(0x9e5c), 0x6a);
        // CB 6A 0056
        gbc.setState(0x77b2, 0x3a86, 0x5460, 0x9695, 0xe4d0, 0x8311, 0x0, 0x1);
        gbc.writeMem(0x77b2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x3a86);
        EXPECT(gbc.pc(), 0x77b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0057
        gbc.setState(0x5043, 0xc4a5, 0x4910, 0xd5d2, 0xeb3b, 0x8520, 0x0, 0x1);
        gbc.writeMem(0x5043, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xc4a5);
        EXPECT(gbc.pc(), 0x5045);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0058
        gbc.setState(0x9306, 0x5729, 0xc750, 0xd7dd, 0xf7c8, 0xdfa2, 0x1, 0x1);
        gbc.writeMem(0x9306, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x5729);
        EXPECT(gbc.pc(), 0x9308);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9306), 0xcb);
        EXPECT(gbc.readMem(0x9307), 0x6a);
        // CB 6A 0059
        gbc.setState(0x2f55, 0xaab6, 0x1ef0, 0x93ab, 0xb115, 0xab3c, 0x1, 0x0);
        gbc.writeMem(0x2f55, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xaab6);
        EXPECT(gbc.pc(), 0x2f57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 005A
        gbc.setState(0x9099, 0xd5b4, 0x4860, 0xa97f, 0xbd69, 0xb02d, 0x1, 0x1);
        gbc.writeMem(0x9099, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xd5b4);
        EXPECT(gbc.pc(), 0x909b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9099), 0xcb);
        EXPECT(gbc.readMem(0x909a), 0x6a);
        // CB 6A 005B
        gbc.setState(0x7ec, 0x2eb1, 0x6000, 0xa221, 0x71c2, 0x5b33, 0x1, 0x1);
        gbc.writeMem(0x7ec, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x2eb1);
        EXPECT(gbc.pc(), 0x7ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 005D
        gbc.setState(0xb361, 0xce6, 0xd1b0, 0x1a5f, 0x75ea, 0x22af, 0x0, 0x0);
        gbc.writeMem(0xb361, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xce6);
        EXPECT(gbc.pc(), 0xb363);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb361), 0xcb);
        EXPECT(gbc.readMem(0xb362), 0x6a);
        // CB 6A 005E
        gbc.setState(0xea6f, 0x2cbb, 0x9aa0, 0xd9bc, 0x3b3e, 0x634e, 0x0, 0x1);
        gbc.writeMem(0xea6f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x2cbb);
        EXPECT(gbc.pc(), 0xea71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea6f), 0xcb);
        EXPECT(gbc.readMem(0xea70), 0x6a);
        // CB 6A 005F
        gbc.setState(0xba32, 0xed26, 0x2330, 0xa35d, 0xfbc2, 0x69e, 0x0, 0x1);
        gbc.writeMem(0xba32, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xed26);
        EXPECT(gbc.pc(), 0xba34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba32), 0xcb);
        EXPECT(gbc.readMem(0xba33), 0x6a);
        // CB 6A 0060
        gbc.setState(0x9f0b, 0x9ab3, 0x6e30, 0xbd40, 0x63c0, 0x46be, 0x1, 0x0);
        gbc.writeMem(0x9f0b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x9ab3);
        EXPECT(gbc.pc(), 0x9f0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f0b), 0xcb);
        EXPECT(gbc.readMem(0x9f0c), 0x6a);
        // CB 6A 0061
        gbc.setState(0x7d36, 0xed32, 0xa5a0, 0x232c, 0x3bdd, 0x553f, 0x1, 0x0);
        gbc.writeMem(0x7d36, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xed32);
        EXPECT(gbc.pc(), 0x7d38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0062
        gbc.setState(0x1ce6, 0x100a, 0x4e90, 0x7b, 0x7637, 0x72ab, 0x0, 0x1);
        gbc.writeMem(0x1ce6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x100a);
        EXPECT(gbc.pc(), 0x1ce8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0063
        gbc.setState(0xade1, 0xbae6, 0x7ca0, 0x4a4b, 0x8303, 0x3c94, 0x0, 0x0);
        gbc.writeMem(0xade1, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xbae6);
        EXPECT(gbc.pc(), 0xade3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xade1), 0xcb);
        EXPECT(gbc.readMem(0xade2), 0x6a);
        // CB 6A 0064
        gbc.setState(0xea1d, 0xcb3c, 0xa40, 0x16c6, 0x3749, 0x74e1, 0x0, 0x1);
        gbc.writeMem(0xea1d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xcb3c);
        EXPECT(gbc.pc(), 0xea1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea1d), 0xcb);
        EXPECT(gbc.readMem(0xea1e), 0x6a);
        // CB 6A 0065
        gbc.setState(0x279b, 0xd925, 0x2b70, 0xa44a, 0x8d4b, 0x6cb4, 0x1, 0x1);
        gbc.writeMem(0x279b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xd925);
        EXPECT(gbc.pc(), 0x279d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0066
        gbc.setState(0x9425, 0x813a, 0x7270, 0xce72, 0x345b, 0x1e1f, 0x0, 0x1);
        gbc.writeMem(0x9425, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x813a);
        EXPECT(gbc.pc(), 0x9427);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9425), 0xcb);
        EXPECT(gbc.readMem(0x9426), 0x6a);
        // CB 6A 0067
        gbc.setState(0x2c3e, 0x356f, 0x6760, 0xf172, 0x8ee, 0xbd8, 0x0, 0x1);
        gbc.writeMem(0x2c3e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x356f);
        EXPECT(gbc.pc(), 0x2c40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0069
        gbc.setState(0xcde3, 0x3588, 0xd850, 0x95c3, 0xddc8, 0x2c1e, 0x1, 0x0);
        gbc.writeMem(0xcde3, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x3588);
        EXPECT(gbc.pc(), 0xcde5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcde3), 0xcb);
        EXPECT(gbc.readMem(0xcde4), 0x6a);
        // CB 6A 006B
        gbc.setState(0xa7f8, 0xfbea, 0x6a00, 0x4491, 0xcb6, 0x7a14, 0x0, 0x1);
        gbc.writeMem(0xa7f8, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xfbea);
        EXPECT(gbc.pc(), 0xa7fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7f8), 0xcb);
        EXPECT(gbc.readMem(0xa7f9), 0x6a);
        // CB 6A 006C
        gbc.setState(0x5a28, 0x9a93, 0x6f0, 0xfab9, 0x9626, 0xc9a3, 0x1, 0x0);
        gbc.writeMem(0x5a28, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9a93);
        EXPECT(gbc.pc(), 0x5a2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 006D
        gbc.setState(0x1214, 0xac48, 0x2720, 0x508e, 0x8702, 0x734d, 0x0, 0x0);
        gbc.writeMem(0x1214, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xac48);
        EXPECT(gbc.pc(), 0x1216);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 006E
        gbc.setState(0xd868, 0x8c87, 0x8bd0, 0x5454, 0x4a39, 0xf7dd, 0x0, 0x1);
        gbc.writeMem(0xd868, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x8c87);
        EXPECT(gbc.pc(), 0xd86a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd868), 0xcb);
        EXPECT(gbc.readMem(0xd869), 0x6a);
        // CB 6A 006F
        gbc.setState(0x4dbb, 0x749b, 0x47f0, 0x6b09, 0x693a, 0xe6f6, 0x1, 0x1);
        gbc.writeMem(0x4dbb, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x749b);
        EXPECT(gbc.pc(), 0x4dbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0071
        gbc.setState(0xca72, 0x72bb, 0x6e60, 0x315b, 0x78b0, 0x2e1e, 0x1, 0x0);
        gbc.writeMem(0xca72, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x72bb);
        EXPECT(gbc.pc(), 0xca74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca72), 0xcb);
        EXPECT(gbc.readMem(0xca73), 0x6a);
        // CB 6A 0072
        gbc.setState(0xc40c, 0x8164, 0xf10, 0x635f, 0x8a3c, 0xed40, 0x0, 0x1);
        gbc.writeMem(0xc40c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x8164);
        EXPECT(gbc.pc(), 0xc40e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc40c), 0xcb);
        EXPECT(gbc.readMem(0xc40d), 0x6a);
        // CB 6A 0073
        gbc.setState(0x6f2e, 0x9423, 0xaaa0, 0x3d94, 0x7304, 0x39af, 0x0, 0x0);
        gbc.writeMem(0x6f2e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x9423);
        EXPECT(gbc.pc(), 0x6f30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0074
        gbc.setState(0x690b, 0x9c7d, 0x5140, 0x79ee, 0x6619, 0x15db, 0x0, 0x1);
        gbc.writeMem(0x690b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x9c7d);
        EXPECT(gbc.pc(), 0x690d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0075
        gbc.setState(0x15fe, 0x6230, 0xe6a0, 0xb572, 0x3776, 0xd017, 0x1, 0x0);
        gbc.writeMem(0x15fe, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x6230);
        EXPECT(gbc.pc(), 0x1600);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0076
        gbc.setState(0x5758, 0x6295, 0xddb0, 0x595c, 0x1169, 0xe9d0, 0x1, 0x1);
        gbc.writeMem(0x5758, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x6295);
        EXPECT(gbc.pc(), 0x575a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0077
        gbc.setState(0x9044, 0x84ff, 0x5a40, 0xc62b, 0xe365, 0xb7a2, 0x1, 0x0);
        gbc.writeMem(0x9044, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x84ff);
        EXPECT(gbc.pc(), 0x9046);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9044), 0xcb);
        EXPECT(gbc.readMem(0x9045), 0x6a);
        // CB 6A 0078
        gbc.setState(0xe7bc, 0xe111, 0xd090, 0x707e, 0x38a0, 0xf69f, 0x0, 0x1);
        gbc.writeMem(0xe7bc, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xe111);
        EXPECT(gbc.pc(), 0xe7be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7bc), 0xcb);
        EXPECT(gbc.readMem(0xe7bd), 0x6a);
        // CB 6A 0079
        gbc.setState(0x3728, 0xcf6, 0x16a0, 0x5e08, 0xbba7, 0x3e3d, 0x0, 0x1);
        gbc.writeMem(0x3728, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xcf6);
        EXPECT(gbc.pc(), 0x372a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 007A
        gbc.setState(0xa6a8, 0x9e07, 0x58c0, 0x6c07, 0x5ccd, 0xb304, 0x0, 0x1);
        gbc.writeMem(0xa6a8, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x9e07);
        EXPECT(gbc.pc(), 0xa6aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6a8), 0xcb);
        EXPECT(gbc.readMem(0xa6a9), 0x6a);
        // CB 6A 007B
        gbc.setState(0xa164, 0x8b47, 0x8d10, 0x1ec7, 0x8450, 0xdf95, 0x1, 0x1);
        gbc.writeMem(0xa164, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x8b47);
        EXPECT(gbc.pc(), 0xa166);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa164), 0xcb);
        EXPECT(gbc.readMem(0xa165), 0x6a);
        // CB 6A 007C
        gbc.setState(0xb180, 0xc513, 0x16b0, 0x8b94, 0x17eb, 0xc229, 0x0, 0x0);
        gbc.writeMem(0xb180, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xc513);
        EXPECT(gbc.pc(), 0xb182);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb180), 0xcb);
        EXPECT(gbc.readMem(0xb181), 0x6a);
        // CB 6A 007D
        gbc.setState(0xbc48, 0x86c0, 0x52c0, 0x2922, 0x135c, 0x344a, 0x1, 0x1);
        gbc.writeMem(0xbc48, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x86c0);
        EXPECT(gbc.pc(), 0xbc4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc48), 0xcb);
        EXPECT(gbc.readMem(0xbc49), 0x6a);
        // CB 6A 007E
        gbc.setState(0x2106, 0xb184, 0xe6b0, 0xf394, 0xe7d7, 0xf3ec, 0x0, 0x0);
        gbc.writeMem(0x2106, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xb184);
        EXPECT(gbc.pc(), 0x2108);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 007F
        gbc.setState(0xd40d, 0xf9e4, 0x35c0, 0xe2a8, 0xbf52, 0xeb34, 0x1, 0x0);
        gbc.writeMem(0xd40d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xf9e4);
        EXPECT(gbc.pc(), 0xd40f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd40d), 0xcb);
        EXPECT(gbc.readMem(0xd40e), 0x6a);
        // CB 6A 0080
        gbc.setState(0x3b83, 0xe7, 0x7e50, 0xfed3, 0xe8c4, 0x2783, 0x1, 0x1);
        gbc.writeMem(0x3b83, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xe7);
        EXPECT(gbc.pc(), 0x3b85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0081
        gbc.setState(0x4e7e, 0xaf0b, 0x3c20, 0x1494, 0x65a2, 0xe866, 0x0, 0x1);
        gbc.writeMem(0x4e7e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xaf0b);
        EXPECT(gbc.pc(), 0x4e80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0082
        gbc.setState(0xc9e0, 0xcf5d, 0x3890, 0x193b, 0x1a7a, 0xc3dc, 0x0, 0x0);
        gbc.writeMem(0xc9e0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xcf5d);
        EXPECT(gbc.pc(), 0xc9e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9e0), 0xcb);
        EXPECT(gbc.readMem(0xc9e1), 0x6a);
        // CB 6A 0083
        gbc.setState(0xdb3c, 0xb971, 0xd80, 0xbd6c, 0x9c77, 0xe706, 0x1, 0x1);
        gbc.writeMem(0xdb3c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xb971);
        EXPECT(gbc.pc(), 0xdb3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb3c), 0xcb);
        EXPECT(gbc.readMem(0xdb3d), 0x6a);
        // CB 6A 0084
        gbc.setState(0x34e4, 0x4deb, 0xd480, 0x4a58, 0x2d97, 0xcf76, 0x0, 0x0);
        gbc.writeMem(0x34e4, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x4deb);
        EXPECT(gbc.pc(), 0x34e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0085
        gbc.setState(0xb7f9, 0x6e76, 0x72d0, 0x9cf8, 0x4398, 0x99f5, 0x1, 0x0);
        gbc.writeMem(0xb7f9, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x6e76);
        EXPECT(gbc.pc(), 0xb7fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7f9), 0xcb);
        EXPECT(gbc.readMem(0xb7fa), 0x6a);
        // CB 6A 0086
        gbc.setState(0x8b78, 0xf887, 0x13a0, 0x92b4, 0xe362, 0xf257, 0x1, 0x0);
        gbc.writeMem(0x8b78, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xf887);
        EXPECT(gbc.pc(), 0x8b7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b78), 0xcb);
        EXPECT(gbc.readMem(0x8b79), 0x6a);
        // CB 6A 0087
        gbc.setState(0xe594, 0xbd4, 0x5d50, 0x736, 0x4388, 0xea31, 0x1, 0x0);
        gbc.writeMem(0xe594, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xbd4);
        EXPECT(gbc.pc(), 0xe596);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe594), 0xcb);
        EXPECT(gbc.readMem(0xe595), 0x6a);
        // CB 6A 0088
        gbc.setState(0xe42e, 0xcc4f, 0x2c30, 0x93bc, 0xaa78, 0x207b, 0x0, 0x1);
        gbc.writeMem(0xe42e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xcc4f);
        EXPECT(gbc.pc(), 0xe430);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe42e), 0xcb);
        EXPECT(gbc.readMem(0xe42f), 0x6a);
        // CB 6A 0089
        gbc.setState(0x5b11, 0x3cf9, 0xac90, 0x337c, 0x2686, 0xf860, 0x1, 0x1);
        gbc.writeMem(0x5b11, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x3cf9);
        EXPECT(gbc.pc(), 0x5b13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 008A
        gbc.setState(0x36bf, 0x5508, 0x4c30, 0x22c1, 0x787c, 0xaf7e, 0x0, 0x1);
        gbc.writeMem(0x36bf, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x5508);
        EXPECT(gbc.pc(), 0x36c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 008B
        gbc.setState(0xeacc, 0x132d, 0xeeb0, 0xdb0f, 0x2b1f, 0xf733, 0x0, 0x1);
        gbc.writeMem(0xeacc, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x132d);
        EXPECT(gbc.pc(), 0xeace);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeacc), 0xcb);
        EXPECT(gbc.readMem(0xeacd), 0x6a);
        // CB 6A 008C
        gbc.setState(0xb8e9, 0xf839, 0x9420, 0xa458, 0x2cb8, 0xf560, 0x1, 0x0);
        gbc.writeMem(0xb8e9, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xf839);
        EXPECT(gbc.pc(), 0xb8eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8e9), 0xcb);
        EXPECT(gbc.readMem(0xb8ea), 0x6a);
        // CB 6A 008D
        gbc.setState(0x67a2, 0xd42d, 0x3440, 0x326, 0xdf07, 0x2ed, 0x1, 0x0);
        gbc.writeMem(0x67a2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xd42d);
        EXPECT(gbc.pc(), 0x67a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 008E
        gbc.setState(0x13e2, 0xde69, 0x940, 0xfe00, 0x65da, 0xbe0, 0x1, 0x0);
        gbc.writeMem(0x13e2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xde69);
        EXPECT(gbc.pc(), 0x13e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 008F
        gbc.setState(0x5b44, 0xe3b8, 0xd0, 0x58c8, 0x4984, 0xc89d, 0x0, 0x1);
        gbc.writeMem(0x5b44, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xe3b8);
        EXPECT(gbc.pc(), 0x5b46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0090
        gbc.setState(0x5eaa, 0x6b2f, 0xadd0, 0xffac, 0xba64, 0xd53b, 0x1, 0x1);
        gbc.writeMem(0x5eaa, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x6b2f);
        EXPECT(gbc.pc(), 0x5eac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0092
        gbc.setState(0xda2a, 0xb10f, 0x73c0, 0x205a, 0xa95, 0x3939, 0x1, 0x0);
        gbc.writeMem(0xda2a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xb10f);
        EXPECT(gbc.pc(), 0xda2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda2a), 0xcb);
        EXPECT(gbc.readMem(0xda2b), 0x6a);
        // CB 6A 0093
        gbc.setState(0x3d61, 0xaa68, 0xfe60, 0xa8c7, 0x3ade, 0xcb8d, 0x1, 0x1);
        gbc.writeMem(0x3d61, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xaa68);
        EXPECT(gbc.pc(), 0x3d63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0094
        gbc.setState(0x7b41, 0x9cfc, 0xec40, 0x175d, 0x2717, 0x69de, 0x0, 0x0);
        gbc.writeMem(0x7b41, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x9cfc);
        EXPECT(gbc.pc(), 0x7b43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0095
        gbc.setState(0x1af8, 0x67cf, 0x1880, 0x1bf4, 0x4327, 0x4402, 0x0, 0x0);
        gbc.writeMem(0x1af8, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x67cf);
        EXPECT(gbc.pc(), 0x1afa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0096
        gbc.setState(0x464f, 0x56f0, 0xe390, 0x34eb, 0x8e46, 0xf82, 0x0, 0x1);
        gbc.writeMem(0x464f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x56f0);
        EXPECT(gbc.pc(), 0x4651);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0097
        gbc.setState(0x1d41, 0x3afe, 0x30c0, 0xbef9, 0xc551, 0xe698, 0x0, 0x1);
        gbc.writeMem(0x1d41, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x3afe);
        EXPECT(gbc.pc(), 0x1d43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0099
        gbc.setState(0x4852, 0x4d33, 0x72e0, 0x5c9e, 0xf603, 0x24bc, 0x1, 0x1);
        gbc.writeMem(0x4852, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x4d33);
        EXPECT(gbc.pc(), 0x4854);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 009A
        gbc.setState(0x7f79, 0xff59, 0xa180, 0x139a, 0x902c, 0xe8aa, 0x0, 0x0);
        gbc.writeMem(0x7f79, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xff59);
        EXPECT(gbc.pc(), 0x7f7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 009B
        gbc.setState(0x8914, 0xf673, 0xf840, 0xa576, 0x95f4, 0xa624, 0x1, 0x1);
        gbc.writeMem(0x8914, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xf673);
        EXPECT(gbc.pc(), 0x8916);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8914), 0xcb);
        EXPECT(gbc.readMem(0x8915), 0x6a);
        // CB 6A 009C
        gbc.setState(0x941, 0x9ffa, 0x4230, 0xfcbd, 0xe078, 0x1e25, 0x1, 0x0);
        gbc.writeMem(0x941, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x9ffa);
        EXPECT(gbc.pc(), 0x943);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 009D
        gbc.setState(0xd9dc, 0x4868, 0x8c10, 0xa192, 0x749e, 0x6bc7, 0x1, 0x0);
        gbc.writeMem(0xd9dc, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x4868);
        EXPECT(gbc.pc(), 0xd9de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9dc), 0xcb);
        EXPECT(gbc.readMem(0xd9dd), 0x6a);
        // CB 6A 009E
        gbc.setState(0x5862, 0x7c0e, 0x1c0, 0x9d0f, 0x470, 0x895e, 0x0, 0x0);
        gbc.writeMem(0x5862, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x7c0e);
        EXPECT(gbc.pc(), 0x5864);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 009F
        gbc.setState(0xa344, 0xc860, 0x68e0, 0xc6bb, 0x9c20, 0x1888, 0x0, 0x1);
        gbc.writeMem(0xa344, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc860);
        EXPECT(gbc.pc(), 0xa346);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa344), 0xcb);
        EXPECT(gbc.readMem(0xa345), 0x6a);
        // CB 6A 00A0
        gbc.setState(0xaf07, 0x18e6, 0xb510, 0x1ad5, 0x2641, 0xb157, 0x1, 0x0);
        gbc.writeMem(0xaf07, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x18e6);
        EXPECT(gbc.pc(), 0xaf09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf07), 0xcb);
        EXPECT(gbc.readMem(0xaf08), 0x6a);
        // CB 6A 00A1
        gbc.setState(0xa0ac, 0x5d20, 0x6a00, 0x9ab0, 0x1544, 0xf08a, 0x1, 0x1);
        gbc.writeMem(0xa0ac, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x5d20);
        EXPECT(gbc.pc(), 0xa0ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0ac), 0xcb);
        EXPECT(gbc.readMem(0xa0ad), 0x6a);
        // CB 6A 00A2
        gbc.setState(0xe6fb, 0x818d, 0x4c30, 0x687, 0xeab5, 0x927b, 0x1, 0x0);
        gbc.writeMem(0xe6fb, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x818d);
        EXPECT(gbc.pc(), 0xe6fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6fb), 0xcb);
        EXPECT(gbc.readMem(0xe6fc), 0x6a);
        // CB 6A 00A3
        gbc.setState(0xd875, 0x574e, 0xd810, 0xb928, 0x7b6f, 0xa0c1, 0x1, 0x0);
        gbc.writeMem(0xd875, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x574e);
        EXPECT(gbc.pc(), 0xd877);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd875), 0xcb);
        EXPECT(gbc.readMem(0xd876), 0x6a);
        // CB 6A 00A4
        gbc.setState(0xa967, 0xb1ff, 0xacb0, 0xc1c3, 0x5146, 0x89e9, 0x1, 0x0);
        gbc.writeMem(0xa967, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xb1ff);
        EXPECT(gbc.pc(), 0xa969);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa967), 0xcb);
        EXPECT(gbc.readMem(0xa968), 0x6a);
        // CB 6A 00A5
        gbc.setState(0xadd8, 0xb44a, 0x85d0, 0x963c, 0xd5c4, 0xec9c, 0x1, 0x1);
        gbc.writeMem(0xadd8, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xb44a);
        EXPECT(gbc.pc(), 0xadda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadd8), 0xcb);
        EXPECT(gbc.readMem(0xadd9), 0x6a);
        // CB 6A 00A6
        gbc.setState(0x8cae, 0xff49, 0x200, 0x360a, 0x9f52, 0x13ac, 0x0, 0x1);
        gbc.writeMem(0x8cae, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xff49);
        EXPECT(gbc.pc(), 0x8cb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cae), 0xcb);
        EXPECT(gbc.readMem(0x8caf), 0x6a);
        // CB 6A 00A7
        gbc.setState(0x86ac, 0xa538, 0x2890, 0xe13d, 0x2d9c, 0x99d1, 0x1, 0x0);
        gbc.writeMem(0x86ac, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xa538);
        EXPECT(gbc.pc(), 0x86ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86ac), 0xcb);
        EXPECT(gbc.readMem(0x86ad), 0x6a);
        // CB 6A 00A8
        gbc.setState(0xa450, 0xf054, 0xdd20, 0x9f07, 0x3315, 0x45c5, 0x0, 0x0);
        gbc.writeMem(0xa450, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xf054);
        EXPECT(gbc.pc(), 0xa452);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa450), 0xcb);
        EXPECT(gbc.readMem(0xa451), 0x6a);
        // CB 6A 00A9
        gbc.setState(0x1138, 0x9c67, 0x5a90, 0x8c9f, 0xdd88, 0x9079, 0x1, 0x0);
        gbc.writeMem(0x1138, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x9c67);
        EXPECT(gbc.pc(), 0x113a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00AA
        gbc.setState(0xe705, 0x33d4, 0x8f90, 0xc4cf, 0x5dc, 0x4fa9, 0x0, 0x1);
        gbc.writeMem(0xe705, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x33d4);
        EXPECT(gbc.pc(), 0xe707);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe705), 0xcb);
        EXPECT(gbc.readMem(0xe706), 0x6a);
        // CB 6A 00AB
        gbc.setState(0x6a10, 0x1a61, 0x8800, 0x520f, 0xabb7, 0xa7b5, 0x1, 0x0);
        gbc.writeMem(0x6a10, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x1a61);
        EXPECT(gbc.pc(), 0x6a12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 00AC
        gbc.setState(0xc4d3, 0x8940, 0xc430, 0x519, 0x8c99, 0x5e2d, 0x0, 0x1);
        gbc.writeMem(0xc4d3, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x8940);
        EXPECT(gbc.pc(), 0xc4d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4d3), 0xcb);
        EXPECT(gbc.readMem(0xc4d4), 0x6a);
        // CB 6A 00AD
        gbc.setState(0xe67c, 0x9d62, 0x3440, 0x2e08, 0xf49a, 0xaea2, 0x0, 0x0);
        gbc.writeMem(0xe67c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x9d62);
        EXPECT(gbc.pc(), 0xe67e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe67c), 0xcb);
        EXPECT(gbc.readMem(0xe67d), 0x6a);
        // CB 6A 00AE
        gbc.setState(0x645d, 0xdf33, 0x1590, 0xbc82, 0x516d, 0xd3a4, 0x0, 0x0);
        gbc.writeMem(0x645d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xdf33);
        EXPECT(gbc.pc(), 0x645f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00AF
        gbc.setState(0x7769, 0xd1b6, 0x8490, 0xb984, 0x9781, 0x8967, 0x0, 0x0);
        gbc.writeMem(0x7769, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xd1b6);
        EXPECT(gbc.pc(), 0x776b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00B0
        gbc.setState(0x53bb, 0x85dd, 0x49e0, 0x4023, 0x5386, 0x2fb, 0x1, 0x1);
        gbc.writeMem(0x53bb, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x85dd);
        EXPECT(gbc.pc(), 0x53bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 00B1
        gbc.setState(0x3155, 0x8de4, 0x9130, 0x904e, 0x1389, 0x96ad, 0x0, 0x1);
        gbc.writeMem(0x3155, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x8de4);
        EXPECT(gbc.pc(), 0x3157);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00B2
        gbc.setState(0x37e, 0x6f04, 0x460, 0xa351, 0x3d3e, 0xfca0, 0x1, 0x0);
        gbc.writeMem(0x37e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x6f04);
        EXPECT(gbc.pc(), 0x380);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 00B3
        gbc.setState(0xc3c9, 0x67d9, 0xab60, 0x8541, 0x7a6f, 0xe8b2, 0x1, 0x0);
        gbc.writeMem(0xc3c9, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x67d9);
        EXPECT(gbc.pc(), 0xc3cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3c9), 0xcb);
        EXPECT(gbc.readMem(0xc3ca), 0x6a);
        // CB 6A 00B4
        gbc.setState(0x655c, 0xb195, 0x2010, 0x694, 0xc126, 0x65ce, 0x0, 0x1);
        gbc.writeMem(0x655c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xb195);
        EXPECT(gbc.pc(), 0x655e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00B5
        gbc.setState(0xdb35, 0x3f06, 0x39e0, 0x7b47, 0x977a, 0x2735, 0x1, 0x0);
        gbc.writeMem(0xdb35, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x3f06);
        EXPECT(gbc.pc(), 0xdb37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb35), 0xcb);
        EXPECT(gbc.readMem(0xdb36), 0x6a);
        // CB 6A 00B6
        gbc.setState(0x44fe, 0xb183, 0xc8c0, 0x3493, 0xfd00, 0x48c7, 0x1, 0x1);
        gbc.writeMem(0x44fe, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xb183);
        EXPECT(gbc.pc(), 0x4500);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 00B7
        gbc.setState(0x937e, 0xd7e2, 0x2450, 0x1932, 0x8221, 0x6e04, 0x1, 0x1);
        gbc.writeMem(0x937e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xd7e2);
        EXPECT(gbc.pc(), 0x9380);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x937e), 0xcb);
        EXPECT(gbc.readMem(0x937f), 0x6a);
        // CB 6A 00B8
        gbc.setState(0x1790, 0x773a, 0x9880, 0x8c12, 0xbffd, 0x67e7, 0x0, 0x1);
        gbc.writeMem(0x1790, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x773a);
        EXPECT(gbc.pc(), 0x1792);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 00B9
        gbc.setState(0x7952, 0xbe67, 0x7a00, 0x93d1, 0x319c, 0xa9f9, 0x0, 0x0);
        gbc.writeMem(0x7952, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xbe67);
        EXPECT(gbc.pc(), 0x7954);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 00BA
        gbc.setState(0xef91, 0x4ad4, 0x3d50, 0x4db7, 0xdfa0, 0x9db7, 0x1, 0x0);
        gbc.writeMem(0xef91, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x4ad4);
        EXPECT(gbc.pc(), 0xef93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef91), 0xcb);
        EXPECT(gbc.readMem(0xef92), 0x6a);
        // CB 6A 00BB
        gbc.setState(0x1801, 0xeadf, 0x9c90, 0xe77, 0x4987, 0x5286, 0x1, 0x0);
        gbc.writeMem(0x1801, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xeadf);
        EXPECT(gbc.pc(), 0x1803);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00BC
        gbc.setState(0x7349, 0x306c, 0xa900, 0x81f3, 0x7b94, 0xe84e, 0x0, 0x1);
        gbc.writeMem(0x7349, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x306c);
        EXPECT(gbc.pc(), 0x734b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 00BE
        gbc.setState(0x877a, 0xe01a, 0xa9b0, 0x54c, 0x402f, 0x9a78, 0x0, 0x0);
        gbc.writeMem(0x877a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xe01a);
        EXPECT(gbc.pc(), 0x877c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x877a), 0xcb);
        EXPECT(gbc.readMem(0x877b), 0x6a);
        // CB 6A 00BF
        gbc.setState(0x6d11, 0x7003, 0x2540, 0x8bf7, 0xe484, 0x50c7, 0x1, 0x0);
        gbc.writeMem(0x6d11, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x7003);
        EXPECT(gbc.pc(), 0x6d13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 00C0
        gbc.setState(0xb763, 0x7496, 0x1ff0, 0x91f8, 0xa7b8, 0x59c0, 0x0, 0x0);
        gbc.writeMem(0xb763, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x7496);
        EXPECT(gbc.pc(), 0xb765);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb763), 0xcb);
        EXPECT(gbc.readMem(0xb764), 0x6a);
        // CB 6A 00C1
        gbc.setState(0x5e6, 0xd9e9, 0x52f0, 0x39b, 0xb1c1, 0x46ca, 0x0, 0x1);
        gbc.writeMem(0x5e6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xd9e9);
        EXPECT(gbc.pc(), 0x5e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00C2
        gbc.setState(0xb90d, 0xccfd, 0xc1e0, 0xb1b, 0x92fa, 0x7346, 0x0, 0x1);
        gbc.writeMem(0xb90d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xccfd);
        EXPECT(gbc.pc(), 0xb90f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb90d), 0xcb);
        EXPECT(gbc.readMem(0xb90e), 0x6a);
        // CB 6A 00C3
        gbc.setState(0x4aea, 0xeac6, 0x41c0, 0xa2e5, 0x3911, 0xff7f, 0x1, 0x1);
        gbc.writeMem(0x4aea, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xeac6);
        EXPECT(gbc.pc(), 0x4aec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 00C4
        gbc.setState(0x9e42, 0xdc75, 0x7a10, 0xe8ae, 0xdb9b, 0x2697, 0x0, 0x0);
        gbc.writeMem(0x9e42, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xdc75);
        EXPECT(gbc.pc(), 0x9e44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e42), 0xcb);
        EXPECT(gbc.readMem(0x9e43), 0x6a);
        // CB 6A 00C5
        gbc.setState(0x6e62, 0xceae, 0xcec0, 0x1b06, 0x950e, 0xfed0, 0x1, 0x1);
        gbc.writeMem(0x6e62, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xceae);
        EXPECT(gbc.pc(), 0x6e64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 00C6
        gbc.setState(0xc445, 0x9073, 0xd90, 0x13ca, 0x94e6, 0x3e94, 0x1, 0x1);
        gbc.writeMem(0xc445, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x9073);
        EXPECT(gbc.pc(), 0xc447);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc445), 0xcb);
        EXPECT(gbc.readMem(0xc446), 0x6a);
        // CB 6A 00C7
        gbc.setState(0x82d3, 0x91c3, 0x6160, 0x9867, 0x4cd0, 0x3254, 0x1, 0x1);
        gbc.writeMem(0x82d3, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x91c3);
        EXPECT(gbc.pc(), 0x82d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82d3), 0xcb);
        EXPECT(gbc.readMem(0x82d4), 0x6a);
        // CB 6A 00C8
        gbc.setState(0x3fbf, 0x990e, 0x7f70, 0x6999, 0xf4ce, 0xeac8, 0x1, 0x1);
        gbc.writeMem(0x3fbf, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x990e);
        EXPECT(gbc.pc(), 0x3fc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00C9
        gbc.setState(0x5336, 0xb3b0, 0xf790, 0xa39c, 0x1189, 0xf070, 0x0, 0x1);
        gbc.writeMem(0x5336, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xb3b0);
        EXPECT(gbc.pc(), 0x5338);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00CA
        gbc.setState(0x9e9d, 0x70ad, 0x2320, 0xd76a, 0xb2c8, 0xb220, 0x0, 0x0);
        gbc.writeMem(0x9e9d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x70ad);
        EXPECT(gbc.pc(), 0x9e9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e9d), 0xcb);
        EXPECT(gbc.readMem(0x9e9e), 0x6a);
        // CB 6A 00CB
        gbc.setState(0x8f3e, 0xd602, 0xcde0, 0x6800, 0x25fa, 0xa140, 0x1, 0x1);
        gbc.writeMem(0x8f3e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xd602);
        EXPECT(gbc.pc(), 0x8f40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f3e), 0xcb);
        EXPECT(gbc.readMem(0x8f3f), 0x6a);
        // CB 6A 00CC
        gbc.setState(0x5c7b, 0x5fa1, 0xa930, 0x50dd, 0xc302, 0xc4dc, 0x1, 0x0);
        gbc.writeMem(0x5c7b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x5fa1);
        EXPECT(gbc.pc(), 0x5c7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00CD
        gbc.setState(0xd310, 0xe392, 0xc9e0, 0xaded, 0xde3f, 0x565d, 0x1, 0x1);
        gbc.writeMem(0xd310, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xe392);
        EXPECT(gbc.pc(), 0xd312);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd310), 0xcb);
        EXPECT(gbc.readMem(0xd311), 0x6a);
        // CB 6A 00CE
        gbc.setState(0x71dc, 0x9186, 0x25d0, 0xa32c, 0x832c, 0x12ea, 0x0, 0x1);
        gbc.writeMem(0x71dc, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x9186);
        EXPECT(gbc.pc(), 0x71de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00D0
        gbc.setState(0x894f, 0x7b4b, 0x8ce0, 0xb6, 0x2f84, 0x2da3, 0x0, 0x0);
        gbc.writeMem(0x894f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x7b4b);
        EXPECT(gbc.pc(), 0x8951);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x894f), 0xcb);
        EXPECT(gbc.readMem(0x8950), 0x6a);
        // CB 6A 00D1
        gbc.setState(0x1526, 0x16da, 0x6670, 0xad7d, 0xa470, 0xe4cd, 0x0, 0x1);
        gbc.writeMem(0x1526, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x16da);
        EXPECT(gbc.pc(), 0x1528);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00D2
        gbc.setState(0x1b61, 0x388a, 0x1590, 0x3110, 0x151b, 0x1e96, 0x1, 0x0);
        gbc.writeMem(0x1b61, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x388a);
        EXPECT(gbc.pc(), 0x1b63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00D3
        gbc.setState(0x790b, 0xd910, 0x1d60, 0xf34c, 0xe991, 0x74c, 0x0, 0x1);
        gbc.writeMem(0x790b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd910);
        EXPECT(gbc.pc(), 0x790d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 00D4
        gbc.setState(0x477b, 0xa08a, 0x880, 0x3fc2, 0x1ee4, 0x438d, 0x1, 0x1);
        gbc.writeMem(0x477b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa08a);
        EXPECT(gbc.pc(), 0x477d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 00D5
        gbc.setState(0x1e2c, 0x2e61, 0x27c0, 0xee5b, 0xda6d, 0x3397, 0x0, 0x0);
        gbc.writeMem(0x1e2c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x2e61);
        EXPECT(gbc.pc(), 0x1e2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 00D6
        gbc.setState(0xcc50, 0xdc7, 0x1ef0, 0x2a4e, 0xc8e3, 0xcef8, 0x0, 0x1);
        gbc.writeMem(0xcc50, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xdc7);
        EXPECT(gbc.pc(), 0xcc52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc50), 0xcb);
        EXPECT(gbc.readMem(0xcc51), 0x6a);
        // CB 6A 00D7
        gbc.setState(0xa538, 0x8e00, 0xe3c0, 0x8a26, 0x73cd, 0xa005, 0x1, 0x0);
        gbc.writeMem(0xa538, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x8e00);
        EXPECT(gbc.pc(), 0xa53a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa538), 0xcb);
        EXPECT(gbc.readMem(0xa539), 0x6a);
        // CB 6A 00D8
        gbc.setState(0xbc77, 0x2c37, 0x5ae0, 0xbb0a, 0x1951, 0xb3b5, 0x1, 0x0);
        gbc.writeMem(0xbc77, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x2c37);
        EXPECT(gbc.pc(), 0xbc79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc77), 0xcb);
        EXPECT(gbc.readMem(0xbc78), 0x6a);
        // CB 6A 00D9
        gbc.setState(0x8e3a, 0xda77, 0xbd40, 0x59f, 0xf9e5, 0x5bc7, 0x1, 0x0);
        gbc.writeMem(0x8e3a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xda77);
        EXPECT(gbc.pc(), 0x8e3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e3a), 0xcb);
        EXPECT(gbc.readMem(0x8e3b), 0x6a);
        // CB 6A 00DA
        gbc.setState(0x1def, 0x12f1, 0xaf50, 0xc305, 0x4a54, 0x5882, 0x0, 0x0);
        gbc.writeMem(0x1def, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x12f1);
        EXPECT(gbc.pc(), 0x1df1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00DC
        gbc.setState(0x7d21, 0x842c, 0x8ee0, 0x1808, 0x2e46, 0x8d6b, 0x1, 0x1);
        gbc.writeMem(0x7d21, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x842c);
        EXPECT(gbc.pc(), 0x7d23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 00DD
        gbc.setState(0x1ebb, 0x782c, 0x7780, 0x48b7, 0xfba7, 0x1c83, 0x0, 0x0);
        gbc.writeMem(0x1ebb, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x782c);
        EXPECT(gbc.pc(), 0x1ebd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 00DE
        gbc.setState(0xd520, 0x9034, 0x67d0, 0x3d7b, 0x7819, 0x5e6a, 0x0, 0x0);
        gbc.writeMem(0xd520, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x9034);
        EXPECT(gbc.pc(), 0xd522);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd520), 0xcb);
        EXPECT(gbc.readMem(0xd521), 0x6a);
        // CB 6A 00DF
        gbc.setState(0x5648, 0x7128, 0x8ab0, 0x579d, 0x646b, 0x7522, 0x1, 0x0);
        gbc.writeMem(0x5648, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x7128);
        EXPECT(gbc.pc(), 0x564a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00E0
        gbc.setState(0x3aaf, 0xe41b, 0x94f0, 0xda85, 0x5e56, 0xc799, 0x0, 0x1);
        gbc.writeMem(0x3aaf, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xe41b);
        EXPECT(gbc.pc(), 0x3ab1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00E1
        gbc.setState(0x5a20, 0x40fa, 0x8710, 0x4c72, 0xd958, 0x1f99, 0x0, 0x0);
        gbc.writeMem(0x5a20, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x40fa);
        EXPECT(gbc.pc(), 0x5a22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00E2
        gbc.setState(0x74c7, 0xc3de, 0x7ef0, 0x5914, 0xbf93, 0xea7c, 0x1, 0x1);
        gbc.writeMem(0x74c7, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xc3de);
        EXPECT(gbc.pc(), 0x74c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00E3
        gbc.setState(0x4b0b, 0x4379, 0x980, 0xb4fd, 0xa776, 0x7f43, 0x1, 0x1);
        gbc.writeMem(0x4b0b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x4379);
        EXPECT(gbc.pc(), 0x4b0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 00E4
        gbc.setState(0xb845, 0xd875, 0x4ed0, 0xa126, 0xdec0, 0x99cd, 0x1, 0x0);
        gbc.writeMem(0xb845, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xd875);
        EXPECT(gbc.pc(), 0xb847);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb845), 0xcb);
        EXPECT(gbc.readMem(0xb846), 0x6a);
        // CB 6A 00E5
        gbc.setState(0x299c, 0x895c, 0x8750, 0xb8fc, 0x6c22, 0x2eb9, 0x1, 0x0);
        gbc.writeMem(0x299c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x895c);
        EXPECT(gbc.pc(), 0x299e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00E6
        gbc.setState(0x50dc, 0xe5ea, 0x9a10, 0x5dba, 0x84a5, 0x86ea, 0x0, 0x1);
        gbc.writeMem(0x50dc, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xe5ea);
        EXPECT(gbc.pc(), 0x50de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00E7
        gbc.setState(0x230a, 0x44b2, 0x34c0, 0x8c79, 0xd354, 0x92bd, 0x0, 0x1);
        gbc.writeMem(0x230a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x44b2);
        EXPECT(gbc.pc(), 0x230c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 00E8
        gbc.setState(0x32be, 0x9612, 0xfb50, 0xdcc2, 0x3c87, 0xce96, 0x1, 0x1);
        gbc.writeMem(0x32be, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x9612);
        EXPECT(gbc.pc(), 0x32c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00E9
        gbc.setState(0xa6bd, 0x866d, 0x13a0, 0xe32a, 0x5978, 0x5d21, 0x1, 0x0);
        gbc.writeMem(0xa6bd, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x866d);
        EXPECT(gbc.pc(), 0xa6bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6bd), 0xcb);
        EXPECT(gbc.readMem(0xa6be), 0x6a);
        // CB 6A 00EA
        gbc.setState(0x9e36, 0x2c28, 0x21f0, 0x9efe, 0x65eb, 0xbf1d, 0x0, 0x1);
        gbc.writeMem(0x9e36, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2c28);
        EXPECT(gbc.pc(), 0x9e38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e36), 0xcb);
        EXPECT(gbc.readMem(0x9e37), 0x6a);
        // CB 6A 00EB
        gbc.setState(0x89f0, 0x3d3d, 0x8ef0, 0xa114, 0x32ab, 0x77fd, 0x1, 0x1);
        gbc.writeMem(0x89f0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x3d3d);
        EXPECT(gbc.pc(), 0x89f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89f0), 0xcb);
        EXPECT(gbc.readMem(0x89f1), 0x6a);
        // CB 6A 00EC
        gbc.setState(0x7adb, 0xcc5b, 0xf170, 0xe382, 0x946, 0xeb79, 0x0, 0x1);
        gbc.writeMem(0x7adb, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xcc5b);
        EXPECT(gbc.pc(), 0x7add);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00ED
        gbc.setState(0xafd3, 0xc9a6, 0xcba0, 0x78a2, 0xb7e3, 0x2399, 0x0, 0x0);
        gbc.writeMem(0xafd3, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xc9a6);
        EXPECT(gbc.pc(), 0xafd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafd3), 0xcb);
        EXPECT(gbc.readMem(0xafd4), 0x6a);
        // CB 6A 00EE
        gbc.setState(0x5657, 0xdf1a, 0x300, 0x97, 0x2b0b, 0xd823, 0x0, 0x1);
        gbc.writeMem(0x5657, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xdf1a);
        EXPECT(gbc.pc(), 0x5659);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 00EF
        gbc.setState(0xdbd3, 0x4581, 0x1850, 0xdcba, 0xe60, 0x7f80, 0x1, 0x1);
        gbc.writeMem(0xdbd3, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x4581);
        EXPECT(gbc.pc(), 0xdbd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbd3), 0xcb);
        EXPECT(gbc.readMem(0xdbd4), 0x6a);
        // CB 6A 00F0
        gbc.setState(0xc237, 0x8dcc, 0x28c0, 0x1d09, 0xa136, 0xd973, 0x1, 0x1);
        gbc.writeMem(0xc237, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x8dcc);
        EXPECT(gbc.pc(), 0xc239);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc237), 0xcb);
        EXPECT(gbc.readMem(0xc238), 0x6a);
        // CB 6A 00F1
        gbc.setState(0x8afc, 0x6365, 0x10d0, 0xaee2, 0xb999, 0x1b72, 0x1, 0x0);
        gbc.writeMem(0x8afc, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x6365);
        EXPECT(gbc.pc(), 0x8afe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8afc), 0xcb);
        EXPECT(gbc.readMem(0x8afd), 0x6a);
        // CB 6A 00F2
        gbc.setState(0xb37e, 0x8861, 0xf910, 0xb584, 0xf77c, 0x3411, 0x1, 0x0);
        gbc.writeMem(0xb37e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x8861);
        EXPECT(gbc.pc(), 0xb380);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb37e), 0xcb);
        EXPECT(gbc.readMem(0xb37f), 0x6a);
        // CB 6A 00F3
        gbc.setState(0x9112, 0xd1bf, 0x2670, 0x4afc, 0xab2f, 0xbe1c, 0x1, 0x0);
        gbc.writeMem(0x9112, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xd1bf);
        EXPECT(gbc.pc(), 0x9114);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9112), 0xcb);
        EXPECT(gbc.readMem(0x9113), 0x6a);
        // CB 6A 00F4
        gbc.setState(0x9c2d, 0xc3d8, 0xf7c0, 0xc7db, 0x4995, 0xfbbf, 0x0, 0x1);
        gbc.writeMem(0x9c2d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xc3d8);
        EXPECT(gbc.pc(), 0x9c2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c2d), 0xcb);
        EXPECT(gbc.readMem(0x9c2e), 0x6a);
        // CB 6A 00F5
        gbc.setState(0xaef3, 0xe4c2, 0xc830, 0xf624, 0x7702, 0xaeb5, 0x1, 0x1);
        gbc.writeMem(0xaef3, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xe4c2);
        EXPECT(gbc.pc(), 0xaef5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaef3), 0xcb);
        EXPECT(gbc.readMem(0xaef4), 0x6a);
        // CB 6A 00F7
        gbc.setState(0xac, 0x99a3, 0xf9d0, 0x20a4, 0x6ce2, 0x7cc6, 0x0, 0x1);
        gbc.writeMem(0xac, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x99a3);
        EXPECT(gbc.pc(), 0xae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00F8
        gbc.setState(0x821c, 0xaff, 0xd1f0, 0x11b3, 0xf325, 0xfff7, 0x1, 0x0);
        gbc.writeMem(0x821c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xaff);
        EXPECT(gbc.pc(), 0x821e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x821c), 0xcb);
        EXPECT(gbc.readMem(0x821d), 0x6a);
        // CB 6A 00F9
        gbc.setState(0xc5b7, 0x2cac, 0x4ce0, 0xd85, 0xb490, 0x5716, 0x0, 0x1);
        gbc.writeMem(0xc5b7, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x2cac);
        EXPECT(gbc.pc(), 0xc5b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5b7), 0xcb);
        EXPECT(gbc.readMem(0xc5b8), 0x6a);
        // CB 6A 00FA
        gbc.setState(0x443e, 0x9f9, 0x13f0, 0x1fae, 0xb4b8, 0x312c, 0x1, 0x1);
        gbc.writeMem(0x443e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x9f9);
        EXPECT(gbc.pc(), 0x4440);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 00FB
        gbc.setState(0x8755, 0x4c17, 0xf800, 0xeccc, 0x9dab, 0xf842, 0x0, 0x0);
        gbc.writeMem(0x8755, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x4c17);
        EXPECT(gbc.pc(), 0x8757);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8755), 0xcb);
        EXPECT(gbc.readMem(0x8756), 0x6a);
        // CB 6A 00FC
        gbc.setState(0xc287, 0x1691, 0x4150, 0xe03d, 0xc023, 0x782d, 0x1, 0x1);
        gbc.writeMem(0xc287, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x1691);
        EXPECT(gbc.pc(), 0xc289);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc287), 0xcb);
        EXPECT(gbc.readMem(0xc288), 0x6a);
        // CB 6A 00FD
        gbc.setState(0xcf2e, 0xe80c, 0x1c50, 0xf09b, 0xfe92, 0x32a, 0x1, 0x0);
        gbc.writeMem(0xcf2e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xe80c);
        EXPECT(gbc.pc(), 0xcf30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf2e), 0xcb);
        EXPECT(gbc.readMem(0xcf2f), 0x6a);
        // CB 6A 00FE
        gbc.setState(0x96bc, 0xb4a5, 0x1fb0, 0x9f65, 0x1c58, 0x3f8f, 0x0, 0x0);
        gbc.writeMem(0x96bc, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xb4a5);
        EXPECT(gbc.pc(), 0x96be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96bc), 0xcb);
        EXPECT(gbc.readMem(0x96bd), 0x6a);
        // CB 6A 00FF
        gbc.setState(0x14af, 0x7fad, 0xef90, 0xbb0a, 0x51e5, 0x5c2b, 0x1, 0x0);
        gbc.writeMem(0x14af, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x7fad);
        EXPECT(gbc.pc(), 0x14b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0100
        gbc.setState(0xa42e, 0xed30, 0xd540, 0xf7d8, 0x155a, 0x2b47, 0x1, 0x0);
        gbc.writeMem(0xa42e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xed30);
        EXPECT(gbc.pc(), 0xa430);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa42e), 0xcb);
        EXPECT(gbc.readMem(0xa42f), 0x6a);
        // CB 6A 0101
        gbc.setState(0x89ba, 0xd537, 0xc880, 0x5e42, 0xfa1a, 0x2927, 0x1, 0x0);
        gbc.writeMem(0x89ba, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xd537);
        EXPECT(gbc.pc(), 0x89bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89ba), 0xcb);
        EXPECT(gbc.readMem(0x89bb), 0x6a);
        // CB 6A 0102
        gbc.setState(0x54a6, 0xbe73, 0x8e50, 0xb12, 0x61fc, 0x22e3, 0x1, 0x0);
        gbc.writeMem(0x54a6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xbe73);
        EXPECT(gbc.pc(), 0x54a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0103
        gbc.setState(0xb560, 0xec03, 0x7e20, 0x5bd9, 0x8279, 0xd1bc, 0x1, 0x1);
        gbc.writeMem(0xb560, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xec03);
        EXPECT(gbc.pc(), 0xb562);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb560), 0xcb);
        EXPECT(gbc.readMem(0xb561), 0x6a);
        // CB 6A 0104
        gbc.setState(0xebed, 0xc89, 0xe900, 0xa30c, 0xc180, 0x4d49, 0x0, 0x0);
        gbc.writeMem(0xebed, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xc89);
        EXPECT(gbc.pc(), 0xebef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebed), 0xcb);
        EXPECT(gbc.readMem(0xebee), 0x6a);
        // CB 6A 0105
        gbc.setState(0xcf1d, 0xddad, 0x34d0, 0x7161, 0xfcbe, 0xa008, 0x1, 0x0);
        gbc.writeMem(0xcf1d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xddad);
        EXPECT(gbc.pc(), 0xcf1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf1d), 0xcb);
        EXPECT(gbc.readMem(0xcf1e), 0x6a);
        // CB 6A 0106
        gbc.setState(0x3072, 0x99e8, 0xfb30, 0x802e, 0x64ab, 0x853, 0x1, 0x0);
        gbc.writeMem(0x3072, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x99e8);
        EXPECT(gbc.pc(), 0x3074);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0107
        gbc.setState(0xbc44, 0x6996, 0x76b0, 0xd73a, 0xefb0, 0x54b, 0x1, 0x1);
        gbc.writeMem(0xbc44, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x6996);
        EXPECT(gbc.pc(), 0xbc46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc44), 0xcb);
        EXPECT(gbc.readMem(0xbc45), 0x6a);
        // CB 6A 0108
        gbc.setState(0x5bc1, 0xdf1b, 0x7780, 0xbb6f, 0x85b2, 0x64ed, 0x0, 0x1);
        gbc.writeMem(0x5bc1, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xdf1b);
        EXPECT(gbc.pc(), 0x5bc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0109
        gbc.setState(0xcf8a, 0x107d, 0xcd20, 0xfde, 0xea26, 0xf14c, 0x1, 0x0);
        gbc.writeMem(0xcf8a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x107d);
        EXPECT(gbc.pc(), 0xcf8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf8a), 0xcb);
        EXPECT(gbc.readMem(0xcf8b), 0x6a);
        // CB 6A 010A
        gbc.setState(0xbbc0, 0xf7af, 0x3070, 0x6929, 0xa9ab, 0x77e0, 0x0, 0x1);
        gbc.writeMem(0xbbc0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xf7af);
        EXPECT(gbc.pc(), 0xbbc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbc0), 0xcb);
        EXPECT(gbc.readMem(0xbbc1), 0x6a);
        // CB 6A 010B
        gbc.setState(0xcb3d, 0xdc30, 0x2cc0, 0xbfa0, 0xd10f, 0x13a8, 0x0, 0x0);
        gbc.writeMem(0xcb3d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xdc30);
        EXPECT(gbc.pc(), 0xcb3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb3d), 0xcb);
        EXPECT(gbc.readMem(0xcb3e), 0x6a);
        // CB 6A 010C
        gbc.setState(0x88cf, 0x4ff8, 0x7330, 0x91dc, 0xb64a, 0x601b, 0x1, 0x0);
        gbc.writeMem(0x88cf, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x4ff8);
        EXPECT(gbc.pc(), 0x88d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88cf), 0xcb);
        EXPECT(gbc.readMem(0x88d0), 0x6a);
        // CB 6A 010D
        gbc.setState(0xc7ae, 0xf39c, 0xf540, 0x4f20, 0xc00d, 0x9593, 0x1, 0x0);
        gbc.writeMem(0xc7ae, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xf39c);
        EXPECT(gbc.pc(), 0xc7b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7ae), 0xcb);
        EXPECT(gbc.readMem(0xc7af), 0x6a);
        // CB 6A 010E
        gbc.setState(0x88a7, 0x48ee, 0x4310, 0x447f, 0x2766, 0x3e3, 0x0, 0x1);
        gbc.writeMem(0x88a7, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x48ee);
        EXPECT(gbc.pc(), 0x88a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88a7), 0xcb);
        EXPECT(gbc.readMem(0x88a8), 0x6a);
        // CB 6A 010F
        gbc.setState(0xc144, 0x3e53, 0xd10, 0x4079, 0x28c1, 0xb0d1, 0x0, 0x0);
        gbc.writeMem(0xc144, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x3e53);
        EXPECT(gbc.pc(), 0xc146);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc144), 0xcb);
        EXPECT(gbc.readMem(0xc145), 0x6a);
        // CB 6A 0110
        gbc.setState(0x6bfa, 0x5517, 0x22e0, 0xd58b, 0x4235, 0x5c7c, 0x1, 0x1);
        gbc.writeMem(0x6bfa, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x5517);
        EXPECT(gbc.pc(), 0x6bfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0111
        gbc.setState(0x60ae, 0x75b7, 0x7c00, 0xab04, 0xca97, 0xe17a, 0x1, 0x1);
        gbc.writeMem(0x60ae, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x75b7);
        EXPECT(gbc.pc(), 0x60b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0112
        gbc.setState(0xdcd5, 0x2170, 0x1ff0, 0x8515, 0x4308, 0xe8c0, 0x0, 0x1);
        gbc.writeMem(0xdcd5, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x2170);
        EXPECT(gbc.pc(), 0xdcd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcd5), 0xcb);
        EXPECT(gbc.readMem(0xdcd6), 0x6a);
        // CB 6A 0113
        gbc.setState(0xdaae, 0xbc96, 0xf860, 0x7647, 0xcd33, 0xecb8, 0x0, 0x1);
        gbc.writeMem(0xdaae, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xbc96);
        EXPECT(gbc.pc(), 0xdab0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaae), 0xcb);
        EXPECT(gbc.readMem(0xdaaf), 0x6a);
        // CB 6A 0114
        gbc.setState(0x48d9, 0xe558, 0xbf10, 0x7f92, 0xf5d0, 0x6d77, 0x1, 0x0);
        gbc.writeMem(0x48d9, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xe558);
        EXPECT(gbc.pc(), 0x48db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0115
        gbc.setState(0xd09c, 0x18a8, 0x4e40, 0x64df, 0x38bd, 0x385e, 0x0, 0x1);
        gbc.writeMem(0xd09c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x18a8);
        EXPECT(gbc.pc(), 0xd09e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd09c), 0xcb);
        EXPECT(gbc.readMem(0xd09d), 0x6a);
        // CB 6A 0116
        gbc.setState(0x9b46, 0xd8f, 0xf350, 0x34c7, 0xa565, 0x7c95, 0x1, 0x0);
        gbc.writeMem(0x9b46, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xd8f);
        EXPECT(gbc.pc(), 0x9b48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b46), 0xcb);
        EXPECT(gbc.readMem(0x9b47), 0x6a);
        // CB 6A 0117
        gbc.setState(0x7c80, 0x8053, 0xeb30, 0x9c34, 0xd534, 0xf824, 0x1, 0x1);
        gbc.writeMem(0x7c80, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8053);
        EXPECT(gbc.pc(), 0x7c82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0118
        gbc.setState(0x5085, 0xbd7a, 0xa310, 0x54e7, 0x1b2d, 0xbcd, 0x1, 0x1);
        gbc.writeMem(0x5085, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xbd7a);
        EXPECT(gbc.pc(), 0x5087);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0119
        gbc.setState(0x6090, 0xcc9c, 0x1be0, 0xdbbd, 0x6629, 0xd1d8, 0x1, 0x1);
        gbc.writeMem(0x6090, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xcc9c);
        EXPECT(gbc.pc(), 0x6092);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 011A
        gbc.setState(0x936a, 0xc527, 0x31c0, 0xc3b7, 0x4575, 0xdcaf, 0x1, 0x1);
        gbc.writeMem(0x936a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xc527);
        EXPECT(gbc.pc(), 0x936c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x936a), 0xcb);
        EXPECT(gbc.readMem(0x936b), 0x6a);
        // CB 6A 011B
        gbc.setState(0xe876, 0x5cef, 0x67c0, 0xece0, 0xcc7f, 0x950c, 0x1, 0x0);
        gbc.writeMem(0xe876, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x5cef);
        EXPECT(gbc.pc(), 0xe878);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe876), 0xcb);
        EXPECT(gbc.readMem(0xe877), 0x6a);
        // CB 6A 011D
        gbc.setState(0x7f58, 0x90d6, 0x920, 0x8934, 0x3264, 0x2e42, 0x1, 0x0);
        gbc.writeMem(0x7f58, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x90d6);
        EXPECT(gbc.pc(), 0x7f5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 011E
        gbc.setState(0xb966, 0x5f92, 0x3c90, 0x675e, 0x644e, 0x4dcf, 0x1, 0x0);
        gbc.writeMem(0xb966, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x5f92);
        EXPECT(gbc.pc(), 0xb968);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb966), 0xcb);
        EXPECT(gbc.readMem(0xb967), 0x6a);
        // CB 6A 011F
        gbc.setState(0xe50f, 0x6194, 0xeca0, 0x349, 0xf52d, 0xdb44, 0x1, 0x0);
        gbc.writeMem(0xe50f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x6194);
        EXPECT(gbc.pc(), 0xe511);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe50f), 0xcb);
        EXPECT(gbc.readMem(0xe510), 0x6a);
        // CB 6A 0120
        gbc.setState(0x4ebd, 0x9eea, 0x4a10, 0x5105, 0x8a7f, 0x2541, 0x0, 0x1);
        gbc.writeMem(0x4ebd, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x9eea);
        EXPECT(gbc.pc(), 0x4ebf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0121
        gbc.setState(0x681, 0xd2e6, 0x58b0, 0x3627, 0xeacc, 0xe625, 0x0, 0x0);
        gbc.writeMem(0x681, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xd2e6);
        EXPECT(gbc.pc(), 0x683);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0123
        gbc.setState(0x7675, 0xeeee, 0xc910, 0x6e17, 0xc483, 0x42cd, 0x1, 0x1);
        gbc.writeMem(0x7675, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xeeee);
        EXPECT(gbc.pc(), 0x7677);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0124
        gbc.setState(0xd58c, 0xd657, 0x22d0, 0xac70, 0x135, 0xc901, 0x1, 0x1);
        gbc.writeMem(0xd58c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xd657);
        EXPECT(gbc.pc(), 0xd58e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd58c), 0xcb);
        EXPECT(gbc.readMem(0xd58d), 0x6a);
        // CB 6A 0125
        gbc.setState(0x5b78, 0xae6e, 0x68a0, 0x1c00, 0xea55, 0x385c, 0x0, 0x0);
        gbc.writeMem(0x5b78, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xae6e);
        EXPECT(gbc.pc(), 0x5b7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0126
        gbc.setState(0xe6e2, 0x2333, 0x95d0, 0xa64e, 0xf941, 0xf36e, 0x1, 0x1);
        gbc.writeMem(0xe6e2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x2333);
        EXPECT(gbc.pc(), 0xe6e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6e2), 0xcb);
        EXPECT(gbc.readMem(0xe6e3), 0x6a);
        // CB 6A 0129
        gbc.setState(0x117b, 0xa599, 0x7ab0, 0x8e1d, 0x2fe3, 0x3b80, 0x1, 0x0);
        gbc.writeMem(0x117b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xa599);
        EXPECT(gbc.pc(), 0x117d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 012A
        gbc.setState(0x3d0b, 0x29eb, 0x5360, 0xd922, 0x7c5b, 0xdd6f, 0x0, 0x0);
        gbc.writeMem(0x3d0b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x29eb);
        EXPECT(gbc.pc(), 0x3d0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 012B
        gbc.setState(0x6fdb, 0x6590, 0x27e0, 0x985c, 0xdad, 0xf6d7, 0x0, 0x0);
        gbc.writeMem(0x6fdb, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x6590);
        EXPECT(gbc.pc(), 0x6fdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 012C
        gbc.setState(0xa472, 0xfbc, 0x2eb0, 0x2011, 0xc2f1, 0x6f91, 0x0, 0x1);
        gbc.writeMem(0xa472, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xfbc);
        EXPECT(gbc.pc(), 0xa474);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa472), 0xcb);
        EXPECT(gbc.readMem(0xa473), 0x6a);
        // CB 6A 012D
        gbc.setState(0x2954, 0xdc06, 0xf790, 0x4ea8, 0x7819, 0x2833, 0x0, 0x0);
        gbc.writeMem(0x2954, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xdc06);
        EXPECT(gbc.pc(), 0x2956);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 012E
        gbc.setState(0xa749, 0xd03f, 0xee40, 0xcdbe, 0xe441, 0x4cca, 0x0, 0x1);
        gbc.writeMem(0xa749, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xd03f);
        EXPECT(gbc.pc(), 0xa74b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa749), 0xcb);
        EXPECT(gbc.readMem(0xa74a), 0x6a);
        // CB 6A 012F
        gbc.setState(0x922, 0x2bc6, 0xabb0, 0xda1b, 0x8c5d, 0x3fc4, 0x1, 0x1);
        gbc.writeMem(0x922, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x2bc6);
        EXPECT(gbc.pc(), 0x924);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0130
        gbc.setState(0x5f8e, 0x3ff0, 0x1520, 0x4805, 0x529b, 0x8899, 0x0, 0x0);
        gbc.writeMem(0x5f8e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x3ff0);
        EXPECT(gbc.pc(), 0x5f90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0131
        gbc.setState(0x225e, 0xbcd, 0x8910, 0x1de4, 0x7056, 0x36f1, 0x0, 0x0);
        gbc.writeMem(0x225e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xbcd);
        EXPECT(gbc.pc(), 0x2260);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0132
        gbc.setState(0x6f8e, 0x2170, 0x19d0, 0xbe92, 0x517d, 0xda7e, 0x0, 0x1);
        gbc.writeMem(0x6f8e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x2170);
        EXPECT(gbc.pc(), 0x6f90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0133
        gbc.setState(0xb288, 0xac63, 0x25a0, 0x443f, 0x79bd, 0xa0f6, 0x0, 0x1);
        gbc.writeMem(0xb288, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xac63);
        EXPECT(gbc.pc(), 0xb28a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb288), 0xcb);
        EXPECT(gbc.readMem(0xb289), 0x6a);
        // CB 6A 0134
        gbc.setState(0x3659, 0x720d, 0x2d0, 0xe753, 0x9f80, 0x3e4f, 0x0, 0x1);
        gbc.writeMem(0x3659, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x720d);
        EXPECT(gbc.pc(), 0x365b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0135
        gbc.setState(0x7025, 0x4ba6, 0xc400, 0xd54, 0x43d5, 0x39c6, 0x0, 0x0);
        gbc.writeMem(0x7025, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x4ba6);
        EXPECT(gbc.pc(), 0x7027);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0136
        gbc.setState(0xdb2f, 0xb417, 0x37e0, 0x5406, 0xef62, 0x8f61, 0x0, 0x0);
        gbc.writeMem(0xdb2f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xb417);
        EXPECT(gbc.pc(), 0xdb31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb2f), 0xcb);
        EXPECT(gbc.readMem(0xdb30), 0x6a);
        // CB 6A 0137
        gbc.setState(0x5a6f, 0x7dd3, 0x18f0, 0x2453, 0xe1f3, 0x1a42, 0x0, 0x1);
        gbc.writeMem(0x5a6f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x7dd3);
        EXPECT(gbc.pc(), 0x5a71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0138
        gbc.setState(0x7fdb, 0x5c0d, 0x2550, 0xc403, 0x318e, 0xd96f, 0x0, 0x0);
        gbc.writeMem(0x7fdb, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x5c0d);
        EXPECT(gbc.pc(), 0x7fdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0139
        gbc.setState(0x1000, 0x49a0, 0x1390, 0x8b0c, 0xa2af, 0x120a, 0x1, 0x1);
        gbc.writeMem(0x1000, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x49a0);
        EXPECT(gbc.pc(), 0x1002);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 013A
        gbc.setState(0xeb58, 0x15b2, 0x5320, 0x940d, 0xb0cd, 0xf631, 0x1, 0x0);
        gbc.writeMem(0xeb58, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x15b2);
        EXPECT(gbc.pc(), 0xeb5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb58), 0xcb);
        EXPECT(gbc.readMem(0xeb59), 0x6a);
        // CB 6A 013B
        gbc.setState(0x3b8d, 0xe027, 0x9860, 0x97cb, 0xd917, 0xcd47, 0x0, 0x1);
        gbc.writeMem(0x3b8d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xe027);
        EXPECT(gbc.pc(), 0x3b8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 013C
        gbc.setState(0xa153, 0x6440, 0x2680, 0x1936, 0x51f5, 0xd8a4, 0x0, 0x0);
        gbc.writeMem(0xa153, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x6440);
        EXPECT(gbc.pc(), 0xa155);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa153), 0xcb);
        EXPECT(gbc.readMem(0xa154), 0x6a);
        // CB 6A 013D
        gbc.setState(0x30a4, 0xc4d0, 0xbf10, 0x9d9e, 0x7849, 0x2126, 0x0, 0x0);
        gbc.writeMem(0x30a4, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xc4d0);
        EXPECT(gbc.pc(), 0x30a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 013E
        gbc.setState(0xcf10, 0x5eb6, 0xb9e0, 0x7489, 0x620c, 0x1e2b, 0x1, 0x1);
        gbc.writeMem(0xcf10, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x5eb6);
        EXPECT(gbc.pc(), 0xcf12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf10), 0xcb);
        EXPECT(gbc.readMem(0xcf11), 0x6a);
        // CB 6A 013F
        gbc.setState(0x5a70, 0x5b2b, 0xe5e0, 0xcf84, 0xb417, 0xe8ce, 0x1, 0x0);
        gbc.writeMem(0x5a70, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x5b2b);
        EXPECT(gbc.pc(), 0x5a72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0140
        gbc.setState(0x2652, 0x8702, 0x1470, 0xaf24, 0xd966, 0xc7c6, 0x1, 0x0);
        gbc.writeMem(0x2652, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x8702);
        EXPECT(gbc.pc(), 0x2654);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0141
        gbc.setState(0x3f9c, 0x3ee7, 0x7e0, 0x77a7, 0x9e47, 0x5606, 0x1, 0x1);
        gbc.writeMem(0x3f9c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x3ee7);
        EXPECT(gbc.pc(), 0x3f9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0142
        gbc.setState(0xbc1, 0xf848, 0xaf70, 0x892, 0xa118, 0x2523, 0x1, 0x1);
        gbc.writeMem(0xbc1, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xf848);
        EXPECT(gbc.pc(), 0xbc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0143
        gbc.setState(0x36f, 0xf833, 0xc270, 0xcaf4, 0x3168, 0x99f, 0x1, 0x0);
        gbc.writeMem(0x36f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xf833);
        EXPECT(gbc.pc(), 0x371);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0144
        gbc.setState(0xc5f7, 0xbb70, 0x7880, 0x5bf7, 0x6fb1, 0xaa2f, 0x1, 0x0);
        gbc.writeMem(0xc5f7, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xbb70);
        EXPECT(gbc.pc(), 0xc5f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5f7), 0xcb);
        EXPECT(gbc.readMem(0xc5f8), 0x6a);
        // CB 6A 0145
        gbc.setState(0x3c85, 0x1494, 0x660, 0x5bd7, 0x801d, 0xff04, 0x1, 0x1);
        gbc.writeMem(0x3c85, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x1494);
        EXPECT(gbc.pc(), 0x3c87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0146
        gbc.setState(0x5831, 0x45d8, 0x86f0, 0xecc3, 0xa30b, 0x90c2, 0x0, 0x0);
        gbc.writeMem(0x5831, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x45d8);
        EXPECT(gbc.pc(), 0x5833);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0147
        gbc.setState(0xd399, 0xa11c, 0x5ed0, 0xab59, 0x73b4, 0x12f5, 0x0, 0x0);
        gbc.writeMem(0xd399, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xa11c);
        EXPECT(gbc.pc(), 0xd39b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd399), 0xcb);
        EXPECT(gbc.readMem(0xd39a), 0x6a);
        // CB 6A 0149
        gbc.setState(0xe509, 0x725, 0xe140, 0x6962, 0x16d6, 0x459d, 0x0, 0x0);
        gbc.writeMem(0xe509, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x725);
        EXPECT(gbc.pc(), 0xe50b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe509), 0xcb);
        EXPECT(gbc.readMem(0xe50a), 0x6a);
        // CB 6A 014A
        gbc.setState(0x2d79, 0xaaa1, 0x4370, 0x8675, 0xac17, 0xf14, 0x0, 0x0);
        gbc.writeMem(0x2d79, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xaaa1);
        EXPECT(gbc.pc(), 0x2d7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 014B
        gbc.setState(0xc39b, 0x5c81, 0x7ad0, 0xb627, 0x3db1, 0xd98c, 0x1, 0x1);
        gbc.writeMem(0xc39b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5c81);
        EXPECT(gbc.pc(), 0xc39d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc39b), 0xcb);
        EXPECT(gbc.readMem(0xc39c), 0x6a);
        // CB 6A 014C
        gbc.setState(0x674a, 0x5d9d, 0xb5c0, 0x271f, 0x352f, 0x9efe, 0x1, 0x1);
        gbc.writeMem(0x674a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x5d9d);
        EXPECT(gbc.pc(), 0x674c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 014D
        gbc.setState(0x16a4, 0x1b79, 0x7bb0, 0xb14, 0x882d, 0x91be, 0x0, 0x1);
        gbc.writeMem(0x16a4, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x1b79);
        EXPECT(gbc.pc(), 0x16a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 014E
        gbc.setState(0x2bcc, 0xaf92, 0x470, 0x5e92, 0x7e87, 0x436b, 0x0, 0x0);
        gbc.writeMem(0x2bcc, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xaf92);
        EXPECT(gbc.pc(), 0x2bce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 014F
        gbc.setState(0x3dc7, 0xc136, 0xc810, 0x7f84, 0xf182, 0x677a, 0x0, 0x1);
        gbc.writeMem(0x3dc7, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc136);
        EXPECT(gbc.pc(), 0x3dc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0150
        gbc.setState(0x5a84, 0xd4db, 0xc9c0, 0x960c, 0x10c6, 0xbdfc, 0x1, 0x1);
        gbc.writeMem(0x5a84, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xd4db);
        EXPECT(gbc.pc(), 0x5a86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0151
        gbc.setState(0xe8b0, 0x1d51, 0x9ec0, 0x63f7, 0xe04b, 0xd3cb, 0x0, 0x1);
        gbc.writeMem(0xe8b0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1d51);
        EXPECT(gbc.pc(), 0xe8b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8b0), 0xcb);
        EXPECT(gbc.readMem(0xe8b1), 0x6a);
        // CB 6A 0152
        gbc.setState(0xae2c, 0x2f1, 0x9f10, 0x5700, 0xfadb, 0x36e4, 0x1, 0x1);
        gbc.writeMem(0xae2c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x2f1);
        EXPECT(gbc.pc(), 0xae2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae2c), 0xcb);
        EXPECT(gbc.readMem(0xae2d), 0x6a);
        // CB 6A 0153
        gbc.setState(0x1279, 0xb691, 0x18c0, 0xe114, 0x3cc2, 0xa2b7, 0x1, 0x0);
        gbc.writeMem(0x1279, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xb691);
        EXPECT(gbc.pc(), 0x127b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0154
        gbc.setState(0x48e6, 0x60c6, 0x3a60, 0x87f7, 0xa328, 0xaf75, 0x1, 0x0);
        gbc.writeMem(0x48e6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x60c6);
        EXPECT(gbc.pc(), 0x48e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0155
        gbc.setState(0xeb3f, 0x8df1, 0xad90, 0x2d52, 0xb168, 0x8918, 0x1, 0x0);
        gbc.writeMem(0xeb3f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x8df1);
        EXPECT(gbc.pc(), 0xeb41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb3f), 0xcb);
        EXPECT(gbc.readMem(0xeb40), 0x6a);
        // CB 6A 0156
        gbc.setState(0x6aa, 0x24dd, 0x62b0, 0xc15b, 0x249e, 0xfb22, 0x0, 0x0);
        gbc.writeMem(0x6aa, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x24dd);
        EXPECT(gbc.pc(), 0x6ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0157
        gbc.setState(0x153, 0x363b, 0x2190, 0xe59c, 0x6a53, 0x5da7, 0x0, 0x0);
        gbc.writeMem(0x153, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x363b);
        EXPECT(gbc.pc(), 0x155);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0158
        gbc.setState(0x98e2, 0xee06, 0x7350, 0x732b, 0x2ee5, 0xeeca, 0x1, 0x0);
        gbc.writeMem(0x98e2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xee06);
        EXPECT(gbc.pc(), 0x98e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98e2), 0xcb);
        EXPECT(gbc.readMem(0x98e3), 0x6a);
        // CB 6A 0159
        gbc.setState(0x3543, 0x1486, 0xedb0, 0xe8c3, 0x6ffb, 0x1d98, 0x1, 0x1);
        gbc.writeMem(0x3543, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x1486);
        EXPECT(gbc.pc(), 0x3545);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 015B
        gbc.setState(0x1988, 0xc648, 0x49e0, 0x8bc6, 0xb1d5, 0xb768, 0x1, 0x1);
        gbc.writeMem(0x1988, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xc648);
        EXPECT(gbc.pc(), 0x198a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 015C
        gbc.setState(0xeccc, 0x5c4a, 0x7d60, 0x3f51, 0x5c57, 0x766b, 0x0, 0x1);
        gbc.writeMem(0xeccc, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x5c4a);
        EXPECT(gbc.pc(), 0xecce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeccc), 0xcb);
        EXPECT(gbc.readMem(0xeccd), 0x6a);
        // CB 6A 015D
        gbc.setState(0x5e63, 0x228f, 0xce90, 0xe636, 0x9e8a, 0xfdd9, 0x1, 0x1);
        gbc.writeMem(0x5e63, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x228f);
        EXPECT(gbc.pc(), 0x5e65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 015E
        gbc.setState(0x9b19, 0xfe06, 0x1b40, 0x6120, 0xfd47, 0x622d, 0x1, 0x0);
        gbc.writeMem(0x9b19, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xfe06);
        EXPECT(gbc.pc(), 0x9b1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b19), 0xcb);
        EXPECT(gbc.readMem(0x9b1a), 0x6a);
        // CB 6A 015F
        gbc.setState(0xaee7, 0x6012, 0xc6b0, 0x8338, 0xa614, 0x4755, 0x0, 0x0);
        gbc.writeMem(0xaee7, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x6012);
        EXPECT(gbc.pc(), 0xaee9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaee7), 0xcb);
        EXPECT(gbc.readMem(0xaee8), 0x6a);
        // CB 6A 0160
        gbc.setState(0x39fe, 0x95cf, 0x820, 0xcb29, 0x6ab7, 0x6283, 0x1, 0x1);
        gbc.writeMem(0x39fe, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x95cf);
        EXPECT(gbc.pc(), 0x3a00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0161
        gbc.setState(0x65a3, 0xaa20, 0xe370, 0x6cca, 0xdbf, 0x39e7, 0x1, 0x1);
        gbc.writeMem(0x65a3, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xaa20);
        EXPECT(gbc.pc(), 0x65a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0162
        gbc.setState(0x2998, 0x337f, 0x6400, 0x28a7, 0x9cf6, 0x169c, 0x0, 0x1);
        gbc.writeMem(0x2998, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x337f);
        EXPECT(gbc.pc(), 0x299a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0163
        gbc.setState(0x8c9b, 0xfa55, 0xd70, 0x564c, 0x8f01, 0xc34d, 0x1, 0x0);
        gbc.writeMem(0x8c9b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xfa55);
        EXPECT(gbc.pc(), 0x8c9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c9b), 0xcb);
        EXPECT(gbc.readMem(0x8c9c), 0x6a);
        // CB 6A 0164
        gbc.setState(0x6fd, 0x84a1, 0x9cd0, 0xc543, 0x40d4, 0x215, 0x0, 0x0);
        gbc.writeMem(0x6fd, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x84a1);
        EXPECT(gbc.pc(), 0x6ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0165
        gbc.setState(0x3ecc, 0xfd86, 0x58b0, 0xe767, 0xd398, 0x496b, 0x0, 0x0);
        gbc.writeMem(0x3ecc, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xfd86);
        EXPECT(gbc.pc(), 0x3ece);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0167
        gbc.setState(0xd661, 0x43ba, 0x9c40, 0x650c, 0xaf48, 0x4d87, 0x0, 0x1);
        gbc.writeMem(0xd661, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x43ba);
        EXPECT(gbc.pc(), 0xd663);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd661), 0xcb);
        EXPECT(gbc.readMem(0xd662), 0x6a);
        // CB 6A 0168
        gbc.setState(0xb468, 0xa260, 0x5710, 0xc62f, 0xc019, 0x197d, 0x1, 0x0);
        gbc.writeMem(0xb468, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xa260);
        EXPECT(gbc.pc(), 0xb46a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb468), 0xcb);
        EXPECT(gbc.readMem(0xb469), 0x6a);
        // CB 6A 0169
        gbc.setState(0xe375, 0x18b9, 0x6900, 0x7bdf, 0xa061, 0x93e2, 0x1, 0x1);
        gbc.writeMem(0xe375, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x18b9);
        EXPECT(gbc.pc(), 0xe377);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe375), 0xcb);
        EXPECT(gbc.readMem(0xe376), 0x6a);
        // CB 6A 016A
        gbc.setState(0xcf99, 0x2ac4, 0x4b80, 0x5b5b, 0x3a79, 0x1f6f, 0x1, 0x0);
        gbc.writeMem(0xcf99, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x2ac4);
        EXPECT(gbc.pc(), 0xcf9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf99), 0xcb);
        EXPECT(gbc.readMem(0xcf9a), 0x6a);
        // CB 6A 016B
        gbc.setState(0x5a5a, 0x5261, 0x8260, 0x6473, 0x59b2, 0x6f31, 0x0, 0x0);
        gbc.writeMem(0x5a5a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x5261);
        EXPECT(gbc.pc(), 0x5a5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 016C
        gbc.setState(0x67e0, 0xab42, 0xe0d0, 0x6eb5, 0x993b, 0xb074, 0x1, 0x0);
        gbc.writeMem(0x67e0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xab42);
        EXPECT(gbc.pc(), 0x67e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 016D
        gbc.setState(0x3cf5, 0x307b, 0xe9c0, 0xe5f9, 0xa541, 0xe9b4, 0x1, 0x0);
        gbc.writeMem(0x3cf5, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x307b);
        EXPECT(gbc.pc(), 0x3cf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 016E
        gbc.setState(0x6dc1, 0x52ba, 0x7c90, 0x9062, 0x5569, 0x6f33, 0x1, 0x0);
        gbc.writeMem(0x6dc1, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x52ba);
        EXPECT(gbc.pc(), 0x6dc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 016F
        gbc.setState(0x2813, 0x8b4c, 0xb6a0, 0x556d, 0x9739, 0x1525, 0x1, 0x0);
        gbc.writeMem(0x2813, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x8b4c);
        EXPECT(gbc.pc(), 0x2815);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0170
        gbc.setState(0xefb0, 0xfe9, 0x2510, 0xd721, 0x3368, 0x3bce, 0x0, 0x0);
        gbc.writeMem(0xefb0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xfe9);
        EXPECT(gbc.pc(), 0xefb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefb0), 0xcb);
        EXPECT(gbc.readMem(0xefb1), 0x6a);
        // CB 6A 0171
        gbc.setState(0xd6ac, 0xf151, 0xf290, 0xd5f1, 0xfdb6, 0xc7cd, 0x0, 0x1);
        gbc.writeMem(0xd6ac, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xf151);
        EXPECT(gbc.pc(), 0xd6ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6ac), 0xcb);
        EXPECT(gbc.readMem(0xd6ad), 0x6a);
        // CB 6A 0172
        gbc.setState(0xd4c5, 0xe92f, 0xfb00, 0xb0da, 0x549f, 0x28d1, 0x0, 0x1);
        gbc.writeMem(0xd4c5, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe92f);
        EXPECT(gbc.pc(), 0xd4c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4c5), 0xcb);
        EXPECT(gbc.readMem(0xd4c6), 0x6a);
        // CB 6A 0173
        gbc.setState(0x300d, 0x31d8, 0xc120, 0xb1b7, 0xf819, 0x5ae1, 0x1, 0x0);
        gbc.writeMem(0x300d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x31d8);
        EXPECT(gbc.pc(), 0x300f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0174
        gbc.setState(0x56c6, 0x7a8e, 0x50d0, 0xfcbf, 0x62d0, 0x275e, 0x0, 0x0);
        gbc.writeMem(0x56c6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x7a8e);
        EXPECT(gbc.pc(), 0x56c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0175
        gbc.setState(0x7a21, 0xca26, 0x2d70, 0x7ea0, 0xbe6, 0xad55, 0x1, 0x0);
        gbc.writeMem(0x7a21, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xca26);
        EXPECT(gbc.pc(), 0x7a23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0176
        gbc.setState(0x733b, 0x4de, 0x4cb0, 0x70d8, 0x73aa, 0xecb6, 0x1, 0x0);
        gbc.writeMem(0x733b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x4de);
        EXPECT(gbc.pc(), 0x733d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0177
        gbc.setState(0x485, 0x8523, 0x7fe0, 0x60ed, 0x45f6, 0xc70d, 0x0, 0x0);
        gbc.writeMem(0x485, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x8523);
        EXPECT(gbc.pc(), 0x487);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0178
        gbc.setState(0x49d8, 0xeb07, 0xce0, 0x88c2, 0xa83b, 0xcc19, 0x1, 0x0);
        gbc.writeMem(0x49d8, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xeb07);
        EXPECT(gbc.pc(), 0x49da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0179
        gbc.setState(0x312b, 0x4639, 0x47e0, 0xaeb5, 0xdf42, 0x6ccd, 0x0, 0x0);
        gbc.writeMem(0x312b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4639);
        EXPECT(gbc.pc(), 0x312d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 017A
        gbc.setState(0x2547, 0xb6a7, 0x9060, 0x5724, 0xeb7b, 0xf377, 0x0, 0x1);
        gbc.writeMem(0x2547, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xb6a7);
        EXPECT(gbc.pc(), 0x2549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 017B
        gbc.setState(0xabe, 0x6d55, 0xb8a0, 0x21e7, 0xbb63, 0xca7, 0x0, 0x0);
        gbc.writeMem(0xabe, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x6d55);
        EXPECT(gbc.pc(), 0xac0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 017C
        gbc.setState(0x4ca1, 0x8c56, 0x3c50, 0xad59, 0x981d, 0x455, 0x1, 0x0);
        gbc.writeMem(0x4ca1, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x8c56);
        EXPECT(gbc.pc(), 0x4ca3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 017D
        gbc.setState(0xb5ca, 0x5595, 0x1c10, 0x33d8, 0x889, 0xeef6, 0x0, 0x1);
        gbc.writeMem(0xb5ca, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x5595);
        EXPECT(gbc.pc(), 0xb5cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5ca), 0xcb);
        EXPECT(gbc.readMem(0xb5cb), 0x6a);
        // CB 6A 017E
        gbc.setState(0xdd95, 0x7f1f, 0x68b0, 0xdac9, 0x28ae, 0x8607, 0x1, 0x0);
        gbc.writeMem(0xdd95, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x7f1f);
        EXPECT(gbc.pc(), 0xdd97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd95), 0xcb);
        EXPECT(gbc.readMem(0xdd96), 0x6a);
        // CB 6A 017F
        gbc.setState(0x6ef2, 0xcf32, 0x4560, 0x47fb, 0xedb5, 0x6505, 0x0, 0x0);
        gbc.writeMem(0x6ef2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xcf32);
        EXPECT(gbc.pc(), 0x6ef4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0180
        gbc.setState(0x21f0, 0xe04f, 0x8060, 0x473, 0xa715, 0x407e, 0x0, 0x1);
        gbc.writeMem(0x21f0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xe04f);
        EXPECT(gbc.pc(), 0x21f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0181
        gbc.setState(0x37b5, 0x4a7f, 0xd760, 0xe420, 0xb047, 0x9098, 0x1, 0x1);
        gbc.writeMem(0x37b5, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x4a7f);
        EXPECT(gbc.pc(), 0x37b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0182
        gbc.setState(0xc1cc, 0xa94a, 0xde00, 0xaba5, 0x104b, 0x3ab7, 0x1, 0x1);
        gbc.writeMem(0xc1cc, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xa94a);
        EXPECT(gbc.pc(), 0xc1ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1cc), 0xcb);
        EXPECT(gbc.readMem(0xc1cd), 0x6a);
        // CB 6A 0183
        gbc.setState(0x7d6e, 0x3729, 0x8de0, 0x97cb, 0x25b2, 0xc7a5, 0x0, 0x0);
        gbc.writeMem(0x7d6e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x3729);
        EXPECT(gbc.pc(), 0x7d70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0184
        gbc.setState(0xe815, 0xdbb4, 0x73b0, 0xbaaf, 0x24e6, 0x523a, 0x0, 0x1);
        gbc.writeMem(0xe815, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xdbb4);
        EXPECT(gbc.pc(), 0xe817);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe815), 0xcb);
        EXPECT(gbc.readMem(0xe816), 0x6a);
        // CB 6A 0185
        gbc.setState(0xabf, 0x900e, 0x6880, 0x1c5e, 0x4dc6, 0xc849, 0x0, 0x1);
        gbc.writeMem(0xabf, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x900e);
        EXPECT(gbc.pc(), 0xac1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0186
        gbc.setState(0x47c, 0x96ec, 0x1e70, 0xa09b, 0x3803, 0xff3d, 0x0, 0x1);
        gbc.writeMem(0x47c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x96ec);
        EXPECT(gbc.pc(), 0x47e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0187
        gbc.setState(0x5adf, 0x8320, 0x1cf0, 0xd32f, 0x8dcd, 0x15e1, 0x1, 0x1);
        gbc.writeMem(0x5adf, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x8320);
        EXPECT(gbc.pc(), 0x5ae1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0188
        gbc.setState(0x8ef, 0x58e7, 0x8eb0, 0x655c, 0x3601, 0x592c, 0x0, 0x1);
        gbc.writeMem(0x8ef, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x58e7);
        EXPECT(gbc.pc(), 0x8f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0189
        gbc.setState(0xd21, 0xc89d, 0xca40, 0x2d46, 0xa6e1, 0xbdf0, 0x0, 0x1);
        gbc.writeMem(0xd21, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xc89d);
        EXPECT(gbc.pc(), 0xd23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 018A
        gbc.setState(0x3784, 0xea11, 0x7460, 0x20ca, 0x494c, 0xb917, 0x0, 0x1);
        gbc.writeMem(0x3784, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xea11);
        EXPECT(gbc.pc(), 0x3786);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 018B
        gbc.setState(0x25ef, 0x3f79, 0xa1f0, 0x214d, 0xb329, 0xab09, 0x0, 0x1);
        gbc.writeMem(0x25ef, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x3f79);
        EXPECT(gbc.pc(), 0x25f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 018C
        gbc.setState(0x4e1f, 0xa7b, 0xf7d0, 0x4c2b, 0x6746, 0x39d0, 0x0, 0x1);
        gbc.writeMem(0x4e1f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xa7b);
        EXPECT(gbc.pc(), 0x4e21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 018D
        gbc.setState(0x76b6, 0xf2df, 0x8df0, 0x4002, 0x48cc, 0xcc02, 0x1, 0x0);
        gbc.writeMem(0x76b6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xf2df);
        EXPECT(gbc.pc(), 0x76b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 018E
        gbc.setState(0x46a2, 0x4286, 0xd620, 0xef74, 0x85b, 0xa2db, 0x1, 0x0);
        gbc.writeMem(0x46a2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x4286);
        EXPECT(gbc.pc(), 0x46a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 018F
        gbc.setState(0xcf6d, 0xbc2f, 0x7190, 0xb0df, 0x1744, 0x29e3, 0x0, 0x1);
        gbc.writeMem(0xcf6d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xbc2f);
        EXPECT(gbc.pc(), 0xcf6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf6d), 0xcb);
        EXPECT(gbc.readMem(0xcf6e), 0x6a);
        // CB 6A 0190
        gbc.setState(0x6a3c, 0xe2b4, 0x4350, 0xcf5d, 0xd478, 0xf10c, 0x0, 0x0);
        gbc.writeMem(0x6a3c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xe2b4);
        EXPECT(gbc.pc(), 0x6a3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0191
        gbc.setState(0x7bca, 0xe4aa, 0xebc0, 0xb185, 0x3f01, 0xf540, 0x1, 0x1);
        gbc.writeMem(0x7bca, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xe4aa);
        EXPECT(gbc.pc(), 0x7bcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0192
        gbc.setState(0x60a0, 0x55ea, 0x4f40, 0x876a, 0xd44c, 0x5a5d, 0x1, 0x0);
        gbc.writeMem(0x60a0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x55ea);
        EXPECT(gbc.pc(), 0x60a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0193
        gbc.setState(0x8ac3, 0xa807, 0xcea0, 0x78c1, 0xdba4, 0x8dff, 0x1, 0x0);
        gbc.writeMem(0x8ac3, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xa807);
        EXPECT(gbc.pc(), 0x8ac5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ac3), 0xcb);
        EXPECT(gbc.readMem(0x8ac4), 0x6a);
        // CB 6A 0194
        gbc.setState(0xe27e, 0xa024, 0xfbe0, 0xbcd0, 0x436d, 0x396f, 0x1, 0x0);
        gbc.writeMem(0xe27e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xa024);
        EXPECT(gbc.pc(), 0xe280);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe27e), 0xcb);
        EXPECT(gbc.readMem(0xe27f), 0x6a);
        // CB 6A 0195
        gbc.setState(0xc45d, 0x646c, 0x6240, 0x7140, 0x88f3, 0xc724, 0x0, 0x1);
        gbc.writeMem(0xc45d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x646c);
        EXPECT(gbc.pc(), 0xc45f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc45d), 0xcb);
        EXPECT(gbc.readMem(0xc45e), 0x6a);
        // CB 6A 0196
        gbc.setState(0xed43, 0x916, 0x2b90, 0x683b, 0x45f3, 0xefd5, 0x1, 0x0);
        gbc.writeMem(0xed43, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x916);
        EXPECT(gbc.pc(), 0xed45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed43), 0xcb);
        EXPECT(gbc.readMem(0xed44), 0x6a);
        // CB 6A 0197
        gbc.setState(0x52b8, 0xa0b1, 0x5e60, 0xd977, 0x87d3, 0xb8f9, 0x0, 0x0);
        gbc.writeMem(0x52b8, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xa0b1);
        EXPECT(gbc.pc(), 0x52ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0198
        gbc.setState(0x4c36, 0x6c33, 0x1ff0, 0x2cc3, 0xd7ed, 0x596c, 0x1, 0x0);
        gbc.writeMem(0x4c36, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x6c33);
        EXPECT(gbc.pc(), 0x4c38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0199
        gbc.setState(0x2112, 0x4eb2, 0x3ef0, 0xefa9, 0xdf4a, 0xb2, 0x0, 0x1);
        gbc.writeMem(0x2112, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x4eb2);
        EXPECT(gbc.pc(), 0x2114);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 019A
        gbc.setState(0xab34, 0xbda3, 0xb690, 0xe0fb, 0xbc3b, 0x5255, 0x1, 0x1);
        gbc.writeMem(0xab34, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xbda3);
        EXPECT(gbc.pc(), 0xab36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab34), 0xcb);
        EXPECT(gbc.readMem(0xab35), 0x6a);
        // CB 6A 019B
        gbc.setState(0x3000, 0xf25a, 0x21d0, 0x3f65, 0x8ff8, 0xbc70, 0x0, 0x0);
        gbc.writeMem(0x3000, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xf25a);
        EXPECT(gbc.pc(), 0x3002);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 019C
        gbc.setState(0x3483, 0x81b0, 0x8ef0, 0x1a74, 0xa299, 0xfce6, 0x0, 0x0);
        gbc.writeMem(0x3483, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x81b0);
        EXPECT(gbc.pc(), 0x3485);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 019D
        gbc.setState(0xa5e1, 0x2238, 0x23a0, 0xad9, 0x67e5, 0xf0e1, 0x0, 0x1);
        gbc.writeMem(0xa5e1, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x2238);
        EXPECT(gbc.pc(), 0xa5e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5e1), 0xcb);
        EXPECT(gbc.readMem(0xa5e2), 0x6a);
        // CB 6A 019F
        gbc.setState(0xbf78, 0x9a00, 0x1d50, 0x704, 0xffd, 0x5373, 0x1, 0x0);
        gbc.writeMem(0xbf78, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x9a00);
        EXPECT(gbc.pc(), 0xbf7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf78), 0xcb);
        EXPECT(gbc.readMem(0xbf79), 0x6a);
        // CB 6A 01A0
        gbc.setState(0xa238, 0xe281, 0x2f40, 0xdc03, 0x1e99, 0xc7cd, 0x0, 0x0);
        gbc.writeMem(0xa238, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xe281);
        EXPECT(gbc.pc(), 0xa23a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa238), 0xcb);
        EXPECT(gbc.readMem(0xa239), 0x6a);
        // CB 6A 01A1
        gbc.setState(0x8c9, 0x8f33, 0x6fa0, 0x8eef, 0xca1, 0x1ffc, 0x0, 0x0);
        gbc.writeMem(0x8c9, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x8f33);
        EXPECT(gbc.pc(), 0x8cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01A2
        gbc.setState(0x7971, 0x1152, 0xb100, 0x2a56, 0x6073, 0x6d80, 0x0, 0x1);
        gbc.writeMem(0x7971, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x1152);
        EXPECT(gbc.pc(), 0x7973);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01A3
        gbc.setState(0x9512, 0x4ef8, 0x5530, 0x8b97, 0x7f8b, 0x69c8, 0x1, 0x0);
        gbc.writeMem(0x9512, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x4ef8);
        EXPECT(gbc.pc(), 0x9514);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9512), 0xcb);
        EXPECT(gbc.readMem(0x9513), 0x6a);
        // CB 6A 01A4
        gbc.setState(0xb81a, 0xe97f, 0x8be0, 0x105d, 0x10c, 0xc592, 0x1, 0x1);
        gbc.writeMem(0xb81a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xe97f);
        EXPECT(gbc.pc(), 0xb81c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb81a), 0xcb);
        EXPECT(gbc.readMem(0xb81b), 0x6a);
        // CB 6A 01A5
        gbc.setState(0x3434, 0x6811, 0x8370, 0x6981, 0x3708, 0xe6fe, 0x0, 0x1);
        gbc.writeMem(0x3434, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x6811);
        EXPECT(gbc.pc(), 0x3436);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01A6
        gbc.setState(0xc70b, 0x99be, 0x2ea0, 0x792f, 0x6123, 0x4cd6, 0x1, 0x1);
        gbc.writeMem(0xc70b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x99be);
        EXPECT(gbc.pc(), 0xc70d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc70b), 0xcb);
        EXPECT(gbc.readMem(0xc70c), 0x6a);
        // CB 6A 01A7
        gbc.setState(0x74e1, 0x8ccf, 0x9160, 0x1774, 0x2ba8, 0x5f59, 0x0, 0x1);
        gbc.writeMem(0x74e1, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x8ccf);
        EXPECT(gbc.pc(), 0x74e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01A8
        gbc.setState(0x7c5a, 0x76a0, 0x7850, 0x579b, 0x995c, 0x7528, 0x0, 0x0);
        gbc.writeMem(0x7c5a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x76a0);
        EXPECT(gbc.pc(), 0x7c5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01AA
        gbc.setState(0xe15d, 0xb65d, 0xbb10, 0x63eb, 0x899a, 0x86ca, 0x1, 0x0);
        gbc.writeMem(0xe15d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xb65d);
        EXPECT(gbc.pc(), 0xe15f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe15d), 0xcb);
        EXPECT(gbc.readMem(0xe15e), 0x6a);
        // CB 6A 01AB
        gbc.setState(0xa40c, 0xdee6, 0xe450, 0x338d, 0xb528, 0xe526, 0x0, 0x1);
        gbc.writeMem(0xa40c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xdee6);
        EXPECT(gbc.pc(), 0xa40e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa40c), 0xcb);
        EXPECT(gbc.readMem(0xa40d), 0x6a);
        // CB 6A 01AC
        gbc.setState(0x6148, 0x5ddf, 0x6bf0, 0xc505, 0x547, 0xbb96, 0x0, 0x1);
        gbc.writeMem(0x6148, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x5ddf);
        EXPECT(gbc.pc(), 0x614a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01AD
        gbc.setState(0xbaba, 0xf2a4, 0xe8f0, 0xb66f, 0x9c82, 0xfa4b, 0x0, 0x1);
        gbc.writeMem(0xbaba, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xf2a4);
        EXPECT(gbc.pc(), 0xbabc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaba), 0xcb);
        EXPECT(gbc.readMem(0xbabb), 0x6a);
        // CB 6A 01AE
        gbc.setState(0xad0, 0x757f, 0xbd60, 0x157a, 0xa519, 0x1ec, 0x1, 0x1);
        gbc.writeMem(0xad0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x757f);
        EXPECT(gbc.pc(), 0xad2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01B0
        gbc.setState(0xd2ce, 0x5a2, 0x18e0, 0x1f8, 0xe5a, 0x3a0, 0x1, 0x1);
        gbc.writeMem(0xd2ce, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x5a2);
        EXPECT(gbc.pc(), 0xd2d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2ce), 0xcb);
        EXPECT(gbc.readMem(0xd2cf), 0x6a);
        // CB 6A 01B1
        gbc.setState(0xb280, 0xae1e, 0xc00, 0x9038, 0xe126, 0xcbe7, 0x1, 0x1);
        gbc.writeMem(0xb280, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xae1e);
        EXPECT(gbc.pc(), 0xb282);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb280), 0xcb);
        EXPECT(gbc.readMem(0xb281), 0x6a);
        // CB 6A 01B2
        gbc.setState(0x6bb4, 0xe2f8, 0xebc0, 0xfe18, 0x285b, 0x7ece, 0x1, 0x1);
        gbc.writeMem(0x6bb4, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xe2f8);
        EXPECT(gbc.pc(), 0x6bb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01B3
        gbc.setState(0xd9fe, 0xdbff, 0xd840, 0xcebc, 0x4cd6, 0x5f1e, 0x1, 0x0);
        gbc.writeMem(0xd9fe, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xdbff);
        EXPECT(gbc.pc(), 0xda00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9fe), 0xcb);
        EXPECT(gbc.readMem(0xd9ff), 0x6a);
        // CB 6A 01B4
        gbc.setState(0xb54d, 0xdb62, 0x5be0, 0x4425, 0xf389, 0x91bc, 0x0, 0x1);
        gbc.writeMem(0xb54d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xdb62);
        EXPECT(gbc.pc(), 0xb54f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb54d), 0xcb);
        EXPECT(gbc.readMem(0xb54e), 0x6a);
        // CB 6A 01B5
        gbc.setState(0xcf34, 0x8f35, 0x2e40, 0xb443, 0x2de3, 0x5157, 0x1, 0x1);
        gbc.writeMem(0xcf34, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8f35);
        EXPECT(gbc.pc(), 0xcf36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf34), 0xcb);
        EXPECT(gbc.readMem(0xcf35), 0x6a);
        // CB 6A 01B6
        gbc.setState(0x7923, 0x41b6, 0xb800, 0x7c6, 0xace5, 0xe8d8, 0x0, 0x1);
        gbc.writeMem(0x7923, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x41b6);
        EXPECT(gbc.pc(), 0x7925);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01B7
        gbc.setState(0xe66c, 0x8b41, 0x8c50, 0xc41, 0x79a5, 0x14b9, 0x1, 0x0);
        gbc.writeMem(0xe66c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x8b41);
        EXPECT(gbc.pc(), 0xe66e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe66c), 0xcb);
        EXPECT(gbc.readMem(0xe66d), 0x6a);
        // CB 6A 01B8
        gbc.setState(0xef2e, 0x7238, 0x8a90, 0xfe49, 0xd9a6, 0xa5fe, 0x0, 0x1);
        gbc.writeMem(0xef2e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x7238);
        EXPECT(gbc.pc(), 0xef30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef2e), 0xcb);
        EXPECT(gbc.readMem(0xef2f), 0x6a);
        // CB 6A 01B9
        gbc.setState(0x8e11, 0x10ae, 0xf8c0, 0xbc5e, 0x1682, 0xadea, 0x0, 0x1);
        gbc.writeMem(0x8e11, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x10ae);
        EXPECT(gbc.pc(), 0x8e13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e11), 0xcb);
        EXPECT(gbc.readMem(0x8e12), 0x6a);
        // CB 6A 01BA
        gbc.setState(0x67dc, 0x601a, 0xd70, 0x1f56, 0x8c94, 0x786e, 0x0, 0x1);
        gbc.writeMem(0x67dc, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x601a);
        EXPECT(gbc.pc(), 0x67de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01BB
        gbc.setState(0x2587, 0x189a, 0x20c0, 0x680f, 0x16e5, 0x2b55, 0x0, 0x1);
        gbc.writeMem(0x2587, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x189a);
        EXPECT(gbc.pc(), 0x2589);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01BC
        gbc.setState(0xbf25, 0xf72e, 0xee60, 0x6160, 0xebfc, 0xbbf4, 0x0, 0x1);
        gbc.writeMem(0xbf25, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xf72e);
        EXPECT(gbc.pc(), 0xbf27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf25), 0xcb);
        EXPECT(gbc.readMem(0xbf26), 0x6a);
        // CB 6A 01BD
        gbc.setState(0x470, 0xa194, 0x48c0, 0x99e1, 0x5e10, 0xf24c, 0x0, 0x0);
        gbc.writeMem(0x470, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xa194);
        EXPECT(gbc.pc(), 0x472);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01BE
        gbc.setState(0xe112, 0xc1eb, 0x5150, 0xe036, 0xa668, 0xc506, 0x0, 0x0);
        gbc.writeMem(0xe112, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xc1eb);
        EXPECT(gbc.pc(), 0xe114);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe112), 0xcb);
        EXPECT(gbc.readMem(0xe113), 0x6a);
        // CB 6A 01BF
        gbc.setState(0xb10, 0xf2b2, 0x1000, 0x3472, 0x6335, 0x682f, 0x1, 0x0);
        gbc.writeMem(0xb10, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xf2b2);
        EXPECT(gbc.pc(), 0xb12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01C0
        gbc.setState(0xc1, 0xf06b, 0xe1c0, 0xb55c, 0x46fc, 0x7283, 0x0, 0x1);
        gbc.writeMem(0xc1, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xf06b);
        EXPECT(gbc.pc(), 0xc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01C1
        gbc.setState(0x2a84, 0xd88a, 0x2670, 0xe57e, 0xaa3b, 0xb2fd, 0x1, 0x1);
        gbc.writeMem(0x2a84, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xd88a);
        EXPECT(gbc.pc(), 0x2a86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01C2
        gbc.setState(0xc555, 0xb317, 0x980, 0x837c, 0x7bed, 0xfeb5, 0x0, 0x1);
        gbc.writeMem(0xc555, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xb317);
        EXPECT(gbc.pc(), 0xc557);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc555), 0xcb);
        EXPECT(gbc.readMem(0xc556), 0x6a);
        // CB 6A 01C3
        gbc.setState(0x6b1e, 0xd563, 0x5dd0, 0xe13, 0x7e2a, 0x262a, 0x1, 0x1);
        gbc.writeMem(0x6b1e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xd563);
        EXPECT(gbc.pc(), 0x6b20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01C5
        gbc.setState(0x7c37, 0xf1e8, 0x1830, 0x76f0, 0x107a, 0x3200, 0x0, 0x0);
        gbc.writeMem(0x7c37, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf1e8);
        EXPECT(gbc.pc(), 0x7c39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01C6
        gbc.setState(0xefac, 0xef61, 0xe2e0, 0x3ec6, 0x67c1, 0x95e9, 0x1, 0x1);
        gbc.writeMem(0xefac, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xef61);
        EXPECT(gbc.pc(), 0xefae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefac), 0xcb);
        EXPECT(gbc.readMem(0xefad), 0x6a);
        // CB 6A 01C7
        gbc.setState(0x75c0, 0x982c, 0xc740, 0x7390, 0xece3, 0xc3dc, 0x1, 0x1);
        gbc.writeMem(0x75c0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x982c);
        EXPECT(gbc.pc(), 0x75c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01C8
        gbc.setState(0x4efa, 0x6b3c, 0xc230, 0x6f90, 0x4c22, 0xa44d, 0x0, 0x1);
        gbc.writeMem(0x4efa, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x6b3c);
        EXPECT(gbc.pc(), 0x4efc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01C9
        gbc.setState(0xa816, 0xf6b9, 0xe9b0, 0xb9b8, 0xd645, 0xd103, 0x1, 0x1);
        gbc.writeMem(0xa816, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xf6b9);
        EXPECT(gbc.pc(), 0xa818);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa816), 0xcb);
        EXPECT(gbc.readMem(0xa817), 0x6a);
        // CB 6A 01CA
        gbc.setState(0xbff1, 0x67a, 0xf9d0, 0xc595, 0x4661, 0x4d12, 0x0, 0x0);
        gbc.writeMem(0xbff1, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x67a);
        EXPECT(gbc.pc(), 0xbff3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbff1), 0xcb);
        EXPECT(gbc.readMem(0xbff2), 0x6a);
        // CB 6A 01CB
        gbc.setState(0x76a9, 0xbb42, 0x3340, 0x860d, 0x61a8, 0xcce, 0x0, 0x1);
        gbc.writeMem(0x76a9, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xbb42);
        EXPECT(gbc.pc(), 0x76ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01CC
        gbc.setState(0x43ce, 0xc81, 0x8ce0, 0x701e, 0xcf31, 0xf0c3, 0x0, 0x1);
        gbc.writeMem(0x43ce, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xc81);
        EXPECT(gbc.pc(), 0x43d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01CE
        gbc.setState(0x6afe, 0x872b, 0x8960, 0xde57, 0xf611, 0x80a1, 0x1, 0x1);
        gbc.writeMem(0x6afe, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x872b);
        EXPECT(gbc.pc(), 0x6b00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01CF
        gbc.setState(0xb9a2, 0x7e29, 0x6650, 0xde36, 0x6a92, 0xe49e, 0x1, 0x0);
        gbc.writeMem(0xb9a2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x7e29);
        EXPECT(gbc.pc(), 0xb9a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9a2), 0xcb);
        EXPECT(gbc.readMem(0xb9a3), 0x6a);
        // CB 6A 01D0
        gbc.setState(0x8b7f, 0xc0f9, 0x15f0, 0xb333, 0xff9b, 0x3816, 0x0, 0x0);
        gbc.writeMem(0x8b7f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xc0f9);
        EXPECT(gbc.pc(), 0x8b81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b7f), 0xcb);
        EXPECT(gbc.readMem(0x8b80), 0x6a);
        // CB 6A 01D1
        gbc.setState(0x7a0d, 0xca19, 0x8dd0, 0x77ad, 0x17ce, 0x8c6b, 0x0, 0x1);
        gbc.writeMem(0x7a0d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xca19);
        EXPECT(gbc.pc(), 0x7a0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01D2
        gbc.setState(0x4bc2, 0x5ee7, 0x2120, 0x2f22, 0x32b7, 0xd28e, 0x0, 0x0);
        gbc.writeMem(0x4bc2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x5ee7);
        EXPECT(gbc.pc(), 0x4bc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01D3
        gbc.setState(0x93f, 0x9a6, 0xd8e0, 0xd5e6, 0xcdd6, 0x4807, 0x1, 0x0);
        gbc.writeMem(0x93f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x9a6);
        EXPECT(gbc.pc(), 0x941);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01D4
        gbc.setState(0x6dfd, 0xa904, 0x6480, 0x317a, 0x8e7d, 0x8223, 0x1, 0x0);
        gbc.writeMem(0x6dfd, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xa904);
        EXPECT(gbc.pc(), 0x6dff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01D5
        gbc.setState(0xb749, 0xee7d, 0x4c20, 0x13d, 0x6b81, 0x46a1, 0x1, 0x0);
        gbc.writeMem(0xb749, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xee7d);
        EXPECT(gbc.pc(), 0xb74b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb749), 0xcb);
        EXPECT(gbc.readMem(0xb74a), 0x6a);
        // CB 6A 01D6
        gbc.setState(0x2841, 0xa3d6, 0xffd0, 0x2940, 0x6ce0, 0x52bc, 0x0, 0x1);
        gbc.writeMem(0x2841, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xa3d6);
        EXPECT(gbc.pc(), 0x2843);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01D7
        gbc.setState(0xe687, 0x5fb2, 0x48f0, 0x4169, 0x1bdd, 0x4fbc, 0x1, 0x1);
        gbc.writeMem(0xe687, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x5fb2);
        EXPECT(gbc.pc(), 0xe689);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe687), 0xcb);
        EXPECT(gbc.readMem(0xe688), 0x6a);
        // CB 6A 01D8
        gbc.setState(0x9576, 0x1b1f, 0xb520, 0x9bc8, 0xdae2, 0x8563, 0x1, 0x1);
        gbc.writeMem(0x9576, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1b1f);
        EXPECT(gbc.pc(), 0x9578);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9576), 0xcb);
        EXPECT(gbc.readMem(0x9577), 0x6a);
        // CB 6A 01D9
        gbc.setState(0x3752, 0xf172, 0x93f0, 0x6940, 0xef0e, 0xcd86, 0x0, 0x0);
        gbc.writeMem(0x3752, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xf172);
        EXPECT(gbc.pc(), 0x3754);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01DB
        gbc.setState(0x185b, 0x2aa1, 0xd950, 0x6857, 0x7150, 0x30bb, 0x1, 0x0);
        gbc.writeMem(0x185b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x2aa1);
        EXPECT(gbc.pc(), 0x185d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01DC
        gbc.setState(0x7f89, 0xab1f, 0x8d30, 0x7ad7, 0xa697, 0x7913, 0x1, 0x1);
        gbc.writeMem(0x7f89, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xab1f);
        EXPECT(gbc.pc(), 0x7f8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01DD
        gbc.setState(0x4229, 0x3e7a, 0x5390, 0xc1e4, 0x6cb5, 0x7497, 0x0, 0x0);
        gbc.writeMem(0x4229, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x3e7a);
        EXPECT(gbc.pc(), 0x422b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01DE
        gbc.setState(0xc674, 0xd8ff, 0xa630, 0x5fc9, 0xc320, 0x1ea4, 0x1, 0x1);
        gbc.writeMem(0xc674, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xd8ff);
        EXPECT(gbc.pc(), 0xc676);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc674), 0xcb);
        EXPECT(gbc.readMem(0xc675), 0x6a);
        // CB 6A 01DF
        gbc.setState(0xd9d1, 0xe9d1, 0x1570, 0xddf2, 0x63f4, 0x6bfe, 0x0, 0x0);
        gbc.writeMem(0xd9d1, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xe9d1);
        EXPECT(gbc.pc(), 0xd9d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9d1), 0xcb);
        EXPECT(gbc.readMem(0xd9d2), 0x6a);
        // CB 6A 01E0
        gbc.setState(0xaddf, 0xc611, 0x9ee0, 0xe978, 0xad57, 0xfff0, 0x0, 0x1);
        gbc.writeMem(0xaddf, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xc611);
        EXPECT(gbc.pc(), 0xade1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaddf), 0xcb);
        EXPECT(gbc.readMem(0xade0), 0x6a);
        // CB 6A 01E1
        gbc.setState(0x9f45, 0xce1d, 0x2120, 0xefe4, 0x60f7, 0x941e, 0x1, 0x0);
        gbc.writeMem(0x9f45, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xce1d);
        EXPECT(gbc.pc(), 0x9f47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f45), 0xcb);
        EXPECT(gbc.readMem(0x9f46), 0x6a);
        // CB 6A 01E2
        gbc.setState(0x8fa5, 0x2869, 0x1d00, 0x6b73, 0x897a, 0x173f, 0x0, 0x1);
        gbc.writeMem(0x8fa5, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x2869);
        EXPECT(gbc.pc(), 0x8fa7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fa5), 0xcb);
        EXPECT(gbc.readMem(0x8fa6), 0x6a);
        // CB 6A 01E3
        gbc.setState(0x8173, 0x488f, 0x70e0, 0x6016, 0xf7c0, 0x8e4a, 0x1, 0x0);
        gbc.writeMem(0x8173, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x488f);
        EXPECT(gbc.pc(), 0x8175);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8173), 0xcb);
        EXPECT(gbc.readMem(0x8174), 0x6a);
        // CB 6A 01E4
        gbc.setState(0xceaa, 0xd132, 0x6160, 0x5b09, 0x6b1c, 0xbcec, 0x1, 0x0);
        gbc.writeMem(0xceaa, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xd132);
        EXPECT(gbc.pc(), 0xceac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xceaa), 0xcb);
        EXPECT(gbc.readMem(0xceab), 0x6a);
        // CB 6A 01E5
        gbc.setState(0x2ec9, 0x7422, 0xf350, 0x5428, 0xb03d, 0x559c, 0x1, 0x0);
        gbc.writeMem(0x2ec9, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x7422);
        EXPECT(gbc.pc(), 0x2ecb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01E6
        gbc.setState(0x23cd, 0x6a93, 0xdab0, 0x599c, 0x5887, 0x695a, 0x0, 0x0);
        gbc.writeMem(0x23cd, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x6a93);
        EXPECT(gbc.pc(), 0x23cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01E8
        gbc.setState(0x1977, 0x20dc, 0x9bf0, 0x9896, 0xb771, 0xab6f, 0x1, 0x0);
        gbc.writeMem(0x1977, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x20dc);
        EXPECT(gbc.pc(), 0x1979);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01E9
        gbc.setState(0xe95, 0x1525, 0x55d0, 0x92a9, 0x38f0, 0x4c17, 0x1, 0x1);
        gbc.writeMem(0xe95, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x1525);
        EXPECT(gbc.pc(), 0xe97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01EA
        gbc.setState(0x576c, 0xe0cb, 0x1bc0, 0xe65f, 0xa700, 0x5944, 0x0, 0x1);
        gbc.writeMem(0x576c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xe0cb);
        EXPECT(gbc.pc(), 0x576e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01EB
        gbc.setState(0x6720, 0xdae3, 0xd410, 0xe194, 0xe446, 0xe448, 0x1, 0x1);
        gbc.writeMem(0x6720, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xdae3);
        EXPECT(gbc.pc(), 0x6722);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01EC
        gbc.setState(0xbd79, 0x9109, 0x5930, 0xb2ed, 0x9151, 0xa524, 0x1, 0x1);
        gbc.writeMem(0xbd79, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x9109);
        EXPECT(gbc.pc(), 0xbd7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd79), 0xcb);
        EXPECT(gbc.readMem(0xbd7a), 0x6a);
        // CB 6A 01ED
        gbc.setState(0x5529, 0x12c, 0xc2d0, 0x1db1, 0xfec, 0x7f92, 0x0, 0x0);
        gbc.writeMem(0x5529, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x12c);
        EXPECT(gbc.pc(), 0x552b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01EE
        gbc.setState(0x463f, 0xd3bf, 0x7670, 0x3b75, 0xb63e, 0x3e3f, 0x0, 0x0);
        gbc.writeMem(0x463f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xd3bf);
        EXPECT(gbc.pc(), 0x4641);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01EF
        gbc.setState(0x23cc, 0x56db, 0xaa30, 0x6674, 0xb080, 0x1311, 0x1, 0x0);
        gbc.writeMem(0x23cc, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x56db);
        EXPECT(gbc.pc(), 0x23ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01F0
        gbc.setState(0x2bd7, 0xd9af, 0x3fe0, 0x2d37, 0x26f3, 0xa3a6, 0x0, 0x1);
        gbc.writeMem(0x2bd7, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd9af);
        EXPECT(gbc.pc(), 0x2bd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01F1
        gbc.setState(0x4d9, 0x87f8, 0x3d60, 0x77ae, 0x12d7, 0xda92, 0x1, 0x0);
        gbc.writeMem(0x4d9, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x87f8);
        EXPECT(gbc.pc(), 0x4db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01F2
        gbc.setState(0x1f09, 0xd400, 0x39b0, 0x98f2, 0xadf9, 0x70c1, 0x1, 0x0);
        gbc.writeMem(0x1f09, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xd400);
        EXPECT(gbc.pc(), 0x1f0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01F3
        gbc.setState(0x36e8, 0x691d, 0x2c0, 0xd33b, 0xcd01, 0xca4, 0x0, 0x0);
        gbc.writeMem(0x36e8, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x691d);
        EXPECT(gbc.pc(), 0x36ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01F4
        gbc.setState(0x32a9, 0x7ef, 0x5570, 0x3782, 0x18e0, 0xb44d, 0x0, 0x1);
        gbc.writeMem(0x32a9, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x7ef);
        EXPECT(gbc.pc(), 0x32ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01F5
        gbc.setState(0xae6b, 0x555, 0xdf50, 0xc47f, 0xdf2a, 0x5a20, 0x1, 0x1);
        gbc.writeMem(0xae6b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x555);
        EXPECT(gbc.pc(), 0xae6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae6b), 0xcb);
        EXPECT(gbc.readMem(0xae6c), 0x6a);
        // CB 6A 01F6
        gbc.setState(0x1091, 0xf940, 0x7a40, 0x181a, 0xf150, 0x4bfd, 0x1, 0x1);
        gbc.writeMem(0x1091, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xf940);
        EXPECT(gbc.pc(), 0x1093);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01F7
        gbc.setState(0x1ad3, 0xd60f, 0xbba0, 0xcfeb, 0xcf79, 0xeccd, 0x1, 0x0);
        gbc.writeMem(0x1ad3, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xd60f);
        EXPECT(gbc.pc(), 0x1ad5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01F8
        gbc.setState(0x42f7, 0xd62e, 0x16d0, 0x94ff, 0x9dcc, 0x8f63, 0x1, 0x1);
        gbc.writeMem(0x42f7, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xd62e);
        EXPECT(gbc.pc(), 0x42f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01F9
        gbc.setState(0x4257, 0x75f, 0xe3f0, 0xb67d, 0x8481, 0x4028, 0x1, 0x0);
        gbc.writeMem(0x4257, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x75f);
        EXPECT(gbc.pc(), 0x4259);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01FA
        gbc.setState(0x87e9, 0xbc60, 0xdf60, 0x7401, 0xa6d3, 0x2b20, 0x1, 0x1);
        gbc.writeMem(0x87e9, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xbc60);
        EXPECT(gbc.pc(), 0x87eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87e9), 0xcb);
        EXPECT(gbc.readMem(0x87ea), 0x6a);
        // CB 6A 01FB
        gbc.setState(0xed19, 0x2393, 0xf600, 0x2e04, 0x2af9, 0xd6c1, 0x1, 0x1);
        gbc.writeMem(0xed19, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x2393);
        EXPECT(gbc.pc(), 0xed1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed19), 0xcb);
        EXPECT(gbc.readMem(0xed1a), 0x6a);
        // CB 6A 01FC
        gbc.setState(0xe14, 0x44ad, 0x6450, 0x6eb3, 0xb, 0x48e0, 0x1, 0x1);
        gbc.writeMem(0xe14, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x44ad);
        EXPECT(gbc.pc(), 0xe16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01FD
        gbc.setState(0x2e06, 0x74b5, 0x670, 0xa2b0, 0xbdff, 0xe0c, 0x1, 0x0);
        gbc.writeMem(0x2e06, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x74b5);
        EXPECT(gbc.pc(), 0x2e08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 01FE
        gbc.setState(0x3042, 0x1cf7, 0xec80, 0x4941, 0x2f93, 0xc09, 0x1, 0x0);
        gbc.writeMem(0x3042, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x1cf7);
        EXPECT(gbc.pc(), 0x3044);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 01FF
        gbc.setState(0x4a05, 0x8050, 0x3ea0, 0xc98, 0xab33, 0xd9ec, 0x0, 0x1);
        gbc.writeMem(0x4a05, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x8050);
        EXPECT(gbc.pc(), 0x4a07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0200
        gbc.setState(0x7982, 0x4628, 0x5420, 0xce5c, 0xf03c, 0x4580, 0x1, 0x1);
        gbc.writeMem(0x7982, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x4628);
        EXPECT(gbc.pc(), 0x7984);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0201
        gbc.setState(0xa012, 0x63fe, 0x9670, 0x61ab, 0xde05, 0xf2e, 0x0, 0x1);
        gbc.writeMem(0xa012, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x63fe);
        EXPECT(gbc.pc(), 0xa014);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa012), 0xcb);
        EXPECT(gbc.readMem(0xa013), 0x6a);
        // CB 6A 0203
        gbc.setState(0xdceb, 0x4cee, 0x39c0, 0x187, 0xa899, 0x9bad, 0x1, 0x0);
        gbc.writeMem(0xdceb, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x4cee);
        EXPECT(gbc.pc(), 0xdced);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdceb), 0xcb);
        EXPECT(gbc.readMem(0xdcec), 0x6a);
        // CB 6A 0204
        gbc.setState(0x94f4, 0xf678, 0xa80, 0xdae3, 0x5fee, 0xfdfe, 0x1, 0x0);
        gbc.writeMem(0x94f4, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xf678);
        EXPECT(gbc.pc(), 0x94f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94f4), 0xcb);
        EXPECT(gbc.readMem(0x94f5), 0x6a);
        // CB 6A 0205
        gbc.setState(0xad3f, 0x13a9, 0x5f60, 0x871f, 0x84a3, 0x8bf0, 0x1, 0x1);
        gbc.writeMem(0xad3f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x13a9);
        EXPECT(gbc.pc(), 0xad41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad3f), 0xcb);
        EXPECT(gbc.readMem(0xad40), 0x6a);
        // CB 6A 0206
        gbc.setState(0x3500, 0xa010, 0x9f30, 0x5a59, 0xfeb7, 0x2851, 0x1, 0x1);
        gbc.writeMem(0x3500, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xa010);
        EXPECT(gbc.pc(), 0x3502);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0207
        gbc.setState(0xd378, 0x659a, 0xe400, 0x482b, 0x66dd, 0x226f, 0x1, 0x1);
        gbc.writeMem(0xd378, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x659a);
        EXPECT(gbc.pc(), 0xd37a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd378), 0xcb);
        EXPECT(gbc.readMem(0xd379), 0x6a);
        // CB 6A 0208
        gbc.setState(0x957d, 0xfa5f, 0x7790, 0x148e, 0xe148, 0x5f2b, 0x0, 0x1);
        gbc.writeMem(0x957d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xfa5f);
        EXPECT(gbc.pc(), 0x957f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x957d), 0xcb);
        EXPECT(gbc.readMem(0x957e), 0x6a);
        // CB 6A 0209
        gbc.setState(0x46e, 0x6a0c, 0xec0, 0x348c, 0x29f1, 0xf34b, 0x0, 0x1);
        gbc.writeMem(0x46e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x6a0c);
        EXPECT(gbc.pc(), 0x470);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 020A
        gbc.setState(0x1fb5, 0x2106, 0x6a60, 0x25f4, 0x4a78, 0xe3a6, 0x1, 0x1);
        gbc.writeMem(0x1fb5, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x2106);
        EXPECT(gbc.pc(), 0x1fb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 020B
        gbc.setState(0xc60c, 0x188c, 0x4c90, 0x2ec3, 0xb2c3, 0x1dd4, 0x1, 0x1);
        gbc.writeMem(0xc60c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x188c);
        EXPECT(gbc.pc(), 0xc60e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc60c), 0xcb);
        EXPECT(gbc.readMem(0xc60d), 0x6a);
        // CB 6A 020C
        gbc.setState(0x53e6, 0xf84b, 0xade0, 0x170e, 0x102a, 0x8259, 0x0, 0x1);
        gbc.writeMem(0x53e6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xf84b);
        EXPECT(gbc.pc(), 0x53e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 020D
        gbc.setState(0x67b0, 0x637a, 0x5590, 0xde19, 0x4de8, 0x5d44, 0x0, 0x1);
        gbc.writeMem(0x67b0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x637a);
        EXPECT(gbc.pc(), 0x67b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 020F
        gbc.setState(0x4622, 0xac0e, 0x3c10, 0x46ae, 0xec48, 0x896e, 0x1, 0x1);
        gbc.writeMem(0x4622, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xac0e);
        EXPECT(gbc.pc(), 0x4624);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0210
        gbc.setState(0x3a46, 0x4143, 0xf930, 0xfa24, 0xeb6b, 0x2f36, 0x0, 0x0);
        gbc.writeMem(0x3a46, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x4143);
        EXPECT(gbc.pc(), 0x3a48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0211
        gbc.setState(0xdc64, 0x7e44, 0xb430, 0x42a8, 0x2437, 0xe102, 0x0, 0x0);
        gbc.writeMem(0xdc64, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x7e44);
        EXPECT(gbc.pc(), 0xdc66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc64), 0xcb);
        EXPECT(gbc.readMem(0xdc65), 0x6a);
        // CB 6A 0212
        gbc.setState(0x161e, 0xcc9d, 0x3090, 0xf615, 0xf913, 0xad48, 0x0, 0x0);
        gbc.writeMem(0x161e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xcc9d);
        EXPECT(gbc.pc(), 0x1620);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0213
        gbc.setState(0x15ae, 0xd0fb, 0x5ff0, 0x87bd, 0x6d4f, 0x512, 0x0, 0x0);
        gbc.writeMem(0x15ae, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xd0fb);
        EXPECT(gbc.pc(), 0x15b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0214
        gbc.setState(0x3473, 0x581c, 0xa810, 0xf2c6, 0xc5ac, 0xba4c, 0x0, 0x0);
        gbc.writeMem(0x3473, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x581c);
        EXPECT(gbc.pc(), 0x3475);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0215
        gbc.setState(0x9233, 0x61d9, 0xd280, 0xe523, 0xf6bd, 0x9751, 0x1, 0x1);
        gbc.writeMem(0x9233, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x61d9);
        EXPECT(gbc.pc(), 0x9235);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9233), 0xcb);
        EXPECT(gbc.readMem(0x9234), 0x6a);
        // CB 6A 0216
        gbc.setState(0x21d4, 0x2172, 0x57f0, 0x2f8, 0xae56, 0x17e7, 0x0, 0x1);
        gbc.writeMem(0x21d4, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x2172);
        EXPECT(gbc.pc(), 0x21d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0217
        gbc.setState(0xcf2f, 0x83a9, 0x6330, 0xdb76, 0xfae0, 0xaebc, 0x1, 0x1);
        gbc.writeMem(0xcf2f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x83a9);
        EXPECT(gbc.pc(), 0xcf31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf2f), 0xcb);
        EXPECT(gbc.readMem(0xcf30), 0x6a);
        // CB 6A 0218
        gbc.setState(0x8a45, 0xe2dd, 0xa2c0, 0x4d60, 0x1ef7, 0x3097, 0x0, 0x1);
        gbc.writeMem(0x8a45, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xe2dd);
        EXPECT(gbc.pc(), 0x8a47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a45), 0xcb);
        EXPECT(gbc.readMem(0x8a46), 0x6a);
        // CB 6A 0219
        gbc.setState(0xb17c, 0x1416, 0x6290, 0xce50, 0x70d2, 0x8d14, 0x0, 0x0);
        gbc.writeMem(0xb17c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x1416);
        EXPECT(gbc.pc(), 0xb17e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb17c), 0xcb);
        EXPECT(gbc.readMem(0xb17d), 0x6a);
        // CB 6A 021A
        gbc.setState(0xa946, 0xeb2, 0xa360, 0x9b6a, 0xc1c8, 0x3053, 0x1, 0x1);
        gbc.writeMem(0xa946, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xeb2);
        EXPECT(gbc.pc(), 0xa948);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa946), 0xcb);
        EXPECT(gbc.readMem(0xa947), 0x6a);
        // CB 6A 021B
        gbc.setState(0x305a, 0x7dc5, 0x20d0, 0x80ce, 0xc74c, 0x106e, 0x1, 0x0);
        gbc.writeMem(0x305a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x7dc5);
        EXPECT(gbc.pc(), 0x305c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 021C
        gbc.setState(0x42ed, 0x2579, 0xf970, 0x6026, 0x9bde, 0xe6a5, 0x0, 0x0);
        gbc.writeMem(0x42ed, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x2579);
        EXPECT(gbc.pc(), 0x42ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 021D
        gbc.setState(0x1947, 0x26fc, 0x3c40, 0xe27a, 0x9f4b, 0x275c, 0x1, 0x1);
        gbc.writeMem(0x1947, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x26fc);
        EXPECT(gbc.pc(), 0x1949);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 021E
        gbc.setState(0x59ff, 0x39e2, 0x3490, 0x9e6c, 0xd5ad, 0x9014, 0x0, 0x1);
        gbc.writeMem(0x59ff, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x39e2);
        EXPECT(gbc.pc(), 0x5a01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 021F
        gbc.setState(0xa5b7, 0x6447, 0x3e80, 0xca92, 0x6581, 0xade8, 0x1, 0x0);
        gbc.writeMem(0xa5b7, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x6447);
        EXPECT(gbc.pc(), 0xa5b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5b7), 0xcb);
        EXPECT(gbc.readMem(0xa5b8), 0x6a);
        // CB 6A 0220
        gbc.setState(0x3ff7, 0x3b52, 0xcf50, 0xb96b, 0xa4ae, 0xe399, 0x0, 0x0);
        gbc.writeMem(0x3ff7, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x3b52);
        EXPECT(gbc.pc(), 0x3ff9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0221
        gbc.setState(0x946a, 0x1d04, 0x94f0, 0x276c, 0x96ec, 0x87d2, 0x1, 0x0);
        gbc.writeMem(0x946a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x1d04);
        EXPECT(gbc.pc(), 0x946c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x946a), 0xcb);
        EXPECT(gbc.readMem(0x946b), 0x6a);
        // CB 6A 0222
        gbc.setState(0x8c37, 0xddb, 0xd4e0, 0xe66b, 0xf541, 0x28f, 0x0, 0x1);
        gbc.writeMem(0x8c37, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xddb);
        EXPECT(gbc.pc(), 0x8c39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c37), 0xcb);
        EXPECT(gbc.readMem(0x8c38), 0x6a);
        // CB 6A 0223
        gbc.setState(0xea53, 0xd622, 0xeaf0, 0x236e, 0xcb6f, 0x95fa, 0x1, 0x1);
        gbc.writeMem(0xea53, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xd622);
        EXPECT(gbc.pc(), 0xea55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea53), 0xcb);
        EXPECT(gbc.readMem(0xea54), 0x6a);
        // CB 6A 0224
        gbc.setState(0xbf82, 0xe3e2, 0xe940, 0xd9f8, 0x779c, 0x7020, 0x1, 0x0);
        gbc.writeMem(0xbf82, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xe3e2);
        EXPECT(gbc.pc(), 0xbf84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf82), 0xcb);
        EXPECT(gbc.readMem(0xbf83), 0x6a);
        // CB 6A 0225
        gbc.setState(0x1b18, 0xc030, 0x8d50, 0x466e, 0x3b2c, 0x46b8, 0x1, 0x1);
        gbc.writeMem(0x1b18, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc030);
        EXPECT(gbc.pc(), 0x1b1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0226
        gbc.setState(0x8122, 0x8da5, 0x6420, 0x17b2, 0xa886, 0xd84e, 0x0, 0x0);
        gbc.writeMem(0x8122, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x8da5);
        EXPECT(gbc.pc(), 0x8124);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8122), 0xcb);
        EXPECT(gbc.readMem(0x8123), 0x6a);
        // CB 6A 0227
        gbc.setState(0x8ca0, 0xe344, 0xd2d0, 0x60f2, 0x3dd7, 0x41ab, 0x0, 0x1);
        gbc.writeMem(0x8ca0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xe344);
        EXPECT(gbc.pc(), 0x8ca2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ca0), 0xcb);
        EXPECT(gbc.readMem(0x8ca1), 0x6a);
        // CB 6A 0228
        gbc.setState(0x96bd, 0xe1c7, 0x16b0, 0xd995, 0x9099, 0x529e, 0x1, 0x1);
        gbc.writeMem(0x96bd, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xe1c7);
        EXPECT(gbc.pc(), 0x96bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96bd), 0xcb);
        EXPECT(gbc.readMem(0x96be), 0x6a);
        // CB 6A 0229
        gbc.setState(0x275f, 0x7c27, 0x35a0, 0xe919, 0xfc9, 0x75f3, 0x0, 0x1);
        gbc.writeMem(0x275f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x7c27);
        EXPECT(gbc.pc(), 0x2761);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 022A
        gbc.setState(0x3838, 0xaed2, 0xb770, 0xa8a6, 0xbf5f, 0x335e, 0x1, 0x1);
        gbc.writeMem(0x3838, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xaed2);
        EXPECT(gbc.pc(), 0x383a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 022B
        gbc.setState(0xb33f, 0x7b53, 0x7b40, 0x31fd, 0xe5b4, 0xd42f, 0x0, 0x0);
        gbc.writeMem(0xb33f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x7b53);
        EXPECT(gbc.pc(), 0xb341);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb33f), 0xcb);
        EXPECT(gbc.readMem(0xb340), 0x6a);
        // CB 6A 022C
        gbc.setState(0x1b47, 0xd0c7, 0x8970, 0x8850, 0xb76c, 0x4de8, 0x1, 0x1);
        gbc.writeMem(0x1b47, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xd0c7);
        EXPECT(gbc.pc(), 0x1b49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 022D
        gbc.setState(0x3036, 0x28fd, 0xcdc0, 0x8efb, 0x5dbd, 0x852, 0x0, 0x0);
        gbc.writeMem(0x3036, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x28fd);
        EXPECT(gbc.pc(), 0x3038);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 022E
        gbc.setState(0x3d83, 0xae62, 0xb020, 0xc241, 0xa33, 0xaff3, 0x1, 0x1);
        gbc.writeMem(0x3d83, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xae62);
        EXPECT(gbc.pc(), 0x3d85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 022F
        gbc.setState(0x45a0, 0x34dc, 0x1760, 0xbef5, 0x2eb3, 0x5118, 0x1, 0x1);
        gbc.writeMem(0x45a0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x34dc);
        EXPECT(gbc.pc(), 0x45a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0231
        gbc.setState(0x1af9, 0xc4d3, 0xe410, 0xb779, 0xd91e, 0xe5f7, 0x1, 0x0);
        gbc.writeMem(0x1af9, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xc4d3);
        EXPECT(gbc.pc(), 0x1afb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0232
        gbc.setState(0xc258, 0x698, 0xdb40, 0xa76c, 0xe452, 0x1bf4, 0x1, 0x1);
        gbc.writeMem(0xc258, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x698);
        EXPECT(gbc.pc(), 0xc25a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc258), 0xcb);
        EXPECT(gbc.readMem(0xc259), 0x6a);
        // CB 6A 0233
        gbc.setState(0xd320, 0xe400, 0xd9c0, 0xa318, 0xde01, 0xdbee, 0x0, 0x0);
        gbc.writeMem(0xd320, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xe400);
        EXPECT(gbc.pc(), 0xd322);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd320), 0xcb);
        EXPECT(gbc.readMem(0xd321), 0x6a);
        // CB 6A 0234
        gbc.setState(0xb3a5, 0x8f58, 0xc550, 0xac40, 0x26de, 0x35e, 0x0, 0x0);
        gbc.writeMem(0xb3a5, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x8f58);
        EXPECT(gbc.pc(), 0xb3a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3a5), 0xcb);
        EXPECT(gbc.readMem(0xb3a6), 0x6a);
        // CB 6A 0235
        gbc.setState(0xc0d8, 0xda28, 0x2100, 0x2562, 0x895b, 0x1090, 0x0, 0x1);
        gbc.writeMem(0xc0d8, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xda28);
        EXPECT(gbc.pc(), 0xc0da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0d8), 0xcb);
        EXPECT(gbc.readMem(0xc0d9), 0x6a);
        // CB 6A 0236
        gbc.setState(0x470a, 0xbd16, 0x3760, 0x4910, 0x1d37, 0x7245, 0x0, 0x1);
        gbc.writeMem(0x470a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xbd16);
        EXPECT(gbc.pc(), 0x470c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0237
        gbc.setState(0x6c0b, 0x876f, 0xf1a0, 0x1e6, 0x1aec, 0x781a, 0x0, 0x1);
        gbc.writeMem(0x6c0b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x876f);
        EXPECT(gbc.pc(), 0x6c0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0238
        gbc.setState(0x856f, 0xd7d4, 0xbf60, 0x5fb3, 0xc40c, 0xe24d, 0x0, 0x0);
        gbc.writeMem(0x856f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xd7d4);
        EXPECT(gbc.pc(), 0x8571);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x856f), 0xcb);
        EXPECT(gbc.readMem(0x8570), 0x6a);
        // CB 6A 0239
        gbc.setState(0xd360, 0x61d3, 0x70c0, 0xe06f, 0x8ca0, 0x862a, 0x0, 0x1);
        gbc.writeMem(0xd360, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x61d3);
        EXPECT(gbc.pc(), 0xd362);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd360), 0xcb);
        EXPECT(gbc.readMem(0xd361), 0x6a);
        // CB 6A 023A
        gbc.setState(0xea3, 0x1ab6, 0x9700, 0x2f8a, 0xdacf, 0x8fe6, 0x1, 0x1);
        gbc.writeMem(0xea3, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x1ab6);
        EXPECT(gbc.pc(), 0xea5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 023B
        gbc.setState(0x3fe6, 0x367d, 0x7680, 0x7a5a, 0xca25, 0x976, 0x1, 0x1);
        gbc.writeMem(0x3fe6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x367d);
        EXPECT(gbc.pc(), 0x3fe8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 023C
        gbc.setState(0x3e3, 0xd6b8, 0x22b0, 0x27be, 0xf124, 0x6891, 0x1, 0x1);
        gbc.writeMem(0x3e3, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xd6b8);
        EXPECT(gbc.pc(), 0x3e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 023D
        gbc.setState(0x3cf4, 0xc44d, 0x950, 0xa715, 0x9897, 0xa3c6, 0x0, 0x1);
        gbc.writeMem(0x3cf4, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xc44d);
        EXPECT(gbc.pc(), 0x3cf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 023E
        gbc.setState(0x28a5, 0x5355, 0x5c70, 0xdcb, 0x7247, 0x52b5, 0x0, 0x0);
        gbc.writeMem(0x28a5, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x5355);
        EXPECT(gbc.pc(), 0x28a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0240
        gbc.setState(0x5311, 0xe22e, 0x3fd0, 0xaf83, 0x13ba, 0xd6ad, 0x0, 0x0);
        gbc.writeMem(0x5311, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xe22e);
        EXPECT(gbc.pc(), 0x5313);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0241
        gbc.setState(0xa169, 0xeec4, 0x2440, 0x44af, 0x3147, 0xedc2, 0x0, 0x1);
        gbc.writeMem(0xa169, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xeec4);
        EXPECT(gbc.pc(), 0xa16b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa169), 0xcb);
        EXPECT(gbc.readMem(0xa16a), 0x6a);
        // CB 6A 0242
        gbc.setState(0xf39, 0x2dd5, 0x9df0, 0x2e05, 0x9320, 0xeea8, 0x0, 0x1);
        gbc.writeMem(0xf39, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x2dd5);
        EXPECT(gbc.pc(), 0xf3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0243
        gbc.setState(0x2f46, 0xed1b, 0xb830, 0xadba, 0xeeb4, 0xe26f, 0x0, 0x0);
        gbc.writeMem(0x2f46, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xed1b);
        EXPECT(gbc.pc(), 0x2f48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0244
        gbc.setState(0x891e, 0xfe34, 0xabd0, 0xf5cf, 0x22dd, 0xe1e0, 0x0, 0x1);
        gbc.writeMem(0x891e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xfe34);
        EXPECT(gbc.pc(), 0x8920);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x891e), 0xcb);
        EXPECT(gbc.readMem(0x891f), 0x6a);
        // CB 6A 0245
        gbc.setState(0xd6, 0xd869, 0x2cc0, 0x1024, 0x9782, 0x223b, 0x1, 0x1);
        gbc.writeMem(0xd6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xd869);
        EXPECT(gbc.pc(), 0xd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0246
        gbc.setState(0x2d01, 0xdd68, 0xab40, 0xd0ce, 0x564c, 0x57c1, 0x0, 0x1);
        gbc.writeMem(0x2d01, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xdd68);
        EXPECT(gbc.pc(), 0x2d03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0247
        gbc.setState(0x647a, 0xc7e3, 0x8710, 0x5e90, 0xf894, 0x4eb5, 0x0, 0x0);
        gbc.writeMem(0x647a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xc7e3);
        EXPECT(gbc.pc(), 0x647c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0248
        gbc.setState(0x84f5, 0xa51a, 0x13f0, 0x508e, 0xcd38, 0x81e1, 0x1, 0x1);
        gbc.writeMem(0x84f5, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xa51a);
        EXPECT(gbc.pc(), 0x84f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84f5), 0xcb);
        EXPECT(gbc.readMem(0x84f6), 0x6a);
        // CB 6A 0249
        gbc.setState(0x2f78, 0x9bca, 0x63b0, 0x37e2, 0x364b, 0x82a5, 0x1, 0x1);
        gbc.writeMem(0x2f78, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x9bca);
        EXPECT(gbc.pc(), 0x2f7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 024A
        gbc.setState(0x7cac, 0x3185, 0xd5a0, 0x9fee, 0xa478, 0x33a0, 0x0, 0x1);
        gbc.writeMem(0x7cac, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x3185);
        EXPECT(gbc.pc(), 0x7cae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 024B
        gbc.setState(0x6822, 0x9db2, 0x1470, 0xaf61, 0xf0df, 0x7f12, 0x0, 0x0);
        gbc.writeMem(0x6822, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x9db2);
        EXPECT(gbc.pc(), 0x6824);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 024D
        gbc.setState(0x2531, 0x1541, 0x84c0, 0xb7a0, 0x111b, 0xfa5c, 0x0, 0x1);
        gbc.writeMem(0x2531, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x1541);
        EXPECT(gbc.pc(), 0x2533);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 024E
        gbc.setState(0x80f3, 0xa79d, 0xeba0, 0xe86b, 0xcdc9, 0x1901, 0x1, 0x1);
        gbc.writeMem(0x80f3, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xa79d);
        EXPECT(gbc.pc(), 0x80f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80f3), 0xcb);
        EXPECT(gbc.readMem(0x80f4), 0x6a);
        // CB 6A 024F
        gbc.setState(0x3c63, 0x85f2, 0x2c90, 0xa0c9, 0x760b, 0xbdb4, 0x1, 0x0);
        gbc.writeMem(0x3c63, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x85f2);
        EXPECT(gbc.pc(), 0x3c65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0250
        gbc.setState(0x220, 0xd611, 0x50e0, 0x795e, 0x2d84, 0x55ff, 0x0, 0x0);
        gbc.writeMem(0x220, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xd611);
        EXPECT(gbc.pc(), 0x222);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0251
        gbc.setState(0x604, 0x566, 0x9f00, 0xaa12, 0x8cab, 0x6e7e, 0x1, 0x0);
        gbc.writeMem(0x604, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x566);
        EXPECT(gbc.pc(), 0x606);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0253
        gbc.setState(0x57e6, 0x9383, 0x9230, 0xc70f, 0x6748, 0xc0c3, 0x1, 0x0);
        gbc.writeMem(0x57e6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x9383);
        EXPECT(gbc.pc(), 0x57e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0255
        gbc.setState(0xeeec, 0x9beb, 0xb960, 0x139, 0x4031, 0x8a5a, 0x1, 0x0);
        gbc.writeMem(0xeeec, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x9beb);
        EXPECT(gbc.pc(), 0xeeee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeeec), 0xcb);
        EXPECT(gbc.readMem(0xeeed), 0x6a);
        // CB 6A 0256
        gbc.setState(0x9a44, 0xff62, 0xa7a0, 0x5921, 0x8a48, 0xa5a3, 0x0, 0x1);
        gbc.writeMem(0x9a44, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xff62);
        EXPECT(gbc.pc(), 0x9a46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a44), 0xcb);
        EXPECT(gbc.readMem(0x9a45), 0x6a);
        // CB 6A 0257
        gbc.setState(0xaafa, 0xb7b8, 0xa480, 0x95bd, 0x2934, 0x2e6e, 0x1, 0x0);
        gbc.writeMem(0xaafa, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xb7b8);
        EXPECT(gbc.pc(), 0xaafc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaafa), 0xcb);
        EXPECT(gbc.readMem(0xaafb), 0x6a);
        // CB 6A 0258
        gbc.setState(0x685, 0xf130, 0x8e80, 0x8178, 0xf420, 0xefd9, 0x0, 0x1);
        gbc.writeMem(0x685, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xf130);
        EXPECT(gbc.pc(), 0x687);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0259
        gbc.setState(0x7a6, 0xfd9f, 0xe50, 0xd50c, 0x75e1, 0xc199, 0x0, 0x0);
        gbc.writeMem(0x7a6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xfd9f);
        EXPECT(gbc.pc(), 0x7a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 025A
        gbc.setState(0x3ccf, 0x8767, 0x3970, 0x6b1, 0xadee, 0x918, 0x0, 0x0);
        gbc.writeMem(0x3ccf, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x8767);
        EXPECT(gbc.pc(), 0x3cd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 025C
        gbc.setState(0x8404, 0xa997, 0x80b0, 0xc07d, 0xddff, 0xe9a3, 0x0, 0x0);
        gbc.writeMem(0x8404, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xa997);
        EXPECT(gbc.pc(), 0x8406);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8404), 0xcb);
        EXPECT(gbc.readMem(0x8405), 0x6a);
        // CB 6A 025D
        gbc.setState(0xbfc, 0xc7e1, 0xb3c0, 0x3aa3, 0xb0ab, 0x6718, 0x1, 0x0);
        gbc.writeMem(0xbfc, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xc7e1);
        EXPECT(gbc.pc(), 0xbfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 025E
        gbc.setState(0xcdb2, 0x6a59, 0xd3e0, 0xb62d, 0x69f8, 0x24e1, 0x0, 0x0);
        gbc.writeMem(0xcdb2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x6a59);
        EXPECT(gbc.pc(), 0xcdb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdb2), 0xcb);
        EXPECT(gbc.readMem(0xcdb3), 0x6a);
        // CB 6A 025F
        gbc.setState(0x78a0, 0x8574, 0x3400, 0x5ad0, 0x90c4, 0x927d, 0x0, 0x0);
        gbc.writeMem(0x78a0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x8574);
        EXPECT(gbc.pc(), 0x78a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0262
        gbc.setState(0xcaa6, 0xe14c, 0xa1e0, 0xa449, 0x29a8, 0x3e5a, 0x1, 0x0);
        gbc.writeMem(0xcaa6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xe14c);
        EXPECT(gbc.pc(), 0xcaa8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaa6), 0xcb);
        EXPECT(gbc.readMem(0xcaa7), 0x6a);
        // CB 6A 0263
        gbc.setState(0x3da, 0x8112, 0x7fe0, 0x46ac, 0x207f, 0xdeb1, 0x0, 0x1);
        gbc.writeMem(0x3da, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x8112);
        EXPECT(gbc.pc(), 0x3dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0264
        gbc.setState(0x9fda, 0xbd8e, 0xa2e0, 0xac75, 0x220d, 0xe8d3, 0x0, 0x0);
        gbc.writeMem(0x9fda, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xbd8e);
        EXPECT(gbc.pc(), 0x9fdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fda), 0xcb);
        EXPECT(gbc.readMem(0x9fdb), 0x6a);
        // CB 6A 0265
        gbc.setState(0x270, 0xc6f, 0xc050, 0xdc80, 0x1322, 0x7662, 0x1, 0x1);
        gbc.writeMem(0x270, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xc6f);
        EXPECT(gbc.pc(), 0x272);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0267
        gbc.setState(0x3f7, 0x6426, 0xc810, 0x3c81, 0xbc96, 0xb151, 0x0, 0x1);
        gbc.writeMem(0x3f7, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x6426);
        EXPECT(gbc.pc(), 0x3f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0268
        gbc.setState(0x2e7d, 0xf9a, 0xe6b0, 0x85d4, 0xde1e, 0x9176, 0x0, 0x0);
        gbc.writeMem(0x2e7d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xf9a);
        EXPECT(gbc.pc(), 0x2e7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 026A
        gbc.setState(0xd698, 0x735c, 0x9f60, 0xaa93, 0x8400, 0xbfe6, 0x0, 0x0);
        gbc.writeMem(0xd698, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x735c);
        EXPECT(gbc.pc(), 0xd69a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd698), 0xcb);
        EXPECT(gbc.readMem(0xd699), 0x6a);
        // CB 6A 026B
        gbc.setState(0xa597, 0x3597, 0x5500, 0xee7e, 0x2c61, 0x880, 0x0, 0x0);
        gbc.writeMem(0xa597, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x3597);
        EXPECT(gbc.pc(), 0xa599);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa597), 0xcb);
        EXPECT(gbc.readMem(0xa598), 0x6a);
        // CB 6A 026C
        gbc.setState(0xbe42, 0x56b6, 0xae10, 0xe525, 0xd66b, 0x9186, 0x0, 0x1);
        gbc.writeMem(0xbe42, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x56b6);
        EXPECT(gbc.pc(), 0xbe44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe42), 0xcb);
        EXPECT(gbc.readMem(0xbe43), 0x6a);
        // CB 6A 026D
        gbc.setState(0xb684, 0xf599, 0x1fd0, 0x9d16, 0x7b65, 0x9fe6, 0x0, 0x0);
        gbc.writeMem(0xb684, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xf599);
        EXPECT(gbc.pc(), 0xb686);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb684), 0xcb);
        EXPECT(gbc.readMem(0xb685), 0x6a);
        // CB 6A 026E
        gbc.setState(0xc39f, 0x5a9c, 0x9340, 0xe3e4, 0x4fb8, 0xa9c5, 0x0, 0x0);
        gbc.writeMem(0xc39f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x5a9c);
        EXPECT(gbc.pc(), 0xc3a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc39f), 0xcb);
        EXPECT(gbc.readMem(0xc3a0), 0x6a);
        // CB 6A 026F
        gbc.setState(0x2cd6, 0xe1c, 0x4610, 0x90f4, 0x8076, 0x69b7, 0x1, 0x1);
        gbc.writeMem(0x2cd6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xe1c);
        EXPECT(gbc.pc(), 0x2cd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0270
        gbc.setState(0x4270, 0xf07b, 0xdd90, 0xbdee, 0xe009, 0x1d40, 0x1, 0x0);
        gbc.writeMem(0x4270, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xf07b);
        EXPECT(gbc.pc(), 0x4272);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0271
        gbc.setState(0x72e, 0x2f9d, 0x60b0, 0xd9a5, 0xbe92, 0xd57e, 0x0, 0x1);
        gbc.writeMem(0x72e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x2f9d);
        EXPECT(gbc.pc(), 0x730);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0272
        gbc.setState(0xe20e, 0xdd99, 0x7620, 0x7a48, 0xf843, 0xeee5, 0x0, 0x1);
        gbc.writeMem(0xe20e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xdd99);
        EXPECT(gbc.pc(), 0xe210);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe20e), 0xcb);
        EXPECT(gbc.readMem(0xe20f), 0x6a);
        // CB 6A 0273
        gbc.setState(0x50a4, 0xe726, 0xdc10, 0x9b5c, 0xe18d, 0x8988, 0x1, 0x1);
        gbc.writeMem(0x50a4, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe726);
        EXPECT(gbc.pc(), 0x50a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0274
        gbc.setState(0x4e05, 0x8076, 0x7be0, 0x2de1, 0x25e6, 0x145a, 0x0, 0x1);
        gbc.writeMem(0x4e05, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x8076);
        EXPECT(gbc.pc(), 0x4e07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0275
        gbc.setState(0xc117, 0x6a97, 0xaea0, 0x8c90, 0x1dd, 0x7fb5, 0x0, 0x0);
        gbc.writeMem(0xc117, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x6a97);
        EXPECT(gbc.pc(), 0xc119);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc117), 0xcb);
        EXPECT(gbc.readMem(0xc118), 0x6a);
        // CB 6A 0276
        gbc.setState(0xa0f7, 0x938d, 0xd940, 0xb052, 0x74d9, 0xa983, 0x0, 0x1);
        gbc.writeMem(0xa0f7, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x938d);
        EXPECT(gbc.pc(), 0xa0f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0f7), 0xcb);
        EXPECT(gbc.readMem(0xa0f8), 0x6a);
        // CB 6A 0277
        gbc.setState(0x914e, 0xf5b4, 0x2140, 0x527e, 0x987d, 0xa5fc, 0x1, 0x1);
        gbc.writeMem(0x914e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xf5b4);
        EXPECT(gbc.pc(), 0x9150);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x914e), 0xcb);
        EXPECT(gbc.readMem(0x914f), 0x6a);
        // CB 6A 0278
        gbc.setState(0xb156, 0x6cba, 0xc550, 0x1c7, 0x77b0, 0x2f47, 0x1, 0x0);
        gbc.writeMem(0xb156, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6cba);
        EXPECT(gbc.pc(), 0xb158);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb156), 0xcb);
        EXPECT(gbc.readMem(0xb157), 0x6a);
        // CB 6A 0279
        gbc.setState(0xbfc2, 0x72c9, 0xec70, 0x462f, 0xefbd, 0x2264, 0x1, 0x0);
        gbc.writeMem(0xbfc2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x72c9);
        EXPECT(gbc.pc(), 0xbfc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfc2), 0xcb);
        EXPECT(gbc.readMem(0xbfc3), 0x6a);
        // CB 6A 027A
        gbc.setState(0x2aa0, 0x2b6e, 0xcb00, 0x585b, 0xe6d3, 0x3f85, 0x0, 0x0);
        gbc.writeMem(0x2aa0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x2b6e);
        EXPECT(gbc.pc(), 0x2aa2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 027B
        gbc.setState(0xe779, 0x67d4, 0x88a0, 0x9be7, 0x53da, 0xce6d, 0x0, 0x0);
        gbc.writeMem(0xe779, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x67d4);
        EXPECT(gbc.pc(), 0xe77b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe779), 0xcb);
        EXPECT(gbc.readMem(0xe77a), 0x6a);
        // CB 6A 027C
        gbc.setState(0x68e2, 0x446d, 0xe310, 0x946c, 0xa6e6, 0x5205, 0x0, 0x0);
        gbc.writeMem(0x68e2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x446d);
        EXPECT(gbc.pc(), 0x68e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 027D
        gbc.setState(0x93d6, 0x67ca, 0xb770, 0x70ad, 0x4a36, 0x31fe, 0x0, 0x1);
        gbc.writeMem(0x93d6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x67ca);
        EXPECT(gbc.pc(), 0x93d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93d6), 0xcb);
        EXPECT(gbc.readMem(0x93d7), 0x6a);
        // CB 6A 027F
        gbc.setState(0xddb8, 0x6d70, 0x4280, 0x31f6, 0x69a6, 0xdc9b, 0x1, 0x1);
        gbc.writeMem(0xddb8, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x6d70);
        EXPECT(gbc.pc(), 0xddba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddb8), 0xcb);
        EXPECT(gbc.readMem(0xddb9), 0x6a);
        // CB 6A 0280
        gbc.setState(0xc71d, 0x4ba2, 0xc730, 0x5113, 0xc173, 0x3ae1, 0x1, 0x0);
        gbc.writeMem(0xc71d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x4ba2);
        EXPECT(gbc.pc(), 0xc71f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc71d), 0xcb);
        EXPECT(gbc.readMem(0xc71e), 0x6a);
        // CB 6A 0281
        gbc.setState(0x8547, 0xd955, 0x35c0, 0x13b9, 0x589a, 0x13e7, 0x0, 0x0);
        gbc.writeMem(0x8547, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xd955);
        EXPECT(gbc.pc(), 0x8549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8547), 0xcb);
        EXPECT(gbc.readMem(0x8548), 0x6a);
        // CB 6A 0282
        gbc.setState(0x793, 0x70bf, 0xa9a0, 0x9364, 0xd348, 0x10d6, 0x0, 0x1);
        gbc.writeMem(0x793, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x70bf);
        EXPECT(gbc.pc(), 0x795);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0283
        gbc.setState(0xee51, 0x830d, 0xada0, 0xebcd, 0xa87b, 0xf09, 0x1, 0x1);
        gbc.writeMem(0xee51, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x830d);
        EXPECT(gbc.pc(), 0xee53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee51), 0xcb);
        EXPECT(gbc.readMem(0xee52), 0x6a);
        // CB 6A 0285
        gbc.setState(0x8f15, 0x8305, 0x5ac0, 0x97a7, 0x73e0, 0xad95, 0x0, 0x0);
        gbc.writeMem(0x8f15, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x8305);
        EXPECT(gbc.pc(), 0x8f17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f15), 0xcb);
        EXPECT(gbc.readMem(0x8f16), 0x6a);
        // CB 6A 0286
        gbc.setState(0x7eaa, 0xa1f0, 0xe880, 0xfeb8, 0xed78, 0x84f3, 0x0, 0x1);
        gbc.writeMem(0x7eaa, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa1f0);
        EXPECT(gbc.pc(), 0x7eac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0287
        gbc.setState(0x6f62, 0x7baf, 0xdd90, 0x2415, 0xf206, 0xa057, 0x0, 0x0);
        gbc.writeMem(0x6f62, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x7baf);
        EXPECT(gbc.pc(), 0x6f64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0288
        gbc.setState(0xd261, 0xd48, 0xce30, 0x2457, 0x300a, 0xea67, 0x1, 0x1);
        gbc.writeMem(0xd261, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xd48);
        EXPECT(gbc.pc(), 0xd263);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd261), 0xcb);
        EXPECT(gbc.readMem(0xd262), 0x6a);
        // CB 6A 0289
        gbc.setState(0xe558, 0xeec5, 0x9f60, 0x845a, 0x187c, 0x84ec, 0x0, 0x1);
        gbc.writeMem(0xe558, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xeec5);
        EXPECT(gbc.pc(), 0xe55a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe558), 0xcb);
        EXPECT(gbc.readMem(0xe559), 0x6a);
        // CB 6A 028A
        gbc.setState(0x5c42, 0x87a0, 0xa430, 0x34c, 0x946c, 0xa478, 0x0, 0x1);
        gbc.writeMem(0x5c42, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x87a0);
        EXPECT(gbc.pc(), 0x5c44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 028B
        gbc.setState(0xb9fb, 0x8e2b, 0xd1c0, 0x1dd, 0xe641, 0x48af, 0x0, 0x1);
        gbc.writeMem(0xb9fb, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x8e2b);
        EXPECT(gbc.pc(), 0xb9fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9fb), 0xcb);
        EXPECT(gbc.readMem(0xb9fc), 0x6a);
        // CB 6A 028C
        gbc.setState(0xd0b1, 0x20a8, 0xb760, 0x567e, 0xf930, 0x2c32, 0x0, 0x1);
        gbc.writeMem(0xd0b1, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x20a8);
        EXPECT(gbc.pc(), 0xd0b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0b1), 0xcb);
        EXPECT(gbc.readMem(0xd0b2), 0x6a);
        // CB 6A 028D
        gbc.setState(0xd26d, 0xa5ee, 0x3600, 0xb299, 0x534a, 0x5954, 0x1, 0x1);
        gbc.writeMem(0xd26d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xa5ee);
        EXPECT(gbc.pc(), 0xd26f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd26d), 0xcb);
        EXPECT(gbc.readMem(0xd26e), 0x6a);
        // CB 6A 028E
        gbc.setState(0x38c1, 0x5070, 0x9500, 0x9e8e, 0x89b8, 0x73a0, 0x1, 0x1);
        gbc.writeMem(0x38c1, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x5070);
        EXPECT(gbc.pc(), 0x38c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 028F
        gbc.setState(0xcacd, 0x71ab, 0x9730, 0x88fa, 0x6c56, 0xb73, 0x0, 0x0);
        gbc.writeMem(0xcacd, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x71ab);
        EXPECT(gbc.pc(), 0xcacf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcacd), 0xcb);
        EXPECT(gbc.readMem(0xcace), 0x6a);
        // CB 6A 0290
        gbc.setState(0x20eb, 0xaf66, 0x6e0, 0x186, 0x801, 0x553f, 0x1, 0x1);
        gbc.writeMem(0x20eb, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xaf66);
        EXPECT(gbc.pc(), 0x20ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0291
        gbc.setState(0xb15c, 0xa1f, 0xa280, 0xc30e, 0xe983, 0x1d36, 0x0, 0x1);
        gbc.writeMem(0xb15c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xa1f);
        EXPECT(gbc.pc(), 0xb15e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb15c), 0xcb);
        EXPECT(gbc.readMem(0xb15d), 0x6a);
        // CB 6A 0292
        gbc.setState(0x1923, 0x2a26, 0xad80, 0xa675, 0x4fcd, 0xce94, 0x0, 0x0);
        gbc.writeMem(0x1923, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x2a26);
        EXPECT(gbc.pc(), 0x1925);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0293
        gbc.setState(0xbfc8, 0xa6ce, 0x7290, 0xdf22, 0xff04, 0x9232, 0x0, 0x1);
        gbc.writeMem(0xbfc8, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xa6ce);
        EXPECT(gbc.pc(), 0xbfca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfc8), 0xcb);
        EXPECT(gbc.readMem(0xbfc9), 0x6a);
        // CB 6A 0294
        gbc.setState(0x7a25, 0xd0b3, 0x5320, 0x7456, 0xb48f, 0xe962, 0x1, 0x0);
        gbc.writeMem(0x7a25, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xd0b3);
        EXPECT(gbc.pc(), 0x7a27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0295
        gbc.setState(0xa7ae, 0x9355, 0x2180, 0xd022, 0xc863, 0xa518, 0x0, 0x0);
        gbc.writeMem(0xa7ae, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x9355);
        EXPECT(gbc.pc(), 0xa7b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7ae), 0xcb);
        EXPECT(gbc.readMem(0xa7af), 0x6a);
        // CB 6A 0296
        gbc.setState(0x483d, 0xcc2e, 0xbce0, 0xe3b4, 0x357a, 0x1633, 0x0, 0x0);
        gbc.writeMem(0x483d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xcc2e);
        EXPECT(gbc.pc(), 0x483f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0297
        gbc.setState(0x612, 0x4538, 0x940, 0x8947, 0x1cc1, 0x4933, 0x0, 0x1);
        gbc.writeMem(0x612, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x4538);
        EXPECT(gbc.pc(), 0x614);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0298
        gbc.setState(0x6aff, 0xb354, 0xcf10, 0xa14b, 0xbbf9, 0x59eb, 0x1, 0x0);
        gbc.writeMem(0x6aff, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xb354);
        EXPECT(gbc.pc(), 0x6b01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0299
        gbc.setState(0xae63, 0x4df, 0x1a0, 0x110a, 0x7620, 0x2b84, 0x0, 0x1);
        gbc.writeMem(0xae63, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x4df);
        EXPECT(gbc.pc(), 0xae65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae63), 0xcb);
        EXPECT(gbc.readMem(0xae64), 0x6a);
        // CB 6A 029A
        gbc.setState(0x5d29, 0x33f7, 0x1760, 0x6e5c, 0xdbcf, 0xedcf, 0x0, 0x0);
        gbc.writeMem(0x5d29, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x33f7);
        EXPECT(gbc.pc(), 0x5d2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 029B
        gbc.setState(0x9192, 0x73d1, 0x2340, 0x3e0b, 0xfc6a, 0x5e01, 0x1, 0x0);
        gbc.writeMem(0x9192, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x73d1);
        EXPECT(gbc.pc(), 0x9194);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9192), 0xcb);
        EXPECT(gbc.readMem(0x9193), 0x6a);
        // CB 6A 029C
        gbc.setState(0x3afc, 0x4225, 0xfbb0, 0x93bd, 0xf67e, 0x5f2a, 0x1, 0x1);
        gbc.writeMem(0x3afc, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x4225);
        EXPECT(gbc.pc(), 0x3afe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 029D
        gbc.setState(0xb815, 0x1e9b, 0xfcc0, 0x7a28, 0x9307, 0x2eab, 0x1, 0x0);
        gbc.writeMem(0xb815, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x1e9b);
        EXPECT(gbc.pc(), 0xb817);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb815), 0xcb);
        EXPECT(gbc.readMem(0xb816), 0x6a);
        // CB 6A 029E
        gbc.setState(0x6e33, 0x4b73, 0x2a10, 0x480b, 0xa64d, 0x3dc8, 0x0, 0x1);
        gbc.writeMem(0x6e33, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x4b73);
        EXPECT(gbc.pc(), 0x6e35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 029F
        gbc.setState(0x342b, 0x435a, 0xf640, 0x930c, 0xdf8, 0x4dbe, 0x1, 0x1);
        gbc.writeMem(0x342b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x435a);
        EXPECT(gbc.pc(), 0x342d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02A0
        gbc.setState(0x26a2, 0x9bec, 0xeff0, 0xa588, 0xcf41, 0x5d77, 0x0, 0x0);
        gbc.writeMem(0x26a2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x9bec);
        EXPECT(gbc.pc(), 0x26a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 02A1
        gbc.setState(0x5f31, 0x8e5e, 0x3be0, 0xfaf9, 0x9b9f, 0xd12a, 0x1, 0x0);
        gbc.writeMem(0x5f31, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x8e5e);
        EXPECT(gbc.pc(), 0x5f33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02A3
        gbc.setState(0x1f00, 0xa709, 0x320, 0x40fd, 0x116b, 0x9d86, 0x0, 0x0);
        gbc.writeMem(0x1f00, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xa709);
        EXPECT(gbc.pc(), 0x1f02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02A4
        gbc.setState(0x9556, 0x2ae, 0x2850, 0xff54, 0x44a6, 0x48a, 0x1, 0x1);
        gbc.writeMem(0x9556, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x2ae);
        EXPECT(gbc.pc(), 0x9558);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9556), 0xcb);
        EXPECT(gbc.readMem(0x9557), 0x6a);
        // CB 6A 02A5
        gbc.setState(0xe2d4, 0x2006, 0x1470, 0x305a, 0x4b27, 0x216f, 0x0, 0x0);
        gbc.writeMem(0xe2d4, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x2006);
        EXPECT(gbc.pc(), 0xe2d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2d4), 0xcb);
        EXPECT(gbc.readMem(0xe2d5), 0x6a);
        // CB 6A 02A6
        gbc.setState(0x8ef9, 0x254d, 0xa210, 0x12b5, 0xb255, 0x5226, 0x0, 0x0);
        gbc.writeMem(0x8ef9, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x254d);
        EXPECT(gbc.pc(), 0x8efb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ef9), 0xcb);
        EXPECT(gbc.readMem(0x8efa), 0x6a);
        // CB 6A 02A7
        gbc.setState(0x3228, 0x8349, 0x2850, 0xcc92, 0x48e4, 0x5555, 0x1, 0x0);
        gbc.writeMem(0x3228, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x8349);
        EXPECT(gbc.pc(), 0x322a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 02A8
        gbc.setState(0xbfd0, 0x70b1, 0x7df0, 0xd4a5, 0xc242, 0x378f, 0x1, 0x1);
        gbc.writeMem(0xbfd0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x70b1);
        EXPECT(gbc.pc(), 0xbfd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfd0), 0xcb);
        EXPECT(gbc.readMem(0xbfd1), 0x6a);
        // CB 6A 02A9
        gbc.setState(0x5bc5, 0xbaf9, 0xde20, 0x5a04, 0xb44f, 0xd8ab, 0x0, 0x1);
        gbc.writeMem(0x5bc5, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xbaf9);
        EXPECT(gbc.pc(), 0x5bc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02AA
        gbc.setState(0x3a34, 0x85a7, 0xdd60, 0xd791, 0x87a4, 0x4daa, 0x1, 0x1);
        gbc.writeMem(0x3a34, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x85a7);
        EXPECT(gbc.pc(), 0x3a36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02AC
        gbc.setState(0x5f63, 0x40ea, 0x5020, 0x1658, 0xc479, 0x2c46, 0x1, 0x0);
        gbc.writeMem(0x5f63, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x40ea);
        EXPECT(gbc.pc(), 0x5f65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02AE
        gbc.setState(0x53f, 0x1b7a, 0x49e0, 0x372d, 0x343b, 0xf5c9, 0x0, 0x1);
        gbc.writeMem(0x53f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x1b7a);
        EXPECT(gbc.pc(), 0x541);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02B0
        gbc.setState(0x5dd3, 0x49a4, 0x9960, 0xc51e, 0x5a51, 0x1614, 0x1, 0x1);
        gbc.writeMem(0x5dd3, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x49a4);
        EXPECT(gbc.pc(), 0x5dd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02B1
        gbc.setState(0x4c16, 0xc8b9, 0x3d60, 0x75a1, 0xce1d, 0xf5cf, 0x0, 0x1);
        gbc.writeMem(0x4c16, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xc8b9);
        EXPECT(gbc.pc(), 0x4c18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02B2
        gbc.setState(0x7b6f, 0x3452, 0x6aa0, 0x12ac, 0xed32, 0x9f03, 0x0, 0x0);
        gbc.writeMem(0x7b6f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x3452);
        EXPECT(gbc.pc(), 0x7b71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02B3
        gbc.setState(0x8db7, 0xc2ee, 0x3080, 0xf42e, 0x2a98, 0x3cea, 0x1, 0x0);
        gbc.writeMem(0x8db7, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xc2ee);
        EXPECT(gbc.pc(), 0x8db9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8db7), 0xcb);
        EXPECT(gbc.readMem(0x8db8), 0x6a);
        // CB 6A 02B5
        gbc.setState(0xb34b, 0x4131, 0x4880, 0x9f3f, 0x5fce, 0x86ce, 0x1, 0x1);
        gbc.writeMem(0xb34b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x4131);
        EXPECT(gbc.pc(), 0xb34d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb34b), 0xcb);
        EXPECT(gbc.readMem(0xb34c), 0x6a);
        // CB 6A 02B6
        gbc.setState(0xbcc2, 0x3eb5, 0x4d50, 0x82f, 0xed3c, 0xfd79, 0x0, 0x1);
        gbc.writeMem(0xbcc2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x3eb5);
        EXPECT(gbc.pc(), 0xbcc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcc2), 0xcb);
        EXPECT(gbc.readMem(0xbcc3), 0x6a);
        // CB 6A 02B7
        gbc.setState(0x2458, 0xda08, 0x8340, 0xdd82, 0x4ee7, 0x6998, 0x1, 0x0);
        gbc.writeMem(0x2458, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xda08);
        EXPECT(gbc.pc(), 0x245a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02B8
        gbc.setState(0xd834, 0x5d55, 0x6a20, 0x5c22, 0xaae0, 0x7671, 0x0, 0x0);
        gbc.writeMem(0xd834, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x5d55);
        EXPECT(gbc.pc(), 0xd836);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd834), 0xcb);
        EXPECT(gbc.readMem(0xd835), 0x6a);
        // CB 6A 02B9
        gbc.setState(0x4e11, 0x9c34, 0xbf20, 0xeb9e, 0x735d, 0x6490, 0x1, 0x1);
        gbc.writeMem(0x4e11, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x9c34);
        EXPECT(gbc.pc(), 0x4e13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02BA
        gbc.setState(0x2cc9, 0x6632, 0x72d0, 0xc4c6, 0x2725, 0xc085, 0x0, 0x0);
        gbc.writeMem(0x2cc9, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x6632);
        EXPECT(gbc.pc(), 0x2ccb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 02BB
        gbc.setState(0xee4a, 0x63f0, 0x7390, 0x8e3a, 0xd2b7, 0x9cc3, 0x1, 0x0);
        gbc.writeMem(0xee4a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x63f0);
        EXPECT(gbc.pc(), 0xee4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee4a), 0xcb);
        EXPECT(gbc.readMem(0xee4b), 0x6a);
        // CB 6A 02BC
        gbc.setState(0x7dfa, 0x13e6, 0x68f0, 0xc779, 0xeeb4, 0xd71b, 0x1, 0x1);
        gbc.writeMem(0x7dfa, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x13e6);
        EXPECT(gbc.pc(), 0x7dfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 02BD
        gbc.setState(0x1d8, 0xbca1, 0x8f0, 0xf4f, 0xfe60, 0xd82, 0x1, 0x1);
        gbc.writeMem(0x1d8, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xbca1);
        EXPECT(gbc.pc(), 0x1da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 02BE
        gbc.setState(0xc67c, 0x8d1b, 0xc650, 0xb39b, 0x5a85, 0xccc2, 0x1, 0x0);
        gbc.writeMem(0xc67c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x8d1b);
        EXPECT(gbc.pc(), 0xc67e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc67c), 0xcb);
        EXPECT(gbc.readMem(0xc67d), 0x6a);
        // CB 6A 02BF
        gbc.setState(0x6a83, 0x54e2, 0x5d00, 0x7672, 0xa51b, 0xb62, 0x1, 0x0);
        gbc.writeMem(0x6a83, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x54e2);
        EXPECT(gbc.pc(), 0x6a85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02C1
        gbc.setState(0xadf9, 0xdc9e, 0xc760, 0x507c, 0x7ad0, 0x4d4a, 0x1, 0x1);
        gbc.writeMem(0xadf9, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xdc9e);
        EXPECT(gbc.pc(), 0xadfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadf9), 0xcb);
        EXPECT(gbc.readMem(0xadfa), 0x6a);
        // CB 6A 02C2
        gbc.setState(0x7522, 0xbd5, 0x63a0, 0xad0d, 0x93ef, 0x5403, 0x1, 0x1);
        gbc.writeMem(0x7522, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xbd5);
        EXPECT(gbc.pc(), 0x7524);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02C3
        gbc.setState(0x8041, 0xb620, 0x2570, 0x45a0, 0xf70b, 0x5ac2, 0x1, 0x1);
        gbc.writeMem(0x8041, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xb620);
        EXPECT(gbc.pc(), 0x8043);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8041), 0xcb);
        EXPECT(gbc.readMem(0x8042), 0x6a);
        // CB 6A 02C4
        gbc.setState(0xd641, 0xc4fe, 0x45b0, 0x631b, 0x67ca, 0xac14, 0x1, 0x0);
        gbc.writeMem(0xd641, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xc4fe);
        EXPECT(gbc.pc(), 0xd643);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd641), 0xcb);
        EXPECT(gbc.readMem(0xd642), 0x6a);
        // CB 6A 02C5
        gbc.setState(0xaf39, 0x2b39, 0x2860, 0xcbe, 0xfbe2, 0xcc1c, 0x1, 0x1);
        gbc.writeMem(0xaf39, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x2b39);
        EXPECT(gbc.pc(), 0xaf3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf39), 0xcb);
        EXPECT(gbc.readMem(0xaf3a), 0x6a);
        // CB 6A 02C6
        gbc.setState(0x2505, 0xee34, 0x9260, 0xa310, 0x1cb0, 0x71ee, 0x1, 0x0);
        gbc.writeMem(0x2505, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xee34);
        EXPECT(gbc.pc(), 0x2507);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02C7
        gbc.setState(0x7a5d, 0xeaae, 0xc420, 0xec6a, 0x7149, 0x5da, 0x1, 0x0);
        gbc.writeMem(0x7a5d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xeaae);
        EXPECT(gbc.pc(), 0x7a5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02C8
        gbc.setState(0xebc3, 0x61f, 0xdcb0, 0xa602, 0x8e81, 0x1e2d, 0x1, 0x0);
        gbc.writeMem(0xebc3, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x61f);
        EXPECT(gbc.pc(), 0xebc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebc3), 0xcb);
        EXPECT(gbc.readMem(0xebc4), 0x6a);
        // CB 6A 02C9
        gbc.setState(0x542, 0x10c9, 0x8f30, 0x8847, 0xe9f6, 0x3658, 0x1, 0x0);
        gbc.writeMem(0x542, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x10c9);
        EXPECT(gbc.pc(), 0x544);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 02CA
        gbc.setState(0xdfd2, 0xb73c, 0xb810, 0x840c, 0xdd25, 0x4bc2, 0x0, 0x0);
        gbc.writeMem(0xdfd2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xb73c);
        EXPECT(gbc.pc(), 0xdfd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfd2), 0xcb);
        EXPECT(gbc.readMem(0xdfd3), 0x6a);
        // CB 6A 02CB
        gbc.setState(0x84a3, 0xff6f, 0x1360, 0x67ec, 0xc376, 0x6563, 0x0, 0x1);
        gbc.writeMem(0x84a3, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xff6f);
        EXPECT(gbc.pc(), 0x84a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84a3), 0xcb);
        EXPECT(gbc.readMem(0x84a4), 0x6a);
        // CB 6A 02CC
        gbc.setState(0x70f6, 0xb409, 0x9e20, 0x7115, 0x35b0, 0x54fe, 0x1, 0x1);
        gbc.writeMem(0x70f6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xb409);
        EXPECT(gbc.pc(), 0x70f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02CE
        gbc.setState(0x8e1f, 0xf3ed, 0xab10, 0x6915, 0x4907, 0xec74, 0x0, 0x0);
        gbc.writeMem(0x8e1f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xf3ed);
        EXPECT(gbc.pc(), 0x8e21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e1f), 0xcb);
        EXPECT(gbc.readMem(0x8e20), 0x6a);
        // CB 6A 02CF
        gbc.setState(0x59fc, 0xb34e, 0xda70, 0x6fc0, 0xab27, 0xb62b, 0x0, 0x0);
        gbc.writeMem(0x59fc, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xb34e);
        EXPECT(gbc.pc(), 0x59fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 02D0
        gbc.setState(0x4f2f, 0x838, 0x1b40, 0x17a7, 0x5125, 0x80e8, 0x1, 0x0);
        gbc.writeMem(0x4f2f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x838);
        EXPECT(gbc.pc(), 0x4f31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02D1
        gbc.setState(0x783d, 0xa8b5, 0x9ed0, 0xc66b, 0xd3f8, 0xfa82, 0x1, 0x0);
        gbc.writeMem(0x783d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xa8b5);
        EXPECT(gbc.pc(), 0x783f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 02D2
        gbc.setState(0x75d8, 0x6a1b, 0xaf0, 0x7672, 0xe16f, 0x20d3, 0x1, 0x1);
        gbc.writeMem(0x75d8, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x6a1b);
        EXPECT(gbc.pc(), 0x75da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 02D3
        gbc.setState(0xa8af, 0xd0e2, 0xf6c0, 0x4e4e, 0x347e, 0x7b81, 0x0, 0x0);
        gbc.writeMem(0xa8af, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xd0e2);
        EXPECT(gbc.pc(), 0xa8b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8af), 0xcb);
        EXPECT(gbc.readMem(0xa8b0), 0x6a);
        // CB 6A 02D4
        gbc.setState(0x3daf, 0x4844, 0xb180, 0xe4e, 0x8810, 0x86f4, 0x0, 0x0);
        gbc.writeMem(0x3daf, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x4844);
        EXPECT(gbc.pc(), 0x3db1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02D5
        gbc.setState(0xb781, 0x984c, 0xa9d0, 0xdf27, 0x7e96, 0x366a, 0x0, 0x1);
        gbc.writeMem(0xb781, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x984c);
        EXPECT(gbc.pc(), 0xb783);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb781), 0xcb);
        EXPECT(gbc.readMem(0xb782), 0x6a);
        // CB 6A 02D7
        gbc.setState(0x6a56, 0xe844, 0x5ce0, 0xcf00, 0x86c3, 0xeaa2, 0x1, 0x0);
        gbc.writeMem(0x6a56, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xe844);
        EXPECT(gbc.pc(), 0x6a58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02D8
        gbc.setState(0xb8fe, 0x83b4, 0x6f80, 0xe925, 0x6cf5, 0x23a9, 0x1, 0x0);
        gbc.writeMem(0xb8fe, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x83b4);
        EXPECT(gbc.pc(), 0xb900);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8fe), 0xcb);
        EXPECT(gbc.readMem(0xb8ff), 0x6a);
        // CB 6A 02D9
        gbc.setState(0x14c0, 0x7517, 0xd470, 0xd32a, 0xdf2a, 0x24ee, 0x1, 0x1);
        gbc.writeMem(0x14c0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x7517);
        EXPECT(gbc.pc(), 0x14c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 02DA
        gbc.setState(0x9ed6, 0x4dfc, 0x2ce0, 0x2969, 0xf8a2, 0xe713, 0x0, 0x1);
        gbc.writeMem(0x9ed6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x4dfc);
        EXPECT(gbc.pc(), 0x9ed8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ed6), 0xcb);
        EXPECT(gbc.readMem(0x9ed7), 0x6a);
        // CB 6A 02DB
        gbc.setState(0x4676, 0x57f, 0x4140, 0x420, 0x3636, 0x623e, 0x0, 0x0);
        gbc.writeMem(0x4676, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x57f);
        EXPECT(gbc.pc(), 0x4678);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02DC
        gbc.setState(0xb97d, 0x26f1, 0xd7c0, 0x6a53, 0xabff, 0xc841, 0x1, 0x0);
        gbc.writeMem(0xb97d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x26f1);
        EXPECT(gbc.pc(), 0xb97f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb97d), 0xcb);
        EXPECT(gbc.readMem(0xb97e), 0x6a);
        // CB 6A 02DD
        gbc.setState(0x577c, 0x2b75, 0xaf20, 0x8c59, 0xa91f, 0x94b, 0x1, 0x0);
        gbc.writeMem(0x577c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x2b75);
        EXPECT(gbc.pc(), 0x577e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02DE
        gbc.setState(0x6097, 0x4d53, 0xafc0, 0xc2a7, 0x73b, 0xba5b, 0x0, 0x0);
        gbc.writeMem(0x6097, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x4d53);
        EXPECT(gbc.pc(), 0x6099);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02DF
        gbc.setState(0x8323, 0x55f0, 0xad70, 0xf254, 0x6cee, 0xb8ba, 0x1, 0x1);
        gbc.writeMem(0x8323, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x55f0);
        EXPECT(gbc.pc(), 0x8325);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8323), 0xcb);
        EXPECT(gbc.readMem(0x8324), 0x6a);
        // CB 6A 02E0
        gbc.setState(0x318d, 0x8a61, 0xf070, 0x7f47, 0x8b5c, 0x3eaa, 0x0, 0x0);
        gbc.writeMem(0x318d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x8a61);
        EXPECT(gbc.pc(), 0x318f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 02E1
        gbc.setState(0x469, 0x693b, 0x84e0, 0x643c, 0xd6d3, 0xbd8c, 0x0, 0x0);
        gbc.writeMem(0x469, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x693b);
        EXPECT(gbc.pc(), 0x46b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02E3
        gbc.setState(0x34b0, 0xeec9, 0x590, 0xde3a, 0xf3ae, 0x172a, 0x0, 0x1);
        gbc.writeMem(0x34b0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xeec9);
        EXPECT(gbc.pc(), 0x34b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 02E4
        gbc.setState(0x3592, 0xce2, 0xce60, 0x6ce1, 0x7ac4, 0x9da3, 0x1, 0x1);
        gbc.writeMem(0x3592, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xce2);
        EXPECT(gbc.pc(), 0x3594);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02E5
        gbc.setState(0xe816, 0x8b2d, 0x950, 0xe11a, 0xce85, 0x307f, 0x1, 0x1);
        gbc.writeMem(0xe816, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x8b2d);
        EXPECT(gbc.pc(), 0xe818);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe816), 0xcb);
        EXPECT(gbc.readMem(0xe817), 0x6a);
        // CB 6A 02E6
        gbc.setState(0xb80, 0x16dc, 0x7330, 0x95f2, 0x9fc1, 0x2ac1, 0x1, 0x0);
        gbc.writeMem(0xb80, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x16dc);
        EXPECT(gbc.pc(), 0xb82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 02E7
        gbc.setState(0xde20, 0x88e8, 0x2230, 0x4c6a, 0x6482, 0x8691, 0x0, 0x1);
        gbc.writeMem(0xde20, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x88e8);
        EXPECT(gbc.pc(), 0xde22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde20), 0xcb);
        EXPECT(gbc.readMem(0xde21), 0x6a);
        // CB 6A 02E8
        gbc.setState(0x2019, 0x24f1, 0x50e0, 0x77d5, 0x5909, 0xfab9, 0x1, 0x0);
        gbc.writeMem(0x2019, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x24f1);
        EXPECT(gbc.pc(), 0x201b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02E9
        gbc.setState(0x8ea8, 0xb0ed, 0x7f80, 0x89ef, 0x96f9, 0x5bc7, 0x1, 0x1);
        gbc.writeMem(0x8ea8, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xb0ed);
        EXPECT(gbc.pc(), 0x8eaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ea8), 0xcb);
        EXPECT(gbc.readMem(0x8ea9), 0x6a);
        // CB 6A 02EA
        gbc.setState(0xd077, 0x18d0, 0xe140, 0xde27, 0x3e12, 0xe57a, 0x1, 0x1);
        gbc.writeMem(0xd077, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x18d0);
        EXPECT(gbc.pc(), 0xd079);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd077), 0xcb);
        EXPECT(gbc.readMem(0xd078), 0x6a);
        // CB 6A 02EB
        gbc.setState(0x854e, 0x8c3a, 0x5d70, 0xb891, 0x68a6, 0x3030, 0x0, 0x0);
        gbc.writeMem(0x854e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x8c3a);
        EXPECT(gbc.pc(), 0x8550);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x854e), 0xcb);
        EXPECT(gbc.readMem(0x854f), 0x6a);
        // CB 6A 02EC
        gbc.setState(0xeb66, 0x6b1f, 0x5ad0, 0xf0ed, 0x4df5, 0xaf19, 0x1, 0x1);
        gbc.writeMem(0xeb66, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x6b1f);
        EXPECT(gbc.pc(), 0xeb68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb66), 0xcb);
        EXPECT(gbc.readMem(0xeb67), 0x6a);
        // CB 6A 02ED
        gbc.setState(0xbbce, 0xa4cc, 0x4cd0, 0x5a19, 0x609f, 0x6990, 0x1, 0x1);
        gbc.writeMem(0xbbce, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xa4cc);
        EXPECT(gbc.pc(), 0xbbd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbce), 0xcb);
        EXPECT(gbc.readMem(0xbbcf), 0x6a);
        // CB 6A 02EE
        gbc.setState(0x3b80, 0x3dde, 0xa770, 0x9c84, 0xb07a, 0xc19e, 0x0, 0x0);
        gbc.writeMem(0x3b80, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x3dde);
        EXPECT(gbc.pc(), 0x3b82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 02EF
        gbc.setState(0x598b, 0xd11b, 0xc7a0, 0xdb1a, 0x7407, 0x8e93, 0x0, 0x1);
        gbc.writeMem(0x598b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xd11b);
        EXPECT(gbc.pc(), 0x598d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02F0
        gbc.setState(0x4f65, 0xf26, 0x7f20, 0x6c7d, 0x39e4, 0x72cc, 0x0, 0x1);
        gbc.writeMem(0x4f65, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xf26);
        EXPECT(gbc.pc(), 0x4f67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02F2
        gbc.setState(0x7c0e, 0x151b, 0x3a90, 0xe8ce, 0x6c02, 0x4888, 0x1, 0x0);
        gbc.writeMem(0x7c0e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x151b);
        EXPECT(gbc.pc(), 0x7c10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 02F3
        gbc.setState(0x3aad, 0x672c, 0x6240, 0x6dc8, 0xdcd0, 0xded1, 0x1, 0x0);
        gbc.writeMem(0x3aad, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x672c);
        EXPECT(gbc.pc(), 0x3aaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02F4
        gbc.setState(0xa3a3, 0xe8c6, 0xef60, 0x3aeb, 0x5ae2, 0xe69c, 0x1, 0x1);
        gbc.writeMem(0xa3a3, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xe8c6);
        EXPECT(gbc.pc(), 0xa3a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3a3), 0xcb);
        EXPECT(gbc.readMem(0xa3a4), 0x6a);
        // CB 6A 02F5
        gbc.setState(0xb06f, 0xcc81, 0xd1d0, 0xdc18, 0xbf3d, 0xe016, 0x1, 0x1);
        gbc.writeMem(0xb06f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xcc81);
        EXPECT(gbc.pc(), 0xb071);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb06f), 0xcb);
        EXPECT(gbc.readMem(0xb070), 0x6a);
        // CB 6A 02F6
        gbc.setState(0xd32e, 0xeb8b, 0x9e0, 0x64c1, 0x21bc, 0x8ea0, 0x1, 0x1);
        gbc.writeMem(0xd32e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xeb8b);
        EXPECT(gbc.pc(), 0xd330);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd32e), 0xcb);
        EXPECT(gbc.readMem(0xd32f), 0x6a);
        // CB 6A 02F7
        gbc.setState(0x7446, 0xbc0, 0x7c0, 0x8242, 0xa1f1, 0x5984, 0x1, 0x0);
        gbc.writeMem(0x7446, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xbc0);
        EXPECT(gbc.pc(), 0x7448);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 02F8
        gbc.setState(0x4ddf, 0xe769, 0xbe50, 0x35c8, 0x55ce, 0xd616, 0x0, 0x0);
        gbc.writeMem(0x4ddf, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xe769);
        EXPECT(gbc.pc(), 0x4de1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 02F9
        gbc.setState(0xe95e, 0x53da, 0x3b0, 0xcf03, 0xaa9c, 0xdea9, 0x0, 0x1);
        gbc.writeMem(0xe95e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x53da);
        EXPECT(gbc.pc(), 0xe960);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe95e), 0xcb);
        EXPECT(gbc.readMem(0xe95f), 0x6a);
        // CB 6A 02FA
        gbc.setState(0x8b45, 0x98d6, 0x63e0, 0xf25a, 0x9a0f, 0x73a2, 0x0, 0x0);
        gbc.writeMem(0x8b45, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x98d6);
        EXPECT(gbc.pc(), 0x8b47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b45), 0xcb);
        EXPECT(gbc.readMem(0x8b46), 0x6a);
        // CB 6A 02FC
        gbc.setState(0x7040, 0xb9a1, 0xb9b0, 0xf97c, 0x3ca4, 0xdfbe, 0x0, 0x1);
        gbc.writeMem(0x7040, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xb9a1);
        EXPECT(gbc.pc(), 0x7042);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 02FD
        gbc.setState(0xb7f4, 0xb497, 0x3160, 0x7e30, 0xe946, 0xd411, 0x1, 0x0);
        gbc.writeMem(0xb7f4, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xb497);
        EXPECT(gbc.pc(), 0xb7f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7f4), 0xcb);
        EXPECT(gbc.readMem(0xb7f5), 0x6a);
        // CB 6A 02FE
        gbc.setState(0xb955, 0xc0e4, 0xb690, 0x9b10, 0x1a32, 0x21f5, 0x1, 0x0);
        gbc.writeMem(0xb955, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xc0e4);
        EXPECT(gbc.pc(), 0xb957);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb955), 0xcb);
        EXPECT(gbc.readMem(0xb956), 0x6a);
        // CB 6A 02FF
        gbc.setState(0x31d6, 0x14ae, 0xd990, 0xcea8, 0xb95d, 0x22c4, 0x0, 0x0);
        gbc.writeMem(0x31d6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x14ae);
        EXPECT(gbc.pc(), 0x31d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0300
        gbc.setState(0xe676, 0x1fb8, 0xb2f0, 0x111f, 0x3e49, 0x3045, 0x1, 0x1);
        gbc.writeMem(0xe676, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x1fb8);
        EXPECT(gbc.pc(), 0xe678);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe676), 0xcb);
        EXPECT(gbc.readMem(0xe677), 0x6a);
        // CB 6A 0301
        gbc.setState(0x66c9, 0xbde1, 0xb730, 0xb2a7, 0xbee0, 0x9579, 0x1, 0x1);
        gbc.writeMem(0x66c9, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xbde1);
        EXPECT(gbc.pc(), 0x66cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0302
        gbc.setState(0x7741, 0xd548, 0x37c0, 0x4da6, 0xdb1, 0x32cd, 0x1, 0x1);
        gbc.writeMem(0x7741, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xd548);
        EXPECT(gbc.pc(), 0x7743);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0303
        gbc.setState(0x82a3, 0x3c2d, 0xc2a0, 0xe9e5, 0xb8fe, 0xe740, 0x1, 0x1);
        gbc.writeMem(0x82a3, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x3c2d);
        EXPECT(gbc.pc(), 0x82a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82a3), 0xcb);
        EXPECT(gbc.readMem(0x82a4), 0x6a);
        // CB 6A 0304
        gbc.setState(0x98bf, 0xb7d, 0xa4b0, 0x7eb6, 0x7a06, 0x9979, 0x0, 0x0);
        gbc.writeMem(0x98bf, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xb7d);
        EXPECT(gbc.pc(), 0x98c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98bf), 0xcb);
        EXPECT(gbc.readMem(0x98c0), 0x6a);
        // CB 6A 0305
        gbc.setState(0x2c04, 0xe36a, 0x9ca0, 0xfa20, 0x7ff4, 0xdf5c, 0x0, 0x0);
        gbc.writeMem(0x2c04, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xe36a);
        EXPECT(gbc.pc(), 0x2c06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0306
        gbc.setState(0xdaef, 0x1b24, 0x43a0, 0xe215, 0x1a3a, 0x3881, 0x1, 0x1);
        gbc.writeMem(0xdaef, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x1b24);
        EXPECT(gbc.pc(), 0xdaf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaef), 0xcb);
        EXPECT(gbc.readMem(0xdaf0), 0x6a);
        // CB 6A 0307
        gbc.setState(0xf2c, 0x5de4, 0xad30, 0x2b8d, 0x3c1e, 0x13e5, 0x1, 0x0);
        gbc.writeMem(0xf2c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x5de4);
        EXPECT(gbc.pc(), 0xf2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0308
        gbc.setState(0x2a39, 0x75ea, 0xa4d0, 0x13d7, 0xbb7a, 0x2c7c, 0x1, 0x0);
        gbc.writeMem(0x2a39, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x75ea);
        EXPECT(gbc.pc(), 0x2a3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0309
        gbc.setState(0x4a9, 0xe9fd, 0xa7a0, 0x7da9, 0xd308, 0xa07f, 0x0, 0x0);
        gbc.writeMem(0x4a9, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xe9fd);
        EXPECT(gbc.pc(), 0x4ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 030A
        gbc.setState(0xb10c, 0x9871, 0xe380, 0x73ed, 0xc28e, 0x3fab, 0x1, 0x1);
        gbc.writeMem(0xb10c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x9871);
        EXPECT(gbc.pc(), 0xb10e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb10c), 0xcb);
        EXPECT(gbc.readMem(0xb10d), 0x6a);
        // CB 6A 030B
        gbc.setState(0xebc8, 0xbeeb, 0xe350, 0x922b, 0x84b2, 0xb2a5, 0x1, 0x0);
        gbc.writeMem(0xebc8, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xbeeb);
        EXPECT(gbc.pc(), 0xebca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebc8), 0xcb);
        EXPECT(gbc.readMem(0xebc9), 0x6a);
        // CB 6A 030C
        gbc.setState(0x38c1, 0x8475, 0x1890, 0xc860, 0x6bb0, 0xcc0f, 0x0, 0x1);
        gbc.writeMem(0x38c1, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x8475);
        EXPECT(gbc.pc(), 0x38c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 030D
        gbc.setState(0xe8e3, 0x752d, 0x6740, 0xf4b2, 0x1b43, 0x8576, 0x0, 0x0);
        gbc.writeMem(0xe8e3, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x752d);
        EXPECT(gbc.pc(), 0xe8e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8e3), 0xcb);
        EXPECT(gbc.readMem(0xe8e4), 0x6a);
        // CB 6A 030E
        gbc.setState(0x7010, 0xdf3, 0x7ad0, 0x424c, 0x518a, 0xf09b, 0x1, 0x0);
        gbc.writeMem(0x7010, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xdf3);
        EXPECT(gbc.pc(), 0x7012);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 030F
        gbc.setState(0x8b1e, 0x40a6, 0xf030, 0xdf4, 0xc26b, 0x116f, 0x1, 0x0);
        gbc.writeMem(0x8b1e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x40a6);
        EXPECT(gbc.pc(), 0x8b20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b1e), 0xcb);
        EXPECT(gbc.readMem(0x8b1f), 0x6a);
        // CB 6A 0310
        gbc.setState(0x1b4d, 0xc8cb, 0x1e40, 0x1664, 0x3f53, 0x175c, 0x1, 0x0);
        gbc.writeMem(0x1b4d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xc8cb);
        EXPECT(gbc.pc(), 0x1b4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0311
        gbc.setState(0x9f13, 0x1354, 0x36c0, 0xfae5, 0x1353, 0xb68a, 0x0, 0x1);
        gbc.writeMem(0x9f13, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x1354);
        EXPECT(gbc.pc(), 0x9f15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f13), 0xcb);
        EXPECT(gbc.readMem(0x9f14), 0x6a);
        // CB 6A 0312
        gbc.setState(0x27ed, 0xda9c, 0x4160, 0x6549, 0xceb, 0xadb5, 0x0, 0x1);
        gbc.writeMem(0x27ed, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xda9c);
        EXPECT(gbc.pc(), 0x27ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0313
        gbc.setState(0xe591, 0x5274, 0x57b0, 0x55b9, 0x76ef, 0x41bf, 0x1, 0x1);
        gbc.writeMem(0xe591, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x5274);
        EXPECT(gbc.pc(), 0xe593);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe591), 0xcb);
        EXPECT(gbc.readMem(0xe592), 0x6a);
        // CB 6A 0314
        gbc.setState(0x2732, 0x7472, 0x4240, 0xfd4, 0x1fb6, 0x585d, 0x0, 0x1);
        gbc.writeMem(0x2732, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x7472);
        EXPECT(gbc.pc(), 0x2734);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0315
        gbc.setState(0x71c0, 0xb4db, 0x9310, 0x6fed, 0xeb8e, 0xdcc3, 0x0, 0x1);
        gbc.writeMem(0x71c0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xb4db);
        EXPECT(gbc.pc(), 0x71c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0316
        gbc.setState(0x310, 0x86d8, 0xc730, 0x7464, 0x357a, 0xffcd, 0x0, 0x1);
        gbc.writeMem(0x310, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x86d8);
        EXPECT(gbc.pc(), 0x312);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0317
        gbc.setState(0x8c3e, 0x8739, 0x5e80, 0x3b9b, 0xa1b, 0xf4e1, 0x0, 0x0);
        gbc.writeMem(0x8c3e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x8739);
        EXPECT(gbc.pc(), 0x8c40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c3e), 0xcb);
        EXPECT(gbc.readMem(0x8c3f), 0x6a);
        // CB 6A 0318
        gbc.setState(0xc58d, 0xfff9, 0xfdd0, 0xba62, 0xba48, 0xe11, 0x0, 0x0);
        gbc.writeMem(0xc58d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xfff9);
        EXPECT(gbc.pc(), 0xc58f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc58d), 0xcb);
        EXPECT(gbc.readMem(0xc58e), 0x6a);
        // CB 6A 0319
        gbc.setState(0xe0fa, 0x229, 0x6d80, 0xee00, 0x9e41, 0x3e39, 0x1, 0x0);
        gbc.writeMem(0xe0fa, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x229);
        EXPECT(gbc.pc(), 0xe0fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0fa), 0xcb);
        EXPECT(gbc.readMem(0xe0fb), 0x6a);
        // CB 6A 031A
        gbc.setState(0x4c85, 0x480a, 0x650, 0x9794, 0xa092, 0x1d0a, 0x1, 0x0);
        gbc.writeMem(0x4c85, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x480a);
        EXPECT(gbc.pc(), 0x4c87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 031B
        gbc.setState(0x939e, 0x5346, 0xf630, 0xa7dc, 0x2b55, 0xde9c, 0x0, 0x0);
        gbc.writeMem(0x939e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x5346);
        EXPECT(gbc.pc(), 0x93a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x939e), 0xcb);
        EXPECT(gbc.readMem(0x939f), 0x6a);
        // CB 6A 031C
        gbc.setState(0x2023, 0x53f7, 0x45f0, 0xbe7e, 0xc670, 0x249e, 0x1, 0x1);
        gbc.writeMem(0x2023, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x53f7);
        EXPECT(gbc.pc(), 0x2025);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 031D
        gbc.setState(0xd2af, 0xb78f, 0x8f60, 0xf74a, 0x2aa6, 0x3efd, 0x1, 0x0);
        gbc.writeMem(0xd2af, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xb78f);
        EXPECT(gbc.pc(), 0xd2b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2af), 0xcb);
        EXPECT(gbc.readMem(0xd2b0), 0x6a);
        // CB 6A 031E
        gbc.setState(0x54b5, 0x30b3, 0xc490, 0x4a52, 0xb0c0, 0x8d9c, 0x1, 0x1);
        gbc.writeMem(0x54b5, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x30b3);
        EXPECT(gbc.pc(), 0x54b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 031F
        gbc.setState(0x2499, 0x1bbd, 0x9310, 0xba80, 0x2985, 0xf32, 0x1, 0x1);
        gbc.writeMem(0x2499, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x1bbd);
        EXPECT(gbc.pc(), 0x249b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0320
        gbc.setState(0x18c2, 0x66b6, 0x8ee0, 0x94e1, 0xc91e, 0xbf70, 0x1, 0x1);
        gbc.writeMem(0x18c2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x66b6);
        EXPECT(gbc.pc(), 0x18c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0321
        gbc.setState(0x7b00, 0xbbf0, 0x4a60, 0xde45, 0x390c, 0xe656, 0x1, 0x0);
        gbc.writeMem(0x7b00, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xbbf0);
        EXPECT(gbc.pc(), 0x7b02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0322
        gbc.setState(0xb624, 0x8a71, 0x1790, 0x699f, 0xbbbb, 0x2ae4, 0x0, 0x0);
        gbc.writeMem(0xb624, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x8a71);
        EXPECT(gbc.pc(), 0xb626);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb624), 0xcb);
        EXPECT(gbc.readMem(0xb625), 0x6a);
        // CB 6A 0323
        gbc.setState(0xd831, 0x57e2, 0x8830, 0xd32b, 0xf5ea, 0x20c0, 0x0, 0x0);
        gbc.writeMem(0xd831, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x57e2);
        EXPECT(gbc.pc(), 0xd833);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd831), 0xcb);
        EXPECT(gbc.readMem(0xd832), 0x6a);
        // CB 6A 0324
        gbc.setState(0xa9bd, 0x187d, 0x4500, 0x2ce8, 0x4f3, 0x2c59, 0x1, 0x1);
        gbc.writeMem(0xa9bd, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x187d);
        EXPECT(gbc.pc(), 0xa9bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9bd), 0xcb);
        EXPECT(gbc.readMem(0xa9be), 0x6a);
        // CB 6A 0325
        gbc.setState(0x4abd, 0x220b, 0x9900, 0xac6b, 0xc40c, 0xb1d0, 0x1, 0x1);
        gbc.writeMem(0x4abd, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x220b);
        EXPECT(gbc.pc(), 0x4abf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0326
        gbc.setState(0xba1c, 0x5c91, 0x98a0, 0x1d6f, 0x9264, 0xedc6, 0x0, 0x0);
        gbc.writeMem(0xba1c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x5c91);
        EXPECT(gbc.pc(), 0xba1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba1c), 0xcb);
        EXPECT(gbc.readMem(0xba1d), 0x6a);
        // CB 6A 0327
        gbc.setState(0xc267, 0xc3fb, 0xe7c0, 0x73c4, 0x302e, 0xfd35, 0x1, 0x0);
        gbc.writeMem(0xc267, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xc3fb);
        EXPECT(gbc.pc(), 0xc269);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc267), 0xcb);
        EXPECT(gbc.readMem(0xc268), 0x6a);
        // CB 6A 0328
        gbc.setState(0x317a, 0xd82, 0x69a0, 0x1470, 0x5d3, 0x984c, 0x1, 0x0);
        gbc.writeMem(0x317a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd82);
        EXPECT(gbc.pc(), 0x317c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0329
        gbc.setState(0x8347, 0xd93a, 0xaa20, 0x8912, 0x28aa, 0x91ac, 0x1, 0x0);
        gbc.writeMem(0x8347, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xd93a);
        EXPECT(gbc.pc(), 0x8349);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8347), 0xcb);
        EXPECT(gbc.readMem(0x8348), 0x6a);
        // CB 6A 032A
        gbc.setState(0x9a2d, 0xff49, 0x2300, 0xcddc, 0xf88f, 0xffb2, 0x1, 0x1);
        gbc.writeMem(0x9a2d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xff49);
        EXPECT(gbc.pc(), 0x9a2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a2d), 0xcb);
        EXPECT(gbc.readMem(0x9a2e), 0x6a);
        // CB 6A 032B
        gbc.setState(0x2db0, 0xceee, 0xb50, 0xaeb3, 0xf52d, 0xb262, 0x1, 0x1);
        gbc.writeMem(0x2db0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xceee);
        EXPECT(gbc.pc(), 0x2db2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 032C
        gbc.setState(0xe1, 0x4ffd, 0x7b70, 0xa57f, 0x817e, 0x18bc, 0x1, 0x1);
        gbc.writeMem(0xe1, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x4ffd);
        EXPECT(gbc.pc(), 0xe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 032D
        gbc.setState(0xbb08, 0x716e, 0x6ec0, 0x9f2, 0x9032, 0x290a, 0x0, 0x0);
        gbc.writeMem(0xbb08, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x716e);
        EXPECT(gbc.pc(), 0xbb0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb08), 0xcb);
        EXPECT(gbc.readMem(0xbb09), 0x6a);
        // CB 6A 032F
        gbc.setState(0x346e, 0x8414, 0xa0a0, 0xf06f, 0x99ab, 0xbcca, 0x0, 0x0);
        gbc.writeMem(0x346e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x8414);
        EXPECT(gbc.pc(), 0x3470);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0330
        gbc.setState(0x46c2, 0x6ac7, 0x5ed0, 0xa15, 0x1fc1, 0x53b6, 0x0, 0x1);
        gbc.writeMem(0x46c2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x6ac7);
        EXPECT(gbc.pc(), 0x46c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0331
        gbc.setState(0xdbb7, 0xd7fb, 0xd3f0, 0xd213, 0x46db, 0x91f2, 0x1, 0x1);
        gbc.writeMem(0xdbb7, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xd7fb);
        EXPECT(gbc.pc(), 0xdbb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbb7), 0xcb);
        EXPECT(gbc.readMem(0xdbb8), 0x6a);
        // CB 6A 0332
        gbc.setState(0x9242, 0x83bf, 0x70f0, 0x95e1, 0x89b8, 0x634d, 0x1, 0x0);
        gbc.writeMem(0x9242, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x83bf);
        EXPECT(gbc.pc(), 0x9244);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9242), 0xcb);
        EXPECT(gbc.readMem(0x9243), 0x6a);
        // CB 6A 0333
        gbc.setState(0x89c5, 0xef10, 0xbb50, 0xe144, 0x6240, 0xa4ae, 0x0, 0x0);
        gbc.writeMem(0x89c5, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xef10);
        EXPECT(gbc.pc(), 0x89c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89c5), 0xcb);
        EXPECT(gbc.readMem(0x89c6), 0x6a);
        // CB 6A 0334
        gbc.setState(0xa5a2, 0xd42e, 0x2bd0, 0x220a, 0xf1b4, 0xd0a6, 0x0, 0x0);
        gbc.writeMem(0xa5a2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd42e);
        EXPECT(gbc.pc(), 0xa5a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5a2), 0xcb);
        EXPECT(gbc.readMem(0xa5a3), 0x6a);
        // CB 6A 0335
        gbc.setState(0xa8b5, 0x25d, 0xd620, 0x873a, 0xba77, 0x1449, 0x0, 0x0);
        gbc.writeMem(0xa8b5, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x25d);
        EXPECT(gbc.pc(), 0xa8b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8b5), 0xcb);
        EXPECT(gbc.readMem(0xa8b6), 0x6a);
        // CB 6A 0337
        gbc.setState(0xa35f, 0x484, 0x6040, 0x69c1, 0x7848, 0xa8f1, 0x1, 0x1);
        gbc.writeMem(0xa35f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x484);
        EXPECT(gbc.pc(), 0xa361);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa35f), 0xcb);
        EXPECT(gbc.readMem(0xa360), 0x6a);
        // CB 6A 0338
        gbc.setState(0x28eb, 0xe23a, 0xb3f0, 0x6f53, 0x7484, 0xa54c, 0x1, 0x1);
        gbc.writeMem(0x28eb, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xe23a);
        EXPECT(gbc.pc(), 0x28ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0339
        gbc.setState(0x639b, 0x738f, 0x7be0, 0x1796, 0x58ed, 0xc414, 0x1, 0x0);
        gbc.writeMem(0x639b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x738f);
        EXPECT(gbc.pc(), 0x639d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 033A
        gbc.setState(0x5dd4, 0x7278, 0xa660, 0x6e91, 0x7246, 0x5b0b, 0x0, 0x1);
        gbc.writeMem(0x5dd4, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x7278);
        EXPECT(gbc.pc(), 0x5dd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 033B
        gbc.setState(0xeb1, 0xe5a9, 0x1790, 0x8097, 0xd9e2, 0x3b30, 0x1, 0x1);
        gbc.writeMem(0xeb1, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xe5a9);
        EXPECT(gbc.pc(), 0xeb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 033C
        gbc.setState(0xc054, 0x29e0, 0x5ef0, 0x6238, 0x510a, 0xe979, 0x0, 0x1);
        gbc.writeMem(0xc054, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x29e0);
        EXPECT(gbc.pc(), 0xc056);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc054), 0xcb);
        EXPECT(gbc.readMem(0xc055), 0x6a);
        // CB 6A 033D
        gbc.setState(0x437d, 0xcdc5, 0x7370, 0xf3f1, 0xb510, 0xf961, 0x0, 0x0);
        gbc.writeMem(0x437d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xcdc5);
        EXPECT(gbc.pc(), 0x437f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 033E
        gbc.setState(0xbd39, 0xc6e9, 0x5a10, 0xd9df, 0x91ed, 0xb23a, 0x1, 0x0);
        gbc.writeMem(0xbd39, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xc6e9);
        EXPECT(gbc.pc(), 0xbd3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd39), 0xcb);
        EXPECT(gbc.readMem(0xbd3a), 0x6a);
        // CB 6A 033F
        gbc.setState(0x6fea, 0xacdb, 0xf510, 0x4110, 0xc4a7, 0xe38b, 0x0, 0x1);
        gbc.writeMem(0x6fea, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xacdb);
        EXPECT(gbc.pc(), 0x6fec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0340
        gbc.setState(0x4cc2, 0x49c6, 0x7e0, 0x9730, 0xb05f, 0x9c83, 0x0, 0x0);
        gbc.writeMem(0x4cc2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x49c6);
        EXPECT(gbc.pc(), 0x4cc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0341
        gbc.setState(0x9e43, 0x52dd, 0xfa80, 0x4f08, 0x81da, 0x10d7, 0x0, 0x1);
        gbc.writeMem(0x9e43, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x52dd);
        EXPECT(gbc.pc(), 0x9e45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e43), 0xcb);
        EXPECT(gbc.readMem(0x9e44), 0x6a);
        // CB 6A 0346
        gbc.setState(0x981e, 0x63a7, 0x6590, 0xad20, 0x3f23, 0x1bfa, 0x0, 0x0);
        gbc.writeMem(0x981e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x63a7);
        EXPECT(gbc.pc(), 0x9820);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x981e), 0xcb);
        EXPECT(gbc.readMem(0x981f), 0x6a);
        // CB 6A 0347
        gbc.setState(0x4672, 0x7f0e, 0x32e0, 0xc291, 0xb0c6, 0xdd4c, 0x0, 0x0);
        gbc.writeMem(0x4672, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x7f0e);
        EXPECT(gbc.pc(), 0x4674);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0348
        gbc.setState(0xe5fe, 0xdc39, 0xb690, 0xf9c7, 0x5e39, 0xe0f7, 0x1, 0x0);
        gbc.writeMem(0xe5fe, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xdc39);
        EXPECT(gbc.pc(), 0xe600);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5fe), 0xcb);
        EXPECT(gbc.readMem(0xe5ff), 0x6a);
        // CB 6A 0349
        gbc.setState(0x6415, 0xd626, 0xcde0, 0x1428, 0x83f3, 0x5ebb, 0x1, 0x1);
        gbc.writeMem(0x6415, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xd626);
        EXPECT(gbc.pc(), 0x6417);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 034B
        gbc.setState(0x372e, 0xf015, 0x28c0, 0x389d, 0x4fdd, 0x2fda, 0x1, 0x1);
        gbc.writeMem(0x372e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xf015);
        EXPECT(gbc.pc(), 0x3730);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 034C
        gbc.setState(0xa9d3, 0x13b9, 0x2120, 0x438, 0x62c3, 0xc902, 0x1, 0x1);
        gbc.writeMem(0xa9d3, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x13b9);
        EXPECT(gbc.pc(), 0xa9d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9d3), 0xcb);
        EXPECT(gbc.readMem(0xa9d4), 0x6a);
        // CB 6A 034D
        gbc.setState(0x6508, 0x9c66, 0xfdd0, 0x9f0, 0x9255, 0x98ae, 0x1, 0x1);
        gbc.writeMem(0x6508, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x9c66);
        EXPECT(gbc.pc(), 0x650a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 034E
        gbc.setState(0x6273, 0x3000, 0x9400, 0x48e4, 0xdbe3, 0x7ba4, 0x1, 0x0);
        gbc.writeMem(0x6273, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x3000);
        EXPECT(gbc.pc(), 0x6275);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 034F
        gbc.setState(0x570f, 0xec0, 0xe8d0, 0xbcd7, 0xdab, 0x2b91, 0x0, 0x1);
        gbc.writeMem(0x570f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xec0);
        EXPECT(gbc.pc(), 0x5711);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0350
        gbc.setState(0x6401, 0x816b, 0xbb70, 0x48b1, 0xa52e, 0x5d5b, 0x1, 0x1);
        gbc.writeMem(0x6401, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x816b);
        EXPECT(gbc.pc(), 0x6403);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0351
        gbc.setState(0x6565, 0xa48c, 0x4d10, 0x6487, 0xee34, 0x7dbe, 0x0, 0x0);
        gbc.writeMem(0x6565, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xa48c);
        EXPECT(gbc.pc(), 0x6567);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0352
        gbc.setState(0x9f9b, 0x8260, 0xf240, 0x15f3, 0x1d22, 0xa8c0, 0x1, 0x0);
        gbc.writeMem(0x9f9b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x8260);
        EXPECT(gbc.pc(), 0x9f9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f9b), 0xcb);
        EXPECT(gbc.readMem(0x9f9c), 0x6a);
        // CB 6A 0353
        gbc.setState(0x358b, 0xa3f3, 0x39a0, 0x6fbb, 0x2f45, 0xbad, 0x0, 0x1);
        gbc.writeMem(0x358b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xa3f3);
        EXPECT(gbc.pc(), 0x358d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0354
        gbc.setState(0x12df, 0x4128, 0x200, 0x8117, 0x38ef, 0x6308, 0x1, 0x1);
        gbc.writeMem(0x12df, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x4128);
        EXPECT(gbc.pc(), 0x12e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0355
        gbc.setState(0xaef8, 0xa87d, 0x3100, 0x3229, 0x2cf7, 0xfd45, 0x0, 0x1);
        gbc.writeMem(0xaef8, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xa87d);
        EXPECT(gbc.pc(), 0xaefa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaef8), 0xcb);
        EXPECT(gbc.readMem(0xaef9), 0x6a);
        // CB 6A 0356
        gbc.setState(0x870d, 0xdbda, 0x6a10, 0x457e, 0xd694, 0xb6ef, 0x1, 0x1);
        gbc.writeMem(0x870d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xdbda);
        EXPECT(gbc.pc(), 0x870f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x870d), 0xcb);
        EXPECT(gbc.readMem(0x870e), 0x6a);
        // CB 6A 0357
        gbc.setState(0x9c2e, 0xf04c, 0x40a0, 0x2e, 0xc108, 0x1beb, 0x1, 0x1);
        gbc.writeMem(0x9c2e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xf04c);
        EXPECT(gbc.pc(), 0x9c30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c2e), 0xcb);
        EXPECT(gbc.readMem(0x9c2f), 0x6a);
        // CB 6A 0359
        gbc.setState(0x1fa, 0x5f39, 0x90c0, 0x5e90, 0x2165, 0xeddc, 0x1, 0x0);
        gbc.writeMem(0x1fa, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x5f39);
        EXPECT(gbc.pc(), 0x1fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 035A
        gbc.setState(0xe952, 0xa682, 0x5100, 0xd362, 0x9a87, 0xbe9f, 0x1, 0x1);
        gbc.writeMem(0xe952, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xa682);
        EXPECT(gbc.pc(), 0xe954);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe952), 0xcb);
        EXPECT(gbc.readMem(0xe953), 0x6a);
        // CB 6A 035B
        gbc.setState(0x9f97, 0xfa21, 0x87b0, 0x6714, 0xc921, 0x6113, 0x0, 0x1);
        gbc.writeMem(0x9f97, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xfa21);
        EXPECT(gbc.pc(), 0x9f99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f97), 0xcb);
        EXPECT(gbc.readMem(0x9f98), 0x6a);
        // CB 6A 035D
        gbc.setState(0x696f, 0x8899, 0x43d0, 0xfcd9, 0xffc9, 0x49c9, 0x1, 0x0);
        gbc.writeMem(0x696f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x8899);
        EXPECT(gbc.pc(), 0x6971);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 035E
        gbc.setState(0x6c6f, 0xc4ec, 0x4040, 0x62c6, 0x4097, 0x97c4, 0x1, 0x0);
        gbc.writeMem(0x6c6f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xc4ec);
        EXPECT(gbc.pc(), 0x6c71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 035F
        gbc.setState(0xa200, 0x882f, 0x9f0, 0xd9d1, 0x774c, 0xd7f8, 0x0, 0x0);
        gbc.writeMem(0xa200, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x882f);
        EXPECT(gbc.pc(), 0xa202);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa200), 0xcb);
        EXPECT(gbc.readMem(0xa201), 0x6a);
        // CB 6A 0360
        gbc.setState(0x62d5, 0xb791, 0xd2b0, 0xf49f, 0x1b4, 0x4b1e, 0x0, 0x1);
        gbc.writeMem(0x62d5, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xb791);
        EXPECT(gbc.pc(), 0x62d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0361
        gbc.setState(0x5d08, 0xbe84, 0x3500, 0x3e47, 0x4c33, 0xedf8, 0x0, 0x0);
        gbc.writeMem(0x5d08, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xbe84);
        EXPECT(gbc.pc(), 0x5d0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0362
        gbc.setState(0xdf2e, 0xaee7, 0x1ba0, 0x8009, 0x3230, 0x5462, 0x0, 0x0);
        gbc.writeMem(0xdf2e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xaee7);
        EXPECT(gbc.pc(), 0xdf30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf2e), 0xcb);
        EXPECT(gbc.readMem(0xdf2f), 0x6a);
        // CB 6A 0363
        gbc.setState(0x1108, 0xb840, 0x3630, 0xfff9, 0xb4c0, 0xf054, 0x1, 0x0);
        gbc.writeMem(0x1108, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xb840);
        EXPECT(gbc.pc(), 0x110a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0364
        gbc.setState(0x27a8, 0x1389, 0x200, 0xaec0, 0xac67, 0x6e00, 0x0, 0x0);
        gbc.writeMem(0x27a8, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x1389);
        EXPECT(gbc.pc(), 0x27aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0365
        gbc.setState(0x2046, 0x6ad4, 0x6b20, 0x5c7, 0x403d, 0x86d6, 0x0, 0x0);
        gbc.writeMem(0x2046, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x6ad4);
        EXPECT(gbc.pc(), 0x2048);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0366
        gbc.setState(0x3845, 0x4262, 0x5090, 0x30e5, 0x4f29, 0xc96, 0x1, 0x1);
        gbc.writeMem(0x3845, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x4262);
        EXPECT(gbc.pc(), 0x3847);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0367
        gbc.setState(0x8e84, 0x9432, 0x6d30, 0x67e8, 0x1f9d, 0x5d26, 0x0, 0x0);
        gbc.writeMem(0x8e84, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x9432);
        EXPECT(gbc.pc(), 0x8e86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e84), 0xcb);
        EXPECT(gbc.readMem(0x8e85), 0x6a);
        // CB 6A 0368
        gbc.setState(0x71f1, 0x944b, 0x4d40, 0xe3e4, 0xcf36, 0x492e, 0x0, 0x1);
        gbc.writeMem(0x71f1, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x944b);
        EXPECT(gbc.pc(), 0x71f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0369
        gbc.setState(0xe7c7, 0xf4f5, 0x4de0, 0x1694, 0x6045, 0xded2, 0x0, 0x0);
        gbc.writeMem(0xe7c7, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xf4f5);
        EXPECT(gbc.pc(), 0xe7c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7c7), 0xcb);
        EXPECT(gbc.readMem(0xe7c8), 0x6a);
        // CB 6A 036A
        gbc.setState(0x7d2a, 0x273c, 0xc650, 0x4747, 0xe932, 0xfee, 0x1, 0x0);
        gbc.writeMem(0x7d2a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x273c);
        EXPECT(gbc.pc(), 0x7d2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 036C
        gbc.setState(0x4e79, 0xba36, 0xc440, 0x814a, 0x254b, 0x3fd9, 0x0, 0x1);
        gbc.writeMem(0x4e79, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xba36);
        EXPECT(gbc.pc(), 0x4e7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 036D
        gbc.setState(0x7781, 0x7675, 0x3ab0, 0x2f27, 0xd452, 0xcb76, 0x1, 0x1);
        gbc.writeMem(0x7781, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x7675);
        EXPECT(gbc.pc(), 0x7783);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 036E
        gbc.setState(0xba0c, 0x3254, 0x24c0, 0x7248, 0xeb75, 0x40e6, 0x0, 0x0);
        gbc.writeMem(0xba0c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x3254);
        EXPECT(gbc.pc(), 0xba0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba0c), 0xcb);
        EXPECT(gbc.readMem(0xba0d), 0x6a);
        // CB 6A 036F
        gbc.setState(0x470b, 0x5425, 0xe020, 0x8945, 0x15c2, 0xaf96, 0x0, 0x0);
        gbc.writeMem(0x470b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x5425);
        EXPECT(gbc.pc(), 0x470d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0370
        gbc.setState(0x4c2a, 0x5115, 0xc680, 0x66ad, 0xae32, 0x83bd, 0x1, 0x1);
        gbc.writeMem(0x4c2a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x5115);
        EXPECT(gbc.pc(), 0x4c2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0371
        gbc.setState(0xea03, 0x7e4c, 0x73b0, 0xbce6, 0xa25f, 0xd279, 0x1, 0x0);
        gbc.writeMem(0xea03, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x7e4c);
        EXPECT(gbc.pc(), 0xea05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea03), 0xcb);
        EXPECT(gbc.readMem(0xea04), 0x6a);
        // CB 6A 0372
        gbc.setState(0xc123, 0x240c, 0x8cf0, 0x1574, 0xfafb, 0xb107, 0x1, 0x1);
        gbc.writeMem(0xc123, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x240c);
        EXPECT(gbc.pc(), 0xc125);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc123), 0xcb);
        EXPECT(gbc.readMem(0xc124), 0x6a);
        // CB 6A 0373
        gbc.setState(0x5eb4, 0x8126, 0x4950, 0xcd2b, 0x6c57, 0x45ad, 0x1, 0x1);
        gbc.writeMem(0x5eb4, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x8126);
        EXPECT(gbc.pc(), 0x5eb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0374
        gbc.setState(0x34db, 0x2b64, 0x8210, 0x335c, 0xe47b, 0xd4ec, 0x0, 0x0);
        gbc.writeMem(0x34db, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x2b64);
        EXPECT(gbc.pc(), 0x34dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0375
        gbc.setState(0x51b9, 0x442c, 0x9480, 0x245, 0x353c, 0x881f, 0x0, 0x1);
        gbc.writeMem(0x51b9, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x442c);
        EXPECT(gbc.pc(), 0x51bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0376
        gbc.setState(0x6830, 0x17f1, 0x65c0, 0x4cf0, 0xb45, 0x38a4, 0x0, 0x0);
        gbc.writeMem(0x6830, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x17f1);
        EXPECT(gbc.pc(), 0x6832);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0377
        gbc.setState(0xb6c4, 0xe3d9, 0xdd0, 0xcc9b, 0xa250, 0x7471, 0x1, 0x0);
        gbc.writeMem(0xb6c4, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xe3d9);
        EXPECT(gbc.pc(), 0xb6c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6c4), 0xcb);
        EXPECT(gbc.readMem(0xb6c5), 0x6a);
        // CB 6A 0378
        gbc.setState(0x1931, 0xf24f, 0x76d0, 0x21bd, 0x18f2, 0xc60e, 0x1, 0x1);
        gbc.writeMem(0x1931, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xf24f);
        EXPECT(gbc.pc(), 0x1933);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0379
        gbc.setState(0x8082, 0x1ed8, 0xac30, 0xfc4d, 0xbaef, 0x2ef4, 0x0, 0x1);
        gbc.writeMem(0x8082, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x1ed8);
        EXPECT(gbc.pc(), 0x8084);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8082), 0xcb);
        EXPECT(gbc.readMem(0x8083), 0x6a);
        // CB 6A 037A
        gbc.setState(0x873d, 0xbfc4, 0x4000, 0x1890, 0xc770, 0x5dae, 0x1, 0x1);
        gbc.writeMem(0x873d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xbfc4);
        EXPECT(gbc.pc(), 0x873f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x873d), 0xcb);
        EXPECT(gbc.readMem(0x873e), 0x6a);
        // CB 6A 037B
        gbc.setState(0x950e, 0x5d0b, 0x99b0, 0x3dd, 0x31d3, 0xf01e, 0x1, 0x0);
        gbc.writeMem(0x950e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x5d0b);
        EXPECT(gbc.pc(), 0x9510);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x950e), 0xcb);
        EXPECT(gbc.readMem(0x950f), 0x6a);
        // CB 6A 037C
        gbc.setState(0x6eda, 0xa2aa, 0xb240, 0xc8f0, 0xb3ec, 0x9373, 0x1, 0x0);
        gbc.writeMem(0x6eda, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xa2aa);
        EXPECT(gbc.pc(), 0x6edc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 037D
        gbc.setState(0x3d1c, 0xdcdf, 0x4c00, 0xf6b3, 0xc26b, 0xc56, 0x1, 0x1);
        gbc.writeMem(0x3d1c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xdcdf);
        EXPECT(gbc.pc(), 0x3d1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 037E
        gbc.setState(0x8f80, 0xfd3c, 0xbe20, 0xce4a, 0x525b, 0x9bba, 0x1, 0x1);
        gbc.writeMem(0x8f80, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xfd3c);
        EXPECT(gbc.pc(), 0x8f82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f80), 0xcb);
        EXPECT(gbc.readMem(0x8f81), 0x6a);
        // CB 6A 037F
        gbc.setState(0x32b5, 0x75d4, 0x47d0, 0x720d, 0x5191, 0xf98, 0x0, 0x0);
        gbc.writeMem(0x32b5, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x75d4);
        EXPECT(gbc.pc(), 0x32b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0380
        gbc.setState(0x6c9d, 0x8290, 0x94c0, 0x4b1b, 0x3aeb, 0xa7e, 0x1, 0x0);
        gbc.writeMem(0x6c9d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x8290);
        EXPECT(gbc.pc(), 0x6c9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0381
        gbc.setState(0x9268, 0x550f, 0xc1b0, 0xcb86, 0x710a, 0x50d6, 0x0, 0x1);
        gbc.writeMem(0x9268, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x550f);
        EXPECT(gbc.pc(), 0x926a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9268), 0xcb);
        EXPECT(gbc.readMem(0x9269), 0x6a);
        // CB 6A 0382
        gbc.setState(0x7356, 0xfb63, 0x2870, 0xae49, 0xb01a, 0x5d2, 0x0, 0x1);
        gbc.writeMem(0x7356, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xfb63);
        EXPECT(gbc.pc(), 0x7358);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0383
        gbc.setState(0xc5e8, 0x527, 0xe0c0, 0x777b, 0x2de2, 0x5cb5, 0x0, 0x0);
        gbc.writeMem(0xc5e8, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x527);
        EXPECT(gbc.pc(), 0xc5ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5e8), 0xcb);
        EXPECT(gbc.readMem(0xc5e9), 0x6a);
        // CB 6A 0384
        gbc.setState(0x2e58, 0x44ca, 0x4d50, 0xa454, 0xa9ff, 0x7678, 0x1, 0x0);
        gbc.writeMem(0x2e58, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x44ca);
        EXPECT(gbc.pc(), 0x2e5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0385
        gbc.setState(0x3d00, 0xc226, 0x5060, 0x7162, 0xff80, 0xb5dd, 0x1, 0x1);
        gbc.writeMem(0x3d00, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xc226);
        EXPECT(gbc.pc(), 0x3d02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0388
        gbc.setState(0x35f0, 0xd37, 0x21a0, 0x89cd, 0x3773, 0x2577, 0x0, 0x0);
        gbc.writeMem(0x35f0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xd37);
        EXPECT(gbc.pc(), 0x35f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0389
        gbc.setState(0xe4e6, 0xa245, 0xbfe0, 0xf86c, 0xf683, 0x87f5, 0x1, 0x0);
        gbc.writeMem(0xe4e6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xa245);
        EXPECT(gbc.pc(), 0xe4e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4e6), 0xcb);
        EXPECT(gbc.readMem(0xe4e7), 0x6a);
        // CB 6A 038A
        gbc.setState(0x9bb0, 0x7354, 0x9650, 0xec4, 0xacd3, 0xb55d, 0x0, 0x1);
        gbc.writeMem(0x9bb0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x7354);
        EXPECT(gbc.pc(), 0x9bb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bb0), 0xcb);
        EXPECT(gbc.readMem(0x9bb1), 0x6a);
        // CB 6A 038B
        gbc.setState(0x6f2c, 0x577, 0x340, 0xd97f, 0xfd2a, 0x45ed, 0x1, 0x1);
        gbc.writeMem(0x6f2c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x577);
        EXPECT(gbc.pc(), 0x6f2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 038C
        gbc.setState(0x9462, 0x8252, 0x8d0, 0xe0b6, 0x820, 0x81d, 0x0, 0x1);
        gbc.writeMem(0x9462, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x8252);
        EXPECT(gbc.pc(), 0x9464);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9462), 0xcb);
        EXPECT(gbc.readMem(0x9463), 0x6a);
        // CB 6A 038D
        gbc.setState(0x6ab6, 0xe69e, 0x5d10, 0x617, 0xb92d, 0x1251, 0x1, 0x1);
        gbc.writeMem(0x6ab6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xe69e);
        EXPECT(gbc.pc(), 0x6ab8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 038E
        gbc.setState(0x40f7, 0x2e5, 0x1260, 0x900b, 0x722e, 0x26, 0x1, 0x1);
        gbc.writeMem(0x40f7, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x2e5);
        EXPECT(gbc.pc(), 0x40f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 038F
        gbc.setState(0xd830, 0xfc0d, 0xd1c0, 0x7f5f, 0x6b3a, 0x9020, 0x1, 0x0);
        gbc.writeMem(0xd830, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xfc0d);
        EXPECT(gbc.pc(), 0xd832);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd830), 0xcb);
        EXPECT(gbc.readMem(0xd831), 0x6a);
        // CB 6A 0390
        gbc.setState(0xe41d, 0x23f7, 0xf210, 0x5512, 0x2398, 0xf853, 0x1, 0x1);
        gbc.writeMem(0xe41d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x23f7);
        EXPECT(gbc.pc(), 0xe41f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe41d), 0xcb);
        EXPECT(gbc.readMem(0xe41e), 0x6a);
        // CB 6A 0391
        gbc.setState(0xee36, 0x54df, 0xb270, 0x6368, 0xd69d, 0x116c, 0x1, 0x1);
        gbc.writeMem(0xee36, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x54df);
        EXPECT(gbc.pc(), 0xee38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee36), 0xcb);
        EXPECT(gbc.readMem(0xee37), 0x6a);
        // CB 6A 0392
        gbc.setState(0xb662, 0x5a2c, 0x1420, 0x8484, 0x8a8f, 0xaed7, 0x1, 0x1);
        gbc.writeMem(0xb662, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x5a2c);
        EXPECT(gbc.pc(), 0xb664);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb662), 0xcb);
        EXPECT(gbc.readMem(0xb663), 0x6a);
        // CB 6A 0393
        gbc.setState(0xb9de, 0xbd3e, 0x31a0, 0x9e95, 0xee5c, 0xcab9, 0x1, 0x1);
        gbc.writeMem(0xb9de, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xbd3e);
        EXPECT(gbc.pc(), 0xb9e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9de), 0xcb);
        EXPECT(gbc.readMem(0xb9df), 0x6a);
        // CB 6A 0394
        gbc.setState(0x658c, 0x542a, 0xa2f0, 0x728b, 0x8361, 0x2d9e, 0x0, 0x0);
        gbc.writeMem(0x658c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x542a);
        EXPECT(gbc.pc(), 0x658e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 0395
        gbc.setState(0xee47, 0x3b82, 0xfef0, 0xcf2, 0xcfc0, 0x6c3b, 0x0, 0x1);
        gbc.writeMem(0xee47, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x3b82);
        EXPECT(gbc.pc(), 0xee49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee47), 0xcb);
        EXPECT(gbc.readMem(0xee48), 0x6a);
        // CB 6A 0396
        gbc.setState(0x39de, 0x5213, 0xcde0, 0x9c31, 0x1732, 0xbab6, 0x1, 0x1);
        gbc.writeMem(0x39de, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x5213);
        EXPECT(gbc.pc(), 0x39e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 0397
        gbc.setState(0xc656, 0xd895, 0x28d0, 0xa69, 0xbd77, 0xa731, 0x0, 0x0);
        gbc.writeMem(0xc656, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xd895);
        EXPECT(gbc.pc(), 0xc658);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc656), 0xcb);
        EXPECT(gbc.readMem(0xc657), 0x6a);
        // CB 6A 0398
        gbc.setState(0xecdd, 0x6ee0, 0xf610, 0x6fa3, 0xcc69, 0xfd58, 0x0, 0x1);
        gbc.writeMem(0xecdd, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x6ee0);
        EXPECT(gbc.pc(), 0xecdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecdd), 0xcb);
        EXPECT(gbc.readMem(0xecde), 0x6a);
        // CB 6A 0399
        gbc.setState(0xae01, 0x8763, 0x8b50, 0xd152, 0x5a7d, 0x7e9a, 0x0, 0x1);
        gbc.writeMem(0xae01, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x8763);
        EXPECT(gbc.pc(), 0xae03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae01), 0xcb);
        EXPECT(gbc.readMem(0xae02), 0x6a);
        // CB 6A 039A
        gbc.setState(0xe083, 0xe520, 0x1ed0, 0x97ae, 0x6faa, 0xf3df, 0x1, 0x1);
        gbc.writeMem(0xe083, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xe520);
        EXPECT(gbc.pc(), 0xe085);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe083), 0xcb);
        EXPECT(gbc.readMem(0xe084), 0x6a);
        // CB 6A 039B
        gbc.setState(0xe1a4, 0x9c2f, 0x83c0, 0xfac5, 0xc23d, 0x9c3e, 0x1, 0x0);
        gbc.writeMem(0xe1a4, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x9c2f);
        EXPECT(gbc.pc(), 0xe1a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1a4), 0xcb);
        EXPECT(gbc.readMem(0xe1a5), 0x6a);
        // CB 6A 039C
        gbc.setState(0x88d4, 0xad9f, 0x7240, 0x4e00, 0xc224, 0xd797, 0x0, 0x0);
        gbc.writeMem(0x88d4, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xad9f);
        EXPECT(gbc.pc(), 0x88d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88d4), 0xcb);
        EXPECT(gbc.readMem(0x88d5), 0x6a);
        // CB 6A 039D
        gbc.setState(0x9f82, 0x75b5, 0x9260, 0xeacc, 0x92c, 0x56d, 0x1, 0x1);
        gbc.writeMem(0x9f82, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x75b5);
        EXPECT(gbc.pc(), 0x9f84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f82), 0xcb);
        EXPECT(gbc.readMem(0x9f83), 0x6a);
        // CB 6A 039E
        gbc.setState(0x51d7, 0xf69a, 0x7190, 0x9092, 0x7ac0, 0xbe9e, 0x1, 0x0);
        gbc.writeMem(0x51d7, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xf69a);
        EXPECT(gbc.pc(), 0x51d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 039F
        gbc.setState(0x8175, 0x8ec1, 0x84b0, 0xa7c, 0x5fee, 0x28fd, 0x1, 0x0);
        gbc.writeMem(0x8175, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x8ec1);
        EXPECT(gbc.pc(), 0x8177);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8175), 0xcb);
        EXPECT(gbc.readMem(0x8176), 0x6a);
        // CB 6A 03A0
        gbc.setState(0x571b, 0xd97c, 0x33b0, 0x67f3, 0x7ce5, 0x4bc, 0x1, 0x1);
        gbc.writeMem(0x571b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xd97c);
        EXPECT(gbc.pc(), 0x571d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03A1
        gbc.setState(0x5c6f, 0x6783, 0x3100, 0x7b0c, 0xf616, 0x3d60, 0x1, 0x0);
        gbc.writeMem(0x5c6f, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6783);
        EXPECT(gbc.pc(), 0x5c71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 03A2
        gbc.setState(0xc9e8, 0xacf7, 0xe140, 0x202f, 0xe9e4, 0xb9ea, 0x0, 0x1);
        gbc.writeMem(0xc9e8, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xacf7);
        EXPECT(gbc.pc(), 0xc9ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9e8), 0xcb);
        EXPECT(gbc.readMem(0xc9e9), 0x6a);
        // CB 6A 03A3
        gbc.setState(0x557a, 0x38a3, 0xd6c0, 0xe8fe, 0x3ff1, 0x241e, 0x0, 0x0);
        gbc.writeMem(0x557a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x38a3);
        EXPECT(gbc.pc(), 0x557c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 03A4
        gbc.setState(0x269b, 0x248f, 0xdd50, 0x6198, 0x4438, 0x9b1c, 0x0, 0x1);
        gbc.writeMem(0x269b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x248f);
        EXPECT(gbc.pc(), 0x269d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03A5
        gbc.setState(0x626a, 0x989c, 0x390, 0xa051, 0xa7c5, 0xa539, 0x0, 0x0);
        gbc.writeMem(0x626a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x989c);
        EXPECT(gbc.pc(), 0x626c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03A6
        gbc.setState(0x13c2, 0xc0e5, 0xbf0, 0x67aa, 0x6738, 0xd72d, 0x1, 0x1);
        gbc.writeMem(0x13c2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xc0e5);
        EXPECT(gbc.pc(), 0x13c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03A7
        gbc.setState(0x7b8a, 0x4a60, 0xd710, 0xc0e1, 0xb45a, 0x4a60, 0x1, 0x0);
        gbc.writeMem(0x7b8a, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x4a60);
        EXPECT(gbc.pc(), 0x7b8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03A8
        gbc.setState(0xaff7, 0x8e67, 0xf8c0, 0xf2d5, 0xd16a, 0x51c1, 0x0, 0x0);
        gbc.writeMem(0xaff7, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x8e67);
        EXPECT(gbc.pc(), 0xaff9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaff7), 0xcb);
        EXPECT(gbc.readMem(0xaff8), 0x6a);
        // CB 6A 03A9
        gbc.setState(0xe9bc, 0x902e, 0x2d00, 0xe78, 0x57d2, 0x5b42, 0x0, 0x1);
        gbc.writeMem(0xe9bc, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x902e);
        EXPECT(gbc.pc(), 0xe9be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9bc), 0xcb);
        EXPECT(gbc.readMem(0xe9bd), 0x6a);
        // CB 6A 03AA
        gbc.setState(0xcf6, 0x5db2, 0x6ca0, 0x654b, 0xc2da, 0xb99d, 0x0, 0x0);
        gbc.writeMem(0xcf6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x5db2);
        EXPECT(gbc.pc(), 0xcf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 03AB
        gbc.setState(0xb6b9, 0x3c3d, 0x12c0, 0x907, 0x773d, 0x3f28, 0x1, 0x1);
        gbc.writeMem(0xb6b9, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3c3d);
        EXPECT(gbc.pc(), 0xb6bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6b9), 0xcb);
        EXPECT(gbc.readMem(0xb6ba), 0x6a);
        // CB 6A 03AC
        gbc.setState(0xdf97, 0x7aac, 0x35f0, 0xba76, 0x6a9c, 0x832e, 0x0, 0x1);
        gbc.writeMem(0xdf97, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x7aac);
        EXPECT(gbc.pc(), 0xdf99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf97), 0xcb);
        EXPECT(gbc.readMem(0xdf98), 0x6a);
        // CB 6A 03AD
        gbc.setState(0x359d, 0x3d45, 0xa190, 0xdd45, 0xd683, 0xbe64, 0x0, 0x0);
        gbc.writeMem(0x359d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x3d45);
        EXPECT(gbc.pc(), 0x359f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03AE
        gbc.setState(0xa667, 0xbfd6, 0xefb0, 0x4e28, 0xa2a6, 0x3181, 0x0, 0x1);
        gbc.writeMem(0xa667, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xbfd6);
        EXPECT(gbc.pc(), 0xa669);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa667), 0xcb);
        EXPECT(gbc.readMem(0xa668), 0x6a);
        // CB 6A 03AF
        gbc.setState(0x8643, 0x378e, 0x5dc0, 0xd47b, 0x64b, 0xc60a, 0x1, 0x0);
        gbc.writeMem(0x8643, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x378e);
        EXPECT(gbc.pc(), 0x8645);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8643), 0xcb);
        EXPECT(gbc.readMem(0x8644), 0x6a);
        // CB 6A 03B0
        gbc.setState(0x1202, 0x78a0, 0xc7c0, 0x923b, 0x27a3, 0xd705, 0x0, 0x1);
        gbc.writeMem(0x1202, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x78a0);
        EXPECT(gbc.pc(), 0x1204);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 03B1
        gbc.setState(0xecea, 0xf7a0, 0x7090, 0x1696, 0xa576, 0x284d, 0x1, 0x0);
        gbc.writeMem(0xecea, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xf7a0);
        EXPECT(gbc.pc(), 0xecec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecea), 0xcb);
        EXPECT(gbc.readMem(0xeceb), 0x6a);
        // CB 6A 03B2
        gbc.setState(0x3606, 0x44e1, 0xd6b0, 0x3f64, 0x28e5, 0x7a73, 0x0, 0x1);
        gbc.writeMem(0x3606, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x44e1);
        EXPECT(gbc.pc(), 0x3608);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03B3
        gbc.setState(0x6fd, 0xe2fd, 0x13d0, 0xbef4, 0xaffb, 0xc6f0, 0x0, 0x1);
        gbc.writeMem(0x6fd, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xe2fd);
        EXPECT(gbc.pc(), 0x6ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03B4
        gbc.setState(0x4e58, 0x73ef, 0x9910, 0x271f, 0x89f7, 0x730b, 0x1, 0x0);
        gbc.writeMem(0x4e58, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x73ef);
        EXPECT(gbc.pc(), 0x4e5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03B5
        gbc.setState(0xb94b, 0x1cf, 0x9db0, 0xf45f, 0x1ea, 0x9c17, 0x0, 0x1);
        gbc.writeMem(0xb94b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x1cf);
        EXPECT(gbc.pc(), 0xb94d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb94b), 0xcb);
        EXPECT(gbc.readMem(0xb94c), 0x6a);
        // CB 6A 03B6
        gbc.setState(0x9d68, 0x2d6e, 0xc850, 0x41e6, 0x366a, 0xc8b7, 0x1, 0x1);
        gbc.writeMem(0x9d68, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x2d6e);
        EXPECT(gbc.pc(), 0x9d6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d68), 0xcb);
        EXPECT(gbc.readMem(0x9d69), 0x6a);
        // CB 6A 03B7
        gbc.setState(0x8465, 0xc9a, 0xa980, 0x1426, 0xbbf3, 0x6e9f, 0x0, 0x0);
        gbc.writeMem(0x8465, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xc9a);
        EXPECT(gbc.pc(), 0x8467);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8465), 0xcb);
        EXPECT(gbc.readMem(0x8466), 0x6a);
        // CB 6A 03B9
        gbc.setState(0xa9e2, 0x1b26, 0x15f0, 0xd51c, 0xfded, 0x5a, 0x0, 0x1);
        gbc.writeMem(0xa9e2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x1b26);
        EXPECT(gbc.pc(), 0xa9e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9e2), 0xcb);
        EXPECT(gbc.readMem(0xa9e3), 0x6a);
        // CB 6A 03BA
        gbc.setState(0x4b93, 0x8c1d, 0xb200, 0x783b, 0xcb4e, 0x339f, 0x1, 0x1);
        gbc.writeMem(0x4b93, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x8c1d);
        EXPECT(gbc.pc(), 0x4b95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 03BB
        gbc.setState(0x3f0d, 0x2510, 0x86d0, 0xc594, 0x549e, 0xe047, 0x1, 0x0);
        gbc.writeMem(0x3f0d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x2510);
        EXPECT(gbc.pc(), 0x3f0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03BC
        gbc.setState(0x1f6, 0x801e, 0xd7b0, 0xed12, 0x818f, 0x1f08, 0x1, 0x1);
        gbc.writeMem(0x1f6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x801e);
        EXPECT(gbc.pc(), 0x1f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03BD
        gbc.setState(0x7b9, 0x9819, 0xc120, 0x29b0, 0xf56a, 0x2a4a, 0x1, 0x0);
        gbc.writeMem(0x7b9, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x9819);
        EXPECT(gbc.pc(), 0x7bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 03BE
        gbc.setState(0xa34d, 0xa050, 0x4c80, 0x8dfc, 0x96f3, 0xc8a8, 0x0, 0x0);
        gbc.writeMem(0xa34d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xa050);
        EXPECT(gbc.pc(), 0xa34f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa34d), 0xcb);
        EXPECT(gbc.readMem(0xa34e), 0x6a);
        // CB 6A 03BF
        gbc.setState(0xa7b6, 0x32ec, 0x1680, 0xbd69, 0xdb0d, 0x404e, 0x1, 0x0);
        gbc.writeMem(0xa7b6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x32ec);
        EXPECT(gbc.pc(), 0xa7b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7b6), 0xcb);
        EXPECT(gbc.readMem(0xa7b7), 0x6a);
        // CB 6A 03C0
        gbc.setState(0x718e, 0x78c3, 0xe760, 0x436c, 0x56e4, 0xd086, 0x0, 0x0);
        gbc.writeMem(0x718e, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x78c3);
        EXPECT(gbc.pc(), 0x7190);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 03C1
        gbc.setState(0x581c, 0xee65, 0x8740, 0x3e0e, 0x951f, 0xc334, 0x0, 0x1);
        gbc.writeMem(0x581c, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xee65);
        EXPECT(gbc.pc(), 0x581e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 03C2
        gbc.setState(0x730, 0x38f1, 0x720, 0xf5c8, 0x891b, 0x66ab, 0x0, 0x0);
        gbc.writeMem(0x730, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x38f1);
        EXPECT(gbc.pc(), 0x732);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 03C3
        gbc.setState(0xd106, 0xe87, 0x5330, 0x68be, 0x853d, 0x542f, 0x0, 0x1);
        gbc.writeMem(0xd106, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xe87);
        EXPECT(gbc.pc(), 0xd108);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd106), 0xcb);
        EXPECT(gbc.readMem(0xd107), 0x6a);
        // CB 6A 03C4
        gbc.setState(0x8638, 0xd33d, 0x51d0, 0xa623, 0xea3, 0xa2a0, 0x1, 0x1);
        gbc.writeMem(0x8638, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xd33d);
        EXPECT(gbc.pc(), 0x863a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8638), 0xcb);
        EXPECT(gbc.readMem(0x8639), 0x6a);
        // CB 6A 03C5
        gbc.setState(0x4199, 0xbf99, 0x61d0, 0x7d71, 0x37d6, 0xabc7, 0x1, 0x0);
        gbc.writeMem(0x4199, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xbf99);
        EXPECT(gbc.pc(), 0x419b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03C6
        gbc.setState(0xae80, 0x75a6, 0x5bd0, 0x58ec, 0x3085, 0x7fa7, 0x0, 0x1);
        gbc.writeMem(0xae80, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x75a6);
        EXPECT(gbc.pc(), 0xae82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae80), 0xcb);
        EXPECT(gbc.readMem(0xae81), 0x6a);
        // CB 6A 03C7
        gbc.setState(0xbecb, 0x55f5, 0x10f0, 0x9897, 0xf2dc, 0xd378, 0x0, 0x1);
        gbc.writeMem(0xbecb, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x55f5);
        EXPECT(gbc.pc(), 0xbecd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbecb), 0xcb);
        EXPECT(gbc.readMem(0xbecc), 0x6a);
        // CB 6A 03C8
        gbc.setState(0xf88, 0xc04f, 0x530, 0x5673, 0xd61a, 0x3ecc, 0x1, 0x0);
        gbc.writeMem(0xf88, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xc04f);
        EXPECT(gbc.pc(), 0xf8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03C9
        gbc.setState(0xc4df, 0x10d0, 0xd3e0, 0xacef, 0xb428, 0x4275, 0x1, 0x1);
        gbc.writeMem(0xc4df, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x10d0);
        EXPECT(gbc.pc(), 0xc4e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4df), 0xcb);
        EXPECT(gbc.readMem(0xc4e0), 0x6a);
        // CB 6A 03CA
        gbc.setState(0xd3f2, 0xf240, 0x65d0, 0x2e58, 0xa5be, 0xab8, 0x0, 0x1);
        gbc.writeMem(0xd3f2, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xf240);
        EXPECT(gbc.pc(), 0xd3f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3f2), 0xcb);
        EXPECT(gbc.readMem(0xd3f3), 0x6a);
        // CB 6A 03CB
        gbc.setState(0x3875, 0x7f77, 0x8810, 0xecb1, 0x4772, 0x8be5, 0x0, 0x0);
        gbc.writeMem(0x3875, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x7f77);
        EXPECT(gbc.pc(), 0x3877);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03CC
        gbc.setState(0xabba, 0xbbce, 0xebb0, 0xc569, 0xdd24, 0x2845, 0x1, 0x1);
        gbc.writeMem(0xabba, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xbbce);
        EXPECT(gbc.pc(), 0xabbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabba), 0xcb);
        EXPECT(gbc.readMem(0xabbb), 0x6a);
        // CB 6A 03CD
        gbc.setState(0xec47, 0xb126, 0x6d20, 0x6c97, 0x87e, 0xc8a4, 0x1, 0x0);
        gbc.writeMem(0xec47, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xb126);
        EXPECT(gbc.pc(), 0xec49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec47), 0xcb);
        EXPECT(gbc.readMem(0xec48), 0x6a);
        // CB 6A 03CE
        gbc.setState(0x758b, 0xf619, 0x6cb0, 0xbbd1, 0x84c3, 0x26b8, 0x1, 0x1);
        gbc.writeMem(0x758b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xf619);
        EXPECT(gbc.pc(), 0x758d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03CF
        gbc.setState(0x69d, 0x8a14, 0xec60, 0x254, 0x7ff7, 0x3395, 0x1, 0x1);
        gbc.writeMem(0x69d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x8a14);
        EXPECT(gbc.pc(), 0x69f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 03D0
        gbc.setState(0xcd4d, 0x3efa, 0x38c0, 0xcc38, 0x2edd, 0xa078, 0x1, 0x1);
        gbc.writeMem(0xcd4d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x3efa);
        EXPECT(gbc.pc(), 0xcd4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd4d), 0xcb);
        EXPECT(gbc.readMem(0xcd4e), 0x6a);
        // CB 6A 03D1
        gbc.setState(0x58c0, 0x70c5, 0x1ad0, 0x19c9, 0x1444, 0xf485, 0x0, 0x1);
        gbc.writeMem(0x58c0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x70c5);
        EXPECT(gbc.pc(), 0x58c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03D2
        gbc.setState(0xeeed, 0xebe3, 0xfc0, 0x1d01, 0xbb1f, 0x9ad0, 0x0, 0x0);
        gbc.writeMem(0xeeed, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xebe3);
        EXPECT(gbc.pc(), 0xeeef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeeed), 0xcb);
        EXPECT(gbc.readMem(0xeeee), 0x6a);
        // CB 6A 03D3
        gbc.setState(0x1cc6, 0x4d6d, 0xacb0, 0x5356, 0xb24e, 0x1e73, 0x0, 0x0);
        gbc.writeMem(0x1cc6, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4d6d);
        EXPECT(gbc.pc(), 0x1cc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03D4
        gbc.setState(0x8eae, 0x484e, 0xd860, 0x4496, 0x9712, 0x98a1, 0x1, 0x0);
        gbc.writeMem(0x8eae, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x484e);
        EXPECT(gbc.pc(), 0x8eb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8eae), 0xcb);
        EXPECT(gbc.readMem(0x8eaf), 0x6a);
        // CB 6A 03D5
        gbc.setState(0x5680, 0x8bd2, 0xfc90, 0x670f, 0x3137, 0x2b4f, 0x0, 0x0);
        gbc.writeMem(0x5680, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x8bd2);
        EXPECT(gbc.pc(), 0x5682);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03D6
        gbc.setState(0x6092, 0x957c, 0xf150, 0xd417, 0xf76e, 0xeb52, 0x1, 0x0);
        gbc.writeMem(0x6092, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x957c);
        EXPECT(gbc.pc(), 0x6094);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03D7
        gbc.setState(0x670, 0x5852, 0x92a0, 0xe254, 0x653d, 0x48f8, 0x0, 0x0);
        gbc.writeMem(0x670, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x5852);
        EXPECT(gbc.pc(), 0x672);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 03D8
        gbc.setState(0xa5e3, 0x79b0, 0xec50, 0x824f, 0xfae0, 0xb80, 0x0, 0x1);
        gbc.writeMem(0xa5e3, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x79b0);
        EXPECT(gbc.pc(), 0xa5e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5e3), 0xcb);
        EXPECT(gbc.readMem(0xa5e4), 0x6a);
        // CB 6A 03D9
        gbc.setState(0xb480, 0x1e8e, 0x5c50, 0x68d0, 0x6d3, 0x510a, 0x1, 0x0);
        gbc.writeMem(0xb480, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x1e8e);
        EXPECT(gbc.pc(), 0xb482);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb480), 0xcb);
        EXPECT(gbc.readMem(0xb481), 0x6a);
        // CB 6A 03DA
        gbc.setState(0x8efc, 0x6eb0, 0xa1d0, 0x74b2, 0x4acf, 0xa462, 0x0, 0x1);
        gbc.writeMem(0x8efc, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x6eb0);
        EXPECT(gbc.pc(), 0x8efe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8efc), 0xcb);
        EXPECT(gbc.readMem(0x8efd), 0x6a);
        // CB 6A 03DB
        gbc.setState(0x3008, 0x70ed, 0xd6a0, 0x8e94, 0x47e1, 0x118f, 0x0, 0x1);
        gbc.writeMem(0x3008, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x70ed);
        EXPECT(gbc.pc(), 0x300a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 03DC
        gbc.setState(0xd32b, 0x22ad, 0x5ad0, 0x9ed2, 0x9069, 0x6b0c, 0x0, 0x0);
        gbc.writeMem(0xd32b, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x22ad);
        EXPECT(gbc.pc(), 0xd32d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd32b), 0xcb);
        EXPECT(gbc.readMem(0xd32c), 0x6a);
        // CB 6A 03DD
        gbc.setState(0x3a82, 0xa622, 0xecc0, 0x3e6b, 0xe2f0, 0x89ea, 0x1, 0x0);
        gbc.writeMem(0x3a82, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xa622);
        EXPECT(gbc.pc(), 0x3a84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 03DE
        gbc.setState(0xd5d7, 0xf80b, 0x6d20, 0x80d, 0x15d1, 0xb546, 0x1, 0x0);
        gbc.writeMem(0xd5d7, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xf80b);
        EXPECT(gbc.pc(), 0xd5d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5d7), 0xcb);
        EXPECT(gbc.readMem(0xd5d8), 0x6a);
        // CB 6A 03DF
        gbc.setState(0x4567, 0x88a5, 0x95f0, 0xd39e, 0x82b5, 0xdc0b, 0x1, 0x1);
        gbc.writeMem(0x4567, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x88a5);
        EXPECT(gbc.pc(), 0x4569);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03E0
        gbc.setState(0xbd60, 0x26bc, 0x6d10, 0x464c, 0x37cf, 0x1a32, 0x1, 0x1);
        gbc.writeMem(0xbd60, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x26bc);
        EXPECT(gbc.pc(), 0xbd62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd60), 0xcb);
        EXPECT(gbc.readMem(0xbd61), 0x6a);
        // CB 6A 03E1
        gbc.setState(0x4f7d, 0x83f3, 0x7570, 0xa82d, 0x4d96, 0xac7d, 0x0, 0x0);
        gbc.writeMem(0x4f7d, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x83f3);
        EXPECT(gbc.pc(), 0x4f7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03E3
        gbc.setState(0x71c0, 0xa7ed, 0x5890, 0x4fdc, 0x97f3, 0xf5ed, 0x0, 0x1);
        gbc.writeMem(0x71c0, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xa7ed);
        EXPECT(gbc.pc(), 0x71c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 6A 03E4
        gbc.setState(0xb2ff, 0xfe0d, 0x84f0, 0x4a00, 0x496b, 0x65e7, 0x0, 0x1);
        gbc.writeMem(0xb2ff, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xfe0d);
        EXPECT(gbc.pc(), 0xb301);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2ff), 0xcb);
        EXPECT(gbc.readMem(0xb300), 0x6a);
        // CB 6A 03E5
        gbc.setState(0x2632, 0xc0e, 0xc720, 0x982c, 0x8ada, 0xa285, 0x0, 0x0);
        gbc.writeMem(0x2632, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc0e);
        EXPECT(gbc.pc(), 0x2634);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 6A 03E6
        gbc.setState(0xa5ae, 0x1f7c, 0x2d00, 0x8b99, 0xd9a7, 0xe25a, 0x0, 0x0);
        gbc.writeMem(0xa5ae, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x1f7c);
        EXPECT(gbc.pc(), 0xa5b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5ae), 0xcb);
        EXPECT(gbc.readMem(0xa5af), 0x6a);
        // CB 6A 03E7
        gbc.setState(0x10fb, 0x2948, 0x2e30, 0xe0f, 0x3089, 0xf831, 0x1, 0x1);
        gbc.writeMem(0x10fb, { 0xcb, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x2948);
        EXPECT(gbc.pc(), 0x10fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
    }
}
#endif
